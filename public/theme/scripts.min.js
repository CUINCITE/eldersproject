(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(global = global || self, factory(global.window = global.window || {}));
}(this, (function (exports) { 'use strict';

	var _svgPathExp = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,
	    _scientific = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,
	    _DEG2RAD = Math.PI / 180,
	    _sin = Math.sin,
	    _cos = Math.cos,
	    _abs = Math.abs,
	    _sqrt = Math.sqrt,
	    _isNumber = function _isNumber(value) {
	  return typeof value === "number";
	},
	    _roundingNum = 1e5,
	    _round = function _round(value) {
	  return Math.round(value * _roundingNum) / _roundingNum || 0;
	};
	function transformRawPath(rawPath, a, b, c, d, tx, ty) {
	  var j = rawPath.length,
	      segment,
	      l,
	      i,
	      x,
	      y;

	  while (--j > -1) {
	    segment = rawPath[j];
	    l = segment.length;

	    for (i = 0; i < l; i += 2) {
	      x = segment[i];
	      y = segment[i + 1];
	      segment[i] = x * a + y * c + tx;
	      segment[i + 1] = x * b + y * d + ty;
	    }
	  }

	  rawPath._dirty = 1;
	  return rawPath;
	}

	function arcToSegment(lastX, lastY, rx, ry, angle, largeArcFlag, sweepFlag, x, y) {
	  if (lastX === x && lastY === y) {
	    return;
	  }

	  rx = _abs(rx);
	  ry = _abs(ry);

	  var angleRad = angle % 360 * _DEG2RAD,
	      cosAngle = _cos(angleRad),
	      sinAngle = _sin(angleRad),
	      PI = Math.PI,
	      TWOPI = PI * 2,
	      dx2 = (lastX - x) / 2,
	      dy2 = (lastY - y) / 2,
	      x1 = cosAngle * dx2 + sinAngle * dy2,
	      y1 = -sinAngle * dx2 + cosAngle * dy2,
	      x1_sq = x1 * x1,
	      y1_sq = y1 * y1,
	      radiiCheck = x1_sq / (rx * rx) + y1_sq / (ry * ry);

	  if (radiiCheck > 1) {
	    rx = _sqrt(radiiCheck) * rx;
	    ry = _sqrt(radiiCheck) * ry;
	  }

	  var rx_sq = rx * rx,
	      ry_sq = ry * ry,
	      sq = (rx_sq * ry_sq - rx_sq * y1_sq - ry_sq * x1_sq) / (rx_sq * y1_sq + ry_sq * x1_sq);

	  if (sq < 0) {
	    sq = 0;
	  }

	  var coef = (largeArcFlag === sweepFlag ? -1 : 1) * _sqrt(sq),
	      cx1 = coef * (rx * y1 / ry),
	      cy1 = coef * -(ry * x1 / rx),
	      sx2 = (lastX + x) / 2,
	      sy2 = (lastY + y) / 2,
	      cx = sx2 + (cosAngle * cx1 - sinAngle * cy1),
	      cy = sy2 + (sinAngle * cx1 + cosAngle * cy1),
	      ux = (x1 - cx1) / rx,
	      uy = (y1 - cy1) / ry,
	      vx = (-x1 - cx1) / rx,
	      vy = (-y1 - cy1) / ry,
	      temp = ux * ux + uy * uy,
	      angleStart = (uy < 0 ? -1 : 1) * Math.acos(ux / _sqrt(temp)),
	      angleExtent = (ux * vy - uy * vx < 0 ? -1 : 1) * Math.acos((ux * vx + uy * vy) / _sqrt(temp * (vx * vx + vy * vy)));

	  isNaN(angleExtent) && (angleExtent = PI);

	  if (!sweepFlag && angleExtent > 0) {
	    angleExtent -= TWOPI;
	  } else if (sweepFlag && angleExtent < 0) {
	    angleExtent += TWOPI;
	  }

	  angleStart %= TWOPI;
	  angleExtent %= TWOPI;

	  var segments = Math.ceil(_abs(angleExtent) / (TWOPI / 4)),
	      rawPath = [],
	      angleIncrement = angleExtent / segments,
	      controlLength = 4 / 3 * _sin(angleIncrement / 2) / (1 + _cos(angleIncrement / 2)),
	      ma = cosAngle * rx,
	      mb = sinAngle * rx,
	      mc = sinAngle * -ry,
	      md = cosAngle * ry,
	      i;

	  for (i = 0; i < segments; i++) {
	    angle = angleStart + i * angleIncrement;
	    x1 = _cos(angle);
	    y1 = _sin(angle);
	    ux = _cos(angle += angleIncrement);
	    uy = _sin(angle);
	    rawPath.push(x1 - controlLength * y1, y1 + controlLength * x1, ux + controlLength * uy, uy - controlLength * ux, ux, uy);
	  }

	  for (i = 0; i < rawPath.length; i += 2) {
	    x1 = rawPath[i];
	    y1 = rawPath[i + 1];
	    rawPath[i] = x1 * ma + y1 * mc + cx;
	    rawPath[i + 1] = x1 * mb + y1 * md + cy;
	  }

	  rawPath[i - 2] = x;
	  rawPath[i - 1] = y;
	  return rawPath;
	}

	function stringToRawPath(d) {
	  var a = (d + "").replace(_scientific, function (m) {
	    var n = +m;
	    return n < 0.0001 && n > -0.0001 ? 0 : n;
	  }).match(_svgPathExp) || [],
	      path = [],
	      relativeX = 0,
	      relativeY = 0,
	      twoThirds = 2 / 3,
	      elements = a.length,
	      points = 0,
	      errorMessage = "ERROR: malformed path: " + d,
	      i,
	      j,
	      x,
	      y,
	      command,
	      isRelative,
	      segment,
	      startX,
	      startY,
	      difX,
	      difY,
	      beziers,
	      prevCommand,
	      flag1,
	      flag2,
	      line = function line(sx, sy, ex, ey) {
	    difX = (ex - sx) / 3;
	    difY = (ey - sy) / 3;
	    segment.push(sx + difX, sy + difY, ex - difX, ey - difY, ex, ey);
	  };

	  if (!d || !isNaN(a[0]) || isNaN(a[1])) {
	    console.log(errorMessage);
	    return path;
	  }

	  for (i = 0; i < elements; i++) {
	    prevCommand = command;

	    if (isNaN(a[i])) {
	      command = a[i].toUpperCase();
	      isRelative = command !== a[i];
	    } else {
	      i--;
	    }

	    x = +a[i + 1];
	    y = +a[i + 2];

	    if (isRelative) {
	      x += relativeX;
	      y += relativeY;
	    }

	    if (!i) {
	      startX = x;
	      startY = y;
	    }

	    if (command === "M") {
	      if (segment) {
	        if (segment.length < 8) {
	          path.length -= 1;
	        } else {
	          points += segment.length;
	        }
	      }

	      relativeX = startX = x;
	      relativeY = startY = y;
	      segment = [x, y];
	      path.push(segment);
	      i += 2;
	      command = "L";
	    } else if (command === "C") {
	      if (!segment) {
	        segment = [0, 0];
	      }

	      if (!isRelative) {
	        relativeX = relativeY = 0;
	      }

	      segment.push(x, y, relativeX + a[i + 3] * 1, relativeY + a[i + 4] * 1, relativeX += a[i + 5] * 1, relativeY += a[i + 6] * 1);
	      i += 6;
	    } else if (command === "S") {
	      difX = relativeX;
	      difY = relativeY;

	      if (prevCommand === "C" || prevCommand === "S") {
	        difX += relativeX - segment[segment.length - 4];
	        difY += relativeY - segment[segment.length - 3];
	      }

	      if (!isRelative) {
	        relativeX = relativeY = 0;
	      }

	      segment.push(difX, difY, x, y, relativeX += a[i + 3] * 1, relativeY += a[i + 4] * 1);
	      i += 4;
	    } else if (command === "Q") {
	      difX = relativeX + (x - relativeX) * twoThirds;
	      difY = relativeY + (y - relativeY) * twoThirds;

	      if (!isRelative) {
	        relativeX = relativeY = 0;
	      }

	      relativeX += a[i + 3] * 1;
	      relativeY += a[i + 4] * 1;
	      segment.push(difX, difY, relativeX + (x - relativeX) * twoThirds, relativeY + (y - relativeY) * twoThirds, relativeX, relativeY);
	      i += 4;
	    } else if (command === "T") {
	      difX = relativeX - segment[segment.length - 4];
	      difY = relativeY - segment[segment.length - 3];
	      segment.push(relativeX + difX, relativeY + difY, x + (relativeX + difX * 1.5 - x) * twoThirds, y + (relativeY + difY * 1.5 - y) * twoThirds, relativeX = x, relativeY = y);
	      i += 2;
	    } else if (command === "H") {
	      line(relativeX, relativeY, relativeX = x, relativeY);
	      i += 1;
	    } else if (command === "V") {
	      line(relativeX, relativeY, relativeX, relativeY = x + (isRelative ? relativeY - relativeX : 0));
	      i += 1;
	    } else if (command === "L" || command === "Z") {
	      if (command === "Z") {
	        x = startX;
	        y = startY;
	        segment.closed = true;
	      }

	      if (command === "L" || _abs(relativeX - x) > 0.5 || _abs(relativeY - y) > 0.5) {
	        line(relativeX, relativeY, x, y);

	        if (command === "L") {
	          i += 2;
	        }
	      }

	      relativeX = x;
	      relativeY = y;
	    } else if (command === "A") {
	      flag1 = a[i + 4];
	      flag2 = a[i + 5];
	      difX = a[i + 6];
	      difY = a[i + 7];
	      j = 7;

	      if (flag1.length > 1) {
	        if (flag1.length < 3) {
	          difY = difX;
	          difX = flag2;
	          j--;
	        } else {
	          difY = flag2;
	          difX = flag1.substr(2);
	          j -= 2;
	        }

	        flag2 = flag1.charAt(1);
	        flag1 = flag1.charAt(0);
	      }

	      beziers = arcToSegment(relativeX, relativeY, +a[i + 1], +a[i + 2], +a[i + 3], +flag1, +flag2, (isRelative ? relativeX : 0) + difX * 1, (isRelative ? relativeY : 0) + difY * 1);
	      i += j;

	      if (beziers) {
	        for (j = 0; j < beziers.length; j++) {
	          segment.push(beziers[j]);
	        }
	      }

	      relativeX = segment[segment.length - 2];
	      relativeY = segment[segment.length - 1];
	    } else {
	      console.log(errorMessage);
	    }
	  }

	  i = segment.length;

	  if (i < 6) {
	    path.pop();
	    i = 0;
	  } else if (segment[0] === segment[i - 2] && segment[1] === segment[i - 1]) {
	    segment.closed = true;
	  }

	  path.totalPoints = points + i;
	  return path;
	}
	function rawPathToString(rawPath) {
	  if (_isNumber(rawPath[0])) {
	    rawPath = [rawPath];
	  }

	  var result = "",
	      l = rawPath.length,
	      sl,
	      s,
	      i,
	      segment;

	  for (s = 0; s < l; s++) {
	    segment = rawPath[s];
	    result += "M" + _round(segment[0]) + "," + _round(segment[1]) + " C";
	    sl = segment.length;

	    for (i = 2; i < sl; i++) {
	      result += _round(segment[i++]) + "," + _round(segment[i++]) + " " + _round(segment[i++]) + "," + _round(segment[i++]) + " " + _round(segment[i++]) + "," + _round(segment[i]) + " ";
	    }

	    if (segment.closed) {
	      result += "z";
	    }
	  }

	  return result;
	}

	/*!
	 * CustomEase 3.12.5
	 * https://gsap.com
	 *
	 * @license Copyright 2008-2024, GreenSock. All rights reserved.
	 * Subject to the terms at https://gsap.com/standard-license or for
	 * Club GSAP members, the agreement issued with that membership.
	 * @author: Jack Doyle, jack@greensock.com
	*/

	var gsap,
	    _coreInitted,
	    _getGSAP = function _getGSAP() {
	  return gsap || typeof window !== "undefined" && (gsap = window.gsap) && gsap.registerPlugin && gsap;
	},
	    _initCore = function _initCore() {
	  gsap = _getGSAP();

	  if (gsap) {
	    gsap.registerEase("_CE", CustomEase.create);
	    _coreInitted = 1;
	  } else {
	    console.warn("Please gsap.registerPlugin(CustomEase)");
	  }
	},
	    _bigNum = 1e20,
	    _round$1 = function _round(value) {
	  return ~~(value * 1000 + (value < 0 ? -.5 : .5)) / 1000;
	},
	    _numExp = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,
	    _needsParsingExp = /[cLlsSaAhHvVtTqQ]/g,
	    _findMinimum = function _findMinimum(values) {
	  var l = values.length,
	      min = _bigNum,
	      i;

	  for (i = 1; i < l; i += 6) {
	    +values[i] < min && (min = +values[i]);
	  }

	  return min;
	},
	    _normalize = function _normalize(values, height, originY) {
	  if (!originY && originY !== 0) {
	    originY = Math.max(+values[values.length - 1], +values[1]);
	  }

	  var tx = +values[0] * -1,
	      ty = -originY,
	      l = values.length,
	      sx = 1 / (+values[l - 2] + tx),
	      sy = -height || (Math.abs(+values[l - 1] - +values[1]) < 0.01 * (+values[l - 2] - +values[0]) ? _findMinimum(values) + ty : +values[l - 1] + ty),
	      i;

	  if (sy) {
	    sy = 1 / sy;
	  } else {
	    sy = -sx;
	  }

	  for (i = 0; i < l; i += 2) {
	    values[i] = (+values[i] + tx) * sx;
	    values[i + 1] = (+values[i + 1] + ty) * sy;
	  }
	},
	    _bezierToPoints = function _bezierToPoints(x1, y1, x2, y2, x3, y3, x4, y4, threshold, points, index) {
	  var x12 = (x1 + x2) / 2,
	      y12 = (y1 + y2) / 2,
	      x23 = (x2 + x3) / 2,
	      y23 = (y2 + y3) / 2,
	      x34 = (x3 + x4) / 2,
	      y34 = (y3 + y4) / 2,
	      x123 = (x12 + x23) / 2,
	      y123 = (y12 + y23) / 2,
	      x234 = (x23 + x34) / 2,
	      y234 = (y23 + y34) / 2,
	      x1234 = (x123 + x234) / 2,
	      y1234 = (y123 + y234) / 2,
	      dx = x4 - x1,
	      dy = y4 - y1,
	      d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx),
	      d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx),
	      length;

	  if (!points) {
	    points = [{
	      x: x1,
	      y: y1
	    }, {
	      x: x4,
	      y: y4
	    }];
	    index = 1;
	  }

	  points.splice(index || points.length - 1, 0, {
	    x: x1234,
	    y: y1234
	  });

	  if ((d2 + d3) * (d2 + d3) > threshold * (dx * dx + dy * dy)) {
	    length = points.length;

	    _bezierToPoints(x1, y1, x12, y12, x123, y123, x1234, y1234, threshold, points, index);

	    _bezierToPoints(x1234, y1234, x234, y234, x34, y34, x4, y4, threshold, points, index + 1 + (points.length - length));
	  }

	  return points;
	};

	var CustomEase = function () {
	  function CustomEase(id, data, config) {
	    _coreInitted || _initCore();
	    this.id = id;
	     this.setData(data, config);
	  }

	  var _proto = CustomEase.prototype;

	  _proto.setData = function setData(data, config) {
	    config = config || {};
	    data = data || "0,0,1,1";
	    var values = data.match(_numExp),
	        closest = 1,
	        points = [],
	        lookup = [],
	        precision = config.precision || 1,
	        fast = precision <= 1,
	        l,
	        a1,
	        a2,
	        i,
	        inc,
	        j,
	        point,
	        prevPoint,
	        p;
	    this.data = data;

	    if (_needsParsingExp.test(data) || ~data.indexOf("M") && data.indexOf("C") < 0) {
	      values = stringToRawPath(data)[0];
	    }

	    l = values.length;

	    if (l === 4) {
	      values.unshift(0, 0);
	      values.push(1, 1);
	      l = 8;
	    } else if ((l - 2) % 6) {
	      throw "Invalid CustomEase";
	    }

	    if (+values[0] !== 0 || +values[l - 2] !== 1) {
	      _normalize(values, config.height, config.originY);
	    }

	    this.segment = values;

	    for (i = 2; i < l; i += 6) {
	      a1 = {
	        x: +values[i - 2],
	        y: +values[i - 1]
	      };
	      a2 = {
	        x: +values[i + 4],
	        y: +values[i + 5]
	      };
	      points.push(a1, a2);

	      _bezierToPoints(a1.x, a1.y, +values[i], +values[i + 1], +values[i + 2], +values[i + 3], a2.x, a2.y, 1 / (precision * 200000), points, points.length - 1);
	    }

	    l = points.length;

	    for (i = 0; i < l; i++) {
	      point = points[i];
	      prevPoint = points[i - 1] || point;

	      if ((point.x > prevPoint.x || prevPoint.y !== point.y && prevPoint.x === point.x || point === prevPoint) && point.x <= 1) {
	        prevPoint.cx = point.x - prevPoint.x;
	        prevPoint.cy = point.y - prevPoint.y;
	        prevPoint.n = point;
	        prevPoint.nx = point.x;

	        if (fast && i > 1 && Math.abs(prevPoint.cy / prevPoint.cx - points[i - 2].cy / points[i - 2].cx) > 2) {
	          fast = 0;
	        }

	        if (prevPoint.cx < closest) {
	          if (!prevPoint.cx) {
	            prevPoint.cx = 0.001;

	            if (i === l - 1) {
	              prevPoint.x -= 0.001;
	              closest = Math.min(closest, 0.001);
	              fast = 0;
	            }
	          } else {
	            closest = prevPoint.cx;
	          }
	        }
	      } else {
	        points.splice(i--, 1);
	        l--;
	      }
	    }

	    l = 1 / closest + 1 | 0;
	    inc = 1 / l;
	    j = 0;
	    point = points[0];

	    if (fast) {
	      for (i = 0; i < l; i++) {
	        p = i * inc;

	        if (point.nx < p) {
	          point = points[++j];
	        }

	        a1 = point.y + (p - point.x) / point.cx * point.cy;
	        lookup[i] = {
	          x: p,
	          cx: inc,
	          y: a1,
	          cy: 0,
	          nx: 9
	        };

	        if (i) {
	          lookup[i - 1].cy = a1 - lookup[i - 1].y;
	        }
	      }

	      lookup[l - 1].cy = points[points.length - 1].y - a1;
	    } else {
	      for (i = 0; i < l; i++) {
	        if (point.nx < i * inc) {
	          point = points[++j];
	        }

	        lookup[i] = point;
	      }

	      if (j < points.length - 1) {
	        lookup[i - 1] = points[points.length - 2];
	      }
	    }

	    this.ease = function (p) {
	      var point = lookup[p * l | 0] || lookup[l - 1];

	      if (point.nx < p) {
	        point = point.n;
	      }

	      return point.y + (p - point.x) / point.cx * point.cy;
	    };

	    this.ease.custom = this;
	    this.id && gsap && gsap.registerEase(this.id, this.ease);
	    return this;
	  };

	  _proto.getSVGData = function getSVGData(config) {
	    return CustomEase.getSVGData(this, config);
	  };

	  CustomEase.create = function create(id, data, config) {
	    return new CustomEase(id, data, config).ease;
	  };

	  CustomEase.register = function register(core) {
	    gsap = core;

	    _initCore();
	  };

	  CustomEase.get = function get(id) {
	    return gsap.parseEase(id);
	  };

	  CustomEase.getSVGData = function getSVGData(ease, config) {
	    config = config || {};
	    var width = config.width || 100,
	        height = config.height || 100,
	        x = config.x || 0,
	        y = (config.y || 0) + height,
	        e = gsap.utils.toArray(config.path)[0],
	        a,
	        slope,
	        i,
	        inc,
	        tx,
	        ty,
	        precision,
	        threshold,
	        prevX,
	        prevY;

	    if (config.invert) {
	      height = -height;
	      y = 0;
	    }

	    if (typeof ease === "string") {
	      ease = gsap.parseEase(ease);
	    }

	    if (ease.custom) {
	      ease = ease.custom;
	    }

	    if (ease instanceof CustomEase) {
	      a = rawPathToString(transformRawPath([ease.segment], width, 0, 0, -height, x, y));
	    } else {
	      a = [x, y];
	      precision = Math.max(5, (config.precision || 1) * 200);
	      inc = 1 / precision;
	      precision += 2;
	      threshold = 5 / precision;
	      prevX = _round$1(x + inc * width);
	      prevY = _round$1(y + ease(inc) * -height);
	      slope = (prevY - y) / (prevX - x);

	      for (i = 2; i < precision; i++) {
	        tx = _round$1(x + i * inc * width);
	        ty = _round$1(y + ease(i * inc) * -height);

	        if (Math.abs((ty - prevY) / (tx - prevX) - slope) > threshold || i === precision - 1) {
	          a.push(prevX, prevY);
	          slope = (ty - prevY) / (tx - prevX);
	        }

	        prevX = tx;
	        prevY = ty;
	      }

	      a = "M" + a.join(",");
	    }

	    e && e.setAttribute("d", a);
	    return a;
	  };

	  return CustomEase;
	}();
	_getGSAP() && gsap.registerPlugin(CustomEase);
	CustomEase.version = "3.12.5";

	exports.CustomEase = CustomEase;
	exports.default = CustomEase;

	Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],2:[function(require,module,exports){
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(global = global || self, factory(global.window = global.window || {}));
}(this, (function (exports) { 'use strict';

	/*!
	 * ScrollToPlugin 3.12.5
	 * https://gsap.com
	 *
	 * @license Copyright 2008-2024, GreenSock. All rights reserved.
	 * Subject to the terms at https://gsap.com/standard-license or for
	 * Club GSAP members, the agreement issued with that membership.
	 * @author: Jack Doyle, jack@greensock.com
	*/
	var gsap,
	    _coreInitted,
	    _window,
	    _docEl,
	    _body,
	    _toArray,
	    _config,
	    ScrollTrigger,
	    _windowExists = function _windowExists() {
	  return typeof window !== "undefined";
	},
	    _getGSAP = function _getGSAP() {
	  return gsap || _windowExists() && (gsap = window.gsap) && gsap.registerPlugin && gsap;
	},
	    _isString = function _isString(value) {
	  return typeof value === "string";
	},
	    _isFunction = function _isFunction(value) {
	  return typeof value === "function";
	},
	    _max = function _max(element, axis) {
	  var dim = axis === "x" ? "Width" : "Height",
	      scroll = "scroll" + dim,
	      client = "client" + dim;
	  return element === _window || element === _docEl || element === _body ? Math.max(_docEl[scroll], _body[scroll]) - (_window["inner" + dim] || _docEl[client] || _body[client]) : element[scroll] - element["offset" + dim];
	},
	    _buildGetter = function _buildGetter(e, axis) {
	  var p = "scroll" + (axis === "x" ? "Left" : "Top");

	  if (e === _window) {
	    if (e.pageXOffset != null) {
	      p = "page" + axis.toUpperCase() + "Offset";
	    } else {
	      e = _docEl[p] != null ? _docEl : _body;
	    }
	  }

	  return function () {
	    return e[p];
	  };
	},
	    _clean = function _clean(value, index, target, targets) {
	  _isFunction(value) && (value = value(index, target, targets));

	  if (typeof value !== "object") {
	    return _isString(value) && value !== "max" && value.charAt(1) !== "=" ? {
	      x: value,
	      y: value
	    } : {
	      y: value
	    };
	  } else if (value.nodeType) {
	    return {
	      y: value,
	      x: value
	    };
	  } else {
	    var result = {},
	        p;

	    for (p in value) {
	      result[p] = p !== "onAutoKill" && _isFunction(value[p]) ? value[p](index, target, targets) : value[p];
	    }

	    return result;
	  }
	},
	    _getOffset = function _getOffset(element, container) {
	  element = _toArray(element)[0];

	  if (!element || !element.getBoundingClientRect) {
	    return console.warn("scrollTo target doesn't exist. Using 0") || {
	      x: 0,
	      y: 0
	    };
	  }

	  var rect = element.getBoundingClientRect(),
	      isRoot = !container || container === _window || container === _body,
	      cRect = isRoot ? {
	    top: _docEl.clientTop - (_window.pageYOffset || _docEl.scrollTop || _body.scrollTop || 0),
	    left: _docEl.clientLeft - (_window.pageXOffset || _docEl.scrollLeft || _body.scrollLeft || 0)
	  } : container.getBoundingClientRect(),
	      offsets = {
	    x: rect.left - cRect.left,
	    y: rect.top - cRect.top
	  };

	  if (!isRoot && container) {
	    offsets.x += _buildGetter(container, "x")();
	    offsets.y += _buildGetter(container, "y")();
	  }

	  return offsets;
	},
	    _parseVal = function _parseVal(value, target, axis, currentVal, offset) {
	  return !isNaN(value) && typeof value !== "object" ? parseFloat(value) - offset : _isString(value) && value.charAt(1) === "=" ? parseFloat(value.substr(2)) * (value.charAt(0) === "-" ? -1 : 1) + currentVal - offset : value === "max" ? _max(target, axis) - offset : Math.min(_max(target, axis), _getOffset(value, target)[axis] - offset);
	},
	    _initCore = function _initCore() {
	  gsap = _getGSAP();

	  if (_windowExists() && gsap && typeof document !== "undefined" && document.body) {
	    _window = window;
	    _body = document.body;
	    _docEl = document.documentElement;
	    _toArray = gsap.utils.toArray;
	    gsap.config({
	      autoKillThreshold: 7
	    });
	    _config = gsap.config();
	    _coreInitted = 1;
	  }
	};

	var ScrollToPlugin = {
	  version: "3.12.5",
	  name: "scrollTo",
	  rawVars: 1,
	  register: function register(core) {
	    gsap = core;

	    _initCore();
	  },
	  init: function init(target, value, tween, index, targets) {
	    _coreInitted || _initCore();
	    var data = this,
	        snapType = gsap.getProperty(target, "scrollSnapType");
	    data.isWin = target === _window;
	    data.target = target;
	    data.tween = tween;
	    value = _clean(value, index, target, targets);
	    data.vars = value;
	    data.autoKill = !!value.autoKill;
	    data.getX = _buildGetter(target, "x");
	    data.getY = _buildGetter(target, "y");
	    data.x = data.xPrev = data.getX();
	    data.y = data.yPrev = data.getY();
	    ScrollTrigger || (ScrollTrigger = gsap.core.globals().ScrollTrigger);
	    gsap.getProperty(target, "scrollBehavior") === "smooth" && gsap.set(target, {
	      scrollBehavior: "auto"
	    });

	    if (snapType && snapType !== "none") {
	      data.snap = 1;
	      data.snapInline = target.style.scrollSnapType;
	      target.style.scrollSnapType = "none";
	    }

	    if (value.x != null) {
	      data.add(data, "x", data.x, _parseVal(value.x, target, "x", data.x, value.offsetX || 0), index, targets);

	      data._props.push("scrollTo_x");
	    } else {
	      data.skipX = 1;
	    }

	    if (value.y != null) {
	      data.add(data, "y", data.y, _parseVal(value.y, target, "y", data.y, value.offsetY || 0), index, targets);

	      data._props.push("scrollTo_y");
	    } else {
	      data.skipY = 1;
	    }
	  },
	  render: function render(ratio, data) {
	    var pt = data._pt,
	        target = data.target,
	        tween = data.tween,
	        autoKill = data.autoKill,
	        xPrev = data.xPrev,
	        yPrev = data.yPrev,
	        isWin = data.isWin,
	        snap = data.snap,
	        snapInline = data.snapInline,
	        x,
	        y,
	        yDif,
	        xDif,
	        threshold;

	    while (pt) {
	      pt.r(ratio, pt.d);
	      pt = pt._next;
	    }

	    x = isWin || !data.skipX ? data.getX() : xPrev;
	    y = isWin || !data.skipY ? data.getY() : yPrev;
	    yDif = y - yPrev;
	    xDif = x - xPrev;
	    threshold = _config.autoKillThreshold;

	    if (data.x < 0) {
	      data.x = 0;
	    }

	    if (data.y < 0) {
	      data.y = 0;
	    }

	    if (autoKill) {
	      if (!data.skipX && (xDif > threshold || xDif < -threshold) && x < _max(target, "x")) {
	        data.skipX = 1;
	      }

	      if (!data.skipY && (yDif > threshold || yDif < -threshold) && y < _max(target, "y")) {
	        data.skipY = 1;
	      }

	      if (data.skipX && data.skipY) {
	        tween.kill();
	        data.vars.onAutoKill && data.vars.onAutoKill.apply(tween, data.vars.onAutoKillParams || []);
	      }
	    }

	    if (isWin) {
	      _window.scrollTo(!data.skipX ? data.x : x, !data.skipY ? data.y : y);
	    } else {
	      data.skipY || (target.scrollTop = data.y);
	      data.skipX || (target.scrollLeft = data.x);
	    }

	    if (snap && (ratio === 1 || ratio === 0)) {
	      y = target.scrollTop;
	      x = target.scrollLeft;
	      snapInline ? target.style.scrollSnapType = snapInline : target.style.removeProperty("scroll-snap-type");
	      target.scrollTop = y + 1;
	      target.scrollLeft = x + 1;
	      target.scrollTop = y;
	      target.scrollLeft = x;
	    }

	    data.xPrev = data.x;
	    data.yPrev = data.y;
	    ScrollTrigger && ScrollTrigger.update();
	  },
	  kill: function kill(property) {
	    var both = property === "scrollTo",
	        i = this._props.indexOf(property);

	    if (both || property === "scrollTo_x") {
	      this.skipX = 1;
	    }

	    if (both || property === "scrollTo_y") {
	      this.skipY = 1;
	    }

	    i > -1 && this._props.splice(i, 1);
	    return !this._props.length;
	  }
	};
	ScrollToPlugin.max = _max;
	ScrollToPlugin.getOffset = _getOffset;
	ScrollToPlugin.buildGetter = _buildGetter;
	_getGSAP() && gsap.registerPlugin(ScrollToPlugin);

	exports.ScrollToPlugin = ScrollToPlugin;
	exports.default = ScrollToPlugin;

	Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],3:[function(require,module,exports){
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = global || self, factory(global.window = global.window || {}));
}(this, (function (exports) { 'use strict';

  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
  }

  /*!
   * Observer 3.12.5
   * https://gsap.com
   *
   * @license Copyright 2008-2024, GreenSock. All rights reserved.
   * Subject to the terms at https://gsap.com/standard-license or for
   * Club GSAP members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */
  var gsap,
      _coreInitted,
      _clamp,
      _win,
      _doc,
      _docEl,
      _body,
      _isTouch,
      _pointerType,
      ScrollTrigger,
      _root,
      _normalizer,
      _eventTypes,
      _context,
      _getGSAP = function _getGSAP() {
    return gsap || typeof window !== "undefined" && (gsap = window.gsap) && gsap.registerPlugin && gsap;
  },
      _startup = 1,
      _observers = [],
      _scrollers = [],
      _proxies = [],
      _getTime = Date.now,
      _bridge = function _bridge(name, value) {
    return value;
  },
      _integrate = function _integrate() {
    var core = ScrollTrigger.core,
        data = core.bridge || {},
        scrollers = core._scrollers,
        proxies = core._proxies;
    scrollers.push.apply(scrollers, _scrollers);
    proxies.push.apply(proxies, _proxies);
    _scrollers = scrollers;
    _proxies = proxies;

    _bridge = function _bridge(name, value) {
      return data[name](value);
    };
  },
      _getProxyProp = function _getProxyProp(element, property) {
    return ~_proxies.indexOf(element) && _proxies[_proxies.indexOf(element) + 1][property];
  },
      _isViewport = function _isViewport(el) {
    return !!~_root.indexOf(el);
  },
      _addListener = function _addListener(element, type, func, passive, capture) {
    return element.addEventListener(type, func, {
      passive: passive !== false,
      capture: !!capture
    });
  },
      _removeListener = function _removeListener(element, type, func, capture) {
    return element.removeEventListener(type, func, !!capture);
  },
      _scrollLeft = "scrollLeft",
      _scrollTop = "scrollTop",
      _onScroll = function _onScroll() {
    return _normalizer && _normalizer.isPressed || _scrollers.cache++;
  },
      _scrollCacheFunc = function _scrollCacheFunc(f, doNotCache) {
    var cachingFunc = function cachingFunc(value) {
      if (value || value === 0) {
        _startup && (_win.history.scrollRestoration = "manual");
        var isNormalizing = _normalizer && _normalizer.isPressed;
        value = cachingFunc.v = Math.round(value) || (_normalizer && _normalizer.iOS ? 1 : 0);
        f(value);
        cachingFunc.cacheID = _scrollers.cache;
        isNormalizing && _bridge("ss", value);
      } else if (doNotCache || _scrollers.cache !== cachingFunc.cacheID || _bridge("ref")) {
        cachingFunc.cacheID = _scrollers.cache;
        cachingFunc.v = f();
      }

      return cachingFunc.v + cachingFunc.offset;
    };

    cachingFunc.offset = 0;
    return f && cachingFunc;
  },
      _horizontal = {
    s: _scrollLeft,
    p: "left",
    p2: "Left",
    os: "right",
    os2: "Right",
    d: "width",
    d2: "Width",
    a: "x",
    sc: _scrollCacheFunc(function (value) {
      return arguments.length ? _win.scrollTo(value, _vertical.sc()) : _win.pageXOffset || _doc[_scrollLeft] || _docEl[_scrollLeft] || _body[_scrollLeft] || 0;
    })
  },
      _vertical = {
    s: _scrollTop,
    p: "top",
    p2: "Top",
    os: "bottom",
    os2: "Bottom",
    d: "height",
    d2: "Height",
    a: "y",
    op: _horizontal,
    sc: _scrollCacheFunc(function (value) {
      return arguments.length ? _win.scrollTo(_horizontal.sc(), value) : _win.pageYOffset || _doc[_scrollTop] || _docEl[_scrollTop] || _body[_scrollTop] || 0;
    })
  },
      _getTarget = function _getTarget(t, self) {
    return (self && self._ctx && self._ctx.selector || gsap.utils.toArray)(t)[0] || (typeof t === "string" && gsap.config().nullTargetWarn !== false ? console.warn("Element not found:", t) : null);
  },
      _getScrollFunc = function _getScrollFunc(element, _ref) {
    var s = _ref.s,
        sc = _ref.sc;
    _isViewport(element) && (element = _doc.scrollingElement || _docEl);

    var i = _scrollers.indexOf(element),
        offset = sc === _vertical.sc ? 1 : 2;

    !~i && (i = _scrollers.push(element) - 1);
    _scrollers[i + offset] || _addListener(element, "scroll", _onScroll);
    var prev = _scrollers[i + offset],
        func = prev || (_scrollers[i + offset] = _scrollCacheFunc(_getProxyProp(element, s), true) || (_isViewport(element) ? sc : _scrollCacheFunc(function (value) {
      return arguments.length ? element[s] = value : element[s];
    })));
    func.target = element;
    prev || (func.smooth = gsap.getProperty(element, "scrollBehavior") === "smooth");
    return func;
  },
      _getVelocityProp = function _getVelocityProp(value, minTimeRefresh, useDelta) {
    var v1 = value,
        v2 = value,
        t1 = _getTime(),
        t2 = t1,
        min = minTimeRefresh || 50,
        dropToZeroTime = Math.max(500, min * 3),
        update = function update(value, force) {
      var t = _getTime();

      if (force || t - t1 > min) {
        v2 = v1;
        v1 = value;
        t2 = t1;
        t1 = t;
      } else if (useDelta) {
        v1 += value;
      } else {
        v1 = v2 + (value - v2) / (t - t2) * (t1 - t2);
      }
    },
        reset = function reset() {
      v2 = v1 = useDelta ? 0 : v1;
      t2 = t1 = 0;
    },
        getVelocity = function getVelocity(latestValue) {
      var tOld = t2,
          vOld = v2,
          t = _getTime();

      (latestValue || latestValue === 0) && latestValue !== v1 && update(latestValue);
      return t1 === t2 || t - t2 > dropToZeroTime ? 0 : (v1 + (useDelta ? vOld : -vOld)) / ((useDelta ? t : t1) - tOld) * 1000;
    };

    return {
      update: update,
      reset: reset,
      getVelocity: getVelocity
    };
  },
      _getEvent = function _getEvent(e, preventDefault) {
    preventDefault && !e._gsapAllow && e.preventDefault();
    return e.changedTouches ? e.changedTouches[0] : e;
  },
      _getAbsoluteMax = function _getAbsoluteMax(a) {
    var max = Math.max.apply(Math, a),
        min = Math.min.apply(Math, a);
    return Math.abs(max) >= Math.abs(min) ? max : min;
  },
      _setScrollTrigger = function _setScrollTrigger() {
    ScrollTrigger = gsap.core.globals().ScrollTrigger;
    ScrollTrigger && ScrollTrigger.core && _integrate();
  },
      _initCore = function _initCore(core) {
    gsap = core || _getGSAP();

    if (!_coreInitted && gsap && typeof document !== "undefined" && document.body) {
      _win = window;
      _doc = document;
      _docEl = _doc.documentElement;
      _body = _doc.body;
      _root = [_win, _doc, _docEl, _body];
      _clamp = gsap.utils.clamp;

      _context = gsap.core.context || function () {};

      _pointerType = "onpointerenter" in _body ? "pointer" : "mouse";
      _isTouch = Observer.isTouch = _win.matchMedia && _win.matchMedia("(hover: none), (pointer: coarse)").matches ? 1 : "ontouchstart" in _win || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0 ? 2 : 0;
      _eventTypes = Observer.eventTypes = ("ontouchstart" in _docEl ? "touchstart,touchmove,touchcancel,touchend" : !("onpointerdown" in _docEl) ? "mousedown,mousemove,mouseup,mouseup" : "pointerdown,pointermove,pointercancel,pointerup").split(",");
      setTimeout(function () {
        return _startup = 0;
      }, 500);

      _setScrollTrigger();

      _coreInitted = 1;
    }

    return _coreInitted;
  };

  _horizontal.op = _vertical;
  _scrollers.cache = 0;
  var Observer = function () {
    function Observer(vars) {
      this.init(vars);
    }

    var _proto = Observer.prototype;

    _proto.init = function init(vars) {
      _coreInitted || _initCore(gsap) || console.warn("Please gsap.registerPlugin(Observer)");
      ScrollTrigger || _setScrollTrigger();
      var tolerance = vars.tolerance,
          dragMinimum = vars.dragMinimum,
          type = vars.type,
          target = vars.target,
          lineHeight = vars.lineHeight,
          debounce = vars.debounce,
          preventDefault = vars.preventDefault,
          onStop = vars.onStop,
          onStopDelay = vars.onStopDelay,
          ignore = vars.ignore,
          wheelSpeed = vars.wheelSpeed,
          event = vars.event,
          onDragStart = vars.onDragStart,
          onDragEnd = vars.onDragEnd,
          onDrag = vars.onDrag,
          onPress = vars.onPress,
          onRelease = vars.onRelease,
          onRight = vars.onRight,
          onLeft = vars.onLeft,
          onUp = vars.onUp,
          onDown = vars.onDown,
          onChangeX = vars.onChangeX,
          onChangeY = vars.onChangeY,
          onChange = vars.onChange,
          onToggleX = vars.onToggleX,
          onToggleY = vars.onToggleY,
          onHover = vars.onHover,
          onHoverEnd = vars.onHoverEnd,
          onMove = vars.onMove,
          ignoreCheck = vars.ignoreCheck,
          isNormalizer = vars.isNormalizer,
          onGestureStart = vars.onGestureStart,
          onGestureEnd = vars.onGestureEnd,
          onWheel = vars.onWheel,
          onEnable = vars.onEnable,
          onDisable = vars.onDisable,
          onClick = vars.onClick,
          scrollSpeed = vars.scrollSpeed,
          capture = vars.capture,
          allowClicks = vars.allowClicks,
          lockAxis = vars.lockAxis,
          onLockAxis = vars.onLockAxis;
      this.target = target = _getTarget(target) || _docEl;
      this.vars = vars;
      ignore && (ignore = gsap.utils.toArray(ignore));
      tolerance = tolerance || 1e-9;
      dragMinimum = dragMinimum || 0;
      wheelSpeed = wheelSpeed || 1;
      scrollSpeed = scrollSpeed || 1;
      type = type || "wheel,touch,pointer";
      debounce = debounce !== false;
      lineHeight || (lineHeight = parseFloat(_win.getComputedStyle(_body).lineHeight) || 22);

      var id,
          onStopDelayedCall,
          dragged,
          moved,
          wheeled,
          locked,
          axis,
          self = this,
          prevDeltaX = 0,
          prevDeltaY = 0,
          passive = vars.passive || !preventDefault,
          scrollFuncX = _getScrollFunc(target, _horizontal),
          scrollFuncY = _getScrollFunc(target, _vertical),
          scrollX = scrollFuncX(),
          scrollY = scrollFuncY(),
          limitToTouch = ~type.indexOf("touch") && !~type.indexOf("pointer") && _eventTypes[0] === "pointerdown",
          isViewport = _isViewport(target),
          ownerDoc = target.ownerDocument || _doc,
          deltaX = [0, 0, 0],
          deltaY = [0, 0, 0],
          onClickTime = 0,
          clickCapture = function clickCapture() {
        return onClickTime = _getTime();
      },
          _ignoreCheck = function _ignoreCheck(e, isPointerOrTouch) {
        return (self.event = e) && ignore && ~ignore.indexOf(e.target) || isPointerOrTouch && limitToTouch && e.pointerType !== "touch" || ignoreCheck && ignoreCheck(e, isPointerOrTouch);
      },
          onStopFunc = function onStopFunc() {
        self._vx.reset();

        self._vy.reset();

        onStopDelayedCall.pause();
        onStop && onStop(self);
      },
          update = function update() {
        var dx = self.deltaX = _getAbsoluteMax(deltaX),
            dy = self.deltaY = _getAbsoluteMax(deltaY),
            changedX = Math.abs(dx) >= tolerance,
            changedY = Math.abs(dy) >= tolerance;

        onChange && (changedX || changedY) && onChange(self, dx, dy, deltaX, deltaY);

        if (changedX) {
          onRight && self.deltaX > 0 && onRight(self);
          onLeft && self.deltaX < 0 && onLeft(self);
          onChangeX && onChangeX(self);
          onToggleX && self.deltaX < 0 !== prevDeltaX < 0 && onToggleX(self);
          prevDeltaX = self.deltaX;
          deltaX[0] = deltaX[1] = deltaX[2] = 0;
        }

        if (changedY) {
          onDown && self.deltaY > 0 && onDown(self);
          onUp && self.deltaY < 0 && onUp(self);
          onChangeY && onChangeY(self);
          onToggleY && self.deltaY < 0 !== prevDeltaY < 0 && onToggleY(self);
          prevDeltaY = self.deltaY;
          deltaY[0] = deltaY[1] = deltaY[2] = 0;
        }

        if (moved || dragged) {
          onMove && onMove(self);

          if (dragged) {
            onDrag(self);
            dragged = false;
          }

          moved = false;
        }

        locked && !(locked = false) && onLockAxis && onLockAxis(self);

        if (wheeled) {
          onWheel(self);
          wheeled = false;
        }

        id = 0;
      },
          onDelta = function onDelta(x, y, index) {
        deltaX[index] += x;
        deltaY[index] += y;

        self._vx.update(x);

        self._vy.update(y);

        debounce ? id || (id = requestAnimationFrame(update)) : update();
      },
          onTouchOrPointerDelta = function onTouchOrPointerDelta(x, y) {
        if (lockAxis && !axis) {
          self.axis = axis = Math.abs(x) > Math.abs(y) ? "x" : "y";
          locked = true;
        }

        if (axis !== "y") {
          deltaX[2] += x;

          self._vx.update(x, true);
        }

        if (axis !== "x") {
          deltaY[2] += y;

          self._vy.update(y, true);
        }

        debounce ? id || (id = requestAnimationFrame(update)) : update();
      },
          _onDrag = function _onDrag(e) {
        if (_ignoreCheck(e, 1)) {
          return;
        }

        e = _getEvent(e, preventDefault);
        var x = e.clientX,
            y = e.clientY,
            dx = x - self.x,
            dy = y - self.y,
            isDragging = self.isDragging;
        self.x = x;
        self.y = y;

        if (isDragging || Math.abs(self.startX - x) >= dragMinimum || Math.abs(self.startY - y) >= dragMinimum) {
          onDrag && (dragged = true);
          isDragging || (self.isDragging = true);
          onTouchOrPointerDelta(dx, dy);
          isDragging || onDragStart && onDragStart(self);
        }
      },
          _onPress = self.onPress = function (e) {
        if (_ignoreCheck(e, 1) || e && e.button) {
          return;
        }

        self.axis = axis = null;
        onStopDelayedCall.pause();
        self.isPressed = true;
        e = _getEvent(e);
        prevDeltaX = prevDeltaY = 0;
        self.startX = self.x = e.clientX;
        self.startY = self.y = e.clientY;

        self._vx.reset();

        self._vy.reset();

        _addListener(isNormalizer ? target : ownerDoc, _eventTypes[1], _onDrag, passive, true);

        self.deltaX = self.deltaY = 0;
        onPress && onPress(self);
      },
          _onRelease = self.onRelease = function (e) {
        if (_ignoreCheck(e, 1)) {
          return;
        }

        _removeListener(isNormalizer ? target : ownerDoc, _eventTypes[1], _onDrag, true);

        var isTrackingDrag = !isNaN(self.y - self.startY),
            wasDragging = self.isDragging,
            isDragNotClick = wasDragging && (Math.abs(self.x - self.startX) > 3 || Math.abs(self.y - self.startY) > 3),
            eventData = _getEvent(e);

        if (!isDragNotClick && isTrackingDrag) {
          self._vx.reset();

          self._vy.reset();

          if (preventDefault && allowClicks) {
            gsap.delayedCall(0.08, function () {
              if (_getTime() - onClickTime > 300 && !e.defaultPrevented) {
                if (e.target.click) {
                  e.target.click();
                } else if (ownerDoc.createEvent) {
                  var syntheticEvent = ownerDoc.createEvent("MouseEvents");
                  syntheticEvent.initMouseEvent("click", true, true, _win, 1, eventData.screenX, eventData.screenY, eventData.clientX, eventData.clientY, false, false, false, false, 0, null);
                  e.target.dispatchEvent(syntheticEvent);
                }
              }
            });
          }
        }

        self.isDragging = self.isGesturing = self.isPressed = false;
        onStop && wasDragging && !isNormalizer && onStopDelayedCall.restart(true);
        onDragEnd && wasDragging && onDragEnd(self);
        onRelease && onRelease(self, isDragNotClick);
      },
          _onGestureStart = function _onGestureStart(e) {
        return e.touches && e.touches.length > 1 && (self.isGesturing = true) && onGestureStart(e, self.isDragging);
      },
          _onGestureEnd = function _onGestureEnd() {
        return (self.isGesturing = false) || onGestureEnd(self);
      },
          onScroll = function onScroll(e) {
        if (_ignoreCheck(e)) {
          return;
        }

        var x = scrollFuncX(),
            y = scrollFuncY();
        onDelta((x - scrollX) * scrollSpeed, (y - scrollY) * scrollSpeed, 1);
        scrollX = x;
        scrollY = y;
        onStop && onStopDelayedCall.restart(true);
      },
          _onWheel = function _onWheel(e) {
        if (_ignoreCheck(e)) {
          return;
        }

        e = _getEvent(e, preventDefault);
        onWheel && (wheeled = true);
        var multiplier = (e.deltaMode === 1 ? lineHeight : e.deltaMode === 2 ? _win.innerHeight : 1) * wheelSpeed;
        onDelta(e.deltaX * multiplier, e.deltaY * multiplier, 0);
        onStop && !isNormalizer && onStopDelayedCall.restart(true);
      },
          _onMove = function _onMove(e) {
        if (_ignoreCheck(e)) {
          return;
        }

        var x = e.clientX,
            y = e.clientY,
            dx = x - self.x,
            dy = y - self.y;
        self.x = x;
        self.y = y;
        moved = true;
        onStop && onStopDelayedCall.restart(true);
        (dx || dy) && onTouchOrPointerDelta(dx, dy);
      },
          _onHover = function _onHover(e) {
        self.event = e;
        onHover(self);
      },
          _onHoverEnd = function _onHoverEnd(e) {
        self.event = e;
        onHoverEnd(self);
      },
          _onClick = function _onClick(e) {
        return _ignoreCheck(e) || _getEvent(e, preventDefault) && onClick(self);
      };

      onStopDelayedCall = self._dc = gsap.delayedCall(onStopDelay || 0.25, onStopFunc).pause();
      self.deltaX = self.deltaY = 0;
      self._vx = _getVelocityProp(0, 50, true);
      self._vy = _getVelocityProp(0, 50, true);
      self.scrollX = scrollFuncX;
      self.scrollY = scrollFuncY;
      self.isDragging = self.isGesturing = self.isPressed = false;

      _context(this);

      self.enable = function (e) {
        if (!self.isEnabled) {
          _addListener(isViewport ? ownerDoc : target, "scroll", _onScroll);

          type.indexOf("scroll") >= 0 && _addListener(isViewport ? ownerDoc : target, "scroll", onScroll, passive, capture);
          type.indexOf("wheel") >= 0 && _addListener(target, "wheel", _onWheel, passive, capture);

          if (type.indexOf("touch") >= 0 && _isTouch || type.indexOf("pointer") >= 0) {
            _addListener(target, _eventTypes[0], _onPress, passive, capture);

            _addListener(ownerDoc, _eventTypes[2], _onRelease);

            _addListener(ownerDoc, _eventTypes[3], _onRelease);

            allowClicks && _addListener(target, "click", clickCapture, true, true);
            onClick && _addListener(target, "click", _onClick);
            onGestureStart && _addListener(ownerDoc, "gesturestart", _onGestureStart);
            onGestureEnd && _addListener(ownerDoc, "gestureend", _onGestureEnd);
            onHover && _addListener(target, _pointerType + "enter", _onHover);
            onHoverEnd && _addListener(target, _pointerType + "leave", _onHoverEnd);
            onMove && _addListener(target, _pointerType + "move", _onMove);
          }

          self.isEnabled = true;
          e && e.type && _onPress(e);
          onEnable && onEnable(self);
        }

        return self;
      };

      self.disable = function () {
        if (self.isEnabled) {
          _observers.filter(function (o) {
            return o !== self && _isViewport(o.target);
          }).length || _removeListener(isViewport ? ownerDoc : target, "scroll", _onScroll);

          if (self.isPressed) {
            self._vx.reset();

            self._vy.reset();

            _removeListener(isNormalizer ? target : ownerDoc, _eventTypes[1], _onDrag, true);
          }

          _removeListener(isViewport ? ownerDoc : target, "scroll", onScroll, capture);

          _removeListener(target, "wheel", _onWheel, capture);

          _removeListener(target, _eventTypes[0], _onPress, capture);

          _removeListener(ownerDoc, _eventTypes[2], _onRelease);

          _removeListener(ownerDoc, _eventTypes[3], _onRelease);

          _removeListener(target, "click", clickCapture, true);

          _removeListener(target, "click", _onClick);

          _removeListener(ownerDoc, "gesturestart", _onGestureStart);

          _removeListener(ownerDoc, "gestureend", _onGestureEnd);

          _removeListener(target, _pointerType + "enter", _onHover);

          _removeListener(target, _pointerType + "leave", _onHoverEnd);

          _removeListener(target, _pointerType + "move", _onMove);

          self.isEnabled = self.isPressed = self.isDragging = false;
          onDisable && onDisable(self);
        }
      };

      self.kill = self.revert = function () {
        self.disable();

        var i = _observers.indexOf(self);

        i >= 0 && _observers.splice(i, 1);
        _normalizer === self && (_normalizer = 0);
      };

      _observers.push(self);

      isNormalizer && _isViewport(target) && (_normalizer = self);
      self.enable(event);
    };

    _createClass(Observer, [{
      key: "velocityX",
      get: function get() {
        return this._vx.getVelocity();
      }
    }, {
      key: "velocityY",
      get: function get() {
        return this._vy.getVelocity();
      }
    }]);

    return Observer;
  }();
  Observer.version = "3.12.5";

  Observer.create = function (vars) {
    return new Observer(vars);
  };

  Observer.register = _initCore;

  Observer.getAll = function () {
    return _observers.slice();
  };

  Observer.getById = function (id) {
    return _observers.filter(function (o) {
      return o.vars.id === id;
    })[0];
  };

  _getGSAP() && gsap.registerPlugin(Observer);

  /*!
   * ScrollTrigger 3.12.5
   * https://gsap.com
   *
   * @license Copyright 2008-2024, GreenSock. All rights reserved.
   * Subject to the terms at https://gsap.com/standard-license or for
   * Club GSAP members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */

  var gsap$1,
      _coreInitted$1,
      _win$1,
      _doc$1,
      _docEl$1,
      _body$1,
      _root$1,
      _resizeDelay,
      _toArray,
      _clamp$1,
      _time2,
      _syncInterval,
      _refreshing,
      _pointerIsDown,
      _transformProp,
      _i,
      _prevWidth,
      _prevHeight,
      _autoRefresh,
      _sort,
      _suppressOverwrites,
      _ignoreResize,
      _normalizer$1,
      _ignoreMobileResize,
      _baseScreenHeight,
      _baseScreenWidth,
      _fixIOSBug,
      _context$1,
      _scrollRestoration,
      _div100vh,
      _100vh,
      _isReverted,
      _clampingMax,
      _limitCallbacks,
      _startup$1 = 1,
      _getTime$1 = Date.now,
      _time1 = _getTime$1(),
      _lastScrollTime = 0,
      _enabled = 0,
      _parseClamp = function _parseClamp(value, type, self) {
    var clamp = _isString(value) && (value.substr(0, 6) === "clamp(" || value.indexOf("max") > -1);
    self["_" + type + "Clamp"] = clamp;
    return clamp ? value.substr(6, value.length - 7) : value;
  },
      _keepClamp = function _keepClamp(value, clamp) {
    return clamp && (!_isString(value) || value.substr(0, 6) !== "clamp(") ? "clamp(" + value + ")" : value;
  },
      _rafBugFix = function _rafBugFix() {
    return _enabled && requestAnimationFrame(_rafBugFix);
  },
      _pointerDownHandler = function _pointerDownHandler() {
    return _pointerIsDown = 1;
  },
      _pointerUpHandler = function _pointerUpHandler() {
    return _pointerIsDown = 0;
  },
      _passThrough = function _passThrough(v) {
    return v;
  },
      _round = function _round(value) {
    return Math.round(value * 100000) / 100000 || 0;
  },
      _windowExists = function _windowExists() {
    return typeof window !== "undefined";
  },
      _getGSAP$1 = function _getGSAP() {
    return gsap$1 || _windowExists() && (gsap$1 = window.gsap) && gsap$1.registerPlugin && gsap$1;
  },
      _isViewport$1 = function _isViewport(e) {
    return !!~_root$1.indexOf(e);
  },
      _getViewportDimension = function _getViewportDimension(dimensionProperty) {
    return (dimensionProperty === "Height" ? _100vh : _win$1["inner" + dimensionProperty]) || _docEl$1["client" + dimensionProperty] || _body$1["client" + dimensionProperty];
  },
      _getBoundsFunc = function _getBoundsFunc(element) {
    return _getProxyProp(element, "getBoundingClientRect") || (_isViewport$1(element) ? function () {
      _winOffsets.width = _win$1.innerWidth;
      _winOffsets.height = _100vh;
      return _winOffsets;
    } : function () {
      return _getBounds(element);
    });
  },
      _getSizeFunc = function _getSizeFunc(scroller, isViewport, _ref) {
    var d = _ref.d,
        d2 = _ref.d2,
        a = _ref.a;
    return (a = _getProxyProp(scroller, "getBoundingClientRect")) ? function () {
      return a()[d];
    } : function () {
      return (isViewport ? _getViewportDimension(d2) : scroller["client" + d2]) || 0;
    };
  },
      _getOffsetsFunc = function _getOffsetsFunc(element, isViewport) {
    return !isViewport || ~_proxies.indexOf(element) ? _getBoundsFunc(element) : function () {
      return _winOffsets;
    };
  },
      _maxScroll = function _maxScroll(element, _ref2) {
    var s = _ref2.s,
        d2 = _ref2.d2,
        d = _ref2.d,
        a = _ref2.a;
    return Math.max(0, (s = "scroll" + d2) && (a = _getProxyProp(element, s)) ? a() - _getBoundsFunc(element)()[d] : _isViewport$1(element) ? (_docEl$1[s] || _body$1[s]) - _getViewportDimension(d2) : element[s] - element["offset" + d2]);
  },
      _iterateAutoRefresh = function _iterateAutoRefresh(func, events) {
    for (var i = 0; i < _autoRefresh.length; i += 3) {
      (!events || ~events.indexOf(_autoRefresh[i + 1])) && func(_autoRefresh[i], _autoRefresh[i + 1], _autoRefresh[i + 2]);
    }
  },
      _isString = function _isString(value) {
    return typeof value === "string";
  },
      _isFunction = function _isFunction(value) {
    return typeof value === "function";
  },
      _isNumber = function _isNumber(value) {
    return typeof value === "number";
  },
      _isObject = function _isObject(value) {
    return typeof value === "object";
  },
      _endAnimation = function _endAnimation(animation, reversed, pause) {
    return animation && animation.progress(reversed ? 0 : 1) && pause && animation.pause();
  },
      _callback = function _callback(self, func) {
    if (self.enabled) {
      var result = self._ctx ? self._ctx.add(function () {
        return func(self);
      }) : func(self);
      result && result.totalTime && (self.callbackAnimation = result);
    }
  },
      _abs = Math.abs,
      _left = "left",
      _top = "top",
      _right = "right",
      _bottom = "bottom",
      _width = "width",
      _height = "height",
      _Right = "Right",
      _Left = "Left",
      _Top = "Top",
      _Bottom = "Bottom",
      _padding = "padding",
      _margin = "margin",
      _Width = "Width",
      _Height = "Height",
      _px = "px",
      _getComputedStyle = function _getComputedStyle(element) {
    return _win$1.getComputedStyle(element);
  },
      _makePositionable = function _makePositionable(element) {
    var position = _getComputedStyle(element).position;

    element.style.position = position === "absolute" || position === "fixed" ? position : "relative";
  },
      _setDefaults = function _setDefaults(obj, defaults) {
    for (var p in defaults) {
      p in obj || (obj[p] = defaults[p]);
    }

    return obj;
  },
      _getBounds = function _getBounds(element, withoutTransforms) {
    var tween = withoutTransforms && _getComputedStyle(element)[_transformProp] !== "matrix(1, 0, 0, 1, 0, 0)" && gsap$1.to(element, {
      x: 0,
      y: 0,
      xPercent: 0,
      yPercent: 0,
      rotation: 0,
      rotationX: 0,
      rotationY: 0,
      scale: 1,
      skewX: 0,
      skewY: 0
    }).progress(1),
        bounds = element.getBoundingClientRect();
    tween && tween.progress(0).kill();
    return bounds;
  },
      _getSize = function _getSize(element, _ref3) {
    var d2 = _ref3.d2;
    return element["offset" + d2] || element["client" + d2] || 0;
  },
      _getLabelRatioArray = function _getLabelRatioArray(timeline) {
    var a = [],
        labels = timeline.labels,
        duration = timeline.duration(),
        p;

    for (p in labels) {
      a.push(labels[p] / duration);
    }

    return a;
  },
      _getClosestLabel = function _getClosestLabel(animation) {
    return function (value) {
      return gsap$1.utils.snap(_getLabelRatioArray(animation), value);
    };
  },
      _snapDirectional = function _snapDirectional(snapIncrementOrArray) {
    var snap = gsap$1.utils.snap(snapIncrementOrArray),
        a = Array.isArray(snapIncrementOrArray) && snapIncrementOrArray.slice(0).sort(function (a, b) {
      return a - b;
    });
    return a ? function (value, direction, threshold) {
      if (threshold === void 0) {
        threshold = 1e-3;
      }

      var i;

      if (!direction) {
        return snap(value);
      }

      if (direction > 0) {
        value -= threshold;

        for (i = 0; i < a.length; i++) {
          if (a[i] >= value) {
            return a[i];
          }
        }

        return a[i - 1];
      } else {
        i = a.length;
        value += threshold;

        while (i--) {
          if (a[i] <= value) {
            return a[i];
          }
        }
      }

      return a[0];
    } : function (value, direction, threshold) {
      if (threshold === void 0) {
        threshold = 1e-3;
      }

      var snapped = snap(value);
      return !direction || Math.abs(snapped - value) < threshold || snapped - value < 0 === direction < 0 ? snapped : snap(direction < 0 ? value - snapIncrementOrArray : value + snapIncrementOrArray);
    };
  },
      _getLabelAtDirection = function _getLabelAtDirection(timeline) {
    return function (value, st) {
      return _snapDirectional(_getLabelRatioArray(timeline))(value, st.direction);
    };
  },
      _multiListener = function _multiListener(func, element, types, callback) {
    return types.split(",").forEach(function (type) {
      return func(element, type, callback);
    });
  },
      _addListener$1 = function _addListener(element, type, func, nonPassive, capture) {
    return element.addEventListener(type, func, {
      passive: !nonPassive,
      capture: !!capture
    });
  },
      _removeListener$1 = function _removeListener(element, type, func, capture) {
    return element.removeEventListener(type, func, !!capture);
  },
      _wheelListener = function _wheelListener(func, el, scrollFunc) {
    scrollFunc = scrollFunc && scrollFunc.wheelHandler;

    if (scrollFunc) {
      func(el, "wheel", scrollFunc);
      func(el, "touchmove", scrollFunc);
    }
  },
      _markerDefaults = {
    startColor: "green",
    endColor: "red",
    indent: 0,
    fontSize: "16px",
    fontWeight: "normal"
  },
      _defaults = {
    toggleActions: "play",
    anticipatePin: 0
  },
      _keywords = {
    top: 0,
    left: 0,
    center: 0.5,
    bottom: 1,
    right: 1
  },
      _offsetToPx = function _offsetToPx(value, size) {
    if (_isString(value)) {
      var eqIndex = value.indexOf("="),
          relative = ~eqIndex ? +(value.charAt(eqIndex - 1) + 1) * parseFloat(value.substr(eqIndex + 1)) : 0;

      if (~eqIndex) {
        value.indexOf("%") > eqIndex && (relative *= size / 100);
        value = value.substr(0, eqIndex - 1);
      }

      value = relative + (value in _keywords ? _keywords[value] * size : ~value.indexOf("%") ? parseFloat(value) * size / 100 : parseFloat(value) || 0);
    }

    return value;
  },
      _createMarker = function _createMarker(type, name, container, direction, _ref4, offset, matchWidthEl, containerAnimation) {
    var startColor = _ref4.startColor,
        endColor = _ref4.endColor,
        fontSize = _ref4.fontSize,
        indent = _ref4.indent,
        fontWeight = _ref4.fontWeight;

    var e = _doc$1.createElement("div"),
        useFixedPosition = _isViewport$1(container) || _getProxyProp(container, "pinType") === "fixed",
        isScroller = type.indexOf("scroller") !== -1,
        parent = useFixedPosition ? _body$1 : container,
        isStart = type.indexOf("start") !== -1,
        color = isStart ? startColor : endColor,
        css = "border-color:" + color + ";font-size:" + fontSize + ";color:" + color + ";font-weight:" + fontWeight + ";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";

    css += "position:" + ((isScroller || containerAnimation) && useFixedPosition ? "fixed;" : "absolute;");
    (isScroller || containerAnimation || !useFixedPosition) && (css += (direction === _vertical ? _right : _bottom) + ":" + (offset + parseFloat(indent)) + "px;");
    matchWidthEl && (css += "box-sizing:border-box;text-align:left;width:" + matchWidthEl.offsetWidth + "px;");
    e._isStart = isStart;
    e.setAttribute("class", "gsap-marker-" + type + (name ? " marker-" + name : ""));
    e.style.cssText = css;
    e.innerText = name || name === 0 ? type + "-" + name : type;
    parent.children[0] ? parent.insertBefore(e, parent.children[0]) : parent.appendChild(e);
    e._offset = e["offset" + direction.op.d2];

    _positionMarker(e, 0, direction, isStart);

    return e;
  },
      _positionMarker = function _positionMarker(marker, start, direction, flipped) {
    var vars = {
      display: "block"
    },
        side = direction[flipped ? "os2" : "p2"],
        oppositeSide = direction[flipped ? "p2" : "os2"];
    marker._isFlipped = flipped;
    vars[direction.a + "Percent"] = flipped ? -100 : 0;
    vars[direction.a] = flipped ? "1px" : 0;
    vars["border" + side + _Width] = 1;
    vars["border" + oppositeSide + _Width] = 0;
    vars[direction.p] = start + "px";
    gsap$1.set(marker, vars);
  },
      _triggers = [],
      _ids = {},
      _rafID,
      _sync = function _sync() {
    return _getTime$1() - _lastScrollTime > 34 && (_rafID || (_rafID = requestAnimationFrame(_updateAll)));
  },
      _onScroll$1 = function _onScroll() {
    if (!_normalizer$1 || !_normalizer$1.isPressed || _normalizer$1.startX > _body$1.clientWidth) {
      _scrollers.cache++;

      if (_normalizer$1) {
        _rafID || (_rafID = requestAnimationFrame(_updateAll));
      } else {
        _updateAll();
      }

      _lastScrollTime || _dispatch("scrollStart");
      _lastScrollTime = _getTime$1();
    }
  },
      _setBaseDimensions = function _setBaseDimensions() {
    _baseScreenWidth = _win$1.innerWidth;
    _baseScreenHeight = _win$1.innerHeight;
  },
      _onResize = function _onResize() {
    _scrollers.cache++;
    !_refreshing && !_ignoreResize && !_doc$1.fullscreenElement && !_doc$1.webkitFullscreenElement && (!_ignoreMobileResize || _baseScreenWidth !== _win$1.innerWidth || Math.abs(_win$1.innerHeight - _baseScreenHeight) > _win$1.innerHeight * 0.25) && _resizeDelay.restart(true);
  },
      _listeners = {},
      _emptyArray = [],
      _softRefresh = function _softRefresh() {
    return _removeListener$1(ScrollTrigger$1, "scrollEnd", _softRefresh) || _refreshAll(true);
  },
      _dispatch = function _dispatch(type) {
    return _listeners[type] && _listeners[type].map(function (f) {
      return f();
    }) || _emptyArray;
  },
      _savedStyles = [],
      _revertRecorded = function _revertRecorded(media) {
    for (var i = 0; i < _savedStyles.length; i += 5) {
      if (!media || _savedStyles[i + 4] && _savedStyles[i + 4].query === media) {
        _savedStyles[i].style.cssText = _savedStyles[i + 1];
        _savedStyles[i].getBBox && _savedStyles[i].setAttribute("transform", _savedStyles[i + 2] || "");
        _savedStyles[i + 3].uncache = 1;
      }
    }
  },
      _revertAll = function _revertAll(kill, media) {
    var trigger;

    for (_i = 0; _i < _triggers.length; _i++) {
      trigger = _triggers[_i];

      if (trigger && (!media || trigger._ctx === media)) {
        if (kill) {
          trigger.kill(1);
        } else {
          trigger.revert(true, true);
        }
      }
    }

    _isReverted = true;
    media && _revertRecorded(media);
    media || _dispatch("revert");
  },
      _clearScrollMemory = function _clearScrollMemory(scrollRestoration, force) {
    _scrollers.cache++;
    (force || !_refreshingAll) && _scrollers.forEach(function (obj) {
      return _isFunction(obj) && obj.cacheID++ && (obj.rec = 0);
    });
    _isString(scrollRestoration) && (_win$1.history.scrollRestoration = _scrollRestoration = scrollRestoration);
  },
      _refreshingAll,
      _refreshID = 0,
      _queueRefreshID,
      _queueRefreshAll = function _queueRefreshAll() {
    if (_queueRefreshID !== _refreshID) {
      var id = _queueRefreshID = _refreshID;
      requestAnimationFrame(function () {
        return id === _refreshID && _refreshAll(true);
      });
    }
  },
      _refresh100vh = function _refresh100vh() {
    _body$1.appendChild(_div100vh);

    _100vh = !_normalizer$1 && _div100vh.offsetHeight || _win$1.innerHeight;

    _body$1.removeChild(_div100vh);
  },
      _hideAllMarkers = function _hideAllMarkers(hide) {
    return _toArray(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function (el) {
      return el.style.display = hide ? "none" : "block";
    });
  },
      _refreshAll = function _refreshAll(force, skipRevert) {
    if (_lastScrollTime && !force && !_isReverted) {
      _addListener$1(ScrollTrigger$1, "scrollEnd", _softRefresh);

      return;
    }

    _refresh100vh();

    _refreshingAll = ScrollTrigger$1.isRefreshing = true;

    _scrollers.forEach(function (obj) {
      return _isFunction(obj) && ++obj.cacheID && (obj.rec = obj());
    });

    var refreshInits = _dispatch("refreshInit");

    _sort && ScrollTrigger$1.sort();
    skipRevert || _revertAll();

    _scrollers.forEach(function (obj) {
      if (_isFunction(obj)) {
        obj.smooth && (obj.target.style.scrollBehavior = "auto");
        obj(0);
      }
    });

    _triggers.slice(0).forEach(function (t) {
      return t.refresh();
    });

    _isReverted = false;

    _triggers.forEach(function (t) {
      if (t._subPinOffset && t.pin) {
        var prop = t.vars.horizontal ? "offsetWidth" : "offsetHeight",
            original = t.pin[prop];
        t.revert(true, 1);
        t.adjustPinSpacing(t.pin[prop] - original);
        t.refresh();
      }
    });

    _clampingMax = 1;

    _hideAllMarkers(true);

    _triggers.forEach(function (t) {
      var max = _maxScroll(t.scroller, t._dir),
          endClamp = t.vars.end === "max" || t._endClamp && t.end > max,
          startClamp = t._startClamp && t.start >= max;

      (endClamp || startClamp) && t.setPositions(startClamp ? max - 1 : t.start, endClamp ? Math.max(startClamp ? max : t.start + 1, max) : t.end, true);
    });

    _hideAllMarkers(false);

    _clampingMax = 0;
    refreshInits.forEach(function (result) {
      return result && result.render && result.render(-1);
    });

    _scrollers.forEach(function (obj) {
      if (_isFunction(obj)) {
        obj.smooth && requestAnimationFrame(function () {
          return obj.target.style.scrollBehavior = "smooth";
        });
        obj.rec && obj(obj.rec);
      }
    });

    _clearScrollMemory(_scrollRestoration, 1);

    _resizeDelay.pause();

    _refreshID++;
    _refreshingAll = 2;

    _updateAll(2);

    _triggers.forEach(function (t) {
      return _isFunction(t.vars.onRefresh) && t.vars.onRefresh(t);
    });

    _refreshingAll = ScrollTrigger$1.isRefreshing = false;

    _dispatch("refresh");
  },
      _lastScroll = 0,
      _direction = 1,
      _primary,
      _updateAll = function _updateAll(force) {
    if (force === 2 || !_refreshingAll && !_isReverted) {
      ScrollTrigger$1.isUpdating = true;
      _primary && _primary.update(0);

      var l = _triggers.length,
          time = _getTime$1(),
          recordVelocity = time - _time1 >= 50,
          scroll = l && _triggers[0].scroll();

      _direction = _lastScroll > scroll ? -1 : 1;
      _refreshingAll || (_lastScroll = scroll);

      if (recordVelocity) {
        if (_lastScrollTime && !_pointerIsDown && time - _lastScrollTime > 200) {
          _lastScrollTime = 0;

          _dispatch("scrollEnd");
        }

        _time2 = _time1;
        _time1 = time;
      }

      if (_direction < 0) {
        _i = l;

        while (_i-- > 0) {
          _triggers[_i] && _triggers[_i].update(0, recordVelocity);
        }

        _direction = 1;
      } else {
        for (_i = 0; _i < l; _i++) {
          _triggers[_i] && _triggers[_i].update(0, recordVelocity);
        }
      }

      ScrollTrigger$1.isUpdating = false;
    }

    _rafID = 0;
  },
      _propNamesToCopy = [_left, _top, _bottom, _right, _margin + _Bottom, _margin + _Right, _margin + _Top, _margin + _Left, "display", "flexShrink", "float", "zIndex", "gridColumnStart", "gridColumnEnd", "gridRowStart", "gridRowEnd", "gridArea", "justifySelf", "alignSelf", "placeSelf", "order"],
      _stateProps = _propNamesToCopy.concat([_width, _height, "boxSizing", "max" + _Width, "max" + _Height, "position", _margin, _padding, _padding + _Top, _padding + _Right, _padding + _Bottom, _padding + _Left]),
      _swapPinOut = function _swapPinOut(pin, spacer, state) {
    _setState(state);

    var cache = pin._gsap;

    if (cache.spacerIsNative) {
      _setState(cache.spacerState);
    } else if (pin._gsap.swappedIn) {
      var parent = spacer.parentNode;

      if (parent) {
        parent.insertBefore(pin, spacer);
        parent.removeChild(spacer);
      }
    }

    pin._gsap.swappedIn = false;
  },
      _swapPinIn = function _swapPinIn(pin, spacer, cs, spacerState) {
    if (!pin._gsap.swappedIn) {
      var i = _propNamesToCopy.length,
          spacerStyle = spacer.style,
          pinStyle = pin.style,
          p;

      while (i--) {
        p = _propNamesToCopy[i];
        spacerStyle[p] = cs[p];
      }

      spacerStyle.position = cs.position === "absolute" ? "absolute" : "relative";
      cs.display === "inline" && (spacerStyle.display = "inline-block");
      pinStyle[_bottom] = pinStyle[_right] = "auto";
      spacerStyle.flexBasis = cs.flexBasis || "auto";
      spacerStyle.overflow = "visible";
      spacerStyle.boxSizing = "border-box";
      spacerStyle[_width] = _getSize(pin, _horizontal) + _px;
      spacerStyle[_height] = _getSize(pin, _vertical) + _px;
      spacerStyle[_padding] = pinStyle[_margin] = pinStyle[_top] = pinStyle[_left] = "0";

      _setState(spacerState);

      pinStyle[_width] = pinStyle["max" + _Width] = cs[_width];
      pinStyle[_height] = pinStyle["max" + _Height] = cs[_height];
      pinStyle[_padding] = cs[_padding];

      if (pin.parentNode !== spacer) {
        pin.parentNode.insertBefore(spacer, pin);
        spacer.appendChild(pin);
      }

      pin._gsap.swappedIn = true;
    }
  },
      _capsExp = /([A-Z])/g,
      _setState = function _setState(state) {
    if (state) {
      var style = state.t.style,
          l = state.length,
          i = 0,
          p,
          value;
      (state.t._gsap || gsap$1.core.getCache(state.t)).uncache = 1;

      for (; i < l; i += 2) {
        value = state[i + 1];
        p = state[i];

        if (value) {
          style[p] = value;
        } else if (style[p]) {
          style.removeProperty(p.replace(_capsExp, "-$1").toLowerCase());
        }
      }
    }
  },
      _getState = function _getState(element) {
    var l = _stateProps.length,
        style = element.style,
        state = [],
        i = 0;

    for (; i < l; i++) {
      state.push(_stateProps[i], style[_stateProps[i]]);
    }

    state.t = element;
    return state;
  },
      _copyState = function _copyState(state, override, omitOffsets) {
    var result = [],
        l = state.length,
        i = omitOffsets ? 8 : 0,
        p;

    for (; i < l; i += 2) {
      p = state[i];
      result.push(p, p in override ? override[p] : state[i + 1]);
    }

    result.t = state.t;
    return result;
  },
      _winOffsets = {
    left: 0,
    top: 0
  },
      _parsePosition = function _parsePosition(value, trigger, scrollerSize, direction, scroll, marker, markerScroller, self, scrollerBounds, borderWidth, useFixedPosition, scrollerMax, containerAnimation, clampZeroProp) {
    _isFunction(value) && (value = value(self));

    if (_isString(value) && value.substr(0, 3) === "max") {
      value = scrollerMax + (value.charAt(4) === "=" ? _offsetToPx("0" + value.substr(3), scrollerSize) : 0);
    }

    var time = containerAnimation ? containerAnimation.time() : 0,
        p1,
        p2,
        element;
    containerAnimation && containerAnimation.seek(0);
    isNaN(value) || (value = +value);

    if (!_isNumber(value)) {
      _isFunction(trigger) && (trigger = trigger(self));
      var offsets = (value || "0").split(" "),
          bounds,
          localOffset,
          globalOffset,
          display;
      element = _getTarget(trigger, self) || _body$1;
      bounds = _getBounds(element) || {};

      if ((!bounds || !bounds.left && !bounds.top) && _getComputedStyle(element).display === "none") {
        display = element.style.display;
        element.style.display = "block";
        bounds = _getBounds(element);
        display ? element.style.display = display : element.style.removeProperty("display");
      }

      localOffset = _offsetToPx(offsets[0], bounds[direction.d]);
      globalOffset = _offsetToPx(offsets[1] || "0", scrollerSize);
      value = bounds[direction.p] - scrollerBounds[direction.p] - borderWidth + localOffset + scroll - globalOffset;
      markerScroller && _positionMarker(markerScroller, globalOffset, direction, scrollerSize - globalOffset < 20 || markerScroller._isStart && globalOffset > 20);
      scrollerSize -= scrollerSize - globalOffset;
    } else {
      containerAnimation && (value = gsap$1.utils.mapRange(containerAnimation.scrollTrigger.start, containerAnimation.scrollTrigger.end, 0, scrollerMax, value));
      markerScroller && _positionMarker(markerScroller, scrollerSize, direction, true);
    }

    if (clampZeroProp) {
      self[clampZeroProp] = value || -0.001;
      value < 0 && (value = 0);
    }

    if (marker) {
      var position = value + scrollerSize,
          isStart = marker._isStart;
      p1 = "scroll" + direction.d2;

      _positionMarker(marker, position, direction, isStart && position > 20 || !isStart && (useFixedPosition ? Math.max(_body$1[p1], _docEl$1[p1]) : marker.parentNode[p1]) <= position + 1);

      if (useFixedPosition) {
        scrollerBounds = _getBounds(markerScroller);
        useFixedPosition && (marker.style[direction.op.p] = scrollerBounds[direction.op.p] - direction.op.m - marker._offset + _px);
      }
    }

    if (containerAnimation && element) {
      p1 = _getBounds(element);
      containerAnimation.seek(scrollerMax);
      p2 = _getBounds(element);
      containerAnimation._caScrollDist = p1[direction.p] - p2[direction.p];
      value = value / containerAnimation._caScrollDist * scrollerMax;
    }

    containerAnimation && containerAnimation.seek(time);
    return containerAnimation ? value : Math.round(value);
  },
      _prefixExp = /(webkit|moz|length|cssText|inset)/i,
      _reparent = function _reparent(element, parent, top, left) {
    if (element.parentNode !== parent) {
      var style = element.style,
          p,
          cs;

      if (parent === _body$1) {
        element._stOrig = style.cssText;
        cs = _getComputedStyle(element);

        for (p in cs) {
          if (!+p && !_prefixExp.test(p) && cs[p] && typeof style[p] === "string" && p !== "0") {
            style[p] = cs[p];
          }
        }

        style.top = top;
        style.left = left;
      } else {
        style.cssText = element._stOrig;
      }

      gsap$1.core.getCache(element).uncache = 1;
      parent.appendChild(element);
    }
  },
      _interruptionTracker = function _interruptionTracker(getValueFunc, initialValue, onInterrupt) {
    var last1 = initialValue,
        last2 = last1;
    return function (value) {
      var current = Math.round(getValueFunc());

      if (current !== last1 && current !== last2 && Math.abs(current - last1) > 3 && Math.abs(current - last2) > 3) {
        value = current;
        onInterrupt && onInterrupt();
      }

      last2 = last1;
      last1 = value;
      return value;
    };
  },
      _shiftMarker = function _shiftMarker(marker, direction, value) {
    var vars = {};
    vars[direction.p] = "+=" + value;
    gsap$1.set(marker, vars);
  },
      _getTweenCreator = function _getTweenCreator(scroller, direction) {
    var getScroll = _getScrollFunc(scroller, direction),
        prop = "_scroll" + direction.p2,
        getTween = function getTween(scrollTo, vars, initialValue, change1, change2) {
      var tween = getTween.tween,
          onComplete = vars.onComplete,
          modifiers = {};
      initialValue = initialValue || getScroll();

      var checkForInterruption = _interruptionTracker(getScroll, initialValue, function () {
        tween.kill();
        getTween.tween = 0;
      });

      change2 = change1 && change2 || 0;
      change1 = change1 || scrollTo - initialValue;
      tween && tween.kill();
      vars[prop] = scrollTo;
      vars.inherit = false;
      vars.modifiers = modifiers;

      modifiers[prop] = function () {
        return checkForInterruption(initialValue + change1 * tween.ratio + change2 * tween.ratio * tween.ratio);
      };

      vars.onUpdate = function () {
        _scrollers.cache++;
        getTween.tween && _updateAll();
      };

      vars.onComplete = function () {
        getTween.tween = 0;
        onComplete && onComplete.call(tween);
      };

      tween = getTween.tween = gsap$1.to(scroller, vars);
      return tween;
    };

    scroller[prop] = getScroll;

    getScroll.wheelHandler = function () {
      return getTween.tween && getTween.tween.kill() && (getTween.tween = 0);
    };

    _addListener$1(scroller, "wheel", getScroll.wheelHandler);

    ScrollTrigger$1.isTouch && _addListener$1(scroller, "touchmove", getScroll.wheelHandler);
    return getTween;
  };

  var ScrollTrigger$1 = function () {
    function ScrollTrigger(vars, animation) {
      _coreInitted$1 || ScrollTrigger.register(gsap$1) || console.warn("Please gsap.registerPlugin(ScrollTrigger)");

      _context$1(this);

      this.init(vars, animation);
    }

    var _proto = ScrollTrigger.prototype;

    _proto.init = function init(vars, animation) {
      this.progress = this.start = 0;
      this.vars && this.kill(true, true);

      if (!_enabled) {
        this.update = this.refresh = this.kill = _passThrough;
        return;
      }

      vars = _setDefaults(_isString(vars) || _isNumber(vars) || vars.nodeType ? {
        trigger: vars
      } : vars, _defaults);

      var _vars = vars,
          onUpdate = _vars.onUpdate,
          toggleClass = _vars.toggleClass,
          id = _vars.id,
          onToggle = _vars.onToggle,
          onRefresh = _vars.onRefresh,
          scrub = _vars.scrub,
          trigger = _vars.trigger,
          pin = _vars.pin,
          pinSpacing = _vars.pinSpacing,
          invalidateOnRefresh = _vars.invalidateOnRefresh,
          anticipatePin = _vars.anticipatePin,
          onScrubComplete = _vars.onScrubComplete,
          onSnapComplete = _vars.onSnapComplete,
          once = _vars.once,
          snap = _vars.snap,
          pinReparent = _vars.pinReparent,
          pinSpacer = _vars.pinSpacer,
          containerAnimation = _vars.containerAnimation,
          fastScrollEnd = _vars.fastScrollEnd,
          preventOverlaps = _vars.preventOverlaps,
          direction = vars.horizontal || vars.containerAnimation && vars.horizontal !== false ? _horizontal : _vertical,
          isToggle = !scrub && scrub !== 0,
          scroller = _getTarget(vars.scroller || _win$1),
          scrollerCache = gsap$1.core.getCache(scroller),
          isViewport = _isViewport$1(scroller),
          useFixedPosition = ("pinType" in vars ? vars.pinType : _getProxyProp(scroller, "pinType") || isViewport && "fixed") === "fixed",
          callbacks = [vars.onEnter, vars.onLeave, vars.onEnterBack, vars.onLeaveBack],
          toggleActions = isToggle && vars.toggleActions.split(" "),
          markers = "markers" in vars ? vars.markers : _defaults.markers,
          borderWidth = isViewport ? 0 : parseFloat(_getComputedStyle(scroller)["border" + direction.p2 + _Width]) || 0,
          self = this,
          onRefreshInit = vars.onRefreshInit && function () {
        return vars.onRefreshInit(self);
      },
          getScrollerSize = _getSizeFunc(scroller, isViewport, direction),
          getScrollerOffsets = _getOffsetsFunc(scroller, isViewport),
          lastSnap = 0,
          lastRefresh = 0,
          prevProgress = 0,
          scrollFunc = _getScrollFunc(scroller, direction),
          tweenTo,
          pinCache,
          snapFunc,
          scroll1,
          scroll2,
          start,
          end,
          markerStart,
          markerEnd,
          markerStartTrigger,
          markerEndTrigger,
          markerVars,
          executingOnRefresh,
          change,
          pinOriginalState,
          pinActiveState,
          pinState,
          spacer,
          offset,
          pinGetter,
          pinSetter,
          pinStart,
          pinChange,
          spacingStart,
          spacerState,
          markerStartSetter,
          pinMoves,
          markerEndSetter,
          cs,
          snap1,
          snap2,
          scrubTween,
          scrubSmooth,
          snapDurClamp,
          snapDelayedCall,
          prevScroll,
          prevAnimProgress,
          caMarkerSetter,
          customRevertReturn;

      self._startClamp = self._endClamp = false;
      self._dir = direction;
      anticipatePin *= 45;
      self.scroller = scroller;
      self.scroll = containerAnimation ? containerAnimation.time.bind(containerAnimation) : scrollFunc;
      scroll1 = scrollFunc();
      self.vars = vars;
      animation = animation || vars.animation;

      if ("refreshPriority" in vars) {
        _sort = 1;
        vars.refreshPriority === -9999 && (_primary = self);
      }

      scrollerCache.tweenScroll = scrollerCache.tweenScroll || {
        top: _getTweenCreator(scroller, _vertical),
        left: _getTweenCreator(scroller, _horizontal)
      };
      self.tweenTo = tweenTo = scrollerCache.tweenScroll[direction.p];

      self.scrubDuration = function (value) {
        scrubSmooth = _isNumber(value) && value;

        if (!scrubSmooth) {
          scrubTween && scrubTween.progress(1).kill();
          scrubTween = 0;
        } else {
          scrubTween ? scrubTween.duration(value) : scrubTween = gsap$1.to(animation, {
            ease: "expo",
            totalProgress: "+=0",
            inherit: false,
            duration: scrubSmooth,
            paused: true,
            onComplete: function onComplete() {
              return onScrubComplete && onScrubComplete(self);
            }
          });
        }
      };

      if (animation) {
        animation.vars.lazy = false;
        animation._initted && !self.isReverted || animation.vars.immediateRender !== false && vars.immediateRender !== false && animation.duration() && animation.render(0, true, true);
        self.animation = animation.pause();
        animation.scrollTrigger = self;
        self.scrubDuration(scrub);
        snap1 = 0;
        id || (id = animation.vars.id);
      }

      if (snap) {
        if (!_isObject(snap) || snap.push) {
          snap = {
            snapTo: snap
          };
        }

        "scrollBehavior" in _body$1.style && gsap$1.set(isViewport ? [_body$1, _docEl$1] : scroller, {
          scrollBehavior: "auto"
        });

        _scrollers.forEach(function (o) {
          return _isFunction(o) && o.target === (isViewport ? _doc$1.scrollingElement || _docEl$1 : scroller) && (o.smooth = false);
        });

        snapFunc = _isFunction(snap.snapTo) ? snap.snapTo : snap.snapTo === "labels" ? _getClosestLabel(animation) : snap.snapTo === "labelsDirectional" ? _getLabelAtDirection(animation) : snap.directional !== false ? function (value, st) {
          return _snapDirectional(snap.snapTo)(value, _getTime$1() - lastRefresh < 500 ? 0 : st.direction);
        } : gsap$1.utils.snap(snap.snapTo);
        snapDurClamp = snap.duration || {
          min: 0.1,
          max: 2
        };
        snapDurClamp = _isObject(snapDurClamp) ? _clamp$1(snapDurClamp.min, snapDurClamp.max) : _clamp$1(snapDurClamp, snapDurClamp);
        snapDelayedCall = gsap$1.delayedCall(snap.delay || scrubSmooth / 2 || 0.1, function () {
          var scroll = scrollFunc(),
              refreshedRecently = _getTime$1() - lastRefresh < 500,
              tween = tweenTo.tween;

          if ((refreshedRecently || Math.abs(self.getVelocity()) < 10) && !tween && !_pointerIsDown && lastSnap !== scroll) {
            var progress = (scroll - start) / change,
                totalProgress = animation && !isToggle ? animation.totalProgress() : progress,
                velocity = refreshedRecently ? 0 : (totalProgress - snap2) / (_getTime$1() - _time2) * 1000 || 0,
                change1 = gsap$1.utils.clamp(-progress, 1 - progress, _abs(velocity / 2) * velocity / 0.185),
                naturalEnd = progress + (snap.inertia === false ? 0 : change1),
                endValue,
                endScroll,
                _snap = snap,
                onStart = _snap.onStart,
                _onInterrupt = _snap.onInterrupt,
                _onComplete = _snap.onComplete;
            endValue = snapFunc(naturalEnd, self);
            _isNumber(endValue) || (endValue = naturalEnd);
            endScroll = Math.round(start + endValue * change);

            if (scroll <= end && scroll >= start && endScroll !== scroll) {
              if (tween && !tween._initted && tween.data <= _abs(endScroll - scroll)) {
                return;
              }

              if (snap.inertia === false) {
                change1 = endValue - progress;
              }

              tweenTo(endScroll, {
                duration: snapDurClamp(_abs(Math.max(_abs(naturalEnd - totalProgress), _abs(endValue - totalProgress)) * 0.185 / velocity / 0.05 || 0)),
                ease: snap.ease || "power3",
                data: _abs(endScroll - scroll),
                onInterrupt: function onInterrupt() {
                  return snapDelayedCall.restart(true) && _onInterrupt && _onInterrupt(self);
                },
                onComplete: function onComplete() {
                  self.update();
                  lastSnap = scrollFunc();

                  if (animation) {
                    scrubTween ? scrubTween.resetTo("totalProgress", endValue, animation._tTime / animation._tDur) : animation.progress(endValue);
                  }

                  snap1 = snap2 = animation && !isToggle ? animation.totalProgress() : self.progress;
                  onSnapComplete && onSnapComplete(self);
                  _onComplete && _onComplete(self);
                }
              }, scroll, change1 * change, endScroll - scroll - change1 * change);
              onStart && onStart(self, tweenTo.tween);
            }
          } else if (self.isActive && lastSnap !== scroll) {
            snapDelayedCall.restart(true);
          }
        }).pause();
      }

      id && (_ids[id] = self);
      trigger = self.trigger = _getTarget(trigger || pin !== true && pin);
      customRevertReturn = trigger && trigger._gsap && trigger._gsap.stRevert;
      customRevertReturn && (customRevertReturn = customRevertReturn(self));
      pin = pin === true ? trigger : _getTarget(pin);
      _isString(toggleClass) && (toggleClass = {
        targets: trigger,
        className: toggleClass
      });

      if (pin) {
        pinSpacing === false || pinSpacing === _margin || (pinSpacing = !pinSpacing && pin.parentNode && pin.parentNode.style && _getComputedStyle(pin.parentNode).display === "flex" ? false : _padding);
        self.pin = pin;
        pinCache = gsap$1.core.getCache(pin);

        if (!pinCache.spacer) {
          if (pinSpacer) {
            pinSpacer = _getTarget(pinSpacer);
            pinSpacer && !pinSpacer.nodeType && (pinSpacer = pinSpacer.current || pinSpacer.nativeElement);
            pinCache.spacerIsNative = !!pinSpacer;
            pinSpacer && (pinCache.spacerState = _getState(pinSpacer));
          }

          pinCache.spacer = spacer = pinSpacer || _doc$1.createElement("div");
          spacer.classList.add("pin-spacer");
          id && spacer.classList.add("pin-spacer-" + id);
          pinCache.pinState = pinOriginalState = _getState(pin);
        } else {
          pinOriginalState = pinCache.pinState;
        }

        vars.force3D !== false && gsap$1.set(pin, {
          force3D: true
        });
        self.spacer = spacer = pinCache.spacer;
        cs = _getComputedStyle(pin);
        spacingStart = cs[pinSpacing + direction.os2];
        pinGetter = gsap$1.getProperty(pin);
        pinSetter = gsap$1.quickSetter(pin, direction.a, _px);

        _swapPinIn(pin, spacer, cs);

        pinState = _getState(pin);
      }

      if (markers) {
        markerVars = _isObject(markers) ? _setDefaults(markers, _markerDefaults) : _markerDefaults;
        markerStartTrigger = _createMarker("scroller-start", id, scroller, direction, markerVars, 0);
        markerEndTrigger = _createMarker("scroller-end", id, scroller, direction, markerVars, 0, markerStartTrigger);
        offset = markerStartTrigger["offset" + direction.op.d2];

        var content = _getTarget(_getProxyProp(scroller, "content") || scroller);

        markerStart = this.markerStart = _createMarker("start", id, content, direction, markerVars, offset, 0, containerAnimation);
        markerEnd = this.markerEnd = _createMarker("end", id, content, direction, markerVars, offset, 0, containerAnimation);
        containerAnimation && (caMarkerSetter = gsap$1.quickSetter([markerStart, markerEnd], direction.a, _px));

        if (!useFixedPosition && !(_proxies.length && _getProxyProp(scroller, "fixedMarkers") === true)) {
          _makePositionable(isViewport ? _body$1 : scroller);

          gsap$1.set([markerStartTrigger, markerEndTrigger], {
            force3D: true
          });
          markerStartSetter = gsap$1.quickSetter(markerStartTrigger, direction.a, _px);
          markerEndSetter = gsap$1.quickSetter(markerEndTrigger, direction.a, _px);
        }
      }

      if (containerAnimation) {
        var oldOnUpdate = containerAnimation.vars.onUpdate,
            oldParams = containerAnimation.vars.onUpdateParams;
        containerAnimation.eventCallback("onUpdate", function () {
          self.update(0, 0, 1);
          oldOnUpdate && oldOnUpdate.apply(containerAnimation, oldParams || []);
        });
      }

      self.previous = function () {
        return _triggers[_triggers.indexOf(self) - 1];
      };

      self.next = function () {
        return _triggers[_triggers.indexOf(self) + 1];
      };

      self.revert = function (revert, temp) {
        if (!temp) {
          return self.kill(true);
        }

        var r = revert !== false || !self.enabled,
            prevRefreshing = _refreshing;

        if (r !== self.isReverted) {
          if (r) {
            prevScroll = Math.max(scrollFunc(), self.scroll.rec || 0);
            prevProgress = self.progress;
            prevAnimProgress = animation && animation.progress();
          }

          markerStart && [markerStart, markerEnd, markerStartTrigger, markerEndTrigger].forEach(function (m) {
            return m.style.display = r ? "none" : "block";
          });

          if (r) {
            _refreshing = self;
            self.update(r);
          }

          if (pin && (!pinReparent || !self.isActive)) {
            if (r) {
              _swapPinOut(pin, spacer, pinOriginalState);
            } else {
              _swapPinIn(pin, spacer, _getComputedStyle(pin), spacerState);
            }
          }

          r || self.update(r);
          _refreshing = prevRefreshing;
          self.isReverted = r;
        }
      };

      self.refresh = function (soft, force, position, pinOffset) {
        if ((_refreshing || !self.enabled) && !force) {
          return;
        }

        if (pin && soft && _lastScrollTime) {
          _addListener$1(ScrollTrigger, "scrollEnd", _softRefresh);

          return;
        }

        !_refreshingAll && onRefreshInit && onRefreshInit(self);
        _refreshing = self;

        if (tweenTo.tween && !position) {
          tweenTo.tween.kill();
          tweenTo.tween = 0;
        }

        scrubTween && scrubTween.pause();
        invalidateOnRefresh && animation && animation.revert({
          kill: false
        }).invalidate();
        self.isReverted || self.revert(true, true);
        self._subPinOffset = false;

        var size = getScrollerSize(),
            scrollerBounds = getScrollerOffsets(),
            max = containerAnimation ? containerAnimation.duration() : _maxScroll(scroller, direction),
            isFirstRefresh = change <= 0.01,
            offset = 0,
            otherPinOffset = pinOffset || 0,
            parsedEnd = _isObject(position) ? position.end : vars.end,
            parsedEndTrigger = vars.endTrigger || trigger,
            parsedStart = _isObject(position) ? position.start : vars.start || (vars.start === 0 || !trigger ? 0 : pin ? "0 0" : "0 100%"),
            pinnedContainer = self.pinnedContainer = vars.pinnedContainer && _getTarget(vars.pinnedContainer, self),
            triggerIndex = trigger && Math.max(0, _triggers.indexOf(self)) || 0,
            i = triggerIndex,
            cs,
            bounds,
            scroll,
            isVertical,
            override,
            curTrigger,
            curPin,
            oppositeScroll,
            initted,
            revertedPins,
            forcedOverflow,
            markerStartOffset,
            markerEndOffset;

        if (markers && _isObject(position)) {
          markerStartOffset = gsap$1.getProperty(markerStartTrigger, direction.p);
          markerEndOffset = gsap$1.getProperty(markerEndTrigger, direction.p);
        }

        while (i--) {
          curTrigger = _triggers[i];
          curTrigger.end || curTrigger.refresh(0, 1) || (_refreshing = self);
          curPin = curTrigger.pin;

          if (curPin && (curPin === trigger || curPin === pin || curPin === pinnedContainer) && !curTrigger.isReverted) {
            revertedPins || (revertedPins = []);
            revertedPins.unshift(curTrigger);
            curTrigger.revert(true, true);
          }

          if (curTrigger !== _triggers[i]) {
            triggerIndex--;
            i--;
          }
        }

        _isFunction(parsedStart) && (parsedStart = parsedStart(self));
        parsedStart = _parseClamp(parsedStart, "start", self);
        start = _parsePosition(parsedStart, trigger, size, direction, scrollFunc(), markerStart, markerStartTrigger, self, scrollerBounds, borderWidth, useFixedPosition, max, containerAnimation, self._startClamp && "_startClamp") || (pin ? -0.001 : 0);
        _isFunction(parsedEnd) && (parsedEnd = parsedEnd(self));

        if (_isString(parsedEnd) && !parsedEnd.indexOf("+=")) {
          if (~parsedEnd.indexOf(" ")) {
            parsedEnd = (_isString(parsedStart) ? parsedStart.split(" ")[0] : "") + parsedEnd;
          } else {
            offset = _offsetToPx(parsedEnd.substr(2), size);
            parsedEnd = _isString(parsedStart) ? parsedStart : (containerAnimation ? gsap$1.utils.mapRange(0, containerAnimation.duration(), containerAnimation.scrollTrigger.start, containerAnimation.scrollTrigger.end, start) : start) + offset;
            parsedEndTrigger = trigger;
          }
        }

        parsedEnd = _parseClamp(parsedEnd, "end", self);
        end = Math.max(start, _parsePosition(parsedEnd || (parsedEndTrigger ? "100% 0" : max), parsedEndTrigger, size, direction, scrollFunc() + offset, markerEnd, markerEndTrigger, self, scrollerBounds, borderWidth, useFixedPosition, max, containerAnimation, self._endClamp && "_endClamp")) || -0.001;
        offset = 0;
        i = triggerIndex;

        while (i--) {
          curTrigger = _triggers[i];
          curPin = curTrigger.pin;

          if (curPin && curTrigger.start - curTrigger._pinPush <= start && !containerAnimation && curTrigger.end > 0) {
            cs = curTrigger.end - (self._startClamp ? Math.max(0, curTrigger.start) : curTrigger.start);

            if ((curPin === trigger && curTrigger.start - curTrigger._pinPush < start || curPin === pinnedContainer) && isNaN(parsedStart)) {
              offset += cs * (1 - curTrigger.progress);
            }

            curPin === pin && (otherPinOffset += cs);
          }
        }

        start += offset;
        end += offset;
        self._startClamp && (self._startClamp += offset);

        if (self._endClamp && !_refreshingAll) {
          self._endClamp = end || -0.001;
          end = Math.min(end, _maxScroll(scroller, direction));
        }

        change = end - start || (start -= 0.01) && 0.001;

        if (isFirstRefresh) {
          prevProgress = gsap$1.utils.clamp(0, 1, gsap$1.utils.normalize(start, end, prevScroll));
        }

        self._pinPush = otherPinOffset;

        if (markerStart && offset) {
          cs = {};
          cs[direction.a] = "+=" + offset;
          pinnedContainer && (cs[direction.p] = "-=" + scrollFunc());
          gsap$1.set([markerStart, markerEnd], cs);
        }

        if (pin && !(_clampingMax && self.end >= _maxScroll(scroller, direction))) {
          cs = _getComputedStyle(pin);
          isVertical = direction === _vertical;
          scroll = scrollFunc();
          pinStart = parseFloat(pinGetter(direction.a)) + otherPinOffset;

          if (!max && end > 1) {
            forcedOverflow = (isViewport ? _doc$1.scrollingElement || _docEl$1 : scroller).style;
            forcedOverflow = {
              style: forcedOverflow,
              value: forcedOverflow["overflow" + direction.a.toUpperCase()]
            };

            if (isViewport && _getComputedStyle(_body$1)["overflow" + direction.a.toUpperCase()] !== "scroll") {
              forcedOverflow.style["overflow" + direction.a.toUpperCase()] = "scroll";
            }
          }

          _swapPinIn(pin, spacer, cs);

          pinState = _getState(pin);
          bounds = _getBounds(pin, true);
          oppositeScroll = useFixedPosition && _getScrollFunc(scroller, isVertical ? _horizontal : _vertical)();

          if (pinSpacing) {
            spacerState = [pinSpacing + direction.os2, change + otherPinOffset + _px];
            spacerState.t = spacer;
            i = pinSpacing === _padding ? _getSize(pin, direction) + change + otherPinOffset : 0;

            if (i) {
              spacerState.push(direction.d, i + _px);
              spacer.style.flexBasis !== "auto" && (spacer.style.flexBasis = i + _px);
            }

            _setState(spacerState);

            if (pinnedContainer) {
              _triggers.forEach(function (t) {
                if (t.pin === pinnedContainer && t.vars.pinSpacing !== false) {
                  t._subPinOffset = true;
                }
              });
            }

            useFixedPosition && scrollFunc(prevScroll);
          } else {
            i = _getSize(pin, direction);
            i && spacer.style.flexBasis !== "auto" && (spacer.style.flexBasis = i + _px);
          }

          if (useFixedPosition) {
            override = {
              top: bounds.top + (isVertical ? scroll - start : oppositeScroll) + _px,
              left: bounds.left + (isVertical ? oppositeScroll : scroll - start) + _px,
              boxSizing: "border-box",
              position: "fixed"
            };
            override[_width] = override["max" + _Width] = Math.ceil(bounds.width) + _px;
            override[_height] = override["max" + _Height] = Math.ceil(bounds.height) + _px;
            override[_margin] = override[_margin + _Top] = override[_margin + _Right] = override[_margin + _Bottom] = override[_margin + _Left] = "0";
            override[_padding] = cs[_padding];
            override[_padding + _Top] = cs[_padding + _Top];
            override[_padding + _Right] = cs[_padding + _Right];
            override[_padding + _Bottom] = cs[_padding + _Bottom];
            override[_padding + _Left] = cs[_padding + _Left];
            pinActiveState = _copyState(pinOriginalState, override, pinReparent);
            _refreshingAll && scrollFunc(0);
          }

          if (animation) {
            initted = animation._initted;

            _suppressOverwrites(1);

            animation.render(animation.duration(), true, true);
            pinChange = pinGetter(direction.a) - pinStart + change + otherPinOffset;
            pinMoves = Math.abs(change - pinChange) > 1;
            useFixedPosition && pinMoves && pinActiveState.splice(pinActiveState.length - 2, 2);
            animation.render(0, true, true);
            initted || animation.invalidate(true);
            animation.parent || animation.totalTime(animation.totalTime());

            _suppressOverwrites(0);
          } else {
            pinChange = change;
          }

          forcedOverflow && (forcedOverflow.value ? forcedOverflow.style["overflow" + direction.a.toUpperCase()] = forcedOverflow.value : forcedOverflow.style.removeProperty("overflow-" + direction.a));
        } else if (trigger && scrollFunc() && !containerAnimation) {
          bounds = trigger.parentNode;

          while (bounds && bounds !== _body$1) {
            if (bounds._pinOffset) {
              start -= bounds._pinOffset;
              end -= bounds._pinOffset;
            }

            bounds = bounds.parentNode;
          }
        }

        revertedPins && revertedPins.forEach(function (t) {
          return t.revert(false, true);
        });
        self.start = start;
        self.end = end;
        scroll1 = scroll2 = _refreshingAll ? prevScroll : scrollFunc();

        if (!containerAnimation && !_refreshingAll) {
          scroll1 < prevScroll && scrollFunc(prevScroll);
          self.scroll.rec = 0;
        }

        self.revert(false, true);
        lastRefresh = _getTime$1();

        if (snapDelayedCall) {
          lastSnap = -1;
          snapDelayedCall.restart(true);
        }

        _refreshing = 0;
        animation && isToggle && (animation._initted || prevAnimProgress) && animation.progress() !== prevAnimProgress && animation.progress(prevAnimProgress || 0, true).render(animation.time(), true, true);

        if (isFirstRefresh || prevProgress !== self.progress || containerAnimation || invalidateOnRefresh) {
          animation && !isToggle && animation.totalProgress(containerAnimation && start < -0.001 && !prevProgress ? gsap$1.utils.normalize(start, end, 0) : prevProgress, true);
          self.progress = isFirstRefresh || (scroll1 - start) / change === prevProgress ? 0 : prevProgress;
        }

        pin && pinSpacing && (spacer._pinOffset = Math.round(self.progress * pinChange));
        scrubTween && scrubTween.invalidate();

        if (!isNaN(markerStartOffset)) {
          markerStartOffset -= gsap$1.getProperty(markerStartTrigger, direction.p);
          markerEndOffset -= gsap$1.getProperty(markerEndTrigger, direction.p);

          _shiftMarker(markerStartTrigger, direction, markerStartOffset);

          _shiftMarker(markerStart, direction, markerStartOffset - (pinOffset || 0));

          _shiftMarker(markerEndTrigger, direction, markerEndOffset);

          _shiftMarker(markerEnd, direction, markerEndOffset - (pinOffset || 0));
        }

        isFirstRefresh && !_refreshingAll && self.update();

        if (onRefresh && !_refreshingAll && !executingOnRefresh) {
          executingOnRefresh = true;
          onRefresh(self);
          executingOnRefresh = false;
        }
      };

      self.getVelocity = function () {
        return (scrollFunc() - scroll2) / (_getTime$1() - _time2) * 1000 || 0;
      };

      self.endAnimation = function () {
        _endAnimation(self.callbackAnimation);

        if (animation) {
          scrubTween ? scrubTween.progress(1) : !animation.paused() ? _endAnimation(animation, animation.reversed()) : isToggle || _endAnimation(animation, self.direction < 0, 1);
        }
      };

      self.labelToScroll = function (label) {
        return animation && animation.labels && (start || self.refresh() || start) + animation.labels[label] / animation.duration() * change || 0;
      };

      self.getTrailing = function (name) {
        var i = _triggers.indexOf(self),
            a = self.direction > 0 ? _triggers.slice(0, i).reverse() : _triggers.slice(i + 1);

        return (_isString(name) ? a.filter(function (t) {
          return t.vars.preventOverlaps === name;
        }) : a).filter(function (t) {
          return self.direction > 0 ? t.end <= start : t.start >= end;
        });
      };

      self.update = function (reset, recordVelocity, forceFake) {
        if (containerAnimation && !forceFake && !reset) {
          return;
        }

        var scroll = _refreshingAll === true ? prevScroll : self.scroll(),
            p = reset ? 0 : (scroll - start) / change,
            clipped = p < 0 ? 0 : p > 1 ? 1 : p || 0,
            prevProgress = self.progress,
            isActive,
            wasActive,
            toggleState,
            action,
            stateChanged,
            toggled,
            isAtMax,
            isTakingAction;

        if (recordVelocity) {
          scroll2 = scroll1;
          scroll1 = containerAnimation ? scrollFunc() : scroll;

          if (snap) {
            snap2 = snap1;
            snap1 = animation && !isToggle ? animation.totalProgress() : clipped;
          }
        }

        if (anticipatePin && pin && !_refreshing && !_startup$1 && _lastScrollTime) {
          if (!clipped && start < scroll + (scroll - scroll2) / (_getTime$1() - _time2) * anticipatePin) {
            clipped = 0.0001;
          } else if (clipped === 1 && end > scroll + (scroll - scroll2) / (_getTime$1() - _time2) * anticipatePin) {
            clipped = 0.9999;
          }
        }

        if (clipped !== prevProgress && self.enabled) {
          isActive = self.isActive = !!clipped && clipped < 1;
          wasActive = !!prevProgress && prevProgress < 1;
          toggled = isActive !== wasActive;
          stateChanged = toggled || !!clipped !== !!prevProgress;
          self.direction = clipped > prevProgress ? 1 : -1;
          self.progress = clipped;

          if (stateChanged && !_refreshing) {
            toggleState = clipped && !prevProgress ? 0 : clipped === 1 ? 1 : prevProgress === 1 ? 2 : 3;

            if (isToggle) {
              action = !toggled && toggleActions[toggleState + 1] !== "none" && toggleActions[toggleState + 1] || toggleActions[toggleState];
              isTakingAction = animation && (action === "complete" || action === "reset" || action in animation);
            }
          }

          preventOverlaps && (toggled || isTakingAction) && (isTakingAction || scrub || !animation) && (_isFunction(preventOverlaps) ? preventOverlaps(self) : self.getTrailing(preventOverlaps).forEach(function (t) {
            return t.endAnimation();
          }));

          if (!isToggle) {
            if (scrubTween && !_refreshing && !_startup$1) {
              scrubTween._dp._time - scrubTween._start !== scrubTween._time && scrubTween.render(scrubTween._dp._time - scrubTween._start);

              if (scrubTween.resetTo) {
                scrubTween.resetTo("totalProgress", clipped, animation._tTime / animation._tDur);
              } else {
                scrubTween.vars.totalProgress = clipped;
                scrubTween.invalidate().restart();
              }
            } else if (animation) {
              animation.totalProgress(clipped, !!(_refreshing && (lastRefresh || reset)));
            }
          }

          if (pin) {
            reset && pinSpacing && (spacer.style[pinSpacing + direction.os2] = spacingStart);

            if (!useFixedPosition) {
              pinSetter(_round(pinStart + pinChange * clipped));
            } else if (stateChanged) {
              isAtMax = !reset && clipped > prevProgress && end + 1 > scroll && scroll + 1 >= _maxScroll(scroller, direction);

              if (pinReparent) {
                if (!reset && (isActive || isAtMax)) {
                  var bounds = _getBounds(pin, true),
                      _offset = scroll - start;

                  _reparent(pin, _body$1, bounds.top + (direction === _vertical ? _offset : 0) + _px, bounds.left + (direction === _vertical ? 0 : _offset) + _px);
                } else {
                  _reparent(pin, spacer);
                }
              }

              _setState(isActive || isAtMax ? pinActiveState : pinState);

              pinMoves && clipped < 1 && isActive || pinSetter(pinStart + (clipped === 1 && !isAtMax ? pinChange : 0));
            }
          }

          snap && !tweenTo.tween && !_refreshing && !_startup$1 && snapDelayedCall.restart(true);
          toggleClass && (toggled || once && clipped && (clipped < 1 || !_limitCallbacks)) && _toArray(toggleClass.targets).forEach(function (el) {
            return el.classList[isActive || once ? "add" : "remove"](toggleClass.className);
          });
          onUpdate && !isToggle && !reset && onUpdate(self);

          if (stateChanged && !_refreshing) {
            if (isToggle) {
              if (isTakingAction) {
                if (action === "complete") {
                  animation.pause().totalProgress(1);
                } else if (action === "reset") {
                  animation.restart(true).pause();
                } else if (action === "restart") {
                  animation.restart(true);
                } else {
                  animation[action]();
                }
              }

              onUpdate && onUpdate(self);
            }

            if (toggled || !_limitCallbacks) {
              onToggle && toggled && _callback(self, onToggle);
              callbacks[toggleState] && _callback(self, callbacks[toggleState]);
              once && (clipped === 1 ? self.kill(false, 1) : callbacks[toggleState] = 0);

              if (!toggled) {
                toggleState = clipped === 1 ? 1 : 3;
                callbacks[toggleState] && _callback(self, callbacks[toggleState]);
              }
            }

            if (fastScrollEnd && !isActive && Math.abs(self.getVelocity()) > (_isNumber(fastScrollEnd) ? fastScrollEnd : 2500)) {
              _endAnimation(self.callbackAnimation);

              scrubTween ? scrubTween.progress(1) : _endAnimation(animation, action === "reverse" ? 1 : !clipped, 1);
            }
          } else if (isToggle && onUpdate && !_refreshing) {
            onUpdate(self);
          }
        }

        if (markerEndSetter) {
          var n = containerAnimation ? scroll / containerAnimation.duration() * (containerAnimation._caScrollDist || 0) : scroll;
          markerStartSetter(n + (markerStartTrigger._isFlipped ? 1 : 0));
          markerEndSetter(n);
        }

        caMarkerSetter && caMarkerSetter(-scroll / containerAnimation.duration() * (containerAnimation._caScrollDist || 0));
      };

      self.enable = function (reset, refresh) {
        if (!self.enabled) {
          self.enabled = true;

          _addListener$1(scroller, "resize", _onResize);

          isViewport || _addListener$1(scroller, "scroll", _onScroll$1);
          onRefreshInit && _addListener$1(ScrollTrigger, "refreshInit", onRefreshInit);

          if (reset !== false) {
            self.progress = prevProgress = 0;
            scroll1 = scroll2 = lastSnap = scrollFunc();
          }

          refresh !== false && self.refresh();
        }
      };

      self.getTween = function (snap) {
        return snap && tweenTo ? tweenTo.tween : scrubTween;
      };

      self.setPositions = function (newStart, newEnd, keepClamp, pinOffset) {
        if (containerAnimation) {
          var st = containerAnimation.scrollTrigger,
              duration = containerAnimation.duration(),
              _change = st.end - st.start;

          newStart = st.start + _change * newStart / duration;
          newEnd = st.start + _change * newEnd / duration;
        }

        self.refresh(false, false, {
          start: _keepClamp(newStart, keepClamp && !!self._startClamp),
          end: _keepClamp(newEnd, keepClamp && !!self._endClamp)
        }, pinOffset);
        self.update();
      };

      self.adjustPinSpacing = function (amount) {
        if (spacerState && amount) {
          var i = spacerState.indexOf(direction.d) + 1;
          spacerState[i] = parseFloat(spacerState[i]) + amount + _px;
          spacerState[1] = parseFloat(spacerState[1]) + amount + _px;

          _setState(spacerState);
        }
      };

      self.disable = function (reset, allowAnimation) {
        if (self.enabled) {
          reset !== false && self.revert(true, true);
          self.enabled = self.isActive = false;
          allowAnimation || scrubTween && scrubTween.pause();
          prevScroll = 0;
          pinCache && (pinCache.uncache = 1);
          onRefreshInit && _removeListener$1(ScrollTrigger, "refreshInit", onRefreshInit);

          if (snapDelayedCall) {
            snapDelayedCall.pause();
            tweenTo.tween && tweenTo.tween.kill() && (tweenTo.tween = 0);
          }

          if (!isViewport) {
            var i = _triggers.length;

            while (i--) {
              if (_triggers[i].scroller === scroller && _triggers[i] !== self) {
                return;
              }
            }

            _removeListener$1(scroller, "resize", _onResize);

            isViewport || _removeListener$1(scroller, "scroll", _onScroll$1);
          }
        }
      };

      self.kill = function (revert, allowAnimation) {
        self.disable(revert, allowAnimation);
        scrubTween && !allowAnimation && scrubTween.kill();
        id && delete _ids[id];

        var i = _triggers.indexOf(self);

        i >= 0 && _triggers.splice(i, 1);
        i === _i && _direction > 0 && _i--;
        i = 0;

        _triggers.forEach(function (t) {
          return t.scroller === self.scroller && (i = 1);
        });

        i || _refreshingAll || (self.scroll.rec = 0);

        if (animation) {
          animation.scrollTrigger = null;
          revert && animation.revert({
            kill: false
          });
          allowAnimation || animation.kill();
        }

        markerStart && [markerStart, markerEnd, markerStartTrigger, markerEndTrigger].forEach(function (m) {
          return m.parentNode && m.parentNode.removeChild(m);
        });
        _primary === self && (_primary = 0);

        if (pin) {
          pinCache && (pinCache.uncache = 1);
          i = 0;

          _triggers.forEach(function (t) {
            return t.pin === pin && i++;
          });

          i || (pinCache.spacer = 0);
        }

        vars.onKill && vars.onKill(self);
      };

      _triggers.push(self);

      self.enable(false, false);
      customRevertReturn && customRevertReturn(self);

      if (animation && animation.add && !change) {
        var updateFunc = self.update;

        self.update = function () {
          self.update = updateFunc;
          start || end || self.refresh();
        };

        gsap$1.delayedCall(0.01, self.update);
        change = 0.01;
        start = end = 0;
      } else {
        self.refresh();
      }

      pin && _queueRefreshAll();
    };

    ScrollTrigger.register = function register(core) {
      if (!_coreInitted$1) {
        gsap$1 = core || _getGSAP$1();
        _windowExists() && window.document && ScrollTrigger.enable();
        _coreInitted$1 = _enabled;
      }

      return _coreInitted$1;
    };

    ScrollTrigger.defaults = function defaults(config) {
      if (config) {
        for (var p in config) {
          _defaults[p] = config[p];
        }
      }

      return _defaults;
    };

    ScrollTrigger.disable = function disable(reset, kill) {
      _enabled = 0;

      _triggers.forEach(function (trigger) {
        return trigger[kill ? "kill" : "disable"](reset);
      });

      _removeListener$1(_win$1, "wheel", _onScroll$1);

      _removeListener$1(_doc$1, "scroll", _onScroll$1);

      clearInterval(_syncInterval);

      _removeListener$1(_doc$1, "touchcancel", _passThrough);

      _removeListener$1(_body$1, "touchstart", _passThrough);

      _multiListener(_removeListener$1, _doc$1, "pointerdown,touchstart,mousedown", _pointerDownHandler);

      _multiListener(_removeListener$1, _doc$1, "pointerup,touchend,mouseup", _pointerUpHandler);

      _resizeDelay.kill();

      _iterateAutoRefresh(_removeListener$1);

      for (var i = 0; i < _scrollers.length; i += 3) {
        _wheelListener(_removeListener$1, _scrollers[i], _scrollers[i + 1]);

        _wheelListener(_removeListener$1, _scrollers[i], _scrollers[i + 2]);
      }
    };

    ScrollTrigger.enable = function enable() {
      _win$1 = window;
      _doc$1 = document;
      _docEl$1 = _doc$1.documentElement;
      _body$1 = _doc$1.body;

      if (gsap$1) {
        _toArray = gsap$1.utils.toArray;
        _clamp$1 = gsap$1.utils.clamp;
        _context$1 = gsap$1.core.context || _passThrough;
        _suppressOverwrites = gsap$1.core.suppressOverwrites || _passThrough;
        _scrollRestoration = _win$1.history.scrollRestoration || "auto";
        _lastScroll = _win$1.pageYOffset;
        gsap$1.core.globals("ScrollTrigger", ScrollTrigger);

        if (_body$1) {
          _enabled = 1;
          _div100vh = document.createElement("div");
          _div100vh.style.height = "100vh";
          _div100vh.style.position = "absolute";

          _refresh100vh();

          _rafBugFix();

          Observer.register(gsap$1);
          ScrollTrigger.isTouch = Observer.isTouch;
          _fixIOSBug = Observer.isTouch && /(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent);
          _ignoreMobileResize = Observer.isTouch === 1;

          _addListener$1(_win$1, "wheel", _onScroll$1);

          _root$1 = [_win$1, _doc$1, _docEl$1, _body$1];

          if (gsap$1.matchMedia) {
            ScrollTrigger.matchMedia = function (vars) {
              var mm = gsap$1.matchMedia(),
                  p;

              for (p in vars) {
                mm.add(p, vars[p]);
              }

              return mm;
            };

            gsap$1.addEventListener("matchMediaInit", function () {
              return _revertAll();
            });
            gsap$1.addEventListener("matchMediaRevert", function () {
              return _revertRecorded();
            });
            gsap$1.addEventListener("matchMedia", function () {
              _refreshAll(0, 1);

              _dispatch("matchMedia");
            });
            gsap$1.matchMedia("(orientation: portrait)", function () {
              _setBaseDimensions();

              return _setBaseDimensions;
            });
          } else {
            console.warn("Requires GSAP 3.11.0 or later");
          }

          _setBaseDimensions();

          _addListener$1(_doc$1, "scroll", _onScroll$1);

          var bodyStyle = _body$1.style,
              border = bodyStyle.borderTopStyle,
              AnimationProto = gsap$1.core.Animation.prototype,
              bounds,
              i;
          AnimationProto.revert || Object.defineProperty(AnimationProto, "revert", {
            value: function value() {
              return this.time(-0.01, true);
            }
          });
          bodyStyle.borderTopStyle = "solid";
          bounds = _getBounds(_body$1);
          _vertical.m = Math.round(bounds.top + _vertical.sc()) || 0;
          _horizontal.m = Math.round(bounds.left + _horizontal.sc()) || 0;
          border ? bodyStyle.borderTopStyle = border : bodyStyle.removeProperty("border-top-style");
          _syncInterval = setInterval(_sync, 250);
          gsap$1.delayedCall(0.5, function () {
            return _startup$1 = 0;
          });

          _addListener$1(_doc$1, "touchcancel", _passThrough);

          _addListener$1(_body$1, "touchstart", _passThrough);

          _multiListener(_addListener$1, _doc$1, "pointerdown,touchstart,mousedown", _pointerDownHandler);

          _multiListener(_addListener$1, _doc$1, "pointerup,touchend,mouseup", _pointerUpHandler);

          _transformProp = gsap$1.utils.checkPrefix("transform");

          _stateProps.push(_transformProp);

          _coreInitted$1 = _getTime$1();
          _resizeDelay = gsap$1.delayedCall(0.2, _refreshAll).pause();
          _autoRefresh = [_doc$1, "visibilitychange", function () {
            var w = _win$1.innerWidth,
                h = _win$1.innerHeight;

            if (_doc$1.hidden) {
              _prevWidth = w;
              _prevHeight = h;
            } else if (_prevWidth !== w || _prevHeight !== h) {
              _onResize();
            }
          }, _doc$1, "DOMContentLoaded", _refreshAll, _win$1, "load", _refreshAll, _win$1, "resize", _onResize];

          _iterateAutoRefresh(_addListener$1);

          _triggers.forEach(function (trigger) {
            return trigger.enable(0, 1);
          });

          for (i = 0; i < _scrollers.length; i += 3) {
            _wheelListener(_removeListener$1, _scrollers[i], _scrollers[i + 1]);

            _wheelListener(_removeListener$1, _scrollers[i], _scrollers[i + 2]);
          }
        }
      }
    };

    ScrollTrigger.config = function config(vars) {
      "limitCallbacks" in vars && (_limitCallbacks = !!vars.limitCallbacks);
      var ms = vars.syncInterval;
      ms && clearInterval(_syncInterval) || (_syncInterval = ms) && setInterval(_sync, ms);
      "ignoreMobileResize" in vars && (_ignoreMobileResize = ScrollTrigger.isTouch === 1 && vars.ignoreMobileResize);

      if ("autoRefreshEvents" in vars) {
        _iterateAutoRefresh(_removeListener$1) || _iterateAutoRefresh(_addListener$1, vars.autoRefreshEvents || "none");
        _ignoreResize = (vars.autoRefreshEvents + "").indexOf("resize") === -1;
      }
    };

    ScrollTrigger.scrollerProxy = function scrollerProxy(target, vars) {
      var t = _getTarget(target),
          i = _scrollers.indexOf(t),
          isViewport = _isViewport$1(t);

      if (~i) {
        _scrollers.splice(i, isViewport ? 6 : 2);
      }

      if (vars) {
        isViewport ? _proxies.unshift(_win$1, vars, _body$1, vars, _docEl$1, vars) : _proxies.unshift(t, vars);
      }
    };

    ScrollTrigger.clearMatchMedia = function clearMatchMedia(query) {
      _triggers.forEach(function (t) {
        return t._ctx && t._ctx.query === query && t._ctx.kill(true, true);
      });
    };

    ScrollTrigger.isInViewport = function isInViewport(element, ratio, horizontal) {
      var bounds = (_isString(element) ? _getTarget(element) : element).getBoundingClientRect(),
          offset = bounds[horizontal ? _width : _height] * ratio || 0;
      return horizontal ? bounds.right - offset > 0 && bounds.left + offset < _win$1.innerWidth : bounds.bottom - offset > 0 && bounds.top + offset < _win$1.innerHeight;
    };

    ScrollTrigger.positionInViewport = function positionInViewport(element, referencePoint, horizontal) {
      _isString(element) && (element = _getTarget(element));
      var bounds = element.getBoundingClientRect(),
          size = bounds[horizontal ? _width : _height],
          offset = referencePoint == null ? size / 2 : referencePoint in _keywords ? _keywords[referencePoint] * size : ~referencePoint.indexOf("%") ? parseFloat(referencePoint) * size / 100 : parseFloat(referencePoint) || 0;
      return horizontal ? (bounds.left + offset) / _win$1.innerWidth : (bounds.top + offset) / _win$1.innerHeight;
    };

    ScrollTrigger.killAll = function killAll(allowListeners) {
      _triggers.slice(0).forEach(function (t) {
        return t.vars.id !== "ScrollSmoother" && t.kill();
      });

      if (allowListeners !== true) {
        var listeners = _listeners.killAll || [];
        _listeners = {};
        listeners.forEach(function (f) {
          return f();
        });
      }
    };

    return ScrollTrigger;
  }();
  ScrollTrigger$1.version = "3.12.5";

  ScrollTrigger$1.saveStyles = function (targets) {
    return targets ? _toArray(targets).forEach(function (target) {
      if (target && target.style) {
        var i = _savedStyles.indexOf(target);

        i >= 0 && _savedStyles.splice(i, 5);

        _savedStyles.push(target, target.style.cssText, target.getBBox && target.getAttribute("transform"), gsap$1.core.getCache(target), _context$1());
      }
    }) : _savedStyles;
  };

  ScrollTrigger$1.revert = function (soft, media) {
    return _revertAll(!soft, media);
  };

  ScrollTrigger$1.create = function (vars, animation) {
    return new ScrollTrigger$1(vars, animation);
  };

  ScrollTrigger$1.refresh = function (safe) {
    return safe ? _onResize() : (_coreInitted$1 || ScrollTrigger$1.register()) && _refreshAll(true);
  };

  ScrollTrigger$1.update = function (force) {
    return ++_scrollers.cache && _updateAll(force === true ? 2 : 0);
  };

  ScrollTrigger$1.clearScrollMemory = _clearScrollMemory;

  ScrollTrigger$1.maxScroll = function (element, horizontal) {
    return _maxScroll(element, horizontal ? _horizontal : _vertical);
  };

  ScrollTrigger$1.getScrollFunc = function (element, horizontal) {
    return _getScrollFunc(_getTarget(element), horizontal ? _horizontal : _vertical);
  };

  ScrollTrigger$1.getById = function (id) {
    return _ids[id];
  };

  ScrollTrigger$1.getAll = function () {
    return _triggers.filter(function (t) {
      return t.vars.id !== "ScrollSmoother";
    });
  };

  ScrollTrigger$1.isScrolling = function () {
    return !!_lastScrollTime;
  };

  ScrollTrigger$1.snapDirectional = _snapDirectional;

  ScrollTrigger$1.addEventListener = function (type, callback) {
    var a = _listeners[type] || (_listeners[type] = []);
    ~a.indexOf(callback) || a.push(callback);
  };

  ScrollTrigger$1.removeEventListener = function (type, callback) {
    var a = _listeners[type],
        i = a && a.indexOf(callback);
    i >= 0 && a.splice(i, 1);
  };

  ScrollTrigger$1.batch = function (targets, vars) {
    var result = [],
        varsCopy = {},
        interval = vars.interval || 0.016,
        batchMax = vars.batchMax || 1e9,
        proxyCallback = function proxyCallback(type, callback) {
      var elements = [],
          triggers = [],
          delay = gsap$1.delayedCall(interval, function () {
        callback(elements, triggers);
        elements = [];
        triggers = [];
      }).pause();
      return function (self) {
        elements.length || delay.restart(true);
        elements.push(self.trigger);
        triggers.push(self);
        batchMax <= elements.length && delay.progress(1);
      };
    },
        p;

    for (p in vars) {
      varsCopy[p] = p.substr(0, 2) === "on" && _isFunction(vars[p]) && p !== "onRefreshInit" ? proxyCallback(p, vars[p]) : vars[p];
    }

    if (_isFunction(batchMax)) {
      batchMax = batchMax();

      _addListener$1(ScrollTrigger$1, "refresh", function () {
        return batchMax = vars.batchMax();
      });
    }

    _toArray(targets).forEach(function (target) {
      var config = {};

      for (p in varsCopy) {
        config[p] = varsCopy[p];
      }

      config.trigger = target;
      result.push(ScrollTrigger$1.create(config));
    });

    return result;
  };

  var _clampScrollAndGetDurationMultiplier = function _clampScrollAndGetDurationMultiplier(scrollFunc, current, end, max) {
    current > max ? scrollFunc(max) : current < 0 && scrollFunc(0);
    return end > max ? (max - current) / (end - current) : end < 0 ? current / (current - end) : 1;
  },
      _allowNativePanning = function _allowNativePanning(target, direction) {
    if (direction === true) {
      target.style.removeProperty("touch-action");
    } else {
      target.style.touchAction = direction === true ? "auto" : direction ? "pan-" + direction + (Observer.isTouch ? " pinch-zoom" : "") : "none";
    }

    target === _docEl$1 && _allowNativePanning(_body$1, direction);
  },
      _overflow = {
    auto: 1,
    scroll: 1
  },
      _nestedScroll = function _nestedScroll(_ref5) {
    var event = _ref5.event,
        target = _ref5.target,
        axis = _ref5.axis;

    var node = (event.changedTouches ? event.changedTouches[0] : event).target,
        cache = node._gsap || gsap$1.core.getCache(node),
        time = _getTime$1(),
        cs;

    if (!cache._isScrollT || time - cache._isScrollT > 2000) {
      while (node && node !== _body$1 && (node.scrollHeight <= node.clientHeight && node.scrollWidth <= node.clientWidth || !(_overflow[(cs = _getComputedStyle(node)).overflowY] || _overflow[cs.overflowX]))) {
        node = node.parentNode;
      }

      cache._isScroll = node && node !== target && !_isViewport$1(node) && (_overflow[(cs = _getComputedStyle(node)).overflowY] || _overflow[cs.overflowX]);
      cache._isScrollT = time;
    }

    if (cache._isScroll || axis === "x") {
      event.stopPropagation();
      event._gsapAllow = true;
    }
  },
      _inputObserver = function _inputObserver(target, type, inputs, nested) {
    return Observer.create({
      target: target,
      capture: true,
      debounce: false,
      lockAxis: true,
      type: type,
      onWheel: nested = nested && _nestedScroll,
      onPress: nested,
      onDrag: nested,
      onScroll: nested,
      onEnable: function onEnable() {
        return inputs && _addListener$1(_doc$1, Observer.eventTypes[0], _captureInputs, false, true);
      },
      onDisable: function onDisable() {
        return _removeListener$1(_doc$1, Observer.eventTypes[0], _captureInputs, true);
      }
    });
  },
      _inputExp = /(input|label|select|textarea)/i,
      _inputIsFocused,
      _captureInputs = function _captureInputs(e) {
    var isInput = _inputExp.test(e.target.tagName);

    if (isInput || _inputIsFocused) {
      e._gsapAllow = true;
      _inputIsFocused = isInput;
    }
  },
      _getScrollNormalizer = function _getScrollNormalizer(vars) {
    _isObject(vars) || (vars = {});
    vars.preventDefault = vars.isNormalizer = vars.allowClicks = true;
    vars.type || (vars.type = "wheel,touch");
    vars.debounce = !!vars.debounce;
    vars.id = vars.id || "normalizer";

    var _vars2 = vars,
        normalizeScrollX = _vars2.normalizeScrollX,
        momentum = _vars2.momentum,
        allowNestedScroll = _vars2.allowNestedScroll,
        onRelease = _vars2.onRelease,
        self,
        maxY,
        target = _getTarget(vars.target) || _docEl$1,
        smoother = gsap$1.core.globals().ScrollSmoother,
        smootherInstance = smoother && smoother.get(),
        content = _fixIOSBug && (vars.content && _getTarget(vars.content) || smootherInstance && vars.content !== false && !smootherInstance.smooth() && smootherInstance.content()),
        scrollFuncY = _getScrollFunc(target, _vertical),
        scrollFuncX = _getScrollFunc(target, _horizontal),
        scale = 1,
        initialScale = (Observer.isTouch && _win$1.visualViewport ? _win$1.visualViewport.scale * _win$1.visualViewport.width : _win$1.outerWidth) / _win$1.innerWidth,
        wheelRefresh = 0,
        resolveMomentumDuration = _isFunction(momentum) ? function () {
      return momentum(self);
    } : function () {
      return momentum || 2.8;
    },
        lastRefreshID,
        skipTouchMove,
        inputObserver = _inputObserver(target, vars.type, true, allowNestedScroll),
        resumeTouchMove = function resumeTouchMove() {
      return skipTouchMove = false;
    },
        scrollClampX = _passThrough,
        scrollClampY = _passThrough,
        updateClamps = function updateClamps() {
      maxY = _maxScroll(target, _vertical);
      scrollClampY = _clamp$1(_fixIOSBug ? 1 : 0, maxY);
      normalizeScrollX && (scrollClampX = _clamp$1(0, _maxScroll(target, _horizontal)));
      lastRefreshID = _refreshID;
    },
        removeContentOffset = function removeContentOffset() {
      content._gsap.y = _round(parseFloat(content._gsap.y) + scrollFuncY.offset) + "px";
      content.style.transform = "matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, " + parseFloat(content._gsap.y) + ", 0, 1)";
      scrollFuncY.offset = scrollFuncY.cacheID = 0;
    },
        ignoreDrag = function ignoreDrag() {
      if (skipTouchMove) {
        requestAnimationFrame(resumeTouchMove);

        var offset = _round(self.deltaY / 2),
            scroll = scrollClampY(scrollFuncY.v - offset);

        if (content && scroll !== scrollFuncY.v + scrollFuncY.offset) {
          scrollFuncY.offset = scroll - scrollFuncY.v;

          var y = _round((parseFloat(content && content._gsap.y) || 0) - scrollFuncY.offset);

          content.style.transform = "matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, " + y + ", 0, 1)";
          content._gsap.y = y + "px";
          scrollFuncY.cacheID = _scrollers.cache;

          _updateAll();
        }

        return true;
      }

      scrollFuncY.offset && removeContentOffset();
      skipTouchMove = true;
    },
        tween,
        startScrollX,
        startScrollY,
        onStopDelayedCall,
        onResize = function onResize() {
      updateClamps();

      if (tween.isActive() && tween.vars.scrollY > maxY) {
        scrollFuncY() > maxY ? tween.progress(1) && scrollFuncY(maxY) : tween.resetTo("scrollY", maxY);
      }
    };

    content && gsap$1.set(content, {
      y: "+=0"
    });

    vars.ignoreCheck = function (e) {
      return _fixIOSBug && e.type === "touchmove" && ignoreDrag() || scale > 1.05 && e.type !== "touchstart" || self.isGesturing || e.touches && e.touches.length > 1;
    };

    vars.onPress = function () {
      skipTouchMove = false;
      var prevScale = scale;
      scale = _round((_win$1.visualViewport && _win$1.visualViewport.scale || 1) / initialScale);
      tween.pause();
      prevScale !== scale && _allowNativePanning(target, scale > 1.01 ? true : normalizeScrollX ? false : "x");
      startScrollX = scrollFuncX();
      startScrollY = scrollFuncY();
      updateClamps();
      lastRefreshID = _refreshID;
    };

    vars.onRelease = vars.onGestureStart = function (self, wasDragging) {
      scrollFuncY.offset && removeContentOffset();

      if (!wasDragging) {
        onStopDelayedCall.restart(true);
      } else {
        _scrollers.cache++;
        var dur = resolveMomentumDuration(),
            currentScroll,
            endScroll;

        if (normalizeScrollX) {
          currentScroll = scrollFuncX();
          endScroll = currentScroll + dur * 0.05 * -self.velocityX / 0.227;
          dur *= _clampScrollAndGetDurationMultiplier(scrollFuncX, currentScroll, endScroll, _maxScroll(target, _horizontal));
          tween.vars.scrollX = scrollClampX(endScroll);
        }

        currentScroll = scrollFuncY();
        endScroll = currentScroll + dur * 0.05 * -self.velocityY / 0.227;
        dur *= _clampScrollAndGetDurationMultiplier(scrollFuncY, currentScroll, endScroll, _maxScroll(target, _vertical));
        tween.vars.scrollY = scrollClampY(endScroll);
        tween.invalidate().duration(dur).play(0.01);

        if (_fixIOSBug && tween.vars.scrollY >= maxY || currentScroll >= maxY - 1) {
          gsap$1.to({}, {
            onUpdate: onResize,
            duration: dur
          });
        }
      }

      onRelease && onRelease(self);
    };

    vars.onWheel = function () {
      tween._ts && tween.pause();

      if (_getTime$1() - wheelRefresh > 1000) {
        lastRefreshID = 0;
        wheelRefresh = _getTime$1();
      }
    };

    vars.onChange = function (self, dx, dy, xArray, yArray) {
      _refreshID !== lastRefreshID && updateClamps();
      dx && normalizeScrollX && scrollFuncX(scrollClampX(xArray[2] === dx ? startScrollX + (self.startX - self.x) : scrollFuncX() + dx - xArray[1]));

      if (dy) {
        scrollFuncY.offset && removeContentOffset();
        var isTouch = yArray[2] === dy,
            y = isTouch ? startScrollY + self.startY - self.y : scrollFuncY() + dy - yArray[1],
            yClamped = scrollClampY(y);
        isTouch && y !== yClamped && (startScrollY += yClamped - y);
        scrollFuncY(yClamped);
      }

      (dy || dx) && _updateAll();
    };

    vars.onEnable = function () {
      _allowNativePanning(target, normalizeScrollX ? false : "x");

      ScrollTrigger$1.addEventListener("refresh", onResize);

      _addListener$1(_win$1, "resize", onResize);

      if (scrollFuncY.smooth) {
        scrollFuncY.target.style.scrollBehavior = "auto";
        scrollFuncY.smooth = scrollFuncX.smooth = false;
      }

      inputObserver.enable();
    };

    vars.onDisable = function () {
      _allowNativePanning(target, true);

      _removeListener$1(_win$1, "resize", onResize);

      ScrollTrigger$1.removeEventListener("refresh", onResize);
      inputObserver.kill();
    };

    vars.lockAxis = vars.lockAxis !== false;
    self = new Observer(vars);
    self.iOS = _fixIOSBug;
    _fixIOSBug && !scrollFuncY() && scrollFuncY(1);
    _fixIOSBug && gsap$1.ticker.add(_passThrough);
    onStopDelayedCall = self._dc;
    tween = gsap$1.to(self, {
      ease: "power4",
      paused: true,
      inherit: false,
      scrollX: normalizeScrollX ? "+=0.1" : "+=0",
      scrollY: "+=0.1",
      modifiers: {
        scrollY: _interruptionTracker(scrollFuncY, scrollFuncY(), function () {
          return tween.pause();
        })
      },
      onUpdate: _updateAll,
      onComplete: onStopDelayedCall.vars.onComplete
    });
    return self;
  };

  ScrollTrigger$1.sort = function (func) {
    return _triggers.sort(func || function (a, b) {
      return (a.vars.refreshPriority || 0) * -1e6 + a.start - (b.start + (b.vars.refreshPriority || 0) * -1e6);
    });
  };

  ScrollTrigger$1.observe = function (vars) {
    return new Observer(vars);
  };

  ScrollTrigger$1.normalizeScroll = function (vars) {
    if (typeof vars === "undefined") {
      return _normalizer$1;
    }

    if (vars === true && _normalizer$1) {
      return _normalizer$1.enable();
    }

    if (vars === false) {
      _normalizer$1 && _normalizer$1.kill();
      _normalizer$1 = vars;
      return;
    }

    var normalizer = vars instanceof Observer ? vars : _getScrollNormalizer(vars);
    _normalizer$1 && _normalizer$1.target === normalizer.target && _normalizer$1.kill();
    _isViewport$1(normalizer.target) && (_normalizer$1 = normalizer);
    return normalizer;
  };

  ScrollTrigger$1.core = {
    _getVelocityProp: _getVelocityProp,
    _inputObserver: _inputObserver,
    _scrollers: _scrollers,
    _proxies: _proxies,
    bridge: {
      ss: function ss() {
        _lastScrollTime || _dispatch("scrollStart");
        _lastScrollTime = _getTime$1();
      },
      ref: function ref() {
        return _refreshing;
      }
    }
  };
  _getGSAP$1() && gsap$1.registerPlugin(ScrollTrigger$1);

  exports.ScrollTrigger = ScrollTrigger$1;
  exports.default = ScrollTrigger$1;

  if (typeof(window) === 'undefined' || window !== exports) {Object.defineProperty(exports, '__esModule', { value: true });} else {delete window.default;}

})));

},{}],4:[function(require,module,exports){
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(global = global || self, factory(global.window = global.window || {}));
}(this, (function (exports) { 'use strict';

	var emojiExp = /([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;
	function getText(e) {
	  var type = e.nodeType,
	      result = "";

	  if (type === 1 || type === 9 || type === 11) {
	    if (typeof e.textContent === "string") {
	      return e.textContent;
	    } else {
	      for (e = e.firstChild; e; e = e.nextSibling) {
	        result += getText(e);
	      }
	    }
	  } else if (type === 3 || type === 4) {
	    return e.nodeValue;
	  }

	  return result;
	}

	/*!
	 * SplitText: 3.12.5
	 * https://gsap.com
	 *
	 * @license Copyright 2008-2024, GreenSock. All rights reserved.
	 * Subject to the terms at https://gsap.com/standard-license or for
	 * Club GSAP members, the agreement issued with that membership.
	 * @author: Jack Doyle, jack@greensock.com
	*/

	var _doc,
	    _win,
	    _coreInitted,
	    gsap,
	    _context,
	    _toArray,
	    _stripExp = /(?:\r|\n|\t\t)/g,
	    _multipleSpacesExp = /(?:\s\s+)/g,
	    _nonBreakingSpace = String.fromCharCode(160),
	    _initCore = function _initCore(core) {
	  _doc = document;
	  _win = window;
	  gsap = gsap || core || _win.gsap || console.warn("Please gsap.registerPlugin(SplitText)");

	  if (gsap) {
	    _toArray = gsap.utils.toArray;

	    _context = gsap.core.context || function () {};

	    _coreInitted = 1;
	  }
	},
	    _getComputedStyle = function _getComputedStyle(element) {
	  return _win.getComputedStyle(element);
	},
	    _isAbsolute = function _isAbsolute(vars) {
	  return vars.position === "absolute" || vars.absolute === true;
	},
	    _findSpecialChars = function _findSpecialChars(text, chars) {
	  var i = chars.length,
	      s;

	  while (--i > -1) {
	    s = chars[i];

	    if (text.substr(0, s.length) === s) {
	      return s.length;
	    }
	  }
	},
	    _divStart = " style='position:relative;display:inline-block;'",
	    _cssClassFunc = function _cssClassFunc(cssClass, tag) {
	  if (cssClass === void 0) {
	    cssClass = "";
	  }

	  var iterate = ~cssClass.indexOf("++"),
	      num = 1;

	  if (iterate) {
	    cssClass = cssClass.split("++").join("");
	  }

	  return function () {
	    return "<" + tag + _divStart + (cssClass ? " class='" + cssClass + (iterate ? num++ : "") + "'>" : ">");
	  };
	},
	    _swapText = function _swapText(element, oldText, newText) {
	  var type = element.nodeType;

	  if (type === 1 || type === 9 || type === 11) {
	    for (element = element.firstChild; element; element = element.nextSibling) {
	      _swapText(element, oldText, newText);
	    }
	  } else if (type === 3 || type === 4) {
	    element.nodeValue = element.nodeValue.split(oldText).join(newText);
	  }
	},
	    _pushReversed = function _pushReversed(a, merge) {
	  var i = merge.length;

	  while (--i > -1) {
	    a.push(merge[i]);
	  }
	},
	    _isBeforeWordDelimiter = function _isBeforeWordDelimiter(e, root, wordDelimiter) {
	  var next;

	  while (e && e !== root) {
	    next = e._next || e.nextSibling;

	    if (next) {
	      return next.textContent.charAt(0) === wordDelimiter;
	    }

	    e = e.parentNode || e._parent;
	  }
	},
	    _deWordify = function _deWordify(e) {
	  var children = _toArray(e.childNodes),
	      l = children.length,
	      i,
	      child;

	  for (i = 0; i < l; i++) {
	    child = children[i];

	    if (child._isSplit) {
	      _deWordify(child);
	    } else {
	      if (i && child.previousSibling && child.previousSibling.nodeType === 3) {
	        child.previousSibling.nodeValue += child.nodeType === 3 ? child.nodeValue : child.firstChild.nodeValue;
	        e.removeChild(child);
	      } else if (child.nodeType !== 3) {
	        e.insertBefore(child.firstChild, child);
	        e.removeChild(child);
	      }
	    }
	  }
	},
	    _getStyleAsNumber = function _getStyleAsNumber(name, computedStyle) {
	  return parseFloat(computedStyle[name]) || 0;
	},
	    _setPositionsAfterSplit = function _setPositionsAfterSplit(element, vars, allChars, allWords, allLines, origWidth, origHeight) {
	  var cs = _getComputedStyle(element),
	      paddingLeft = _getStyleAsNumber("paddingLeft", cs),
	      lineOffsetY = -999,
	      borderTopAndBottom = _getStyleAsNumber("borderBottomWidth", cs) + _getStyleAsNumber("borderTopWidth", cs),
	      borderLeftAndRight = _getStyleAsNumber("borderLeftWidth", cs) + _getStyleAsNumber("borderRightWidth", cs),
	      padTopAndBottom = _getStyleAsNumber("paddingTop", cs) + _getStyleAsNumber("paddingBottom", cs),
	      padLeftAndRight = _getStyleAsNumber("paddingLeft", cs) + _getStyleAsNumber("paddingRight", cs),
	      lineThreshold = _getStyleAsNumber("fontSize", cs) * (vars.lineThreshold || 0.2),
	      textAlign = cs.textAlign,
	      charArray = [],
	      wordArray = [],
	      lineArray = [],
	      wordDelimiter = vars.wordDelimiter || " ",
	      tag = vars.tag ? vars.tag : vars.span ? "span" : "div",
	      types = vars.type || vars.split || "chars,words,lines",
	      lines = allLines && ~types.indexOf("lines") ? [] : null,
	      words = ~types.indexOf("words"),
	      chars = ~types.indexOf("chars"),
	      absolute = _isAbsolute(vars),
	      linesClass = vars.linesClass,
	      iterateLine = ~(linesClass || "").indexOf("++"),
	      spaceNodesToRemove = [],
	      isFlex = cs.display === "flex",
	      prevInlineDisplay = element.style.display,
	      i,
	      j,
	      l,
	      node,
	      nodes,
	      isChild,
	      curLine,
	      addWordSpaces,
	      style,
	      lineNode,
	      lineWidth,
	      offset;

	  iterateLine && (linesClass = linesClass.split("++").join(""));
	  isFlex && (element.style.display = "block");
	  j = element.getElementsByTagName("*");
	  l = j.length;
	  nodes = [];

	  for (i = 0; i < l; i++) {
	    nodes[i] = j[i];
	  }

	  if (lines || absolute) {
	    for (i = 0; i < l; i++) {
	      node = nodes[i];
	      isChild = node.parentNode === element;

	      if (isChild || absolute || chars && !words) {
	        offset = node.offsetTop;

	        if (lines && isChild && Math.abs(offset - lineOffsetY) > lineThreshold && (node.nodeName !== "BR" || i === 0)) {
	          curLine = [];
	          lines.push(curLine);
	          lineOffsetY = offset;
	        }

	        if (absolute) {
	          node._x = node.offsetLeft;
	          node._y = offset;
	          node._w = node.offsetWidth;
	          node._h = node.offsetHeight;
	        }

	        if (lines) {
	          if (node._isSplit && isChild || !chars && isChild || words && isChild || !words && node.parentNode.parentNode === element && !node.parentNode._isSplit) {
	            curLine.push(node);
	            node._x -= paddingLeft;

	            if (_isBeforeWordDelimiter(node, element, wordDelimiter)) {
	              node._wordEnd = true;
	            }
	          }

	          if (node.nodeName === "BR" && (node.nextSibling && node.nextSibling.nodeName === "BR" || i === 0)) {
	            lines.push([]);
	          }
	        }
	      }
	    }
	  }

	  for (i = 0; i < l; i++) {
	    node = nodes[i];
	    isChild = node.parentNode === element;

	    if (node.nodeName === "BR") {
	      if (lines || absolute) {
	        node.parentNode && node.parentNode.removeChild(node);
	        nodes.splice(i--, 1);
	        l--;
	      } else if (!words) {
	        element.appendChild(node);
	      }

	      continue;
	    }

	    if (absolute) {
	      style = node.style;

	      if (!words && !isChild) {
	        node._x += node.parentNode._x;
	        node._y += node.parentNode._y;
	      }

	      style.left = node._x + "px";
	      style.top = node._y + "px";
	      style.position = "absolute";
	      style.display = "block";
	      style.width = node._w + 1 + "px";
	      style.height = node._h + "px";
	    }

	    if (!words && chars) {
	      if (node._isSplit) {
	        node._next = j = node.nextSibling;
	        node.parentNode.appendChild(node);

	        while (j && j.nodeType === 3 && j.textContent === " ") {
	          node._next = j.nextSibling;
	          node.parentNode.appendChild(j);
	          j = j.nextSibling;
	        }
	      } else if (node.parentNode._isSplit) {
	        node._parent = node.parentNode;

	        if (!node.previousSibling && node.firstChild) {
	          node.firstChild._isFirst = true;
	        }

	        if (node.nextSibling && node.nextSibling.textContent === " " && !node.nextSibling.nextSibling) {
	          spaceNodesToRemove.push(node.nextSibling);
	        }

	        node._next = node.nextSibling && node.nextSibling._isFirst ? null : node.nextSibling;
	        node.parentNode.removeChild(node);
	        nodes.splice(i--, 1);
	        l--;
	      } else if (!isChild) {
	        offset = !node.nextSibling && _isBeforeWordDelimiter(node.parentNode, element, wordDelimiter);
	        node.parentNode._parent && node.parentNode._parent.appendChild(node);
	        offset && node.parentNode.appendChild(_doc.createTextNode(" "));

	        if (tag === "span") {
	          node.style.display = "inline";
	        }

	        charArray.push(node);
	      }
	    } else if (node.parentNode._isSplit && !node._isSplit && node.innerHTML !== "") {
	      wordArray.push(node);
	    } else if (chars && !node._isSplit) {
	      if (tag === "span") {
	        node.style.display = "inline";
	      }

	      charArray.push(node);
	    }
	  }

	  i = spaceNodesToRemove.length;

	  while (--i > -1) {
	    spaceNodesToRemove[i].parentNode.removeChild(spaceNodesToRemove[i]);
	  }

	  if (lines) {
	    if (absolute) {
	      lineNode = _doc.createElement(tag);
	      element.appendChild(lineNode);
	      lineWidth = lineNode.offsetWidth + "px";
	      offset = lineNode.offsetParent === element ? 0 : element.offsetLeft;
	      element.removeChild(lineNode);
	    }

	    style = element.style.cssText;
	    element.style.cssText = "display:none;";

	    while (element.firstChild) {
	      element.removeChild(element.firstChild);
	    }

	    addWordSpaces = wordDelimiter === " " && (!absolute || !words && !chars);

	    for (i = 0; i < lines.length; i++) {
	      curLine = lines[i];
	      lineNode = _doc.createElement(tag);
	      lineNode.style.cssText = "display:block;text-align:" + textAlign + ";position:" + (absolute ? "absolute;" : "relative;");

	      if (linesClass) {
	        lineNode.className = linesClass + (iterateLine ? i + 1 : "");
	      }

	      lineArray.push(lineNode);
	      l = curLine.length;

	      for (j = 0; j < l; j++) {
	        if (curLine[j].nodeName !== "BR") {
	          node = curLine[j];
	          lineNode.appendChild(node);
	          addWordSpaces && node._wordEnd && lineNode.appendChild(_doc.createTextNode(" "));

	          if (absolute) {
	            if (j === 0) {
	              lineNode.style.top = node._y + "px";
	              lineNode.style.left = paddingLeft + offset + "px";
	            }

	            node.style.top = "0px";

	            if (offset) {
	              node.style.left = node._x - offset + "px";
	            }
	          }
	        }
	      }

	      if (l === 0) {
	        lineNode.innerHTML = "&nbsp;";
	      } else if (!words && !chars) {
	        _deWordify(lineNode);

	        _swapText(lineNode, String.fromCharCode(160), " ");
	      }

	      if (absolute) {
	        lineNode.style.width = lineWidth;
	        lineNode.style.height = node._h + "px";
	      }

	      element.appendChild(lineNode);
	    }

	    element.style.cssText = style;
	  }

	  if (absolute) {
	    if (origHeight > element.clientHeight) {
	      element.style.height = origHeight - padTopAndBottom + "px";

	      if (element.clientHeight < origHeight) {
	        element.style.height = origHeight + borderTopAndBottom + "px";
	      }
	    }

	    if (origWidth > element.clientWidth) {
	      element.style.width = origWidth - padLeftAndRight + "px";

	      if (element.clientWidth < origWidth) {
	        element.style.width = origWidth + borderLeftAndRight + "px";
	      }
	    }
	  }

	  isFlex && (prevInlineDisplay ? element.style.display = prevInlineDisplay : element.style.removeProperty("display"));

	  _pushReversed(allChars, charArray);

	  words && _pushReversed(allWords, wordArray);

	  _pushReversed(allLines, lineArray);
	},
	    _splitRawText = function _splitRawText(element, vars, wordStart, charStart) {
	  var tag = vars.tag ? vars.tag : vars.span ? "span" : "div",
	      types = vars.type || vars.split || "chars,words,lines",
	      chars = ~types.indexOf("chars"),
	      absolute = _isAbsolute(vars),
	      wordDelimiter = vars.wordDelimiter || " ",
	      isWordDelimiter = function isWordDelimiter(_char) {
	    return _char === wordDelimiter || _char === _nonBreakingSpace && wordDelimiter === " ";
	  },
	      space = wordDelimiter !== " " ? "" : absolute ? "&#173; " : " ",
	      wordEnd = "</" + tag + ">",
	      wordIsOpen = 1,
	      specialChars = vars.specialChars ? typeof vars.specialChars === "function" ? vars.specialChars : _findSpecialChars : null,
	      text,
	      splitText,
	      i,
	      j,
	      l,
	      character,
	      hasTagStart,
	      testResult,
	      container = _doc.createElement("div"),
	      parent = element.parentNode;

	  parent.insertBefore(container, element);
	  container.textContent = element.nodeValue;
	  parent.removeChild(element);
	  element = container;
	  text = getText(element);
	  hasTagStart = text.indexOf("<") !== -1;

	  if (vars.reduceWhiteSpace !== false) {
	    text = text.replace(_multipleSpacesExp, " ").replace(_stripExp, "");
	  }

	  if (hasTagStart) {
	    text = text.split("<").join("{{LT}}");
	  }

	  l = text.length;
	  splitText = (text.charAt(0) === " " ? space : "") + wordStart();

	  for (i = 0; i < l; i++) {
	    character = text.charAt(i);

	    if (specialChars && (testResult = specialChars(text.substr(i), vars.specialChars))) {
	      character = text.substr(i, testResult || 1);
	      splitText += chars && character !== " " ? charStart() + character + "</" + tag + ">" : character;
	      i += testResult - 1;
	    } else if (isWordDelimiter(character) && !isWordDelimiter(text.charAt(i - 1)) && i) {
	      splitText += wordIsOpen ? wordEnd : "";
	      wordIsOpen = 0;

	      while (isWordDelimiter(text.charAt(i + 1))) {
	        splitText += space;
	        i++;
	      }

	      if (i === l - 1) {
	        splitText += space;
	      } else if (text.charAt(i + 1) !== ")") {
	        splitText += space + wordStart();
	        wordIsOpen = 1;
	      }
	    } else if (character === "{" && text.substr(i, 6) === "{{LT}}") {
	      splitText += chars ? charStart() + "{{LT}}" + "</" + tag + ">" : "{{LT}}";
	      i += 5;
	    } else if (character.charCodeAt(0) >= 0xD800 && character.charCodeAt(0) <= 0xDBFF || text.charCodeAt(i + 1) >= 0xFE00 && text.charCodeAt(i + 1) <= 0xFE0F) {
	      j = ((text.substr(i, 12).split(emojiExp) || [])[1] || "").length || 2;
	      splitText += chars && character !== " " ? charStart() + text.substr(i, j) + "</" + tag + ">" : text.substr(i, j);
	      i += j - 1;
	    } else {
	      splitText += chars && character !== " " ? charStart() + character + "</" + tag + ">" : character;
	    }
	  }

	  element.outerHTML = splitText + (wordIsOpen ? wordEnd : "");
	  hasTagStart && _swapText(parent, "{{LT}}", "<");
	},
	    _split = function _split(element, vars, wordStart, charStart) {
	  var children = _toArray(element.childNodes),
	      l = children.length,
	      absolute = _isAbsolute(vars),
	      i,
	      child;

	  if (element.nodeType !== 3 || l > 1) {
	    vars.absolute = false;

	    for (i = 0; i < l; i++) {
	      child = children[i];
	      child._next = child._isFirst = child._parent = child._wordEnd = null;

	      if (child.nodeType !== 3 || /\S+/.test(child.nodeValue)) {
	        if (absolute && child.nodeType !== 3 && _getComputedStyle(child).display === "inline") {
	          child.style.display = "inline-block";
	          child.style.position = "relative";
	        }

	        child._isSplit = true;

	        _split(child, vars, wordStart, charStart);
	      }
	    }

	    vars.absolute = absolute;
	    element._isSplit = true;
	    return;
	  }

	  _splitRawText(element, vars, wordStart, charStart);
	};

	var SplitText = function () {
	  function SplitText(element, vars) {
	    _coreInitted || _initCore();
	    this.elements = _toArray(element);
	    this.chars = [];
	    this.words = [];
	    this.lines = [];
	    this._originals = [];
	    this.vars = vars || {};

	    _context(this);

	     this.split(vars);
	  }

	  var _proto = SplitText.prototype;

	  _proto.split = function split(vars) {
	    this.isSplit && this.revert();
	    this.vars = vars = vars || this.vars;
	    this._originals.length = this.chars.length = this.words.length = this.lines.length = 0;

	    var i = this.elements.length,
	        tag = vars.tag ? vars.tag : vars.span ? "span" : "div",
	        wordStart = _cssClassFunc(vars.wordsClass, tag),
	        charStart = _cssClassFunc(vars.charsClass, tag),
	        origHeight,
	        origWidth,
	        e;

	    while (--i > -1) {
	      e = this.elements[i];
	      this._originals[i] = {
	        html: e.innerHTML,
	        style: e.getAttribute("style")
	      };
	      origHeight = e.clientHeight;
	      origWidth = e.clientWidth;

	      _split(e, vars, wordStart, charStart);

	      _setPositionsAfterSplit(e, vars, this.chars, this.words, this.lines, origWidth, origHeight);
	    }

	    this.chars.reverse();
	    this.words.reverse();
	    this.lines.reverse();
	    this.isSplit = true;
	    return this;
	  };

	  _proto.revert = function revert() {
	    var originals = this._originals;

	    if (!originals) {
	      throw "revert() call wasn't scoped properly.";
	    }

	    this.elements.forEach(function (e, i) {
	      e.innerHTML = originals[i].html;
	      e.setAttribute("style", originals[i].style);
	    });
	    this.chars = [];
	    this.words = [];
	    this.lines = [];
	    this.isSplit = false;
	    return this;
	  };

	  SplitText.create = function create(element, vars) {
	    return new SplitText(element, vars);
	  };

	  return SplitText;
	}();
	SplitText.version = "3.12.5";
	SplitText.register = _initCore;

	exports.SplitText = SplitText;
	exports.default = SplitText;

	Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],5:[function(require,module,exports){
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = global || self, factory(global.window = global.window || {}));
}(this, (function (exports) { 'use strict';

  function _inheritsLoose(subClass, superClass) {
    subClass.prototype = Object.create(superClass.prototype);
    subClass.prototype.constructor = subClass;
    subClass.__proto__ = superClass;
  }

  function _assertThisInitialized(self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  }

  /*!
   * GSAP 3.12.5
   * https://gsap.com
   *
   * @license Copyright 2008-2024, GreenSock. All rights reserved.
   * Subject to the terms at https://gsap.com/standard-license or for
   * Club GSAP members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */
  var _config = {
    autoSleep: 120,
    force3D: "auto",
    nullTargetWarn: 1,
    units: {
      lineHeight: ""
    }
  },
      _defaults = {
    duration: .5,
    overwrite: false,
    delay: 0
  },
      _suppressOverwrites,
      _reverting,
      _context,
      _bigNum = 1e8,
      _tinyNum = 1 / _bigNum,
      _2PI = Math.PI * 2,
      _HALF_PI = _2PI / 4,
      _gsID = 0,
      _sqrt = Math.sqrt,
      _cos = Math.cos,
      _sin = Math.sin,
      _isString = function _isString(value) {
    return typeof value === "string";
  },
      _isFunction = function _isFunction(value) {
    return typeof value === "function";
  },
      _isNumber = function _isNumber(value) {
    return typeof value === "number";
  },
      _isUndefined = function _isUndefined(value) {
    return typeof value === "undefined";
  },
      _isObject = function _isObject(value) {
    return typeof value === "object";
  },
      _isNotFalse = function _isNotFalse(value) {
    return value !== false;
  },
      _windowExists = function _windowExists() {
    return typeof window !== "undefined";
  },
      _isFuncOrString = function _isFuncOrString(value) {
    return _isFunction(value) || _isString(value);
  },
      _isTypedArray = typeof ArrayBuffer === "function" && ArrayBuffer.isView || function () {},
      _isArray = Array.isArray,
      _strictNumExp = /(?:-?\.?\d|\.)+/gi,
      _numExp = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,
      _numWithUnitExp = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g,
      _complexStringNumExp = /[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,
      _relExp = /[+-]=-?[.\d]+/,
      _delimitedValueExp = /[^,'"\[\]\s]+/gi,
      _unitExp = /^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,
      _globalTimeline,
      _win,
      _coreInitted,
      _doc,
      _globals = {},
      _installScope = {},
      _coreReady,
      _install = function _install(scope) {
    return (_installScope = _merge(scope, _globals)) && gsap;
  },
      _missingPlugin = function _missingPlugin(property, value) {
    return console.warn("Invalid property", property, "set to", value, "Missing plugin? gsap.registerPlugin()");
  },
      _warn = function _warn(message, suppress) {
    return !suppress && console.warn(message);
  },
      _addGlobal = function _addGlobal(name, obj) {
    return name && (_globals[name] = obj) && _installScope && (_installScope[name] = obj) || _globals;
  },
      _emptyFunc = function _emptyFunc() {
    return 0;
  },
      _startAtRevertConfig = {
    suppressEvents: true,
    isStart: true,
    kill: false
  },
      _revertConfigNoKill = {
    suppressEvents: true,
    kill: false
  },
      _revertConfig = {
    suppressEvents: true
  },
      _reservedProps = {},
      _lazyTweens = [],
      _lazyLookup = {},
      _lastRenderedFrame,
      _plugins = {},
      _effects = {},
      _nextGCFrame = 30,
      _harnessPlugins = [],
      _callbackNames = "",
      _harness = function _harness(targets) {
    var target = targets[0],
        harnessPlugin,
        i;
    _isObject(target) || _isFunction(target) || (targets = [targets]);

    if (!(harnessPlugin = (target._gsap || {}).harness)) {
      i = _harnessPlugins.length;

      while (i-- && !_harnessPlugins[i].targetTest(target)) {}

      harnessPlugin = _harnessPlugins[i];
    }

    i = targets.length;

    while (i--) {
      targets[i] && (targets[i]._gsap || (targets[i]._gsap = new GSCache(targets[i], harnessPlugin))) || targets.splice(i, 1);
    }

    return targets;
  },
      _getCache = function _getCache(target) {
    return target._gsap || _harness(toArray(target))[0]._gsap;
  },
      _getProperty = function _getProperty(target, property, v) {
    return (v = target[property]) && _isFunction(v) ? target[property]() : _isUndefined(v) && target.getAttribute && target.getAttribute(property) || v;
  },
      _forEachName = function _forEachName(names, func) {
    return (names = names.split(",")).forEach(func) || names;
  },
      _round = function _round(value) {
    return Math.round(value * 100000) / 100000 || 0;
  },
      _roundPrecise = function _roundPrecise(value) {
    return Math.round(value * 10000000) / 10000000 || 0;
  },
      _parseRelative = function _parseRelative(start, value) {
    var operator = value.charAt(0),
        end = parseFloat(value.substr(2));
    start = parseFloat(start);
    return operator === "+" ? start + end : operator === "-" ? start - end : operator === "*" ? start * end : start / end;
  },
      _arrayContainsAny = function _arrayContainsAny(toSearch, toFind) {
    var l = toFind.length,
        i = 0;

    for (; toSearch.indexOf(toFind[i]) < 0 && ++i < l;) {}

    return i < l;
  },
      _lazyRender = function _lazyRender() {
    var l = _lazyTweens.length,
        a = _lazyTweens.slice(0),
        i,
        tween;

    _lazyLookup = {};
    _lazyTweens.length = 0;

    for (i = 0; i < l; i++) {
      tween = a[i];
      tween && tween._lazy && (tween.render(tween._lazy[0], tween._lazy[1], true)._lazy = 0);
    }
  },
      _lazySafeRender = function _lazySafeRender(animation, time, suppressEvents, force) {
    _lazyTweens.length && !_reverting && _lazyRender();
    animation.render(time, suppressEvents, force || _reverting && time < 0 && (animation._initted || animation._startAt));
    _lazyTweens.length && !_reverting && _lazyRender();
  },
      _numericIfPossible = function _numericIfPossible(value) {
    var n = parseFloat(value);
    return (n || n === 0) && (value + "").match(_delimitedValueExp).length < 2 ? n : _isString(value) ? value.trim() : value;
  },
      _passThrough = function _passThrough(p) {
    return p;
  },
      _setDefaults = function _setDefaults(obj, defaults) {
    for (var p in defaults) {
      p in obj || (obj[p] = defaults[p]);
    }

    return obj;
  },
      _setKeyframeDefaults = function _setKeyframeDefaults(excludeDuration) {
    return function (obj, defaults) {
      for (var p in defaults) {
        p in obj || p === "duration" && excludeDuration || p === "ease" || (obj[p] = defaults[p]);
      }
    };
  },
      _merge = function _merge(base, toMerge) {
    for (var p in toMerge) {
      base[p] = toMerge[p];
    }

    return base;
  },
      _mergeDeep = function _mergeDeep(base, toMerge) {
    for (var p in toMerge) {
      p !== "__proto__" && p !== "constructor" && p !== "prototype" && (base[p] = _isObject(toMerge[p]) ? _mergeDeep(base[p] || (base[p] = {}), toMerge[p]) : toMerge[p]);
    }

    return base;
  },
      _copyExcluding = function _copyExcluding(obj, excluding) {
    var copy = {},
        p;

    for (p in obj) {
      p in excluding || (copy[p] = obj[p]);
    }

    return copy;
  },
      _inheritDefaults = function _inheritDefaults(vars) {
    var parent = vars.parent || _globalTimeline,
        func = vars.keyframes ? _setKeyframeDefaults(_isArray(vars.keyframes)) : _setDefaults;

    if (_isNotFalse(vars.inherit)) {
      while (parent) {
        func(vars, parent.vars.defaults);
        parent = parent.parent || parent._dp;
      }
    }

    return vars;
  },
      _arraysMatch = function _arraysMatch(a1, a2) {
    var i = a1.length,
        match = i === a2.length;

    while (match && i-- && a1[i] === a2[i]) {}

    return i < 0;
  },
      _addLinkedListItem = function _addLinkedListItem(parent, child, firstProp, lastProp, sortBy) {
    if (firstProp === void 0) {
      firstProp = "_first";
    }

    if (lastProp === void 0) {
      lastProp = "_last";
    }

    var prev = parent[lastProp],
        t;

    if (sortBy) {
      t = child[sortBy];

      while (prev && prev[sortBy] > t) {
        prev = prev._prev;
      }
    }

    if (prev) {
      child._next = prev._next;
      prev._next = child;
    } else {
      child._next = parent[firstProp];
      parent[firstProp] = child;
    }

    if (child._next) {
      child._next._prev = child;
    } else {
      parent[lastProp] = child;
    }

    child._prev = prev;
    child.parent = child._dp = parent;
    return child;
  },
      _removeLinkedListItem = function _removeLinkedListItem(parent, child, firstProp, lastProp) {
    if (firstProp === void 0) {
      firstProp = "_first";
    }

    if (lastProp === void 0) {
      lastProp = "_last";
    }

    var prev = child._prev,
        next = child._next;

    if (prev) {
      prev._next = next;
    } else if (parent[firstProp] === child) {
      parent[firstProp] = next;
    }

    if (next) {
      next._prev = prev;
    } else if (parent[lastProp] === child) {
      parent[lastProp] = prev;
    }

    child._next = child._prev = child.parent = null;
  },
      _removeFromParent = function _removeFromParent(child, onlyIfParentHasAutoRemove) {
    child.parent && (!onlyIfParentHasAutoRemove || child.parent.autoRemoveChildren) && child.parent.remove && child.parent.remove(child);
    child._act = 0;
  },
      _uncache = function _uncache(animation, child) {
    if (animation && (!child || child._end > animation._dur || child._start < 0)) {
      var a = animation;

      while (a) {
        a._dirty = 1;
        a = a.parent;
      }
    }

    return animation;
  },
      _recacheAncestors = function _recacheAncestors(animation) {
    var parent = animation.parent;

    while (parent && parent.parent) {
      parent._dirty = 1;
      parent.totalDuration();
      parent = parent.parent;
    }

    return animation;
  },
      _rewindStartAt = function _rewindStartAt(tween, totalTime, suppressEvents, force) {
    return tween._startAt && (_reverting ? tween._startAt.revert(_revertConfigNoKill) : tween.vars.immediateRender && !tween.vars.autoRevert || tween._startAt.render(totalTime, true, force));
  },
      _hasNoPausedAncestors = function _hasNoPausedAncestors(animation) {
    return !animation || animation._ts && _hasNoPausedAncestors(animation.parent);
  },
      _elapsedCycleDuration = function _elapsedCycleDuration(animation) {
    return animation._repeat ? _animationCycle(animation._tTime, animation = animation.duration() + animation._rDelay) * animation : 0;
  },
      _animationCycle = function _animationCycle(tTime, cycleDuration) {
    var whole = Math.floor(tTime /= cycleDuration);
    return tTime && whole === tTime ? whole - 1 : whole;
  },
      _parentToChildTotalTime = function _parentToChildTotalTime(parentTime, child) {
    return (parentTime - child._start) * child._ts + (child._ts >= 0 ? 0 : child._dirty ? child.totalDuration() : child._tDur);
  },
      _setEnd = function _setEnd(animation) {
    return animation._end = _roundPrecise(animation._start + (animation._tDur / Math.abs(animation._ts || animation._rts || _tinyNum) || 0));
  },
      _alignPlayhead = function _alignPlayhead(animation, totalTime) {
    var parent = animation._dp;

    if (parent && parent.smoothChildTiming && animation._ts) {
      animation._start = _roundPrecise(parent._time - (animation._ts > 0 ? totalTime / animation._ts : ((animation._dirty ? animation.totalDuration() : animation._tDur) - totalTime) / -animation._ts));

      _setEnd(animation);

      parent._dirty || _uncache(parent, animation);
    }

    return animation;
  },
      _postAddChecks = function _postAddChecks(timeline, child) {
    var t;

    if (child._time || !child._dur && child._initted || child._start < timeline._time && (child._dur || !child.add)) {
      t = _parentToChildTotalTime(timeline.rawTime(), child);

      if (!child._dur || _clamp(0, child.totalDuration(), t) - child._tTime > _tinyNum) {
        child.render(t, true);
      }
    }

    if (_uncache(timeline, child)._dp && timeline._initted && timeline._time >= timeline._dur && timeline._ts) {
      if (timeline._dur < timeline.duration()) {
        t = timeline;

        while (t._dp) {
          t.rawTime() >= 0 && t.totalTime(t._tTime);
          t = t._dp;
        }
      }

      timeline._zTime = -_tinyNum;
    }
  },
      _addToTimeline = function _addToTimeline(timeline, child, position, skipChecks) {
    child.parent && _removeFromParent(child);
    child._start = _roundPrecise((_isNumber(position) ? position : position || timeline !== _globalTimeline ? _parsePosition(timeline, position, child) : timeline._time) + child._delay);
    child._end = _roundPrecise(child._start + (child.totalDuration() / Math.abs(child.timeScale()) || 0));

    _addLinkedListItem(timeline, child, "_first", "_last", timeline._sort ? "_start" : 0);

    _isFromOrFromStart(child) || (timeline._recent = child);
    skipChecks || _postAddChecks(timeline, child);
    timeline._ts < 0 && _alignPlayhead(timeline, timeline._tTime);
    return timeline;
  },
      _scrollTrigger = function _scrollTrigger(animation, trigger) {
    return (_globals.ScrollTrigger || _missingPlugin("scrollTrigger", trigger)) && _globals.ScrollTrigger.create(trigger, animation);
  },
      _attemptInitTween = function _attemptInitTween(tween, time, force, suppressEvents, tTime) {
    _initTween(tween, time, tTime);

    if (!tween._initted) {
      return 1;
    }

    if (!force && tween._pt && !_reverting && (tween._dur && tween.vars.lazy !== false || !tween._dur && tween.vars.lazy) && _lastRenderedFrame !== _ticker.frame) {
      _lazyTweens.push(tween);

      tween._lazy = [tTime, suppressEvents];
      return 1;
    }
  },
      _parentPlayheadIsBeforeStart = function _parentPlayheadIsBeforeStart(_ref) {
    var parent = _ref.parent;
    return parent && parent._ts && parent._initted && !parent._lock && (parent.rawTime() < 0 || _parentPlayheadIsBeforeStart(parent));
  },
      _isFromOrFromStart = function _isFromOrFromStart(_ref2) {
    var data = _ref2.data;
    return data === "isFromStart" || data === "isStart";
  },
      _renderZeroDurationTween = function _renderZeroDurationTween(tween, totalTime, suppressEvents, force) {
    var prevRatio = tween.ratio,
        ratio = totalTime < 0 || !totalTime && (!tween._start && _parentPlayheadIsBeforeStart(tween) && !(!tween._initted && _isFromOrFromStart(tween)) || (tween._ts < 0 || tween._dp._ts < 0) && !_isFromOrFromStart(tween)) ? 0 : 1,
        repeatDelay = tween._rDelay,
        tTime = 0,
        pt,
        iteration,
        prevIteration;

    if (repeatDelay && tween._repeat) {
      tTime = _clamp(0, tween._tDur, totalTime);
      iteration = _animationCycle(tTime, repeatDelay);
      tween._yoyo && iteration & 1 && (ratio = 1 - ratio);

      if (iteration !== _animationCycle(tween._tTime, repeatDelay)) {
        prevRatio = 1 - ratio;
        tween.vars.repeatRefresh && tween._initted && tween.invalidate();
      }
    }

    if (ratio !== prevRatio || _reverting || force || tween._zTime === _tinyNum || !totalTime && tween._zTime) {
      if (!tween._initted && _attemptInitTween(tween, totalTime, force, suppressEvents, tTime)) {
        return;
      }

      prevIteration = tween._zTime;
      tween._zTime = totalTime || (suppressEvents ? _tinyNum : 0);
      suppressEvents || (suppressEvents = totalTime && !prevIteration);
      tween.ratio = ratio;
      tween._from && (ratio = 1 - ratio);
      tween._time = 0;
      tween._tTime = tTime;
      pt = tween._pt;

      while (pt) {
        pt.r(ratio, pt.d);
        pt = pt._next;
      }

      totalTime < 0 && _rewindStartAt(tween, totalTime, suppressEvents, true);
      tween._onUpdate && !suppressEvents && _callback(tween, "onUpdate");
      tTime && tween._repeat && !suppressEvents && tween.parent && _callback(tween, "onRepeat");

      if ((totalTime >= tween._tDur || totalTime < 0) && tween.ratio === ratio) {
        ratio && _removeFromParent(tween, 1);

        if (!suppressEvents && !_reverting) {
          _callback(tween, ratio ? "onComplete" : "onReverseComplete", true);

          tween._prom && tween._prom();
        }
      }
    } else if (!tween._zTime) {
      tween._zTime = totalTime;
    }
  },
      _findNextPauseTween = function _findNextPauseTween(animation, prevTime, time) {
    var child;

    if (time > prevTime) {
      child = animation._first;

      while (child && child._start <= time) {
        if (child.data === "isPause" && child._start > prevTime) {
          return child;
        }

        child = child._next;
      }
    } else {
      child = animation._last;

      while (child && child._start >= time) {
        if (child.data === "isPause" && child._start < prevTime) {
          return child;
        }

        child = child._prev;
      }
    }
  },
      _setDuration = function _setDuration(animation, duration, skipUncache, leavePlayhead) {
    var repeat = animation._repeat,
        dur = _roundPrecise(duration) || 0,
        totalProgress = animation._tTime / animation._tDur;
    totalProgress && !leavePlayhead && (animation._time *= dur / animation._dur);
    animation._dur = dur;
    animation._tDur = !repeat ? dur : repeat < 0 ? 1e10 : _roundPrecise(dur * (repeat + 1) + animation._rDelay * repeat);
    totalProgress > 0 && !leavePlayhead && _alignPlayhead(animation, animation._tTime = animation._tDur * totalProgress);
    animation.parent && _setEnd(animation);
    skipUncache || _uncache(animation.parent, animation);
    return animation;
  },
      _onUpdateTotalDuration = function _onUpdateTotalDuration(animation) {
    return animation instanceof Timeline ? _uncache(animation) : _setDuration(animation, animation._dur);
  },
      _zeroPosition = {
    _start: 0,
    endTime: _emptyFunc,
    totalDuration: _emptyFunc
  },
      _parsePosition = function _parsePosition(animation, position, percentAnimation) {
    var labels = animation.labels,
        recent = animation._recent || _zeroPosition,
        clippedDuration = animation.duration() >= _bigNum ? recent.endTime(false) : animation._dur,
        i,
        offset,
        isPercent;

    if (_isString(position) && (isNaN(position) || position in labels)) {
      offset = position.charAt(0);
      isPercent = position.substr(-1) === "%";
      i = position.indexOf("=");

      if (offset === "<" || offset === ">") {
        i >= 0 && (position = position.replace(/=/, ""));
        return (offset === "<" ? recent._start : recent.endTime(recent._repeat >= 0)) + (parseFloat(position.substr(1)) || 0) * (isPercent ? (i < 0 ? recent : percentAnimation).totalDuration() / 100 : 1);
      }

      if (i < 0) {
        position in labels || (labels[position] = clippedDuration);
        return labels[position];
      }

      offset = parseFloat(position.charAt(i - 1) + position.substr(i + 1));

      if (isPercent && percentAnimation) {
        offset = offset / 100 * (_isArray(percentAnimation) ? percentAnimation[0] : percentAnimation).totalDuration();
      }

      return i > 1 ? _parsePosition(animation, position.substr(0, i - 1), percentAnimation) + offset : clippedDuration + offset;
    }

    return position == null ? clippedDuration : +position;
  },
      _createTweenType = function _createTweenType(type, params, timeline) {
    var isLegacy = _isNumber(params[1]),
        varsIndex = (isLegacy ? 2 : 1) + (type < 2 ? 0 : 1),
        vars = params[varsIndex],
        irVars,
        parent;

    isLegacy && (vars.duration = params[1]);
    vars.parent = timeline;

    if (type) {
      irVars = vars;
      parent = timeline;

      while (parent && !("immediateRender" in irVars)) {
        irVars = parent.vars.defaults || {};
        parent = _isNotFalse(parent.vars.inherit) && parent.parent;
      }

      vars.immediateRender = _isNotFalse(irVars.immediateRender);
      type < 2 ? vars.runBackwards = 1 : vars.startAt = params[varsIndex - 1];
    }

    return new Tween(params[0], vars, params[varsIndex + 1]);
  },
      _conditionalReturn = function _conditionalReturn(value, func) {
    return value || value === 0 ? func(value) : func;
  },
      _clamp = function _clamp(min, max, value) {
    return value < min ? min : value > max ? max : value;
  },
      getUnit = function getUnit(value, v) {
    return !_isString(value) || !(v = _unitExp.exec(value)) ? "" : v[1];
  },
      clamp = function clamp(min, max, value) {
    return _conditionalReturn(value, function (v) {
      return _clamp(min, max, v);
    });
  },
      _slice = [].slice,
      _isArrayLike = function _isArrayLike(value, nonEmpty) {
    return value && _isObject(value) && "length" in value && (!nonEmpty && !value.length || value.length - 1 in value && _isObject(value[0])) && !value.nodeType && value !== _win;
  },
      _flatten = function _flatten(ar, leaveStrings, accumulator) {
    if (accumulator === void 0) {
      accumulator = [];
    }

    return ar.forEach(function (value) {
      var _accumulator;

      return _isString(value) && !leaveStrings || _isArrayLike(value, 1) ? (_accumulator = accumulator).push.apply(_accumulator, toArray(value)) : accumulator.push(value);
    }) || accumulator;
  },
      toArray = function toArray(value, scope, leaveStrings) {
    return _context && !scope && _context.selector ? _context.selector(value) : _isString(value) && !leaveStrings && (_coreInitted || !_wake()) ? _slice.call((scope || _doc).querySelectorAll(value), 0) : _isArray(value) ? _flatten(value, leaveStrings) : _isArrayLike(value) ? _slice.call(value, 0) : value ? [value] : [];
  },
      selector = function selector(value) {
    value = toArray(value)[0] || _warn("Invalid scope") || {};
    return function (v) {
      var el = value.current || value.nativeElement || value;
      return toArray(v, el.querySelectorAll ? el : el === value ? _warn("Invalid scope") || _doc.createElement("div") : value);
    };
  },
      shuffle = function shuffle(a) {
    return a.sort(function () {
      return .5 - Math.random();
    });
  },
      distribute = function distribute(v) {
    if (_isFunction(v)) {
      return v;
    }

    var vars = _isObject(v) ? v : {
      each: v
    },
        ease = _parseEase(vars.ease),
        from = vars.from || 0,
        base = parseFloat(vars.base) || 0,
        cache = {},
        isDecimal = from > 0 && from < 1,
        ratios = isNaN(from) || isDecimal,
        axis = vars.axis,
        ratioX = from,
        ratioY = from;

    if (_isString(from)) {
      ratioX = ratioY = {
        center: .5,
        edges: .5,
        end: 1
      }[from] || 0;
    } else if (!isDecimal && ratios) {
      ratioX = from[0];
      ratioY = from[1];
    }

    return function (i, target, a) {
      var l = (a || vars).length,
          distances = cache[l],
          originX,
          originY,
          x,
          y,
          d,
          j,
          max,
          min,
          wrapAt;

      if (!distances) {
        wrapAt = vars.grid === "auto" ? 0 : (vars.grid || [1, _bigNum])[1];

        if (!wrapAt) {
          max = -_bigNum;

          while (max < (max = a[wrapAt++].getBoundingClientRect().left) && wrapAt < l) {}

          wrapAt < l && wrapAt--;
        }

        distances = cache[l] = [];
        originX = ratios ? Math.min(wrapAt, l) * ratioX - .5 : from % wrapAt;
        originY = wrapAt === _bigNum ? 0 : ratios ? l * ratioY / wrapAt - .5 : from / wrapAt | 0;
        max = 0;
        min = _bigNum;

        for (j = 0; j < l; j++) {
          x = j % wrapAt - originX;
          y = originY - (j / wrapAt | 0);
          distances[j] = d = !axis ? _sqrt(x * x + y * y) : Math.abs(axis === "y" ? y : x);
          d > max && (max = d);
          d < min && (min = d);
        }

        from === "random" && shuffle(distances);
        distances.max = max - min;
        distances.min = min;
        distances.v = l = (parseFloat(vars.amount) || parseFloat(vars.each) * (wrapAt > l ? l - 1 : !axis ? Math.max(wrapAt, l / wrapAt) : axis === "y" ? l / wrapAt : wrapAt) || 0) * (from === "edges" ? -1 : 1);
        distances.b = l < 0 ? base - l : base;
        distances.u = getUnit(vars.amount || vars.each) || 0;
        ease = ease && l < 0 ? _invertEase(ease) : ease;
      }

      l = (distances[i] - distances.min) / distances.max || 0;
      return _roundPrecise(distances.b + (ease ? ease(l) : l) * distances.v) + distances.u;
    };
  },
      _roundModifier = function _roundModifier(v) {
    var p = Math.pow(10, ((v + "").split(".")[1] || "").length);
    return function (raw) {
      var n = _roundPrecise(Math.round(parseFloat(raw) / v) * v * p);

      return (n - n % 1) / p + (_isNumber(raw) ? 0 : getUnit(raw));
    };
  },
      snap = function snap(snapTo, value) {
    var isArray = _isArray(snapTo),
        radius,
        is2D;

    if (!isArray && _isObject(snapTo)) {
      radius = isArray = snapTo.radius || _bigNum;

      if (snapTo.values) {
        snapTo = toArray(snapTo.values);

        if (is2D = !_isNumber(snapTo[0])) {
          radius *= radius;
        }
      } else {
        snapTo = _roundModifier(snapTo.increment);
      }
    }

    return _conditionalReturn(value, !isArray ? _roundModifier(snapTo) : _isFunction(snapTo) ? function (raw) {
      is2D = snapTo(raw);
      return Math.abs(is2D - raw) <= radius ? is2D : raw;
    } : function (raw) {
      var x = parseFloat(is2D ? raw.x : raw),
          y = parseFloat(is2D ? raw.y : 0),
          min = _bigNum,
          closest = 0,
          i = snapTo.length,
          dx,
          dy;

      while (i--) {
        if (is2D) {
          dx = snapTo[i].x - x;
          dy = snapTo[i].y - y;
          dx = dx * dx + dy * dy;
        } else {
          dx = Math.abs(snapTo[i] - x);
        }

        if (dx < min) {
          min = dx;
          closest = i;
        }
      }

      closest = !radius || min <= radius ? snapTo[closest] : raw;
      return is2D || closest === raw || _isNumber(raw) ? closest : closest + getUnit(raw);
    });
  },
      random = function random(min, max, roundingIncrement, returnFunction) {
    return _conditionalReturn(_isArray(min) ? !max : roundingIncrement === true ? !!(roundingIncrement = 0) : !returnFunction, function () {
      return _isArray(min) ? min[~~(Math.random() * min.length)] : (roundingIncrement = roundingIncrement || 1e-5) && (returnFunction = roundingIncrement < 1 ? Math.pow(10, (roundingIncrement + "").length - 2) : 1) && Math.floor(Math.round((min - roundingIncrement / 2 + Math.random() * (max - min + roundingIncrement * .99)) / roundingIncrement) * roundingIncrement * returnFunction) / returnFunction;
    });
  },
      pipe = function pipe() {
    for (var _len = arguments.length, functions = new Array(_len), _key = 0; _key < _len; _key++) {
      functions[_key] = arguments[_key];
    }

    return function (value) {
      return functions.reduce(function (v, f) {
        return f(v);
      }, value);
    };
  },
      unitize = function unitize(func, unit) {
    return function (value) {
      return func(parseFloat(value)) + (unit || getUnit(value));
    };
  },
      normalize = function normalize(min, max, value) {
    return mapRange(min, max, 0, 1, value);
  },
      _wrapArray = function _wrapArray(a, wrapper, value) {
    return _conditionalReturn(value, function (index) {
      return a[~~wrapper(index)];
    });
  },
      wrap = function wrap(min, max, value) {
    var range = max - min;
    return _isArray(min) ? _wrapArray(min, wrap(0, min.length), max) : _conditionalReturn(value, function (value) {
      return (range + (value - min) % range) % range + min;
    });
  },
      wrapYoyo = function wrapYoyo(min, max, value) {
    var range = max - min,
        total = range * 2;
    return _isArray(min) ? _wrapArray(min, wrapYoyo(0, min.length - 1), max) : _conditionalReturn(value, function (value) {
      value = (total + (value - min) % total) % total || 0;
      return min + (value > range ? total - value : value);
    });
  },
      _replaceRandom = function _replaceRandom(value) {
    var prev = 0,
        s = "",
        i,
        nums,
        end,
        isArray;

    while (~(i = value.indexOf("random(", prev))) {
      end = value.indexOf(")", i);
      isArray = value.charAt(i + 7) === "[";
      nums = value.substr(i + 7, end - i - 7).match(isArray ? _delimitedValueExp : _strictNumExp);
      s += value.substr(prev, i - prev) + random(isArray ? nums : +nums[0], isArray ? 0 : +nums[1], +nums[2] || 1e-5);
      prev = end + 1;
    }

    return s + value.substr(prev, value.length - prev);
  },
      mapRange = function mapRange(inMin, inMax, outMin, outMax, value) {
    var inRange = inMax - inMin,
        outRange = outMax - outMin;
    return _conditionalReturn(value, function (value) {
      return outMin + ((value - inMin) / inRange * outRange || 0);
    });
  },
      interpolate = function interpolate(start, end, progress, mutate) {
    var func = isNaN(start + end) ? 0 : function (p) {
      return (1 - p) * start + p * end;
    };

    if (!func) {
      var isString = _isString(start),
          master = {},
          p,
          i,
          interpolators,
          l,
          il;

      progress === true && (mutate = 1) && (progress = null);

      if (isString) {
        start = {
          p: start
        };
        end = {
          p: end
        };
      } else if (_isArray(start) && !_isArray(end)) {
        interpolators = [];
        l = start.length;
        il = l - 2;

        for (i = 1; i < l; i++) {
          interpolators.push(interpolate(start[i - 1], start[i]));
        }

        l--;

        func = function func(p) {
          p *= l;
          var i = Math.min(il, ~~p);
          return interpolators[i](p - i);
        };

        progress = end;
      } else if (!mutate) {
        start = _merge(_isArray(start) ? [] : {}, start);
      }

      if (!interpolators) {
        for (p in end) {
          _addPropTween.call(master, start, p, "get", end[p]);
        }

        func = function func(p) {
          return _renderPropTweens(p, master) || (isString ? start.p : start);
        };
      }
    }

    return _conditionalReturn(progress, func);
  },
      _getLabelInDirection = function _getLabelInDirection(timeline, fromTime, backward) {
    var labels = timeline.labels,
        min = _bigNum,
        p,
        distance,
        label;

    for (p in labels) {
      distance = labels[p] - fromTime;

      if (distance < 0 === !!backward && distance && min > (distance = Math.abs(distance))) {
        label = p;
        min = distance;
      }
    }

    return label;
  },
      _callback = function _callback(animation, type, executeLazyFirst) {
    var v = animation.vars,
        callback = v[type],
        prevContext = _context,
        context = animation._ctx,
        params,
        scope,
        result;

    if (!callback) {
      return;
    }

    params = v[type + "Params"];
    scope = v.callbackScope || animation;
    executeLazyFirst && _lazyTweens.length && _lazyRender();
    context && (_context = context);
    result = params ? callback.apply(scope, params) : callback.call(scope);
    _context = prevContext;
    return result;
  },
      _interrupt = function _interrupt(animation) {
    _removeFromParent(animation);

    animation.scrollTrigger && animation.scrollTrigger.kill(!!_reverting);
    animation.progress() < 1 && _callback(animation, "onInterrupt");
    return animation;
  },
      _quickTween,
      _registerPluginQueue = [],
      _createPlugin = function _createPlugin(config) {
    if (!config) return;
    config = !config.name && config["default"] || config;

    if (_windowExists() || config.headless) {
      var name = config.name,
          isFunc = _isFunction(config),
          Plugin = name && !isFunc && config.init ? function () {
        this._props = [];
      } : config,
          instanceDefaults = {
        init: _emptyFunc,
        render: _renderPropTweens,
        add: _addPropTween,
        kill: _killPropTweensOf,
        modifier: _addPluginModifier,
        rawVars: 0
      },
          statics = {
        targetTest: 0,
        get: 0,
        getSetter: _getSetter,
        aliases: {},
        register: 0
      };

      _wake();

      if (config !== Plugin) {
        if (_plugins[name]) {
          return;
        }

        _setDefaults(Plugin, _setDefaults(_copyExcluding(config, instanceDefaults), statics));

        _merge(Plugin.prototype, _merge(instanceDefaults, _copyExcluding(config, statics)));

        _plugins[Plugin.prop = name] = Plugin;

        if (config.targetTest) {
          _harnessPlugins.push(Plugin);

          _reservedProps[name] = 1;
        }

        name = (name === "css" ? "CSS" : name.charAt(0).toUpperCase() + name.substr(1)) + "Plugin";
      }

      _addGlobal(name, Plugin);

      config.register && config.register(gsap, Plugin, PropTween);
    } else {
      _registerPluginQueue.push(config);
    }
  },
      _255 = 255,
      _colorLookup = {
    aqua: [0, _255, _255],
    lime: [0, _255, 0],
    silver: [192, 192, 192],
    black: [0, 0, 0],
    maroon: [128, 0, 0],
    teal: [0, 128, 128],
    blue: [0, 0, _255],
    navy: [0, 0, 128],
    white: [_255, _255, _255],
    olive: [128, 128, 0],
    yellow: [_255, _255, 0],
    orange: [_255, 165, 0],
    gray: [128, 128, 128],
    purple: [128, 0, 128],
    green: [0, 128, 0],
    red: [_255, 0, 0],
    pink: [_255, 192, 203],
    cyan: [0, _255, _255],
    transparent: [_255, _255, _255, 0]
  },
      _hue = function _hue(h, m1, m2) {
    h += h < 0 ? 1 : h > 1 ? -1 : 0;
    return (h * 6 < 1 ? m1 + (m2 - m1) * h * 6 : h < .5 ? m2 : h * 3 < 2 ? m1 + (m2 - m1) * (2 / 3 - h) * 6 : m1) * _255 + .5 | 0;
  },
      splitColor = function splitColor(v, toHSL, forceAlpha) {
    var a = !v ? _colorLookup.black : _isNumber(v) ? [v >> 16, v >> 8 & _255, v & _255] : 0,
        r,
        g,
        b,
        h,
        s,
        l,
        max,
        min,
        d,
        wasHSL;

    if (!a) {
      if (v.substr(-1) === ",") {
        v = v.substr(0, v.length - 1);
      }

      if (_colorLookup[v]) {
        a = _colorLookup[v];
      } else if (v.charAt(0) === "#") {
        if (v.length < 6) {
          r = v.charAt(1);
          g = v.charAt(2);
          b = v.charAt(3);
          v = "#" + r + r + g + g + b + b + (v.length === 5 ? v.charAt(4) + v.charAt(4) : "");
        }

        if (v.length === 9) {
          a = parseInt(v.substr(1, 6), 16);
          return [a >> 16, a >> 8 & _255, a & _255, parseInt(v.substr(7), 16) / 255];
        }

        v = parseInt(v.substr(1), 16);
        a = [v >> 16, v >> 8 & _255, v & _255];
      } else if (v.substr(0, 3) === "hsl") {
        a = wasHSL = v.match(_strictNumExp);

        if (!toHSL) {
          h = +a[0] % 360 / 360;
          s = +a[1] / 100;
          l = +a[2] / 100;
          g = l <= .5 ? l * (s + 1) : l + s - l * s;
          r = l * 2 - g;
          a.length > 3 && (a[3] *= 1);
          a[0] = _hue(h + 1 / 3, r, g);
          a[1] = _hue(h, r, g);
          a[2] = _hue(h - 1 / 3, r, g);
        } else if (~v.indexOf("=")) {
          a = v.match(_numExp);
          forceAlpha && a.length < 4 && (a[3] = 1);
          return a;
        }
      } else {
        a = v.match(_strictNumExp) || _colorLookup.transparent;
      }

      a = a.map(Number);
    }

    if (toHSL && !wasHSL) {
      r = a[0] / _255;
      g = a[1] / _255;
      b = a[2] / _255;
      max = Math.max(r, g, b);
      min = Math.min(r, g, b);
      l = (max + min) / 2;

      if (max === min) {
        h = s = 0;
      } else {
        d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        h = max === r ? (g - b) / d + (g < b ? 6 : 0) : max === g ? (b - r) / d + 2 : (r - g) / d + 4;
        h *= 60;
      }

      a[0] = ~~(h + .5);
      a[1] = ~~(s * 100 + .5);
      a[2] = ~~(l * 100 + .5);
    }

    forceAlpha && a.length < 4 && (a[3] = 1);
    return a;
  },
      _colorOrderData = function _colorOrderData(v) {
    var values = [],
        c = [],
        i = -1;
    v.split(_colorExp).forEach(function (v) {
      var a = v.match(_numWithUnitExp) || [];
      values.push.apply(values, a);
      c.push(i += a.length + 1);
    });
    values.c = c;
    return values;
  },
      _formatColors = function _formatColors(s, toHSL, orderMatchData) {
    var result = "",
        colors = (s + result).match(_colorExp),
        type = toHSL ? "hsla(" : "rgba(",
        i = 0,
        c,
        shell,
        d,
        l;

    if (!colors) {
      return s;
    }

    colors = colors.map(function (color) {
      return (color = splitColor(color, toHSL, 1)) && type + (toHSL ? color[0] + "," + color[1] + "%," + color[2] + "%," + color[3] : color.join(",")) + ")";
    });

    if (orderMatchData) {
      d = _colorOrderData(s);
      c = orderMatchData.c;

      if (c.join(result) !== d.c.join(result)) {
        shell = s.replace(_colorExp, "1").split(_numWithUnitExp);
        l = shell.length - 1;

        for (; i < l; i++) {
          result += shell[i] + (~c.indexOf(i) ? colors.shift() || type + "0,0,0,0)" : (d.length ? d : colors.length ? colors : orderMatchData).shift());
        }
      }
    }

    if (!shell) {
      shell = s.split(_colorExp);
      l = shell.length - 1;

      for (; i < l; i++) {
        result += shell[i] + colors[i];
      }
    }

    return result + shell[l];
  },
      _colorExp = function () {
    var s = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",
        p;

    for (p in _colorLookup) {
      s += "|" + p + "\\b";
    }

    return new RegExp(s + ")", "gi");
  }(),
      _hslExp = /hsl[a]?\(/,
      _colorStringFilter = function _colorStringFilter(a) {
    var combined = a.join(" "),
        toHSL;
    _colorExp.lastIndex = 0;

    if (_colorExp.test(combined)) {
      toHSL = _hslExp.test(combined);
      a[1] = _formatColors(a[1], toHSL);
      a[0] = _formatColors(a[0], toHSL, _colorOrderData(a[1]));
      return true;
    }
  },
      _tickerActive,
      _ticker = function () {
    var _getTime = Date.now,
        _lagThreshold = 500,
        _adjustedLag = 33,
        _startTime = _getTime(),
        _lastUpdate = _startTime,
        _gap = 1000 / 240,
        _nextTime = _gap,
        _listeners = [],
        _id,
        _req,
        _raf,
        _self,
        _delta,
        _i,
        _tick = function _tick(v) {
      var elapsed = _getTime() - _lastUpdate,
          manual = v === true,
          overlap,
          dispatch,
          time,
          frame;

      (elapsed > _lagThreshold || elapsed < 0) && (_startTime += elapsed - _adjustedLag);
      _lastUpdate += elapsed;
      time = _lastUpdate - _startTime;
      overlap = time - _nextTime;

      if (overlap > 0 || manual) {
        frame = ++_self.frame;
        _delta = time - _self.time * 1000;
        _self.time = time = time / 1000;
        _nextTime += overlap + (overlap >= _gap ? 4 : _gap - overlap);
        dispatch = 1;
      }

      manual || (_id = _req(_tick));

      if (dispatch) {
        for (_i = 0; _i < _listeners.length; _i++) {
          _listeners[_i](time, _delta, frame, v);
        }
      }
    };

    _self = {
      time: 0,
      frame: 0,
      tick: function tick() {
        _tick(true);
      },
      deltaRatio: function deltaRatio(fps) {
        return _delta / (1000 / (fps || 60));
      },
      wake: function wake() {
        if (_coreReady) {
          if (!_coreInitted && _windowExists()) {
            _win = _coreInitted = window;
            _doc = _win.document || {};
            _globals.gsap = gsap;
            (_win.gsapVersions || (_win.gsapVersions = [])).push(gsap.version);

            _install(_installScope || _win.GreenSockGlobals || !_win.gsap && _win || {});

            _registerPluginQueue.forEach(_createPlugin);
          }

          _raf = typeof requestAnimationFrame !== "undefined" && requestAnimationFrame;
          _id && _self.sleep();

          _req = _raf || function (f) {
            return setTimeout(f, _nextTime - _self.time * 1000 + 1 | 0);
          };

          _tickerActive = 1;

          _tick(2);
        }
      },
      sleep: function sleep() {
        (_raf ? cancelAnimationFrame : clearTimeout)(_id);
        _tickerActive = 0;
        _req = _emptyFunc;
      },
      lagSmoothing: function lagSmoothing(threshold, adjustedLag) {
        _lagThreshold = threshold || Infinity;
        _adjustedLag = Math.min(adjustedLag || 33, _lagThreshold);
      },
      fps: function fps(_fps) {
        _gap = 1000 / (_fps || 240);
        _nextTime = _self.time * 1000 + _gap;
      },
      add: function add(callback, once, prioritize) {
        var func = once ? function (t, d, f, v) {
          callback(t, d, f, v);

          _self.remove(func);
        } : callback;

        _self.remove(callback);

        _listeners[prioritize ? "unshift" : "push"](func);

        _wake();

        return func;
      },
      remove: function remove(callback, i) {
        ~(i = _listeners.indexOf(callback)) && _listeners.splice(i, 1) && _i >= i && _i--;
      },
      _listeners: _listeners
    };
    return _self;
  }(),
      _wake = function _wake() {
    return !_tickerActive && _ticker.wake();
  },
      _easeMap = {},
      _customEaseExp = /^[\d.\-M][\d.\-,\s]/,
      _quotesExp = /["']/g,
      _parseObjectInString = function _parseObjectInString(value) {
    var obj = {},
        split = value.substr(1, value.length - 3).split(":"),
        key = split[0],
        i = 1,
        l = split.length,
        index,
        val,
        parsedVal;

    for (; i < l; i++) {
      val = split[i];
      index = i !== l - 1 ? val.lastIndexOf(",") : val.length;
      parsedVal = val.substr(0, index);
      obj[key] = isNaN(parsedVal) ? parsedVal.replace(_quotesExp, "").trim() : +parsedVal;
      key = val.substr(index + 1).trim();
    }

    return obj;
  },
      _valueInParentheses = function _valueInParentheses(value) {
    var open = value.indexOf("(") + 1,
        close = value.indexOf(")"),
        nested = value.indexOf("(", open);
    return value.substring(open, ~nested && nested < close ? value.indexOf(")", close + 1) : close);
  },
      _configEaseFromString = function _configEaseFromString(name) {
    var split = (name + "").split("("),
        ease = _easeMap[split[0]];
    return ease && split.length > 1 && ease.config ? ease.config.apply(null, ~name.indexOf("{") ? [_parseObjectInString(split[1])] : _valueInParentheses(name).split(",").map(_numericIfPossible)) : _easeMap._CE && _customEaseExp.test(name) ? _easeMap._CE("", name) : ease;
  },
      _invertEase = function _invertEase(ease) {
    return function (p) {
      return 1 - ease(1 - p);
    };
  },
      _propagateYoyoEase = function _propagateYoyoEase(timeline, isYoyo) {
    var child = timeline._first,
        ease;

    while (child) {
      if (child instanceof Timeline) {
        _propagateYoyoEase(child, isYoyo);
      } else if (child.vars.yoyoEase && (!child._yoyo || !child._repeat) && child._yoyo !== isYoyo) {
        if (child.timeline) {
          _propagateYoyoEase(child.timeline, isYoyo);
        } else {
          ease = child._ease;
          child._ease = child._yEase;
          child._yEase = ease;
          child._yoyo = isYoyo;
        }
      }

      child = child._next;
    }
  },
      _parseEase = function _parseEase(ease, defaultEase) {
    return !ease ? defaultEase : (_isFunction(ease) ? ease : _easeMap[ease] || _configEaseFromString(ease)) || defaultEase;
  },
      _insertEase = function _insertEase(names, easeIn, easeOut, easeInOut) {
    if (easeOut === void 0) {
      easeOut = function easeOut(p) {
        return 1 - easeIn(1 - p);
      };
    }

    if (easeInOut === void 0) {
      easeInOut = function easeInOut(p) {
        return p < .5 ? easeIn(p * 2) / 2 : 1 - easeIn((1 - p) * 2) / 2;
      };
    }

    var ease = {
      easeIn: easeIn,
      easeOut: easeOut,
      easeInOut: easeInOut
    },
        lowercaseName;

    _forEachName(names, function (name) {
      _easeMap[name] = _globals[name] = ease;
      _easeMap[lowercaseName = name.toLowerCase()] = easeOut;

      for (var p in ease) {
        _easeMap[lowercaseName + (p === "easeIn" ? ".in" : p === "easeOut" ? ".out" : ".inOut")] = _easeMap[name + "." + p] = ease[p];
      }
    });

    return ease;
  },
      _easeInOutFromOut = function _easeInOutFromOut(easeOut) {
    return function (p) {
      return p < .5 ? (1 - easeOut(1 - p * 2)) / 2 : .5 + easeOut((p - .5) * 2) / 2;
    };
  },
      _configElastic = function _configElastic(type, amplitude, period) {
    var p1 = amplitude >= 1 ? amplitude : 1,
        p2 = (period || (type ? .3 : .45)) / (amplitude < 1 ? amplitude : 1),
        p3 = p2 / _2PI * (Math.asin(1 / p1) || 0),
        easeOut = function easeOut(p) {
      return p === 1 ? 1 : p1 * Math.pow(2, -10 * p) * _sin((p - p3) * p2) + 1;
    },
        ease = type === "out" ? easeOut : type === "in" ? function (p) {
      return 1 - easeOut(1 - p);
    } : _easeInOutFromOut(easeOut);

    p2 = _2PI / p2;

    ease.config = function (amplitude, period) {
      return _configElastic(type, amplitude, period);
    };

    return ease;
  },
      _configBack = function _configBack(type, overshoot) {
    if (overshoot === void 0) {
      overshoot = 1.70158;
    }

    var easeOut = function easeOut(p) {
      return p ? --p * p * ((overshoot + 1) * p + overshoot) + 1 : 0;
    },
        ease = type === "out" ? easeOut : type === "in" ? function (p) {
      return 1 - easeOut(1 - p);
    } : _easeInOutFromOut(easeOut);

    ease.config = function (overshoot) {
      return _configBack(type, overshoot);
    };

    return ease;
  };

  _forEachName("Linear,Quad,Cubic,Quart,Quint,Strong", function (name, i) {
    var power = i < 5 ? i + 1 : i;

    _insertEase(name + ",Power" + (power - 1), i ? function (p) {
      return Math.pow(p, power);
    } : function (p) {
      return p;
    }, function (p) {
      return 1 - Math.pow(1 - p, power);
    }, function (p) {
      return p < .5 ? Math.pow(p * 2, power) / 2 : 1 - Math.pow((1 - p) * 2, power) / 2;
    });
  });

  _easeMap.Linear.easeNone = _easeMap.none = _easeMap.Linear.easeIn;

  _insertEase("Elastic", _configElastic("in"), _configElastic("out"), _configElastic());

  (function (n, c) {
    var n1 = 1 / c,
        n2 = 2 * n1,
        n3 = 2.5 * n1,
        easeOut = function easeOut(p) {
      return p < n1 ? n * p * p : p < n2 ? n * Math.pow(p - 1.5 / c, 2) + .75 : p < n3 ? n * (p -= 2.25 / c) * p + .9375 : n * Math.pow(p - 2.625 / c, 2) + .984375;
    };

    _insertEase("Bounce", function (p) {
      return 1 - easeOut(1 - p);
    }, easeOut);
  })(7.5625, 2.75);

  _insertEase("Expo", function (p) {
    return p ? Math.pow(2, 10 * (p - 1)) : 0;
  });

  _insertEase("Circ", function (p) {
    return -(_sqrt(1 - p * p) - 1);
  });

  _insertEase("Sine", function (p) {
    return p === 1 ? 1 : -_cos(p * _HALF_PI) + 1;
  });

  _insertEase("Back", _configBack("in"), _configBack("out"), _configBack());

  _easeMap.SteppedEase = _easeMap.steps = _globals.SteppedEase = {
    config: function config(steps, immediateStart) {
      if (steps === void 0) {
        steps = 1;
      }

      var p1 = 1 / steps,
          p2 = steps + (immediateStart ? 0 : 1),
          p3 = immediateStart ? 1 : 0,
          max = 1 - _tinyNum;
      return function (p) {
        return ((p2 * _clamp(0, max, p) | 0) + p3) * p1;
      };
    }
  };
  _defaults.ease = _easeMap["quad.out"];

  _forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt", function (name) {
    return _callbackNames += name + "," + name + "Params,";
  });

  var GSCache = function GSCache(target, harness) {
    this.id = _gsID++;
    target._gsap = this;
    this.target = target;
    this.harness = harness;
    this.get = harness ? harness.get : _getProperty;
    this.set = harness ? harness.getSetter : _getSetter;
  };
  var Animation = function () {
    function Animation(vars) {
      this.vars = vars;
      this._delay = +vars.delay || 0;

      if (this._repeat = vars.repeat === Infinity ? -2 : vars.repeat || 0) {
        this._rDelay = vars.repeatDelay || 0;
        this._yoyo = !!vars.yoyo || !!vars.yoyoEase;
      }

      this._ts = 1;

      _setDuration(this, +vars.duration, 1, 1);

      this.data = vars.data;

      if (_context) {
        this._ctx = _context;

        _context.data.push(this);
      }

      _tickerActive || _ticker.wake();
    }

    var _proto = Animation.prototype;

    _proto.delay = function delay(value) {
      if (value || value === 0) {
        this.parent && this.parent.smoothChildTiming && this.startTime(this._start + value - this._delay);
        this._delay = value;
        return this;
      }

      return this._delay;
    };

    _proto.duration = function duration(value) {
      return arguments.length ? this.totalDuration(this._repeat > 0 ? value + (value + this._rDelay) * this._repeat : value) : this.totalDuration() && this._dur;
    };

    _proto.totalDuration = function totalDuration(value) {
      if (!arguments.length) {
        return this._tDur;
      }

      this._dirty = 0;
      return _setDuration(this, this._repeat < 0 ? value : (value - this._repeat * this._rDelay) / (this._repeat + 1));
    };

    _proto.totalTime = function totalTime(_totalTime, suppressEvents) {
      _wake();

      if (!arguments.length) {
        return this._tTime;
      }

      var parent = this._dp;

      if (parent && parent.smoothChildTiming && this._ts) {
        _alignPlayhead(this, _totalTime);

        !parent._dp || parent.parent || _postAddChecks(parent, this);

        while (parent && parent.parent) {
          if (parent.parent._time !== parent._start + (parent._ts >= 0 ? parent._tTime / parent._ts : (parent.totalDuration() - parent._tTime) / -parent._ts)) {
            parent.totalTime(parent._tTime, true);
          }

          parent = parent.parent;
        }

        if (!this.parent && this._dp.autoRemoveChildren && (this._ts > 0 && _totalTime < this._tDur || this._ts < 0 && _totalTime > 0 || !this._tDur && !_totalTime)) {
          _addToTimeline(this._dp, this, this._start - this._delay);
        }
      }

      if (this._tTime !== _totalTime || !this._dur && !suppressEvents || this._initted && Math.abs(this._zTime) === _tinyNum || !_totalTime && !this._initted && (this.add || this._ptLookup)) {
        this._ts || (this._pTime = _totalTime);

        _lazySafeRender(this, _totalTime, suppressEvents);
      }

      return this;
    };

    _proto.time = function time(value, suppressEvents) {
      return arguments.length ? this.totalTime(Math.min(this.totalDuration(), value + _elapsedCycleDuration(this)) % (this._dur + this._rDelay) || (value ? this._dur : 0), suppressEvents) : this._time;
    };

    _proto.totalProgress = function totalProgress(value, suppressEvents) {
      return arguments.length ? this.totalTime(this.totalDuration() * value, suppressEvents) : this.totalDuration() ? Math.min(1, this._tTime / this._tDur) : this.rawTime() > 0 ? 1 : 0;
    };

    _proto.progress = function progress(value, suppressEvents) {
      return arguments.length ? this.totalTime(this.duration() * (this._yoyo && !(this.iteration() & 1) ? 1 - value : value) + _elapsedCycleDuration(this), suppressEvents) : this.duration() ? Math.min(1, this._time / this._dur) : this.rawTime() > 0 ? 1 : 0;
    };

    _proto.iteration = function iteration(value, suppressEvents) {
      var cycleDuration = this.duration() + this._rDelay;

      return arguments.length ? this.totalTime(this._time + (value - 1) * cycleDuration, suppressEvents) : this._repeat ? _animationCycle(this._tTime, cycleDuration) + 1 : 1;
    };

    _proto.timeScale = function timeScale(value, suppressEvents) {
      if (!arguments.length) {
        return this._rts === -_tinyNum ? 0 : this._rts;
      }

      if (this._rts === value) {
        return this;
      }

      var tTime = this.parent && this._ts ? _parentToChildTotalTime(this.parent._time, this) : this._tTime;
      this._rts = +value || 0;
      this._ts = this._ps || value === -_tinyNum ? 0 : this._rts;
      this.totalTime(_clamp(-Math.abs(this._delay), this._tDur, tTime), suppressEvents !== false);

      _setEnd(this);

      return _recacheAncestors(this);
    };

    _proto.paused = function paused(value) {
      if (!arguments.length) {
        return this._ps;
      }

      if (this._ps !== value) {
        this._ps = value;

        if (value) {
          this._pTime = this._tTime || Math.max(-this._delay, this.rawTime());
          this._ts = this._act = 0;
        } else {
          _wake();

          this._ts = this._rts;
          this.totalTime(this.parent && !this.parent.smoothChildTiming ? this.rawTime() : this._tTime || this._pTime, this.progress() === 1 && Math.abs(this._zTime) !== _tinyNum && (this._tTime -= _tinyNum));
        }
      }

      return this;
    };

    _proto.startTime = function startTime(value) {
      if (arguments.length) {
        this._start = value;
        var parent = this.parent || this._dp;
        parent && (parent._sort || !this.parent) && _addToTimeline(parent, this, value - this._delay);
        return this;
      }

      return this._start;
    };

    _proto.endTime = function endTime(includeRepeats) {
      return this._start + (_isNotFalse(includeRepeats) ? this.totalDuration() : this.duration()) / Math.abs(this._ts || 1);
    };

    _proto.rawTime = function rawTime(wrapRepeats) {
      var parent = this.parent || this._dp;
      return !parent ? this._tTime : wrapRepeats && (!this._ts || this._repeat && this._time && this.totalProgress() < 1) ? this._tTime % (this._dur + this._rDelay) : !this._ts ? this._tTime : _parentToChildTotalTime(parent.rawTime(wrapRepeats), this);
    };

    _proto.revert = function revert(config) {
      if (config === void 0) {
        config = _revertConfig;
      }

      var prevIsReverting = _reverting;
      _reverting = config;

      if (this._initted || this._startAt) {
        this.timeline && this.timeline.revert(config);
        this.totalTime(-0.01, config.suppressEvents);
      }

      this.data !== "nested" && config.kill !== false && this.kill();
      _reverting = prevIsReverting;
      return this;
    };

    _proto.globalTime = function globalTime(rawTime) {
      var animation = this,
          time = arguments.length ? rawTime : animation.rawTime();

      while (animation) {
        time = animation._start + time / (Math.abs(animation._ts) || 1);
        animation = animation._dp;
      }

      return !this.parent && this._sat ? this._sat.globalTime(rawTime) : time;
    };

    _proto.repeat = function repeat(value) {
      if (arguments.length) {
        this._repeat = value === Infinity ? -2 : value;
        return _onUpdateTotalDuration(this);
      }

      return this._repeat === -2 ? Infinity : this._repeat;
    };

    _proto.repeatDelay = function repeatDelay(value) {
      if (arguments.length) {
        var time = this._time;
        this._rDelay = value;

        _onUpdateTotalDuration(this);

        return time ? this.time(time) : this;
      }

      return this._rDelay;
    };

    _proto.yoyo = function yoyo(value) {
      if (arguments.length) {
        this._yoyo = value;
        return this;
      }

      return this._yoyo;
    };

    _proto.seek = function seek(position, suppressEvents) {
      return this.totalTime(_parsePosition(this, position), _isNotFalse(suppressEvents));
    };

    _proto.restart = function restart(includeDelay, suppressEvents) {
      return this.play().totalTime(includeDelay ? -this._delay : 0, _isNotFalse(suppressEvents));
    };

    _proto.play = function play(from, suppressEvents) {
      from != null && this.seek(from, suppressEvents);
      return this.reversed(false).paused(false);
    };

    _proto.reverse = function reverse(from, suppressEvents) {
      from != null && this.seek(from || this.totalDuration(), suppressEvents);
      return this.reversed(true).paused(false);
    };

    _proto.pause = function pause(atTime, suppressEvents) {
      atTime != null && this.seek(atTime, suppressEvents);
      return this.paused(true);
    };

    _proto.resume = function resume() {
      return this.paused(false);
    };

    _proto.reversed = function reversed(value) {
      if (arguments.length) {
        !!value !== this.reversed() && this.timeScale(-this._rts || (value ? -_tinyNum : 0));
        return this;
      }

      return this._rts < 0;
    };

    _proto.invalidate = function invalidate() {
      this._initted = this._act = 0;
      this._zTime = -_tinyNum;
      return this;
    };

    _proto.isActive = function isActive() {
      var parent = this.parent || this._dp,
          start = this._start,
          rawTime;
      return !!(!parent || this._ts && this._initted && parent.isActive() && (rawTime = parent.rawTime(true)) >= start && rawTime < this.endTime(true) - _tinyNum);
    };

    _proto.eventCallback = function eventCallback(type, callback, params) {
      var vars = this.vars;

      if (arguments.length > 1) {
        if (!callback) {
          delete vars[type];
        } else {
          vars[type] = callback;
          params && (vars[type + "Params"] = params);
          type === "onUpdate" && (this._onUpdate = callback);
        }

        return this;
      }

      return vars[type];
    };

    _proto.then = function then(onFulfilled) {
      var self = this;
      return new Promise(function (resolve) {
        var f = _isFunction(onFulfilled) ? onFulfilled : _passThrough,
            _resolve = function _resolve() {
          var _then = self.then;
          self.then = null;
          _isFunction(f) && (f = f(self)) && (f.then || f === self) && (self.then = _then);
          resolve(f);
          self.then = _then;
        };

        if (self._initted && self.totalProgress() === 1 && self._ts >= 0 || !self._tTime && self._ts < 0) {
          _resolve();
        } else {
          self._prom = _resolve;
        }
      });
    };

    _proto.kill = function kill() {
      _interrupt(this);
    };

    return Animation;
  }();

  _setDefaults(Animation.prototype, {
    _time: 0,
    _start: 0,
    _end: 0,
    _tTime: 0,
    _tDur: 0,
    _dirty: 0,
    _repeat: 0,
    _yoyo: false,
    parent: null,
    _initted: false,
    _rDelay: 0,
    _ts: 1,
    _dp: 0,
    ratio: 0,
    _zTime: -_tinyNum,
    _prom: 0,
    _ps: false,
    _rts: 1
  });

  var Timeline = function (_Animation) {
    _inheritsLoose(Timeline, _Animation);

    function Timeline(vars, position) {
      var _this;

      if (vars === void 0) {
        vars = {};
      }

      _this = _Animation.call(this, vars) || this;
      _this.labels = {};
      _this.smoothChildTiming = !!vars.smoothChildTiming;
      _this.autoRemoveChildren = !!vars.autoRemoveChildren;
      _this._sort = _isNotFalse(vars.sortChildren);
      _globalTimeline && _addToTimeline(vars.parent || _globalTimeline, _assertThisInitialized(_this), position);
      vars.reversed && _this.reverse();
      vars.paused && _this.paused(true);
      vars.scrollTrigger && _scrollTrigger(_assertThisInitialized(_this), vars.scrollTrigger);
      return _this;
    }

    var _proto2 = Timeline.prototype;

    _proto2.to = function to(targets, vars, position) {
      _createTweenType(0, arguments, this);

      return this;
    };

    _proto2.from = function from(targets, vars, position) {
      _createTweenType(1, arguments, this);

      return this;
    };

    _proto2.fromTo = function fromTo(targets, fromVars, toVars, position) {
      _createTweenType(2, arguments, this);

      return this;
    };

    _proto2.set = function set(targets, vars, position) {
      vars.duration = 0;
      vars.parent = this;
      _inheritDefaults(vars).repeatDelay || (vars.repeat = 0);
      vars.immediateRender = !!vars.immediateRender;
      new Tween(targets, vars, _parsePosition(this, position), 1);
      return this;
    };

    _proto2.call = function call(callback, params, position) {
      return _addToTimeline(this, Tween.delayedCall(0, callback, params), position);
    };

    _proto2.staggerTo = function staggerTo(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams) {
      vars.duration = duration;
      vars.stagger = vars.stagger || stagger;
      vars.onComplete = onCompleteAll;
      vars.onCompleteParams = onCompleteAllParams;
      vars.parent = this;
      new Tween(targets, vars, _parsePosition(this, position));
      return this;
    };

    _proto2.staggerFrom = function staggerFrom(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams) {
      vars.runBackwards = 1;
      _inheritDefaults(vars).immediateRender = _isNotFalse(vars.immediateRender);
      return this.staggerTo(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams);
    };

    _proto2.staggerFromTo = function staggerFromTo(targets, duration, fromVars, toVars, stagger, position, onCompleteAll, onCompleteAllParams) {
      toVars.startAt = fromVars;
      _inheritDefaults(toVars).immediateRender = _isNotFalse(toVars.immediateRender);
      return this.staggerTo(targets, duration, toVars, stagger, position, onCompleteAll, onCompleteAllParams);
    };

    _proto2.render = function render(totalTime, suppressEvents, force) {
      var prevTime = this._time,
          tDur = this._dirty ? this.totalDuration() : this._tDur,
          dur = this._dur,
          tTime = totalTime <= 0 ? 0 : _roundPrecise(totalTime),
          crossingStart = this._zTime < 0 !== totalTime < 0 && (this._initted || !dur),
          time,
          child,
          next,
          iteration,
          cycleDuration,
          prevPaused,
          pauseTween,
          timeScale,
          prevStart,
          prevIteration,
          yoyo,
          isYoyo;
      this !== _globalTimeline && tTime > tDur && totalTime >= 0 && (tTime = tDur);

      if (tTime !== this._tTime || force || crossingStart) {
        if (prevTime !== this._time && dur) {
          tTime += this._time - prevTime;
          totalTime += this._time - prevTime;
        }

        time = tTime;
        prevStart = this._start;
        timeScale = this._ts;
        prevPaused = !timeScale;

        if (crossingStart) {
          dur || (prevTime = this._zTime);
          (totalTime || !suppressEvents) && (this._zTime = totalTime);
        }

        if (this._repeat) {
          yoyo = this._yoyo;
          cycleDuration = dur + this._rDelay;

          if (this._repeat < -1 && totalTime < 0) {
            return this.totalTime(cycleDuration * 100 + totalTime, suppressEvents, force);
          }

          time = _roundPrecise(tTime % cycleDuration);

          if (tTime === tDur) {
            iteration = this._repeat;
            time = dur;
          } else {
            iteration = ~~(tTime / cycleDuration);

            if (iteration && iteration === tTime / cycleDuration) {
              time = dur;
              iteration--;
            }

            time > dur && (time = dur);
          }

          prevIteration = _animationCycle(this._tTime, cycleDuration);
          !prevTime && this._tTime && prevIteration !== iteration && this._tTime - prevIteration * cycleDuration - this._dur <= 0 && (prevIteration = iteration);

          if (yoyo && iteration & 1) {
            time = dur - time;
            isYoyo = 1;
          }

          if (iteration !== prevIteration && !this._lock) {
            var rewinding = yoyo && prevIteration & 1,
                doesWrap = rewinding === (yoyo && iteration & 1);
            iteration < prevIteration && (rewinding = !rewinding);
            prevTime = rewinding ? 0 : tTime % dur ? dur : tTime;
            this._lock = 1;
            this.render(prevTime || (isYoyo ? 0 : _roundPrecise(iteration * cycleDuration)), suppressEvents, !dur)._lock = 0;
            this._tTime = tTime;
            !suppressEvents && this.parent && _callback(this, "onRepeat");
            this.vars.repeatRefresh && !isYoyo && (this.invalidate()._lock = 1);

            if (prevTime && prevTime !== this._time || prevPaused !== !this._ts || this.vars.onRepeat && !this.parent && !this._act) {
              return this;
            }

            dur = this._dur;
            tDur = this._tDur;

            if (doesWrap) {
              this._lock = 2;
              prevTime = rewinding ? dur : -0.0001;
              this.render(prevTime, true);
              this.vars.repeatRefresh && !isYoyo && this.invalidate();
            }

            this._lock = 0;

            if (!this._ts && !prevPaused) {
              return this;
            }

            _propagateYoyoEase(this, isYoyo);
          }
        }

        if (this._hasPause && !this._forcing && this._lock < 2) {
          pauseTween = _findNextPauseTween(this, _roundPrecise(prevTime), _roundPrecise(time));

          if (pauseTween) {
            tTime -= time - (time = pauseTween._start);
          }
        }

        this._tTime = tTime;
        this._time = time;
        this._act = !timeScale;

        if (!this._initted) {
          this._onUpdate = this.vars.onUpdate;
          this._initted = 1;
          this._zTime = totalTime;
          prevTime = 0;
        }

        if (!prevTime && time && !suppressEvents && !iteration) {
          _callback(this, "onStart");

          if (this._tTime !== tTime) {
            return this;
          }
        }

        if (time >= prevTime && totalTime >= 0) {
          child = this._first;

          while (child) {
            next = child._next;

            if ((child._act || time >= child._start) && child._ts && pauseTween !== child) {
              if (child.parent !== this) {
                return this.render(totalTime, suppressEvents, force);
              }

              child.render(child._ts > 0 ? (time - child._start) * child._ts : (child._dirty ? child.totalDuration() : child._tDur) + (time - child._start) * child._ts, suppressEvents, force);

              if (time !== this._time || !this._ts && !prevPaused) {
                pauseTween = 0;
                next && (tTime += this._zTime = -_tinyNum);
                break;
              }
            }

            child = next;
          }
        } else {
          child = this._last;
          var adjustedTime = totalTime < 0 ? totalTime : time;

          while (child) {
            next = child._prev;

            if ((child._act || adjustedTime <= child._end) && child._ts && pauseTween !== child) {
              if (child.parent !== this) {
                return this.render(totalTime, suppressEvents, force);
              }

              child.render(child._ts > 0 ? (adjustedTime - child._start) * child._ts : (child._dirty ? child.totalDuration() : child._tDur) + (adjustedTime - child._start) * child._ts, suppressEvents, force || _reverting && (child._initted || child._startAt));

              if (time !== this._time || !this._ts && !prevPaused) {
                pauseTween = 0;
                next && (tTime += this._zTime = adjustedTime ? -_tinyNum : _tinyNum);
                break;
              }
            }

            child = next;
          }
        }

        if (pauseTween && !suppressEvents) {
          this.pause();
          pauseTween.render(time >= prevTime ? 0 : -_tinyNum)._zTime = time >= prevTime ? 1 : -1;

          if (this._ts) {
            this._start = prevStart;

            _setEnd(this);

            return this.render(totalTime, suppressEvents, force);
          }
        }

        this._onUpdate && !suppressEvents && _callback(this, "onUpdate", true);
        if (tTime === tDur && this._tTime >= this.totalDuration() || !tTime && prevTime) if (prevStart === this._start || Math.abs(timeScale) !== Math.abs(this._ts)) if (!this._lock) {
          (totalTime || !dur) && (tTime === tDur && this._ts > 0 || !tTime && this._ts < 0) && _removeFromParent(this, 1);

          if (!suppressEvents && !(totalTime < 0 && !prevTime) && (tTime || prevTime || !tDur)) {
            _callback(this, tTime === tDur && totalTime >= 0 ? "onComplete" : "onReverseComplete", true);

            this._prom && !(tTime < tDur && this.timeScale() > 0) && this._prom();
          }
        }
      }

      return this;
    };

    _proto2.add = function add(child, position) {
      var _this2 = this;

      _isNumber(position) || (position = _parsePosition(this, position, child));

      if (!(child instanceof Animation)) {
        if (_isArray(child)) {
          child.forEach(function (obj) {
            return _this2.add(obj, position);
          });
          return this;
        }

        if (_isString(child)) {
          return this.addLabel(child, position);
        }

        if (_isFunction(child)) {
          child = Tween.delayedCall(0, child);
        } else {
          return this;
        }
      }

      return this !== child ? _addToTimeline(this, child, position) : this;
    };

    _proto2.getChildren = function getChildren(nested, tweens, timelines, ignoreBeforeTime) {
      if (nested === void 0) {
        nested = true;
      }

      if (tweens === void 0) {
        tweens = true;
      }

      if (timelines === void 0) {
        timelines = true;
      }

      if (ignoreBeforeTime === void 0) {
        ignoreBeforeTime = -_bigNum;
      }

      var a = [],
          child = this._first;

      while (child) {
        if (child._start >= ignoreBeforeTime) {
          if (child instanceof Tween) {
            tweens && a.push(child);
          } else {
            timelines && a.push(child);
            nested && a.push.apply(a, child.getChildren(true, tweens, timelines));
          }
        }

        child = child._next;
      }

      return a;
    };

    _proto2.getById = function getById(id) {
      var animations = this.getChildren(1, 1, 1),
          i = animations.length;

      while (i--) {
        if (animations[i].vars.id === id) {
          return animations[i];
        }
      }
    };

    _proto2.remove = function remove(child) {
      if (_isString(child)) {
        return this.removeLabel(child);
      }

      if (_isFunction(child)) {
        return this.killTweensOf(child);
      }

      _removeLinkedListItem(this, child);

      if (child === this._recent) {
        this._recent = this._last;
      }

      return _uncache(this);
    };

    _proto2.totalTime = function totalTime(_totalTime2, suppressEvents) {
      if (!arguments.length) {
        return this._tTime;
      }

      this._forcing = 1;

      if (!this._dp && this._ts) {
        this._start = _roundPrecise(_ticker.time - (this._ts > 0 ? _totalTime2 / this._ts : (this.totalDuration() - _totalTime2) / -this._ts));
      }

      _Animation.prototype.totalTime.call(this, _totalTime2, suppressEvents);

      this._forcing = 0;
      return this;
    };

    _proto2.addLabel = function addLabel(label, position) {
      this.labels[label] = _parsePosition(this, position);
      return this;
    };

    _proto2.removeLabel = function removeLabel(label) {
      delete this.labels[label];
      return this;
    };

    _proto2.addPause = function addPause(position, callback, params) {
      var t = Tween.delayedCall(0, callback || _emptyFunc, params);
      t.data = "isPause";
      this._hasPause = 1;
      return _addToTimeline(this, t, _parsePosition(this, position));
    };

    _proto2.removePause = function removePause(position) {
      var child = this._first;
      position = _parsePosition(this, position);

      while (child) {
        if (child._start === position && child.data === "isPause") {
          _removeFromParent(child);
        }

        child = child._next;
      }
    };

    _proto2.killTweensOf = function killTweensOf(targets, props, onlyActive) {
      var tweens = this.getTweensOf(targets, onlyActive),
          i = tweens.length;

      while (i--) {
        _overwritingTween !== tweens[i] && tweens[i].kill(targets, props);
      }

      return this;
    };

    _proto2.getTweensOf = function getTweensOf(targets, onlyActive) {
      var a = [],
          parsedTargets = toArray(targets),
          child = this._first,
          isGlobalTime = _isNumber(onlyActive),
          children;

      while (child) {
        if (child instanceof Tween) {
          if (_arrayContainsAny(child._targets, parsedTargets) && (isGlobalTime ? (!_overwritingTween || child._initted && child._ts) && child.globalTime(0) <= onlyActive && child.globalTime(child.totalDuration()) > onlyActive : !onlyActive || child.isActive())) {
            a.push(child);
          }
        } else if ((children = child.getTweensOf(parsedTargets, onlyActive)).length) {
          a.push.apply(a, children);
        }

        child = child._next;
      }

      return a;
    };

    _proto2.tweenTo = function tweenTo(position, vars) {
      vars = vars || {};

      var tl = this,
          endTime = _parsePosition(tl, position),
          _vars = vars,
          startAt = _vars.startAt,
          _onStart = _vars.onStart,
          onStartParams = _vars.onStartParams,
          immediateRender = _vars.immediateRender,
          initted,
          tween = Tween.to(tl, _setDefaults({
        ease: vars.ease || "none",
        lazy: false,
        immediateRender: false,
        time: endTime,
        overwrite: "auto",
        duration: vars.duration || Math.abs((endTime - (startAt && "time" in startAt ? startAt.time : tl._time)) / tl.timeScale()) || _tinyNum,
        onStart: function onStart() {
          tl.pause();

          if (!initted) {
            var duration = vars.duration || Math.abs((endTime - (startAt && "time" in startAt ? startAt.time : tl._time)) / tl.timeScale());
            tween._dur !== duration && _setDuration(tween, duration, 0, 1).render(tween._time, true, true);
            initted = 1;
          }

          _onStart && _onStart.apply(tween, onStartParams || []);
        }
      }, vars));

      return immediateRender ? tween.render(0) : tween;
    };

    _proto2.tweenFromTo = function tweenFromTo(fromPosition, toPosition, vars) {
      return this.tweenTo(toPosition, _setDefaults({
        startAt: {
          time: _parsePosition(this, fromPosition)
        }
      }, vars));
    };

    _proto2.recent = function recent() {
      return this._recent;
    };

    _proto2.nextLabel = function nextLabel(afterTime) {
      if (afterTime === void 0) {
        afterTime = this._time;
      }

      return _getLabelInDirection(this, _parsePosition(this, afterTime));
    };

    _proto2.previousLabel = function previousLabel(beforeTime) {
      if (beforeTime === void 0) {
        beforeTime = this._time;
      }

      return _getLabelInDirection(this, _parsePosition(this, beforeTime), 1);
    };

    _proto2.currentLabel = function currentLabel(value) {
      return arguments.length ? this.seek(value, true) : this.previousLabel(this._time + _tinyNum);
    };

    _proto2.shiftChildren = function shiftChildren(amount, adjustLabels, ignoreBeforeTime) {
      if (ignoreBeforeTime === void 0) {
        ignoreBeforeTime = 0;
      }

      var child = this._first,
          labels = this.labels,
          p;

      while (child) {
        if (child._start >= ignoreBeforeTime) {
          child._start += amount;
          child._end += amount;
        }

        child = child._next;
      }

      if (adjustLabels) {
        for (p in labels) {
          if (labels[p] >= ignoreBeforeTime) {
            labels[p] += amount;
          }
        }
      }

      return _uncache(this);
    };

    _proto2.invalidate = function invalidate(soft) {
      var child = this._first;
      this._lock = 0;

      while (child) {
        child.invalidate(soft);
        child = child._next;
      }

      return _Animation.prototype.invalidate.call(this, soft);
    };

    _proto2.clear = function clear(includeLabels) {
      if (includeLabels === void 0) {
        includeLabels = true;
      }

      var child = this._first,
          next;

      while (child) {
        next = child._next;
        this.remove(child);
        child = next;
      }

      this._dp && (this._time = this._tTime = this._pTime = 0);
      includeLabels && (this.labels = {});
      return _uncache(this);
    };

    _proto2.totalDuration = function totalDuration(value) {
      var max = 0,
          self = this,
          child = self._last,
          prevStart = _bigNum,
          prev,
          start,
          parent;

      if (arguments.length) {
        return self.timeScale((self._repeat < 0 ? self.duration() : self.totalDuration()) / (self.reversed() ? -value : value));
      }

      if (self._dirty) {
        parent = self.parent;

        while (child) {
          prev = child._prev;
          child._dirty && child.totalDuration();
          start = child._start;

          if (start > prevStart && self._sort && child._ts && !self._lock) {
            self._lock = 1;
            _addToTimeline(self, child, start - child._delay, 1)._lock = 0;
          } else {
            prevStart = start;
          }

          if (start < 0 && child._ts) {
            max -= start;

            if (!parent && !self._dp || parent && parent.smoothChildTiming) {
              self._start += start / self._ts;
              self._time -= start;
              self._tTime -= start;
            }

            self.shiftChildren(-start, false, -1e999);
            prevStart = 0;
          }

          child._end > max && child._ts && (max = child._end);
          child = prev;
        }

        _setDuration(self, self === _globalTimeline && self._time > max ? self._time : max, 1, 1);

        self._dirty = 0;
      }

      return self._tDur;
    };

    Timeline.updateRoot = function updateRoot(time) {
      if (_globalTimeline._ts) {
        _lazySafeRender(_globalTimeline, _parentToChildTotalTime(time, _globalTimeline));

        _lastRenderedFrame = _ticker.frame;
      }

      if (_ticker.frame >= _nextGCFrame) {
        _nextGCFrame += _config.autoSleep || 120;
        var child = _globalTimeline._first;
        if (!child || !child._ts) if (_config.autoSleep && _ticker._listeners.length < 2) {
          while (child && !child._ts) {
            child = child._next;
          }

          child || _ticker.sleep();
        }
      }
    };

    return Timeline;
  }(Animation);

  _setDefaults(Timeline.prototype, {
    _lock: 0,
    _hasPause: 0,
    _forcing: 0
  });

  var _addComplexStringPropTween = function _addComplexStringPropTween(target, prop, start, end, setter, stringFilter, funcParam) {
    var pt = new PropTween(this._pt, target, prop, 0, 1, _renderComplexString, null, setter),
        index = 0,
        matchIndex = 0,
        result,
        startNums,
        color,
        endNum,
        chunk,
        startNum,
        hasRandom,
        a;
    pt.b = start;
    pt.e = end;
    start += "";
    end += "";

    if (hasRandom = ~end.indexOf("random(")) {
      end = _replaceRandom(end);
    }

    if (stringFilter) {
      a = [start, end];
      stringFilter(a, target, prop);
      start = a[0];
      end = a[1];
    }

    startNums = start.match(_complexStringNumExp) || [];

    while (result = _complexStringNumExp.exec(end)) {
      endNum = result[0];
      chunk = end.substring(index, result.index);

      if (color) {
        color = (color + 1) % 5;
      } else if (chunk.substr(-5) === "rgba(") {
        color = 1;
      }

      if (endNum !== startNums[matchIndex++]) {
        startNum = parseFloat(startNums[matchIndex - 1]) || 0;
        pt._pt = {
          _next: pt._pt,
          p: chunk || matchIndex === 1 ? chunk : ",",
          s: startNum,
          c: endNum.charAt(1) === "=" ? _parseRelative(startNum, endNum) - startNum : parseFloat(endNum) - startNum,
          m: color && color < 4 ? Math.round : 0
        };
        index = _complexStringNumExp.lastIndex;
      }
    }

    pt.c = index < end.length ? end.substring(index, end.length) : "";
    pt.fp = funcParam;

    if (_relExp.test(end) || hasRandom) {
      pt.e = 0;
    }

    this._pt = pt;
    return pt;
  },
      _addPropTween = function _addPropTween(target, prop, start, end, index, targets, modifier, stringFilter, funcParam, optional) {
    _isFunction(end) && (end = end(index || 0, target, targets));
    var currentValue = target[prop],
        parsedStart = start !== "get" ? start : !_isFunction(currentValue) ? currentValue : funcParam ? target[prop.indexOf("set") || !_isFunction(target["get" + prop.substr(3)]) ? prop : "get" + prop.substr(3)](funcParam) : target[prop](),
        setter = !_isFunction(currentValue) ? _setterPlain : funcParam ? _setterFuncWithParam : _setterFunc,
        pt;

    if (_isString(end)) {
      if (~end.indexOf("random(")) {
        end = _replaceRandom(end);
      }

      if (end.charAt(1) === "=") {
        pt = _parseRelative(parsedStart, end) + (getUnit(parsedStart) || 0);

        if (pt || pt === 0) {
          end = pt;
        }
      }
    }

    if (!optional || parsedStart !== end || _forceAllPropTweens) {
      if (!isNaN(parsedStart * end) && end !== "") {
        pt = new PropTween(this._pt, target, prop, +parsedStart || 0, end - (parsedStart || 0), typeof currentValue === "boolean" ? _renderBoolean : _renderPlain, 0, setter);
        funcParam && (pt.fp = funcParam);
        modifier && pt.modifier(modifier, this, target);
        return this._pt = pt;
      }

      !currentValue && !(prop in target) && _missingPlugin(prop, end);
      return _addComplexStringPropTween.call(this, target, prop, parsedStart, end, setter, stringFilter || _config.stringFilter, funcParam);
    }
  },
      _processVars = function _processVars(vars, index, target, targets, tween) {
    _isFunction(vars) && (vars = _parseFuncOrString(vars, tween, index, target, targets));

    if (!_isObject(vars) || vars.style && vars.nodeType || _isArray(vars) || _isTypedArray(vars)) {
      return _isString(vars) ? _parseFuncOrString(vars, tween, index, target, targets) : vars;
    }

    var copy = {},
        p;

    for (p in vars) {
      copy[p] = _parseFuncOrString(vars[p], tween, index, target, targets);
    }

    return copy;
  },
      _checkPlugin = function _checkPlugin(property, vars, tween, index, target, targets) {
    var plugin, pt, ptLookup, i;

    if (_plugins[property] && (plugin = new _plugins[property]()).init(target, plugin.rawVars ? vars[property] : _processVars(vars[property], index, target, targets, tween), tween, index, targets) !== false) {
      tween._pt = pt = new PropTween(tween._pt, target, property, 0, 1, plugin.render, plugin, 0, plugin.priority);

      if (tween !== _quickTween) {
        ptLookup = tween._ptLookup[tween._targets.indexOf(target)];
        i = plugin._props.length;

        while (i--) {
          ptLookup[plugin._props[i]] = pt;
        }
      }
    }

    return plugin;
  },
      _overwritingTween,
      _forceAllPropTweens,
      _initTween = function _initTween(tween, time, tTime) {
    var vars = tween.vars,
        ease = vars.ease,
        startAt = vars.startAt,
        immediateRender = vars.immediateRender,
        lazy = vars.lazy,
        onUpdate = vars.onUpdate,
        runBackwards = vars.runBackwards,
        yoyoEase = vars.yoyoEase,
        keyframes = vars.keyframes,
        autoRevert = vars.autoRevert,
        dur = tween._dur,
        prevStartAt = tween._startAt,
        targets = tween._targets,
        parent = tween.parent,
        fullTargets = parent && parent.data === "nested" ? parent.vars.targets : targets,
        autoOverwrite = tween._overwrite === "auto" && !_suppressOverwrites,
        tl = tween.timeline,
        cleanVars,
        i,
        p,
        pt,
        target,
        hasPriority,
        gsData,
        harness,
        plugin,
        ptLookup,
        index,
        harnessVars,
        overwritten;
    tl && (!keyframes || !ease) && (ease = "none");
    tween._ease = _parseEase(ease, _defaults.ease);
    tween._yEase = yoyoEase ? _invertEase(_parseEase(yoyoEase === true ? ease : yoyoEase, _defaults.ease)) : 0;

    if (yoyoEase && tween._yoyo && !tween._repeat) {
      yoyoEase = tween._yEase;
      tween._yEase = tween._ease;
      tween._ease = yoyoEase;
    }

    tween._from = !tl && !!vars.runBackwards;

    if (!tl || keyframes && !vars.stagger) {
      harness = targets[0] ? _getCache(targets[0]).harness : 0;
      harnessVars = harness && vars[harness.prop];
      cleanVars = _copyExcluding(vars, _reservedProps);

      if (prevStartAt) {
        prevStartAt._zTime < 0 && prevStartAt.progress(1);
        time < 0 && runBackwards && immediateRender && !autoRevert ? prevStartAt.render(-1, true) : prevStartAt.revert(runBackwards && dur ? _revertConfigNoKill : _startAtRevertConfig);
        prevStartAt._lazy = 0;
      }

      if (startAt) {
        _removeFromParent(tween._startAt = Tween.set(targets, _setDefaults({
          data: "isStart",
          overwrite: false,
          parent: parent,
          immediateRender: true,
          lazy: !prevStartAt && _isNotFalse(lazy),
          startAt: null,
          delay: 0,
          onUpdate: onUpdate && function () {
            return _callback(tween, "onUpdate");
          },
          stagger: 0
        }, startAt)));

        tween._startAt._dp = 0;
        tween._startAt._sat = tween;
        time < 0 && (_reverting || !immediateRender && !autoRevert) && tween._startAt.revert(_revertConfigNoKill);

        if (immediateRender) {
          if (dur && time <= 0 && tTime <= 0) {
            time && (tween._zTime = time);
            return;
          }
        }
      } else if (runBackwards && dur) {
        if (!prevStartAt) {
          time && (immediateRender = false);
          p = _setDefaults({
            overwrite: false,
            data: "isFromStart",
            lazy: immediateRender && !prevStartAt && _isNotFalse(lazy),
            immediateRender: immediateRender,
            stagger: 0,
            parent: parent
          }, cleanVars);
          harnessVars && (p[harness.prop] = harnessVars);

          _removeFromParent(tween._startAt = Tween.set(targets, p));

          tween._startAt._dp = 0;
          tween._startAt._sat = tween;
          time < 0 && (_reverting ? tween._startAt.revert(_revertConfigNoKill) : tween._startAt.render(-1, true));
          tween._zTime = time;

          if (!immediateRender) {
            _initTween(tween._startAt, _tinyNum, _tinyNum);
          } else if (!time) {
            return;
          }
        }
      }

      tween._pt = tween._ptCache = 0;
      lazy = dur && _isNotFalse(lazy) || lazy && !dur;

      for (i = 0; i < targets.length; i++) {
        target = targets[i];
        gsData = target._gsap || _harness(targets)[i]._gsap;
        tween._ptLookup[i] = ptLookup = {};
        _lazyLookup[gsData.id] && _lazyTweens.length && _lazyRender();
        index = fullTargets === targets ? i : fullTargets.indexOf(target);

        if (harness && (plugin = new harness()).init(target, harnessVars || cleanVars, tween, index, fullTargets) !== false) {
          tween._pt = pt = new PropTween(tween._pt, target, plugin.name, 0, 1, plugin.render, plugin, 0, plugin.priority);

          plugin._props.forEach(function (name) {
            ptLookup[name] = pt;
          });

          plugin.priority && (hasPriority = 1);
        }

        if (!harness || harnessVars) {
          for (p in cleanVars) {
            if (_plugins[p] && (plugin = _checkPlugin(p, cleanVars, tween, index, target, fullTargets))) {
              plugin.priority && (hasPriority = 1);
            } else {
              ptLookup[p] = pt = _addPropTween.call(tween, target, p, "get", cleanVars[p], index, fullTargets, 0, vars.stringFilter);
            }
          }
        }

        tween._op && tween._op[i] && tween.kill(target, tween._op[i]);

        if (autoOverwrite && tween._pt) {
          _overwritingTween = tween;

          _globalTimeline.killTweensOf(target, ptLookup, tween.globalTime(time));

          overwritten = !tween.parent;
          _overwritingTween = 0;
        }

        tween._pt && lazy && (_lazyLookup[gsData.id] = 1);
      }

      hasPriority && _sortPropTweensByPriority(tween);
      tween._onInit && tween._onInit(tween);
    }

    tween._onUpdate = onUpdate;
    tween._initted = (!tween._op || tween._pt) && !overwritten;
    keyframes && time <= 0 && tl.render(_bigNum, true, true);
  },
      _updatePropTweens = function _updatePropTweens(tween, property, value, start, startIsRelative, ratio, time, skipRecursion) {
    var ptCache = (tween._pt && tween._ptCache || (tween._ptCache = {}))[property],
        pt,
        rootPT,
        lookup,
        i;

    if (!ptCache) {
      ptCache = tween._ptCache[property] = [];
      lookup = tween._ptLookup;
      i = tween._targets.length;

      while (i--) {
        pt = lookup[i][property];

        if (pt && pt.d && pt.d._pt) {
          pt = pt.d._pt;

          while (pt && pt.p !== property && pt.fp !== property) {
            pt = pt._next;
          }
        }

        if (!pt) {
          _forceAllPropTweens = 1;
          tween.vars[property] = "+=0";

          _initTween(tween, time);

          _forceAllPropTweens = 0;
          return skipRecursion ? _warn(property + " not eligible for reset") : 1;
        }

        ptCache.push(pt);
      }
    }

    i = ptCache.length;

    while (i--) {
      rootPT = ptCache[i];
      pt = rootPT._pt || rootPT;
      pt.s = (start || start === 0) && !startIsRelative ? start : pt.s + (start || 0) + ratio * pt.c;
      pt.c = value - pt.s;
      rootPT.e && (rootPT.e = _round(value) + getUnit(rootPT.e));
      rootPT.b && (rootPT.b = pt.s + getUnit(rootPT.b));
    }
  },
      _addAliasesToVars = function _addAliasesToVars(targets, vars) {
    var harness = targets[0] ? _getCache(targets[0]).harness : 0,
        propertyAliases = harness && harness.aliases,
        copy,
        p,
        i,
        aliases;

    if (!propertyAliases) {
      return vars;
    }

    copy = _merge({}, vars);

    for (p in propertyAliases) {
      if (p in copy) {
        aliases = propertyAliases[p].split(",");
        i = aliases.length;

        while (i--) {
          copy[aliases[i]] = copy[p];
        }
      }
    }

    return copy;
  },
      _parseKeyframe = function _parseKeyframe(prop, obj, allProps, easeEach) {
    var ease = obj.ease || easeEach || "power1.inOut",
        p,
        a;

    if (_isArray(obj)) {
      a = allProps[prop] || (allProps[prop] = []);
      obj.forEach(function (value, i) {
        return a.push({
          t: i / (obj.length - 1) * 100,
          v: value,
          e: ease
        });
      });
    } else {
      for (p in obj) {
        a = allProps[p] || (allProps[p] = []);
        p === "ease" || a.push({
          t: parseFloat(prop),
          v: obj[p],
          e: ease
        });
      }
    }
  },
      _parseFuncOrString = function _parseFuncOrString(value, tween, i, target, targets) {
    return _isFunction(value) ? value.call(tween, i, target, targets) : _isString(value) && ~value.indexOf("random(") ? _replaceRandom(value) : value;
  },
      _staggerTweenProps = _callbackNames + "repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",
      _staggerPropsToSkip = {};

  _forEachName(_staggerTweenProps + ",id,stagger,delay,duration,paused,scrollTrigger", function (name) {
    return _staggerPropsToSkip[name] = 1;
  });

  var Tween = function (_Animation2) {
    _inheritsLoose(Tween, _Animation2);

    function Tween(targets, vars, position, skipInherit) {
      var _this3;

      if (typeof vars === "number") {
        position.duration = vars;
        vars = position;
        position = null;
      }

      _this3 = _Animation2.call(this, skipInherit ? vars : _inheritDefaults(vars)) || this;
      var _this3$vars = _this3.vars,
          duration = _this3$vars.duration,
          delay = _this3$vars.delay,
          immediateRender = _this3$vars.immediateRender,
          stagger = _this3$vars.stagger,
          overwrite = _this3$vars.overwrite,
          keyframes = _this3$vars.keyframes,
          defaults = _this3$vars.defaults,
          scrollTrigger = _this3$vars.scrollTrigger,
          yoyoEase = _this3$vars.yoyoEase,
          parent = vars.parent || _globalTimeline,
          parsedTargets = (_isArray(targets) || _isTypedArray(targets) ? _isNumber(targets[0]) : "length" in vars) ? [targets] : toArray(targets),
          tl,
          i,
          copy,
          l,
          p,
          curTarget,
          staggerFunc,
          staggerVarsToMerge;
      _this3._targets = parsedTargets.length ? _harness(parsedTargets) : _warn("GSAP target " + targets + " not found. https://gsap.com", !_config.nullTargetWarn) || [];
      _this3._ptLookup = [];
      _this3._overwrite = overwrite;

      if (keyframes || stagger || _isFuncOrString(duration) || _isFuncOrString(delay)) {
        vars = _this3.vars;
        tl = _this3.timeline = new Timeline({
          data: "nested",
          defaults: defaults || {},
          targets: parent && parent.data === "nested" ? parent.vars.targets : parsedTargets
        });
        tl.kill();
        tl.parent = tl._dp = _assertThisInitialized(_this3);
        tl._start = 0;

        if (stagger || _isFuncOrString(duration) || _isFuncOrString(delay)) {
          l = parsedTargets.length;
          staggerFunc = stagger && distribute(stagger);

          if (_isObject(stagger)) {
            for (p in stagger) {
              if (~_staggerTweenProps.indexOf(p)) {
                staggerVarsToMerge || (staggerVarsToMerge = {});
                staggerVarsToMerge[p] = stagger[p];
              }
            }
          }

          for (i = 0; i < l; i++) {
            copy = _copyExcluding(vars, _staggerPropsToSkip);
            copy.stagger = 0;
            yoyoEase && (copy.yoyoEase = yoyoEase);
            staggerVarsToMerge && _merge(copy, staggerVarsToMerge);
            curTarget = parsedTargets[i];
            copy.duration = +_parseFuncOrString(duration, _assertThisInitialized(_this3), i, curTarget, parsedTargets);
            copy.delay = (+_parseFuncOrString(delay, _assertThisInitialized(_this3), i, curTarget, parsedTargets) || 0) - _this3._delay;

            if (!stagger && l === 1 && copy.delay) {
              _this3._delay = delay = copy.delay;
              _this3._start += delay;
              copy.delay = 0;
            }

            tl.to(curTarget, copy, staggerFunc ? staggerFunc(i, curTarget, parsedTargets) : 0);
            tl._ease = _easeMap.none;
          }

          tl.duration() ? duration = delay = 0 : _this3.timeline = 0;
        } else if (keyframes) {
          _inheritDefaults(_setDefaults(tl.vars.defaults, {
            ease: "none"
          }));

          tl._ease = _parseEase(keyframes.ease || vars.ease || "none");
          var time = 0,
              a,
              kf,
              v;

          if (_isArray(keyframes)) {
            keyframes.forEach(function (frame) {
              return tl.to(parsedTargets, frame, ">");
            });
            tl.duration();
          } else {
            copy = {};

            for (p in keyframes) {
              p === "ease" || p === "easeEach" || _parseKeyframe(p, keyframes[p], copy, keyframes.easeEach);
            }

            for (p in copy) {
              a = copy[p].sort(function (a, b) {
                return a.t - b.t;
              });
              time = 0;

              for (i = 0; i < a.length; i++) {
                kf = a[i];
                v = {
                  ease: kf.e,
                  duration: (kf.t - (i ? a[i - 1].t : 0)) / 100 * duration
                };
                v[p] = kf.v;
                tl.to(parsedTargets, v, time);
                time += v.duration;
              }
            }

            tl.duration() < duration && tl.to({}, {
              duration: duration - tl.duration()
            });
          }
        }

        duration || _this3.duration(duration = tl.duration());
      } else {
        _this3.timeline = 0;
      }

      if (overwrite === true && !_suppressOverwrites) {
        _overwritingTween = _assertThisInitialized(_this3);

        _globalTimeline.killTweensOf(parsedTargets);

        _overwritingTween = 0;
      }

      _addToTimeline(parent, _assertThisInitialized(_this3), position);

      vars.reversed && _this3.reverse();
      vars.paused && _this3.paused(true);

      if (immediateRender || !duration && !keyframes && _this3._start === _roundPrecise(parent._time) && _isNotFalse(immediateRender) && _hasNoPausedAncestors(_assertThisInitialized(_this3)) && parent.data !== "nested") {
        _this3._tTime = -_tinyNum;

        _this3.render(Math.max(0, -delay) || 0);
      }

      scrollTrigger && _scrollTrigger(_assertThisInitialized(_this3), scrollTrigger);
      return _this3;
    }

    var _proto3 = Tween.prototype;

    _proto3.render = function render(totalTime, suppressEvents, force) {
      var prevTime = this._time,
          tDur = this._tDur,
          dur = this._dur,
          isNegative = totalTime < 0,
          tTime = totalTime > tDur - _tinyNum && !isNegative ? tDur : totalTime < _tinyNum ? 0 : totalTime,
          time,
          pt,
          iteration,
          cycleDuration,
          prevIteration,
          isYoyo,
          ratio,
          timeline,
          yoyoEase;

      if (!dur) {
        _renderZeroDurationTween(this, totalTime, suppressEvents, force);
      } else if (tTime !== this._tTime || !totalTime || force || !this._initted && this._tTime || this._startAt && this._zTime < 0 !== isNegative) {
        time = tTime;
        timeline = this.timeline;

        if (this._repeat) {
          cycleDuration = dur + this._rDelay;

          if (this._repeat < -1 && isNegative) {
            return this.totalTime(cycleDuration * 100 + totalTime, suppressEvents, force);
          }

          time = _roundPrecise(tTime % cycleDuration);

          if (tTime === tDur) {
            iteration = this._repeat;
            time = dur;
          } else {
            iteration = ~~(tTime / cycleDuration);

            if (iteration && iteration === _roundPrecise(tTime / cycleDuration)) {
              time = dur;
              iteration--;
            }

            time > dur && (time = dur);
          }

          isYoyo = this._yoyo && iteration & 1;

          if (isYoyo) {
            yoyoEase = this._yEase;
            time = dur - time;
          }

          prevIteration = _animationCycle(this._tTime, cycleDuration);

          if (time === prevTime && !force && this._initted && iteration === prevIteration) {
            this._tTime = tTime;
            return this;
          }

          if (iteration !== prevIteration) {
            timeline && this._yEase && _propagateYoyoEase(timeline, isYoyo);

            if (this.vars.repeatRefresh && !isYoyo && !this._lock && this._time !== cycleDuration && this._initted) {
              this._lock = force = 1;
              this.render(_roundPrecise(cycleDuration * iteration), true).invalidate()._lock = 0;
            }
          }
        }

        if (!this._initted) {
          if (_attemptInitTween(this, isNegative ? totalTime : time, force, suppressEvents, tTime)) {
            this._tTime = 0;
            return this;
          }

          if (prevTime !== this._time && !(force && this.vars.repeatRefresh && iteration !== prevIteration)) {
            return this;
          }

          if (dur !== this._dur) {
            return this.render(totalTime, suppressEvents, force);
          }
        }

        this._tTime = tTime;
        this._time = time;

        if (!this._act && this._ts) {
          this._act = 1;
          this._lazy = 0;
        }

        this.ratio = ratio = (yoyoEase || this._ease)(time / dur);

        if (this._from) {
          this.ratio = ratio = 1 - ratio;
        }

        if (time && !prevTime && !suppressEvents && !iteration) {
          _callback(this, "onStart");

          if (this._tTime !== tTime) {
            return this;
          }
        }

        pt = this._pt;

        while (pt) {
          pt.r(ratio, pt.d);
          pt = pt._next;
        }

        timeline && timeline.render(totalTime < 0 ? totalTime : timeline._dur * timeline._ease(time / this._dur), suppressEvents, force) || this._startAt && (this._zTime = totalTime);

        if (this._onUpdate && !suppressEvents) {
          isNegative && _rewindStartAt(this, totalTime, suppressEvents, force);

          _callback(this, "onUpdate");
        }

        this._repeat && iteration !== prevIteration && this.vars.onRepeat && !suppressEvents && this.parent && _callback(this, "onRepeat");

        if ((tTime === this._tDur || !tTime) && this._tTime === tTime) {
          isNegative && !this._onUpdate && _rewindStartAt(this, totalTime, true, true);
          (totalTime || !dur) && (tTime === this._tDur && this._ts > 0 || !tTime && this._ts < 0) && _removeFromParent(this, 1);

          if (!suppressEvents && !(isNegative && !prevTime) && (tTime || prevTime || isYoyo)) {
            _callback(this, tTime === tDur ? "onComplete" : "onReverseComplete", true);

            this._prom && !(tTime < tDur && this.timeScale() > 0) && this._prom();
          }
        }
      }

      return this;
    };

    _proto3.targets = function targets() {
      return this._targets;
    };

    _proto3.invalidate = function invalidate(soft) {
      (!soft || !this.vars.runBackwards) && (this._startAt = 0);
      this._pt = this._op = this._onUpdate = this._lazy = this.ratio = 0;
      this._ptLookup = [];
      this.timeline && this.timeline.invalidate(soft);
      return _Animation2.prototype.invalidate.call(this, soft);
    };

    _proto3.resetTo = function resetTo(property, value, start, startIsRelative, skipRecursion) {
      _tickerActive || _ticker.wake();
      this._ts || this.play();
      var time = Math.min(this._dur, (this._dp._time - this._start) * this._ts),
          ratio;
      this._initted || _initTween(this, time);
      ratio = this._ease(time / this._dur);

      if (_updatePropTweens(this, property, value, start, startIsRelative, ratio, time, skipRecursion)) {
        return this.resetTo(property, value, start, startIsRelative, 1);
      }

      _alignPlayhead(this, 0);

      this.parent || _addLinkedListItem(this._dp, this, "_first", "_last", this._dp._sort ? "_start" : 0);
      return this.render(0);
    };

    _proto3.kill = function kill(targets, vars) {
      if (vars === void 0) {
        vars = "all";
      }

      if (!targets && (!vars || vars === "all")) {
        this._lazy = this._pt = 0;
        return this.parent ? _interrupt(this) : this;
      }

      if (this.timeline) {
        var tDur = this.timeline.totalDuration();
        this.timeline.killTweensOf(targets, vars, _overwritingTween && _overwritingTween.vars.overwrite !== true)._first || _interrupt(this);
        this.parent && tDur !== this.timeline.totalDuration() && _setDuration(this, this._dur * this.timeline._tDur / tDur, 0, 1);
        return this;
      }

      var parsedTargets = this._targets,
          killingTargets = targets ? toArray(targets) : parsedTargets,
          propTweenLookup = this._ptLookup,
          firstPT = this._pt,
          overwrittenProps,
          curLookup,
          curOverwriteProps,
          props,
          p,
          pt,
          i;

      if ((!vars || vars === "all") && _arraysMatch(parsedTargets, killingTargets)) {
        vars === "all" && (this._pt = 0);
        return _interrupt(this);
      }

      overwrittenProps = this._op = this._op || [];

      if (vars !== "all") {
        if (_isString(vars)) {
          p = {};

          _forEachName(vars, function (name) {
            return p[name] = 1;
          });

          vars = p;
        }

        vars = _addAliasesToVars(parsedTargets, vars);
      }

      i = parsedTargets.length;

      while (i--) {
        if (~killingTargets.indexOf(parsedTargets[i])) {
          curLookup = propTweenLookup[i];

          if (vars === "all") {
            overwrittenProps[i] = vars;
            props = curLookup;
            curOverwriteProps = {};
          } else {
            curOverwriteProps = overwrittenProps[i] = overwrittenProps[i] || {};
            props = vars;
          }

          for (p in props) {
            pt = curLookup && curLookup[p];

            if (pt) {
              if (!("kill" in pt.d) || pt.d.kill(p) === true) {
                _removeLinkedListItem(this, pt, "_pt");
              }

              delete curLookup[p];
            }

            if (curOverwriteProps !== "all") {
              curOverwriteProps[p] = 1;
            }
          }
        }
      }

      this._initted && !this._pt && firstPT && _interrupt(this);
      return this;
    };

    Tween.to = function to(targets, vars) {
      return new Tween(targets, vars, arguments[2]);
    };

    Tween.from = function from(targets, vars) {
      return _createTweenType(1, arguments);
    };

    Tween.delayedCall = function delayedCall(delay, callback, params, scope) {
      return new Tween(callback, 0, {
        immediateRender: false,
        lazy: false,
        overwrite: false,
        delay: delay,
        onComplete: callback,
        onReverseComplete: callback,
        onCompleteParams: params,
        onReverseCompleteParams: params,
        callbackScope: scope
      });
    };

    Tween.fromTo = function fromTo(targets, fromVars, toVars) {
      return _createTweenType(2, arguments);
    };

    Tween.set = function set(targets, vars) {
      vars.duration = 0;
      vars.repeatDelay || (vars.repeat = 0);
      return new Tween(targets, vars);
    };

    Tween.killTweensOf = function killTweensOf(targets, props, onlyActive) {
      return _globalTimeline.killTweensOf(targets, props, onlyActive);
    };

    return Tween;
  }(Animation);

  _setDefaults(Tween.prototype, {
    _targets: [],
    _lazy: 0,
    _startAt: 0,
    _op: 0,
    _onInit: 0
  });

  _forEachName("staggerTo,staggerFrom,staggerFromTo", function (name) {
    Tween[name] = function () {
      var tl = new Timeline(),
          params = _slice.call(arguments, 0);

      params.splice(name === "staggerFromTo" ? 5 : 4, 0, 0);
      return tl[name].apply(tl, params);
    };
  });

  var _setterPlain = function _setterPlain(target, property, value) {
    return target[property] = value;
  },
      _setterFunc = function _setterFunc(target, property, value) {
    return target[property](value);
  },
      _setterFuncWithParam = function _setterFuncWithParam(target, property, value, data) {
    return target[property](data.fp, value);
  },
      _setterAttribute = function _setterAttribute(target, property, value) {
    return target.setAttribute(property, value);
  },
      _getSetter = function _getSetter(target, property) {
    return _isFunction(target[property]) ? _setterFunc : _isUndefined(target[property]) && target.setAttribute ? _setterAttribute : _setterPlain;
  },
      _renderPlain = function _renderPlain(ratio, data) {
    return data.set(data.t, data.p, Math.round((data.s + data.c * ratio) * 1000000) / 1000000, data);
  },
      _renderBoolean = function _renderBoolean(ratio, data) {
    return data.set(data.t, data.p, !!(data.s + data.c * ratio), data);
  },
      _renderComplexString = function _renderComplexString(ratio, data) {
    var pt = data._pt,
        s = "";

    if (!ratio && data.b) {
      s = data.b;
    } else if (ratio === 1 && data.e) {
      s = data.e;
    } else {
      while (pt) {
        s = pt.p + (pt.m ? pt.m(pt.s + pt.c * ratio) : Math.round((pt.s + pt.c * ratio) * 10000) / 10000) + s;
        pt = pt._next;
      }

      s += data.c;
    }

    data.set(data.t, data.p, s, data);
  },
      _renderPropTweens = function _renderPropTweens(ratio, data) {
    var pt = data._pt;

    while (pt) {
      pt.r(ratio, pt.d);
      pt = pt._next;
    }
  },
      _addPluginModifier = function _addPluginModifier(modifier, tween, target, property) {
    var pt = this._pt,
        next;

    while (pt) {
      next = pt._next;
      pt.p === property && pt.modifier(modifier, tween, target);
      pt = next;
    }
  },
      _killPropTweensOf = function _killPropTweensOf(property) {
    var pt = this._pt,
        hasNonDependentRemaining,
        next;

    while (pt) {
      next = pt._next;

      if (pt.p === property && !pt.op || pt.op === property) {
        _removeLinkedListItem(this, pt, "_pt");
      } else if (!pt.dep) {
        hasNonDependentRemaining = 1;
      }

      pt = next;
    }

    return !hasNonDependentRemaining;
  },
      _setterWithModifier = function _setterWithModifier(target, property, value, data) {
    data.mSet(target, property, data.m.call(data.tween, value, data.mt), data);
  },
      _sortPropTweensByPriority = function _sortPropTweensByPriority(parent) {
    var pt = parent._pt,
        next,
        pt2,
        first,
        last;

    while (pt) {
      next = pt._next;
      pt2 = first;

      while (pt2 && pt2.pr > pt.pr) {
        pt2 = pt2._next;
      }

      if (pt._prev = pt2 ? pt2._prev : last) {
        pt._prev._next = pt;
      } else {
        first = pt;
      }

      if (pt._next = pt2) {
        pt2._prev = pt;
      } else {
        last = pt;
      }

      pt = next;
    }

    parent._pt = first;
  };

  var PropTween = function () {
    function PropTween(next, target, prop, start, change, renderer, data, setter, priority) {
      this.t = target;
      this.s = start;
      this.c = change;
      this.p = prop;
      this.r = renderer || _renderPlain;
      this.d = data || this;
      this.set = setter || _setterPlain;
      this.pr = priority || 0;
      this._next = next;

      if (next) {
        next._prev = this;
      }
    }

    var _proto4 = PropTween.prototype;

    _proto4.modifier = function modifier(func, tween, target) {
      this.mSet = this.mSet || this.set;
      this.set = _setterWithModifier;
      this.m = func;
      this.mt = target;
      this.tween = tween;
    };

    return PropTween;
  }();

  _forEachName(_callbackNames + "parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger", function (name) {
    return _reservedProps[name] = 1;
  });

  _globals.TweenMax = _globals.TweenLite = Tween;
  _globals.TimelineLite = _globals.TimelineMax = Timeline;
  _globalTimeline = new Timeline({
    sortChildren: false,
    defaults: _defaults,
    autoRemoveChildren: true,
    id: "root",
    smoothChildTiming: true
  });
  _config.stringFilter = _colorStringFilter;

  var _media = [],
      _listeners = {},
      _emptyArray = [],
      _lastMediaTime = 0,
      _contextID = 0,
      _dispatch = function _dispatch(type) {
    return (_listeners[type] || _emptyArray).map(function (f) {
      return f();
    });
  },
      _onMediaChange = function _onMediaChange() {
    var time = Date.now(),
        matches = [];

    if (time - _lastMediaTime > 2) {
      _dispatch("matchMediaInit");

      _media.forEach(function (c) {
        var queries = c.queries,
            conditions = c.conditions,
            match,
            p,
            anyMatch,
            toggled;

        for (p in queries) {
          match = _win.matchMedia(queries[p]).matches;
          match && (anyMatch = 1);

          if (match !== conditions[p]) {
            conditions[p] = match;
            toggled = 1;
          }
        }

        if (toggled) {
          c.revert();
          anyMatch && matches.push(c);
        }
      });

      _dispatch("matchMediaRevert");

      matches.forEach(function (c) {
        return c.onMatch(c, function (func) {
          return c.add(null, func);
        });
      });
      _lastMediaTime = time;

      _dispatch("matchMedia");
    }
  };

  var Context = function () {
    function Context(func, scope) {
      this.selector = scope && selector(scope);
      this.data = [];
      this._r = [];
      this.isReverted = false;
      this.id = _contextID++;
      func && this.add(func);
    }

    var _proto5 = Context.prototype;

    _proto5.add = function add(name, func, scope) {
      if (_isFunction(name)) {
        scope = func;
        func = name;
        name = _isFunction;
      }

      var self = this,
          f = function f() {
        var prev = _context,
            prevSelector = self.selector,
            result;
        prev && prev !== self && prev.data.push(self);
        scope && (self.selector = selector(scope));
        _context = self;
        result = func.apply(self, arguments);
        _isFunction(result) && self._r.push(result);
        _context = prev;
        self.selector = prevSelector;
        self.isReverted = false;
        return result;
      };

      self.last = f;
      return name === _isFunction ? f(self, function (func) {
        return self.add(null, func);
      }) : name ? self[name] = f : f;
    };

    _proto5.ignore = function ignore(func) {
      var prev = _context;
      _context = null;
      func(this);
      _context = prev;
    };

    _proto5.getTweens = function getTweens() {
      var a = [];
      this.data.forEach(function (e) {
        return e instanceof Context ? a.push.apply(a, e.getTweens()) : e instanceof Tween && !(e.parent && e.parent.data === "nested") && a.push(e);
      });
      return a;
    };

    _proto5.clear = function clear() {
      this._r.length = this.data.length = 0;
    };

    _proto5.kill = function kill(revert, matchMedia) {
      var _this4 = this;

      if (revert) {
        (function () {
          var tweens = _this4.getTweens(),
              i = _this4.data.length,
              t;

          while (i--) {
            t = _this4.data[i];

            if (t.data === "isFlip") {
              t.revert();
              t.getChildren(true, true, false).forEach(function (tween) {
                return tweens.splice(tweens.indexOf(tween), 1);
              });
            }
          }

          tweens.map(function (t) {
            return {
              g: t._dur || t._delay || t._sat && !t._sat.vars.immediateRender ? t.globalTime(0) : -Infinity,
              t: t
            };
          }).sort(function (a, b) {
            return b.g - a.g || -Infinity;
          }).forEach(function (o) {
            return o.t.revert(revert);
          });
          i = _this4.data.length;

          while (i--) {
            t = _this4.data[i];

            if (t instanceof Timeline) {
              if (t.data !== "nested") {
                t.scrollTrigger && t.scrollTrigger.revert();
                t.kill();
              }
            } else {
              !(t instanceof Tween) && t.revert && t.revert(revert);
            }
          }

          _this4._r.forEach(function (f) {
            return f(revert, _this4);
          });

          _this4.isReverted = true;
        })();
      } else {
        this.data.forEach(function (e) {
          return e.kill && e.kill();
        });
      }

      this.clear();

      if (matchMedia) {
        var i = _media.length;

        while (i--) {
          _media[i].id === this.id && _media.splice(i, 1);
        }
      }
    };

    _proto5.revert = function revert(config) {
      this.kill(config || {});
    };

    return Context;
  }();

  var MatchMedia = function () {
    function MatchMedia(scope) {
      this.contexts = [];
      this.scope = scope;
      _context && _context.data.push(this);
    }

    var _proto6 = MatchMedia.prototype;

    _proto6.add = function add(conditions, func, scope) {
      _isObject(conditions) || (conditions = {
        matches: conditions
      });
      var context = new Context(0, scope || this.scope),
          cond = context.conditions = {},
          mq,
          p,
          active;
      _context && !context.selector && (context.selector = _context.selector);
      this.contexts.push(context);
      func = context.add("onMatch", func);
      context.queries = conditions;

      for (p in conditions) {
        if (p === "all") {
          active = 1;
        } else {
          mq = _win.matchMedia(conditions[p]);

          if (mq) {
            _media.indexOf(context) < 0 && _media.push(context);
            (cond[p] = mq.matches) && (active = 1);
            mq.addListener ? mq.addListener(_onMediaChange) : mq.addEventListener("change", _onMediaChange);
          }
        }
      }

      active && func(context, function (f) {
        return context.add(null, f);
      });
      return this;
    };

    _proto6.revert = function revert(config) {
      this.kill(config || {});
    };

    _proto6.kill = function kill(revert) {
      this.contexts.forEach(function (c) {
        return c.kill(revert, true);
      });
    };

    return MatchMedia;
  }();

  var _gsap = {
    registerPlugin: function registerPlugin() {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      args.forEach(function (config) {
        return _createPlugin(config);
      });
    },
    timeline: function timeline(vars) {
      return new Timeline(vars);
    },
    getTweensOf: function getTweensOf(targets, onlyActive) {
      return _globalTimeline.getTweensOf(targets, onlyActive);
    },
    getProperty: function getProperty(target, property, unit, uncache) {
      _isString(target) && (target = toArray(target)[0]);

      var getter = _getCache(target || {}).get,
          format = unit ? _passThrough : _numericIfPossible;

      unit === "native" && (unit = "");
      return !target ? target : !property ? function (property, unit, uncache) {
        return format((_plugins[property] && _plugins[property].get || getter)(target, property, unit, uncache));
      } : format((_plugins[property] && _plugins[property].get || getter)(target, property, unit, uncache));
    },
    quickSetter: function quickSetter(target, property, unit) {
      target = toArray(target);

      if (target.length > 1) {
        var setters = target.map(function (t) {
          return gsap.quickSetter(t, property, unit);
        }),
            l = setters.length;
        return function (value) {
          var i = l;

          while (i--) {
            setters[i](value);
          }
        };
      }

      target = target[0] || {};

      var Plugin = _plugins[property],
          cache = _getCache(target),
          p = cache.harness && (cache.harness.aliases || {})[property] || property,
          setter = Plugin ? function (value) {
        var p = new Plugin();
        _quickTween._pt = 0;
        p.init(target, unit ? value + unit : value, _quickTween, 0, [target]);
        p.render(1, p);
        _quickTween._pt && _renderPropTweens(1, _quickTween);
      } : cache.set(target, p);

      return Plugin ? setter : function (value) {
        return setter(target, p, unit ? value + unit : value, cache, 1);
      };
    },
    quickTo: function quickTo(target, property, vars) {
      var _merge2;

      var tween = gsap.to(target, _merge((_merge2 = {}, _merge2[property] = "+=0.1", _merge2.paused = true, _merge2), vars || {})),
          func = function func(value, start, startIsRelative) {
        return tween.resetTo(property, value, start, startIsRelative);
      };

      func.tween = tween;
      return func;
    },
    isTweening: function isTweening(targets) {
      return _globalTimeline.getTweensOf(targets, true).length > 0;
    },
    defaults: function defaults(value) {
      value && value.ease && (value.ease = _parseEase(value.ease, _defaults.ease));
      return _mergeDeep(_defaults, value || {});
    },
    config: function config(value) {
      return _mergeDeep(_config, value || {});
    },
    registerEffect: function registerEffect(_ref3) {
      var name = _ref3.name,
          effect = _ref3.effect,
          plugins = _ref3.plugins,
          defaults = _ref3.defaults,
          extendTimeline = _ref3.extendTimeline;
      (plugins || "").split(",").forEach(function (pluginName) {
        return pluginName && !_plugins[pluginName] && !_globals[pluginName] && _warn(name + " effect requires " + pluginName + " plugin.");
      });

      _effects[name] = function (targets, vars, tl) {
        return effect(toArray(targets), _setDefaults(vars || {}, defaults), tl);
      };

      if (extendTimeline) {
        Timeline.prototype[name] = function (targets, vars, position) {
          return this.add(_effects[name](targets, _isObject(vars) ? vars : (position = vars) && {}, this), position);
        };
      }
    },
    registerEase: function registerEase(name, ease) {
      _easeMap[name] = _parseEase(ease);
    },
    parseEase: function parseEase(ease, defaultEase) {
      return arguments.length ? _parseEase(ease, defaultEase) : _easeMap;
    },
    getById: function getById(id) {
      return _globalTimeline.getById(id);
    },
    exportRoot: function exportRoot(vars, includeDelayedCalls) {
      if (vars === void 0) {
        vars = {};
      }

      var tl = new Timeline(vars),
          child,
          next;
      tl.smoothChildTiming = _isNotFalse(vars.smoothChildTiming);

      _globalTimeline.remove(tl);

      tl._dp = 0;
      tl._time = tl._tTime = _globalTimeline._time;
      child = _globalTimeline._first;

      while (child) {
        next = child._next;

        if (includeDelayedCalls || !(!child._dur && child instanceof Tween && child.vars.onComplete === child._targets[0])) {
          _addToTimeline(tl, child, child._start - child._delay);
        }

        child = next;
      }

      _addToTimeline(_globalTimeline, tl, 0);

      return tl;
    },
    context: function context(func, scope) {
      return func ? new Context(func, scope) : _context;
    },
    matchMedia: function matchMedia(scope) {
      return new MatchMedia(scope);
    },
    matchMediaRefresh: function matchMediaRefresh() {
      return _media.forEach(function (c) {
        var cond = c.conditions,
            found,
            p;

        for (p in cond) {
          if (cond[p]) {
            cond[p] = false;
            found = 1;
          }
        }

        found && c.revert();
      }) || _onMediaChange();
    },
    addEventListener: function addEventListener(type, callback) {
      var a = _listeners[type] || (_listeners[type] = []);
      ~a.indexOf(callback) || a.push(callback);
    },
    removeEventListener: function removeEventListener(type, callback) {
      var a = _listeners[type],
          i = a && a.indexOf(callback);
      i >= 0 && a.splice(i, 1);
    },
    utils: {
      wrap: wrap,
      wrapYoyo: wrapYoyo,
      distribute: distribute,
      random: random,
      snap: snap,
      normalize: normalize,
      getUnit: getUnit,
      clamp: clamp,
      splitColor: splitColor,
      toArray: toArray,
      selector: selector,
      mapRange: mapRange,
      pipe: pipe,
      unitize: unitize,
      interpolate: interpolate,
      shuffle: shuffle
    },
    install: _install,
    effects: _effects,
    ticker: _ticker,
    updateRoot: Timeline.updateRoot,
    plugins: _plugins,
    globalTimeline: _globalTimeline,
    core: {
      PropTween: PropTween,
      globals: _addGlobal,
      Tween: Tween,
      Timeline: Timeline,
      Animation: Animation,
      getCache: _getCache,
      _removeLinkedListItem: _removeLinkedListItem,
      reverting: function reverting() {
        return _reverting;
      },
      context: function context(toAdd) {
        if (toAdd && _context) {
          _context.data.push(toAdd);

          toAdd._ctx = _context;
        }

        return _context;
      },
      suppressOverwrites: function suppressOverwrites(value) {
        return _suppressOverwrites = value;
      }
    }
  };

  _forEachName("to,from,fromTo,delayedCall,set,killTweensOf", function (name) {
    return _gsap[name] = Tween[name];
  });

  _ticker.add(Timeline.updateRoot);

  _quickTween = _gsap.to({}, {
    duration: 0
  });

  var _getPluginPropTween = function _getPluginPropTween(plugin, prop) {
    var pt = plugin._pt;

    while (pt && pt.p !== prop && pt.op !== prop && pt.fp !== prop) {
      pt = pt._next;
    }

    return pt;
  },
      _addModifiers = function _addModifiers(tween, modifiers) {
    var targets = tween._targets,
        p,
        i,
        pt;

    for (p in modifiers) {
      i = targets.length;

      while (i--) {
        pt = tween._ptLookup[i][p];

        if (pt && (pt = pt.d)) {
          if (pt._pt) {
            pt = _getPluginPropTween(pt, p);
          }

          pt && pt.modifier && pt.modifier(modifiers[p], tween, targets[i], p);
        }
      }
    }
  },
      _buildModifierPlugin = function _buildModifierPlugin(name, modifier) {
    return {
      name: name,
      rawVars: 1,
      init: function init(target, vars, tween) {
        tween._onInit = function (tween) {
          var temp, p;

          if (_isString(vars)) {
            temp = {};

            _forEachName(vars, function (name) {
              return temp[name] = 1;
            });

            vars = temp;
          }

          if (modifier) {
            temp = {};

            for (p in vars) {
              temp[p] = modifier(vars[p]);
            }

            vars = temp;
          }

          _addModifiers(tween, vars);
        };
      }
    };
  };

  var gsap = _gsap.registerPlugin({
    name: "attr",
    init: function init(target, vars, tween, index, targets) {
      var p, pt, v;
      this.tween = tween;

      for (p in vars) {
        v = target.getAttribute(p) || "";
        pt = this.add(target, "setAttribute", (v || 0) + "", vars[p], index, targets, 0, 0, p);
        pt.op = p;
        pt.b = v;

        this._props.push(p);
      }
    },
    render: function render(ratio, data) {
      var pt = data._pt;

      while (pt) {
        _reverting ? pt.set(pt.t, pt.p, pt.b, pt) : pt.r(ratio, pt.d);
        pt = pt._next;
      }
    }
  }, {
    name: "endArray",
    init: function init(target, value) {
      var i = value.length;

      while (i--) {
        this.add(target, i, target[i] || 0, value[i], 0, 0, 0, 0, 0, 1);
      }
    }
  }, _buildModifierPlugin("roundProps", _roundModifier), _buildModifierPlugin("modifiers"), _buildModifierPlugin("snap", snap)) || _gsap;
  Tween.version = Timeline.version = gsap.version = "3.12.5";
  _coreReady = 1;
  _windowExists() && _wake();
  var Power0 = _easeMap.Power0,
      Power1 = _easeMap.Power1,
      Power2 = _easeMap.Power2,
      Power3 = _easeMap.Power3,
      Power4 = _easeMap.Power4,
      Linear = _easeMap.Linear,
      Quad = _easeMap.Quad,
      Cubic = _easeMap.Cubic,
      Quart = _easeMap.Quart,
      Quint = _easeMap.Quint,
      Strong = _easeMap.Strong,
      Elastic = _easeMap.Elastic,
      Back = _easeMap.Back,
      SteppedEase = _easeMap.SteppedEase,
      Bounce = _easeMap.Bounce,
      Sine = _easeMap.Sine,
      Expo = _easeMap.Expo,
      Circ = _easeMap.Circ;

  var _win$1,
      _doc$1,
      _docElement,
      _pluginInitted,
      _tempDiv,
      _tempDivStyler,
      _recentSetterPlugin,
      _reverting$1,
      _windowExists$1 = function _windowExists() {
    return typeof window !== "undefined";
  },
      _transformProps = {},
      _RAD2DEG = 180 / Math.PI,
      _DEG2RAD = Math.PI / 180,
      _atan2 = Math.atan2,
      _bigNum$1 = 1e8,
      _capsExp = /([A-Z])/g,
      _horizontalExp = /(left|right|width|margin|padding|x)/i,
      _complexExp = /[\s,\(]\S/,
      _propertyAliases = {
    autoAlpha: "opacity,visibility",
    scale: "scaleX,scaleY",
    alpha: "opacity"
  },
      _renderCSSProp = function _renderCSSProp(ratio, data) {
    return data.set(data.t, data.p, Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);
  },
      _renderPropWithEnd = function _renderPropWithEnd(ratio, data) {
    return data.set(data.t, data.p, ratio === 1 ? data.e : Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);
  },
      _renderCSSPropWithBeginning = function _renderCSSPropWithBeginning(ratio, data) {
    return data.set(data.t, data.p, ratio ? Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u : data.b, data);
  },
      _renderRoundedCSSProp = function _renderRoundedCSSProp(ratio, data) {
    var value = data.s + data.c * ratio;
    data.set(data.t, data.p, ~~(value + (value < 0 ? -.5 : .5)) + data.u, data);
  },
      _renderNonTweeningValue = function _renderNonTweeningValue(ratio, data) {
    return data.set(data.t, data.p, ratio ? data.e : data.b, data);
  },
      _renderNonTweeningValueOnlyAtEnd = function _renderNonTweeningValueOnlyAtEnd(ratio, data) {
    return data.set(data.t, data.p, ratio !== 1 ? data.b : data.e, data);
  },
      _setterCSSStyle = function _setterCSSStyle(target, property, value) {
    return target.style[property] = value;
  },
      _setterCSSProp = function _setterCSSProp(target, property, value) {
    return target.style.setProperty(property, value);
  },
      _setterTransform = function _setterTransform(target, property, value) {
    return target._gsap[property] = value;
  },
      _setterScale = function _setterScale(target, property, value) {
    return target._gsap.scaleX = target._gsap.scaleY = value;
  },
      _setterScaleWithRender = function _setterScaleWithRender(target, property, value, data, ratio) {
    var cache = target._gsap;
    cache.scaleX = cache.scaleY = value;
    cache.renderTransform(ratio, cache);
  },
      _setterTransformWithRender = function _setterTransformWithRender(target, property, value, data, ratio) {
    var cache = target._gsap;
    cache[property] = value;
    cache.renderTransform(ratio, cache);
  },
      _transformProp = "transform",
      _transformOriginProp = _transformProp + "Origin",
      _saveStyle = function _saveStyle(property, isNotCSS) {
    var _this = this;

    var target = this.target,
        style = target.style,
        cache = target._gsap;

    if (property in _transformProps && style) {
      this.tfm = this.tfm || {};

      if (property !== "transform") {
        property = _propertyAliases[property] || property;
        ~property.indexOf(",") ? property.split(",").forEach(function (a) {
          return _this.tfm[a] = _get(target, a);
        }) : this.tfm[property] = cache.x ? cache[property] : _get(target, property);
        property === _transformOriginProp && (this.tfm.zOrigin = cache.zOrigin);
      } else {
        return _propertyAliases.transform.split(",").forEach(function (p) {
          return _saveStyle.call(_this, p, isNotCSS);
        });
      }

      if (this.props.indexOf(_transformProp) >= 0) {
        return;
      }

      if (cache.svg) {
        this.svgo = target.getAttribute("data-svg-origin");
        this.props.push(_transformOriginProp, isNotCSS, "");
      }

      property = _transformProp;
    }

    (style || isNotCSS) && this.props.push(property, isNotCSS, style[property]);
  },
      _removeIndependentTransforms = function _removeIndependentTransforms(style) {
    if (style.translate) {
      style.removeProperty("translate");
      style.removeProperty("scale");
      style.removeProperty("rotate");
    }
  },
      _revertStyle = function _revertStyle() {
    var props = this.props,
        target = this.target,
        style = target.style,
        cache = target._gsap,
        i,
        p;

    for (i = 0; i < props.length; i += 3) {
      props[i + 1] ? target[props[i]] = props[i + 2] : props[i + 2] ? style[props[i]] = props[i + 2] : style.removeProperty(props[i].substr(0, 2) === "--" ? props[i] : props[i].replace(_capsExp, "-$1").toLowerCase());
    }

    if (this.tfm) {
      for (p in this.tfm) {
        cache[p] = this.tfm[p];
      }

      if (cache.svg) {
        cache.renderTransform();
        target.setAttribute("data-svg-origin", this.svgo || "");
      }

      i = _reverting$1();

      if ((!i || !i.isStart) && !style[_transformProp]) {
        _removeIndependentTransforms(style);

        if (cache.zOrigin && style[_transformOriginProp]) {
          style[_transformOriginProp] += " " + cache.zOrigin + "px";
          cache.zOrigin = 0;
          cache.renderTransform();
        }

        cache.uncache = 1;
      }
    }
  },
      _getStyleSaver = function _getStyleSaver(target, properties) {
    var saver = {
      target: target,
      props: [],
      revert: _revertStyle,
      save: _saveStyle
    };
    target._gsap || gsap.core.getCache(target);
    properties && properties.split(",").forEach(function (p) {
      return saver.save(p);
    });
    return saver;
  },
      _supports3D,
      _createElement = function _createElement(type, ns) {
    var e = _doc$1.createElementNS ? _doc$1.createElementNS((ns || "http://www.w3.org/1999/xhtml").replace(/^https/, "http"), type) : _doc$1.createElement(type);
    return e && e.style ? e : _doc$1.createElement(type);
  },
      _getComputedProperty = function _getComputedProperty(target, property, skipPrefixFallback) {
    var cs = getComputedStyle(target);
    return cs[property] || cs.getPropertyValue(property.replace(_capsExp, "-$1").toLowerCase()) || cs.getPropertyValue(property) || !skipPrefixFallback && _getComputedProperty(target, _checkPropPrefix(property) || property, 1) || "";
  },
      _prefixes = "O,Moz,ms,Ms,Webkit".split(","),
      _checkPropPrefix = function _checkPropPrefix(property, element, preferPrefix) {
    var e = element || _tempDiv,
        s = e.style,
        i = 5;

    if (property in s && !preferPrefix) {
      return property;
    }

    property = property.charAt(0).toUpperCase() + property.substr(1);

    while (i-- && !(_prefixes[i] + property in s)) {}

    return i < 0 ? null : (i === 3 ? "ms" : i >= 0 ? _prefixes[i] : "") + property;
  },
      _initCore = function _initCore() {
    if (_windowExists$1() && window.document) {
      _win$1 = window;
      _doc$1 = _win$1.document;
      _docElement = _doc$1.documentElement;
      _tempDiv = _createElement("div") || {
        style: {}
      };
      _tempDivStyler = _createElement("div");
      _transformProp = _checkPropPrefix(_transformProp);
      _transformOriginProp = _transformProp + "Origin";
      _tempDiv.style.cssText = "border-width:0;line-height:0;position:absolute;padding:0";
      _supports3D = !!_checkPropPrefix("perspective");
      _reverting$1 = gsap.core.reverting;
      _pluginInitted = 1;
    }
  },
      _getBBoxHack = function _getBBoxHack(swapIfPossible) {
    var svg = _createElement("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"),
        oldParent = this.parentNode,
        oldSibling = this.nextSibling,
        oldCSS = this.style.cssText,
        bbox;

    _docElement.appendChild(svg);

    svg.appendChild(this);
    this.style.display = "block";

    if (swapIfPossible) {
      try {
        bbox = this.getBBox();
        this._gsapBBox = this.getBBox;
        this.getBBox = _getBBoxHack;
      } catch (e) {}
    } else if (this._gsapBBox) {
      bbox = this._gsapBBox();
    }

    if (oldParent) {
      if (oldSibling) {
        oldParent.insertBefore(this, oldSibling);
      } else {
        oldParent.appendChild(this);
      }
    }

    _docElement.removeChild(svg);

    this.style.cssText = oldCSS;
    return bbox;
  },
      _getAttributeFallbacks = function _getAttributeFallbacks(target, attributesArray) {
    var i = attributesArray.length;

    while (i--) {
      if (target.hasAttribute(attributesArray[i])) {
        return target.getAttribute(attributesArray[i]);
      }
    }
  },
      _getBBox = function _getBBox(target) {
    var bounds;

    try {
      bounds = target.getBBox();
    } catch (error) {
      bounds = _getBBoxHack.call(target, true);
    }

    bounds && (bounds.width || bounds.height) || target.getBBox === _getBBoxHack || (bounds = _getBBoxHack.call(target, true));
    return bounds && !bounds.width && !bounds.x && !bounds.y ? {
      x: +_getAttributeFallbacks(target, ["x", "cx", "x1"]) || 0,
      y: +_getAttributeFallbacks(target, ["y", "cy", "y1"]) || 0,
      width: 0,
      height: 0
    } : bounds;
  },
      _isSVG = function _isSVG(e) {
    return !!(e.getCTM && (!e.parentNode || e.ownerSVGElement) && _getBBox(e));
  },
      _removeProperty = function _removeProperty(target, property) {
    if (property) {
      var style = target.style,
          first2Chars;

      if (property in _transformProps && property !== _transformOriginProp) {
        property = _transformProp;
      }

      if (style.removeProperty) {
        first2Chars = property.substr(0, 2);

        if (first2Chars === "ms" || property.substr(0, 6) === "webkit") {
          property = "-" + property;
        }

        style.removeProperty(first2Chars === "--" ? property : property.replace(_capsExp, "-$1").toLowerCase());
      } else {
        style.removeAttribute(property);
      }
    }
  },
      _addNonTweeningPT = function _addNonTweeningPT(plugin, target, property, beginning, end, onlySetAtEnd) {
    var pt = new PropTween(plugin._pt, target, property, 0, 1, onlySetAtEnd ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue);
    plugin._pt = pt;
    pt.b = beginning;
    pt.e = end;

    plugin._props.push(property);

    return pt;
  },
      _nonConvertibleUnits = {
    deg: 1,
    rad: 1,
    turn: 1
  },
      _nonStandardLayouts = {
    grid: 1,
    flex: 1
  },
      _convertToUnit = function _convertToUnit(target, property, value, unit) {
    var curValue = parseFloat(value) || 0,
        curUnit = (value + "").trim().substr((curValue + "").length) || "px",
        style = _tempDiv.style,
        horizontal = _horizontalExp.test(property),
        isRootSVG = target.tagName.toLowerCase() === "svg",
        measureProperty = (isRootSVG ? "client" : "offset") + (horizontal ? "Width" : "Height"),
        amount = 100,
        toPixels = unit === "px",
        toPercent = unit === "%",
        px,
        parent,
        cache,
        isSVG;

    if (unit === curUnit || !curValue || _nonConvertibleUnits[unit] || _nonConvertibleUnits[curUnit]) {
      return curValue;
    }

    curUnit !== "px" && !toPixels && (curValue = _convertToUnit(target, property, value, "px"));
    isSVG = target.getCTM && _isSVG(target);

    if ((toPercent || curUnit === "%") && (_transformProps[property] || ~property.indexOf("adius"))) {
      px = isSVG ? target.getBBox()[horizontal ? "width" : "height"] : target[measureProperty];
      return _round(toPercent ? curValue / px * amount : curValue / 100 * px);
    }

    style[horizontal ? "width" : "height"] = amount + (toPixels ? curUnit : unit);
    parent = ~property.indexOf("adius") || unit === "em" && target.appendChild && !isRootSVG ? target : target.parentNode;

    if (isSVG) {
      parent = (target.ownerSVGElement || {}).parentNode;
    }

    if (!parent || parent === _doc$1 || !parent.appendChild) {
      parent = _doc$1.body;
    }

    cache = parent._gsap;

    if (cache && toPercent && cache.width && horizontal && cache.time === _ticker.time && !cache.uncache) {
      return _round(curValue / cache.width * amount);
    } else {
      if (toPercent && (property === "height" || property === "width")) {
        var v = target.style[property];
        target.style[property] = amount + unit;
        px = target[measureProperty];
        v ? target.style[property] = v : _removeProperty(target, property);
      } else {
        (toPercent || curUnit === "%") && !_nonStandardLayouts[_getComputedProperty(parent, "display")] && (style.position = _getComputedProperty(target, "position"));
        parent === target && (style.position = "static");
        parent.appendChild(_tempDiv);
        px = _tempDiv[measureProperty];
        parent.removeChild(_tempDiv);
        style.position = "absolute";
      }

      if (horizontal && toPercent) {
        cache = _getCache(parent);
        cache.time = _ticker.time;
        cache.width = parent[measureProperty];
      }
    }

    return _round(toPixels ? px * curValue / amount : px && curValue ? amount / px * curValue : 0);
  },
      _get = function _get(target, property, unit, uncache) {
    var value;
    _pluginInitted || _initCore();

    if (property in _propertyAliases && property !== "transform") {
      property = _propertyAliases[property];

      if (~property.indexOf(",")) {
        property = property.split(",")[0];
      }
    }

    if (_transformProps[property] && property !== "transform") {
      value = _parseTransform(target, uncache);
      value = property !== "transformOrigin" ? value[property] : value.svg ? value.origin : _firstTwoOnly(_getComputedProperty(target, _transformOriginProp)) + " " + value.zOrigin + "px";
    } else {
      value = target.style[property];

      if (!value || value === "auto" || uncache || ~(value + "").indexOf("calc(")) {
        value = _specialProps[property] && _specialProps[property](target, property, unit) || _getComputedProperty(target, property) || _getProperty(target, property) || (property === "opacity" ? 1 : 0);
      }
    }

    return unit && !~(value + "").trim().indexOf(" ") ? _convertToUnit(target, property, value, unit) + unit : value;
  },
      _tweenComplexCSSString = function _tweenComplexCSSString(target, prop, start, end) {
    if (!start || start === "none") {
      var p = _checkPropPrefix(prop, target, 1),
          s = p && _getComputedProperty(target, p, 1);

      if (s && s !== start) {
        prop = p;
        start = s;
      } else if (prop === "borderColor") {
        start = _getComputedProperty(target, "borderTopColor");
      }
    }

    var pt = new PropTween(this._pt, target.style, prop, 0, 1, _renderComplexString),
        index = 0,
        matchIndex = 0,
        a,
        result,
        startValues,
        startNum,
        color,
        startValue,
        endValue,
        endNum,
        chunk,
        endUnit,
        startUnit,
        endValues;
    pt.b = start;
    pt.e = end;
    start += "";
    end += "";

    if (end === "auto") {
      startValue = target.style[prop];
      target.style[prop] = end;
      end = _getComputedProperty(target, prop) || end;
      startValue ? target.style[prop] = startValue : _removeProperty(target, prop);
    }

    a = [start, end];

    _colorStringFilter(a);

    start = a[0];
    end = a[1];
    startValues = start.match(_numWithUnitExp) || [];
    endValues = end.match(_numWithUnitExp) || [];

    if (endValues.length) {
      while (result = _numWithUnitExp.exec(end)) {
        endValue = result[0];
        chunk = end.substring(index, result.index);

        if (color) {
          color = (color + 1) % 5;
        } else if (chunk.substr(-5) === "rgba(" || chunk.substr(-5) === "hsla(") {
          color = 1;
        }

        if (endValue !== (startValue = startValues[matchIndex++] || "")) {
          startNum = parseFloat(startValue) || 0;
          startUnit = startValue.substr((startNum + "").length);
          endValue.charAt(1) === "=" && (endValue = _parseRelative(startNum, endValue) + startUnit);
          endNum = parseFloat(endValue);
          endUnit = endValue.substr((endNum + "").length);
          index = _numWithUnitExp.lastIndex - endUnit.length;

          if (!endUnit) {
            endUnit = endUnit || _config.units[prop] || startUnit;

            if (index === end.length) {
              end += endUnit;
              pt.e += endUnit;
            }
          }

          if (startUnit !== endUnit) {
            startNum = _convertToUnit(target, prop, startValue, endUnit) || 0;
          }

          pt._pt = {
            _next: pt._pt,
            p: chunk || matchIndex === 1 ? chunk : ",",
            s: startNum,
            c: endNum - startNum,
            m: color && color < 4 || prop === "zIndex" ? Math.round : 0
          };
        }
      }

      pt.c = index < end.length ? end.substring(index, end.length) : "";
    } else {
      pt.r = prop === "display" && end === "none" ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue;
    }

    _relExp.test(end) && (pt.e = 0);
    this._pt = pt;
    return pt;
  },
      _keywordToPercent = {
    top: "0%",
    bottom: "100%",
    left: "0%",
    right: "100%",
    center: "50%"
  },
      _convertKeywordsToPercentages = function _convertKeywordsToPercentages(value) {
    var split = value.split(" "),
        x = split[0],
        y = split[1] || "50%";

    if (x === "top" || x === "bottom" || y === "left" || y === "right") {
      value = x;
      x = y;
      y = value;
    }

    split[0] = _keywordToPercent[x] || x;
    split[1] = _keywordToPercent[y] || y;
    return split.join(" ");
  },
      _renderClearProps = function _renderClearProps(ratio, data) {
    if (data.tween && data.tween._time === data.tween._dur) {
      var target = data.t,
          style = target.style,
          props = data.u,
          cache = target._gsap,
          prop,
          clearTransforms,
          i;

      if (props === "all" || props === true) {
        style.cssText = "";
        clearTransforms = 1;
      } else {
        props = props.split(",");
        i = props.length;

        while (--i > -1) {
          prop = props[i];

          if (_transformProps[prop]) {
            clearTransforms = 1;
            prop = prop === "transformOrigin" ? _transformOriginProp : _transformProp;
          }

          _removeProperty(target, prop);
        }
      }

      if (clearTransforms) {
        _removeProperty(target, _transformProp);

        if (cache) {
          cache.svg && target.removeAttribute("transform");

          _parseTransform(target, 1);

          cache.uncache = 1;

          _removeIndependentTransforms(style);
        }
      }
    }
  },
      _specialProps = {
    clearProps: function clearProps(plugin, target, property, endValue, tween) {
      if (tween.data !== "isFromStart") {
        var pt = plugin._pt = new PropTween(plugin._pt, target, property, 0, 0, _renderClearProps);
        pt.u = endValue;
        pt.pr = -10;
        pt.tween = tween;

        plugin._props.push(property);

        return 1;
      }
    }
  },
      _identity2DMatrix = [1, 0, 0, 1, 0, 0],
      _rotationalProperties = {},
      _isNullTransform = function _isNullTransform(value) {
    return value === "matrix(1, 0, 0, 1, 0, 0)" || value === "none" || !value;
  },
      _getComputedTransformMatrixAsArray = function _getComputedTransformMatrixAsArray(target) {
    var matrixString = _getComputedProperty(target, _transformProp);

    return _isNullTransform(matrixString) ? _identity2DMatrix : matrixString.substr(7).match(_numExp).map(_round);
  },
      _getMatrix = function _getMatrix(target, force2D) {
    var cache = target._gsap || _getCache(target),
        style = target.style,
        matrix = _getComputedTransformMatrixAsArray(target),
        parent,
        nextSibling,
        temp,
        addedToDOM;

    if (cache.svg && target.getAttribute("transform")) {
      temp = target.transform.baseVal.consolidate().matrix;
      matrix = [temp.a, temp.b, temp.c, temp.d, temp.e, temp.f];
      return matrix.join(",") === "1,0,0,1,0,0" ? _identity2DMatrix : matrix;
    } else if (matrix === _identity2DMatrix && !target.offsetParent && target !== _docElement && !cache.svg) {
      temp = style.display;
      style.display = "block";
      parent = target.parentNode;

      if (!parent || !target.offsetParent) {
        addedToDOM = 1;
        nextSibling = target.nextElementSibling;

        _docElement.appendChild(target);
      }

      matrix = _getComputedTransformMatrixAsArray(target);
      temp ? style.display = temp : _removeProperty(target, "display");

      if (addedToDOM) {
        nextSibling ? parent.insertBefore(target, nextSibling) : parent ? parent.appendChild(target) : _docElement.removeChild(target);
      }
    }

    return force2D && matrix.length > 6 ? [matrix[0], matrix[1], matrix[4], matrix[5], matrix[12], matrix[13]] : matrix;
  },
      _applySVGOrigin = function _applySVGOrigin(target, origin, originIsAbsolute, smooth, matrixArray, pluginToAddPropTweensTo) {
    var cache = target._gsap,
        matrix = matrixArray || _getMatrix(target, true),
        xOriginOld = cache.xOrigin || 0,
        yOriginOld = cache.yOrigin || 0,
        xOffsetOld = cache.xOffset || 0,
        yOffsetOld = cache.yOffset || 0,
        a = matrix[0],
        b = matrix[1],
        c = matrix[2],
        d = matrix[3],
        tx = matrix[4],
        ty = matrix[5],
        originSplit = origin.split(" "),
        xOrigin = parseFloat(originSplit[0]) || 0,
        yOrigin = parseFloat(originSplit[1]) || 0,
        bounds,
        determinant,
        x,
        y;

    if (!originIsAbsolute) {
      bounds = _getBBox(target);
      xOrigin = bounds.x + (~originSplit[0].indexOf("%") ? xOrigin / 100 * bounds.width : xOrigin);
      yOrigin = bounds.y + (~(originSplit[1] || originSplit[0]).indexOf("%") ? yOrigin / 100 * bounds.height : yOrigin);
    } else if (matrix !== _identity2DMatrix && (determinant = a * d - b * c)) {
      x = xOrigin * (d / determinant) + yOrigin * (-c / determinant) + (c * ty - d * tx) / determinant;
      y = xOrigin * (-b / determinant) + yOrigin * (a / determinant) - (a * ty - b * tx) / determinant;
      xOrigin = x;
      yOrigin = y;
    }

    if (smooth || smooth !== false && cache.smooth) {
      tx = xOrigin - xOriginOld;
      ty = yOrigin - yOriginOld;
      cache.xOffset = xOffsetOld + (tx * a + ty * c) - tx;
      cache.yOffset = yOffsetOld + (tx * b + ty * d) - ty;
    } else {
      cache.xOffset = cache.yOffset = 0;
    }

    cache.xOrigin = xOrigin;
    cache.yOrigin = yOrigin;
    cache.smooth = !!smooth;
    cache.origin = origin;
    cache.originIsAbsolute = !!originIsAbsolute;
    target.style[_transformOriginProp] = "0px 0px";

    if (pluginToAddPropTweensTo) {
      _addNonTweeningPT(pluginToAddPropTweensTo, cache, "xOrigin", xOriginOld, xOrigin);

      _addNonTweeningPT(pluginToAddPropTweensTo, cache, "yOrigin", yOriginOld, yOrigin);

      _addNonTweeningPT(pluginToAddPropTweensTo, cache, "xOffset", xOffsetOld, cache.xOffset);

      _addNonTweeningPT(pluginToAddPropTweensTo, cache, "yOffset", yOffsetOld, cache.yOffset);
    }

    target.setAttribute("data-svg-origin", xOrigin + " " + yOrigin);
  },
      _parseTransform = function _parseTransform(target, uncache) {
    var cache = target._gsap || new GSCache(target);

    if ("x" in cache && !uncache && !cache.uncache) {
      return cache;
    }

    var style = target.style,
        invertedScaleX = cache.scaleX < 0,
        px = "px",
        deg = "deg",
        cs = getComputedStyle(target),
        origin = _getComputedProperty(target, _transformOriginProp) || "0",
        x,
        y,
        z,
        scaleX,
        scaleY,
        rotation,
        rotationX,
        rotationY,
        skewX,
        skewY,
        perspective,
        xOrigin,
        yOrigin,
        matrix,
        angle,
        cos,
        sin,
        a,
        b,
        c,
        d,
        a12,
        a22,
        t1,
        t2,
        t3,
        a13,
        a23,
        a33,
        a42,
        a43,
        a32;
    x = y = z = rotation = rotationX = rotationY = skewX = skewY = perspective = 0;
    scaleX = scaleY = 1;
    cache.svg = !!(target.getCTM && _isSVG(target));

    if (cs.translate) {
      if (cs.translate !== "none" || cs.scale !== "none" || cs.rotate !== "none") {
        style[_transformProp] = (cs.translate !== "none" ? "translate3d(" + (cs.translate + " 0 0").split(" ").slice(0, 3).join(", ") + ") " : "") + (cs.rotate !== "none" ? "rotate(" + cs.rotate + ") " : "") + (cs.scale !== "none" ? "scale(" + cs.scale.split(" ").join(",") + ") " : "") + (cs[_transformProp] !== "none" ? cs[_transformProp] : "");
      }

      style.scale = style.rotate = style.translate = "none";
    }

    matrix = _getMatrix(target, cache.svg);

    if (cache.svg) {
      if (cache.uncache) {
        t2 = target.getBBox();
        origin = cache.xOrigin - t2.x + "px " + (cache.yOrigin - t2.y) + "px";
        t1 = "";
      } else {
        t1 = !uncache && target.getAttribute("data-svg-origin");
      }

      _applySVGOrigin(target, t1 || origin, !!t1 || cache.originIsAbsolute, cache.smooth !== false, matrix);
    }

    xOrigin = cache.xOrigin || 0;
    yOrigin = cache.yOrigin || 0;

    if (matrix !== _identity2DMatrix) {
      a = matrix[0];
      b = matrix[1];
      c = matrix[2];
      d = matrix[3];
      x = a12 = matrix[4];
      y = a22 = matrix[5];

      if (matrix.length === 6) {
        scaleX = Math.sqrt(a * a + b * b);
        scaleY = Math.sqrt(d * d + c * c);
        rotation = a || b ? _atan2(b, a) * _RAD2DEG : 0;
        skewX = c || d ? _atan2(c, d) * _RAD2DEG + rotation : 0;
        skewX && (scaleY *= Math.abs(Math.cos(skewX * _DEG2RAD)));

        if (cache.svg) {
          x -= xOrigin - (xOrigin * a + yOrigin * c);
          y -= yOrigin - (xOrigin * b + yOrigin * d);
        }
      } else {
        a32 = matrix[6];
        a42 = matrix[7];
        a13 = matrix[8];
        a23 = matrix[9];
        a33 = matrix[10];
        a43 = matrix[11];
        x = matrix[12];
        y = matrix[13];
        z = matrix[14];
        angle = _atan2(a32, a33);
        rotationX = angle * _RAD2DEG;

        if (angle) {
          cos = Math.cos(-angle);
          sin = Math.sin(-angle);
          t1 = a12 * cos + a13 * sin;
          t2 = a22 * cos + a23 * sin;
          t3 = a32 * cos + a33 * sin;
          a13 = a12 * -sin + a13 * cos;
          a23 = a22 * -sin + a23 * cos;
          a33 = a32 * -sin + a33 * cos;
          a43 = a42 * -sin + a43 * cos;
          a12 = t1;
          a22 = t2;
          a32 = t3;
        }

        angle = _atan2(-c, a33);
        rotationY = angle * _RAD2DEG;

        if (angle) {
          cos = Math.cos(-angle);
          sin = Math.sin(-angle);
          t1 = a * cos - a13 * sin;
          t2 = b * cos - a23 * sin;
          t3 = c * cos - a33 * sin;
          a43 = d * sin + a43 * cos;
          a = t1;
          b = t2;
          c = t3;
        }

        angle = _atan2(b, a);
        rotation = angle * _RAD2DEG;

        if (angle) {
          cos = Math.cos(angle);
          sin = Math.sin(angle);
          t1 = a * cos + b * sin;
          t2 = a12 * cos + a22 * sin;
          b = b * cos - a * sin;
          a22 = a22 * cos - a12 * sin;
          a = t1;
          a12 = t2;
        }

        if (rotationX && Math.abs(rotationX) + Math.abs(rotation) > 359.9) {
          rotationX = rotation = 0;
          rotationY = 180 - rotationY;
        }

        scaleX = _round(Math.sqrt(a * a + b * b + c * c));
        scaleY = _round(Math.sqrt(a22 * a22 + a32 * a32));
        angle = _atan2(a12, a22);
        skewX = Math.abs(angle) > 0.0002 ? angle * _RAD2DEG : 0;
        perspective = a43 ? 1 / (a43 < 0 ? -a43 : a43) : 0;
      }

      if (cache.svg) {
        t1 = target.getAttribute("transform");
        cache.forceCSS = target.setAttribute("transform", "") || !_isNullTransform(_getComputedProperty(target, _transformProp));
        t1 && target.setAttribute("transform", t1);
      }
    }

    if (Math.abs(skewX) > 90 && Math.abs(skewX) < 270) {
      if (invertedScaleX) {
        scaleX *= -1;
        skewX += rotation <= 0 ? 180 : -180;
        rotation += rotation <= 0 ? 180 : -180;
      } else {
        scaleY *= -1;
        skewX += skewX <= 0 ? 180 : -180;
      }
    }

    uncache = uncache || cache.uncache;
    cache.x = x - ((cache.xPercent = x && (!uncache && cache.xPercent || (Math.round(target.offsetWidth / 2) === Math.round(-x) ? -50 : 0))) ? target.offsetWidth * cache.xPercent / 100 : 0) + px;
    cache.y = y - ((cache.yPercent = y && (!uncache && cache.yPercent || (Math.round(target.offsetHeight / 2) === Math.round(-y) ? -50 : 0))) ? target.offsetHeight * cache.yPercent / 100 : 0) + px;
    cache.z = z + px;
    cache.scaleX = _round(scaleX);
    cache.scaleY = _round(scaleY);
    cache.rotation = _round(rotation) + deg;
    cache.rotationX = _round(rotationX) + deg;
    cache.rotationY = _round(rotationY) + deg;
    cache.skewX = skewX + deg;
    cache.skewY = skewY + deg;
    cache.transformPerspective = perspective + px;

    if (cache.zOrigin = parseFloat(origin.split(" ")[2]) || !uncache && cache.zOrigin || 0) {
      style[_transformOriginProp] = _firstTwoOnly(origin);
    }

    cache.xOffset = cache.yOffset = 0;
    cache.force3D = _config.force3D;
    cache.renderTransform = cache.svg ? _renderSVGTransforms : _supports3D ? _renderCSSTransforms : _renderNon3DTransforms;
    cache.uncache = 0;
    return cache;
  },
      _firstTwoOnly = function _firstTwoOnly(value) {
    return (value = value.split(" "))[0] + " " + value[1];
  },
      _addPxTranslate = function _addPxTranslate(target, start, value) {
    var unit = getUnit(start);
    return _round(parseFloat(start) + parseFloat(_convertToUnit(target, "x", value + "px", unit))) + unit;
  },
      _renderNon3DTransforms = function _renderNon3DTransforms(ratio, cache) {
    cache.z = "0px";
    cache.rotationY = cache.rotationX = "0deg";
    cache.force3D = 0;

    _renderCSSTransforms(ratio, cache);
  },
      _zeroDeg = "0deg",
      _zeroPx = "0px",
      _endParenthesis = ") ",
      _renderCSSTransforms = function _renderCSSTransforms(ratio, cache) {
    var _ref = cache || this,
        xPercent = _ref.xPercent,
        yPercent = _ref.yPercent,
        x = _ref.x,
        y = _ref.y,
        z = _ref.z,
        rotation = _ref.rotation,
        rotationY = _ref.rotationY,
        rotationX = _ref.rotationX,
        skewX = _ref.skewX,
        skewY = _ref.skewY,
        scaleX = _ref.scaleX,
        scaleY = _ref.scaleY,
        transformPerspective = _ref.transformPerspective,
        force3D = _ref.force3D,
        target = _ref.target,
        zOrigin = _ref.zOrigin,
        transforms = "",
        use3D = force3D === "auto" && ratio && ratio !== 1 || force3D === true;

    if (zOrigin && (rotationX !== _zeroDeg || rotationY !== _zeroDeg)) {
      var angle = parseFloat(rotationY) * _DEG2RAD,
          a13 = Math.sin(angle),
          a33 = Math.cos(angle),
          cos;

      angle = parseFloat(rotationX) * _DEG2RAD;
      cos = Math.cos(angle);
      x = _addPxTranslate(target, x, a13 * cos * -zOrigin);
      y = _addPxTranslate(target, y, -Math.sin(angle) * -zOrigin);
      z = _addPxTranslate(target, z, a33 * cos * -zOrigin + zOrigin);
    }

    if (transformPerspective !== _zeroPx) {
      transforms += "perspective(" + transformPerspective + _endParenthesis;
    }

    if (xPercent || yPercent) {
      transforms += "translate(" + xPercent + "%, " + yPercent + "%) ";
    }

    if (use3D || x !== _zeroPx || y !== _zeroPx || z !== _zeroPx) {
      transforms += z !== _zeroPx || use3D ? "translate3d(" + x + ", " + y + ", " + z + ") " : "translate(" + x + ", " + y + _endParenthesis;
    }

    if (rotation !== _zeroDeg) {
      transforms += "rotate(" + rotation + _endParenthesis;
    }

    if (rotationY !== _zeroDeg) {
      transforms += "rotateY(" + rotationY + _endParenthesis;
    }

    if (rotationX !== _zeroDeg) {
      transforms += "rotateX(" + rotationX + _endParenthesis;
    }

    if (skewX !== _zeroDeg || skewY !== _zeroDeg) {
      transforms += "skew(" + skewX + ", " + skewY + _endParenthesis;
    }

    if (scaleX !== 1 || scaleY !== 1) {
      transforms += "scale(" + scaleX + ", " + scaleY + _endParenthesis;
    }

    target.style[_transformProp] = transforms || "translate(0, 0)";
  },
      _renderSVGTransforms = function _renderSVGTransforms(ratio, cache) {
    var _ref2 = cache || this,
        xPercent = _ref2.xPercent,
        yPercent = _ref2.yPercent,
        x = _ref2.x,
        y = _ref2.y,
        rotation = _ref2.rotation,
        skewX = _ref2.skewX,
        skewY = _ref2.skewY,
        scaleX = _ref2.scaleX,
        scaleY = _ref2.scaleY,
        target = _ref2.target,
        xOrigin = _ref2.xOrigin,
        yOrigin = _ref2.yOrigin,
        xOffset = _ref2.xOffset,
        yOffset = _ref2.yOffset,
        forceCSS = _ref2.forceCSS,
        tx = parseFloat(x),
        ty = parseFloat(y),
        a11,
        a21,
        a12,
        a22,
        temp;

    rotation = parseFloat(rotation);
    skewX = parseFloat(skewX);
    skewY = parseFloat(skewY);

    if (skewY) {
      skewY = parseFloat(skewY);
      skewX += skewY;
      rotation += skewY;
    }

    if (rotation || skewX) {
      rotation *= _DEG2RAD;
      skewX *= _DEG2RAD;
      a11 = Math.cos(rotation) * scaleX;
      a21 = Math.sin(rotation) * scaleX;
      a12 = Math.sin(rotation - skewX) * -scaleY;
      a22 = Math.cos(rotation - skewX) * scaleY;

      if (skewX) {
        skewY *= _DEG2RAD;
        temp = Math.tan(skewX - skewY);
        temp = Math.sqrt(1 + temp * temp);
        a12 *= temp;
        a22 *= temp;

        if (skewY) {
          temp = Math.tan(skewY);
          temp = Math.sqrt(1 + temp * temp);
          a11 *= temp;
          a21 *= temp;
        }
      }

      a11 = _round(a11);
      a21 = _round(a21);
      a12 = _round(a12);
      a22 = _round(a22);
    } else {
      a11 = scaleX;
      a22 = scaleY;
      a21 = a12 = 0;
    }

    if (tx && !~(x + "").indexOf("px") || ty && !~(y + "").indexOf("px")) {
      tx = _convertToUnit(target, "x", x, "px");
      ty = _convertToUnit(target, "y", y, "px");
    }

    if (xOrigin || yOrigin || xOffset || yOffset) {
      tx = _round(tx + xOrigin - (xOrigin * a11 + yOrigin * a12) + xOffset);
      ty = _round(ty + yOrigin - (xOrigin * a21 + yOrigin * a22) + yOffset);
    }

    if (xPercent || yPercent) {
      temp = target.getBBox();
      tx = _round(tx + xPercent / 100 * temp.width);
      ty = _round(ty + yPercent / 100 * temp.height);
    }

    temp = "matrix(" + a11 + "," + a21 + "," + a12 + "," + a22 + "," + tx + "," + ty + ")";
    target.setAttribute("transform", temp);
    forceCSS && (target.style[_transformProp] = temp);
  },
      _addRotationalPropTween = function _addRotationalPropTween(plugin, target, property, startNum, endValue) {
    var cap = 360,
        isString = _isString(endValue),
        endNum = parseFloat(endValue) * (isString && ~endValue.indexOf("rad") ? _RAD2DEG : 1),
        change = endNum - startNum,
        finalValue = startNum + change + "deg",
        direction,
        pt;

    if (isString) {
      direction = endValue.split("_")[1];

      if (direction === "short") {
        change %= cap;

        if (change !== change % (cap / 2)) {
          change += change < 0 ? cap : -cap;
        }
      }

      if (direction === "cw" && change < 0) {
        change = (change + cap * _bigNum$1) % cap - ~~(change / cap) * cap;
      } else if (direction === "ccw" && change > 0) {
        change = (change - cap * _bigNum$1) % cap - ~~(change / cap) * cap;
      }
    }

    plugin._pt = pt = new PropTween(plugin._pt, target, property, startNum, change, _renderPropWithEnd);
    pt.e = finalValue;
    pt.u = "deg";

    plugin._props.push(property);

    return pt;
  },
      _assign = function _assign(target, source) {
    for (var p in source) {
      target[p] = source[p];
    }

    return target;
  },
      _addRawTransformPTs = function _addRawTransformPTs(plugin, transforms, target) {
    var startCache = _assign({}, target._gsap),
        exclude = "perspective,force3D,transformOrigin,svgOrigin",
        style = target.style,
        endCache,
        p,
        startValue,
        endValue,
        startNum,
        endNum,
        startUnit,
        endUnit;

    if (startCache.svg) {
      startValue = target.getAttribute("transform");
      target.setAttribute("transform", "");
      style[_transformProp] = transforms;
      endCache = _parseTransform(target, 1);

      _removeProperty(target, _transformProp);

      target.setAttribute("transform", startValue);
    } else {
      startValue = getComputedStyle(target)[_transformProp];
      style[_transformProp] = transforms;
      endCache = _parseTransform(target, 1);
      style[_transformProp] = startValue;
    }

    for (p in _transformProps) {
      startValue = startCache[p];
      endValue = endCache[p];

      if (startValue !== endValue && exclude.indexOf(p) < 0) {
        startUnit = getUnit(startValue);
        endUnit = getUnit(endValue);
        startNum = startUnit !== endUnit ? _convertToUnit(target, p, startValue, endUnit) : parseFloat(startValue);
        endNum = parseFloat(endValue);
        plugin._pt = new PropTween(plugin._pt, endCache, p, startNum, endNum - startNum, _renderCSSProp);
        plugin._pt.u = endUnit || 0;

        plugin._props.push(p);
      }
    }

    _assign(endCache, startCache);
  };

  _forEachName("padding,margin,Width,Radius", function (name, index) {
    var t = "Top",
        r = "Right",
        b = "Bottom",
        l = "Left",
        props = (index < 3 ? [t, r, b, l] : [t + l, t + r, b + r, b + l]).map(function (side) {
      return index < 2 ? name + side : "border" + side + name;
    });

    _specialProps[index > 1 ? "border" + name : name] = function (plugin, target, property, endValue, tween) {
      var a, vars;

      if (arguments.length < 4) {
        a = props.map(function (prop) {
          return _get(plugin, prop, property);
        });
        vars = a.join(" ");
        return vars.split(a[0]).length === 5 ? a[0] : vars;
      }

      a = (endValue + "").split(" ");
      vars = {};
      props.forEach(function (prop, i) {
        return vars[prop] = a[i] = a[i] || a[(i - 1) / 2 | 0];
      });
      plugin.init(target, vars, tween);
    };
  });

  var CSSPlugin = {
    name: "css",
    register: _initCore,
    targetTest: function targetTest(target) {
      return target.style && target.nodeType;
    },
    init: function init(target, vars, tween, index, targets) {
      var props = this._props,
          style = target.style,
          startAt = tween.vars.startAt,
          startValue,
          endValue,
          endNum,
          startNum,
          type,
          specialProp,
          p,
          startUnit,
          endUnit,
          relative,
          isTransformRelated,
          transformPropTween,
          cache,
          smooth,
          hasPriority,
          inlineProps;
      _pluginInitted || _initCore();
      this.styles = this.styles || _getStyleSaver(target);
      inlineProps = this.styles.props;
      this.tween = tween;

      for (p in vars) {
        if (p === "autoRound") {
          continue;
        }

        endValue = vars[p];

        if (_plugins[p] && _checkPlugin(p, vars, tween, index, target, targets)) {
          continue;
        }

        type = typeof endValue;
        specialProp = _specialProps[p];

        if (type === "function") {
          endValue = endValue.call(tween, index, target, targets);
          type = typeof endValue;
        }

        if (type === "string" && ~endValue.indexOf("random(")) {
          endValue = _replaceRandom(endValue);
        }

        if (specialProp) {
          specialProp(this, target, p, endValue, tween) && (hasPriority = 1);
        } else if (p.substr(0, 2) === "--") {
          startValue = (getComputedStyle(target).getPropertyValue(p) + "").trim();
          endValue += "";
          _colorExp.lastIndex = 0;

          if (!_colorExp.test(startValue)) {
            startUnit = getUnit(startValue);
            endUnit = getUnit(endValue);
          }

          endUnit ? startUnit !== endUnit && (startValue = _convertToUnit(target, p, startValue, endUnit) + endUnit) : startUnit && (endValue += startUnit);
          this.add(style, "setProperty", startValue, endValue, index, targets, 0, 0, p);
          props.push(p);
          inlineProps.push(p, 0, style[p]);
        } else if (type !== "undefined") {
          if (startAt && p in startAt) {
            startValue = typeof startAt[p] === "function" ? startAt[p].call(tween, index, target, targets) : startAt[p];
            _isString(startValue) && ~startValue.indexOf("random(") && (startValue = _replaceRandom(startValue));
            getUnit(startValue + "") || startValue === "auto" || (startValue += _config.units[p] || getUnit(_get(target, p)) || "");
            (startValue + "").charAt(1) === "=" && (startValue = _get(target, p));
          } else {
            startValue = _get(target, p);
          }

          startNum = parseFloat(startValue);
          relative = type === "string" && endValue.charAt(1) === "=" && endValue.substr(0, 2);
          relative && (endValue = endValue.substr(2));
          endNum = parseFloat(endValue);

          if (p in _propertyAliases) {
            if (p === "autoAlpha") {
              if (startNum === 1 && _get(target, "visibility") === "hidden" && endNum) {
                startNum = 0;
              }

              inlineProps.push("visibility", 0, style.visibility);

              _addNonTweeningPT(this, style, "visibility", startNum ? "inherit" : "hidden", endNum ? "inherit" : "hidden", !endNum);
            }

            if (p !== "scale" && p !== "transform") {
              p = _propertyAliases[p];
              ~p.indexOf(",") && (p = p.split(",")[0]);
            }
          }

          isTransformRelated = p in _transformProps;

          if (isTransformRelated) {
            this.styles.save(p);

            if (!transformPropTween) {
              cache = target._gsap;
              cache.renderTransform && !vars.parseTransform || _parseTransform(target, vars.parseTransform);
              smooth = vars.smoothOrigin !== false && cache.smooth;
              transformPropTween = this._pt = new PropTween(this._pt, style, _transformProp, 0, 1, cache.renderTransform, cache, 0, -1);
              transformPropTween.dep = 1;
            }

            if (p === "scale") {
              this._pt = new PropTween(this._pt, cache, "scaleY", cache.scaleY, (relative ? _parseRelative(cache.scaleY, relative + endNum) : endNum) - cache.scaleY || 0, _renderCSSProp);
              this._pt.u = 0;
              props.push("scaleY", p);
              p += "X";
            } else if (p === "transformOrigin") {
              inlineProps.push(_transformOriginProp, 0, style[_transformOriginProp]);
              endValue = _convertKeywordsToPercentages(endValue);

              if (cache.svg) {
                _applySVGOrigin(target, endValue, 0, smooth, 0, this);
              } else {
                endUnit = parseFloat(endValue.split(" ")[2]) || 0;
                endUnit !== cache.zOrigin && _addNonTweeningPT(this, cache, "zOrigin", cache.zOrigin, endUnit);

                _addNonTweeningPT(this, style, p, _firstTwoOnly(startValue), _firstTwoOnly(endValue));
              }

              continue;
            } else if (p === "svgOrigin") {
              _applySVGOrigin(target, endValue, 1, smooth, 0, this);

              continue;
            } else if (p in _rotationalProperties) {
              _addRotationalPropTween(this, cache, p, startNum, relative ? _parseRelative(startNum, relative + endValue) : endValue);

              continue;
            } else if (p === "smoothOrigin") {
              _addNonTweeningPT(this, cache, "smooth", cache.smooth, endValue);

              continue;
            } else if (p === "force3D") {
              cache[p] = endValue;
              continue;
            } else if (p === "transform") {
              _addRawTransformPTs(this, endValue, target);

              continue;
            }
          } else if (!(p in style)) {
            p = _checkPropPrefix(p) || p;
          }

          if (isTransformRelated || (endNum || endNum === 0) && (startNum || startNum === 0) && !_complexExp.test(endValue) && p in style) {
            startUnit = (startValue + "").substr((startNum + "").length);
            endNum || (endNum = 0);
            endUnit = getUnit(endValue) || (p in _config.units ? _config.units[p] : startUnit);
            startUnit !== endUnit && (startNum = _convertToUnit(target, p, startValue, endUnit));
            this._pt = new PropTween(this._pt, isTransformRelated ? cache : style, p, startNum, (relative ? _parseRelative(startNum, relative + endNum) : endNum) - startNum, !isTransformRelated && (endUnit === "px" || p === "zIndex") && vars.autoRound !== false ? _renderRoundedCSSProp : _renderCSSProp);
            this._pt.u = endUnit || 0;

            if (startUnit !== endUnit && endUnit !== "%") {
              this._pt.b = startValue;
              this._pt.r = _renderCSSPropWithBeginning;
            }
          } else if (!(p in style)) {
            if (p in target) {
              this.add(target, p, startValue || target[p], relative ? relative + endValue : endValue, index, targets);
            } else if (p !== "parseTransform") {
              _missingPlugin(p, endValue);

              continue;
            }
          } else {
            _tweenComplexCSSString.call(this, target, p, startValue, relative ? relative + endValue : endValue);
          }

          isTransformRelated || (p in style ? inlineProps.push(p, 0, style[p]) : inlineProps.push(p, 1, startValue || target[p]));
          props.push(p);
        }
      }

      hasPriority && _sortPropTweensByPriority(this);
    },
    render: function render(ratio, data) {
      if (data.tween._time || !_reverting$1()) {
        var pt = data._pt;

        while (pt) {
          pt.r(ratio, pt.d);
          pt = pt._next;
        }
      } else {
        data.styles.revert();
      }
    },
    get: _get,
    aliases: _propertyAliases,
    getSetter: function getSetter(target, property, plugin) {
      var p = _propertyAliases[property];
      p && p.indexOf(",") < 0 && (property = p);
      return property in _transformProps && property !== _transformOriginProp && (target._gsap.x || _get(target, "x")) ? plugin && _recentSetterPlugin === plugin ? property === "scale" ? _setterScale : _setterTransform : (_recentSetterPlugin = plugin || {}) && (property === "scale" ? _setterScaleWithRender : _setterTransformWithRender) : target.style && !_isUndefined(target.style[property]) ? _setterCSSStyle : ~property.indexOf("-") ? _setterCSSProp : _getSetter(target, property);
    },
    core: {
      _removeProperty: _removeProperty,
      _getMatrix: _getMatrix
    }
  };
  gsap.utils.checkPrefix = _checkPropPrefix;
  gsap.core.getStyleSaver = _getStyleSaver;

  (function (positionAndScale, rotation, others, aliases) {
    var all = _forEachName(positionAndScale + "," + rotation + "," + others, function (name) {
      _transformProps[name] = 1;
    });

    _forEachName(rotation, function (name) {
      _config.units[name] = "deg";
      _rotationalProperties[name] = 1;
    });

    _propertyAliases[all[13]] = positionAndScale + "," + rotation;

    _forEachName(aliases, function (name) {
      var split = name.split(":");
      _propertyAliases[split[1]] = all[split[0]];
    });
  })("x,y,z,scale,scaleX,scaleY,xPercent,yPercent", "rotation,rotationX,rotationY,skewX,skewY", "transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective", "0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");

  _forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective", function (name) {
    _config.units[name] = "px";
  });

  gsap.registerPlugin(CSSPlugin);

  var gsapWithCSS = gsap.registerPlugin(CSSPlugin) || gsap,
      TweenMaxWithCSS = gsapWithCSS.core.Tween;

  exports.Back = Back;
  exports.Bounce = Bounce;
  exports.CSSPlugin = CSSPlugin;
  exports.Circ = Circ;
  exports.Cubic = Cubic;
  exports.Elastic = Elastic;
  exports.Expo = Expo;
  exports.Linear = Linear;
  exports.Power0 = Power0;
  exports.Power1 = Power1;
  exports.Power2 = Power2;
  exports.Power3 = Power3;
  exports.Power4 = Power4;
  exports.Quad = Quad;
  exports.Quart = Quart;
  exports.Quint = Quint;
  exports.Sine = Sine;
  exports.SteppedEase = SteppedEase;
  exports.Strong = Strong;
  exports.TimelineLite = Timeline;
  exports.TimelineMax = Timeline;
  exports.TweenLite = Tween;
  exports.TweenMax = TweenMaxWithCSS;
  exports.default = gsapWithCSS;
  exports.gsap = gsapWithCSS;

  if (typeof(window) === 'undefined' || window !== exports) {Object.defineProperty(exports, '__esModule', { value: true });} else {delete window.default;}

})));

},{}],6:[function(require,module,exports){
(function (process){(function (){
/* Mapbox GL JS is Copyright © 2020 Mapbox and subject to the Mapbox Terms of Service ((https://www.mapbox.com/legal/tos/). */
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
typeof define === 'function' && define.amd ? define(factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.mapboxgl = factory());
})(this, (function () { 'use strict';

/* eslint-disable */

var shared, worker, mapboxgl;
// define gets called three times: one for each chunk. we rely on the order
// they're imported to know which is which
function define(_, chunk) {
if (!shared) {
    shared = chunk;
} else if (!worker) {
    worker = chunk;
} else {
    var workerBundleString = "self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; (" + shared + ")(sharedChunk); (" + worker + ")(sharedChunk); self.onerror = null;"

    var sharedChunk = {};
    shared(sharedChunk);
    mapboxgl = chunk(sharedChunk);
    if (typeof window !== 'undefined' && window && window.URL && window.URL.createObjectURL) {
        mapboxgl.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], { type: 'text/javascript' }));
    }
}
}


define(["exports"],(function(t){"use strict";var e="undefined"!=typeof self?self:{},r="2.15.0";let n;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==n){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{n=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t;}catch(e){n=t;}}return n},get API_TILEJSON_REGEX(){return /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return /^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const t=new URL(i.API_URL);return "api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch(t){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},s={supported:!1,testSupport:function(t){!l&&o&&(u?c(t):a=t);}};let a,o,l=!1,u=!1;function c(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.isContextLost())return;s.supported=!0;}catch(t){}t.deleteTexture(e),l=!0;}e.document&&(o=e.document.createElement("img"),o.onload=function(){a&&c(a),a=null,u=!0;},o.onerror=function(){l=!0,a=null;},o.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const h="01";function p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d=f;function f(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=n;}f.prototype={sampleCurveX:function(t){return ((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return ((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return (3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,n=0;n<8;n++){var i=this.sampleCurveX(r)-t;if(Math.abs(i)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=i/s;}var a=0,o=1;for(r=t,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-t)<e));n++)t>i?a=r:o=r,r=.5*(o-a)+a;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var y=p(d),m=g;function g(t,e){this.x=t,this.y=e;}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(t){return t instanceof g?t:Array.isArray(t)?new g(t[0],t[1]):t};var x=p(m);const v=Math.PI/180,b=180/Math.PI;function w(t){return t*v}function _(t){return t*b}const A=[[0,0],[1,0],[1,1],[0,1]];function S(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function k(t,e,r,n){const i=new y(t,e,r,n);return function(t){return i.solve(t)}}const I=k(.25,.1,.25,1);function M(t,e,r){return Math.min(r,Math.max(e,t))}function T(t,e,r){return (r=M((r-t)/(e-t),0,1))*r*(3-2*r)}function z(t,e,r){const n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function B(t,e,r){if(!t.length)return r(null,[]);let n=t.length;const i=new Array(t.length);let s=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(s=t),i[a]=e,0==--n&&r(s,i);}));}));}function E(t){const e=[];for(const r in t)e.push(t[r]);return e}function C(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}let P=1;function D(){return P++}function V(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function L(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function F(t){return !!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function R(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e));}));}function U(t,e){return -1!==t.indexOf(e,t.length-e.length)}function $(t,e,r){const n={};for(const i in t)n[i]=e.call(r||this,t[i],i,t);return n}function j(t,e,r){const n={};for(const i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function O(t){return Array.isArray(t)?t.map(O):"object"==typeof t&&t?$(t,O):t}const q={};function N(t){q[t]||("undefined"!=typeof console&&console.warn(t),q[t]=!0);}function G(t,e,r){return (r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function Z(t){let e=0;for(let r,n,i=0,s=t.length,a=s-1;i<s;a=i++)r=t[i],n=t[a],e+=(n.x-r.x)*(r.y+n.y);return e}function K(){return "undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function X(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,r,n,i)=>{const s=n||i;return e[r]=!s||s.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t;}return e}let J=null;function H(t){if(null==J){const e=t.navigator?t.navigator.userAgent:null;J=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")));}return J}function Y(t){try{const r=e[t];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch(t){return !1}}function W(t,e){return [t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const Q="mapbox-tiles";let tt=500,et=50;let rt,nt;function it(){try{return e.caches}catch(t){}}function st(){it()&&!rt&&(rt=e.caches.open(Q));}function at(t){const e=t.indexOf("?");if(e<0)return t;const r=function(t){const e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}(t),n=r.filter((t=>{const e=t.split("=");return "language"===e[0]||"worldview"===e[0]}));return n.length?`${t.slice(0,e)}?${n.join("&")}`:t.slice(0,e)}let ot=1/0;const lt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(lt);class ut extends Error{constructor(t,e,r){401===e&&bt(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=r;}toString(){return `${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ct=K()?()=>self.worker&&self.worker.referrer:()=>("blob:"===e.location.protocol?e.parent:e).location.href;const ht=function(t,r){if(!(/^file:/.test(n=t.url)||/^file:/.test(ct())&&!/^\w+:/.test(n))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty("signal"))return function(t,r){const n=new e.AbortController,i=new e.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:ct(),referrerPolicy:t.referrerPolicy,signal:n.signal});let s=!1,a=!1;const o=(l=i.url).indexOf("sku=")>0&&bt(l);var l;"json"===t.type&&i.headers.set("Accept","application/json");const u=(n,s,l)=>{if(a)return;if(n&&"SecurityError"!==n.message&&N(n.toString()),s&&l)return c(s);const u=Date.now();e.fetch(i).then((e=>{if(e.ok){const t=o?e.clone():null;return c(e,t,u)}return r(new ut(e.statusText,e.status,t.url))})).catch((e=>{"AbortError"!==e.name&&r(new Error(`${e.message} ${t.url}`));}));},c=(n,o,l)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{a||(o&&l&&function(t,r,n){if(st(),!rt)return;const i={status:r.status,statusText:r.statusText,headers:new e.Headers};r.headers.forEach(((t,e)=>i.headers.set(e,t)));const s=X(r.headers.get("Cache-Control")||"");if(s["no-store"])return;s["max-age"]&&i.headers.set("Expires",new Date(n+1e3*s["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(t,e){if(void 0===nt)try{new Response(new ReadableStream),nt=!0;}catch(t){nt=!1;}nt?e(t.body):t.blob().then(e);}(r,(r=>{const n=new e.Response(r,i);st(),rt&&rt.then((e=>e.put(at(t.url),n))).catch((t=>N(t.message)));})));}(i,o,l),s=!0,r(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")));})).catch((t=>{a||r(new Error(t.message));}));};return o?function(t,e){if(st(),!rt)return e(null);const r=at(t.url);rt.then((t=>{t.match(r).then((n=>{const i=function(t){if(!t)return !1;const e=new Date(t.headers.get("Expires")||0),r=X(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(n);t.delete(r),i&&t.put(r,n.clone()),e(null,n,i);})).catch(e);})).catch(e);}(i,u):u(null,null),{cancel:()=>{a=!0,s||n.abort();}}}(t,r);if(K()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,r,void 0,!0)}var n;return function(t,r){const n=new e.XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return "json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{r(new Error(n.statusText));},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let e=n.response;if("json"===t.type)try{e=JSON.parse(n.response);}catch(t){return r(t)}r(null,e,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"));}else r(new ut(n.statusText,n.status,t.url));},n.send(t.body),{cancel:()=>n.abort()}}(t,r)},pt=function(t,e){return ht(C(t,{type:"arrayBuffer"}),e)};function dt(t){const r=e.document.createElement("a");return r.href=t,r.protocol===e.document.location.protocol&&r.host===e.document.location.host}const ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let yt,mt;yt=[],mt=0;const gt=function(t,r){if(s.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),mt>=i.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:r,cancelled:!1,cancel(){this.cancelled=!0;}};return yt.push(e),e}mt++;let n=!1;const a=()=>{if(!n)for(n=!0,mt--;yt.length&&mt<i.MAX_PARALLEL_IMAGE_REQUESTS;){const t=yt.shift(),{requestParameters:e,callback:r,cancelled:n}=t;n||(t.cancel=gt(e,r).cancel);}},o=pt(t,((t,n,i,s)=>{a(),t?r(t):n&&(e.createImageBitmap?function(t,r){const n=new e.Blob([new Uint8Array(t)],{type:"image/png"});e.createImageBitmap(n).then((t=>{r(null,t);})).catch((t=>{r(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`));}));}(n,((t,e)=>r(t,e,i,s))):function(t,r){const n=new e.Image,i=e.URL;n.onload=()=>{r(null,n),i.revokeObjectURL(n.src),n.onload=null,e.requestAnimationFrame((()=>{n.src=ft;}));},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const s=new e.Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?i.createObjectURL(s):ft;}(n,((t,e)=>r(t,e,i,s))));}));return {cancel:()=>{o.cancel(),a();}}},xt="NO_ACCESS_TOKEN";function vt(t){return 0===t.indexOf("mapbox:")}function bt(t){return i.API_URL_REGEX.test(t)}function wt(t){return i.API_CDN_URL_REGEX.test(t)}function _t(t){return i.API_STYLE_REGEX.test(t)&&!At(t)}function At(t){return i.API_SPRITE_REGEX.test(t)}const St=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function kt(t){const e=t.match(St);if(!e)throw new Error("Unable to parse URL object");return {protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function It(t){const e=t.params.length?`?${t.params.join("&")}`:"";return `${t.protocol}://${t.authority}${t.path}${e}`}const Mt="mapbox.eventData";function Tt(t){if(!t)return null;const r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(r[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class zt{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null;}getStorageKey(t){const r=Tt(i.ACCESS_TOKEN);let n="";return n=r&&r.u?e.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):i.ACCESS_TOKEN||"",t?`${Mt}.${t}:${n}`:`${Mt}:${n}`}fetchEventData(){const t=Y("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{const t=e.localStorage.getItem(r);t&&(this.eventData=JSON.parse(t));const i=e.localStorage.getItem(n);i&&(this.anonId=i);}catch(t){N("Unable to read from LocalStorage");}}saveEventData(){const t=Y("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{e.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(r,JSON.stringify(this.eventData));}catch(t){N("Unable to write to LocalStorage");}}processRequests(t){}postEvent(t,e,r,n){if(!i.EVENTS_URL)return;const s=kt(i.EVENTS_URL);s.params.push(`access_token=${n||i.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(t).toISOString()},o=e?C(a,e):a,l={url:It(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([o])};this.pendingRequest=function(t,e){return ht(C(t,{method:"POST"}),e)}(l,(t=>{this.pendingRequest=null,r(t),this.saveEventData(),this.processRequests(n);}));}queueRequest(t,e){this.queue.push(t),this.processRequests(e);}}const Bt=new class extends zt{constructor(t){super("appUserTurnstile"),this._customAccessToken=t;}postTurnstileEvent(t,e){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>vt(t)||bt(t)))&&this.queueRequest(Date.now(),e);}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Tt(i.ACCESS_TOKEN),n=e?e.u:i.ACCESS_TOKEN;let s=n!==this.eventData.tokenU;F(this.anonId)||(this.anonId=V(),s=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(a),r=(a-this.eventData.lastSuccess)/864e5;s=s||r>=1||r<-1||t.getDate()!==e.getDate();}else s=!0;s?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:h,"enabled.telemetry":!1,userId:this.anonId},(t=>{t||(this.eventData.lastSuccess=a,this.eventData.tokenU=n);}),t):this.processRequests();}},Et=Bt.postTurnstileEvent.bind(Bt),Ct=new class extends zt{constructor(){super("map.load"),this.success={},this.skuToken="";}postMapLoadEvent(t,e,r,n){this.skuToken=e,this.errorCb=n,i.EVENTS_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(xt)));}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),F(this.anonId)||(this.anonId=V()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:h,skuToken:this.skuToken,userId:this.anonId},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0);}),t));}},Pt=Ct.postMapLoadEvent.bind(Ct),Dt=new class extends zt{constructor(){super("gljs.performance");}postPerformanceEvent(t,e){i.EVENTS_URL&&(t||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t);}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:i}=this.queue.shift(),s=function(t){const n=e.performance.getEntriesByType("resource"),i=e.performance.getEntriesByType("mark"),s=function(t){const e={};if(t)for(const r in t)if("other"!==r)for(const n of t[r]){const t=`${r}ResolveRangeMin`,i=`${r}ResolveRangeMax`,s=`${r}RequestCount`,a=`${r}RequestCachedCount`;e[t]=Math.min(e[t]||1/0,n.startTime),e[i]=Math.max(e[i]||-1/0,n.responseEnd);const o=t=>{void 0===e[t]&&(e[t]=0),++e[t];};void 0!==n.transferSize&&0===n.transferSize&&o(a),o(s);}return e}(function(t,e){const r={};if(t)for(const n of t){const t=e(n);void 0===r[t]&&(r[t]=[]),r[t].push(n);}return r}(n,jt)),a=e.devicePixelRatio,o=e.navigator.connection||e.navigator.mozConnection||e.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},u=(t,e,r)=>{null!=r&&t.push({name:e,value:r.toString()});};for(const t in s)u(l.counters,t,s[t]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(u(l.counters,"interactionRangeMin",t.interactionRange[0]),u(l.counters,"interactionRangeMax",t.interactionRange[1])),i)for(const t of Object.keys(Ut)){const e=Ut[t],r=i.find((t=>t.name===e));r&&u(l.counters,e,r.startTime);}return u(l.counters,"visibilityHidden",t.visibilityHidden),u(l.attributes,"style",function(t){if(t)for(const e of t){const t=e.name.split("?")[0];if(_t(t)){const e=t.split("/").slice(-2);if(2===e.length)return `mapbox://styles/${e[0]}/${e[1]}`}}}(n)),u(l.attributes,"terrainEnabled",t.terrainEnabled?"true":"false"),u(l.attributes,"fogEnabled",t.fogEnabled?"true":"false"),u(l.attributes,"projection",t.projection),u(l.attributes,"zoom",t.zoom),u(l.metadata,"devicePixelRatio",a),u(l.metadata,"connectionEffectiveType",o?o.effectiveType:void 0),u(l.metadata,"navigatorUserAgent",e.navigator.userAgent),u(l.metadata,"screenWidth",e.screen.width),u(l.metadata,"screenHeight",e.screen.height),u(l.metadata,"windowWidth",e.innerWidth),u(l.metadata,"windowHeight",e.innerHeight),u(l.metadata,"mapWidth",t.width/a),u(l.metadata,"mapHeight",t.height/a),u(l.metadata,"webglRenderer",t.renderer),u(l.metadata,"webglVendor",t.vendor),u(l.metadata,"sdkVersion",r),u(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const t of s.metadata);for(const t of s.counters);for(const t of s.attributes);this.postEvent(n,s,(()=>{}),t);}},Vt=Dt.postPerformanceEvent.bind(Dt),Lt=new class extends zt{constructor(){super("map.auth"),this.success={},this.skuToken="";}getSession(t,e,r,n){if(!i.API_URL||!i.SESSION_PATH)return;const s=kt(i.API_URL+i.SESSION_PATH);s.params.push(`sku=${e||""}`),s.params.push(`access_token=${n||i.ACCESS_TOKEN||""}`);const a={url:It(s),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(t,e){return ht(C(t,{method:"GET"}),e)}(a,(t=>{this.pendingRequest=null,r(t),this.saveEventData(),this.processRequests(n);}));}getSessionAPI(t,e,r,n){this.skuToken=e,this.errorCb=n,i.SESSION_PATH&&i.API_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(xt)));}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0);}),t);}},Ft=Lt.getSessionAPI.bind(Lt),Rt=new Set,Ut={create:"create",load:"load",fullLoad:"fullLoad"},$t={mark(t){e.performance.mark(t);},measure(t,r,n){e.performance.measure(t,r,n);}};function jt(t){const e=t.name.split("?")[0];return wt(e)&&e.includes("mapbox-gl.js")?"javascript":wt(e)&&e.includes("mapbox-gl.css")?"css":function(t){return i.API_FONTS_REGEX.test(t)}(e)?"fontRange":At(e)?"sprite":_t(e)?"style":function(t){return i.API_TILEJSON_REGEX.test(t)}(e)?"tilejson":"other"}const Ot=e.performance;function qt(t){const e=t?t.url.toString():void 0;return Ot.getEntriesByName(e)}let Nt,Gt,Zt,Kt;const Xt={now:()=>void 0!==Zt?Zt:e.performance.now(),setNow(t){Zt=t;},restoreNow(){Zt=void 0;},frame(t){const r=e.requestAnimationFrame(t);return {cancel:()=>e.cancelAnimationFrame(r)}},getImageData(t,r=0){const{width:n,height:i}=t;Kt||(Kt=e.document.createElement("canvas"));const s=Kt.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return (n>Kt.width||i>Kt.height)&&(Kt.width=n,Kt.height=i),s.clearRect(-r,-r,n+2*r,i+2*r),s.drawImage(t,0,0,n,i),s.getImageData(-r,-r,n+2*r,i+2*r)},resolveURL:t=>(Nt||(Nt=e.document.createElement("a")),Nt.href=t,Nt.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return !!e.matchMedia&&(null==Gt&&(Gt=e.matchMedia("(prefers-reduced-motion: reduce)")),Gt.matches)}};function Jt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e));}function Ht(t,e,r){if(r&&r[t]){const n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1);}}class Yt{constructor(t,e={}){C(this,e),this.type=t;}}class Wt extends Yt{constructor(t,e={}){super("error",C({error:t},e));}}class Qt{on(t,e){return this._listeners=this._listeners||{},Jt(t,e,this._listeners),this}off(t,e){return Ht(t,e,this._listeners),Ht(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Jt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Yt(t,e||{}));const r=t.type;if(this.listens(r)){t.target=this;const e=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of e)r.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const e of n)Ht(r,e,this._oneTimeListeners),e.call(this,t);const i=this._eventedParent;i&&(C(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t));}else t instanceof Wt&&console.error(t.error);return this}listens(t){return !!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var te=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ee(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}function re(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ne(t){if(Array.isArray(t))return t.map(ne);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=ne(t[r]);return e}return re(t)}class ie extends Error{constructor(t,e){super(e),this.message=e,this.key=t;}}var se=ie;class ae{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,r]of e)this.bindings[t]=r;}concat(t){return new ae(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return !!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var oe=ae;const le={kind:"null"},ue={kind:"number"},ce={kind:"string"},he={kind:"boolean"},pe={kind:"color"},de={kind:"object"},fe={kind:"value"},ye={kind:"collator"},me={kind:"formatted"},ge={kind:"resolvedImage"};function xe(t,e){return {kind:"array",itemType:t,N:e}}function ve(t){if("array"===t.kind){const e=ve(t.itemType);return "number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const be=[le,ue,ce,he,pe,me,de,xe(fe),ge];function we(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!we(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else {if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of be)if(!we(t,e))return null}return `Expected ${ve(t)} but found ${ve(e)} instead.`}function _e(t,e){return e.some((e=>e.kind===t.kind))}function Ae(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Se,ke={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ie(t){return (t=Math.round(t))<0?0:t>255?255:t}function Me(t){return Ie("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Te(t){return (e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e;}function ze(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{Se={}.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in ke)return ke[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var s=r.substr(0,n),a=r.substr(n+1,i-(n+1)).split(","),o=1;switch(s){case"rgba":if(4!==a.length)return null;o=Te(a.pop());case"rgb":return 3!==a.length?null:[Me(a[0]),Me(a[1]),Me(a[2]),o];case"hsla":if(4!==a.length)return null;o=Te(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Te(a[1]),c=Te(a[2]),h=c<=.5?c*(u+1):c+u-c*u,p=2*c-h;return [Ie(255*ze(p,h,l+1/3)),Ie(255*ze(p,h,l)),Ie(255*ze(p,h,l-1/3)),o];default:return null}}return null};}catch(t){}class Be{constructor(t,e,r,n=1){this.r=t,this.g=e,this.b=r,this.a=n;}static parse(t){if(!t)return;if(t instanceof Be)return t;if("string"!=typeof t)return;const e=Se(t);return e?new Be(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,n]=this.toArray();return `rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${n})`}toArray(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}toArray01(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[t/n,e/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:r,a:n}=this;return [t,e,r,n]}}Be.black=new Be(0,0,0,1),Be.white=new Be(1,1,1,1),Be.transparent=new Be(0,0,0,0),Be.red=new Be(1,0,0,1),Be.blue=new Be(0,0,1,1);var Ee=Be;class Ce{constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"});}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pe{constructor(t,e,r,n,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i;}}class De{constructor(t){this.sections=t;}static fromString(t){return new De([new Pe(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof De?t:De.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const r={};e.fontStack&&(r["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(r["font-scale"]=e.scale),e.textColor&&(r["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(r);}return t}}class Ve{constructor(t){this.name=t.name,this.available=t.available;}toString(){return this.name}static fromString(t){return t?new Ve({name:t,available:!1}):null}serialize(){return ["image",this.name]}}function Le(t,e,r,n){return "number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fe(t){if(null===t)return !0;if("string"==typeof t)return !0;if("boolean"==typeof t)return !0;if("number"==typeof t)return !0;if(t instanceof Ee)return !0;if(t instanceof Ce)return !0;if(t instanceof De)return !0;if(t instanceof Ve)return !0;if(Array.isArray(t)){for(const e of t)if(!Fe(e))return !1;return !0}if("object"==typeof t){for(const e in t)if(!Fe(t[e]))return !1;return !0}return !1}function Re(t){if(null===t)return le;if("string"==typeof t)return ce;if("boolean"==typeof t)return he;if("number"==typeof t)return ue;if(t instanceof Ee)return pe;if(t instanceof Ce)return ye;if(t instanceof De)return me;if(t instanceof Ve)return ge;if(Array.isArray(t)){const e=t.length;let r;for(const e of t){const t=Re(e);if(r){if(r===t)continue;r=fe;break}r=t;}return xe(r||fe,e)}return de}function Ue(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ee||t instanceof De||t instanceof Ve?t.toString():JSON.stringify(t)}class $e{constructor(t,e){this.type=t,this.value=e;}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fe(t[1]))return e.error("invalid value");const r=t[1];let n=Re(r);const i=e.expectedType;return "array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new $e(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return !0}serialize(){return "array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ee?["rgba"].concat(this.value.toArray()):this.value instanceof De?this.value.serialize():this.value}}var je=$e,Oe=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t;}toJSON(){return this.message}};const qe={string:ce,number:ue,boolean:he,object:de};class Ne{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r,n=1;const i=t[0];if("array"===i){let i,s;if(t.length>2){const r=t[1];if("string"!=typeof r||!(r in qe)||"object"===r)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=qe[r],n++;}else i=fe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);s=t[2],n++;}r=xe(i,s);}else r=qe[i];const s=[];for(;n<t.length;n++){const r=e.parse(t[n],n,fe);if(!r)return null;s.push(r);}return new Ne(r,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!we(this.type,Re(r)))return r;if(e===this.args.length-1)throw new Oe(`Expected value to be of type ${ve(this.type)}, but found ${ve(Re(r))} instead.`)}return null}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n);}}return e.concat(this.args.map((t=>t.serialize())))}}var Ge=Ne;class Ze{constructor(t){this.type=me,this.sections=t;}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=t.length-1;++r){const s=t[r];if(i&&"object"==typeof s&&!Array.isArray(s)){i=!1;let t=null;if(s["font-scale"]&&(t=e.parse(s["font-scale"],1,ue),!t))return null;let r=null;if(s["text-font"]&&(r=e.parse(s["text-font"],1,xe(ce)),!r))return null;let a=null;if(s["text-color"]&&(a=e.parse(s["text-color"],1,pe),!a))return null;const o=n[n.length-1];o.scale=t,o.font=r,o.textColor=a;}else {const s=e.parse(t[r],1,fe);if(!s)return null;const a=s.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:s,scale:null,font:null,textColor:null});}}return new Ze(n)}evaluate(t){return new De(this.sections.map((e=>{const r=e.content.evaluate(t);return Re(r)===ge?new Pe("",r,null,null,null):new Pe(Ue(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor);}outputDefined(){return !1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r["font-scale"]=e.scale.serialize()),e.font&&(r["text-font"]=e.font.serialize()),e.textColor&&(r["text-color"]=e.textColor.serialize()),t.push(r);}return t}}class Ke{constructor(t){this.type=ge,this.input=t;}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,ce);return r?new Ke(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=Ve.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input);}outputDefined(){return !1}serialize(){return ["image",this.input.serialize()]}}const Xe={"to-boolean":he,"to-color":pe,"to-number":ue,"to-string":ce};class Je{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");const n=Xe[r],i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],r,fe);if(!n)return null;i.push(n);}return new Je(n,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof Ee)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Le(e[0],e[1],e[2],e[3]),!r))return new Ee(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Oe(r||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Oe(`Could not convert ${JSON.stringify(e)} to number.`)}return "formatted"===this.type.kind?De.fromString(Ue(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Ve.fromString(Ue(this.args[0].evaluate(t))):Ue(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Ze([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ke(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize());})),t}}var He=Je;const Ye=["Unknown","Point","LineString","Polygon"];var We=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null;}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ye[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-t[0])+this.featureDistanceData.bearing[1]*(n*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ee.parse(t)),e}};class Qe{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n;}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t);}outputDefined(){return !1}serialize(){return [this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const r=t[0],n=Qe.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,s=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=s.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let o=null;for(const[n,s]of a){o=new Ir(e.registry,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(n)?n[e-1]:n.type,s=o.parse(r,1+a.length,i);if(!s){l=!0;break}a.push(s);}if(!l)if(Array.isArray(n)&&n.length!==a.length)o.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else {for(let t=0;t<a.length;t++){const e=Array.isArray(n)?n[t]:n.type,r=a[t];o.concat(t+1).checkSubtype(e,r.type);}if(0===o.errors.length)return new Qe(r,i,s,a)}}if(1===a.length)e.errors.push(...o.errors);else {const r=(a.length?a:s).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(ve).join(", ")})`:`(${ve(e.type)}...)`;var e;})).join(" | "),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(ve(i.type));}e.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`);}return null}static register(t,e){Qe.definitions=e;for(const r in e)t[r]=Qe;}}var tr=Qe;class er{constructor(t,e,r){this.type=ye,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e;}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,he);if(!n)return null;const i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,he);if(!i)return null;let s=null;return r.locale&&(s=e.parse(r.locale,1,ce),!s)?null:new er(n,i,s)}evaluate(t){return new Ce(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale);}outputDefined(){return !1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const rr=8192;function nr(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1]);}function ir(t,e){return !(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function sr(t,e){const r=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return [Math.round(r*i*rr),Math.round(n*i*rr)]}function ar(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],s=t[0]-r[0],a=t[1]-r[1];return n*a-s*i==0&&n*s<=0&&i*a<=0}function or(t,e){let r=!1;for(let a=0,o=e.length;a<o;a++){const o=e[a];for(let e=0,a=o.length;e<a-1;e++){if(ar(t,o[e],o[e+1]))return !1;(i=o[e])[1]>(n=t)[1]!=(s=o[e+1])[1]>n[1]&&n[0]<(s[0]-i[0])*(n[1]-i[1])/(s[1]-i[1])+i[0]&&(r=!r);}}var n,i,s;return r}function lr(t,e){for(let r=0;r<e.length;r++)if(or(t,e[r]))return !0;return !1}function ur(t,e,r,n){const i=n[0]-r[0],s=n[1]-r[1],a=(t[0]-r[0])*s-i*(t[1]-r[1]),o=(e[0]-r[0])*s-i*(e[1]-r[1]);return a>0&&o<0||a<0&&o>0}function cr(t,e,r){for(const u of r)for(let r=0;r<u.length-1;++r)if(0!=(o=[(a=u[r+1])[0]-(s=u[r])[0],a[1]-s[1]])[0]*(l=[(i=e)[0]-(n=t)[0],i[1]-n[1]])[1]-o[1]*l[0]&&ur(n,i,s,a)&&ur(s,a,n,i))return !0;var n,i,s,a,o,l;return !1}function hr(t,e){for(let r=0;r<t.length;++r)if(!or(t[r],e))return !1;for(let r=0;r<t.length-1;++r)if(cr(t[r],t[r+1],e))return !1;return !0}function pr(t,e){for(let r=0;r<e.length;r++)if(hr(t,e[r]))return !0;return !1}function dr(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=[];for(let n=0;n<t[i].length;n++){const a=sr(t[i][n],r);nr(e,a),s.push(a);}n.push(s);}return n}function fr(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=dr(t[i],e,r);n.push(s);}return n}function yr(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i;}nr(e,t);}function mr(t,e,r,n){const i=Math.pow(2,n.z)*rr,s=[n.x*rr,n.y*rr],a=[];if(!t)return a;for(const n of t)for(const t of n){const n=[t.x+s[0],t.y+s[1]];yr(n,e,r,i),a.push(n);}return a}function gr(t,e,r,n){const i=Math.pow(2,n.z)*rr,s=[n.x*rr,n.y*rr],a=[];if(!t)return a;for(const r of t){const t=[];for(const n of r){const r=[n.x+s[0],n.y+s[1]];nr(e,r),t.push(r);}a.push(t);}if(e[2]-e[0]<=i/2){(o=e)[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(const t of a)for(const n of t)yr(n,e,r,i);}var o;return a}class xr{constructor(t,e){this.type=he,this.geojson=t,this.geometries=e;}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fe(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const r=e.features[t].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new xr(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new xr(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new xr(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return !1;if("Polygon"===e.type){const s=dr(e.coordinates,n,i),a=mr(t.geometry(),r,n,i);if(!ir(r,n))return !1;for(const t of a)if(!or(t,s))return !1}if("MultiPolygon"===e.type){const s=fr(e.coordinates,n,i),a=mr(t.geometry(),r,n,i);if(!ir(r,n))return !1;for(const t of a)if(!lr(t,s))return !1}return !0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return !1;if("Polygon"===e.type){const s=dr(e.coordinates,n,i),a=gr(t.geometry(),r,n,i);if(!ir(r,n))return !1;for(const t of a)if(!hr(t,s))return !1}if("MultiPolygon"===e.type){const s=fr(e.coordinates,n,i),a=gr(t.geometry(),r,n,i);if(!ir(r,n))return !1;for(const t of a)if(!pr(t,s))return !1}return !0}(t,this.geometries)}return !1}eachChild(){}outputDefined(){return !0}serialize(){return ["within",this.geojson]}}var vr=xr;function br(t){if(t instanceof tr){if("get"===t.name&&1===t.args.length)return !1;if("feature-state"===t.name)return !1;if("has"===t.name&&1===t.args.length)return !1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return !1;if(/^filter-/.test(t.name))return !1}if(t instanceof vr)return !1;let e=!0;return t.eachChild((t=>{e&&!br(t)&&(e=!1);})),e}function wr(t){if(t instanceof tr&&"feature-state"===t.name)return !1;let e=!0;return t.eachChild((t=>{e&&!wr(t)&&(e=!1);})),e}function _r(t,e){if(t instanceof tr&&e.indexOf(t.name)>=0)return !1;let r=!0;return t.eachChild((t=>{r&&!_r(t,e)&&(r=!1);})),r}class Ar{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e;}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new Ar(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return !1}serialize(){return ["var",this.name]}}var Sr=Ar;class kr{constructor(t,e=[],r,n=new oe,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=n,this.errors=i,this.expectedType=r;}parse(t,e,r,n,i={}){return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}_parse(t,e){function r(t,e,r){return "assert"===r?new Ge(e,[t]):"coerce"===r?new He(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,i=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else n=r(n,t,e.typeAnnotation||"coerce");else n=r(n,t,e.typeAnnotation||"assert");}if(!(n instanceof je)&&"resolvedImage"!==n.type.kind&&Mr(n)){const t=new We;try{n=new je(n.type,n.evaluate(t));}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new kr(this.registry,n,e||null,i,this.errors)}error(t,...e){const r=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new se(r,t));}checkSubtype(t,e){const r=we(t,e);return r&&this.error(r),r}}var Ir=kr;function Mr(t){if(t instanceof Sr)return Mr(t.boundExpression);if(t instanceof tr&&"error"===t.name)return !1;if(t instanceof er)return !1;if(t instanceof vr)return !1;const e=t instanceof He||t instanceof Ge;let r=!0;return t.eachChild((t=>{r=e?r&&Mr(t):r&&t instanceof je;})),!!r&&br(t)&&_r(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Tr(t,e){const r=t.length-1;let n,i,s=0,a=r,o=0;for(;s<=a;)if(o=Math.floor((s+a)/2),n=t[o],i=t[o+1],n<=e){if(o===r||e<i)return o;s=o+1;}else {if(!(n>e))throw new Oe("Input is not a number.");a=o-1;}return 0}class zr{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e);}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,ue);if(!r)return null;const n=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let r=1;r<t.length;r+=2){const s=1===r?-1/0:t[r],a=t[r+1],o=r,l=r+1;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',o);if(n.length&&n[n.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',o);const u=e.parse(a,l,i);if(!u)return null;i=i||u.type,n.push([s,u]);}return new zr(i,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[Tr(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Br=zr;function Er(t,e,r){return t*(1-r)+e*r}var Cr=Object.freeze({__proto__:null,array:function(t,e,r){return t.map(((t,n)=>Er(t,e[n],r)))},color:function(t,e,r){return new Ee(Er(t.r,e.r,r),Er(t.g,e.g,r),Er(t.b,e.b,r),Er(t.a,e.a,r))},number:Er});const Pr=.95047,Dr=1.08883,Vr=4/29,Lr=6/29,Fr=3*Lr*Lr,Rr=Lr*Lr*Lr,Ur=Math.PI/180,$r=180/Math.PI;function jr(t){return t>Rr?Math.pow(t,1/3):t/Fr+Vr}function Or(t){return t>Lr?t*t*t:Fr*(t-Vr)}function qr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Nr(t){return (t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Gr(t){const e=Nr(t.r),r=Nr(t.g),n=Nr(t.b),i=jr((.4124564*e+.3575761*r+.1804375*n)/Pr),s=jr((.2126729*e+.7151522*r+.072175*n)/1);return {l:116*s-16,a:500*(i-s),b:200*(s-jr((.0193339*e+.119192*r+.9503041*n)/Dr)),alpha:t.a}}function Zr(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Or(e),r=Pr*Or(r),n=Dr*Or(n),new Ee(qr(3.2404542*r-1.5371385*e-.4985314*n),qr(-.969266*r+1.8760108*e+.041556*n),qr(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function Kr(t,e,r){const n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const Xr={forward:Gr,reverse:Zr,interpolate:function(t,e,r){return {l:Er(t.l,e.l,r),a:Er(t.a,e.a,r),b:Er(t.b,e.b,r),alpha:Er(t.alpha,e.alpha,r)}}},Jr={forward:function(t){const{l:e,a:r,b:n}=Gr(t),i=Math.atan2(n,r)*$r;return {h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Ur,r=t.c;return Zr({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return {h:Kr(t.h,e.h,r),c:Er(t.c,e.c,r),l:Er(t.l,e.l,r),alpha:Er(t.alpha,e.alpha,r)}}};var Hr=Object.freeze({__proto__:null,hcl:Jr,lab:Xr});class Yr{constructor(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e);}static interpolationFactor(t,e,r,n){let i=0;if("exponential"===t.name)i=Wr(e,t.base,r,n);else if("linear"===t.name)i=Wr(e,1,r,n);else if("cubic-bezier"===t.name){const s=t.controlPoints;i=new y(s[0],s[1],s[2],s[3]).solve(Wr(e,1,r,n));}return i}static parse(t,e){let[r,n,i,...s]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t};}else {if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t};}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,ue),!i)return null;const a=[];let o=null;"interpolate-hcl"===r||"interpolate-lab"===r?o=pe:e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(let t=0;t<s.length;t+=2){const r=s[t],n=s[t+1],i=t+3,l=t+4;if("number"!=typeof r)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const u=e.parse(n,l,o);if(!u)return null;o=o||u.type,a.push([r,u]);}return "number"===o.kind||"color"===o.kind||"array"===o.kind&&"number"===o.itemType.kind&&"number"==typeof o.N?new Yr(o,r,n,i,a):e.error(`Type ${ve(o)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);const s=Tr(e,n),a=Yr.interpolationFactor(this.interpolation,n,e[s],e[s+1]),o=r[s].evaluate(t),l=r[s+1].evaluate(t);return "interpolate"===this.operator?Cr[this.type.kind.toLowerCase()](o,l,a):"interpolate-hcl"===this.operator?Jr.reverse(Jr.interpolate(Jr.forward(o),Jr.forward(l),a)):Xr.reverse(Xr.interpolate(Xr.forward(o),Xr.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function Wr(t,e,r,n){const i=n-r,s=t-r;return 0===i?0:1===e?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}var Qr=Yr;class tn{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let r=null;const n=e.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const n of t.slice(1)){const t=e.parse(n,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!t)return null;r=r||t.type,i.push(t);}const s=n&&i.some((t=>we(n,t.type)));return new tn(s?fe:r,i)}evaluate(t){let e,r=null,n=0;for(const i of this.args){if(n++,r=i.evaluate(t),r&&r instanceof Ve&&!r.available&&(e||(e=r),r=null,n===this.args.length))return e;if(null!==r)break}return r}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize());})),t}}var en=tn;class rn{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e;}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result);}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let n=1;n<t.length-1;n+=2){const i=t[n];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const s=e.parse(t[n+1],n+1);if(!s)return null;r.push([i,s]);}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new rn(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,r]of this.bindings)t.push(e,r.serialize());return t.push(this.result.serialize()),t}}var nn=rn;class sn{constructor(t,e,r){this.type=t,this.index=e,this.input=r;}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,ue),n=e.parse(t[2],2,xe(e.expectedType||fe));return r&&n?new sn(n.type.itemType,r,n):null}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Oe(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new Oe(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new Oe(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input);}outputDefined(){return !1}serialize(){return ["at",this.index.serialize(),this.input.serialize()]}}var an=sn;class on{constructor(t,e){this.type=he,this.needle=t,this.haystack=e;}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,fe),n=e.parse(t[2],2,fe);return r&&n?_e(r.type,[he,ce,ue,le,fe])?new on(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ve(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return !1;if(!Ae(e,["boolean","string","number","null"]))throw new Oe(`Expected first argument to be of type boolean, string, number or null, but found ${ve(Re(e))} instead.`);if(!Ae(r,["string","array"]))throw new Oe(`Expected second argument to be of type array or string, but found ${ve(Re(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack);}outputDefined(){return !0}serialize(){return ["in",this.needle.serialize(),this.haystack.serialize()]}}var ln=on;class un{constructor(t,e,r){this.type=ue,this.needle=t,this.haystack=e,this.fromIndex=r;}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,fe),n=e.parse(t[2],2,fe);if(!r||!n)return null;if(!_e(r.type,[he,ce,ue,le,fe]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ve(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,ue);return i?new un(r,n,i):null}return new un(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!Ae(e,["boolean","string","number","null"]))throw new Oe(`Expected first argument to be of type boolean, string, number or null, but found ${ve(Re(e))} instead.`);if(!Ae(r,["string","array"]))throw new Oe(`Expected second argument to be of type array or string, but found ${ve(Re(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex);}outputDefined(){return !1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return ["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return ["index-of",this.needle.serialize(),this.haystack.serialize()]}}var cn=un;class hn{constructor(t,e,r,n,i,s){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=s;}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i={},s=[];for(let a=2;a<t.length-1;a+=2){let o=t[a];const l=t[a+1];Array.isArray(o)||(o=[o]);const u=e.concat(a);if(0===o.length)return u.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,Re(t)))return null}else r=Re(t);if(void 0!==i[String(t)])return u.error("Branch labels must be unique.");i[String(t)]=s.length;}const c=e.parse(l,a,n);if(!c)return null;n=n||c.type,s.push(c);}const a=e.parse(t[1],1,fe);if(!a)return null;const o=e.parse(t[t.length-1],t.length-1,n);return o?"value"!==a.type.kind&&e.concat(1).checkSubtype(r,a.type)?null:new hn(r,n,a,i,s,o):null}evaluate(t){const e=this.input.evaluate(t);return (Re(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),r=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=r.length,r.push([this.cases[t],[t]])):r[e][1].push(t);}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,n]of r)t.push(1===n.length?i(n[0]):n.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}var pn=hn;class dn{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r;}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n=[];for(let i=1;i<t.length-1;i+=2){const s=e.parse(t[i],i,he);if(!s)return null;const a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([s,a]),r=r||a.type;}const i=e.parse(t[t.length-1],t.length-1,r);return i?new dn(r,n,i):null}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise);}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize());})),t}}var fn=dn;class yn{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n;}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,fe),n=e.parse(t[2],2,ue);if(!r||!n)return null;if(!_e(r.type,[xe(fe),ce,fe]))return e.error(`Expected first argument to be of type array or string, but found ${ve(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,ue);return i?new yn(r.type,r,n,i):null}return new yn(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!Ae(e,["string","array"]))throw new Oe(`Expected first argument to be of type array or string, but found ${ve(Re(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex);}outputDefined(){return !1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return ["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return ["slice",this.input.serialize(),this.beginIndex.serialize()]}}var mn=yn;function gn(t,e){return "=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function xn(t,e,r,n){return 0===n.compare(e,r)}function vn(t,e,r){const n="=="!==t&&"!="!==t;return class i{constructor(t,e,r){this.type=he,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind;}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const r=t[0];let s=e.parse(t[1],1,fe);if(!s)return null;if(!gn(r,s.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${ve(s.type)}'.`);let a=e.parse(t[2],2,fe);if(!a)return null;if(!gn(r,a.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${ve(a.type)}'.`);if(s.type.kind!==a.type.kind&&"value"!==s.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${ve(s.type)}' and '${ve(a.type)}'.`);n&&("value"===s.type.kind&&"value"!==a.type.kind?s=new Ge(a.type,[s]):"value"!==s.type.kind&&"value"===a.type.kind&&(a=new Ge(s.type,[a])));let o=null;if(4===t.length){if("string"!==s.type.kind&&"string"!==a.type.kind&&"value"!==s.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(o=e.parse(t[3],3,ye),!o)return null}return new i(s,a,o)}evaluate(i){const s=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const e=Re(s),r=Re(a);if(e.kind!==r.kind||"string"!==e.kind&&"number"!==e.kind)throw new Oe(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=Re(s),r=Re(a);if("string"!==t.kind||"string"!==r.kind)return e(i,s,a)}return this.collator?r(i,s,a,this.collator.evaluate(i)):e(i,s,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator);}outputDefined(){return !0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize());})),e}}}const bn=vn("==",(function(t,e,r){return e===r}),xn),wn=vn("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return !xn(0,e,r,n)})),_n=vn("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),An=vn(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),Sn=vn("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),kn=vn(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0}));class In{constructor(t,e,r,n,i,s){this.type=ce,this.number=t,this.locale=e,this.currency=r,this.unit=n,this.minFractionDigits=i,this.maxFractionDigits=s;}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,ue);if(!r)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=e.parse(n.locale,1,ce),!i))return null;let s=null;if(n.currency&&(s=e.parse(n.currency,1,ce),!s))return null;let a=null;if(n.unit&&(a=e.parse(n.unit,1,ce),!a))return null;let o=null;if(n["min-fraction-digits"]&&(o=e.parse(n["min-fraction-digits"],1,ue),!o))return null;let l=null;return n["max-fraction-digits"]&&(l=e.parse(n["max-fraction-digits"],1,ue),!l)?null:new In(r,i,s,a,o,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits);}outputDefined(){return !1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Mn{constructor(t){this.type=ue,this.input=t;}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${ve(r.type)} instead.`):new Mn(r):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Oe(`Expected value to be of type string or array, but found ${ve(Re(e))} instead.`)}eachChild(t){t(this.input);}outputDefined(){return !1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize());})),t}}const Tn={"==":bn,"!=":wn,">":An,"<":_n,">=":kn,"<=":Sn,array:Ge,at:an,boolean:Ge,case:fn,coalesce:en,collator:er,format:Ze,image:Ke,in:ln,"index-of":cn,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:Mn,let:nn,literal:je,match:pn,number:Ge,"number-format":In,object:Ge,slice:mn,step:Br,string:Ge,"to-boolean":He,"to-color":He,"to-number":He,"to-string":He,var:Sr,within:vr};function zn(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const s=i?i.evaluate(t):1,a=Le(e,r,n,s);if(a)throw new Oe(a);return new Ee(e/255*s,r/255*s,n/255*s,s)}function Bn(t,e){return t in e}function En(t,e){const r=e[t];return void 0===r?null:r}function Cn(t){return {type:t}}tr.register(Tn,{error:[{kind:"error"},[ce],(t,[e])=>{throw new Oe(e.evaluate(t))}],typeof:[ce,[fe],(t,[e])=>ve(Re(e.evaluate(t)))],"to-rgba":[xe(ue,4),[pe],(t,[e])=>e.evaluate(t).toArray()],rgb:[pe,[ue,ue,ue],zn],rgba:[pe,[ue,ue,ue,ue],zn],has:{type:he,overloads:[[[ce],(t,[e])=>Bn(e.evaluate(t),t.properties())],[[ce,de],(t,[e,r])=>Bn(e.evaluate(t),r.evaluate(t))]]},get:{type:fe,overloads:[[[ce],(t,[e])=>En(e.evaluate(t),t.properties())],[[ce,de],(t,[e,r])=>En(e.evaluate(t),r.evaluate(t))]]},"feature-state":[fe,[ce],(t,[e])=>En(e.evaluate(t),t.featureState||{})],properties:[de,[],t=>t.properties()],"geometry-type":[ce,[],t=>t.geometryType()],id:[fe,[],t=>t.id()],zoom:[ue,[],t=>t.globals.zoom],pitch:[ue,[],t=>t.globals.pitch||0],"distance-from-center":[ue,[],t=>t.distanceFromCenter()],"heatmap-density":[ue,[],t=>t.globals.heatmapDensity||0],"line-progress":[ue,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[ue,[],t=>t.globals.skyRadialProgress||0],accumulated:[fe,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[ue,Cn(ue),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[ue,Cn(ue),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:ue,overloads:[[[ue,ue],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[ue],(t,[e])=>-e.evaluate(t)]]},"/":[ue,[ue,ue],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[ue,[ue,ue],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[ue,[],()=>Math.LN2],pi:[ue,[],()=>Math.PI],e:[ue,[],()=>Math.E],"^":[ue,[ue,ue],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[ue,[ue],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[ue,[ue],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[ue,[ue],(t,[e])=>Math.log(e.evaluate(t))],log2:[ue,[ue],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[ue,[ue],(t,[e])=>Math.sin(e.evaluate(t))],cos:[ue,[ue],(t,[e])=>Math.cos(e.evaluate(t))],tan:[ue,[ue],(t,[e])=>Math.tan(e.evaluate(t))],asin:[ue,[ue],(t,[e])=>Math.asin(e.evaluate(t))],acos:[ue,[ue],(t,[e])=>Math.acos(e.evaluate(t))],atan:[ue,[ue],(t,[e])=>Math.atan(e.evaluate(t))],min:[ue,Cn(ue),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[ue,Cn(ue),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[ue,[ue],(t,[e])=>Math.abs(e.evaluate(t))],round:[ue,[ue],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[ue,[ue],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[ue,[ue],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[he,[ce,fe],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[he,[fe],(t,[e])=>t.id()===e.value],"filter-type-==":[he,[ce],(t,[e])=>t.geometryType()===e.value],"filter-<":[he,[ce,fe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[he,[fe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[he,[ce,fe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[he,[fe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[he,[ce,fe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[he,[fe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[he,[ce,fe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[he,[fe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[he,[fe],(t,[e])=>e.value in t.properties()],"filter-has-id":[he,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[he,[xe(ce)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[he,[xe(fe)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[he,[ce,xe(fe)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[he,[ce,xe(fe)],(t,[e,r])=>function(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return !0;e[i]>t?n=i-1:r=i+1;}return !1}(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:he,overloads:[[[he,he],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[Cn(he),(t,e)=>{for(const r of e)if(!r.evaluate(t))return !1;return !0}]]},any:{type:he,overloads:[[[he,he],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[Cn(he),(t,e)=>{for(const r of e)if(r.evaluate(t))return !0;return !1}]]},"!":[he,[he],(t,[e])=>!e.evaluate(t)],"is-supported-script":[he,[ce],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return !r||r(e.evaluate(t))}],upcase:[ce,[ce],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ce,[ce],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ce,Cn(fe),(t,e)=>e.map((e=>Ue(e.evaluate(t)))).join("")],"resolved-locale":[ce,[ye],(t,[e])=>e.evaluate(t).resolvedLocale()]});var Pn=Tn;function Dn(t){return {result:"success",value:t}}function Vn(t){return {result:"error",value:t}}function Ln(t){return "data-driven"===t["property-type"]}function Fn(t){return !!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Rn(t){return !!t.expression&&t.expression.interpolated}function Un(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function $n(t){return "object"==typeof t&&null!==t&&!Array.isArray(t)}function jn(t){return t}function On(t,e){const r="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],i=n||!(n||void 0!==t.property),s=t.type||(Rn(e)?"exponential":"interval");if(r&&((t=ee({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Ee.parse(t[1])]))),t.default=Ee.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Hr[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let a,o,l;if("exponential"===s)a=Zn;else if("interval"===s)a=Gn;else if("categorical"===s){a=Nn,o=Object.create(null);for(const e of t.stops)o[e[0]]=e[1];l=typeof t.stops[0][0];}else {if("identity"!==s)throw new Error(`Unknown function type "${s}"`);a=Kn;}if(n){const r={},n=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],s=i[0].zoom;void 0===r[s]&&(r[s]={zoom:s,type:t.type,property:t.property,default:t.default,stops:[]},n.push(s)),r[s].stops.push([i[0].value,i[1]]);}const i=[];for(const t of n)i.push([r[t].zoom,On(r[t],e)]);const s={name:"linear"};return {kind:"composite",interpolationType:s,interpolationFactor:Qr.interpolationFactor.bind(void 0,s),zoomStops:i.map((t=>t[0])),evaluate:({zoom:r},n)=>Zn({stops:i,base:t.base},e,r).evaluate(r,n)}}if(i){const r="exponential"===s?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return {kind:"camera",interpolationType:r,interpolationFactor:Qr.interpolationFactor.bind(void 0,r),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:r})=>a(t,e,r,o,l)}}return {kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[t.property]:void 0;return void 0===i?qn(t.default,e.default):a(t,e,i,o,l)}}}function qn(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Nn(t,e,r,n,i){return qn(typeof r===i?n[r]:void 0,t.default,e.default)}function Gn(t,e,r){if("number"!==Un(r))return qn(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];const i=Tr(t.stops.map((t=>t[0])),r);return t.stops[i][1]}function Zn(t,e,r){const n=void 0!==t.base?t.base:1;if("number"!==Un(r))return qn(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const s=Tr(t.stops.map((t=>t[0])),r),a=function(t,e,r,n){const i=n-r,s=t-r;return 0===i?0:1===e?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[s][0],t.stops[s+1][0]),o=t.stops[s][1],l=t.stops[s+1][1];let u=Cr[e.type]||jn;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Hr[t.colorSpace];u=(t,r)=>e.reverse(e.interpolate(e.forward(t),e.forward(r),a));}return "function"==typeof o.evaluate?{evaluate(...t){const e=o.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==r)return u(e,r,a)}}:u(o,l,a)}function Kn(t,e,r){return "color"===e.type?r=Ee.parse(r):"formatted"===e.type?r=De.fromString(r.toString()):"resolvedImage"===e.type?r=Ve.fromString(r.toString()):Un(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),qn(r,t.default,e.default)}class Xn{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new We,this._defaultValue=e?function(t){return "color"===t.type&&($n(t.default)||Array.isArray(t.default))?new Ee(0,0,0,0):"color"===t.type?Ee.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null;}evaluateWithoutErrorHandling(t,e,r,n,i,s,a,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=o||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,i,s,a,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Oe(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Jn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Pn}function Hn(t,e){const r=new Ir(Pn,[],e?function(t){const e={color:pe,string:ce,number:ue,enum:ce,boolean:he,formatted:me,resolvedImage:ge};return "array"===t.type?xe(e[t.value]||fe,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Dn(new Xn(n,e)):Vn(r.errors)}class Yn{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!wr(e.expression);}evaluateWithoutErrorHandling(t,e,r,n,i,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,s)}evaluate(t,e,r,n,i,s){return this._styleExpression.evaluate(t,e,r,n,i,s)}}class Wn{constructor(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!wr(e.expression),this.interpolationType=n;}evaluateWithoutErrorHandling(t,e,r,n,i,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,s)}evaluate(t,e,r,n,i,s){return this._styleExpression.evaluate(t,e,r,n,i,s)}interpolationFactor(t,e,r){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,t,e,r):0}}function Qn(t,e){if("error"===(t=Hn(t,e)).result)return t;const r=t.value.expression,n=br(r);if(!n&&!Ln(e))return Vn([new se("","data expressions not supported")]);const i=_r(r,["zoom","pitch","distance-from-center"]);if(!i&&!Fn(e))return Vn([new se("","zoom expressions not supported")]);const s=ei(r);return s||i?s instanceof se?Vn([s]):s instanceof Qr&&!Rn(e)?Vn([new se("",'"interpolate" expressions cannot be used with this property')]):Dn(s?new Wn(n?"camera":"composite",t.value,s.labels,s instanceof Qr?s.interpolation:void 0):new Yn(n?"constant":"source",t.value)):Vn([new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ti{constructor(t,e){this._parameters=t,this._specification=e,ee(this,On(this._parameters,this._specification));}static deserialize(t){return new ti(t._parameters,t._specification)}static serialize(t){return {_parameters:t._parameters,_specification:t._specification}}}function ei(t){let e=null;if(t instanceof nn)e=ei(t.result);else if(t instanceof en){for(const r of t.args)if(e=ei(r),e)break}else (t instanceof Br||t instanceof Qr)&&t.input instanceof tr&&"zoom"===t.input.name&&(e=t);return e instanceof se||t.eachChild((t=>{const r=ei(t);r instanceof se?e=r:!e&&r?e=new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));})),e}class ri{constructor(t,e,r,n){this.message=(t?`${t}: `:"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__);}}function ni(t){const e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},s=t.style,a=t.styleSpec;let o=[];const l=Un(r);if("object"!==l)return [new ri(e,r,`object expected, ${l} found`)];for(const t in r){const l=t.split(".")[0];let u;i[l]?u=i[l]:n[l]?u=Fi:i["*"]?u=i["*"]:n["*"]&&(u=Fi),u?o=o.concat(u({key:(e?`${e}.`:e)+t,value:r[t],valueSpec:n[l]||n["*"],style:s,styleSpec:a,object:r,objectKey:t},r)):o.push(new ri(e,r[t],`unknown property "${t}"`));}for(const t in n)i[t]||n[t].required&&void 0===n[t].default&&void 0===r[t]&&o.push(new ri(e,r,`missing required property "${t}"`));return o}function ii(t){const e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,s=t.key,a=t.arrayElementValidator||Fi;if("array"!==Un(e))return [new ri(s,e,`array expected, ${Un(e)} found`)];if(r.length&&e.length!==r.length)return [new ri(s,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return [new ri(s,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let o={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};i.$version<7&&(o.function=r.function),"object"===Un(r.value)&&(o=r.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(a({array:e,arrayIndex:t,value:e[t],valueSpec:o,style:n,styleSpec:i,key:`${s}[${t}]`}));return l}function si(t){const e=t.key,r=t.value,n=t.valueSpec;let i=Un(r);if("number"===i&&r!=r&&(i="NaN"),"number"!==i)return [new ri(e,r,`number expected, ${i} found`)];if("minimum"in n){let i=n.minimum;if("array"===Un(n.minimum)&&(i=n.minimum[t.arrayIndex]),r<i)return [new ri(e,r,`${r} is less than the minimum value ${i}`)]}if("maximum"in n){let i=n.maximum;if("array"===Un(n.maximum)&&(i=n.maximum[t.arrayIndex]),r>i)return [new ri(e,r,`${r} is greater than the maximum value ${i}`)]}return []}function ai(t){const e=t.valueSpec,r=re(t.value.type);let n,i,s,a={};const o="categorical"!==r&&void 0===t.value.property,l=!o,u="array"===Un(t.value.stops)&&"array"===Un(t.value.stops[0])&&"object"===Un(t.value.stops[0][0]),c=ni({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===r)return [new ri(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;return e=e.concat(ii({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Un(n)&&0===n.length&&e.push(new ri(t.key,n,"array must have at least one stop")),e},default:function(t){return Fi({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return "identity"===r&&o&&c.push(new ri(t.key,t.value,'missing required property "property"')),"identity"===r||t.value.stops||c.push(new ri(t.key,t.value,'missing required property "stops"')),"exponential"===r&&t.valueSpec.expression&&!Rn(t.valueSpec)&&c.push(new ri(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Ln(t.valueSpec)?c.push(new ri(t.key,t.value,"property functions not supported")):o&&!Fn(t.valueSpec)&&c.push(new ri(t.key,t.value,"zoom functions not supported"))),"categorical"!==r&&!u||void 0!==t.value.property||c.push(new ri(t.key,t.value,'"property" property is required')),c;function h(t){let r=[];const n=t.value,o=t.key;if("array"!==Un(n))return [new ri(o,n,`array expected, ${Un(n)} found`)];if(2!==n.length)return [new ri(o,n,`array length 2 expected, length ${n.length} found`)];if(u){if("object"!==Un(n[0]))return [new ri(o,n,`object expected, ${Un(n[0])} found`)];if(void 0===n[0].zoom)return [new ri(o,n,"object stop key must have zoom")];if(void 0===n[0].value)return [new ri(o,n,"object stop key must have value")];const e=re(n[0].zoom);if("number"!=typeof e)return [new ri(o,n[0].zoom,"stop zoom values must be numbers")];if(s&&s>e)return [new ri(o,n[0].zoom,"stop zoom values must appear in ascending order")];e!==s&&(s=e,i=void 0,a={}),r=r.concat(ni({key:`${o}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:si,value:p}}));}else r=r.concat(p({key:`${o}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return Jn(ne(n[1]))?r.concat([new ri(`${o}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(Fi({key:`${o}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,s){const o=Un(t.value),l=re(t.value),u=null!==t.value?t.value:s;if(n){if(o!==n)return [new ri(t.key,u,`${o} stop domain type must match previous stop domain type ${n}`)]}else n=o;if("number"!==o&&"string"!==o&&"boolean"!==o&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return [new ri(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==o&&"categorical"!==r){let n=`number expected, ${o} found`;return Ln(e)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ri(t.key,u,n)]}return "categorical"!==r||"number"!==o||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===o&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new ri(t.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in a?[new ri(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new ri(t.key,u,`integer expected, found ${String(l)}`)]}}function oi(t){const e=("property"===t.expressionContext?Qn:Hn)(ne(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new ri(`${t.key}${e.key}`,t.value,e.message)));const r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return [new ri(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!wr(r))return [new ri(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return li(r,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!_r(r,["zoom","feature-state"]))return [new ri(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!br(r))return [new ri(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return []}function li(t,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const t of e.valueSpec.expression.parameters)r.delete(t);if(0===r.size)return [];const n=[];return t instanceof tr&&r.has(t.name)?[new ri(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild((t=>{n.push(...li(t,e));})),n)}function ui(t){const e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(re(r))&&i.push(new ri(e,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(re(r))&&i.push(new ri(e,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function ci(t){if(!0===t||!1===t)return !0;if(!Array.isArray(t)||0===t.length)return !1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return !1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!ci(e)&&"boolean"!=typeof e)return !1;return !0;default:return !0}}function hi(t,e="fill"){if(null==t)return {filter:()=>!0,needGeometry:!1,needFeature:!1};ci(t)||(t=xi(t));const r=t;let n=!0;try{n=function(t){if(!fi(t))return t;let e=ne(t);return di(e),e=pi(e),e}(r);}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `);}const i=te[`filter_${e}`],s=Hn(n,i);let a=null;if("error"===s.result)throw new Error(s.value.map((t=>`${t.key}: ${t.message}`)).join(", "));a=(t,e,r)=>s.value.evaluate(t,e,{},r);let o=null,l=null;if(n!==r){const t=Hn(r,i);if("error"===t.result)throw new Error(t.value.map((t=>`${t.key}: ${t.message}`)).join(", "));o=(e,r,n,i,s)=>t.value.evaluate(e,r,{},n,void 0,void 0,i,s),l=!br(t.value.expression);}return {filter:a,dynamicFilter:o||void 0,needGeometry:gi(n),needFeature:!!l}}function pi(t){if(!Array.isArray(t))return t;const e=function(t){if(yi.has(t[0]))for(let e=1;e<t.length;e++)if(fi(t[e]))return !0;return t}(t);return !0===e?e:e.map((t=>pi(t)))}function di(t){let e=!1;const r=[];if("case"===t[0]){for(let n=1;n<t.length-1;n+=2)e=e||fi(t[n]),r.push(t[n+1]);r.push(t[t.length-1]);}else if("match"===t[0]){e=e||fi(t[1]);for(let e=2;e<t.length-1;e+=2)r.push(t[e+1]);r.push(t[t.length-1]);}else if("step"===t[0]){e=e||fi(t[1]);for(let e=1;e<t.length-1;e+=2)r.push(t[e+1]);}e&&(t.length=0,t.push("any",...r));for(let e=1;e<t.length;e++)di(t[e]);}function fi(t){if(!Array.isArray(t))return !1;if("pitch"===(e=t[0])||"distance-from-center"===e)return !0;var e;for(let e=1;e<t.length;e++)if(fi(t[e]))return !0;return !1}const yi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function mi(t,e){return t<e?-1:t>e?1:0}function gi(t){if(!Array.isArray(t))return !1;if("within"===t[0])return !0;for(let e=1;e<t.length;e++)if(gi(t[e]))return !0;return !1}function xi(t){if(!t)return !0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?vi(t[1],t[2],"=="):"!="===e?_i(vi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?vi(t[1],t[2],e):"any"===e?(r=t.slice(1),["any"].concat(r.map(xi))):"all"===e?["all"].concat(t.slice(1).map(xi)):"none"===e?["all"].concat(t.slice(1).map(xi).map(_i)):"in"===e?bi(t[1],t.slice(2)):"!in"===e?_i(bi(t[1],t.slice(2))):"has"===e?wi(t[1]):"!has"===e?_i(wi(t[1])):"within"!==e||t;var r;}function vi(t,e,r){switch(t){case"$type":return [`filter-type-${r}`,e];case"$id":return [`filter-id-${r}`,e];default:return [`filter-${r}`,t,e]}}function bi(t,e){if(0===e.length)return !1;switch(t){case"$type":return ["filter-type-in",["literal",e]];case"$id":return ["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(mi)]]:["filter-in-small",t,["literal",e]]}}function wi(t){switch(t){case"$type":return !0;case"$id":return ["filter-has-id"];default:return ["filter-has",t]}}function _i(t){return ["!",t]}function Ai(t){return ci(ne(t.value))?oi(ee({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${t.layerType||"fill"}`]})):Si(t)}function Si(t){const e=t.value,r=t.key;if("array"!==Un(e))return [new ri(r,e,`array expected, ${Un(e)} found`)];const n=t.styleSpec;let i,s=[];if(e.length<1)return [new ri(r,e,"filter array must have at least 1 element")];switch(s=s.concat(ui({key:`${r}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),re(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===re(e[1])&&s.push(new ri(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&s.push(new ri(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Un(e[1]),"string"!==i&&s.push(new ri(`${r}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Un(e[a]),"$type"===re(e[1])?s=s.concat(ui({key:`${r}[${a}]`,value:e[a],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&s.push(new ri(`${r}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let n=1;n<e.length;n++)s=s.concat(Si({key:`${r}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Un(e[1]),2!==e.length?s.push(new ri(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&s.push(new ri(`${r}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=Un(e[1]),2!==e.length?s.push(new ri(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&s.push(new ri(`${r}[1]`,e[1],`object expected, ${i} found`));}return s}function ki(t,e){const r=t.key,n=t.style,i=t.styleSpec,s=t.value,a=t.objectKey,o=i[`${e}_${t.layerType}`];if(!o)return [];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&o[l[1]]&&o[l[1]].transition)return Fi({key:r,value:s,valueSpec:i.transition,style:n,styleSpec:i});const u=t.valueSpec||o[a];if(!u)return [new ri(r,s,`unknown property "${a}"`)];let c;if("string"===Un(s)&&Ln(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(s))){const t=`\`{ "type": "identity", "property": ${c?JSON.stringify(c[1]):'"_"'} }\``;return [new ri(r,s,`"${a}" does not support interpolation syntax\nUse an identity property function instead: ${t}.`)]}const h=[];return "symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&h.push(new ri(r,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&$n(ne(s))&&"identity"===re(s.type)&&h.push(new ri(r,s,'"text-font" does not support identity functions'))),h.concat(Fi({key:t.key,value:s,valueSpec:u,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Ii(t){return ki(t,"paint")}function Mi(t){return ki(t,"layout")}function Ti(t){let e=[];const r=t.value,n=t.key,i=t.style,s=t.styleSpec;r.type||r.ref||e.push(new ri(n,r,'either "type" or "ref" is required'));let a=re(r.type);const o=re(r.ref);if(r.id){const s=re(r.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];re(t.id)===s&&e.push(new ri(n,r.id,`duplicate layer id "${r.id}", previously used at line ${t.id.__line__}`));}}if("ref"in r){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in r&&e.push(new ri(n,r[t],`"${t}" is prohibited for ref layers`));})),i.layers.forEach((e=>{re(e.id)===o&&(t=e);})),t?t.ref?e.push(new ri(n,r.ref,"ref cannot reference another ref layer")):a=re(t.type):"string"==typeof o&&e.push(new ri(n,r.ref,`ref layer "${o}" not found`));}else if("background"!==a&&"sky"!==a)if(r.source){const t=i.sources&&i.sources[r.source],s=t&&re(t.type);t?"vector"===s&&"raster"===a?e.push(new ri(n,r.source,`layer "${r.id}" requires a raster source`)):"raster"===s&&"raster"!==a?e.push(new ri(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==s||r["source-layer"]?"raster-dem"===s&&"hillshade"!==a?e.push(new ri(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===s&&t.lineMetrics||e.push(new ri(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new ri(n,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new ri(n,r.source,`source "${r.source}" not found`));}else e.push(new ri(n,r,'missing required property "source"'));return e=e.concat(ni({key:n,value:r,valueSpec:s.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Fi({key:`${n}.type`,value:r.type,valueSpec:s.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"}),filter:t=>Ai(ee({layerType:a},t)),layout:t=>ni({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Mi(ee({layerType:a},t))}}),paint:t=>ni({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ii(ee({layerType:a},t))}})}})),e}function zi(t){const e=t.value,r=t.key,n=Un(e);return "string"!==n?[new ri(r,e,`string expected, ${n} found`)]:[]}const Bi={promoteId:function({key:t,value:e}){if("string"===Un(e))return zi({key:t,value:e});{const r=[];for(const n in e)r.push(...zi({key:`${t}.${n}`,value:e[n]}));return r}}};function Ei(t){const e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return [new ri(r,e,'"type" is required')];const s=re(e.type);let a;switch(s){case"vector":case"raster":case"raster-dem":return a=ni({key:r,value:e,valueSpec:n[`source_${s.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:Bi}),a;case"geojson":if(a=ni({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:Bi}),e.cluster)for(const t in e.clusterProperties){const[n,i]=e.clusterProperties[t],s="string"==typeof n?[n,["accumulated"],["get",t]]:n;a.push(...oi({key:`${r}.${t}.map`,value:i,expressionContext:"cluster-map"})),a.push(...oi({key:`${r}.${t}.reduce`,value:s,expressionContext:"cluster-reduce"}));}return a;case"video":return ni({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return ni({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return [new ri(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ui({key:`${r}.type`,value:e.type,valueSpec:{values:Ci(n)},style:i,styleSpec:n})}}function Ci(t){return t.source.reduce(((e,r)=>{const n=t[r];return "enum"===n.type.type&&(e=e.concat(Object.keys(n.type.values))),e}),[])}function Pi(t){const e=t.value,r=t.styleSpec,n=r.light,i=t.style;let s=[];const a=Un(e);if(void 0===e)return s;if("object"!==a)return s=s.concat([new ri("light",e,`object expected, ${a} found`)]),s;for(const t in e){const a=t.match(/^(.*)-transition$/);s=s.concat(a&&n[a[1]]&&n[a[1]].transition?Fi({key:t,value:e[t],valueSpec:r.transition,style:i,styleSpec:r}):n[t]?Fi({key:t,value:e[t],valueSpec:n[t],style:i,styleSpec:r}):[new ri(t,e[t],`unknown property "${t}"`)]);}return s}function Di(t){const e=t.value,r=t.key,n=t.style,i=t.styleSpec,s=i.terrain;let a=[];const o=Un(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new ri("terrain",e,`object expected, ${o} found`)]),a;for(const t in e){const r=t.match(/^(.*)-transition$/);a=a.concat(r&&s[r[1]]&&s[r[1]].transition?Fi({key:t,value:e[t],valueSpec:i.transition,style:n,styleSpec:i}):s[t]?Fi({key:t,value:e[t],valueSpec:s[t],style:n,styleSpec:i}):[new ri(t,e[t],`unknown property "${t}"`)]);}if(e.source){const t=n.sources&&n.sources[e.source],i=t&&re(t.type);t?"raster-dem"!==i&&a.push(new ri(r,e.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):a.push(new ri(r,e.source,`source "${e.source}" not found`));}else a.push(new ri(r,e,'terrain is missing required property "source"'));return a}function Vi(t){const e=t.value,r=t.style,n=t.styleSpec,i=n.fog;let s=[];const a=Un(e);if(void 0===e)return s;if("object"!==a)return s=s.concat([new ri("fog",e,`object expected, ${a} found`)]),s;for(const t in e){const a=t.match(/^(.*)-transition$/);s=s.concat(a&&i[a[1]]&&i[a[1]].transition?Fi({key:t,value:e[t],valueSpec:n.transition,style:r,styleSpec:n}):i[t]?Fi({key:t,value:e[t],valueSpec:i[t],style:r,styleSpec:n}):[new ri(t,e[t],`unknown property "${t}"`)]);}return s}const Li={"*":()=>[],array:ii,boolean:function(t){const e=t.value,r=t.key,n=Un(e);return "boolean"!==n?[new ri(r,e,`boolean expected, ${n} found`)]:[]},number:si,color:function(t){const e=t.key,r=t.value,n=Un(r);return "string"!==n?[new ri(e,r,`color expected, ${n} found`)]:null===Se(r)?[new ri(e,r,`color expected, "${r}" found`)]:[]},enum:ui,filter:Ai,function:ai,layer:Ti,object:ni,source:Ei,light:Pi,terrain:Di,fog:Vi,string:zi,formatted:function(t){return 0===zi(t).length?[]:oi(t)},resolvedImage:function(t){return 0===zi(t).length?[]:oi(t)},projection:function(t){const e=t.value,r=t.styleSpec,n=r.projection,i=t.style;let s=[];const a=Un(e);if("object"===a)for(const t in e)s=s.concat(Fi({key:t,value:e[t],valueSpec:n[t],style:i,styleSpec:r}));else "string"!==a&&(s=s.concat([new ri("projection",e,`object or string expected, ${a} found`)]));return s}};function Fi(t){const e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&$n(re(e))?ai(t):r.expression&&Jn(ne(e))?oi(t):r.type&&Li[r.type]?Li[r.type](t):ni(ee({},t,{valueSpec:r.type?n[r.type]:r}))}function Ri(t){const e=t.value,r=t.key,n=zi(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new ri(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new ri(r,e,'"glyphs" url must include a "{range}" token'))),n}function Ui(t,e=te){return Oi(Fi({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ri,"*":()=>[]}}))}const $i=t=>Oi(Ii(t)),ji=t=>Oi(Mi(t));function Oi(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function qi(t,e){let r=!1;if(e&&e.length)for(const n of e)t.fire(new Wt(new Error(n.message))),r=!0;return r}var Ni=Zi,Gi=3;function Zi(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(r=i[2]);for(var s=0;s<this.d*this.d;s++){var a=i[Gi+s],o=i[Gi+s+1];n.push(a===o?null:i.subarray(a,o));}var l=i[Gi+n.length+1];this.keys=i.subarray(i[Gi+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly;}else {this.d=e+2*r;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[];}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c;}Zi.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i);},Zi.prototype._insertReadonly=function(){throw "Cannot insert into a GridIndex created from an ArrayBuffer."},Zi.prototype._insertCell=function(t,e,r,n,i,s){this.cells[i].push(s);},Zi.prototype.query=function(t,e,r,n,i){var s=this.min,a=this.max;if(t<=s&&e<=s&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(t,e,r,n,this._queryCell,o,{},i),o},Zi.prototype._queryCell=function(t,e,r,n,i,s,a,o){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===a[p]){var d=4*p;(o?o(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&r>=c[d+0]&&n>=c[d+1])?(a[p]=!0,s.push(u[p])):a[p]=!1;}}},Zi.prototype._forEachCell=function(t,e,r,n,i,s,a,o){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),h=this._convertToCellCoord(n),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.d*d+p;if((!o||o(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&i.call(this,t,e,r,n,f,s,a,o))return}},Zi.prototype._convertFromCellCoord=function(t){return (t-this.padding)/this.scale},Zi.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Zi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Gi+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var s=e,a=0;a<t.length;a++){var o=t[a];i[Gi+a]=s,i.set(o,s),s+=o.length;}return i[Gi+t.length]=s,i.set(this.keys,s),i[Gi+t.length+1]=s+=this.keys.length,i.set(this.bboxes,s),s+=this.bboxes.length,i.buffer};var Ki=p(Ni);const Xi={};function Ji(t,e,r={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Xi[e]={klass:t,omit:r.omit||[]};}Ji(Object,"Object"),Ki.serialize=function(t,e){const r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},Ki.deserialize=function(t){return new Ki(t.buffer)},Object.defineProperty(Ki,"name",{value:"Grid"}),Ji(Ki,"Grid"),Ji(Ee,"Color"),Ji(Error,"Error"),Ji(ut,"AJAXError"),Ji(Ve,"ResolvedImage"),Ji(ti,"StylePropertyFunction"),Ji(Xn,"StyleExpression",{omit:["_evaluator"]}),Ji(Wn,"ZoomDependentExpression"),Ji(Yn,"ZoomConstantExpression"),Ji(tr,"CompoundExpression",{omit:["_evaluate"]});for(const t in Pn)Xi[Pn[t]._classRegistryKey]||Ji(Pn[t],`Expression${t}`);function Hi(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Yi(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function Wi(t,r){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Hi(t)||Yi(t))return r&&r.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return r&&r.push(e.buffer),e}if(t instanceof e.ImageData)return r&&r.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const n of t)e.push(Wi(n,r));return e}if("object"==typeof t){const e=t.constructor,n=e._classRegistryKey;if(!n)throw new Error(`can't serialize object of unregistered class ${n}`);const i=e.serialize?e.serialize(t,r):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&(Xi[n].omit.indexOf(e)>=0||(i[e]=Wi(t[e],r)));t instanceof Error&&(i.message=t.message);}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return "Object"!==n&&(i.$name=n),i}throw new Error("can't serialize object of type "+typeof t)}function Qi(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Hi(t)||Yi(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map(Qi);if("object"==typeof t){const e=t.$name||"Object",{klass:r}=Xi[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(t);const n=Object.create(r.prototype);for(const e of Object.keys(t))"$name"!==e&&(n[e]=Qi(t[e]));return n}throw new Error("can't deserialize object of type "+typeof t)}const ts={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function es(t){for(const e of t)if(is(e.charCodeAt(0)))return !0;return !1}function rs(t){for(const e of t)if(!ns(e.charCodeAt(0)))return !1;return !0}function ns(t){return !(ts.Arabic(t)||ts["Arabic Supplement"](t)||ts["Arabic Extended-A"](t)||ts["Arabic Presentation Forms-A"](t)||ts["Arabic Presentation Forms-B"](t))}function is(t){return !(746!==t&&747!==t&&(t<4352||!(ts["Bopomofo Extended"](t)||ts.Bopomofo(t)||ts["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||ts["CJK Compatibility Ideographs"](t)||ts["CJK Compatibility"](t)||ts["CJK Radicals Supplement"](t)||ts["CJK Strokes"](t)||!(!ts["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ts["CJK Unified Ideographs Extension A"](t)||ts["CJK Unified Ideographs"](t)||ts["Enclosed CJK Letters and Months"](t)||ts["Hangul Compatibility Jamo"](t)||ts["Hangul Jamo Extended-A"](t)||ts["Hangul Jamo Extended-B"](t)||ts["Hangul Jamo"](t)||ts["Hangul Syllables"](t)||ts.Hiragana(t)||ts["Ideographic Description Characters"](t)||ts.Kanbun(t)||ts["Kangxi Radicals"](t)||ts["Katakana Phonetic Extensions"](t)||ts.Katakana(t)&&12540!==t||!(!ts["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ts["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||ts["Unified Canadian Aboriginal Syllabics"](t)||ts["Unified Canadian Aboriginal Syllabics Extended"](t)||ts["Vertical Forms"](t)||ts["Yijing Hexagram Symbols"](t)||ts["Yi Syllables"](t)||ts["Yi Radicals"](t))))}function ss(t){return !(is(t)||function(t){return !!(ts["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||ts["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||ts["Letterlike Symbols"](t)||ts["Number Forms"](t)||ts["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||ts["Control Pictures"](t)&&9251!==t||ts["Optical Character Recognition"](t)||ts["Enclosed Alphanumerics"](t)||ts["Geometric Shapes"](t)||ts["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ts["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ts["CJK Symbols and Punctuation"](t)||ts.Katakana(t)||ts["Private Use Area"](t)||ts["CJK Compatibility Forms"](t)||ts["Small Form Variants"](t)||ts["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function as(t){return t>=1424&&t<=2303||ts["Arabic Presentation Forms-A"](t)||ts["Arabic Presentation Forms-B"](t)}function os(t,e){return !(!e&&as(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||ts.Khmer(t))}function ls(t){for(const e of t)if(as(e.charCodeAt(0)))return !0;return !1}const us="deferred",cs="loading",hs="loaded";let ps=null,ds="unavailable",fs=null;const ys=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(ds="error"),ps&&ps(t);};function ms(){gs.fire(new Yt("pluginStateChange",{pluginStatus:ds,pluginURL:fs}));}const gs=new Qt,xs=function(){return ds},vs=function(){if(ds!==us||!fs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ds=cs,ms(),fs&&pt({url:fs},(t=>{t?ys(t):(ds=hs,ms());}));},bs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ds===hs||null!=bs.applyArabicShaping,isLoading:()=>ds===cs,setState(t){ds=t.pluginStatus,fs=t.pluginURL;},isParsed:()=>null!=bs.applyArabicShaping&&null!=bs.processBidirectionalText&&null!=bs.processStyledBidirectionalText,getPluginURL:()=>fs};class ws{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0);}isSupportedScript(t){return function(t,e){for(const r of t)if(!os(r.charCodeAt(0),e))return !1;return !0}(t,bs.isLoaded())}}class _s{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if($n(t))return new ti(t,e);if(Jn(t)){const r=Qn(t,e);if("error"===r.result)throw new Error(r.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return r.value}{let r=t;return "string"==typeof t&&"color"===e.type&&(r=Ee.parse(t)),{kind:"constant",evaluate:()=>r}}}(void 0===e?t.specification.default:e,t.specification);}isDataDriven(){return "source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)}}class As{constructor(t){this.property=t,this.value=new _s(t,void 0);}transitioned(t,e){return new ks(this.property,this.value,e,C({},t.transition,this.transition),t.now)}untransitioned(){return new ks(this.property,this.value,null,{},0)}}class Ss{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues);}getValue(t){return O(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new As(this._values[t].property)),this._values[t].value=new _s(this._values[t].property,null===e?void 0:O(e));}getTransition(t){return O(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new As(this._values[t].property)),this._values[t].transition=O(e)||void 0;}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r);const n=this.getTransition(e);void 0!==n&&(t[`${e}-transition`]=n);}return t}transitioned(t,e){const r=new Is(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(t,e._values[n]);return r}untransitioned(){const t=new Is(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class ks{constructor(t,e,r,n,i){const s=n.delay||0,a=n.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+s,this.end=this.begin+a,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r);}possiblyEvaluate(t,e,r){const n=t.now||0,i=this.value.possiblyEvaluate(t,e,r),s=this.prior;if(s){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return s.possiblyEvaluate(t,e,r);{const a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(t,e,r),i,S(a))}}return i}}class Is{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues);}possiblyEvaluate(t,e,r){const n=new zs(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return !0;return !1}}class Ms{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues);}getValue(t){return O(this._values[t].value)}setValue(t,e){this._values[t]=new _s(this._values[t].property,null===e?void 0:O(e));}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r);}return t}possiblyEvaluate(t,e,r){const n=new zs(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}}class Ts{constructor(t,e,r){this.property=t,this.value=e,this.parameters=r;}isConstant(){return "constant"===this.value.kind}constantOr(t){return "constant"===this.value.kind?this.value.value:t}evaluate(t,e,r,n){return this.property.evaluate(this.value,this.parameters,t,e,r,n)}}class zs{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues);}get(t){return this._values[t]}}class Bs{constructor(t){this.specification=t;}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,r){const n=Cr[this.specification.type];return n?n(t,e,r):t}}class Es{constructor(t,e){this.specification=t,this.overrides=e;}possiblyEvaluate(t,e,r,n){return new Ts(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},r,n)}:t.expression,e)}interpolate(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Ts(this,{kind:"constant",value:void 0},t.parameters);const n=Cr[this.specification.type];return n?new Ts(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t}evaluate(t,e,r,n,i,s){return "constant"===t.kind?t.value:t.evaluate(e,r,n,i,s)}}class Cs{constructor(t){this.specification=t;}possiblyEvaluate(t,e,r,n){return !!t.expression.evaluate(e,null,{},r,n)}interpolate(){return !1}}class Ps{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new ws(0,{});for(const r in t){const n=t[r];n.specification.overridable&&this.overridableProperties.push(r);const i=this.defaultPropertyValues[r]=new _s(n,void 0),s=this.defaultTransitionablePropertyValues[r]=new As(n);this.defaultTransitioningPropertyValues[r]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate(e);}}}function Ds(t,e){return 256*(t=M(Math.floor(t),0,255))+M(Math.floor(e),0,255)}Ji(Es,"DataDrivenProperty"),Ji(Bs,"DataConstantProperty"),Ji(Cs,"ColorRampProperty");const Vs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ls{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8;}}class Fs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0);}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews());}clear(){this.length=0;}resize(t){this.reserve(t),this.length=t;}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e);}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null;}}function Rs(t,e=1){let r=0,n=0;return {members:t.map((t=>{const i=Vs[t.type].BYTES_PER_ELEMENT,s=r=Us(r,Math.max(e,i)),a=t.components||1;return n=Math.max(n,i),r+=i*a,{name:t.name,type:t.type,components:a,offset:s}})),size:Us(r,Math.max(n,e)),alignment:e}}function Us(t,e){return Math.ceil(t/e)*e}class $s extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t}}$s.prototype.bytesPerElement=4,Ji($s,"StructArrayLayout2i4");class js extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t}}js.prototype.bytesPerElement=6,Ji(js,"StructArrayLayout3i6");class Os extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,t}}Os.prototype.bytesPerElement=8,Ji(Os,"StructArrayLayout4i8");class qs extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,s,a)}emplace(t,e,r,n,i,s,a,o){const l=6*t,u=12*t,c=3*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.uint8[u+4]=n,this.uint8[u+5]=i,this.uint8[u+6]=s,this.uint8[u+7]=a,this.float32[c+2]=o,t}}qs.prototype.bytesPerElement=12,Ji(qs,"StructArrayLayout2i4ub1f12");class Ns extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.float32[s+0]=e,this.float32[s+1]=r,this.float32[s+2]=n,this.float32[s+3]=i,t}}Ns.prototype.bytesPerElement=16,Ji(Ns,"StructArrayLayout4f16");class Gs extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i)}emplace(t,e,r,n,i,s){const a=6*t,o=3*t;return this.uint16[a+0]=e,this.uint16[a+1]=r,this.uint16[a+2]=n,this.uint16[a+3]=i,this.float32[o+2]=s,t}}Gs.prototype.bytesPerElement=12,Ji(Gs,"StructArrayLayout4ui1f12");class Zs extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.uint16[s+0]=e,this.uint16[s+1]=r,this.uint16[s+2]=n,this.uint16[s+3]=i,t}}Zs.prototype.bytesPerElement=8,Ji(Zs,"StructArrayLayout4ui8");class Ks extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=6*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,this.int16[o+4]=s,this.int16[o+5]=a,t}}Ks.prototype.bytesPerElement=12,Ji(Ks,"StructArrayLayout6i12");class Xs extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,n,i,s,a,o,l,u,c,h)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p){const d=12*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.int16[d+2]=n,this.int16[d+3]=i,this.uint16[d+4]=s,this.uint16[d+5]=a,this.uint16[d+6]=o,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=p,t}}Xs.prototype.bytesPerElement=24,Ji(Xs,"StructArrayLayout4i4ui4i24");class Js extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=10*t,l=5*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.float32[l+2]=i,this.float32[l+3]=s,this.float32[l+4]=a,t}}Js.prototype.bytesPerElement=20,Ji(Js,"StructArrayLayout3i3f20");class Hs extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Hs.prototype.bytesPerElement=4,Ji(Hs,"StructArrayLayout1ul4");class Ys extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,r,n,i,s,a,o,l,u,c,h,p)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,d){const f=20*t,y=10*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.int16[f+4]=s,this.float32[y+3]=a,this.float32[y+4]=o,this.float32[y+5]=l,this.float32[y+6]=u,this.int16[f+14]=c,this.uint32[y+8]=h,this.uint16[f+18]=p,this.uint16[f+19]=d,t}}Ys.prototype.bytesPerElement=40,Ji(Ys,"StructArrayLayout5i4f1i1ul2ui40");class Ws extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,s,a)}emplace(t,e,r,n,i,s,a,o){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+4]=i,this.int16[l+5]=s,this.int16[l+6]=a,this.int16[l+7]=o,t}}Ws.prototype.bytesPerElement=16,Ji(Ws,"StructArrayLayout3i2i2i16");class Qs extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i)}emplace(t,e,r,n,i,s){const a=4*t,o=8*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.int16[o+6]=i,this.int16[o+7]=s,t}}Qs.prototype.bytesPerElement=16,Ji(Qs,"StructArrayLayout2f1f2i16");class ta extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=12*t,a=3*t;return this.uint8[s+0]=e,this.uint8[s+1]=r,this.float32[a+1]=n,this.float32[a+2]=i,t}}ta.prototype.bytesPerElement=12,Ji(ta,"StructArrayLayout2ub2f12");class ea extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t}}ea.prototype.bytesPerElement=12,Ji(ea,"StructArrayLayout3f12");class ra extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t}}ra.prototype.bytesPerElement=6,Ji(ra,"StructArrayLayout3ui6");class na extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m,g,x,v,b){const w=this.length;return this.resize(w+1),this.emplace(w,t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m,g,x,v,b)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m,g,x,v,b,w){const _=30*t,A=15*t,S=60*t;return this.int16[_+0]=e,this.int16[_+1]=r,this.int16[_+2]=n,this.float32[A+2]=i,this.float32[A+3]=s,this.uint16[_+8]=a,this.uint16[_+9]=o,this.uint32[A+5]=l,this.uint32[A+6]=u,this.uint32[A+7]=c,this.uint16[_+16]=h,this.uint16[_+17]=p,this.uint16[_+18]=d,this.float32[A+10]=f,this.float32[A+11]=y,this.uint8[S+48]=m,this.uint8[S+49]=g,this.uint8[S+50]=x,this.uint32[A+13]=v,this.int16[_+28]=b,this.uint8[S+58]=w,t}}na.prototype.bytesPerElement=60,Ji(na,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ia extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m,g,x,v,b,w,_,A,S,k,I,M,T,z){const B=this.length;return this.resize(B+1),this.emplace(B,t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m,g,x,v,b,w,_,A,S,k,I,M,T,z)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m,g,x,v,b,w,_,A,S,k,I,M,T,z,B){const E=38*t,C=19*t;return this.int16[E+0]=e,this.int16[E+1]=r,this.int16[E+2]=n,this.float32[C+2]=i,this.float32[C+3]=s,this.int16[E+8]=a,this.int16[E+9]=o,this.int16[E+10]=l,this.int16[E+11]=u,this.int16[E+12]=c,this.int16[E+13]=h,this.uint16[E+14]=p,this.uint16[E+15]=d,this.uint16[E+16]=f,this.uint16[E+17]=y,this.uint16[E+18]=m,this.uint16[E+19]=g,this.uint16[E+20]=x,this.uint16[E+21]=v,this.uint16[E+22]=b,this.uint16[E+23]=w,this.uint16[E+24]=_,this.uint16[E+25]=A,this.uint16[E+26]=S,this.uint16[E+27]=k,this.uint16[E+28]=I,this.uint32[C+15]=M,this.float32[C+16]=T,this.float32[C+17]=z,this.float32[C+18]=B,t}}ia.prototype.bytesPerElement=76,Ji(ia,"StructArrayLayout3i2f6i15ui1ul3f76");class sa extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}sa.prototype.bytesPerElement=4,Ji(sa,"StructArrayLayout1f4");class aa extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i)}emplace(t,e,r,n,i,s){const a=5*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,this.float32[a+4]=s,t}}aa.prototype.bytesPerElement=20,Ji(aa,"StructArrayLayout5f20");class oa extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=6*t;return this.uint32[3*t+0]=e,this.uint16[s+2]=r,this.uint16[s+3]=n,this.uint16[s+4]=i,t}}oa.prototype.bytesPerElement=12,Ji(oa,"StructArrayLayout1ul3ui12");class la extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t}}la.prototype.bytesPerElement=4,Ji(la,"StructArrayLayout2ui4");class ua extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}ua.prototype.bytesPerElement=2,Ji(ua,"StructArrayLayout1ui2");class ca extends Fs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t}}ca.prototype.bytesPerElement=8,Ji(ca,"StructArrayLayout2f8");class ha extends Ls{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ha.prototype.size=40;class pa extends Ys{get(t){return new ha(this,t)}}Ji(pa,"CollisionBoxArray");class da extends Ls{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t;}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t;}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t;}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t;}}da.prototype.size=60;class fa extends na{get(t){return new da(this,t)}}Ji(fa,"PlacedSymbolArray");class ya extends Ls{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t;}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ya.prototype.size=76;class ma extends ia{get(t){return new ya(this,t)}}Ji(ma,"SymbolInstanceArray");class ga extends sa{getoffsetX(t){return this.float32[1*t+0]}}Ji(ga,"GlyphOffsetArray");class xa extends $s{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Ji(xa,"SymbolLineVertexArray");class va extends Ls{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}va.prototype.size=12;class ba extends oa{get(t){return new va(this,t)}}Ji(ba,"FeatureIndexArray");class wa extends la{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Ji(wa,"FillExtrusionCentroidArray");const _a=Rs([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Aa=Rs([{name:"a_dash",components:4,type:"Uint16"}]);var Sa={exports:{}},ka={exports:{}};ka.exports=function(t,e){var r,n,i,s,a,o,l,u;for(n=t.length-(r=3&t.length),i=e,a=3432918353,o=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(s=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295;}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Ia=ka.exports,Ma={exports:{}};Ma.exports=function(t,e){for(var r,n=t.length,i=e^n,s=0;n>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++s;switch(n){case 3:i^=(255&t.charCodeAt(s+2))<<16;case 2:i^=(255&t.charCodeAt(s+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(s)))+((1540483477*(i>>>16)&65535)<<16);}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Ta=Ia,za=Ma.exports;Sa.exports=Ta,Sa.exports.murmur3=Ta,Sa.exports.murmur2=za;var Ba=p(Sa.exports);class Ea{constructor(){this.ids=[],this.positions=[],this.indexed=!1;}add(t,e,r,n){this.ids.push(Ca(t)),this.positions.push(e,r,n);}getPositions(t){const e=Ca(t);let r=0,n=this.ids.length-1;for(;r<n;){const t=r+n>>1;this.ids[t]>=e?n=t:r=t+1;}const i=[];for(;this.ids[r]===e;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(t,e){const r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return Pa(r,n,0,r.length-1),e&&e.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(t){const e=new Ea;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ca(t){const e=+t;return !isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Ba(String(t))}function Pa(t,e,r,n){for(;r<n;){const i=t[r+n>>1];let s=r-1,a=n+1;for(;;){do{s++;}while(t[s]<i);do{a--;}while(t[a]>i);if(s>=a)break;Da(t,s,a),Da(e,3*s,3*a),Da(e,3*s+1,3*a+1),Da(e,3*s+2,3*a+2);}a-r<n-a?(Pa(t,e,r,a),r=a+1):(Pa(t,e,a+1,n),n=a);}}function Da(t,e,r){const n=t[e];t[e]=t[r],t[r]=n;}Ji(Ea,"FeaturePositionMap");class Va{constructor(t){this.gl=t.gl,this.initialized=!1;}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class La extends Va{constructor(t){super(t),this.current=0;}set(t,e,r){this.fetchUniformLocation(t,e)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r));}}class Fa extends Va{constructor(t){super(t),this.current=[0,0,0,0];}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])));}}class Ra extends Va{constructor(t){super(t),this.current=Ee.transparent;}set(t,e,r){this.fetchUniformLocation(t,e)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)));}}const Ua=new Float32Array(16),$a=new Float32Array(9),ja=new Float32Array(4);function Oa(t){return [Ds(255*t.r,255*t.g),Ds(255*t.b,255*t.a)]}class qa{constructor(t,e,r){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=r;}setUniform(t,e,r,n,i){e.set(t,i,n.constantOr(this.value));}getBinding(t,e){return "color"===this.type?new Ra(t):new La(t)}}class Na{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.pattern=null,this.pixelRatio=1;}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br);}setUniform(t,e,r,n,i){const s="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;s&&e.set(t,i,s);}getBinding(t,e){return "u_pattern"===e||"u_dash"===e?new Fa(t):new La(t)}}class Ga{constructor(t,e,r,n){this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n;}populatePaintArray(t,e,r,n,i,s){const a=this.paintVertexArray.length,o=this.expression.evaluate(new ws(0),e,{},i,n,s);this.paintVertexArray.resize(t),this._setPaintValue(a,t,o);}updatePaintArray(t,e,r,n,i){const s=this.expression.evaluate({zoom:0},r,n,void 0,i);this._setPaintValue(t,e,s);}_setPaintValue(t,e,r){if("color"===this.type){const n=Oa(r);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n[0],n[1]);}else {for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r));}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}}class Za{constructor(t,e,r,n,i,s){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new s;}populatePaintArray(t,e,r,n,i,s){const a=this.expression.evaluate(new ws(this.zoom),e,{},i,n,s),o=this.expression.evaluate(new ws(this.zoom+1),e,{},i,n,s),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,a,o);}updatePaintArray(t,e,r,n,i){const s=this.expression.evaluate({zoom:this.zoom},r,n,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},r,n,void 0,i);this._setPaintValue(t,e,s,a);}_setPaintValue(t,e,r,n){if("color"===this.type){const i=Oa(r),s=Oa(n);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i[0],i[1],s[0],s[1]);}else {for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n));}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}setUniform(t,e,r,n,i){const s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,a=M(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);e.set(t,i,a);}getBinding(t,e){return new La(t)}}class Ka{constructor(t,e,r,n,i){this.expression=t,this.layerId=i,this.paintVertexAttributes=("array"===r?Aa:_a).members;for(let t=0;t<e.length;++t);this.paintVertexArray=new n;}populatePaintArray(t,e,r){const n=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],r);}updatePaintArray(t,e,r,n,i,s){this._setPaintValues(t,e,r.patterns&&r.patterns[this.layerId],s);}_setPaintValues(t,e,r,n){if(!n||!r)return;const i=n[r];if(!i)return;const{tl:s,br:a,pixelRatio:o}=i;for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,s[0],s[1],a[0],a[1],o);}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}}class Xa{constructor(t,e,r=(()=>!0)){this.binders={},this._buffers=[];const n=[];for(const i in t.paint._values){if(!r(i))continue;const s=t.paint.get(i);if(!(s instanceof Ts&&Ln(s.property.specification)))continue;const a=Ya(i,t.type),o=s.value,l=s.property.specification.type,u=!!s.property.useIntegerZoom,c="line-dasharray"===i||i.endsWith("pattern"),h="line-dasharray"===i&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==o.kind||h)if("source"===o.kind||h||c){const e=to(i,l,"source");this.binders[i]=c?new Ka(o,a,l,e,t.id):new Ga(o,a,l,e),n.push(`/a_${i}`);}else {const t=to(i,l,"composite");this.binders[i]=new Za(o,a,l,u,e,t),n.push(`/z_${i}`);}else this.binders[i]=c?new Na(o.value,a):new qa(o.value,a,l),n.push(`/u_${i}`);}this.cacheKey=n.sort().join("");}getMaxValue(t){const e=this.binders[t];return e instanceof Ga||e instanceof Za?e.maxValue:0}populatePaintArrays(t,e,r,n,i,s){for(const a in this.binders){const o=this.binders[a];(o instanceof Ga||o instanceof Za||o instanceof Ka)&&o.populatePaintArray(t,e,r,n,i,s);}}setConstantPatternPositions(t){for(const e in this.binders){const r=this.binders[e];r instanceof Na&&r.setConstantPatternPositions(t);}}updatePaintArrays(t,e,r,n,i,s){let a=!1;for(const o in t){const l=e.getPositions(o);for(const e of l){const l=r.feature(e.index);for(const r in this.binders){const u=this.binders[r];if((u instanceof Ga||u instanceof Za||u instanceof Ka)&&!0===u.expression.isStateDependent){const c=n.paint.get(r);u.expression=c.value,u.updatePaintArray(e.start,e.end,l,t[o],i,s),a=!0;}}}}return a}defines(){const t=[];for(const e in this.binders){const r=this.binders[e];(r instanceof qa||r instanceof Na)&&t.push(...r.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)));}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof Ga||r instanceof Za||r instanceof Ka)for(let e=0;e<r.paintVertexAttributes.length;e++)t.push(r.paintVertexAttributes[e].name);}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof qa||r instanceof Na||r instanceof Za)for(const e of r.uniformNames)t.push(e);}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof qa||n instanceof Na||n instanceof Za)for(const i of n.uniformNames)e.push({name:i,property:r,binding:n.getBinding(t,i)});}return e}setUniforms(t,e,r,n,i){for(const{name:e,property:s,binding:a}of r)this.binders[s].setUniform(t,a,i,n.get(s),e);}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof Ga||e instanceof Za||e instanceof Ka)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer);}}upload(t){for(const e in this.binders){const r=this.binders[e];(r instanceof Ga||r instanceof Za||r instanceof Ka)&&r.upload(t);}this.updatePaintBuffers();}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Ga||e instanceof Za||e instanceof Ka)&&e.destroy();}}}class Ja{constructor(t,e,r=(()=>!0)){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new Xa(n,e,r);this.needsUpload=!1,this._featureMap=new Ea,this._bufferOffset=0;}populatePaintArrays(t,e,r,n,i,s,a){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n,i,s,a);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0;}updatePaintArrays(t,e,r,n,i){for(const s of r)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(t,this._featureMap,e,s,n,i)||this.needsUpload;}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1;}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy();}}const Ha={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ya(t,e){return Ha[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const Wa={"line-pattern":{source:Gs,composite:Gs},"fill-pattern":{source:Gs,composite:Gs},"fill-extrusion-pattern":{source:Gs,composite:Gs},"line-dasharray":{source:Zs,composite:Zs}},Qa={color:{source:ca,composite:Ns},number:{source:sa,composite:ca}};function to(t,e,r){const n=Wa[t];return n&&n[r]||Qa[e][r]}Ji(qa,"ConstantBinder"),Ji(Na,"PatternConstantBinder"),Ji(Ga,"SourceExpressionBinder"),Ji(Ka,"PatternCompositeBinder"),Ji(Za,"CompositeExpressionBinder"),Ji(Xa,"ProgramConfiguration",{omit:["_buffers"]}),Ji(Ja,"ProgramConfigurationSet");const eo="-transition";class ro extends Qt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Ms(e.layout)),e.paint)){this._transitionablePaint=new Ss(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zs(e.paint);}}getLayoutProperty(t){return "visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,r={}){null!=e&&this._validate(ji,`layers.${this.id}.layout.${t}`,t,e,r)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e);}getPaintProperty(t){return U(t,eo)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,r={}){if(null!=e&&this._validate($i,`layers.${this.id}.paint.${t}`,t,e,r))return !1;if(U(t,eo))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const r=this._transitionablePaint._values[t],n=r.value.isDataDriven(),i=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value,a=s.isDataDriven(),o=U(t,"pattern")||"line-dasharray"===t;return a||n||o||this._handleOverridablePaintPropertyUpdate(t,i,s)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,r){return !1}isHidden(t){return !!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint);}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e);}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),j(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,r,n,i={}){return (!i||!1!==i.validate)&&qi(this,t.call(Ui,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:te,style:{glyphs:!0,sprite:!0}}))}is3D(){return !1}isSky(){return !1}isTileClipped(){return !1}hasOffscreenPass(){return !1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Ts&&Ln(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return !0}return !1}compileFilter(){this._filterCompiled||(this._featureFilter=hi(this.filter),this._filterCompiled=!0);}invalidateCompiledFilter(){this._filterCompiled=!1;}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const no=Rs([{name:"a_pos",components:2,type:"Int16"}],4),io=Rs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class so{constructor(t=[]){this.segments=t;}prepareSegment(t,e,r,n){let i=this.segments[this.segments.length-1];return t>so.MAX_VERTEX_ARRAY_LENGTH&&N(`Max vertices per segment is ${so.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>so.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy();}static simpleSegment(t,e,r,n){return new so([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}so.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ji(so,"SegmentVector");var ao=8192;class oo{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]));}setNorthEast(t){return this._ne=t instanceof Ol?new Ol(t.lng,t.lat):Ol.convert(t),this}setSouthWest(t){return this._sw=t instanceof Ol?new Ol(t.lng,t.lat):Ol.convert(t),this}extend(t){const e=this._sw,r=this._ne;let n,i;if(t instanceof Ol)n=t,i=t;else {if(!(t instanceof oo))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(oo.convert(t)):this.extend(Ol.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(Ol.convert(t)):this;if(n=t._sw,i=t._ne,!n||!i)return this}return e||r?(e.lng=Math.min(n.lng,e.lng),e.lat=Math.min(n.lat,e.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new Ol(n.lng,n.lat),this._ne=new Ol(i.lng,i.lat)),this}getCenter(){return new Ol((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ol(this.getWest(),this.getNorth())}getSouthEast(){return new Ol(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return [this._sw.toArray(),this._ne.toArray()]}toString(){return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return !(this._sw&&this._ne)}contains(t){const{lng:e,lat:r}=Ol.convert(t);let n=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(t){return !t||t instanceof oo?t:new oo(t)}}var lo=1e-6,uo="undefined"!=typeof Float32Array?Float32Array:Array;function co(){var t=new uo(9);return uo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ho(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=r[0],d=r[1],f=r[2],y=r[3],m=r[4],g=r[5],x=r[6],v=r[7],b=r[8];return t[0]=p*n+d*a+f*u,t[1]=p*i+d*o+f*c,t[2]=p*s+d*l+f*h,t[3]=y*n+m*a+g*u,t[4]=y*i+m*o+g*c,t[5]=y*s+m*l+g*h,t[6]=x*n+v*a+b*u,t[7]=x*i+v*o+b*c,t[8]=x*s+v*l+b*h,t}function po(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fo(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],y=e[13],m=e[14],g=e[15],x=r*o-n*a,v=r*l-i*a,b=r*u-s*a,w=n*l-i*o,_=n*u-s*o,A=i*u-s*l,S=c*y-h*f,k=c*m-p*f,I=c*g-d*f,M=h*m-p*y,T=h*g-d*y,z=p*g-d*m,B=x*z-v*T+b*M+w*I-_*k+A*S;return B?(t[0]=(o*z-l*T+u*M)*(B=1/B),t[1]=(i*T-n*z-s*M)*B,t[2]=(y*A-m*_+g*w)*B,t[3]=(p*_-h*A-d*w)*B,t[4]=(l*I-a*z-u*k)*B,t[5]=(r*z-i*I+s*k)*B,t[6]=(m*b-f*A-g*v)*B,t[7]=(c*A-p*b+d*v)*B,t[8]=(a*T-o*I+u*S)*B,t[9]=(n*I-r*T-s*S)*B,t[10]=(f*_-y*b+g*x)*B,t[11]=(h*b-c*_-d*x)*B,t[12]=(o*k-a*M-l*S)*B,t[13]=(r*M-n*k+i*S)*B,t[14]=(y*v-f*w-m*x)*B,t[15]=(c*w-h*v+p*x)*B,t):null}function yo(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],y=e[12],m=e[13],g=e[14],x=e[15],v=r[0],b=r[1],w=r[2],_=r[3];return t[0]=v*n+b*o+w*h+_*y,t[1]=v*i+b*l+w*p+_*m,t[2]=v*s+b*u+w*d+_*g,t[3]=v*a+b*c+w*f+_*x,t[4]=(v=r[4])*n+(b=r[5])*o+(w=r[6])*h+(_=r[7])*y,t[5]=v*i+b*l+w*p+_*m,t[6]=v*s+b*u+w*d+_*g,t[7]=v*a+b*c+w*f+_*x,t[8]=(v=r[8])*n+(b=r[9])*o+(w=r[10])*h+(_=r[11])*y,t[9]=v*i+b*l+w*p+_*m,t[10]=v*s+b*u+w*d+_*g,t[11]=v*a+b*c+w*f+_*x,t[12]=(v=r[12])*n+(b=r[13])*o+(w=r[14])*h+(_=r[15])*y,t[13]=v*i+b*l+w*p+_*m,t[14]=v*s+b*u+w*d+_*g,t[15]=v*a+b*c+w*f+_*x,t}function mo(t,e,r){var n,i,s,a,o,l,u,c,h,p,d,f,y=r[0],m=r[1],g=r[2];return e===t?(t[12]=e[0]*y+e[4]*m+e[8]*g+e[12],t[13]=e[1]*y+e[5]*m+e[9]*g+e[13],t[14]=e[2]*y+e[6]*m+e[10]*g+e[14],t[15]=e[3]*y+e[7]*m+e[11]*g+e[15]):(i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=n=e[0],t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=n*y+o*m+h*g+e[12],t[13]=i*y+l*m+p*g+e[13],t[14]=s*y+u*m+d*g+e[14],t[15]=a*y+c*m+f*g+e[15]),t}function go(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function xo(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*n,t[5]=a*i+c*n,t[6]=o*i+h*n,t[7]=l*i+p*n,t[8]=u*i-s*n,t[9]=c*i-a*n,t[10]=h*i-o*n,t[11]=p*i-l*n,t}function vo(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*n,t[1]=a*i-c*n,t[2]=o*i-h*n,t[3]=l*i-p*n,t[8]=s*n+u*i,t[9]=a*n+c*i,t[10]=o*n+h*i,t[11]=l*n+p*i,t}function bo(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wo(t,e,r){var n,i,s,a=r[0],o=r[1],l=r[2],u=Math.hypot(a,o,l);return u<lo?null:(a*=u=1/u,o*=u,l*=u,n=Math.sin(e),i=Math.cos(e),t[0]=a*a*(s=1-i)+i,t[1]=o*a*s+l*n,t[2]=l*a*s-o*n,t[3]=0,t[4]=a*o*s-l*n,t[5]=o*o*s+i,t[6]=l*o*s+a*n,t[7]=0,t[8]=a*l*s+o*n,t[9]=o*l*s-a*n,t[10]=l*l*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var _o=yo;function Ao(){var t=new uo(3);return uo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function So(t){var e=new uo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ko(t){return Math.hypot(t[0],t[1],t[2])}function Io(t,e,r){var n=new uo(3);return n[0]=t,n[1]=e,n[2]=r,n}function Mo(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function To(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function zo(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Bo(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Eo(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function Co(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Po(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function Do(t,e){var r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Vo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Lo(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],l=r[2];return t[0]=i*l-s*o,t[1]=s*a-n*l,t[2]=n*o-i*a,t}function Fo(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/(a=a||1),t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t}function Ro(t,e,r){var n=r[0],i=r[1],s=r[2],a=e[0],o=e[1],l=e[2],u=i*l-s*o,c=s*a-n*l,h=n*o-i*a,p=i*h-s*c,d=s*u-n*h,f=n*c-i*u,y=2*r[3];return c*=y,h*=y,d*=2,f*=2,t[0]=a+(u*=y)+(p*=2),t[1]=o+c+d,t[2]=l+h+f,t}var Uo,$o=To,jo=zo,Oo=ko;function qo(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function No(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a,t}function Go(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,t}function Zo(){var t=new uo(4);return uo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ko(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Xo(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*o,t[1]=i*l+s*o,t[2]=s*l-i*o,t[3]=a*l-n*o,t}function Jo(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=n*l-s*o,t[1]=i*l+a*o,t[2]=s*l+n*o,t[3]=a*l-i*o,t}Ao(),Uo=new uo(4),uo!=Float32Array&&(Uo[0]=0,Uo[1]=0,Uo[2]=0,Uo[3]=0);var Ho=No;Ao(),Io(1,0,0),Io(0,1,0),Zo(),Zo(),co();const Yo=Rs([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Wo}=Yo,Qo=Rs([{name:"a_pos_3",components:3,type:"Int16"}]);var tl=Rs([{name:"a_pos",type:"Int16",components:2}]);class el{constructor(t,e){this.pos=t,this.dir=e;}intersectsPlane(t,e,r){const n=Vo(e,this.dir);if(Math.abs(n)<1e-6)return !1;const i=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/n;return r[0]=this.pos[0]+this.dir[0]*i,r[1]=this.pos[1]+this.dir[1]*i,r[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(t,e,r){if(function(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],a=e[1],o=e[2];return Math.abs(r-s)<=lo*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=lo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=lo*Math.max(1,Math.abs(i),Math.abs(o))}(this.pos,t)||0===e)return r[0]=r[1]=r[2]=0,!1;const[n,i,s]=this.dir,a=this.pos[0]-t[0],o=this.pos[1]-t[1],l=this.pos[2]-t[2],u=n*n+i*i+s*s,c=2*(a*n+o*i+l*s),h=c*c-4*u*(a*a+o*o+l*l-e*e);if(h<0){const t=Math.max(-c/2,0),u=a+n*t,h=o+i*t,p=l+s*t,d=Math.hypot(u,h,p);return r[0]=u*e/d,r[1]=h*e/d,r[2]=p*e/d,!1}{const t=(-c-Math.sqrt(h))/(2*u);if(t<0){const t=Math.hypot(a,o,l);return r[0]=a*e/t,r[1]=o*e/t,r[2]=l*e/t,!1}return r[0]=a+n*t,r[1]=o+i*t,r[2]=l+s*t,!0}}}class rl{constructor(t,e,r,n,i){this.TL=t,this.TR=e,this.BR=r,this.BL=n,this.horizon=i;}static fromInvProjectionMatrix(t,e,r){const n=[-1,1,1],i=[1,1,1],s=[1,-1,1],a=[-1,-1,1],o=Fo(n,n,t),l=Fo(i,i,t),u=Fo(s,s,t),c=Fo(a,a,t);return new rl(o,l,u,c,e/r)}}class nl{constructor(t,e){this.points=t,this.planes=e;}static fromInvProjectionMatrix(t,e,r,n){const i=Math.pow(2,r),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const s=Go([],r,t),a=1/s[3]/e*i;return function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}(s,s,[a,a,n?1/s[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=Do([],Lo([],$o([],s[t[0]],s[t[1]]),$o([],s[t[2]],s[t[1]]))),r=-Vo(e,s[t[1]]);return e.concat(r)}));return new nl(s,a)}}class il{static fromPoints(t){const e=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0];for(const n of t)Bo(e,e,n),Eo(r,r,n);return new il(e,r)}static applyTransform(t,e){const r=t.getCorners();for(let t=0;t<r.length;++t)Fo(r[t],r[t],e);return il.fromPoints(r)}constructor(t,e){this.min=t,this.max=e,this.center=Co([],Mo([],this.min,this.max),.5);}quadrant(t){const e=[t%2==0,t<2],r=So(this.min),n=So(this.max);for(let t=0;t<e.length;t++)r[t]=e[t]?this.min[t]:this.center[t],n[t]=e[t]?this.center[t]:this.max[t];return n[2]=this.max[2],new il(r,n)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return [[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let r=!0;for(let n=0;n<t.planes.length;n++){const i=t.planes[n];let s=0;for(let t=0;t<e.length;t++)s+=Vo(i,e[t])+i[3]>=0;if(0===s)return 0;s!==e.length&&(r=!1);}if(r)return 2;for(let e=0;e<3;e++){let r=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<t.points.length;i++){const s=t.points[i][e]-this.min[e];r=Math.min(r,s),n=Math.max(n,s);}if(n<0||r>this.max[e]-this.min[e])return 0}return 1}}const sl=5,al=6,ol=ao/Math.PI/2,ll=16383,ul=64,cl=[ul,32,16],hl=-ol,pl=ol,dl=[new il([hl,hl,hl],[pl,pl,pl]),new il([hl,hl,hl],[0,0,pl]),new il([0,hl,hl],[pl,0,pl]),new il([hl,0,hl],[0,pl,pl]),new il([0,0,hl],[pl,pl,pl])];function fl(t){return t*ol/Ul}function yl(t,e,r,n=!0){const i=Co([],t._camera.position,t.worldSize),s=[e,r,1,1];Go(s,s,t.pixelMatrixInverse),qo(s,s,1/s[3]);const a=Do([],$o([],s,i)),o=t.globeMatrix,l=[o[12],o[13],o[14]],u=$o([],l,i),c=ko(u),h=Do([],u),p=t.worldSize/(2*Math.PI),d=Vo(h,a),f=Math.asin(p/c);if(f<Math.acos(d)){if(!n)return null;const t=[],e=[];Co(t,a,c/d),Do(e,$o(e,t,u)),Do(a,Mo(a,u,Co(a,e,Math.tan(f)*c)));}const y=[];new el(i,a).closestPointOnSphere(l,p,y);const m=Do([],W(o,0)),g=Do([],W(o,1)),x=Do([],W(o,2)),v=Vo(m,y),b=Vo(g,y),w=Vo(x,y),A=_(Math.asin(-b/p));let S=_(Math.atan2(v,w));S=t.center.lng+function(t,e){const r=(e-t+180)%360-180;return r<-180?r+360:r}(t.center.lng,S);const k=Nl(S),I=M(Gl(A),0,1);return new Wl(k,I)}class ml{constructor(t,e,r){this.a=$o([],t,r),this.b=$o([],e,r),this.center=r;const n=Do([],this.a),i=Do([],this.b);this.angle=Math.acos(Vo(n,i));}}function gl(t,e){if(0===t.angle)return null;let r;return r=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),r<0||r>1?null:function(t,e,r,n){const i=Math.sin(r);return t*(Math.sin((1-n)*r)/i)+e*(Math.sin(n*r)/i)}(t.a[e],t.b[e],t.angle,M(r,0,1))+t.center[e]}function xl(t){if(t.z<=1)return dl[t.z+2*t.y+t.x];const e=Sl(Al(t));return il.fromPoints(e)}function vl(t,e,r){return Co(t,t,1-r),Po(t,t,e,r)}function bl(t,e){const r=Pl(e.zoom);if(0===r)return xl(t);const n=Al(t),i=Sl(n),s=Nl(n.getWest())*e.worldSize,a=Nl(n.getEast())*e.worldSize,o=Gl(n.getNorth())*e.worldSize,l=Gl(n.getSouth())*e.worldSize,u=[s,o,0],c=[a,o,0],h=[s,l,0],p=[a,l,0],d=fo([],e.globeMatrix);return Fo(u,u,d),Fo(c,c,d),Fo(h,h,d),Fo(p,p,d),i[0]=vl(i[0],h,r),i[1]=vl(i[1],p,r),i[2]=vl(i[2],c,r),i[3]=vl(i[3],u,r),il.fromPoints(i)}function wl(t,e,r){for(const n of t)Fo(n,n,e),Co(n,n,r);}function _l(t,e,r){const n=e/t.worldSize,i=t.globeMatrix;if(r.z<=1){const t=xl(r).getCorners();return wl(t,i,n),il.fromPoints(t)}const s=Al(r),a=Sl(s);wl(a,i,n);const o=Number.MAX_VALUE,l=[-o,-o,-o],u=[o,o,o];if(s.contains(t.center)){for(const t of a)Bo(u,u,t),Eo(l,l,t);l[2]=0;const e=t.point,r=[e.x*n,e.y*n,0];return Bo(u,u,r),Eo(l,l,r),new il(u,l)}const c=[i[12]*n,i[13]*n,i[14]*n],h=s.getCenter(),p=M(t.center.lat,-Hl,Hl),d=M(h.lat,-Hl,Hl),f=Nl(t.center.lng),y=Gl(p);let m=f-Nl(h.lng);const g=y-Gl(d);m>.5?m-=1:m<-.5&&(m+=1);let x=0;Math.abs(m)>Math.abs(g)?x=m>=0?1:3:(x=g>=0?0:2,Po(c,c,[i[4]*n,i[5]*n,i[6]*n],-Math.sin(w(g>=0?s.getSouth():s.getNorth()))*ol));const v=a[x],b=a[(x+1)%4],_=new ml(v,b,c),A=[gl(_,0)||v[0],gl(_,1)||v[1],gl(_,2)||v[2]],S=Pl(t.zoom);if(S>0){const n=function({x:t,y:e,z:r},n,i,s,a){const o=1/(1<<r);let l=t*o,u=l+o,c=e*o,h=c+o,p=0;const d=(l+u)/2-s;return d>.5?p=-1:d<-.5&&(p=1),l=((l+p)*n-(s*=n))*i+s,u=((u+p)*n-s)*i+s,c=(c*n-(a*=n))*i+a,h=(h*n-a)*i+a,[[l,h,0],[u,h,0],[u,c,0],[l,c,0]]}(r,e,t._pixelsPerMercatorPixel,f,y);for(let t=0;t<a.length;t++)vl(a[t],n[t],S);const i=Mo([],n[x],n[(x+1)%4]);Co(i,i,.5),vl(A,i,S);}for(const t of a)Bo(u,u,t),Eo(l,l,t);return u[2]=Math.min(v[2],b[2]),Bo(u,u,A),Eo(l,l,A),new il(u,l)}function Al({x:t,y:e,z:r}){const n=1/(1<<r),i=new Ol(Kl(t*n),Xl((e+1)*n)),s=new Ol(Kl((t+1)*n),Xl(e*n));return new oo(i,s)}function Sl(t){const e=w(t.getNorth()),r=w(t.getSouth()),n=Math.cos(e),i=Math.cos(r),s=Math.sin(e),a=Math.sin(r),o=t.getWest(),l=t.getEast();return [kl(i,a,o),kl(i,a,l),kl(n,s,l),kl(n,s,o)]}function kl(t,e,r,n=ol){return r=w(r),[t*Math.sin(r)*n,-e*n,t*Math.cos(r)*n]}function Il(t,e,r){return kl(Math.cos(w(t)),Math.sin(w(t)),e,r)}function Ml(t,e,r,n){const i=1<<r.z,s=(t/ao+r.x)/i;return Il(Xl((e/ao+r.y)/i),Kl(s),n)}function Tl({min:t,max:e}){return ll/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const zl=new Float64Array(16);function Bl(t){const e=Tl(t),r=bo(zl,[e,e,e]);return mo(r,r,((n=[])[0]=-(i=t.min)[0],n[1]=-i[1],n[2]=-i[2],n));var n,i;}function El(t){const e=(n=t.min,(r=zl)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r);var r,n;const i=1/Tl(t);return go(e,e,[i,i,i])}function Cl(t,e,r,n,i){const s=function(t){const e=ao/(2*Math.PI);return t/(2*Math.PI)/e}(r),a=[t,e,-r/(2*Math.PI)],o=po(new Float64Array(16));return mo(o,o,a),go(o,o,[s,s,s]),xo(o,o,w(-i)),vo(o,o,w(-n)),o}function Pl(t){return T(sl,al,t)}function Dl(t,e){const r=Il(e.lat,e.lng),n=function(t){const e=Il(t._center.lat,t._center.lng);let r=Lo([],Io(0,1,0),e);const n=wo([],-t.angle,e);r=Fo(r,r,n),wo(n,-t._pitch,r);const i=Do([],e);return Co(i,i,fl(t.cameraToCenterDistance/t.pixelsPerMeter)),Fo(i,i,n),Mo([],e,i)}(t);return a=(i=To([],n,r))[0],o=i[1],l=i[2],u=(s=r)[0],c=s[1],h=s[2],d=(p=Math.sqrt(a*a+o*o+l*l)*Math.sqrt(u*u+c*c+h*h))&&Vo(i,s)/p,Math.acos(Math.min(Math.max(d,-1),1));var i,s,a,o,l,u,c,h,p,d;}function Vl(t,e){return Dl(t,e)>Math.PI/2*1.01}const Ll=w(85),Fl=Math.cos(Ll),Rl=Math.sin(Ll),Ul=6371008.8,$l=2*Math.PI*Ul;class jl{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new jl(z(this.lng,-180,180),this.lat)}toArray(){return [this.lng,this.lat]}toString(){return `LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,r=this.lat*e,n=t.lat*e,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return Ul*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new oo(new jl(this.lng-r,this.lat-e),new jl(this.lng+r,this.lat+e))}toEcef(t){const e=fl(t);return Il(this.lat,this.lng,ol+e)}static convert(t){if(t instanceof jl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new jl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new jl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Ol=jl;function ql(t){return $l*Math.cos(t*Math.PI/180)}function Nl(t){return (180+t)/360}function Gl(t){return (180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Zl(t,e){return t/ql(e)}function Kl(t){return 360*t-180}function Xl(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Jl(t,e){return t*ql(Xl(e))}const Hl=85.051129;function Yl(t){return 1/Math.cos(t*Math.PI/180)}class Wl{constructor(t,e,r=0){this.x=+t,this.y=+e,this.z=+r;}static fromLngLat(t,e=0){const r=Ol.convert(t);return new Wl(Nl(r.lng),Gl(r.lat),Zl(e,r.lat))}toLngLat(){return new Ol(Kl(this.x),Xl(this.y))}toAltitude(){return Jl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$l*Yl(Xl(this.y))}}function Ql(t,e,r,n,i,s,a,o,l){const u=(e+n)/2,c=(r+i)/2,h=new x(u,c);o(h),function(t,e,r,n,i,s){const a=r-i,o=n-s;return Math.abs((n-e)*a-(r-t)*o)/Math.hypot(a,o)}(h.x,h.y,s.x,s.y,a.x,a.y)>=l?(Ql(t,e,r,u,c,s,h,o,l),Ql(t,u,c,n,i,h,a,o,l)):t.push(a);}function tu(t,e,r){let n=t[0],i=n.x,s=n.y;e(n);const a=[n];for(let o=1;o<t.length;o++){const l=t[o],{x:u,y:c}=l;e(l),Ql(a,i,s,u,c,n,l,e,r),i=u,s=c,n=l;}return a}function eu(t,e,r,n){if(n(e,r)){const i=e.add(r)._mult(.5);eu(t,e,i,n),eu(t,i,r,n);}else t.push(r);}function ru(t,e){let r=t[0];const n=[r];for(let i=1;i<t.length;i++){const s=t[i];eu(n,r,s,e),r=s;}return n}const nu=Math.pow(2,14)-1,iu=-nu-1;function su(t,e){const r=Math.round(t.x*e),n=Math.round(t.y*e);return t.x=M(r,iu,nu),t.y=M(n,iu,nu),(r<t.x||r>t.x+1||n<t.y||n>t.y+1)&&N("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function au(t,e,r){const n=t.loadGeometry(),i=t.extent,s=ao/i;if(e&&r&&r.projection.isReprojectedInTileSpace){const s=1<<e.z,{scale:a,x:o,y:l,projection:u}=r,c=t=>{const r=Kl((e.x+t.x/i)/s),n=Xl((e.y+t.y/i)/s),c=u.project(r,n);t.x=(c.x*a-o)*i,t.y=(c.y*a-l)*i;};for(let e=0;e<n.length;e++)if(1!==t.type)n[e]=tu(n[e],c,1);else {const t=[];for(const r of n[e])r.x<0||r.x>=i||r.y<0||r.y>=i||(c(r),t.push(r));n[e]=t;}}for(const t of n)for(const e of t)su(e,s);return n}function ou(t,e){return {type:t.type,id:t.id,properties:t.properties,geometry:e?au(t):[]}}function lu(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2);}function uu(t,e,r){const n=16384;t.emplaceBack(e.x,e.y,e.z,r[0]*n,r[1]*n,r[2]*n);}class cu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new $s,this.indexArray=new ra,this.segments=new so,this.programConfigurations=new Ja(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r,n){const i=this.layers[0],s=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:e,id:i,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=ou(e,t);if(!this.layers[0]._featureFilter.filter(new ws(this.zoom),u,r))continue;const c=a?a.evaluate(u,{},r):void 0,h={id:i,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?u.geometry:au(e,r,n),patterns:{},sortKey:c};s.push(h);}a&&s.sort(((t,e)=>t.sortKey-e.sortKey));let o=null;"globe"===n.projection.name&&(this.globeExtVertexArray=new Ks,o=n.projection);for(const n of s){const{geometry:i,index:s,sourceLayerIndex:a}=n,l=t[s].feature;this.addFeature(n,i,s,e.availableImages,r,o),e.featureIndex.insert(l,i,s,a,this.index);}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,no.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,io.members))),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy());}addFeature(t,e,r,n,i,s){for(const r of e)for(const e of r){const r=e.x,n=e.y;if(r<0||r>=ao||n<0||n>=ao)continue;if(s){const t=s.projectTilePoint(r,n,i),e=s.upVector(i,r,n),a=this.globeExtVertexArray;uu(a,t,e),uu(a,t,e),uu(a,t,e),uu(a,t,e);}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=a.vertexLength;lu(this.layoutVertexArray,r,n,-1,-1),lu(this.layoutVertexArray,r,n,1,-1),lu(this.layoutVertexArray,r,n,1,1),lu(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+2,o+3),a.vertexLength+=4,a.primitiveLength+=2;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{},n,i);}}function hu(t,e){for(let r=0;r<t.length;r++)if(bu(e,t[r]))return !0;for(let r=0;r<e.length;r++)if(bu(t,e[r]))return !0;return !!yu(t,e)}function pu(t,e,r){return !!bu(t,e)||!!gu(e,t,r)}function du(t,e){if(1===t.length)return vu(e,t[0]);for(let r=0;r<e.length;r++){const n=e[r];for(let e=0;e<n.length;e++)if(bu(t,n[e]))return !0}for(let r=0;r<t.length;r++)if(vu(e,t[r]))return !0;for(let r=0;r<e.length;r++)if(yu(t,e[r]))return !0;return !1}function fu(t,e,r){if(t.length>1){if(yu(t,e))return !0;for(let n=0;n<e.length;n++)if(gu(e[n],t,r))return !0}for(let n=0;n<t.length;n++)if(gu(t[n],e,r))return !0;return !1}function yu(t,e){if(0===t.length||0===e.length)return !1;for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1];for(let t=0;t<e.length-1;t++)if(mu(n,i,e[t],e[t+1]))return !0}return !1}function mu(t,e,r,n){return G(t,r,n)!==G(e,r,n)&&G(t,e,r)!==G(t,e,n)}function gu(t,e,r){const n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(let r=1;r<e.length;r++)if(xu(t,e[r-1],e[r])<n)return !0;return !1}function xu(t,e,r){const n=e.distSqr(r);if(0===n)return t.distSqr(e);const i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(i<0?e:i>1?r:r.sub(e)._mult(i)._add(e))}function vu(t,e){let r,n,i,s=!1;for(let a=0;a<t.length;a++){r=t[a];for(let t=0,a=r.length-1;t<r.length;a=t++)n=r[t],i=r[a],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(s=!s);}return s}function bu(t,e){let r=!1;for(let n=0,i=t.length-1;n<t.length;i=n++){const s=t[n],a=t[i];s.y>e.y!=a.y>e.y&&e.x<(a.x-s.x)*(e.y-s.y)/(a.y-s.y)+s.x&&(r=!r);}return r}function wu(t,e,r,n,i){for(const s of t)if(e<=s.x&&r<=s.y&&n>=s.x&&i>=s.y)return !0;const s=[new x(e,r),new x(e,i),new x(n,i),new x(n,r)];if(t.length>2)for(const e of s)if(bu(t,e))return !0;for(let e=0;e<t.length-1;e++)if(_u(t[e],t[e+1],s))return !0;return !1}function _u(t,e,r){const n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return !1;const s=G(t,e,r[0]);return s!==G(t,e,r[1])||s!==G(t,e,r[2])||s!==G(t,e,r[3])}function Au(t,e,r){const n=e.paint.get(t).value;return "constant"===n.kind?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function Su(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ku(t,e,r,n,i){if(!e[0]&&!e[1])return t;const s=x.convert(e)._mult(i);"viewport"===r&&s._rotate(-n);const a=[];for(let e=0;e<t.length;e++)a.push(t[e].sub(s));return a}function Iu(t,e,r,n){const i=x.convert(t)._mult(n);return "viewport"===e&&i._rotate(-r),i}Ji(cu,"CircleBucket",{omit:["layers"]});const Mu=new Ps({"circle-sort-key":new Es(te.layout_circle["circle-sort-key"])});var Tu={paint:new Ps({"circle-radius":new Es(te.paint_circle["circle-radius"]),"circle-color":new Es(te.paint_circle["circle-color"]),"circle-blur":new Es(te.paint_circle["circle-blur"]),"circle-opacity":new Es(te.paint_circle["circle-opacity"]),"circle-translate":new Bs(te.paint_circle["circle-translate"]),"circle-translate-anchor":new Bs(te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bs(te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bs(te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Es(te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Es(te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Es(te.paint_circle["circle-stroke-opacity"])}),layout:Mu};function zu(t,e,r,n,i,s,a,o,l){if(s&&t.queryGeometry.isAboveHorizon)return !1;s&&(l*=t.pixelToTileUnitsFactor);const u=t.tileID.canonical,c=r.projection.upVectorScale(u,r.center.lat,r.worldSize).metersToTile;for(const h of e)for(const e of h){const h=e.add(o),p=i&&r.elevation?r.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,d=r.projection.projectTilePoint(h.x,h.y,u);if(p>0){const t=r.projection.upVector(u,h.x,h.y);d.x+=t[0]*c*p,d.y+=t[1]*c*p,d.z+=t[2]*c*p;}const f=s?h:Bu(d.x,d.y,d.z,n),y=s?t.tilespaceRays.map((t=>Pu(t,p))):t.queryGeometry.screenGeometry,m=Go([],[d.x,d.y,d.z,1],n);if(!a&&s?l*=m[3]/r.cameraToCenterDistance:a&&!s&&(l*=r.cameraToCenterDistance/m[3]),s){const t=Xl((e.y/ao+u.y)/(1<<u.z));l/=r.projection.pixelsPerMeter(t,1)/Zl(1,t);}if(pu(y,f,l))return !0}return !1}function Bu(t,e,r,n){const i=Go([],[t,e,r,1],n);return new x(i[0]/i[3],i[1]/i[3])}const Eu=Io(0,0,0),Cu=Io(0,0,1);function Pu(t,e){const r=Ao();return Eu[2]=e,t.intersectsPlane(Eu,Cu,r),new x(r[0],r[1])}class Du extends cu{}function Vu(t,{width:e,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*r*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(e*r*n);return t.width=e,t.height=r,t.data=i,t}function Lu(t,e,r){const{width:n,height:i}=e;n===t.width&&i===t.height||(Fu(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=e.data);}function Fu(t,e,r,n,i,s){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,o=e.data;for(let l=0;l<i.height;l++){const u=((r.y+l)*t.width+r.x)*s,c=((n.y+l)*e.width+n.x)*s;for(let t=0;t<i.width*s;t++)o[c+t]=a[u+t];}return e}Ji(Du,"HeatmapBucket",{omit:["layers"]});class Ru{constructor(t,e){Vu(this,t,1,e);}resize(t){Lu(this,new Ru(t),1);}clone(){return new Ru({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){Fu(t,e,r,n,i,1);}}class Uu{constructor(t,e){Vu(this,t,4,e);}resize(t){Lu(this,new Uu(t),4);}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t;}clone(){return new Uu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){Fu(t,e,r,n,i,4);}}Ji(Ru,"AlphaImage"),Ji(Uu,"RGBAImage");var $u={paint:new Ps({"heatmap-radius":new Es(te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Es(te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bs(te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Cs(te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bs(te.paint_heatmap["heatmap-opacity"])})};function ju(t){const e={},r=t.resolution||256,n=t.clips?t.clips.length:1,i=t.image||new Uu({width:r,height:n}),s=(r,n,s)=>{e[t.evaluationKey]=s;const a=t.expression.evaluate(e);i.data[r+n+0]=Math.floor(255*a.r/a.a),i.data[r+n+1]=Math.floor(255*a.g/a.a),i.data[r+n+2]=Math.floor(255*a.b/a.a),i.data[r+n+3]=Math.floor(255*a.a);};if(t.clips)for(let e=0,i=0;e<n;++e,i+=4*r)for(let n=0,a=0;n<r;n++,a+=4){const o=n/(r-1),{start:l,end:u}=t.clips[e];s(i,a,l*(1-o)+u*o);}else for(let t=0,e=0;t<r;t++,e+=4)s(0,e,t/(r-1));return i}var Ou={paint:new Ps({"hillshade-illumination-direction":new Bs(te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Bs(te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bs(te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bs(te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bs(te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bs(te.paint_hillshade["hillshade-accent-color"])})};const qu=Rs([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nu}=qu;var Gu={exports:{}};function Zu(t,e,r){r=r||2;var n,i,s,a,o,l,u,c=e&&e.length,h=c?e[0]*r:t.length,p=Ku(t,0,h,r,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(t,e,r,n){var i,s,a,o=[];for(i=0,s=e.length;i<s;i++)(a=Ku(t,e[i]*n,i<s-1?e[i+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),o.push(ic(a));for(o.sort(tc),i=0;i<o.length;i++)r=ec(o[i],r);return r}(t,e,p,r)),t.length>80*r){n=s=t[0],i=a=t[1];for(var f=r;f<h;f+=r)(o=t[f])<n&&(n=o),(l=t[f+1])<i&&(i=l),o>s&&(s=o),l>a&&(a=l);u=0!==(u=Math.max(s-n,a-i))?32767/u:0;}return Ju(p,d,r,n,i,u,0),d}function Ku(t,e,r,n,i){var s,a;if(i===gc(t,e,r,n)>0)for(s=e;s<r;s+=n)a=fc(s,t[s],t[s+1],a);else for(s=r-n;s>=e;s-=n)a=fc(s,t[s],t[s+1],a);return a&&lc(a,a.next)&&(yc(a),a=a.next),a}function Xu(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!lc(n,n.next)&&0!==oc(n.prev,n,n.next))n=n.next;else {if(yc(n),(n=e=n.prev)===n.next)break;r=!0;}}while(r||n!==e);return e}function Ju(t,e,r,n,i,s,a){if(t){!a&&s&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=nc(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,s,a,o,l,u=1;do{for(r=t,t=null,s=null,a=0;r;){for(a++,n=r,o=0,e=0;e<u&&(o++,n=n.nextZ);e++);for(l=u;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n;}s.nextZ=null,u*=2;}while(a>1)}(i);}(t,n,i,s);for(var o,l,u=t;t.prev!==t.next;)if(o=t.prev,l=t.next,s?Yu(t,n,i,s):Hu(t))e.push(o.i/r|0),e.push(t.i/r|0),e.push(l.i/r|0),yc(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Ju(t=Wu(Xu(t),e,r),e,r,n,i,s,2):2===a&&Qu(t,e,r,n,i,s):Ju(Xu(t),e,r,n,i,s,1);break}}}function Hu(t){var e=t.prev,r=t,n=t.next;if(oc(e,r,n)>=0)return !1;for(var i=e.x,s=r.x,a=n.x,o=e.y,l=r.y,u=n.y,c=i<s?i<a?i:a:s<a?s:a,h=o<l?o<u?o:u:l<u?l:u,p=i>s?i>a?i:a:s>a?s:a,d=o>l?o>u?o:u:l>u?l:u,f=n.next;f!==e;){if(f.x>=c&&f.x<=p&&f.y>=h&&f.y<=d&&sc(i,o,s,l,a,u,f.x,f.y)&&oc(f.prev,f,f.next)>=0)return !1;f=f.next;}return !0}function Yu(t,e,r,n){var i=t.prev,s=t,a=t.next;if(oc(i,s,a)>=0)return !1;for(var o=i.x,l=s.x,u=a.x,c=i.y,h=s.y,p=a.y,d=o<l?o<u?o:u:l<u?l:u,f=c<h?c<p?c:p:h<p?h:p,y=o>l?o>u?o:u:l>u?l:u,m=c>h?c>p?c:p:h>p?h:p,g=nc(d,f,e,r,n),x=nc(y,m,e,r,n),v=t.prevZ,b=t.nextZ;v&&v.z>=g&&b&&b.z<=x;){if(v.x>=d&&v.x<=y&&v.y>=f&&v.y<=m&&v!==i&&v!==a&&sc(o,c,l,h,u,p,v.x,v.y)&&oc(v.prev,v,v.next)>=0)return !1;if(v=v.prevZ,b.x>=d&&b.x<=y&&b.y>=f&&b.y<=m&&b!==i&&b!==a&&sc(o,c,l,h,u,p,b.x,b.y)&&oc(b.prev,b,b.next)>=0)return !1;b=b.nextZ;}for(;v&&v.z>=g;){if(v.x>=d&&v.x<=y&&v.y>=f&&v.y<=m&&v!==i&&v!==a&&sc(o,c,l,h,u,p,v.x,v.y)&&oc(v.prev,v,v.next)>=0)return !1;v=v.prevZ;}for(;b&&b.z<=x;){if(b.x>=d&&b.x<=y&&b.y>=f&&b.y<=m&&b!==i&&b!==a&&sc(o,c,l,h,u,p,b.x,b.y)&&oc(b.prev,b,b.next)>=0)return !1;b=b.nextZ;}return !0}function Wu(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!lc(i,s)&&uc(i,n,n.next,s)&&pc(i,s)&&pc(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),yc(n),yc(n.next),n=t=s),n=n.next;}while(n!==t);return Xu(n)}function Qu(t,e,r,n,i,s){var a=t;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&ac(a,o)){var l=dc(a,o);return a=Xu(a,a.next),l=Xu(l,l.next),Ju(a,e,r,n,i,s,0),void Ju(l,e,r,n,i,s,0)}o=o.next;}a=a.next;}while(a!==t)}function tc(t,e){return t.x-e.x}function ec(t,e){var r=function(t,e){var r,n=e,i=t.x,s=t.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>a&&(a=o,r=n.x<n.next.x?n:n.next,o===i))return r}n=n.next;}while(n!==e);if(!r)return null;var l,u=r,c=r.x,h=r.y,p=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&sc(s<h?i:a,s,c,h,s<h?a:i,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(i-n.x),pc(n,t)&&(l<p||l===p&&(n.x>r.x||n.x===r.x&&rc(r,n)))&&(r=n,p=l)),n=n.next;}while(n!==u);return r}(t,e);if(!r)return e;var n=dc(r,t);return Xu(n,n.next),Xu(r,r.next)}function rc(t,e){return oc(t.prev,t,e.prev)<0&&oc(e.next,t,t.next)<0}function nc(t,e,r,n,i){return (t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ic(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;}while(e!==t);return r}function sc(t,e,r,n,i,s,a,o){return (i-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(r-a)*(e-o)&&(r-a)*(s-o)>=(i-a)*(n-o)}function ac(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&uc(r,r.next,t,e))return !0;r=r.next;}while(r!==t);return !1}(t,e)&&(pc(t,e)&&pc(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;}while(r!==t);return n}(t,e)&&(oc(t.prev,t,e.prev)||oc(t,e.prev,e))||lc(t,e)&&oc(t.prev,t,t.next)>0&&oc(e.prev,e,e.next)>0)}function oc(t,e,r){return (e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function lc(t,e){return t.x===e.x&&t.y===e.y}function uc(t,e,r,n){var i=hc(oc(t,e,r)),s=hc(oc(t,e,n)),a=hc(oc(r,n,t)),o=hc(oc(r,n,e));return i!==s&&a!==o||!(0!==i||!cc(t,r,e))||!(0!==s||!cc(t,n,e))||!(0!==a||!cc(r,t,n))||!(0!==o||!cc(r,e,n))}function cc(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function hc(t){return t>0?1:t<0?-1:0}function pc(t,e){return oc(t.prev,t,t.next)<0?oc(t,e,t.next)>=0&&oc(t,t.prev,e)>=0:oc(t,e,t.prev)<0||oc(t,t.next,e)<0}function dc(t,e){var r=new mc(t.i,t.x,t.y),n=new mc(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function fc(t,e,r,n){var i=new mc(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function yc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ);}function mc(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1;}function gc(t,e,r,n){for(var i=0,s=e,a=r-n;s<r;s+=n)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}Gu.exports=Zu,Gu.exports.default=Zu,Zu.deviation=function(t,e,r,n){var i=e&&e.length,s=Math.abs(gc(t,0,i?e[0]*r:t.length,r));if(i)for(var a=0,o=e.length;a<o;a++)s-=Math.abs(gc(t,e[a]*r,a<o-1?e[a+1]*r:t.length,r));var l=0;for(a=0;a<n.length;a+=3){var u=n[a]*r,c=n[a+1]*r,h=n[a+2]*r;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]));}return 0===s&&0===l?0:Math.abs((l-s)/s)},Zu.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var a=0;a<e;a++)r.vertices.push(t[i][s][a]);i>0&&r.holes.push(n+=t[i-1].length);}return r};var xc=p(Gu.exports);function vc(t,e,r,n,i){bc(t,e,r||0,n||t.length-1,i||_c);}function bc(t,e,r,n,i){for(;n>r;){if(n-r>600){var s=n-r+1,a=e-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);bc(t,e,Math.max(r,Math.floor(e-a*l/s+u)),Math.min(n,Math.floor(e+(s-a)*l/s+u)),i);}var c=t[e],h=r,p=n;for(wc(t,r,e),i(t[n],c)>0&&wc(t,r,n);h<p;){for(wc(t,h,p),h++,p--;i(t[h],c)<0;)h++;for(;i(t[p],c)>0;)p--;}0===i(t[r],c)?wc(t,r,p):wc(t,++p,n),p<=e&&(r=p+1),e<=p&&(n=p-1);}}function wc(t,e,r){var n=t[e];t[e]=t[r],t[r]=n;}function _c(t,e){return t<e?-1:t>e?1:0}function Ac(t,e){const r=t.length;if(r<=1)return [t];const n=[];let i,s;for(let e=0;e<r;e++){const r=Z(t[e]);0!==r&&(t[e].area=Math.abs(r),void 0===s&&(s=r<0),s===r<0?(i&&n.push(i),i=[t[e]]):i.push(t[e]));}if(i&&n.push(i),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(vc(n[t],e,1,n[t].length-1,Sc),n[t]=n[t].slice(0,e));return n}function Sc(t,e){return e.area-t.area}function kc(t,e,r){const n=r.patternDependencies;let i=!1;for(const r of e){const e=r.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const s=e.constantOr(null);s&&(i=!0,n[s]=!0);}return i}function Ic(t,e,r,n,i){const s=i.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:n},r,{},i.availableImages);t=t&&t.name?t.name:t,s[t]=!0,r.patterns[a.id]=t;}}return r}class Mc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $s,this.indexArray=new ra,this.indexArray2=new la,this.programConfigurations=new Ja(t.layers,t.zoom),this.segments=new so,this.segments2=new so,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection;}populate(t,e,r,n){this.hasPattern=kc("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),s=[];for(const{feature:a,id:o,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=ou(a,t);if(!this.layers[0]._featureFilter.filter(new ws(this.zoom),c,r))continue;const h=i?i.evaluate(c,{},r,e.availableImages):void 0,p={id:o,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:t?c.geometry:au(a,r,n),patterns:{},sortKey:h};s.push(p);}i&&s.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of s){const{geometry:i,index:s,sourceLayerIndex:a}=n;if(this.hasPattern){const t=Ic("fill",this.layers,n,this.zoom,e);this.patternFeatures.push(t);}else this.addFeature(n,i,s,r,{},e.availableImages);e.featureIndex.insert(t[s].feature,i,s,a,this.index);}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}addFeatures(t,e,r,n,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Nu),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy());}addFeature(t,e,r,n,i,s=[]){for(const t of Ac(e,500)){let e=0;for(const r of t)e+=r.length;const r=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=r.vertexLength,i=[],s=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&s.push(i.length/2);const r=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),n=r.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(n+e.length-1,n),i.push(e[0].x),i.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(n+t-1,n+t),i.push(e[t].x),i.push(e[t].y);r.vertexLength+=e.length,r.primitiveLength+=e.length;}const a=xc(i,s);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(n+a[t],n+a[t+1],n+a[t+2]);r.vertexLength+=e,r.primitiveLength+=a.length/3;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,s,n);}}Ji(Mc,"FillBucket",{omit:["layers","patternFeatures"]});const Tc=new Ps({"fill-sort-key":new Es(te.layout_fill["fill-sort-key"])});var zc={paint:new Ps({"fill-antialias":new Bs(te.paint_fill["fill-antialias"]),"fill-opacity":new Es(te.paint_fill["fill-opacity"]),"fill-color":new Es(te.paint_fill["fill-color"]),"fill-outline-color":new Es(te.paint_fill["fill-outline-color"]),"fill-translate":new Bs(te.paint_fill["fill-translate"]),"fill-translate-anchor":new Bs(te.paint_fill["fill-translate-anchor"]),"fill-pattern":new Es(te.paint_fill["fill-pattern"])}),layout:Tc};const Bc=Rs([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ec=Rs([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Cc=Rs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Pc}=Bc;var Dc={},Vc=m,Lc=Fc;function Fc(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Rc,this,e);}function Rc(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i;}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos);}function Uc(t){for(var e,r,n=0,i=0,s=t.length,a=s-1;i<s;a=i++)n+=((r=t[a]).x-(e=t[i]).x)*(e.y+r.y);return n}Fc.types=["Unknown","Point","LineString","Polygon"],Fc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,s=0,a=0,o=[];t.pos<r;){if(i<=0){var l=t.readVarint();n=7&l,i=l>>3;}if(i--,1===n||2===n)s+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&o.push(e),e=[]),e.push(new Vc(s,a));else {if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone());}}return e&&o.push(e),o},Fc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,s=0,a=1/0,o=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3;}if(n--,1===r||2===r)(i+=t.readSVarint())<a&&(a=i),i>o&&(o=i),(s+=t.readSVarint())<l&&(l=s),s>u&&(u=s);else if(7!==r)throw new Error("unknown command "+r)}return [a,l,o,u]},Fc.prototype.toGeoJSON=function(t,e,r){var n,i,s=this.extent*Math.pow(2,r),a=this.extent*t,o=this.extent*e,l=this.loadGeometry(),u=Fc.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e];t[e]=[360*(r.x+a)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+o)/s)*Math.PI/180))-90];}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];c(l=h);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return [t];for(var r,n,i=[],s=0;s<e;s++){var a=Uc(t[s]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[t[s]]):r.push(t[s]));}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i]);}1===l.length?l=l[0]:u="Multi"+u;var p={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return "id"in this&&(p.id=this.id),p};var $c=Lc,jc=Oc;function Oc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(qc,this,e),this.length=this._features.length;}function qc(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null;}return e}(r));}Oc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new $c(this._pbf,e,this.extent,this._keys,this._values)};var Nc=jc;function Gc(t,e,r){if(3===t){var n=new Nc(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n);}}var Zc=Dc.VectorTile=function(t,e){this.layers=t.readFields(Gc,{},e);},Kc=Dc.VectorTileFeature=Lc;function Xc(t,e,r,n){const i=[],s=0===n?(t,e,r,n,i,s)=>{t.push(new x(s,r+(s-e)/(n-e)*(i-r)));}:(t,e,r,n,i,s)=>{t.push(new x(e+(s-r)/(i-r)*(n-e),s));};for(const a of t){const t=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let t=0;t<i.length-1;t++){const o=i[t].x,l=i[t].y,u=i[t+1].x,c=i[t+1].y,h=0===n?o:l,p=0===n?u:c;h<e?p>e&&s(a,o,l,u,c,e):h>r?p<r&&s(a,o,l,u,c,r):a.push(i[t]),p<e&&h>=e&&s(a,o,l,u,c,e),p>r&&h<=r&&s(a,o,l,u,c,r);}let o=i[i.length-1];const l=0===n?o.x:o.y;l>=e&&l<=r&&a.push(o),a.length&&(o=a[a.length-1],a[0].x===o.x&&a[0].y===o.y||a.push(a[0]),t.push(a));}t.length&&i.push(t);}return i}Dc.VectorTileLayer=jc;const Jc=Kc.types,Hc=Math.pow(2,13);function Yc(t,e,r,n,i,s,a,o){t.emplaceBack((e<<1)+a,(r<<1)+s,(Math.floor(n*Hc)<<1)+i,Math.round(o));}function Wc(t,e,r){const n=16384;t.emplaceBack(e.x,e.y,e.z,r[0]*n,r[1]*n,r[2]*n);}class Qc{constructor(){this.acc=new x(0,0),this.polyCount=[];}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new x(t.x,t.y),this.max=new x(t.x,t.y));}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const r=this.min,n=this.max;t.x<r.x?r.x=t.x:t.x>n.x&&(n.x=t.x),t.y<r.y?r.y=t.y:t.y>n.y&&(n.y=t.y),((0===t.x||t.x===ao)&&t.x===e.x)!=((0===t.y||t.y===ao)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,Er(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ao!=t.x>ao&&this.addBorderIntersection(1,Er(e.y,t.y,(ao-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Er(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ao!=t.y>ao&&this.addBorderIntersection(3,Er(e.x,t.x,(ao-e.y)/(t.y-e.y)));}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[t];e<r[0]&&(r[0]=e),e>r[1]&&(r[1]=e);}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const r=0===t.x?0:1;this.addBorderIntersection(r,e.y),this.addBorderIntersection(r,t.y);}else {const r=0===t.y?2:3;this.addBorderIntersection(r,e.x),this.addBorderIntersection(r,t.x);}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new x(0,0)}span(){return new x(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class th{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Os,this.centroidVertexArray=new wa,this.indexArray=new ra,this.programConfigurations=new Ja(t.layers,t.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain;}populate(t,e,r,n){this.features=[],this.hasPattern=kc("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ao/(1<<t.z)}(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:s,index:a,sourceLayerIndex:o}of t){const t=this.layers[0]._featureFilter.needGeometry,l=ou(i,t);if(!this.layers[0]._featureFilter.filter(new ws(this.zoom),l,r))continue;const u={id:s,sourceLayerIndex:o,index:a,geometry:t?l.geometry:au(i,r,n),properties:i.properties,type:i.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(Ic("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,u.geometry,a,r,{},e.availableImages,n),e.featureIndex.insert(i,u.geometry,a,o,this.index,c);}this.sortBorders();}addFeatures(t,e,r,n,i){for(const t of this.features){const{geometry:s}=t;this.addFeature(t,s,t.index,e,r,n,i);}this.sortBorders();}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Pc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,Cc.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0;}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Ec.members,!0),this.needsCentroidUpdate=!1);}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());}addFeature(t,e,r,n,i,s,a){const o=[new x(0,0),new x(ao,ao)],l=a.projection,u="globe"===l.name,c=this.enableTerrain&&!u?new Qc:null,h="Polygon"===Jc[t.type];u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ks);const p=Ac(e,500);for(let t=p.length-1;t>=0;t--){const e=p[t];(0===e.length||(d=e[0]).every((t=>t.x<=0))||d.every((t=>t.x>=ao))||d.every((t=>t.y<=0))||d.every((t=>t.y>=ao)))&&p.splice(t,1);}var d;let f;if(u)f=lh(p,o,n);else {f=[];for(const t of p)f.push({polygon:t,bounds:o});}const y=h?this.edgeRadius:0;for(const{polygon:t,bounds:e}of f){let r=0,i=0;for(const e of t)h&&!e[0].equals(e[e.length-1])&&e.push(e[0]),i+=h?e.length-1:e.length;const s=this.segments.prepareSegment((h?5:4)*i,this.layoutVertexArray,this.indexArray);if(h){const e=[],i=[];r=s.vertexLength;for(const r of t){let a,o;r.length&&r!==t[0]&&i.push(e.length/2),a=r[1].sub(r[0])._perp()._unit();for(let t=1;t<r.length;t++){const i=r[t],c=r[t===r.length-1?1:t+1];let{x:h,y:p}=i;if(y){o=c.sub(i)._perp()._unit();const t=a.add(o)._unit(),e=y*Math.min(4,1/(a.x*t.x+a.y*t.y));h+=e*t.x,p+=e*t.y,a=o;}Yc(this.layoutVertexArray,h,p,0,0,1,1,0),s.vertexLength++,e.push(i.x,i.y),u&&Wc(this.layoutVertexExtArray,l.projectTilePoint(h,p,n),l.upVector(n,h,p));}}const a=xc(e,i);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(r+a[t],r+a[t+2],r+a[t+1]),s.primitiveLength++;}for(const i of t){c&&i.length&&c.startRing(i[0]);let t,a,o,p=i.length>4&&sh(i[i.length-2],i[0],i[1]),d=y?rh(i[i.length-2],i[0],i[1],y):0;a=i[1].sub(i[0])._perp()._unit();let f=!0;for(let m=1,g=0;m<i.length;m++){let x=i[m-1],v=i[m];const b=i[m===i.length-1?1:m+1];if(c&&h&&c.currentPolyCount.top++,ih(v,x,e)){y&&(a=b.sub(v)._perp()._unit(),f=!f);continue}c&&c.append(v,x);const w=v.sub(x)._perp(),_=w.x/(Math.abs(w.x)+Math.abs(w.y)),A=w.y>0?1:0,S=x.dist(v);if(g+S>32768&&(g=0),y){o=b.sub(v)._perp()._unit();let t=nh(x,v,b,eh(a,o),y);isNaN(t)&&(t=0);const e=v.sub(x)._unit();x=x.add(e.mult(d))._round(),v=v.add(e.mult(-t))._round(),d=t,a=o;}const k=s.vertexLength,I=i.length>4&&sh(x,v,b);let M=ah(g,p,f);if(Yc(this.layoutVertexArray,x.x,x.y,_,A,0,0,M),Yc(this.layoutVertexArray,x.x,x.y,_,A,0,1,M),g+=S,M=ah(g,I,!f),p=I,Yc(this.layoutVertexArray,v.x,v.y,_,A,0,0,M),Yc(this.layoutVertexArray,v.x,v.y,_,A,0,1,M),s.vertexLength+=4,this.indexArray.emplaceBack(k+0,k+1,k+2),this.indexArray.emplaceBack(k+1,k+3,k+2),s.primitiveLength+=2,y){const n=r+(1===m?i.length-2:m-2),a=1===m?r:n+1;if(this.indexArray.emplaceBack(k+1,n,k+3),this.indexArray.emplaceBack(n,a,k+3),s.primitiveLength+=2,void 0===t&&(t=k),!ih(b,i[m],e)){const e=m===i.length-1?t:s.vertexLength;this.indexArray.emplaceBack(k+2,k+3,e),this.indexArray.emplaceBack(k+3,e+1,e),this.indexArray.emplaceBack(k+3,a,e+1),s.primitiveLength+=3;}f=!f;}if(u){const t=this.layoutVertexExtArray,e=l.projectTilePoint(x.x,x.y,n),r=l.projectTilePoint(v.x,v.y,n),i=l.upVector(n,x.x,x.y),s=l.upVector(n,v.x,v.y);Wc(t,e,i),Wc(t,e,i),Wc(t,r,s),Wc(t,r,s);}}h&&(r+=i.length-1);}}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;const t=c.borders,e=this.featuresOnBorder.push(c)-1;for(let r=0;r<4;r++)t[r][0]!==Number.MAX_VALUE&&this.borders[r].push(e);}this.encodeCentroid(c.borders?void 0:c.centroid(),c);}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,s,n);}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,r)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[r].borders[t][0]));}encodeCentroid(t,e,r=!0){let n,i;if(t)if(0!==t.y){const r=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(r.y/10));}else n=Math.ceil(7*(t.x+450)),i=0;else n=0,i=+r;let s=r?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(s++,n,i);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(s++,0,i),this.centroidVertexArray.emplace(s++,n,i);}}}function eh(t,e){const r=t.add(e)._unit();return t.x*r.x+t.y*r.y}function rh(t,e,r,n){const i=e.sub(t)._perp()._unit(),s=r.sub(e)._perp()._unit();return nh(t,e,r,eh(i,s),n)}function nh(t,e,r,n,i){const s=Math.sqrt(1-n*n);return Math.min(t.dist(e)/3,e.dist(r)/3,i*s/n)}function ih(t,e,r){return t.x<r[0].x&&e.x<r[0].x||t.x>r[1].x&&e.x>r[1].x||t.y<r[0].y&&e.y<r[0].y||t.y>r[1].y&&e.y>r[1].y}function sh(t,e,r){if(t.x<0||t.x>=ao||e.x<0||e.x>=ao||r.x<0||r.x>=ao)return !1;const n=r.sub(e),i=n.perp(),s=t.sub(e);return (n.x*s.x+n.y*s.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(s.x*s.x+s.y*s.y))>-.866&&i.x*s.x+i.y*s.y<0}function ah(t,e,r){const n=e?2|t:-3&t;return r?1|n:-2&n}function oh(){const t=Math.PI/32,e=Math.tan(t),r=Ul;return r*Math.sqrt(1+2*e*e)-r}function lh(t,e,r){const n=1<<r.z,i=Kl(r.x/n),s=Kl((r.x+1)/n),a=Xl(r.y/n),o=Xl((r.y+1)/n);return function(t,e,r,n,i=0,s){const a=[];if(!t.length||!r||!n)return a;const o=(t,e)=>{for(const r of t)a.push({polygon:r,bounds:e});},l=Math.ceil(Math.log2(r)),u=Math.ceil(Math.log2(n)),c=l-u,h=[];for(let t=0;t<Math.abs(c);t++)h.push(c>0?0:1);for(let t=0;t<Math.min(l,u);t++)h.push(0),h.push(1);let p=t;if(p=Xc(p,e[0].y-i,e[1].y+i,1),p=Xc(p,e[0].x-i,e[1].x+i,0),!p.length)return a;const d=[];for(h.length?d.push({polygons:p,bounds:e,depth:0}):o(p,e);d.length;){const t=d.pop(),e=t.depth,r=h[e],n=t.bounds[0],a=t.bounds[1],l=0===r?n.x:n.y,u=0===r?a.x:a.y,c=s?s(r,l,u):.5*(l+u),p=Xc(t.polygons,l-i,c+i,r),f=Xc(t.polygons,c-i,u+i,r);if(p.length){const t=[n,new x(0===r?c:a.x,1===r?c:a.y)];h.length>e+1?d.push({polygons:p,bounds:t,depth:e+1}):o(p,t);}if(f.length){const t=[new x(0===r?c:n.x,1===r?c:n.y),a];h.length>e+1?d.push({polygons:f,bounds:t,depth:e+1}):o(f,t);}}return a}(t,e,Math.ceil((s-i)/11.25),Math.ceil((a-o)/11.25),1,((t,e,i)=>{if(0===t)return .5*(e+i);{const t=Xl((r.y+e/ao)/n);return (Gl(.5*(Xl((r.y+i/ao)/n)+t))*n-r.y)*ao}}))}Ji(th,"FillExtrusionBucket",{omit:["layers","features"]}),Ji(Qc,"PartMetadata");const uh=new Ps({"fill-extrusion-edge-radius":new Bs(te["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ch={paint:new Ps({"fill-extrusion-opacity":new Bs(te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Es(te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bs(te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bs(te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Es(te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Es(te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Es(te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bs(te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Bs(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Bs(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Bs(te["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:uh};function hh(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return [t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class ph{constructor(t,e,r){this.z=t,this.x=e,this.y=r,this.key=yh(0,t,t,e,r);}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const r=function(t,e,r){var n=hh(256*t,256*(e=Math.pow(2,r)-e-1),r),i=hh(256*(t+1),256*(e+1),r);return n[0]+","+n[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),n=function(t,e,r){let n,i="";for(let s=t;s>0;s--)n=1<<s-1,i+=(e&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)}toString(){return `${this.z}/${this.x}/${this.y}`}}class dh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=yh(t,e.z,e.z,e.x,e.y);}}class fh{constructor(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new ph(r,+n,+i),this.key=0===e&&t===r?this.canonical.key:yh(e,t,r,n,i);}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new fh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return yh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-t;return yh(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(t){if(t.wrap!==this.wrap)return !1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return [new fh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return [new fh(e,this.wrap,e,r,n),new fh(e,this.wrap,e,r+1,n),new fh(e,this.wrap,e,r,n+1),new fh(e,this.wrap,e,r+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new fh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new fh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dh(this.wrap,this.canonical)}toString(){return `${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function yh(t,e,r,n,i){const s=1<<Math.min(r,22);let a=s*(i%s)+n%s;return t&&r<22&&(a+=s*s*((t<0?-2*t-1:2*t)%(1<<2*(22-r)))),16*(32*a+r)+(e-r)}Ji(ph,"CanonicalTileID"),Ji(fh,"OverscaledTileID",{omit:["projMatrix"]});class mh extends x{constructor(t,e,r){super(t,e),this.z=r;}}function gh(t,e){return t.x*e.x+t.y*e.y}function xh(t,e){if(1===t.length){let r=0;const n=e[r++];let i;for(;!i||n.equals(i);)if(i=e[r++],!i)return 1/0;for(;r<e.length;r++){const s=e[r],a=t[0],o=i.sub(n),l=s.sub(n),u=a.sub(n),c=gh(o,o),h=gh(o,l),p=gh(l,l),d=gh(u,o),f=gh(u,l),y=c*p-h*h,m=(p*d-h*f)/y,g=(c*f-h*d)/y,x=n.z*(1-m-g)+i.z*m+s.z*g;if(isFinite(x))return x}return 1/0}{let t=1/0;for(const r of e)t=Math.min(t,r.z);return t}}function vh(t,e,r,n,i,s,a,o){const l=a*i.getElevationAt(t,e,!0,!0),u=0!==s[0],c=u?0===s[1]?a*(s[0]/7-450):a*function(t,e,r){const n=Math.floor(e[0]/8),i=Math.floor(e[1]/8),s=10*(e[0]-8*n),a=10*(e[1]-8*i),o=t.getElevationAt(n,i,!0,!0),l=t.getMeterToDEM(r),u=Math.floor(.5*(s*l-1)),c=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(n,i),p=2*u+1,d=2*c+1,f=function(t,e,r,n,i){return [t.getElevationAtPixel(e,r,!0),t.getElevationAtPixel(e+i,r,!0),t.getElevationAtPixel(e,r+i,!0),t.getElevationAtPixel(e+n,r+i,!0)]}(t,h.x-u,h.y-c,p,d),y=Math.abs(f[0]-f[1]),m=Math.abs(f[2]-f[3]),g=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),x=Math.min(.25,.5*l*(y+m)/p),v=Math.min(.25,.5*l*g/d);return o+Math.max(x*s,v*a)}(i,s,o):l;return {base:l+(0===r)?-1:r,top:u?Math.max(c+n,l+r+2):l+n}}const bh=Rs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:wh}=bh,_h=Rs([{name:"a_packed",components:4,type:"Float32"}]),{members:Ah}=_h,Sh=Kc.types,kh=Math.cos(Math.PI/180*37.5);class Ih{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={};})),this.layoutVertexArray=new qs,this.layoutVertexArray2=new Ns,this.indexArray=new ra,this.programConfigurations=new Ja(t.layers,t.zoom),this.segments=new so,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r,n){this.hasPattern=kc("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),s=[];for(const{feature:e,id:a,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=ou(e,t);if(!this.layers[0]._featureFilter.filter(new ws(this.zoom),u,r))continue;const c=i?i.evaluate(u,{},r):void 0,h={id:a,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?u.geometry:au(e,r,n),patterns:{},sortKey:c};s.push(h);}i&&s.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:a,featureIndex:o}=e,l=this.addConstantDashes(a);for(const n of s){const{geometry:i,index:s,sourceLayerIndex:u}=n;if(l&&this.addFeatureDashes(n,a),this.hasPattern){const t=Ic("line",this.layers,n,this.zoom,e);this.patternFeatures.push(t);}else this.addFeature(n,i,s,r,a.positions,e.availableImages);o.insert(t[s].feature,i,s,u,this.index);}}addConstantDashes(t){let e=!1;for(const r of this.layers){const n=r.paint.get("line-dasharray").value,i=r.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==i.kind)e=!0;else {const e=i.value,r=n.value;if(!r)continue;t.addDash(r,e);}}return e}addFeatureDashes(t,e){const r=this.zoom;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,s=n.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===s.kind)continue;let a,o;if("constant"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:r},t);o="constant"===s.kind?s.value:s.evaluate({zoom:r},t),e.addDash(a,o),t.patterns[n.id]=e.getKey(a,o);}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}addFeatures(t,e,r,n,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ah)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wh),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return {start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,r,n,i,s){const a=this.layers[0].layout,o=a.get("line-join").evaluate(t,{}),l=a.get("line-cap").evaluate(t,{}),u=a.get("line-miter-limit"),c=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const r of e)this.addLine(r,t,o,l,u,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,s,n);}addLine(t,e,r,n,i,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance);}const a="Polygon"===Sh[e.type];let o=t.length;for(;o>=2&&t[o-1].equals(t[o-2]);)o--;let l=0;for(;l<o-1&&t[l].equals(t[l+1]);)l++;if(o<(a?3:2))return;"bevel"===r&&(i=1.05);const u=this.overscaling<=16?15*ao/(512*this.overscaling):0,c=this.segments.prepareSegment(10*o,this.layoutVertexArray,this.indexArray);let h,p,d,f,y;this.e1=this.e2=-1,a&&(h=t[o-2],y=t[l].sub(h)._unit()._perp());for(let e=l;e<o;e++){if(d=e===o-1?a?t[l+1]:void 0:t[e+1],d&&t[e].equals(d))continue;y&&(f=y),h&&(p=h),h=t[e],y=d?d.sub(h)._unit()._perp():f,f=f||y;let m=f.add(y);0===m.x&&0===m.y||m._unit();const g=f.x*y.x+f.y*y.y,x=m.x*y.x+m.y*y.y,v=0!==x?1/x:1/0,b=2*Math.sqrt(2-2*x),w=x<kh&&p&&d,_=f.x*y.y-f.y*y.x>0;if(w&&e>l){const t=h.dist(p);if(t>2*u){const e=h.sub(h.sub(p)._mult(u/t)._round());this.updateDistance(p,e),this.addCurrentVertex(e,f,0,0,c),p=e;}}const A=p&&d;let S=A?r:a?"butt":n;if(A&&"round"===S&&(v<s?S="miter":v<=2&&(S="fakeround")),"miter"===S&&v>i&&(S="bevel"),"bevel"===S&&(v>2&&(S="flipbevel"),v<i&&(S="miter")),p&&this.updateDistance(p,h),"miter"===S)m._mult(v),this.addCurrentVertex(h,m,0,0,c);else if("flipbevel"===S){if(v>100)m=y.mult(-1);else {const t=v*f.add(y).mag()/f.sub(y).mag();m._perp()._mult(t*(_?-1:1));}this.addCurrentVertex(h,m,0,0,c),this.addCurrentVertex(h,m.mult(-1),0,0,c);}else if("bevel"===S||"fakeround"===S){const t=-Math.sqrt(v*v-1),e=_?t:0,r=_?0:t;if(p&&this.addCurrentVertex(h,f,e,r,c),"fakeround"===S){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let r=e/t;if(.5!==r){const t=r-.5;r+=r*t*(r-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*t*t+(.848013+g*(.215638*g-1.06021)));}const n=y.sub(f)._mult(r)._add(f)._unit()._mult(_?-1:1);this.addHalfVertex(h,n.x,n.y,!1,_,0,c);}}d&&this.addCurrentVertex(h,y,-e,-r,c);}else if("butt"===S)this.addCurrentVertex(h,m,0,0,c);else if("square"===S){const t=p?1:-1;p||this.addCurrentVertex(h,m,t,t,c),this.addCurrentVertex(h,m,0,0,c),p&&this.addCurrentVertex(h,m,t,t,c);}else "round"===S&&(p&&(this.addCurrentVertex(h,f,0,0,c),this.addCurrentVertex(h,f,1,1,c,!0)),d&&(this.addCurrentVertex(h,y,-1,-1,c,!0),this.addCurrentVertex(h,y,0,0,c)));if(w&&e<o-1){const t=h.dist(d);if(t>2*u){const e=h.add(d.sub(h)._mult(u/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,y,0,0,c),h=e;}}}}addCurrentVertex(t,e,r,n,i,s=!1){const a=e.y*n-e.x,o=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,s,!1,r,i),this.addHalfVertex(t,a,o,s,!0,-n,i);}addHalfVertex({x:t,y:e},r,n,i,s,a,o){this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(s?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),s?this.e2=l:this.e1=l;}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance;}else this.lineSoFar=this.distance;}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance();}}Ji(Ih,"LineBucket",{omit:["layers","patternFeatures"]});const Mh=new Ps({"line-cap":new Es(te.layout_line["line-cap"]),"line-join":new Es(te.layout_line["line-join"]),"line-miter-limit":new Bs(te.layout_line["line-miter-limit"]),"line-round-limit":new Bs(te.layout_line["line-round-limit"]),"line-sort-key":new Es(te.layout_line["line-sort-key"])});var Th={paint:new Ps({"line-opacity":new Es(te.paint_line["line-opacity"]),"line-color":new Es(te.paint_line["line-color"]),"line-translate":new Bs(te.paint_line["line-translate"]),"line-translate-anchor":new Bs(te.paint_line["line-translate-anchor"]),"line-width":new Es(te.paint_line["line-width"]),"line-gap-width":new Es(te.paint_line["line-gap-width"]),"line-offset":new Es(te.paint_line["line-offset"]),"line-blur":new Es(te.paint_line["line-blur"]),"line-dasharray":new Es(te.paint_line["line-dasharray"]),"line-pattern":new Es(te.paint_line["line-pattern"]),"line-gradient":new Cs(te.paint_line["line-gradient"]),"line-trim-offset":new Bs(te.paint_line["line-trim-offset"])}),layout:Mh};const zh=new class extends Es{possiblyEvaluate(t,e){return e=new ws(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,r,n){return e=C({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,r,n)}}(Th.paint.properties["line-width"].specification);function Bh(t,e){return e>0?e+2*t:t}zh.useIntegerZoom=!0;const Eh=Rs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ch=Rs([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Ph=Rs([{name:"a_projected_pos",components:4,type:"Float32"}],4);Rs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Dh=Rs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Vh=Rs([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Rs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lh=Rs([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Fh=Rs([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Rs([{name:"triangle",components:3,type:"Uint16"}]),Rs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Rs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Rs([{type:"Float32",name:"offsetX"}]),Rs([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Rh=24;const Uh=128;function $h(t,e){const{expression:r}=e;if("constant"===r.kind)return {kind:"constant",layoutSize:r.evaluate(new ws(t+1))};if("source"===r.kind)return {kind:"source"};{const{zoomStops:e,interpolationType:n}=r;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let s=i;for(;s<e.length&&e[s]<t+1;)s++;s=Math.min(e.length-1,s);const a=e[i],o=e[s];return "composite"===r.kind?{kind:"composite",minZoom:a,maxZoom:o,interpolationType:n}:{kind:"camera",minZoom:a,maxZoom:o,minSize:r.evaluate(new ws(a)),maxSize:r.evaluate(new ws(o)),interpolationType:n}}}function jh(t,{uSize:e,uSizeT:r},{lowerSize:n,upperSize:i}){return "source"===t.kind?n/Uh:"composite"===t.kind?Er(n/Uh,i/Uh,r):e}function Oh(t,e){let r=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:s,maxZoom:a}=t,o=i?M(Qr.interpolationFactor(i,e,s,a),0,1):0;"camera"===t.kind?n=Er(t.minSize,t.maxSize,o):r=o;}return {uSizeT:r,uSize:n}}var qh=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Uh,evaluateSizeForFeature:jh,evaluateSizeForZoom:Oh,getSizeData:$h});function Nh(t,e,r){return t.sections.forEach((t=>{t.text=function(t,e,r){const n=e.layout.get("text-transform").evaluate(r,{});return "uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),bs.applyArabicShaping&&(t=bs.applyArabicShaping(t)),t}(t.text,e,r);})),t}const Gh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function Zh(t){return "︶"===t||"﹈"===t||"︸"===t||"﹄"===t||"﹂"===t||"︾"===t||"︼"===t||"︺"===t||"︘"===t||"﹀"===t||"︐"===t||"︓"===t||"︔"===t||"｀"===t||"￣"===t||"︑"===t||"︒"===t}function Kh(t){return "︵"===t||"﹇"===t||"︷"===t||"﹃"===t||"﹁"===t||"︽"===t||"︻"===t||"︹"===t||"︗"===t||"︿"===t}var Xh=Yh,Jh=function(t,e,r,n,i){var s,a,o=8*i-n-1,l=(1<<o)-1,u=l>>1,c=-7,h=r?i-1:0,p=r?-1:1,d=t[e+h];for(h+=p,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=256*s+t[e+h],h+=p,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===s)s=1-u;else {if(s===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),s-=u;}return (d?-1:1)*a*Math.pow(2,s-n)},Hh=function(t,e,r,n,i,s){var a,o,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,f=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(e*l-1)*Math.pow(2,i),a+=h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&o,d+=f,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;t[r+d]=255&a,d+=f,a/=256,u-=8);t[r+d-f]|=128*y;};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Yh(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length;}Yh.Varint=0,Yh.Fixed64=1,Yh.Bytes=2,Yh.Fixed32=5;var Wh=4294967296,Qh=1/Wh,tp="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ep(t){return t.type===Yh.Bytes?t.readVarint()+t.pos:t.pos+1}function rp(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function np(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i];}function ip(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r]);}function sp(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r]);}function ap(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r]);}function op(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r]);}function lp(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r]);}function up(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r]);}function cp(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r]);}function hp(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r]);}function pp(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r]);}function dp(t,e){return (t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function fp(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24;}function yp(t,e){return (t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Yh.prototype={destroy:function(){this.buf=null;},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,s=this.pos;this.type=7&n,t(i,e,this),this.pos===s&&this.skip(n);}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=dp(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=yp(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=dp(this.buf,this.pos)+dp(this.buf,this.pos+4)*Wh;return this.pos+=8,t},readSFixed64:function(){var t=dp(this.buf,this.pos)+yp(this.buf,this.pos+4)*Wh;return this.pos+=8,t},readFloat:function(){var t=Jh(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Jh(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,s=r.buf;if(n=(112&(i=s[r.pos++]))>>4,i<128)return rp(t,n,e);if(n|=(127&(i=s[r.pos++]))<<3,i<128)return rp(t,n,e);if(n|=(127&(i=s[r.pos++]))<<10,i<128)return rp(t,n,e);if(n|=(127&(i=s[r.pos++]))<<17,i<128)return rp(t,n,e);if(n|=(127&(i=s[r.pos++]))<<24,i<128)return rp(t,n,e);if(n|=(1&(i=s[r.pos++]))<<31,i<128)return rp(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&tp?function(t,e,r){return tp.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",i=e;i<r;){var s,a,o,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(s=t[i+1]))&&(u=(31&l)<<6|63&s)<=127&&(u=null):3===c?(a=t[i+2],128==(192&(s=t[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&s)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[i+2],o=t[i+3],128==(192&(s=t[i+1]))&&128==(192&a)&&128==(192&o)&&((u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c;}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Yh.Bytes)return t.push(this.readVarint(e));var r=ep(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Yh.Bytes)return t.push(this.readSVarint());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Yh.Bytes)return t.push(this.readBoolean());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Yh.Bytes)return t.push(this.readFloat());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Yh.Bytes)return t.push(this.readDouble());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Yh.Bytes)return t.push(this.readFixed32());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Yh.Bytes)return t.push(this.readSFixed32());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Yh.Bytes)return t.push(this.readFixed64());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Yh.Bytes)return t.push(this.readSFixed64());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Yh.Varint)for(;this.buf[this.pos++]>127;);else if(e===Yh.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Yh.Fixed32)this.pos+=4;else {if(e!==Yh.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8;}},writeTag:function(t,e){this.writeVarint(t<<3|e);},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e;}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),fp(this.buf,t,this.pos),this.pos+=4;},writeSFixed32:function(t){this.realloc(4),fp(this.buf,t,this.pos),this.pos+=4;},writeFixed64:function(t){this.realloc(8),fp(this.buf,-1&t,this.pos),fp(this.buf,Math.floor(t*Qh),this.pos+4),this.pos+=8;},writeSFixed64:function(t){this.realloc(8),fp(this.buf,-1&t,this.pos),fp(this.buf,Math.floor(t*Qh),this.pos+4),this.pos+=8;},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,r.buf[r.pos]=127&(t>>>=7);}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))));}(n,e);}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))));},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t);},writeBoolean:function(t){this.writeVarint(Boolean(t));},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,s=0;s<e.length;s++){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){n>56319||s+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null;}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128);}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&np(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r;},writeFloat:function(t){this.realloc(4),Hh(this.buf,t,this.pos,!0,23,4),this.pos+=4;},writeDouble:function(t){this.realloc(8),Hh(this.buf,t,this.pos,!0,52,8),this.pos+=8;},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r];},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&np(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n;},writeMessage:function(t,e,r){this.writeTag(t,Yh.Bytes),this.writeRawMessage(e,r);},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,ip,e);},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,sp,e);},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,lp,e);},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ap,e);},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,op,e);},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,up,e);},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,cp,e);},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,hp,e);},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,pp,e);},writeBytesField:function(t,e){this.writeTag(t,Yh.Bytes),this.writeBytes(e);},writeFixed32Field:function(t,e){this.writeTag(t,Yh.Fixed32),this.writeFixed32(e);},writeSFixed32Field:function(t,e){this.writeTag(t,Yh.Fixed32),this.writeSFixed32(e);},writeFixed64Field:function(t,e){this.writeTag(t,Yh.Fixed64),this.writeFixed64(e);},writeSFixed64Field:function(t,e){this.writeTag(t,Yh.Fixed64),this.writeSFixed64(e);},writeVarintField:function(t,e){this.writeTag(t,Yh.Varint),this.writeVarint(e);},writeSVarintField:function(t,e){this.writeTag(t,Yh.Varint),this.writeSVarint(e);},writeStringField:function(t,e){this.writeTag(t,Yh.Bytes),this.writeString(e);},writeFloatField:function(t,e){this.writeTag(t,Yh.Fixed32),this.writeFloat(e);},writeDoubleField:function(t,e){this.writeTag(t,Yh.Fixed64),this.writeDouble(e);},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e));}};var mp=p(Xh);const gp=3;function xp(t,e,r){e.glyphs=[],1===t&&r.readMessage(vp,e);}function vp(t,e,r){if(3===t){const{id:t,bitmap:n,width:i,height:s,left:a,top:o,advance:l}=r.readMessage(bp,{});e.glyphs.push({id:t,bitmap:new Ru({width:i+2*gp,height:s+2*gp},n),metrics:{width:i,height:s,left:a,top:o,advance:l}});}else 4===t?e.ascender=r.readSVarint():5===t&&(e.descender=r.readSVarint());}function bp(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint());}const wp=gp;function _p(t){let e=0,r=0;for(const n of t)e+=n.w*n.h,r=Math.max(r,n.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let i=0,s=0;for(const e of t)for(let t=n.length-1;t>=0;t--){const r=n[t];if(!(e.w>r.w||e.h>r.h)){if(e.x=r.x,e.y=r.y,s=Math.max(s,e.y+e.h),i=Math.max(i,e.x+e.w),e.w===r.w&&e.h===r.h){const e=n.pop();t<n.length&&(n[t]=e);}else e.h===r.h?(r.x+=e.w,r.w-=e.w):e.w===r.w?(r.y+=e.h,r.h-=e.h):(n.push({x:r.x+e.w,y:r.y,w:r.w-e.w,h:e.h}),r.y+=e.h,r.h-=e.h);break}}return {w:i,h:s,fill:e/(i*s)||0}}const Ap=1;class Sp{constructor(t,{pixelRatio:e,version:r,stretchX:n,stretchY:i,content:s}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=i,this.content=s,this.version=r;}get tl(){return [this.paddedRect.x+Ap,this.paddedRect.y+Ap]}get br(){return [this.paddedRect.x+this.paddedRect.w-Ap,this.paddedRect.y+this.paddedRect.h-Ap]}get displaySize(){return [(this.paddedRect.w-2*Ap)/this.pixelRatio,(this.paddedRect.h-2*Ap)/this.pixelRatio]}}class kp{constructor(t,e){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,r,i),this.addImages(e,n,i);const{w:s,h:a}=_p(i),o=new Uu({width:s||1,height:a||1});for(const e in t){const n=t[e],i=r[e].paddedRect;Uu.copy(n.data,o,{x:0,y:0},{x:i.x+Ap,y:i.y+Ap},n.data);}for(const t in e){const r=e[t],i=n[t].paddedRect,s=i.x+Ap,a=i.y+Ap,l=r.data.width,u=r.data.height;Uu.copy(r.data,o,{x:0,y:0},{x:s,y:a},r.data),Uu.copy(r.data,o,{x:0,y:u-1},{x:s,y:a-1},{width:l,height:1}),Uu.copy(r.data,o,{x:0,y:0},{x:s,y:a+u},{width:l,height:1}),Uu.copy(r.data,o,{x:l-1,y:0},{x:s-1,y:a},{width:1,height:u}),Uu.copy(r.data,o,{x:0,y:0},{x:s+l,y:a},{width:1,height:u});}this.image=o,this.iconPositions=r,this.patternPositions=n;}addImages(t,e,r){for(const n in t){const i=t[n],s={x:0,y:0,w:i.data.width+2*Ap,h:i.data.height+2*Ap};r.push(s),e[n]=new Sp(s,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n);}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e);}patchUpdatedImage(t,e,r){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,i]=t.tl;r.update(e.data,void 0,{x:n,y:i});}}Ji(Sp,"ImagePosition"),Ji(kp,"ImageAtlas");const Ip={horizontal:1,vertical:2,horizontalOnly:3},Mp=-17;class Tp{constructor(){this.scale=1,this.fontStack="",this.imageName=null;}static forText(t,e){const r=new Tp;return r.scale=t||1,r.fontStack=e,r}static forImage(t){const e=new Tp;return e.imageName=t,e}}class zp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null;}static fromFeature(t,e){const r=new zp;for(let n=0;n<t.sections.length;n++){const i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,e);}return r}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let r="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n+1)||null,s=t.charCodeAt(n-1)||null;r+=!e&&(i&&ss(i)&&!Gh[t[n+1]]||s&&ss(s)&&!Gh[t[n-1]])||!Gh[t[n]]?t[n]:Gh[t[n]];}return r}(this.text,t);}trim(){let t=0;for(let e=0;e<this.text.length&&Ep[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let r=this.text.length-1;r>=0&&r>=t&&Ep[this.text.charCodeAt(r)];r--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e);}substring(t,e){const r=new zp;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Tp.forText(t.scale,t.fontStack||e));const r=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(r);}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void N("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Tp.forImage(e)),this.sectionIndex.push(this.sections.length-1)):N("Reached maximum number of images 6401");}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Bp(t,e,r,n,i,s,a,o,l,u,c,h,p,d,f){const y=zp.fromFeature(t,i);h===Ip.vertical&&y.verticalizePunctuation(p);let m=[];const g=function(t,e,r,n,i,s){if(!t)return [];const a=[],o=function(t,e,r,n,i,s){let a=0;for(let r=0;r<t.length();r++){const o=t.getSection(r);a+=Pp(t.getCharCode(r),o,n,i,e,s);}return a/Math.max(1,Math.ceil(a/r))}(t,e,r,n,i,s),l=t.text.indexOf("​")>=0;let u=0;for(let r=0;r<t.length();r++){const h=t.getSection(r),p=t.getCharCode(r);if(Ep[p]||(u+=Pp(p,h,n,i,e,s)),r<t.length()-1){const e=!((c=p)<11904||!(ts["Bopomofo Extended"](c)||ts.Bopomofo(c)||ts["CJK Compatibility Forms"](c)||ts["CJK Compatibility Ideographs"](c)||ts["CJK Compatibility"](c)||ts["CJK Radicals Supplement"](c)||ts["CJK Strokes"](c)||ts["CJK Symbols and Punctuation"](c)||ts["CJK Unified Ideographs Extension A"](c)||ts["CJK Unified Ideographs"](c)||ts["Enclosed CJK Letters and Months"](c)||ts["Halfwidth and Fullwidth Forms"](c)||ts.Hiragana(c)||ts["Ideographic Description Characters"](c)||ts["Kangxi Radicals"](c)||ts["Katakana Phonetic Extensions"](c)||ts.Katakana(c)||ts["Vertical Forms"](c)||ts["Yi Radicals"](c)||ts["Yi Syllables"](c)));(Cp[p]||e||h.imageName)&&a.push(Lp(r+1,u,o,a,Vp(p,t.getCharCode(r+1),e&&l),!1));}}var c;return Fp(Lp(t.length(),u,o,a,0,!0))}(y,u,s,e,n,d),{processBidirectionalText:x,processStyledBidirectionalText:v}=bs;if(x&&1===y.sections.length){const t=x(y.toString(),g);for(const e of t){const t=new zp;t.text=e,t.sections=y.sections;for(let r=0;r<e.length;r++)t.sectionIndex.push(0);m.push(t);}}else if(v){const t=v(y.text,y.sectionIndex,g);for(const e of t){const t=new zp;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,m.push(t);}}else m=function(t,e){const r=[],n=t.text;let i=0;for(const n of e)r.push(t.substring(i,n)),i=n;return i<n.length&&r.push(t.substring(i,n.length)),r}(y,g);const b=[],w={positionedLines:b,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,r,n,i,s,a,o,l,u,c,h){let p=0,d=0,f=0;const y="right"===o?1:"left"===o?0:.5;let m=!1;for(const t of i){const r=t.getSections();for(const t of r){if(t.imageName)continue;const r=e[t.fontStack];if(r&&(m=void 0!==r.ascender&&void 0!==r.descender,!m))break}if(!m)break}let g=0;for(const a of i){a.trim();const i=a.getMaxScale(),o=(i-1)*Rh,v={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=v;const b=v.positionedGlyphs;let w=0;if(!a.length()){d+=s,++g;continue}let _=0,A=0;for(let s=0;s<a.length();s++){const o=a.getSection(s),f=a.getSectionIndex(s),y=a.getCharCode(s);let g=o.scale,v=null,S=null,k=null,I=Rh,M=0;const T=!(l===Ip.horizontal||!c&&!is(y)||c&&(Ep[y]||(x=y,ts.Arabic(x)||ts["Arabic Supplement"](x)||ts["Arabic Extended-A"](x)||ts["Arabic Presentation Forms-A"](x)||ts["Arabic Presentation Forms-B"](x))));if(o.imageName){const e=n[o.imageName];if(!e)continue;k=o.imageName,t.iconsInText=t.iconsInText||!0,S=e.paddedRect;const r=e.displaySize;g=g*Rh/h,v={width:r[0],height:r[1],left:Ap,top:-wp,advance:T?r[1]:r[0],localGlyph:!1},M=m?-v.height*g:Mp+i*Rh-r[1]*g,I=v.advance;const s=(T?r[0]:r[1])*g-Rh*i;s>0&&s>w&&(w=s);}else {const t=r[o.fontStack];if(!t)continue;t[y]&&(S=t[y]);const n=e[o.fontStack];if(!n)continue;const s=n.glyphs[y];if(!s)continue;if(v=s.metrics,I=8203!==y?Rh:0,m){const t=void 0!==n.ascender?Math.abs(n.ascender):0,e=void 0!==n.descender?Math.abs(n.descender):0,r=(t+e)*g;_<r&&(_=r,A=(t-e)/2*g),M=-t*g;}else M=Mp+(i-g)*Rh;}T?(t.verticalizable=!0,b.push({glyph:y,imageName:k,x:p,y:d+M,vertical:T,scale:g,localGlyph:v.localGlyph,fontStack:o.fontStack,sectionIndex:f,metrics:v,rect:S}),p+=I*g+u):(b.push({glyph:y,imageName:k,x:p,y:d+M,vertical:T,scale:g,localGlyph:v.localGlyph,fontStack:o.fontStack,sectionIndex:f,metrics:v,rect:S}),p+=v.advance*g+u);}0!==b.length&&(f=Math.max(p-u,f),m?Up(b,y,w,A,s*i/2):Up(b,y,w,0,s/2)),p=0;const S=s*i+w;v.lineOffset=Math.max(w,o),d+=S,++g;}var x;const v=d,{horizontalAlign:b,verticalAlign:w}=Rp(a);((function(t,e,r,n,i,s){const a=(e-r)*i,o=-s*n;for(const e of t)for(const t of e.positionedGlyphs)t.x+=a,t.y+=o;}))(t.positionedLines,y,b,w,f,v),t.top+=-w*v,t.bottom=t.top+v,t.left+=-b*f,t.right=t.left+f,t.hasBaseline=m;}(w,e,r,n,m,a,o,l,h,u,p,f),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return !1;return !0}(b)&&w}const Ep={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Cp={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Pp(t,e,r,n,i,s){if(e.imageName){const t=n[e.imageName];return t?t.displaySize[0]*e.scale*Rh/s+i:0}{const n=r[e.fontStack],s=n&&n.glyphs[t];return s?s.metrics.advance*e.scale+i:0}}function Dp(t,e,r,n){const i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function Vp(t,e,r){let n=0;return 10===t&&(n-=1e4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Lp(t,e,r,n,i,s){let a=null,o=Dp(e,r,i,s);for(const t of n){const n=Dp(e-t.x,r,i,s)+t.badness;n<=o&&(a=t,o=n);}return {index:t,x:e,priorBreak:a,badness:o}}function Fp(t){return t?Fp(t.priorBreak).concat(t.index):[]}function Rp(t){let e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;}return {horizontalAlign:e,verticalAlign:r}}function Up(t,e,r,n,i){if(!(e||r||n||i))return;const s=t.length-1,a=t[s],o=(a.x+a.metrics.advance*a.scale)*e;for(let e=0;e<=s;e++)t[e].x-=o,t[e].y+=r+n+i;}function $p(t,e,r){const{horizontalAlign:n,verticalAlign:i}=Rp(r),s=e[0]-t.displaySize[0]*n,a=e[1]-t.displaySize[1]*i;return {image:t,top:a,bottom:a+t.displaySize[1],left:s,right:s+t.displaySize[0]}}function jp(t,e,r,n,i,s){const a=t.image;let o;if(a.content){const t=a.content,e=a.pixelRatio||1;o=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e];}const l=e.left*s,u=e.right*s;let c,h,p,d;"width"===r||"both"===r?(d=i[0]+l-n[3],h=i[0]+u+n[1]):(d=i[0]+(l+u-a.displaySize[0])/2,h=d+a.displaySize[0]);const f=e.top*s,y=e.bottom*s;return "height"===r||"both"===r?(c=i[1]+f-n[0],p=i[1]+y+n[2]):(c=i[1]+(f+y-a.displaySize[1])/2,p=c+a.displaySize[1]),{image:a,top:c,right:h,bottom:p,left:d,collisionPadding:o}}class Op extends x{constructor(t,e,r,n,i){super(t,e),this.angle=n,this.z=r,void 0!==i&&(this.segment=i);}clone(){return new Op(this.x,this.y,this.z,this.angle,this.segment)}}function qp(t,e,r,n,i){if(void 0===e.segment)return !0;let s=e,a=e.segment+1,o=0;for(;o>-r/2;){if(a--,a<0)return !1;o-=t[a].dist(s),s=t[a];}o+=t[a].dist(t[a+1]),a++;const l=[];let u=0;for(;o<r/2;){const e=t[a],r=t[a+1];if(!r)return !1;let s=t[a-1].angleTo(e)-e.angleTo(r);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:o,angleDelta:s}),u+=s;o-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return !1;a++,o+=e.dist(r);}return !0}function Np(t){let e=0;for(let r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Gp(t,e,r){return t?.6*e*r:0}function Zp(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Kp(t,e,r,n,i,s){const a=Gp(r,i,s),o=Zp(r,n)*s;let l=0;const u=Np(t)/2;for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1],s=n.dist(i);if(l+s>u){const c=(u-l)/s,h=Er(n.x,i.x,c),p=Er(n.y,i.y,c),d=new Op(h,p,0,i.angleTo(n),r);return !a||qp(t,d,o,a,e)?d:void 0}l+=s;}}function Xp(t,e,r,n,i,s,a,o,l){const u=Gp(n,s,a),c=Zp(n,i),h=c*a,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),Jp(t,p?e/2*o%e:(c/2+2*s)*a*o%e,e,u,r,h,p,!1,l)}function Jp(t,e,r,n,i,s,a,o,l){const u=s/2,c=Np(t);let h=0,p=e-r,d=[];for(let e=0;e<t.length-1;e++){const a=t[e],o=t[e+1],f=a.dist(o),y=o.angleTo(a);for(;p+r<h+f;){p+=r;const m=(p-h)/f,g=Er(a.x,o.x,m),x=Er(a.y,o.y,m);if(g>=0&&g<l&&x>=0&&x<l&&p-u>=0&&p+u<=c){const r=new Op(g,x,0,y,e);r._round(),n&&!qp(t,r,s,n,i)||d.push(r);}}h+=f;}return o||d.length||a||(d=Jp(t,h/2,r,n,i,s,a,!0,l)),d}function Hp(t,e,r,n,i){const s=[];for(let a=0;a<t.length;a++){const o=t[a];let l;for(let t=0;t<o.length-1;t++){let a=o[t],u=o[t+1];a.x<e&&u.x<e||(a.x<e?a=new x(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x<e&&(u=new x(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y<r&&u.y<r||(a.y<r?a=new x(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round():u.y<r&&(u=new x(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round()),a.x>=n&&u.x>=n||(a.x>=n?a=new x(n,a.y+(n-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x>=n&&(u=new x(n,a.y+(n-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y>=i&&u.y>=i||(a.y>=i?a=new x(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round():u.y>=i&&(u=new x(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],s.push(l)),l.push(u)))));}}return s}Ji(Op,"Anchor");const Yp=1e20;function Wp(t,e,r,n,i,s,a,o,l){for(let u=e;u<e+n;u++)Qp(t,r*s+u,s,i,a,o,l);for(let u=r;u<r+i;u++)Qp(t,u*s+e,1,n,a,o,l);}function Qp(t,e,r,n,i,s,a){s[0]=0,a[0]=-Yp,a[1]=Yp,i[0]=t[e];for(let o=1,l=0,u=0;o<n;o++){i[o]=t[e+o*r];const n=o*o;do{const t=s[l];u=(i[o]-i[t]+n-t*t)/(o-t)/2;}while(u<=a[l]&&--l>-1);l++,s[l]=o,a[l]=u,a[l+1]=Yp;}for(let o=0,l=0;o<n;o++){for(;a[l+1]<o;)l++;const n=s[l],u=o-n;t[e+o*r]=i[n]+u*u;}}const td=2,ed={none:0,ideographs:1,all:2};class rd{constructor(t,e,r){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}};}setURL(t){this.url=t;}getGlyphs(t,e){const r=[];for(const e in t)for(const n of t[e])r.push({stack:e,id:n});B(r,(({stack:t,id:e},r)=>{let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=n.glyphs[e];if(void 0!==i)return void r(null,{stack:t,id:e,glyph:i});if(i=this._tinySDF(n,t,e),i)return n.glyphs[e]=i,void r(null,{stack:t,id:e,glyph:i});const s=Math.floor(e/256);if(256*s>65535)return void r(new Error("glyphs > 65535 not supported"));if(n.ranges[s])return void r(null,{stack:t,id:e,glyph:i});let a=n.requests[s];a||(a=n.requests[s]=[],rd.loadGlyphRange(t,s,this.url,this.requestManager,((t,e)=>{if(e){n.ascender=e.ascender,n.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(n.glyphs[+t]=e.glyphs[+t]);n.ranges[s]=!0;}for(const r of a)r(t,e);delete n.requests[s];}))),a.push(((n,i)=>{n?r(n):i&&r(null,{stack:t,id:e,glyph:i.glyphs[e]||null});}));}),((t,r)=>{if(t)e(t);else if(r){const t={};for(const{stack:e,id:n,glyph:i}of r)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[n]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t);}}));}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==ed.none&&(this.localGlyphMode===ed.all?!!this.localFontFamily:!!this.localFontFamily&&(ts["CJK Unified Ideographs"](t)||ts["Hangul Syllables"](t)||ts.Hiragana(t)||ts.Katakana(t)||ts["CJK Symbols and Punctuation"](t)))}_tinySDF(t,e,r){const n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let i=t.tinySDF;if(!i){let r="400";/bold/i.test(e)?r="900":/medium/i.test(e)?r="500":/light/i.test(e)&&(r="200"),i=t.tinySDF=new rd.TinySDF({fontFamily:n,fontWeight:r,fontSize:24*td,buffer:3*td,radius:8*td}),i.fontWeight=r;}if(this.localGlyphs[i.fontWeight][r])return this.localGlyphs[i.fontWeight][r];const s=String.fromCharCode(r),{data:a,width:o,height:l,glyphWidth:u,glyphHeight:c,glyphLeft:h,glyphTop:p,glyphAdvance:d}=i.draw(s);return this.localGlyphs[i.fontWeight][r]={id:r,bitmap:new Ru({width:o,height:l},a),metrics:{width:u/td,height:c/td,left:h/td,top:p/td-27,advance:d/td,localGlyph:!0}}}}rd.loadGlyphRange=function(t,e,r,n,i){const s=256*e,a=s+255,o=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",`${s}-${a}`),lt.Glyphs);pt(o,((t,e)=>{if(t)i(t);else if(e){const t={},r=function(t){return new mp(t).readFields(xp,{})}(e);for(const e of r.glyphs)t[e.id]=e;i(null,{glyphs:t,ascender:r.ascender,descender:r.descender});}}));},rd.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:r=8,cutoff:n=.25,fontFamily:i="sans-serif",fontWeight:s="normal",fontStyle:a="normal"}={}){this.buffer=e,this.cutoff=n,this.radius=r;const o=this.size=t+4*e,l=this._createCanvas(o),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${s} ${t}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o);}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:s}=this.ctx.measureText(t),a=Math.ceil(r),o=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(n)),u=o+2*this.buffer,c=l+2*this.buffer,h=Math.max(u*c,0),p=new Uint8ClampedArray(h),d={data:p,width:u,height:c,glyphWidth:o,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===o||0===l)return d;const{ctx:f,buffer:y,gridInner:m,gridOuter:g}=this;f.clearRect(y,y,o,l),f.fillText(t,y,y+a);const x=f.getImageData(y,y,o,l);g.fill(Yp,0,h),m.fill(0,0,h);for(let t=0;t<l;t++)for(let e=0;e<o;e++){const r=x.data[4*(t*o+e)+3]/255;if(0===r)continue;const n=(t+y)*u+e+y;if(1===r)g[n]=0,m[n]=Yp;else {const t=.5-r;g[n]=t>0?t*t:0,m[n]=t<0?t*t:0;}}Wp(g,0,0,u,c,u,this.f,this.v,this.z),Wp(m,y,y,o,l,u,this.f,this.v,this.z);for(let t=0;t<h;t++){const e=Math.sqrt(g[t])-Math.sqrt(m[t]);p[t]=Math.round(255-255*(e/this.radius+this.cutoff));}return d}};const nd=Ap;function id(t,e,r,n){const i=[],s=t.image,a=s.pixelRatio,o=s.paddedRect.w-2*nd,l=s.paddedRect.h-2*nd,u=t.right-t.left,c=t.bottom-t.top,h=s.stretchX||[[0,o]],p=s.stretchY||[[0,l]],d=(t,e)=>t+e[1]-e[0],f=h.reduce(d,0),y=p.reduce(d,0),m=o-f,g=l-y;let v=0,b=f,w=0,_=y,A=0,S=m,k=0,I=g;if(s.content&&n){const t=s.content;v=sd(h,0,t[0]),w=sd(p,0,t[1]),b=sd(h,t[0],t[2]),_=sd(p,t[1],t[3]),A=t[0]-v,k=t[1]-w,S=t[2]-t[0]-b,I=t[3]-t[1]-_;}const M=(n,i,o,l)=>{const h=od(n.stretch-v,b,u,t.left),p=ld(n.fixed-A,S,n.stretch,f),d=od(i.stretch-w,_,c,t.top),m=ld(i.fixed-k,I,i.stretch,y),g=od(o.stretch-v,b,u,t.left),M=ld(o.fixed-A,S,o.stretch,f),T=od(l.stretch-w,_,c,t.top),z=ld(l.fixed-k,I,l.stretch,y),B=new x(h,d),E=new x(g,d),C=new x(g,T),P=new x(h,T),D=new x(p/a,m/a),V=new x(M/a,z/a),L=e*Math.PI/180;if(L){const t=Math.sin(L),e=Math.cos(L),r=[e,-t,t,e];B._matMult(r),E._matMult(r),P._matMult(r),C._matMult(r);}const F=n.stretch+n.fixed,R=i.stretch+i.fixed;return {tl:B,tr:E,bl:P,br:C,tex:{x:s.paddedRect.x+nd+F,y:s.paddedRect.y+nd+R,w:o.stretch+o.fixed-F,h:l.stretch+l.fixed-R},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:V,minFontScaleX:S/a/u,minFontScaleY:I/a/c,isSDF:r}};if(n&&(s.stretchX||s.stretchY)){const t=ad(h,m,f),e=ad(p,g,y);for(let r=0;r<t.length-1;r++){const n=t[r],s=t[r+1];for(let t=0;t<e.length-1;t++)i.push(M(n,e[t],s,e[t+1]));}}else i.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:o+1},{fixed:0,stretch:l+1}));return i}function sd(t,e,r){let n=0;for(const i of t)n+=Math.max(e,Math.min(r,i[1]))-Math.max(e,Math.min(r,i[0]));return n}function ad(t,e,r){const n=[{fixed:-nd,stretch:0}];for(const[e,r]of t){const t=n[n.length-1];n.push({fixed:e-t.stretch,stretch:t.stretch}),n.push({fixed:e-t.stretch,stretch:t.stretch+(r-e)});}return n.push({fixed:e+nd,stretch:r}),n}function od(t,e,r,n){return t/e*r+n}function ld(t,e,r,n){return t-e*r/n}function ud(t,e,r,n){const i=e+t.positionedLines[n].lineOffset;return 0===n?r+i/2:r+(i+(e+t.positionedLines[n-1].lineOffset))/2}class cd{constructor(t=[],e=hd){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t);}push(t){this.data.push(t),this.length++,this._up(this.length-1);}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const i=t-1>>1,s=e[i];if(r(n,s)>=0)break;e[t]=s,t=i;}e[t]=n;}_down(t){const{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=1+(t<<1),s=e[n];const a=n+1;if(a<this.length&&r(e[a],s)<0&&(n=a,s=e[a]),r(s,i)>=0)break;e[t]=s,t=n;}e[t]=i;}}function hd(t,e){return t<e?-1:t>e?1:0}function pd(t,e=1,r=!1){let n=1/0,i=1/0,s=-1/0,a=-1/0;const o=t[0];for(let t=0;t<o.length;t++){const e=o[t];(!t||e.x<n)&&(n=e.x),(!t||e.y<i)&&(i=e.y),(!t||e.x>s)&&(s=e.x),(!t||e.y>a)&&(a=e.y);}const l=Math.min(s-n,a-i);let u=l/2;const c=new cd([],dd);if(0===l)return new x(n,i);for(let e=n;e<s;e+=l)for(let r=i;r<a;r+=l)c.push(new fd(e+u,r+u,u,t));let h=function(t){let e=0,r=0,n=0;const i=t[0];for(let t=0,s=i.length,a=s-1;t<s;a=t++){const s=i[t],o=i[a],l=s.x*o.y-o.x*s.y;r+=(s.x+o.x)*l,n+=(s.y+o.y)*l,e+=3*l;}return new fd(r/e,n/e,0,t)}(t),p=c.length;for(;c.length;){const n=c.pop();(n.d>h.d||!h.d)&&(h=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,p)),n.max-h.d<=e||(u=n.h/2,c.push(new fd(n.p.x-u,n.p.y-u,u,t)),c.push(new fd(n.p.x+u,n.p.y-u,u,t)),c.push(new fd(n.p.x-u,n.p.y+u,u,t)),c.push(new fd(n.p.x+u,n.p.y+u,u,t)),p+=4);}return r&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function dd(t,e){return e.max-t.max}class fd{constructor(t,e,r,n){this.p=new x(t,e),this.h=r,this.d=function(t,e){let r=!1,n=1/0;for(let i=0;i<e.length;i++){const s=e[i];for(let e=0,i=s.length,a=i-1;e<i;a=e++){const i=s[e],o=s[a];i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(r=!r),n=Math.min(n,xu(t,i,o));}}return (r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2;}}const yd=7,md=Number.POSITIVE_INFINITY,gd=Math.sqrt(2);function xd(t,[e,r]){let n=0,i=0;if(r===md){e<0&&(e=0);const r=e/gd;switch(t){case"top-right":case"top-left":i=r-yd;break;case"bottom-right":case"bottom-left":i=-r+yd;break;case"bottom":i=-e+yd;break;case"top":i=e-yd;}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e;}}else {switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":i=r-yd;break;case"bottom-right":case"bottom-left":case"bottom":i=-r+yd;}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e;}}return [n,i]}function vd(t,e,r,n,i,s,a,o,l,u){t.createArrays(),t.tilePixelRatio=ao/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const c=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:r}=t.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ws(e),o),h["text-size"].possiblyEvaluate(new ws(r),o)];}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:r}=t.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ws(e),o),h["icon-size"].possiblyEvaluate(new ws(r),o)];}p.layoutTextSize=h["text-size"].possiblyEvaluate(new ws(l+1),o),p.layoutIconSize=h["icon-size"].possiblyEvaluate(new ws(l+1),o),p.textMaxSize=h["text-size"].possiblyEvaluate(new ws(18),o);const d="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),f=c.get("text-size");for(const s of t.features){const l=c.get("text-font").evaluate(s,{},o).join(","),h=f.evaluate(s,{},o),y=p.layoutTextSize.evaluate(s,{},o),m=(p.layoutIconSize.evaluate(s,{},o),{horizontal:{},vertical:void 0}),g=s.text;let x,v=[0,0];if(g){const n=g.toString(),a=c.get("text-letter-spacing").evaluate(s,{},o)*Rh,u=c.get("text-line-height").evaluate(s,{},o)*Rh,p=rs(n)?a:0,f=c.get("text-anchor").evaluate(s,{},o),x=c.get("text-variable-anchor");if(!x){const t=c.get("text-radial-offset").evaluate(s,{},o);v=t?xd(f,[t*Rh,md]):c.get("text-offset").evaluate(s,{},o).map((t=>t*Rh));}let b=d?"center":c.get("text-justify").evaluate(s,{},o);const w="point"===c.get("symbol-placement"),_=w?c.get("text-max-width").evaluate(s,{},o)*Rh:1/0,A=s=>{t.allowVerticalPlacement&&es(n)&&(m.vertical=Bp(g,e,r,i,l,_,u,f,s,p,v,Ip.vertical,!0,y,h));};if(!d&&x){const t="auto"===b?x.map((t=>bd(t))):[b];let n=!1;for(let s=0;s<t.length;s++){const a=t[s];if(!m.horizontal[a])if(n)m.horizontal[a]=m.horizontal[0];else {const t=Bp(g,e,r,i,l,_,u,"center",a,p,v,Ip.horizontal,!1,y,h);t&&(m.horizontal[a]=t,n=1===t.positionedLines.length);}}A("left");}else {if("auto"===b&&(b=bd(f)),w||c.get("text-writing-mode").indexOf("horizontal")>=0||!es(n)){const t=Bp(g,e,r,i,l,_,u,f,b,p,v,Ip.horizontal,!1,y,h);t&&(m.horizontal[b]=t);}A(w?"left":b);}}let b=!1;if(s.icon&&s.icon.name){const e=n[s.icon.name];e&&(x=$p(i[s.icon.name],c.get("icon-offset").evaluate(s,{},o),c.get("icon-anchor").evaluate(s,{},o)),b=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&N("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0));}const w=kd(m.horizontal)||m.vertical;t.iconsInText||(t.iconsInText=!!w&&w.iconsInText),(w||x)&&wd(t,s,m,x,n,p,y,0,v,b,a,o,u);}s&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray);}function bd(t){switch(t){case"right":case"top-right":case"bottom-right":return "right";case"left":case"top-left":case"bottom-left":return "left"}return "center"}function wd(t,e,r,n,i,s,a,o,l,u,c,h,p){let d=s.textMaxSize.evaluate(e,{},h);void 0===d&&(d=a);const f=t.layers[0].layout,y=f.get("icon-offset").evaluate(e,{},h),m=kd(r.horizontal)||r.vertical,g="globe"===p.name,x=Rh,v=a/x,b=t.tilePixelRatio*d/x,_=(B=t.overscaling,t.zoom>18&&B>2&&(B>>=1),Math.max(ao/(512*B),1)*f.get("symbol-spacing")),A=f.get("text-padding")*t.tilePixelRatio,S=f.get("icon-padding")*t.tilePixelRatio,k=w(f.get("text-max-angle")),I="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),M="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),T=f.get("symbol-placement"),z=_/2;var B;const E=f.get("icon-text-fit");let C;n&&"none"!==E&&(t.allowVerticalPlacement&&r.vertical&&(C=jp(n,r.vertical,E,f.get("icon-text-fit-padding"),y,v)),m&&(n=jp(n,m,E,f.get("icon-text-fit-padding"),y,v)));const P=(a,o,d)=>{if(o.x<0||o.x>=ao||o.y<0||o.y>=ao)return;let f=null;if(g){const{x:t,y:e,z:r}=p.projectTilePoint(o.x,o.y,d);f={anchor:new Op(t,e,r,0,void 0),up:p.upVector(d,o.x,o.y)};}!function(t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m,g,x,v,b,w,_,A,S){const k=t.addToLineVertexArray(e,n);let I,M,T,z,B,E,C,P=0,D=0,V=0,L=0,F=-1,R=-1;const U={};let $=Ba("");const j=r?r.anchor:e;let O=0,q=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[O,q]=l.layout.get("text-offset").evaluate(b,{},S).map((t=>t*Rh)):(O=l.layout.get("text-radial-offset").evaluate(b,{},S)*Rh,q=md),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(f)E=Md(t),o&&(C=Md(o));else {const r=l.layout.get("text-rotate").evaluate(b,{},S)+90;T=Id(u,j,e,c,h,p,t,d,r,y),o&&(z=Id(u,j,e,c,h,p,o,g,r));}}if(s){const n=l.layout.get("icon-rotate").evaluate(b,{},S),i="none"!==l.layout.get("icon-text-fit"),a=id(s,n,_,i),d=o?id(o,n,_,i):void 0;M=Id(u,j,e,c,h,p,s,g,n),P=4*a.length;const f=t.iconSizeData;let y=null;"source"===f.kind?(y=[Uh*l.layout.get("icon-size").evaluate(b,{},S)],y[0]>Ad&&N(`${t.layerIds[0]}: Value for "icon-size" is >= ${_d}. Reduce your "icon-size".`)):"composite"===f.kind&&(y=[Uh*w.compositeIconSizes[0].evaluate(b,{},S),Uh*w.compositeIconSizes[1].evaluate(b,{},S)],(y[0]>Ad||y[1]>Ad)&&N(`${t.layerIds[0]}: Value for "icon-size" is >= ${_d}. Reduce your "icon-size".`)),t.addSymbols(t.icon,a,y,v,x,b,!1,r,e,k.lineStartIndex,k.lineLength,-1,A,S),F=t.icon.placedSymbolArray.length-1,d&&(D=4*d.length,t.addSymbols(t.icon,d,y,v,x,b,Ip.vertical,r,e,k.lineStartIndex,k.lineLength,-1,A,S),R=t.icon.placedSymbolArray.length-1);}for(const n in i.horizontal){const s=i.horizontal[n];I||($=Ba(s.text),f?B=Md(s):I=Id(u,j,e,c,h,p,s,d,l.layout.get("text-rotate").evaluate(b,{},S),y));const o=1===s.positionedLines.length;if(V+=Sd(t,r,e,s,a,l,f,b,y,k,i.vertical?Ip.horizontal:Ip.horizontalOnly,o?Object.keys(i.horizontal):[n],U,F,w,A,S),o)break}i.vertical&&(L+=Sd(t,r,e,i.vertical,a,l,f,b,y,k,Ip.vertical,["vertical"],U,R,w,A,S));let G=-1;const Z=(t,e)=>t?Math.max(t,e):e;G=Z(B,G),G=Z(E,G),G=Z(C,G);const K=G>-1?1:0;t.glyphOffsetArray.length>=of.MAX_GLYPHS&&N("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(j.x,j.y,j.z,e.x,e.y,U.right>=0?U.right:-1,U.center>=0?U.center:-1,U.left>=0?U.left:-1,U.vertical>=0?U.vertical:-1,F,R,$,void 0!==I?I:t.collisionBoxArray.length,void 0!==I?I+1:t.collisionBoxArray.length,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==M?M:t.collisionBoxArray.length,void 0!==M?M+1:t.collisionBoxArray.length,z||t.collisionBoxArray.length,z?z+1:t.collisionBoxArray.length,c,V,L,P,D,K,0,O,q,G);}(t,o,f,a,r,n,i,C,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,A,I,l,0,S,M,y,e,s,u,c,h);};if("line"===T)for(const i of Hp(e.geometry,0,0,ao,ao)){const e=Xp(i,_,k,r.vertical||m,n,x,b,t.overscaling,ao);for(const r of e)m&&Td(t,m.text,z,r)||P(i,r,h);}else if("line-center"===T){for(const t of e.geometry)if(t.length>1){const e=Kp(t,k,r.vertical||m,n,x,b);e&&P(t,e,h);}}else if("Polygon"===e.type)for(const t of Ac(e.geometry,0)){const e=pd(t,16);P(t[0],new Op(e.x,e.y,0,0,void 0),h);}else if("LineString"===e.type)for(const t of e.geometry)P(t,new Op(t[0].x,t[0].y,0,0,void 0),h);else if("Point"===e.type)for(const t of e.geometry)for(const e of t)P([e],new Op(e.x,e.y,0,0,void 0),h);}const _d=255,Ad=_d*Uh;function Sd(t,e,r,n,i,s,a,o,l,u,c,h,p,d,f,y,m){const g=function(t,e,r,n,i,s,a,o){const l=[];if(0===e.positionedLines.length)return l;const u=n.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,c=function(t){const e=t[0],r=t[1],n=e*r;return n>0?[e,-r]:n<0?[-e,r]:0===e?[r,e]:[r,-e]}(r);let h=Math.abs(e.top-e.bottom);for(const t of e.positionedLines)h-=t.lineOffset;const p=e.positionedLines.length,d=h/p;let f=e.top-r[1];for(let t=0;t<p;++t){const n=e.positionedLines[t];f=ud(e,d,f,t);for(const t of n.positionedGlyphs){if(!t.rect)continue;const n=t.rect||{};let s=wp+1,h=!0,p=1,d=0;if(t.imageName){const e=a[t.imageName];if(!e)continue;if(e.sdf){N("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,p=e.pixelRatio,s=Ap/p;}const y=(i||o)&&t.vertical,m=t.metrics.advance*t.scale/2,g=t.metrics,v=t.rect;if(null===v)continue;o&&e.verticalizable&&(d=t.imageName?m-t.metrics.width*t.scale/2:0);const b=i?[t.x+m,t.y]:[0,0];let w=[0,0],_=[0,0],A=!1;i||(y?(_=[t.x+m+c[0],t.y+c[1]-d],A=!0):w=[t.x+m+r[0],t.y+r[1]-d]);const S=v.w*t.scale/(p*(t.localGlyph?td:1)),k=v.h*t.scale/(p*(t.localGlyph?td:1));let I,M,T,z;if(y){const e=t.y-f,r=new x(-m,m-e),n=-Math.PI/2,i=new x(..._);I=new x(-m+w[0],w[1]),I._rotateAround(n,r)._add(i),I.x+=-e+m,I.y-=(g.left-s)*t.scale;const a=t.imageName?g.advance*t.scale:Rh*t.scale,o=String.fromCharCode(t.glyph);Zh(o)?I.x+=(1-s)*t.scale:Kh(o)?I.x+=a-g.height*t.scale+(-s-1)*t.scale:I.x+=t.imageName||g.width+2*s===v.w&&g.height+2*s===v.h?(a-k)/2:(a-(g.height+2*s)*t.scale)/2,M=new x(I.x,I.y-S),T=new x(I.x+k,I.y),z=new x(I.x+k,I.y-S);}else {const e=(g.left-s)*t.scale-m+w[0],r=(-g.top-s)*t.scale+w[1],n=e+S,i=r+k;I=new x(e,r),M=new x(n,r),T=new x(e,i),z=new x(n,i);}if(u){let t;t=i?new x(0,0):A?new x(c[0],c[1]):new x(r[0],r[1]),I._rotateAround(u,t),M._rotateAround(u,t),T._rotateAround(u,t),z._rotateAround(u,t);}const B=new x(0,0),E=new x(0,0);l.push({tl:I,tr:M,bl:T,br:z,tex:n,writingMode:e.writingMode,glyphOffset:b,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:B,pixelOffsetBR:E,minFontScaleX:0,minFontScaleY:0});}}return l}(0,n,l,s,a,o,i,t.allowVerticalPlacement),v=t.textSizeData;let b=null;"source"===v.kind?(b=[Uh*s.layout.get("text-size").evaluate(o,{},m)],b[0]>Ad&&N(`${t.layerIds[0]}: Value for "text-size" is >= ${_d}. Reduce your "text-size".`)):"composite"===v.kind&&(b=[Uh*f.compositeTextSizes[0].evaluate(o,{},m),Uh*f.compositeTextSizes[1].evaluate(o,{},m)],(b[0]>Ad||b[1]>Ad)&&N(`${t.layerIds[0]}: Value for "text-size" is >= ${_d}. Reduce your "text-size".`)),t.addSymbols(t.text,g,b,l,a,o,c,e,r,u.lineStartIndex,u.lineLength,d,y,m);for(const e of h)p[e]=t.text.placedSymbolArray.length-1;return 4*g.length}function kd(t){for(const e in t)return t[e];return null}function Id(t,e,r,n,i,s,a,o,l,u){let c=a.top,h=a.bottom,p=a.left,d=a.right;const f=a.collisionPadding;if(f&&(p-=f[0],c-=f[1],d+=f[2],h+=f[3]),l){const t=new x(p,c),e=new x(d,c),r=new x(p,h),n=new x(d,h),i=w(l);let s=new x(0,0);u&&(s=new x(u[0],u[1])),t._rotateAround(i,s),e._rotateAround(i,s),r._rotateAround(i,s),n._rotateAround(i,s),p=Math.min(t.x,e.x,r.x,n.x),d=Math.max(t.x,e.x,r.x,n.x),c=Math.min(t.y,e.y,r.y,n.y),h=Math.max(t.y,e.y,r.y,n.y);}return t.emplaceBack(e.x,e.y,e.z,r.x,r.y,p,c,d,h,o,n,i,s),t.length-1}function Md(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Td(t,e,r,n){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<r)return !0}else i[e]=[];return i[e].push(n),!1}function zd(t,e){const r=t.fovAboveCenter,n=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,i=(t._camera.position[2]*t.worldSize-n)/Math.cos(t._pitch),s=Math.sin(r)*i/Math.sin(Math.max(Math.PI/2-t._pitch-r,.01)),a=Math.sin(t._pitch)*s+i;return Math.min(1.01*a,i*(1/t._horizonShift))}function Bd(t,e){if(!e.isReprojectedInTileSpace)return {scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const r=Math.pow(2,-t.z),n=t.x*r,i=(t.x+1)*r,s=t.y*r,a=(t.y+1)*r,o=Kl(n),l=Kl(i),u=Xl(s),c=Xl(a),h=e.project(o,u),p=e.project(l,u),d=e.project(l,c),f=e.project(o,c);let y=Math.min(h.x,p.x,d.x,f.x),m=Math.min(h.y,p.y,d.y,f.y),g=Math.max(h.x,p.x,d.x,f.x),x=Math.max(h.y,p.y,d.y,f.y);const v=r/16;function b(t,r,n,i,s,a){const o=(n+s)/2,l=(i+a)/2,u=e.project(Kl(o),Xl(l)),c=Math.max(0,y-u.x,m-u.y,u.x-g,u.y-x);y=Math.min(y,u.x),g=Math.max(g,u.x),m=Math.min(m,u.y),x=Math.max(x,u.y),c>v&&(b(t,u,n,i,o,l),b(u,r,o,l,s,a));}b(h,p,n,s,i,s),b(p,d,i,s,i,a),b(d,f,i,a,n,a),b(f,h,n,a,n,s),y-=v,m-=v,g+=v,x+=v;const w=1/Math.max(g-y,x-m);return {scale:w,x:y*w,y:m*w,x2:g*w,y2:x*w,projection:e}}const Ed=po(new Float32Array(16));class Cd{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7];}project(t,e){return {x:0,y:0,z:0}}unproject(t,e){return new Ol(0,0)}projectTilePoint(t,e,r){return {x:t,y:e,z:0}}locationPoint(t,e,r=!0){return t._coordinatePoint(t.locationCoordinate(e),r)}pixelsPerMeter(t,e){return Zl(1,t)*e}pixelSpaceConversion(t,e,r){return 1}farthestPixelDistance(t){return zd(t,t.pixelsPerMeter)}pointCoordinate(t,e,r,n){const i=t.horizonLineFromTop(!1),s=new x(e,Math.max(i,r));return t.rayIntersectionCoordinate(t.pointRayIntersection(s,n))}pointCoordinate3D(t,e,r){const n=new x(e,r);if(t.elevation)return t.elevation.pointCoordinate(n);{const e=this.pointCoordinate(t,n.x,n.y,0);return [e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return !this.pointCoordinate3D(t,e.x,e.y);const r=t.horizonLineFromTop();return e.y<r}createInversionMatrix(t,e){return Ed}createTileMatrix(t,e,r){let n,i,s;const a=r.canonical,o=po(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Bd(a,this);n=1,i=l.x+r.wrap*l.scale,s=l.y,go(o,o,[n/l.scale,n/l.scale,t.pixelsPerMeter/e]);}else n=e/t.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*r.wrap)*n,s=a.y*n;return mo(o,o,[i,s,0]),go(o,o,[n/ao,n/ao,1]),o}upVector(t,e,r){return [0,0,1]}upVectorScale(t,e,r){return {metersToTile:1}}}class Pd extends Cd{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,r]=this.parallels=t.parallels||[29.5,45.5],n=Math.sin(w(e));this.n=(n+Math.sin(w(r)))/2,this.c=1+n*(2*this.n-n),this.r0=Math.sqrt(this.c)/this.n;}project(t,e){const{n:r,c:n,r0:i}=this,s=w(t-this.center[0]),a=w(e),o=Math.sqrt(n-2*r*Math.sin(a))/r;return {x:o*Math.sin(s*r),y:o*Math.cos(s*r)-i,z:0}}unproject(t,e){const{n:r,c:n,r0:i}=this,s=i+e;let a=Math.atan2(t,Math.abs(s))*Math.sign(s);s*r<0&&(a-=Math.PI*Math.sign(t)*Math.sign(s));const o=w(this.center[0])*r;a=z(a,-Math.PI-o,Math.PI-o);const l=M(_(a/r)+this.center[0],-180,180),u=Math.asin(M((n-(t*t+s*s)*r*r)/(2*r),-1,1)),c=M(_(u),-Hl,Hl);return new Ol(l,c)}}const Dd=1.340264,Vd=-.081106,Ld=893e-6,Fd=.003796,Rd=Math.sqrt(3)/2;class Ud extends Cd{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const r=Math.asin(Rd*Math.sin(e)),n=r*r,i=n*n*n;return {x:.5*(t*Math.cos(r)/(Rd*(Dd+3*Vd*n+i*(7*Ld+9*Fd*n)))/Math.PI+.5),y:1-.5*(r*(Dd+Vd*n+i*(Ld+Fd*n))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let r=e=(2*(1-e)-1)*Math.PI,n=r*r,i=n*n*n;for(let t,s,a,o=0;o<12&&(s=r*(Dd+Vd*n+i*(Ld+Fd*n))-e,a=Dd+3*Vd*n+i*(7*Ld+9*Fd*n),t=s/a,r=M(r-t,-Math.PI/3,Math.PI/3),n=r*r,i=n*n*n,!(Math.abs(t)<1e-12));++o);const s=Rd*t*(Dd+3*Vd*n+i*(7*Ld+9*Fd*n))/Math.cos(r),a=Math.asin(Math.sin(r)/Rd),o=M(180*s/Math.PI,-180,180),l=M(180*a/Math.PI,-Hl,Hl);return new Ol(o,l)}}class $d extends Cd{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0;}project(t,e){return {x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const r=360*(t-.5),n=M(360*(.5-e),-Hl,Hl);return new Ol(r,n)}}const jd=Math.PI/2;function Od(t){return Math.tan((jd+t)/2)}class qd extends Cd{constructor(t){super(t),this.center=t.center||[0,30];const[e,r]=this.parallels=t.parallels||[30,30];let n=w(e),i=w(r);this.southernCenter=n+i<0,this.southernCenter&&(n=-n,i=-i);const s=Math.cos(n),a=Od(n);this.n=n===i?Math.sin(n):Math.log(s/Math.cos(i))/Math.log(Od(i)/a),this.f=s*Math.pow(Od(n),this.n)/this.n;}project(t,e){e=w(e),this.southernCenter&&(e=-e),t=w(t-this.center[0]);const r=1e-6,{n:n,f:i}=this;i>0?e<-jd+r&&(e=-jd+r):e>jd-r&&(e=jd-r);const s=i/Math.pow(Od(e),n);let a=s*Math.sin(n*t),o=i-s*Math.cos(n*t);return a=.5*(a/Math.PI+.5),o=.5*(o/Math.PI+.5),{x:a,y:this.southernCenter?o:1-o,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n:r,f:n}=this,i=n-e,s=Math.sign(i),a=Math.sign(r)*Math.sqrt(t*t+i*i);let o=Math.atan2(t,Math.abs(i))*s;i*r<0&&(o-=Math.PI*Math.sign(t)*s);const l=M(_(o/r)+this.center[0],-180,180),u=M(_(2*Math.atan(Math.pow(n/a,1/r))-jd),-Hl,Hl);return new Ol(l,this.southernCenter?-u:u)}}class Nd extends Cd{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null;}project(t,e){return {x:Nl(t),y:Gl(e),z:0}}unproject(t,e){const r=Kl(t),n=Xl(e);return new Ol(r,n)}}const Gd=w(Hl);class Zd extends Cd{project(t,e){const r=(e=w(e))*e,n=r*r;return {x:.5*((t=w(t))*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let r=e=(2*(1-e)-1)*Math.PI,n=25,i=0,s=r*r;do{s=r*r;const t=s*s;i=(r*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))-e)/(1.007226+s*(.045255+t*(.259866*s-.311325-.005916*11*t))),r=M(r-i,-Gd,Gd);}while(Math.abs(i)>1e-6&&--n>0);s=r*r;const a=M(_(t/(.8707+s*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979))),-180,180),o=_(r);return new Ol(a,o)}}const Kd=w(Hl);class Xd extends Cd{project(t,e){e=w(e),t=w(t);const r=Math.cos(e),n=2/Math.PI,i=Math.acos(r*Math.cos(t/2)),s=Math.sin(i)/i,a=.5*(t*n+2*r*Math.sin(t/2)/s)||0,o=.5*(e+Math.sin(e)/s)||0;return {x:.5*(a/Math.PI+.5),y:1-.5*(o/Math.PI+1),z:0}}unproject(t,e){let r=t=(2*t-.5)*Math.PI,n=e=(2*(1-e)-1)*Math.PI,i=25;const s=1e-6;let a=0,o=0;do{const i=Math.cos(n),s=Math.sin(n),l=2*s*i,u=s*s,c=i*i,h=Math.cos(r/2),p=Math.sin(r/2),d=2*h*p,f=p*p,y=1-c*h*h,m=y?1/y:0,g=y?Math.acos(i*h)*Math.sqrt(1/y):0,x=.5*(2*g*i*p+2*r/Math.PI)-t,v=.5*(g*s+n)-e,b=.5*m*(c*f+g*i*h*u)+1/Math.PI,w=m*(d*l/4-g*s*p),_=.125*m*(l*p-g*s*c*d),A=.5*m*(u*h+g*f*i)+.5,S=w*_-A*b;a=(v*w-x*A)/S,o=(x*_-v*b)/S,r=M(r-a,-Math.PI,Math.PI),n=M(n-o,-Kd,Kd);}while((Math.abs(a)>s||Math.abs(o)>s)&&--i>0);return new Ol(_(r),_(n))}}class Jd extends Cd{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(w(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0;}project(t,e){const{scale:r,cosPhi:n}=this;return {x:w(t)*n*r+.5,y:-Math.sin(w(e))/n*r+.5,z:0}}unproject(t,e){const{scale:r,cosPhi:n}=this,i=-(e-.5)/r,s=M(_((t-.5)/r)/n,-180,180),a=Math.asin(M(i*n,-1,1)),o=M(_(a),-Hl,Hl);return new Ol(s,o)}}class Hd extends Nd{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5];}projectTilePoint(t,e,r){const n=Ml(t,e,r);return Fo(n,n,Bl(xl(r))),{x:n[0],y:n[1],z:n[2]}}locationPoint(t,e){const r=Il(e.lat,e.lng),n=Do([],r),i=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Po(r,r,n,Zl(1,0)*ao*i);const s=po(new Float64Array(16));return yo(s,t.pixelMatrix,t.globeMatrix),Fo(r,r,s),new x(r[0],r[1])}pixelsPerMeter(t,e){return Zl(1,0)*e}pixelSpaceConversion(t,e,r){const n=Zl(1,t)*e,i=Er(Zl(1,45)*e,n,r);return this.pixelsPerMeter(t,e)/i}createTileMatrix(t,e,r){const n=El(xl(r.canonical));return yo(new Float64Array(16),t.globeMatrix,n)}createInversionMatrix(t,e){const{center:r}=t,n=Bl(xl(e));return vo(n,n,w(r.lng)),xo(n,n,w(r.lat)),go(n,n,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(n)}pointCoordinate(t,e,r,n){return yl(t,e,r,!0)||new Wl(0,0)}pointCoordinate3D(t,e,r){const n=this.pointCoordinate(t,e,r,0);return [n.x,n.y,n.z]}isPointAboveHorizon(t,e){return !yl(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const r=t.cameraToCenterDistance,n=t._centerAltitude*e,i=t._camera,s=t._camera.forward(),a=Mo([],Co([],s,-r),[0,0,n]),o=t.worldSize/(2*Math.PI),l=[0,0,-o],u=t.width/t.height,c=Math.tan(t.fovAboveCenter),h=Co([],i.up(),c),p=Co([],i.right(),c*u),d=Do([],Mo([],Mo([],s,h),p)),f=[];let y;if(new el(a,d).closestPointOnSphere(l,o,f)){const e=Mo([],f,l),r=$o([],e,a);y=Math.cos(t.fovAboveCenter)*ko(r);}else {const t=$o([],a,l),e=$o([],l,a);Do(e,e);const r=ko(t)-o;y=Math.sqrt(r*(r+2*o));const n=Math.acos(y/(o+r))-Math.acos(Vo(s,e));y*=Math.cos(n);}return 1.01*y}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),r=Pl(t.zoom);if(r>0){const n=zd(t,Zl(1,t.center.lat)*t.worldSize),i=t.worldSize/(2*Math.PI),s=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Er(e,n+i*(1-Math.cos(s)),Math.pow(r,10))}return e}upVector(t,e,r){return Ml(e,r,t,1)}upVectorScale(t){return {metersToTile:fl(Tl(xl(t)))}}}function Yd(t){const e=t.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new Nd(t);case"equirectangular":return new $d(t);case"naturalEarth":return new Zd(t);case"equalEarth":return new Ud(t);case"winkelTripel":return new Xd(t);case"albers":return r?new Jd(t):new Pd(t);case"lambertConformalConic":return r?new Jd(t):new qd(t);case"globe":return new Hd(t)}throw new Error(`Invalid projection name: ${t.name}`)}const Wd=Kc.types,Qd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tf(t,e,r,n,i,s,a,o,l,u,c,h,p){const d=o?Math.min(Ad,Math.round(o[0])):0,f=o?Math.min(Ad,Math.round(o[1])):0;t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),s,a,(d<<1)+(l?1:0),f,16*u,16*c,256*h,256*p);}function ef(t,e,r,n,i,s,a){t.emplaceBack(e,r,n,i,s,a);}function rf(t,e,r,n,i){t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i);}function nf(t){for(const e of t.sections)if(ls(e.text))return !0;return !1}class sf{constructor(t){this.layoutVertexArray=new Xs,this.indexArray=new ra,this.programConfigurations=t,this.segments=new so,this.dynamicLayoutVertexArray=new Ns,this.opacityVertexArray=new Hs,this.placedSymbolArray=new fa,this.globeExtVertexArray=new Js;}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Eh.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ph.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Qd,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Ch.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t));}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy());}}Ji(sf,"SymbolBuffers");class af{constructor(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new so,this.collisionVertexArray=new ta,this.collisionVertexArrayExt=new ea;}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Dh.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Vh.members,!0);}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy());}}Ji(af,"CollisionBuffers");class of{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=po([]),this.placementViewportMatrix=po([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$h(this.zoom,e["text-size"]),this.iconSizeData=$h(this.zoom,e["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((t=>Ip[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection;}createArrays(){this.text=new sf(new Ja(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new sf(new Ja(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new ga,this.lineVertexArray=new xa,this.symbolInstances=new ma;}calculateGlyphDependencies(t,e,r,n,i){for(let r=0;r<t.length;r++)if(e[t.charCodeAt(r)]=!0,n&&i){const n=Gh[t.charAt(r)];n&&(e[n.charCodeAt(0)]=!0);}}populate(t,e,r,n){const i=this.layers[0],s=i.layout,a="globe"===this.projection.name,o=s.get("text-font"),l=s.get("text-field"),u=s.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof De&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),h="constant"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,p=s.get("symbol-sort-key");if(this.features=[],!c&&!h)return;const d=e.iconDependencies,f=e.glyphDependencies,y=e.availableImages,m=new ws(this.zoom);for(const{feature:e,id:l,index:u,sourceLayerIndex:g}of t){const t=i._featureFilter.needGeometry,x=ou(e,t);if(!i._featureFilter.filter(m,x,r))continue;if(t||(x.geometry=au(e,r,n)),a&&1!==e.type&&r.z<=5){const t=x.geometry,e=.98078528056,n=(t,n)=>Vo(Ml(t.x,t.y,r,1),Ml(n.x,n.y,r,1))<e;for(let e=0;e<t.length;e++)t[e]=ru(t[e],n);}let v,b;if(c){const t=i.getValueAndResolveTokens("text-field",x,r,y),e=De.factory(t);nf(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===xs()||this.hasRTLText&&bs.isParsed())&&(v=Nh(e,i,x));}if(h){const t=i.getValueAndResolveTokens("icon-image",x,r,y);b=t instanceof Ve?t:Ve.fromString(t);}if(!v&&!b)continue;const w=this.sortFeaturesByKey?p.evaluate(x,{},r):void 0;if(this.features.push({id:l,text:v,icon:b,index:u,sourceLayerIndex:g,geometry:x.geometry,properties:e.properties,type:Wd[e.type],sortKey:w}),b&&(d[b.name]=!0),v){const t=o.evaluate(x,{},r).join(","),e="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ip.vertical)>=0;for(const r of v.sections)if(r.image)d[r.image.name]=!0;else {const n=es(v.toString()),i=r.fontStack||t,s=f[i]=f[i]||{};this.calculateGlyphDependencies(r.text,s,e,this.allowVerticalPlacement,n);}}}"line"===s.get("symbol-placement")&&(this.features=function(t){const e={},r={},n=[];let i=0;function s(e){n.push(t[e]),i++;}function a(t,e,i){const s=r[t];return delete r[t],r[e]=s,n[s].geometry[0].pop(),n[s].geometry[0]=n[s].geometry[0].concat(i[0]),s}function o(t,r,i){const s=e[r];return delete e[r],e[t]=s,n[s].geometry[0].shift(),n[s].geometry[0]=i[0].concat(n[s].geometry[0]),s}function l(t,e,r){const n=r?e[0][e[0].length-1]:e[0][0];return `${t}:${n.x}:${n.y}`}for(let u=0;u<t.length;u++){const c=t[u],h=c.geometry,p=c.text?c.text.toString():null;if(!p){s(u);continue}const d=l(p,h),f=l(p,h,!0);if(d in r&&f in e&&r[d]!==e[f]){const t=o(d,f,h),i=a(d,f,n[t].geometry);delete e[d],delete r[f],r[l(p,n[i].geometry,!0)]=i,n[t].geometry=null;}else d in r?a(d,f,h):f in e?o(d,f,h):(s(u),e[d]=i-1,r[f]=i-1);}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey));}update(t,e,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r,n));}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return !this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0;}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy();}getProjection(){return this.projectionInstance||(this.projectionInstance=Yd(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData();}addToLineVertexArray(t,e){const r=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:t,y:r}of e)this.lineVertexArray.emplaceBack(t,r);return {lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(t,e,r,n,i,s,a,o,l,u,c,h,p,d){const f=t.indexArray,y=t.layoutVertexArray,m=t.globeExtVertexArray,g=t.segments.prepareSegment(4*e.length,y,f,this.canOverlap?s.sortKey:void 0),x=this.glyphOffsetArray.length,v=g.vertexLength,b=this.allowVerticalPlacement&&a===Ip.vertical?Math.PI/2:0,w=s.text&&s.text.sections;for(let n=0;n<e.length;n++){const{tl:i,tr:a,bl:u,br:c,tex:h,pixelOffsetTL:x,pixelOffsetBR:v,minFontScaleX:_,minFontScaleY:A,glyphOffset:S,isSDF:k,sectionIndex:I}=e[n],M=g.vertexLength,T=S[1];if(tf(y,l.x,l.y,i.x,T+i.y,h.x,h.y,r,k,x.x,x.y,_,A),tf(y,l.x,l.y,a.x,T+a.y,h.x+h.w,h.y,r,k,v.x,x.y,_,A),tf(y,l.x,l.y,u.x,T+u.y,h.x,h.y+h.h,r,k,x.x,v.y,_,A),tf(y,l.x,l.y,c.x,T+c.y,h.x+h.w,h.y+h.h,r,k,v.x,v.y,_,A),o){const{x:e,y:r,z:n}=o.anchor,[i,s,a]=o.up;ef(m,e,r,n,i,s,a),ef(m,e,r,n,i,s,a),ef(m,e,r,n,i,s,a),ef(m,e,r,n,i,s,a),rf(t.dynamicLayoutVertexArray,e,r,n,b);}else rf(t.dynamicLayoutVertexArray,l.x,l.y,l.z,b);f.emplaceBack(M,M+1,M+2),f.emplaceBack(M+1,M+2,M+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),n!==e.length-1&&I===e[n+1].sectionIndex||t.programConfigurations.populatePaintArrays(y.length,s,s.index,{},p,d,w&&w[I]);}const _=o?o.anchor:l;t.placedSymbolArray.emplaceBack(_.x,_.y,_.z,l.x,l.y,x,this.glyphOffsetArray.length-x,v,u,c,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,0,!1,0,h,0);}_commitLayoutVertex(t,e,r,n,i,s,a){t.emplaceBack(e,r,n,i,s,Math.round(a.x),Math.round(a.y));}_addCollisionDebugVertices(t,e,r,n,i,s,a){const o=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=o.vertexLength,u=a.tileAnchorX,c=a.tileAnchorY;for(let t=0;t<4;t++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),r.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),r.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),r.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new x(t.x1,t.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new x(t.x2,t.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new x(t.x2,t.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new x(t.x1,t.y2)),o.vertexLength+=4;const h=r.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),o.primitiveLength+=4;}_addTextDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceTextSize(t,s,e,a);this._addCollisionDebugVertices(n,i,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,s);}}_addIconDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceIconSize(t,e,s.placedIconSymbolIndex);this._addCollisionDebugVertices(n,i,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,s);}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new af(Ws,Lh.members,la),this.iconCollisionBox=new af(Ws,Lh.members,la);const r=Oh(this.iconSizeData,t),n=Oh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const s=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(n,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(n,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s);}}getSymbolInstanceTextSize(t,e,r,n){const i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:n),s=jh(this.textSizeData,t,i)/Rh;return this.tilePixelRatio*s}getSymbolInstanceIconSize(t,e,r){const n=this.icon.placedSymbolArray.get(r),i=jh(this.iconSizeData,t,n);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,r){t.emplaceBack(e,-r,-r),t.emplaceBack(e,r,-r),t.emplaceBack(e,r,r),t.emplaceBack(e,-r,r);}_updateTextDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceTextSize(t,s,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,n.padding);}}_updateIconDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceIconSize(t,e,s);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,n.padding);}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=Oh(this.iconSizeData,t),n=Oh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const s=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(n,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(n,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(r,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(r,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s.placedIconSymbolIndex);}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt);}_deserializeCollisionBoxesForSymbol(t,e,r,n,i,s,a,o,l){const u={};if(e<r){const{x1:r,y1:n,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(e);u.textBox={x1:r,y1:n,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.textFeatureIndex=d;}if(n<i){const{x1:e,y1:r,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(n);u.verticalTextBox={x1:e,y1:r,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.verticalTextFeatureIndex=d;}if(s<a){const{x1:e,y1:r,x2:n,y2:i,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(s);u.iconBox={x1:e,y1:r,x2:n,y2:i,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.iconFeatureIndex=d;}if(o<l){const{x1:e,y1:r,x2:n,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(o);u.verticalIconBox={x1:e,y1:r,x2:n,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.verticalIconFeatureIndex=d;}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex));}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const r=t.placedSymbolArray.get(e),n=r.vertexStartIndex+4*r.numGlyphs;for(let e=r.vertexStartIndex;e<n;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3);}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),r=Math.cos(t),n=[],i=[],s=[];for(let t=0;t<this.symbolInstances.length;++t){s.push(t);const a=this.symbolInstances.get(t);n.push(0|Math.round(e*a.tileAnchorX+r*a.tileAnchorY)),i.push(a.featureIndex);}return s.sort(((t,e)=>n[t]-n[e]||i[e]-i[t])),s}addToSortKeyRanges(t,e){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1});}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:n,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:s,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:o}=e;r>=0&&this.addIndicesForPlacedSymbol(this.text,r),n>=0&&n!==r&&this.addIndicesForPlacedSymbol(this.text,n),i>=0&&i!==n&&i!==r&&this.addIndicesForPlacedSymbol(this.text,i),s>=0&&this.addIndicesForPlacedSymbol(this.text,s),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),o>=0&&this.addIndicesForPlacedSymbol(this.icon,o);}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray);}}}Ji(of,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),of.MAX_GLYPHS=65535,of.addDynamicAttributes=rf;const lf=new Ps({"symbol-placement":new Bs(te.layout_symbol["symbol-placement"]),"symbol-spacing":new Bs(te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bs(te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Es(te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bs(te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bs(te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Bs(te.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bs(te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bs(te.layout_symbol["icon-rotation-alignment"]),"icon-size":new Es(te.layout_symbol["icon-size"]),"icon-text-fit":new Bs(te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bs(te.layout_symbol["icon-text-fit-padding"]),"icon-image":new Es(te.layout_symbol["icon-image"]),"icon-rotate":new Es(te.layout_symbol["icon-rotate"]),"icon-padding":new Bs(te.layout_symbol["icon-padding"]),"icon-keep-upright":new Bs(te.layout_symbol["icon-keep-upright"]),"icon-offset":new Es(te.layout_symbol["icon-offset"]),"icon-anchor":new Es(te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bs(te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bs(te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bs(te.layout_symbol["text-rotation-alignment"]),"text-field":new Es(te.layout_symbol["text-field"]),"text-font":new Es(te.layout_symbol["text-font"]),"text-size":new Es(te.layout_symbol["text-size"]),"text-max-width":new Es(te.layout_symbol["text-max-width"]),"text-line-height":new Es(te.layout_symbol["text-line-height"]),"text-letter-spacing":new Es(te.layout_symbol["text-letter-spacing"]),"text-justify":new Es(te.layout_symbol["text-justify"]),"text-radial-offset":new Es(te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bs(te.layout_symbol["text-variable-anchor"]),"text-anchor":new Es(te.layout_symbol["text-anchor"]),"text-max-angle":new Bs(te.layout_symbol["text-max-angle"]),"text-writing-mode":new Bs(te.layout_symbol["text-writing-mode"]),"text-rotate":new Es(te.layout_symbol["text-rotate"]),"text-padding":new Bs(te.layout_symbol["text-padding"]),"text-keep-upright":new Bs(te.layout_symbol["text-keep-upright"]),"text-transform":new Es(te.layout_symbol["text-transform"]),"text-offset":new Es(te.layout_symbol["text-offset"]),"text-allow-overlap":new Bs(te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Bs(te.layout_symbol["text-ignore-placement"]),"text-optional":new Bs(te.layout_symbol["text-optional"])});var uf={paint:new Ps({"icon-opacity":new Es(te.paint_symbol["icon-opacity"]),"icon-color":new Es(te.paint_symbol["icon-color"]),"icon-halo-color":new Es(te.paint_symbol["icon-halo-color"]),"icon-halo-width":new Es(te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Es(te.paint_symbol["icon-halo-blur"]),"icon-translate":new Bs(te.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bs(te.paint_symbol["icon-translate-anchor"]),"text-opacity":new Es(te.paint_symbol["text-opacity"]),"text-color":new Es(te.paint_symbol["text-color"],{runtimeType:pe,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Es(te.paint_symbol["text-halo-color"]),"text-halo-width":new Es(te.paint_symbol["text-halo-width"]),"text-halo-blur":new Es(te.paint_symbol["text-halo-blur"]),"text-translate":new Bs(te.paint_symbol["text-translate"]),"text-translate-anchor":new Bs(te.paint_symbol["text-translate-anchor"])}),layout:lf};class cf{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:le,this.defaultValue=t;}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression);}outputDefined(){return !1}serialize(){return null}}Ji(cf,"FormatSectionOverride",{omit:["defaultValue"]});class hf extends ro{constructor(t){super(t,uf);}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const r=this.layout.get("text-writing-mode");if(r){const t=[];for(const e of r)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t;}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides();}getValueAndResolveTokens(t,e,r,n){const i=this.layout.get(t).evaluate(e,{},r,n),s=this._unevaluatedLayout._values[t];return s.isDataDriven()||Jn(s.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,r)=>r in t?String(t[r]):""))}(e.properties,i)}createBucket(t){return new of(t)}queryRadius(){return 0}queryIntersectsFeature(){return !1}_setPaintOverrides(){for(const t of uf.paint.overridableProperties){if(!hf.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),r=new cf(e),n=new Xn(r,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new Yn("source",n):new Wn("composite",n,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Ts(e.property,i,e.parameters);}}_handleOverridablePaintPropertyUpdate(t,e,r){return !(!this.layout||e.isDataDriven()||r.isDataDriven())&&hf.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const r=t.get("text-field"),n=uf.paint.properties[e];let i=!1;const s=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof De)s(r.value.value.sections);else if("source"===r.value.kind){const t=e=>{i||(e instanceof je&&Re(e.value)===me?s(e.value.sections):e instanceof Ze?s(e.sections):e.eachChild(t));},e=r.value;e._styleExpression&&t(e._styleExpression.expression);}return i}getProgramConfiguration(t){return new Xa(this,t)}}var pf={paint:new Ps({"background-color":new Bs(te.paint_background["background-color"]),"background-pattern":new Bs(te.paint_background["background-pattern"]),"background-opacity":new Bs(te.paint_background["background-opacity"])})},df={paint:new Ps({"raster-opacity":new Bs(te.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bs(te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bs(te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bs(te.paint_raster["raster-brightness-max"]),"raster-saturation":new Bs(te.paint_raster["raster-saturation"]),"raster-contrast":new Bs(te.paint_raster["raster-contrast"]),"raster-resampling":new Bs(te.paint_raster["raster-resampling"]),"raster-fade-duration":new Bs(te.paint_raster["raster-fade-duration"])})};class ff extends ro{constructor(t){super(t,{}),this.implementation=t;}is3D(){return "3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return !!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return !1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl);}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl);}}var yf={paint:new Ps({"sky-type":new Bs(te.paint_sky["sky-type"]),"sky-atmosphere-sun":new Bs(te.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Bs(te.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Bs(te.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Bs(te.paint_sky["sky-gradient-radius"]),"sky-gradient":new Cs(te.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Bs(te.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Bs(te.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Bs(te.paint_sky["sky-opacity"])})};function mf(t,e,r){const n=[0,0,1],i=Ko([]);return Jo(i,i,r?-w(t)+Math.PI:w(t)),Xo(i,i,-w(e)),Ro(n,n,i),Do(n,n)}const gf={circle:class extends ro{constructor(t){super(t,Tu);}createBucket(t){return new cu(t)}queryRadius(t){const e=t;return Au("circle-radius",this,e)+Au("circle-stroke-width",this,e)+Su(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,r,n,i,s,a,o){const l=Iu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return zu(t,n,s,a,o,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}getProgramIds(){return ["circle"]}getProgramConfiguration(t){return new Xa(this,t)}},heatmap:class extends ro{createBucket(t){return new Du(t)}constructor(t){super(t,$u),this._updateColorRamp();}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp();}_updateColorRamp(){this.colorRamp=ju({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null;}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null);}queryRadius(t){return Au("heatmap-radius",this,t)}queryIntersectsFeature(t,e,r,n,i,s,a,o){const l=this.paint.get("heatmap-radius").evaluate(e,r);return zu(t,n,s,a,o,!0,!0,new x(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return ["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Xa(this,t)}},hillshade:class extends ro{constructor(t){super(t,Ou);}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return ["hillshade","hillshadePrepare"]}},fill:class extends ro{constructor(t){super(t,zc);}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(t){return new Xa(this,t)}recalculate(t,e){super.recalculate(t,e);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"]);}createBucket(t){return new Mc(t)}queryRadius(){return Su(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,r,n,i,s){return !t.queryGeometry.isAboveHorizon&&du(ku(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),n)}isTileClipped(){return !0}},"fill-extrusion":class extends ro{constructor(t){super(t,ch);}createBucket(t){return new th(t)}queryRadius(){return Su(this.paint.get("fill-extrusion-translate"))}is3D(){return !0}getProgramIds(){return [this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Xa(this,t)}queryIntersectsFeature(t,e,r,n,i,s,a,o,l){const u=Iu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(e,r),h=this.paint.get("fill-extrusion-base").evaluate(e,r),p=[0,0],d=o&&s.elevation,f=s.elevation?s.elevation.exaggeration():1,y=t.tile.getBucket(this);if(d&&y instanceof th){const t=y.centroidVertexArray,e=l+1;e<t.length&&(p[0]=t.geta_centroid_pos0(e),p[1]=t.geta_centroid_pos1(e));}if(0===p[0]&&1===p[1])return !1;"globe"===s.projection.name&&(n=lh([n],[new x(0,0),new x(ao,ao)],t.tileID.canonical).map((t=>t.polygon)).flat());const m=d?o:null,[g,v]=function(t,e,r,n,i,s,a,o,l,u,c){return "globe"===t.projection.name?function(t,e,r,n,i,s,a,o,l,u,c){const h=[],p=[],d=t.projection.upVectorScale(c,t.center.lat,t.worldSize).metersToTile,f=[0,0,0,1],y=[0,0,0,1],m=(t,e,r,n)=>{t[0]=e,t[1]=r,t[2]=n,t[3]=1;},g=oh();r>0&&(r+=g),n+=g;for(const g of e){const e=[],x=[];for(const h of g){const p=h.x+i.x,g=h.y+i.y,v=t.projection.projectTilePoint(p,g,c),b=t.projection.upVector(c,h.x,h.y);let w=r,_=n;if(a){const t=vh(p,g,r,n,a,o,l,u);w+=t.base,_+=t.top;}0!==r?m(f,v.x+b[0]*d*w,v.y+b[1]*d*w,v.z+b[2]*d*w):m(f,v.x,v.y,v.z),m(y,v.x+b[0]*d*_,v.y+b[1]*d*_,v.z+b[2]*d*_),Fo(f,f,s),Fo(y,y,s),e.push(new mh(f[0],f[1],f[2])),x.push(new mh(y[0],y[1],y[2]));}h.push(e),p.push(x);}return [h,p]}(t,e,r,n,i,s,a,o,l,u,c):a?function(t,e,r,n,i,s,a,o,l){const u=[],c=[],h=[0,0,0,1];for(const p of t){const t=[],d=[];for(const u of p){const c=u.x+n.x,p=u.y+n.y,f=vh(c,p,e,r,s,a,o,l);h[0]=c,h[1]=p,h[2]=f.base,h[3]=1,Go(h,h,i),h[3]=Math.max(h[3],1e-5);const y=new mh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=c,h[1]=p,h[2]=f.top,h[3]=1,Go(h,h,i),h[3]=Math.max(h[3],1e-5);const m=new mh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);t.push(y),d.push(m);}u.push(t),c.push(d);}return [u,c]}(e,r,n,i,s,a,o,l,u):function(t,e,r,n,i){const s=[],a=[],o=i[8]*e,l=i[9]*e,u=i[10]*e,c=i[11]*e,h=i[8]*r,p=i[9]*r,d=i[10]*r,f=i[11]*r;for(const e of t){const t=[],r=[];for(const s of e){const e=s.x+n.x,a=s.y+n.y,y=i[0]*e+i[4]*a+i[12],m=i[1]*e+i[5]*a+i[13],g=i[2]*e+i[6]*a+i[14],x=i[3]*e+i[7]*a+i[15],v=y+o,b=m+l,w=g+u,_=Math.max(x+c,1e-5),A=y+h,S=m+p,k=g+d,I=Math.max(x+f,1e-5);t.push(new mh(v/_,b/_,w/_)),r.push(new mh(A/I,S/I,k/I));}s.push(t),a.push(r);}return [s,a]}(e,r,n,i,s)}(s,n,h,c,u,a,m,p,f,s.center.lat,t.tileID.canonical),b=t.queryGeometry;return function(t,e,r){let n=1/0;du(r,e)&&(n=xh(r,e[0]));for(let i=0;i<e.length;i++){const s=e[i],a=t[i];for(let t=0;t<s.length-1;t++){const e=s[t],i=[e,s[t+1],a[t+1],a[t],e];hu(r,i)&&(n=Math.min(n,xh(r,i)));}}return n!==1/0&&n}(g,v,b.isPointQuery()?b.screenBounds:b.screenGeometry)}},line:class extends ro{constructor(t){super(t,Th),this.gradientVersion=0;}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Br,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER;}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=zh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t);}createBucket(t){return new Ih(t)}getProgramIds(){return [this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Xa(this,t)}queryRadius(t){const e=t,r=Bh(Au("line-width",this,e),Au("line-gap-width",this,e)),n=Au("line-offset",this,e);return r/2+Math.abs(n)+Su(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,r,n,i,s){if(t.queryGeometry.isAboveHorizon)return !1;const a=ku(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),o=t.pixelToTileUnitsFactor/2*Bh(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),l=this.paint.get("line-offset").evaluate(e,r);return l&&(n=function(t,e){const r=[],n=new x(0,0);for(let i=0;i<t.length;i++){const s=t[i],a=[];for(let t=0;t<s.length;t++){const r=s[t],i=s[t+1],o=0===t?n:r.sub(s[t-1])._unit()._perp(),l=t===s.length-1?n:i.sub(r)._unit()._perp(),u=o._add(l)._unit();u._mult(1/(u.x*l.x+u.y*l.y)),a.push(u._mult(e)._add(r));}r.push(a);}return r}(n,l*t.pixelToTileUnitsFactor)),function(t,e,r){for(let n=0;n<e.length;n++){const i=e[n];if(t.length>=3)for(let e=0;e<i.length;e++)if(bu(t,i[e]))return !0;if(fu(t,i,r))return !0}return !1}(a,n,o)}isTileClipped(){return !0}},symbol:hf,background:class extends ro{constructor(t){super(t,pf);}getProgramIds(){return [this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ro{constructor(t){super(t,df);}getProgramIds(){return ["raster"]}},sky:class extends ro{constructor(t){super(t,yf),this._updateColorRamp();}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0);}_updateColorRamp(){this.colorRamp=ju({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null);}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return !0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return !1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const r=this.paint.get("sky-atmosphere-sun"),n=!r,i=t.style.light,s=i.properties.get("position");return n&&"viewport"===i.properties.get("anchor")&&N("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?mf(s.azimuthal,90-s.polar,e):mf(r[0],90-r[1],e)}const r=this.paint.get("sky-gradient-center");return mf(r[0],90-r[1],e)}is3D(){return !1}isSky(){return !0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position");}hasOffscreenPass(){return !0}getProgramIds(){const t=this.paint.get("sky-type");return "atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class xf{constructor(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n);}update(t,r,n){const{width:i,height:s}=t,{context:a}=this,{gl:o}=a,{HTMLImageElement:l,HTMLCanvasElement:u,HTMLVideoElement:c,ImageData:h,ImageBitmap:p}=e;if(o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!r||!1!==r.premultiply)),n||this.size&&this.size[0]===i&&this.size[1]===s){const{x:e,y:r}=n||{x:0,y:0};t instanceof l||t instanceof u||t instanceof c||t instanceof h||p&&t instanceof p?o.texSubImage2D(o.TEXTURE_2D,0,e,r,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,e,r,i,s,o.RGBA,o.UNSIGNED_BYTE,t.data);}else this.size=[i,s],t instanceof l||t instanceof u||t instanceof c||t instanceof h||p&&t instanceof p?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,i,s,0,this.format,o.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D);}bind(t,e){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?t===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e);}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null;}}class vf{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback();});}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback();}),0));}remove(){this._channel=void 0,this._callback=()=>{};}}class bf{constructor(){this.tasks={},this.taskQueue=[],R(["process"],this),this.invoker=new vf(this.process),this.nextId=0;}add(t,e){const r=this.nextId++,n=function({type:t,isSymbolTile:e,zoom:r}){return r=r||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-r:"maybePrepare"===t&&e?400-r:500:200-r:100-r}(e);if(0===n){K();try{t();}finally{}return {cancel:()=>{}}}return this.tasks[r]={fn:t,metadata:e,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r];}}}process(){K();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn();}finally{}}pick(){let t=null,e=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<e&&(e=n.priority,t=r);}if(null===t)return null;const r=this.taskQueue[t];return this.taskQueue.splice(t,1),r}remove(){this.invoker.remove();}}class wf{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r;}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const _f=["tile","layer","source","sourceLayer","state"];class Af{constructor(t,e,r,n,i){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=r,this._y=n,this.properties=t.properties,this.id=i;}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t;}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of _f)void 0!==this[e]&&(t[e]=this[e]);return t}}const Sf=32,kf=33,If=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,r=0,n=0,i=0,s=0,a=0,o=0;for(1&e?i=s=a=Sf:r=n=o=Sf;(e>>=1)>1;){const t=r+i>>1,l=n+s>>1;1&e?(i=r,s=n,r=a,n=o):(r=i,n=s,i=a,s=o),a=t,o=l;}const l=4*t;If[l+0]=r,If[l+1]=n,If[l+2]=i,If[l+3]=s;}const Mf=new Uint16Array(2178),Tf=new Uint8Array(1089),zf=new Uint16Array(1089);function Bf(t){return 0===t?-.03125:32===t?.03125:0}var Ef=Rs([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Cf={type:2,extent:ao,loadGeometry:()=>[[new x(0,0),new x(ao+1,0),new x(ao+1,ao+1),new x(0,ao+1),new x(0,0)]]};class Pf{constructor(t,e,r,n,i){this.tileID=t,this.uid=D(),this.uses=0,this.tileSize=e,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",n&&n.transform&&(this.projection=n.transform.projection);}registerFadeDuration(t){const e=t+this.timeAdded;e<Xt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e);}wasRequested(){return "errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Bd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,r){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const r={};if(!e)return r;for(const n of t){const t=n.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){n.layers=t,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)r[e.id]=n;}}return r}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof of){if(this.hasSymbolBuckets=!0,!r)break;e.justReloaded=!0;}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof of&&e.hasRTLText){this.hasRTLText=!0,bs.isLoading()||bs.isLoaded()||"deferred"!==xs()||vs();break}}this.queryPadding=0;for(const t in this.buckets){const r=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(r));}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas);}else this.collisionBoxArray=new pa;}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded";}}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const r=this.buckets[e];r.uploadPending()&&r.upload(t);}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xf(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xf(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new xf(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0);}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture);}queryRenderedFeatures(t,e,r,n,i,s,a,o){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:a,transform:s,params:i,tileTransform:this.tileTransform},t,e,r):{}}querySourceFeatures(t,e){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),i=e?e.sourceLayer:"",s=n._geojsonTileLayer||n[i];if(!s)return;const a=hi(e&&e.filter),{z:o,x:l,y:u}=this.tileID.canonical,c={z:o,x:l,y:u};for(let e=0;e<s.length;e++){const n=s.feature(e);if(a.needGeometry){const t=ou(n,!0);if(!a.filter(new ws(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new ws(this.tileID.overscaledZ),n))continue;const h=r.getId(n,i),p=new Af(n,o,l,u,h);p.tile=c,t.push(p);}}hasData(){return "loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return !!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=X(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"]);}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let r=!1;if(this.expirationTime>t)r=!1;else if(e)if(this.expirationTime<e)r=!0;else {const n=this.expirationTime-e;n?this.expirationTime=t+Math.max(n,3e4):r=!0;}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0;}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const r=this.latestFeatureIndex.loadVTLayers(),n=e.style.listImages();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const s=this.buckets[i],a=s.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],l=t[a];if(!o||!l||0===Object.keys(l).length)continue;if(s.update(l,o,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),s instanceof Ih||s instanceof Mc){const t=e.style._getSourceCache(s.layers[0].source);e._terrain&&e._terrain.enabled&&t&&s.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID);}const u=e&&e.style&&e.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(s)));}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return !this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0;}setHoldDuration(t){this.symbolFadeHoldUntil=Xt.now()+t;}setTexture(t,e){const r=e.context,n=r.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new xf(r,t,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));}setDependencies(t,e){const r={};for(const t of e)r[t]=!0;this.dependencies[t]=r;}hasDependency(t,e){for(const r of t){const t=this.dependencies[r];if(t)for(const r of e)if(t[r])return !0}return !1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const r=au(Cf,this.tileID.canonical,this.tileTransform)[0],n=new $s,i=new ua;for(let t=0;t<r.length;t++){const{x:e,y:s}=r[t];n.emplaceBack(e,s),i.emplaceBack(t);}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(n,tl.members),this._tileDebugSegments=so.simpleSegment(0,0,n.length,i.length);}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const r=au(Cf,this.tileID.canonical,this.tileTransform)[0];let n,i;if(this.isRaster){const t=function(t,e){const r=Bd(t,e),n=Math.pow(2,t.z);for(let i=0;i<kf;i++)for(let s=0;s<kf;s++){const a=Kl((t.x+(s+Bf(s))/Sf)/n),o=Xl((t.y+(i+Bf(i))/Sf)/n),l=e.project(a,o),u=i*kf+s;Mf[2*u+0]=Math.round((l.x*r.scale-r.x)*ao),Mf[2*u+1]=Math.round((l.y*r.scale-r.y)*ao);}Tf.fill(0),zf.fill(0);for(let t=2045;t>=0;t--){const e=4*t,r=If[e+0],n=If[e+1],i=If[e+2],s=If[e+3],a=r+i>>1,o=n+s>>1,l=a+o-n,u=o+r-a,c=n*kf+r,h=s*kf+i,p=o*kf+a,d=Math.hypot((Mf[2*c+0]+Mf[2*h+0])/2-Mf[2*p+0],(Mf[2*c+1]+Mf[2*h+1])/2-Mf[2*p+1])>=16;Tf[p]=Tf[p]||(d?1:0),t<1022&&(Tf[p]=Tf[p]||Tf[(n+u>>1)*kf+(r+l>>1)]||Tf[(s+u>>1)*kf+(i+l>>1)]);}const i=new Os,s=new ra;let a=0;function o(t,e){const r=e*kf+t;return 0===zf[r]&&(i.emplaceBack(Mf[2*r+0],Mf[2*r+1],t*ao/Sf,e*ao/Sf),zf[r]=++a),zf[r]-1}function l(t,e,r,n,i,a){const u=t+r>>1,c=e+n>>1;if(Math.abs(t-i)+Math.abs(e-a)>1&&Tf[c*kf+u])l(i,a,t,e,u,c),l(r,n,i,a,u,c);else {const l=o(t,e),u=o(r,n),c=o(i,a);s.emplaceBack(l,u,c);}}return l(0,0,Sf,Sf,Sf,0),l(Sf,Sf,0,0,0,Sf),{vertices:i,indices:s}}(this.tileID.canonical,e);n=t.vertices,i=t.indices;}else {n=new Os,i=new ra;for(const{x:t,y:e}of r)n.emplaceBack(t,e,0,0);const t=xc(n.int16,void 0,4);for(let e=0;e<t.length;e+=3)i.emplaceBack(t[e],t[e+1],t[e+2]);}this._tileBoundsBuffer=t.createVertexBuffer(n,Ef.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(i),this._tileBoundsSegments=so.simpleSegment(0,0,n.length,i.length);}_makeGlobeTileDebugBuffers(t,e){const r=e.projection;if(!r||"globe"!==r.name||e.freezeTileCoverage)return;const n=this.tileID.canonical,i=Bl(bl(n,e)),s=Pl(e.zoom);let a;s>0&&(a=fo(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,n,e,i,a,s),this._makeGlobeTileDebugTextBuffer(t,n,e,i,a,s);}_globePoint(t,e,r,n,i,s,a){let o=Ml(t,e,r);if(s){const i=1<<r.z,l=Nl(n.center.lng),u=Gl(n.center.lat),c=(r.x+.5)/i-l;let h=0;c>.5?h=-1:c<-.5&&(h=1);let p=(t/ao+r.x)/i+h,d=(e/ao+r.y)/i;p=(p-l)*n._pixelsPerMercatorPixel+l,d=(d-u)*n._pixelsPerMercatorPixel+u;const f=[p*n.worldSize,d*n.worldSize,0];Fo(f,f,s),o=vl(o,f,a);}return Fo(o,o,i)}_makeGlobeTileDebugBorderBuffer(t,e,r,n,i,s){const a=new $s,o=new ua,l=new js,u=(t,u,c,h,p)=>{const d=(c-t)/(p-1),f=(h-u)/(p-1),y=a.length;for(let c=0;c<p;c++){const h=t+c*d,p=u+c*f;a.emplaceBack(h,p);const m=this._globePoint(h,p,e,r,n,i,s);l.emplaceBack(m[0],m[1],m[2]),o.emplaceBack(y+c);}},c=ao;u(0,0,c,0,16),u(c,0,c,c,16),u(c,c,0,c,16),u(0,c,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(o),this._tileDebugBuffer=t.createVertexBuffer(a,tl.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(l,Qo.members),this._tileDebugSegments=so.simpleSegment(0,0,a.length,o.length);}_makeGlobeTileDebugTextBuffer(t,e,r,n,i,s){const a=ao/4,o=new $s,l=new ra,u=new js,c=25;l.reserve(32),o.reserve(c),u.reserve(c);const h=(t,e)=>c*t+e;for(let t=0;t<c;t++){const l=t*a;for(let t=0;t<c;t++){const c=t*a;o.emplaceBack(c,l);const h=this._globePoint(c,l,e,r,n,i,s);u.emplaceBack(h[0],h[1],h[2]);}}for(let t=0;t<4;t++)for(let e=0;e<4;e++){const r=h(t,e),n=h(t,e+1),i=h(t+1,e),s=h(t+1,e+1);l.emplaceBack(r,n,i),l.emplaceBack(i,n,s);}this._tileDebugTextIndexBuffer=t.createIndexBuffer(l),this._tileDebugTextBuffer=t.createVertexBuffer(o,tl.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(u,Qo.members),this._tileDebugTextSegments=so.simpleSegment(0,0,c,32);}}class Df{constructor(){this.state={},this.stateChanges={},this.deletedStates={};}updateState(t,e,r){const n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},C(this.stateChanges[t][n],r),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null);}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])r[e]||(this.deletedStates[t][n][e]=null);}else for(const e in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e];}removeFeatureState(t,e,r){if(null===this.deletedStates[t])return;const n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null;}getState(t,e){const r=String(e),n=C({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return {};if(this.deletedStates[t]){const r=this.deletedStates[t][e];if(null===r)return {};for(const t in r)delete n[t];}return n}initializeTileState(t,e){t.setFeatureState(this.state,e);}coalesceChanges(t,e){const r={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const r in this.stateChanges[t])this.state[t][r]||(this.state[t][r]={}),C(this.state[t][r],this.stateChanges[t][r]),e[r]=this.state[t][r];r[t]=e;}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const r in this.state[t])e[r]={},this.state[t][r]={};else for(const r in this.deletedStates[t]){if(null===this.deletedStates[t][r])this.state[t][r]={};else if(this.state[t][r])for(const e of Object.keys(this.deletedStates[t][r]))delete this.state[t][r][e];e[r]=this.state[t][r];}r[t]=r[t]||{},C(r[t],e);}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const n in t)t[n].setFeatureState(r,e);}}class Vf{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[];}getElevation(t,e){const r=this.toIdx(t,e);return {min:this.minimums[r],max:this.maximums[r]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function Lf(t,e,r,n){let i=0,s=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(n[a])<1e-15){if(r[a]<t[a]||r[a]>e[a])return null}else {const o=1/n[a];let l=(t[a]-r[a])*o,u=(e[a]-r[a])*o;if(l>u){const t=l;l=u,u=t;}if(l>i&&(i=l),u<s&&(s=u),i>s)return null}return i}function Ff(t,e,r,n,i,s,a,o,l,u,c){const h=n-t,p=i-e,d=s-r,f=a-t,y=o-e,m=l-r,g=c[1]*m-c[2]*y,x=c[2]*f-c[0]*m,v=c[0]*y-c[1]*f,b=h*g+p*x+d*v;if(Math.abs(b)<1e-15)return null;const w=1/b,_=u[0]-t,A=u[1]-e,S=u[2]-r,k=(_*g+A*x+S*v)*w;if(k<0||k>1)return null;const I=A*d-S*p,M=S*h-_*d,T=_*p-A*h,z=(c[0]*I+c[1]*M+c[2]*T)*w;return z<0||k+z>1?null:(f*I+y*M+m*T)*w}function Rf(t,e,r){return (t-e)/(r-e)}function Uf(t,e,r,n,i,s,a,o,l){const u=1<<r,c=s-n,h=a-i,p=(t+1)/u*c+n,d=(e+0)/u*h+i,f=(e+1)/u*h+i;o[0]=(t+0)/u*c+n,o[1]=d,l[0]=p,l[1]=f;}class $f{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),r=[];let n=Math.ceil(Math.pow(2,e));const i=1/n,s=(t,e,r,n,i)=>{const s=n?1:0,a=(t+1)*r-s,o=e*r,l=(e+1)*r-s;i[0]=t*r,i[1]=o,i[2]=a,i[3]=l;};let a=new Vf(n);const o=[];for(let e=0;e<n*n;e++){s(e%n,Math.floor(e/n),i,!1,o);const r=Of(o[0],o[1],t),l=Of(o[2],o[1],t),u=Of(o[2],o[3],t),c=Of(o[0],o[3],t);a.minimums.push(Math.min(r,l,u,c)),a.maximums.push(Math.max(r,l,u,c)),a.leaves.push(1);}for(r.push(a),n/=2;n>=1;n/=2){const t=r[r.length-1];a=new Vf(n);for(let e=0;e<n*n;e++){s(e%n,Math.floor(e/n),2,!0,o);const r=t.getElevation(o[0],o[1]),i=t.getElevation(o[2],o[1]),l=t.getElevation(o[2],o[3]),u=t.getElevation(o[0],o[3]),c=t.isLeaf(o[0],o[1]),h=t.isLeaf(o[2],o[1]),p=t.isLeaf(o[2],o[3]),d=t.isLeaf(o[0],o[3]),f=Math.min(r.min,i.min,l.min,u.min),y=Math.max(r.max,i.max,l.max,u.max),m=c&&h&&p&&d;a.maximums.push(y),a.minimums.push(f),a.leaves.push(y-f<=5&&m?1:0);}r.push(a);}return r}(this.dem),r=e.length-1,n=e[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(e,0,0,r,0);}raycastRoot(t,e,r,n,i,s,a=1){return Lf([t,e,-100],[r,n,this.maximums[0]*a],i,s)}raycast(t,e,r,n,i,s,a=1){if(!this.nodeCount)return null;const o=this.raycastRoot(t,e,r,n,i,s,a);if(null==o)return null;const l=[],u=[],c=[],h=[],p=[{idx:0,t:o,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:o,t:d,nodex:f,nodey:y,depth:m}=p.pop();if(this.leaves[o]){Uf(f,y,m,t,e,r,n,c,h);const o=1<<m,l=(f+0)/o,u=(f+1)/o,p=(y+0)/o,g=(y+1)/o,x=Of(l,p,this.dem)*a,v=Of(u,p,this.dem)*a,b=Of(u,g,this.dem)*a,w=Of(l,g,this.dem)*a,_=Ff(c[0],c[1],x,h[0],c[1],v,h[0],h[1],b,i,s),A=Ff(h[0],h[1],b,c[0],h[1],w,c[0],c[1],x,i,s),S=Math.min(null!==_?_:Number.MAX_VALUE,null!==A?A:Number.MAX_VALUE);if(S!==Number.MAX_VALUE)return S;{const t=Po([],i,s,d);if(jf(x,v,w,b,Rf(t[0],c[0],h[0]),Rf(t[1],c[1],h[1]))>=t[2])return d}continue}let g=0;for(let p=0;p<this._siblingOffset.length;p++){Uf((f<<1)+this._siblingOffset[p][0],(y<<1)+this._siblingOffset[p][1],m+1,t,e,r,n,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[o]+p]*a;const d=Lf(c,h,i,s);if(null!=d){const t=d;l[p]=t;let e=!1;for(let r=0;r<g&&!e;r++)t>=l[u[r]]&&(u.splice(r,0,p),e=!0);e||(u[g]=p),g++;}}for(let t=0;t<g;t++){const e=u[t];p.push({idx:this.childOffsets[o]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(y<<1)+this._siblingOffset[e][1],depth:m+1});}}return null}_addNode(t,e,r){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,r,n,i){if(1===t[n].isLeaf(e,r))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const s=n-1,a=t[s];let o=0,l=0;for(let t=0;t<this._siblingOffset.length;t++){const n=2*e+this._siblingOffset[t][0],i=2*r+this._siblingOffset[t][1],s=a.getElevation(n,i),u=a.isLeaf(n,i),c=this._addNode(s.min,s.max,u);u&&(o|=1<<t),l||(l=c);}for(let n=0;n<this._siblingOffset.length;n++)o&1<<n||this._construct(t,2*e+this._siblingOffset[n][0],2*r+this._siblingOffset[n][1],s,l+n);}}function jf(t,e,r,n,i,s){return Er(Er(t,r,s),Er(e,n,s),i)}function Of(t,e,r){const n=r.dim,i=M(t*n-.5,0,n-1),s=M(e*n-.5,0,n-1),a=Math.floor(i),o=Math.floor(s),l=Math.min(a+1,n-1),u=Math.min(o+1,n-1);return jf(r.get(a,o),r.get(l,o),r.get(a,u),r.get(l,u),i-a,s-o)}const qf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Nf(t,e,r){return (256*t*256+256*e+r)/10-1e4}function Gf(t,e,r){return 256*t+e+r/256-32768}class Zf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,r,n=!1,i=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return N(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const s=this.dim=e.height-2,a=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=r||"mapbox",this.borderReady=n,!n){for(let t=0;t<s;t++)a[this._idx(-1,t)]=a[this._idx(0,t)],a[this._idx(s,t)]=a[this._idx(s-1,t)],a[this._idx(t,-1)]=a[this._idx(t,0)],a[this._idx(t,s)]=a[this._idx(t,s-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(s,-1)]=a[this._idx(s-1,0)],a[this._idx(-1,s)]=a[this._idx(0,s-1)],a[this._idx(s,s)]=a[this._idx(s-1,s-1)],i&&this._buildQuadTree();}}_buildQuadTree(){this._tree=new $f(this);}get(t,e,r=!1){r&&(t=M(t,-1,this.dim),e=M(e,-1,this.dim));const n=4*this._idx(t,e);return ("terrarium"===this.encoding?Gf:Nf)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(t){return qf[t]}get unpackVector(){return qf[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return (e+1)*this.stride+(t+1)}static pack(t,e){const r=[0,0,0,0],n=Zf.getUnpackVector(e);let i=Math.floor((t+n[3])/n[2]);return r[2]=i%256,i=Math.floor(i/256),r[1]=i%256,i=Math.floor(i/256),r[0]=i,r}getPixels(){return new Uu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,i=e*this.dim+this.dim,s=r*this.dim,a=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1;}switch(r){case-1:s=a-1;break;case 1:a=s+1;}const o=-e*this.dim,l=-r*this.dim;for(let e=s;e<a;e++)for(let r=n;r<i;r++){const n=4*this._idx(r,e),i=4*this._idx(r+o,e+l);this.pixels[n+0]=t.pixels[i+0],this.pixels[n+1]=t.pixels[i+1],this.pixels[n+2]=t.pixels[i+2],this.pixels[n+3]=t.pixels[i+3];}}onDeserialize(){this._tree&&(this._tree.dem=this);}}Ji(Zf,"DEMData"),Ji($f,"DemMinMaxQuadTree",{omit:["dem"]});class Kf{constructor(t,e){this.max=t,this.onRemove=e,this.reset();}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,r){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:e,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(t,i);}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t);}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const r=t.wrapped().key,n=void 0===e?0:this.data[r].indexOf(e),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t);}return this}filter(t){const e=[];for(const r in this.data)for(const n of this.data[r])t(n.value)||e.push(n);for(const t of e)this.remove(t.value.tileID,t);}}class Xf{constructor(t,e,r){this.func=t,this.mask=e,this.range=r;}}Xf.ReadOnly=!1,Xf.ReadWrite=!0,Xf.disabled=new Xf(519,Xf.ReadOnly,[0,1]);const Jf=7680;class Hf{constructor(t,e,r,n,i,s){this.test=t,this.ref=e,this.mask=r,this.fail=n,this.depthFail=i,this.pass=s;}}Hf.disabled=new Hf({func:519,mask:0},0,0,Jf,Jf,Jf);class Yf{constructor(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r;}}Yf.Replace=[1,0],Yf.disabled=new Yf(Yf.Replace,Ee.transparent,[!1,!1,!1,!1]),Yf.unblended=new Yf(Yf.Replace,Ee.transparent,[!0,!0,!0,!0]),Yf.alphaBlended=new Yf([1,771],Ee.transparent,[!0,!0,!0,!0]);const Wf=1029,Qf=2305;class ty{constructor(t,e,r){this.enable=t,this.mode=e,this.frontFace=r;}}ty.disabled=new ty(!1,Wf,Qf),ty.backCCW=new ty(!0,Wf,Qf),ty.backCW=new ty(!0,Wf,2304),ty.frontCW=new ty(!0,1028,2304),ty.frontCCW=new ty(!0,1028,Qf);class ey extends Qt{constructor(t,e,r){super(),this.id=t,this._onlySymbols=r,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform));})),e.on("error",(()=>{this._sourceErrored=!0;})),this._source=e,this._tiles={},this._cache=new Kf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Df,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType;}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize;}loaded(){if(this._sourceErrored)return !0;if(!this._sourceLoaded)return !1;if(!this._source.loaded())return !1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return !1}return !0}getSource(){return this._source}pause(){this._paused=!0;}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform);}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager);}}getIds(){return E(this._tiles).map((t=>t.tileID)).sort(ry).map((t=>t.key))}getRenderableIds(t){const e=[];for(const r in this._tiles)this._isIdRenderable(+r,t)&&e.push(this._tiles[r]);return t?e.sort(((t,e)=>{const r=t.tileID,n=e.tileID,i=new x(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),s=new x(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||s.y-i.y||s.x-i.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(ry).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return !!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else {this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading");}}_reloadTile(t,e){const r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)));}_tileLoaded(t,e,r,n){if(n)if(t.state="errored",404!==n.status)this._source.fire(new Wt(n,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id);}else this.update(this.transform);else t.timeAdded=Xt.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Yt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}));}_backfillDEM(t){const e=this.getRenderableIds();for(let n=0;n<e.length;n++){const i=e[n];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);r(t,e),r(e,t);}}function r(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let r=e.tileID.canonical.x-t.tileID.canonical.x;const n=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),s=e.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,n),t.neighboringTiles&&t.neighboringTiles[s]&&(t.neighboringTiles[s].backfilled=!0)));}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,r,n){for(const i in this._tiles){let s=this._tiles[i];if(n[i]||!s.hasData()||s.tileID.overscaledZ<=e||s.tileID.overscaledZ>r)continue;let a=s.tileID;for(;s&&s.tileID.overscaledZ>e+1;){const t=s.tileID.scaledTo(s.tileID.overscaledZ-1);s=this._tiles[t.key],s&&s.hasData()&&(a=t);}let o=a;for(;o.overscaledZ>e;)if(o=o.scaledTo(o.overscaledZ-1),t[o.key]){n[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const r=this._loadedParentTiles[t.key];return r&&r.tileID.overscaledZ>=e?r:null}for(let r=t.overscaledZ-1;r>=e;r--){const e=t.scaledTo(r),n=this._getLoadedTile(e);if(n)return n}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const r=Math.ceil(t.width/e)+1,n=Math.ceil(t.height/e)+1,i=Math.floor(r*n*5),s="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(a);}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),t[n.tileID.key]=n;}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t]);}}update(t,e,r){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let n;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new fh(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(n=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const i=this._updateRetainedTiles(n);if(ny(this._source.type)&&0!==n.length){const t={},e={},r=Object.keys(i);for(const n of r){const r=i[n],s=this._tiles[n];if(!s||s.fadeEndTime&&s.fadeEndTime<=Xt.now())continue;const a=this.findLoadedParent(r,Math.max(r.overscaledZ-ey.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[n]=r;}const s=n[n.length-1].overscaledZ;for(const t in this._tiles){const r=this._tiles[t];if(i[t]||!r.hasData())continue;let n=r.tileID;for(;n.overscaledZ>s;){n=n.scaledTo(n.overscaledZ-1);const s=this._tiles[n.key];if(s&&s.hasData()&&e[n.key]){i[t]=r.tileID;break}}}for(const e in t)i[e]||(this._coveredTiles[e]=!0,i[e]=t[e]);}for(const t in i)this._tiles[t].clearFadeHold();const s=function(t,e){const r=[];for(const n in t)n in e||r.push(n);return r}(this._tiles,i);for(const t of s){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t);}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate();}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t);}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const r={},n=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),i=t[0].overscaledZ,s=Math.max(i-ey.maxOverzooming,this._source.minzoom),a=Math.max(i+ey.maxUnderzooming,this._source.minzoom),o={};for(const r of t){const t=this._addTile(r);e[r.key]=r,t.hasData()||n<this._source.maxzoom&&(o[r.key]=r);}this._retainLoadedChildren(o,n,a,e);for(const n of t){let t=this._tiles[n.key];if(t.hasData())continue;if(n.canonical.z>=this._source.maxzoom){const t=n.children(this._source.maxzoom)[0],r=this.getTile(t);if(r&&r.hasData()){e[t.key]=t;continue}}else {const t=n.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let i=t.wasRequested();for(let a=n.overscaledZ-1;a>=s;--a){const s=n.scaledTo(a);if(r[s.key])break;if(r[s.key]=!0,t=this.getTile(s),!t&&i&&(t=this._addTile(s)),t&&(e[s.key]=s,i=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let r,n=this._tiles[t].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}e.push(n.key);const t=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(t),r)break;n=t;}for(const t of e)this._loadedParentTiles[t]=r;}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const r=Boolean(e);if(!r){const r=this.map?this.map.painter:null;e=new Pf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state));}return e?(e.uses++,this._tiles[t.key]=e,r||this._source.fire(new Yt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t];}),r));}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))));}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id);}tilesIn(t,e,r){const n=[],i=this.transform;if(!i)return n;const s="globe"===i.projection.name,a=Nl(i.center.lng);for(const o in this._tiles){const l=this._tiles[o];if(r&&l.clearQueryDebugViz(),l.holdingForFade())continue;let u;if(s){const t=l.tileID.canonical;if(0===t.z){const e=[Math.abs(M(a,...iy(t,-1))-a),Math.abs(M(a,...iy(t,1))-a)];u=[0,2*e.indexOf(Math.min(...e))-1];}else {const e=[Math.abs(M(a,...iy(t,-1))-a),Math.abs(M(a,...iy(t,0))-a),Math.abs(M(a,...iy(t,1))-a)];u=[e.indexOf(Math.min(...e))-1];}}else u=[0];for(const r of u){const s=t.containsTile(l,i,e,r);s&&n.push(s);}}return n}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.projMatrix=this.transform.calculateProjMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return !0;if(ny(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=Xt.now())return !0}return !1}setFeatureState(t,e,r){this._state.updateState(t=t||"_geojsonTileLayer",e,r);}removeFeatureState(t,e,r){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,r);}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,r){const n=this._tiles[t];n&&n.setDependencies(e,r);}reloadTilesForDependencies(t,e){for(const r in this._tiles)this._tiles[r].hasDependency(t,e)&&this._reloadTile(+r,"reloading");this._cache.filter((r=>!r.hasDependency(t,e)));}_preloadTiles(t,e){if(!this._sourceLoaded){const r=()=>{this._sourceLoaded&&(this._source.off("data",r),this._preloadTiles(t,e));};return void this._source.on("data",r)}const r=new Map,n=Array.isArray(t)?t:[t],i=this.map.painter.terrain,s=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const t of n){const e=t.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)r.set(t.key,t);this.usedForTerrain&&t.updateElevation(!1);}B(Array.from(r.values()),((t,e)=>{const r=new Pf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,(t=>{"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),e(t,r);}));}),e);}}function ry(t,e){const r=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-r||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function ny(t){return "raster"===t||"image"===t||"video"===t||"custom"===t}function iy(t,e){const r=1<<t.z;return [t.x/r+e,(t.x+1)/r+e]}ey.maxOverzooming=10,ey.maxUnderzooming=3;class sy{constructor(t,e,r){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=r;}static create(t,e,r){const n=r||t.findDEMTileFor(e);if(!n||!n.dem)return;const i=n.dem,s=n.tileID,a=1<<e.canonical.z-s.canonical.z;return new sy(n,n.tileSize/ao/a,[(e.canonical.x/a-s.canonical.x)*i.dim,(e.canonical.y/a-s.canonical.y)*i.dim])}tileCoordToPixel(t,e){const r=e*this._scale+this._offset[1],n=Math.floor(t*this._scale+this._offset[0]),i=Math.floor(r);return new x(n,i)}getElevationAt(t,e,r,n){const i=t*this._scale+this._offset[0],s=e*this._scale+this._offset[1],a=Math.floor(i),o=Math.floor(s),l=this._dem;return n=!!n,r?Er(Er(l.get(a,o,n),l.get(a,o+1,n),s-o),Er(l.get(a+1,o,n),l.get(a+1,o+1,n),s-o),i-a):l.get(a,o,n)}getElevationAtPixel(t,e,r){return this._dem.get(t,e,!!r)}getMeterToDEM(t){return (1<<this._demTile.tileID.canonical.z)*Zl(1,t)*this._dem.stride}}class ay{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ki(ao,16,0),this.featureIndexArray=new ba,this.promoteId=e;}insert(t,e,r,n,i,s=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i,s);const o=this.grid;for(let t=0;t<e.length;t++){const r=e[t],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<r.length;t++){const e=r[t];n[0]=Math.min(n[0],e.x),n[1]=Math.min(n[1],e.y),n[2]=Math.max(n[2],e.x),n[3]=Math.max(n[3],e.y);}n[0]<ao&&n[1]<ao&&n[2]>=0&&n[3]>=0&&o.insert(a,n[0],n[1],n[2],n[3]);}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Zc(new mp(this.rawTileData)).layers,this.sourceLayerCoder=new wf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[];}return this.vtLayers}query(t,e,r,n){this.loadVTLayers();const i=t.params||{},s=hi(i.filter),a=t.tileResult,o=t.transform,l=a.bufferedTilespaceBounds,u=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,r,n)=>wu(a.bufferedTilespaceGeometry,t,e,r,n)));u.sort(ly);let c=null;o.elevation&&u.length>0&&(c=sy.create(o.elevation,this.tileID));const h={};let p;for(let o=0;o<u.length;o++){const l=u[o];if(l===p)continue;p=l;const d=this.featureIndexArray.get(l);let f=null;this.loadMatchingFeature(h,d,s,i.layers,i.availableImages,e,r,n,((e,r,n,i=0)=>(f||(f=au(e,this.tileID.canonical,t.tileTransform)),r.queryIntersectsFeature(a,e,n,f,this.z,t.transform,t.pixelPosMatrix,c,i))));}return h}loadMatchingFeature(t,e,r,n,i,s,a,o,l){const{featureIndex:u,bucketIndex:c,sourceLayerIndex:h,layoutVertexArrayOffset:p}=e,d=this.bucketLayerIDs[c];if(n&&!function(t,e){for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return !0;return !1}(n,d))return;const f=this.sourceLayerCoder.decode(h),y=this.vtLayers[f].feature(u);if(r.needGeometry){const t=ou(y,!0);if(!r.filter(new ws(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!r.filter(new ws(this.tileID.overscaledZ),y))return;const m=this.getId(y,f);for(let e=0;e<d.length;e++){const r=d[e];if(n&&n.indexOf(r)<0)continue;const c=s[r];if(!c)continue;let h={};void 0!==m&&o&&(h=o.getState(c.sourceLayer||"_geojsonTileLayer",m));const f=C({},a[r]);f.paint=oy(f.paint,c.paint,y,h,i),f.layout=oy(f.layout,c.layout,y,h,i);const g=!l||l(y,c,h,p);if(!g)continue;const x=new Af(y,this.z,this.x,this.y,m);x.layer=f;let v=t[r];void 0===v&&(v=t[r]=[]),v.push({featureIndex:u,feature:x,intersectionZ:g});}}lookupSymbolFeatures(t,e,r,n,i,s,a,o){const l={};this.loadVTLayers();const u=hi(i);for(const i of t)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:i,layoutVertexArrayOffset:0},u,s,a,o,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:r}=t;this.loadVTLayers();const n=this.sourceLayerCoder.decode(r),i=this.vtFeatures[n];if(i[e])return i[e];const s=this.vtLayers[n].feature(e);return i[e]=s,s}hasLayer(t){for(const e of this.bucketLayerIDs)for(const r of e)if(t===r)return !0;return !1}getId(t,e){let r=t.id;if(this.promoteId){const n="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=n&&(r=t.properties[n]),"boolean"==typeof r&&(r=Number(r));}return r}}function oy(t,e,r,n,i){return $(t,((t,s)=>{const a=e instanceof zs?e.get(s):null;return a&&a.evaluate?a.evaluate(r,n,i):a}))}function ly(t,e){return e-t}Ji(ay,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class uy{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new Ru({width:t,height:e}),this.positions={},this.uploaded=!1;}getDash(t,e){const r=this.getKey(t,e);return this.positions[r]}trim(){const t=this.width,e=this.height=L(this.nextRow);this.image.resize({width:t,height:e});}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,r){const n=[];let i=t.length%2==1?-t[t.length-1]*r:0,s=t[0]*r,a=!0;n.push({left:i,right:s,isDash:a,zeroLength:0===t[0]});let o=t[0];for(let e=1;e<t.length;e++){a=!a;const l=t[e];i=o*r,o+=l,s=o*r,n.push({left:i,right:s,isDash:a,zeroLength:0===l});}return n}addRoundDash(t,e,r){const n=e/2;for(let e=-r;e<=r;e++){const i=this.width*(this.nextRow+r+e);let s=0,a=t[s];for(let o=0;o<this.width;o++){o/a.right>1&&(a=t[++s]);const l=Math.abs(o-a.left),u=Math.abs(o-a.right),c=Math.min(l,u);let h;const p=e/r*(n+1);if(a.isDash){const t=n-Math.abs(p);h=Math.sqrt(c*c+t*t);}else h=n-Math.sqrt(c*c+p*p);this.image.data[i+o]=Math.max(0,Math.min(255,h+128));}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const r=t[e],n=t[e+1];r.zeroLength?t.splice(e,1):n&&n.isDash===r.isDash&&(n.left=r.left,t.splice(e,1));}const r=t[0],n=t[t.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);const i=this.width*this.nextRow;let s=0,a=t[s];for(let r=0;r<this.width;r++){r/a.right>1&&(a=t[++s]);const n=Math.abs(r-a.left),o=Math.abs(r-a.right),l=Math.min(n,o);this.image.data[i+r]=Math.max(0,Math.min(255,(a.isDash?l:-l)+e+128));}}addDash(t,e){const r=this.getKey(t,e);if(this.positions[r])return this.positions[r];const n="round"===e,i=n?7:0,s=2*i+1;if(this.nextRow+s>this.height)return N("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let e=0;e<t.length;e++)t[e]<0&&(N("Negative value is found in line dasharray, replacing values with 0"),t[e]=0),a+=t[e];if(0!==a){const r=this.width/a,s=this.getDashRanges(t,this.width,r);n?this.addRoundDash(s,r,i):this.addRegularDash(s,"square"===e?.5*r:0);}const o=this.nextRow+i;this.nextRow+=s;const l={tl:[o,i],br:[a,0]};return this.positions[r]=l,l}}Ji(uy,"LineAtlas");const cy=1*td;class hy{constructor(t){const e={},r=[];for(const n in t){const i=t[n],s=e[n]={};for(const t in i.glyphs){const e=i.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const n=e.metrics.localGlyph?cy:1,a={x:0,y:0,w:e.bitmap.width+2*n,h:e.bitmap.height+2*n};r.push(a),s[t]=a;}}const{w:n,h:i}=_p(r),s=new Ru({width:n||1,height:i||1});for(const r in t){const n=t[r];for(const t in n.glyphs){const i=n.glyphs[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=e[r][t],o=i.metrics.localGlyph?cy:1;Ru.copy(i.bitmap,s,{x:0,y:0},{x:a.x+o,y:a.y+o},i.bitmap);}}this.image=s,this.positions=e;}}Ji(hy,"GlyphAtlas");class py{constructor(t){this.tileID=new fh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Bd(t.tileID.canonical,t.projection),this.projection=t.projection;}parse(t,e,r,n,i){this.status="parsing",this.data=t,this.collisionBoxArray=new pa;const s=new wf(Object.keys(t.layers).sort()),a=new ay(this.tileID,this.promoteId);a.bucketLayerIDs=[];const o={},l=new uy(256,256),u={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},c=e.familiesBySource[this.source];for(const e in c){const n=t.layers[e];if(!n)continue;let i=!1,l=!1;for(const t of c[e])"symbol"===t[0].type?i=!0:l=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!l)continue;1===n.version&&N(`Vector tile source "${this.source}" layer "${e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=s.encode(e),p=[];for(let t=0;t<n.length;t++){const r=n.feature(t),i=a.getId(r,e);p.push({feature:r,id:i,index:t,sourceLayerIndex:h});}for(const t of c[e]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(dy(t,this.zoom,r),(o[e.id]=e.createBucket({index:a.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(p,u,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(t.map((t=>t.id))));}}let h,p,d,f;l.trim();const y={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},m=()=>{if(h)return i(h);if(p&&d&&f){const t=new hy(p),e=new kp(d,f);for(const n in o){const i=o[n];i instanceof of?(dy(i.layers,this.zoom,r),vd(i,p,t.positions,d,e.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Ih||i instanceof Mc||i instanceof th)&&(dy(i.layers,this.zoom,r),i.addFeatures(u,this.tileID.canonical,e.patternPositions,r,this.tileTransform));}this.status="done",i(null,{buckets:E(o).filter((t=>!t.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null});}},g=$(u.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(g).length?n.send("getGlyphs",{uid:this.uid,stacks:g},((t,e)=>{h||(h=t,p=e,m());}),void 0,!1,y):p={};const x=Object.keys(u.iconDependencies);x.length?n.send("getImages",{icons:x,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{h||(h=t,d=e,m());}),void 0,!1,y):d={};const v=Object.keys(u.patternDependencies);v.length?n.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{h||(h=t,f=e,m());}),void 0,!1,y):f={},m();}}function dy(t,e,r){const n=new ws(e);for(const e of t)e.recalculate(n,r);}class fy{constructor(t){this.entries={},this.scheduler=t;}request(t,e,r,n){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,r]=i.result;return this.scheduler?this.scheduler.add((()=>{n(t,r);}),e):n(t,r),()=>{}}return i.callbacks.push(n),i.cancel||(i.cancel=r(((r,n)=>{i.result=[r,n];for(const t of i.callbacks)this.scheduler?this.scheduler.add((()=>{t(r,n);}),e):t(r,n);setTimeout((()=>delete this.entries[t]),3e3);}))),()=>{i.result||(i.callbacks=i.callbacks.filter((t=>t!==n)),i.callbacks.length||(i.cancel(),delete this.entries[t]));}}}function yy(t,e,r){const n=JSON.stringify(t.request);return t.data&&(this.deduped.entries[n]={result:[null,t.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const n=pt(t.request,((t,n,i,s)=>{t?e(t):n&&e(null,{vectorTile:r?void 0:new Zc(new mp(n)),rawData:n,cacheControl:i,expires:s});}));return ()=>{n.cancel(),e();}}),e)}const my=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class gy{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,r]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const i=my[15&r];if(!i)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new gy(a,s,i,t)}constructor(t,e=64,r=Float64Array,n){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=r,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=my.indexOf(this.ArrayType),s=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,o=(8-a%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+o,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+s+a+o),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+o,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t);}add(t,e){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=t,this.coords[this._pos++]=e,r}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return xy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:a}=this,o=[0,i.length-1,0],l=[];for(;o.length;){const u=o.pop()||0,c=o.pop()||0,h=o.pop()||0;if(c-h<=a){for(let a=h;a<=c;a++){const o=s[2*a],u=s[2*a+1];o>=t&&o<=r&&u>=e&&u<=n&&l.push(i[a]);}continue}const p=h+c>>1,d=s[2*p],f=s[2*p+1];d>=t&&d<=r&&f>=e&&f<=n&&l.push(i[p]),(0===u?t<=d:e<=f)&&(o.push(h),o.push(p-1),o.push(1-u)),(0===u?r>=d:n>=f)&&(o.push(p+1),o.push(c),o.push(1-u));}return l}within(t,e,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:i,nodeSize:s}=this,a=[0,n.length-1,0],o=[],l=r*r;for(;a.length;){const u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=s){for(let r=h;r<=c;r++)_y(i[2*r],i[2*r+1],t,e)<=l&&o.push(n[r]);continue}const p=h+c>>1,d=i[2*p],f=i[2*p+1];_y(d,f,t,e)<=l&&o.push(n[p]),(0===u?t-r<=d:e-r<=f)&&(a.push(h),a.push(p-1),a.push(1-u)),(0===u?t+r>=d:e+r>=f)&&(a.push(p+1),a.push(c),a.push(1-u));}return o}}function xy(t,e,r,n,i,s){if(i-n<=r)return;const a=n+i>>1;vy(t,e,a,n,i,s),xy(t,e,r,n,a-1,1-s),xy(t,e,r,a+1,i,1-s);}function vy(t,e,r,n,i,s){for(;i>n;){if(i-n>600){const a=i-n+1,o=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(o-a/2<0?-1:1);vy(t,e,r,Math.max(n,Math.floor(r-o*u/a+c)),Math.min(i,Math.floor(r+(a-o)*u/a+c)),s);}const a=e[2*r+s];let o=n,l=i;for(by(t,e,n,r),e[2*i+s]>a&&by(t,e,n,i);o<l;){for(by(t,e,o,l),o++,l--;e[2*o+s]<a;)o++;for(;e[2*l+s]>a;)l--;}e[2*n+s]===a?by(t,e,n,l):(l++,by(t,e,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1);}}function by(t,e,r,n){wy(t,r,n),wy(e,2*r,2*n),wy(e,2*r+1,2*n+1);}function wy(t,e,r){const n=t[e];t[e]=t[r],t[r]=n;}function _y(t,e,r,n){const i=t-r,s=e-n;return i*i+s*s}t.ARRAY_TYPE=uo,t.AUTH_ERR_MSG=xt,t.Aabb=il,t.Actor=class{constructor(t,r,n){this.target=t,this.parent=r,this.mapId=n,this.callbacks={},this.cancelCallbacks={},R(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=K()?t:e,this.scheduler=new bf;}send(t,e,r,n,i=!1,s){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=s,this.callbacks[a]=r);const o=H(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Wi(e,o)},o),{cancel:()=>{r&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId});}}}receive(t){const e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[r];delete this.cancelCallbacks[r],t&&t.cancel();}else if(e.mustQueue||K()){const t=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,e)),t&&t.metadata||{type:"message"});}else this.processTask(r,e);}processTask(t,e){if("<response>"===e.type){const r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Qi(e.error)):r(null,Qi(e.data)));}else {const r=H(this.globalScope)?void 0:[],n=e.hasCallback?(e,n)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Wi(e):null,data:Wi(n,r)},r);}:t=>{},i=Qi(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,i,n);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],i.source)[t[1]](i,n);}else n(new Error(`Could not find function ${e.type}`));}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1);}},t.CanonicalTileID=ph,t.Color=Ee,t.ColorMode=Yf,t.CullFaceMode=ty,t.DEMData=Zf,t.DataConstantProperty=Bs,t.DedupedRequest=fy,t.DepthMode=Xf,t.EXTENT=ao,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return !1;const r=e.getSource().maxzoom,n=1<<r,i=Math.floor(t.x),s=Math.floor((t.x-i)*n),a=Math.floor(t.y*n),o=this.findDEMTileFor(new fh(r,i,r,s,a));return !(!o||!o.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,r=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const n=this._source();if(!n)return e;if(t.y<0||t.y>1)return e;const i=n.getSource().maxzoom,s=1<<i,a=Math.floor(t.x),o=t.x-a,l=new fh(i,a,i,Math.floor(o*s),Math.floor(t.y*s)),u=this.findDEMTileFor(l);if(!u||!u.dem)return e;const c=u.dem,h=1<<u.tileID.canonical.z,p=(o*h-u.tileID.canonical.x)*c.dim,d=(t.y*h-u.tileID.canonical.y)*c.dim,f=Math.floor(p),y=Math.floor(d);return (r?this.exaggeration():1)*Er(Er(c.get(f,y),c.get(f,y+1),d-y),Er(c.get(f+1,y),c.get(f+1,y+1),d-y),p-f)}getAtTileOffset(t,e,r){const n=1<<t.canonical.z;return this.getAtPointOrZero(new Wl(t.wrap+(t.canonical.x+e/ao)/n,(t.canonical.y+r/ao)/n))}getAtTileOffsetFunc(t,e,r,n){return i=>{const s=this.getAtTileOffset(t,i.x,i.y),a=n.upVector(t.canonical,i.x,i.y);return Co(a,a,s*n.upVectorScale(t.canonical,e,r).metersToTile),a}}getForTilePoints(t,e,r,n){if(this.isUsingMockSource())return !1;const i=sy.create(this,t,n);return !!i&&(e.forEach((t=>{t[2]=this.exaggeration()*i.getElevationAt(t[0],t[1],r);})),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const r=e.dem.tree,n=e.tileID,i=1<<t.canonical.z-n.canonical.z;let s=t.canonical.x/i-n.canonical.x,a=t.canonical.y/i-n.canonical.y,o=0;for(let e=0;e<t.canonical.z-n.canonical.z&&!r.leaves[o];e++){s*=2,a*=2;const t=2*Math.floor(a)+Math.floor(s);o=r.childOffsets[o]+t,s%=1,a%=1;}return {min:this.exaggeration()*r.minimums[o],max:this.exaggeration()*r.maximums[o]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Wt,t.EvaluationParameters=ws,t.Event=Yt,t.Evented=Qt,t.FillExtrusionBucket=th,t.Frustum=nl,t.FrustumCorners=rl,t.GLOBE_RADIUS=ol,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=al,t.GLOBE_ZOOM_THRESHOLD_MIN=sl,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t);}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy();}}_fillGridMeshWithLods(t,e){const r=new $s,n=new ra,i=[],s=t+1+2,a=e[0]+1,o=e[0]+1+(1+e.length),l=(t,e,r)=>{let n=t===s-1?t-2:0===t?t:t-1;return n+=r?24575:0,[n,e]};for(let t=0;t<s;++t)r.emplaceBack(...l(t,0,!0));for(let t=0;t<a;++t)for(let e=0;e<s;++e)r.emplaceBack(...l(e,t,(0===e||e===s-1)&&!0));for(let t=0;t<e.length;++t){const n=e[t];for(let t=0;t<s;++t)r.emplaceBack(...l(t,n,!0));}for(let t=0;t<e.length;++t){const a=n.length,l=e[t]+1+2,u=new ra;for(let r=0;r<l-1;r++){const i=r===l-2,a=i?s*(o-e.length+t-r):s;for(let t=0;t<s-1;t++){const e=r*s+t;0===r||i||0===t||t===s-2?(u.emplaceBack(e+1,e,e+a),u.emplaceBack(e+a,e+a+1,e+1)):(n.emplaceBack(e+1,e,e+a),n.emplaceBack(e+a,e+a+1,e+1));}}const c=so.simpleSegment(0,a,r.length,n.length-a);for(let t=0;t<u.uint16.length;t+=3)n.emplaceBack(u.uint16[t],u.uint16[t+1],u.uint16[t+2]);const h=so.simpleSegment(0,a,r.length,n.length-a);i.push({withoutSkirts:c,withSkirts:h});}return {vertices:r,indices:n,segments:i}}_createGrid(t){const e=this._fillGridMeshWithLods(ul,cl);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,tl.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0);}_createPoles(t){const e=new ra;for(let t=0;t<=ul;t++)e.emplaceBack(0,t+1,t+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const r=new aa,n=new aa;this._poleSegments=[];for(let t=0,e=0;t<sl;t++){const i=360/(1<<t);r.emplaceBack(0,-ol,0,.5,0),n.emplaceBack(0,-ol,0,.5,1);for(let t=0;t<=ul;t++){const e=t/ul,s=Er(0,i,e),[a,o,l]=kl(Fl,Rl,s,ol);r.emplaceBack(a,o,l,e,0),n.emplaceBack(a,o,l,e,1);}this._poleSegments.push(so.simpleSegment(e,0,66,64)),e+=66;}this._poleNorthVertexBuffer=t.createVertexBuffer(r,Wo,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(n,Wo,!1);}getGridBuffers(t,e){return [this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t){return [this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new la,r=ul,n=r+1+2,i=1;this._wireframeSegments=[];for(let t=0,s=0;t<cl.length;t++){const a=cl[t];for(let t=i;t<a+i;t++)for(let s=i;s<r+i;s++){const r=t*n+s;e.emplaceBack(r,r+1),e.emplaceBack(r,r+n),e.emplaceBack(r,r+n+1);}const o=a*r*3;this._wireframeSegments.push(so.simpleSegment(0,s,(a+1)*n,o)),s+=o;}this._wireframeIndexBuffer=t.createIndexBuffer(e);}return [this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=rd,t.ImagePosition=Sp,t.KDBush=gy,t.LivePerformanceUtils=$t,t.LngLat=Ol,t.LngLatBounds=oo,t.LocalGlyphMode=ed,t.MAX_MERCATOR_LATITUDE=Hl,t.MercatorCoordinate=Wl,t.ONE_EM=Rh,t.OverscaledTileID=fh,t.PerformanceMarkers=Ut,t.Point=x,t.Properties=Ps,t.RGBAImage=Uu,t.Ray=el,t.RequestManager=class{constructor(t,e,r){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken();}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return {token:["1",h,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt;}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!vt(t))return t;const r=kt(t);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!vt(t))return t;const r=kt(t);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(t,e,r,n){if(!vt(t))return t;const i=kt(t);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),r&&i.params.push(`language=${r}`),n&&i.params.push(`worldview=${n}`),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,r,n){const i=kt(t);return vt(t)?(i.path=`/styles/v1${i.path}/sprite${e}${r}`,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=`${e}${r}`,It(i))}normalizeTileURL(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!vt(t))return t;const n=kt(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&"raster"!==n.authority&&512===r?"@2x":""}${s.supported?".webp":"$1"}`),"raster"===n.authority?n.path=`/${i.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${i.TILE_URL_VERSION}${n.path}`);const a=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(n.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,a)}canonicalizeTileURL(t,e){const r=kt(t);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return t;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+=`raster/${r.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${r.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let s=r.params;return e&&(s=s.filter((t=>!t.match(/^access_token=/)))),s.length&&(n+=`?${s.join("&")}`),n}canonicalizeTileset(t,e){const r=!!e&&vt(e),n=[];for(const e of t.tiles||[])bt(e)?n.push(this.canonicalizeTileURL(e,r)):n.push(e);return n}_makeAPIURL(t,e){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",n=kt(i.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1);}if("/"!==n.path&&(t.path=`${n.path}${t.path}`),!i.REQUIRE_ACCESS_TOKEN)return It(t);if(e=e||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e||""}`),It(t)}},t.ResourceType=lt,t.SegmentVector=so,t.SourceCache=ey,t.StencilMode=Hf,t.StructArrayLayout1ui2=ua,t.StructArrayLayout2f1f2i16=Qs,t.StructArrayLayout2i4=$s,t.StructArrayLayout2ui4=la,t.StructArrayLayout3f12=ea,t.StructArrayLayout3ui6=ra,t.StructArrayLayout4i8=Os,t.StructArrayLayout5f20=aa,t.Texture=xf,t.Tile=Pf,t.Transitionable=Ss,t.Uniform1f=La,t.Uniform1i=class extends Va{constructor(t){super(t),this.current=0;}set(t,e,r){this.fetchUniformLocation(t,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r));}},t.Uniform2f=class extends Va{constructor(t){super(t),this.current=[0,0];}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])));}},t.Uniform3f=class extends Va{constructor(t){super(t),this.current=[0,0,0];}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])));}},t.Uniform4f=Fa,t.UniformColor=Ra,t.UniformMatrix2f=class extends Va{constructor(t){super(t),this.current=ja;}set(t,e,r){if(this.fetchUniformLocation(t,e))for(let t=0;t<4;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},t.UniformMatrix3f=class extends Va{constructor(t){super(t),this.current=$a;}set(t,e,r){if(this.fetchUniformLocation(t,e))for(let t=0;t<9;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},t.UniformMatrix4f=class extends Va{constructor(t){super(t),this.current=Ua;}set(t,e,r){if(this.fetchUniformLocation(t,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},t.UnwrappedTileID=dh,t.ValidationError=ri,t.VectorTileFeature=Kc,t.VectorTileWorkerSource=class extends Qt{constructor(t,e,r,n,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=i||yy,this.loading={},this.loaded={},this.deduped=new fy(t.scheduler),this.isSpriteLoaded=n,this.scheduler=t.scheduler;}loadTile(t,e){const r=t.uid,n=t&&t.request,i=n&&n.collectResourceTiming,s=this.loading[r]=new py(t);s.abort=this.loadVectorData(t,((a,o)=>{const l=!this.loading[r];if(delete this.loading[r],l||a||!o)return s.status="done",l||(this.loaded[r]=s),e(a);const u=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl),s.vectorTile=o.vectorTile||new Zc(new mp(u));const h=()=>{s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,r)=>{if(t||!r)return e(t);const s={};if(i){const t=qt(n);t.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(t)));}e(null,C({rawTileData:u.slice(0)},r,c,s));}));};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h();})),this.loaded=this.loaded||{},this.loaded[r]=s;}));}reloadTile(t,e){const r=this.loaded,n=t.uid,i=this;if(r&&r[n]){const s=r[n];s.showCollisionBoxes=t.showCollisionBoxes,s.enableTerrain=!!t.enableTerrain,s.projection=t.projection,s.tileTransform=Bd(t.tileID.canonical,t.projection);const a=(t,r)=>{const n=s.reloadCallback;n&&(delete s.reloadCallback,s.parse(s.vectorTile,i.layerIndex,this.availableImages,i.actor,n)),e(t,r);};"parsing"===s.status?s.reloadCallback=a:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a());}}abortTile(t,e){const r=t.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),e();}removeTile(t,e){const r=this.loaded,n=t.uid;r&&r[n]&&delete r[n],e();}},t.WritingMode=Ip,t.ZoomDependentExpression=Wn,t.add=Mo,t.addDynamicAttributes=rf,t.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-o*u,t[1]=i*u-n*c,t[2]=n*o-i*a,t[3]=o*l-s*c,t[4]=r*c-i*l,t[5]=i*s-r*o,t[6]=s*u-a*l,t[7]=n*l-r*u,t[8]=r*a-n*s,t},t.asyncAll=B,t.bezier=k,t.bindAll=R,t.boundsAttributes=Ef,t.bufferConvexPolygon=function(t,e){const r=[];for(let n=0;n<t.length;n++){const i=z(n-1,-1,t.length-1),s=z(n+1,-1,t.length-1),a=t[n],o=t[s],l=t[i].sub(a).unit(),u=o.sub(a).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*e/Math.sin(c/2));r.push(a.add(h));}return r},t.cacheEntryPossiblyAdded=function(t){ot++,ot>et&&(t.getActor().send("enforceCacheSizeLimit",tt),ot=0);},t.calculateGlobeLabelMatrix=function(t,e){const{x:r,y:n}=t.point,i=Cl(r,n,t.worldSize/t._pixelsPerMercatorPixel,0,0);return yo(i,i,El(xl(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:r}=t.point,{lng:n,lat:i}=t._center;return Cl(e,r,t.worldSize,n,i)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,r=e/Zl(1,t.center.lat),n=po(new Float64Array(16));return mo(n,n,[t.point.x,t.point.y,0]),go(n,n,[r,r,e]),Float32Array.from(n)},t.circumferenceAtLatitude=ql,t.clamp=M,t.clearTileCache=function(t){if(!it())return;const r=e.caches.delete(Q);t&&r.catch(t).then((()=>t()));},t.clipLine=Hp,t.clone=function(t){var e=new uo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=O,t.collisionCircleLayout=Fh,t.config=i,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new uo(16);return uo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=co,t.createExpression=Hn,t.createLayout=Rs,t.createStyleLayer=function(t){return "custom"===t.type?new ff(t):new gf[t.type](t)},t.cross=Lo,t.degToRad=w,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},t.dot=Vo,t.earthRadius=Ul,t.ease=I,t.easeCubicInOut=S,t.ecefToLatLng=function([t,e,r]){const n=Math.hypot(t,e,r),i=Math.atan2(t,r),s=.5*Math.PI-Math.acos(-e/n);return new Ol(_(i),_(s))},t.emitValidationErrors=qi,t.endsWith=U,t.enforceCacheSizeLimit=function(t){st(),rt&&rt.then((e=>{e.keys().then((r=>{for(let n=0;n<r.length-t;n++)e.delete(r[n]);}));}));},t.evaluateSizeForFeature=jh,t.evaluateSizeForZoom=Oh,t.evaluateVariableOffset=xd,t.evented=gs,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=Xt,t.exported$1=s,t.extend=C,t.extend$1=ee,t.fillExtrusionHeightLift=oh,t.filterObject=j,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,l=i+i,u=r*a,c=n*a,h=n*o,p=i*a,d=i*o,f=i*l,y=s*a,m=s*o,g=s*l;return t[0]=1-h-f,t[1]=c+g,t[2]=p-m,t[3]=0,t[4]=c-g,t[5]=1-u-f,t[6]=d+y,t[7]=0,t[8]=p+m,t[9]=d-y,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=bo,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return A[e]},t.getAABBPointSquareDist=function(t,e,r){let n=0;for(let i=0;i<2;++i){const s=r?r[i]:0;t[i]>s&&(n+=(t[i]-s)*(t[i]-s)),e[i]<s&&(n+=(s-e[i])*(s-e[i]));}return n},t.getAnchorAlignment=Rp,t.getAnchorJustification=bd,t.getBounds=function(t){let e=1/0,r=1/0,n=-1/0,i=-1/0;for(const s of t)e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y);return {min:new x(e,r),max:new x(n,i)}},t.getColumn=W,t.getDefaultExportFromCjs=p,t.getGridMatrix=function(t,e,r,n){const i=e.getNorth(),s=e.getSouth(),a=e.getWest(),o=e.getEast(),l=1<<t.z,u=o-a,c=i-s,h=u/ul,p=-c/cl[r],d=[0,h,0,p,0,0,i,a,0];if(t.z>0){const t=180/n;ho(d,d,[t/u+1,0,0,0,t/c+1,0,-.5*t/h,.5*t/p,1]);}return d[2]=l,d[5]=t.x,d[8]=t.y,d},t.getImage=gt,t.getJSON=function(t,e){return ht(C(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){const e=Hl-5;t=M(t,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(w(t))),3);return Math.round(r*(cl.length-1))},t.getMapSessionAPI=Ft,t.getPerformanceMeasurement=qt,t.getProjection=Yd,t.getRTLTextPluginStatus=xs,t.getReferrer=ct,t.getTilePoint=function(t,{x:e,y:r},n=0){return new x(((e-n)*t.scale-t.x)*ao,(r*t.scale-t.y)*ao)},t.getTileVec3=function(t,e,r=0){return Io(((e.x-r)*t.scale-t.x)*ao,(e.y*t.scale-t.y)*ao,Jl(e.z,e.y))},t.getVideo=function(t,r){const n=e.document.createElement("video");n.muted=!0,n.onloadstart=function(){r(null,n);};for(let r=0;r<t.length;r++){const i=e.document.createElement("source");dt(t[r])||(n.crossOrigin="Anonymous"),i.src=t[r],n.appendChild(i);}return {cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],r=po(new Float64Array(16));return yo(r,t.pixelMatrix,t.globeMatrix),Fo(e,e,r),new x(e[0],e[1])},t.globeDenormalizeECEF=El,t.globeECEFOrigin=function(t,e){const r=[0,0,0];return Fo(r,r,Bl(xl(e.canonical))),Fo(r,r,t),r},t.globeMetersToEcef=fl,t.globeNormalizeECEF=Bl,t.globePixelsToTileUnits=function(t,e){return ao/(512*Math.pow(2,t))*Tl(xl(e))},t.globePoleMatrixForTile=function(t,e,r){const n=po(new Float64Array(16)),i=(e/(1<<t)-.5)*Math.PI*2;return vo(n,r.globeMatrix,i),Float32Array.from(n)},t.globeTileBounds=xl,t.globeTiltAtLngLat=Dl,t.globeToMercatorTransition=Pl,t.globeUseCustomAntiAliasing=function(t,e,r){const n=Pl(r.zoom),i=t.style.map._antialias,s=!!e.extStandardDerivatives,a=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===n&&!i&&!a&&s},t.identity=po,t.identity$1=Ko,t.invert=fo,t.isFullscreen=function(){return !!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=Vl,t.isMapAuthenticated=function(t){return Rt.has(t)},t.isMapboxURL=vt,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return !!H(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Xl,t.latLngToECEF=Il,t.len=Oo,t.length=ko,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=Kl,t.loadVectorTile=yy,t.makeRequest=ht,t.mapValue=function(t,e,r,n,i){return M((t-e)/(r-e)*(i-n)+n,n,i)},t.mercatorScale=Yl,t.mercatorXfromLng=Nl,t.mercatorYfromLat=Gl,t.mercatorZfromAltitude=Zl,t.mul=_o,t.mul$1=jo,t.multiply=yo,t.multiply$1=ho,t.multiply$2=zo,t.nextPowerOfTwo=L,t.normalize=Do,t.normalize$1=Ho,t.normalize$2=No,t.number=Er,t.ortho=function(t,e,r,n,i,s,a){var o=1/(e-r),l=1/(n-i),u=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*l,t[14]=(a+s)*u,t[15]=1,t},t.pbf=Xh,t.perspective=function(t,e,r,n,i){var s,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(s=1/(n-i)),t[14]=2*i*n*s):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){const r={};for(let n=0;n<e.length;n++){const i=e[n];i in t&&(r[i]=t[i]);}return r},t.plugin=bs,t.pointGeometry=m,t.polesInViewport=function(t){const e=po(new Float64Array(16));yo(e,t.pixelMatrix,t.globeMatrix);const r=[0,hl,0],n=[0,pl,0];return Fo(r,r,e),Fo(n,n,e),[r[0]>0&&r[0]<=t.width&&r[1]>0&&r[1]<=t.height&&!Vl(t,new Ol(t.center.lat,90)),n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!Vl(t,new Ol(t.center.lat,-90))]},t.polygonContainsPoint=bu,t.polygonIntersectsBox=wu,t.polygonIntersectsPolygon=hu,t.polygonizeBounds=function(t,e,r=0,n=!0){const i=new x(r,r),s=t.sub(i),a=e.add(i),o=[s,new x(a.x,s.y),a,new x(s.x,a.y)];return n&&o.push(s.clone()),o},t.posAttributes=tl,t.postMapLoadEvent=Pt,t.postPerformanceEvent=Vt,t.postTurnstileEvent=Et,t.potpack=_p,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=_,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:ds,pluginURL:fs}),gs.on("pluginStateChange",t),t},t.removeAuthState=function(t){Rt.delete(t);},t.renderColorRamp=ju,t.resample=tu,t.rotateX=xo,t.rotateX$1=Xo,t.rotateY=vo,t.rotateY$1=Jo,t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*n,t[1]=a*i+c*n,t[2]=o*i+h*n,t[3]=l*i+p*n,t[4]=u*i-s*n,t[5]=c*i-a*n,t[6]=h*i-o*n,t[7]=p*i-l*n,t},t.rotateZ$1=function(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*o,t[1]=i*l-n*o,t[2]=s*l+a*o,t[3]=a*l-s*o,t},t.scale=go,t.scale$1=qo,t.scale$2=Co,t.scaleAndAdd=Po,t.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},t.setCacheLimits=function(t,e){tt=t,et=e;},t.setColumn=function(t,e,r){t[4*e+0]=r[0],t[4*e+1]=r[1],t[4*e+2]=r[2],t[4*e+3]=r[3];},t.setRTLTextPlugin=function(t,e,r=!1){if(ds===us||ds===cs||ds===hs)throw new Error("setRTLTextPlugin cannot be called multiple times.");fs=Xt.resolveURL(t),ds=us,ps=e,ms(),r||vs();},t.smoothstep=T,t.spec=te,t.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},t.storeAuthState=function(t,e){e?Rt.add(t):Rt.delete(t);},t.sub=$o,t.subtract=To,t.symbolSize=qh,t.tileAABB=function(t,e,r,n,i,s,a,o,l){if("globe"===l.name)return _l(t,e,new ph(r,n,i));const u=Bd({z:r,x:n,y:i},l);return new il([(s+u.x/u.scale)*e,e*(u.y/u.scale),a],[(s+u.x2/u.scale)*e,e*(u.y2/u.scale),o])},t.tileCornersToBounds=Al,t.tileTransform=Bd,t.transformMat3=function(t,e,r){var n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t},t.transformMat4=Fo,t.transformMat4$1=Go,t.transformQuat=Ro,t.transitionTileAABBinECEF=bl,t.translate=mo,t.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i;}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=ys,t.uniqueId=D,t.updateGlobeVertexNormal=function(t,e,r,n,i){const s=5*e+2;t.float32[s+0]=r,t.float32[s+1]=n,t.float32[s+2]=i;},t.validateCustomStyleLayer=function(t){const e=[],r=t.id;return void 0===r&&e.push({message:`layers.${r}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${r}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFilter=t=>Oi(Ai(t)),t.validateFog=t=>Oi(Vi(t)),t.validateLayer=t=>Oi(Ti(t)),t.validateLight=t=>Oi(Pi(t)),t.validateSource=t=>Oi(Ei(t)),t.validateStyle=Ui,t.validateTerrain=t=>Oi(Di(t)),t.values=E,t.vectorTile=Dc,t.version=r,t.warnOnce=N,t.window=e,t.wrap=z;}));

define(["./shared"],(function(e){"use strict";function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let r="[";for(const o of e)r+=`${t(o)},`;return `${r}]`}let r="{";for(const o of Object.keys(e).sort())r+=`${o}:${t(e[o])},`;return `${r}}`}function r(r){let o="";for(const i of e.refProperties)o+=`/${t(r[i])}`;return o}class o{constructor(e){this.keyCache={},e&&this.replace(e);}replace(e){this._layerConfigs={},this._layers={},this.update(e,[]);}update(t,o){for(const r of t)this._layerConfigs[r.id]=r,(this._layers[r.id]=e.createStyleLayer(r)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(const e of o)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const o={};for(let i=0;i<e.length;i++){const n=t&&t[e[i].id]||r(e[i]);t&&(t[e[i].id]=n);let s=o[n];s||(s=o[n]=[]),s.push(e[i]);}const i=[];for(const e in o)i.push(o[e]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const o=r.source||"";let i=this.familiesBySource[o];i||(i=this.familiesBySource[o]={});const n=r.sourceLayer||"_geojsonTileLayer";let s=i[n];s||(s=i[n]=[]),s.push(t);}}}class i{loadTile(t,r){const{uid:o,encoding:i,rawImageData:n,padding:s,buildQuadTree:a}=t,l=e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?this.getImageData(n,s):n;r(null,new e.DEMData(o,l,i,s<1,a));}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}function n(e,t){if(0!==e.length){s(e[0],t);for(var r=1;r<e.length;r++)s(e[r],!t);}}function s(e,t){for(var r=0,o=0,i=0,n=e.length,s=n-1;i<n;s=i++){var a=(e[i][0]-e[s][0])*(e[s][1]+e[i][1]),l=r+a;o+=Math.abs(r)>=Math.abs(a)?r-l+a:a-l+r,r=l;}r+o>=0!=!!t&&e.reverse();}var a=e.getDefaultExportFromCjs((function e(t,r){var o,i=t&&t.type;if("FeatureCollection"===i)for(o=0;o<t.features.length;o++)e(t.features[o],r);else if("GeometryCollection"===i)for(o=0;o<t.geometries.length;o++)e(t.geometries[o],r);else if("Feature"===i)e(t.geometry,r);else if("Polygon"===i)n(t.coordinates,r);else if("MultiPolygon"===i)for(o=0;o<t.coordinates.length;o++)n(t.coordinates[o],r);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var u={exports:{}},h=e.pointGeometry,c=e.vectorTile.VectorTileFeature,f=p;function p(e,t){this.options=t||{},this.features=e,this.length=e.length;}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096;}p.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],o=[],i=0;i<r.length;i++)o.push(new h(r[i][0],r[i][1]));this.geometry.push(o);}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,o=1/0,i=-1/0,n=0;n<e.length;n++)for(var s=e[n],a=0;a<s.length;a++){var l=s[a];t=Math.min(t,l.x),r=Math.max(r,l.x),o=Math.min(o,l.y),i=Math.max(i,l.y);}return [t,o,r,i]},g.prototype.toGeoJSON=c.prototype.toGeoJSON;var d=e.pbf,m=f;function y(e){var t=new d;return function(e,t){for(var r in e.layers)t.writeMessage(3,v,e.layers[r]);}(e,t),t.finish()}function v(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var o={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)o.feature=e.feature(r),t.writeMessage(2,x,o);var i=o.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var n=o.values;for(r=0;r<n.length;r++)t.writeMessage(4,b,n[r]);}function x(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,w,e),t.writeVarintField(3,r.type),t.writeMessage(4,P,r);}function w(e,t){var r=e.feature,o=e.keys,i=e.values,n=e.keycache,s=e.valuecache;for(var a in r.properties){var l=r.properties[a],u=n[a];if(null!==l){void 0===u&&(o.push(a),n[a]=u=o.length-1),t.writeVarint(u);var h=typeof l;"string"!==h&&"boolean"!==h&&"number"!==h&&(l=JSON.stringify(l));var c=h+":"+l,f=s[c];void 0===f&&(i.push(l),s[c]=f=i.length-1),t.writeVarint(f);}}}function S(e,t){return (t<<3)+(7&e)}function M(e){return e<<1^e>>31}function P(e,t){for(var r=e.loadGeometry(),o=e.type,i=0,n=0,s=r.length,a=0;a<s;a++){var l=r[a],u=1;1===o&&(u=l.length),t.writeVarint(S(1,u));for(var h=3===o?l.length-1:l.length,c=0;c<h;c++){1===c&&1!==o&&t.writeVarint(S(2,h-1));var f=l[c].x-i,p=l[c].y-n;t.writeVarint(M(f)),t.writeVarint(M(p)),i+=f,n+=p;}3===o&&t.writeVarint(S(7,1));}}function b(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e));}u.exports=y,u.exports.fromVectorTileJs=y,u.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var o in e)r[o]=new m(e[o].features,t),r[o].name=o,r[o].version=t.version,r[o].extent=t.extent;return y({layers:r})},u.exports.GeoJSONWrapper=m;var T=e.getDefaultExportFromCjs(u.exports);const k={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},I=Math.fround||(_=new Float32Array(1),e=>(_[0]=+e,_[0]));var _;const C=3,L=5,O=6;class E{constructor(e){this.options=Object.assign(Object.create(k),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[];}load(e){const{log:t,minZoom:r,maxZoom:o}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const n=[];for(let t=0;t<e.length;t++){const r=e[t];if(!r.geometry)continue;const[o,i]=r.geometry.coordinates,s=I(N(o)),a=I(Z(i));n.push(s,a,1/0,t,-1,1),this.options.reduce&&n.push(0);}let s=this.trees[o+1]=this._createTree(n);t&&console.timeEnd(i);for(let e=o;e>=r;e--){const r=+Date.now();s=this.trees[e]=this._createTree(this._cluster(s,e)),t&&console.log("z%d: %d clusters in %dms",e,s.numItems,+Date.now()-r);}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const e=this.getClusters([r,o,180,n],t),s=this.getClusters([-180,o,i,n],t);return e.concat(s)}const s=this.trees[this._limitZoom(t)],a=s.range(N(r),Z(n),N(i),Z(o)),l=s.data,u=[];for(const e of a){const t=this.stride*e;u.push(l[t+L]>1?j(l,t,this.clusterProps):this.points[l[t+C]]);}return u}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),o="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(o);const n=i.data;if(t*this.stride>=n.length)throw new Error(o);const s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=i.within(n[t*this.stride],n[t*this.stride+1],s),l=[];for(const t of a){const r=t*this.stride;n[r+4]===e&&l.push(n[r+L]>1?j(n,r,this.clusterProps):this.points[n[r+C]]);}if(0===l.length)throw new Error(o);return l}getLeaves(e,t,r){const o=[];return this._appendLeaves(o,e,t=t||10,r=r||0,0),o}getTile(e,t,r){const o=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:n,radius:s}=this.options,a=s/n,l=(r-a)/i,u=(r+1+a)/i,h={features:[]};return this._addTileFeatures(o.range((t-a)/i,l,(t+1+a)/i,u),o.data,t,r,i,h),0===t&&this._addTileFeatures(o.range(1-a/i,l,1,u),o.data,i,r,i,h),t===i-1&&this._addTileFeatures(o.range(0,l,a/i,u),o.data,-1,r,i,h),h.features.length?h:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id;}return t}_appendLeaves(e,t,r,o,i){const n=this.getChildren(t);for(const t of n){const n=t.properties;if(n&&n.cluster?i+n.point_count<=o?i+=n.point_count:i=this._appendLeaves(e,n.cluster_id,r,o,i):i<o?i++:e.push(t),e.length===r)break}return i}_createTree(t){const r=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(e,t,r,o,i,n){for(const s of e){const e=s*this.stride,a=t[e+L]>1;let l,u,h;if(a)l=F(t,e,this.clusterProps),u=t[e],h=t[e+1];else {const r=this.points[t[e+C]];l=r.properties;const[o,i]=r.geometry.coordinates;u=N(o),h=Z(i);}const c={type:1,geometry:[[Math.round(this.options.extent*(u*i-r)),Math.round(this.options.extent*(h*i-o))]],tags:l};let f;f=a||this.options.generateId?t[e+C]:this.points[t[e+C]].id,void 0!==f&&(c.id=f),n.features.push(c);}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:o,reduce:i,minPoints:n}=this.options,s=r/(o*Math.pow(2,t)),a=e.data,l=[],u=this.stride;for(let r=0;r<a.length;r+=u){if(a[r+2]<=t)continue;a[r+2]=t;const o=a[r],h=a[r+1],c=e.within(a[r],a[r+1],s),f=a[r+L];let p=f;for(const e of c){const r=e*u;a[r+2]>t&&(p+=a[r+L]);}if(p>f&&p>=n){let e,n=o*f,s=h*f,g=-1;const d=((r/u|0)<<5)+(t+1)+this.points.length;for(const o of c){const l=o*u;if(a[l+2]<=t)continue;a[l+2]=t;const h=a[l+L];n+=a[l]*h,s+=a[l+1]*h,a[l+4]=d,i&&(e||(e=this._map(a,r,!0),g=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,l)));}a[r+4]=d,l.push(n/p,s/p,1/0,d,-1,p),i&&l.push(g);}else {for(let e=0;e<u;e++)l.push(a[r+e]);if(p>1)for(const e of c){const r=e*u;if(!(a[r+2]<=t)){a[r+2]=t;for(let e=0;e<u;e++)l.push(a[r+e]);}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return (e-this.points.length)%32}_map(e,t,r){if(e[t+L]>1){const o=this.clusterProps[e[t+O]];return r?Object.assign({},o):o}const o=this.points[e[t+C]].properties,i=this.options.map(o);return r&&i===o?Object.assign({},i):i}}function j(e,t,r){return {type:"Feature",id:e[t+C],properties:F(e,t,r),geometry:{type:"Point",coordinates:[(o=e[t],360*(o-.5)),J(e[t+1])]}};var o;}function F(e,t,r){const o=e[t+L],i=o>=1e4?`${Math.round(o/1e3)}k`:o>=1e3?Math.round(o/100)/10+"k":o,n=e[t+O],s=-1===n?{}:Object.assign({},r[n]);return Object.assign(s,{cluster:!0,cluster_id:e[t+C],point_count:o,point_count_abbreviated:i})}function N(e){return e/360+.5}function Z(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function J(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function z(e,t,r,o){for(var i,n=o,s=r-t>>1,a=r-t,l=e[t],u=e[t+1],h=e[r],c=e[r+1],f=t+3;f<r;f+=3){var p=G(e[f],e[f+1],l,u,h,c);if(p>n)i=f,n=p;else if(p===n){var g=Math.abs(f-s);g<a&&(i=f,a=g);}}n>o&&(i-t>3&&z(e,t,i,o),e[i+2]=n,r-i>3&&z(e,i,r,o));}function G(e,t,r,o,i,n){var s=i-r,a=n-o;if(0!==s||0!==a){var l=((e-r)*s+(t-o)*a)/(s*s+a*a);l>1?(r=i,o=n):l>0&&(r+=s*l,o+=a*l);}return (s=e-r)*s+(a=t-o)*a}function W(e,t,r,o){var i={id:void 0===e?null:e,type:t,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)Y(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var o=0;o<t.length;o++)Y(e,t[o]);else if("MultiPolygon"===r)for(o=0;o<t.length;o++)for(var i=0;i<t[o].length;i++)Y(e,t[o][i]);}(i),i}function Y(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1]);}function X(e,t,r,o){if(t.geometry){var i=t.geometry.coordinates,n=t.geometry.type,s=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=o||0),"Point"===n)V(i,a);else if("MultiPoint"===n)for(var u=0;u<i.length;u++)V(i[u],a);else if("LineString"===n)D(i,a,s,!1);else if("MultiLineString"===n){if(r.lineMetrics){for(u=0;u<i.length;u++)D(i[u],a=[],s,!1),e.push(W(l,"LineString",a,t.properties));return}$(i,a,s,!1);}else if("Polygon"===n)$(i,a,s,!0);else {if("MultiPolygon"!==n){if("GeometryCollection"===n){for(u=0;u<t.geometry.geometries.length;u++)X(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,o);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var h=[];$(i[u],h,s,!0),a.push(h);}}e.push(W(l,n,a,t.properties));}}function V(e,t){t.push(A(e[0])),t.push(B(e[1])),t.push(0);}function D(e,t,r,o){for(var i,n,s=0,a=0;a<e.length;a++){var l=A(e[a][0]),u=B(e[a][1]);t.push(l),t.push(u),t.push(0),a>0&&(s+=o?(i*u-l*n)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-n,2))),i=l,n=u;}var h=t.length-3;t[2]=1,z(t,0,h,r),t[h+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size;}function $(e,t,r,o){for(var i=0;i<e.length;i++){var n=[];D(e[i],n,r,o),t.push(n);}}function A(e){return e/360+.5}function B(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function R(e,t,r,o,i,n,s,a){if(o/=t,n>=(r/=t)&&s<o)return e;if(s<r||n>=o)return null;for(var l=[],u=0;u<e.length;u++){var h=e[u],c=h.geometry,f=h.type,p=0===i?h.minX:h.minY,g=0===i?h.maxX:h.maxY;if(p>=r&&g<o)l.push(h);else if(!(g<r||p>=o)){var d=[];if("Point"===f||"MultiPoint"===f)q(c,d,r,o,i);else if("LineString"===f)Q(c,d,r,o,i,!1,a.lineMetrics);else if("MultiLineString"===f)K(c,d,r,o,i,!1);else if("Polygon"===f)K(c,d,r,o,i,!0);else if("MultiPolygon"===f)for(var m=0;m<c.length;m++){var y=[];K(c[m],y,r,o,i,!0),y.length&&d.push(y);}if(d.length){if(a.lineMetrics&&"LineString"===f){for(m=0;m<d.length;m++)l.push(W(h.id,f,d[m],h.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===d.length?(f="LineString",d=d[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===d.length?"Point":"MultiPoint"),l.push(W(h.id,f,d,h.tags));}}}return l.length?l:null}function q(e,t,r,o,i){for(var n=0;n<e.length;n+=3){var s=e[n+i];s>=r&&s<=o&&(t.push(e[n]),t.push(e[n+1]),t.push(e[n+2]));}}function Q(e,t,r,o,i,n,s){for(var a,l,u=U(e),h=0===i?ee:te,c=e.start,f=0;f<e.length-3;f+=3){var p=e[f],g=e[f+1],d=e[f+2],m=e[f+3],y=e[f+4],v=0===i?p:g,x=0===i?m:y,w=!1;s&&(a=Math.sqrt(Math.pow(p-m,2)+Math.pow(g-y,2))),v<r?x>r&&(l=h(u,p,g,m,y,r),s&&(u.start=c+a*l)):v>o?x<o&&(l=h(u,p,g,m,y,o),s&&(u.start=c+a*l)):H(u,p,g,d),x<r&&v>=r&&(l=h(u,p,g,m,y,r),w=!0),x>o&&v<=o&&(l=h(u,p,g,m,y,o),w=!0),!n&&w&&(s&&(u.end=c+a*l),t.push(u),u=U(e)),s&&(c+=a);}var S=e.length-3;p=e[S],g=e[S+1],d=e[S+2],(v=0===i?p:g)>=r&&v<=o&&H(u,p,g,d),S=u.length-3,n&&S>=3&&(u[S]!==u[0]||u[S+1]!==u[1])&&H(u,u[0],u[1],u[2]),u.length&&t.push(u);}function U(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function K(e,t,r,o,i,n){for(var s=0;s<e.length;s++)Q(e[s],t,r,o,i,n,!1);}function H(e,t,r,o){e.push(t),e.push(r),e.push(o);}function ee(e,t,r,o,i,n){var s=(n-t)/(o-t);return e.push(n),e.push(r+(i-r)*s),e.push(1),s}function te(e,t,r,o,i,n){var s=(n-r)/(i-r);return e.push(t+(o-t)*s),e.push(n),e.push(1),s}function re(e,t){for(var r=[],o=0;o<e.length;o++){var i,n=e[o],s=n.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)i=oe(n.geometry,t);else if("MultiLineString"===s||"Polygon"===s){i=[];for(var a=0;a<n.geometry.length;a++)i.push(oe(n.geometry[a],t));}else if("MultiPolygon"===s)for(i=[],a=0;a<n.geometry.length;a++){for(var l=[],u=0;u<n.geometry[a].length;u++)l.push(oe(n.geometry[a][u],t));i.push(l);}r.push(W(n.id,s,i,n.tags));}return r}function oe(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+t,e[o+1],e[o+2]);return r}function ie(e,t){if(e.transformed)return e;var r,o,i,n=1<<e.z,s=e.x,a=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,h=l.type;if(l.geometry=[],1===h)for(o=0;o<u.length;o+=2)l.geometry.push(ne(u[o],u[o+1],t,n,s,a));else for(o=0;o<u.length;o++){var c=[];for(i=0;i<u[o].length;i+=2)c.push(ne(u[o][i],u[o][i+1],t,n,s,a));l.geometry.push(c);}}return e.transformed=!0,e}function ne(e,t,r,o,i,n){return [Math.round(r*(e*o-i)),Math.round(r*(t*o-n))]}function se(e,t,r,o,i){for(var n=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<e.length;a++){s.numFeatures++,ae(s,e[a],n,i);var l=e[a].minX,u=e[a].minY,h=e[a].maxX,c=e[a].maxY;l<s.minX&&(s.minX=l),u<s.minY&&(s.minY=u),h>s.maxX&&(s.maxX=h),c>s.maxY&&(s.maxY=c);}return s}function ae(e,t,r,o){var i=t.geometry,n=t.type,s=[];if("Point"===n||"MultiPoint"===n)for(var a=0;a<i.length;a+=3)s.push(i[a]),s.push(i[a+1]),e.numPoints++,e.numSimplified++;else if("LineString"===n)le(s,i,e,r,!1,!1);else if("MultiLineString"===n||"Polygon"===n)for(a=0;a<i.length;a++)le(s,i[a],e,r,"Polygon"===n,0===a);else if("MultiPolygon"===n)for(var l=0;l<i.length;l++){var u=i[l];for(a=0;a<u.length;a++)le(s,u[a],e,r,!0,0===a);}if(s.length){var h=t.tags||null;if("LineString"===n&&o.lineMetrics){for(var c in h={},t.tags)h[c]=t.tags[c];h.mapbox_clip_start=i.start/i.size,h.mapbox_clip_end=i.end/i.size;}var f={geometry:s,type:"Polygon"===n||"MultiPolygon"===n?3:"LineString"===n||"MultiLineString"===n?2:1,tags:h};null!==t.id&&(f.id=t.id),e.features.push(f);}}function le(e,t,r,o,i,n){var s=o*o;if(o>0&&t.size<(i?s:o))r.numPoints+=t.length/3;else {for(var a=[],l=0;l<t.length;l+=3)(0===o||t[l+2]>s)&&(r.numSimplified++,a.push(t[l]),a.push(t[l+1])),r.numPoints++;i&&function(e,t){for(var r=0,o=0,i=e.length,n=i-2;o<i;n=o,o+=2)r+=(e[o]-e[n])*(e[o+1]+e[n+1]);if(r>0===t)for(o=0,i=e.length;o<i/2;o+=2){var s=e[o],a=e[o+1];e[o]=e[i-2-o],e[o+1]=e[i-1-o],e[i-2-o]=s,e[i-1-o]=a;}}(a,n),e.push(a);}}function ue(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var o=0;o<e.features.length;o++)X(r,e.features[o],t,o);else X(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=function(e,t){var r=t.buffer/t.extent,o=e,i=R(e,1,-1-r,r,0,-1,2,t),n=R(e,1,1-r,2+r,0,-1,2,t);return (i||n)&&(o=R(e,1,-r,1+r,0,-1,2,t)||[],i&&(o=re(i,1).concat(o)),n&&(o=o.concat(re(n,-1)))),o}(o,t),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)));}function he(e,t,r){return 32*((1<<e)*r+t)+e}function ce(t,r){const o=t.tileID.canonical;if(!this._geoJSONIndex)return r(null,null);const i=this._geoJSONIndex.getTile(o.z,o.x,o.y);if(!i)return r(null,null);const n=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t;}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10));}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.Point(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const o=[];for(const t of r)o.push(new e.Point(t[0],t[1]));t.push(o);}return t}}toGeoJSON(e,t,r){return l.call(this,e,t,r)}}(this._features[t])}}(i.features);let s=T(n);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),r(null,{vectorTile:n,rawData:s.buffer});}ue.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ue.prototype.splitTile=function(e,t,r,o,i,n,s){for(var a=[e,t,r,o],l=this.options,u=l.debug;a.length;){o=a.pop(),r=a.pop(),t=a.pop(),e=a.pop();var h=1<<t,c=he(t,r,o),f=this.tiles[c];if(!f&&(u>1&&console.time("creation"),f=this.tiles[c]=se(e,t,r,o,l),this.tileCoords.push({z:t,x:r,y:o}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,o,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++;}if(f.source=e,i){if(t===l.maxZoom||t===i)continue;var g=1<<i-t;if(r!==Math.floor(n/g)||o!==Math.floor(s/g))continue}else if(t===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==e.length){u>1&&console.time("clipping");var d,m,y,v,x,w,S=.5*l.buffer/l.extent,M=.5-S,P=.5+S,b=1+S;d=m=y=v=null,x=R(e,h,r-S,r+P,0,f.minX,f.maxX,l),w=R(e,h,r+M,r+b,0,f.minX,f.maxX,l),e=null,x&&(d=R(x,h,o-S,o+P,1,f.minY,f.maxY,l),m=R(x,h,o+M,o+b,1,f.minY,f.maxY,l),x=null),w&&(y=R(w,h,o-S,o+P,1,f.minY,f.maxY,l),v=R(w,h,o+M,o+b,1,f.minY,f.maxY,l),w=null),u>1&&console.timeEnd("clipping"),a.push(d||[],t+1,2*r,2*o),a.push(m||[],t+1,2*r,2*o+1),a.push(y||[],t+1,2*r+1,2*o),a.push(v||[],t+1,2*r+1,2*o+1);}}},ue.prototype.getTile=function(e,t,r){var o=this.options,i=o.extent,n=o.debug;if(e<0||e>24)return null;var s=1<<e,a=he(e,t=(t%s+s)%s,r);if(this.tiles[a])return ie(this.tiles[a],i);n>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,h=t,c=r;!l&&u>0;)u--,h=Math.floor(h/2),c=Math.floor(c/2),l=this.tiles[he(u,h,c)];return l&&l.source?(n>1&&console.log("found parent tile z%d-%d-%d",u,h,c),n>1&&console.time("drilling down"),this.splitTile(l.source,u,h,c,e,t,r),n>1&&console.timeEnd("drilling down"),this.tiles[a]?ie(this.tiles[a],i):null):null};class fe extends e.VectorTileWorkerSource{constructor(e,t,r,o,i){super(e,t,r,o,ce),i&&(this.loadGeoJSON=i);}loadData(t,r){const o=t&&t.request,i=o&&o.collectResourceTiming;this.loadGeoJSON(t,((n,s)=>{if(n||!s)return r(n);if("object"!=typeof s)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{a(s,!0);try{if(t.filter){const r=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const o=s.features.filter((e=>r.value.evaluate({zoom:0},e)));s={type:"FeatureCollection",features:o};}this._geoJSONIndex=t.cluster?new E(function({superclusterOptions:t,clusterProperties:r}){if(!r||!t)return t;const o={},i={},n={accumulated:null,zoom:0},s={properties:null},a=Object.keys(r);for(const t of a){const[n,s]=r[t],a=e.createExpression(s),l=e.createExpression("string"==typeof n?[n,["accumulated"],["get",t]]:n);o[t]=a.value,i[t]=l.value;}return t.map=e=>{s.properties=e;const t={};for(const e of a)t[e]=o[e].evaluate(n,s);return t},t.reduce=(e,t)=>{s.properties=t;for(const t of a)n.accumulated=e[t],e[t]=i[t].evaluate(n,s);},t}(t)).load(s.features):function(e,t){return new ue(e,t)}(s,t.geojsonVtOptions);}catch(n){return r(n)}this.loaded={};const l={};if(i){const r=e.getPerformanceMeasurement(o);r&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(r)));}r(null,l);}}));}reloadTile(e,t){const r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,r){if(t.request)e.getJSON(t.request,r);else {if("string"!=typeof t.data)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId));}catch(e){t(e);}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId));}catch(e){t(e);}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset));}catch(e){t(e);}}}class pe{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:fe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t;},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText;};}clearCaches(e,t,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r();}checkIfReady(e,t,r){r();}setReferrer(e,t){this.referrer=t;}spriteLoaded(t,r){this.isSpriteLoaded[t]=r;for(const o in this.workerSources[t]){const i=this.workerSources[t][o];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=r,i[t].fire(new e.Event("isSpriteLoaded")));}}setImages(e,t,r){this.availableImages[e]=t;for(const r in this.workerSources[e]){const o=this.workerSources[e][r];for(const e in o)o[e].availableImages=t;}r();}enableTerrain(e,t,r){this.terrain=t,r();}setProjection(t,r){this.projections[t]=e.getProjection(r);}setLayers(e,t,r){this.getLayerIndex(e).replace(t),r();}updateLayers(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r();}loadTile(t,r,o){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).loadTile(i,o);}loadDEMTile(t,r,o){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(i,o);}reloadTile(t,r,o){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).reloadTile(i,o);}abortTile(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r);}removeTile(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r);}removeSource(e,t,r){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const o=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==o.removeSource?o.removeSource(t,r):r();}loadWorkerSource(e,t,r){try{this.self.importScripts(t.url),r();}catch(e){r(e.toString());}}syncRTLPluginState(t,r,o){try{e.plugin.setState(r);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const r=e.plugin.isParsed();o(r?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),r);}}catch(e){o(e.toString());}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new o),t}getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const o={send:(t,r,o,i,n,s)=>{this.actor.send(t,r,o,e,n,s);},scheduler:this.actor.scheduler};this.workerSources[e][t][r]=new this.workerSourceTypes[t](o,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e]);}return this.workerSources[e][t][r]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,r){e.enforceCacheSizeLimit(r);}getWorkerPerformanceMetrics(e,t,r){r(void 0,void 0);}}return "undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new pe(self)),pe}));

define(["./shared"],(function(e){"use strict";function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return !1;for(let o=0;o<e.length;o++)if(!t(e[o],i[o]))return !1;return !0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i)return !1;if(Object.keys(e).length!==Object.keys(i).length)return !1;for(const o in e)if(!t(e[o],i[o]))return !1;return !0}return e===i}var i=o;function o(e){return !function(e){return "undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return !1;var e,t,i=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(i);try{t=new Worker(o),e=!0;}catch(t){e=!1;}return t&&t.terminate(),URL.revokeObjectURL(o),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return !1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,i=function(e){var t=document.createElement("canvas"),i=Object.create(o.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=e,t.getContext("webgl",i)||t.getContext("experimental-webgl",i)}(e);if(!i)return !1;try{t=i.createShader(i.VERTEX_SHADER);}catch(e){return !1}return !(!t||i.isContextLost())&&(i.shaderSource(t,"void main() {}"),i.compileShader(t),!0===i.getShaderParameter(t,i.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t;}(e)}var r={};function n(t,i,o){const r=e.window.document.createElement(t);return void 0!==i&&(r.className=i),o&&o.appendChild(r),r}function s(t,i,o){const r=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(i))r.setAttributeNS(null,e,i[e]);return o&&o.appendChild(r),r}o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const a=e.window.document&&e.window.document.documentElement.style,l=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let c;function h(){a&&l&&(c=a[l],a[l]="none");}function u(){a&&l&&(a[l]=c);}function _(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",_,!0);}function d(){e.window.addEventListener("click",_,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",_,!0);}),0);}function p(e,t){const i=e.getBoundingClientRect();return g(e,i,t)}function m(e,t){const i=e.getBoundingClientRect(),o=[];for(let r=0;r<t.length;r++)o.push(g(e,i,t[r]));return o}function f(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function g(t,i,o){const r=t.offsetWidth===i.width?1:t.offsetWidth/i.width;return new e.Point((o.clientX-i.left)*r,(o.clientY-i.top)*r)}function v(e,t){var i=t[0],o=t[1],r=t[2],n=t[3],s=i*n-r*o;return s?(e[0]=n*(s=1/s),e[1]=-o*s,e[2]=-r*s,e[3]=i*s,e):null}function x(e){const{userImage:t}=e;return !!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class y extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0;}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[];}}hasImage(e){return !!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t);}_validate(t,i){let o=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),o=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),o=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),o=!1),o}_validateStretch(e,t){if(!e)return !0;let i=0;for(const o of e){if(o[0]<i||o[1]<o[0]||t<o[1])return !1;i=o[1];}return !0}_validateContent(e,t){return !(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0;}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove();}listImages(){return Object.keys(this.images)}getImages(e,t){let i=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(i=!1);this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t});}_notify(t,i){const o={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?o[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);}i(null,o);}getPixelSize(){const{width:e,height:t}=this.atlasImage;return {width:e,height:t}}getPattern(t){const i=this.patterns[t],o=this.getImage(t);if(!o)return null;if(i&&i.position.version===o.version)return i.position;if(i)i.position.version=o.version;else {const i={w:o.data.width+2,h:o.data.height+2,x:0,y:0},r=new e.ImagePosition(i,o);this.patterns[t]={bin:i,position:r};}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const i=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,i.RGBA),this.atlasTexture&&this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE);}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:i,h:o}=e.potpack(t),r=this.atlasImage;r.resize({width:i||1,height:o||1});for(const t in this.patterns){const{bin:i}=this.patterns[t],o=i.x+1,n=i.y+1,s=this.images[t].data,a=s.width,l=s.height;e.RGBAImage.copy(s,r,{x:0,y:0},{x:o,y:n},{width:a,height:l}),e.RGBAImage.copy(s,r,{x:0,y:l-1},{x:o,y:n-1},{width:a,height:1}),e.RGBAImage.copy(s,r,{x:0,y:0},{x:o,y:n+l},{width:a,height:1}),e.RGBAImage.copy(s,r,{x:a-1,y:0},{x:o-1,y:n},{width:1,height:l}),e.RGBAImage.copy(s,r,{x:0,y:0},{x:o+a,y:n},{width:1,height:l});}this.dirty=!0;}beginFrame(){this.callbackDispatchedThisFrame={};}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];x(e)&&this.updateImage(t,e);}}}const b=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position;}possiblyEvaluate(t,i){return function([t,i,o]){const r=e.degToRad(i+90),n=e.degToRad(o);return {x:t*Math.cos(r)*Math.sin(n),y:t*Math.sin(r)*Math.sin(n),z:t*Math.cos(n),azimuthal:i,polar:o}}(t.expression.evaluate(i))}interpolate(t,i,o){return {x:e.number(t.x,i.x,o),y:e.number(t.y,i.y,o),z:e.number(t.z,i.z,o),azimuthal:e.number(t.azimuthal,i.azimuthal,o),polar:e.number(t.polar,i.polar,o)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class w extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(b),this.setLight(t),this._transitioning=this._transitionable.untransitioned();}getLight(){return this._transitionable.serialize()}setLight(t,i={}){if(!this._validate(e.validateLight,t,i))for(const i in t){const o=t[i];e.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),o):this._transitionable.setValue(i,o);}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}_validate(t,i,o){return (!o||!1!==o.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const T=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let E=class extends e.Evented{constructor(t,i){super(),this._transitionable=new e.Transitionable(T),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i;}get(){return this._transitionable.serialize()}set(t){for(const i in t){const o=t[i];e.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),o):this._transitionable.setValue(i,o);}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}};function C(t,i,o,r){const n=e.smoothstep(45,65,o),[s,a]=M(t,r),l=e.length(i);let c=1-Math.min(1,Math.exp((l-s)/(a-s)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*n*t.alpha}function M(e,t){const i=.5/Math.tan(.5*t);return [e.range[0]+i,e.range[1]+i]}const I=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class P extends e.Evented{constructor(t,i){super(),this._transitionable=new e.Transitionable(I),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=i;}get state(){const t=this._transform,i="globe"===t.projection.name,o=e.globeToMercatorTransition(t.zoom),r=this.properties.get("range"),n=[.5,3];return {range:i?[e.number(n[0],r[0],o),e.number(n[1],r[1],o)]:r,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,i={}){if(!this._validate(e.validateFog,t,i)){for(const i of Object.keys(e.spec.fog))t&&void 0===t[i]&&(t[i]=e.spec.fog[i].default);for(const i in t){const o=t[i];e.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),o):this._transitionable.setValue(i,o);}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const i=this.properties&&this.properties.get("color")||1;return ("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*i.a}getOpacityAtLatLng(t,i){return this._transform.projection.supportsFog?function(t,i,o){const r=e.MercatorCoordinate.fromLngLat(i),n=o.elevation?o.elevation.getAtPointOrZero(r):0,s=[r.x,r.y,n];return e.transformMat4(s,s,o.mercatorFogMatrix),C(t,s,o.pitch,o._fov)}(this.state,t,i):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?M(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}_validate(t,i,o){return (!o||!1!==o.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class S{constructor(t,i){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const o=this.workerPool.acquire(this.id);for(let e=0;e<o.length;e++){const t=new S.Actor(o[e],i,this.id);t.name=`Worker ${e}`,this.actors.push(t);}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0;}));}broadcast(t,i,o){e.asyncAll(this.actors,((e,o)=>{e.send(t,i,o);}),o=o||function(){});}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove();})),this.actors=[],this.workerPool.release(this.id);}}function D(t,i,o){return i*(e.EXTENT/(t.tileSize*Math.pow(2,o-t.tileID.overscaledZ)))}S.Actor=e.Actor;class L{constructor(e,t,i,o){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,o);}static createFromScreenPoints(t,i){let o,r;if(t instanceof e.Point||"number"==typeof t[0]){const n=e.Point.convert(t);o=[n],r=i.isPointAboveHorizon(n);}else {const n=e.Point.convert(t[0]),s=e.Point.convert(t[1]);o=[n,s],r=e.polygonizeBounds(n,s).every((e=>i.isPointAboveHorizon(e)));}return new L(o,i.getCameraPoint(),r,i)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const i=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],r=e.polygonizeBounds(i,o,0,!1);return this.cameraPoint.y>o.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<o.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=o.x?r[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(r[3]=this.cameraPoint)),e.bufferConvexPolygon(r,t)}bufferedCameraGeometryGlobe(t){const i=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],r=e.polygonizeBounds(i,o,t),n=this.cameraPoint.clone();switch(3*((n.y>i.y)+(n.y>o.y))+((n.x>i.x)+(n.x>o.x))){case 0:r[0]=n,r[4]=n.clone();break;case 1:r.splice(1,0,n);break;case 2:r[1]=n;break;case 3:r.splice(4,0,n);break;case 5:r.splice(2,0,n);break;case 6:r[3]=n;break;case 7:r.splice(3,0,n);break;case 8:r[2]=n;}return r}containsTile(t,i,o,r=0){const n=t.queryPadding/i._pixelsPerMercatorPixel+1,s=o?this._bufferedCameraMercator(n,i):this._bufferedScreenMercator(n,i);let a=t.tileID.wrap+(s.unwrapped?r:0);const l=s.polygon.map((i=>e.getTilePoint(t.tileTransform,i,a)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;a=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?r:0);const c=this.screenGeometryMercator.polygon.map((i=>e.getTileVec3(t.tileTransform,i,a))),h=c.map((t=>new e.Point(t[0],t[1]))),u=i.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),_=e.getTileVec3(t.tileTransform,u,a),d=c.map((t=>{const i=e.sub(t,t,_);return e.normalize(i,i),new e.Ray(_,i)})),p=D(t,1,i.zoom)*i._pixelsPerMercatorPixel;return {queryGeometry:this,tilespaceGeometry:h,tilespaceRays:d,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:p};var m;}_bufferedScreenMercator(e,t){const i=R(e);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{let o;return o="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[i]=o,o}}_bufferedCameraMercator(e,t){const i=R(e);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{let o;return o="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[i]=o,o}}_projectAndResample(t,i){const o=function(t,i){const o=e.multiply([],i.pixelMatrix,i.globeMatrix),r=[0,-e.GLOBE_RADIUS,0,1],n=[0,e.GLOBE_RADIUS,0,1],s=[0,0,0,1];e.transformMat4$1(r,r,o),e.transformMat4$1(n,n,o),e.transformMat4$1(s,s,o);const a=new e.Point(r[0]/r[3],r[1]/r[3]),l=new e.Point(n[0]/n[3],n[1]/n[3]),c=e.polygonContainsPoint(t,a)&&r[3]<s[3],h=e.polygonContainsPoint(t,l)&&n[3]<s[3];if(!c&&!h)return null;const u=function(e,t,i){for(let o=1;o<e.length;o++){const r=z(t.pointCoordinate3D(e[o-1]).x),n=z(t.pointCoordinate3D(e[o]).x);if(i<0){if(r<n)return {idx:o,t:-r/(n-1-r)}}else if(n<r)return {idx:o,t:(1-r)/(n+1-r)}}return null}(t,i,c?-1:1);if(!u)return null;const{idx:_,t:d}=u;let p=_>1?A(t.slice(0,_),i):[],m=_<t.length?A(t.slice(_),i):[];p=p.map((t=>new e.Point(z(t.x),t.y))),m=m.map((t=>new e.Point(z(t.x),t.y)));const f=[...p];0===f.length&&f.push(m[m.length-1]);const g=e.number(f[f.length-1].y,(0===m.length?p[0]:m[0]).y,d);let v;return v=c?[new e.Point(0,g),new e.Point(0,0),new e.Point(1,0),new e.Point(1,g)]:[new e.Point(1,g),new e.Point(1,1),new e.Point(0,1),new e.Point(0,g)],f.push(...v),0===m.length?f.push(p[0]):f.push(...m),{polygon:f.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,i);if(o)return o;const r=function(t,i){let o=!1,r=-1/0,n=0;for(let e=0;e<t.length-1;e++)t[e].x>r&&(r=t[e].x,n=e);for(let e=0;e<t.length-1;e++){const i=(n+e)%(t.length-1),r=t[i],s=t[i+1];Math.abs(r.x-s.x)>.5&&(r.x<s.x?(r.x+=1,0===i&&(t[t.length-1].x+=1)):(s.x+=1,i+1===t.length-1&&(t[0].x+=1)),o=!0);}const s=e.mercatorXfromLng(i.center.lng);return o&&s<Math.abs(s-1)&&t.forEach((e=>{e.x-=1;})),{polygon:t,unwrapped:o}}(A(t,i).map((t=>new e.Point(z(t.x),t.y))),i);return {polygon:r.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:r.unwrapped}}}function A(t,i){return e.resample(t,(e=>{const t=i.pointCoordinate3D(e);e.x=t.x,e.y=t.y;}),1/256)}function z(e){return e<0?1+e%1:e%1}function R(e){return 100*e|0}function O(t,i,o,r,n){const s=function(o,r){if(o)return n(o);if(r){t.url&&r.tiles&&t.tiles&&delete t.tiles;const o=e.pick(e.extend(r,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);r.vector_layers&&(o.vectorLayers=r.vector_layers,o.vectorLayerIds=o.vectorLayers.map((e=>e.id))),o.tiles=i.canonicalizeTileset(o,t.url),n(null,o);}};return t.url?e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url,null,o,r),e.ResourceType.Source),s):e.exported.frame((()=>s(null,t)))}class B{constructor(t,i,o){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=i||0,this.maxzoom=o||24;}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const i=Math.pow(2,t.z),o=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),n=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),s=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=o&&t.x<n&&t.y>=r&&t.y<s}}class k{constructor(e,t,i){this.context=e;const o=e.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||t.destroy();}bind(){this.context.bindElementBuffer.set(this.buffer);}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer);}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);}}const F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class U{constructor(e,t,i,o){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=o,this.context=e;const r=e.gl;this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy();}bind(){this.context.bindVertexBuffer.set(this.buffer);}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer);}enableAttributes(e,t){for(let i=0;i<this.attributes.length;i++){const o=t.attributes[this.attributes[i].name];void 0!==o&&e.enableVertexAttribArray(o);}}setVertexAttribPointers(e,t,i){for(let o=0;o<this.attributes.length;o++){const r=this.attributes[o],n=t.attributes[r.name];void 0!==n&&e.vertexAttribPointer(n,r.components,e[F[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0));}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);}}class N{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1;}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default);}}class j extends N{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1);}}class G extends N{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1);}}class Z extends N{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1);}}class V extends N{getDefault(){return [!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1);}}class W extends N{getDefault(){return !0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1);}}class X extends N{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1);}}class q extends N{getDefault(){return {func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1);}}class $ extends N{getDefault(){const e=this.gl;return [e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1);}}class H extends N{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1;}}class Y extends N{getDefault(){return [0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1);}}class K extends N{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1;}}class J extends N{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1);}}class Q extends N{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1;}}class ee extends N{getDefault(){const e=this.gl;return [e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1);}}class te extends N{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1);}}class ie extends N{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1);}}class oe extends N{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1;}}class re extends N{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1);}}class ne extends N{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1);}}let se,ae=class extends N{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1);}};class le extends N{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1);}}class ce extends N{getDefault(){const e=this.gl;return [0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1);}}class he extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1;}}class ue extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1;}}class _e extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1;}}class de extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1;}}class pe extends N{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1;}}class me extends N{constructor(e){super(e),this.vao=e.extVertexArrayObject;}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1);}}class fe extends N{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1;}}class ge extends N{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1;}}class ve extends N{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1;}}class xe extends N{constructor(e,t){super(e),this.context=e,this.parent=t;}getDefault(){return null}}class ye extends xe{setDirty(){this.dirty=!0;}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1;}}class be extends xe{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1;}}class we extends be{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Te{constructor(e,t,i,o){this.context=e,this.width=t,this.height=i;const r=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new ye(e,r),o&&(this.depthAttachment=new be(e,r));}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t);}e.deleteFramebuffer(this.framebuffer);}}class Ee{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)};}this.clearColor=new j(this),this.clearDepth=new G(this),this.clearStencil=new Z(this),this.colorMask=new V(this),this.depthMask=new W(this),this.stencilMask=new X(this),this.stencilFunc=new q(this),this.stencilOp=new $(this),this.stencilTest=new H(this),this.depthRange=new Y(this),this.depthTest=new K(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new ie(this),this.cullFace=new oe(this),this.cullFaceSide=new re(this),this.frontFace=new ne(this),this.program=new ae(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new he(this),this.bindRenderbuffer=new ue(this),this.bindTexture=new _e(this),this.bindVertexBuffer=new de(this),this.bindElementBuffer=new pe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new me(this),this.pixelStoreUnpack=new fe(this),this.pixelStoreUnpackPremultiplyAlpha=new ge(this),this.pixelStoreUnpackFlipY=new ve(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE);}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault();}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0;}createIndexBuffer(e,t){return new k(this,e,t)}createVertexBuffer(e,t,i){return new U(this,e,t,i)}createRenderbuffer(e,t,i){const o=this.gl,r=o.createRenderbuffer();return this.bindRenderbuffer.set(r),o.renderbufferStorage(o.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,i){return new Te(this,e,t,i)}clear({color:e,depth:t,stencil:i}){const o=this.gl;let r=0;e&&(r|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(r|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==i&&(r|=o.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),o.clear(r);}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace));}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1);}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1);}setColorMode(i){t(i.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask);}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null);}}class Ce extends e.Evented{constructor(t,i,o,r){if(super(),this.id=t,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(i,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new e.DedupedRequest;}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,o=this.map._worldview;this._tileJSONRequest=O(this._options,this.map._requestManager,i,o,((r,n)=>{this._tileJSONRequest=null,this._loaded=!0,r?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),o&&2!==o.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${o}`),this.fire(new e.ErrorEvent(r))):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new B(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r);}));}loaded(){return this._loaded}hasTile(e){return !this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load();}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)));}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest();}serialize(){return e.extend({},this._options)}loadTile(t,i){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(o,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",r,n.bind(this));else if(t.actor=this._tileWorkers[o]=this._tileWorkers[o]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",r,n.bind(this),void 0,!0);else {const i=e.loadVectorTile.call({deduped:this._deduped},r,((e,i)=>{e||!i?n.call(this,e):(r.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},t.actor&&t.actor.send("loadTile",r,n.bind(this),void 0,!0));}),!0);t.request={cancel:i};}function n(o,r){return delete t.request,t.aborted?i(null):o&&404!==o.status?i(o):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id});}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id});}hasTransition(){return !1}afterUpdate(){this._tileWorkers={};}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null);}}class Me extends e.Evented{constructor(t,i,o,r){super(),this.id=t,this.dispatcher=o,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},i),e.extend(this,e.pick(i,["url","scheme","tileSize"]));}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,null,null,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new e.ErrorEvent(i)):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new B(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i);}));}loaded(){return this._loaded}onAdd(e){this.map=e,this.load();}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)));}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest();}serialize(){return e.extend({},this._options)}hasTile(e){return !this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const o=e.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),o,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),((o,r,n,s)=>(delete t.request,t.aborted?(t.state="unloaded",i(null)):o?(t.state="errored",i(o)):r?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:n,expires:s}),t.setTexture(r,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void i(null)):i(null))));}static loadTileData(e,t,i){e.setTexture(t,i);}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture);}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t();}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t();}hasTransition(){return !1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null);}}function Ie(t,i,o,r,n,s,a,l){const c=[t,o,n,i,r,s,1,1,1],h=[a,l,1],u=e.adjoint([],c),[_,d,p]=e.transformMat3(h,h,e.transpose(u,u));return e.multiply$1(c,[_,0,0,0,d,0,0,0,p],c)}class Pe extends e.Evented{constructor(e,t,i,o){super(),this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=t,this._dirty=!1;}load(t,i){this._loaded=i||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((i,o)=>{if(this._imageRequest=null,this._loaded=!0,i)this.fire(new e.ErrorEvent(i));else if(o){const{HTMLImageElement:i}=e.window;this.image=o instanceof i?e.exported.getImageData(o):o,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading();}}));}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})));}onAdd(e){this.map=e,this.load();}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy();}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const i=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let i=1/0,o=1/0,r=-1/0,n=-1/0;for(const e of t)i=Math.min(i,e.x),o=Math.min(o,e.y),r=Math.max(r,e.x),n=Math.max(n,e.y);const s=Math.max(r-i,n-o),a=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,a);return new e.CanonicalTileID(a,Math.floor((i+r)/2*l),Math.floor((o+n)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0;}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture);}if(this._boundsArray)return;const i=e.tileTransform(this.tileID,this.map.transform.projection),[o,r,n,s]=this.coordinates.map((t=>{const o=i.projection.project(t[0],t[1]);return e.getTilePoint(i,o)._round()}));this.perspectiveTransform=function(t,i,o,r,n,s,a,l,c,h){const u=Ie(0,0,t,0,0,i,t,i),_=Ie(o,r,n,s,a,l,c,h);return e.multiply$1(_,e.adjoint(u,u),_),[_[6]/_[8]*t/e.EXTENT,_[7]/_[8]*i/e.EXTENT]}(this.width,this.height,o.x,o.y,r.x,r.y,s.x,s.y,n.x,n.y);const a=this._boundsArray=new e.StructArrayLayout4i8;a.emplaceBack(o.x,o.y,0,0),a.emplaceBack(r.x,r.y,e.EXTENT,0),a.emplaceBack(s.x,s.y,0,e.EXTENT),a.emplaceBack(n.x,n.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,i=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t);}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null));}serialize(){return {type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return !1}}const Se={vector:Ce,raster:Me,"raster-dem":class extends Me{constructor(t,i,o,r){super(t,i,o,r),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox";}loadTile(t,i){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(e,o){e&&(t.state="errored",i(e)),o&&(t.dem=o,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",i(null));}t.request=e.getImage(this.map._requestManager.transformRequest(o,e.ResourceType.Tile),function(o,n,s,a){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(o)t.state="errored",i(o);else if(n){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:s,expires:a});const i=e.window.ImageBitmap&&n instanceof e.window.ImageBitmap&&(null==se&&(se=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),se),o=1-(n.width-e.prevPowerOfTwo(n.width))/2;o<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=i?n:e.exported.getImageData(n,o),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:o};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,r.bind(this),void 0,!0));}}.bind(this));}_getNeighboringTiles(t){const i=t.canonical,o=Math.pow(2,i.z),r=(i.x-1+o)%o,n=0===i.x?t.wrap-1:t.wrap,s=(i.x+1+o)%o,a=i.x+1===o?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y-1).key]={backfilled:!1}),i.y+1<o&&(l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded";}},geojson:class extends e.Evented{constructor(t,i,o,r){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(r),this._data=i.data,this._options=e.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const n=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*n,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*n,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*n,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions);}onAdd(e){this.map=e,this.setData(this._data);}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,i,o){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},o),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),i=this._data;"string"==typeof i?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(i),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,i)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else {const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&i&&i.resourceTiming&&i.resourceTiming[this.id]&&(t.resourceTiming=i.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0;}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1);}));}loaded(){return this._loaded}loadTile(t,i){const o=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(o,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,r)=>(delete t.request,t.unloadVectorData(),t.aborted?i(null):e?i(e):(t.loadVectorData(r,this.map.painter,"reloadTile"===o),i(null)))),void 0,"loadTile"===o);}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0;}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id});}onRemove(){this._pendingLoad&&this._pendingLoad.cancel();}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return !1}},video:class extends Pe{constructor(e,t,i,o){super(e,t,i,o),this.roundZoom=!0,this.type="video",this.options=t;}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const i of t.urls)this.urls.push(this.map._requestManager.transformRequest(i,e.ResourceType.Source).url);e.getVideo(this.urls,((t,i)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(this.video=i,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint();})),this.map&&this.video.play(),this._finishLoading());}));}pause(){this.video&&this.video.pause();}play(){this.video&&this.video.play();}seek(t){if(this.video){const i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=t;}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)));}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,i=t.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t);}serialize(){return {type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Pe,canvas:class extends Pe{constructor(t,i,o,r){super(t,i,o,r),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate;}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint();},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1);},this._finishLoading());}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play();}onRemove(){this.pause();}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i);}serialize(){return {type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of [this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return !0;return !1}},custom:class extends e.Evented{constructor(t,i,o,r){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=o,this._implementation=i,this.setEventedParent(r),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new B(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]));}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}));}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load();}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e);}hasTile(e){if(this._implementation.hasTile){const{x:t,y:i,z:o}=e.canonical;return this._implementation.hasTile({x:t,y:i,z:o})}return !this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const{x:o,y:r,z:n}=t.tileID.canonical,s=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:o,y:r,z:n},{signal:s.signal})).then(function(o){return delete t.request,t.aborted?(t.state="unloaded",i(null)):void 0===o?(t.state="errored",i(null)):null===o?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",i(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(o)?(this.loadTileData(t,o),t.state="loaded",void i(null)):(t.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",i(e));})),t.request.cancel=()=>s.abort();}loadTileData(e,t){Me.loadTileData(e,t,this._map.painter);}unloadTileData(e){Me.unloadTileData(e,this._map.painter);}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:i,z:o}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:i,z:o});}t();}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t();}hasTransition(){return !1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id);}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}));}}},De=function(t,i,o,r){const n=new Se[i.type](t,i,o,r);if(n.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${n.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],n),n};function Le(t,i){const o=e.identity([]);return e.scale(o,o,[.5*t.width,.5*-t.height,1]),e.translate(o,o,[1,-1,0]),e.multiply(o,o,t.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(o)}function Ae(e,t,i,o,r,n,s,a=!1){const l=e.tilesIn(o,s,a);l.sort(Re);const c=[];for(const o of l)c.push({wrappedTileID:o.tile.tileID.wrapped().key,queryResults:o.tile.queryRenderedFeatures(t,i,e._state,o,r,n,Le(e.transform,o.tile.tileID),a)});const h=function(e){const t={},i={};for(const o of e){const e=o.queryResults,r=o.wrappedTileID,n=i[r]=i[r]||{};for(const i in e){const o=e[i],r=n[i]=n[i]||{},s=t[i]=t[i]||[];for(const e of o)r[e.featureIndex]||(r[e.featureIndex]=!0,s.push(e));}}return t}(c);for(const t in h)h[t].forEach((t=>{const i=t.feature,o=i.layer;o&&"background"!==o.type&&"sky"!==o.type&&(i.source=o.source,o["source-layer"]&&(i.sourceLayer=o["source-layer"]),i.state=void 0!==i.id?e.getFeatureState(o["source-layer"],i.id):{});}));return h}function ze(e,t){const i=e.getRenderableIds().map((t=>e.getTileByID(t))),o=[],r={};for(let e=0;e<i.length;e++){const n=i[e],s=n.tileID.canonical.key;r[s]||(r[s]=!0,n.querySourceFeatures(o,t));}return o}function Re(e,t){const i=e.tileID,o=t.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}function Oe(){return null!=dn.workerClass?new dn.workerClass:new e.window.Worker(dn.workerUrl)}const Be="mapboxgl_preloaded_worker_pool";class ke{constructor(){this.active={};}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<ke.workerCount;)this.workers.push(new Oe);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate();})),this.workers=null);}isPreloaded(){return !!this.active[Be]}numActive(){return Object.keys(this.active).length}}let Fe;function Ue(){return Fe||(Fe=new ke),Fe}function Ne(t,i){const o={};for(const e in t)"ref"!==e&&(o[e]=t[e]);return e.refProperties.forEach((e=>{e in i&&(o[e]=i[e]);})),o}function je(e){e=e.slice();const t=Object.create(null);for(let i=0;i<e.length;i++)t[e[i].id]=e[i];for(let i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=Ne(e[i],t[e[i].ref]));return e}ke.workerCount=2;const Ge={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ze(e,t,i){i.push({command:Ge.addSource,args:[e,t[e]]});}function Ve(e,t,i){t.push({command:Ge.removeSource,args:[e]}),i[e]=!0;}function We(e,t,i,o){Ve(e,i,o),Ze(e,t,i);}function Xe(e,i,o){let r;for(r in e[o])if(e[o].hasOwnProperty(r)&&"data"!==r&&!t(e[o][r],i[o][r]))return !1;for(r in i[o])if(i[o].hasOwnProperty(r)&&"data"!==r&&!t(e[o][r],i[o][r]))return !1;return !0}function qe(e,i,o,r,n,s){let a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(t(e[a],i[a])||o.push({command:s,args:[r,a,i[a],n]}));for(a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(t(e[a],i[a])||o.push({command:s,args:[r,a,i[a],n]}));}function $e(e){return e.id}function He(e,t){return e[t.id]=t,e}class Ye{constructor(e,t){this.reset(e,t);}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding;}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let i=1,o=this._distances[i];const r=t*this.paddedLength+this.padding;for(;o<r&&i<this._distances.length;)o=this._distances[++i];const n=i-1,s=this._distances[n],a=o-s,l=a>0?(r-s)/a:0;return this.points[n].mult(1-l).add(this.points[i].mult(l))}}class Ke{constructor(e,t,i){const o=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let e=0;e<this.xCellCount*this.yCellCount;e++)o.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0;}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,o,r){this._forEachCell(t,i,o,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(r);}insertCircle(e,t,i,o){this._forEachCell(t-o,i-o,t+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(o);}_insertBoxCell(e,t,i,o,r,n){this.boxCells[r].push(n);}_insertCircleCell(e,t,i,o,r,n){this.circleCells[r].push(n);}_query(e,t,i,o,r,n){if(i<0||e>this.width||o<0||t>this.height)return !r&&[];const s=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=o){if(r)return !0;for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],i=this.circles[3*e+1],o=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-o,y1:i-o,x2:t+o,y2:i+o});}return n?s.filter(n):s}return this._forEachCell(e,t,i,o,this._queryCell,s,{hitTest:r,seenUids:{box:{},circle:{}}},n),r?s.length>0:s}_queryCircle(e,t,i,o,r){const n=e-i,s=e+i,a=t-i,l=t+i;if(s<0||n>this.width||l<0||a>this.height)return !o&&[];const c=[];return this._forEachCell(n,a,s,l,this._queryCellCircle,c,{hitTest:o,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},r),o?c.length>0:c}query(e,t,i,o,r){return this._query(e,t,i,o,!1,r)}hitTest(e,t,i,o,r){return this._query(e,t,i,o,!0,r)}hitTestCircle(e,t,i,o){return this._queryCircle(e,t,i,!0,o)}_queryCell(e,t,i,o,r,n,s,a){const l=s.seenUids,c=this.boxCells[r];if(null!==c){const r=this.bboxes;for(const h of c)if(!l.box[h]){l.box[h]=!0;const c=4*h;if(e<=r[c+2]&&t<=r[c+3]&&i>=r[c+0]&&o>=r[c+1]&&(!a||a(this.boxKeys[h]))){if(s.hitTest)return n.push(!0),!0;n.push({key:this.boxKeys[h],x1:r[c],y1:r[c+1],x2:r[c+2],y2:r[c+3]});}}}const h=this.circleCells[r];if(null!==h){const r=this.circles;for(const c of h)if(!l.circle[c]){l.circle[c]=!0;const h=3*c;if(this._circleAndRectCollide(r[h],r[h+1],r[h+2],e,t,i,o)&&(!a||a(this.circleKeys[c]))){if(s.hitTest)return n.push(!0),!0;{const e=r[h],t=r[h+1],i=r[h+2];n.push({key:this.circleKeys[c],x1:e-i,y1:t-i,x2:e+i,y2:t+i});}}}}}_queryCellCircle(e,t,i,o,r,n,s,a){const l=s.circle,c=s.seenUids,h=this.boxCells[r];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const i=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[i+0],e[i+1],e[i+2],e[i+3])&&(!a||a(this.boxKeys[t])))return n.push(!0),!0}}const u=this.circleCells[r];if(null!==u){const e=this.circles;for(const t of u)if(!c.circle[t]){c.circle[t]=!0;const i=3*t;if(this._circlesCollide(e[i],e[i+1],e[i+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[t])))return n.push(!0),!0}}}_forEachCell(e,t,i,o,r,n,s,a){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),h=this._convertToXCellCoord(i),u=this._convertToYCellCoord(o);for(let _=l;_<=h;_++)for(let l=c;l<=u;l++)if(r.call(this,e,t,i,o,this.xCellCount*l+_,n,s,a))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,o,r,n){const s=o-e,a=r-t,l=i+n;return l*l>s*s+a*a}_circleAndRectCollide(e,t,i,o,r,n,s){const a=(n-o)/2,l=Math.abs(e-(o+a));if(l>a+i)return !1;const c=(s-r)/2,h=Math.abs(t-(r+c));if(h>c+i)return !1;if(l<=a||h<=c)return !0;const u=l-a,_=h-c;return u*u+_*_<=i*i}}const Je={unknown:0,flipRequired:1,flipNotRequired:2},Qe=Math.tan(85*Math.PI/180);function et(t,i,o,r,n,s,a){const l=e.create();if(o)if("globe"===s.name){const t=e.calculateGlobeLabelMatrix(n,i);e.multiply(l,l,t);}else {const t=v([],a);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],r||e.rotateZ(l,l,n.angle);}else e.multiply(l,n.labelPlaneMatrix,t);return l}function tt(e,t,i,o,r,n,s){const a=et(e,t,i,o,r,n,s);return "globe"===n.name&&i||(a[2]=a[6]=a[10]=a[14]=0),a}function it(t,i,o,r,n,s,a){if(o){if("globe"===s.name){const l=et(t,i,o,r,n,s,a);return e.invert(l,l),e.multiply(l,t,l),l}{const i=e.clone(t),o=e.identity([]);return o[0]=a[0],o[1]=a[1],o[4]=a[2],o[5]=a[3],e.multiply(i,i,o),r||e.rotateZ(i,i,-n.angle),i}}return n.glCoordMatrix}function ot(t,i,o,r){const n=[t,i,o,1];o?e.transformMat4$1(n,n,r):pt(n,n,r);const s=n[3];return n[0]/=s,n[1]/=s,n[2]/=s,n}function rt(e,t){return Math.min(.5+e/t*.5,1.5)}function nt(e,t){const i=e[0]/e[3],o=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&o>=-t[1]&&o<=t[1]}function st(t,i,o,r,n,s,a,l,c,h){const u=o.transform,_=r?t.textSizeData:t.iconSizeData,d=e.evaluateSizeForZoom(_,o.transform.zoom),p="globe"===u.projection.name,m=[256/o.width*2+1,256/o.height*2+1],f=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;f.clear();let g=null;p&&(g=r?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,x=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,y=o.transform.width/o.transform.height;let b,w=!1;for(let r=0;r<x.length;r++){const p=x.get(r),{numGlyphs:T,writingMode:E}=p;if(E!==e.WritingMode.vertical||w||b===e.WritingMode.horizontal||(w=!0),b=E,(p.hidden||E===e.WritingMode.vertical)&&!w){dt(T,f);continue}w=!1;const C=new e.Point(p.tileAnchorX,p.tileAnchorY);let{x:M,y:I,z:P}=u.projection.projectTilePoint(C.x,C.y,h.canonical);if(c){const[e,t,i]=c(C);M+=e,I+=t,P+=i;}const S=[M,I,P,1];if(e.transformMat4$1(S,S,i),!nt(S,m)){dt(T,f);continue}const D=rt(o.transform.cameraToCenterDistance,S[3]),L=e.evaluateSizeForFeature(_,d,p),A=a?L/D:L*D,z=ot(M,I,P,n);if(z[3]<=0){dt(T,f);continue}let R={};const O=a?null:c,B=ct(p,A,!1,l,i,n,s,t.glyphOffsetArray,v,f,g,z,C,R,y,O,u.projection,h,a);w=B.useVertical,O&&B.needsFlipping&&(R={}),(B.notEnoughRoom||w||B.needsFlipping&&ct(p,A,!0,l,i,n,s,t.glyphOffsetArray,v,f,g,z,C,R,y,O,u.projection,h,a).notEnoughRoom)&&dt(T,f);}r?(t.text.dynamicLayoutVertexBuffer.updateData(f),g&&t.text.globeExtVertexBuffer.updateData(g)):(t.icon.dynamicLayoutVertexBuffer.updateData(f),g&&t.icon.globeExtVertexBuffer.updateData(g));}function at(e,t,i,o,r,n,s,a,l,c,h,u,_,d,p,m){const{lineStartIndex:f,glyphStartIndex:g,segment:v}=a,x=g+a.numGlyphs,y=f+a.lineLength,b=t.getoffsetX(g),w=t.getoffsetX(x-1),T=_t(e*b,i,o,r,n,s,v,f,y,l,c,h,u,_,!0,d,p,m);if(!T)return null;const E=_t(e*w,i,o,r,n,s,v,f,y,l,c,h,u,_,!0,d,p,m);return E?{first:T,last:E}:null}function lt(t,i,o,r){return t===e.WritingMode.horizontal&&Math.abs(r)>Math.abs(o)?{useVertical:!0}:t===e.WritingMode.vertical?r>0?{needsFlipping:!0}:null:i!==Je.unknown&&function(e,t){return 0===e||Math.abs(t/e)>Qe}(o,r)?i===Je.flipRequired?{needsFlipping:!0}:null:o<0?{needsFlipping:!0}:null}function ct(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g,v,x){const y=i/24,b=t.lineOffsetX*y,w=t.lineOffsetY*y,{lineStartIndex:T,glyphStartIndex:E,numGlyphs:C,segment:M,writingMode:I,flipState:P}=t,S=T+t.lineLength,D=t=>{if(u){const[i,o,r]=t.up,n=h.length;e.updateGlobeVertexNormal(u,n+0,i,o,r),e.updateGlobeVertexNormal(u,n+1,i,o,r),e.updateGlobeVertexNormal(u,n+2,i,o,r),e.updateGlobeVertexNormal(u,n+3,i,o,r);}const[i,o,r]=t.point;e.addDynamicAttributes(h,i,o,r,t.angle);};if(C>1){const e=at(y,l,b,w,o,_,d,t,c,s,p,f,!1,g,v,x);if(!e)return {notEnoughRoom:!0};if(r&&!o){let[i,o,r]=e.first.point,[n,s,l]=e.last.point;[i,o]=ot(i,o,r,a),[n,s]=ot(n,s,l,a);const c=lt(I,P,(n-i)*m,s-o);if(t.flipState=c&&c.needsFlipping?Je.flipRequired:Je.flipNotRequired,c)return c}D(e.first);for(let e=E+1;e<E+C-1;e++){const t=_t(y*l.getoffsetX(e),b,w,o,_,d,M,T,S,c,s,p,f,!1,!1,g,v,x);if(!t)return h.length-=4*(e-E),{notEnoughRoom:!0};D(t);}D(e.last);}else {if(r&&!o){const i=ot(d.x,d.y,0,n),o=T+M+1,r=new e.Point(c.getx(o),c.gety(o)),s=ot(r.x,r.y,0,n),a=s[3]>0?s:ut(d,r,i,1,n,void 0,g,v.canonical),l=lt(I,P,(a[0]-i[0])*m,a[1]-i[1]);if(t.flipState=l&&l.needsFlipping?Je.flipRequired:Je.flipNotRequired,l)return l}const i=_t(y*l.getoffsetX(E),b,w,o,_,d,M,T,S,c,s,p,f,!1,!1,g,v,x);if(!i)return {notEnoughRoom:!0};D(i);}return {}}function ht(e,t,i,o,r){const{x:n,y:s,z:a}=o.projectTilePoint(e.x,e.y,t);if(!r)return ot(n,s,a,i);const[l,c,h]=r(e);return ot(n+l,s+c,a+h,i)}function ut(t,i,o,r,n,s,a,l){const c=ht(t.sub(i)._unit()._add(t),l,n,a,s);return e.sub(c,o,c),e.normalize(c,c),e.scaleAndAdd(c,o,c,r)}function _t(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g,v){const x=r?t-i:t+i;let y=x>0?1:-1,b=0;r&&(y*=-1,b=Math.PI),y<0&&(b+=Math.PI);let w=l+a+(y>0?0:1)|0,T=n,E=n,C=0,M=0;const I=Math.abs(x),P=[],S=[];let D=s,L=D;const A=()=>ut(L,D,E,I-C+1,u,d,f,g.canonical);for(;C+M<=I;){if(w+=y,w<l||w>=c)return null;if(E=T,L=D,P.push(E),p&&S.push(L),D=new e.Point(h.getx(w),h.gety(w)),T=_[w],!T){const e=ht(D,g.canonical,u,f,d);T=e[3]>0?_[w]=e:A();}C+=M,M=e.distance(E,T);}m&&d&&(_[w]&&(T=A(),M=e.distance(E,T)),_[w]=T);const z=(I-C)/M,R=D.sub(L)._mult(z)._add(L),O=e.sub([],T,E),B=e.scaleAndAdd([],E,O,z);let k=[0,0,1],F=O[0],U=O[1];if(v&&(k=f.upVector(g.canonical,R.x,R.y),0!==k[0]||0!==k[1]||1!==k[2])){const t=[k[2],0,-k[0]],i=e.cross([],k,t);e.normalize(t,t),e.normalize(i,i),F=e.dot(O,t),U=e.dot(O,i);}if(o){const t=e.cross([],k,O);e.normalize(t,t),e.scaleAndAdd(B,B,t,o*y);}const N=b+Math.atan2(U,F);return P.push(B),p&&S.push(R),{point:B,angle:N,path:P,tilePath:S,up:k}}function dt(e,t){const i=t.length,o=i+4*e;t.resize(o),t.float32.fill(-1/0,4*i,4*o);}function pt(e,t,i){const o=t[0],r=t[1];return e[0]=i[0]*o+i[4]*r+i[12],e[1]=i[1]*o+i[5]*r+i[13],e[3]=i[3]*o+i[7]*r+i[15],e}const mt=100;class ft{constructor(e,t,i=new Ke(e.width+200,e.height+200,25),o=new Ke(e.width+200,e.height+200,25)){this.transform=e,this.grid=i,this.ignoredGrid=o,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+mt,this.screenBottomBoundary=e.height+mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t;}placeCollisionBox(e,t,i,o,r,n,s,a){let l=i.projectedAnchorX,c=i.projectedAnchorY,h=i.projectedAnchorZ;const u=i.elevation,_=i.tileID,d=e.getProjection();if(u&&_){const[e,t,o]=d.upVector(_.canonical,i.tileAnchorX,i.tileAnchorY),r=d.upVectorScale(_.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*u*r,c+=t*u*r,h+=o*u*r;}const p=this.projectAndGetPerspectiveRatio(s,l,c,h,i.tileID,"globe"===d.name||!!u||this.transform.pitch>0,d),m=n*p.perspectiveRatio,f=(i.x1*t+o.x-i.padding)*m+p.point.x,g=(i.y1*t+o.y-i.padding)*m+p.point.y,v=(i.x2*t+o.x+i.padding)*m+p.point.x,x=(i.y2*t+o.y+i.padding)*m+p.point.y,y=p.perspectiveRatio<=.55||p.occluded;return !this.isInsideGrid(f,g,v,x)||!r&&this.grid.hitTest(f,g,v,x,a)||y?{box:[],offscreen:!1,occluded:p.occluded}:{box:[f,g,v,x],offscreen:this.isOffscreen(f,g,v,x),occluded:!1}}placeCollisionCircles(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m){const f=[],g=this.transform.elevation,v=t.getProjection(),x=g?g.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,v):null,y=new e.Point(o.tileAnchorX,o.tileAnchorY);let{x:b,y:w,z:T}=v.projectTilePoint(y.x,y.y,m.canonical);if(x){const[e,t,i]=x(y);b+=e,w+=t,T+=i;}const E="globe"===v.name,C=this.projectAndGetPerspectiveRatio(a,b,w,T,m,E||!!g||this.transform.pitch>0,v),{perspectiveRatio:M}=C,I=(u?s/M:s*M)/e.ONE_EM,P=ot(b,w,T,l),S=C.signedDistanceFromCamera>0?at(I,n,o.lineOffsetX*I,o.lineOffsetY*I,!1,P,y,o,r,l,{},g&&!u?x:null,u&&!!g,v,m,u):null;let D=!1,L=!1,A=!0;if(S&&!C.occluded){const t=.5*d*M+p,o=new e.Point(-100,-100),r=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),n=new Ye,{first:s,last:a}=S,l=s.path.length;let u=[];for(let e=l-1;e>=1;e--)u.push(s.path[e]);for(let e=1;e<a.path.length;e++)u.push(a.path[e]);const m=2.5*t;c&&(u=u.map((([e,t,i],o)=>(x&&!E&&(i=x(o<l-1?s.tilePath[l-1-o]:a.tilePath[o-l+2])[2]),ot(e,t,i,c)))),u.some((e=>e[3]<=0))&&(u=[]));let g=[];if(u.length>0){let t=1/0,i=-1/0,n=1/0,s=-1/0;for(const e of u)t=Math.min(t,e[0]),n=Math.min(n,e[1]),i=Math.max(i,e[0]),s=Math.max(s,e[1]);i>=o.x&&t<=r.x&&s>=o.y&&n<=r.y&&(g=[u.map((t=>new e.Point(t[0],t[1])))],(t<o.x||i>r.x||n<o.y||s>r.y)&&(g=e.clipLine(g,o.x,o.y,r.x,r.y)));}for(const e of g){n.reset(e,.25*t);let o=0;o=n.length<=.5*t?1:Math.ceil(n.paddedLength/m)+1;for(let e=0;e<o;e++){const r=e/Math.max(o-1,1),s=n.lerp(r),a=s.x+mt,l=s.y+mt;f.push(a,l,t,0);const c=a-t,u=l-t,d=a+t,p=l+t;if(A=A&&this.isOffscreen(c,u,d,p),L=L||this.isInsideGrid(c,u,d,p),!i&&this.grid.hitTestCircle(a,l,t,_)&&(D=!0,!h))return {circles:[],offscreen:!1,collisionDetected:D,occluded:!1}}}}return {circles:!h&&D||!L?[]:f,offscreen:A,collisionDetected:D,occluded:C.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return {};const i=[];let o=1/0,r=1/0,n=-1/0,s=-1/0;for(const a of t){const t=new e.Point(a.x+mt,a.y+mt);o=Math.min(o,t.x),r=Math.min(r,t.y),n=Math.max(n,t.x),s=Math.max(s,t.y),i.push(t);}const a=this.grid.query(o,r,n,s).concat(this.ignoredGrid.query(o,r,n,s)),l={},c={};for(const t of a){const o=t.key;if(void 0===l[o.bucketInstanceId]&&(l[o.bucketInstanceId]={}),l[o.bucketInstanceId][o.featureIndex])continue;const r=[new e.Point(t.x1,t.y1),new e.Point(t.x2,t.y1),new e.Point(t.x2,t.y2),new e.Point(t.x1,t.y2)];e.polygonIntersectsPolygon(i,r)&&(l[o.bucketInstanceId][o.featureIndex]=!0,void 0===c[o.bucketInstanceId]&&(c[o.bucketInstanceId]=[]),c[o.bucketInstanceId].push(o.featureIndex));}return c}insertCollisionBox(e,t,i,o,r){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:o,collisionGroupID:r},e[0],e[1],e[2],e[3]);}insertCollisionCircles(e,t,i,o,r){const n=t?this.ignoredGrid:this.grid,s={bucketInstanceId:i,featureIndex:o,collisionGroupID:r};for(let t=0;t<e.length;t+=4)n.insertCircle(s,e[t],e[t+1],e[t+2]);}projectAndGetPerspectiveRatio(t,i,o,r,n,s,a){const l=[i,o,r,1];let c=!1;if(r||this.transform.pitch>0){if(e.transformMat4$1(l,l,t),this.fogState&&n&&"globe"!==a.name){const t=function(t,i,o,r,n,s){const a=s.calculateFogTileMatrix(n),l=[i,o,r];return e.transformMat4(l,l,a),C(t,l,s.pitch,s._fov)}(this.fogState,i,o,r,n.toUnwrapped(),this.transform);c=t>.9;}}else pt(l,l,t);const h=l[3];return {point:new e.Point((l[0]/h+1)/2*this.transform.width+mt,(-l[1]/h+1)/2*this.transform.height+mt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/h*.5,1.5),signedDistanceFromCamera:h,occluded:s&&l[2]>h||c}}isOffscreen(e,t,i,o){return i<mt||e>=this.screenRightBoundary||o<mt||t>this.screenBottomBoundary}isInsideGrid(e,t,i,o){return i>=0&&e<this.gridRightBoundary&&o>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function gt(t,i,o){const r=i.createTileMatrix(t,t.worldSize,o.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,r)}function vt(e,t,i){if(t.projection.name===i.projection.name)return e.projMatrix;const o=i.clone();return o.setProjection(t.projection),gt(o,t.getProjection(),e)}function xt(e,t,i){return t.name===i.projection.name?e.projMatrix:gt(i,t,e)}class yt{constructor(e,t,i,o){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):o&&i?1:0,this.placed=i;}isHidden(){return 0===this.opacity&&!this.placed}}class bt{constructor(e,t,i,o,r,n=!1){this.text=new yt(e?e.text:null,t,i,r),this.icon=new yt(e?e.icon:null,t,o,r),this.clipped=n;}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wt{constructor(e,t,i,o=!1){this.text=e,this.icon=t,this.skipFade=i,this.clipped=o;}}class Tt{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[];}}class Et{constructor(e,t,i,o,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=r;}}class Ct{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={};}get(e){if(this.crossSourceCollisions)return {ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t};}return this.collisionGroups[e]}}function Mt(t,i,o,r,n){const{horizontalAlign:s,verticalAlign:a}=e.getAnchorAlignment(t),l=-(s-.5)*i,c=-(a-.5)*o,h=e.evaluateVariableOffset(t,r);return new e.Point(l+h[0]*n,c+h[1]*n)}function It(t,i,o,r,n){const s=new e.Point(t,i);return o&&s._rotate(r?n:-n),s}class Pt{constructor(e,t,i,o,r){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new ft(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Ct(i),this.collisionCircleArrays={},this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={};}getBucketParts(t,i,o,r){const n=o.getBucket(i),s=o.latestFeatureIndex;if(!n||!s||i.id!==n.layerIds[0])return;const a=n.layers[0].layout,l=o.collisionBoxArray,c=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),h=o.tileSize/e.EXTENT,u=o.tileID.toUnwrapped();this.transform.setProjection(n.projection);const _=(d=o.tileID,p=n.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(d.toUnwrapped()):gt(m,p,d));var d,p,m;const f="map"===a.get("text-pitch-alignment"),g="map"===a.get("text-rotation-alignment");i.compileFilter();const v=i.dynamicFilter(),x=i.dynamicFilterNeedsFeature(),y=this.transform.calculatePixelsToTileUnitsMatrix(o),b=tt(_,o.tileID.canonical,f,g,this.transform,n.getProjection(),y);let w=null;if(f){const t=it(_,o.tileID.canonical,f,g,this.transform,n.getProjection(),y);w=e.multiply([],this.transform.labelPlaneMatrix,t);}let T=null;v&&o.latestFeatureIndex&&(T={unwrappedTileID:u,dynamicFilter:v,dynamicFilterNeedsFeature:x,featureIndex:o.latestFeatureIndex}),this.retainedQueryData[n.bucketInstanceId]=new Et(n.bucketInstanceId,s,n.sourceLayerIndex,n.index,o.tileID);const E={bucket:n,layout:a,posMatrix:_,textLabelPlaneMatrix:b,labelToScreenMatrix:w,clippingData:T,scale:c,textPixelRatio:h,holdingForFade:o.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(n.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(n.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(n.sourceID)};if(r)for(const e of n.sortKeyRanges){const{sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:r}=e;t.push({sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:r,parameters:E});}else t.push({symbolInstanceStart:0,symbolInstanceEnd:n.symbolInstances.length,parameters:E});}attemptAnchorPlacement(e,t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g){const{textOffset0:v,textOffset1:x,crossTileID:y}=u,b=[v,x],w=Mt(e,i,o,b,r),T=this.collisionIndex.placeCollisionBox(d,r,t,It(w.x,w.y,n,s,this.transform.angle),h,a,l,c.predicate);if(m){const e=d.getSymbolInstanceIconSize(g,this.transform.zoom,u.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(d,e,m,It(w.x,w.y,n,s,this.transform.angle),h,a,l,c.predicate).box.length)return}if(T.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[y]&&this.prevPlacement.placements[y]&&this.prevPlacement.placements[y].text&&(t=this.prevPlacement.variableOffsets[y].anchor),this.variableOffsets[y]={textOffset:b,width:i,height:o,anchor:e,textScale:r,prevAnchor:t},this.markUsedJustification(d,e,u,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,u),this.placedOrientations[y]=p),{shift:w,placedGlyphBoxes:T}}}placeLayerBucketPart(t,i,o,r){const{bucket:n,layout:s,posMatrix:a,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:h,textPixelRatio:u,holdingForFade:_,collisionBoxArray:d,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:m,collisionGroup:f}=t.parameters,g=s.get("text-optional"),v=s.get("icon-optional"),x=s.get("text-allow-overlap"),y=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),w="map"===s.get("text-pitch-alignment"),T="none"!==s.get("icon-text-fit"),E="viewport-y"===s.get("symbol-z-order");this.transform.setProjection(n.projection);let C=x&&(y||!n.hasIconData()||v),M=y&&(x||!n.hasTextData()||g);!n.collisionArrays&&d&&n.deserializeCollisionBoxes(d),o&&r&&n.updateCollisionDebugBuffers(this.transform.zoom,d);const I=(t,r,d)=>{const{crossTileID:E,numVerticalGlyphVertices:I}=t;if(h){const o={zoom:this.transform.zoom,pitch:this.transform.pitch};let r=null;if(h.dynamicFilterNeedsFeature){const e=this.retainedQueryData[n.bucketInstanceId];r=h.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0});}if(!(0,h.dynamicFilter)(o,r,this.retainedQueryData[n.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(h.unwrappedTileID)))return this.placements[E]=new wt(!1,!1,!1,!0),void i.add(E)}if(i.has(E))return;if(_)return void(this.placements[E]=new wt(!1,!1,!1));let P=!1,S=!1,D=!0,L=!1,A=!1,z=null,R={box:null,offscreen:null,occluded:null},O={box:null,offscreen:null,occluded:null},B=null,k=null,F=null,U=0,N=0,j=0;d.textFeatureIndex?U=d.textFeatureIndex:t.useRuntimeCollisionCircles&&(U=t.featureIndex),d.verticalTextFeatureIndex&&(N=d.verticalTextFeatureIndex);const G=e=>{e.tileID=this.retainedQueryData[n.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0);},Z=d.textBox;if(Z){G(Z);const i=i=>{let o=e.WritingMode.horizontal;if(n.allowVerticalPlacement&&!i&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[E];e&&(this.placedOrientations[E]=e,o=e,this.markUsedOrientation(n,o,t));}return o},o=(t,i)=>{if(n.allowVerticalPlacement&&I>0&&d.verticalTextBox){for(const o of n.writingModes)if(o===e.WritingMode.vertical?(R=i(),O=R):R=t(),R&&R.box&&R.box.length)break}else R=t();};if(s.get("text-variable-anchor")){let l=s.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[E]){const e=this.prevPlacement.variableOffsets[E];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor));}const c=(e,i,o)=>{const s=n.getSymbolInstanceTextSize(p,t,this.transform.zoom,r),c=(e.x2-e.x1)*s+2*e.padding,h=(e.y2-e.y1)*s+2*e.padding,_=T&&!y?i:null;_&&G(_);let d={box:[],offscreen:!1,occluded:!1};const g=x?2*l.length:l.length;for(let i=0;i<g;++i){const g=this.attemptAnchorPlacement(l[i%l.length],e,c,h,s,b,w,u,a,f,i>=l.length,t,r,n,o,_,p,m);if(g&&(d=g.placedGlyphBoxes,d&&d.box&&d.box.length)){P=!0,z=g.shift;break}}return d};o((()=>c(Z,d.iconBox,e.WritingMode.horizontal)),(()=>{const t=d.verticalTextBox;return t&&G(t),n.allowVerticalPlacement&&!(R&&R.box&&R.box.length)&&I>0&&t?c(t,d.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),R&&(P=R.box,D=R.offscreen,L=R.occluded);const h=i(!(!R||!R.box));if(!P&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[E];e&&(this.variableOffsets[E]=e,this.markUsedJustification(n,e.anchor,t,h));}}else {const s=(i,o)=>{const s=n.getSymbolInstanceTextSize(p,t,this.transform.zoom,r),l=this.collisionIndex.placeCollisionBox(n,s,i,new e.Point(0,0),x,u,a,f.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(n,o,t),this.placedOrientations[E]=o),l};o((()=>s(Z,e.WritingMode.horizontal)),(()=>{const t=d.verticalTextBox;return n.allowVerticalPlacement&&I>0&&t?(G(t),s(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),i(!!(R&&R.box&&R.box.length));}}if(B=R,P=B&&B.box&&B.box.length>0,D=B&&B.offscreen,L=B&&B.occluded,t.useRuntimeCollisionCircles){const i=n.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),r=e.evaluateSizeForFeature(n.textSizeData,p,i),h=s.get("text-padding");k=this.collisionIndex.placeCollisionCircles(n,x,i,n.lineVertexArray,n.glyphOffsetArray,r,a,l,c,o,w,f.predicate,t.collisionCircleDiameter*r/e.ONE_EM,h,this.retainedQueryData[n.bucketInstanceId].tileID),P=x||k.circles.length>0&&!k.collisionDetected,D=D&&k.offscreen,L=k.occluded;}if(d.iconFeatureIndex&&(j=d.iconFeatureIndex),d.iconBox){const i=i=>{G(i);const o=T&&z?It(z.x,z.y,b,w,this.transform.angle):new e.Point(0,0),r=n.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(n,r,i,o,y,u,a,f.predicate)};O&&O.box&&O.box.length&&d.verticalIconBox?(F=i(d.verticalIconBox),S=F.box.length>0):(F=i(d.iconBox),S=F.box.length>0),D=D&&F.offscreen,A=F.occluded;}const V=g||0===t.numHorizontalGlyphVertices&&0===I,W=v||0===t.numIconVertices;if(V||W?W?V||(S=S&&P):P=S&&P:S=P=S&&P,P&&B&&B.box&&this.collisionIndex.insertCollisionBox(B.box,s.get("text-ignore-placement"),n.bucketInstanceId,O&&O.box&&N?N:U,f.ID),S&&F&&this.collisionIndex.insertCollisionBox(F.box,s.get("icon-ignore-placement"),n.bucketInstanceId,j,f.ID),k&&(P&&this.collisionIndex.insertCollisionCircles(k.circles,s.get("text-ignore-placement"),n.bucketInstanceId,U,f.ID),o)){const e=n.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Tt);for(let e=0;e<k.circles.length;e+=4)t.circles.push(k.circles[e+0]),t.circles.push(k.circles[e+1]),t.circles.push(k.circles[e+2]),t.circles.push(k.collisionDetected?1:0);}const X="globe"!==n.projection.name;C=C&&(X||!L),M=M&&(X||!A),this.placements[E]=new wt(P||C,S||M,D||n.justReloaded),i.add(E);};if(E){const e=n.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const i=e[t];I(n.symbolInstances.get(i),i,n.collisionArrays[i]);}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)I(n.symbolInstances.get(e),e,n.collisionArrays[e]);if(o&&n.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[n.bucketInstanceId];e.invert(t.invProjMatrix,a),t.viewportMatrix=this.collisionIndex.getViewportMatrix();}n.justReloaded=!1;}markUsedJustification(t,i,o,r){const{leftJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:l,crossTileID:c}=o,h=e.getAnchorJustification(i),u=r===e.WritingMode.vertical?l:"left"===h?n:"center"===h?s:"right"===h?a:-1;n>=0&&(t.text.placedSymbolArray.get(n).crossTileID=u>=0&&n!==u?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=u>=0&&s!==u?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=u>=0&&a!==u?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=u>=0&&l!==u?0:c);}markUsedOrientation(t,i,o){const r=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,n=i===e.WritingMode.vertical?i:0,{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=o,h=t.text.placedSymbolArray;s>=0&&(h.get(s).placedOrientation=r),a>=0&&(h.get(a).placedOrientation=r),l>=0&&(h.get(l).placedOrientation=r),c>=0&&(h.get(c).placedOrientation=n);}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const o=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},n=t?t.variableOffsets:{},s=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],n=r[e];n?(this.opacities[e]=new bt(n,o,t.text,t.icon,null,t.clipped),i=i||t.text!==n.text.placed||t.icon!==n.icon.placed):(this.opacities[e]=new bt(null,o,t.text,t.icon,t.skipFade,t.clipped),i=i||t.text||t.icon);}for(const e in r){const t=r[e];if(!this.opacities[e]){const r=new bt(t,o,!1,!1);r.isHidden()||(this.opacities[e]=r,i=i||t.text.placed||t.icon.placed);}}for(const e in n)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=n[e]);for(const e in s)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=s[e]);i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e);}updateLayerOpacities(e,t){const i=new Set;for(const o of t){const t=o.getBucket(e);t&&o.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i,o.collisionBoxArray);}}updateBucketOpacities(t,i,o){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const r=t.layers[0].layout,n=!!t.layers[0].dynamicFilter(),s=new bt(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),l=r.get("icon-allow-overlap"),c=r.get("text-variable-anchor"),h="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),_="none"!==r.get("icon-text-fit"),d=new bt(null,0,a&&(l||!t.hasIconData()||r.get("icon-optional")),l&&(a||!t.hasTextData()||r.get("text-optional")),!0);!t.collisionArrays&&o&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(o);const p=(e,t,i)=>{for(let o=0;o<t/4;o++)e.opacityVertexArray.emplaceBack(i);};let m=0;for(let o=0;o<t.symbolInstances.length;o++){const r=t.symbolInstances.get(o),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:l,crossTileID:f,numIconVertices:g}=r,v=i.has(f);let x=this.opacities[f];v?x=s:x||(x=d,this.opacities[f]=x),i.add(f);const y=a>0||l>0,b=g>0,w=this.placedOrientations[f],T=w===e.WritingMode.vertical,E=w===e.WritingMode.horizontal||w===e.WritingMode.horizontalOnly;if(!y&&!b||x.isHidden()||m++,y){const e=kt(x.text);p(t.text,a,T?Ft:e),p(t.text,l,E?Ft:e);const i=x.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:n,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:c}=r,h=t.text.placedSymbolArray,u=i||T?1:0;o>=0&&(h.get(o).hidden=u),n>=0&&(h.get(n).hidden=u),s>=0&&(h.get(s).hidden=u),c>=0&&(h.get(c).hidden=i||E?1:0);const _=this.variableOffsets[f];_&&this.markUsedJustification(t,_.anchor,r,w);const d=this.placedOrientations[f];d&&(this.markUsedJustification(t,"left",r,d),this.markUsedOrientation(t,d,r));}if(b){const e=kt(x.icon),{placedIconSymbolIndex:i,verticalPlacedIconSymbolIndex:o}=r,n=t.icon.placedSymbolArray,s=x.icon.isHidden()?1:0;i>=0&&(p(t.icon,g,T?Ft:e),n.get(i).hidden=s),o>=0&&(p(t.icon,r.numVerticalIconVertices,E?Ft:e),n.get(o).hidden=s);}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[o];if(i){let o=new e.Point(0,0),r=!0;if(i.textBox||i.verticalTextBox){if(c){const e=this.variableOffsets[f];e?(o=Mt(e.anchor,e.width,e.height,e.textOffset,e.textScale),h&&o._rotate(u?this.transform.angle:-this.transform.angle)):r=!1;}n&&(r=!x.clipped),i.textBox&&St(t.textCollisionBox.collisionVertexArray,x.text.placed,!r||T,o.x,o.y),i.verticalTextBox&&St(t.textCollisionBox.collisionVertexArray,x.text.placed,!r||E,o.x,o.y);}const s=r&&Boolean(!E&&i.verticalIconBox);i.iconBox&&St(t.iconCollisionBox.collisionVertexArray,x.icon.placed,s,_?o.x:0,_?o.y:0),i.verticalIconBox&&St(t.iconCollisionBox.collisionVertexArray,x.icon.placed,!s,_?o.x:0,_?o.y:0);}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId];}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0;}}function St(e,t,i,o,r){e.emplaceBack(t?1:0,i?1:0,o||0,r||0),e.emplaceBack(t?1:0,i?1:0,o||0,r||0),e.emplaceBack(t?1:0,i?1:0,o||0,r||0),e.emplaceBack(t?1:0,i?1:0,o||0,r||0);}const Dt=Math.pow(2,25),Lt=Math.pow(2,24),At=Math.pow(2,17),zt=Math.pow(2,16),Rt=Math.pow(2,9),Ot=Math.pow(2,8),Bt=Math.pow(2,1);function kt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Dt+t*Lt+i*At+t*zt+i*Rt+t*Ot+i*Bt+t}const Ft=0;class Ut{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[];}continuePlacement(e,t,i,o,r){const n=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(n,o,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return !0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,n.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<n.length;){const e=n[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,i,0===e.symbolInstanceStart),this._currentPartIndex++,r())return !0}return !1}}class Nt{constructor(e,t,i,o,r,n,s,a){this.placement=new Pt(e,r,n,s,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1;}isDone(){return this._done}continuePlacement(t,i,o){const r=e.exported.now(),n=()=>{const t=e.exported.now()-r;return !this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=i[t[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=r)&&(!e.maxzoom||e.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(e)),this._inProgressLayer.continuePlacement(o[e.source],this.placement,this._showCollisionBoxes,e,n))return;delete this._inProgressLayer;}this._currentPlacementIndex--;}this._done=!0;}commit(e){return this.placement.commit(e),this.placement}}const jt=512/e.EXTENT/2;class Gt{constructor(t,i,o){this.tileID=t,this.bucketInstanceId=o,this.index=new e.KDBush(i.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const r=t.canonical.x*e.EXTENT,n=t.canonical.y*e.EXTENT;for(let e=0;e<i.length;e++){const{key:t,crossTileID:o,tileAnchorX:s,tileAnchorY:a}=i.get(e),l=Math.floor((r+s)*jt),c=Math.floor((n+a)*jt);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(o);}this.index.finish();}findMatches(t,i,o){const r=this.tileID.canonical.z<i.canonical.z?1:Math.pow(2,this.tileID.canonical.z-i.canonical.z),n=jt/Math.pow(2,i.canonical.z-this.tileID.canonical.z),s=i.canonical.x*e.EXTENT,a=i.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const i=t.get(e);if(i.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:h}=i,u=Math.floor((s+c)*n),_=Math.floor((a+h)*n),d=this.index.range(u-r,_-r,u+r,_+r);for(const e of d){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!o.has(t)){o.add(t),i.crossTileID=t;break}}}}}class Zt{constructor(){this.maxCrossTileID=0;}generate(){return ++this.maxCrossTileID}}class Vt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0;}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const i=this.indexes[e],o={};for(const e in i){const r=i[e];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),o[r.tileID.key]=r;}this.indexes[e]=o;}this.lng=e;}addBucket(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return !1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key]);}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const o=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in r){const n=r[i];n.tileID.isChildOf(e)&&n.findMatches(t.symbolInstances,e,o);}else {const n=r[e.scaledTo(Number(i)).key];n&&n.findMatches(t.symbolInstances,e,o);}}for(let e=0;e<t.symbolInstances.length;e++){const r=t.symbolInstances.get(e);r.crossTileID||(r.crossTileID=i.generate(),o.add(r.crossTileID));}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Gt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const i of t.crossTileIDs)this.usedCrossTileIDs[e].delete(i);}removeStaleBuckets(e){let t=!1;for(const i in this.indexes){const o=this.indexes[i];for(const r in o)e[o[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[r]),delete o[r],t=!0);}return t}}class Wt{constructor(){this.layerIndexes={},this.crossTileIDs=new Zt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={};}addLayer(e,t,i,o){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Vt);let n=!1;const s={};"globe"!==o.name&&r.handleWrapJump(i);for(const i of t){const t=i.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(i.tileID,t,this.crossTileIDs)&&(n=!0),s[t.bucketInstanceId]=!0);}return r.removeStaleBuckets(s)&&(n=!0),n}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0;}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e];}}const Xt=(t,i)=>e.emitValidationErrors(t,i&&i.filter((e=>"source.canvas"!==e.identifier))),qt=e.pick(Ge,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),$t=e.pick(Ge,["setCenter","setZoom","setBearing","setPitch"]),Ht={version:8,layers:[],sources:{}},Yt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Kt extends e.Evented{constructor(t,i={}){super(),this.map=t,this.dispatcher=new S(Ue(),this),this.imageManager=new y,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,i.localFontFamily?e.LocalGlyphMode.all:i.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,i.localFontFamily||i.localIdeographFontFamily),this.crossTileSymbolIndex=new Wt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const o=this;this._rtlTextPluginCallback=Kt.registerForPluginStateChange((t=>{o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,i)=>{if(e.triggerPluginCompletionEvent(t),i&&i.every((e=>e)))for(const e in o._sourceCaches){const t=o._sourceCaches[e],i=t.getSource().type;"vector"!==i&&"geojson"!==i||t.reload();}}));})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const i=this._layers[e];i.source===t.id&&this._validateLayer(i);}}));}loadURL(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const o="boolean"==typeof i.validate?i.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,i.accessToken);const r=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(r,((t,i)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):i&&this._load(i,o);}));}loadJSON(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==i.validate);}));}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ht,!1);}_updateLayerCount(e,t){const i=t?1:-1;e.is3D()&&(this._num3DLayers+=i),"circle"===e.type&&(this._numCircleLayers+=i),"symbol"===e.type&&(this._numSymbolLayers+=i);}_load(t,i){if(i&&Xt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const o=je(this.stylesheet.layers);this._order=o.map((e=>e.id)),this._layers={},this._serializedLayers={};for(const t of o){const i=e.createStyleLayer(t);i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize(),this._updateLayerCount(i,!0);}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"));}terrainSetForDrapingOnly(){return !!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection();}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null));}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection);}_loadSprite(t){this._spriteRequest=function(t,i,o){let r,n,s;const a=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,a,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,s||(s=e,r=t,h());})),c=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,a,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,s||(s=e,n=t,h());}));function h(){if(s)o(s);else if(r&&n){const t=e.exported.getImageData(n),i={};for(const o in r){const{width:n,height:s,x:a,y:l,sdf:c,pixelRatio:h,stretchX:u,stretchY:_,content:d}=r[o],p=new e.RGBAImage({width:n,height:s});e.RGBAImage.copy(t,p,{x:a,y:l},{x:0,y:0},{width:n,height:s}),i[o]={data:p,pixelRatio:h,sdf:c,stretchX:u,stretchY:_,content:d};}o(null,i);}}return {cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null);}}}(t,this.map._requestManager,((t,i)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(i)for(const e in i)this.imageManager.addImage(e,i[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}));}));}_validateLayer(t){const i=this.getSource(t.source);if(!i)return;const o=t.sourceLayer;o&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(o))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${o}" does not exist on source "${i.id}" as specified by style layer "${t.id}"`)));}loaded(){if(!this._loaded)return !1;if(Object.keys(this._updatedSources).length)return !1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return !1;return !!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const i of e){const e=this._layers[i];"custom"!==e.type&&t.push(e.serialize());}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return !0;if(this.fog&&this.fog.hasTransition())return !0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return !0;for(const e in this._layers)if(this._layers[e].hasTransition())return !0;return !1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return !!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():Yt[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const i=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(e.length||i.length)&&this._updateWorkerLayers(e,i);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e);}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates();}const o={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];o[e]=t.used,t.used=!1;}for(const e of this._order){const i=this._layers[e];if(i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)){const e=this._getLayerSourceCache(i);e&&(e.used=!0);}const o=this.map.painter;if(o){const e=i.getProgramIds();if(!e)continue;const r=i.getProgramConfiguration(t.zoom);for(const t of e)o.useProgram(t,r);}}for(const t in o){const i=this._sourceCaches[t];o[t]!==i.used&&i.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i.getSource().id}));}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),i&&this.fire(new e.Event("data",{dataType:"style"}));}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={};}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t});}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={};}setState(i){if(this._checkLoaded(),Xt(this,e.validateStyle(i)))return !1;(i=e.clone$1(i)).layers=je(i.layers);const o=function(e,i){if(!e)return [{command:Ge.setStyle,args:[i]}];let o=[];try{if(!t(e.version,i.version))return [{command:Ge.setStyle,args:[i]}];t(e.center,i.center)||o.push({command:Ge.setCenter,args:[i.center]}),t(e.zoom,i.zoom)||o.push({command:Ge.setZoom,args:[i.zoom]}),t(e.bearing,i.bearing)||o.push({command:Ge.setBearing,args:[i.bearing]}),t(e.pitch,i.pitch)||o.push({command:Ge.setPitch,args:[i.pitch]}),t(e.sprite,i.sprite)||o.push({command:Ge.setSprite,args:[i.sprite]}),t(e.glyphs,i.glyphs)||o.push({command:Ge.setGlyphs,args:[i.glyphs]}),t(e.transition,i.transition)||o.push({command:Ge.setTransition,args:[i.transition]}),t(e.light,i.light)||o.push({command:Ge.setLight,args:[i.light]}),t(e.fog,i.fog)||o.push({command:Ge.setFog,args:[i.fog]}),t(e.projection,i.projection)||o.push({command:Ge.setProjection,args:[i.projection]});const r={},n=[];!function(e,i,o,r){let n;for(n in i=i||{},e=e||{})e.hasOwnProperty(n)&&(i.hasOwnProperty(n)||Ve(n,o,r));for(n in i){if(!i.hasOwnProperty(n))continue;const s=i[n];e.hasOwnProperty(n)?t(e[n],s)||("geojson"===e[n].type&&"geojson"===s.type&&Xe(e,i,n)?o.push({command:Ge.setGeoJSONSourceData,args:[n,s.data]}):We(n,i,o,r)):Ze(n,i,o);}}(e.sources,i.sources,n,r);const s=[];e.layers&&e.layers.forEach((e=>{e.source&&r[e.source]?o.push({command:Ge.removeLayer,args:[e.id]}):s.push(e);}));let a=e.terrain;a&&r[a.source]&&(o.push({command:Ge.setTerrain,args:[void 0]}),a=void 0),o=o.concat(n),t(a,i.terrain)||o.push({command:Ge.setTerrain,args:[i.terrain]}),function(e,i,o){i=i||[];const r=(e=e||[]).map($e),n=i.map($e),s=e.reduce(He,{}),a=i.reduce(He,{}),l=r.slice(),c=Object.create(null);let h,u,_,d,p,m,f;for(h=0,u=0;h<r.length;h++)_=r[h],a.hasOwnProperty(_)?u++:(o.push({command:Ge.removeLayer,args:[_]}),l.splice(l.indexOf(_,u),1));for(h=0,u=0;h<n.length;h++)_=n[n.length-1-h],l[l.length-1-h]!==_&&(s.hasOwnProperty(_)?(o.push({command:Ge.removeLayer,args:[_]}),l.splice(l.lastIndexOf(_,l.length-u),1)):u++,m=l[l.length-h],o.push({command:Ge.addLayer,args:[a[_],m]}),l.splice(l.length-h,0,_),c[_]=!0);for(h=0;h<n.length;h++)if(_=n[h],d=s[_],p=a[_],!c[_]&&!t(d,p))if(t(d.source,p.source)&&t(d["source-layer"],p["source-layer"])&&t(d.type,p.type)){for(f in qe(d.layout,p.layout,o,_,null,Ge.setLayoutProperty),qe(d.paint,p.paint,o,_,null,Ge.setPaintProperty),t(d.filter,p.filter)||o.push({command:Ge.setFilter,args:[_,p.filter]}),t(d.minzoom,p.minzoom)&&t(d.maxzoom,p.maxzoom)||o.push({command:Ge.setLayerZoomRange,args:[_,p.minzoom,p.maxzoom]}),d)d.hasOwnProperty(f)&&"layout"!==f&&"paint"!==f&&"filter"!==f&&"metadata"!==f&&"minzoom"!==f&&"maxzoom"!==f&&(0===f.indexOf("paint.")?qe(d[f],p[f],o,_,f.slice(6),Ge.setPaintProperty):t(d[f],p[f])||o.push({command:Ge.setLayerProperty,args:[_,f,p[f]]}));for(f in p)p.hasOwnProperty(f)&&!d.hasOwnProperty(f)&&"layout"!==f&&"paint"!==f&&"filter"!==f&&"metadata"!==f&&"minzoom"!==f&&"maxzoom"!==f&&(0===f.indexOf("paint.")?qe(d[f],p[f],o,_,f.slice(6),Ge.setPaintProperty):t(d[f],p[f])||o.push({command:Ge.setLayerProperty,args:[_,f,p[f]]}));}else o.push({command:Ge.removeLayer,args:[_]}),m=l[l.lastIndexOf(_)+1],o.push({command:Ge.addLayer,args:[p,m]});}(s,i.layers,o);}catch(e){console.warn("Unable to compute style diff:",e),o=[{command:Ge.setStyle,args:[i]}];}return o}(this.serialize(),i).filter((e=>!(e.command in $t)));if(0===o.length)return !1;const r=o.filter((e=>!(e.command in qt)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((e=>e.command)).join(", ")}.`);return o.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args);})),this.stylesheet=i,this._updateMapProjection(),!0}addImage(t,i){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,i),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t);}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}));}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,i,o={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateSource,`sources.${t}`,i,null,o))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const r=De(t,i,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:r.serialize(),sourceId:t})));const n=i=>{const o=(i?"symbol:":"other:")+t,n=this._sourceCaches[o]=new e.SourceCache(o,r,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[t]=n,n.style=this,n.onAdd(this.map);};n(!1),"vector"!==i.type&&"geojson"!==i.type||n(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0;}removeSource(t){this._checkLoaded();const i=this.getSource(t);if(!i)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const o=this._getSourceCaches(t);for(const t of o)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0;}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const i=this._getSourceCache(t);i&&e.push(i.getSource());}return e}addLayer(t,i,o={}){this._checkLoaded();const r=t.id;if(this.getLayer(r))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" already exists on this map`)));let n;if("custom"===t.type){if(Xt(this,e.validateCustomStyleLayer(t)))return;n=e.createStyleLayer(t);}else {if("object"==typeof t.source&&(this.addSource(r,t.source),t=e.clone$1(t),t=e.extend(t,{source:r})),this._validate(e.validateLayer,`layers.${r}`,t,{arrayIndex:-1},o))return;n=e.createStyleLayer(t),this._validateLayer(n),n.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[n.id]=n.serialize(),this._updateLayerCount(n,!0);}const s=i?this._order.indexOf(i):this._order.length;if(i&&-1===s)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`)));this._order.splice(s,0,r),this._layerOrderChanged=!0,this._layers[r]=n;const a=this._getLayerSourceCache(n);if(this._removedLayers[r]&&n.source&&a&&"custom"!==n.type){const e=this._removedLayers[r];delete this._removedLayers[r],e.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",a.pause());}this._updateLayer(n),n.onAdd&&n.onAdd(this.map),this._updateDrapeFirstLayers();}moveLayer(t,i){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===i)return;const o=this._order.indexOf(t);this._order.splice(o,1);const r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`))):(this._order.splice(r,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers());}removeLayer(t){this._checkLoaded();const i=this._layers[t];if(!i)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));i.setEventedParent(null),this._updateLayerCount(i,!1);const o=this._order.indexOf(t);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map),this._updateDrapeFirstLayers();}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return !0;return !1}setLayerZoomRange(t,i,o){this._checkLoaded();const r=this.getLayer(t);r?r.minzoom===i&&r.maxzoom===o||(null!=i&&(r.minzoom=i),null!=o&&(r.maxzoom=o),this._updateLayer(r)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)));}setFilter(i,o,r={}){this._checkLoaded();const n=this.getLayer(i);if(n){if(!t(n.filter,o))return null==o?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(e.validateFilter,`layers.${n.id}.filter`,o,{layerType:n.type},r)||(n.filter=e.clone$1(o),this._updateLayer(n)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)));}getFilter(t){const i=this.getLayer(t);return i&&e.clone$1(i.filter)}setLayoutProperty(i,o,r,n={}){this._checkLoaded();const s=this.getLayer(i);s?t(s.getLayoutProperty(o),r)||(s.setLayoutProperty(o,r,n),this._updateLayer(s)):this.fire(new e.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)));}getLayoutProperty(t,i){const o=this.getLayer(t);if(o)return o.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)));}setPaintProperty(i,o,r,n={}){this._checkLoaded();const s=this.getLayer(i);s?t(s.getPaintProperty(o),r)||(s.setPaintProperty(o,r,n)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)));}getPaintProperty(e,t){const i=this.getLayer(e);return i&&i.getPaintProperty(t)}setFeatureState(t,i){this._checkLoaded();const o=t.source,r=t.sourceLayer,n=this.getSource(o);if(!n)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const s=n.type;if("geojson"===s&&r)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===s&&!r)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const a=this._getSourceCaches(o);for(const e of a)e.setFeatureState(r,t.id,i);}removeFeatureState(t,i){this._checkLoaded();const o=t.source,r=this.getSource(o);if(!r)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const n=r.type,s="vector"===n?t.sourceLayer:void 0;if("vector"===n&&!s)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const a=this._getSourceCaches(o);for(const e of a)e.removeFeatureState(s,t.id,i);}getFeatureState(t){this._checkLoaded();const i=t.source,o=t.sourceLayer,r=this.getSource(i);if(r){if("vector"!==r.type||o)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(o,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));}else this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const i=this._sourceCaches[e].getSource();t[i.id]||(t[i.id]=i.serialize());}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter();}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,i={},o=[];for(let r=this._order.length-1;r>=0;r--){const n=this._order[r];if(t(n)){i[n]=r;for(const t of e){const e=t[n];if(e)for(const t of e)o.push(t);}}}o.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const r=[];for(let n=this._order.length-1;n>=0;n--){const s=this._order[n];if(t(s))for(let e=o.length-1;e>=0;e--){const t=o[e].feature;if(i[t.layer.id]<n)break;r.push(t),o.pop();}else for(const t of e){const e=t[s];if(e)for(const t of e)r.push(t.feature);}}return r}queryRenderedFeatures(t,i,o){i&&i.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",i.filter,null,i);const r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of i.layers){const i=this._layers[t];if(!i)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];r[i.source]=!0;}}const n=[];i.availableImages=this._availableImages;const s=i&&i.layers?i.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),a=L.createFromScreenPoints(t,o);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;i.layers&&!r[t]||n.push(Ae(this._sourceCaches[e],this._layers,this._serializedLayers,a,i,o,s,!!this.map._showQueryGeometry));}return this.placement&&n.push(function(e,t,i,o,r,n,s){const a={},l=n.queryRenderedSymbols(o),c=[];for(const e of Object.keys(l).map(Number))c.push(s[e]);c.sort(Re);for(const i of c){const o=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(const e in o){const t=a[e]=a[e]||[],r=o[e];r.sort(((e,t)=>{const o=i.featureSortOrder;if(o){const i=o.indexOf(e.featureIndex);return o.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e);}}for(const t in a)a[t].forEach((o=>{const r=o.feature,n=i(e[t]);if(!n)return;const s=n.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=s;}));return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(n)}querySourceFeatures(t,i){i&&i.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",i.filter,null,i);const o=this._getSourceCaches(t);let r=[];for(const e of o)r=r.concat(ze(e,i));return r}addSourceType(e,t,i){return Kt.getSourceType(e)?i(new Error(`A source type called "${e}" already exists.`)):(Kt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const o=this.light.getLight();let r=!1;for(const i in e)if(!t(e[i],o[i])){r=!0;break}if(!r)return;const n=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,i),this.light.updateTransitions(n);}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0);}setTerrain(i,o=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let r=i;if(1===o){if("object"==typeof r.source){const t="terrain-dem-src";this.addSource(t,r.source),r=e.clone$1(r),r=e.extend(r,{source:t});}if(this._validate(e.validateTerrain,"terrain",r))return}if(!this.terrain||this.terrain&&o!==this.terrain.drapeRenderMode){if(!r)return;this._createTerrain(r,o);}else {const i=this.terrain,o=i.get();for(const t of Object.keys(e.spec.terrain))!r.hasOwnProperty(t)&&e.spec.terrain[t].default&&(r[t]=e.spec.terrain[t].default);for(const e in r)if(!t(r[e],o[e])){i.set(r),this.stylesheet.terrain=r;const e=this._setTransitionParameters({duration:0});i.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0;}_createFog(e){const t=this.fog=new P(e,this.map.transform);this.stylesheet.fog=e;const i=this._setTransitionParameters({duration:0});t.updateTransitions(i);}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity();}));}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const i=this.fog,o=i.get();0===Object.keys(e).length&&i.set(e);for(const r in e)if(!t(e[r],o[r])){i.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});i.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0;}_setTransitionParameters(t){return {now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t);}_createTerrain(e,t){const i=this.terrain=new E(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const o=this._setTransitionParameters({duration:0});i.updateTransitions(o);}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t);}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t);}}_validate(t,i,o,r,n={}){return (!n||!1!==n.validate)&&Xt(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:o,styleSpec:e.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove();}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles();}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload();}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload();}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e);}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload();}}_updatePlacement(t,i,o,r,n=!1){let s=!1,a=!1;const l={};for(const e of this._order){const i=this._layers[e];if("symbol"!==i.type)continue;if(!l[i.source]){const e=this._getLayerSourceCache(i);if(!e)continue;l[i.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)));}const o=this.crossTileSymbolIndex.addLayer(i,l[i.source],t.center.lng,t.projection);s=s||o;}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),n=n||this._layerOrderChanged||0===o,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(n||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Nt(t,this._order,n,i,o,r,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source]);}return !this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles();}getImages(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();const o=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons);};o(this._otherSourceCaches[t.source]),o(this._symbolSourceCaches[t.source]);}getGlyphs(e,t,i){this.glyphManager.getGlyphs(t.stacks,i);}getResource(t,i,o){return e.makeRequest(i,o)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return "symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const i=this._getSourceCaches(t);return 0===i.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):i.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches");}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain);}}Kt.getSourceType=function(e){return Se[e]},Kt.setSourceType=function(e,t){Se[e]=t;},Kt.registerForPluginStateChange=e.registerForPluginStateChange;var Jt="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ei="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",ti="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",ii="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let oi={},ri={};const ni=[];hi(Jt,ni),hi(ei,ni),hi(ti,ni),hi(ii,ni),oi=ui("",ei),ri=ui(ii,ti);const si=ui("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ai=Jt,li="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var ci={background:ui("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:ui("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:ui("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:ui("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ui("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:ui("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ui("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ui("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ui("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:ui("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:ui("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:ui("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:ui("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:ui("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:ui("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:ui("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ui("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:ui("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:ui("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:ui("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:ui("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:ui("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:ui("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:ui("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:ui("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ui("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxGradient:ui("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxCapture:ui("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ui("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:ui("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function hi(e,t){const i=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let e of i)if(e=e.trim(),"#"===e[0]&&e.includes("if")&&!e.includes("endif")){e=e.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const i=e.split(" ");for(const e of i)t.includes(e)||t.push(e);}}function ui(e,t){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),r={},n=[...ni];return hi(e,n),hi(t,n),{fragmentSource:e=e.replace(i,((e,t,i,o,n)=>(r[n]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nvarying ${i} ${o} ${n};\n#else\nuniform ${i} ${o} u_${n};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${n}\n    ${i} ${o} ${n} = u_${n};\n#endif\n`))),vertexSource:t=t.replace(i,((e,t,i,o,n)=>{const s="float"===o?"vec2":"vec4",a=n.match(/color/)?"color":s;return r[n]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${s} a_${n};\nvarying ${i} ${o} ${n};\n#else\nuniform ${i} ${o} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = a_${n};\n#else\n    ${i} ${o} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${i} ${o} ${n} = u_${n};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${s} a_${n};\n#else\nuniform ${i} ${o} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${o} ${n} = a_${n};\n#else\n    ${i} ${o} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${o} ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${i} ${o} ${n} = u_${n};\n#endif\n`})),staticAttributes:o,usedDefines:n}}class _i{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null;}bind(e,t,i,o,r,n,s){this.context=e;let a=this.boundPaintVertexBuffers.length!==o.length;for(let e=0;!a&&e<o.length;e++)this.boundPaintVertexBuffers[e]!==o[e]&&(a=!0);let l=this.boundDynamicVertexBuffers.length!==s.length;for(let e=0;!l&&e<s.length;e++)this.boundDynamicVertexBuffers[e]!==s[e]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==i||a||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==n)this.freshBind(t,i,o,r,n,s);else {e.bindVertexArrayOES.set(this.vao);for(const e of s)e&&e.bind();r&&r.dynamicDraw&&r.bind();}}freshBind(e,t,i,o,r,n){let s;const a=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=r,this.boundDynamicVertexBuffers=n;else {s=l.currentNumAttributes||0;for(let e=a;e<s;e++)c.disableVertexAttribArray(e);}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);for(const t of i)t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);for(const t of n)t&&(t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r));o&&o.bind(),l.currentNumAttributes=a;}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null);}}function di(t,i){const o=Math.pow(2,i.canonical.z),r=i.canonical.y;return [new e.MercatorCoordinate(0,r/o).toLngLat().lat,new e.MercatorCoordinate(0,(r+1)/o).toLngLat().lat]}function pi(t,i,o,r,n,s,a){const l=t.context,c=l.gl,h=o.fbo;if(!h)return;t.prepareDrawTile();const u=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,h.colorAttachment.get());const _=((e,t,i,o)=>{const r=i.paint.get("hillshade-shadow-color"),n=i.paint.get("hillshade-highlight-color"),s=i.paint.get("hillshade-accent-color");let a=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(a-=e.transform.angle);const l=!e.options.moving;return {u_matrix:o||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:di(0,t.tileID),u_light:[i.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:n,u_accent:s}})(t,o,r,t.terrain?i.projMatrix:null);t.prepareDrawProgram(l,u,i.toUnwrapped());const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:m}=t.getTileBoundsBuffers(o);u.draw(l,c.TRIANGLES,n,s,a,e.CullFaceMode.disabled,_,r.id,d,p,m);}function mi(t,i,o){if(!i.needsDEMTextureUpload)return;const r=t.context,n=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(o.stride);const s=o.getPixels();i.demTexture?i.demTexture.update(s,{premultiply:!1}):i.demTexture=new e.Texture(r,s,n.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1;}function fi(t,i,o,r,n,s){const a=t.context,l=a.gl;if(!i.dem)return;const c=i.dem;if(a.activeTexture.set(l.TEXTURE1),mi(t,i,c),!i.demTexture)return;i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const h=c.dim;a.activeTexture.set(l.TEXTURE0);let u=i.fbo;if(!u){const t=new e.Texture(a,{width:h,height:h,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),u=i.fbo=a.createFramebuffer(h,h,!0),u.colorAttachment.set(t.texture);}a.bindFramebuffer.set(u.framebuffer),a.viewport.set([0,0,h,h]);const{tileBoundsBuffer:_,tileBoundsIndexBuffer:d,tileBoundsSegments:p}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,r,n,s,e.CullFaceMode.disabled,((t,i)=>{const o=i.stride,r=e.create();return e.ortho(r,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(r,r,[0,-e.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[o,o],u_zoom:t.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,c),o.id,_,d,p),i.needsHillshadePrepare=!1;}const gi=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),vi=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),xi=(e,t,i,o,r,n,s,a,l,c,h,u,_,d,p)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(o),u_merc_matrix:i,u_zoom_transition:r,u_merc_center:n,u_image0:0,u_frustum_tl:s,u_frustum_tr:a,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:h,u_globe_radius:u,u_viewport:_,u_grid_matrix:p?Float32Array.from(p):new Float32Array(9),u_skirt_height:d});function yi(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const bi=new class{constructor(){this.operations={};}newMorphing(e,t,i,o,r){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==i.tileID.key&&(t.queued=i);}else this.operations[e]={startTime:o,phase:0,duration:r,from:t,to:i,queued:null};}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return {from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const i=this.operations[t];for(i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[t];break}}}_nextOp(e,t){return !!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},wi={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ti(e){return 6*Math.pow(1.5,22-e)}function Ei(e,t){const i=1<<e.z;return !t&&(0===e.x||e.x===i-1)||0===e.y||e.y===i-1}const Ci=e=>({u_matrix:e});function Mi(t,i,o,r,n){if(n>0){const s=e.exported.now(),a=(s-t.timeAdded)/n,l=i?(s-i.timeAdded)/n:-1,c=o.getSource(),h=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),u=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(t.tileID.overscaledZ-h),_=u&&t.refreshedUponExpiration?1:e.clamp(u?a:1-l,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-_}:{opacity:_,mix:0}}return {opacity:1,mix:0}}class Ii extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},i=new S(Ue(),null),o=De("mock-dem",t,i,e.style);super("mock-dem",o,!1),o.setEventedParent(this),this._sourceLoaded=!0;}_loadTile(e,t){e.state="loaded",t(null);}}class Pi extends e.SourceCache{constructor(e){const t=De("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new S(Ue(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={};}update(t,i,o){if(t.freezeTileCoverage)return;this.transform=t;const r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((i,o)=>{if(i[o.key]="",!this._tiles[o.key]){const i=new e.Tile(o,this._source.tileSize*o.overscaleFactor(),t.tileZoom);i.state="loaded",this._tiles[o.key]=i;}return i}),{});for(const e in this._tiles)e in r||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e]);}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const i=Object.values(t);this.renderCachePool.push(...i),delete this.proxyCachedFBO[e];}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={};}}class Si extends e.OverscaledTileID{constructor(e,t,i){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=i;}}class Di extends e.Elevation{constructor(t,i){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[o,r,n]=function(t){const i=new e.StructArrayLayout2i4,o=new e.StructArrayLayout3ui6,r=131;i.reserve(17161),o.reserve(33800);const n=e.EXTENT/128,s=e.EXTENT+n/2,a=s+n;for(let t=-n;t<a;t+=n)for(let o=-n;o<a;o+=n){const r=o<0||o>s||t<0||t>s?24575:0,n=e.clamp(Math.round(o),0,e.EXTENT),a=e.clamp(Math.round(t),0,e.EXTENT);i.emplaceBack(n+r,a);}const l=(e,t)=>{const i=t*r+e;o.emplaceBack(i+1,i,i+r),o.emplaceBack(i+r,i+r+1,i+1);};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return [0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t);})),[i,o,32768]}(),s=t.context;this.gridBuffer=s.createVertexBuffer(o,e.posAttributes.members),this.gridIndexBuffer=s.createIndexBuffer(r),this.gridSegments=e.SegmentVector.simpleSegment(0,0,o.length,r.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,o.length,n),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Pi(i.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const a=s.gl;this._overlapStencilMode=new e.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ii(i.map);}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache();}));}update(t,i,o){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const r=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const n=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(i,t,!0),this.resetTileLookupCache(this.sourceCache.id);};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,n(),this._initializing=!0),n(),i.updateElevation(!0,o),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0;}else this._disable();}resetTileLookupCache(e){this._findCoveringTileCache[e]={};}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`);}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0);}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1;}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0);}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return [e,e]}set useVertexMorphing(e){this._useVertexMorphing=e;}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,o=this.painter.transform;this._initializing&&(this._initializing=0===o._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(o.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=i.getIds().map((e=>{const t=i.getTileByID(e).tileID;return t.projMatrix=o.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,i){const o=i.transform.pointCoordinate(i.transform.getCameraPoint()),r=new e.Point(o.x,o.y);t.sort(((t,i)=>{if(i.overscaledZ-t.overscaledZ)return i.overscaledZ-t.overscaledZ;const o=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),n=new e.Point(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),s=r.mult(1<<t.canonical.z);return s.x-=.5,s.y-=.5,s.distSqr(o)-s.distSqr(n)}));}(r,this.painter),this._previousZoom=o.zoom;const n=this.proxyToSource||{};this.proxyToSource={},r.forEach((e=>{this.proxyToSource[e.key]={};})),this.terrainTileForTile={};const s=this._style._sourceCaches;for(const e in s){const i=s[e];if(!i.used)continue;if(i!==this.sourceCache&&this.resetTileLookupCache(i.id),this._setupProxiedCoordsForOrtho(i,t[e],n),i.usedForTerrain)continue;const o=t[e];i.getSource().reparseOverscaled&&this._assignTerrainTiles(o);}this.proxiedCoords[i.id]=r.map((e=>new Si(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(n),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const a={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const i=t.tileID.key;i in a||(this._visibleDemTiles.push(t),a[i]=i);}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t);}));}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const i in this.terrainTileForTile){const o=this.terrainTileForTile[i],r=o.dem;!r||o.demTexture&&!o.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),mi(this.painter,o,r));}}_prepareDemTileUniforms(e,t,i,o){if(!t||null==t.demTexture)return !1;const r=e.tileID.canonical,n=Math.pow(2,t.tileID.canonical.z-r.z),s=o||"";return i[`u_dem_tl${s}`]=[r.x*n%1,r.y*n%1],i[`u_dem_scale${s}`]=n,!0}get emptyDEMTexture(){return !this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,i=t.gl;if(!this._emptyDepthBufferTexture){const o=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,o,i.RGBA,{premultiply:!1});}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,i)=>{if(!i.dem)return t;const o=i.dem.tree.minimums[0];return o>0&&e++,t+o}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,i=t.gl;t.activeTexture.set(i.TEXTURE2);const o=this._getLoadedAreaMinimum(),r=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(o,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let n=this._emptyDEMTexture;return n?n.update(r,{premultiply:!1}):n=this._emptyDEMTexture=new e.Texture(t,r,i.RGBA,{premultiply:!1}),n}setupElevationDraw(t,i,o){const r=this.painter.context,n=r.gl,s=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var a;s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();let l=null,c=null,h=1;if(o&&o.morphing&&this._useVertexMorphing){const e=o.morphing.srcDemTile,i=o.morphing.dstDemTile;h=o.morphing.phase,e&&i&&(this._prepareDemTileUniforms(t,e,s,"_prev")&&(c=e),this._prepareDemTileUniforms(t,i,s)&&(l=i));}if(c&&l?(r.activeTexture.set(n.TEXTURE2),l.demTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE,n.NEAREST),r.activeTexture.set(n.TEXTURE4),c.demTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE,n.NEAREST),s.u_dem_lerp=h):(l=this.terrainTileForTile[t.tileID.key],r.activeTexture.set(n.TEXTURE2),(this._prepareDemTileUniforms(t,l,s)?l.demTexture:this.emptyDEMTexture).bind(n.NEAREST,n.CLAMP_TO_EDGE)),r.activeTexture.set(n.TEXTURE3),o&&o.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),o&&o.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=t;}if(o&&o.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=o.labelPlaneMatrixInv),i.setTerrainUniformValues(r,s),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,o&&o.useDenormalizedUpVectorScale);i.setGlobeUniformValues(r,e);}}globeUniformValues(t,i,o){const r=t.projection;return {u_tile_tl_up:r.upVector(i,0,0),u_tile_tr_up:r.upVector(i,e.EXTENT,0),u_tile_br_up:r.upVector(i,e.EXTENT,e.EXTENT),u_tile_bl_up:r.upVector(i,0,e.EXTENT),u_tile_up_scale:o?e.globeMetersToEcef(1):r.upVectorScale(i,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const i=this.painter,o=this.painter.context;0!==t.length&&(o.bindFramebuffer.set(null),o.viewport.set([0,0,i.width,i.height]),i.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,i,o,r,n){if("globe"===t.transform.projection.name)!function(t,i,o,r,n){const s=t.context,a=s.gl;let l,c;const h=t.options.showTerrainWireframe?2:0,u=t.transform,_=e.globeUseCustomAntiAliasing(t,s,u),d=(e,i)=>{if(c===e)return;const o=[wi[e],"PROJECTION_GLOBE_VIEW"];_&&o.push("CUSTOM_ANTIALIASING"),i&&o.push(wi[h]),l=t.useProgram("globeRaster",null,o),c=e;},p=t.colorModeForRenderPass(),m=new e.DepthMode(a.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);bi.update(n);const f=e.calculateGlobeMercatorMatrix(u),g=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],v=h?[!1,!0]:[!1],x=t.globeSharedBuffers,y=[u.width*e.exported.devicePixelRatio,u.height*e.exported.devicePixelRatio],b=Float32Array.from(u.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(v.forEach((h=>{const u=t.transform,_=Ti(u.zoom)*i.exaggeration();c=-1;const v=h?a.LINES:a.TRIANGLES;for(const c of r){const r=o.getTile(c),T=e.StencilMode.disabled,E=i.prevTerrainTileForTile[c.key],C=i.terrainTileForTile[c.key];yi(E,C)&&bi.newMorphing(c.key,E,C,n,250),s.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const M=bi.getMorphValuesForProxy(c.key),I=M?1:0;M&&e.extend$1(w,{morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:e.easeCubicInOut(M.phase)}});const P=e.tileCornersToBounds(c.canonical),S=e.getLatitudinalLod(P.getCenter().lat),D=e.getGridMatrix(c.canonical,P,S,u.worldSize/u._pixelsPerMercatorPixel),L=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),A=xi(u.projMatrix,b,f,L,e.globeToMercatorTransition(u.zoom),g,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,y,_,D);if(d(I,h),i.setupElevationDraw(r,l,w),t.prepareDrawProgram(s,l,c.toUnwrapped()),x){const[i,o,r]=h?x.getWirefameBuffers(t.context,S):x.getGridBuffers(S,0!==_);l.draw(s,v,m,T,p,e.CullFaceMode.backCCW,A,"globe_raster",i,o,r);}}})),x){const n=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];_&&n.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,n);for(const n of r){const{x:r,y:c,z:h}=n.canonical,_=0===c,d=c===(1<<h)-1,[f,v,b,T]=x.getPoleBuffers(h);if(T&&(_||d)){const c=o.getTile(n);s.activeTexture.set(a.TEXTURE0),c.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);let x=e.globePoleMatrixForTile(h,r,u);const E=e.globeNormalizeECEF(e.globeTileBounds(n.canonical)),C=(t,i)=>t.draw(s,a.TRIANGLES,m,e.StencilMode.disabled,p,e.CullFaceMode.disabled,xi(u.projMatrix,x,x,E,0,g,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,y,0),"globe_pole_raster",i,b,T);i.setupElevationDraw(c,l,w),t.prepareDrawProgram(s,l,n.toUnwrapped()),_&&C(l,f),d&&(x=e.scale(e.create(),x,[1,-1,1]),C(l,v));}}}}(t,i,o,r,n);else {const s=t.context,a=s.gl;let l,c;const h=t.options.showTerrainWireframe?2:0,u=(e,i)=>{if(c===e)return;const o=[wi[e]];i&&o.push(wi[h]),l=t.useProgram("terrainRaster",null,o),c=e;},_=t.colorModeForRenderPass(),d=new e.DepthMode(a.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);bi.update(n);const p=t.transform,m=Ti(p.zoom)*i.exaggeration();(h?[!1,!0]:[!1]).forEach((h=>{c=-1;const f=h?a.LINES:a.TRIANGLES,[g,v]=h?i.getWirefameBuffer():[i.gridIndexBuffer,i.gridSegments];for(const c of r){const r=o.getTile(c),x=e.StencilMode.disabled,y=i.prevTerrainTileForTile[c.key],b=i.terrainTileForTile[c.key];yi(y,b)&&bi.newMorphing(c.key,y,b,n,250),s.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const w=bi.getMorphValuesForProxy(c.key),T=w?1:0;let E;w&&(E={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const C=vi(c.projMatrix,Ei(c.canonical,p.renderWorldCopies)?m/10:m);u(T,h),i.setupElevationDraw(r,l,E),t.prepareDrawProgram(s,l,c.toUnwrapped()),l.draw(s,f,d,x,_,e.CullFaceMode.backCCW,C,"terrain_raster",i.gridBuffer,g,v);}}));}}(i,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,i.gpuTimingDeferredRenderEnd(),t.splice(0,t.length));}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const i=this.painter,o=this.painter.context,r=this.proxySourceCache,n=this.proxiedCoords[r.id],s=this._drapedRenderBatches.shift(),a=[],l=i.style.order;let c=0;for(const h of n){const n=r.getTileByID(h.proxyTileKey),u=r.proxyCachedFBO[h.key]?r.proxyCachedFBO[h.key][t]:void 0,_=void 0!==u?r.renderCache[u]:this.pool[c++],d=void 0!==u;if(n.texture=_.tex,d&&!_.dirty){a.push(n.tileID);continue}let p;o.bindFramebuffer.set(_.fb.framebuffer),this.renderedToTile=!1,_.dirty&&(o.clear({color:e.Color.transparent,stencil:0}),_.dirty=!1);for(let e=s.start;e<=s.end;++e){const t=i.style._layers[l[e]];if(t.isHidden(i.transform.zoom))continue;const r=i.style._getLayerSourceCache(t),n=r?this.proxyToSource[h.key][r.id]:[h];if(!n)continue;const s=n;o.viewport.set([0,0,_.fb.width,_.fb.height]),p!==(r?r.id:null)&&(this._setupStencil(_,n,t,r),p=r?r.id:null),i.renderLayer(i,r,t,s);}this.renderedToTile?(_.dirty=!0,a.push(n.tileID)):d||--c,5===c&&(c=0,this.renderToBackBuffer(a));}return this.renderToBackBuffer(a),this.renderingToTexture=!1,o.bindFramebuffer.set(null),o.viewport.set([0,0,i.width,i.height]),s.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return {efficiency:100};let i,o=0,r=0,n=!1;for(let s=0;s<t;++s){const t=e._layers[e.order[s]];this._style.isLayerDraped(t)?(n&&++o,++r):n||(n=!0,i=t.id);}return 0===r?{efficiency:100}:{efficiency:100*(1-o/r),firstUndrapedLayer:i}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0]);})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,i){if(!this._visibleDemTiles)return null;const o=this._visibleDemTiles.filter((e=>e.dem)).map((o=>{const r=o.tileID,n=1<<r.overscaledZ,{x:s,y:a}=r.canonical,l=s/n,c=(s+1)/n,h=a/n,u=(a+1)/n;return {minx:l,miny:h,maxx:c,maxy:u,t:o.dem.tree.raycastRoot(l,h,c,u,e,t,i),tile:o}}));o.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const r of o){if(null==r.t)return null;const o=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,e,t,i);if(null!=o)return o}return null}_createFBO(){const t=this.painter.context,i=t.gl,o=this.drapeBufferSize;t.activeTexture.set(i.TEXTURE0);const r=new e.Texture(t,{width:o[0],height:o[1],data:null},i.RGBA);r.bind(i.LINEAR,i.CLAMP_TO_EDGE);const n=t.createFramebuffer(o[0],o[1],!1);return n.colorAttachment.set(r.texture),n.depthAttachment=new we(t,n.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,o[0],o[1]),this._stencilRef=0,n.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):n.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:n,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO());}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return !0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return !0;return this._style.order.some((e=>{const t=this._style._layers[e],i=t.isHidden(this.painter.transform.zoom);return "custom"===t.type?!i&&t.shouldRedrape():!i&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Ce){t=!0;break}if(!t)return;const i={};for(let t=0;t<this._style.order.length;++t){const o=this._style._layers[this._style.order[t]],r=this._style._getLayerSourceCache(o);if(r&&!i[r.id]&&!o.isHidden(this.painter.transform.zoom)&&"line"===o.type&&o.widthExpression()instanceof e.ZoomDependentExpression){i[r.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t)this._clearRenderCacheForTile(r.id,e);}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Me){e=!0;break}if(!e)return;const t={};for(let e=0;e<this._style.order.length;++e){const i=this._style._layers[this._style.order[e]],o=this._style._getLayerSourceCache(i);if(!o||t[o.id])continue;if(i.isHidden(this.painter.transform.zoom)||"raster"!==i.type)continue;const r=i.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][o.id];if(t)for(const e of t){const t=Mi(o.getTile(e),o.findLoadedParent(e,0),o,this.painter.transform,r);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(o.id,e);}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const i=[];let o,r=0,n=this._style._layers[e[r]];for(;!this._style.isLayerDraped(n)&&n.isHidden(this.painter.transform.zoom)&&++r<t;)n=this._style._layers[e[r]];for(;r<t;++r){const t=this._style._layers[e[r]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===o&&(o=r):void 0!==o&&(i.push({start:o,end:r-1}),o=void 0));}void 0!==o&&i.push({start:o,end:r-1}),this._drapedRenderBatches=i;}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let i=0;i<e.length;++i){const o=Object.values(e[i]);t.renderCachePool.push(...o);}}return}this._clearRasterLayersFromRenderCache();const i=this.proxyCoords,o=this._tilesDirty;for(let r=i.length-1;r>=0;r--){const n=i[r];if(t.getTileByID(n.key),void 0!==t.proxyCachedFBO[n.key]){const i=e[n.key],r=this.proxyToSource[n.key];let s=0;for(const e in r){const t=r[e],n=i[e];if(!n||n.length!==t.length||t.some(((t,i)=>t!==n[i]||o[e]&&o[e].hasOwnProperty(t.key)))){s=-1;break}++s;}for(const e in t.proxyCachedFBO[n.key])t.renderCache[t.proxyCachedFBO[n.key][e]].dirty=s<0||s!==Object.values(i).length;}}const r=[...this._drapedRenderBatches];r.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const e of r)for(const o of i){if(t.proxyCachedFBO[o.key])continue;let i=t.renderCachePool.pop();void 0===i&&t.renderCache.length<50&&(i=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==i&&(t.proxyCachedFBO[o.key]={},t.proxyCachedFBO[o.key][e.start]=i,t.renderCache[i].dirty=!0);}this._tilesDirty={};}_setupStencil(e,t,i,o){if(!o||!this._sourceTilesOverlap[o.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,n=r.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let s;if(i.isTileClipped())s=t.length,this._overlapStencilMode.test={func:n.EQUAL,mask:255},this._overlapStencilType="Clip";else {if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);s=1,this._overlapStencilMode.test={func:n.GREATER,mask:255},this._overlapStencilType="Mask";}this._stencilRef+s>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=s,this._overlapStencilMode.ref=this._stencilRef,i.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref);}clipOrMaskOverlapStencilType(){return "Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,i){const o=this.painter,r=this.painter.context,n=r.gl;o._tileClippingMaskIDs={},r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);const s=o.useProgram("clippingMask");for(const a of t){const t=o._tileClippingMaskIDs[a.key]=--i;s.draw(r,n.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:n.ALWAYS,mask:0},t,255,n.KEEP,n.KEEP,n.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Ci(a.projMatrix),"$clipping",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments);}}pointCoordinate(t){const i=this.painter.transform;if(t.x<0||t.x>i.width||t.y<0||t.y>i.height)return null;const o=[t.x,t.y,1,1];e.transformMat4$1(o,o,i.pixelMatrixInverse),e.scale$1(o,o,1/o[3]),o[0]/=i.worldSize,o[1]/=i.worldSize;const r=i._camera.position,n=e.mercatorZfromAltitude(1,i.center.lat),s=[r[0],r[1],r[2]/n,0],a=e.subtract([],o.slice(0,3),s);e.normalize(a,a);const l=this.raycast(s,a,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(s,s,a,l),s[3]=s[2],s[2]*=n,s):null}drawDepth(){const t=this.painter,i=t.context,o=this.proxySourceCache,r=Math.ceil(t.width),n=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===n||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=i.gl,o=i.createFramebuffer(r,n,!0);i.activeTexture.set(t.TEXTURE0);const s=new e.Texture(i,{width:r,height:n,data:null},t.RGBA);s.bind(t.NEAREST,t.CLAMP_TO_EDGE),o.colorAttachment.set(s.texture);const a=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,r,n);o.depthAttachment.set(a),this._depthFBO=o,this._depthTexture=s;}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,r,n]),function(t,i,o,r){if("globe"===t.transform.projection.name)return;const n=t.context,s=n.gl;n.clear({depth:1});const a=t.useProgram("terrainDepth"),l=new e.DepthMode(s.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of r){const r=o.getTile(t),c=vi(t.projMatrix,0);i.setupElevationDraw(r,a),a.draw(n,s.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments);}}(t,this,o,this.proxyCoords);}_setupProxiedCoordsForOrtho(e,t,i){if(e.getSource()instanceof Pe)return this._setupProxiedCoordsForImageSource(e,t,i);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const o=this.proxiedCoords[e.id]=[],r=this.proxyCoords;for(let t=0;t<r.length;t++){const n=r[t],s=this._findTileCoveringTileID(n,e);if(s){const t=this._createProxiedId(n,s,i[n.key]&&i[n.key][e.id]);o.push(t),this.proxyToSource[n.key][e.id]=[t];}}let n=!1;for(let r=0;r<t.length;r++){const s=e.getTile(t[r]);if(!s||!s.hasData())continue;const a=this._findTileCoveringTileID(s.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==s.tileID.canonical.z){const t=this.proxyToSource[a.tileID.key][e.id],r=this._createProxiedId(a.tileID,s,i[a.tileID.key]&&i[a.tileID.key][e.id]);t?t.splice(t.length-1,0,r):this.proxyToSource[a.tileID.key][e.id]=[r],o.push(r),n=!0;}}this._sourceTilesOverlap[e.id]=n;}_setupProxiedCoordsForImageSource(t,i,o){if(!t.getSource().loaded())return;const r=this.proxiedCoords[t.id]=[],n=this.proxyCoords,s=t.getSource(),a=new e.Point(s.tileID.x,s.tileID.y)._div(1<<s.tileID.z),l=s.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-a.x),e.min.y=Math.min(e.min.y,t.y-a.y),e.max.x=Math.max(e.max.x,t.x-a.x),e.max.y=Math.max(e.max.y,t.y-a.y),e)),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,i)=>{const o=t.wrap+t.canonical.x/(1<<t.canonical.z),r=t.canonical.y/(1<<t.canonical.z),n=e.EXTENT/(1<<t.canonical.z),s=i.wrap+i.canonical.x/(1<<i.canonical.z),a=i.canonical.y/(1<<i.canonical.z);return o+n<s+l.min.x||o>s+l.max.x||r+n<a+l.min.y||r>a+l.max.y};for(let e=0;e<n.length;e++){const s=n[e];for(let e=0;e<i.length;e++){const n=t.getTile(i[e]);if(!n||!n.hasData())continue;if(c(s,n.tileID))continue;const a=this._createProxiedId(s,n,o[s.key]&&o[s.key][t.id]),l=this.proxyToSource[s.key][t.id];l?l.push(a):this.proxyToSource[s.key][t.id]=[a],r.push(a);}}}_createProxiedId(t,i,o){let r=this.orthoMatrix;if(o){const e=o.find((e=>e.key===i.tileID.key));if(e)return e}if(i.tileID.key!==t.key){const o=t.canonical.z-i.tileID.canonical.z;let n,s,a;r=e.create();const l=i.tileID.wrap-t.wrap<<t.overscaledZ;o>0?(n=e.EXTENT>>o,s=n*((i.tileID.canonical.x<<o)-t.canonical.x+l),a=n*((i.tileID.canonical.y<<o)-t.canonical.y)):(n=e.EXTENT<<-o,s=e.EXTENT*(i.tileID.canonical.x-(t.canonical.x+l<<-o)),a=e.EXTENT*(i.tileID.canonical.y-(t.canonical.y<<-o))),e.ortho(r,0,n,0,n,0,1),e.translate(r,r,[s,a,0]);}return new Si(i.tileID,t.key,r)}_findTileCoveringTileID(t,i){let o=i.getTile(t);if(o&&o.hasData())return o;const r=this._findCoveringTileCache[i.id],n=r[t.key];if(o=n?i.getTileByID(n):null,o&&o.hasData()||null===n)return o;let s=o?o.tileID:t,a=s.overscaledZ;const l=i.getSource().minzoom,c=[];if(!n){const r=i.getSource().maxzoom;if(t.canonical.z>=r){const o=t.canonical.z-r;i.getSource().reparseOverscaled?(a=Math.max(t.canonical.z+2,i.transform.tileZoom),s=new e.OverscaledTileID(a,t.wrap,r,t.canonical.x>>o,t.canonical.y>>o)):0!==o&&(a=r,s=new e.OverscaledTileID(a,t.wrap,r,t.canonical.x>>o,t.canonical.y>>o));}s.key!==t.key&&(c.push(s.key),o=i.getTile(s));}const h=e=>{c.forEach((t=>{r[t]=e;})),c.length=0;};for(a-=1;a>=l&&(!o||!o.hasData());a--){o&&h(o.tileID.key);const e=s.calculateScaledKey(a);if(o=i.getTileByID(e),o&&o.hasData())break;const t=r[e];if(null===t)break;void 0===t?c.push(e):o=i.getTileByID(t);}return h(o?o.tileID.key:null),o&&o.hasData()?o:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0;}_clearRenderCacheForTile(e,t){let i=this._tilesDirty[e];i||(i=this._tilesDirty[e]={}),i[t.key]=!0;}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let i=0;const o=new e.StructArrayLayout2ui4,r=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)i=e*r+t,o.emplaceBack(i,i+1),o.emplaceBack(i,i+r),o.emplaceBack(i+1,i+r),128===e&&o.emplaceBack(i+r,i+r+1);o.emplaceBack(i+1,i+1+r);}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length);}return [this.wireframeIndexBuffer,this.wireframeSegments]}}class Li{static cacheKey(e,t,i,o){let r=`${t}${o?o.cacheKey:""}`;for(const t of i)e.usedDefines.includes(t)&&(r+=`/${t}`);return r}constructor(t,i,o,r,n,s){const a=t.gl;this.program=a.createProgram();const l=function(e){const t=[];for(let i=0;i<e.length;i++){if(null===e[i])continue;const o=e[i].split(" ");t.push(o.pop());}return t}(o.staticAttributes),c=r?r.getBinderAttributes():[],h=l.concat(c);let u=r?r.defines():[];u=u.concat(s.map((e=>`#define ${e}`)));const _=t.isWebGL2?"#version 300 es\n":"",d=_+u.concat(t.extStandardDerivatives&&0===_.length?"#extension GL_OES_standard_derivatives : enable\n".concat(li):li,li,ai,si.fragmentSource,ri.fragmentSource,o.fragmentSource).join("\n"),p=_+u.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ai,si.vertexSource,ri.vertexSource,oi.vertexSource,o.vertexSource).join("\n"),m=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(m,d),a.compileShader(m),a.attachShader(this.program,m);const f=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else {a.shaderSource(f,p),a.compileShader(f),a.attachShader(this.program,f),this.attributes={},this.numAttributes=h.length;for(let e=0;e<this.numAttributes;e++)h[e]&&(a.bindAttribLocation(this.program,e,h[e]),this.attributes[h[e]]=e);a.linkProgram(this.program),a.deleteShader(f),a.deleteShader(m),this.fixedUniforms=n(t),this.binderUniforms=r?r.getUniforms(t):[],s.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),s.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),s.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t));}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e]&&i[e].set(this.program,e,t[e]);}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const i=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e]&&i[e].set(this.program,e,t[e]);}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const i=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e].set(this.program,e,t[e]);}}draw(e,t,i,o,r,n,s,a,l,c,h,u,_,d,p){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(o),e.setColorMode(r),e.setCullFace(n);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(this.program,e,s[e]);d&&d.setUniforms(this.program,e,this.binderUniforms,u,{zoom:_});const f={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const i of h.get()){const o=i.vaos||(i.vaos={});(o[a]||(o[a]=new _i)).bind(e,this,l,d?d.getPaintVertexBuffers():[],c,i.vertexOffset,p||[]),m.drawElements(t,i.primitiveLength*f,m.UNSIGNED_SHORT,i.primitiveOffset*f*2);}}}function Ai(e,t){const i=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/i,r=o*(t.tileID.canonical.x+t.tileID.wrap*i),n=o*t.tileID.canonical.y;return {u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/D(t,1,e.transform.tileZoom),u_pixel_coord_upper:[r>>16,n>>16],u_pixel_coord_lower:[65535&r,65535&n]}}const zi=e.create(),Ri=(t,i,o,r,n,s,a,l,c,h,u)=>{const _=i.style.light,d=_.properties.get("position"),p=[d.x,d.y,d.z],m=e.create$1();"viewport"===_.properties.get("anchor")&&(e.fromRotation(m,-i.transform.angle),e.transformMat3(p,p,m));const f=_.properties.get("color"),g=i.transform,v={u_matrix:t,u_lightpos:p,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+o,u_opacity:r,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:zi,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:n,u_edge_radius:s};return "globe"===g.projection.name&&(v.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=u,v.u_merc_center=h,v.u_up_dir=g.projection.upVector(new e.CanonicalTileID(0,0,0),h[0]*e.EXTENT,h[1]*e.EXTENT),v.u_height_lift=l),v},Oi=(t,i,o,r,n,s,a,l,c,h,u,_)=>{const d=Ri(t,i,o,r,n,s,a,c,h,u,_),p={u_height_factor:-Math.pow(2,a.overscaledZ)/l.tileSize/8};return e.extend(d,Ai(i,l),p)},Bi=e=>({u_matrix:e}),ki=(t,i,o)=>e.extend(Bi(t),Ai(i,o)),Fi=(e,t)=>({u_matrix:e,u_world:t}),Ui=(t,i,o,r)=>e.extend(ki(t,i,o),{u_world:r}),Ni=e.create(),ji=(t,i,o,r,n,s)=>{const a=t.transform,l="globe"===a.projection.name;let c;if("map"===s.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(a.zoom,i.canonical)*a._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t]);}else c=a.calculatePixelsToTileUnitsMatrix(o);else c=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const h={u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:t.translatePosMatrix(i.projMatrix,o,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Ni,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){h.u_inv_rot_matrix=r,h.u_merc_center=n,h.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(a.zoom);const t=n[0]*e.EXTENT,o=n[1]*e.EXTENT;h.u_up_dir=a.projection.upVector(new e.CanonicalTileID(0,0,0),t,o);}return h},Gi=e=>{const t=[];return "map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Zi=(t,i,o,r)=>{const n=e.EXTENT/o.tileSize;return {u_matrix:t,u_camera_to_center_distance:i.getCameraToCenterDistance(r),u_extrude_scale:[i.pixelsToGLUnits[0]/n,i.pixelsToGLUnits[1]/n]}},Vi=(e,t,i=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}),Wi=e.create(),Xi=(t,i,o,r,n,s,a)=>{const l=t.transform,c="globe"===l.projection.name,h=c?e.globePixelsToTileUnits(l.zoom,i.canonical)*l._pixelsPerMercatorPixel:D(o,1,s),u={u_matrix:i.projMatrix,u_extrude_scale:h,u_intensity:a,u_inv_rot_matrix:Wi,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){u.u_inv_rot_matrix=r,u.u_merc_center=n,u.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=n[0]*e.EXTENT,o=n[1]*e.EXTENT;u.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,o);}return u},qi=(e,t,i,o,r,n,s)=>{const a=e.transform,l=a.calculatePixelsToTileUnitsMatrix(t);return {u_matrix:Yi(e,t,i,o),u_pixels_to_tile_units:l,u_device_pixel_ratio:n,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:r,u_texsize:Ki(i)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Hi(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:s}},$i=(e,t,i,o,r)=>{const n=e.transform;return {u_matrix:Yi(e,t,i,o),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:n.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:r,u_image:0,u_tile_units_to_pixels:Hi(t,n),u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Hi(e,t){return 1/D(e,1,t.tileZoom)}function Yi(e,t,i,o){return e.translatePosMatrix(o||t.tileID.projMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}function Ki(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const Ji=(e,t,i,o,r,n)=>{return {u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_fade_t:o.mix,u_opacity:o.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(s=r.paint.get("raster-contrast"),s>0?1/(1-s):1+s),u_spin_weights:Qi(r.paint.get("raster-hue-rotate")),u_perspective_transform:n};var s,a;};function Qi(e){e*=Math.PI/180;const t=Math.sin(e),i=Math.cos(e);return [(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}const eo=e.create(),to=(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f)=>{const g=n.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+o,u_aspect_ratio:g.width/g.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+r,u_texsize:h,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:eo,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:eo,u_up_vector:[0,-1,0]};return "globe"===f.name&&(v.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],v.u_zoom_transition=_,v.u_inv_rot_matrix=p,v.u_merc_center=d,v.u_camera_forward=g._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(g.globeMatrix,u.toUnwrapped()),v.u_tile_matrix=Float32Array.from(g.globeMatrix),v.u_up_vector=m),v},io=(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g)=>e.extend(to(t,i,o,r,n,s,a,l,c,h,_,d,p,m,f,g),{u_gamma_scale:r?n.transform.cameraToCenterDistance*Math.cos(n.terrain?0:n.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+u}),oo=(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f)=>e.extend(io(t,i,o,r,n,s,a,l,!0,c,!0,u,_,d,p,m,f),{u_texsize_icon:h,u_texture_icon:1}),ro=(e,t,i)=>({u_matrix:e,u_opacity:t,u_color:i}),no=(t,i,o,r,n)=>e.extend(function(e,t,i){const o=t.imageManager.getPattern(e.toString()),{width:r,height:n}=t.imageManager.getPixelSize(),s=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,t.transform.tileZoom)/s,l=a*(i.tileID.canonical.x+i.tileID.wrap*s),c=a*i.tileID.canonical.y;return {u_image:0,u_pattern_tl:o.tl,u_pattern_br:o.br,u_texsize:[r,n],u_pattern_size:o.displaySize,u_tile_units_to_pixels:1/D(i,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(r,o,n),{u_matrix:t,u_opacity:i}),so={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:gi,terrainDepth:gi,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ao;function lo(t,i,o,r,n,s,a){const l=t.context,c=l.gl,h=t.transform,u=t.useProgram("collisionBox"),_=[];let d=0,p=0;for(let m=0;m<r.length;m++){const f=r[m],g=i.getTile(f),v=g.getBucket(o);if(!v)continue;const x=vt(f,v,h);let y=x;0===n[0]&&0===n[1]||(y=t.translatePosMatrix(x,g,n,s));const b=a?v.textCollisionBox:v.iconCollisionBox,w=v.collisionCircleArray;if(w.length>0){const t=e.create(),i=y;e.mul(t,v.placementInvProjMatrix,h.glCoordMatrix),e.mul(t,t,v.placementViewportMatrix),_.push({circleArray:w,circleOffset:p,transform:i,invTransform:t,projection:v.getProjection()}),d+=w.length/4,p=d;}b&&(t.terrain&&t.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Zi(y,h,g,v.getProjection()),o.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,h.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]));}if(!a||!_.length)return;const m=t.useProgram("collisionCircle"),f=new e.StructArrayLayout2f1f2i16;f.resize(4*d),f._trim();let g=0;for(const e of _)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,o=e.circleArray[i+0],r=e.circleArray[i+1],n=e.circleArray[i+2],s=e.circleArray[i+3];f.emplace(g++,o,r,n,s,0),f.emplace(g++,o,r,n,s,1),f.emplace(g++,o,r,n,s,2),f.emplace(g++,o,r,n,s,3);}(!ao||ao.length<2*d)&&(ao=function(t){const i=2*t,o=new e.StructArrayLayout3ui6;o.resize(i),o._trim();for(let e=0;e<i;e++){const t=6*e;o.uint16[t+0]=4*e+0,o.uint16[t+1]=4*e+1,o.uint16[t+2]=4*e+2,o.uint16[t+3]=4*e+2,o.uint16[t+4]=4*e+3,o.uint16[t+5]=4*e+0;}return o}(d));const v=l.createIndexBuffer(ao,!0),x=l.createVertexBuffer(f,e.collisionCircleLayout.members,!0);for(const i of _){const r={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(y=h).getCameraToCenterDistance(i.projection),u_viewport_size:[y.width,y.height]};m.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,r,o.id,x,v,e.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,h.zoom);}var y;x.destroy(),v.destroy();}const co=e.create();function ho({width:t,height:i,anchor:o,textOffset:r,textScale:n},s){const{horizontalAlign:a,verticalAlign:l}=e.getAnchorAlignment(o),c=-(a-.5)*t,h=-(l-.5)*i,u=e.evaluateVariableOffset(o,r);return new e.Point((c/n+u[0])*s,(h/n+u[1])*s)}function uo(t,i,o,r,n,s,a,l,c,h,u){const _=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={},f=t.getProjection(),g=xt(l,f,s),v=s.elevation,x=f.upVectorScale(l.canonical,s.center.lat,s.worldSize).metersToTile;d.clear();for(let p=0;p<_.length;p++){const y=_.get(p),{tileAnchorX:b,tileAnchorY:w,numGlyphs:T}=y,E=y.hidden||!y.crossTileID||t.allowVerticalPlacement&&!y.placedOrientation?null:r[y.crossTileID];if(E){let r=0,_=0,p=0;if(v){const e=v?v.getAtTileOffset(l,b,w):0,[t,i,o]=f.upVector(l.canonical,b,w);r=e*t*x,_=e*i*x,p=e*o*x;}let[C,M,I,P]=ot(y.projectedAnchorX+r,y.projectedAnchorY+_,y.projectedAnchorZ+p,o?g:a);const S=rt(s.getCameraToCenterDistance(f),P);let D=n.evaluateSizeForFeature(t.textSizeData,h,y)*S/e.ONE_EM;o&&(D*=t.tilePixelRatio/c);const L=ho(E,D);o?(({x:C,y:M,z:I}=f.projectTilePoint(b+L.x,w+L.y,l.canonical)),[C,M,I]=ot(C+r,M+_,I+p,a)):(i&&L._rotate(-s.angle),C+=L.x,M+=L.y,I=0);const A=t.allowVerticalPlacement&&y.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<T;t++)e.addDynamicAttributes(d,C,M,I,A);u&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={x:C,y:M,z:I,angle:A});}else dt(T,d);}if(u){p.clear();const i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){const o=i.get(t),{numGlyphs:r}=o,n=m[t];if(o.hidden||!n)dt(r,p);else {const{x:t,y:i,z:o,angle:s}=n;for(let n=0;n<r;n++)e.addDynamicAttributes(p,t,i,o,s);}}t.icon.dynamicLayoutVertexBuffer.updateData(p);}t.text.dynamicLayoutVertexBuffer.updateData(d);}function _o(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function po(t,i,o,r,n,s,a,l,c,h,u,_){const d=t.context,p=d.gl,m=t.transform,f="map"===l,g="map"===c,v=f&&"point"!==o.layout.get("symbol-placement"),x=f&&!g&&!v,y=void 0!==o.layout.get("symbol-sort-key").constantOr(1);let b=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),T=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],E=o.layout.get("text-variable-anchor"),C="globe"===m.projection.name,M=[],I=[0,-1,0];let P=I;!C&&!m.mercatorFromTransition||f||(P=function(t){const i=t._camera.getWorldToCamera(t.worldSize,1),o=e.multiply([],i,t.globeMatrix);e.invert(o,o);const r=[0,0,0],n=[0,1,0,0];return e.transformMat4$1(n,n,o),r[0]=n[0],r[1]=n[1],r[2]=n[2],e.normalize(r,r),r}(m));for(const l of r){const r=i.getTile(l),c=r.getBucket(o);if(!c)continue;if("mercator"===c.projection.name&&C)continue;const u=n?c.text:c.icon;if(!u||c.fullyClipped||!u.segments.get().length)continue;const _=u.programConfigurations.get(o.id),d=n||c.sdfIcons,w=n?c.textSizeData:c.iconSizeData,S=g||0!==m.pitch,D=e.evaluateSizeForZoom(w,m.zoom);let L,A,z,R,O=[0,0],B=null;if(n)A=r.glyphAtlasTexture,z=p.LINEAR,L=r.glyphAtlasTexture.size,c.iconsInText&&(O=r.imageAtlasTexture.size,B=r.imageAtlasTexture,R=S||t.options.rotating||t.options.zooming||"composite"===w.kind||"camera"===w.kind?p.LINEAR:p.NEAREST);else {const e=1!==o.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;A=r.imageAtlasTexture,z=d||t.options.rotating||t.options.zooming||e||S?p.LINEAR:p.NEAREST,L=r.imageAtlasTexture.size;}const k="globe"===c.projection.name,F=k?P:I,U=k?e.globeToMercatorTransition(m.zoom):0,N=xt(l,c.getProjection(),m),j=m.calculatePixelsToTileUnitsMatrix(r),G=et(N,r.tileID.canonical,g,f,m,c.getProjection(),j),Z=t.terrain&&g&&v?e.invert(e.create(),G):co,V=it(N,r.tileID.canonical,g,f,m,c.getProjection(),j),W=E&&c.hasTextData(),X="none"!==o.layout.get("icon-text-fit")&&W&&c.hasIconData();if(v){const e=m.elevation,i=e?e.getAtTileOffsetFunc(l,m.center.lat,m.worldSize,c.getProjection()):null,o=tt(N,r.tileID.canonical,g,f,m,c.getProjection(),j);st(c,N,t,n,o,V,g,h,i,l);}const q=v||n&&E||X,$=t.translatePosMatrix(N,r,s,a),H=q?co:G,Y=t.translatePosMatrix(V,r,s,a,!0),K=c.getProjection().createInversionMatrix(m,l.canonical),J=[];t.terrainRenderModeElevated()&&g&&J.push("PITCH_WITH_MAP_TERRAIN"),k&&J.push("PROJECTION_GLOBE_VIEW"),q&&J.push("PROJECTED_POS_ON_VIEWPORT");const Q=d&&0!==o.paint.get(n?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=d?c.iconsInText?oo(w.kind,D,x,g,t,$,H,Y,L,O,l,U,T,K,F,c.getProjection()):io(w.kind,D,x,g,t,$,H,Y,n,L,!0,l,U,T,K,F,c.getProjection()):to(w.kind,D,x,g,t,$,H,Y,n,L,l,U,T,K,F,c.getProjection());const te={program:t.useProgram(_o(d,n,c),_,J),buffers:u,uniformValues:ee,atlasTexture:A,atlasTextureIcon:B,atlasInterpolation:z,atlasInterpolationIcon:R,isSDF:d,hasHalo:Q,tile:r,labelPlaneMatrixInv:Z};if(y&&c.canOverlap){b=!0;const t=u.segments.get();for(const i of t)M.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:te});}else M.push({segments:u.segments,sortKey:0,state:te});}b&&M.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of M){const i=e.state;if(t.terrain&&t.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!C,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),d.activeTexture.set(p.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,p.CLAMP_TO_EDGE),i.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),i.isSDF){const r=i.uniformValues;i.hasHalo&&(r.u_is_halo=1,mo(i.buffers,e.segments,o,t,i.program,w,u,_,r)),r.u_is_halo=0;}mo(i.buffers,e.segments,o,t,i.program,w,u,_,i.uniformValues);}}function mo(t,i,o,r,n,s,a,l,c){const h=r.context,u=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];n.draw(h,h.gl.TRIANGLES,s,a,l,e.CullFaceMode.disabled,c,o.id,t.layoutVertexBuffer,t.indexBuffer,i,o.paint,r.transform.zoom,t.programConfigurations.get(o.id),u);}function fo(t,i,o,r,n,s,a){const l=t.context.gl,c=o.paint.get("fill-pattern"),h=c&&c.constantOr(1);let u,_,d,p,m;a?(_=h&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=l.LINES):(_=h?"fillPattern":"fill",u=l.TRIANGLES);for(const f of r){const r=i.getTile(f);if(h&&!r.patternsLoaded())continue;const g=r.getBucket(o);if(!g)continue;t.prepareDrawTile();const v=g.programConfigurations.get(o.id),x=t.useProgram(_,v);h&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const y=c.constantOr(null);if(y&&r.imageAtlas){const e=r.imageAtlas.patternPositions[y.toString()];e&&v.setConstantPatternPositions(e);}const b=t.translatePosMatrix(f.projMatrix,r,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(a){p=g.indexBuffer2,m=g.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];d="fillOutlinePattern"===_&&h?Ui(b,t,r,e):Fi(b,e);}else p=g.indexBuffer,m=g.segments,d=h?ki(b,t,r):Bi(b);t.prepareDrawProgram(t.context,x,f.toUnwrapped()),x.draw(t.context,u,n,t.stencilModeForClipping(f),s,e.CullFaceMode.disabled,d,o.id,g.layoutVertexBuffer,p,m,o.paint,t.transform.zoom,v);}}function go(t,i,o,r,n,s,a){const l=t.context,c=l.gl,h=t.transform,u=o.paint.get("fill-extrusion-pattern"),_=u.constantOr(1),d=o.paint.get("fill-extrusion-opacity"),p=[o.paint.get("fill-extrusion-ambient-occlusion-intensity"),o.paint.get("fill-extrusion-ambient-occlusion-radius")],m=o.layout.get("fill-extrusion-edge-radius"),f=m>0&&!o.paint.get("fill-extrusion-rounded-roof"),g=f?0:m,v="globe"===h.projection.name?e.fillExtrusionHeightLift():0,x="globe"===h.projection.name,y=x?e.globeToMercatorTransition(h.zoom):0,b=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],w=[];x&&w.push("PROJECTION_GLOBE_VIEW"),p[0]>0&&w.push("FAUX_AO"),f&&w.push("ZERO_ROOF_RADIUS");for(const m of r){const r=i.getTile(m),f=r.getBucket(o);if(!f||f.projection.name!==h.projection.name)continue;const T=f.programConfigurations.get(o.id),E=t.useProgram(_?"fillExtrusionPattern":"fillExtrusion",T,w);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(r,E,{useMeterToDem:!0});else {if(!f.enableTerrain)continue;if(e.setupElevationDraw(r,E,{useMeterToDem:!0}),vo(l,i,m,f,o,e),!f.centroidVertexBuffer){const e=E.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0);}}}_&&(t.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),T.updatePaintBuffers());const C=u.constantOr(null);if(C&&r.imageAtlas){const e=r.imageAtlas.patternPositions[C.toString()];e&&T.setConstantPatternPositions(e);}const M=t.translatePosMatrix(m.projMatrix,r,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),I=h.projection.createInversionMatrix(h,m.canonical),P=o.paint.get("fill-extrusion-vertical-gradient"),S=_?Oi(M,t,P,d,p,g,m,r,v,y,b,I):Ri(M,t,P,d,p,g,m,v,y,b,I);t.prepareDrawProgram(l,E,m.toUnwrapped());const D=[];t.terrain&&D.push(f.centroidVertexBuffer),x&&D.push(f.layoutVertexExtBuffer),E.draw(l,l.gl.TRIANGLES,n,s,a,e.CullFaceMode.backCCW,S,o.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,o.paint,t.transform.zoom,T,D);}}function vo(t,i,o,r,n,s){const a=[t=>{let i=t.canonical.x-1,o=t.wrap;return i<0&&(i=(1<<t.canonical.z)-1,o--),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,i,t.canonical.y)},t=>{let i=t.canonical.x+1,o=t.wrap;return i===1<<t.canonical.z&&(i=0,o++),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,i,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=i.getSource().minzoom,o=e=>{const t=i.getTileByID(e);if(t&&t.hasData())return t.getBucket(n)},r=[0,-1,1];for(const i of r){if(e.overscaledZ+i<t)continue;const r=o(e.calculateScaledKey(e.overscaledZ+i));if(r)return r}},c=[0,0,0],h=(t,i)=>(c[0]=Math.min(t.min.y,i.min.y),c[1]=Math.max(t.max.y,i.max.y),c[2]=e.EXTENT-i.min.x>t.max.x?i.min.x-e.EXTENT:t.max.x,c),u=(t,i)=>(c[0]=Math.min(t.min.x,i.min.x),c[1]=Math.max(t.max.x,i.max.x),c[2]=e.EXTENT-i.min.y>t.max.y?i.min.y-e.EXTENT:t.max.y,c),_=[(e,t)=>h(e,t),(e,t)=>h(t,e),(e,t)=>u(e,t),(e,t)=>u(t,e)],d=new e.Point(0,0);let p,m,f;const g=(t,i,r,n,a)=>{const l=[[n?r:t,n?t:r,0],[n?r:i,n?i:r,0]],c=a<0?e.EXTENT+a:a,h=[n?c:(t+i)/2,n?(t+i)/2:c,0];return 0===r&&a<0||0!==r&&a>0?s.getForTilePoints(f,[h],!0,m):l.push(h),s.getForTilePoints(o,l,!0,p),Math.max(l[0][2],l[1][2],h[2])/s.exaggeration()};for(let t=0;t<4;t++){const i=(t<2?1:5)-t,n=r.borders[t];if(0===n.length)continue;const c=f=a[t](o),h=l(c);if(!(h&&h instanceof e.FillExtrusionBucket&&h.enableTerrain))continue;if(r.borderDoneWithNeighborZ[t]===h.canonical.z&&h.borderDoneWithNeighborZ[i]===r.canonical.z)continue;if(m=s.findDEMTileFor(c),!m||!m.dem)continue;if(!p){const e=s.findDEMTileFor(o);if(!e||!e.dem)return;p=e;}const u=h.borders[i];let v=0;const x=h.borderDoneWithNeighborZ[i]!==r.canonical.z;if(r.canonical.z===h.canonical.z){for(let o=0;o<n.length;o++){const s=r.featuresOnBorder[n[o]],a=s.borders[t];let l;for(;v<u.length&&(l=h.featuresOnBorder[u[v]],!(l.borders[i][1]>a[0]+3));)x&&h.encodeCentroid(void 0,l,!1),v++;if(l&&v<u.length){const o=v;let n=0;for(;!(l.borders[i][0]>a[1]-3)&&(n++,++v!==u.length);)l=h.featuresOnBorder[u[v]];if(l=h.featuresOnBorder[u[o]],s.intersectsCount()>1||l.intersectsCount()>1||1!==n){1!==n&&(v=o),r.encodeCentroid(void 0,s,!1),x&&h.encodeCentroid(void 0,l,!1);continue}const c=_[t](s,l),p=t%2?e.EXTENT-1:0;d.x=g(c[0],Math.min(e.EXTENT-1,c[1]),p,t<2,c[2]),d.y=0,r.encodeCentroid(d,s,!1),x&&h.encodeCentroid(d,l,!1);}else r.encodeCentroid(void 0,s,!1);}r.borderDoneWithNeighborZ[t]=h.canonical.z,r.needsCentroidUpdate=!0,x&&(h.borderDoneWithNeighborZ[i]=r.canonical.z,h.needsCentroidUpdate=!0);}else {for(const e of n)r.encodeCentroid(void 0,r.featuresOnBorder[e],!1);if(x){for(const e of u)h.encodeCentroid(void 0,h.featuresOnBorder[e],!1);h.borderDoneWithNeighborZ[i]=r.canonical.z,h.needsCentroidUpdate=!0;}r.borderDoneWithNeighborZ[t]=h.canonical.z,r.needsCentroidUpdate=!0;}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(t);}const xo=new e.Color(1,0,0,1),yo=new e.Color(0,1,0,1),bo=new e.Color(0,0,1,1),wo=new e.Color(1,0,1,1),To=new e.Color(0,1,1,1);function Eo(t,i,o){const r=t.context,n=t.transform,s=r.gl,a="globe"===n.projection.name,l=a?["PROJECTION_GLOBE_VIEW"]:null;let c=o.projMatrix;if(a&&e.globeToMercatorTransition(n.zoom)>0){const t=e.transitionTileAABBinECEF(o.canonical,n),i=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),n.globeMatrix,i),e.multiply(c,n.projMatrix,c);}const h=t.useProgram("debug",null,l),u=i.getTileByID(o.key);t.terrain&&t.terrain.setupElevationDraw(u,h);const _=e.DepthMode.disabled,d=e.StencilMode.disabled,p=t.colorModeForRenderPass(),m="$debug";r.activeTexture.set(s.TEXTURE0),t.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),a?u._makeGlobeTileDebugBuffers(t.context,n):u._makeDebugTileBoundsBuffers(t.context,n.projection);const f=u._tileDebugBuffer||t.debugBuffer,g=u._tileDebugIndexBuffer||t.debugIndexBuffer,v=u._tileDebugSegments||t.debugSegments;h.draw(r,s.LINE_STRIP,_,d,p,e.CullFaceMode.disabled,Vi(c,e.Color.red),m,f,g,v,null,null,null,[u._globeTileDebugBorderBuffer]);const x=u.latestRawTileData,y=Math.floor((x&&x.byteLength||0)/1024),b=i.getTile(o).tileSize,w=512/Math.min(b,512)*(o.overscaledZ/n.zoom)*.5;let T=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(T+=` => ${o.overscaledZ}`),T+=` ${y}kb`,function(e,t){e.initDebugOverlayCanvas();const i=e.debugOverlayCanvas,o=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE);}(t,T);const E=u._tileDebugTextBuffer||t.debugBuffer,C=u._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,M=u._tileDebugTextSegments||t.debugSegments;h.draw(r,s.TRIANGLES,_,d,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Vi(c,e.Color.transparent,w),m,E,C,M,null,null,null,[u._globeTileDebugTextBuffer]);}function Co(e,t,i,o){Io(e,0,t+i/2,e.transform.width,i,o);}function Mo(e,t,i,o){Io(e,t-i/2,0,i,e.transform.height,o);}function Io(t,i,o,r,n,s){const a=t.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio),a.clear({color:s}),l.disable(l.SCISSOR_TEST);}const Po=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:So}=Po;function Do(e,t,i,o){e.emplaceBack(t,i,o);}class Lo{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Do(this.vertexArray,-1,-1,1),Do(this.vertexArray,1,-1,1),Do(this.vertexArray,-1,1,1),Do(this.vertexArray,1,1,1),Do(this.vertexArray,-1,-1,-1),Do(this.vertexArray,1,-1,-1),Do(this.vertexArray,-1,1,-1),Do(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,So),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12);}}function Ao(t,i,o,r,n,s){const a=t.gl,l=i.paint.get("sky-atmosphere-color"),c=i.paint.get("sky-atmosphere-halo-color"),h=i.paint.get("sky-atmosphere-sun-intensity"),u=((e,t,i,o,r)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:i,u_color_tint_r:[o.r,o.g,o.b,o.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),r),n,h,l,c);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+s,i.skyboxTexture,0),o.draw(t,a.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,u,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment);}const zo=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ro{constructor(t){const i=new e.StructArrayLayout5f20;i.emplaceBack(-1,1,1,0,0),i.emplaceBack(1,1,1,1,0),i.emplaceBack(1,-1,1,1,1),i.emplaceBack(-1,-1,1,0,1);const o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(i,zo.members),this.indexBuffer=t.createIndexBuffer(o),this.segments=e.SegmentVector.simpleSegment(0,0,4,2);}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy();}}const Oo={symbol:function(t,i,o,r,n){if("translucent"!==t.renderPass)return;const s=e.StencilMode.disabled,a=t.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(t,i,o,r,n,s,a){const l=i.transform,c="map"===n,h="map"===s;for(const i of t){const t=r.getTile(i),n=t.getBucket(o);if(!n||!n.text||!n.text.segments.get().length)continue;const s=e.evaluateSizeForZoom(n.textSizeData,l.zoom),u=xt(i,n.getProjection(),l),_=l.calculatePixelsToTileUnitsMatrix(t),d=et(u,t.tileID.canonical,h,c,l,n.getProjection(),_),p="none"!==o.layout.get("icon-text-fit")&&n.hasIconData();if(s){const o=Math.pow(2,l.zoom-t.tileID.overscaledZ);uo(n,c,h,a,e.symbolSize,l,d,i,o,s,p);}}}(r,t,o,i,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),n),0!==o.paint.get("icon-opacity").constantOr(1)&&po(t,i,o,r,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),s,a),0!==o.paint.get("text-opacity").constantOr(1)&&po(t,i,o,r,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),s,a),i.map.showCollisionBoxes&&(lo(t,i,o,r,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),lo(t,i,o,r,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1));},circle:function(t,i,o,r){if("translucent"!==t.renderPass)return;const n=o.paint.get("circle-opacity"),s=o.paint.get("circle-stroke-width"),a=o.paint.get("circle-stroke-opacity"),l=void 0!==o.layout.get("circle-sort-key").constantOr(1);if(0===n.constantOr(1)&&(0===s.constantOr(1)||0===a.constantOr(1)))return;const c=t.context,h=c.gl,u=t.transform,_=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,p=t.colorModeForRenderPass(),m="globe"===u.projection.name,f=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],g=[];for(let n=0;n<r.length;n++){const s=r[n],a=i.getTile(s),c=a.getBucket(o);if(!c||c.projection.name!==u.projection.name)continue;const h=c.programConfigurations.get(o.id),_=Gi(o);m&&_.push("PROJECTION_GLOBE_VIEW");const d=t.useProgram("circle",h,_),p=c.layoutVertexBuffer,v=c.globeExtVertexBuffer,x=c.indexBuffer,y=u.projection.createInversionMatrix(u,s.canonical),b={programConfiguration:h,program:d,layoutVertexBuffer:p,globeExtVertexBuffer:v,indexBuffer:x,uniformValues:ji(t,s,a,y,f,o),tile:a};if(l){const t=c.segments.get();for(const i of t)g.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:b});}else g.push({segments:c.segments,sortKey:0,state:b});}l&&g.sort(((e,t)=>e.sortKey-t.sortKey));const v={useDepthForOcclusion:!m};for(const i of g){const{programConfiguration:r,program:n,layoutVertexBuffer:s,globeExtVertexBuffer:a,indexBuffer:l,uniformValues:m,tile:f}=i.state,g=i.segments;t.terrain&&t.terrain.setupElevationDraw(f,n,v),t.prepareDrawProgram(c,n,f.tileID.toUnwrapped()),n.draw(c,h.TRIANGLES,_,d,p,e.CullFaceMode.disabled,m,o.id,s,l,g,o.paint,u.zoom,r,[a]);}},heatmap:function(t,i,o,r){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const n=t.context,s=n.gl,a=e.StencilMode.disabled,l=new e.ColorMode([s.ONE,s.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i,o){const r=e.gl,n=t.width*o,s=t.height*o;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,n,s]);let a=i.heatmapFbo;if(!a||a&&(a.width!==n||a.height!==s)){a&&a.destroy();const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),a=i.heatmapFbo=e.createFramebuffer(n,s,!1),function(e,t,i,o,r,n){const s=e.gl;s.texImage2D(s.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?s.RGBA16F:s.RGBA,r,n,0,s.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?s.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),o.colorAttachment.set(i);}(e,0,t,a,n,s);}else r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer);}(n,t,o,"globe"===t.transform.projection.name?.5:.25),n.clear({color:e.Color.transparent});const c=t.transform,h="globe"===c.projection.name,u=h?["PROJECTION_GLOBE_VIEW"]:null,_=h?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,d=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let p=0;p<r.length;p++){const m=r[p];if(i.hasRenderableParent(m))continue;const f=i.getTile(m),g=f.getBucket(o);if(!g||g.projection.name!==c.projection.name)continue;const v=g.programConfigurations.get(o.id),x=t.useProgram("heatmap",v,u),{zoom:y}=t.transform;t.terrain&&t.terrain.setupElevationDraw(f,x),t.prepareDrawProgram(n,x,m.toUnwrapped());const b=c.projection.createInversionMatrix(c,m.canonical);x.draw(n,s.TRIANGLES,e.DepthMode.disabled,a,l,_,Xi(t,m,f,b,d,y,o.paint.get("heatmap-intensity")),o.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,o.paint,t.transform.zoom,v,h?[g.globeExtVertexBuffer]:null);}n.viewport.set([0,0,t.width,t.height]);}else "translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){const o=t.context,r=o.gl,n=i.heatmapFbo;if(!n)return;o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),o.activeTexture.set(r.TEXTURE1);let s=i.colorRampTexture;s||(s=i.colorRampTexture=new e.Texture(o,i.colorRamp,r.RGBA)),s.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(o,r.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,i,o)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom);}(t,o));},line:function(t,i,o,r){if("translucent"!==t.renderPass)return;const n=o.paint.get("line-opacity"),s=o.paint.get("line-width");if(0===n.constantOr(1)||0===s.constantOr(1))return;const a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,h=o.paint.get("line-dasharray"),u=h.constantOr(1),_=o.layout.get("line-cap"),d=o.paint.get("line-pattern"),p=d.constantOr(1),m=o.paint.get("line-gradient"),f=p?"linePattern":"line",g=t.context,v=g.gl,x=(e=>{const t=[];Ki(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const i=e.paint.get("line-trim-offset");0===i[0]&&0===i[1]||t.push("RENDER_LINE_TRIM_OFFSET");const o=e.paint.get("line-pattern").constantOr(1),r=1!==e.paint.get("line-opacity").constantOr(1);return !o&&r&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(o);let y=x.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(y=!1);for(const n of r){const r=i.getTile(n);if(p&&!r.patternsLoaded())continue;const s=r.getBucket(o);if(!s)continue;t.prepareDrawTile();const b=s.programConfigurations.get(o.id),w=t.useProgram(f,b,x),T=d.constantOr(null);if(T&&r.imageAtlas){const e=r.imageAtlas.patternPositions[T.toString()];e&&b.setConstantPatternPositions(e);}const E=h.constantOr(null),C=_.constantOr(null);if(!p&&E&&C&&r.lineAtlas){const e=r.lineAtlas.getDash(E,C);e&&b.setConstantPatternPositions(e);}let[M,I]=o.paint.get("line-trim-offset");if("round"===C||"square"===C){const e=1;M!==I&&(0===M&&(M-=e),1===I&&(I+=e));}const P=t.terrain?n.projMatrix:null,S=p?$i(t,r,o,P,c):qi(t,r,o,P,s.lineClipsArray.length,c,[M,I]);if(m){const r=s.gradients[o.id];let a=r.texture;if(o.gradientVersion!==r.version){let l=256;if(o.stepInterpolant){const o=i.getSource().maxzoom,r=n.canonical.z===o?Math.ceil(1<<t.transform.maxZoom-n.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(s.maxLineLength/e.EXTENT*1024*r),256,g.maxTextureSize);}r.gradient=e.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:r.gradient||void 0,clips:s.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new e.Texture(g,r.gradient,v.RGBA),r.version=o.gradientVersion,a=r.texture;}g.activeTexture.set(v.TEXTURE1),a.bind(o.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE);}u&&(g.activeTexture.set(v.TEXTURE0),r.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),b.updatePaintBuffers()),p&&(g.activeTexture.set(v.TEXTURE0),r.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),b.updatePaintBuffers()),t.prepareDrawProgram(g,w,n.toUnwrapped());const D=i=>{w.draw(g,v.TRIANGLES,a,i,l,e.CullFaceMode.disabled,S,o.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,o.paint,t.transform.zoom,b,[s.layoutVertexBuffer2]);};if(y){const i=t.stencilModeForClipping(n).ref;0===i&&t.terrain&&g.clear({stencil:0});const o={func:v.EQUAL,mask:255};S.u_alpha_discard_threshold=.8,D(new e.StencilMode(o,i,255,v.KEEP,v.KEEP,v.INVERT)),S.u_alpha_discard_threshold=0,D(new e.StencilMode(o,i,255,v.KEEP,v.KEEP,v.KEEP));}else D(t.stencilModeForClipping(n));}y&&(t.resetStencilClippingMasks(),t.terrain&&g.clear({stencil:0}));},fill:function(t,i,o,r){const n=o.paint.get("fill-color"),s=o.paint.get("fill-opacity");if(0===s.constantOr(1))return;const a=t.colorModeForRenderPass(),l=o.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===n.constantOr(e.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const n=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);fo(t,i,o,r,n,a,!1);}if("translucent"===t.renderPass&&o.paint.get("fill-antialias")){const n=t.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);fo(t,i,o,r,n,a,!0);}},"fill-extrusion":function(t,i,o,r){const n=o.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){const s=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==n||o.paint.get("fill-extrusion-pattern").constantOr(1))go(t,i,o,r,s,e.StencilMode.disabled,e.ColorMode.disabled),go(t,i,o,r,s,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else {const n=t.colorModeForRenderPass();go(t,i,o,r,s,e.StencilMode.disabled,n);}}},hillshade:function(t,i,o,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const n=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),a=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,h]="translucent"!==t.renderPass||l?[{},r]:t.stencilConfigForOverlap(r);for(const r of h){const n=i.getTile(r);if(n.needsHillshadePrepare&&"offscreen"===t.renderPass)fi(t,n,o,s,e.StencilMode.disabled,a);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(r):c[r.overscaledZ];pi(t,r,n,o,s,e,a);}}n.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks();},raster:function(t,i,o,r,n,s){if("translucent"!==t.renderPass)return;if(0===o.paint.get("raster-opacity"))return;if(!r.length)return;const a=t.context,l=a.gl,c=i.getSource(),h=t.useProgram("raster"),u=t.colorModeForRenderPass(),_=t.terrain&&t.terrain.renderingToTexture,[d,p]=c instanceof Pe||_?[{},r]:t.stencilConfigForOverlap(r),m=p[p.length-1].overscaledZ,f=!t.options.moving;for(const r of p){const n=_?e.DepthMode.disabled:t.depthModeForSublayer(r.overscaledZ-m,1===o.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),p=r.toUnwrapped(),g=i.getTile(r);if(_&&(!g||!g.hasData()))continue;const v=_?r.projMatrix:t.transform.calculateProjMatrix(p,f),x=t.terrain&&_?t.terrain.stencilModeForRTTOverlap(r):d[r.overscaledZ],y=s?0:o.paint.get("raster-fade-duration");g.registerFadeDuration(y);const b=i.findLoadedParent(r,0),w=Mi(g,b,i,t.transform,y);let T,E;t.terrain&&t.terrain.prepareDrawTile();const C="nearest"===o.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;a.activeTexture.set(l.TEXTURE0),g.texture.bind(C,l.CLAMP_TO_EDGE),a.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(C,l.CLAMP_TO_EDGE),T=Math.pow(2,b.tileID.overscaledZ-g.tileID.overscaledZ),E=[g.tileID.canonical.x*T%1,g.tileID.canonical.y*T%1]):g.texture.bind(C,l.CLAMP_TO_EDGE),g.texture.useMipmap&&a.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax);const M=Ji(v,E||[0,0],T||1,w,o,c instanceof Pe?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(a,h,p),c instanceof Pe)c.boundsBuffer&&c.boundsSegments&&h.draw(a,l.TRIANGLES,n,e.StencilMode.disabled,u,e.CullFaceMode.disabled,M,o.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else {const{tileBoundsBuffer:i,tileBoundsIndexBuffer:r,tileBoundsSegments:s}=t.getTileBoundsBuffers(g);h.draw(a,l.TRIANGLES,n,x,u,e.CullFaceMode.disabled,M,o.id,i,r,s);}}t.resetStencilClippingMasks();},background:function(t,i,o,r){const n=o.paint.get("background-color"),s=o.paint.get("background-opacity");if(0===s)return;const a=t.context,l=a.gl,c=t.transform,h=c.tileSize,u=o.paint.get("background-pattern");if(t.isPatternMissing(u))return;const _=!u&&1===n.a&&1===s&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==_)return;const d=e.StencilMode.disabled,p=t.depthModeForSublayer(0,"opaque"===_?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background");let g,v=r;v||(g=t.getBackgroundTiles(),v=Object.values(g).map((e=>e.tileID))),u&&(a.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const _ of v){const v=_.toUnwrapped(),x=r?_.projMatrix:t.transform.calculateProjMatrix(v);t.prepareDrawTile();const y=i?i.getTile(_):g?g[_.key]:new e.Tile(_,h,c.zoom,t),b=u?no(x,s,t,u,{tileID:_,tileSize:h}):ro(x,s,n);t.prepareDrawProgram(a,f,v);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:T,tileBoundsSegments:E}=t.getTileBoundsBuffers(y);f.draw(a,l.TRIANGLES,p,d,m,e.CullFaceMode.disabled,b,o.id,w,T,E);}},sky:function(t,i,o){const r=t.transform,n="mercator"===r.projection.name||"globe"===r.projection.name?1:e.smoothstep(7,8,r.zoom),s=o.paint.get("sky-opacity")*n;if(0===s)return;const a=t.context,l=o.paint.get("sky-type"),c=new e.DepthMode(a.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),h=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?o.needsSkyboxCapture(t)&&(function(t,i,o,r){const n=t.context,s=n.gl;let a=i.skyboxFbo;if(!a){a=i.skyboxFbo=n.createFramebuffer(32,32,!1),i.skyboxGeometry=new Lo(n),i.skyboxTexture=n.gl.createTexture(),s.bindTexture(s.TEXTURE_CUBE_MAP,i.skyboxTexture),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR);for(let e=0;e<6;++e)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,s.RGBA,32,32,0,s.RGBA,s.UNSIGNED_BYTE,null);}n.bindFramebuffer.set(a.framebuffer),n.viewport.set([0,0,32,32]);const l=i.getCenter(t,!0),c=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),Ao(n,i,c,h,l,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),Ao(n,i,c,h,l,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),Ao(n,i,c,h,l,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),Ao(n,i,c,h,l,3),e.identity(h),Ao(n,i,c,h,l,4),e.identity(h),e.rotateY(h,h,Math.PI),Ao(n,i,c,h,l,5),n.viewport.set([0,0,t.width,t.height]);}(t,o),o.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,i,o,r,n){const s=t.context,a=s.gl,l=t.transform,c=t.useProgram("skybox");s.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,i.skyboxTexture);const h=((e,t,i,o,r)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:o,u_temporal_offset:r}))(l.skyboxMatrix,i.getCenter(t,!1),0,r,n);t.prepareDrawProgram(s,c),c.draw(s,a.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment);}(t,o,c,s,h):"gradient"===l&&"sky"===t.renderPass&&function(t,i,o,r,n){const s=t.context,a=s.gl,l=t.transform,c=t.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new Lo(s)),s.activeTexture.set(a.TEXTURE0);let h=i.colorRampTexture;h||(h=i.colorRampTexture=new e.Texture(s,i.colorRamp,a.RGBA)),h.bind(a.LINEAR,a.CLAMP_TO_EDGE);const u=((t,i,o,r,n)=>({u_matrix:t,u_color_ramp:0,u_center_direction:i,u_radius:e.degToRad(o),u_opacity:r,u_temporal_offset:n}))(l.skyboxMatrix,i.getCenter(t,!1),i.paint.get("sky-gradient-radius"),r,n);t.prepareDrawProgram(s,c),c.draw(s,a.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment);}(t,o,c,s,h);},debug:function(e,t,i){for(let o=0;o<i.length;o++)Eo(e,t,i[o]);},custom:function(t,i,o,r){const n=t.context,s=o.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&o.isLayerDraped()){if("offscreen"===t.renderPass){const i=s.prerender;if(i){if(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const o=t.transform.pointMerc;i.call(s,n.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[o.x,o.y],t.transform.pixelsPerMeterRatio);}else i.call(s,n.gl,t.transform.customLayerMatrix());n.setDirty(),t.setBaseState();}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const i=s.renderToTile;if(i){const o=r[0].canonical,a=new e.MercatorCoordinate(o.x+r[0].wrap*(1<<o.z),o.y,o.z);n.setDepthMode(e.DepthMode.disabled),n.setStencilMode(e.StencilMode.disabled),n.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),i.call(s,n.gl,a),n.setDirty(),t.setBaseState();}return}t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(e.StencilMode.disabled);const i="3d"===s.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(n.setDepthMode(i),"globe"===t.transform.projection.name){const i=t.transform.pointMerc;s.render(n.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[i.x,i.y],t.transform.pixelsPerMeterRatio);}else s.render(n.gl,t.transform.customLayerMatrix());n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null);}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.");}};class Bo{constructor(t,i,o=!1){this.context=new Ee(t,o),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={};}updateTerrain(e,t){const i=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Di(this,e));const o=this._terrain;this.transform.elevation=i?o:null,o.update(e,this.transform,t);}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[i,o]=t.getFovAdjustedRange(this.transform._fov);if(i>o)return void(this.transform.fogCullDistSq=null);const r=i+.78*(o-i);this.transform.fogCullDistSq=r*r;}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,i){if(this.width=t*e.exported.devicePixelRatio,this.height=i*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize();}setup(){const t=this.context,i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(e.EXTENT,0),o.emplaceBack(0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const r=new e.StructArrayLayout2i4;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(-1,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const n=new e.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(e.EXTENT,0,e.EXTENT,0),n.emplaceBack(0,e.EXTENT,0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(n,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s);const a=new e.StructArrayLayout1ui2;for(const e of [0,1,3,2,0])a.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Ro(this.context);}getMercatorTileBoundsBuffers(){return {tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,i.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Ci(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments);}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={});}_renderTileClippingMasks(t,i,o){if(!i||this.currentStencilSource===i.id||!t.isTileClipped()||!o||0===o.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of o)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=i.id;const r=this.context,n=r.gl;this.nextStencilID+o.length>256&&this.clearStencil(),r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);const s=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of o){const o=i.getTile(t),a=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:h}=this.getTileBoundsBuffers(o);s.draw(r,n.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:n.ALWAYS,mask:0},a,255,n.KEEP,n.KEEP,n.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Ci(t.projMatrix),"$clipping",l,c,h);}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,i=this.context.gl;return new e.StencilMode({func:i.NOTEQUAL,mask:255},t,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const i=this.context.gl;return new e.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(t){const i=this.context.gl,o=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),r=o[o.length-1].overscaledZ,n=o[0].overscaledZ-r+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const t={};for(let o=0;o<n;o++)t[o+r]=new e.StencilMode({func:i.GEQUAL,mask:255},o+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=n,[t,o]}return [{[r]:e.StencilMode.disabled},o]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(i,i,i,0),[!0,!0,!0,!0])}return "opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,i,o){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(o||this.context.gl.LEQUAL,i,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,i){this.style=t,this.options=i,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const o=this.style.order,r=this.style._sourceCaches;for(const e in r){const t=r[e];t.used&&t.prepare(this.context);}const n={},s={},a={};for(const e in r){const t=r[e];n[e]=t.getVisibleCoordinates(),s[e]=n[e].slice().reverse(),a[e]=t.getVisibleCoordinates(!0).reverse();}this.opaquePassCutoff=1/0;for(let e=0;e<o.length;e++)if(this.style._layers[o[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of o){const i=this.style._layers[e],o=t._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;const r=o?s[o.id]:void 0;("custom"===i.type||i.isSky()||r&&r.length)&&this.renderLayer(this,o,i,r);}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);if(e.isSky())continue;const r=i?s[i.id]:void 0;this._renderTileClippingMasks(e,i,r),this.renderLayer(this,i,e,r);}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,i){const o=t.context,r=o.gl,n=t.transform,s=new e.DepthMode(r.LEQUAL,e.DepthMode.ReadOnly,[0,1]),a=t.useProgram("globeAtmosphere",null,"globe"===n.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(n.zoom),c=i.properties.get("color").toArray01(),h=i.properties.get("high-color").toArray01(),u=i.properties.get("space-color").toArray01PremultipliedAlpha(),_=e.identity$1([]);e.rotateY$1(_,_,-e.degToRad(n._center.lng)),e.rotateX$1(_,_,e.degToRad(n._center.lat)),e.rotateZ$1(_,_,n.angle),e.rotateX$1(_,_,-n._pitch);const d=e.fromQuat(new Float32Array(16),_),p=e.mapValue(i.properties.get("star-intensity"),0,1,0,.25),m=5e-4,f=e.mapValue(i.properties.get("horizon-blend"),0,1,m,.25),g=e.globeUseCustomAntiAliasing(t,o,n)&&f===m?n.worldSize/(2*Math.PI*1.025)-1:n.globeRadius,v=t.frameCounter/1e3%1,x=e.length(n.globeCenterInViewSpace),y=Math.sqrt(Math.pow(x,2)-Math.pow(g,2)),b=Math.acos(y/x),w=((t,i,o,r,n,s,a,l,c,h,u,_,d,p)=>({u_frustum_tl:t,u_frustum_tr:i,u_frustum_br:o,u_frustum_bl:r,u_horizon:n,u_transition:s,u_fadeout_range:a,u_color:l,u_high_color:c,u_space_color:h,u_star_intensity:u,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:_,u_horizon_angle:d,u_rotation_matrix:p}))(n.frustumCorners.TL,n.frustumCorners.TR,n.frustumCorners.BR,n.frustumCorners.BL,n.frustumCorners.horizon,l,f,c,h,u,p,v,b,d);t.prepareDrawProgram(o,a);const T=t.atmosphereBuffer;T&&a.draw(o,r.TRIANGLES,s,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",T.vertexBuffer,T.indexBuffer,T.segments);}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,i,e,i?s[i.id]:void 0);}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<o.length;){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const r=i?("symbol"===e.type?a:s)[i.id]:void 0;this._renderTileClippingMasks(e,i,i?n[i.id]:void 0),this.renderLayer(this,i,e,r),++this.currentLayer;}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let i=null;e.values(this.style._layers).forEach((e=>{const o=t._getLayerSourceCache(e);o&&!e.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<o.getSource().maxzoom)&&(i=o);})),i&&this.options.showTileBoundaries&&Oo.debug(this,i,i.getVisibleCoordinates());}this.options.showPadding&&function(e){const t=e.transform.padding;Co(e,e.transform.height-(t.top||0),3,xo),Co(e,t.bottom||0,3,yo),Mo(e,t.left||0,3,bo),Mo(e,e.transform.width-(t.right||0),3,wo);const i=e.transform.centerPoint;!function(e,t,i,o){Io(e,t-1,i-10,2,20,o),Io(e,t-10,i-1,20,2,o);}(e,i.x,e.transform.height-i.y,To);}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy());}renderLayer(e,t,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||o&&o.length)&&(this.id=i.id,this.gpuTimingStart(i),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(i.type)||e.terrain&&"custom"===i.type)&&Oo[i.type](e,t,i,o,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd());}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query);}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t);}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT);}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT);}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const i in e){const o=e[i],r=this.context.extTimerQuery,n=r.getQueryObjectEXT(o.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(o.query),t[i]=n;}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let i=0;for(const o of e)i+=t.getQueryObjectEXT(o,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(o);return i}translatePosMatrix(t,i,o,r,n){if(!o[0]&&!o[1])return t;const s=n?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(s){const e=Math.sin(s),t=Math.cos(s);o=[o[0]*t-o[1]*e,o[0]*e+o[1]*t];}const a=[n?o[0]:D(i,o[0],this.transform.zoom),n?o[1]:D(i,o[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,a),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e];}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),i=this.style&&this.style.fog,o=[];return this.terrainRenderModeElevated()&&o.push("TERRAIN"),"globe"===this.transform.projection.name&&o.push("GLOBE"),t&&o.push("ZERO_EXAGGERATION"),i&&!e&&0!==i.getOpacity(this.transform.pitch)&&o.push("FOG"),e&&o.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&o.push("OVERDRAW_INSPECTOR"),o}useProgram(e,t,i){this.cache=this.cache||{};const o=i||[],r=this.currentGlobalDefines().concat(o),n=Li.cacheKey(ci[e],e,r,t);return this.cache[n]||(this.cache[n]=new Li(this.context,e,ci[e],t,so[e],r)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault();}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD);}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA));}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy();}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile();}prepareDrawProgram(t,i,o){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const n=r.getOpacity(this.transform.pitch),s=((t,i,o,r,n,s,a,l,c,h,u)=>{const _=t.transform,d=i.properties.get("color").toArray01();d[3]=r;const p=t.frameCounter/1e3%1;return {u_fog_matrix:o?_.calculateFogTileMatrix(o):t.identityMat,u_fog_range:i.getFovAdjustedRange(_._fov),u_fog_color:d,u_fog_horizon_blend:i.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:n,u_frustum_tr:s,u_frustum_br:a,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:h,u_viewport:u,u_globe_transition:e.globeToMercatorTransition(_.zoom),u_is_globe:+("globe"===_.projection.name)}})(this,r,o,n,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);i.setFogUniformValues(t,s);}}setTileLoadedFlag(e){this.tileLoaded=e;}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1);}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return {canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return !1;const e=this.style&&this.style.fog;return !!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,i=this._backgroundTiles={},o=this.transform.coveringTiles({tileSize:512});for(const r of o)i[r.key]=t[r.key]||new e.Tile(r,512,this.transform.tileZoom,this);return i}clearBackgroundTiles(){this._backgroundTiles={};}}class ko{constructor(e=0,t=0,i=0,o=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(o)||o<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=o;}interpolate(t,i,o){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,o)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,o)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,o)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,o)),this}getCenter(t,i){const o=e.clamp((this.left+t-this.right)/2,0,t),r=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.Point(o,r)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new ko(this.top,this.bottom,this.left,this.right)}toJSON(){return {top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fo(t,i){const o=e.getColumn(t,3);e.fromQuat(t,i),e.setColumn(t,3,o);}function Uo(t,i){const o=e.identity$1([]);return e.rotateZ$1(o,o,-i),e.rotateX$1(o,o,-t),o}function No(t,i){const o=[t[0],t[1],0],r=[i[0],i[1],0];if(e.length(o)>=1e-15){const t=e.normalize([],o);e.scale$2(r,t,e.dot(r,t)),i[0]=r[0],i[1]=r[1];}const n=e.cross([],i,t);if(e.len(n)<1e-15)return null;const s=Math.atan2(-n[1],n[0]);return Uo(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}class jo{constructor(e,t){this.position=e,this.orientation=t;}get position(){return this._position}set position(t){if(t){const i=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(i.x=e.wrap(i.x,0,1)),this._position=i;}else this._position=null;}lookAtPoint(t,i){if(this.orientation=null,!this.position)return;const o=this.position,r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,n=e.MercatorCoordinate.fromLngLat(t,r),s=[n.x-o.x,n.y-o.y,n.z-o.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=No(s,i);}setPitchBearing(t,i){this.orientation=Uo(e.degToRad(t),e.degToRad(-i));}}class Go{constructor(t,i){this._transform=e.identity([]),this.orientation=i,this.position=t;}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return [t[0],t[1],t[2]]}set position(t){var i;t&&e.setColumn(this._transform,3,[(i=t)[0],i[1],i[2],1]);}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Fo(this._transform,this._orientation);}getPitchBearing(){const e=this.forward(),t=this.right();return {bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Uo(e,t),Fo(this._transform,this._orientation);}forward(){const t=e.getColumn(this._transform,2);return [-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return [-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return [t[0],t[1],t[2]]}getCameraToWorld(t,i){const o=new Float64Array(16);return e.invert(o,this.getWorldToCamera(t,i)),o}getWorldToCameraPosition(t,i,o){const r=this.position;e.scale$2(r,r,-t);const n=new Float64Array(16);return e.fromScaling(n,[o,o,o]),e.translate(n,n,r),n[10]*=i,n}getWorldToCamera(t,i){const o=new Float64Array(16),r=new Float64Array(4),n=this.position;return e.conjugate(r,this._orientation),e.scale$2(n,n,-t),e.fromQuat(o,r),e.translate(o,o,n),o[1]*=-1,o[5]*=-1,o[9]*=-1,o[13]*=-1,o[8]*=i,o[9]*=i,o[10]*=i,o[11]*=i,o}getCameraToClipPerspective(t,i,o,r){const n=new Float64Array(16);return e.perspective(n,t,i,o,r),n}getDistanceToElevation(t,i=!1){const o=0===t?0:e.mercatorZfromAltitude(t,i?e.latFromMercatorY(this.position[1]):this.position[1]),r=this.forward();return (o-this.position[2])/r[2]}clone(){return new Go([...this.position],[...this.orientation])}}function Zo(t,i){const o=Wo(t.projection,t.zoom,t.width,t.height),r=function(t,i,o,r,n){const s=new e.LngLat(o.lng-180*Xo,o.lat),a=new e.LngLat(o.lng+180*Xo,o.lat),l=t.project(s.lng,s.lat),c=t.project(a.lng,a.lat),h=-Math.atan2(c.y-l.y,c.x-l.x),u=e.MercatorCoordinate.fromLngLat(o);u.y=e.clamp(u.y,-1+Xo,1-Xo);const _=u.toLngLat(),d=t.project(_.lng,_.lat),p=e.MercatorCoordinate.fromLngLat(_);p.x+=Xo;const m=p.toLngLat(),f=t.project(m.lng,m.lat),g=$o(f.x-d.x,f.y-d.y,h),v=e.MercatorCoordinate.fromLngLat(_);v.y+=Xo;const x=v.toLngLat(),y=t.project(x.lng,x.lat),b=$o(y.x-d.x,y.y-d.y,h),w=Math.abs(g.x)/Math.abs(b.y),T=e.identity([]);e.rotateZ(T,T,-h*(1-(n?0:r)));const E=e.identity([]);return e.scale(E,E,[1,1-(1-w)*r,1]),E[4]=-b.x/b.y*r,e.rotateZ(E,E,h),e.multiply(E,T,E),E}(t.projection,0,t.center,o,i),n=Vo(t);return e.scale(r,r,[n,n,1]),r}function Vo(t){const i=t.projection,o=Wo(t.projection,t.zoom,t.width,t.height),r=qo(i,t.center),n=qo(i,e.LngLat.convert(i.center));return Math.pow(2,r*o+(1-o)*n)}function Wo(t,i,o,r,n=1/0){const s=t.range;if(!s)return 0;const a=Math.min(n,Math.max(o,r)),l=Math.log(a/1024)/Math.LN2;return e.smoothstep(s[0]+l,s[1]+l,i)}const Xo=1/4e4;function qo(t,i){const o=e.clamp(i.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=new e.LngLat(i.lng-180*Xo,o),n=new e.LngLat(i.lng+180*Xo,o),s=t.project(r.lng,o),a=t.project(n.lng,o),l=e.MercatorCoordinate.fromLngLat(r),c=e.MercatorCoordinate.fromLngLat(n),h=a.x-s.x,u=a.y-s.y,_=c.x-l.x,d=c.y-l.y,p=Math.sqrt((_*_+d*d)/(h*h+u*u));return Math.log(p)/Math.LN2}function $o(e,t,i){const o=Math.cos(i),r=Math.sin(i);return {x:e*o-t*r,y:e*r+t*o}}class Ho{constructor(t,i,o,r,n,s,a){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==o?0:o,this._maxPitch=null==r?60:r,this.setProjection(s),this.setMaxBounds(a),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ko,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Go,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1;}clone(){const e=new Ho(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices());}updateElevation(e,t=!1){const i=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||i)&&this._updateCameraOnTerrain(),(e||i)&&this._constrainCamera(t),this._calcMatrices();}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const o=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const r=!t(o,this.getProjection());return r&&this._calcMatrices(),this.mercatorFromTransition=!1,r}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const i=t!==this.projection.name;return i&&this._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e));}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e));}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e));}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e));}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e;}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e;}get rotation(){return -this.angle/Math.PI*180}set rotation(t){const i=-t*Math.PI/180;var o;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=(o=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(o[1]=0,o[2]=0),o[0]=1,o[3]=1,o),function(e,t,i){var o=t[0],r=t[1],n=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);e[0]=o*l+n*a,e[1]=r*l+s*a,e[2]=o*-a+n*l,e[3]=r*-a+s*l;}(this.rotationMatrix,this.rotationMatrix,this.angle));}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices());}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices());}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={};}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices());}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom;}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom();}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize));}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,i=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],o=this.horizonLineFromTop();let r=0,n=0;for(let s=0;s<i.length;s++){const a=new e.Point(i[s][0]*this.width,o+i[s][1]*(this.height-o)),l=t.pointCoordinate(a);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*c,n+=c;}return 0===n?NaN:r/n}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices());}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),i=this.pixelsPerMeter/this.worldSize*t,o=this._mercatorZfromZoom(e),r=this._mercatorZfromZoom(this._maxZoom),n=Math.max(o-i,r);this._setZoom(this._zoomFromMercatorZ(n));}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices());}computeZoomRelativeTo(t){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let o;o=t.z<this._camera.position[2]?[i.x,i.y,i.z]:[t.x,t.y,t.z];const r=e.length(e.sub([],this._camera.position,o));return e.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let i=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(t.orientation)),t.position){const o=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(o,this._camera.position)||(this._setCameraPosition(o),i=!0);}i&&(this._updateStateFromCamera(),this.recenterOnTerrain());}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,i=new jo;return i.position=new e.MercatorCoordinate(t[0],t[1],t[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this.renderWorldCopies,i}_setCameraOrientation(t){if(!e.length$1(t))return !1;e.normalize$1(t,t);const i=e.transformQuat([],[0,0,-1],t),o=e.transformQuat([],[0,-1,0],t);if(o[2]<0)return !1;const r=No(i,o);return !!r&&(this._camera.orientation=r,!0)}_setCameraPosition(t){const i=this.zoomScale(this.minZoom)*this.tileSize,o=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;t[2]=e.clamp(t[2],r/o,r/i),this._camera.position=t;}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices();}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const i=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const o=this.pointCoordinate(new e.Point(0,0)),r=this.pointCoordinate(new e.Point(this.width,0)),n=this.pointCoordinate(new e.Point(this.width,this.height)),s=this.pointCoordinate(new e.Point(0,this.height)),a=Math.floor(Math.min(o.x,r.x,n.x,s.x)),l=Math.floor(Math.max(o.x,r.x,n.x,s.x)),c=1;for(let o=a-c;o<=l+c;o++)0!==o&&i.push(new e.UnwrappedTileID(o,t));}return i}coveringTiles(t){let i=this.coveringZoomLevel(t);const o=i,r=this.elevation&&!t.isTerrainDEM,n="mercator"===this.projection.name;if(void 0!==t.minzoom&&i<t.minzoom)return [];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);const s=this.locationCoordinate(this.center),a=this.center.lat,l=1<<i,c=[l*s.x,l*s.y,0],h="globe"===this.projection.name,u=!h,_=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,u),d=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),p=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),f=[l*d.x,l*d.y,m*(u?1:p)],g=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?i:0,x=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,y=t.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=this.projection.isReprojectedInTileSpace?Vo(this):1,w=t=>{const i=1/4e4,o=new e.MercatorCoordinate(t.x+i,t.y,t.z),r=new e.MercatorCoordinate(t.x,t.y+i,t.z),n=t.toLngLat(),s=o.toLngLat(),a=r.toLngLat(),l=this.locationCoordinate(n),c=this.locationCoordinate(s),h=this.locationCoordinate(a),u=Math.hypot(c.x-l.x,c.y-l.y),_=Math.hypot(h.x-l.x,h.y-l.y);return Math.sqrt(u*_)*b/i},T=t=>{const i=x,o=y;return {aabb:e.tileAABB(this,l,0,0,0,t,o,i,this.projection),zoom:0,x:0,y:0,minZ:o,maxZ:i,wrap:t,fullyVisible:!1}},E=[];let C=[];const M=i,I=t.reparseOverscaled?o:i,P=e=>e*e,S=P((m-this._centerAltitude)*p),D=e=>{if(!this._elevation||!e.tileID||!n)return;const t=this._elevation.getMinMaxForTile(e.tileID),i=e.aabb;t?(i.min[2]=t.min,i.max[2]=t.max,i.center[2]=(i.min[2]+i.max[2])/2):(e.shouldSplit=L(e),e.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=this._centerAltitude));},L=t=>{if(t.zoom<v)return !0;if(t.zoom===M)return !1;if(null!=t.shouldSplit)return t.shouldSplit;const i=t.aabb.distanceX(f),n=t.aabb.distanceY(f);let s=S,l=1;if(h){s=P(t.aabb.distanceZ(f));const i=Math.pow(2,t.zoom),o=e.latFromMercatorY((t.y+1)/i),r=e.latFromMercatorY(t.y/i),n=Math.min(Math.max(a,o),r),c=e.circumferenceAtLatitude(n)/e.circumferenceAtLatitude(a);if(l=n===a?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===M-1&&c>=.9)return !0}else if(r&&(s=P(t.aabb.distanceZ(f)*p)),this.projection.isReprojectedInTileSpace&&o<=5){const i=Math.pow(2,t.zoom),o=w(new e.MercatorCoordinate((t.x+.5)/i,(t.y+.5)/i));l=o>.85?1:o;}const c=i*i+n*n+s,u=P((1<<M-t.zoom)*g*l*((e,t)=>{if(t*P(.707)<e)return 1;const i=Math.sqrt(t/e);return i/(1.4144271570014144+(Math.pow(1.1,i-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(s,S),c));return c<u};if(this.renderWorldCopies)for(let e=1;e<=3;e++)E.push(T(-e)),E.push(T(e));for(E.push(T(0));E.length>0;){const o=E.pop(),s=o.x,a=o.y;let u=o.fullyVisible;if(!u){const e=o.aabb.intersects(_);if(0===e)continue;u=2===e;}if(o.zoom!==M&&L(o))for(let t=0;t<4;t++){const i=(s<<1)+t%2,c=(a<<1)+(t>>1),_={aabb:n?o.aabb.quadrant(t):e.tileAABB(this,l,o.zoom+1,i,c,o.wrap,o.minZ,o.maxZ,this.projection),zoom:o.zoom+1,x:i,y:c,wrap:o.wrap,fullyVisible:u,tileID:void 0,shouldSplit:void 0,minZ:o.minZ,maxZ:o.maxZ};r&&!h&&(_.tileID=new e.OverscaledTileID(o.zoom+1===M?I:o.zoom+1,o.wrap,o.zoom+1,i,c),D(_)),E.push(_);}else {const r=o.zoom===M?I:o.zoom;if(t.minzoom&&t.minzoom>r)continue;const n=c[0]-(.5+s+(o.wrap<<o.zoom))*(1<<i-o.zoom),l=c[1]-.5-a,h=o.tileID?o.tileID:new e.OverscaledTileID(r,o.wrap,o.zoom,s,a);C.push({tileID:h,distanceSq:n*n+l*l});}}if(this.fogCullDistSq){const i=this.fogCullDistSq,o=this.horizonLineFromTop();C=C.filter((r=>{const n=[0,0,0,1],s=[e.EXTENT,e.EXTENT,0,1],a=this.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4$1(n,n,a),e.transformMat4$1(s,s,a);const l=e.getAABBPointSquareDist(n,s);if(0===l)return !0;let c=!1;const h=this._elevation;if(h&&l>i&&0!==o){const i=this.calculateProjMatrix(r.tileID.toUnwrapped());let n;t.isTerrainDEM||(n=h.getMinMaxForTile(r.tileID)),n||(n={min:y,max:x});const s=e.furthestTileCorner(this.rotation),a=[s[0]*e.EXTENT,s[1]*e.EXTENT,n.max];e.transformMat4(a,a,i),c=(1-a[1])*this.height*.5<o;}return l<i||c}));}return C.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices();}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const i=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),o=this.projection.project(t.lng,i);return new e.Point(o.x*this.worldSize,o.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,i){let o,r;const n=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;o=(i.x-n.x)/e,r=(i.y-n.y)/e;}else {const e=this.pointCoordinate(i),t=this.pointCoordinate(n);o=e.x-t.x,r=e.y-t.y;}const s=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(s.x-o,s.y-r));}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap());}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,i){const o=i?e.mercatorZfromAltitude(i,t.lat):void 0,r=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(r.x,r.y,o)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,i){const o=null!=i?i:this._centerAltitude,r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(n,n,this.pixelMatrixInverse);const s=n[3];e.scale$1(r,r,1/r[3]),e.scale$1(n,n,1/s);const a=r[2],l=n[2];return {p0:r,p1:n,t:a===l?0:(o-a)/(l-a)}}screenPointToMercatorRay(t){const i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];return e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/o[3]),i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,o[2]=e.mercatorZfromAltitude(o[2],this._center.lat)*this.worldSize,e.scale$1(i,i,1/this.worldSize),e.scale$1(o,o,1/this.worldSize),new e.Ray([i[0],i[1],i[2]],e.normalize([],e.sub([],o,i)))}rayIntersectionCoordinate(t){const{p0:i,p1:o,t:r}=t,n=e.mercatorZfromAltitude(i[2],this._center.lat),s=e.mercatorZfromAltitude(o[2],this._center.lat);return new e.MercatorCoordinate(e.number(i[0],o[0],r)/this.worldSize,e.number(i[1],o[1],r)/this.worldSize,e.number(n,s,r))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let i=this.projection.pointCoordinate3D(this,t.x,t.y);if(i)return new e.MercatorCoordinate(i[0],i[1],i[2]);let o=0,r=this.horizonLineFromTop();if(t.y>r)return this.pointCoordinate(t);const n=.02*r,s=t.clone();for(let t=0;t<10&&r-o>n;t++){s.y=e.number(o,r,.66);const t=this.projection.pointCoordinate3D(this,s.x,s.y);t?(r=s.y,i=t):o=s.y;}return i?new e.MercatorCoordinate(i[0],i[1],i[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return !1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return !this.isPointAboveHorizon(t);const i=this.pointCoordinate(t);return i.y>=0&&i.y<=1}_coordinatePoint(t,i){const o=i&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,r=[t.x*this.worldSize,t.y*this.worldSize,o+t.toAltitude(),1];return e.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new e.Point(r[0]/r[3],r[1]/r[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,r=this.width-this._edgeInsets.right,n=this.pointLocation3D(new e.Point(i,t)),s=this.pointLocation3D(new e.Point(r,t)),a=this.pointLocation3D(new e.Point(r,o)),l=this.pointLocation3D(new e.Point(i,o));let c=Math.min(n.lng,s.lng,a.lng,l.lng),h=Math.max(n.lng,s.lng,a.lng,l.lng),u=Math.min(n.lat,s.lat,a.lat,l.lat),_=Math.max(n.lat,s.lat,a.lat,l.lat);const d=Math.pow(2,-this.zoom)/16*270,p="globe"===this.projection.name?1:4,m=(t,i,o,r,n)=>{const s=(t+o)/2,a=(i+r)/2,l=new e.Point(s,a),{lng:f,lat:g}=this.pointLocation3D(l),v=Math.max(0,c-f,u-g,f-h,g-_);c=Math.min(c,f),h=Math.max(h,f),u=Math.min(u,g),_=Math.max(_,g),(n<p||v>d)&&(m(t,i,s,a,n+1),m(s,a,o,r,n+1));};if(m(i,t,r,t,1),m(r,t,r,o,1),m(r,o,i,o,1),m(i,o,i,t,1),"globe"===this.projection.name){const[t,i]=e.polesInViewport(this);t?(_=90,h=180,c=-180):i&&(u=-90,h=180,c=-180);}return new e.LngLatBounds(new e.LngLat(c,u),new e.LngLat(h,_))}_getBoundsRectangular(t,i){const{top:o,left:r}=this._edgeInsets,n=this.height-this._edgeInsets.bottom,s=this.width-this._edgeInsets.right,a=new e.Point(r,o),l=new e.Point(s,o),c=new e.Point(s,n),h=new e.Point(r,n);let u=this.pointCoordinate(a,t),_=this.pointCoordinate(l,t);const d=this.pointCoordinate(c,i),p=this.pointCoordinate(h,i),m=(e,t)=>(t.y-e.y)/(t.x-e.x);return u.y>1&&_.y>=0?u=new e.MercatorCoordinate((1-p.y)/m(p,u)+p.x,1):u.y<0&&_.y<=1&&(u=new e.MercatorCoordinate(-p.y/m(p,u)+p.x,0)),_.y>1&&u.y>=0?_=new e.MercatorCoordinate((1-d.y)/m(d,_)+d.x,1):_.y<0&&u.y<=1&&(_=new e.MercatorCoordinate(-d.y/m(d,_)+d.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(_)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(d))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const i=t.dem.tree;e.min=Math.min(e.min,i.minimums[0]),e.max=Math.max(e.max,i.maximums[0]);}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return "mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,i=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,i):i}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain();}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const i=t.key,o=this._distanceTileDataCache;if(o[i])return o[i];const r=t.canonical,n=1/this.height,s=this.cameraWorldSize,a=s/this.zoomScale(r.z),l=(r.x+Math.pow(2,r.z)*t.wrap)*a,c=r.y*a,h=this.point;h.x*=s/this.worldSize,h.y*=s/this.worldSize;const u=this.angle,_=Math.sin(-u),d=-Math.cos(-u);return o[i]={bearing:[_,d],center:[(h.x-l)*n,(h.y-c)*n],scale:a/e.EXTENT*n},o[i]}calculateFogTileMatrix(t){const i=t.key,o=this._fogTileMatrixCache;if(o[i])return o[i];const r=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(r,this.worldToFogMatrix,r),o[i]=new Float32Array(r),o[i]}calculateProjMatrix(t,i=!1){const o=t.key,r=i?this._alignedProjMatrixCache:this._projMatrixCache;if(r[o])return r[o];const n=this.calculatePosMatrix(t,this.worldSize);return e.multiply(n,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:i?this.alignedProjMatrix:this.projMatrix,n),r[o]=new Float32Array(n),r[o]}calculatePixelsToTileUnitsMatrix(t){const i=t.tileID.key,o=this._pixelsToTileUnitsCache;if(o[i])return o[i];const r=function(t,i){const{scale:o}=t.tileTransform,r=o*e.EXTENT/(t.tileSize*Math.pow(2,i.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return n=new Float32Array(4),l=(s=i.inverseAdjustmentMatrix)[1],c=s[2],h=s[3],_=(a=[r,r])[1],n[0]=s[0]*(u=a[0]),n[1]=l*u,n[2]=c*_,n[3]=h*_,n;var n,s,a,l,c,h,u,_;}(t,this);return o[i]=r,o[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,i=e.fromScaling([],[t,t,t]);return e.multiply(i,i,this.globeMatrix),i}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const i=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,o=this._computeCameraPosition(i),r=this._camera.forward(),n=e.mercatorZfromAltitude(1,this._center.lat);o[2]/=n,r[2]/=n,e.normalize(r,r);const s=t.raycast(o,r,t.exaggeration());if(s){const t=e.scaleAndAdd([],o,r,s),i=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),a=(i.z+e.length([i.x-o[0],i.y-o[1],i.z-o[2]*n]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(a),this._centerAltitude=i.toAltitude(),this._center=this.coordinateLocation(i),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices();}}_constrainCamera(t=!1){if(!this._elevation)return;const i=this._elevation,o=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(o),n=i.getAtPointOrZero(new e.MercatorCoordinate(...r)),s=this.pixelsPerMeter/this.worldSize*n,a=this._minimumHeightOverTerrain(),l=r[2]-s;if(l<=a)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),i=[r[0],r[1],t.z-r[2]],o=e.length(i);i[2]-=(a-l)/this._pixelsPerMercatorPixel;const n=e.length(i);if(0===n)return;e.scale$2(i,i,o/n*this._pixelsPerMercatorPixel),this._camera.position=[r[0],r[1],t.z*this._pixelsPerMercatorPixel-i[2]],this._updateStateFromCamera();}else this._isCameraConstrained=!0;}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const i=this.center;return i.lat=e.clamp(i.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(i.lng=e.clamp(i.lng,this.minLng,this.maxLng)),this.center=i,void(this._constraining=!1)}const i=this._unmodified,{x:o,y:r}=this.point;let n=0,s=o,a=r;const l=this.width/2,c=this.height/2,h=this.worldMinY*this.scale,u=this.worldMaxY*this.scale;if(r-c<h&&(a=h+c),r+c>u&&(a=u-c),u-h<this.height&&(n=Math.max(n,this.height/(u-h)),a=(u+h)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,i=this.worldSize/2-(e+t)/2;s=(o+i+this.worldSize)%this.worldSize-i,s-l<e&&(s=e+l),s+l>t&&(s=t-l),t-e<this.width&&(n=Math.max(n,this.width/(t-e)),s=(t+e)/2);}s===o&&a===r||(this.center=this.unproject(new e.Point(s,a))),n&&(this.zoom+=this.scaleZoom(n)),this._constrainCamera(),this._unmodified=i,this._constraining=!1;}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,i=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const o=Wo(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,o),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const r="meters"===this.projection.zAxisUnit?i:1,n=this._camera.getWorldToCamera(this.worldSize,r),s=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);s[8]=2*-t.x/this.width,s[9]=2*t.y/this.height;let a=e.mul([],s,n);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),i=e.identity([]);e.translate(i,i,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(i,i,Zo(this)),e.translate(i,i,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(a,a,i),this.inverseAdjustmentMatrix=function(e){const t=Zo(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this);}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],a,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=a,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],s);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const h=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),u=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;h[8]=2*-t.x/this.width,h[9]=2*(t.y+u)/this.height,this.skyboxMatrix=e.multiply(c,h,c);const _=this.point,d=_.x,p=_.y,m=this.width%2/2,f=this.height%2/2,g=Math.cos(this.angle),x=Math.sin(this.angle),y=d-Math.round(d)+g*m+x*f,b=p-Math.round(p)+g*f+x*m,w=new Float64Array(a);if(e.translate(w,w,[y>.5?y-1:y,b>.5?b-1:b,0]),this.alignedProjMatrix=w,a=e.create(),e.scale(a,a,[this.width/2,-this.height/2,1]),e.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=e.create(),e.scale(a,a,[1,-1,1]),e.translate(a,a,[-1,-1,0]),e.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},a=e.invert(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=a,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,n),this.globeRadius=this.worldSize/2/Math.PI-1;}else this.globeMatrix=a;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={};}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,i=this.cameraPixelsPerMeter,o=this._camera.position,r=1/this.height/this._pixelsPerMercatorPixel,n=[t,t,i];e.scale$2(n,n,r),e.scale$2(o,o,-1),e.multiply$2(o,o,n);const s=e.create();e.translate(s,s,o),e.scale(s,s,n),this.mercatorFogMatrix=s,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,i,r);}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,i=this._camera.forward(),o=this.point,r=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return [o.x/this.worldSize-i[0]*r,o.y/this.worldSize-i[1]*r,e/this.worldSize*this._centerAltitude-i[2]*r]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition());}_translateCameraConstrained(t){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),o=this._camera.position[2],r=t[2];let n=1;this.projection.wrap&&(this.center=this.center.wrap()),r>0&&(n=Math.min((i-o)/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,n),this._updateStateFromCamera();}_updateStateFromCamera(){const t=this._camera.position,i=this._camera.forward(),{pitch:o,bearing:r}=this._camera.getPitchBearing(),n=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),a=Math.max((t[2]-n)/Math.cos(o),s),l=this._zoomFromMercatorZ(a);e.scaleAndAdd(t,t,i,a),this._pitch=e.clamp(o,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(r,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices();}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let i=0,o=e.GLOBE_ZOOM_THRESHOLD_MAX,r=0,n=1/0;for(;o-i>1e-6&&o>i;){const e=i+.5*(o-i),s=this.tileSize*Math.pow(2,e),a=this.getCameraToCenterDistance(this.projection,e,s),l=this.scaleZoom(a/(t*this.tileSize)),c=Math.abs(e-l);c<n&&(n=c,r=e),e<l?i=e:o=e;}return r}_terrainEnabled(){return !(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,i){const o=Math.min(t.x,i.x),r=Math.max(t.x,i.x),n=Math.min(t.y,i.y),s=Math.max(t.y,i.y);if(n<this.horizonLineFromTop(!1))return !0;if("mercator"!==this.projection.name)return !1;const a=[new e.Point(o,n),new e.Point(r,s),new e.Point(o,s),new e.Point(r,n)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of a){const t=this.pointRayIntersection(e);if(t.t<0)return !0;const i=this.rayIntersectionCoordinate(t);if(i.x<l||i.y<0||i.x>c||i.y>1)return !0}return !1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,i){const o=e.length(e.sub([],this._camera.position,t)),r=this._zoomFromMercatorZ(o)+i;return o-this._mercatorZfromZoom(r)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,i,o],r){const n=[t,i,o,1];e.transformMat4$1(n,n,r);const s=n[3]=Math.max(n[3],1e-6);return n[0]/=s,n[1]/=s,n[2]/=s,n}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e,t=this.zoom,i=this.worldSize){const o=Wo(e,t,this.width,this.height,1024),r=e.pixelSpaceConversion(this.center.lat,i,o);return .5/Math.tan(.5*this._fov)*this.height*r}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return "globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Yo(e,t){let i=!1,o=null;const r=()=>{o=null,i&&(e(),o=setTimeout(r,t),i=!1);};return ()=>(i=!0,o||r(),o)}class Ko{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Yo(this._updateHashUnthrottled.bind(this),300);}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return "";const i=Jo(t);if(this._hashName){const t=this._hashName;let o=!1;const r=e.window.location.hash.slice(1).split("&").map((e=>{const r=e.split("=")[0];return r===t?(o=!0,`${r}=${i}`):e})).filter((e=>e));return o||r.push(`${t}=${i}`),`#${r.join("&")}`}return `#${i}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t);})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return !1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const i=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:i,pitch:+(t[4]||0)}),!0}return !1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t);}}function Jo(e,t){const i=e.getCenter(),o=Math.round(100*e.getZoom())/100,r=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),s=Math.round(i.lng*n)/n,a=Math.round(i.lat*n)/n,l=e.getBearing(),c=e.getPitch();let h=t?`/${s}/${a}/${o}`:`${o}/${a}/${s}`;return (l||c)&&(h+="/"+Math.round(10*l)/10),c&&(h+=`/${Math.round(c)}`),h}const Qo={linearity:.3,easing:e.bezier(0,0,.3,1)},er=e.extend({deceleration:2500,maxSpeed:1400},Qo),tr=e.extend({deceleration:20,maxSpeed:1400},Qo),ir=e.extend({deceleration:1e3,maxSpeed:360},Qo),or=e.extend({deceleration:1e3,maxSpeed:90},Qo);class rr{constructor(e){this._map=e,this.clear();}clear(){this._inertiaBuffer=[];}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t});}_drainInertiaBuffer(){const t=this._inertiaBuffer,i=e.exported.now();for(;t.length>0&&i-t[0].time>160;)t.shift();}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(i.pan.mag()){const n=sr(i.pan.mag(),o,e.extend({},er,t||{}));r.offset=i.pan.mult(n.amount/i.pan.mag()),r.center=this._map.transform.center,nr(r,n);}if(i.zoom){const e=sr(i.zoom,o,tr);r.zoom=this._map.transform.zoom+e.amount,nr(r,e);}if(i.bearing){const t=sr(i.bearing,o,ir);r.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),nr(r,t);}if(i.pitch){const e=sr(i.pitch,o,or);r.pitch=this._map.transform.pitch+e.amount,nr(r,e);}if(r.zoom||r.bearing){const e=void 0===i.pinchAround?i.around:i.pinchAround;r.around=e?this._map.unproject(e):this._map.getCenter();}return this.clear(),r.noMoveStart=!0,r}}function nr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing);}function sr(t,i,o){const{maxSpeed:r,linearity:n,deceleration:s}=o,a=e.clamp(t*n/(i/1e3),-r,r),l=Math.abs(a)/(s*n);return {easing:o.easing,duration:1e3*l,amount:a*(l/2)}}class ar extends e.Event{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,o,r={}){const n=p(i.getCanvasContainer(),o),s=i.unproject(n);super(t,e.extend({point:n,lngLat:s,originalEvent:o},r)),this._defaultPrevented=!1,this.target=i;}}class lr extends e.Event{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,o){const r="touchend"===t?o.changedTouches:o.touches,n=m(i.getCanvasContainer(),r),s=n.map((e=>i.unproject(e))),a=n.reduce(((e,t,i,o)=>e.add(t.div(o.length))),new e.Point(0,0));super(t,{points:n,point:a,lngLats:s,lngLat:i.unproject(a),originalEvent:o}),this._defaultPrevented=!1;}}class cr extends e.Event{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,i){super(e,{originalEvent:i}),this._defaultPrevented=!1;}}class hr{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance;}reset(){this._mousedownPos=void 0;}wheel(e){return this._firePreventable(new cr(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ar(e.type,this._map,e))}mouseup(e){this._map.fire(new ar(e.type,this._map,e));}preclick(t){const i=e.extend({},t);i.type="preclick",this._map.fire(new ar(i.type,this._map,i));}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ar(e.type,this._map,e)));}dblclick(e){return this._firePreventable(new ar(e.type,this._map,e))}mouseover(e){this._map.fire(new ar(e.type,this._map,e));}mouseout(e){this._map.fire(new ar(e.type,this._map,e));}touchstart(e){return this._firePreventable(new lr(e.type,this._map,e))}touchmove(e){this._map.fire(new lr(e.type,this._map,e));}touchend(e){this._map.fire(new lr(e.type,this._map,e));}touchcancel(e){this._map.fire(new lr(e.type,this._map,e));}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return {}}isEnabled(){return !0}isActive(){return !1}enable(){}disable(){}}class ur{constructor(e){this._map=e;}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0;}mousemove(e){this._map.fire(new ar(e.type,this._map,e));}mousedown(){this._delayContextMenu=!0;}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ar("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent);}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ar(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault();}isEnabled(){return !0}isActive(){return !1}enable(){}disable(){}}class _r{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1;}isEnabled(){return !!this._enabled}isActive(){return !!this._active}enable(){this.isEnabled()||(this._enabled=!0);}disable(){this.isEnabled()&&(this._enabled=!1);}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(h(),this._startPos=this._lastPos=t,this._active=!0);}mousemoveWindow(e,t){if(!this._active)return;const i=t,o=this._startPos,r=this._lastPos;if(!o||!r||r.equals(i)||!this._box&&i.dist(o)<this._clickTolerance)return;this._lastPos=i,this._box||(this._box=n("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const s=Math.min(o.x,i.x),a=Math.max(o.x,i.x),l=Math.min(o.y,i.y),c=Math.max(o.y,i.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${s}px,${l}px)`,this._box.style.width=a-s+"px",this._box.style.height=c-l+"px");}));}mouseupWindow(t,i){if(!this._active)return;const o=this._startPos,r=i;if(o&&0===t.button){if(this.reset(),d(),o.x!==r.x||o.y!==r.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(o,r,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t);}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e));}blur(){this.reset();}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),u(),delete this._startPos,delete this._lastPos;}_fireEvent(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))}}function dr(e,t){const i={};for(let o=0;o<e.length;o++)i[e[o].identifier]=t[o];return i}class pr{constructor(e){this.reset(),this.numTouches=e.numTouches;}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1;}touchstart(t,i,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),o.length===this.numTouches&&(this.centroid=function(t){const i=new e.Point(0,0);for(const e of t)i._add(e);return i.div(t.length)}(i),this.touches=dr(o,i)));}touchmove(e,t,i){if(this.aborted||!this.centroid)return;const o=dr(i,t);for(const e in this.touches){const t=o[e];(!t||t.dist(this.touches[e])>30)&&(this.aborted=!0);}}touchend(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class mr{constructor(e){this.singleTap=new pr(e),this.numTaps=e.numTaps,this.reset();}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset();}touchstart(e,t,i){this.singleTap.touchstart(e,t,i);}touchmove(e,t,i){this.singleTap.touchmove(e,t,i);}touchend(e,t,i){const o=this.singleTap.touchend(e,t,i);if(o){const t=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(o)<30;if(t&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}}}class fr{constructor(){this._zoomIn=new mr({numTouches:1,numTaps:2}),this._zoomOut=new mr({numTouches:2,numTaps:1}),this.reset();}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset();}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i);}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i);}touchend(e,t,i){const o=this._zoomIn.touchend(e,t,i),r=this._zoomOut.touchend(e,t,i);return o?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(o)},{originalEvent:e})}):r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(r)},{originalEvent:e})}):void 0}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}const gr={0:1,2:2};class vr{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1;}blur(){this.reset();}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0;}_correctButton(e,t){return !1}_move(e,t){return {}}mousedown(e,t){if(this._lastPoint)return;const i=f(e);this._correctButton(e,i)&&(this._lastPoint=t,this._eventButton=i);}mousemoveWindow(e,t){const i=this._lastPoint;if(i)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const i=gr[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}mouseupWindow(e){this._lastPoint&&f(e)===this._eventButton&&(this._moved&&d(),this.reset());}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class xr extends vr{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0);}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return {around:t,panDelta:t.sub(e)}}}class yr extends vr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(e){e.preventDefault();}}class br extends vr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(e){e.preventDefault();}}class wr{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this);}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0);}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(t,i,o){if(this._active&&!(o.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===o.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer));}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,i,o)}}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset();}touchcancel(){this.reset();}_calculateTransform(t,i,o){o.length>0&&(this._active=!0);const r=dr(o,i),n=new e.Point(0,0),s=new e.Point(0,0);let a=0;for(const e in r){const t=r[e],i=this._touches[e];i&&(n._add(t),s._add(t.sub(i)),a++,r[e]=t);}if(this._touches=r,a<this._minTouches||!s.mag())return;const l=s.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:n.div(a),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"));}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset();}isEnabled(){return !!this._enabled}isActive(){return !!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=n("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`);}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null");}),500);}}class Tr{constructor(){this.reset();}reset(){this._active=!1,this._firstTwoTouches=void 0;}_start(e){}_move(e,t,i){return {}}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]));}touchmove(e,t,i){const o=this._firstTwoTouches;if(!o)return;e.preventDefault();const[r,n]=o,s=Er(i,t,r),a=Er(i,t,n);if(!s||!a)return;const l=this._aroundCenter?null:s.add(a).div(2);return this._move([s,a],l,e)}touchend(e,t,i){if(!this._firstTwoTouches)return;const[o,r]=this._firstTwoTouches,n=Er(i,t,o),s=Er(i,t,r);n&&s||(this._active&&d(),this.reset());}touchcancel(){this.reset();}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}function Er(e,t,i){for(let o=0;o<e.length;o++)if(e[o].identifier===i)return t[o]}function Cr(e,t){return Math.log(e/t)/Math.LN2}class Mr extends Tr{reset(){super.reset(),this._distance=0,this._startDistance=0;}_start(e){this._startDistance=this._distance=e[0].dist(e[1]);}_move(e,t){const i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Cr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Cr(this._distance,i),pinchAround:t}}}function Ir(e,t){return 180*e.angleWith(t)/Math.PI}class Pr extends Tr{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0;}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1]);}_move(e,t){const i=this._vector;if(this._vector=e[0].sub(e[1]),i&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ir(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,i=this._startVector;if(!i)return !1;const o=Ir(e,i);return Math.abs(o)<t}}function Sr(e){return Math.abs(e.y)>Math.abs(e.x)}class Dr extends Tr{constructor(e){super(),this._map=e;}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0;}_start(e){this._lastPoints=e,Sr(e[0].sub(e[1]))&&(this._valid=!1);}_move(t,i,o){const r=this._lastPoints;if(!r)return;const n=t[0].sub(r[0]),s=t[1].sub(r[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&o.touches.length<3||(this._valid=this.gestureBeginsVertically(n,s,o.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+s.y)/2*-.5})}gestureBeginsVertically(e,t,i){if(void 0!==this._valid)return this._valid;const o=e.mag()>=2,r=t.mag()>=2;if(!o&&!r)return;if(!o||!r)return null==this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const n=e.y>0==t.y>0;return Sr(e)&&Sr(t)&&n}}const Lr={panStep:100,bearingStep:15,pitchStep:10};class Ar{constructor(){const e=Lr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1;}blur(){this.reset();}reset(){this._active=!1;}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,i=0,o=0,r=0,n=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?o=1:(e.preventDefault(),n=-1);break;case 40:e.shiftKey?o=-1:(e.preventDefault(),n=1);break;default:return}return this._rotationDisabled&&(i=0,o=0),{cameraAnimation:s=>{const a=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:zr,zoom:t?Math.round(a)+t*(e.shiftKey?2:1):a,bearing:s.getBearing()+i*this._bearingStep,pitch:s.getPitch()+o*this._pitchStep,offset:[-r*this._panStep,-n*this._panStep],center:s.getCenter()},{originalEvent:e});}}}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0;}enableRotation(){this._rotationDisabled=!1;}}function zr(e){return e*(2-e)}const Rr=4.000244140625;class Or{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this);}setZoomRate(e){this._defaultZoomRate=e;}setWheelZoomRate(e){this._wheelZoomRate=e;}isEnabled(){return !!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return !!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker());}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()));}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer));}let i=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const o=e.exported.now(),r=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%Rr==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault();}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e);}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=p(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame());}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const i=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Rr?this._wheelZoomRate:this._defaultZoomRate;let o=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==o&&(o=1/o);const r=i(),n=Math.pow(2,r),s="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):n;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(s*o))),"wheel"===this._type&&(this._startZoom=r,this._easing=this._smoothOutEasing(200)),this._delta=0;}const o="number"==typeof this._targetZoom?this._targetZoom:i(),r=this._startZoom,n=this._easing;let s,a=!1;if("wheel"===this._type&&r&&n){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),i=n(t);s=e.number(r,o,i),t<1?this._frameId||(this._frameId=!0):a=!0;}else s=o,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout;}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:s-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.ease;if(this._prevEase){const t=this._prevEase,o=(e.exported.now()-t.start)/t.duration,r=t.easing(o+.01)-t.easing(o),n=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-n*n);i=e.bezier(n,s,.25,1);}return this._prevEase={start:e.exported.now(),duration:t,easing:i},i}blur(){this.reset();}reset(){this._active=!1;}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=n("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`);}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null");}),200);}}class Br{constructor(e,t){this._clickZoom=e,this._tapZoom=t;}enable(){this._clickZoom.enable(),this._tapZoom.enable();}disable(){this._clickZoom.disable(),this._tapZoom.disable();}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kr{constructor(){this.reset();}reset(){this._active=!1;}blur(){this.reset();}dblclick(e,t){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e});}}}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class Fr{constructor(){this._tap=new mr({numTouches:1,numTaps:1}),this.reset();}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset();}touchstart(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i));}touchmove(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const o=t[0],r=o.y-this._swipePoint.y;return this._swipePoint=o,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,i);}touchend(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp);}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class Ur{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i;}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan");}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan");}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Nr{constructor(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i;}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable();}disable(){this._mouseRotate.disable(),this._mousePitch.disable();}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jr{constructor(e,t,i,o){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=o,this._rotationDisabled=!1,this._enabled=!0;}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate");}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate");}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable();}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable();}}const Gr=e=>e.zoom||e.drag||e.pitch||e.rotate;class Zr extends e.Event{}class Vr{constructor(){this.constants=[1,1,.01],this.radius=0;}setup(t,i){const o=e.sub([],i,t);this.radius=e.length(o[2]<0?e.div([],o,this.constants):[o[0],o[1],0]);}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const i=e.scale$2([],t,this.radius);if(i[2]>0){const t=e.scale$2([],[0,0,1],e.dot(i,[0,0,1])),o=e.scale$2([],e.normalize([],[i[0],i[1],0]),this.radius),r=e.add([],i,e.scale$2([],e.sub([],e.add([],o,t),i),2));i[0]=r[0],i[1]=r[1];}return i}}function Wr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Xr{constructor(t,i){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rr(t),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),e.bindAll(["handleEvent","handleWindowEvent"],this);const o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,i,o]of this._listeners)t.addEventListener(i,t===e.window.document?this.handleWindowEvent:this.handleEvent,o);}destroy(){for(const[t,i,o]of this._listeners)t.removeEventListener(i,t===e.window.document?this.handleWindowEvent:this.handleEvent,o);}_addDefaultHandlers(e){const t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new hr(t,e));const o=t.boxZoom=new _r(t,e);this._add("boxZoom",o);const r=new fr,n=new kr;t.doubleClickZoom=new Br(n,r),this._add("tapZoom",r),this._add("clickZoom",n);const s=new Fr;this._add("tapDragZoom",s);const a=t.touchPitch=new Dr(t);this._add("touchPitch",a);const l=new yr(e),c=new br(e);t.dragRotate=new Nr(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const h=new xr(e),u=new wr(t,e);t.dragPan=new Ur(i,h,u),this._add("mousePan",h),this._add("touchPan",u,["touchZoom","touchRotate"]);const _=new Pr,d=new Mr;t.touchZoomRotate=new jr(i,d,_,s),this._add("touchRotate",_,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ur(t));const p=t.scrollZoom=new Or(t,this);this._add("scrollZoom",p,["mousePan"]);const m=t.keyboard=new Ar;this._add("keyboard",m);for(const i of ["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[i]&&t[i].enable(e[i]);}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t;}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[];}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return !0;return !1}isZooming(){return !!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return !!this._eventsInProgress.rotate}isMoving(){return !!Gr(this._eventsInProgress)||this.isZooming()}_isDragging(){return !!this._eventsInProgress.drag}_blockedByActive(e,t,i){for(const o in e)if(o!==i&&(!t||t.indexOf(o)<0))return !0;return !1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`);}_getMapTouches(e){const t=[];for(const i of e)this._el.contains(i.target)&&t.push(i);return t}handleEvent(e,t){this._updatingCamera=!0;const i="renderFrame"===e.type,o=i?void 0:e,r={needsRenderFrame:!1},n={},s={},a=e.touches?this._getMapTouches(e.touches):void 0,l=a?m(this._el,a):i?void 0:p(this._el,e);for(const{handlerName:i,handler:c,allowed:h}of this._handlers){if(!c.isEnabled())continue;let u;this._blockedByActive(s,h,i)?c.reset():c[t||e.type]&&(u=c[t||e.type](e,l,a),this.mergeHandlerResult(r,n,u,i,o),u&&u.needsRenderFrame&&this._triggerRenderFrame()),(u||c.isActive())&&(s[i]=c);}const c={};for(const e in this._previousActiveHandlers)s[e]||(c[e]=o);this._previousActiveHandlers=s,(Object.keys(c).length||Wr(r))&&(this._changes.push([r,n,c]),this._triggerRenderFrame()),(Object.keys(s).length||Wr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map));}mergeHandlerResult(t,i,o,r,n){if(!o)return;e.extend(t,o);const s={handlerName:r,originalEvent:o.originalEvent||n};void 0!==o.zoomDelta&&(i.zoom=s),void 0!==o.panDelta&&(i.drag=s),void 0!==o.pitchDelta&&(i.pitch=s),void 0!==o.bearingDelta&&(i.rotate=s);}_applyChanges(){const t={},i={},o={};for(const[r,n,s]of this._changes)r.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(r.panDelta)),r.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(t.around=r.around),void 0!==r.aroundCoord&&(t.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(t.pinchAround=r.pinchAround),r.noInertia&&(t.noInertia=r.noInertia),e.extend(i,n),e.extend(o,s);this._updateMapTransform(t,i,o),this._changes=[];}_updateMapTransform(t,i,o){const r=this._map,n=r.transform,s=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Wr(t)){const e=n.zoom;n.cameraElevationReference="sea",n.recenterOnTerrain(),n.cameraElevationReference="ground",e!==n.zoom&&this._map._update(!0);}if(n._isCameraConstrained&&r._stop(!0),!Wr(t))return void this._fireEvents(i,o,!0);let{panDelta:a,zoomDelta:l,bearingDelta:c,pitchDelta:h,around:u,aroundCoord:_,pinchAround:d}=t;n._isCameraConstrained&&(l>0&&(l=0),n._isCameraConstrained=!1),void 0!==d&&(u=d),(l||(e=>i[e]&&!this._eventsInProgress[e])("drag"))&&u&&(this._dragOrigin=s(n.pointCoordinate3D(u)),this._trackingEllipsoid.setup(n._camera.position,this._dragOrigin)),n.cameraElevationReference="sea",r._stop(!0),u=u||r.transform.centerPoint,c&&(n.bearing+=c),h&&(n.pitch+=h),n._updateCameraState();const p=[0,0,0];if(a)if("mercator"===n.projection.name){const e=this._trackingEllipsoid.projectRay(n.screenPointToMercatorRay(u).dir),t=this._trackingEllipsoid.projectRay(n.screenPointToMercatorRay(u.sub(a)).dir);p[0]=t[0]-e[0],p[1]=t[1]-e[1];}else {const t=n.pointCoordinate(u);if("globe"===n.projection.name){a=a.rotate(-n.angle);const i=n._pixelsPerMercatorPixel/n.worldSize;p[0]=-a.x*e.mercatorScale(e.latFromMercatorY(t.y))*i,p[1]=-a.y*e.mercatorScale(n.center.lat)*i;}else {const e=n.pointCoordinate(u.sub(a));t&&e&&(p[0]=e.x-t.x,p[1]=e.y-t.y);}}const m=n.zoom,f=[0,0,0];if(l){const t=s(_||n.pointCoordinate3D(u)),i={dir:e.normalize([],e.sub([],t,n._camera.position))};if(i.dir[2]<0){const o=n.zoomDeltaToMovement(t,l);e.scale$2(f,i.dir,o);}}const g=e.add(p,p,f);n._translateCameraConstrained(g),l&&Math.abs(n.zoom-m)>1e-4&&n.recenterOnTerrain(),n.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,o,!0);}_fireEvents(t,i,o){const r=Gr(this._eventsInProgress),n=Gr(t),s={};for(const e in t){const{originalEvent:i}=t[e];this._eventsInProgress[e]||(s[`${e}start`]=i),this._eventsInProgress[e]=t[e];}!r&&n&&this._fireEvent("movestart",n.originalEvent);for(const e in s)this._fireEvent(e,s[e]);n&&this._fireEvent("move",n.originalEvent);for(const e in t){const{originalEvent:i}=t[e];this._fireEvent(e,i);}const a={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:o}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=i[t]||o,a[`${e}end`]=l);}for(const e in a)this._fireEvent(e,a[e]);const c=Gr(this._eventsInProgress);if(o&&(r||n)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(i(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1;}}_fireEvent(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}));}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Zr("renderFrame",{timeStamp:e})),this._applyChanges();}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame());}}const qr="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class $r extends e.Evented{constructor(t,i){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=i.bearingSnap,this._respectPrefersReducedMotion=!1!==i.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this);}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,i,o){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),o)}panTo(t,i,o){return this.easeTo(e.extend({center:t},i),o)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,i,o){return this.easeTo(e.extend({zoom:t},i),o)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,i,o){return this.easeTo(e.extend({bearing:t},i),o)}resetNorth(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,i){t=e.LngLatBounds.convert(t);const o=i&&i.bearing||0,r=i&&i.pitch||0,n=t.getNorthWest(),s=t.getSouthEast();return this._cameraForBounds(this.transform,n,s,o,r,i)}_extendCameraOptions(t){const i={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e};}return t.padding=e.extend(i,t.padding),t}_minimumAABBFrustumDistance(e,t){const i=t.max[0]-t.min[0],o=t.max[1]-t.min[1];return i/o>e.aspect?i/(2*Math.tan(.5*e.fovX)*e.aspect):o/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,i,o,r,n,s){const a=t.clone(),l=this._extendCameraOptions(s);a.bearing=r,a.pitch=n;const c=e.LngLat.convert(i),h=e.LngLat.convert(o),u=.5*(c.lat+h.lat),_=.5*(c.lng+h.lng),d=e.latLngToECEF(u,_),p=e.normalize([],d),m=e.normalize([],e.cross([],p,[0,1,0])),f=e.cross([],m,p),g=[m[0],m[1],m[2],0,f[0],f[1],f[2],0,p[0],p[1],p[2],0,0,0,0,1],v=[d,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(h.lat,c.lng),e.latLngToECEF(h.lat,h.lng),e.latLngToECEF(c.lat,h.lng),e.latLngToECEF(u,c.lng),e.latLngToECEF(u,h.lng),e.latLngToECEF(c.lat,_),e.latLngToECEF(h.lat,_)];let x=e.Aabb.fromPoints(v.map((t=>[e.dot(m,t),e.dot(f,t),e.dot(p,t)])));const y=e.transformMat4([],x.center,g);0===e.squaredLength(y)&&e.set(y,0,0,1),e.normalize(y,y),e.scale$2(y,y,e.GLOBE_RADIUS),a.center=e.ecefToLatLng(y);const b=a.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),b);x=e.Aabb.applyTransform(x,e.multiply([],b,g)),e.transformMat4(y,y,b);const T=.5*(x.max[2]-x.min[2]),E=this._minimumAABBFrustumDistance(a,x),C=e.scale$2([],[0,0,1],T),M=e.add(C,y,C),I=E+(0===a.pitch?0:e.distance(y,M)),P=a.globeCenterInViewSpace,S=e.sub([],y,[P[0],P[1],P[2]]);e.normalize(S,S),e.scale$2(S,S,I);const D=e.add([],y,S);e.transformMat4(D,D,w);const L=e.earthRadius/e.GLOBE_RADIUS,A=e.length(D),z=e.mercatorZfromAltitude(Math.max(A*L-e.earthRadius,Number.EPSILON),0),R=Math.min(a.zoomFromMercatorZAdjusted(z),l.maxZoom);return R>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"mercator"}),a.zoom=R,this._cameraForBounds(a,i,o,r,n,s)):{center:a.center,zoom:R,bearing:r,pitch:n}}queryTerrainElevation(t,i){const o=this.transform.elevation;return o?(i=e.extend({},{exaggerated:!0},i),o.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,i.exaggerated)):null}_cameraForBounds(t,i,o,r,n,s){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,i,o,r,n,s);const a=t.clone(),l=this._extendCameraOptions(s),c=a.padding;a.bearing=r,a.pitch=n;const h=e.LngLat.convert(i),u=e.LngLat.convert(o),_=new e.LngLat(h.lng,u.lat),d=new e.LngLat(u.lng,h.lat),p=a.project(h),m=a.project(u),f=this.queryTerrainElevation(h),g=this.queryTerrainElevation(u),v=this.queryTerrainElevation(_),x=this.queryTerrainElevation(d),y=[[p.x,p.y,Math.min(f||0,g||0,v||0,x||0)],[m.x,m.y,Math.max(f||0,g||0,v||0,x||0)]];let b=e.Aabb.fromPoints(y);const w=a.getWorldToCameraMatrix(),T=e.invert(new Float64Array(16),w);b=e.Aabb.applyTransform(b,w);const E=e.sub([],b.max,b.min),C=c.left||0,M=c.right||0,I=c.bottom||0,P=c.top||0,{left:S,right:D,top:L,bottom:A}=l.padding,z=.5*(C+M),R=.5*(P+I),O=Math.min(a.scaleZoom(a.scale*Math.min((a.width-(C+M+S+D))/E[0],(a.height-(I+P+A+L))/E[1])),l.maxZoom),B=a.scale/a.zoomScale(O);b=new e.Aabb([b.min[0]-(S+z)*B,b.min[1]-(A+R)*B,b.min[2]],[b.max[0]+(D+z)*B,b.max[1]+(L+R)*B,b.max[2]]);const k=.5*E[2],F=this._minimumAABBFrustumDistance(a,b),U=[0,0,1,0];e.transformMat4$1(U,U,w),e.normalize$2(U,U);const N=e.scale$2([],U,F+k),j=e.add([],b.center,N),G=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(r));b.center[0]-=G.x*B,b.center[1]+=G.y*B,e.transformMat4(b.center,b.center,T),e.transformMat4(j,j,T);const Z=[b.center[0],b.center[1],j[2]*a.pixelsPerMeter];e.scale$2(Z,Z,1/a.worldSize);const V=e.lngFromMercatorX(Z[0]),W=e.latFromMercatorY(Z[1]),X=Math.min(a._zoomFromMercatorZ(Z[2]),l.maxZoom),q=new e.LngLat(V,W);return a.mercatorFromTransition&&X<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"globe"}),a.zoom=X,this._cameraForBounds(a,i,o,r,n,s)):{center:q,zoom:X,bearing:r,pitch:n}}fitBounds(e,t,i){const o=this.cameraForBounds(e,t);return this._fitInternal(o,t,i)}fitScreenCoordinates(t,i,o,r,n){const s=e.Point.convert(t),a=e.Point.convert(i),l=new e.Point(Math.min(s.x,a.x),Math.min(s.y,a.y)),c=new e.Point(Math.max(s.x,a.x),Math.max(s.y,a.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(s,a))return this;const h=this.transform.pointLocation3D(l),u=this.transform.pointLocation3D(c),_=this.transform.pointLocation3D(new e.Point(l.x,c.y)),d=this.transform.pointLocation3D(new e.Point(c.x,l.y)),p=[Math.min(h.lng,u.lng,_.lng,d.lng),Math.min(h.lat,u.lat,_.lat,d.lat)],m=[Math.max(h.lng,u.lng,_.lng,d.lng),Math.max(h.lat,u.lat,_.lat,d.lat)],f=r&&r.pitch?r.pitch:this.getPitch(),g=this._cameraForBounds(this.transform,p,m,o,f,r);return this._fitInternal(g,r,n)}_fitInternal(t,i,o){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,o):this.flyTo(i,o)):this}jumpTo(t,i){this.stop();const o=t.preloadOnly?this.transform.clone():this.transform;let r=!1,n=!1,s=!1;return "zoom"in t&&o.zoom!==+t.zoom&&(r=!0,o.zoom=+t.zoom),void 0!==t.center&&(o.center=e.LngLat.convert(t.center)),"bearing"in t&&o.bearing!==+t.bearing&&(n=!0,o.bearing=+t.bearing),"pitch"in t&&o.pitch!==+t.pitch&&(s=!0,o.pitch=+t.pitch),null==t.padding||o.isPaddingEqual(t.padding)||(o.padding=t.padding),t.preloadOnly?(this._preloadTiles(o),this):(this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),r&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),n&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),s&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(qr),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,i){const o=this.transform;if(!o.projection.supportsFreeCamera)return e.warnOnce(qr),this;this.stop();const r=o.zoom,n=o.pitch,s=o.bearing;o.setFreeCameraOptions(t);const a=r!==o.zoom,l=n!==o.pitch,c=s!==o.bearing;return this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),a&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),c&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),l&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i)),this}easeTo(t,i){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const o=this.transform,r=this.getZoom(),n=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l="zoom"in t?+t.zoom:r,c="bearing"in t?this._normalizeBearing(t.bearing,n):n,h="pitch"in t?+t.pitch:s,u="padding"in t?t.padding:o.padding,_=e.Point.convert(t.offset);let d,p,m;if("globe"===o.projection.name){const i=e.MercatorCoordinate.fromLngLat(o.center),r=_.rotate(-o.angle);i.x+=r.x/o.worldSize,i.y+=r.y/o.worldSize;const n=i.toLngLat(),s=e.LngLat.convert(t.center||n);this._normalizeCenter(s),d=o.centerPoint.add(r),p=new e.Point(i.x,i.y).mult(o.worldSize),m=new e.Point(e.mercatorXfromLng(s.lng),e.mercatorYfromLat(s.lat)).mult(o.worldSize).sub(p);}else {d=o.centerPoint.add(_);const i=o.pointLocation(d),r=e.LngLat.convert(t.center||i);this._normalizeCenter(r),p=o.project(i),m=o.project(r).sub(p);}const f=o.zoomScale(l-r);let g,v;t.around&&(g=e.LngLat.convert(t.around),v=o.locationPoint(g));const x=this._zooming||l!==r,y=this._rotating||n!==c,b=this._pitching||h!==s,w=!o.isPaddingEqual(u),T=o=>T=>{if(x&&(o.zoom=e.number(r,l,T)),y&&(o.bearing=e.number(n,c,T)),b&&(o.pitch=e.number(s,h,T)),w&&(o.interpolatePadding(a,u,T),d=o.centerPoint.add(_)),g)o.setLocationAtPoint(g,v);else {const e=o.zoomScale(o.zoom-r),t=l>r?Math.min(2,f):Math.max(.5,f),i=Math.pow(t,1-T),n=o.unproject(p.add(m.mult(T*i)).mult(e));o.setLocationAtPoint(o.renderWorldCopies?n.wrap():n,d);}return t.preloadOnly||this._fireMoveEvents(i),o};if(t.preloadOnly){const e=this._emulate(T,t.duration,o);return this._preloadTiles(e),this}const E={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=x,this._rotating=y,this._pitching=b,this._padding=w,this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,E),this._ease(T(o),(e=>{o.recenterOnTerrain(),this._afterEase(i,e);}),t),this}_prepareEase(t,i,o={}){this._moving=!0,this.transform.cameraElevationReference="sea",i||o.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!o.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!o.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!o.pitching&&this.fire(new e.Event("pitchstart",t));}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t));}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const o=this._zooming,r=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,o&&this.fire(new e.Event("zoomend",t)),r&&this.fire(new e.Event("rotateend",t)),n&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t));}flyTo(t,i){if(this._prefersReducedMotion(t)){const o=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const o=this.transform,r=this.getZoom(),n=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,o.minZoom,o.maxZoom):r,c="bearing"in t?this._normalizeBearing(t.bearing,n):n,h="pitch"in t?+t.pitch:s,u="padding"in t?t.padding:o.padding,_=o.zoomScale(l-r),d=e.Point.convert(t.offset);let p=o.centerPoint.add(d);const m=o.pointLocation(p),f=e.LngLat.convert(t.center||m);this._normalizeCenter(f);const g=o.project(m),v=o.project(f).sub(g);let x=t.curve;const y=Math.max(o.width,o.height),b=y/_,w=v.mag();if("minZoom"in t){const i=e.clamp(Math.min(t.minZoom,r,l),o.minZoom,o.maxZoom),n=y/o.zoomScale(i-r);x=Math.sqrt(n/w*2);}const T=x*x;function E(e){const t=(b*b-y*y+(e?-1:1)*T*T*w*w)/(2*(e?b:y)*T*w);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return (Math.exp(e)-Math.exp(-e))/2}function M(e){return (Math.exp(e)+Math.exp(-e))/2}const I=E(0);let P=function(e){return M(I)/M(I+x*e)},S=function(e){return y*((M(I)*(C(t=I+x*e)/M(t))-C(I))/T)/w;var t;},D=(E(1)-I)/x;if(Math.abs(w)<1e-6||!isFinite(D)){if(Math.abs(y-b)<1e-6)return this.easeTo(t,i);const e=b<y?-1:1;D=Math.abs(Math.log(b/y))/x,S=function(){return 0},P=function(t){return Math.exp(e*x*t)};}t.duration="duration"in t?+t.duration:1e3*D/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const L=n!==c,A=h!==s,z=!o.isPaddingEqual(u),R=o=>_=>{const m=_*D,x=1/P(m);o.zoom=1===_?l:r+o.scaleZoom(x),L&&(o.bearing=e.number(n,c,_)),A&&(o.pitch=e.number(s,h,_)),z&&(o.interpolatePadding(a,u,_),p=o.centerPoint.add(d));const y=1===_?f:o.unproject(g.add(v.mult(S(m))).mult(x));return o.setLocationAtPoint(o.renderWorldCopies?y.wrap():y,p),o._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(i),o};if(t.preloadOnly){const e=this._emulate(R,t.duration,o);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=L,this._pitching=A,this._padding=z,this._prepareEase(i,!1),this._ease(R(o),(()=>this._afterEase(i)),t),this}isEasing(){return !!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t);}if(!e){const e=this.handlers;e&&e.stop(!1);}return this}_ease(t,i,o){!1===o.animate||0===o.duration?(t(1),i()):(this._easeStart=e.exported.now(),this._easeOptions=o,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback));}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),i=this._onEaseFrame;i&&i(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop();}_normalizeBearing(t,i){t=e.wrap(t,-180,180);const o=Math.abs(t-i);return Math.abs(t-360-i)<o&&(t-=360),Math.abs(t+360-i)<o&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0;}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,i){const o=Math.ceil(15*t/1e3),r=[],n=e(i.clone());for(let e=0;e<=o;e++){const t=n(e/o);r.push(t.clone());}return r}}class Hr{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this);}getDefaultPosition(){return "bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=n("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n("button","mapboxgl-ctrl-attrib-button",this._container),n("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0;}_setElementTitle(e,t){const i=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",i),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",i);}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"));}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const o=i.reduce(((e,t,o)=>(t.value&&(e+=`${t.key}=${t.value}${o<i.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${o}#${Jo(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback");}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink());}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id;}const t=this._map.style._sourceCaches;for(const i in t){const o=t[i];if(o.used){const t=o.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution);}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,i)=>{for(let o=i+1;o<e.length;o++)if(e[o].indexOf(t)>=0)return !1;return !0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const i=e.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null);}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show");}}class Yr{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this);}onAdd(e){this._map=e,this._container=n("div","mapboxgl-ctrl");const t=n("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact);}getDefaultPosition(){return "bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none");}_logoRequired(){if(!this._map.style)return !0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return !0;for(const t in e){const i=e[t].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return !1}return !0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact");}}}class Kr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1;}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,i=t?this._queue.concat(t):this._queue;for(const t of i)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const i of t)if(!i.cancelled&&(i.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1;}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[];}}function Jr(t,i,o){if(t=new e.LngLat(t.lng,t.lat),i){const r=new e.LngLat(t.lng-360,t.lat),n=new e.LngLat(t.lng+360,t.lat),s=360*Math.ceil(Math.abs(t.lng-o.center.lng)/360),a=o.locationPoint(t).distSqr(i),l=i.x<0||i.y<0||i.x>o.width||i.y>o.height;o.locationPoint(r).distSqr(i)<a&&(l||Math.abs(r.lng-o.center.lng)<s)?t=r:o.locationPoint(n).distSqr(i)<a&&(l||Math.abs(n.lng-o.center.lng)<s)&&(t=n);}for(;Math.abs(t.lng-o.center.lng)>180;){const e=o.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=o.width&&e.y<=o.height)break;t.lng>o.center.lng?t.lng-=360:t.lng+=360;}return t}const Qr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class en extends e.Evented{constructor(t,i){if(super(),(t instanceof e.window.HTMLElement||i)&&(t=e.extend({element:t},i)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else {this._defaultMarker=!0,this._element=n("div");const i=41,o=27,r=s("svg",{display:"block",height:i*this._scale+"px",width:o*this._scale+"px",viewBox:`0 0 ${o} ${i}`},this._element),a=s("radialGradient",{id:"shadowGradient"},s("defs",{},r));s("stop",{offset:"10%","stop-opacity":.4},a),s("stop",{offset:"100%","stop-opacity":.05},a),s("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},r),s("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},r),s("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},r),s("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},r),this._offset=e.Point.convert(t&&t.offset||[0,-14]);}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault();})),this._element.addEventListener("mousedown",(e=>{e.preventDefault();}));const o=this._element.classList;for(const e in Qr)o.remove(`mapboxgl-marker-anchor-${e}`);o.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null;}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,i=13.5,o=Math.sqrt(Math.pow(i,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[o,-1*(t-i+o)],"bottom-right":[-o,-1*(t-i+o)],left:[i,-1*(t-i)],right:[-i,-1*(t-i)]}:this._offset;}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false");}return this}_onKeyPress(e){const t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup();}_onMapClick(e){const t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup();}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return !1;const i=e.unproject(t),o=e.getFreeCameraOptions();if(!o.position)return !1;const r=o.position.toLngLat();return r.distanceTo(i)<.9*r.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const i=this._pos;if(!i||i.x<0||i.x>t.transform.width||i.y<0||i.y>t.transform.height)return void this._clearFadeTimer();const o=t.unproject(i);let r;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?r=0:(r=1-t._queryFogOpacity(o),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity=`${r}`,this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null;}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null);}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${Qr[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `;}_calculateXYTransform(){const t=this._pos,i=this._map,o=this.getPitchAlignment();if(!i||!t||"map"!==o)return "";if(!i._showingGlobe()){const e=i.getPitch();return e?`rotateX(${e}deg)`:""}const r=e.radToDeg(e.globeTiltAtLngLat(i.transform,this._lngLat)),n=t.sub(e.globeCenterToScreenPoint(i.transform)),s=Math.abs(n.x)+Math.abs(n.y);if(0===s)return "";const a=r/s;return `rotateX(${-n.y*a}deg) rotateY(${n.x*a}deg)`}_calculateZTransform(){const t=this._pos,i=this._map;if(!i||!t)return "";let o=0;const r=this.getRotationAlignment();if("map"===r)if(i._showingGlobe()){const t=i.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),r=i.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);o=e.radToDeg(Math.atan2(r.y,r.x))-90;}else o=-i.getBearing();else if("horizon"===r){const r=e.smoothstep(4,6,i.getZoom()),n=e.globeCenterToScreenPoint(i.transform);n.y+=r*i.transform.height;const s=t.sub(n),a=e.radToDeg(Math.atan2(s.y,s.x));o=(a>90?a-270:a+90)*(1-r);}return o+=this._rotation,o?`rotateZ(${o}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const i=this._map;i&&(i.transform.renderWorldCopies&&(this._lngLat=Jr(this._lngLat,this._pos,i.transform)),this._pos=i.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM());})):this._pos=this._pos.round(),i._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(i._showingGlobe()||i.getTerrain()||i.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)));})));}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const i=this._map;if(!i)return;const o=this._pointerdownPos,r=this._positionDelta;if(o&&r){if(!this._isDragging){const e=this._clickTolerance||i._clickTolerance;if(t.point.dist(o)<e)return;this._isDragging=!0;}this._pos=t.point.sub(r),this._lngLat=i.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"));}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive";}_addDragHandler(e){const t=this._map,i=this._pos;t&&i&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(i),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp));}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return "auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return "auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const tn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},on=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rn(t=new e.Point(0,0),i="bottom"){if("number"==typeof t){const o=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(i){case"top":return new e.Point(0,t);case"top-left":return new e.Point(o,o);case"top-right":return new e.Point(-o,o);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(o,-o);case"bottom-right":return new e.Point(-o,-o);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[i]||[0,0])}class nn{constructor(e){this.jumpTo(e);}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const i=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-i)+this._end*i}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e;}easeTo(e,t,i){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+i;}}const sn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},an={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},ln={showCompass:!0,showZoom:!0,visualizePitch:!1};class cn{constructor(t,i,o=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new yr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,o&&(this.mousePitch=new br({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener("mousedown",this.mousedown),i.addEventListener("touchstart",this.touchstart,{passive:!1}),i.addEventListener("touchmove",this.touchmove),i.addEventListener("touchend",this.touchend),i.addEventListener("touchcancel",this.reset);}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),h();}move(e,t){const i=this.map,o=this.mouseRotate.mousemoveWindow(e,t),r=o&&o.bearingDelta;if(r&&i.setBearing(i.getBearing()+r),this.mousePitch){const o=this.mousePitch.mousemoveWindow(e,t),r=o&&o.pitchDelta;r&&i.setPitch(i.getPitch()+r);}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp();}offTemp(){u(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup);}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),p(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup);}mousemove(e){this.move(e,p(this.element,e));}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp();}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos));}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos));}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset();}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp();}}const hn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},un={maxWidth:100,unit:"metric"},_n={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},dn={version:e.version,supported:i,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends $r{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},an,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ho(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Kr,this._domRenderTaskQueue=new Kr,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},sn,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new nn(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else {if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container;}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Xr(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Ko("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Hr({customAttribution:t.customAttribution})),this._logoControl=new Yr,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet);})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t));})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t));}));}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=t.onAdd(this);this._controls.push(t);const r=this._controlPositions[i];return -1!==i.indexOf("bottom")?r.insertBefore(o,r.firstChild):r.appendChild(o),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),i&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return "auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const e of this._controls)e._setLanguage&&e._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return "globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,i=t.projection.name;let o;"globe"===i&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),o=!0):"mercator"===i&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),o=!0),o&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate());}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let i;if(i="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),i){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0);}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,i){if("mouseenter"===e||"mouseover"===e){let o=!1;const r=r=>{const n=t.filter((e=>this.getLayer(e))),s=n.length?this.queryRenderedFeatures(r.point,{layers:n}):[];s.length?o||(o=!0,i.call(this,new ar(e,this,r.originalEvent,{features:s}))):o=!1;},n=()=>{o=!1;};return {layers:new Set(t),listener:i,delegates:{mousemove:r,mouseout:n}}}if("mouseleave"===e||"mouseout"===e){let o=!1;const r=r=>{const n=t.filter((e=>this.getLayer(e)));(n.length?this.queryRenderedFeatures(r.point,{layers:n}):[]).length?o=!0:o&&(o=!1,i.call(this,new ar(e,this,r.originalEvent)));},n=t=>{o&&(o=!1,i.call(this,new ar(e,this,t.originalEvent)));};return {layers:new Set(t),listener:i,delegates:{mousemove:r,mouseout:n}}}{const o=e=>{const o=t.filter((e=>this.getLayer(e))),r=o.length?this.queryRenderedFeatures(e.point,{layers:o}):[];r.length&&(e.features=r,i.call(this,e),delete e.features);};return {layers:new Set(t),listener:i,delegates:{[e]:o}}}}on(e,t,i){if(void 0===i)return super.on(e,t);Array.isArray(t)||(t=[t]);const o=this._createDelegatedListener(e,t,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(o);for(const e in o.delegates)this.on(e,o.delegates[e]);return this}once(e,t,i){if(void 0===i)return super.once(e,t);Array.isArray(t)||(t=[t]);const o=this._createDelegatedListener(e,t,i);for(const e in o.delegates)this.once(e,o.delegates[e]);return this}off(e,t,i){if(void 0===i)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const o=(e,t)=>{if(e.size!==t.size)return !1;for(const i of e)if(!t.has(i))return !1;return !0},r=this._delegatedListeners?this._delegatedListeners[e]:void 0;return r&&(e=>{for(let r=0;r<e.length;r++){const n=e[r];if(n.listener===i&&o(n.layers,t)){for(const e in n.delegates)this.off(e,n.delegates[e]);return e.splice(r,1),this}}})(r),this}queryRenderedFeatures(t,i){return this.style?(void 0!==i||void 0===t||t instanceof e.Point||Array.isArray(t)||(i=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:i}=this.transform.projection;return "globe"!==i&&"mercator"!==i&&e.warnOnce(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,i){return !1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(t,i))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Kt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Kt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty());}_diffStyle(t,i){if("string"==typeof t){const o=this._requestManager.normalizeStyleURL(t),r=this._requestManager.transformRequest(o,e.ResourceType.Style);e.getJSON(r,((t,o)=>{t?this.fire(new e.ErrorEvent(t)):o&&this._updateDiff(o,i);}));}else "object"==typeof t&&this._updateDiff(t,i);}_updateDiff(t,i){try{this.style.setState(t)&&this._update(!0);}catch(o){e.warnOnce(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(t,i);}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return !!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const i=e[t]._tiles;for(const e in i){const t=i[e];if("loaded"!==t.state&&"errored"!==t.state)return !1}}return !0}addSourceType(e,t,i){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i);}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,i,{pixelRatio:o=1,sdf:r=!1,stretchX:n,stretchY:s,content:a}={}){if(this._lazyInitEmptyStyle(),i instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&i instanceof e.window.ImageBitmap){const{width:l,height:c,data:h}=e.exported.getImageData(i);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},h),pixelRatio:o,stretchX:n,stretchY:s,content:a,sdf:r,version:0});}else if(void 0===i.width||void 0===i.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else {const{width:l,height:c}=i,h=i;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(h.data)),pixelRatio:o,stretchX:n,stretchY:s,content:a,sdf:r,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t);}}updateImage(t,i){const o=this.style.getImage(t);if(!o)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=i instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&i instanceof e.window.ImageBitmap?e.exported.getImageData(i):i,{width:n,height:s}=r;void 0!==n&&void 0!==s?n===o.data.width&&s===o.data.height?(o.data.replace(r.data,!(i instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&i instanceof e.window.ImageBitmap)),this.style.updateImage(t,o)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${n}, ${s})\n                must be that same as the previous version of the image\n                (${o.data.width}, ${o.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e);}loadImage(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,o)=>{i(t,o instanceof e.window.HTMLImageElement?e.exported.getImageData(o):o);}));}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}setFilter(e,t,i={}){return this.style.setFilter(e,t,i),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,i,o={}){return this.style.setPaintProperty(e,t,i,o),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,i,o={}){return this.style.setLayoutProperty(e,t,i,o),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let o,r,n,s=this._container;for(;s&&(!r||!n);){const t=e.window.getComputedStyle(s).transform;t&&"none"!==t&&(o=t.match(/matrix.*\((.+)\)/)[1].split(", "),o[0]&&"0"!==o[0]&&"1"!==o[0]&&(r=o[0]),o[3]&&"0"!==o[3]&&"1"!==o[3]&&(n=o[3])),s=s.parentElement;}this._containerWidth=r?Math.abs(t/r):t,this._containerHeight=n?Math.abs(i/n):i;}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.");}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=n("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=n("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=n("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const i=this._controlContainer=n("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{o[e]=n("div",`mapboxgl-ctrl-${e}`,i);})),this._container.addEventListener("scroll",this._onMapScroll,!1);}_resizeCanvas(t,i){const o=e.exported.devicePixelRatio||1;this._canvas.width=o*Math.ceil(t),this._canvas.height=o*Math.ceil(i),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${i}px`;}_addMarker(e){this._markers.push(e);}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1);}_addPopup(e){this._popups.push(e);}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1);}_setupPainter(){const t=e.extend({},i.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._useWebGL2&&this._canvas.getContext("webgl2",t),r=o||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);r?(this._useWebGL2&&!o&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(r,!0),this.painter=new Bo(r,this.transform,!!o),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0);})),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}));}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}));}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return !this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e);}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e);}_render(t){let i;const o=this.painter.context.extTimerQuery,r=e.exported.now();if(this.listens("gpu-timing-frame")&&(i=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const n=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,i=this.transform.pitch,o=e.exported.now(),r=new e.EvaluationParameters(t,{now:o,fadeDuration:n,pitch:i,transition:this.style.getTransition()});this.style.update(r);}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let s=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),s=this._updateAverageElevation(r),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):s=this._updateAverageElevation(r),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const t=e.exported.now()-r;o.endQueryEXT(o.TIME_ELAPSED_EXT,i),setTimeout((()=>{const n=o.getQueryObjectEXT(i,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:n})),e.window.performance.mark("frame-gpu",{startTime:r,detail:{gpuTime:n}});}),50);}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:i}));}),50);}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const i=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:i}));}),50);}const a=this._sourcesDirty||this._styleDirty||this._placementDirty||s;if(a||this._repaint)this.triggerRepaint();else {const t=!this.isMoving()&&this.loaded();if(t&&(s=this._updateAverageElevation(r,!0)),s)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1;}}!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate());}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update();}_updateAverageElevation(e,t=!1){const i=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&i(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let o=this.transform.sampleAverageElevation(),r=!1;this.transform.elevation&&(r=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(o)?o=0:this._averageElevationLastSampledAt=e;const n=Math.abs(t-o);if(n>1){if(this._isInitialLoad||r)return this._averageElevation.jumpTo(o),i(o);this._averageElevation.easeTo(o,e,300);}else if(n>1e-4)return this._averageElevation.jumpTo(o),i(o)}return !!this._averageElevation.isEasing(e)&&i(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Yr&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")));}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}));}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e);}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const i=this.painter.context.gl,o=i.createFramebuffer();function r(e){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0);const t=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,t),t}return i.bindFramebuffer(i.FRAMEBUFFER,o),this._canvasPixelComparison(r(e),t.canvasCopies.map(r),t.timeStamps)}_canvasPixelComparison(e,t,i){let o=i[1]-i[0];const r=e.length/4;for(let n=0;n<t.length;n++){const s=t[n];let a=0;for(let t=0;t<s.length;t+=4)s[t]===e[t]&&s[t+1]===e[t+1]&&s[t+2]===e[t+2]&&s[t+3]===e[t+3]&&(a+=1);o+=(i[n+2]-i[n+1])*(1-a/r);}return o}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"));}triggerRepaint(){this._triggerFrame(!0);}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e);})));}_preloadTiles(t){const i=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(i,((e,i)=>e._preloadTiles(t,i)),(()=>{this.triggerRepaint();})),this}_onWindowOnline(){this._update();}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update();}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++;}get showTileBoundaries(){return !!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update());}get showTerrainWireframe(){return !!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update());}get speedIndexTiming(){return !!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update());}get showPadding(){return !!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update());}get showCollisionBoxes(){return !!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update());}get showOverdrawInspector(){return !!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update());}get repaint(){return !!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint());}get vertices(){return !!this._vertices}set vertices(e){this._vertices=e,this._update();}get showTileAABBs(){return !!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update());}_setCacheLimits(t,i){e.setCacheLimits(t,i);}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},ln,t),this._container=n("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e});})),n("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e});})),n("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}));})),this._compassIcon=n("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"));}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),i=t===e.getMaxZoom(),o=t===e.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString());}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t);}));}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cn(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0);}_createButton(e,t){const i=n("button",e,this._container);return i.type="button",i.addEventListener("click",t),i}_setButtonTitle(e,t){if(!this._map)return;const i=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",i),e.firstElementChild&&e.firstElementChild.setAttribute("title",i);}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},hn,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Yo(this._updateMarkerRotation,20),this._numberOfWatches=0;}onAdd(e){return this._map=e,this._container=n("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1;}_checkGeolocationSupport(t){const i=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e);};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>i("denied"!==e.state))).catch((()=>i())):i();}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),i=e.coords;return !!t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish();}}_updateCamera(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude),o=t.coords.accuracy,r=this._map.getBearing(),n=e.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(o),n,{geolocateSource:!0});}_updateMarker(t){if(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius();}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove();}_updateCircleRadius(){const t=this._map.transform,i=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,o=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`;}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius();}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0));}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch();}else {if(3===t.code&&this._noTimeout)return;this._setErrorState();}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish();}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0;}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=n("button","mapboxgl-ctrl-geolocate",this._container),n("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t);}else {const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e);}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n("div","mapboxgl-user-location"),this._dotElement.appendChild(n("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(n("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new en({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=n("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new en({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")));}));}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled());}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener();}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return !0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation);};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t();})).catch(console.error):t();}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null);}},AttributionControl:Hr,ScaleControl:class{constructor(t){this.options=e.extend({},un,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return !1}}(),e.bindAll(["_update","_setScale","setUnit"],this);}getDefaultPosition(){return "bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,i=t._containerHeight/2,o=t._containerWidth/2-e/2,r=t.unproject([o,i]),n=t.unproject([o+e,i]),s=r.distanceTo(n);if("imperial"===this.options.unit){const t=3.2808*s;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot");}else "nautical"===this.options.unit?this._setScale(e,s/1852,"nautical-mile"):s>=1e3?this._setScale(e,s/1e3,"kilometer"):this._setScale(e,s,"meter");}_setScale(e,t,i){this._map._requestDomTask((()=>{const o=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}(t),r=o/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==i?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:i}).format(o):`${o}&nbsp;${_n[i]}`,this._container.style.width=e*r+"px";}));}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=n("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0;}_setLanguage(e){this._language=e,this._update();}setUnit(e){this.options.unit=e,this._update();}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange");}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon);}_checkFullscreenSupport(){return !(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=n("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon);}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e);}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle());}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen();}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(tn),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]);}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return !!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const i=e.window.document.createDocumentFragment(),o=e.window.document.createElement("body");let r;for(o.innerHTML=t;r=o.firstChild,r;)i.appendChild(r);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=n("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=n("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose);}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point);}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,i=this._container,o=this._pos;if(!t||!i||!o)return "bottom";const r=i.offsetWidth,n=i.offsetHeight,s=o.x<r/2,a=o.x>t.transform.width-r/2;if(o.y+e<n)return s?"top-left":a?"top-right":"top";if(o.y>t.transform.height-n){if(s)return "bottom-left";if(a)return "bottom-right"}return s?"left":a?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ");}_update(t){const i=this._map,o=this._content;if(!i||!this._lngLat&&!this._trackPointer||!o)return;let r=this._container;if(r||(r=this._container=n("div","mapboxgl-popup",i.getContainer()),this._tip=n("div","mapboxgl-popup-tip",r),r.appendChild(o)),this.options.maxWidth&&r.style.maxWidth!==this.options.maxWidth&&(r.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jr(this._lngLat,this._pos,i.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:i.project(this._lngLat),o=rn(this.options.offset),r=this._anchor=this._getAnchor(o.y),n=rn(this.options.offset,r),s=e.add(n).round();i._requestDomTask((()=>{this._container&&r&&(this._container.style.transform=`${Qr[r]} translate(${s.x}px,${s.y}px)`);}));}if(!this._marker&&i._showingGlobe()){const t=e.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(t);}this._updateClassList();}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(on);e&&e.focus();}_onClose(){this.remove();}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none");}},Marker:en,Style:Kt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:jo,Evented:e.Evented,config:e.config,prewarm:function(){Ue().acquire(Be);},clearPrewarmedResources:function(){const e=Fe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Be),Fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"));},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t;},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t;},get workerCount(){return ke.workerCount},set workerCount(e){ke.workerCount=e;},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t;},clearStorage(t){e.clearTileCache(t);},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return dn}));

//
// Our custom intro provides a specialized "define()" function, called by the
// AMD modules below, that sets up the worker blob URL and then executes the
// main module, storing its exported value as 'mapboxgl'


var mapboxgl$1 = mapboxgl;

return mapboxgl$1;

}));


}).call(this)}).call(this,require('_process'))

},{"_process":7}],7:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAnimation = void 0;
const all_1 = require("./animations/all");
function getAnimation(type, el, delay) {
    var _a;
    if (!all_1.animations[type]) {
        console.warn(`animation type "${type}" does not exist`);
        return null;
    }
    return (_a = all_1.animations[type]) === null || _a === void 0 ? void 0 : _a.call(all_1.animations, el, delay);
}
exports.getAnimation = getAnimation;

},{"./animations/all":19}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBreakpoint = void 0;
function getBreakpoint() {
    const before = window.getComputedStyle(document.querySelector('body'), ':before');
    const breakpoint = before.getPropertyValue('content').replace(/[\"\']/g, '');
    return {
        desktop: breakpoint === 'desktop',
        phone: breakpoint === 'phone',
        tablet: breakpoint === 'tablet',
        value: breakpoint,
    };
}
exports.getBreakpoint = getBreakpoint;

},{}],10:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBrowser = void 0;
function getBrowser() {
    const ua = window.navigator.userAgent;
    const browser = {
        mobile: !!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent || navigator.vendor || window.opera) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent || navigator.vendor || window.opera).substr(0, 4))),
        phone: !!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent || navigator.vendor || window.opera) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent || navigator.vendor || window.opera).substr(0, 4))),
        android: /Android/i.test(ua),
        ios: ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) || (navigator.userAgent.includes('Mac') && 'ontouchend' in document),
        mac: navigator.platform.toUpperCase().indexOf('MAC') >= 0,
        ie: ua.indexOf('MSIE ') > 0 || !!ua.match(/Trident.*rv\:11\./),
        edge: /Edge/.test(navigator.userAgent),
        firefox: ua.toLowerCase().indexOf('firefox') > -1,
        safari: /iP(ad|hone|od).+Version\/[\d\.]+.*Safari/i.test(navigator.userAgent) || Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0 || (((p) => p.toString() === '[object SafariRemoteNotification]')(!window.safari || safari.pushNotification)),
        chrome: (ua.toLowerCase().indexOf('chrome') > -1) && (navigator.vendor.toLowerCase().indexOf('google') > -1),
        touch: ('ontouchstart' in window) || (navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0),
    };
    const htmlClassList = document.querySelector('html').classList;
    htmlClassList.toggle('mac', browser.ios || browser.mac);
    htmlClassList.toggle('mobile', browser.mobile);
    htmlClassList.toggle('phone', browser.phone && browser.touch);
    htmlClassList.toggle('ios', browser.ios);
    htmlClassList.toggle('firefox', browser.firefox);
    htmlClassList.toggle('safari', browser.safari);
    htmlClassList.toggle('ie', browser.ie);
    htmlClassList.toggle('touch', browser.touch);
    htmlClassList.toggle('no-touch', !browser.touch);
    htmlClassList.remove('no-js');
    return browser;
}
exports.getBrowser = getBrowser;

},{}],11:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.pages = exports.components = void 0;
const Page_1 = require("./pages/Page");
const LightboxNav_1 = require("./components/Lightbox/LightboxNav");
const LightboxTranscript_1 = require("./components/Lightbox/LightboxTranscript");
const LightboxSlider_1 = require("./components/Lightbox/LightboxSlider");
const Load_1 = require("./components/Load");
const Button_1 = require("./components/Button");
const Modal_1 = require("./components/Modal");
const More_1 = require("./components/More");
const Accordeon_1 = require("./components/Accordeon");
const AccordeonList_1 = require("./components/AccordeonList");
const WrappedText_1 = require("./components/WrappedText");
const Player_1 = require("./components/Player/Player");
const Video_1 = require("./components/Player/Video");
const FilterLetters_1 = require("./components/FilterLetters");
const Map_1 = require("./components/Map");
const Collections_1 = require("./components/Collections");
exports.components = {
    Accordeon: Accordeon_1.Accordeon,
    AccordeonList: AccordeonList_1.AccordeonList,
    Button: Button_1.Button,
    Collections: Collections_1.Collections,
    FilterLetters: FilterLetters_1.FilterLetters,
    Load: Load_1.Load,
    Map: Map_1.Map,
    Modal: Modal_1.Modal,
    More: More_1.More,
    Player: Player_1.Player,
    Video: Video_1.Video,
    LightboxNav: LightboxNav_1.LightboxNav,
    LightboxTranscript: LightboxTranscript_1.LightboxTranscript,
    LightboxSlider: LightboxSlider_1.LightboxSlider,
    WrappedText: WrappedText_1.WrappedText,
};
exports.pages = { Page: Page_1.Page };

},{"./components/Accordeon":31,"./components/AccordeonList":32,"./components/Button":34,"./components/Collections":36,"./components/FilterLetters":38,"./components/Lightbox/LightboxNav":40,"./components/Lightbox/LightboxSlider":41,"./components/Lightbox/LightboxTranscript":42,"./components/Load":43,"./components/Map":45,"./components/Modal":46,"./components/More":47,"./components/Player/Player":49,"./components/Player/Video":58,"./components/WrappedText":61,"./pages/Page":62}],12:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Handler = void 0;
class Handler {
    constructor() {
        this.events = {};
    }
    on(eventName, handler) {
        if (!this.events[eventName]) {
            this.events[eventName] = [];
        }
        this.events[eventName].push(handler);
        return this;
    }
    off(eventName, handler) {
        if (typeof eventName === 'undefined') {
            this.events = {};
            return this;
        }
        if (typeof handler === 'undefined' && this.events[eventName]) {
            this.events[eventName] = [];
            return this;
        }
        if (!this.events[eventName]) {
            return this;
        }
        const index = this.events[eventName].indexOf(handler);
        if (index > -1) {
            this.events[eventName].splice(index, 1);
        }
        return this;
    }
    trigger(eventName, ...args) {
        if (!this.events[eventName]) {
            return;
        }
        this.events[eventName].forEach(event => event(...args));
    }
    destroy() {
        this.events = {};
    }
}
exports.Handler = Handler;

},{}],13:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Menu = void 0;
const gsap_1 = require("gsap/dist/gsap");
const AudioPlayer_1 = require("./components/AudioPlayer");
const Site_1 = require("./Site");
const Utils_1 = require("./Utils");
class Menu {
    constructor(view) {
        this.view = view;
        this.isOpen = false;
        this.isAnimating = false;
        this.setupHovers = () => {
            this.items.forEach(item => {
                const vertical = item.querySelector('.js-arrow-vertical');
                const horizontal = item.querySelector('.js-arrow-horizontal');
                const triangle = item.querySelector('.js-arrow-triangle');
                const link = item.querySelector('.js-menu-main-link');
                if ([vertical, horizontal, triangle, link].some(el => !el))
                    return;
                gsap_1.gsap.set(vertical, { scaleY: 0 });
                gsap_1.gsap.set(horizontal, { scaleX: 0 });
                gsap_1.gsap.set(triangle, { scale: 0 });
                const tl = gsap_1.gsap.timeline({ paused: true, ease: Site_1.easing });
                this.timelines.push(tl);
                const duration = 0.3;
                tl
                    .to(vertical, {
                    scaleY: 1,
                    duration: duration * 0.5,
                    transformOrigin: 'bottom center',
                })
                    .to(horizontal, {
                    scaleX: 1,
                    duration,
                    transformOrigin: 'left center',
                }, 'arrow')
                    .fromTo(triangle, { x: () => -horizontal.offsetWidth }, {
                    x: 0,
                    scale: 1,
                    duration,
                    transformOrigin: 'left center',
                }, 'arrow');
                item.addEventListener('mouseenter', () => {
                    Site_1.breakpoint.desktop && tl.play();
                });
                item.addEventListener('mouseleave', () => {
                    Site_1.breakpoint.desktop && tl.reverse();
                });
                link.addEventListener('focus', () => {
                    Site_1.breakpoint.desktop && tl.play();
                });
                link.addEventListener('blur', () => {
                    Site_1.breakpoint.desktop && tl.reverse();
                });
            });
        };
        this.onAnimationEnd = () => {
            this.isAnimating = false;
            if (!this.isOpen) {
                this.view.style.display = 'none';
            }
        };
        this.onToggle = () => {
            this.isOpen ? this.close() : this.open();
        };
        this.open = () => {
            if (this.isAnimating)
                return;
            this.isAnimating = true;
            this.isOpen = true;
            this.view.style.display = 'flex';
            document.body.classList.add('has-menu-open');
            gsap_1.gsap.timeline()
                .addLabel('init')
                .fromTo(this.labels, { yPercent: 120 }, {
                yPercent: 0,
                duration: 0.9,
                stagger: 0.15,
                ease: 'power2.out',
            }, 'init')
                .fromTo(this.lines, { scaleX: 0 }, {
                scaleX: 1,
                duration: 1,
                stagger: 0.15,
                ease: 'power2.out',
            }, 'init')
                .fromTo(this.links, { xPercent: 100 }, {
                xPercent: 0,
                duration: 0.6,
                stagger: 0.1,
                ease: 'power2.out',
            }, '-=.8')
                .fromTo(this.searchIcon, { scale: 0 }, {
                scale: 1,
                duration: 0.4,
                ease: 'power2.out',
            }, '-=.6')
                .fromTo(this.searchLabel, { xPercent: 100 }, {
                xPercent: 0,
                duration: 0.6,
                clearProps: 'all',
                ease: 'power2.out',
            }, '-=.4');
            AudioPlayer_1.AudioPlayer.closeAudioPlayer();
        };
        this.close = () => {
            if (this.isAnimating)
                return;
            this.isAnimating = true;
            this.isOpen = false;
            document.body.classList.remove('has-menu-open');
        };
        this.elToggle = document.querySelector('.js-toggle-menu');
        this.closeBtn = this.view.querySelector('.js-menu-close');
        this.wrapEl = document.getElementById('wrapper');
        this.items = this.view.querySelectorAll('.js-menu-item');
        this.labels = this.view.querySelectorAll('.js-menu-label');
        this.lines = this.view.querySelectorAll('.js-menu-line');
        this.links = this.view.querySelectorAll('.js-menu-link');
        this.searchLabel = this.view.querySelector('.js-menu-search-label');
        this.searchIcon = this.view.querySelector('.js-menu-search-svg');
        this.timelines = [];
        this.bind();
    }
    onState() {
        this.isOpen && this.close();
    }
    bind() {
        this.elToggle && this.elToggle.addEventListener('click', this.onToggle);
        this.closeBtn && this.closeBtn.addEventListener('click', this.close);
        this.setupHovers();
        this.wrapEl.addEventListener('transitionend', () => {
            this.onAnimationEnd();
        });
        window.addEventListener('resize', (0, Utils_1.debounce)(() => this.timelines.forEach(tl => tl.invalidate())));
    }
}
exports.Menu = Menu;

},{"./Site":17,"./Utils":18,"./components/AudioPlayer":33,"gsap/dist/gsap":5}],14:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PushStates = exports.PushStatesEvents = void 0;
const Utils_1 = require("./Utils");
const Scroll_1 = __importDefault(require("./Scroll"));
const Handler_1 = require("./Handler");
class PushStatesEvents {
}
exports.PushStatesEvents = PushStatesEvents;
PushStatesEvents.CHANGE = 'state';
PushStatesEvents.PROGRESS = 'progress';
class PushStates extends Handler_1.Handler {
    static setTitle(title) {
        const content = document.getElementById('content');
        const dataTitle = content.querySelector('[data-title]');
        document.title = title || dataTitle.dataset.title;
    }
    static goTo(location, replace) {
        const pathname = location.replace(window.location.protocol + window.location.host, '');
        const isDifferent = pathname !== window.location.pathname;
        if (replace) {
            window.history.replaceState({ randomData: Math.random() }, document.title, pathname);
        }
        else {
            window.history.pushState({ randomData: Math.random() }, document.title, pathname);
        }
        PushStates.instance.onState();
        return isDifferent;
    }
    static changePath(location, replace, title) {
        PushStates.noChange = true;
        const changed = PushStates.goTo(location, replace || true);
        PushStates.noChange = false;
        if (changed) {
            PushStates.setTitle(title || document.title);
        }
    }
    static bind(target, elementItself) {
        if (!elementItself) {
            PushStates.instance.bindLinks(target);
        }
        else {
            PushStates.instance.bindLink(target);
        }
    }
    static back(url) {
        if (window.history.length - PushStates.initialHistoryLength > 0) {
            window.history.back();
        }
        else if (url) {
            window.history.replaceState({ randomData: Math.random() }, document.title, url);
            PushStates.instance.onState();
        }
        else {
            window.history.replaceState({ randomData: Math.random() }, document.title, '/');
            PushStates.instance.onState();
        }
    }
    static reload() {
        PushStates.instance.trigger(PushStatesEvents.CHANGE);
    }
    constructor() {
        super();
        this.onClick = (e) => {
            e.preventDefault();
            const self = e.currentTarget;
            const state = self.getAttribute('href').replace(`http://${window.location.host}`, '');
            const type = self.dataset.history;
            if (type === 'back') {
                PushStates.back(state);
            }
            else if (type === 'replace') {
                window.history.replaceState({ randomData: Math.random() }, document.title, state);
                this.onState();
            }
            else {
                Scroll_1.default.resetScrollCache(state);
                window.history.pushState({ randomData: Math.random() }, document.title, state);
                this.onState();
            }
        };
        this.onState = () => {
            this.setActiveLinks();
            if (!PushStates.noChange) {
                this.trigger(PushStatesEvents.CHANGE);
            }
        };
        this.bindLinks();
        window.addEventListener('popstate', this.onState, { passive: true });
        window.history.scrollRestoration = 'manual';
        setTimeout(() => { window.history.scrollRestoration = 'manual'; }, 1000);
        PushStates.instance = this;
        PushStates.initialHistoryLength = window.history.length;
        this.currentUrl = (0, Utils_1.normalizeUrl)(window.location.pathname + window.location.search);
        this.setActiveLinks();
    }
    load() {
        if (this.request) {
            this.request.abort();
        }
        const { pathname } = window.location;
        const search = window.location.search || '';
        const url = pathname + search;
        window.clearTimeout(this.timeout);
        this.timeout = setTimeout(() => {
            if (this.request) {
                window.location.reload();
            }
        }, PushStates.TIME_LIMIT);
        return new Promise((resolve, reject) => {
            this.request = new XMLHttpRequest();
            this.request.open('GET', url);
            this.request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
            this.request.onload = () => {
                if (this.request.status === 200) {
                    this.loadedData = this.request.responseText;
                    this.currentUrl = (0, Utils_1.normalizeUrl)(url);
                    this.trigger(PushStatesEvents.PROGRESS, 1);
                    resolve();
                }
                else {
                    reject(Error(this.request.statusText));
                    if (this.request.statusText !== 'abort') {
                        window.location.reload();
                    }
                }
                this.request = null;
                window.clearTimeout(this.timeout);
            };
            this.request.onerror = () => {
                reject(Error('Network Error'));
                window.clearTimeout(this.timeout);
                this.request = null;
            };
            this.request.onprogress = e => {
                if (e.lengthComputable) {
                    this.trigger(PushStatesEvents.PROGRESS, e.loaded / e.total);
                }
            };
            this.request.send();
        });
    }
    isRendered(pathname) {
        return this.currentUrl === (0, Utils_1.normalizeUrl)(pathname || window.location.pathname + window.location.search);
    }
    render() {
        const data = this.loadedData.trim();
        const containers = document.querySelectorAll('.js-replace[id], #content');
        let renderedCount = 0;
        if (containers.length > 0) {
            containers.forEach((container, index) => {
                const force = index === 0 && containers.length === 1;
                renderedCount += this.renderElement(container, data, force) ? 1 : 0;
            });
        }
        if (renderedCount === 0 && containers.length > 0) {
            this.renderElement(document.getElementById('content'), data, true);
        }
        this.bindLinks();
        this.setActiveLinks();
        window.document.dispatchEvent(new Event('ajax_loaded'));
        window.history.scrollRestoration = 'manual';
        setTimeout(() => { window.history.scrollRestoration = 'manual'; }, 1000);
    }
    renderElement(el, data, forcePlain) {
        let code = null;
        if (!el.id) {
            console.warn('Rendered element must have an `id` attribute!');
            return false;
        }
        const container = `#${el.id}`;
        if (!!forcePlain && data.indexOf('<article') === 0 && el.id === 'content') {
            code = data;
        }
        else {
            const parser = new DOMParser();
            const htmlDocument = parser.parseFromString(data, 'text/html');
            const foundElement = htmlDocument.documentElement.querySelector(container);
            code = foundElement ? foundElement.innerHTML : null;
        }
        if (!code) {
            console.info(`Couldn't rerender #${el.id} element`);
            return false;
        }
        const containerEl = document.getElementById(el.id);
        containerEl.style.display = 'none';
        while (containerEl.firstChild)
            containerEl.removeChild(containerEl.firstChild);
        containerEl.innerHTML = code || data;
        containerEl.style.display = 'block';
        return true;
    }
    bindLink(target) {
        target.removeEventListener('click', this.onClick);
        target.addEventListener('click', this.onClick);
    }
    bindLinks(target) {
        const t = target !== null && target !== void 0 ? target : document.body;
        const links = t.querySelectorAll('a:not([data-history="false"]):not([data-component="More"]):not([data-component="Load"]):not([data-api]):not([download]):not([data-modal]):not([href^="#"]):not([href$=".jpg"]):not([target="_blank"]):not([href^="mailto:"]):not([href^="tel:"]):not([data-poczta]):not([data-login]):not([data-lang]):not([data-more]):not([data-filters])');
        links.forEach(el => {
            el.removeEventListener('click', this.onClick);
            el.addEventListener('click', this.onClick);
        });
    }
    setActiveLinks() {
        [...document.querySelectorAll('a[href]')].map(el => el.classList.remove('is-active'));
        [...document.querySelectorAll(`a[href^="${window.location.pathname}"]`)]
            .forEach(el => el.classList.add('is-active'));
        const path = `/${window.location.pathname.split('/')[1]}`;
        [...document.querySelectorAll(`.nav a[href^="${path}"]`)]
            .forEach(el => {
            (el === null || el === void 0 ? void 0 : el.href) !== '/' && el.classList.add('is-active');
        });
    }
}
exports.PushStates = PushStates;
PushStates.TIME_LIMIT = 10000;
PushStates.noChange = false;

},{"./Handler":12,"./Scroll":15,"./Utils":18}],15:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
const gsap_1 = require("gsap/dist/gsap");
const ScrollTrigger_1 = require("gsap/dist/ScrollTrigger");
const ScrollToPlugin_1 = require("gsap/dist/ScrollToPlugin");
const Animate_1 = require("./Animate");
const all_1 = require("./animations/all");
const Utils_1 = require("./Utils");
gsap_1.gsap.registerPlugin(ScrollTrigger_1.ScrollTrigger, ScrollToPlugin_1.ScrollToPlugin);
class Scroll {
    constructor() {
        this.onHashClickHandler = e => {
            e.preventDefault();
            e.stopPropagation();
            const { hash } = e.currentTarget;
            const target = document.querySelector(hash);
            target
                ? _a.scrollTo({ el: target })
                : console.warn('There is no %s element', hash);
        };
    }
    static resize() {
        ScrollTrigger_1.ScrollTrigger.refresh();
    }
    static enable() {
        _a.enabled = true;
    }
    static disable() {
        _a.enabled = false;
    }
    static start() {
        window.addEventListener('scroll', _a.onScroll);
    }
    static stop() {
        window.removeEventListener('scroll', _a.onScroll);
    }
    static resetScrollCache(pathname) {
        _a.scrollCache[pathname] = 0;
    }
    static scrollToCached() {
        const y = _a.scrollCache[(0, Utils_1.normalizeUrl)(window.location.pathname + window.location.search)] || 0;
        _a.scrollTo({ y, duration: 0 });
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            ScrollTrigger_1.ScrollTrigger.clearScrollMemory('manual');
            this.bindHashClick();
            this.setup();
            _a.resize();
        });
    }
    setup() {
        console.log('scroll setup', gsap_1.gsap.version);
        _a.matchMedia = gsap_1.gsap.matchMedia();
        [...document.querySelectorAll('[data-animation]')]
            .map((el) => ({
            el,
            type: el.dataset.animation,
            delay: parseInt(el.dataset.delay, 10) || 0,
        })).forEach((item) => {
            if (all_1.animations[item.type]) {
                ScrollTrigger_1.ScrollTrigger.create({
                    trigger: item.el,
                    toggleActions: 'play pause resume reset',
                    animation: (0, Animate_1.getAnimation)(item.type, item.el, item.delay || 0),
                });
            }
            else {
                console.warn(`animation type "${item.type}" does not exist`, item.el);
            }
        });
        [...document.querySelectorAll('[data-scroll]')]
            .map((el) => ({
            el,
            type: el.dataset.scroll,
            delay: parseInt(el.dataset.delay, 10) || 0,
        })).forEach((item) => {
            if (all_1.scrolls[item.type]) {
                all_1.scrolls[item.type](item.el, item.delay);
            }
            else {
                console.warn(`scroll type "${item.type}" does not exist`, item.el);
            }
        });
        [...document.querySelectorAll('[data-parallax]')]
            .map((el) => ({
            el,
            parallax: parseInt(el.dataset.parallax, 10),
            delay: el.dataset.delay || 0,
        })).forEach((item) => {
            gsap_1.gsap.fromTo(item.el, { y: -item.parallax * (window.innerWidth / 1280) }, {
                y: () => item.parallax * (window.innerWidth / 1280),
                ease: 'none',
                scrollTrigger: {
                    trigger: item.el,
                    scrub: true,
                },
            });
        });
    }
    revertAnimations() {
        var _b;
        (_b = _a.matchMedia) === null || _b === void 0 ? void 0 : _b.revert();
    }
    bindHashClick() {
        document.querySelectorAll('a[href^="#"]:not(a[href="#"])').forEach((el) => {
            el.addEventListener('click', this.onHashClickHandler);
        });
    }
}
_a = Scroll;
Scroll.matchMedia = null;
Scroll.enabled = true;
Scroll.scrollCache = {};
Scroll.onScroll = () => {
    if (!_a.enabled) {
        return;
    }
    _a.scrollCache[window.location.pathname] = window.scrollY;
};
Scroll.scrollTo = ({ el, y, duration = 1, ease = 'none', offsetY = 0, }) => __awaiter(void 0, void 0, void 0, function* () {
    return new Promise(resolve => {
        gsap_1.gsap.to(window, {
            scrollTo: {
                y: y !== null && y !== void 0 ? y : el,
                x: 0,
                offsetY,
            },
            duration,
            ease,
            onComplete: () => resolve(),
        });
    });
});
Scroll.scrollToTop = (fast) => __awaiter(void 0, void 0, void 0, function* () {
    yield _a.scrollTo({
        y: 0,
        el: document.querySelector('[data-page]'),
        duration: fast ? 0 : 2,
    });
});
exports.default = Scroll;

},{"./Animate":8,"./Utils":18,"./animations/all":19,"gsap/dist/ScrollToPlugin":2,"gsap/dist/ScrollTrigger":3,"gsap/dist/gsap":5}],16:[function(require,module,exports){
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Search = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Site_1 = require("./Site");
const API_1 = require("./widgets/API");
const PushStates_1 = require("./PushStates");
const Templates_1 = require("./templates/Templates");
const Utils = __importStar(require("./Utils"));
class Search {
    constructor(view) {
        this.view = view;
        this.onFormReset = () => {
            this.input.value = '';
            this.animationHide();
            this.view.classList.remove('has-value');
        };
        this.onFormSubmit = (e) => {
            e.preventDefault();
            const pathname = this.form.getAttribute('action') || window.location.pathname;
            const params = Utils.getQueryString(this.form);
            PushStates_1.PushStates.goTo(`${pathname}?${params}`);
        };
        this.onType = (e) => {
            e.preventDefault();
            const { value } = this.input;
            this.view.classList.toggle('has-value', value.length > 0);
            if (value.length < this.settings.liveMinLen) {
                this.animationHide();
                return;
            }
            clearTimeout(this.timer);
            this.timer = setTimeout(() => {
                const formData = { url: this.form.getAttribute('data-api-url') };
                API_1.API.callIt(formData, this.form, (data, el, response) => {
                    this.liveResponse(data, el, response);
                });
            }, this.settings.timeout);
        };
        this.init();
    }
    onState() {
        this.onFormReset();
        clearTimeout(this.timer);
    }
    init() {
        this.settings = {
            liveMinLen: 3,
            timeout: 250,
        };
        this.searchBg = this.view.querySelector('.js-search-bg');
        this.searchContent = this.view.querySelector('.js-search-content');
        this.btnClose = document.querySelector('.js-search-close');
        this.input = this.view.querySelector('#search-inp');
        this.form = this.view.querySelector('.js-form');
        this.live = this.view.querySelector('.js-livesearch');
        this.liveTemplate = Templates_1.Templates.get(Templates_1.TemplateNames.LIVESEARCH);
        this.input.addEventListener('keyup', this.onType);
        this.bind();
    }
    bind() {
        this.form.addEventListener('reset', this.onFormReset);
        this.form.addEventListener('submit', this.onFormSubmit);
    }
    liveResponse(data, el, response) {
        if (response.results) {
            this.live.innerHTML = this.liveTemplate.render(response);
            this.showLiveResults();
            PushStates_1.PushStates.bind(this.live);
        }
        else {
            this.quickHide();
        }
    }
    showLiveResults() {
        this.view.classList.add('is-livesearch-shown');
        this.liveList = this.view.querySelector('.js-livesearch-list');
        this.liveLi = this.view.querySelectorAll('.js-livesearch-item');
        this.allLink = this.view.querySelector('.js-livesearch-all');
        const height = Math.min(this.liveList.clientHeight, window.innerHeight * 0.75);
        const tl = gsap_1.gsap.timeline();
        tl.to(this.liveList.parentElement, {
            duration: !this.isLiveShown ? 0.8 : 0,
            ease: Site_1.easing,
        })
            .fromTo(this.liveLi, { y: this.isLiveShown ? 0 : window.innerHeight }, {
            y: 0,
            duration: 0.9,
            stagger: 0.1,
            ease: Site_1.easing,
        });
        this.allLink && tl.fromTo(this.allLink, { opacity: this.isLiveShown ? 1 : 0 }, {
            opacity: 1,
            duration: 0.5,
            ease: Site_1.easing,
        });
        this.isLiveShown = true;
    }
    quickHide() {
        if (!this.liveList)
            return;
        this.view.classList.remove('is-livesearch-shown');
        gsap_1.gsap.to(this.liveList.parentElement, {
            height: 0,
            duration: 0.01,
            delay: 0.8,
            onComplete: () => {
                this.input.value = '';
                this.live.innerHTML = '';
            },
        });
    }
    animationHide() {
        if (!this.isLiveShown)
            return;
        gsap_1.gsap.to(this.allLink, {
            opacity: 0,
            duration: 0.4,
            ease: Site_1.easing,
        });
        [...this.liveLi].reverse().forEach((item, index) => {
            gsap_1.gsap.to(item, {
                y: window.innerHeight,
                rotate: index % 2 === 0 ? 15 : -15,
                duration: 0.8,
                delay: index * 0.1,
                ease: Site_1.easing,
                onComplete: () => {
                    item.remove();
                    if (index === this.liveLi.length - 1) {
                        gsap_1.gsap.set(this.liveList.parentElement, { height: 0 });
                        this.live.innerHTML = '';
                    }
                    this.view.classList.remove('is-livesearch-shown');
                },
            });
        });
        this.isLiveShown = false;
    }
}
exports.Search = Search;

},{"./PushStates":14,"./Site":17,"./Utils":18,"./templates/Templates":63,"./widgets/API":64,"gsap/dist/gsap":5}],17:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.breakpoint = exports.browser = exports.easing = exports.pixelRatio = exports.lang = exports.debug = exports.local = void 0;
const gsap_1 = require("gsap/dist/gsap");
const ScrollTrigger_1 = require("gsap/dist/ScrollTrigger");
const CustomEase_1 = require("gsap/dist/CustomEase");
const Scroll_1 = __importDefault(require("./Scroll"));
const Classes_1 = require("./Classes");
const Utils_1 = require("./Utils");
const Browser_1 = require("./Browser");
const Breakpoint_1 = require("./Breakpoint");
const PushStates_1 = require("./PushStates");
const Page_1 = require("./pages/Page");
const Menu_1 = require("./Menu");
const Button_1 = require("./components/Button");
const Search_1 = require("./Search");
const AudioPlayer_1 = require("./components/AudioPlayer");
const Loader_1 = require("./components/Loader");
const Lightbox_1 = require("./components/Lightbox/Lightbox");
const All_1 = __importDefault(require("./widgets/All"));
exports.local = !!window.location.hostname.match(/(localhost|\.lh|192\.168\.)/g);
exports.debug = window.location.search.indexOf('debug') >= 0;
gsap_1.gsap.registerPlugin(CustomEase_1.CustomEase);
class Site {
    constructor() {
        this.isInitialized = false;
        this.onResize = (isOrientationChanged) => {
            var _a;
            (0, Utils_1.setVwUnit)();
            const oldBreakpoint = exports.breakpoint ? exports.breakpoint.value : null;
            exports.breakpoint = (0, Breakpoint_1.getBreakpoint)();
            const width = window.innerWidth;
            const height = window.innerHeight;
            const changed = oldBreakpoint !== exports.breakpoint.value;
            !exports.browser.touch && (0, Utils_1.setAppHeight)();
            isOrientationChanged && (0, Utils_1.setAppHeight)();
            (_a = this.currentPage) === null || _a === void 0 ? void 0 : _a.resize(width, height, exports.breakpoint, changed);
            (!exports.browser.touch || changed) && (Scroll_1.default === null || Scroll_1.default === void 0 ? void 0 : Scroll_1.default.resize());
        };
        this.onState = () => {
            var _a, _b, _c;
            const isRendered = this.pushStates.isRendered();
            const pageChangedState = this.currentPage.onState();
            const lightboxChangedState = this.lightbox.onState(isRendered);
            (_a = this.menu) === null || _a === void 0 ? void 0 : _a.onState();
            (_b = this.search) === null || _b === void 0 ? void 0 : _b.onState();
            (_c = this.loader) === null || _c === void 0 ? void 0 : _c.onState();
            if (!isRendered && !pageChangedState && !lightboxChangedState) {
                Promise.all([
                    this.pushStates.load(),
                    this.currentPage.animateOut(),
                ]).then(this.render);
            }
        };
        this.render = () => __awaiter(this, void 0, void 0, function* () {
            if (this.currentPage) {
                this.currentPage.off();
                this.currentPage.destroy();
                this.currentPage = null;
            }
            console.groupEnd();
            console.group();
            document.body.classList.add('is-rendering');
            PushStates_1.PushStates.setTitle();
            this.pushStates.render();
            yield this.setCurrentPage();
            this.onPageLoaded();
        });
        this.onPageLoaded = () => __awaiter(this, void 0, void 0, function* () {
            document.body.classList.remove('is-not-ready', 'is-rendering');
            this.currentPage.animateIn(0).then(() => {
                this.loader.hide();
                !this.isInitialized && Scroll_1.default.scrollToTop(true);
                this.scroll.load();
                Scroll_1.default.start();
            });
            PushStates_1.PushStates.setTitle();
            this.audioPlayer.bindButtons();
            this.isInitialized = true;
        });
        this.onPageAppend = (el) => {
            PushStates_1.PushStates.bind(el);
            this.scroll.load();
        };
    }
    init() {
        console.group();
        exports.breakpoint = (0, Breakpoint_1.getBreakpoint)();
        exports.browser = (0, Browser_1.getBrowser)();
        exports.easing = CustomEase_1.CustomEase.create('custom', '0.5, 0, 0.1, 1');
        exports.lang = document.documentElement.getAttribute('lang');
        exports.pixelRatio = Math.min(2, window.devicePixelRatio || 1);
        this.bind();
        (0, Utils_1.setVwUnit)();
        (0, Utils_1.setAppHeight)();
        exports.debug && (0, Utils_1.stats)();
        this.pushStates = new PushStates_1.PushStates();
        this.pushStates.on(PushStates_1.PushStatesEvents.CHANGE, this.onState);
        this.scroll = new Scroll_1.default();
        this.lightbox = new Lightbox_1.Lightbox();
        this.menu = new Menu_1.Menu(document.querySelector('.js-menu'));
        this.search = new Search_1.Search(document.getElementById('search'));
        this.loader = new Loader_1.Loader(document.querySelector('.js-loader'));
        this.newsletterButton = new Button_1.Button(document.querySelector('.js-newsletter-button'));
        this.audioPlayer = new AudioPlayer_1.AudioPlayer(document.querySelector('.js-audioplayer'));
        if (exports.browser.ie) {
            console.warn('This browser is outdated!');
            return;
        }
        PushStates_1.PushStates.setTitle();
        Promise.all([
            this.setCurrentPage(),
        ]).then(this.onPageLoaded);
    }
    bind() {
        window.addEventListener('DOMContentLoaded', () => {
            document.body.classList.add('is-loaded');
        });
        window.addEventListener('resize', () => {
            document.body.classList.add('is-resizing');
            clearTimeout(this.resizingTimeout);
            this.resizingTimeout = setTimeout(() => {
                this.onResize();
                document.body.classList.remove('is-resizing');
            }, 250);
        });
        window.addEventListener('orientationchange', (0, Utils_1.debounce)(() => this.onResize(true)));
    }
    setCurrentPage() {
        var _a;
        const pageList = document.querySelectorAll('[data-page]');
        let pageEl = pageList[0];
        let pageName = pageEl.dataset.page || 'Page';
        const pageOptions = pageEl.dataset.options;
        if (Classes_1.pages[pageName] === undefined) {
            if (pageName !== 'undefined') {
                console.warn('There is no "%s" in Pages!', pageName);
            }
            pageName = 'Page';
        }
        if (pageList.length > 1) {
            console.warn('Only one [data-page] element, please!');
        }
        else if (pageList.length === 0) {
            const articleEl = document.getElementById('content').querySelector('article');
            const contentEl = document.getElementById('content');
            pageEl = articleEl || contentEl.firstChild;
        }
        document.body.classList.toggle('is-404', Boolean(document.body.querySelector('[data-not-found]')));
        const isHome = !!document.body.querySelector('[data-home]');
        document.body.classList.toggle('is-homepage', isHome);
        const page = new Classes_1.pages[pageName](pageEl, pageOptions);
        this.currentPage = page;
        page.on(Page_1.PageEvents.CHANGE, this.onPageAppend);
        All_1.default.bind();
        this.setActiveLinks();
        Scroll_1.default.scrollToCached();
        ScrollTrigger_1.ScrollTrigger.refresh();
        (_a = this.lightbox) === null || _a === void 0 ? void 0 : _a.check();
        this.loader.check(isHome);
        return page.preload();
    }
    setActiveLinks() {
        const anchors = document.querySelectorAll('a[href]');
        const pathname = window.location.pathname.replace(/\/+$/, '');
        [...anchors].forEach(anchor => {
            anchor.classList.remove('is-active');
        });
        document.querySelectorAll(`a[href="${pathname}/"], a[href="${pathname}"]`).forEach(link => link === null || link === void 0 ? void 0 : link.classList.add('is-active'));
    }
}
window.addEventListener('load', () => {
    const site = new Site();
    site.init();
});

},{"./Breakpoint":9,"./Browser":10,"./Classes":11,"./Menu":13,"./PushStates":14,"./Scroll":15,"./Search":16,"./Utils":18,"./components/AudioPlayer":33,"./components/Button":34,"./components/Lightbox/Lightbox":39,"./components/Loader":44,"./pages/Page":62,"./widgets/All":66,"gsap/dist/CustomEase":1,"gsap/dist/ScrollTrigger":3,"gsap/dist/gsap":5}],18:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findVisibleBoxes = exports.getStorageItem = exports.setStorageItem = exports.removeTags = exports.getQueryString = exports.normalizeUrl = exports.isEmpty = exports.wait = exports.zeroPad = exports.serializeObject = exports.getScript = exports.keys = exports.nFormatter = exports.getImgFromMapbox = exports.lat2tile = exports.lon2tile = exports.clearThree = exports.drawImageProp = exports.stats = exports.setVwUnit = exports.setAppHeight = exports.debounce = exports.generateUID = void 0;
function generateUID() {
    return `${(new Date()).getTime()}${Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1)}`;
}
exports.generateUID = generateUID;
const debounce = (callback, timeout = 300) => {
    let timeoutId = null;
    return (...args) => {
        window.clearTimeout(timeoutId);
        timeoutId = window.setTimeout(() => {
            callback.apply(null, args);
        }, timeout);
    };
};
exports.debounce = debounce;
function setAppHeight() {
    document.documentElement.style.setProperty('--app-height', `${window.innerHeight}px`);
}
exports.setAppHeight = setAppHeight;
function setVwUnit() {
    document.documentElement.style.setProperty('--vw', `${document.documentElement.clientWidth}px`);
}
exports.setVwUnit = setVwUnit;
function stats() {
    const stats = new Stats();
    stats.showPanel(0);
    stats.dom.style.pointerEvents = 'none';
    document.body.appendChild(stats.dom);
    function animate() {
        stats.begin();
        stats.end();
        requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);
    return stats;
}
exports.stats = stats;
function drawImageProp(ctx, img, iw, ih, x, y, w, h, offsetX, offsetY) {
    if (arguments.length === 4) {
        x = y = 0;
        w = ctx.canvas.width;
        h = ctx.canvas.height;
    }
    offsetX = typeof offsetX === 'number' ? offsetX : 0.5;
    offsetY = typeof offsetY === 'number' ? offsetY : 0.5;
    if (offsetX < 0) {
        offsetX = 0;
    }
    if (offsetY < 0) {
        offsetY = 0;
    }
    if (offsetX > 1) {
        offsetX = 1;
    }
    if (offsetY > 1) {
        offsetY = 1;
    }
    const r = Math.min(w / iw, h / ih);
    let nw = iw * r;
    let nh = ih * r;
    let cx;
    let cy;
    let cw;
    let ch;
    let ar = 1;
    if (nw < w) {
        ar = w / nw;
    }
    if (Math.abs(ar - 1) < 1e-14 && nh < h) {
        ar = h / nh;
    }
    nw *= ar;
    nh *= ar;
    cw = iw / (nw / w);
    ch = ih / (nh / h);
    cx = (iw - cw) * offsetX;
    cy = (ih - ch) * offsetY;
    if (cx < 0) {
        cx = 0;
    }
    if (cy < 0) {
        cy = 0;
    }
    if (cw > iw) {
        cw = iw;
    }
    if (ch > ih) {
        ch = ih;
    }
    ctx.drawImage(img, cx, cy, cw, ch, x, y, w, h);
}
exports.drawImageProp = drawImageProp;
const clearThree = (obj) => {
    if (!obj) {
        return;
    }
    if (!obj.children) {
        return;
    }
    while (obj.children.length > 0) {
        (0, exports.clearThree)(obj.children[0]);
        obj.remove(obj.children[0]);
    }
    if (obj.geometry) {
        obj.geometry.dispose();
    }
    if (obj.material) {
        Object.keys(obj.material).forEach(prop => {
            if (!obj.material[prop]) {
                return;
            }
            if (obj.material[prop] !== null && typeof obj.material[prop].dispose === 'function') {
                obj.material[prop].dispose();
            }
        });
        obj.material.dispose();
    }
};
exports.clearThree = clearThree;
function lon2tile(lon, zoom) {
    return Math.floor(((lon + 180) / 360) * Math.pow(2, zoom));
}
exports.lon2tile = lon2tile;
function lat2tile(lat, zoom) {
    return Math.floor(((1
        - Math.log(Math.tan((lat * Math.PI) / 180)
            + 1 / Math.cos((lat * Math.PI) / 180))
            / Math.PI)
        / 2)
        * Math.pow(2, zoom));
}
exports.lat2tile = lat2tile;
function getImgFromMapbox(zoom, lon, lat, style, token) {
    const z = Math.floor(zoom - 0.5);
    const x = lon2tile(lon, z);
    const y = lat2tile(lat, z);
    const img = `<img src="https://api.mapbox.com/styles/v1/${style}/tiles/256/${z}/${x}/${y}?access_token=${token}" loading="lazy" alt="">`;
    return img;
}
exports.getImgFromMapbox = getImgFromMapbox;
function nFormatter(num, digits) {
    const lookup = [
        { value: 1, symbol: '' },
        { value: 1e3, symbol: 'k' },
        { value: 1e6, symbol: 'MI' },
        { value: 1e9, symbol: 'G' },
        { value: 1e12, symbol: 'T' },
        { value: 1e15, symbol: 'P' },
        { value: 1e18, symbol: 'E' },
    ];
    const rx = /\.0+$|(\.[0-9]*[1-9])0+$/;
    const item = lookup.slice().reverse().find(itemInner => num >= itemInner.value);
    return item ? (num / item.value).toFixed(digits).replace(rx, '$1') + item.symbol : '0';
}
exports.nFormatter = nFormatter;
exports.keys = {
    enter: 13,
    esc: 27,
    space: 32,
    left: 37,
    up: 38,
    right: 39,
    down: 40,
    pageUp: 33,
    pageDown: 34,
    end: 35,
    home: 36,
    minus: 109,
    plus: 107,
};
function getScript(source, callback) {
    let script = document.createElement('script');
    const prior = document.getElementsByTagName('script')[0];
    script.async = 1;
    script.onload = script.onreadystatechange = function (_, isAbort) {
        if (isAbort || !script.readyState || /loaded|complete/.test(script.readyState)) {
            script.onload = script.onreadystatechange = null;
            script = undefined;
            if (!isAbort && callback)
                setTimeout(callback, 0);
        }
    };
    script.src = source;
    prior.parentNode.insertBefore(script, prior);
}
exports.getScript = getScript;
const serializeObject = (form) => {
    const obj = {};
    Array.prototype.slice.call(form.elements).forEach(field => {
        if (!field.name || field.disabled || ['file', 'reset', 'submit', 'button'].indexOf(field.type) > -1)
            return;
        if (field.type === 'select-multiple') {
            const options = [];
            Array.prototype.slice.call(field.options).forEach(option => {
                if (!option.selected)
                    return;
                options.push(option.value);
            });
            if (options.length) {
                obj[field.name] = options;
            }
            return;
        }
        if (['checkbox', 'radio'].indexOf(field.type) > -1 && !field.checked)
            return;
        obj[field.name] = field.value;
    });
    return obj;
};
exports.serializeObject = serializeObject;
const zeroPad = (num, places) => {
    const zero = places - num.toString().length + 1;
    return Array(+(zero > 0 && zero)).join('0') + num;
};
exports.zeroPad = zeroPad;
const wait = (time) => new Promise(resolve => {
    setTimeout(() => resolve(), time);
});
exports.wait = wait;
function isEmpty(obj) {
    return Object.keys(obj).length === 0;
}
exports.isEmpty = isEmpty;
function normalizeUrl(url) {
    return `/${url.replace(/#.*$/, '').replace(/^\/|\/$/g, '')}`;
}
exports.normalizeUrl = normalizeUrl;
const getQueryString = (forms) => {
    const formData = new FormData();
    (Array.isArray(forms) ? forms : [forms])
        .filter((e, i, a) => a.indexOf(e) === i)
        .forEach(form => {
        new URLSearchParams(new FormData(form))
            .forEach((value, key) => formData.append(key, value));
    });
    const formParams = new URLSearchParams(formData);
    const keysForDel = [];
    formParams.forEach((value, key) => {
        if (!value)
            keysForDel.push(key);
    });
    keysForDel.forEach(key => formParams.delete(key));
    const finalFormData = new URLSearchParams();
    formParams.forEach((value, key) => {
        if (finalFormData.has(key)) {
            finalFormData.set(key, `${finalFormData.get(key)},${value}`);
        }
        else
            finalFormData.set(key, value);
    });
    return decodeURIComponent(finalFormData.toString());
};
exports.getQueryString = getQueryString;
function removeTags(str) {
    if ((str === null) || (str === ''))
        return false;
    str = str.toString();
    return str.replace(/(<([^>]+)>)/ig, '');
}
exports.removeTags = removeTags;
function setStorageItem(key, value) {
    try {
        localStorage.setItem(key, value);
    }
    catch (error) {
        console.warn(error);
    }
}
exports.setStorageItem = setStorageItem;
function getStorageItem(key) {
    return localStorage.getItem(key);
}
exports.getStorageItem = getStorageItem;
function findVisibleBoxes(boxes) {
    const visibleBoxes = [];
    boxes.forEach(box => {
        const rect = box.getBoundingClientRect();
        if (rect.top < (window.innerHeight + window.scrollY) && rect.bottom > window.scrollY) {
            visibleBoxes.push(box);
        }
    });
    return visibleBoxes;
}
exports.findVisibleBoxes = findVisibleBoxes;

},{}],19:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.hovers = exports.scrolls = exports.animations = void 0;
const fadeUp_1 = require("./fadeUp");
const hero_1 = require("./scroll/hero");
const interviews_1 = require("./scroll/interviews");
const claim_1 = require("./scroll/claim");
const box_1 = require("./scroll/box");
const sticker_1 = require("./scroll/sticker");
const illustration_1 = require("./scroll/illustration");
const line_1 = require("./scroll/line");
const people_1 = require("./scroll/people");
const collections_1 = require("./scroll/collections");
const collectionsSimple_1 = require("./scroll/collectionsSimple");
exports.animations = { fadeUp: fadeUp_1.fadeUp };
exports.scrolls = { box: box_1.box, collections: collections_1.collections, collectionsSimple: collectionsSimple_1.collectionsSimple, hero: hero_1.hero, interviews: interviews_1.interviews, claim: claim_1.claim, sticker: sticker_1.sticker, illustration: illustration_1.illustration, line: line_1.line, people: people_1.people };
exports.hovers = {};

},{"./fadeUp":20,"./scroll/box":21,"./scroll/claim":22,"./scroll/collections":23,"./scroll/collectionsSimple":24,"./scroll/hero":25,"./scroll/illustration":26,"./scroll/interviews":27,"./scroll/line":28,"./scroll/people":29,"./scroll/sticker":30}],20:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fadeUp = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Site_1 = require("../Site");
const fadeUp = (el, delay = 0) => {
    gsap_1.gsap.killTweensOf(el, { opacity: true, y: true });
    return gsap_1.gsap.fromTo(el, { opacity: 0, y: 60 }, { duration: 1.4, opacity: 1, y: 0, ease: Site_1.easing, delay });
};
exports.fadeUp = fadeUp;

},{"../Site":17,"gsap/dist/gsap":5}],21:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.box = void 0;
const gsap_1 = require("gsap/dist/gsap");
const box = (el) => {
    const bg = el.querySelector('.box__bg');
    const children = [...el.children].filter(child => child !== bg);
    gsap_1.gsap.fromTo(children, { y: window.innerHeight / 5 }, {
        y: 0,
        duration: 0.8,
        ease: 'power2.out',
        clearProps: 'all',
        scrollTrigger: {
            trigger: el,
            pinSpacing: false,
            start: 'top bottom',
            invalidateOnRefresh: true,
        },
    });
    gsap_1.gsap.fromTo(bg, { y: window.innerHeight / 5 }, {
        y: 0,
        duration: 0.4,
        ease: 'power2.out',
        clearProps: 'all',
        scrollTrigger: {
            trigger: el,
            pinSpacing: false,
            start: 'top bottom',
            invalidateOnRefresh: true,
        },
    });
};
exports.box = box;

},{"gsap/dist/gsap":5}],22:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.claim = void 0;
const gsap_1 = require("gsap/dist/gsap");
const SplitText_1 = require("gsap/dist/SplitText");
const Site_1 = require("../../Site");
gsap_1.gsap.registerPlugin(SplitText_1.SplitText);
const claim = el => {
    const splittedText = new SplitText_1.SplitText(el.querySelector('p'), { type: 'lines, words', linesClass: 'line' });
    gsap_1.gsap.set(splittedText.words, { yPercent: 100 });
    gsap_1.gsap.fromTo(splittedText.words, { yPercent: 100 }, {
        yPercent: 0,
        duration: 0.85,
        ease: Site_1.easing,
        delay: 1,
        stagger: 0.03,
        onStart: () => {
            gsap_1.gsap.set(el, { opacity: 1 });
            console.log('start');
        },
        scrollTrigger: {
            trigger: el,
            pinSpacing: false,
            start: 'top bottom',
            invalidateOnRefresh: true,
        },
    });
};
exports.claim = claim;

},{"../../Site":17,"gsap/dist/SplitText":4,"gsap/dist/gsap":5}],23:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.collections = void 0;
const gsap_1 = require("gsap/dist/gsap");
const ScrollTrigger_1 = require("gsap/dist/ScrollTrigger");
gsap_1.gsap.registerPlugin(ScrollTrigger_1.ScrollTrigger);
const collections = (el) => {
    const cardsWrap = el.querySelector('.js-scroll-cards');
    const namesWrap = el.querySelector('.js-scroll-names');
    const offset = (window.innerHeight - cardsWrap.clientHeight) / 2;
    const items = el.querySelectorAll('.js-accordeon-item');
    ScrollTrigger_1.ScrollTrigger.create({
        trigger: el,
        start: `top ${offset}px`,
        end: 'bottom bottom',
        pin: cardsWrap,
        endTrigger: namesWrap,
    });
    ScrollTrigger_1.ScrollTrigger.batch(items, {
        start: 'top 55%',
        end: 'bottom 55%',
        onEnter: batch => {
            batch[0].querySelector('a').classList.add('is-visible');
        },
        onEnterBack: batch => {
            batch[0].querySelector('a').classList.add('is-visible');
        },
        onLeave: batch => {
            batch[0].querySelector('a').classList.remove('is-visible');
        },
        onLeaveBack: batch => {
            batch[0].querySelector('a').classList.remove('is-visible');
        },
    });
};
exports.collections = collections;

},{"gsap/dist/ScrollTrigger":3,"gsap/dist/gsap":5}],24:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.collectionsSimple = void 0;
const gsap_1 = require("gsap/dist/gsap");
const ScrollTrigger_1 = require("gsap/dist/ScrollTrigger");
gsap_1.gsap.registerPlugin(ScrollTrigger_1.ScrollTrigger);
const collectionsSimple = (el) => {
    const cardsWrap = el.querySelector('.js-scroll-cards');
    const namesWrap = el.querySelector('.js-scroll-names');
    const offset = (window.innerHeight - cardsWrap.clientHeight) / 2;
    ScrollTrigger_1.ScrollTrigger.create({
        trigger: el,
        start: `top ${offset}px`,
        end: 'bottom 92%',
        pin: cardsWrap,
        endTrigger: namesWrap,
    });
};
exports.collectionsSimple = collectionsSimple;

},{"gsap/dist/ScrollTrigger":3,"gsap/dist/gsap":5}],25:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.hero = void 0;
const gsap_1 = __importDefault(require("gsap"));
const hero = el => {
    gsap_1.default.to(el.children, {
        y: () => el.clientHeight / -2,
        ease: 'none',
        scrollTrigger: {
            trigger: el,
            scrub: true,
            start: 'top top',
            end: 'bottom top',
        },
    });
};
exports.hero = hero;

},{"gsap":5}],26:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.illustration = void 0;
const gsap_1 = require("gsap/dist/gsap");
const illustration = (el) => {
    gsap_1.gsap.set(el, {
        transformOrigin: '50% 50%',
        yPercent: 50,
        rotate: -15,
    });
    gsap_1.gsap.fromTo(el, {
        yPercent: 50,
        rotate: -15,
    }, {
        yPercent: 0,
        rotate: 0,
        duration: 1,
        ease: 'power2.out',
        clearProps: 'all',
        scrollTrigger: {
            trigger: el,
            pinSpacing: false,
            start: 'top bottom',
            invalidateOnRefresh: true,
        },
    });
};
exports.illustration = illustration;

},{"gsap/dist/gsap":5}],27:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.interviews = void 0;
const gsap_1 = require("gsap/dist/gsap");
const interviews = el => {
    const controls = el.querySelector('.js-panel');
    const moreInterviews = el.querySelector('.interviews__more');
    if (controls) {
        const mm = gsap_1.gsap.matchMedia();
        mm.add('(orientation: landscape)', () => {
            const tl = gsap_1.gsap.timeline({
                ease: 'none',
                scrollTrigger: {
                    trigger: el,
                    pin: controls,
                    pinSpacing: false,
                    start: 'top top',
                    end: () => { var _a; return `bottom ${controls.offsetHeight + ((_a = moreInterviews === null || moreInterviews === void 0 ? void 0 : moreInterviews.offsetHeight) !== null && _a !== void 0 ? _a : 0)}px`; },
                    onToggle: self => {
                        el.classList.toggle('is-pinned', self.isActive);
                    },
                    onLeaveBack: self => {
                        setTimeout(() => {
                            self.refresh();
                        }, 500);
                    },
                    invalidateOnRefresh: true,
                },
            });
        });
    }
};
exports.interviews = interviews;

},{"gsap/dist/gsap":5}],28:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.line = void 0;
const gsap_1 = require("gsap/dist/gsap");
const line = (el) => {
    gsap_1.gsap.set(el, { transformOrigin: 'bottom center' });
    gsap_1.gsap.fromTo(el, { scaleY: 0 }, {
        scaleY: 1,
        duration: 0.8,
        ease: 'power2.out',
        clearProps: 'all',
        scrollTrigger: {
            trigger: el,
            pinSpacing: false,
            start: 'top bottom',
            invalidateOnRefresh: true,
        },
    });
};
exports.line = line;

},{"gsap/dist/gsap":5}],29:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.people = void 0;
const gsap_1 = require("gsap/dist/gsap");
const people = (el) => {
    const items = el.querySelectorAll('.js-person');
    const tl = gsap_1.gsap.timeline({
        scrollTrigger: {
            trigger: el,
            pinSpacing: false,
            start: 'top bottom',
            invalidateOnRefresh: true,
        },
    });
    tl.addLabel('start');
    [...items].forEach((item, i) => {
        gsap_1.gsap.set(items, {
            transformOrigin: '50% 50%',
            yPercent: 50,
            rotate: i % 2 === 0 ? 10 : -10,
        });
        tl.fromTo(item, {
            yPercent: 50,
            rotate: i % 2 === 0 ? 10 : -10,
        }, {
            yPercent: 0,
            rotate: 0,
            duration: 0.45,
            delay: 0.1 * i,
            ease: 'power2.out',
            clearProps: 'all',
        }, 'start');
    });
};
exports.people = people;

},{"gsap/dist/gsap":5}],30:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sticker = void 0;
const gsap_1 = require("gsap/dist/gsap");
const sticker = el => {
    gsap_1.gsap.fromTo(el.querySelector('.sticker__text'), { opacity: 0 }, {
        opacity: 1,
        duration: 0.1,
        delay: 0.5,
        scrollTrigger: {
            trigger: el,
            pinSpacing: false,
            start: 'top bottom',
            invalidateOnRefresh: true,
        },
        onComplete: () => {
            el.classList.add('is-visible');
        },
    });
};
exports.sticker = sticker;

},{"gsap/dist/gsap":5}],31:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Accordeon = void 0;
const Component_1 = require("./Component");
class Accordeon extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.onToggleClick = e => {
            e.preventDefault();
            e.stopPropagation();
            this.view.classList.toggle('is-closed');
        };
        this.bind();
        this.setHeight();
    }
    bind() {
        const button = this.view.querySelector('.js-accordeon-button');
        button && button.addEventListener('click', this.onToggleClick);
    }
    setHeight() {
        const copy = this.view.querySelector('.js-accordeon-copy');
        if (copy) {
            copy.removeAttribute('style');
            copy.style.height = `${copy.scrollHeight}px`;
        }
    }
}
exports.Accordeon = Accordeon;

},{"./Component":37}],32:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AccordeonList = void 0;
const Component_1 = require("./Component");
class AccordeonList extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.onToggleClick = (e, item) => {
            e.preventDefault();
            e.stopPropagation();
            if (item.classList.contains('is-closed')) {
                this.allItems.forEach(itemToclose => {
                    this.close(itemToclose);
                });
                this.open(item);
            }
            else {
                this.close(item);
            }
        };
        this.onLinkToggle = (isClosed, element) => {
            element.tabIndex = isClosed ? -1 : 0;
        };
        this.bind();
        this.setupListeners();
    }
    bind() {
        this.allItems = [...this.view.querySelectorAll('.js-accordeon-item')].map(el => {
            this.setHeight(el);
            const element = el;
            return element;
        });
    }
    setupListeners() {
        const { closeOthers } = this.view.dataset;
        this.allItems.forEach(item => {
            const button = item.querySelector('.js-accordeon-button');
            button && button.addEventListener('click', e => this.onToggleClick(e, item));
            closeOthers && this.setupMutationObserver(item);
        });
    }
    setupMutationObserver(item) {
        const link = item.querySelector('a.button');
        if (link) {
            this.onLinkToggle(item.classList.contains('is-closed'), link);
            const observer = new MutationObserver(() => this.onLinkToggle(item.classList.contains('is-closed'), link));
            observer.observe(item, { attributes: true });
        }
    }
    close(item) {
        item.classList.add('is-closed');
    }
    open(item) {
        item.classList.remove('is-closed');
    }
    setHeight(item) {
        const copy = item.querySelector('.js-accordeon-copy');
        if (copy) {
            copy.removeAttribute('style');
            copy.style.height = `${copy.scrollHeight}px`;
        }
    }
}
exports.AccordeonList = AccordeonList;

},{"./Component":37}],33:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AudioPlayer = exports.AudioPlayerStatesText = void 0;
const gsap_1 = require("gsap/dist/gsap");
const PushStates_1 = require("../PushStates");
const Site_1 = require("../Site");
const Video_1 = require("./Player/Video");
const Lightbox_1 = require("./Lightbox/Lightbox");
class AudioPlayerStatesText {
}
exports.AudioPlayerStatesText = AudioPlayerStatesText;
AudioPlayerStatesText.RANDOM = 'Shuffle';
AudioPlayerStatesText.PLAYING = 'Now playing';
AudioPlayerStatesText.PAUSED = 'Play interview';
class AudioPlayer extends Video_1.Video {
    static closeAudioPlayer() {
        AudioPlayer.instance.minimize();
    }
    static openAudioPlayer(fromLightbox) {
        AudioPlayer.instance.expand();
        if (fromLightbox && !AudioPlayer.instance.isInitialized)
            AudioPlayer.instance.setNewAudio(Lightbox_1.Lightbox.currentId, true);
    }
    static getId() {
        return AudioPlayer.currentAudioId;
    }
    static isAudioPlayerPaused() {
        return AudioPlayer.instance.isPaused();
    }
    static updateColors(color) {
        AudioPlayer.instance.updateColors(color);
    }
    constructor(view) {
        super(view);
        this.view = view;
        this.isExpanded = false;
        this.isInitialized = false;
        this.bindButtons = () => {
            document.querySelectorAll('[data-audio-player]').forEach(button => {
                button.addEventListener('click', this.onBtnClick);
            });
        };
        this.onTimeupdate = () => {
            super.onTimeupdate();
            Lightbox_1.Lightbox.isOpen && Lightbox_1.Lightbox.tryToUpdateTranscript(this.media.currentTime);
        };
        this.onBtnClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            const id = e.currentTarget.dataset.audioPlayer;
            const startTime = e.currentTarget.dataset.start;
            if (!id)
                return;
            if (id !== AudioPlayer.currentAudioId) {
                this.setNewAudio(id, true, startTime);
            }
            else {
                if (startTime) {
                    this.media.currentTime = parseInt(startTime, 10);
                    this.play();
                }
                else {
                    this.isPaused() ? this.play() : this.pause();
                }
            }
        };
        this.togglePlayerButtons = (isPlaying) => {
            this.playerButtons = document.querySelectorAll(`[data-audio-player="${AudioPlayer.currentAudioId}"]`);
            this.playerButtons.forEach(btn => btn.classList.toggle('is-playing', isPlaying));
        };
        this.bindAudioPlayer = () => {
            this.ui.thumbnail && this.ui.thumbnail.addEventListener('click', this.onThumbnailClick);
            this.ui.minimize && this.ui.minimize.addEventListener('click', this.onMinimizeClick);
            this.elements.nextBtn && this.elements.nextBtn.addEventListener('click', this.onNextClick);
            this.elements.prevBtn && this.elements.prevBtn.addEventListener('click', this.onPrevClick);
            this.elements.urlLink && this.elements.urlLink.addEventListener('click', this.onUrlClick);
            this.view.addEventListener('mouseleave', this.onMouseLeave);
            this.view.addEventListener('mouseenter', this.onMouseEnter);
        };
        this.onMouseLeave = (e) => {
            this.closeTimeout = setTimeout(() => {
                this.minimize();
            }, 5000);
        };
        this.onMouseEnter = (e) => {
            clearTimeout(this.closeTimeout);
        };
        this.onUrlClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            PushStates_1.PushStates.goTo(e.currentTarget.getAttribute('href'), Lightbox_1.Lightbox.isOpen);
        };
        this.setNewAudio = (id, play, startTime) => {
            this.loadAudio(id).then((data) => {
                this.updatePlayer(data);
                Lightbox_1.Lightbox.checkPlayerState();
                const hasParams = this.isInitialized ? false : this.seekToParams();
                if (play) {
                    !this.isExpanded && this.expand();
                    if (!hasParams)
                        this.media.currentTime = startTime ? parseInt(startTime, 10) : 0;
                    this.play();
                }
                this.isInitialized = true;
            });
        };
        this.onNextClick = () => {
            const { nextId } = this.elements.nextBtn.dataset;
            this.setNewAudio(nextId, true);
        };
        this.onPrevClick = () => {
            const { prevId } = this.elements.prevBtn.dataset;
            this.setNewAudio(prevId, true);
        };
        this.onThumbnailClick = () => {
            if (Lightbox_1.Lightbox.isOpen)
                return;
            if (!this.isInitialized)
                this.setNewAudio();
            this.isExpanded ? this.minimize() : this.expand();
            this.view.classList.toggle('is-expanded');
        };
        this.onMinimizeClick = () => this.minimize();
        this.minimize = () => {
            if (Lightbox_1.Lightbox.isOpen)
                return;
            gsap_1.gsap.to(this.ui.playerBar, {
                yPercent: 0,
                duration: 0.7,
                ease: Site_1.easing,
                onComplete: () => {
                    this.setTitleInCassette(this.isPaused() ? `${AudioPlayerStatesText.PAUSED}: ${this.elements.title.innerText}` : `${AudioPlayerStatesText.PLAYING}: ${this.elements.title.innerText}`);
                    this.isExpanded = false;
                },
            });
        };
        this.expand = () => {
            gsap_1.gsap.to(this.ui.playerBar, {
                yPercent: -100,
                duration: 0.7,
                ease: Site_1.easing,
                onStart: () => {
                    this.setTitleInCassette(this.isPaused() ? `${AudioPlayerStatesText.PAUSED}: ${this.elements.title.innerText}` : `${AudioPlayerStatesText.PLAYING}: ${this.elements.title.innerText}`);
                },
                onComplete: () => {
                    this.isExpanded = true;
                },
            });
        };
        this.setTitleInCassette = (text) => {
            [...this.cassetteTitle.querySelectorAll('span')].forEach(span => {
                span.innerText = text;
            });
        };
        this.updatePlayer = (data) => {
            var _a, _b;
            AudioPlayer.currentAudioId = data.id;
            this.media.src = data.src[0].src;
            this.elements.title.innerText = data.title;
            this.elements.urlLink.href = data.urlInterview;
            this.elements.nextBtn.dataset.nextId = ((_a = data.nextId) === null || _a === void 0 ? void 0 : _a.toString()) || '';
            this.elements.prevBtn.dataset.prevId = ((_b = data.prevId) === null || _b === void 0 ? void 0 : _b.toString()) || '';
        };
        this.updateColors = (color) => {
            this.view.style.setProperty('--lightbox-color', `var(--color-${color})`);
            const classes = this.view.className.split(' ').filter(c => !c.startsWith('audioplayer--'));
            this.view.className = classes.join(' ').trim();
            this.view.classList.add(`audioplayer--${color}`);
        };
        AudioPlayer.instance = this;
        this.ui.thumbnail = this.view.querySelector('.js-player-thumbnail');
        this.ui.minimize = this.view.querySelector('.js-player-minimize');
        this.cassetteTitle = this.view.querySelector('.js-player-marquee');
        this.apiUrl = this.view.dataset.apiUrl;
        this.elements = {
            urlLink: this.view.querySelector('.js-player-url'),
            nextBtn: this.view.querySelector('.js-player-next'),
            prevBtn: this.view.querySelector('.js-player-prev'),
            title: this.view.querySelector('.js-player-title'),
        };
        this.bindAudioPlayer();
    }
    onPlay() {
        super.onPlay();
        this.setTitleInCassette(`${AudioPlayerStatesText.PLAYING}: ${this.elements.title.innerText}`);
        this.togglePlayerButtons(true);
    }
    onPause() {
        super.onPause();
        this.setTitleInCassette(`${AudioPlayerStatesText.PAUSED}: ${this.elements.title.innerText}`);
        this.togglePlayerButtons(false);
    }
    loadAudio(id) {
        return __awaiter(this, void 0, void 0, function* () {
            const isWorkspace = window.location.pathname.indexOf('/workspace/') >= 0;
            const url = isWorkspace
                ? `${this.apiUrl}${id ? `0${id}` : '01'}.json`
                : `${this.apiUrl}${id ? `?id=${id}` : ''}`;
            try {
                const response = yield fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Elder-Api': 'true',
                    },
                });
                const data = yield response.json();
                this.view.classList.remove('is-fetching');
                return data;
            }
            catch (error) {
                this.view.classList.remove('is-fetching');
                throw new Error(error);
            }
        });
    }
}
exports.AudioPlayer = AudioPlayer;

},{"../PushStates":14,"../Site":17,"./Lightbox/Lightbox":39,"./Player/Video":58,"gsap/dist/gsap":5}],34:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Button = void 0;
const gsap_1 = require("gsap/dist/gsap");
const SplitText_1 = require("gsap/dist/SplitText");
const Component_1 = require("./Component");
const Site_1 = require("../Site");
const Utils_1 = require("../Utils");
gsap_1.gsap.registerPlugin(SplitText_1.SplitText);
class Button extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.settings = Object.assign({ sibling: false }, JSON.parse(this.view.getAttribute('data-options')));
        this.button = this.settings.sibling ? this.view.parentElement : this.view;
        this.bind();
        window.addEventListener('resize', (0, Utils_1.debounce)(() => this.tl.invalidate()));
    }
    bind() {
        this.splitText = new SplitText_1.SplitText(this.button.querySelector('.js-button-text'), { type: 'words', wordsClass: 'word' });
        this.horizontal = this.button.querySelector('.js-arrow-horizontal');
        this.vertical = this.button.querySelector('.js-arrow-vertical');
        this.triangle = this.button.querySelector('.js-arrow-triangle');
        this.arrow = this.button.querySelector('.js-arrow');
        this.setupTimeline();
        this.setupListeners();
    }
    setupTimeline() {
        if ([this.vertical, this.horizontal, this.triangle, this.arrow].some(el => !el))
            return;
        this.tl && this.tl.kill();
        this.tl = gsap_1.gsap.timeline({ paused: true, defaults: { ease: Site_1.easing } });
        if (this.button.classList.contains('button--simple')) {
            if (this.button.classList.contains('button--reversed')) {
                const arrowExtra = this.button.querySelector('.js-arrow-extra');
                this.splitText.words[0] && this.tl
                    .to(this.splitText.words[0], {
                    x: () => this.arrow.offsetWidth * 1.08,
                    duration: 0.4,
                }, 'arrow')
                    .to(this.arrow, {
                    x: () => this.arrow.offsetWidth * 1.08,
                    duration: 0.4,
                }, 'arrow');
                arrowExtra && this.tl
                    .to(arrowExtra, {
                    x: () => this.arrow.offsetWidth * 1.08,
                    duration: 0.4,
                }, 'arrow');
            }
            else {
                const duplicateText = this.button.querySelector('.js-button-duplicate-text');
                this.splitText.words[0] && this.tl
                    .to(this.splitText.words[0], {
                    x: () => this.splitText.words[0].offsetWidth * 1.06,
                    duration: 0.4,
                }, 'arrow')
                    .to(this.arrow, {
                    transformOrigin: 'right center',
                    x: () => this.splitText.words[0].offsetWidth * 1.06,
                    duration: 0.4,
                }, 'arrow');
                duplicateText && this.tl.to(duplicateText, {
                    x: () => this.splitText.words[0].offsetWidth * 1.06,
                    duration: 0.4,
                }, 'arrow');
            }
        }
        else if (this.button.classList.contains('button--draw')) {
            const mm = gsap_1.gsap.matchMedia();
            mm.add('(orientation: landscape)', () => {
                gsap_1.gsap.set(this.vertical, { scaleY: 0 });
                gsap_1.gsap.set(this.horizontal, { scaleX: 0 });
                gsap_1.gsap.set(this.triangle, { scale: 0 });
                const duration = 0.3;
                this.tl
                    .to(this.vertical, {
                    scaleY: 1,
                    duration: duration * 0.5,
                    transformOrigin: `${this.arrow.classList.contains('arrow--reversed') ? 'bottom' : 'top'} center`,
                })
                    .to(this.horizontal, {
                    scaleX: 1,
                    duration,
                    transformOrigin: 'left center',
                }, 'arrow')
                    .fromTo(this.triangle, { x: () => -this.horizontal.offsetWidth }, {
                    x: 0,
                    scale: 1,
                    duration,
                    transformOrigin: 'left center',
                }, 'arrow');
            });
        }
        else {
            this.splitText.words[0] && this.tl
                .to(this.splitText.words[0], {
                yPercent: 150,
                rotate: -15,
                duration: 0.5,
            })
                .to(this.horizontal, {
                transformOrigin: 'left center',
                scaleX: () => (this.splitText.words[0].offsetWidth / this.horizontal.offsetWidth) + 1.01,
                delay: -0.5,
                duration: 0.65,
            }, 'arrow')
                .to(this.triangle, {
                transformOrigin: 'left center',
                x: () => this.splitText.words[0].offsetWidth,
                delay: -0.5,
                duration: 0.65,
            }, 'arrow');
        }
    }
    setupListeners() {
        this.view.addEventListener('mouseenter', () => {
            Site_1.breakpoint.desktop && this.tl.play();
        });
        this.view.addEventListener('mouseleave', () => {
            Site_1.breakpoint.desktop && this.tl.reverse();
        });
        this.view.addEventListener('focus', () => {
            Site_1.breakpoint.desktop && this.tl.play();
        });
        this.view.addEventListener('blur', () => {
            Site_1.breakpoint.desktop && this.tl.reverse();
        });
    }
}
exports.Button = Button;

},{"../Site":17,"../Utils":18,"./Component":37,"gsap/dist/SplitText":4,"gsap/dist/gsap":5}],35:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Circle = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Component_1 = require("./Component");
class Circle extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.updatePosition = (value, fast) => {
            gsap_1.gsap.to(this.view, {
                x: value,
                duration: fast ? 0 : 0.3,
                opacity: fast && 1,
                ease: 'sine',
            });
        };
        this.show = () => {
            this.view.style.display = 'block';
            gsap_1.gsap.fromTo(this.view, { scale: 0.6 }, {
                scale: 1,
                duration: 0.3,
                ease: 'sine',
                onStart: () => {
                    this.view.style.opacity = '1';
                },
                onComplete: () => this.circlesTimeline.play(),
            });
        };
        this.loop = () => {
            this.circlesTimeline = gsap_1.gsap.timeline({ repeat: -1 });
            this.circlesTimeline.set([this.circles], { opacity: 0 });
            [...this.circles].forEach((circle, index) => {
                this.circlesTimeline.fromTo(circle, { scale: 0.6 }, {
                    scale: 1,
                    duration: 0.3,
                    ease: 'sine',
                    onStart: () => {
                        circle.style.opacity = '1';
                        gsap_1.gsap.fromTo(this.images[index], { opacity: 0 }, {
                            opacity: 1,
                            duration: 0.25,
                            ease: 'sine',
                        });
                        gsap_1.gsap.set([...this.images].filter(img => img !== this.images[index]), { opacity: 0 });
                    },
                }, '+=1.7');
            });
        };
        this.hide = () => {
            gsap_1.gsap.to(this.view, {
                opacity: 0,
                duration: 0.25,
                ease: 'sine',
            });
            this.circlesTimeline.pause();
        };
        this.circles = this.view.querySelectorAll('.js-circle');
        this.images = this.view.querySelectorAll('.js-illu');
        this.loop();
    }
    onState() {
        this.hide();
        return false;
    }
}
exports.Circle = Circle;

},{"./Component":37,"gsap/dist/gsap":5}],36:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Collections = void 0;
const Component_1 = require("./Component");
class Collections extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.onItemEnter = (event) => {
            const target = event.target;
            [...this.allItems].filter((item) => item !== target).forEach(item => item.classList.remove('is-active'));
            target.classList.add('is-active');
        };
        this.allItems = this.view.querySelectorAll('.js-accordeon-item');
        this.bind();
    }
    bind() {
        this.allItems.forEach((item) => {
            item.addEventListener('mouseenter', this.onItemEnter);
        });
    }
}
exports.Collections = Collections;

},{"./Component":37}],37:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Component = exports.ComponentEvents = void 0;
const Handler_1 = require("../Handler");
const Utils_1 = require("../Utils");
class ComponentEvents {
}
exports.ComponentEvents = ComponentEvents;
ComponentEvents.CHANGE = 'change';
class Component extends Handler_1.Handler {
    constructor(view) {
        super();
        this.view = view;
        this.resize = (wdt, hgt) => { };
        this.uuid = (0, Utils_1.generateUID)();
        if (!view) {
            console.warn('component built without view');
        }
    }
    onState() {
        return false;
    }
    animateIn(index, delay) { }
    animateOut() {
        return Promise.resolve(null);
    }
    destroy() {
        super.destroy();
    }
}
exports.Component = Component;

},{"../Handler":12,"../Utils":18}],38:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.FilterLetters = void 0;
const Scroll_1 = __importDefault(require("../Scroll"));
const Component_1 = require("./Component");
class FilterLetters extends Component_1.Component {
    static checkButtons() {
        FilterLetters.instance.checkButtons();
    }
    constructor(view) {
        super(view);
        this.view = view;
        this.onButtonClick = (e) => {
            const button = e.currentTarget;
            const { letter } = button.dataset;
            const letterItem = [...this.scrolledItems].find(item => this.getFirstLetter(item) === letter.toLowerCase());
            if (!letterItem) {
                console.warn('There is no item starting with letter "%s"!', letter);
                return;
            }
            Scroll_1.default.scrollTo({
                el: letterItem,
                offsetY: this.view.closest('.js-panel').clientHeight - 1,
            });
        };
        FilterLetters.instance = this;
        this.settings = Object.assign(Object.assign({}, this.settings), JSON.parse(this.view.getAttribute('data-options')));
        this.contentElement = document.querySelector(this.settings.contentSelector);
        this.buttons = this.view.querySelectorAll('.js-letter');
        this.bind();
        this.checkButtons();
    }
    bind() {
        [...this.buttons].map(btn => btn.addEventListener('click', this.onButtonClick));
    }
    checkButtons() {
        this.scrolledItems = this.contentElement.querySelectorAll('.js-tile');
        [...this.buttons].forEach(button => {
            const { letter } = button.dataset;
            const letterItem = [...this.scrolledItems].find(item => this.getFirstLetter(item) === letter.toLowerCase());
            button.classList.toggle('is-disabled', !letterItem);
        });
    }
    getFirstLetter(item) {
        return item.dataset.name.toLowerCase().charAt(0);
    }
}
exports.FilterLetters = FilterLetters;

},{"../Scroll":15,"./Component":37}],39:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Lightbox = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Templates_1 = require("../../templates/Templates");
const PushStates_1 = require("../../PushStates");
const Site_1 = require("../../Site");
const AudioPlayer_1 = require("../../components/AudioPlayer");
const LightboxTranscript_1 = require("./LightboxTranscript");
const LightboxNav_1 = require("./LightboxNav");
const LightboxSlider_1 = require("./LightboxSlider");
class Lightbox {
    static checkPlayerState() {
        Lightbox.instance.checkPlayerState();
    }
    static tryToUpdateTranscript(time) {
        Lightbox.instance.tryToUpdateTranscript(time);
    }
    static getId() {
        return Lightbox.currentId;
    }
    constructor() {
        this.shown = true;
        this.build = (data) => {
            if (data.result === false)
                return;
            const template = Templates_1.Templates.get(Templates_1.TemplateNames.LIGHTBOX);
            const html = template.render(data);
            this.view.innerHTML = html;
            PushStates_1.PushStates.bind(this.view);
            AudioPlayer_1.AudioPlayer.instance.bindButtons();
            Lightbox.currentId = data.id;
            this.buildComponents();
            this.playerBtn = this.view.querySelector('.js-player-btn');
            this.checkPlayerState();
            this.tryToSetColor();
        };
        this.tryToSetColor = () => {
            const lightboxItem = this.view.firstElementChild;
            if (!lightboxItem)
                return;
            const color = lightboxItem.getAttribute('data-theme-color');
            if (color && (AudioPlayer_1.AudioPlayer.getId() === Lightbox.getId()))
                AudioPlayer_1.AudioPlayer.updateColors(color);
        };
        this.bind = () => { };
        Lightbox.instance = this;
        this.view = document.getElementById('lightbox');
        this.hide(true);
        this.bind();
    }
    load(payload) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            this.view.classList.add('is-fetching');
            this.controller = new AbortController();
            const isWorkspace = window.location.pathname.indexOf('/workspace/') >= 0;
            const url = isWorkspace
                ? `${window.location.origin}/workspace/json/lightbox/${window.location.pathname.split('/')[3]}.json`
                : window.location.href + window.location.search;
            try {
                const response = yield fetch(url, {
                    method: 'POST',
                    signal: (_a = this.controller) === null || _a === void 0 ? void 0 : _a.signal,
                    body: new URLSearchParams(payload),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Elder-Api': 'true',
                    },
                });
                const data = yield response.json();
                this.view.classList.remove('is-fetching');
                this.controller = null;
                return data;
            }
            catch (error) {
                this.view.classList.remove('is-fetching');
                throw new Error(error);
            }
        });
    }
    check() {
        this.toggleByPathname();
    }
    onState(isRendered) {
        return this.toggleByPathname(isRendered);
    }
    destroy() {
        var _a;
        this.view.innerHTML = '';
        (_a = this.components) === null || _a === void 0 ? void 0 : _a.forEach(c => c.destroy());
        this.components = null;
    }
    buildComponents() {
        this.transcriptComp = new LightboxTranscript_1.LightboxTranscript(this.view.querySelector('.js-lightbox-transcript'));
        this.navComp = new LightboxNav_1.LightboxNav(this.view.querySelector('.js-lightbox-nav'));
        this.sliderComp = this.view.querySelector('.js-lightbox-slider') && new LightboxSlider_1.LightboxSlider(this.view.querySelector('.js-lightbox-slider'));
    }
    toggleByPathname(isRendered) {
        const patternFound = this.matchPathnamePattern();
        if (patternFound) {
            Promise.all([
                this.hide(),
                this.load(),
            ]).then(results => {
                const data = results.filter(Boolean).reduce((p, c) => (Object.assign(Object.assign({}, p), c)));
                (data === null || data === void 0 ? void 0 : data.title) && PushStates_1.PushStates.setTitle(data.title);
                this.currentPath = window.location.pathname;
                this.build(data);
                if (!this.shown && data.result !== false) {
                    this.show();
                }
                this.animateIn();
            }).catch(() => {
                this.hide();
            });
            return true;
        }
        if (this.shown) {
            const animate = isRendered;
            !!animate && this.animateOut();
            this.hide(!this.shown);
        }
        return false;
    }
    hide(fast) {
        var _a;
        if (this.animating || !this.shown)
            return Promise.resolve();
        (_a = this.controller) === null || _a === void 0 ? void 0 : _a.abort();
        return new Promise((resolve, reject) => {
            this.animating = true;
            this.view.classList.add('is-closing');
            gsap_1.gsap.to(this.view, {
                duration: fast ? 0 : 0.01,
                opacity: 0,
                delay: fast ? 0 : 1,
                ease: 'none',
                onStart: () => {
                    document.body.classList.remove('has-lightbox');
                    this.view.classList.remove('is-showing');
                },
                onComplete: () => {
                    this.view.style.display = 'none';
                    this.view.classList.remove('is-default', 'is-not-default');
                    this.shown = false;
                    this.animating = false;
                    this.view.innerHTML = '';
                    Lightbox.isOpen = false;
                    resolve();
                },
            });
        });
    }
    show() {
        if (this.animating)
            return;
        if (this.shown) {
            return;
        }
        Promise.all([this.shown ? this.hide() : null]).then(() => {
            this.animating = true;
            this.shown = true;
            this.view.style.opacity = '1';
            this.view.style.display = 'block';
            gsap_1.gsap.to(this.view, {
                duration: 0.1,
                ease: 'none',
                onStart: () => {
                    document.body.classList.add('has-lightbox');
                    this.view.classList.remove('is-closing');
                },
                onComplete: () => {
                    this.view.classList.add('is-showing');
                    AudioPlayer_1.AudioPlayer.openAudioPlayer(true);
                    this.animating = false;
                    Lightbox.isOpen = true;
                },
            });
        });
    }
    checkPlayerState() {
        var _a, _b;
        if (AudioPlayer_1.AudioPlayer.getId() === Lightbox.getId() && !AudioPlayer_1.AudioPlayer.isAudioPlayerPaused()) {
            (_a = this.playerBtn) === null || _a === void 0 ? void 0 : _a.classList.add('is-playing');
        }
        else {
            (_b = this.playerBtn) === null || _b === void 0 ? void 0 : _b.classList.remove('is-playing');
        }
        this.tryToSetColor();
    }
    matchPathnamePattern() {
        return /^\/(workspace\/lightbox|interviews)\/[a-z0-9-]/gmi
            .test(window.location.pathname + window.location.search);
    }
    animateIn(fast) {
        return new Promise(resolve => {
            gsap_1.gsap.timeline({
                onComplete: () => {
                    this.view.classList.add('is-visible');
                    resolve();
                },
                defaults: { ease: Site_1.easing, duration: !fast ? 1 : 0 },
            });
            navigator.vibrate([1, 400, 1]);
        });
    }
    animateOut(fast) {
        if (!this.view.classList.contains('is-visible')) {
            return Promise.resolve();
        }
        return new Promise(resolve => {
            gsap_1.gsap.timeline({
                onComplete: () => {
                    this.view.classList.remove('is-visible');
                    resolve();
                },
                defaults: { ease: 'expo.inOut' },
            });
        });
    }
    tryToUpdateTranscript(time) {
        this.transcriptComp.update(time);
    }
}
exports.Lightbox = Lightbox;

},{"../../PushStates":14,"../../Site":17,"../../components/AudioPlayer":33,"../../templates/Templates":63,"./LightboxNav":40,"./LightboxSlider":41,"./LightboxTranscript":42,"gsap/dist/gsap":5}],40:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LightboxNav = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Site_1 = require("../../Site");
const Component_1 = require("../../components/Component");
class LightboxNav extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.bind = () => {
            [...this.navButtons].forEach(btn => btn.addEventListener('click', this.onBtnClick));
        };
        this.onBtnClick = (e) => {
            if (this.isAnimating)
                return;
            const { currentTarget: button } = e;
            const tabSlug = button.getAttribute('aria-controls');
            const tabToOpen = [...this.navTabs].find(tab => tab.id === tabSlug);
            this.showTab(tabToOpen);
            [...this.navButtons].forEach(btn => {
                btn.classList.remove('is-active');
                btn.setAttribute('aria-selected', 'false');
            });
            button.classList.add('is-active');
            button.setAttribute('aria-selected', 'true');
        };
        this.showTab = (tab) => {
            if (this.isAnimating)
                return;
            this.closeTab(this.activeTab).then(() => {
                if (!tab) {
                    this.lightboxEl.classList.add('is-default');
                    this.lightboxEl.classList.remove('is-not-default');
                    this.activeTab = null;
                    return;
                }
                gsap_1.gsap.fromTo(tab, { yPercent: 0 }, {
                    yPercent: -100,
                    duration: 0.6,
                    ease: Site_1.easing,
                    onStart: () => {
                        this.isAnimating = true;
                        tab.classList.add('is-visible');
                    },
                    onComplete: () => {
                        this.isAnimating = false;
                        this.activeTab = tab;
                    },
                });
            });
        };
        this.closeTab = (tab) => new Promise(resolve => {
            if (this.isAnimating)
                resolve();
            if (!tab) {
                this.lightboxEl.classList.add('is-not-default');
                this.lightboxEl.classList.remove('is-default');
                resolve();
            }
            else {
                gsap_1.gsap.fromTo(tab, { yPercent: -100 }, {
                    yPercent: 0,
                    duration: 0.3,
                    ease: Site_1.easing,
                    onStart: () => {
                        this.isAnimating = true;
                    },
                    onComplete: () => {
                        this.isAnimating = false;
                        tab.classList.remove('is-visible');
                        resolve();
                    },
                });
            }
        });
        this.lightboxEl = document.getElementById('lightbox');
        this.navButtons = this.view.querySelectorAll('button');
        this.navTabs = document.querySelectorAll('.js-lightbox-tab');
        this.bind();
    }
}
exports.LightboxNav = LightboxNav;

},{"../../Site":17,"../../components/Component":37,"gsap/dist/gsap":5}],41:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LightboxSlider = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Component_1 = require("../../components/Component");
const Site_1 = require("../../Site");
class LightboxSlider extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.init = () => {
            this.goTo(0, true);
        };
        this.bind = () => {
            this.arrowNext.addEventListener('click', () => this.goTo(this.activeSlideIndex + 1));
            this.arrowPrev.addEventListener('click', () => this.goTo(this.activeSlideIndex - 1));
        };
        this.goTo = (index, fast) => {
            const direction = index > this.activeSlideIndex ? 1 : -1;
            this.hideSlide(this.activeSlideIndex, direction, fast);
            this.showSlide(index, direction, fast);
        };
        this.hideSlide = (index, direction, fast) => {
            const slide = this.slides[index];
            const caption = this.captions[index];
            if (!slide)
                return;
            gsap_1.gsap.fromTo(slide, { x: 0 }, {
                x: direction * (window.innerWidth * -0.75),
                duration: fast ? 0 : 0.5,
                ease: Site_1.easing,
                onComplete: () => {
                    slide.style.display = 'none';
                },
            });
            gsap_1.gsap.fromTo(caption, { y: 0 }, {
                y: 200,
                duration: fast ? 0 : 0.5,
                ease: Site_1.easing,
                onComplete: () => {
                    caption.style.opacity = '0';
                },
            });
        };
        this.showSlide = (index, direction, fast) => {
            const slide = this.slides[index];
            const caption = this.captions[index];
            gsap_1.gsap.fromTo(caption, { y: 200 }, {
                y: 0,
                delay: 0.3,
                duration: fast ? 0 : 0.5,
                ease: Site_1.easing,
                onStart: () => {
                    caption.style.opacity = '1';
                },
            });
            gsap_1.gsap.fromTo(slide, { x: direction * (window.innerWidth * 0.75) }, {
                x: 0,
                duration: fast ? 0.01 : 0.5,
                ease: Site_1.easing,
                onStart: () => {
                    slide.style.display = 'flex';
                },
                onComplete: () => {
                    this.activeSlide = slide;
                    this.activeSlideIndex = [...this.slides].findIndex(el => el === slide);
                    this.updateArrows();
                },
            });
        };
        this.wrap = this.view.querySelector('.js-slider-wrap');
        this.slides = this.wrap.querySelectorAll('.js-slide');
        this.captions = this.view.querySelectorAll('.js-caption');
        this.arrowPrev = this.view.querySelector('.js-slider-prev');
        this.arrowNext = this.view.querySelector('.js-slider-next');
        this.init();
        this.bind();
    }
    updateArrows() {
        this.arrowPrev.querySelector('.js-text').innerText = `0${this.activeSlideIndex}`;
        this.arrowNext.querySelector('.js-text').innerText = `0${this.activeSlideIndex + 2}`;
        switch (this.activeSlideIndex) {
            case 0:
                this.view.classList.add('is-first');
                this.view.classList.remove('is-last');
                break;
            case this.slides.length - 1:
                this.view.classList.remove('is-first');
                this.view.classList.add('is-last');
                break;
            default:
                this.view.classList.remove('is-first', 'is-last');
        }
    }
}
exports.LightboxSlider = LightboxSlider;

},{"../../Site":17,"../../components/Component":37,"gsap/dist/gsap":5}],42:[function(require,module,exports){
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LightboxTranscript = void 0;
const gsap_1 = __importDefault(require("gsap"));
const Component_1 = require("../../components/Component");
const Utils = __importStar(require("../../Utils"));
gsap_1.default.registerPlugin(ScrollToPlugin);
class LightboxTranscript extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.isMainLang = true;
        this.update = (time) => {
            const currentPart = this.getCurrentPart(time);
            this.highlightCurrentPart(currentPart);
        };
        this.highlightCurrentPart = (currentPart) => {
            if (!currentPart)
                return;
            if (currentPart === this.currentHighlightedPart)
                return;
            this.currentHighlightedPart = currentPart;
            [...this.transcriptParts].forEach(part => part.classList.remove('is-current'));
            currentPart.classList.add('is-current');
            this.scrollToElement(currentPart, false);
        };
        this.getCurrentPart = (time) => [...this.transcriptParts].filter(item => parseInt(item.querySelector('[data-start]').dataset.start, 10) <= time).pop();
        this.scrollToElement = (element, fast) => {
            gsap_1.default.to(this.transcriptScrollContainer, {
                scrollTo: {
                    y: element,
                    offsetY: this.searchForm.clientHeight,
                },
                duration: fast ? 0.01 : 1,
                ease: 'power2.inOut',
            });
        };
        this.bind = () => {
            this.searchInput.addEventListener('input', e => this.onKeyUp(e));
            this.searchForm.addEventListener('submit', e => this.onSubmit(e));
            this.langButton && this.langButton.addEventListener('click', this.onLangButtonClick);
            this.transcriptNavNextButton && this.transcriptNavNextButton.addEventListener('click', () => this.goTo(1));
            this.transcriptNavPrevButton && this.transcriptNavPrevButton.addEventListener('click', () => this.goTo(-1));
            this.transcriptNavCloseButton && this.transcriptNavCloseButton.addEventListener('click', this.closeNav);
        };
        this.onKeyUp = (e) => {
            const inputValue = this.searchInput.value;
            this.updateInput(inputValue);
        };
        this.updateInput = (value) => {
            this.fakeSpan.innerText = value;
            const spanWidth = this.fakeSpan.scrollWidth;
            this.inputWrap.style.width = `${spanWidth}px`;
        };
        this.goTo = (dir) => {
            this.currentMarkIndex += dir;
            if (this.currentMarkIndex > this.foundElements.length)
                this.currentMarkIndex = 1;
            if (this.currentMarkIndex < 1)
                this.currentMarkIndex = this.foundElements.length;
            this.updateTranscriptNav();
        };
        this.closeNav = () => {
            this.transcriptNavigation.classList.remove('is-active');
            this.searchInput.value = '';
            this.updateInput('');
            this.clearMarkedElements();
        };
        this.onSubmit = (e) => {
            e.preventDefault();
            this.findWordInTranscript();
        };
        this.findWordInTranscript = () => {
            const inputValue = this.searchInput.value;
            const searchElements = this.activeLanguageWrap.querySelectorAll('.transcript__text');
            [...searchElements].forEach(elem => {
                elem.innerHTML = elem.innerHTML.replace(new RegExp(`${inputValue}(?!([^<]+)?<)`, 'gi'), '<mark>$&</mark>');
            });
            this.foundElements = this.activeLanguageWrap.querySelectorAll('mark');
            if (this.foundElements.length) {
                this.transcriptNavigation.classList.add('is-active');
                this.currentMarkIndex = 1;
                this.updateTranscriptNav();
            }
        };
        this.updateTranscriptNav = () => {
            this.transcriptNavigation.querySelector('.js-transcript-counters').innerHTML = `${this.currentMarkIndex}/${this.foundElements.length}`;
            const selectedMark = this.foundElements[this.currentMarkIndex - 1];
            this.scrollToElement(selectedMark, true);
        };
        this.onLangButtonClick = (e) => {
            const button = e.currentTarget;
            const oldSlug = button.getAttribute(`data-${!this.isMainLang ? 'alternate' : 'main'}-lang`);
            const newSlug = button.getAttribute(`data-${this.isMainLang ? 'alternate' : 'main'}-lang`);
            button.innerText = oldSlug;
            this.isMainLang = !this.isMainLang;
            this.activeLanguageWrap.classList.remove('is-active');
            const newActiveWrap = [...this.langWrappers].find(wrap => wrap.getAttribute('data-lang') === newSlug);
            newActiveWrap.classList.add('is-active');
            this.activeLanguageWrap = newActiveWrap;
        };
        this.clearMarkedElements = () => {
            if (!this.foundElements.length)
                return;
            [...this.foundElements].forEach(elem => {
                elem.replaceWith(Utils.removeTags(elem.innerHTML));
            });
            this.foundElements = null;
        };
        this.searchForm = this.view.querySelector('.js-transcript-search');
        this.inputWrap = this.view.querySelector('.js-transcript-input-wrap');
        this.searchInput = this.searchForm.querySelector('input');
        this.fakeSpan = this.view.querySelector('.js-transcript-span');
        this.langButton = this.view.querySelector('.js-transcript-switch');
        this.langWrappers = this.view.querySelectorAll('.js-transcript-lang');
        this.activeLanguageWrap = this.view.querySelector('.js-transcript-lang.is-active');
        this.transcriptNavigation = this.view.querySelector('.js-transcript-nav');
        this.transcriptNavNextButton = this.view.querySelector('.js-transcript-next');
        this.transcriptNavPrevButton = this.view.querySelector('.js-transcript-prev');
        this.transcriptNavCloseButton = this.view.querySelector('.js-transcript-close');
        this.transcriptScrollContainer = this.view.querySelector('.js-scrolled');
        this.transcriptParts = this.view.querySelectorAll('.js-transcript-part');
        this.bind();
    }
}
exports.LightboxTranscript = LightboxTranscript;

},{"../../Utils":18,"../../components/Component":37,"gsap":5}],43:[function(require,module,exports){
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Load = void 0;
const gsap_1 = __importDefault(require("gsap"));
const ScrollTrigger_1 = require("gsap/dist/ScrollTrigger");
const Site_1 = require("../Site");
const Scroll_1 = __importDefault(require("../Scroll"));
const Utils = __importStar(require("../Utils"));
const Component_1 = require("./Component");
const PushStates_1 = require("../PushStates");
const FilterLetters_1 = require("./FilterLetters");
const Classes_1 = require("../Classes");
class Load extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.isPending = false;
        this.isFinished = false;
        this.showContent = () => {
            this.isContentHidden = false;
            FilterLetters_1.FilterLetters.checkButtons();
            gsap_1.default.fromTo(this.contentElement, { opacity: 0 }, {
                opacity: 1,
                duration: 0.45,
                ease: 'sine',
            });
        };
        this.onViewBtnClick = (e) => {
            const { currentTarget: button } = e;
            const { view } = button.dataset;
            this.hideContent().then(() => {
                this.contentElement.classList.remove('is-list-view', 'is-grid-view');
                this.contentElement.classList.add(`is-${view}-view`);
            }).then(this.showContent);
        };
        this.onSubmit = (e) => {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            let loadPath = this.view.getAttribute('action') || this.view.dataset.api || window.location.pathname;
            let extraForms = this.settings.extra ? [...document.querySelectorAll(this.settings.extra)] : null;
            const extraFormsMobile = this.settings.extraMobile
                ? [...document.querySelectorAll(this.settings.extraMobile)]
                : null;
            if (extraFormsMobile && window.matchMedia('(orientation: portrait) and (max-width: 659px)').matches) {
                extraForms = extraFormsMobile;
            }
            if (this.settings.updateCurrentSorting) {
                const indicator = document.querySelector('.js-current-sorting');
                if (indicator) {
                    const sorting = Utils.getQueryString([this.view]).replace('sort=', '');
                    const arrow = document.querySelector('.js-mobile-modal-button');
                    if (sorting.includes('!') && arrow) {
                        arrow.classList.add('button--inversed');
                    }
                    else {
                        arrow.classList.remove('button--inversed');
                    }
                    indicator.innerHTML = sorting.replace('!', '');
                }
            }
            const formData = Utils.getQueryString([...extraForms, this.view]);
            if (formData) {
                loadPath += `?${formData}`;
            }
            this.reloadFilters(loadPath);
        };
        this.reloadFilters = (path) => {
            Promise.all([this.hideContent(), this.load(path)]).then(() => {
                this.showContent();
            });
        };
        this.updateFiltered = () => {
            if (!this.filteredEl)
                return;
            const selectedInputs = [...document.getElementById('main-form').querySelectorAll('input')].filter(input => input.checked);
            const filteredItems = selectedInputs.map(input => `
            <li class="filtered__label">
                <label for="${input.id}">${input.dataset.name}<i class="icon-close"></i></label>
            </li>`);
            this.filteredEl.innerHTML = filteredItems.join('');
            setTimeout(() => {
                this.bindFiltered();
            }, 50);
        };
        this.bindFiltered = () => {
            if (this.settings.live)
                return;
            [...this.filteredEl.querySelectorAll('label')].forEach(label => {
                label.addEventListener('click', () => {
                    console.log('click');
                    setTimeout(() => this.view.dispatchEvent(new Event('submit')), 10);
                });
            });
        };
        this.scrollToContainer = () => {
            const elem = document.querySelector(this.settings.scrollTo);
            if (!elem) {
                console.error(`element ${this.settings.scrollTo} doesn't exist!`);
                return;
            }
            Scroll_1.default.scrollTo({
                el: elem,
                duration: 1,
                onComplete: () => {
                    ScrollTrigger_1.ScrollTrigger.refresh();
                },
            });
        };
        this.onReset = (e) => {
            e.preventDefault();
            [...this.view.querySelectorAll('input')].forEach(input => {
                input.checked = false;
            });
        };
        this.settings = {
            contentSelector: '.js-load-content',
            live: false,
        };
        this.settings = Object.assign(this.settings, JSON.parse(this.view.getAttribute('data-options')));
        this.isForm = this.view.tagName === 'FORM';
        this.isContentHidden = false;
        this.contentElement = document.querySelector(this.settings.contentSelector);
        this.viewsButtons = this.view.querySelectorAll('[data-view]');
        this.resetButton = this.view.querySelector('.js-reset');
        if (!Site_1.breakpoint.desktop) {
            this.contentElement.classList.remove('is-grid-view');
            this.contentElement.classList.add('is-list-view');
        }
        if (this.settings.total)
            this.totalElement = this.view.querySelector(this.settings.total);
        if (this.settings.filtered)
            this.filteredEl = document.querySelector(this.settings.filtered);
        this.updateFiltered();
        this.bind();
    }
    destroy() {
        super.destroy();
    }
    bind() {
        if (this.isForm) {
            this.view.addEventListener('submit', this.onSubmit);
            if (this.settings.live) {
                [...this.view.querySelectorAll('input, select')].forEach(el => {
                    el.addEventListener('change', () => {
                        window.clearTimeout(this.liveTimeout);
                        this.liveTimeout = setTimeout(() => this.view.dispatchEvent(new Event('submit')), 10);
                    });
                });
            }
            [...this.viewsButtons].forEach(btn => btn.addEventListener('click', this.onViewBtnClick));
            this.resetButton && this.resetButton.addEventListener('click', this.onReset);
        }
        else {
            this.view.addEventListener('click', e => {
                e.preventDefault();
                const url = this.view.href;
                this.reloadFilters(url);
            });
        }
    }
    bindExternalFilters() {
        const externalFilters = document.querySelectorAll('a[data-filters]');
        [...externalFilters].forEach(el => {
            el.addEventListener('click', e => {
                e.preventDefault();
                const url = el.href;
                this.reloadFilters(url);
            });
        });
    }
    hideContent(duration = 0.25) {
        return new Promise(resolve => {
            if (!this.isContentHidden) {
                gsap_1.default.to(this.contentElement, {
                    opacity: 0,
                    duration,
                    ease: 'sine',
                    onComplete: () => {
                        this.isContentHidden = true;
                        resolve();
                    },
                });
            }
            else {
                resolve();
            }
        });
    }
    load(url) {
        if (!!this.isPending || !!this.isFinished) {
            return;
        }
        window.clearTimeout(this.liveTimeout);
        this.isPending = true;
        this.view.classList.add('is-pending');
        PushStates_1.PushStates.changePath(url, true);
        if (this.settings.filtered)
            this.updateFiltered();
        if (this.settings.scrollTo)
            this.scrollToContainer();
        return fetch(url, {
            method: 'GET',
            headers: { 'Content-Type': 'text/html' },
        })
            .then(response => response.text())
            .then(response => {
            const selector = this.settings.contentSelector;
            const newDiv = document.createElement('div');
            newDiv.innerHTML = response;
            const elLoadedContent = newDiv.querySelector(selector).innerHTML;
            this.contentElement.innerHTML = elLoadedContent;
            if (this.settings.total) {
                const total = newDiv.querySelector(this.settings.total).innerHTML;
                this.totalElement.innerHTML = total;
            }
            this.trigger(Component_1.ComponentEvents.CHANGE, this.contentElement);
        })
            .catch(error => {
            console.warn(`error: ${error}`, error);
        })
            .finally(() => {
            this.view.classList.remove('is-pending');
            !this.settings.scrollTo && ScrollTrigger_1.ScrollTrigger.refresh();
            PushStates_1.PushStates.bind(this.contentElement);
            this.bindExternalFilters();
            this.buildComponents(this.contentElement.querySelectorAll('[data-component]'));
            setTimeout(() => {
                this.isPending = false;
            }, 250);
        });
    }
    buildComponents(componentsList) {
        this.components = [];
        this.components = [...componentsList].map(el => {
            const element = el;
            const name = element.dataset.component;
            if (name !== undefined && Classes_1.components[name]) {
                let options = {};
                if (element.dataset.options) {
                    options = JSON.parse(element.dataset.options);
                }
                const component = new Classes_1.components[name](element, options);
                return component;
            }
            window.console.warn('There is no `%s` component!', name);
            return null;
        }).filter(Boolean);
    }
}
exports.Load = Load;

},{"../Classes":11,"../PushStates":14,"../Scroll":15,"../Site":17,"../Utils":18,"./Component":37,"./FilterLetters":38,"gsap":5,"gsap/dist/ScrollTrigger":3}],44:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Loader = exports.LoaderEvents = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Component_1 = require("./Component");
const Circle_1 = require("./Circle");
class LoaderEvents {
}
exports.LoaderEvents = LoaderEvents;
LoaderEvents.LOADED = 'loaded';
const steps = [1, 5, 12, 46, 99];
class Loader extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.animate = () => this.setCounterLoop();
        this.check = (isHomePage) => {
            isHomePage && this.circleComp.show();
        };
        this.hide = () => {
            gsap_1.gsap.fromTo(this.view, { opacity: 1 }, {
                opacity: 0,
                duration: 0.5,
                ease: 'sine',
                onComplete: () => {
                    this.view.style.display = 'none';
                    document.body.classList.add('is-loader-hidden');
                },
            });
        };
        this.setCounterLoop = () => new Promise(resolve => {
            let count = -1;
            const interval = setInterval(() => {
                count++;
                if (count === steps.length) {
                    clearInterval(interval);
                    resolve();
                    return;
                }
                this.countEl.innerHTML = `${steps[count]}%`;
                this.updatePositions(false, steps[count]);
            }, 1000);
        });
        this.updatePositions = (fast, value) => {
            const newCounterWidth = this.countEl.clientWidth;
            if (newCounterWidth >= this.counterWidth) {
                this.counterWidth = newCounterWidth;
                this.circleComp.updatePosition(this.counterWidth, fast);
            }
            this.logoWrap.style.height = `${value}%`;
            this.lineEl.style.height = `${value > 95 ? 100 : value}%`;
        };
        this.circleComp = new Circle_1.Circle(document.querySelector('.js-loader-circle'));
        this.countEl = this.view.querySelector('.js-loader-count');
        this.logoWrap = this.view.querySelector('.js-loader-logo');
        this.lineEl = this.view.querySelector('.js-loader-line');
        this.counterWidth = this.countEl.clientWidth;
        this.updatePositions(true);
    }
    onState() {
        var _a;
        (_a = this.circleComp) === null || _a === void 0 ? void 0 : _a.onState();
        return false;
    }
}
exports.Loader = Loader;

},{"./Circle":35,"./Component":37,"gsap/dist/gsap":5}],45:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Map = exports.token = void 0;
const mapbox_gl_1 = __importDefault(require("mapbox-gl"));
const gsap_1 = require("gsap/dist/gsap");
const Utils_1 = require("../Utils");
const Component_1 = require("./Component");
const Site_1 = require("../Site");
const AudioPlayer_1 = require("./AudioPlayer");
exports.token = Site_1.local ? 'pk.eyJ1IjoiaHVuY3dvdHkiLCJhIjoiY2lwcW04em50MDA1OWkxbnBldXVoMXFrdCJ9.kQro-nPHRoqP_XKLLsR3gA'
    : 'pk.eyJ1IjoiaHVuY3dvdHkiLCJhIjoiY2lwcW04em50MDA1OWkxbnBldXVoMXFrdCJ9.kQro-nPHRoqP_XKLLsR3gA';
class Map extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.isZoomingIn = true;
        this.init = () => new Promise(resolveAll => {
            mapbox_gl_1.default.accessToken = this.settings.token;
            this.map = new mapbox_gl_1.default.Map({
                container: this.view.querySelector('.js-map'),
                style: this.settings.style,
                center: [this.settings.lng, this.settings.lat],
                zoom: this.settings.zoom,
                renderWorldCopies: this.settings.renderWorldCopies,
                interactive: this.settings.interactive,
                dragRotate: false,
                touchZoomRotate: false,
                pitch: 60,
            });
            const mapPromise = new Promise(resolve => {
                this.map.on('load', resolve);
            });
            const dataPromise = new Promise((resolve, reject) => {
                try {
                    resolve();
                }
                catch (err) {
                    reject(err);
                    throw new Error(err);
                }
            });
            Promise.all([mapPromise, dataPromise]).then(() => {
                resolveAll();
                this.onLoad();
            });
        });
        this.onLoad = () => __awaiter(this, void 0, void 0, function* () {
            this.bind();
            this.goToLocation(this.locations[0]);
        });
        this.bind = () => {
            this.locations.forEach((location) => {
                this.setMarker(location);
                location.addEventListener('click', this.onLocationClick);
            });
            this.map.on('moveend', () => {
                if (this.isZoomingIn) {
                    this.setPopup(this.activeLocation);
                    this.buildInterviews(this.activeLocation);
                }
                this.isZoomingIn = false;
            });
            this.map.on('movestart', () => {
                var _a;
                (_a = this.popup) === null || _a === void 0 ? void 0 : _a.remove();
            });
            Site_1.breakpoint.phone && this.getTabContent();
            this.allButton && this.allButton.addEventListener('click', this.onAllButtonClick);
            this.zoomButton && this.zoomButton.addEventListener('click', this.onZoomButtonClick);
        };
        this.setMarker = (location) => {
            const coords = location.getAttribute('data-coords').split(',').map(el => parseFloat(el));
            const elMarker = document.createElement('div');
            elMarker.classList.add('map__marker');
            elMarker.setAttribute('data-id', location.getAttribute('data-id'));
            elMarker.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="63" height="76" viewBox="0 0 63 76" fill="none">
        <circle cx="31.6143" cy="31" r="31" fill="#548068"/>
        <circle cx="31.6142" cy="31" r="19.5185" fill="#B79258"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M31.6143 7.73926C44.3168 7.73926 54.6143 18.2046 54.6143 31.1143C54.6143 49.2193 39.0554 53.9793 31.6143 75.7393C25.526 53.9793 8.61426 47.1793 8.61426 31.1143C8.61426 18.2046 18.9117 7.73926 31.6143 7.73926Z" fill="#B79258"/>
        <circle cx="31.6143" cy="30.7393" r="16" fill="#DBB9B1"/>
        </svg>`;
            const marker = new mapbox_gl_1.default.Marker({ element: elMarker })
                .setLngLat([coords[1], coords[0]])
                .addTo(this.map);
            marker.getElement().addEventListener('click', () => {
                this.isZoomingIn = true;
                this.onMarkerClick(marker.getElement().getAttribute('data-id'));
            });
        };
        this.setPopup = (location) => {
            if (!location)
                return;
            const coords = location.getAttribute('data-coords').split(',').map(el => parseFloat(el));
            this.popup = new mapbox_gl_1.default.Popup({ offset: 25 })
                .setLngLat([coords[1], coords[0]])
                .setHTML(`
                <div class="map__tooltip map__tooltip--marker">${location.dataset.title}</div>
                <div class="map__tooltip-location">${location.dataset.location}</div>
            `)
                .addTo(this.map);
            this.popup.toggleClassName('is-active');
        };
        this.onMarkerClick = (id) => {
            const location = [...this.locations].filter(loc => loc.getAttribute('data-id') === id)[0];
            this.goToLocation(location);
        };
        this.onAllButtonClick = () => {
            this.fitBounds();
        };
        this.fitBounds = () => {
            const bounds = new mapbox_gl_1.default.LngLatBounds();
            this.locations.forEach(l => {
                const coords = l.getAttribute('data-coords').split(',').map(el => parseFloat(el));
                bounds.extend([coords[1], coords[0]]);
            });
            this.map.fitBounds(bounds, {
                padding: 50,
                maxZoom: 16,
            });
        };
        this.onZoomButtonClick = () => this.goToLocation(this.activeLocation);
        this.onLocationClick = (e) => {
            const location = e.currentTarget;
            this.goToLocation(location);
        };
        this.goToLocation = (location) => {
            if (this.marker)
                this.marker.remove();
            this.locations.forEach(l => {
                l.classList.remove('is-active');
                l.parentElement.classList.remove('is-active-location');
            });
            location.classList.add('is-active');
            location.parentElement.classList.add('is-active-location');
            this.removeCurrentInterviews();
            const coords = location.getAttribute('data-coords').split(',').map(el => parseFloat(el));
            const currentZoom = this.map.getZoom();
            const zoom = currentZoom < 16 ? 16 : currentZoom;
            this.map.flyTo({
                center: [coords[1], coords[0]],
                zoom,
                pitch: this.settings.pitch,
            });
            this.activeLocation = location;
        };
        this.getTabContent = () => {
            this.locations.forEach(l => {
                var _a;
                const coords = l.getAttribute('data-coords').split(',').map(el => parseFloat(el));
                const url = `https://api.mapbox.com/styles/v1/huncwoty/clomwmey400bl01pmhj6o5q61/static/${coords[1]},${coords[0]},${this.map.getZoom()},0,${this.map.getPitch()}}/400x400?access_token=${exports.token}`;
                const img = `<img src='${url}' class='map-image js-map-image' />
                        <div class="map__pin">
                            <div class="map__tooltip map__tooltip--marker">${l.dataset.title}</div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="63" height="76" viewBox="0 0 63 76" fill="none">
                                <circle cx="31.6143" cy="31" r="31" fill="#548068"/>
                                <circle cx="31.6142" cy="31" r="19.5185" fill="#B79258"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M31.6143 7.73926C44.3168 7.73926 54.6143 18.2046 54.6143 31.1143C54.6143 49.2193 39.0554 53.9793 31.6143 75.7393C25.526 53.9793 8.61426 47.1793 8.61426 31.1143C8.61426 18.2046 18.9117 7.73926 31.6143 7.73926Z" fill="#B79258"/>
                                <circle cx="31.6143" cy="30.7393" r="16" fill="#DBB9B1"/>
                            </svg>
                            <div class="map__tooltip-location">${l.dataset.location}</div>
                        </div>`;
                (_a = l.parentElement.querySelector('.js-map-image-wrapper')) === null || _a === void 0 ? void 0 : _a.insertAdjacentHTML('beforeend', img);
                const interviews = JSON.parse(l.dataset.interviews);
                [...interviews].forEach(interview => {
                    var _a;
                    const interviewHtml = `<li class="map__interview">
                                            <button class="map__button" data-audio-player=${interview.id}></button>
                                            <div class="map__interview-wrap">
                                                <div class="map__interview-data">
                                                    <div class="map__interview-title">${interview.title}</div>
                                                    <div class="map__interview-duration">${interview.duration}</div>
                                                </div>
                                                <div class="map__interview-button">Play <br> interview</div>
                                            </div>
                                        </li>`;
                    (_a = l.parentElement.querySelector('.js-interviews-inner-list')) === null || _a === void 0 ? void 0 : _a.insertAdjacentHTML('beforeend', interviewHtml);
                });
            });
            AudioPlayer_1.AudioPlayer.instance.bindButtons();
            this.contentInjected = true;
        };
        this.removeCurrentInterviews = () => {
            const interviews = this.interviewsList.querySelectorAll('li');
            if (!interviews)
                return;
            [...interviews].reverse().forEach((item, index) => {
                gsap_1.gsap.to(item, {
                    y: (item.clientHeight * 2) * interviews.length,
                    rotate: index % 2 === 0 ? 15 : -15,
                    duration: 0.8,
                    delay: index * 0.1,
                    ease: Site_1.easing,
                    onComplete: () => {
                        item.remove();
                        if (index === interviews.length - 1) {
                            this.interviewsList.innerHTML = '';
                        }
                    },
                });
            });
        };
        this.buildInterviews = (location) => {
            this.interviewsList.innerHTML = '';
            const interviews = JSON.parse(location.dataset.interviews);
            [...interviews].forEach(interview => {
                const interviewHtml = `
            <li class="map__interview">
                <button class="map__button" data-audio-player="${interview.id}" data-start="${interview.start}"></button>
                <div class="map__interview-wrap">
                    <div class="map__interview-data">
                        <div class="map__interview-title">${interview.title}</div>
                        <div class="map__interview-duration">${interview.duration}</div>
                    </div>
                    <div class="map__interview-button">Play <br> interview</div>
                </div>
            </li>`;
                this.interviewsList.insertAdjacentHTML('beforeend', interviewHtml);
            });
            AudioPlayer_1.AudioPlayer.instance.bindButtons();
        };
        this.settings = {
            lng: -122,
            lat: 37,
            zoom: 16,
            interactive: true,
            renderWorldCopies: true,
            style: 'mapbox://styles/huncwoty/clomwmey400bl01pmhj6o5q61',
            token: exports.token,
            pitch: 60,
            clusterRadius: 70,
            clusterMaxZoom: 19,
        };
        this.settings = Object.assign(this.settings, JSON.parse(this.view.getAttribute('options')));
        this.locations = this.view.querySelectorAll('.js-location');
        this.interviewsList = this.view.querySelector('.js-interviews-list');
        this.contentInjected = false;
        this.allButton = this.view.querySelector('.js-all-button');
        this.zoomButton = this.view.querySelector('.js-zoom-button');
        this.init();
        window.addEventListener('resize', (0, Utils_1.debounce)(() => Site_1.breakpoint.phone && !this.contentInjected && this.getTabContent()));
    }
}
exports.Map = Map;

},{"../Site":17,"../Utils":18,"./AudioPlayer":33,"./Component":37,"gsap/dist/gsap":5,"mapbox-gl":6}],46:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Modal = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Component_1 = require("./Component");
const Scroll_1 = __importDefault(require("../Scroll"));
class Modal extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.isOpen = false;
        this.createTimeline = () => {
            const wrapper = this.view.querySelector('.js-modal-wrap');
            const bar = this.view.querySelector('.js-modal-wrap-bar');
            if (!wrapper)
                return;
            this.tl = gsap_1.gsap.timeline({
                ease: 'none',
                scrollTrigger: {
                    trigger: wrapper,
                    scroller: this.view,
                    invalidateOnRefresh: true,
                    start: () => { var _a; return `top ${(_a = bar === null || bar === void 0 ? void 0 : bar.offsetHeight) !== null && _a !== void 0 ? _a : 0}px`; },
                    onToggle: self => this.view.classList.toggle('is-scrolled', self.isActive),
                },
            });
        };
        this.cleanupTimeline = () => {
            this.tl.kill();
            this.view.classList.remove('is-scrolled');
        };
        this.onTriggerClick = () => {
            this.isOpen ? this.close() : this.open();
        };
        this.close = () => {
            this.view.classList.remove('is-open');
            document.body.classList.remove('has-open-modal');
            this.isOpen = false;
            this.cleanupTimeline();
        };
        this.open = () => {
            this.view.classList.add('is-open');
            document.body.classList.add('has-open-modal');
            this.isOpen = true;
            this.createTimeline();
            Scroll_1.default.scrollTo({
                el: this.view,
                duration: window.matchMedia('(orientation: landscape)').matches ? 0.75 : 0,
                ease: 'sine.out',
                offsetY: window.matchMedia('(orientation: landscape)').matches ? this.view.parentElement.clientHeight : -1,
            });
        };
        this.triggerBtn = document.querySelector(`[aria-controls="${this.view.id}"]`);
        this.closerBtn = this.view.querySelector('.js-modal-close');
        this.form = this.view.querySelector('form');
        this.bind();
    }
    bind() {
        this.triggerBtn && this.triggerBtn.addEventListener('click', this.onTriggerClick);
        this.form && this.form.addEventListener('submit', this.close);
        this.closerBtn && this.closerBtn.addEventListener('click', this.close);
    }
}
exports.Modal = Modal;

},{"../Scroll":15,"./Component":37,"gsap/dist/gsap":5}],47:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.More = void 0;
const gsap_1 = __importDefault(require("gsap"));
const ScrollTrigger_1 = require("gsap/dist/ScrollTrigger");
const Component_1 = require("../components/Component");
const Site_1 = require("../Site");
const PushStates_1 = require("../PushStates");
const All_1 = __importDefault(require("../widgets/All"));
class More extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.onClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            this.load();
        };
        this.linkEl = (this.view.nodeName === 'A') ? this.view : this.view.querySelector('a');
        this.settings = Object.assign({ itemSelector: 'li', infinite: false, updateURL: false }, JSON.parse(this.view.dataset.options));
        this.contentEl = document.querySelector(this.settings.contentSelector);
        console.assert(!!this.contentEl, 'There is no wrap element to load more content!', true);
        if (!this.contentEl) {
            this.view.style.display = 'none';
            return;
        }
        this.linkEl.addEventListener('click', this.onClick);
        if (this.settings.infinite) {
            this.scrollTrigger = ScrollTrigger_1.ScrollTrigger.create({
                trigger: this.view,
                start: 'bottom bottom',
                onEnter: () => this.load(),
            });
        }
    }
    destroy() {
        var _a;
        (_a = this.scrollTrigger) === null || _a === void 0 ? void 0 : _a.kill();
        super.destroy();
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.pending)
                return;
            const url = this.linkEl.href;
            const tie = url.indexOf('?') < 0 ? '?' : '&';
            const params = new URLSearchParams({ partial: 'true' });
            this.pending = true;
            this.view.classList.add('is-doing-request');
            this.settings.updateURL && PushStates_1.PushStates.changePath(url);
            fetch(url + tie + params, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'Content-Type': 'text/html',
                },
            })
                .then(response => response.text())
                .then(response => {
                var _a, _b;
                const selector = this.settings.contentSelector;
                const existingItems = this.contentEl.querySelectorAll(this.settings.itemSelector);
                [...existingItems].map(i => i.classList.add('is-existing'));
                const height = this.contentEl.clientHeight;
                const newDiv = document.createElement('div');
                newDiv.innerHTML = response;
                const elLoadedContent = newDiv.querySelector(selector).innerHTML;
                this.contentEl.insertAdjacentHTML('beforeend', elLoadedContent);
                const id = this.view.getAttribute('id');
                const newButton = newDiv.querySelector(id ? `#${id}` : '[data-component="More"] a');
                const newURL = newButton === null || newButton === void 0 ? void 0 : newButton.getAttribute('href');
                if (newButton && newURL !== '') {
                    this.linkEl.setAttribute('href', newURL);
                    (_a = this.scrollTrigger) === null || _a === void 0 ? void 0 : _a.refresh();
                }
                else {
                    this.view.parentElement.remove();
                    (_b = this.scrollTrigger) === null || _b === void 0 ? void 0 : _b.kill();
                }
                this.trigger(Component_1.ComponentEvents.CHANGE, this.contentEl);
                const items = this.contentEl.querySelectorAll(`${this.settings.itemSelector}:not(.is-existing)`);
                const tl = gsap_1.default.timeline();
                [...items].forEach((item, index) => {
                    tl.from(item, { opacity: 0, duration: 0.5, y: 50, ease: Site_1.easing }, index * 0.1);
                });
                gsap_1.default.fromTo(this.contentEl, { height }, {
                    height: 'auto',
                    duration: 0.4,
                    ease: Site_1.easing,
                });
            })
                .catch(error => {
                console.warn(`error: ${error}`, error);
            })
                .finally(() => {
                this.view.classList.remove('is-doing-request');
                All_1.default.bind();
                setTimeout(() => {
                    this.pending = false;
                }, 250);
            });
        });
    }
}
exports.More = More;

},{"../PushStates":14,"../Site":17,"../components/Component":37,"../widgets/All":66,"gsap":5,"gsap/dist/ScrollTrigger":3}],48:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerTime = void 0;
const Player_utils_1 = require("./Player.utils");
class PlayerTime {
    constructor(playerEl) {
        this.currentTimeEl = playerEl.querySelector('.js-player-time');
        this.durationTimeEl = playerEl.querySelector('.js-player-duration');
    }
    destroy() {
        this.currentTimeEl = null;
        this.durationTimeEl = null;
    }
    update(metadata, isLong) {
        if (this.durationTimeEl) {
            this.durationTimeEl.innerText = (0, Player_utils_1.parseToTime)(metadata.duration, isLong);
        }
        if (this.currentTimeEl && typeof metadata.current === 'number') {
            this.currentTimeEl.innerText = (0, Player_utils_1.parseToTime)(metadata.current || 0, isLong);
        }
    }
}
exports.PlayerTime = PlayerTime;

},{"./Player.utils":51}],49:[function(require,module,exports){
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Player = void 0;
const ScrollTrigger_1 = require("gsap/dist/ScrollTrigger");
const Component_1 = require("../Component");
const Utils = __importStar(require("../../Utils"));
const Player_types_1 = require("./Player.types");
const PlayerTimeline_1 = require("./PlayerTimeline");
const PlayerPopups_1 = require("./PlayerPopups");
const Player_Time_1 = require("./Player.Time");
const PlayerPoster_1 = require("./PlayerPoster");
const PlayerVolume_1 = require("./PlayerVolume");
const PlayerFullscreen_1 = require("./PlayerFullscreen");
const Video_types_1 = require("./Video.types");
const PlayerSettings_1 = require("./PlayerSettings");
const Templates_1 = require("../../templates/Templates");
const PushStates_1 = require("../../PushStates");
class Player extends Component_1.Component {
    static pauseAll(omitUID) {
        for (const uid in Player.instances) {
            if (typeof omitUID === 'undefined' || omitUID !== uid) {
                Player.instances[uid].pause();
            }
        }
    }
    static pauseAllIn(el) {
        for (const uid in Player.instances) {
            const item = Player.instances[uid];
            if (el.contains(item.view)) {
                item.pause();
            }
        }
    }
    constructor(view, options) {
        super(view);
        this.view = view;
        this.userPaused = false;
        this.isReady = false;
        this.wasPaused = false;
        this.resize = () => { };
        this.onToggleClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            this.toggle();
        };
        this.onDoubleClick = (e) => {
            var _a, _b;
            e.preventDefault();
            e.stopPropagation();
            (_b = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.fullscreen) === null || _b === void 0 ? void 0 : _b.toggle();
        };
        this.onKeyDown = e => {
            var _a, _b, _c, _d;
            if (document.querySelector('#transcript-search') === document.activeElement) {
                return;
            }
            switch (e.key) {
                case ' ':
                case 'k':
                    e.preventDefault();
                    e.stopPropagation();
                    this.toggle();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    e.stopPropagation();
                    this.skipForward();
                    break;
                case 'l':
                    e.preventDefault();
                    e.stopPropagation();
                    this.skipForward(true);
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    e.stopPropagation();
                    this.skipBackward();
                    break;
                case 'j':
                    e.preventDefault();
                    e.stopPropagation();
                    this.skipBackward(true);
                    break;
                case 'm':
                    e.preventDefault();
                    e.stopPropagation();
                    this.toggleMute();
                    break;
                case '>':
                    e.preventDefault();
                    e.stopPropagation();
                    this.speedUp();
                    break;
                case '<':
                    e.preventDefault();
                    e.stopPropagation();
                    this.speedDown();
                    break;
                case 'Home':
                case '0':
                    e.preventDefault();
                    e.stopPropagation();
                    this.restart();
                    break;
                case 'End':
                    e.preventDefault();
                    e.stopPropagation();
                    this.end();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    e.stopPropagation();
                    this.volumeUp();
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    e.stopPropagation();
                    this.volumeDown();
                    break;
                case 'f':
                    e.preventDefault();
                    e.stopPropagation();
                    (_b = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.fullscreen) === null || _b === void 0 ? void 0 : _b.toggle();
                    break;
                case 'c':
                    e.preventDefault();
                    e.stopPropagation();
                    (_d = (_c = this.ui) === null || _c === void 0 ? void 0 : _c.captions) === null || _d === void 0 ? void 0 : _d.toggle();
                    break;
                default:
                    break;
            }
        };
        this.onFullscreenEnter = () => {
            var _a, _b;
            (_b = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.captions) === null || _b === void 0 ? void 0 : _b.showNative();
        };
        this.onFullscreenExit = () => {
            var _a, _b;
            (_b = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.captions) === null || _b === void 0 ? void 0 : _b.hideNative();
        };
        this.settings = Object.assign(Object.assign({ template: Templates_1.TemplateNames.PLAYER, autoplay: false, loop: false, muted: false, controls: false, volume: 1, width: 480, height: 270, size: Player_types_1.PlayerSize.AUTO, readyTime: 0.001, hotkeys: false, pauseOnScroll: false }, JSON.parse(view.dataset.options || '{}')), options);
        this.uid = Utils.generateUID();
        this.setup();
        this.resize();
        if (typeof Player.instances === 'undefined') {
            Player.instances = {};
        }
        Player.instances[this.uid] = this;
        this.view.classList.add('is-initialized');
    }
    hide() { this.view.style.display = 'none'; }
    show() { this.view.style.display = 'block'; }
    setVolume(volume) {
        var _a, _b;
        (_a = this.ui.volume) === null || _a === void 0 ? void 0 : _a.update(volume);
        (_b = this.ui.volume) === null || _b === void 0 ? void 0 : _b.toggle(volume < 0.05);
        Utils.setStorageItem(Video_types_1.PlayerStorage.VOLUME, `${volume}`);
    }
    setSpeed(speed) {
        var _a;
        (_a = this.ui.settings) === null || _a === void 0 ? void 0 : _a.updateSpeed(speed);
        Utils.setStorageItem(Video_types_1.PlayerStorage.SPEED, `${speed}`);
    }
    destroy() {
        var _a, _b, _c, _d;
        delete Player.instances[this.uid];
        if (this.ui) {
            (_a = this.ui.time) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this.ui.timeline) === null || _b === void 0 ? void 0 : _b.destroy();
            (_c = this.ui.volume) === null || _c === void 0 ? void 0 : _c.destroy();
            this.ui.popups.destroy();
            (_d = this.ui.settings) === null || _d === void 0 ? void 0 : _d.destroy();
            this.ui.time = null;
            this.ui.timeline = null;
            this.ui.volume = null;
            this.ui.playPauseBtn = null;
            this.ui.bottomPanel = null;
            this.ui.toggleBtn = null;
        }
        this.unbind();
        this.unload();
        this.view.classList.remove('is-initialized');
        super.destroy();
    }
    buildUI() {
        var _a;
        const template = Templates_1.Templates.get(this.settings.template);
        const html = template.render({});
        this.view.insertAdjacentHTML('beforeend', html);
        this.ui = {
            fullscreen: new PlayerFullscreen_1.PlayerFullscreen(this.view.querySelector('.js-player-fullscreen'), this.view),
            timeline: new PlayerTimeline_1.PlayerTimeline(this.view.querySelector('.js-player-timeline'), this.view),
            popups: new PlayerPopups_1.PlayerPopups(this.view.querySelector('.js-player-popups')),
            volume: this.view.querySelector('.js-player-volume') ? new PlayerVolume_1.PlayerVolume(this.view.querySelector('.js-player-volume'), this.view) : null,
            time: new Player_Time_1.PlayerTime(this.view),
            poster: new PlayerPoster_1.PlayerPoster(this.view.querySelector('.js-player-poster'), this.view),
            bottomPanel: this.view.querySelector('.js-player-bottom'),
            playPauseBtn: this.view.querySelector('.js-player-playpause'),
            toggleBtn: this.view.querySelector('.js-player-toggle'),
            playerBar: this.view.querySelector('.js-player-bar'),
            rewindBtn: this.view.querySelector('.js-player-rewind'),
            forwardBtn: this.view.querySelector('.js-player-forward'),
        };
        this.view.classList.toggle('has-autoplay', this.settings.autoplay);
        this.view.classList.toggle('has-autoplay', this.settings.autoplay);
        this.view.classList.add('has-controls');
        this.settings.muted && ((_a = this.ui.volume) === null || _a === void 0 ? void 0 : _a.toggle(true));
        this.ui.poster.load(this.settings);
        PushStates_1.PushStates.bind(this.view);
    }
    bind() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
        (_a = this.ui.timeline) === null || _a === void 0 ? void 0 : _a.on(PlayerTimeline_1.PlayerTimelineEvents.SEEK, (position) => this.seek(position));
        (_b = this.ui.volume) === null || _b === void 0 ? void 0 : _b.on(PlayerVolume_1.PlayerVolumeEvents.CHANGE, (volume) => this.setVolume(volume));
        (_c = this.ui.volume) === null || _c === void 0 ? void 0 : _c.on(PlayerVolume_1.PlayerVolumeEvents.MUTE, () => this.toggleMute(true));
        (_d = this.ui.volume) === null || _d === void 0 ? void 0 : _d.on(PlayerVolume_1.PlayerVolumeEvents.UNMUTE, () => this.toggleMute(false));
        (_e = this.ui.settings) === null || _e === void 0 ? void 0 : _e.on(PlayerSettings_1.PlayerSettingsEvents.SPEED, speed => this.setSpeed(speed));
        (_f = this.ui.playPauseBtn) === null || _f === void 0 ? void 0 : _f.addEventListener('click', this.onToggleClick);
        (_g = this.ui.toggleBtn) === null || _g === void 0 ? void 0 : _g.addEventListener('click', this.onToggleClick);
        (_h = this.ui.toggleBtn) === null || _h === void 0 ? void 0 : _h.addEventListener('dblclick', this.onDoubleClick);
        (_j = this.ui.rewindBtn) === null || _j === void 0 ? void 0 : _j.addEventListener('click', () => this.goRewind());
        (_k = this.ui.forwardBtn) === null || _k === void 0 ? void 0 : _k.addEventListener('click', () => this.goForward());
        !!this.settings.hotkeys && document.addEventListener('keydown', this.onKeyDown);
        (_l = this.ui.fullscreen) === null || _l === void 0 ? void 0 : _l.on(PlayerFullscreen_1.PlayerFullscreenEvents.ENTER, this.onFullscreenEnter);
        (_m = this.ui.fullscreen) === null || _m === void 0 ? void 0 : _m.on(PlayerFullscreen_1.PlayerFullscreenEvents.EXIT, this.onFullscreenExit);
        this.settings.pauseOnScroll && this.pauseOnScroll();
        window.addEventListener('beforeunload', () => this.onBeforeunload());
        window.addEventListener('pagehide', () => this.onBeforeunload());
        this.bindPlayer();
    }
    unbind() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
        (_b = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.timeline) === null || _b === void 0 ? void 0 : _b.off();
        (_d = (_c = this.ui) === null || _c === void 0 ? void 0 : _c.volume) === null || _d === void 0 ? void 0 : _d.off();
        (_f = (_e = this.ui) === null || _e === void 0 ? void 0 : _e.playPauseBtn) === null || _f === void 0 ? void 0 : _f.removeEventListener('click', this.onToggleClick);
        (_h = (_g = this.ui) === null || _g === void 0 ? void 0 : _g.toggleBtn) === null || _h === void 0 ? void 0 : _h.removeEventListener('click', this.onToggleClick);
        (_k = (_j = this.ui) === null || _j === void 0 ? void 0 : _j.toggleBtn) === null || _k === void 0 ? void 0 : _k.removeEventListener('dblclick', this.onDoubleClick);
        !!this.settings.hotkeys && document.removeEventListener('keydown', this.onKeyDown);
        (_l = this.ui.fullscreen) === null || _l === void 0 ? void 0 : _l.off();
        (_m = this.st) === null || _m === void 0 ? void 0 : _m.kill();
        window.removeEventListener('beforeunload', () => this.onBeforeunload());
        window.removeEventListener('pagehide', () => this.onBeforeunload());
        this.unbindPlayer();
    }
    onCanplay() {
        this.view.classList.add('is-canplay');
        this.view.classList.remove('is-error');
    }
    onPlay() {
        this.view.classList.add('is-played');
        this.view.classList.remove('is-ended', 'is-error', 'is-share-open');
        Player.pauseAll(this.uid);
        this.updateMediaSession();
    }
    onPlaying() {
        this.view.classList.add('is-playing');
        this.view.classList.remove('is-loading', 'is-error');
        this.trigger(Player_types_1.PlayerEvents.PLAY);
        navigator.mediaSession.playbackState = 'playing';
    }
    onPause() {
        this.view.classList.remove('is-playing', 'is-share-open');
        this.trigger(Player_types_1.PlayerEvents.PAUSE);
        navigator.mediaSession.playbackState = 'paused';
    }
    onWaiting() {
        this.view.classList.remove('is-playing');
        this.view.classList.add('is-loading');
    }
    onEnd() {
        this.view.classList.remove('is-playing', 'is-played', 'is-started', 'is-loading');
        this.view.classList.add('is-ended');
        if (!this.settings.autoplay) {
            this.trigger(Player_types_1.PlayerEvents.END);
        }
    }
    onBeforeunload() { }
    pauseOnScroll() {
        this.st = ScrollTrigger_1.ScrollTrigger.create({
            trigger: this.view,
            onToggle: self => {
                var _a;
                !self.isActive && !((_a = this.ui.fullscreen) === null || _a === void 0 ? void 0 : _a.isFullscreen()) && this.pause();
            },
        });
    }
    updateMediaSession() {
        if ('mediaSession' in navigator && this.settings.metadata) {
            navigator.mediaSession.metadata = new MediaMetadata(Object.assign({}, this.settings.metadata));
            navigator.mediaSession.setActionHandler('play', () => this.play());
            navigator.mediaSession.setActionHandler('pause', () => this.pause());
            navigator.mediaSession.setActionHandler('seekbackward', () => this.skipBackward(true));
            navigator.mediaSession.setActionHandler('seekforward', () => this.skipForward(true));
            navigator.mediaSession.setActionHandler('seekto', () => { });
        }
    }
}
exports.Player = Player;
Player.instances = {};

},{"../../PushStates":14,"../../Utils":18,"../../templates/Templates":63,"../Component":37,"./Player.Time":48,"./Player.types":50,"./PlayerFullscreen":52,"./PlayerPopups":53,"./PlayerPoster":54,"./PlayerSettings":55,"./PlayerTimeline":56,"./PlayerVolume":57,"./Video.types":59,"gsap/dist/ScrollTrigger":3}],50:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerSize = exports.PlayerEvents = void 0;
class PlayerEvents {
}
exports.PlayerEvents = PlayerEvents;
PlayerEvents.END = 'end';
PlayerEvents.NEXT = 'next';
PlayerEvents.PREV = 'prev';
PlayerEvents.TIME_UPDATE = 'timeUpdate';
PlayerEvents.PLAY = 'play';
PlayerEvents.PAUSE = 'pause';
class PlayerSize {
}
exports.PlayerSize = PlayerSize;
PlayerSize.COVER = 'cover';
PlayerSize.CONTAIN = 'contain';
PlayerSize.AUTO = 'auto';

},{}],51:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseToTime = exports.decodeURL = void 0;
function decodeURL(src) {
    const decode = (s) => {
        try {
            const d = window.atob(s);
            return /^wq|x@$/g.test(d) ? d.replace(/^wq|x@$/g, '') : s;
        }
        catch (e) {
            return s;
        }
    };
    return /\.mp4$/.test(src) ? src : decode(src);
}
exports.decodeURL = decodeURL;
function parseToTime(totalSeconds, isLong = true) {
    const totalSec = parseInt(`${totalSeconds}`, 10);
    const hours = parseInt(`${totalSec / 3600}`, 10) % 24;
    const minutes = parseInt(`${totalSec / 60}`, 10) % 60;
    const seconds = totalSec % 60;
    return `${isLong ? (hours < 10 ? `0${hours}:` : `${hours}:`) : ''}${(minutes < 10 ? `0${minutes}` : minutes)}:${seconds < 10 ? `0${seconds}` : seconds}`;
}
exports.parseToTime = parseToTime;

},{}],52:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerFullscreen = exports.htmlDocument = exports.PlayerFullscreenEvents = void 0;
const Handler_1 = require("../../Handler");
const Site_1 = require("../../Site");
class PlayerFullscreenEvents {
}
exports.PlayerFullscreenEvents = PlayerFullscreenEvents;
PlayerFullscreenEvents.EXIT = 'exit';
PlayerFullscreenEvents.ENTER = 'enter';
exports.htmlDocument = document;
class PlayerFullscreen extends Handler_1.Handler {
    static getFullscreenElement() {
        return exports.htmlDocument.fullscreenElement || exports.htmlDocument.mozFullScreenElement || exports.htmlDocument.webkitFullscreenElement || exports.htmlDocument.msFullscreenElement;
    }
    constructor(btnEl, playerEl) {
        super();
        this.btnEl = btnEl;
        this.playerEl = playerEl;
        this.onBtnClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            if (PlayerFullscreen.getFullscreenElement()) {
                this.exitFullscreen();
            }
            else if (Site_1.browser.mobile || Site_1.browser.ios) {
                const mediaElement = this.playerEl.querySelector('video.is-current');
                this.trigger(PlayerFullscreenEvents.ENTER);
                (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.webkitEnterFullscreen) && (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.webkitEnterFullscreen());
                (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.enterFullscreen) && (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.enterFullscreen());
                this.playerEl.classList.add('is-fullscreen');
            }
            else {
                this.goFullscreen(this.playerEl);
            }
        };
        this.onFullscreenChange = () => {
            if (PlayerFullscreen.getFullscreenElement()) {
                return;
            }
            this.playerEl.classList.remove('is-fullscreen');
            this.trigger(PlayerFullscreenEvents.EXIT);
        };
        this.onVideoFullscreenExit = () => {
            this.playerEl.classList.remove('is-fullscreen');
            this.trigger(PlayerFullscreenEvents.EXIT);
        };
        this.onOrientationChange = e => {
            if (Site_1.browser.mobile) {
                const mediaElement = this.playerEl.querySelector('video.is-current');
                if (e.matches) {
                    this.playerEl.classList.add('is-fullscreen');
                    this.trigger(PlayerFullscreenEvents.ENTER);
                    (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.webkitEnterFullscreen) && (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.webkitEnterFullscreen());
                    (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.enterFullscreen) && (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.enterFullscreen());
                }
                else {
                    (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.webkitExitFullscreen) && (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.webkitExitFullscreen());
                    (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.exitFullscreen) && (mediaElement === null || mediaElement === void 0 ? void 0 : mediaElement.exitFullscreen());
                }
            }
        };
        this.btnEl = btnEl;
        this.playerEl = playerEl;
        this.bind();
    }
    destroy() {
        this.unbind();
    }
    isFullscreen() {
        return PlayerFullscreen.getFullscreenElement();
    }
    toggle() {
        if (this.isFullscreen()) {
            this.exitFullscreen();
        }
        else {
            this.goFullscreen(this.playerEl);
        }
    }
    exitFullscreen() {
        if (exports.htmlDocument.exitFullscreen) {
            exports.htmlDocument.exitFullscreen();
        }
        else if (exports.htmlDocument.mozCancelFullScreen) {
            exports.htmlDocument.mozCancelFullScreen();
        }
        else if (exports.htmlDocument.webkitExitFullscreen) {
            exports.htmlDocument.webkitExitFullscreen();
        }
    }
    goFullscreen(element) {
        let promise;
        if (element.requestFullscreen) {
            promise = element.requestFullscreen();
        }
        else if (element.mozRequestFullScreen) {
            promise = element.mozRequestFullScreen();
        }
        else if (element.webkitRequestFullscreen) {
            promise = element.webkitRequestFullscreen();
        }
        else if (element.msRequestFullscreen) {
            promise = element.msRequestFullscreen();
        }
        promise.then(() => {
            this.playerEl.classList.add('is-fullscreen');
        }).catch(err => {
            console.error(`Error attempting to enable fullscreen mode: ${err.message} (${err.name})`);
        });
    }
    bind() {
        var _a;
        (_a = this.btnEl) === null || _a === void 0 ? void 0 : _a.addEventListener('click', this.onBtnClick);
        document.addEventListener('fullscreenchange', this.onFullscreenChange);
        const mm = window.matchMedia('(orientation: landscape) and (max-height: 1023px)');
        mm.addEventListener('change', this.onOrientationChange);
        [...this.playerEl.querySelectorAll('video')].forEach(video => {
            video.addEventListener('webkitendfullscreen', this.onVideoFullscreenExit, false);
        });
    }
    unbind() {
        var _a;
        (_a = this.btnEl) === null || _a === void 0 ? void 0 : _a.removeEventListener('click', this.onBtnClick);
        document.removeEventListener('fullscreenchange', this.onFullscreenChange);
    }
}
exports.PlayerFullscreen = PlayerFullscreen;

},{"../../Handler":12,"../../Site":17}],53:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerPopups = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Handler_1 = require("../../Handler");
const Site_1 = require("../../Site");
class PlayerPopups extends Handler_1.Handler {
    constructor(view) {
        super();
        this.view = view;
        this.view = view;
        this.popups = view ? [...this.view.children] : null;
    }
    loadData({ related }) {
        this.related = related;
    }
    check(current) {
        var _a;
        if (!current) {
            return;
        }
        (_a = this.related) === null || _a === void 0 ? void 0 : _a.forEach((element, key) => {
            if (!element.timeStart) {
                return;
            }
            if (current < element.timeStart || current > element.timeStart + PlayerPopups.DURATION) {
                if (element.shown) {
                    element.shown = false;
                    this.hidePopup(this.popups[key]);
                }
                return;
            }
            if (element.shown) {
                return;
            }
            this.popups[key].style.display = 'block';
            element.shown = true;
            this.showPopup(this.popups[key]);
        });
    }
    showPopup(popupEl) {
        gsap_1.gsap.fromTo(popupEl, {
            y: -20,
            opacity: 0,
            scale: 0.9,
            transformOrigin: 'bottom',
        }, {
            y: 0,
            scale: 1,
            opacity: 1,
            duration: 0.7,
            delay: 0.15,
            pointerEvents: 'all',
            ease: Site_1.easing,
        });
    }
    hidePopup(popupEl) {
        gsap_1.gsap.to(popupEl, {
            y: 20,
            opacity: 0,
            height: 0,
            duration: 0.7,
            scale: 0.9,
            pointerEvents: 'none',
            ease: Site_1.easing,
            clearProps: 'height,scale',
            onComplete: () => {
                popupEl.style.display = 'none';
            },
        });
    }
}
exports.PlayerPopups = PlayerPopups;
PlayerPopups.DURATION = 3;

},{"../../Handler":12,"../../Site":17,"gsap/dist/gsap":5}],54:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerPoster = void 0;
const Site_1 = require("../../Site");
class PlayerPoster {
    constructor(view, playerEl) {
        this.view = view;
        this.playerEl = playerEl;
        this.view = view;
        this.playerEl = playerEl;
    }
    load(data) {
        if (data.poster) {
            const poster = !!Site_1.browser.mobile
                && data.posterMobile
                && data.posterMobile !== ''
                ? data.posterMobile
                : data.poster;
            this.view.style.backgroundImage = `url(${poster})`;
        }
        this.playerEl.classList.toggle('has-poster', !!data.poster);
    }
}
exports.PlayerPoster = PlayerPoster;

},{"../../Site":17}],55:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerSettings = exports.PlayerSettingsEvents = void 0;
const Handler_1 = require("../../Handler");
class PlayerSettingsEvents {
}
exports.PlayerSettingsEvents = PlayerSettingsEvents;
PlayerSettingsEvents.SPEED = 'speed';
class PlayerSettings extends Handler_1.Handler {
    static constrainSpeed(speed) {
        return Math.max(PlayerSettings.MIN_SPEED, Math.min(PlayerSettings.MAX_SPEED, speed));
    }
    constructor(view, playerEl) {
        super();
        this.view = view;
        this.playerEl = playerEl;
        this.isInitialSetup = true;
        this.onSpeedBtnClick = (e) => {
            this.trigger(PlayerSettingsEvents.SPEED, parseFloat(e.currentTarget.dataset.playbackRate));
        };
        this.view = view;
        this.playerEl = playerEl;
        this.listButtons = [...view.querySelectorAll('[data-playback-rate]')];
        this.bind();
    }
    destroy() {
        this.unbind();
        this.view = null;
        this.playerEl = null;
        this.listButtons = null;
    }
    updateSpeed(speed) {
        if (!this.isInitialSetup) {
            this.view.classList.add('is-updating');
            clearTimeout(this.timeout);
            this.timeout = setTimeout(() => this.view.classList.remove('is-updating'), (600 + 300));
        }
        this.isInitialSetup = false;
        this.listButtons.forEach(btn => {
            btn.parentElement.classList.toggle('is-active', parseFloat(btn.dataset.playbackRate) === speed);
        });
    }
    bind() {
        this.listButtons.forEach(btn => btn.addEventListener('click', this.onSpeedBtnClick));
    }
    unbind() {
        this.listButtons.forEach(btn => btn.removeEventListener('click', this.onSpeedBtnClick));
    }
}
exports.PlayerSettings = PlayerSettings;
PlayerSettings.MAX_SPEED = 2;
PlayerSettings.MIN_SPEED = 0.25;
PlayerSettings.SPEED_STEP = 0.25;

},{"../../Handler":12}],56:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerTimeline = exports.PlayerTimelineEvents = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Handler_1 = require("../../Handler");
const Site_1 = require("../../Site");
class PlayerTimelineEvents {
}
exports.PlayerTimelineEvents = PlayerTimelineEvents;
PlayerTimelineEvents.SEEK = 'seek';
class PlayerTimeline extends Handler_1.Handler {
    constructor(view, playerEl) {
        super();
        this.view = view;
        this.playerEl = playerEl;
        this.onMouseDown = (e) => {
            e.stopPropagation();
            this.isScrubbing = true;
        };
        this.onMouseMove = (e) => {
            const { seek } = this.getPosition(e);
            if (this.hoverEl)
                this.hoverEl.style.width = `${seek * 100}%`;
            if (this.isScrubbing) {
                e.stopPropagation();
                this.trigger(PlayerTimelineEvents.SEEK, seek, true);
                gsap_1.gsap.killTweensOf(this.currentEl);
                gsap_1.gsap.set(this.currentEl, { width: `${seek * 100}%` });
                this.playerEl.classList.add('is-scrubbing');
            }
        };
        this.onMouseUp = (e) => {
            if (this.isScrubbing) {
                e.stopPropagation();
                const { seek } = this.getPosition(e);
                this.trigger(PlayerTimelineEvents.SEEK, seek);
            }
            this.isScrubbing = false;
            this.playerEl.classList.remove('is-scrubbing');
        };
        this.onMouseLeave = () => {
            this.isScrubbing = false;
            this.playerEl.classList.remove('is-scrubbing');
        };
        this.onClick = (e) => {
            e.stopPropagation();
            const { seek } = this.getPosition(e);
            this.trigger(PlayerTimelineEvents.SEEK, seek);
            gsap_1.gsap.killTweensOf(this.currentEl);
            gsap_1.gsap.set(this.currentEl, { width: `${seek * 100}%` });
        };
        this.view = view;
        this.hoverEl = view.querySelector('.js-player-hover');
        this.currentEl = view.querySelector('.js-player-progress');
        this.loadedEl = view.querySelector('.js-player-loaded');
        this.bind();
    }
    destroy() {
        this.unbind();
        this.hoverEl = null;
        this.currentEl = null;
        this.loadedEl = null;
    }
    reset() {
        this.currentEl.style.width = '0';
        this.loadedEl.style.width = '0';
    }
    update(metadata, quick) {
        const { duration, buffered, current } = metadata;
        if (!duration) {
            return;
        }
        if (buffered && this.loadedEl) {
            gsap_1.gsap.to(this.loadedEl, {
                width: `${(Math.max(buffered, current || 0) / duration) * 100}%`,
                duration: !quick ? 0.3 : 0,
            });
        }
        if (typeof current === 'number') {
            gsap_1.gsap.to(this.currentEl, {
                width: `${((current || 0) / duration) * 100}%`,
                duration: !quick ? 0.3 : 0,
                ease: 'none',
            });
        }
    }
    addHotspots(data, duration) {
        var _a;
        (_a = data.related) === null || _a === void 0 ? void 0 : _a.forEach(({ timeStart, color }) => {
            const hotspot = document.createElement('div');
            hotspot.classList.add('player__hotspot');
            hotspot.style.left = `${((timeStart || 0) / duration) * 100}%`;
            hotspot.style.backgroundColor = color;
            this.view.appendChild(hotspot);
        });
    }
    bind() {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        !Site_1.browser.touch && ((_a = this.playerEl) === null || _a === void 0 ? void 0 : _a.addEventListener('mouseup', this.onMouseUp));
        !Site_1.browser.touch && ((_b = this.playerEl) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseleave', this.onMouseLeave));
        !Site_1.browser.touch && ((_c = this.playerEl) === null || _c === void 0 ? void 0 : _c.addEventListener('mousemove', this.onMouseMove));
        Site_1.browser.touch && ((_d = this.playerEl) === null || _d === void 0 ? void 0 : _d.addEventListener('touchmove', this.onMouseMove));
        Site_1.browser.touch && ((_e = this.playerEl) === null || _e === void 0 ? void 0 : _e.addEventListener('touchend', this.onMouseUp));
        !Site_1.browser.touch && ((_f = this.view) === null || _f === void 0 ? void 0 : _f.addEventListener('click', this.onClick));
        !Site_1.browser.touch && ((_g = this.view) === null || _g === void 0 ? void 0 : _g.addEventListener('mousedown', this.onMouseDown));
        Site_1.browser.touch && ((_h = this.view) === null || _h === void 0 ? void 0 : _h.addEventListener('touchstart', this.onMouseDown));
    }
    unbind() {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        (_a = this.playerEl) === null || _a === void 0 ? void 0 : _a.removeEventListener('mouseup', this.onMouseUp);
        (_b = this.playerEl) === null || _b === void 0 ? void 0 : _b.removeEventListener('mouseleave', this.onMouseLeave);
        (_c = this.playerEl) === null || _c === void 0 ? void 0 : _c.removeEventListener('mousemove', this.onMouseMove);
        (_d = this.playerEl) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchmove', this.onMouseMove);
        (_e = this.playerEl) === null || _e === void 0 ? void 0 : _e.removeEventListener('touchend', this.onMouseUp);
        (_f = this.view) === null || _f === void 0 ? void 0 : _f.removeEventListener('mousedown', this.onMouseDown);
        (_g = this.view) === null || _g === void 0 ? void 0 : _g.removeEventListener('touchstart', this.onMouseDown);
        (_h = this.view) === null || _h === void 0 ? void 0 : _h.removeEventListener('click', this.onClick);
    }
    getPosition(e) {
        var _a, _b;
        const pageX = e.pageX || ((_a = e.touches[0]) === null || _a === void 0 ? void 0 : _a.pageX) || ((_b = e.changedTouches[0]) === null || _b === void 0 ? void 0 : _b.pageX);
        const x = pageX - this.view.getBoundingClientRect().left;
        const width = this.view.clientWidth;
        const seek = Math.max(0, Math.min(1, x / width));
        return { x, width, seek };
    }
}
exports.PlayerTimeline = PlayerTimeline;

},{"../../Handler":12,"../../Site":17,"gsap/dist/gsap":5}],57:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerVolume = exports.PlayerVolumeEvents = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Handler_1 = require("../../Handler");
const Site_1 = require("../../Site");
class PlayerVolumeEvents {
}
exports.PlayerVolumeEvents = PlayerVolumeEvents;
PlayerVolumeEvents.CHANGE = 'change';
PlayerVolumeEvents.MUTE = 'mute';
PlayerVolumeEvents.UNMUTE = 'unmute';
class PlayerVolume extends Handler_1.Handler {
    constructor(view, playerEl) {
        super();
        this.view = view;
        this.playerEl = playerEl;
        this.isInitialSetup = true;
        this.onVolumeButtonClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            this.trigger(this.isMuted ? PlayerVolumeEvents.UNMUTE : PlayerVolumeEvents.MUTE);
        };
        this.onVolumeBarClick = (e) => {
            e.stopPropagation();
            const value = Math.max(0, Math.min(1, 1 - e.offsetY / this.barEl.clientHeight));
            this.trigger(PlayerVolumeEvents.CHANGE, value);
        };
        this.onMouseDown = (e) => {
            e.stopPropagation();
            this.isScrubbing = true;
        };
        this.onMouseMove = (e) => {
            if (this.isScrubbing) {
                e.stopPropagation();
                const posY = e.clientY - this.barEl.getBoundingClientRect().top;
                const value = Math.max(0, Math.min(1, 1 - posY / this.barEl.clientHeight));
                this.trigger(PlayerVolumeEvents.CHANGE, value);
            }
        };
        this.onMouseUp = () => {
            this.isScrubbing = false;
        };
        this.onMouseLeave = () => {
            this.isScrubbing = false;
        };
        this.view = view;
        this.playerEl = playerEl;
        this.buttonEl = this.view.querySelector('.js-volume-btn');
        this.barEl = this.view.querySelector('.js-volume-bar');
        this.valueEl = this.view.querySelector('.js-volume-value');
        this.bind();
    }
    update(volume) {
        this.volume = volume;
        this.valueEl && gsap_1.gsap.to(this.valueEl, {
            scaleY: volume,
            duration: this.isScrubbing ? 0.0001 : 0.2,
            ease: Site_1.easing,
        });
        if (!this.isInitialSetup) {
            this.view.classList.add('is-updating');
            clearTimeout(this.timeout);
            this.timeout = setTimeout(() => this.view.classList.remove('is-updating'), (600 + 300));
        }
        this.isInitialSetup = false;
    }
    toggle(muted) {
        this.isMuted = muted;
        this.playerEl.classList.toggle('is-muted', this.isMuted);
        this.valueEl && gsap_1.gsap.to(this.valueEl, { scaleY: this.isMuted ? 0 : this.volume, duration: 0.2, ease: Site_1.easing });
    }
    destroy() {
        this.unbind();
        this.view = null;
        this.playerEl = null;
        this.buttonEl = null;
        this.barEl = null;
        this.valueEl = null;
    }
    bind() {
        var _a, _b, _c, _d, _e, _f;
        (_a = this.buttonEl) === null || _a === void 0 ? void 0 : _a.addEventListener('click', this.onVolumeButtonClick);
        (_b = this.barEl) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onVolumeBarClick);
        (_c = this.barEl) === null || _c === void 0 ? void 0 : _c.addEventListener('mousedown', this.onMouseDown);
        (_d = this.playerEl) === null || _d === void 0 ? void 0 : _d.addEventListener('mousemove', this.onMouseMove);
        (_e = this.playerEl) === null || _e === void 0 ? void 0 : _e.addEventListener('mouseup', this.onMouseUp);
        (_f = this.playerEl) === null || _f === void 0 ? void 0 : _f.addEventListener('mouseleave', this.onMouseLeave);
    }
    unbind() {
        var _a, _b, _c, _d, _e, _f;
        (_a = this.buttonEl) === null || _a === void 0 ? void 0 : _a.removeEventListener('click', this.onVolumeButtonClick);
        (_b = this.barEl) === null || _b === void 0 ? void 0 : _b.removeEventListener('click', this.onVolumeBarClick);
        (_c = this.barEl) === null || _c === void 0 ? void 0 : _c.removeEventListener('mousedown', this.onMouseDown);
        (_d = this.playerEl) === null || _d === void 0 ? void 0 : _d.removeEventListener('mousemove', this.onMouseMove);
        (_e = this.playerEl) === null || _e === void 0 ? void 0 : _e.removeEventListener('mouseup', this.onMouseUp);
        (_f = this.playerEl) === null || _f === void 0 ? void 0 : _f.removeEventListener('mouseleave', this.onMouseLeave);
    }
}
exports.PlayerVolume = PlayerVolume;

},{"../../Handler":12,"../../Site":17,"gsap/dist/gsap":5}],58:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Video = void 0;
const Player_utils_1 = require("../../components/Player/Player.utils");
const Player_types_1 = require("../../components/Player/Player.types");
const Video_types_1 = require("../../components/Player/Video.types");
const Site_1 = require("../../Site");
const Player_1 = require("../../components/Player/Player");
const Utils_1 = require("../../Utils");
const VideoCaptions_1 = require("./VideoCaptions");
const PlayerSettings_1 = require("./PlayerSettings");
class Video extends Player_1.Player {
    preload() {
        const state = !Site_1.browser.safari
            ? Video_types_1.MediaState.HAVE_ENOUGH_DATA
            : Video_types_1.MediaState.HAVE_METADATA;
        return new Promise(resolve => {
            if (!!Site_1.browser.mobile || !this.settings.autoplay) {
                resolve(true);
            }
            else if (this.media.readyState >= state) {
                resolve(true);
            }
            else {
                this.media.addEventListener('loadeddata', () => {
                    if (this.media.readyState >= state) {
                        resolve(true);
                    }
                });
            }
        });
    }
    destroy() {
        this.cacheTimePosition(true);
        this.media.pause();
        this.media.src = '';
        this.media.load();
        super.destroy();
    }
    load(data) {
        var _a;
        const src = !!Site_1.browser.mobile && data.srcMobile && data.srcMobile !== '' ? data.srcMobile : data.src;
        this.media.pause();
        this.media.src = (0, Player_utils_1.decodeURL)(src);
        this.media.load();
        this.view.classList.remove('is-ended', 'is-started', 'is-played', 'is-playing');
        this.ui && ((_a = this.ui.timeline) === null || _a === void 0 ? void 0 : _a.reset());
        this.settings.autoplay && this.play();
        this.settings.ratio = data.ratio;
        this.settings.ratioMobile = data.ratioMobile;
        this.resize();
        this.settings.poster = data.poster;
        this.settings.posterMobile = data.posterMobile;
        this.ui.poster.load(data);
        this.settings.cacheTime && this.seekToCached();
        return Promise.resolve(true);
    }
    play() {
        var _a, _b;
        if (this.media && this.media.paused) {
            if (this.getCurrentTime() >= this.getDuration()) {
                (_b = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.timeline) === null || _b === void 0 ? void 0 : _b.update({ current: 0, duration: this.getDuration() }, true);
                this.seek(0);
            }
            const playPromise = this.media.play();
            if (playPromise !== undefined) {
                (playPromise).then(() => {
                    this.view.classList.remove('autoplay-failed');
                }).catch(() => {
                    this.view.classList.add('autoplay-failed');
                });
            }
            setTimeout(() => {
                this.view.classList.add('should-play');
            }, 1000);
        }
    }
    pause() {
        if (!this.media || this.media.paused) {
            return;
        }
        this.media.pause();
    }
    toggle(play) {
        const playing = !this.media.paused;
        if (typeof play !== 'undefined') {
            if (!!play && !playing) {
                this.play();
            }
            else if (!play && !!playing) {
                this.pause();
            }
        }
        else {
            playing ? this.pause() : this.play();
        }
        return !playing;
    }
    unload() {
        if (this.media) {
            this.media.pause();
            this.media.src = '';
            this.media.load();
        }
    }
    seek(value) {
        if (!this.getDuration()) {
            return;
        }
        this.media.currentTime = this.getStart() + this.getDuration() * value;
    }
    seekToTime(time) {
        this.media.currentTime = this.getStart() + time;
    }
    skipForward(more) {
        this.seekToTime(this.getCurrentTime() + (more ? 10 : 5));
    }
    skipBackward(more) {
        this.seekToTime(this.getCurrentTime() - (more ? 10 : 5));
    }
    goRewind() {
        this.media.currentTime -= 15;
    }
    goForward() {
        this.media.currentTime += 15;
    }
    end() {
        this.seek(1);
        this.pause();
    }
    restart() {
        this.seek(0);
        this.play();
    }
    setVolume(value) {
        this.media.volume = value;
        this.media.muted = value === 0;
        super.setVolume(value);
    }
    toggleMute(mute) {
        if (typeof mute !== 'undefined') {
            this.media.muted = mute;
        }
        else {
            this.media.muted = !this.media.muted;
        }
        !this.media.muted && this.media.volume < 0.05 && (this.media.volume = 1);
        this.ui.volume.update(this.media.volume);
        this.ui.volume.toggle(this.media.muted);
    }
    volumeUp() {
        if (this.media.muted) {
            this.toggleMute(false);
            this.setVolume(0.05);
        }
        else {
            this.setVolume(Math.min(1, this.media.volume + 0.05));
        }
    }
    volumeDown() {
        this.setVolume(Math.max(0, this.media.volume - 0.05));
    }
    setSpeed(speed) {
        const constrainedSpeed = PlayerSettings_1.PlayerSettings.constrainSpeed(speed);
        this.media.playbackRate = constrainedSpeed;
        super.setSpeed(constrainedSpeed);
    }
    speedUp() {
        this.setSpeed(this.media.playbackRate + PlayerSettings_1.PlayerSettings.SPEED_STEP);
    }
    speedDown() {
        this.setSpeed(this.media.playbackRate - PlayerSettings_1.PlayerSettings.SPEED_STEP);
    }
    setHotspots(data) {
        this.ui.timeline.addHotspots(data, this.getDuration());
        this.ui.popups.loadData(data);
    }
    isPaused() {
        return this.media.paused;
    }
    setup() {
        var _a;
        this.createPlayer();
        this.settings.ratio = parseFloat(`${this.settings.ratio}`);
        this.settings.ratioMobile = parseFloat(`${this.settings.ratioMobile}`);
        if (!this.settings.srcMobile || this.settings.srcMobile === '') {
            delete this.settings.ratioMobile;
            delete this.settings.srcMobile;
        }
        if (!!Site_1.browser.mobile && this.settings.srcMobile && this.settings.srcMobile !== this.media.src) {
            this.media.src = (0, Player_utils_1.decodeURL)(this.settings.srcMobile);
            this.media.load();
        }
        else if (!Site_1.browser.mobile && this.settings.src && this.settings.src !== this.media.src) {
            this.media.src = (0, Player_utils_1.decodeURL)(this.settings.src);
            this.media.load();
        }
        this.settings.volume && (this.media.volume = this.settings.volume);
        this.settings.muted = this.media.muted;
        if (this.media.loop) {
            this.settings.loop = true;
        }
        if (this.settings.loop) {
            this.media.loop = true;
        }
        const media = this.media;
        if (media.poster && !this.settings.poster) {
            this.settings.poster = media.poster;
            if (this.media.controls) {
                media.poster = '';
            }
        }
        if (!!this.media.controls || this.settings.controls) {
            this.buildUI();
            this.media.controls = false;
            this.media.removeAttribute('controls');
        }
        this.bind();
        !this.seekToParams() && this.settings.cacheTime && this.seekToCached();
        const cachedVolume = (0, Utils_1.getStorageItem)(Video_types_1.PlayerStorage.VOLUME);
        this.ui && ((_a = this.ui.volume) === null || _a === void 0 ? void 0 : _a.toggle(this.settings.muted));
        this.setVolume(parseFloat(cachedVolume) || this.media.volume);
        const cachedSpeed = (0, Utils_1.getStorageItem)(Video_types_1.PlayerStorage.SPEED);
        this.setSpeed(parseFloat(cachedSpeed) || 1);
    }
    createPlayer() {
        this.media = this.view.querySelector('audio, video');
        if (!this.media) {
            console.error('Video/Audio component must contain html `<audio>` or `<video>` element');
            return;
        }
        this.isAudio = this.media.tagName === 'AUDIO';
    }
    buildUI() {
        super.buildUI();
        this.loadCaptions();
    }
    loadCaptions() {
        const captionsEl = this.view.querySelector('.js-player-cc');
        captionsEl && this.ui && (this.ui.captions = new VideoCaptions_1.VideoCaptions(captionsEl, this.view));
    }
    bindPlayer() {
        this.media.addEventListener('loadeddata', () => this.onLoaded());
        this.media.addEventListener('loadedmetadata', () => this.onLoaded());
        this.media.addEventListener('durationchange', () => this.onDurationChange());
        this.media.addEventListener('updateMediaState', () => this.onDurationChange());
        this.media.addEventListener('progress', () => this.onProgress());
        this.media.addEventListener('updateMediaState', () => this.onProgress());
        this.media.addEventListener('timeupdate', () => this.onTimeupdate());
        this.media.addEventListener('play', () => this.onPlay());
        this.media.addEventListener('canplay', () => this.onCanplay());
        this.media.addEventListener('playing', () => this.onPlaying());
        this.media.addEventListener('pause', () => this.onPause());
        this.media.addEventListener('waiting', () => this.onWaiting());
        this.media.addEventListener('ended', () => this.onEnd());
        this.media.addEventListener('error', e => this.onError(e));
        if (this.media.readyState >= Video_types_1.MediaState.HAVE_CURRENT_DATA) {
            this.onLoaded();
        }
    }
    unbindPlayer() {
        this.media.removeEventListener('loadeddata', () => this.onLoaded());
        this.media.removeEventListener('loadedmetadata', () => this.onLoaded());
        this.media.removeEventListener('durationchange', () => this.onDurationChange());
        this.media.removeEventListener('updateMediaState', () => this.onDurationChange());
        this.media.removeEventListener('progress', () => this.onProgress());
        this.media.removeEventListener('updateMediaState', () => this.onProgress());
        this.media.removeEventListener('timeupdate', () => this.onTimeupdate());
        this.media.removeEventListener('play', () => this.onPlay());
        this.media.removeEventListener('canplay', () => this.onCanplay());
        this.media.removeEventListener('playing', () => this.onPlaying());
        this.media.removeEventListener('pause', () => this.onPause());
        this.media.removeEventListener('waiting', () => this.onWaiting());
        this.media.removeEventListener('ended', () => this.onEnd());
        this.media.removeEventListener('error', e => this.onError(e));
    }
    onLoaded() {
        var _a;
        this.ui && ((_a = this.ui.captions) === null || _a === void 0 ? void 0 : _a.load(this.media));
        this.updateTime();
    }
    onDurationChange() {
        this.updateTime();
    }
    onProgress() {
        this.updateTime();
    }
    onTimeupdate() {
        this.constrainTime();
        this.updateTime();
    }
    onError(e) {
        if (this.view && e.target.networkState && e.target.networkState === 3) {
            console.warn(`Can't load media ${e.target.src}`);
            this.view.classList.add('is-error');
        }
    }
    onBeforeunload() {
        this.cacheTimePosition(true);
    }
    updateTime() {
        if (!this.media) {
            return;
        }
        const current = this.getCurrentTime();
        const duration = this.getDuration();
        const { buffered } = this.media;
        const bufferedTime = buffered && buffered.length ? buffered.end(0) : 0;
        this.ui.time.update({ duration, current }, this.settings.timeFormatLong);
        this.ui.timeline.update({ duration, buffered: bufferedTime, current });
        this.ui.popups.check(current);
        this.view.classList.toggle('is-started', current > this.settings.readyTime);
        this.cacheTimePosition();
        this.trigger(Player_types_1.PlayerEvents.TIME_UPDATE, current);
    }
    seekToParams() {
        const time = (new URLSearchParams(window.location.search)).get('time');
        if (time) {
            this.seekToTime(parseInt(time, 10));
            return true;
        }
        return false;
    }
    seekToCached() {
        const path = (0, Utils_1.normalizeUrl)(window.location.pathname);
        const cachedTime = (0, Utils_1.getStorageItem)(Video_types_1.PlayerStorage.SEEK + path);
        cachedTime && this.seekToTime(parseFloat(cachedTime));
    }
    cacheTimePosition(force) {
        const path = (0, Utils_1.normalizeUrl)(window.location.pathname);
        const time = this.getCurrentTime() >= this.getDuration() - 1 ? 0 : this.getCurrentTime();
        (!Site_1.browser.ios || force) && (0, Utils_1.setStorageItem)(Video_types_1.PlayerStorage.SEEK + path, `${time}`);
    }
    getDuration() {
        return this.settings.duration || this.media.duration;
    }
    getStart() {
        return this.settings.timeFrom || 0;
    }
    getCurrentTime() {
        return this.media.currentTime - this.getStart();
    }
    constrainTime() {
        if (!this.media) {
            return;
        }
        if (this.media.currentTime < this.getStart()) {
            this.media.currentTime = this.getStart();
            this.pause();
        }
        if (this.media.currentTime === this.getStart() + this.getDuration()) {
            this.pause();
            this.onEnd();
            return;
        }
        if (this.media.currentTime > this.getStart() + this.getDuration()) {
            this.media.currentTime = this.getStart() + this.getDuration();
        }
    }
}
exports.Video = Video;

},{"../../Site":17,"../../Utils":18,"../../components/Player/Player":49,"../../components/Player/Player.types":50,"../../components/Player/Player.utils":51,"../../components/Player/Video.types":59,"./PlayerSettings":55,"./VideoCaptions":60}],59:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerStorage = exports.MediaState = void 0;
var MediaState;
(function (MediaState) {
    MediaState[MediaState["HAVE_NOTHING"] = 0] = "HAVE_NOTHING";
    MediaState[MediaState["HAVE_METADATA"] = 1] = "HAVE_METADATA";
    MediaState[MediaState["HAVE_CURRENT_DATA"] = 2] = "HAVE_CURRENT_DATA";
    MediaState[MediaState["HAVE_FUTURE_DATA"] = 3] = "HAVE_FUTURE_DATA";
    MediaState[MediaState["HAVE_ENOUGH_DATA"] = 4] = "HAVE_ENOUGH_DATA";
})(MediaState || (exports.MediaState = MediaState = {}));
class PlayerStorage {
}
exports.PlayerStorage = PlayerStorage;
PlayerStorage.CC_ACTIVE = 'active';
PlayerStorage.CC_INDEX = 'captions';
PlayerStorage.CC_NOT_ACTIVE = 'not-active';
PlayerStorage.CC = 'cc';
PlayerStorage.SEEK = 'seek';
PlayerStorage.SPEED = 'speed';
PlayerStorage.VOLUME = 'volume';

},{}],60:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.VideoCaptions = void 0;
const Utils_1 = require("../../Utils");
const Video_types_1 = require("./Video.types");
class VideoCaptions {
    constructor(view, playerEl) {
        this.view = view;
        this.playerEl = playerEl;
        this.onCueEnter = (e) => {
            this.captions && (this.captions.style.display = 'block');
            this.captions && (this.captions.innerHTML = `<span>${e.currentTarget.text}</span>`);
        };
        this.onCueExit = () => {
            this.captions && (this.captions.style.display = 'none');
        };
        this.onToggleBtnClick = (e) => {
            e.stopPropagation();
            this.toggle();
        };
        this.onCCTrackClick = e => {
            e.preventDefault();
            e.stopPropagation();
            const index = parseInt(e.currentTarget.dataset.index || -1, 10);
            index < 0 ? this.unloadCC() : this.loadCC(index);
        };
        this.view = view;
        this.playerEl = playerEl;
        this.btn = view.querySelector('.js-player-cc-btn');
        this.captions = playerEl.querySelector('.js-player-cc-text');
        this.listButtons = [...view.querySelectorAll('.js-player-cc-item')];
        this.bind();
    }
    destroy() {
        this.unbind();
        this.view = null;
        this.playerEl = null;
        this.btn = null;
        this.captions = null;
        this.listButtons = null;
        this.unloadCC();
        this.tracks = null;
        this.currentIndex = null;
    }
    load(media) {
        if (!Array.isArray(media) && media.textTracks.length > 0) {
            this.playerEl.classList.add('has-cc');
            this.tracks = media.textTracks;
            [...this.tracks].forEach((track) => { track.mode = 'hidden'; });
        }
        else {
            this.playerEl.classList.remove('has-cc');
        }
        this.checkLocalStorage();
    }
    toggle() {
        this.isActive = !this.isActive;
        (0, Utils_1.setStorageItem)(Video_types_1.PlayerStorage.CC, this.isActive ? Video_types_1.PlayerStorage.CC_ACTIVE : Video_types_1.PlayerStorage.CC_NOT_ACTIVE);
        if (this.isActive) {
            this.loadCC(this.currentIndex >= 0 ? this.currentIndex : 0);
        }
        else {
            this.unloadCC();
        }
        this.view.classList.add('is-updating');
        clearTimeout(this.timeout);
        this.timeout = setTimeout(() => this.view.classList.remove('is-updating'), (600 + 300));
    }
    showNative() {
        this.tracks && [...this.tracks].forEach((track) => {
            track.mode = track.mode === 'hidden' ? 'showing' : 'disabled';
        });
    }
    hideNative() {
        this.tracks && [...this.tracks].forEach((track) => {
            track.mode = track.mode === 'showing' ? 'hidden' : 'disabled';
        });
    }
    loadCC(index) {
        if (Array.isArray(this.tracks)) {
            return;
        }
        this.isActive = true;
        this.currentIndex = index;
        (0, Utils_1.setStorageItem)(Video_types_1.PlayerStorage.CC_INDEX, `${index}`);
        (0, Utils_1.setStorageItem)(Video_types_1.PlayerStorage.CC, Video_types_1.PlayerStorage.CC_ACTIVE);
        this.loadTracklist(this.tracks);
        this.updateButtons();
    }
    loadTracklist(tracklist) {
        if (!tracklist) {
            return;
        }
        [...tracklist].forEach((track, i) => {
            track.mode = i === this.currentIndex ? 'hidden' : 'disabled';
        });
        const track = tracklist[this.currentIndex];
        const { cues } = track;
        for (let i = 0; i < cues.length; ++i) {
            const cue = cues[i];
            cue.onenter = this.onCueEnter;
            cue.onexit = this.onCueExit;
        }
    }
    unloadCC() {
        this.isActive = false;
        this.tracks && [...this.tracks].forEach((track) => { track.mode = 'disabled'; });
        this.updateButtons();
        (0, Utils_1.setStorageItem)(Video_types_1.PlayerStorage.CC, Video_types_1.PlayerStorage.CC_NOT_ACTIVE);
    }
    updateButtons() {
        this.listButtons.forEach((btn, i) => {
            const isCurrent = (!this.isActive && i === 0) || (this.isActive && i - 1 === this.currentIndex);
            btn.parentElement.classList.toggle('is-active', isCurrent);
        });
        this.playerEl.classList.toggle('has-captions-on', this.isActive);
    }
    checkLocalStorage() {
        if ((0, Utils_1.getStorageItem)(Video_types_1.PlayerStorage.CC) === Video_types_1.PlayerStorage.CC_ACTIVE) {
            this.loadCC(parseInt(Video_types_1.PlayerStorage.CC_INDEX, 10) || 0);
        }
    }
    bind() {
        var _a, _b;
        (_a = this.btn) === null || _a === void 0 ? void 0 : _a.addEventListener('click', this.onToggleBtnClick);
        (_b = this.listButtons) === null || _b === void 0 ? void 0 : _b.forEach(btn => btn.addEventListener('click', this.onCCTrackClick));
    }
    unbind() {
        var _a, _b;
        (_a = this.btn) === null || _a === void 0 ? void 0 : _a.removeEventListener('click', this.onToggleBtnClick);
        (_b = this.listButtons) === null || _b === void 0 ? void 0 : _b.forEach(btn => btn.removeEventListener('click', this.onCCTrackClick));
    }
}
exports.VideoCaptions = VideoCaptions;

},{"../../Utils":18,"./Video.types":59}],61:[function(require,module,exports){
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.WrappedText = void 0;
const gsap_1 = __importDefault(require("gsap"));
const Site_1 = require("../Site");
const Component_1 = require("./Component");
const Utils_1 = require("../Utils");
class WrappedText extends Component_1.Component {
    constructor(view) {
        super(view);
        this.view = view;
        this.bind();
        this.checkCollisions();
        window.addEventListener('resize', (0, Utils_1.debounce)(() => this.checkCollisions()));
    }
    bind() {
        this.allImages = [...this.view.querySelectorAll('.js-wrapped-image')];
        this.title = this.view.querySelector('.js-wrapped-title .heading');
        this.content = this.view.querySelector('.js-wrapped-content');
    }
    checkOverflow(element, containerHeight) {
        if ((element.offsetTop + element.offsetHeight) > containerHeight) {
            element.style.top = `${containerHeight - element.offsetHeight - parseInt(window.getComputedStyle(element).marginTop.replace('px', ''), 10)}px`;
        }
    }
    checkCollisions() {
        const mm = gsap_1.default.matchMedia();
        mm.add('(orientation: landscape)', () => {
            const paddingBottom = parseInt(window.getComputedStyle(this.content).paddingBottom.replace('px', ''), 10);
            const containerHeight = this.content.offsetHeight - paddingBottom;
            let previousHeight = this.title ? (this.title.offsetTop + this.title.offsetHeight) : 0;
            this.allImages.forEach(image => {
                this.content && this.checkOverflow(image, containerHeight);
                if (image.offsetTop < previousHeight) {
                    image.style.top = `${previousHeight}px`;
                }
                previousHeight = image.offsetTop + image.offsetHeight;
            });
            if (previousHeight > containerHeight) {
                this.content.style.height = `${previousHeight + paddingBottom}px`;
            }
        });
        if (!Site_1.breakpoint.desktop) {
            this.content.style.removeProperty('height');
        }
    }
}
exports.WrappedText = WrappedText;

},{"../Site":17,"../Utils":18,"./Component":37,"gsap":5}],62:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Page = exports.PageEvents = void 0;
const gsap_1 = require("gsap/dist/gsap");
const Handler_1 = require("../Handler");
const Classes_1 = require("../Classes");
const Images_1 = require("../widgets/Images");
class PageEvents {
}
exports.PageEvents = PageEvents;
PageEvents.PROGRESS = 'progress';
PageEvents.COMPLETE = 'complete';
PageEvents.CHANGE = 'append';
class Page extends Handler_1.Handler {
    constructor(view, options) {
        super();
        this.view = view;
        this.onComponentChange = (el) => {
            this.buildComponents(el.querySelectorAll('[data-component]'));
            this.trigger(PageEvents.CHANGE, el);
        };
        this.view.style.opacity = '0';
        this.components = [];
        this.buildComponents(this.view.parentNode.querySelectorAll('[data-component]'));
    }
    preload() {
        return Images_1.Images.preload(this.view.querySelectorAll('img'))
            .then(() => {
            this.trigger(PageEvents.COMPLETE);
        });
    }
    onState() {
        let changed = !!false;
        for (let i = 0; i < this.components.length; i += 1) {
            const component = this.components[i];
            const componentChanged = component.onState();
            if (!changed && !!componentChanged) {
                changed = true;
            }
        }
        return changed;
    }
    animateIn(delay) {
        return new Promise(resolve => {
            for (let i = 0; i < this.components.length; i += 1) {
                this.components[i].animateIn(i, delay);
            }
            gsap_1.gsap.to(this.view, {
                duration: 0.3,
                opacity: 1,
                onComplete: () => resolve(),
            });
        });
    }
    animateOut() {
        const pageAnimationPromise = new Promise(resolve => {
            gsap_1.gsap.to(this.view, {
                duration: 0.2,
                onComplete: () => {
                    document.body.scrollTop = 0;
                },
                opacity: 0,
            });
            resolve();
        });
        const componentAnimations = this.components.map(obj => obj.animateOut());
        return new Promise(resolve => {
            const allPromises = componentAnimations.concat(pageAnimationPromise);
            Promise.all(allPromises).then(() => {
                resolve();
            });
        });
    }
    resize(wdt, hgt, breakpoint, bpChanged) {
        this.components.forEach(item => {
            item.resize(wdt, hgt);
        });
    }
    destroy() {
        this.components.forEach(item => item.destroy());
        this.components = [];
        this.view = null;
        super.destroy();
    }
    buildComponents(componentsList) {
        this.components = [];
        this.components = [...componentsList].map(el => {
            const element = el;
            const name = element.dataset.component;
            if (name !== undefined && Classes_1.components[name]) {
                let options;
                if (element.dataset.options) {
                    options = JSON.parse(element.dataset.options);
                }
                const component = new Classes_1.components[name](element, options);
                return component;
            }
            window.console.warn('There is no `%s` component!', name);
        }).filter(Boolean);
    }
    callAll(fn, ...args) {
        for (let i = 0; i < this.components.length; i += 1) {
            const component = this.components[i];
            if (typeof component[fn] === 'function') {
                component[fn](...args);
            }
        }
    }
}
exports.Page = Page;

},{"../Classes":11,"../Handler":12,"../widgets/Images":71,"gsap/dist/gsap":5}],63:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Templates = exports.TemplateNames = void 0;
class TemplateNames {
}
exports.TemplateNames = TemplateNames;
TemplateNames.LIGHTBOX = 'lightbox';
TemplateNames.LIVESEARCH = 'livesearch';
TemplateNames.PLAYER = 'player';
class Templates {
    static get(name) {
        const tmpl = document.querySelector(`#tmpl-${name}`);
        if (!tmpl) {
            console.warn('There is no `%s` template!', name);
            return null;
        }
        return Twig.twig({ data: tmpl.innerHTML });
    }
}
exports.Templates = Templates;

},{}],64:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.API = void 0;
const PushStates_1 = require("../PushStates");
const Recaptcha_1 = require("./Recaptcha");
const Utils_1 = require("../Utils");
class API {
    static bind(where) {
        [...(where || document).querySelectorAll('[data-api]:not(form)')]
            .forEach(apiEl => {
            apiEl.removeEventListener('click', API.onAction);
            apiEl.addEventListener('click', API.onAction);
        });
        [...(where || document).querySelectorAll('form[data-api]')].forEach(apiFormEl => {
            apiFormEl.removeEventListener('submit', API.onAction);
            apiFormEl.addEventListener('submit', API.onAction);
            apiFormEl.setAttribute('novalidate', 'novalidate');
            apiFormEl.querySelectorAll('input[required]').forEach(input => {
                input.addEventListener('blur', () => {
                    const data = Object.assign({}, JSON.parse(apiFormEl.getAttribute('data-api')));
                    API.beforeCalls.validateBlur(data, apiFormEl);
                });
            });
        });
    }
    static callIt(dataApi, el, customCallback) {
        const data = API.preprocessData(dataApi, el);
        el.classList.add('is-doing-request');
        const action = data.action || 'POST';
        delete data.action;
        const url = data.url || window.location.pathname;
        delete data.url;
        return new Promise((resolve, reject) => {
            el.classList.remove('is-doing-request');
            const dataBody = new URLSearchParams(data);
            fetch(url, {
                method: action,
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: dataBody,
            })
                .then(response => response.json())
                .then(response => {
                if (data.callback) {
                    API.onSuccess(data, el, response);
                }
                if (customCallback && typeof customCallback === 'function') {
                    customCallback(data, el, response);
                }
                resolve(response);
            })
                .catch(error => {
                console.warn(`API error: ${error}`, data);
                reject(error);
            });
        });
    }
    static preprocessData(data, el) {
        if (el.matches('form')) {
            data.url = !data.url && el.getAttribute('action') ? el.getAttribute('action') : data.url;
            data = Object.assign(data, (0, Utils_1.serializeObject)(el));
        }
        if (el.matches('[href]')) {
            data.url = !data.url && el.getAttribute('href') ? el.getAttribute('href') : data.url;
        }
        if (data.formSelector) {
            data = Object.assign(data, (0, Utils_1.serializeObject)(document.querySelector(data.formSelector)));
            delete data.formSelector;
        }
        if (data.params) {
            data = Object.assign(data, data.params);
            delete data.params;
        }
        return data;
    }
}
exports.API = API;
API.beforeCalls = {
    validate(data, el) {
        let passed = true;
        let message = '';
        if (el.classList.contains('is-done')) {
            el.classList.remove('is-done');
            return;
        }
        el.querySelectorAll('.js-error').forEach(errorEl => {
            errorEl.innerHTML = '';
            errorEl.classList.remove('is-error');
        });
        el.querySelectorAll('input[required]:not([data-recaptcha])').forEach(input => {
            switch (input.type) {
                case 'email':
                    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    const { value } = input;
                    if (!re.test(value) || !value.length) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = value.length > 0 ? "It seems there's an issue with the email you entered. <br> Please double-check and try again." : 'Required field';
                        input.closest('fieldset').querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.closest('fieldset').querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'password':
                    const pass = input.value;
                    if (pass.length > 5) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = pass.length > 0 ? 'invalid-pass' : 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                case 'checkbox':
                    if (!input.checked) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'text':
                    if (input.value.length > 0) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                default:
                    break;
            }
        });
        el.querySelectorAll('textarea[required]').forEach(textarea => {
            if (textarea.value.length > 0) {
                textarea.parentElement.classList.remove('is-error');
                textarea.parentElement.querySelector('.js-error').innerHTML = '';
            }
            else {
                passed = false;
                textarea.parentElement.classList.add('is-error');
                message = 'Required field';
                textarea.parentElement.querySelector('.js-error').innerHTML = message;
            }
        });
        if (passed) {
            Promise.all([Recaptcha_1.Recaptcha ? Recaptcha_1.Recaptcha.check(el) : null]).then(() => {
                API.callIt(data, el);
                el.querySelectorAll('.js-error').forEach(errorEl => {
                    errorEl.innerHTML = '';
                    errorEl.classList.remove('is-error');
                });
                el.classList.remove('has-errors');
            });
        }
        else {
            el.classList.add('has-errors');
        }
    },
    validateBlur(data, el) {
        let passed = true;
        let message = '';
        if (el.classList.contains('is-done')) {
            el.classList.remove('is-done');
            return;
        }
        el.querySelectorAll('.js-error').forEach(errorEl => {
            errorEl.innerHTML = '';
            errorEl.classList.remove('is-error');
        });
        el.querySelectorAll('input[required]:not([data-recaptcha])').forEach(input => {
            switch (input.type) {
                case 'email':
                    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    const { value } = input;
                    if (!re.test(value) || !value.length) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = value.length > 0 ? 'NOT VALID E-MAIL FORMAT' : 'Required field';
                        input.closest('fieldset').querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.closest('fieldset').querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'password':
                    const pass = input.value;
                    if (pass.length > 5) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = pass.length > 0 ? 'invalid-pass' : 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                case 'checkbox':
                    if (!input.checked) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'text':
                    if (input.value.length > 0) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                default:
                    break;
            }
        });
        el.querySelectorAll('textarea[required]').forEach(textarea => {
            if (textarea.value.length > 0) {
                textarea.parentElement.classList.remove('is-error');
                textarea.parentElement.querySelector('.js-error').innerHTML = '';
            }
            else {
                passed = false;
                textarea.parentElement.classList.add('is-error');
                message = 'Required field';
                textarea.parentElement.querySelector('.js-error').innerHTML = message;
            }
        });
        if (passed) {
            el.querySelectorAll('.js-error').forEach(errorEl => {
                errorEl.innerHTML = '';
                errorEl.classList.remove('is-error');
            });
            el.classList.remove('has-errors');
        }
        else {
            el.classList.add('has-errors');
        }
    },
};
API.callbacks = {
    onSubscribe(data, el, response) {
        let $message = el.querySelector('.js-message');
        if (!$message) {
            const div = document.createElement('div');
            div.classList.add('js-message', 'message');
            el.append(div);
            $message = el.querySelector('.js-message');
        }
        const html = (response.message);
        $message.innerHTML = html;
        el.classList.add('is-completed');
        el.querySelectorAll('input').forEach(elem => elem.dispatchEvent(new Event('blur')));
    },
    onSendMessage(data, el, response) {
        let $message = el.querySelector('.js-message');
        if (!$message) {
            el.append('<div class="js-message message">');
            $message = el.querySelector('.js-message');
        }
        const html = (response.message);
        $message.innerHTML = html;
        el.classList.add('is-completed');
        el.querySelectorAll('input').forEach(elem => elem.dispatchEvent(new Event('blur')));
    },
    reload: () => {
        PushStates_1.PushStates.reload();
    },
};
API.onAction = (e) => {
    e.preventDefault();
    e.stopPropagation();
    const el = e.currentTarget;
    const data = Object.assign({}, JSON.parse(el.getAttribute('data-api')));
    if (data.beforeCall) {
        if (data.beforeCall in API.beforeCalls) {
            API.beforeCalls[data.beforeCall](data, el);
            return;
        }
    }
    API.callIt(data, el);
};
API.onSuccess = (data, el, response) => {
    if (data.callback) {
        if (data.callback in API.callbacks) {
            API.callbacks[data.callback](data, el, response);
        }
    }
};
API.refresh = () => {
    const forms = [...document.querySelectorAll('form')];
    forms.forEach(form => {
        const inputs = form.querySelectorAll('input');
        const errors = [...form.querySelectorAll('.is-error'), ...form.querySelectorAll('.has-errors')];
        const errorMessages = form.querySelectorAll('.js-error');
        form.classList.remove('is-doing-request', 'is-completed', 'has-errors');
        for (const message of errorMessages) {
            message.innerHTML = '';
        }
        for (const input of inputs) {
            input.value = '';
        }
        for (const err of errors) {
            err.classList.remove('is-error', 'has-errors');
        }
    });
};

},{"../PushStates":14,"../Utils":18,"./Recaptcha":72}],65:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Accessibility = void 0;
const Site_1 = require("../Site");
const Analytics_1 = require("./Analytics");
class Accessibility {
    static init() {
        const html = document.documentElement;
        document.addEventListener('keyup', e => {
            const key = e.keyCode || e.which;
            if (key === 9) {
                Accessibility.tabbedAmunt += 1;
                if (Site_1.debug) {
                    console.log('%caccessibility', 'background: yellow; color: black', document.activeElement);
                }
                html.classList.toggle('accessibility', Accessibility.tabbedAmunt >= 2);
                Accessibility.isOn = html.classList.contains('accessibility');
                Accessibility.tabbedAmunt >= 2 && !!Accessibility.isOn && Analytics_1.Analytics.sendCustomEvent({ event: 'accessibility_on' });
            }
        });
        document.addEventListener('mouseup', e => {
            if (e.detail) {
                html.classList.remove('accessibility');
                Accessibility.tabbedAmunt = 0;
                Accessibility.isOn = html.classList.contains('accessibility');
            }
        });
        document.querySelectorAll('[data-skip-to]').forEach(item => {
            item.addEventListener('click', e => {
                e.preventDefault();
                e.stopPropagation();
                const target = e.currentTarget.getAttribute('href');
                if (!target[0]) {
                    return;
                }
                document.querySelector(`${target} a`).focus();
                html.classList.add('accessibility');
            });
        });
    }
}
exports.Accessibility = Accessibility;
Accessibility.tabbedAmunt = 0;

},{"../Site":17,"./Analytics":67}],66:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Accessibility_1 = require("./Accessibility");
const Api_1 = require("./Api");
const CSSAnimate_1 = require("./CSSAnimate");
const Expand_1 = require("./Expand");
const Images_1 = require("./Images");
const Recaptcha_1 = require("./Recaptcha");
const Sounds_1 = require("./Sounds");
const Vibration_1 = require("./Vibration");
class Widgets {
    static bind(el) {
        Accessibility_1.Accessibility.init();
        Api_1.API.bind(el);
        CSSAnimate_1.CSSAnimate.bind(el);
        Expand_1.Expand.bind(el);
        Images_1.Images.bind(el);
        Recaptcha_1.Recaptcha.bind(el);
        Sounds_1.Sounds.bind(el);
        Vibration_1.Vibration.bind(el);
    }
}
exports.default = Widgets;

},{"./Accessibility":65,"./Api":68,"./CSSAnimate":69,"./Expand":70,"./Images":71,"./Recaptcha":72,"./Sounds":74,"./Vibration":75}],67:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Analytics = void 0;
class Analytics {
    static bind(where) {
        [...(where || document).querySelectorAll('[data-ga]')].forEach(el => {
            el.addEventListener('click', e => {
                const data = JSON.parse(e.currentTarget.dataset.ga);
                Analytics.sendEvent(data[0] || '', data[1] || '', data[2] || '', data[3] || -1);
            });
        });
        [...(where || document).querySelectorAll('[data-gtm]')].forEach(el => {
            el.addEventListener('click', e => {
                const data = JSON.parse(e.currentTarget.dataset.gtm);
                this.sendCustomEvent(data);
            });
        });
    }
    static sendCustomEvent(data) {
        if (typeof gtag !== 'undefined' && data.event) {
            console.log('%cgtag tracking: event', 'background:#1a73e8;color:#fff', data);
            const eventLabel = data.event.replace(/-/g, '_');
            delete data.event;
            Object.keys(data).length ? gtag('event', eventLabel, data) : gtag('event', eventLabel);
        }
        else if (typeof dataLayer !== 'undefined') {
            dataLayer.push(data);
            console.log('%cgtm tracking: event', 'background:#1a73e8;color:#fff', data);
        }
    }
    static sendEvent(category, action, label, value) {
        if (typeof gtag !== 'undefined') {
            gtag('event', action, {
                event_category: category,
                event_label: label,
                value,
            });
            console.log('%cgtag tracking: event', 'background:#1a73e8;color:#fff', category, action, label, value);
        }
        else if (typeof dataLayer !== 'undefined') {
            const data = {
                event: action,
                category,
                label: value,
            };
            dataLayer.push(data);
            console.log('%cgtm tracking: event', 'background:#1a73e8;color:#fff', category, action, label, value);
        }
        else if (typeof ga !== 'undefined') {
            ga('send', 'event', category, action, label, value);
            console.log('%cga tracking: event', 'background:#1a73e8;color:#fff', category, action, label, value);
        }
    }
    static sendPageview(pathname, title) {
        if (typeof dataLayer !== 'undefined') {
            dataLayer.push({
                event: 'pageview',
                pathname: pathname || window.location.pathname,
            });
            console.log('%cgtm tracking: pageview', 'background:#1a73e8;color:#fff', pathname || window.location.pathname, title || document.title);
        }
        else if (typeof gtag !== 'undefined') {
            gtag('config', Analytics.TRACKING_ID, {
                page_path: pathname || window.location.pathname,
                page_title: title || document.title,
            });
            console.log('%cgtag tracking: pageview', 'background:#1a73e8;color:#fff', pathname || window.location.pathname, title || document.title);
        }
        else if (typeof ga !== 'undefined') {
            ga('send', 'pageview', pathname || window.location.pathname, {
                title: title || document.title,
                pathname: pathname || '',
            });
            console.log('%cga tracking: pageview', 'background:#1a73e8;color:#fff', pathname || window.location.pathname, title || document.title);
        }
    }
}
exports.Analytics = Analytics;

},{}],68:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.API = void 0;
const PushStates_1 = require("../PushStates");
const Recaptcha_1 = require("./Recaptcha");
const Utils_1 = require("../Utils");
class API {
    static bind(where) {
        [...(where || document).querySelectorAll('[data-api]:not(form)')]
            .forEach(apiEl => {
            apiEl.removeEventListener('click', API.onAction);
            apiEl.addEventListener('click', API.onAction);
        });
        [...(where || document).querySelectorAll('form[data-api]')].forEach(apiFormEl => {
            apiFormEl.removeEventListener('submit', API.onAction);
            apiFormEl.addEventListener('submit', API.onAction);
            apiFormEl.setAttribute('novalidate', 'novalidate');
            apiFormEl.querySelectorAll('input[required]').forEach(input => {
                input.addEventListener('blur', () => {
                    const data = Object.assign({}, JSON.parse(apiFormEl.getAttribute('data-api')));
                    API.beforeCalls.validateBlur(data, apiFormEl);
                });
            });
        });
    }
    static callIt(dataApi, el, customCallback) {
        const data = API.preprocessData(dataApi, el);
        el.classList.add('is-doing-request');
        const action = data.action || 'POST';
        delete data.action;
        const url = data.url || window.location.pathname;
        delete data.url;
        return new Promise((resolve, reject) => {
            el.classList.remove('is-doing-request');
            const dataBody = new URLSearchParams(data);
            fetch(url, {
                method: action,
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: dataBody,
            })
                .then(response => response.json())
                .then(response => {
                if (data.callback) {
                    API.onSuccess(data, el, response);
                }
                if (customCallback && typeof customCallback === 'function') {
                    customCallback(data, el, response);
                }
                resolve(response);
            })
                .catch(error => {
                console.warn(`API error: ${error}`, data);
                reject(error);
            });
        });
    }
    static preprocessData(data, el) {
        if (el.matches('form')) {
            data.url = !data.url && el.getAttribute('action') ? el.getAttribute('action') : data.url;
            data = Object.assign(data, (0, Utils_1.serializeObject)(el));
        }
        if (el.matches('[href]')) {
            data.url = !data.url && el.getAttribute('href') ? el.getAttribute('href') : data.url;
        }
        if (data.formSelector) {
            data = Object.assign(data, (0, Utils_1.serializeObject)(document.querySelector(data.formSelector)));
            delete data.formSelector;
        }
        if (data.params) {
            data = Object.assign(data, data.params);
            delete data.params;
        }
        return data;
    }
}
exports.API = API;
API.beforeCalls = {
    validate(data, el) {
        let passed = true;
        let message = '';
        if (el.classList.contains('is-done')) {
            el.classList.remove('is-done');
            return;
        }
        el.querySelectorAll('.js-error').forEach(errorEl => {
            errorEl.innerHTML = '';
            errorEl.classList.remove('is-error');
        });
        el.querySelectorAll('input[required]:not([data-recaptcha])').forEach(input => {
            switch (input.type) {
                case 'email':
                    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    const { value } = input;
                    if (!re.test(value) || !value.length) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = value.length > 0 ? "It seems there's an issue with the email you entered. <br> Please double-check and try again." : 'Required field';
                        input.closest('fieldset').querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.closest('fieldset').querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'password':
                    const pass = input.value;
                    if (pass.length > 5) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = pass.length > 0 ? 'invalid-pass' : 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                case 'checkbox':
                    if (!input.checked) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'text':
                    if (input.value.length > 0) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                default:
                    break;
            }
        });
        el.querySelectorAll('textarea[required]').forEach(textarea => {
            if (textarea.value.length > 0) {
                textarea.parentElement.classList.remove('is-error');
                textarea.parentElement.querySelector('.js-error').innerHTML = '';
            }
            else {
                passed = false;
                textarea.parentElement.classList.add('is-error');
                message = 'Required field';
                textarea.parentElement.querySelector('.js-error').innerHTML = message;
            }
        });
        if (passed) {
            Promise.all([Recaptcha_1.Recaptcha ? Recaptcha_1.Recaptcha.check(el) : null]).then(() => {
                API.callIt(data, el);
                el.querySelectorAll('.js-error').forEach(errorEl => {
                    errorEl.innerHTML = '';
                    errorEl.classList.remove('is-error');
                });
                el.classList.remove('has-errors');
            });
        }
        else {
            el.classList.add('has-errors');
        }
    },
    validateBlur(data, el) {
        let passed = true;
        let message = '';
        if (el.classList.contains('is-done')) {
            el.classList.remove('is-done');
            return;
        }
        el.querySelectorAll('.js-error').forEach(errorEl => {
            errorEl.innerHTML = '';
            errorEl.classList.remove('is-error');
        });
        el.querySelectorAll('input[required]:not([data-recaptcha])').forEach(input => {
            switch (input.type) {
                case 'email':
                    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    const { value } = input;
                    if (!re.test(value) || !value.length) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = value.length > 0 ? 'NOT VALID E-MAIL FORMAT' : 'Required field';
                        input.closest('fieldset').querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.closest('fieldset').querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'password':
                    const pass = input.value;
                    if (pass.length > 5) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = pass.length > 0 ? 'invalid-pass' : 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                case 'checkbox':
                    if (!input.checked) {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    else {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    break;
                case 'text':
                    if (input.value.length > 0) {
                        input.parentElement.classList.remove('is-error');
                        input.parentElement.querySelector('.js-error').innerHTML = '';
                    }
                    else {
                        passed = false;
                        input.parentElement.classList.add('is-error');
                        message = 'Required field';
                        input.parentElement.querySelector('.js-error').innerHTML = message;
                    }
                    break;
                default:
                    break;
            }
        });
        el.querySelectorAll('textarea[required]').forEach(textarea => {
            if (textarea.value.length > 0) {
                textarea.parentElement.classList.remove('is-error');
                textarea.parentElement.querySelector('.js-error').innerHTML = '';
            }
            else {
                passed = false;
                textarea.parentElement.classList.add('is-error');
                message = 'Required field';
                textarea.parentElement.querySelector('.js-error').innerHTML = message;
            }
        });
        if (passed) {
            el.querySelectorAll('.js-error').forEach(errorEl => {
                errorEl.innerHTML = '';
                errorEl.classList.remove('is-error');
            });
            el.classList.remove('has-errors');
        }
        else {
            el.classList.add('has-errors');
        }
    },
};
API.callbacks = {
    onSubscribe(data, el, response) {
        let $message = el.querySelector('.js-message');
        if (!$message) {
            const div = document.createElement('div');
            div.classList.add('js-message', 'message');
            el.append(div);
            $message = el.querySelector('.js-message');
        }
        const html = (response.message);
        $message.innerHTML = html;
        el.classList.add('is-completed');
        el.querySelectorAll('input').forEach(elem => elem.dispatchEvent(new Event('blur')));
    },
    onSendMessage(data, el, response) {
        let $message = el.querySelector('.js-message');
        if (!$message) {
            el.append('<div class="js-message message">');
            $message = el.querySelector('.js-message');
        }
        const html = (response.message);
        $message.innerHTML = html;
        el.classList.add('is-completed');
        el.querySelectorAll('input').forEach(elem => elem.dispatchEvent(new Event('blur')));
    },
    reload: () => {
        PushStates_1.PushStates.reload();
    },
};
API.onAction = (e) => {
    e.preventDefault();
    e.stopPropagation();
    const el = e.currentTarget;
    const data = Object.assign({}, JSON.parse(el.getAttribute('data-api')));
    if (data.beforeCall) {
        if (data.beforeCall in API.beforeCalls) {
            API.beforeCalls[data.beforeCall](data, el);
            return;
        }
    }
    API.callIt(data, el);
};
API.onSuccess = (data, el, response) => {
    if (data.callback) {
        if (data.callback in API.callbacks) {
            API.callbacks[data.callback](data, el, response);
        }
    }
};
API.refresh = () => {
    const forms = [...document.querySelectorAll('form')];
    forms.forEach(form => {
        const inputs = form.querySelectorAll('input');
        const errors = [...form.querySelectorAll('.is-error'), ...form.querySelectorAll('.has-errors')];
        const errorMessages = form.querySelectorAll('.js-error');
        form.classList.remove('is-doing-request', 'is-completed', 'has-errors');
        for (const message of errorMessages) {
            message.innerHTML = '';
        }
        for (const input of inputs) {
            input.value = '';
        }
        for (const err of errors) {
            err.classList.remove('is-error', 'has-errors');
        }
    });
};

},{"../PushStates":14,"../Utils":18,"./Recaptcha":72}],69:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CSSAnimate = void 0;
class CSSAnimate {
    static bind(where) {
        [...(where || document).querySelectorAll('[data-cssanimate]')].forEach(el => {
            const selector = el.dataset.cssanimate;
            const target = selector ? el.querySelector(selector) : el;
            target === null || target === void 0 ? void 0 : target.addEventListener('transitionend', CSSAnimate.onAnimationEnd);
            target === null || target === void 0 ? void 0 : target.addEventListener('animationend', CSSAnimate.onAnimationEnd);
            el.addEventListener('mouseenter', CSSAnimate.onMouseEnter);
        });
    }
}
exports.CSSAnimate = CSSAnimate;
CSSAnimate.onAnimationEnd = e => {
    e.target.closest('[data-cssanimate]').classList.remove('is-animating');
};
CSSAnimate.onMouseEnter = e => {
    e.currentTarget.classList.add('is-animating');
};

},{}],70:[function(require,module,exports){
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.Expand = void 0;
class Expand {
    static bind(where) {
        this.setMaxHeight();
        [...(where || document).querySelectorAll('[data-expand][id]')]
            .forEach(element => {
            const toggleButton = document.querySelector(`[aria-controls="${element.id}"]`);
            toggleButton === null || toggleButton === void 0 ? void 0 : toggleButton.addEventListener('click', _a.onAriaControlsClick);
        });
    }
    static unbind() {
        [...document.querySelectorAll('[data-expand][id]')].forEach(element => {
            const toggleButton = element.querySelector('[aria-controls]');
            toggleButton === null || toggleButton === void 0 ? void 0 : toggleButton.removeEventListener('click', _a.onAriaControlsClick);
        });
    }
}
exports.Expand = Expand;
_a = Expand;
Expand.resize = () => {
    _a.setMaxHeight();
};
Expand.onAriaControlsClick = (e) => {
    e.preventDefault();
    e.stopPropagation();
    const target = e.currentTarget;
    const isExpanded = target.getAttribute('aria-expanded') === 'true';
    isExpanded ? _a.collapse(target) : _a.expand(target);
};
Expand.expand = (target) => {
    target.setAttribute('aria-expanded', 'true');
    target.parentElement.classList.add('is-expanded');
    target.querySelector('.js-expand-text').innerText = target.getAttribute('data-expanded-text');
    document.getElementById(target.getAttribute('aria-controls')).classList.add('is-expanded');
    target.dataset.scrollY = (target.getBoundingClientRect().top + window.scrollY).toString();
};
Expand.collapse = (target) => {
    target.setAttribute('aria-expanded', 'false');
    target.parentElement.classList.remove('is-expanded');
    target.querySelector('.js-expand-text').innerText = target.getAttribute('data-hidden-text');
    const elementTop = parseInt(target.dataset.scrollY, 10);
    if (target.classList.contains('text__expand-trigger') && elementTop < window.scrollY) {
        window.scrollTo({ top: elementTop - 100, behavior: 'smooth' });
        setTimeout(() => {
            document.getElementById(target.getAttribute('aria-controls')).classList.remove('is-expanded');
        }, 500);
    }
    else {
        document.getElementById(target.getAttribute('aria-controls')).classList.remove('is-expanded');
    }
};
Expand.setMaxHeight = () => {
    [...document.querySelectorAll('[data-expand][id]')].forEach(element => {
        let height = 0;
        [...element.children].forEach(children => {
            height += children.getBoundingClientRect().height;
        });
        element.style.maxHeight = `${height}px`;
    });
};

},{}],71:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Images = void 0;
class Images {
    static preload(imgElements) {
        if (!imgElements || !imgElements.length) {
            return Promise.resolve();
        }
        return new Promise(resolve => {
            const il = imagesLoaded(imgElements);
            il.on('always', () => resolve());
        });
    }
    static bind(where) {
        const il = imagesLoaded(where || document.body);
        il.on('progress', Images.onProgress);
    }
}
exports.Images = Images;
Images.onProgress = (instance, { img, isLoaded }) => {
    var _a, _b;
    if (isLoaded && img.naturalWidth > 0 && img.naturalHeight > 0) {
        img.classList.remove('is-loading');
        img.classList.add('is-loaded');
        (_a = img.closest('figure')) === null || _a === void 0 ? void 0 : _a.classList.add('is-loaded');
        (_b = img.closest('.image')) === null || _b === void 0 ? void 0 : _b.classList.add('is-loaded');
    }
};

},{}],72:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Recaptcha = void 0;
const Utils_1 = require("../Utils");
class Recaptcha {
    static bind(selector) {
        const target = typeof selector === 'undefined' ? document.body : selector;
        if (!document.querySelector('[data-recaptchakey]')) {
            return;
        }
        Recaptcha.SITE_KEY = Recaptcha.SITE_KEY
            || document.querySelector('[data-recaptchakey]').dataset.recaptchakey;
        if (!target.querySelector(Recaptcha.inputSelector)) {
            return;
        }
        if (typeof grecaptcha === 'undefined') {
            (0, Utils_1.getScript)(`//www.google.com/recaptcha/api.js?render=${Recaptcha.SITE_KEY}`, () => Recaptcha.attach(target.querySelector(Recaptcha.inputSelector)));
        }
        else {
            Recaptcha.attach(target.querySelector(Recaptcha.inputSelector));
        }
    }
    static check(form) {
        return new Promise(resolve => {
            const action = form.getAttribute('action').split('/').pop().replace(/[^0-9a-z]/gi, '') || 'action';
            grecaptcha.execute(Recaptcha.SITE_KEY, { action })
                .then(token => {
                Recaptcha.onExecute(form, token);
                resolve(token);
            });
        });
    }
    static attach(target) {
        grecaptcha.ready(() => {
            target.closest('form').data = { Recaptcha };
            target.closest('form').classList.add('has-recaptcha');
        });
    }
    static onExecute(form, token) {
        if (!form.querySelector('[name=token]')) {
            form.append('<input name="token" type="hidden" value="">');
        }
        const input = form.querySelector('[name=token]');
        input.value = token;
    }
}
exports.Recaptcha = Recaptcha;
Recaptcha.inputSelector = '[data-recaptcha]';

},{"../Utils":18}],73:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Sound = void 0;
window.AudioContext = window.AudioContext || window.webkitAudioContext;
const context = new AudioContext();
class Sound {
    constructor(url) {
        this.sources = [];
        this.url = url;
    }
    load() {
        if (!this.url)
            return Promise.reject(new Error(`Missing or invalid URL: ${this.url}`));
        if (this.buffer)
            return Promise.resolve(this.buffer);
        return new Promise((resolve, reject) => {
            const request = new XMLHttpRequest();
            request.open('GET', this.url, true);
            request.responseType = 'arraybuffer';
            request.onload = () => {
                context.decodeAudioData(request.response, buffer => {
                    if (!buffer) {
                        console.log(`Sound decoding error: ${this.url}`);
                        reject(new Error(`Sound decoding error: ${this.url}`));
                        return;
                    }
                    this.buffer = buffer;
                    resolve(buffer);
                });
            };
            request.onerror = err => {
                console.log('Sound XMLHttpRequest error:', err);
                reject(err);
            };
            request.send();
        });
    }
    play(volume = 1, time = 0) {
        if (!this.buffer)
            return Promise.resolve();
        return new Promise(resolve => {
            const source = context.createBufferSource();
            source.buffer = this.buffer;
            const insertedAt = this.sources.push(source) - 1;
            source.onended = () => {
                source.stop(0);
                this.sources.splice(insertedAt, 1);
                resolve();
            };
            const gainNode = context.createGain();
            gainNode.gain.value = volume;
            source.connect(gainNode).connect(context.destination);
            source.start(time);
        });
    }
    stop() {
        this.sources.forEach(source => source.stop(0));
        this.sources = [];
    }
}
exports.Sound = Sound;

},{}],74:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Sounds = void 0;
const Browser_1 = require("../Browser");
const Sound_1 = require("./Sound");
class Sounds {
    static supportsAudio() {
        return !!(window.AudioContext
            || window.webkitAudioContext
            || window.mozAudioContext
            || window.oAudioContext
            || window.msAudioContext) && !(0, Browser_1.getBrowser)().phone;
    }
    static init() {
        if (!Sounds.canPlay) {
            return;
        }
        Object.entries(Sounds.sources).forEach(([key, value]) => {
            Sounds.sounds[key] = new Sound_1.Sound(Sounds.root + value);
            Sounds.sounds[key].load();
        });
    }
    static bind(where) {
        if (!Sounds.canPlay) {
            return;
        }
        if (!Sounds.sounds) {
            Sounds.sounds = {};
            Sounds.init();
        }
        [...(where || document).querySelectorAll('[data-sound-hover]')].forEach(el => {
            el.addEventListener('mouseenter', e => {
                const type = e.currentTarget.dataset.soundHover || 'hover';
                Sounds.play(type);
            });
        });
        [...(where || document).querySelectorAll('[data-sound-click]')].forEach(el => {
            el.addEventListener('click', e => {
                const type = e.currentTarget.dataset.soundClick || 'click';
                Sounds.play(type);
            });
        });
        document.querySelectorAll('[data-generate-sounds]')
            .forEach(el => el.addEventListener('click', e => Sounds.generateSoundTester(e)));
        document.querySelectorAll('.js-toggle-sounds')
            .forEach(el => el.addEventListener('click', e => {
            e.preventDefault();
            e.stopPropagation();
            Sounds.toggle();
        }));
    }
    static toggle() {
        Sounds.muted = !Sounds.muted;
        document.body.classList.toggle('is-muted', Sounds.muted);
    }
    static play(type) {
        if (Sounds.muted || !Sounds.canPlay || !Sounds.sounds[type]) {
            return Promise.resolve();
        }
        return Sounds.sounds[type].play();
    }
    static generateSoundTester(e) {
        let html = '<ul>';
        Object.keys(Sounds.sources).forEach(property => {
            html += `<li class="sound-test" data-sound-click="${property}"><strong>${property}</strong> ${Sounds.sources[property]}</li>`;
        });
        html += '</ul>';
        e.currentTarget.style.display = 'none';
        e.currentTarget.insertAdjacentHTML('afterend', html);
        Sounds.bind(e.currentTarget.parentNode);
    }
}
exports.Sounds = Sounds;
Sounds.root = '/public/theme/sounds/';
Sounds.canPlay = Sounds.supportsAudio();
Sounds.muted = false;
Sounds.sources = {
    click: 'tick.mp3',
    hover: 'tap-smallest.mp3',
    menu: 'tap-kissy.mp3',
    playerBtn: '627848__francoistjp__rew-musique-stop-off_02.mp3',
    playerRewind: '627848__francoistjp__rew-musique-stop-off_01.mp3',
};

},{"../Browser":10,"./Sound":73}],75:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Vibration = void 0;
class Vibration {
    static bind(where) {
        [...(where || document).querySelectorAll('a, label, button')].forEach(el => {
            el.addEventListener('click', Vibration.onClick);
        });
    }
}
exports.Vibration = Vibration;
Vibration.onClick = e => {
    navigator.vibrate(5);
};

},{}]},{},[17])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZ3NhcC9kaXN0L0N1c3RvbUVhc2UuanMiLCJub2RlX21vZHVsZXMvZ3NhcC9kaXN0L1Njcm9sbFRvUGx1Z2luLmpzIiwibm9kZV9tb2R1bGVzL2dzYXAvZGlzdC9TY3JvbGxUcmlnZ2VyLmpzIiwibm9kZV9tb2R1bGVzL2dzYXAvZGlzdC9TcGxpdFRleHQuanMiLCJub2RlX21vZHVsZXMvZ3NhcC9kaXN0L2dzYXAuanMiLCJub2RlX21vZHVsZXMvbWFwYm94LWdsL2Rpc3QvbWFwYm94LWdsLmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsInNyYy90cy9BbmltYXRlLnRzIiwic3JjL3RzL0JyZWFrcG9pbnQudHMiLCJzcmMvdHMvQnJvd3Nlci50cyIsInNyYy90cy9DbGFzc2VzLnRzIiwic3JjL3RzL0hhbmRsZXIudHMiLCJzcmMvdHMvTWVudS50cyIsInNyYy90cy9QdXNoU3RhdGVzLnRzIiwic3JjL3RzL1Njcm9sbC50cyIsInNyYy90cy9TZWFyY2gudHMiLCJzcmMvdHMvU2l0ZS50cyIsInNyYy90cy9VdGlscy50cyIsInNyYy90cy9hbmltYXRpb25zL2FsbC50cyIsInNyYy90cy9hbmltYXRpb25zL2ZhZGVVcC50cyIsInNyYy90cy9hbmltYXRpb25zL3Njcm9sbC9ib3gudHMiLCJzcmMvdHMvYW5pbWF0aW9ucy9zY3JvbGwvY2xhaW0udHMiLCJzcmMvdHMvYW5pbWF0aW9ucy9zY3JvbGwvY29sbGVjdGlvbnMudHMiLCJzcmMvdHMvYW5pbWF0aW9ucy9zY3JvbGwvY29sbGVjdGlvbnNTaW1wbGUudHMiLCJzcmMvdHMvYW5pbWF0aW9ucy9zY3JvbGwvaGVyby50cyIsInNyYy90cy9hbmltYXRpb25zL3Njcm9sbC9pbGx1c3RyYXRpb24udHMiLCJzcmMvdHMvYW5pbWF0aW9ucy9zY3JvbGwvaW50ZXJ2aWV3cy50cyIsInNyYy90cy9hbmltYXRpb25zL3Njcm9sbC9saW5lLnRzIiwic3JjL3RzL2FuaW1hdGlvbnMvc2Nyb2xsL3Blb3BsZS50cyIsInNyYy90cy9hbmltYXRpb25zL3Njcm9sbC9zdGlja2VyLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvQWNjb3JkZW9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvQWNjb3JkZW9uTGlzdC50cyIsInNyYy90cy9jb21wb25lbnRzL0F1ZGlvUGxheWVyLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvQnV0dG9uLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvQ2lyY2xlLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvQ29sbGVjdGlvbnMudHMiLCJzcmMvdHMvY29tcG9uZW50cy9Db21wb25lbnQudHMiLCJzcmMvdHMvY29tcG9uZW50cy9GaWx0ZXJMZXR0ZXJzLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvTGlnaHRib3gvTGlnaHRib3gudHMiLCJzcmMvdHMvY29tcG9uZW50cy9MaWdodGJveC9MaWdodGJveE5hdi50cyIsInNyYy90cy9jb21wb25lbnRzL0xpZ2h0Ym94L0xpZ2h0Ym94U2xpZGVyLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvTGlnaHRib3gvTGlnaHRib3hUcmFuc2NyaXB0LnRzIiwic3JjL3RzL2NvbXBvbmVudHMvTG9hZC50cyIsInNyYy90cy9jb21wb25lbnRzL0xvYWRlci50cyIsInNyYy90cy9jb21wb25lbnRzL01hcC50cyIsInNyYy90cy9jb21wb25lbnRzL01vZGFsLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvTW9yZS50cyIsInNyYy90cy9jb21wb25lbnRzL1BsYXllci9QbGF5ZXIuVGltZS50cyIsInNyYy90cy9jb21wb25lbnRzL1BsYXllci9QbGF5ZXIudHMiLCJzcmMvdHMvY29tcG9uZW50cy9QbGF5ZXIvUGxheWVyLnR5cGVzLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvUGxheWVyL1BsYXllci51dGlscy50cyIsInNyYy90cy9jb21wb25lbnRzL1BsYXllci9QbGF5ZXJGdWxsc2NyZWVuLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvUGxheWVyL1BsYXllclBvcHVwcy50cyIsInNyYy90cy9jb21wb25lbnRzL1BsYXllci9QbGF5ZXJQb3N0ZXIudHMiLCJzcmMvdHMvY29tcG9uZW50cy9QbGF5ZXIvUGxheWVyU2V0dGluZ3MudHMiLCJzcmMvdHMvY29tcG9uZW50cy9QbGF5ZXIvUGxheWVyVGltZWxpbmUudHMiLCJzcmMvdHMvY29tcG9uZW50cy9QbGF5ZXIvUGxheWVyVm9sdW1lLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvUGxheWVyL1ZpZGVvLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvUGxheWVyL1ZpZGVvLnR5cGVzLnRzIiwic3JjL3RzL2NvbXBvbmVudHMvUGxheWVyL1ZpZGVvQ2FwdGlvbnMudHMiLCJzcmMvdHMvY29tcG9uZW50cy9XcmFwcGVkVGV4dC50cyIsInNyYy90cy9wYWdlcy9QYWdlLnRzIiwic3JjL3RzL3RlbXBsYXRlcy9UZW1wbGF0ZXMudHMiLCJzcmMvdHMvd2lkZ2V0cy9BUEkudHMiLCJzcmMvdHMvd2lkZ2V0cy9BY2Nlc3NpYmlsaXR5LnRzIiwic3JjL3RzL3dpZGdldHMvQWxsLnRzIiwic3JjL3RzL3dpZGdldHMvQW5hbHl0aWNzLnRzIiwic3JjL3RzL3dpZGdldHMvQXBpLnRzIiwic3JjL3RzL3dpZGdldHMvQ1NTQW5pbWF0ZS50cyIsInNyYy90cy93aWRnZXRzL0V4cGFuZC50cyIsInNyYy90cy93aWRnZXRzL0ltYWdlcy50cyIsInNyYy90cy93aWRnZXRzL1JlY2FwdGNoYS50cyIsInNyYy90cy93aWRnZXRzL1NvdW5kLnRzIiwic3JjL3RzL3dpZGdldHMvU291bmRzLnRzIiwic3JjL3RzL3dpZGdldHMvVmlicmF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNucEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0bUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2ovS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUMsQ0FBQyxDQUFDO0FBQ3pCLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcblx0KGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC53aW5kb3cgPSBnbG9iYWwud2luZG93IHx8IHt9KSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cblx0dmFyIF9zdmdQYXRoRXhwID0gL1thY2hsbXFzdHZ6XXwoLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspPylbMC05XS9pZyxcblx0ICAgIF9zY2llbnRpZmljID0gL1tcXCtcXC1dP1xcZCpcXC4/XFxkK2VbXFwrXFwtXT9cXGQrL2lnLFxuXHQgICAgX0RFRzJSQUQgPSBNYXRoLlBJIC8gMTgwLFxuXHQgICAgX3NpbiA9IE1hdGguc2luLFxuXHQgICAgX2NvcyA9IE1hdGguY29zLFxuXHQgICAgX2FicyA9IE1hdGguYWJzLFxuXHQgICAgX3NxcnQgPSBNYXRoLnNxcnQsXG5cdCAgICBfaXNOdW1iZXIgPSBmdW5jdGlvbiBfaXNOdW1iZXIodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiO1xuXHR9LFxuXHQgICAgX3JvdW5kaW5nTnVtID0gMWU1LFxuXHQgICAgX3JvdW5kID0gZnVuY3Rpb24gX3JvdW5kKHZhbHVlKSB7XG5cdCAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiBfcm91bmRpbmdOdW0pIC8gX3JvdW5kaW5nTnVtIHx8IDA7XG5cdH07XG5cdGZ1bmN0aW9uIHRyYW5zZm9ybVJhd1BhdGgocmF3UGF0aCwgYSwgYiwgYywgZCwgdHgsIHR5KSB7XG5cdCAgdmFyIGogPSByYXdQYXRoLmxlbmd0aCxcblx0ICAgICAgc2VnbWVudCxcblx0ICAgICAgbCxcblx0ICAgICAgaSxcblx0ICAgICAgeCxcblx0ICAgICAgeTtcblxuXHQgIHdoaWxlICgtLWogPiAtMSkge1xuXHQgICAgc2VnbWVudCA9IHJhd1BhdGhbal07XG5cdCAgICBsID0gc2VnbWVudC5sZW5ndGg7XG5cblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICs9IDIpIHtcblx0ICAgICAgeCA9IHNlZ21lbnRbaV07XG5cdCAgICAgIHkgPSBzZWdtZW50W2kgKyAxXTtcblx0ICAgICAgc2VnbWVudFtpXSA9IHggKiBhICsgeSAqIGMgKyB0eDtcblx0ICAgICAgc2VnbWVudFtpICsgMV0gPSB4ICogYiArIHkgKiBkICsgdHk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgcmF3UGF0aC5fZGlydHkgPSAxO1xuXHQgIHJldHVybiByYXdQYXRoO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXJjVG9TZWdtZW50KGxhc3RYLCBsYXN0WSwgcngsIHJ5LCBhbmdsZSwgbGFyZ2VBcmNGbGFnLCBzd2VlcEZsYWcsIHgsIHkpIHtcblx0ICBpZiAobGFzdFggPT09IHggJiYgbGFzdFkgPT09IHkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cblx0ICByeCA9IF9hYnMocngpO1xuXHQgIHJ5ID0gX2FicyhyeSk7XG5cblx0ICB2YXIgYW5nbGVSYWQgPSBhbmdsZSAlIDM2MCAqIF9ERUcyUkFELFxuXHQgICAgICBjb3NBbmdsZSA9IF9jb3MoYW5nbGVSYWQpLFxuXHQgICAgICBzaW5BbmdsZSA9IF9zaW4oYW5nbGVSYWQpLFxuXHQgICAgICBQSSA9IE1hdGguUEksXG5cdCAgICAgIFRXT1BJID0gUEkgKiAyLFxuXHQgICAgICBkeDIgPSAobGFzdFggLSB4KSAvIDIsXG5cdCAgICAgIGR5MiA9IChsYXN0WSAtIHkpIC8gMixcblx0ICAgICAgeDEgPSBjb3NBbmdsZSAqIGR4MiArIHNpbkFuZ2xlICogZHkyLFxuXHQgICAgICB5MSA9IC1zaW5BbmdsZSAqIGR4MiArIGNvc0FuZ2xlICogZHkyLFxuXHQgICAgICB4MV9zcSA9IHgxICogeDEsXG5cdCAgICAgIHkxX3NxID0geTEgKiB5MSxcblx0ICAgICAgcmFkaWlDaGVjayA9IHgxX3NxIC8gKHJ4ICogcngpICsgeTFfc3EgLyAocnkgKiByeSk7XG5cblx0ICBpZiAocmFkaWlDaGVjayA+IDEpIHtcblx0ICAgIHJ4ID0gX3NxcnQocmFkaWlDaGVjaykgKiByeDtcblx0ICAgIHJ5ID0gX3NxcnQocmFkaWlDaGVjaykgKiByeTtcblx0ICB9XG5cblx0ICB2YXIgcnhfc3EgPSByeCAqIHJ4LFxuXHQgICAgICByeV9zcSA9IHJ5ICogcnksXG5cdCAgICAgIHNxID0gKHJ4X3NxICogcnlfc3EgLSByeF9zcSAqIHkxX3NxIC0gcnlfc3EgKiB4MV9zcSkgLyAocnhfc3EgKiB5MV9zcSArIHJ5X3NxICogeDFfc3EpO1xuXG5cdCAgaWYgKHNxIDwgMCkge1xuXHQgICAgc3EgPSAwO1xuXHQgIH1cblxuXHQgIHZhciBjb2VmID0gKGxhcmdlQXJjRmxhZyA9PT0gc3dlZXBGbGFnID8gLTEgOiAxKSAqIF9zcXJ0KHNxKSxcblx0ICAgICAgY3gxID0gY29lZiAqIChyeCAqIHkxIC8gcnkpLFxuXHQgICAgICBjeTEgPSBjb2VmICogLShyeSAqIHgxIC8gcngpLFxuXHQgICAgICBzeDIgPSAobGFzdFggKyB4KSAvIDIsXG5cdCAgICAgIHN5MiA9IChsYXN0WSArIHkpIC8gMixcblx0ICAgICAgY3ggPSBzeDIgKyAoY29zQW5nbGUgKiBjeDEgLSBzaW5BbmdsZSAqIGN5MSksXG5cdCAgICAgIGN5ID0gc3kyICsgKHNpbkFuZ2xlICogY3gxICsgY29zQW5nbGUgKiBjeTEpLFxuXHQgICAgICB1eCA9ICh4MSAtIGN4MSkgLyByeCxcblx0ICAgICAgdXkgPSAoeTEgLSBjeTEpIC8gcnksXG5cdCAgICAgIHZ4ID0gKC14MSAtIGN4MSkgLyByeCxcblx0ICAgICAgdnkgPSAoLXkxIC0gY3kxKSAvIHJ5LFxuXHQgICAgICB0ZW1wID0gdXggKiB1eCArIHV5ICogdXksXG5cdCAgICAgIGFuZ2xlU3RhcnQgPSAodXkgPCAwID8gLTEgOiAxKSAqIE1hdGguYWNvcyh1eCAvIF9zcXJ0KHRlbXApKSxcblx0ICAgICAgYW5nbGVFeHRlbnQgPSAodXggKiB2eSAtIHV5ICogdnggPCAwID8gLTEgOiAxKSAqIE1hdGguYWNvcygodXggKiB2eCArIHV5ICogdnkpIC8gX3NxcnQodGVtcCAqICh2eCAqIHZ4ICsgdnkgKiB2eSkpKTtcblxuXHQgIGlzTmFOKGFuZ2xlRXh0ZW50KSAmJiAoYW5nbGVFeHRlbnQgPSBQSSk7XG5cblx0ICBpZiAoIXN3ZWVwRmxhZyAmJiBhbmdsZUV4dGVudCA+IDApIHtcblx0ICAgIGFuZ2xlRXh0ZW50IC09IFRXT1BJO1xuXHQgIH0gZWxzZSBpZiAoc3dlZXBGbGFnICYmIGFuZ2xlRXh0ZW50IDwgMCkge1xuXHQgICAgYW5nbGVFeHRlbnQgKz0gVFdPUEk7XG5cdCAgfVxuXG5cdCAgYW5nbGVTdGFydCAlPSBUV09QSTtcblx0ICBhbmdsZUV4dGVudCAlPSBUV09QSTtcblxuXHQgIHZhciBzZWdtZW50cyA9IE1hdGguY2VpbChfYWJzKGFuZ2xlRXh0ZW50KSAvIChUV09QSSAvIDQpKSxcblx0ICAgICAgcmF3UGF0aCA9IFtdLFxuXHQgICAgICBhbmdsZUluY3JlbWVudCA9IGFuZ2xlRXh0ZW50IC8gc2VnbWVudHMsXG5cdCAgICAgIGNvbnRyb2xMZW5ndGggPSA0IC8gMyAqIF9zaW4oYW5nbGVJbmNyZW1lbnQgLyAyKSAvICgxICsgX2NvcyhhbmdsZUluY3JlbWVudCAvIDIpKSxcblx0ICAgICAgbWEgPSBjb3NBbmdsZSAqIHJ4LFxuXHQgICAgICBtYiA9IHNpbkFuZ2xlICogcngsXG5cdCAgICAgIG1jID0gc2luQW5nbGUgKiAtcnksXG5cdCAgICAgIG1kID0gY29zQW5nbGUgKiByeSxcblx0ICAgICAgaTtcblxuXHQgIGZvciAoaSA9IDA7IGkgPCBzZWdtZW50czsgaSsrKSB7XG5cdCAgICBhbmdsZSA9IGFuZ2xlU3RhcnQgKyBpICogYW5nbGVJbmNyZW1lbnQ7XG5cdCAgICB4MSA9IF9jb3MoYW5nbGUpO1xuXHQgICAgeTEgPSBfc2luKGFuZ2xlKTtcblx0ICAgIHV4ID0gX2NvcyhhbmdsZSArPSBhbmdsZUluY3JlbWVudCk7XG5cdCAgICB1eSA9IF9zaW4oYW5nbGUpO1xuXHQgICAgcmF3UGF0aC5wdXNoKHgxIC0gY29udHJvbExlbmd0aCAqIHkxLCB5MSArIGNvbnRyb2xMZW5ndGggKiB4MSwgdXggKyBjb250cm9sTGVuZ3RoICogdXksIHV5IC0gY29udHJvbExlbmd0aCAqIHV4LCB1eCwgdXkpO1xuXHQgIH1cblxuXHQgIGZvciAoaSA9IDA7IGkgPCByYXdQYXRoLmxlbmd0aDsgaSArPSAyKSB7XG5cdCAgICB4MSA9IHJhd1BhdGhbaV07XG5cdCAgICB5MSA9IHJhd1BhdGhbaSArIDFdO1xuXHQgICAgcmF3UGF0aFtpXSA9IHgxICogbWEgKyB5MSAqIG1jICsgY3g7XG5cdCAgICByYXdQYXRoW2kgKyAxXSA9IHgxICogbWIgKyB5MSAqIG1kICsgY3k7XG5cdCAgfVxuXG5cdCAgcmF3UGF0aFtpIC0gMl0gPSB4O1xuXHQgIHJhd1BhdGhbaSAtIDFdID0geTtcblx0ICByZXR1cm4gcmF3UGF0aDtcblx0fVxuXG5cdGZ1bmN0aW9uIHN0cmluZ1RvUmF3UGF0aChkKSB7XG5cdCAgdmFyIGEgPSAoZCArIFwiXCIpLnJlcGxhY2UoX3NjaWVudGlmaWMsIGZ1bmN0aW9uIChtKSB7XG5cdCAgICB2YXIgbiA9ICttO1xuXHQgICAgcmV0dXJuIG4gPCAwLjAwMDEgJiYgbiA+IC0wLjAwMDEgPyAwIDogbjtcblx0ICB9KS5tYXRjaChfc3ZnUGF0aEV4cCkgfHwgW10sXG5cdCAgICAgIHBhdGggPSBbXSxcblx0ICAgICAgcmVsYXRpdmVYID0gMCxcblx0ICAgICAgcmVsYXRpdmVZID0gMCxcblx0ICAgICAgdHdvVGhpcmRzID0gMiAvIDMsXG5cdCAgICAgIGVsZW1lbnRzID0gYS5sZW5ndGgsXG5cdCAgICAgIHBvaW50cyA9IDAsXG5cdCAgICAgIGVycm9yTWVzc2FnZSA9IFwiRVJST1I6IG1hbGZvcm1lZCBwYXRoOiBcIiArIGQsXG5cdCAgICAgIGksXG5cdCAgICAgIGosXG5cdCAgICAgIHgsXG5cdCAgICAgIHksXG5cdCAgICAgIGNvbW1hbmQsXG5cdCAgICAgIGlzUmVsYXRpdmUsXG5cdCAgICAgIHNlZ21lbnQsXG5cdCAgICAgIHN0YXJ0WCxcblx0ICAgICAgc3RhcnRZLFxuXHQgICAgICBkaWZYLFxuXHQgICAgICBkaWZZLFxuXHQgICAgICBiZXppZXJzLFxuXHQgICAgICBwcmV2Q29tbWFuZCxcblx0ICAgICAgZmxhZzEsXG5cdCAgICAgIGZsYWcyLFxuXHQgICAgICBsaW5lID0gZnVuY3Rpb24gbGluZShzeCwgc3ksIGV4LCBleSkge1xuXHQgICAgZGlmWCA9IChleCAtIHN4KSAvIDM7XG5cdCAgICBkaWZZID0gKGV5IC0gc3kpIC8gMztcblx0ICAgIHNlZ21lbnQucHVzaChzeCArIGRpZlgsIHN5ICsgZGlmWSwgZXggLSBkaWZYLCBleSAtIGRpZlksIGV4LCBleSk7XG5cdCAgfTtcblxuXHQgIGlmICghZCB8fCAhaXNOYU4oYVswXSkgfHwgaXNOYU4oYVsxXSkpIHtcblx0ICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSk7XG5cdCAgICByZXR1cm4gcGF0aDtcblx0ICB9XG5cblx0ICBmb3IgKGkgPSAwOyBpIDwgZWxlbWVudHM7IGkrKykge1xuXHQgICAgcHJldkNvbW1hbmQgPSBjb21tYW5kO1xuXG5cdCAgICBpZiAoaXNOYU4oYVtpXSkpIHtcblx0ICAgICAgY29tbWFuZCA9IGFbaV0udG9VcHBlckNhc2UoKTtcblx0ICAgICAgaXNSZWxhdGl2ZSA9IGNvbW1hbmQgIT09IGFbaV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpLS07XG5cdCAgICB9XG5cblx0ICAgIHggPSArYVtpICsgMV07XG5cdCAgICB5ID0gK2FbaSArIDJdO1xuXG5cdCAgICBpZiAoaXNSZWxhdGl2ZSkge1xuXHQgICAgICB4ICs9IHJlbGF0aXZlWDtcblx0ICAgICAgeSArPSByZWxhdGl2ZVk7XG5cdCAgICB9XG5cblx0ICAgIGlmICghaSkge1xuXHQgICAgICBzdGFydFggPSB4O1xuXHQgICAgICBzdGFydFkgPSB5O1xuXHQgICAgfVxuXG5cdCAgICBpZiAoY29tbWFuZCA9PT0gXCJNXCIpIHtcblx0ICAgICAgaWYgKHNlZ21lbnQpIHtcblx0ICAgICAgICBpZiAoc2VnbWVudC5sZW5ndGggPCA4KSB7XG5cdCAgICAgICAgICBwYXRoLmxlbmd0aCAtPSAxO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwb2ludHMgKz0gc2VnbWVudC5sZW5ndGg7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cblx0ICAgICAgcmVsYXRpdmVYID0gc3RhcnRYID0geDtcblx0ICAgICAgcmVsYXRpdmVZID0gc3RhcnRZID0geTtcblx0ICAgICAgc2VnbWVudCA9IFt4LCB5XTtcblx0ICAgICAgcGF0aC5wdXNoKHNlZ21lbnQpO1xuXHQgICAgICBpICs9IDI7XG5cdCAgICAgIGNvbW1hbmQgPSBcIkxcIjtcblx0ICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJDXCIpIHtcblx0ICAgICAgaWYgKCFzZWdtZW50KSB7XG5cdCAgICAgICAgc2VnbWVudCA9IFswLCAwXTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmICghaXNSZWxhdGl2ZSkge1xuXHQgICAgICAgIHJlbGF0aXZlWCA9IHJlbGF0aXZlWSA9IDA7XG5cdCAgICAgIH1cblxuXHQgICAgICBzZWdtZW50LnB1c2goeCwgeSwgcmVsYXRpdmVYICsgYVtpICsgM10gKiAxLCByZWxhdGl2ZVkgKyBhW2kgKyA0XSAqIDEsIHJlbGF0aXZlWCArPSBhW2kgKyA1XSAqIDEsIHJlbGF0aXZlWSArPSBhW2kgKyA2XSAqIDEpO1xuXHQgICAgICBpICs9IDY7XG5cdCAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiU1wiKSB7XG5cdCAgICAgIGRpZlggPSByZWxhdGl2ZVg7XG5cdCAgICAgIGRpZlkgPSByZWxhdGl2ZVk7XG5cblx0ICAgICAgaWYgKHByZXZDb21tYW5kID09PSBcIkNcIiB8fCBwcmV2Q29tbWFuZCA9PT0gXCJTXCIpIHtcblx0ICAgICAgICBkaWZYICs9IHJlbGF0aXZlWCAtIHNlZ21lbnRbc2VnbWVudC5sZW5ndGggLSA0XTtcblx0ICAgICAgICBkaWZZICs9IHJlbGF0aXZlWSAtIHNlZ21lbnRbc2VnbWVudC5sZW5ndGggLSAzXTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmICghaXNSZWxhdGl2ZSkge1xuXHQgICAgICAgIHJlbGF0aXZlWCA9IHJlbGF0aXZlWSA9IDA7XG5cdCAgICAgIH1cblxuXHQgICAgICBzZWdtZW50LnB1c2goZGlmWCwgZGlmWSwgeCwgeSwgcmVsYXRpdmVYICs9IGFbaSArIDNdICogMSwgcmVsYXRpdmVZICs9IGFbaSArIDRdICogMSk7XG5cdCAgICAgIGkgKz0gNDtcblx0ICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJRXCIpIHtcblx0ICAgICAgZGlmWCA9IHJlbGF0aXZlWCArICh4IC0gcmVsYXRpdmVYKSAqIHR3b1RoaXJkcztcblx0ICAgICAgZGlmWSA9IHJlbGF0aXZlWSArICh5IC0gcmVsYXRpdmVZKSAqIHR3b1RoaXJkcztcblxuXHQgICAgICBpZiAoIWlzUmVsYXRpdmUpIHtcblx0ICAgICAgICByZWxhdGl2ZVggPSByZWxhdGl2ZVkgPSAwO1xuXHQgICAgICB9XG5cblx0ICAgICAgcmVsYXRpdmVYICs9IGFbaSArIDNdICogMTtcblx0ICAgICAgcmVsYXRpdmVZICs9IGFbaSArIDRdICogMTtcblx0ICAgICAgc2VnbWVudC5wdXNoKGRpZlgsIGRpZlksIHJlbGF0aXZlWCArICh4IC0gcmVsYXRpdmVYKSAqIHR3b1RoaXJkcywgcmVsYXRpdmVZICsgKHkgLSByZWxhdGl2ZVkpICogdHdvVGhpcmRzLCByZWxhdGl2ZVgsIHJlbGF0aXZlWSk7XG5cdCAgICAgIGkgKz0gNDtcblx0ICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJUXCIpIHtcblx0ICAgICAgZGlmWCA9IHJlbGF0aXZlWCAtIHNlZ21lbnRbc2VnbWVudC5sZW5ndGggLSA0XTtcblx0ICAgICAgZGlmWSA9IHJlbGF0aXZlWSAtIHNlZ21lbnRbc2VnbWVudC5sZW5ndGggLSAzXTtcblx0ICAgICAgc2VnbWVudC5wdXNoKHJlbGF0aXZlWCArIGRpZlgsIHJlbGF0aXZlWSArIGRpZlksIHggKyAocmVsYXRpdmVYICsgZGlmWCAqIDEuNSAtIHgpICogdHdvVGhpcmRzLCB5ICsgKHJlbGF0aXZlWSArIGRpZlkgKiAxLjUgLSB5KSAqIHR3b1RoaXJkcywgcmVsYXRpdmVYID0geCwgcmVsYXRpdmVZID0geSk7XG5cdCAgICAgIGkgKz0gMjtcblx0ICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJIXCIpIHtcblx0ICAgICAgbGluZShyZWxhdGl2ZVgsIHJlbGF0aXZlWSwgcmVsYXRpdmVYID0geCwgcmVsYXRpdmVZKTtcblx0ICAgICAgaSArPSAxO1xuXHQgICAgfSBlbHNlIGlmIChjb21tYW5kID09PSBcIlZcIikge1xuXHQgICAgICBsaW5lKHJlbGF0aXZlWCwgcmVsYXRpdmVZLCByZWxhdGl2ZVgsIHJlbGF0aXZlWSA9IHggKyAoaXNSZWxhdGl2ZSA/IHJlbGF0aXZlWSAtIHJlbGF0aXZlWCA6IDApKTtcblx0ICAgICAgaSArPSAxO1xuXHQgICAgfSBlbHNlIGlmIChjb21tYW5kID09PSBcIkxcIiB8fCBjb21tYW5kID09PSBcIlpcIikge1xuXHQgICAgICBpZiAoY29tbWFuZCA9PT0gXCJaXCIpIHtcblx0ICAgICAgICB4ID0gc3RhcnRYO1xuXHQgICAgICAgIHkgPSBzdGFydFk7XG5cdCAgICAgICAgc2VnbWVudC5jbG9zZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKGNvbW1hbmQgPT09IFwiTFwiIHx8IF9hYnMocmVsYXRpdmVYIC0geCkgPiAwLjUgfHwgX2FicyhyZWxhdGl2ZVkgLSB5KSA+IDAuNSkge1xuXHQgICAgICAgIGxpbmUocmVsYXRpdmVYLCByZWxhdGl2ZVksIHgsIHkpO1xuXG5cdCAgICAgICAgaWYgKGNvbW1hbmQgPT09IFwiTFwiKSB7XG5cdCAgICAgICAgICBpICs9IDI7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cblx0ICAgICAgcmVsYXRpdmVYID0geDtcblx0ICAgICAgcmVsYXRpdmVZID0geTtcblx0ICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJBXCIpIHtcblx0ICAgICAgZmxhZzEgPSBhW2kgKyA0XTtcblx0ICAgICAgZmxhZzIgPSBhW2kgKyA1XTtcblx0ICAgICAgZGlmWCA9IGFbaSArIDZdO1xuXHQgICAgICBkaWZZID0gYVtpICsgN107XG5cdCAgICAgIGogPSA3O1xuXG5cdCAgICAgIGlmIChmbGFnMS5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgaWYgKGZsYWcxLmxlbmd0aCA8IDMpIHtcblx0ICAgICAgICAgIGRpZlkgPSBkaWZYO1xuXHQgICAgICAgICAgZGlmWCA9IGZsYWcyO1xuXHQgICAgICAgICAgai0tO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkaWZZID0gZmxhZzI7XG5cdCAgICAgICAgICBkaWZYID0gZmxhZzEuc3Vic3RyKDIpO1xuXHQgICAgICAgICAgaiAtPSAyO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGZsYWcyID0gZmxhZzEuY2hhckF0KDEpO1xuXHQgICAgICAgIGZsYWcxID0gZmxhZzEuY2hhckF0KDApO1xuXHQgICAgICB9XG5cblx0ICAgICAgYmV6aWVycyA9IGFyY1RvU2VnbWVudChyZWxhdGl2ZVgsIHJlbGF0aXZlWSwgK2FbaSArIDFdLCArYVtpICsgMl0sICthW2kgKyAzXSwgK2ZsYWcxLCArZmxhZzIsIChpc1JlbGF0aXZlID8gcmVsYXRpdmVYIDogMCkgKyBkaWZYICogMSwgKGlzUmVsYXRpdmUgPyByZWxhdGl2ZVkgOiAwKSArIGRpZlkgKiAxKTtcblx0ICAgICAgaSArPSBqO1xuXG5cdCAgICAgIGlmIChiZXppZXJzKSB7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGJlemllcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgIHNlZ21lbnQucHVzaChiZXppZXJzW2pdKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblxuXHQgICAgICByZWxhdGl2ZVggPSBzZWdtZW50W3NlZ21lbnQubGVuZ3RoIC0gMl07XG5cdCAgICAgIHJlbGF0aXZlWSA9IHNlZ21lbnRbc2VnbWVudC5sZW5ndGggLSAxXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgaSA9IHNlZ21lbnQubGVuZ3RoO1xuXG5cdCAgaWYgKGkgPCA2KSB7XG5cdCAgICBwYXRoLnBvcCgpO1xuXHQgICAgaSA9IDA7XG5cdCAgfSBlbHNlIGlmIChzZWdtZW50WzBdID09PSBzZWdtZW50W2kgLSAyXSAmJiBzZWdtZW50WzFdID09PSBzZWdtZW50W2kgLSAxXSkge1xuXHQgICAgc2VnbWVudC5jbG9zZWQgPSB0cnVlO1xuXHQgIH1cblxuXHQgIHBhdGgudG90YWxQb2ludHMgPSBwb2ludHMgKyBpO1xuXHQgIHJldHVybiBwYXRoO1xuXHR9XG5cdGZ1bmN0aW9uIHJhd1BhdGhUb1N0cmluZyhyYXdQYXRoKSB7XG5cdCAgaWYgKF9pc051bWJlcihyYXdQYXRoWzBdKSkge1xuXHQgICAgcmF3UGF0aCA9IFtyYXdQYXRoXTtcblx0ICB9XG5cblx0ICB2YXIgcmVzdWx0ID0gXCJcIixcblx0ICAgICAgbCA9IHJhd1BhdGgubGVuZ3RoLFxuXHQgICAgICBzbCxcblx0ICAgICAgcyxcblx0ICAgICAgaSxcblx0ICAgICAgc2VnbWVudDtcblxuXHQgIGZvciAocyA9IDA7IHMgPCBsOyBzKyspIHtcblx0ICAgIHNlZ21lbnQgPSByYXdQYXRoW3NdO1xuXHQgICAgcmVzdWx0ICs9IFwiTVwiICsgX3JvdW5kKHNlZ21lbnRbMF0pICsgXCIsXCIgKyBfcm91bmQoc2VnbWVudFsxXSkgKyBcIiBDXCI7XG5cdCAgICBzbCA9IHNlZ21lbnQubGVuZ3RoO1xuXG5cdCAgICBmb3IgKGkgPSAyOyBpIDwgc2w7IGkrKykge1xuXHQgICAgICByZXN1bHQgKz0gX3JvdW5kKHNlZ21lbnRbaSsrXSkgKyBcIixcIiArIF9yb3VuZChzZWdtZW50W2krK10pICsgXCIgXCIgKyBfcm91bmQoc2VnbWVudFtpKytdKSArIFwiLFwiICsgX3JvdW5kKHNlZ21lbnRbaSsrXSkgKyBcIiBcIiArIF9yb3VuZChzZWdtZW50W2krK10pICsgXCIsXCIgKyBfcm91bmQoc2VnbWVudFtpXSkgKyBcIiBcIjtcblx0ICAgIH1cblxuXHQgICAgaWYgKHNlZ21lbnQuY2xvc2VkKSB7XG5cdCAgICAgIHJlc3VsdCArPSBcInpcIjtcblx0ICAgIH1cblx0ICB9XG5cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0LyohXG5cdCAqIEN1c3RvbUVhc2UgMy4xMi41XG5cdCAqIGh0dHBzOi8vZ3NhcC5jb21cblx0ICpcblx0ICogQGxpY2Vuc2UgQ29weXJpZ2h0IDIwMDgtMjAyNCwgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dzYXAuY29tL3N0YW5kYXJkLWxpY2Vuc2Ugb3IgZm9yXG5cdCAqIENsdWIgR1NBUCBtZW1iZXJzLCB0aGUgYWdyZWVtZW50IGlzc3VlZCB3aXRoIHRoYXQgbWVtYmVyc2hpcC5cblx0ICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG5cdCovXG5cblx0dmFyIGdzYXAsXG5cdCAgICBfY29yZUluaXR0ZWQsXG5cdCAgICBfZ2V0R1NBUCA9IGZ1bmN0aW9uIF9nZXRHU0FQKCkge1xuXHQgIHJldHVybiBnc2FwIHx8IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgKGdzYXAgPSB3aW5kb3cuZ3NhcCkgJiYgZ3NhcC5yZWdpc3RlclBsdWdpbiAmJiBnc2FwO1xuXHR9LFxuXHQgICAgX2luaXRDb3JlID0gZnVuY3Rpb24gX2luaXRDb3JlKCkge1xuXHQgIGdzYXAgPSBfZ2V0R1NBUCgpO1xuXG5cdCAgaWYgKGdzYXApIHtcblx0ICAgIGdzYXAucmVnaXN0ZXJFYXNlKFwiX0NFXCIsIEN1c3RvbUVhc2UuY3JlYXRlKTtcblx0ICAgIF9jb3JlSW5pdHRlZCA9IDE7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGNvbnNvbGUud2FybihcIlBsZWFzZSBnc2FwLnJlZ2lzdGVyUGx1Z2luKEN1c3RvbUVhc2UpXCIpO1xuXHQgIH1cblx0fSxcblx0ICAgIF9iaWdOdW0gPSAxZTIwLFxuXHQgICAgX3JvdW5kJDEgPSBmdW5jdGlvbiBfcm91bmQodmFsdWUpIHtcblx0ICByZXR1cm4gfn4odmFsdWUgKiAxMDAwICsgKHZhbHVlIDwgMCA/IC0uNSA6IC41KSkgLyAxMDAwO1xuXHR9LFxuXHQgICAgX251bUV4cCA9IC9bLSs9Ll0qXFxkK1suZVxcLStdKlxcZCpbZVxcLStdKlxcZCovZ2ksXG5cdCAgICBfbmVlZHNQYXJzaW5nRXhwID0gL1tjTGxzU2FBaEh2VnRUcVFdL2csXG5cdCAgICBfZmluZE1pbmltdW0gPSBmdW5jdGlvbiBfZmluZE1pbmltdW0odmFsdWVzKSB7XG5cdCAgdmFyIGwgPSB2YWx1ZXMubGVuZ3RoLFxuXHQgICAgICBtaW4gPSBfYmlnTnVtLFxuXHQgICAgICBpO1xuXG5cdCAgZm9yIChpID0gMTsgaSA8IGw7IGkgKz0gNikge1xuXHQgICAgK3ZhbHVlc1tpXSA8IG1pbiAmJiAobWluID0gK3ZhbHVlc1tpXSk7XG5cdCAgfVxuXG5cdCAgcmV0dXJuIG1pbjtcblx0fSxcblx0ICAgIF9ub3JtYWxpemUgPSBmdW5jdGlvbiBfbm9ybWFsaXplKHZhbHVlcywgaGVpZ2h0LCBvcmlnaW5ZKSB7XG5cdCAgaWYgKCFvcmlnaW5ZICYmIG9yaWdpblkgIT09IDApIHtcblx0ICAgIG9yaWdpblkgPSBNYXRoLm1heCgrdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSwgK3ZhbHVlc1sxXSk7XG5cdCAgfVxuXG5cdCAgdmFyIHR4ID0gK3ZhbHVlc1swXSAqIC0xLFxuXHQgICAgICB0eSA9IC1vcmlnaW5ZLFxuXHQgICAgICBsID0gdmFsdWVzLmxlbmd0aCxcblx0ICAgICAgc3ggPSAxIC8gKCt2YWx1ZXNbbCAtIDJdICsgdHgpLFxuXHQgICAgICBzeSA9IC1oZWlnaHQgfHwgKE1hdGguYWJzKCt2YWx1ZXNbbCAtIDFdIC0gK3ZhbHVlc1sxXSkgPCAwLjAxICogKCt2YWx1ZXNbbCAtIDJdIC0gK3ZhbHVlc1swXSkgPyBfZmluZE1pbmltdW0odmFsdWVzKSArIHR5IDogK3ZhbHVlc1tsIC0gMV0gKyB0eSksXG5cdCAgICAgIGk7XG5cblx0ICBpZiAoc3kpIHtcblx0ICAgIHN5ID0gMSAvIHN5O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzeSA9IC1zeDtcblx0ICB9XG5cblx0ICBmb3IgKGkgPSAwOyBpIDwgbDsgaSArPSAyKSB7XG5cdCAgICB2YWx1ZXNbaV0gPSAoK3ZhbHVlc1tpXSArIHR4KSAqIHN4O1xuXHQgICAgdmFsdWVzW2kgKyAxXSA9ICgrdmFsdWVzW2kgKyAxXSArIHR5KSAqIHN5O1xuXHQgIH1cblx0fSxcblx0ICAgIF9iZXppZXJUb1BvaW50cyA9IGZ1bmN0aW9uIF9iZXppZXJUb1BvaW50cyh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQsIHRocmVzaG9sZCwgcG9pbnRzLCBpbmRleCkge1xuXHQgIHZhciB4MTIgPSAoeDEgKyB4MikgLyAyLFxuXHQgICAgICB5MTIgPSAoeTEgKyB5MikgLyAyLFxuXHQgICAgICB4MjMgPSAoeDIgKyB4MykgLyAyLFxuXHQgICAgICB5MjMgPSAoeTIgKyB5MykgLyAyLFxuXHQgICAgICB4MzQgPSAoeDMgKyB4NCkgLyAyLFxuXHQgICAgICB5MzQgPSAoeTMgKyB5NCkgLyAyLFxuXHQgICAgICB4MTIzID0gKHgxMiArIHgyMykgLyAyLFxuXHQgICAgICB5MTIzID0gKHkxMiArIHkyMykgLyAyLFxuXHQgICAgICB4MjM0ID0gKHgyMyArIHgzNCkgLyAyLFxuXHQgICAgICB5MjM0ID0gKHkyMyArIHkzNCkgLyAyLFxuXHQgICAgICB4MTIzNCA9ICh4MTIzICsgeDIzNCkgLyAyLFxuXHQgICAgICB5MTIzNCA9ICh5MTIzICsgeTIzNCkgLyAyLFxuXHQgICAgICBkeCA9IHg0IC0geDEsXG5cdCAgICAgIGR5ID0geTQgLSB5MSxcblx0ICAgICAgZDIgPSBNYXRoLmFicygoeDIgLSB4NCkgKiBkeSAtICh5MiAtIHk0KSAqIGR4KSxcblx0ICAgICAgZDMgPSBNYXRoLmFicygoeDMgLSB4NCkgKiBkeSAtICh5MyAtIHk0KSAqIGR4KSxcblx0ICAgICAgbGVuZ3RoO1xuXG5cdCAgaWYgKCFwb2ludHMpIHtcblx0ICAgIHBvaW50cyA9IFt7XG5cdCAgICAgIHg6IHgxLFxuXHQgICAgICB5OiB5MVxuXHQgICAgfSwge1xuXHQgICAgICB4OiB4NCxcblx0ICAgICAgeTogeTRcblx0ICAgIH1dO1xuXHQgICAgaW5kZXggPSAxO1xuXHQgIH1cblxuXHQgIHBvaW50cy5zcGxpY2UoaW5kZXggfHwgcG9pbnRzLmxlbmd0aCAtIDEsIDAsIHtcblx0ICAgIHg6IHgxMjM0LFxuXHQgICAgeTogeTEyMzRcblx0ICB9KTtcblxuXHQgIGlmICgoZDIgKyBkMykgKiAoZDIgKyBkMykgPiB0aHJlc2hvbGQgKiAoZHggKiBkeCArIGR5ICogZHkpKSB7XG5cdCAgICBsZW5ndGggPSBwb2ludHMubGVuZ3RoO1xuXG5cdCAgICBfYmV6aWVyVG9Qb2ludHMoeDEsIHkxLCB4MTIsIHkxMiwgeDEyMywgeTEyMywgeDEyMzQsIHkxMjM0LCB0aHJlc2hvbGQsIHBvaW50cywgaW5kZXgpO1xuXG5cdCAgICBfYmV6aWVyVG9Qb2ludHMoeDEyMzQsIHkxMjM0LCB4MjM0LCB5MjM0LCB4MzQsIHkzNCwgeDQsIHk0LCB0aHJlc2hvbGQsIHBvaW50cywgaW5kZXggKyAxICsgKHBvaW50cy5sZW5ndGggLSBsZW5ndGgpKTtcblx0ICB9XG5cblx0ICByZXR1cm4gcG9pbnRzO1xuXHR9O1xuXG5cdHZhciBDdXN0b21FYXNlID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIEN1c3RvbUVhc2UoaWQsIGRhdGEsIGNvbmZpZykge1xuXHQgICAgX2NvcmVJbml0dGVkIHx8IF9pbml0Q29yZSgpO1xuXHQgICAgdGhpcy5pZCA9IGlkO1xuXHQgICAgIHRoaXMuc2V0RGF0YShkYXRhLCBjb25maWcpO1xuXHQgIH1cblxuXHQgIHZhciBfcHJvdG8gPSBDdXN0b21FYXNlLnByb3RvdHlwZTtcblxuXHQgIF9wcm90by5zZXREYXRhID0gZnVuY3Rpb24gc2V0RGF0YShkYXRhLCBjb25maWcpIHtcblx0ICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblx0ICAgIGRhdGEgPSBkYXRhIHx8IFwiMCwwLDEsMVwiO1xuXHQgICAgdmFyIHZhbHVlcyA9IGRhdGEubWF0Y2goX251bUV4cCksXG5cdCAgICAgICAgY2xvc2VzdCA9IDEsXG5cdCAgICAgICAgcG9pbnRzID0gW10sXG5cdCAgICAgICAgbG9va3VwID0gW10sXG5cdCAgICAgICAgcHJlY2lzaW9uID0gY29uZmlnLnByZWNpc2lvbiB8fCAxLFxuXHQgICAgICAgIGZhc3QgPSBwcmVjaXNpb24gPD0gMSxcblx0ICAgICAgICBsLFxuXHQgICAgICAgIGExLFxuXHQgICAgICAgIGEyLFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgaW5jLFxuXHQgICAgICAgIGosXG5cdCAgICAgICAgcG9pbnQsXG5cdCAgICAgICAgcHJldlBvaW50LFxuXHQgICAgICAgIHA7XG5cdCAgICB0aGlzLmRhdGEgPSBkYXRhO1xuXG5cdCAgICBpZiAoX25lZWRzUGFyc2luZ0V4cC50ZXN0KGRhdGEpIHx8IH5kYXRhLmluZGV4T2YoXCJNXCIpICYmIGRhdGEuaW5kZXhPZihcIkNcIikgPCAwKSB7XG5cdCAgICAgIHZhbHVlcyA9IHN0cmluZ1RvUmF3UGF0aChkYXRhKVswXTtcblx0ICAgIH1cblxuXHQgICAgbCA9IHZhbHVlcy5sZW5ndGg7XG5cblx0ICAgIGlmIChsID09PSA0KSB7XG5cdCAgICAgIHZhbHVlcy51bnNoaWZ0KDAsIDApO1xuXHQgICAgICB2YWx1ZXMucHVzaCgxLCAxKTtcblx0ICAgICAgbCA9IDg7XG5cdCAgICB9IGVsc2UgaWYgKChsIC0gMikgJSA2KSB7XG5cdCAgICAgIHRocm93IFwiSW52YWxpZCBDdXN0b21FYXNlXCI7XG5cdCAgICB9XG5cblx0ICAgIGlmICgrdmFsdWVzWzBdICE9PSAwIHx8ICt2YWx1ZXNbbCAtIDJdICE9PSAxKSB7XG5cdCAgICAgIF9ub3JtYWxpemUodmFsdWVzLCBjb25maWcuaGVpZ2h0LCBjb25maWcub3JpZ2luWSk7XG5cdCAgICB9XG5cblx0ICAgIHRoaXMuc2VnbWVudCA9IHZhbHVlcztcblxuXHQgICAgZm9yIChpID0gMjsgaSA8IGw7IGkgKz0gNikge1xuXHQgICAgICBhMSA9IHtcblx0ICAgICAgICB4OiArdmFsdWVzW2kgLSAyXSxcblx0ICAgICAgICB5OiArdmFsdWVzW2kgLSAxXVxuXHQgICAgICB9O1xuXHQgICAgICBhMiA9IHtcblx0ICAgICAgICB4OiArdmFsdWVzW2kgKyA0XSxcblx0ICAgICAgICB5OiArdmFsdWVzW2kgKyA1XVxuXHQgICAgICB9O1xuXHQgICAgICBwb2ludHMucHVzaChhMSwgYTIpO1xuXG5cdCAgICAgIF9iZXppZXJUb1BvaW50cyhhMS54LCBhMS55LCArdmFsdWVzW2ldLCArdmFsdWVzW2kgKyAxXSwgK3ZhbHVlc1tpICsgMl0sICt2YWx1ZXNbaSArIDNdLCBhMi54LCBhMi55LCAxIC8gKHByZWNpc2lvbiAqIDIwMDAwMCksIHBvaW50cywgcG9pbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgfVxuXG5cdCAgICBsID0gcG9pbnRzLmxlbmd0aDtcblxuXHQgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBwb2ludCA9IHBvaW50c1tpXTtcblx0ICAgICAgcHJldlBvaW50ID0gcG9pbnRzW2kgLSAxXSB8fCBwb2ludDtcblxuXHQgICAgICBpZiAoKHBvaW50LnggPiBwcmV2UG9pbnQueCB8fCBwcmV2UG9pbnQueSAhPT0gcG9pbnQueSAmJiBwcmV2UG9pbnQueCA9PT0gcG9pbnQueCB8fCBwb2ludCA9PT0gcHJldlBvaW50KSAmJiBwb2ludC54IDw9IDEpIHtcblx0ICAgICAgICBwcmV2UG9pbnQuY3ggPSBwb2ludC54IC0gcHJldlBvaW50Lng7XG5cdCAgICAgICAgcHJldlBvaW50LmN5ID0gcG9pbnQueSAtIHByZXZQb2ludC55O1xuXHQgICAgICAgIHByZXZQb2ludC5uID0gcG9pbnQ7XG5cdCAgICAgICAgcHJldlBvaW50Lm54ID0gcG9pbnQueDtcblxuXHQgICAgICAgIGlmIChmYXN0ICYmIGkgPiAxICYmIE1hdGguYWJzKHByZXZQb2ludC5jeSAvIHByZXZQb2ludC5jeCAtIHBvaW50c1tpIC0gMl0uY3kgLyBwb2ludHNbaSAtIDJdLmN4KSA+IDIpIHtcblx0ICAgICAgICAgIGZhc3QgPSAwO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChwcmV2UG9pbnQuY3ggPCBjbG9zZXN0KSB7XG5cdCAgICAgICAgICBpZiAoIXByZXZQb2ludC5jeCkge1xuXHQgICAgICAgICAgICBwcmV2UG9pbnQuY3ggPSAwLjAwMTtcblxuXHQgICAgICAgICAgICBpZiAoaSA9PT0gbCAtIDEpIHtcblx0ICAgICAgICAgICAgICBwcmV2UG9pbnQueCAtPSAwLjAwMTtcblx0ICAgICAgICAgICAgICBjbG9zZXN0ID0gTWF0aC5taW4oY2xvc2VzdCwgMC4wMDEpO1xuXHQgICAgICAgICAgICAgIGZhc3QgPSAwO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjbG9zZXN0ID0gcHJldlBvaW50LmN4O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwb2ludHMuc3BsaWNlKGktLSwgMSk7XG5cdCAgICAgICAgbC0tO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGwgPSAxIC8gY2xvc2VzdCArIDEgfCAwO1xuXHQgICAgaW5jID0gMSAvIGw7XG5cdCAgICBqID0gMDtcblx0ICAgIHBvaW50ID0gcG9pbnRzWzBdO1xuXG5cdCAgICBpZiAoZmFzdCkge1xuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgcCA9IGkgKiBpbmM7XG5cblx0ICAgICAgICBpZiAocG9pbnQubnggPCBwKSB7XG5cdCAgICAgICAgICBwb2ludCA9IHBvaW50c1srK2pdO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGExID0gcG9pbnQueSArIChwIC0gcG9pbnQueCkgLyBwb2ludC5jeCAqIHBvaW50LmN5O1xuXHQgICAgICAgIGxvb2t1cFtpXSA9IHtcblx0ICAgICAgICAgIHg6IHAsXG5cdCAgICAgICAgICBjeDogaW5jLFxuXHQgICAgICAgICAgeTogYTEsXG5cdCAgICAgICAgICBjeTogMCxcblx0ICAgICAgICAgIG54OiA5XG5cdCAgICAgICAgfTtcblxuXHQgICAgICAgIGlmIChpKSB7XG5cdCAgICAgICAgICBsb29rdXBbaSAtIDFdLmN5ID0gYTEgLSBsb29rdXBbaSAtIDFdLnk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cblx0ICAgICAgbG9va3VwW2wgLSAxXS5jeSA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV0ueSAtIGExO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGlmIChwb2ludC5ueCA8IGkgKiBpbmMpIHtcblx0ICAgICAgICAgIHBvaW50ID0gcG9pbnRzWysral07XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgbG9va3VwW2ldID0gcG9pbnQ7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAoaiA8IHBvaW50cy5sZW5ndGggLSAxKSB7XG5cdCAgICAgICAgbG9va3VwW2kgLSAxXSA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMl07XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgdGhpcy5lYXNlID0gZnVuY3Rpb24gKHApIHtcblx0ICAgICAgdmFyIHBvaW50ID0gbG9va3VwW3AgKiBsIHwgMF0gfHwgbG9va3VwW2wgLSAxXTtcblxuXHQgICAgICBpZiAocG9pbnQubnggPCBwKSB7XG5cdCAgICAgICAgcG9pbnQgPSBwb2ludC5uO1xuXHQgICAgICB9XG5cblx0ICAgICAgcmV0dXJuIHBvaW50LnkgKyAocCAtIHBvaW50LngpIC8gcG9pbnQuY3ggKiBwb2ludC5jeTtcblx0ICAgIH07XG5cblx0ICAgIHRoaXMuZWFzZS5jdXN0b20gPSB0aGlzO1xuXHQgICAgdGhpcy5pZCAmJiBnc2FwICYmIGdzYXAucmVnaXN0ZXJFYXNlKHRoaXMuaWQsIHRoaXMuZWFzZSk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXG5cdCAgX3Byb3RvLmdldFNWR0RhdGEgPSBmdW5jdGlvbiBnZXRTVkdEYXRhKGNvbmZpZykge1xuXHQgICAgcmV0dXJuIEN1c3RvbUVhc2UuZ2V0U1ZHRGF0YSh0aGlzLCBjb25maWcpO1xuXHQgIH07XG5cblx0ICBDdXN0b21FYXNlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpZCwgZGF0YSwgY29uZmlnKSB7XG5cdCAgICByZXR1cm4gbmV3IEN1c3RvbUVhc2UoaWQsIGRhdGEsIGNvbmZpZykuZWFzZTtcblx0ICB9O1xuXG5cdCAgQ3VzdG9tRWFzZS5yZWdpc3RlciA9IGZ1bmN0aW9uIHJlZ2lzdGVyKGNvcmUpIHtcblx0ICAgIGdzYXAgPSBjb3JlO1xuXG5cdCAgICBfaW5pdENvcmUoKTtcblx0ICB9O1xuXG5cdCAgQ3VzdG9tRWFzZS5nZXQgPSBmdW5jdGlvbiBnZXQoaWQpIHtcblx0ICAgIHJldHVybiBnc2FwLnBhcnNlRWFzZShpZCk7XG5cdCAgfTtcblxuXHQgIEN1c3RvbUVhc2UuZ2V0U1ZHRGF0YSA9IGZ1bmN0aW9uIGdldFNWR0RhdGEoZWFzZSwgY29uZmlnKSB7XG5cdCAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cdCAgICB2YXIgd2lkdGggPSBjb25maWcud2lkdGggfHwgMTAwLFxuXHQgICAgICAgIGhlaWdodCA9IGNvbmZpZy5oZWlnaHQgfHwgMTAwLFxuXHQgICAgICAgIHggPSBjb25maWcueCB8fCAwLFxuXHQgICAgICAgIHkgPSAoY29uZmlnLnkgfHwgMCkgKyBoZWlnaHQsXG5cdCAgICAgICAgZSA9IGdzYXAudXRpbHMudG9BcnJheShjb25maWcucGF0aClbMF0sXG5cdCAgICAgICAgYSxcblx0ICAgICAgICBzbG9wZSxcblx0ICAgICAgICBpLFxuXHQgICAgICAgIGluYyxcblx0ICAgICAgICB0eCxcblx0ICAgICAgICB0eSxcblx0ICAgICAgICBwcmVjaXNpb24sXG5cdCAgICAgICAgdGhyZXNob2xkLFxuXHQgICAgICAgIHByZXZYLFxuXHQgICAgICAgIHByZXZZO1xuXG5cdCAgICBpZiAoY29uZmlnLmludmVydCkge1xuXHQgICAgICBoZWlnaHQgPSAtaGVpZ2h0O1xuXHQgICAgICB5ID0gMDtcblx0ICAgIH1cblxuXHQgICAgaWYgKHR5cGVvZiBlYXNlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgIGVhc2UgPSBnc2FwLnBhcnNlRWFzZShlYXNlKTtcblx0ICAgIH1cblxuXHQgICAgaWYgKGVhc2UuY3VzdG9tKSB7XG5cdCAgICAgIGVhc2UgPSBlYXNlLmN1c3RvbTtcblx0ICAgIH1cblxuXHQgICAgaWYgKGVhc2UgaW5zdGFuY2VvZiBDdXN0b21FYXNlKSB7XG5cdCAgICAgIGEgPSByYXdQYXRoVG9TdHJpbmcodHJhbnNmb3JtUmF3UGF0aChbZWFzZS5zZWdtZW50XSwgd2lkdGgsIDAsIDAsIC1oZWlnaHQsIHgsIHkpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGEgPSBbeCwgeV07XG5cdCAgICAgIHByZWNpc2lvbiA9IE1hdGgubWF4KDUsIChjb25maWcucHJlY2lzaW9uIHx8IDEpICogMjAwKTtcblx0ICAgICAgaW5jID0gMSAvIHByZWNpc2lvbjtcblx0ICAgICAgcHJlY2lzaW9uICs9IDI7XG5cdCAgICAgIHRocmVzaG9sZCA9IDUgLyBwcmVjaXNpb247XG5cdCAgICAgIHByZXZYID0gX3JvdW5kJDEoeCArIGluYyAqIHdpZHRoKTtcblx0ICAgICAgcHJldlkgPSBfcm91bmQkMSh5ICsgZWFzZShpbmMpICogLWhlaWdodCk7XG5cdCAgICAgIHNsb3BlID0gKHByZXZZIC0geSkgLyAocHJldlggLSB4KTtcblxuXHQgICAgICBmb3IgKGkgPSAyOyBpIDwgcHJlY2lzaW9uOyBpKyspIHtcblx0ICAgICAgICB0eCA9IF9yb3VuZCQxKHggKyBpICogaW5jICogd2lkdGgpO1xuXHQgICAgICAgIHR5ID0gX3JvdW5kJDEoeSArIGVhc2UoaSAqIGluYykgKiAtaGVpZ2h0KTtcblxuXHQgICAgICAgIGlmIChNYXRoLmFicygodHkgLSBwcmV2WSkgLyAodHggLSBwcmV2WCkgLSBzbG9wZSkgPiB0aHJlc2hvbGQgfHwgaSA9PT0gcHJlY2lzaW9uIC0gMSkge1xuXHQgICAgICAgICAgYS5wdXNoKHByZXZYLCBwcmV2WSk7XG5cdCAgICAgICAgICBzbG9wZSA9ICh0eSAtIHByZXZZKSAvICh0eCAtIHByZXZYKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBwcmV2WCA9IHR4O1xuXHQgICAgICAgIHByZXZZID0gdHk7XG5cdCAgICAgIH1cblxuXHQgICAgICBhID0gXCJNXCIgKyBhLmpvaW4oXCIsXCIpO1xuXHQgICAgfVxuXG5cdCAgICBlICYmIGUuc2V0QXR0cmlidXRlKFwiZFwiLCBhKTtcblx0ICAgIHJldHVybiBhO1xuXHQgIH07XG5cblx0ICByZXR1cm4gQ3VzdG9tRWFzZTtcblx0fSgpO1xuXHRfZ2V0R1NBUCgpICYmIGdzYXAucmVnaXN0ZXJQbHVnaW4oQ3VzdG9tRWFzZSk7XG5cdEN1c3RvbUVhc2UudmVyc2lvbiA9IFwiMy4xMi41XCI7XG5cblx0ZXhwb3J0cy5DdXN0b21FYXNlID0gQ3VzdG9tRWFzZTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ3VzdG9tRWFzZTtcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG59KSkpO1xuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuXHQoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGZhY3RvcnkoZ2xvYmFsLndpbmRvdyA9IGdsb2JhbC53aW5kb3cgfHwge30pKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuXHQvKiFcblx0ICogU2Nyb2xsVG9QbHVnaW4gMy4xMi41XG5cdCAqIGh0dHBzOi8vZ3NhcC5jb21cblx0ICpcblx0ICogQGxpY2Vuc2UgQ29weXJpZ2h0IDIwMDgtMjAyNCwgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dzYXAuY29tL3N0YW5kYXJkLWxpY2Vuc2Ugb3IgZm9yXG5cdCAqIENsdWIgR1NBUCBtZW1iZXJzLCB0aGUgYWdyZWVtZW50IGlzc3VlZCB3aXRoIHRoYXQgbWVtYmVyc2hpcC5cblx0ICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG5cdCovXG5cdHZhciBnc2FwLFxuXHQgICAgX2NvcmVJbml0dGVkLFxuXHQgICAgX3dpbmRvdyxcblx0ICAgIF9kb2NFbCxcblx0ICAgIF9ib2R5LFxuXHQgICAgX3RvQXJyYXksXG5cdCAgICBfY29uZmlnLFxuXHQgICAgU2Nyb2xsVHJpZ2dlcixcblx0ICAgIF93aW5kb3dFeGlzdHMgPSBmdW5jdGlvbiBfd2luZG93RXhpc3RzKCkge1xuXHQgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xuXHR9LFxuXHQgICAgX2dldEdTQVAgPSBmdW5jdGlvbiBfZ2V0R1NBUCgpIHtcblx0ICByZXR1cm4gZ3NhcCB8fCBfd2luZG93RXhpc3RzKCkgJiYgKGdzYXAgPSB3aW5kb3cuZ3NhcCkgJiYgZ3NhcC5yZWdpc3RlclBsdWdpbiAmJiBnc2FwO1xuXHR9LFxuXHQgICAgX2lzU3RyaW5nID0gZnVuY3Rpb24gX2lzU3RyaW5nKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIjtcblx0fSxcblx0ICAgIF9pc0Z1bmN0aW9uID0gZnVuY3Rpb24gX2lzRnVuY3Rpb24odmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCI7XG5cdH0sXG5cdCAgICBfbWF4ID0gZnVuY3Rpb24gX21heChlbGVtZW50LCBheGlzKSB7XG5cdCAgdmFyIGRpbSA9IGF4aXMgPT09IFwieFwiID8gXCJXaWR0aFwiIDogXCJIZWlnaHRcIixcblx0ICAgICAgc2Nyb2xsID0gXCJzY3JvbGxcIiArIGRpbSxcblx0ICAgICAgY2xpZW50ID0gXCJjbGllbnRcIiArIGRpbTtcblx0ICByZXR1cm4gZWxlbWVudCA9PT0gX3dpbmRvdyB8fCBlbGVtZW50ID09PSBfZG9jRWwgfHwgZWxlbWVudCA9PT0gX2JvZHkgPyBNYXRoLm1heChfZG9jRWxbc2Nyb2xsXSwgX2JvZHlbc2Nyb2xsXSkgLSAoX3dpbmRvd1tcImlubmVyXCIgKyBkaW1dIHx8IF9kb2NFbFtjbGllbnRdIHx8IF9ib2R5W2NsaWVudF0pIDogZWxlbWVudFtzY3JvbGxdIC0gZWxlbWVudFtcIm9mZnNldFwiICsgZGltXTtcblx0fSxcblx0ICAgIF9idWlsZEdldHRlciA9IGZ1bmN0aW9uIF9idWlsZEdldHRlcihlLCBheGlzKSB7XG5cdCAgdmFyIHAgPSBcInNjcm9sbFwiICsgKGF4aXMgPT09IFwieFwiID8gXCJMZWZ0XCIgOiBcIlRvcFwiKTtcblxuXHQgIGlmIChlID09PSBfd2luZG93KSB7XG5cdCAgICBpZiAoZS5wYWdlWE9mZnNldCAhPSBudWxsKSB7XG5cdCAgICAgIHAgPSBcInBhZ2VcIiArIGF4aXMudG9VcHBlckNhc2UoKSArIFwiT2Zmc2V0XCI7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlID0gX2RvY0VsW3BdICE9IG51bGwgPyBfZG9jRWwgOiBfYm9keTtcblx0ICAgIH1cblx0ICB9XG5cblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGVbcF07XG5cdCAgfTtcblx0fSxcblx0ICAgIF9jbGVhbiA9IGZ1bmN0aW9uIF9jbGVhbih2YWx1ZSwgaW5kZXgsIHRhcmdldCwgdGFyZ2V0cykge1xuXHQgIF9pc0Z1bmN0aW9uKHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZShpbmRleCwgdGFyZ2V0LCB0YXJnZXRzKSk7XG5cblx0ICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKSB7XG5cdCAgICByZXR1cm4gX2lzU3RyaW5nKHZhbHVlKSAmJiB2YWx1ZSAhPT0gXCJtYXhcIiAmJiB2YWx1ZS5jaGFyQXQoMSkgIT09IFwiPVwiID8ge1xuXHQgICAgICB4OiB2YWx1ZSxcblx0ICAgICAgeTogdmFsdWVcblx0ICAgIH0gOiB7XG5cdCAgICAgIHk6IHZhbHVlXG5cdCAgICB9O1xuXHQgIH0gZWxzZSBpZiAodmFsdWUubm9kZVR5cGUpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHk6IHZhbHVlLFxuXHQgICAgICB4OiB2YWx1ZVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHJlc3VsdCA9IHt9LFxuXHQgICAgICAgIHA7XG5cblx0ICAgIGZvciAocCBpbiB2YWx1ZSkge1xuXHQgICAgICByZXN1bHRbcF0gPSBwICE9PSBcIm9uQXV0b0tpbGxcIiAmJiBfaXNGdW5jdGlvbih2YWx1ZVtwXSkgPyB2YWx1ZVtwXShpbmRleCwgdGFyZ2V0LCB0YXJnZXRzKSA6IHZhbHVlW3BdO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0fSxcblx0ICAgIF9nZXRPZmZzZXQgPSBmdW5jdGlvbiBfZ2V0T2Zmc2V0KGVsZW1lbnQsIGNvbnRhaW5lcikge1xuXHQgIGVsZW1lbnQgPSBfdG9BcnJheShlbGVtZW50KVswXTtcblxuXHQgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHtcblx0ICAgIHJldHVybiBjb25zb2xlLndhcm4oXCJzY3JvbGxUbyB0YXJnZXQgZG9lc24ndCBleGlzdC4gVXNpbmcgMFwiKSB8fCB7XG5cdCAgICAgIHg6IDAsXG5cdCAgICAgIHk6IDBcblx0ICAgIH07XG5cdCAgfVxuXG5cdCAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuXHQgICAgICBpc1Jvb3QgPSAhY29udGFpbmVyIHx8IGNvbnRhaW5lciA9PT0gX3dpbmRvdyB8fCBjb250YWluZXIgPT09IF9ib2R5LFxuXHQgICAgICBjUmVjdCA9IGlzUm9vdCA/IHtcblx0ICAgIHRvcDogX2RvY0VsLmNsaWVudFRvcCAtIChfd2luZG93LnBhZ2VZT2Zmc2V0IHx8IF9kb2NFbC5zY3JvbGxUb3AgfHwgX2JvZHkuc2Nyb2xsVG9wIHx8IDApLFxuXHQgICAgbGVmdDogX2RvY0VsLmNsaWVudExlZnQgLSAoX3dpbmRvdy5wYWdlWE9mZnNldCB8fCBfZG9jRWwuc2Nyb2xsTGVmdCB8fCBfYm9keS5zY3JvbGxMZWZ0IHx8IDApXG5cdCAgfSA6IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcblx0ICAgICAgb2Zmc2V0cyA9IHtcblx0ICAgIHg6IHJlY3QubGVmdCAtIGNSZWN0LmxlZnQsXG5cdCAgICB5OiByZWN0LnRvcCAtIGNSZWN0LnRvcFxuXHQgIH07XG5cblx0ICBpZiAoIWlzUm9vdCAmJiBjb250YWluZXIpIHtcblx0ICAgIG9mZnNldHMueCArPSBfYnVpbGRHZXR0ZXIoY29udGFpbmVyLCBcInhcIikoKTtcblx0ICAgIG9mZnNldHMueSArPSBfYnVpbGRHZXR0ZXIoY29udGFpbmVyLCBcInlcIikoKTtcblx0ICB9XG5cblx0ICByZXR1cm4gb2Zmc2V0cztcblx0fSxcblx0ICAgIF9wYXJzZVZhbCA9IGZ1bmN0aW9uIF9wYXJzZVZhbCh2YWx1ZSwgdGFyZ2V0LCBheGlzLCBjdXJyZW50VmFsLCBvZmZzZXQpIHtcblx0ICByZXR1cm4gIWlzTmFOKHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgPyBwYXJzZUZsb2F0KHZhbHVlKSAtIG9mZnNldCA6IF9pc1N0cmluZyh2YWx1ZSkgJiYgdmFsdWUuY2hhckF0KDEpID09PSBcIj1cIiA/IHBhcnNlRmxvYXQodmFsdWUuc3Vic3RyKDIpKSAqICh2YWx1ZS5jaGFyQXQoMCkgPT09IFwiLVwiID8gLTEgOiAxKSArIGN1cnJlbnRWYWwgLSBvZmZzZXQgOiB2YWx1ZSA9PT0gXCJtYXhcIiA/IF9tYXgodGFyZ2V0LCBheGlzKSAtIG9mZnNldCA6IE1hdGgubWluKF9tYXgodGFyZ2V0LCBheGlzKSwgX2dldE9mZnNldCh2YWx1ZSwgdGFyZ2V0KVtheGlzXSAtIG9mZnNldCk7XG5cdH0sXG5cdCAgICBfaW5pdENvcmUgPSBmdW5jdGlvbiBfaW5pdENvcmUoKSB7XG5cdCAgZ3NhcCA9IF9nZXRHU0FQKCk7XG5cblx0ICBpZiAoX3dpbmRvd0V4aXN0cygpICYmIGdzYXAgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50LmJvZHkpIHtcblx0ICAgIF93aW5kb3cgPSB3aW5kb3c7XG5cdCAgICBfYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdCAgICBfZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgICBfdG9BcnJheSA9IGdzYXAudXRpbHMudG9BcnJheTtcblx0ICAgIGdzYXAuY29uZmlnKHtcblx0ICAgICAgYXV0b0tpbGxUaHJlc2hvbGQ6IDdcblx0ICAgIH0pO1xuXHQgICAgX2NvbmZpZyA9IGdzYXAuY29uZmlnKCk7XG5cdCAgICBfY29yZUluaXR0ZWQgPSAxO1xuXHQgIH1cblx0fTtcblxuXHR2YXIgU2Nyb2xsVG9QbHVnaW4gPSB7XG5cdCAgdmVyc2lvbjogXCIzLjEyLjVcIixcblx0ICBuYW1lOiBcInNjcm9sbFRvXCIsXG5cdCAgcmF3VmFyczogMSxcblx0ICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoY29yZSkge1xuXHQgICAgZ3NhcCA9IGNvcmU7XG5cblx0ICAgIF9pbml0Q29yZSgpO1xuXHQgIH0sXG5cdCAgaW5pdDogZnVuY3Rpb24gaW5pdCh0YXJnZXQsIHZhbHVlLCB0d2VlbiwgaW5kZXgsIHRhcmdldHMpIHtcblx0ICAgIF9jb3JlSW5pdHRlZCB8fCBfaW5pdENvcmUoKTtcblx0ICAgIHZhciBkYXRhID0gdGhpcyxcblx0ICAgICAgICBzbmFwVHlwZSA9IGdzYXAuZ2V0UHJvcGVydHkodGFyZ2V0LCBcInNjcm9sbFNuYXBUeXBlXCIpO1xuXHQgICAgZGF0YS5pc1dpbiA9IHRhcmdldCA9PT0gX3dpbmRvdztcblx0ICAgIGRhdGEudGFyZ2V0ID0gdGFyZ2V0O1xuXHQgICAgZGF0YS50d2VlbiA9IHR3ZWVuO1xuXHQgICAgdmFsdWUgPSBfY2xlYW4odmFsdWUsIGluZGV4LCB0YXJnZXQsIHRhcmdldHMpO1xuXHQgICAgZGF0YS52YXJzID0gdmFsdWU7XG5cdCAgICBkYXRhLmF1dG9LaWxsID0gISF2YWx1ZS5hdXRvS2lsbDtcblx0ICAgIGRhdGEuZ2V0WCA9IF9idWlsZEdldHRlcih0YXJnZXQsIFwieFwiKTtcblx0ICAgIGRhdGEuZ2V0WSA9IF9idWlsZEdldHRlcih0YXJnZXQsIFwieVwiKTtcblx0ICAgIGRhdGEueCA9IGRhdGEueFByZXYgPSBkYXRhLmdldFgoKTtcblx0ICAgIGRhdGEueSA9IGRhdGEueVByZXYgPSBkYXRhLmdldFkoKTtcblx0ICAgIFNjcm9sbFRyaWdnZXIgfHwgKFNjcm9sbFRyaWdnZXIgPSBnc2FwLmNvcmUuZ2xvYmFscygpLlNjcm9sbFRyaWdnZXIpO1xuXHQgICAgZ3NhcC5nZXRQcm9wZXJ0eSh0YXJnZXQsIFwic2Nyb2xsQmVoYXZpb3JcIikgPT09IFwic21vb3RoXCIgJiYgZ3NhcC5zZXQodGFyZ2V0LCB7XG5cdCAgICAgIHNjcm9sbEJlaGF2aW9yOiBcImF1dG9cIlxuXHQgICAgfSk7XG5cblx0ICAgIGlmIChzbmFwVHlwZSAmJiBzbmFwVHlwZSAhPT0gXCJub25lXCIpIHtcblx0ICAgICAgZGF0YS5zbmFwID0gMTtcblx0ICAgICAgZGF0YS5zbmFwSW5saW5lID0gdGFyZ2V0LnN0eWxlLnNjcm9sbFNuYXBUeXBlO1xuXHQgICAgICB0YXJnZXQuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSBcIm5vbmVcIjtcblx0ICAgIH1cblxuXHQgICAgaWYgKHZhbHVlLnggIT0gbnVsbCkge1xuXHQgICAgICBkYXRhLmFkZChkYXRhLCBcInhcIiwgZGF0YS54LCBfcGFyc2VWYWwodmFsdWUueCwgdGFyZ2V0LCBcInhcIiwgZGF0YS54LCB2YWx1ZS5vZmZzZXRYIHx8IDApLCBpbmRleCwgdGFyZ2V0cyk7XG5cblx0ICAgICAgZGF0YS5fcHJvcHMucHVzaChcInNjcm9sbFRvX3hcIik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkYXRhLnNraXBYID0gMTtcblx0ICAgIH1cblxuXHQgICAgaWYgKHZhbHVlLnkgIT0gbnVsbCkge1xuXHQgICAgICBkYXRhLmFkZChkYXRhLCBcInlcIiwgZGF0YS55LCBfcGFyc2VWYWwodmFsdWUueSwgdGFyZ2V0LCBcInlcIiwgZGF0YS55LCB2YWx1ZS5vZmZzZXRZIHx8IDApLCBpbmRleCwgdGFyZ2V0cyk7XG5cblx0ICAgICAgZGF0YS5fcHJvcHMucHVzaChcInNjcm9sbFRvX3lcIik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkYXRhLnNraXBZID0gMTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJhdGlvLCBkYXRhKSB7XG5cdCAgICB2YXIgcHQgPSBkYXRhLl9wdCxcblx0ICAgICAgICB0YXJnZXQgPSBkYXRhLnRhcmdldCxcblx0ICAgICAgICB0d2VlbiA9IGRhdGEudHdlZW4sXG5cdCAgICAgICAgYXV0b0tpbGwgPSBkYXRhLmF1dG9LaWxsLFxuXHQgICAgICAgIHhQcmV2ID0gZGF0YS54UHJldixcblx0ICAgICAgICB5UHJldiA9IGRhdGEueVByZXYsXG5cdCAgICAgICAgaXNXaW4gPSBkYXRhLmlzV2luLFxuXHQgICAgICAgIHNuYXAgPSBkYXRhLnNuYXAsXG5cdCAgICAgICAgc25hcElubGluZSA9IGRhdGEuc25hcElubGluZSxcblx0ICAgICAgICB4LFxuXHQgICAgICAgIHksXG5cdCAgICAgICAgeURpZixcblx0ICAgICAgICB4RGlmLFxuXHQgICAgICAgIHRocmVzaG9sZDtcblxuXHQgICAgd2hpbGUgKHB0KSB7XG5cdCAgICAgIHB0LnIocmF0aW8sIHB0LmQpO1xuXHQgICAgICBwdCA9IHB0Ll9uZXh0O1xuXHQgICAgfVxuXG5cdCAgICB4ID0gaXNXaW4gfHwgIWRhdGEuc2tpcFggPyBkYXRhLmdldFgoKSA6IHhQcmV2O1xuXHQgICAgeSA9IGlzV2luIHx8ICFkYXRhLnNraXBZID8gZGF0YS5nZXRZKCkgOiB5UHJldjtcblx0ICAgIHlEaWYgPSB5IC0geVByZXY7XG5cdCAgICB4RGlmID0geCAtIHhQcmV2O1xuXHQgICAgdGhyZXNob2xkID0gX2NvbmZpZy5hdXRvS2lsbFRocmVzaG9sZDtcblxuXHQgICAgaWYgKGRhdGEueCA8IDApIHtcblx0ICAgICAgZGF0YS54ID0gMDtcblx0ICAgIH1cblxuXHQgICAgaWYgKGRhdGEueSA8IDApIHtcblx0ICAgICAgZGF0YS55ID0gMDtcblx0ICAgIH1cblxuXHQgICAgaWYgKGF1dG9LaWxsKSB7XG5cdCAgICAgIGlmICghZGF0YS5za2lwWCAmJiAoeERpZiA+IHRocmVzaG9sZCB8fCB4RGlmIDwgLXRocmVzaG9sZCkgJiYgeCA8IF9tYXgodGFyZ2V0LCBcInhcIikpIHtcblx0ICAgICAgICBkYXRhLnNraXBYID0gMTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmICghZGF0YS5za2lwWSAmJiAoeURpZiA+IHRocmVzaG9sZCB8fCB5RGlmIDwgLXRocmVzaG9sZCkgJiYgeSA8IF9tYXgodGFyZ2V0LCBcInlcIikpIHtcblx0ICAgICAgICBkYXRhLnNraXBZID0gMTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmIChkYXRhLnNraXBYICYmIGRhdGEuc2tpcFkpIHtcblx0ICAgICAgICB0d2Vlbi5raWxsKCk7XG5cdCAgICAgICAgZGF0YS52YXJzLm9uQXV0b0tpbGwgJiYgZGF0YS52YXJzLm9uQXV0b0tpbGwuYXBwbHkodHdlZW4sIGRhdGEudmFycy5vbkF1dG9LaWxsUGFyYW1zIHx8IFtdKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBpZiAoaXNXaW4pIHtcblx0ICAgICAgX3dpbmRvdy5zY3JvbGxUbyghZGF0YS5za2lwWCA/IGRhdGEueCA6IHgsICFkYXRhLnNraXBZID8gZGF0YS55IDogeSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkYXRhLnNraXBZIHx8ICh0YXJnZXQuc2Nyb2xsVG9wID0gZGF0YS55KTtcblx0ICAgICAgZGF0YS5za2lwWCB8fCAodGFyZ2V0LnNjcm9sbExlZnQgPSBkYXRhLngpO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoc25hcCAmJiAocmF0aW8gPT09IDEgfHwgcmF0aW8gPT09IDApKSB7XG5cdCAgICAgIHkgPSB0YXJnZXQuc2Nyb2xsVG9wO1xuXHQgICAgICB4ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG5cdCAgICAgIHNuYXBJbmxpbmUgPyB0YXJnZXQuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSBzbmFwSW5saW5lIDogdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwic2Nyb2xsLXNuYXAtdHlwZVwiKTtcblx0ICAgICAgdGFyZ2V0LnNjcm9sbFRvcCA9IHkgKyAxO1xuXHQgICAgICB0YXJnZXQuc2Nyb2xsTGVmdCA9IHggKyAxO1xuXHQgICAgICB0YXJnZXQuc2Nyb2xsVG9wID0geTtcblx0ICAgICAgdGFyZ2V0LnNjcm9sbExlZnQgPSB4O1xuXHQgICAgfVxuXG5cdCAgICBkYXRhLnhQcmV2ID0gZGF0YS54O1xuXHQgICAgZGF0YS55UHJldiA9IGRhdGEueTtcblx0ICAgIFNjcm9sbFRyaWdnZXIgJiYgU2Nyb2xsVHJpZ2dlci51cGRhdGUoKTtcblx0ICB9LFxuXHQgIGtpbGw6IGZ1bmN0aW9uIGtpbGwocHJvcGVydHkpIHtcblx0ICAgIHZhciBib3RoID0gcHJvcGVydHkgPT09IFwic2Nyb2xsVG9cIixcblx0ICAgICAgICBpID0gdGhpcy5fcHJvcHMuaW5kZXhPZihwcm9wZXJ0eSk7XG5cblx0ICAgIGlmIChib3RoIHx8IHByb3BlcnR5ID09PSBcInNjcm9sbFRvX3hcIikge1xuXHQgICAgICB0aGlzLnNraXBYID0gMTtcblx0ICAgIH1cblxuXHQgICAgaWYgKGJvdGggfHwgcHJvcGVydHkgPT09IFwic2Nyb2xsVG9feVwiKSB7XG5cdCAgICAgIHRoaXMuc2tpcFkgPSAxO1xuXHQgICAgfVxuXG5cdCAgICBpID4gLTEgJiYgdGhpcy5fcHJvcHMuc3BsaWNlKGksIDEpO1xuXHQgICAgcmV0dXJuICF0aGlzLl9wcm9wcy5sZW5ndGg7XG5cdCAgfVxuXHR9O1xuXHRTY3JvbGxUb1BsdWdpbi5tYXggPSBfbWF4O1xuXHRTY3JvbGxUb1BsdWdpbi5nZXRPZmZzZXQgPSBfZ2V0T2Zmc2V0O1xuXHRTY3JvbGxUb1BsdWdpbi5idWlsZEdldHRlciA9IF9idWlsZEdldHRlcjtcblx0X2dldEdTQVAoKSAmJiBnc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRvUGx1Z2luKTtcblxuXHRleHBvcnRzLlNjcm9sbFRvUGx1Z2luID0gU2Nyb2xsVG9QbHVnaW47XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNjcm9sbFRvUGx1Z2luO1xuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwud2luZG93ID0gZ2xvYmFsLndpbmRvdyB8fCB7fSkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfVxuXG4gIC8qIVxuICAgKiBPYnNlcnZlciAzLjEyLjVcbiAgICogaHR0cHM6Ly9nc2FwLmNvbVxuICAgKlxuICAgKiBAbGljZW5zZSBDb3B5cmlnaHQgMjAwOC0yMDI0LCBHcmVlblNvY2suIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gICAqIFN1YmplY3QgdG8gdGhlIHRlcm1zIGF0IGh0dHBzOi8vZ3NhcC5jb20vc3RhbmRhcmQtbGljZW5zZSBvciBmb3JcbiAgICogQ2x1YiBHU0FQIG1lbWJlcnMsIHRoZSBhZ3JlZW1lbnQgaXNzdWVkIHdpdGggdGhhdCBtZW1iZXJzaGlwLlxuICAgKiBAYXV0aG9yOiBKYWNrIERveWxlLCBqYWNrQGdyZWVuc29jay5jb21cbiAgKi9cbiAgdmFyIGdzYXAsXG4gICAgICBfY29yZUluaXR0ZWQsXG4gICAgICBfY2xhbXAsXG4gICAgICBfd2luLFxuICAgICAgX2RvYyxcbiAgICAgIF9kb2NFbCxcbiAgICAgIF9ib2R5LFxuICAgICAgX2lzVG91Y2gsXG4gICAgICBfcG9pbnRlclR5cGUsXG4gICAgICBTY3JvbGxUcmlnZ2VyLFxuICAgICAgX3Jvb3QsXG4gICAgICBfbm9ybWFsaXplcixcbiAgICAgIF9ldmVudFR5cGVzLFxuICAgICAgX2NvbnRleHQsXG4gICAgICBfZ2V0R1NBUCA9IGZ1bmN0aW9uIF9nZXRHU0FQKCkge1xuICAgIHJldHVybiBnc2FwIHx8IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgKGdzYXAgPSB3aW5kb3cuZ3NhcCkgJiYgZ3NhcC5yZWdpc3RlclBsdWdpbiAmJiBnc2FwO1xuICB9LFxuICAgICAgX3N0YXJ0dXAgPSAxLFxuICAgICAgX29ic2VydmVycyA9IFtdLFxuICAgICAgX3Njcm9sbGVycyA9IFtdLFxuICAgICAgX3Byb3hpZXMgPSBbXSxcbiAgICAgIF9nZXRUaW1lID0gRGF0ZS5ub3csXG4gICAgICBfYnJpZGdlID0gZnVuY3Rpb24gX2JyaWRnZShuYW1lLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgICAgIF9pbnRlZ3JhdGUgPSBmdW5jdGlvbiBfaW50ZWdyYXRlKCkge1xuICAgIHZhciBjb3JlID0gU2Nyb2xsVHJpZ2dlci5jb3JlLFxuICAgICAgICBkYXRhID0gY29yZS5icmlkZ2UgfHwge30sXG4gICAgICAgIHNjcm9sbGVycyA9IGNvcmUuX3Njcm9sbGVycyxcbiAgICAgICAgcHJveGllcyA9IGNvcmUuX3Byb3hpZXM7XG4gICAgc2Nyb2xsZXJzLnB1c2guYXBwbHkoc2Nyb2xsZXJzLCBfc2Nyb2xsZXJzKTtcbiAgICBwcm94aWVzLnB1c2guYXBwbHkocHJveGllcywgX3Byb3hpZXMpO1xuICAgIF9zY3JvbGxlcnMgPSBzY3JvbGxlcnM7XG4gICAgX3Byb3hpZXMgPSBwcm94aWVzO1xuXG4gICAgX2JyaWRnZSA9IGZ1bmN0aW9uIF9icmlkZ2UobmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBkYXRhW25hbWVdKHZhbHVlKTtcbiAgICB9O1xuICB9LFxuICAgICAgX2dldFByb3h5UHJvcCA9IGZ1bmN0aW9uIF9nZXRQcm94eVByb3AoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgICByZXR1cm4gfl9wcm94aWVzLmluZGV4T2YoZWxlbWVudCkgJiYgX3Byb3hpZXNbX3Byb3hpZXMuaW5kZXhPZihlbGVtZW50KSArIDFdW3Byb3BlcnR5XTtcbiAgfSxcbiAgICAgIF9pc1ZpZXdwb3J0ID0gZnVuY3Rpb24gX2lzVmlld3BvcnQoZWwpIHtcbiAgICByZXR1cm4gISF+X3Jvb3QuaW5kZXhPZihlbCk7XG4gIH0sXG4gICAgICBfYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBfYWRkTGlzdGVuZXIoZWxlbWVudCwgdHlwZSwgZnVuYywgcGFzc2l2ZSwgY2FwdHVyZSkge1xuICAgIHJldHVybiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYywge1xuICAgICAgcGFzc2l2ZTogcGFzc2l2ZSAhPT0gZmFsc2UsXG4gICAgICBjYXB0dXJlOiAhIWNhcHR1cmVcbiAgICB9KTtcbiAgfSxcbiAgICAgIF9yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIF9yZW1vdmVMaXN0ZW5lcihlbGVtZW50LCB0eXBlLCBmdW5jLCBjYXB0dXJlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jLCAhIWNhcHR1cmUpO1xuICB9LFxuICAgICAgX3Njcm9sbExlZnQgPSBcInNjcm9sbExlZnRcIixcbiAgICAgIF9zY3JvbGxUb3AgPSBcInNjcm9sbFRvcFwiLFxuICAgICAgX29uU2Nyb2xsID0gZnVuY3Rpb24gX29uU2Nyb2xsKCkge1xuICAgIHJldHVybiBfbm9ybWFsaXplciAmJiBfbm9ybWFsaXplci5pc1ByZXNzZWQgfHwgX3Njcm9sbGVycy5jYWNoZSsrO1xuICB9LFxuICAgICAgX3Njcm9sbENhY2hlRnVuYyA9IGZ1bmN0aW9uIF9zY3JvbGxDYWNoZUZ1bmMoZiwgZG9Ob3RDYWNoZSkge1xuICAgIHZhciBjYWNoaW5nRnVuYyA9IGZ1bmN0aW9uIGNhY2hpbmdGdW5jKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgfHwgdmFsdWUgPT09IDApIHtcbiAgICAgICAgX3N0YXJ0dXAgJiYgKF93aW4uaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9IFwibWFudWFsXCIpO1xuICAgICAgICB2YXIgaXNOb3JtYWxpemluZyA9IF9ub3JtYWxpemVyICYmIF9ub3JtYWxpemVyLmlzUHJlc3NlZDtcbiAgICAgICAgdmFsdWUgPSBjYWNoaW5nRnVuYy52ID0gTWF0aC5yb3VuZCh2YWx1ZSkgfHwgKF9ub3JtYWxpemVyICYmIF9ub3JtYWxpemVyLmlPUyA/IDEgOiAwKTtcbiAgICAgICAgZih2YWx1ZSk7XG4gICAgICAgIGNhY2hpbmdGdW5jLmNhY2hlSUQgPSBfc2Nyb2xsZXJzLmNhY2hlO1xuICAgICAgICBpc05vcm1hbGl6aW5nICYmIF9icmlkZ2UoXCJzc1wiLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGRvTm90Q2FjaGUgfHwgX3Njcm9sbGVycy5jYWNoZSAhPT0gY2FjaGluZ0Z1bmMuY2FjaGVJRCB8fCBfYnJpZGdlKFwicmVmXCIpKSB7XG4gICAgICAgIGNhY2hpbmdGdW5jLmNhY2hlSUQgPSBfc2Nyb2xsZXJzLmNhY2hlO1xuICAgICAgICBjYWNoaW5nRnVuYy52ID0gZigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FjaGluZ0Z1bmMudiArIGNhY2hpbmdGdW5jLm9mZnNldDtcbiAgICB9O1xuXG4gICAgY2FjaGluZ0Z1bmMub2Zmc2V0ID0gMDtcbiAgICByZXR1cm4gZiAmJiBjYWNoaW5nRnVuYztcbiAgfSxcbiAgICAgIF9ob3Jpem9udGFsID0ge1xuICAgIHM6IF9zY3JvbGxMZWZ0LFxuICAgIHA6IFwibGVmdFwiLFxuICAgIHAyOiBcIkxlZnRcIixcbiAgICBvczogXCJyaWdodFwiLFxuICAgIG9zMjogXCJSaWdodFwiLFxuICAgIGQ6IFwid2lkdGhcIixcbiAgICBkMjogXCJXaWR0aFwiLFxuICAgIGE6IFwieFwiLFxuICAgIHNjOiBfc2Nyb2xsQ2FjaGVGdW5jKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyBfd2luLnNjcm9sbFRvKHZhbHVlLCBfdmVydGljYWwuc2MoKSkgOiBfd2luLnBhZ2VYT2Zmc2V0IHx8IF9kb2NbX3Njcm9sbExlZnRdIHx8IF9kb2NFbFtfc2Nyb2xsTGVmdF0gfHwgX2JvZHlbX3Njcm9sbExlZnRdIHx8IDA7XG4gICAgfSlcbiAgfSxcbiAgICAgIF92ZXJ0aWNhbCA9IHtcbiAgICBzOiBfc2Nyb2xsVG9wLFxuICAgIHA6IFwidG9wXCIsXG4gICAgcDI6IFwiVG9wXCIsXG4gICAgb3M6IFwiYm90dG9tXCIsXG4gICAgb3MyOiBcIkJvdHRvbVwiLFxuICAgIGQ6IFwiaGVpZ2h0XCIsXG4gICAgZDI6IFwiSGVpZ2h0XCIsXG4gICAgYTogXCJ5XCIsXG4gICAgb3A6IF9ob3Jpem9udGFsLFxuICAgIHNjOiBfc2Nyb2xsQ2FjaGVGdW5jKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyBfd2luLnNjcm9sbFRvKF9ob3Jpem9udGFsLnNjKCksIHZhbHVlKSA6IF93aW4ucGFnZVlPZmZzZXQgfHwgX2RvY1tfc2Nyb2xsVG9wXSB8fCBfZG9jRWxbX3Njcm9sbFRvcF0gfHwgX2JvZHlbX3Njcm9sbFRvcF0gfHwgMDtcbiAgICB9KVxuICB9LFxuICAgICAgX2dldFRhcmdldCA9IGZ1bmN0aW9uIF9nZXRUYXJnZXQodCwgc2VsZikge1xuICAgIHJldHVybiAoc2VsZiAmJiBzZWxmLl9jdHggJiYgc2VsZi5fY3R4LnNlbGVjdG9yIHx8IGdzYXAudXRpbHMudG9BcnJheSkodClbMF0gfHwgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiICYmIGdzYXAuY29uZmlnKCkubnVsbFRhcmdldFdhcm4gIT09IGZhbHNlID8gY29uc29sZS53YXJuKFwiRWxlbWVudCBub3QgZm91bmQ6XCIsIHQpIDogbnVsbCk7XG4gIH0sXG4gICAgICBfZ2V0U2Nyb2xsRnVuYyA9IGZ1bmN0aW9uIF9nZXRTY3JvbGxGdW5jKGVsZW1lbnQsIF9yZWYpIHtcbiAgICB2YXIgcyA9IF9yZWYucyxcbiAgICAgICAgc2MgPSBfcmVmLnNjO1xuICAgIF9pc1ZpZXdwb3J0KGVsZW1lbnQpICYmIChlbGVtZW50ID0gX2RvYy5zY3JvbGxpbmdFbGVtZW50IHx8IF9kb2NFbCk7XG5cbiAgICB2YXIgaSA9IF9zY3JvbGxlcnMuaW5kZXhPZihlbGVtZW50KSxcbiAgICAgICAgb2Zmc2V0ID0gc2MgPT09IF92ZXJ0aWNhbC5zYyA/IDEgOiAyO1xuXG4gICAgIX5pICYmIChpID0gX3Njcm9sbGVycy5wdXNoKGVsZW1lbnQpIC0gMSk7XG4gICAgX3Njcm9sbGVyc1tpICsgb2Zmc2V0XSB8fCBfYWRkTGlzdGVuZXIoZWxlbWVudCwgXCJzY3JvbGxcIiwgX29uU2Nyb2xsKTtcbiAgICB2YXIgcHJldiA9IF9zY3JvbGxlcnNbaSArIG9mZnNldF0sXG4gICAgICAgIGZ1bmMgPSBwcmV2IHx8IChfc2Nyb2xsZXJzW2kgKyBvZmZzZXRdID0gX3Njcm9sbENhY2hlRnVuYyhfZ2V0UHJveHlQcm9wKGVsZW1lbnQsIHMpLCB0cnVlKSB8fCAoX2lzVmlld3BvcnQoZWxlbWVudCkgPyBzYyA6IF9zY3JvbGxDYWNoZUZ1bmMoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IGVsZW1lbnRbc10gPSB2YWx1ZSA6IGVsZW1lbnRbc107XG4gICAgfSkpKTtcbiAgICBmdW5jLnRhcmdldCA9IGVsZW1lbnQ7XG4gICAgcHJldiB8fCAoZnVuYy5zbW9vdGggPSBnc2FwLmdldFByb3BlcnR5KGVsZW1lbnQsIFwic2Nyb2xsQmVoYXZpb3JcIikgPT09IFwic21vb3RoXCIpO1xuICAgIHJldHVybiBmdW5jO1xuICB9LFxuICAgICAgX2dldFZlbG9jaXR5UHJvcCA9IGZ1bmN0aW9uIF9nZXRWZWxvY2l0eVByb3AodmFsdWUsIG1pblRpbWVSZWZyZXNoLCB1c2VEZWx0YSkge1xuICAgIHZhciB2MSA9IHZhbHVlLFxuICAgICAgICB2MiA9IHZhbHVlLFxuICAgICAgICB0MSA9IF9nZXRUaW1lKCksXG4gICAgICAgIHQyID0gdDEsXG4gICAgICAgIG1pbiA9IG1pblRpbWVSZWZyZXNoIHx8IDUwLFxuICAgICAgICBkcm9wVG9aZXJvVGltZSA9IE1hdGgubWF4KDUwMCwgbWluICogMyksXG4gICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSwgZm9yY2UpIHtcbiAgICAgIHZhciB0ID0gX2dldFRpbWUoKTtcblxuICAgICAgaWYgKGZvcmNlIHx8IHQgLSB0MSA+IG1pbikge1xuICAgICAgICB2MiA9IHYxO1xuICAgICAgICB2MSA9IHZhbHVlO1xuICAgICAgICB0MiA9IHQxO1xuICAgICAgICB0MSA9IHQ7XG4gICAgICB9IGVsc2UgaWYgKHVzZURlbHRhKSB7XG4gICAgICAgIHYxICs9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdjEgPSB2MiArICh2YWx1ZSAtIHYyKSAvICh0IC0gdDIpICogKHQxIC0gdDIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgICAgIHJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICB2MiA9IHYxID0gdXNlRGVsdGEgPyAwIDogdjE7XG4gICAgICB0MiA9IHQxID0gMDtcbiAgICB9LFxuICAgICAgICBnZXRWZWxvY2l0eSA9IGZ1bmN0aW9uIGdldFZlbG9jaXR5KGxhdGVzdFZhbHVlKSB7XG4gICAgICB2YXIgdE9sZCA9IHQyLFxuICAgICAgICAgIHZPbGQgPSB2MixcbiAgICAgICAgICB0ID0gX2dldFRpbWUoKTtcblxuICAgICAgKGxhdGVzdFZhbHVlIHx8IGxhdGVzdFZhbHVlID09PSAwKSAmJiBsYXRlc3RWYWx1ZSAhPT0gdjEgJiYgdXBkYXRlKGxhdGVzdFZhbHVlKTtcbiAgICAgIHJldHVybiB0MSA9PT0gdDIgfHwgdCAtIHQyID4gZHJvcFRvWmVyb1RpbWUgPyAwIDogKHYxICsgKHVzZURlbHRhID8gdk9sZCA6IC12T2xkKSkgLyAoKHVzZURlbHRhID8gdCA6IHQxKSAtIHRPbGQpICogMTAwMDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgICAgcmVzZXQ6IHJlc2V0LFxuICAgICAgZ2V0VmVsb2NpdHk6IGdldFZlbG9jaXR5XG4gICAgfTtcbiAgfSxcbiAgICAgIF9nZXRFdmVudCA9IGZ1bmN0aW9uIF9nZXRFdmVudChlLCBwcmV2ZW50RGVmYXVsdCkge1xuICAgIHByZXZlbnREZWZhdWx0ICYmICFlLl9nc2FwQWxsb3cgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiBlLmNoYW5nZWRUb3VjaGVzID8gZS5jaGFuZ2VkVG91Y2hlc1swXSA6IGU7XG4gIH0sXG4gICAgICBfZ2V0QWJzb2x1dGVNYXggPSBmdW5jdGlvbiBfZ2V0QWJzb2x1dGVNYXgoYSkge1xuICAgIHZhciBtYXggPSBNYXRoLm1heC5hcHBseShNYXRoLCBhKSxcbiAgICAgICAgbWluID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgYSk7XG4gICAgcmV0dXJuIE1hdGguYWJzKG1heCkgPj0gTWF0aC5hYnMobWluKSA/IG1heCA6IG1pbjtcbiAgfSxcbiAgICAgIF9zZXRTY3JvbGxUcmlnZ2VyID0gZnVuY3Rpb24gX3NldFNjcm9sbFRyaWdnZXIoKSB7XG4gICAgU2Nyb2xsVHJpZ2dlciA9IGdzYXAuY29yZS5nbG9iYWxzKCkuU2Nyb2xsVHJpZ2dlcjtcbiAgICBTY3JvbGxUcmlnZ2VyICYmIFNjcm9sbFRyaWdnZXIuY29yZSAmJiBfaW50ZWdyYXRlKCk7XG4gIH0sXG4gICAgICBfaW5pdENvcmUgPSBmdW5jdGlvbiBfaW5pdENvcmUoY29yZSkge1xuICAgIGdzYXAgPSBjb3JlIHx8IF9nZXRHU0FQKCk7XG5cbiAgICBpZiAoIV9jb3JlSW5pdHRlZCAmJiBnc2FwICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudC5ib2R5KSB7XG4gICAgICBfd2luID0gd2luZG93O1xuICAgICAgX2RvYyA9IGRvY3VtZW50O1xuICAgICAgX2RvY0VsID0gX2RvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICBfYm9keSA9IF9kb2MuYm9keTtcbiAgICAgIF9yb290ID0gW193aW4sIF9kb2MsIF9kb2NFbCwgX2JvZHldO1xuICAgICAgX2NsYW1wID0gZ3NhcC51dGlscy5jbGFtcDtcblxuICAgICAgX2NvbnRleHQgPSBnc2FwLmNvcmUuY29udGV4dCB8fCBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgX3BvaW50ZXJUeXBlID0gXCJvbnBvaW50ZXJlbnRlclwiIGluIF9ib2R5ID8gXCJwb2ludGVyXCIgOiBcIm1vdXNlXCI7XG4gICAgICBfaXNUb3VjaCA9IE9ic2VydmVyLmlzVG91Y2ggPSBfd2luLm1hdGNoTWVkaWEgJiYgX3dpbi5tYXRjaE1lZGlhKFwiKGhvdmVyOiBub25lKSwgKHBvaW50ZXI6IGNvYXJzZSlcIikubWF0Y2hlcyA/IDEgOiBcIm9udG91Y2hzdGFydFwiIGluIF93aW4gfHwgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDAgPyAyIDogMDtcbiAgICAgIF9ldmVudFR5cGVzID0gT2JzZXJ2ZXIuZXZlbnRUeXBlcyA9IChcIm9udG91Y2hzdGFydFwiIGluIF9kb2NFbCA/IFwidG91Y2hzdGFydCx0b3VjaG1vdmUsdG91Y2hjYW5jZWwsdG91Y2hlbmRcIiA6ICEoXCJvbnBvaW50ZXJkb3duXCIgaW4gX2RvY0VsKSA/IFwibW91c2Vkb3duLG1vdXNlbW92ZSxtb3VzZXVwLG1vdXNldXBcIiA6IFwicG9pbnRlcmRvd24scG9pbnRlcm1vdmUscG9pbnRlcmNhbmNlbCxwb2ludGVydXBcIikuc3BsaXQoXCIsXCIpO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfc3RhcnR1cCA9IDA7XG4gICAgICB9LCA1MDApO1xuXG4gICAgICBfc2V0U2Nyb2xsVHJpZ2dlcigpO1xuXG4gICAgICBfY29yZUluaXR0ZWQgPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBfY29yZUluaXR0ZWQ7XG4gIH07XG5cbiAgX2hvcml6b250YWwub3AgPSBfdmVydGljYWw7XG4gIF9zY3JvbGxlcnMuY2FjaGUgPSAwO1xuICB2YXIgT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZXIodmFycykge1xuICAgICAgdGhpcy5pbml0KHZhcnMpO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBPYnNlcnZlci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uaW5pdCA9IGZ1bmN0aW9uIGluaXQodmFycykge1xuICAgICAgX2NvcmVJbml0dGVkIHx8IF9pbml0Q29yZShnc2FwKSB8fCBjb25zb2xlLndhcm4oXCJQbGVhc2UgZ3NhcC5yZWdpc3RlclBsdWdpbihPYnNlcnZlcilcIik7XG4gICAgICBTY3JvbGxUcmlnZ2VyIHx8IF9zZXRTY3JvbGxUcmlnZ2VyKCk7XG4gICAgICB2YXIgdG9sZXJhbmNlID0gdmFycy50b2xlcmFuY2UsXG4gICAgICAgICAgZHJhZ01pbmltdW0gPSB2YXJzLmRyYWdNaW5pbXVtLFxuICAgICAgICAgIHR5cGUgPSB2YXJzLnR5cGUsXG4gICAgICAgICAgdGFyZ2V0ID0gdmFycy50YXJnZXQsXG4gICAgICAgICAgbGluZUhlaWdodCA9IHZhcnMubGluZUhlaWdodCxcbiAgICAgICAgICBkZWJvdW5jZSA9IHZhcnMuZGVib3VuY2UsXG4gICAgICAgICAgcHJldmVudERlZmF1bHQgPSB2YXJzLnByZXZlbnREZWZhdWx0LFxuICAgICAgICAgIG9uU3RvcCA9IHZhcnMub25TdG9wLFxuICAgICAgICAgIG9uU3RvcERlbGF5ID0gdmFycy5vblN0b3BEZWxheSxcbiAgICAgICAgICBpZ25vcmUgPSB2YXJzLmlnbm9yZSxcbiAgICAgICAgICB3aGVlbFNwZWVkID0gdmFycy53aGVlbFNwZWVkLFxuICAgICAgICAgIGV2ZW50ID0gdmFycy5ldmVudCxcbiAgICAgICAgICBvbkRyYWdTdGFydCA9IHZhcnMub25EcmFnU3RhcnQsXG4gICAgICAgICAgb25EcmFnRW5kID0gdmFycy5vbkRyYWdFbmQsXG4gICAgICAgICAgb25EcmFnID0gdmFycy5vbkRyYWcsXG4gICAgICAgICAgb25QcmVzcyA9IHZhcnMub25QcmVzcyxcbiAgICAgICAgICBvblJlbGVhc2UgPSB2YXJzLm9uUmVsZWFzZSxcbiAgICAgICAgICBvblJpZ2h0ID0gdmFycy5vblJpZ2h0LFxuICAgICAgICAgIG9uTGVmdCA9IHZhcnMub25MZWZ0LFxuICAgICAgICAgIG9uVXAgPSB2YXJzLm9uVXAsXG4gICAgICAgICAgb25Eb3duID0gdmFycy5vbkRvd24sXG4gICAgICAgICAgb25DaGFuZ2VYID0gdmFycy5vbkNoYW5nZVgsXG4gICAgICAgICAgb25DaGFuZ2VZID0gdmFycy5vbkNoYW5nZVksXG4gICAgICAgICAgb25DaGFuZ2UgPSB2YXJzLm9uQ2hhbmdlLFxuICAgICAgICAgIG9uVG9nZ2xlWCA9IHZhcnMub25Ub2dnbGVYLFxuICAgICAgICAgIG9uVG9nZ2xlWSA9IHZhcnMub25Ub2dnbGVZLFxuICAgICAgICAgIG9uSG92ZXIgPSB2YXJzLm9uSG92ZXIsXG4gICAgICAgICAgb25Ib3ZlckVuZCA9IHZhcnMub25Ib3ZlckVuZCxcbiAgICAgICAgICBvbk1vdmUgPSB2YXJzLm9uTW92ZSxcbiAgICAgICAgICBpZ25vcmVDaGVjayA9IHZhcnMuaWdub3JlQ2hlY2ssXG4gICAgICAgICAgaXNOb3JtYWxpemVyID0gdmFycy5pc05vcm1hbGl6ZXIsXG4gICAgICAgICAgb25HZXN0dXJlU3RhcnQgPSB2YXJzLm9uR2VzdHVyZVN0YXJ0LFxuICAgICAgICAgIG9uR2VzdHVyZUVuZCA9IHZhcnMub25HZXN0dXJlRW5kLFxuICAgICAgICAgIG9uV2hlZWwgPSB2YXJzLm9uV2hlZWwsXG4gICAgICAgICAgb25FbmFibGUgPSB2YXJzLm9uRW5hYmxlLFxuICAgICAgICAgIG9uRGlzYWJsZSA9IHZhcnMub25EaXNhYmxlLFxuICAgICAgICAgIG9uQ2xpY2sgPSB2YXJzLm9uQ2xpY2ssXG4gICAgICAgICAgc2Nyb2xsU3BlZWQgPSB2YXJzLnNjcm9sbFNwZWVkLFxuICAgICAgICAgIGNhcHR1cmUgPSB2YXJzLmNhcHR1cmUsXG4gICAgICAgICAgYWxsb3dDbGlja3MgPSB2YXJzLmFsbG93Q2xpY2tzLFxuICAgICAgICAgIGxvY2tBeGlzID0gdmFycy5sb2NrQXhpcyxcbiAgICAgICAgICBvbkxvY2tBeGlzID0gdmFycy5vbkxvY2tBeGlzO1xuICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQgPSBfZ2V0VGFyZ2V0KHRhcmdldCkgfHwgX2RvY0VsO1xuICAgICAgdGhpcy52YXJzID0gdmFycztcbiAgICAgIGlnbm9yZSAmJiAoaWdub3JlID0gZ3NhcC51dGlscy50b0FycmF5KGlnbm9yZSkpO1xuICAgICAgdG9sZXJhbmNlID0gdG9sZXJhbmNlIHx8IDFlLTk7XG4gICAgICBkcmFnTWluaW11bSA9IGRyYWdNaW5pbXVtIHx8IDA7XG4gICAgICB3aGVlbFNwZWVkID0gd2hlZWxTcGVlZCB8fCAxO1xuICAgICAgc2Nyb2xsU3BlZWQgPSBzY3JvbGxTcGVlZCB8fCAxO1xuICAgICAgdHlwZSA9IHR5cGUgfHwgXCJ3aGVlbCx0b3VjaCxwb2ludGVyXCI7XG4gICAgICBkZWJvdW5jZSA9IGRlYm91bmNlICE9PSBmYWxzZTtcbiAgICAgIGxpbmVIZWlnaHQgfHwgKGxpbmVIZWlnaHQgPSBwYXJzZUZsb2F0KF93aW4uZ2V0Q29tcHV0ZWRTdHlsZShfYm9keSkubGluZUhlaWdodCkgfHwgMjIpO1xuXG4gICAgICB2YXIgaWQsXG4gICAgICAgICAgb25TdG9wRGVsYXllZENhbGwsXG4gICAgICAgICAgZHJhZ2dlZCxcbiAgICAgICAgICBtb3ZlZCxcbiAgICAgICAgICB3aGVlbGVkLFxuICAgICAgICAgIGxvY2tlZCxcbiAgICAgICAgICBheGlzLFxuICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIHByZXZEZWx0YVggPSAwLFxuICAgICAgICAgIHByZXZEZWx0YVkgPSAwLFxuICAgICAgICAgIHBhc3NpdmUgPSB2YXJzLnBhc3NpdmUgfHwgIXByZXZlbnREZWZhdWx0LFxuICAgICAgICAgIHNjcm9sbEZ1bmNYID0gX2dldFNjcm9sbEZ1bmModGFyZ2V0LCBfaG9yaXpvbnRhbCksXG4gICAgICAgICAgc2Nyb2xsRnVuY1kgPSBfZ2V0U2Nyb2xsRnVuYyh0YXJnZXQsIF92ZXJ0aWNhbCksXG4gICAgICAgICAgc2Nyb2xsWCA9IHNjcm9sbEZ1bmNYKCksXG4gICAgICAgICAgc2Nyb2xsWSA9IHNjcm9sbEZ1bmNZKCksXG4gICAgICAgICAgbGltaXRUb1RvdWNoID0gfnR5cGUuaW5kZXhPZihcInRvdWNoXCIpICYmICF+dHlwZS5pbmRleE9mKFwicG9pbnRlclwiKSAmJiBfZXZlbnRUeXBlc1swXSA9PT0gXCJwb2ludGVyZG93blwiLFxuICAgICAgICAgIGlzVmlld3BvcnQgPSBfaXNWaWV3cG9ydCh0YXJnZXQpLFxuICAgICAgICAgIG93bmVyRG9jID0gdGFyZ2V0Lm93bmVyRG9jdW1lbnQgfHwgX2RvYyxcbiAgICAgICAgICBkZWx0YVggPSBbMCwgMCwgMF0sXG4gICAgICAgICAgZGVsdGFZID0gWzAsIDAsIDBdLFxuICAgICAgICAgIG9uQ2xpY2tUaW1lID0gMCxcbiAgICAgICAgICBjbGlja0NhcHR1cmUgPSBmdW5jdGlvbiBjbGlja0NhcHR1cmUoKSB7XG4gICAgICAgIHJldHVybiBvbkNsaWNrVGltZSA9IF9nZXRUaW1lKCk7XG4gICAgICB9LFxuICAgICAgICAgIF9pZ25vcmVDaGVjayA9IGZ1bmN0aW9uIF9pZ25vcmVDaGVjayhlLCBpc1BvaW50ZXJPclRvdWNoKSB7XG4gICAgICAgIHJldHVybiAoc2VsZi5ldmVudCA9IGUpICYmIGlnbm9yZSAmJiB+aWdub3JlLmluZGV4T2YoZS50YXJnZXQpIHx8IGlzUG9pbnRlck9yVG91Y2ggJiYgbGltaXRUb1RvdWNoICYmIGUucG9pbnRlclR5cGUgIT09IFwidG91Y2hcIiB8fCBpZ25vcmVDaGVjayAmJiBpZ25vcmVDaGVjayhlLCBpc1BvaW50ZXJPclRvdWNoKTtcbiAgICAgIH0sXG4gICAgICAgICAgb25TdG9wRnVuYyA9IGZ1bmN0aW9uIG9uU3RvcEZ1bmMoKSB7XG4gICAgICAgIHNlbGYuX3Z4LnJlc2V0KCk7XG5cbiAgICAgICAgc2VsZi5fdnkucmVzZXQoKTtcblxuICAgICAgICBvblN0b3BEZWxheWVkQ2FsbC5wYXVzZSgpO1xuICAgICAgICBvblN0b3AgJiYgb25TdG9wKHNlbGYpO1xuICAgICAgfSxcbiAgICAgICAgICB1cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgIHZhciBkeCA9IHNlbGYuZGVsdGFYID0gX2dldEFic29sdXRlTWF4KGRlbHRhWCksXG4gICAgICAgICAgICBkeSA9IHNlbGYuZGVsdGFZID0gX2dldEFic29sdXRlTWF4KGRlbHRhWSksXG4gICAgICAgICAgICBjaGFuZ2VkWCA9IE1hdGguYWJzKGR4KSA+PSB0b2xlcmFuY2UsXG4gICAgICAgICAgICBjaGFuZ2VkWSA9IE1hdGguYWJzKGR5KSA+PSB0b2xlcmFuY2U7XG5cbiAgICAgICAgb25DaGFuZ2UgJiYgKGNoYW5nZWRYIHx8IGNoYW5nZWRZKSAmJiBvbkNoYW5nZShzZWxmLCBkeCwgZHksIGRlbHRhWCwgZGVsdGFZKTtcblxuICAgICAgICBpZiAoY2hhbmdlZFgpIHtcbiAgICAgICAgICBvblJpZ2h0ICYmIHNlbGYuZGVsdGFYID4gMCAmJiBvblJpZ2h0KHNlbGYpO1xuICAgICAgICAgIG9uTGVmdCAmJiBzZWxmLmRlbHRhWCA8IDAgJiYgb25MZWZ0KHNlbGYpO1xuICAgICAgICAgIG9uQ2hhbmdlWCAmJiBvbkNoYW5nZVgoc2VsZik7XG4gICAgICAgICAgb25Ub2dnbGVYICYmIHNlbGYuZGVsdGFYIDwgMCAhPT0gcHJldkRlbHRhWCA8IDAgJiYgb25Ub2dnbGVYKHNlbGYpO1xuICAgICAgICAgIHByZXZEZWx0YVggPSBzZWxmLmRlbHRhWDtcbiAgICAgICAgICBkZWx0YVhbMF0gPSBkZWx0YVhbMV0gPSBkZWx0YVhbMl0gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZWRZKSB7XG4gICAgICAgICAgb25Eb3duICYmIHNlbGYuZGVsdGFZID4gMCAmJiBvbkRvd24oc2VsZik7XG4gICAgICAgICAgb25VcCAmJiBzZWxmLmRlbHRhWSA8IDAgJiYgb25VcChzZWxmKTtcbiAgICAgICAgICBvbkNoYW5nZVkgJiYgb25DaGFuZ2VZKHNlbGYpO1xuICAgICAgICAgIG9uVG9nZ2xlWSAmJiBzZWxmLmRlbHRhWSA8IDAgIT09IHByZXZEZWx0YVkgPCAwICYmIG9uVG9nZ2xlWShzZWxmKTtcbiAgICAgICAgICBwcmV2RGVsdGFZID0gc2VsZi5kZWx0YVk7XG4gICAgICAgICAgZGVsdGFZWzBdID0gZGVsdGFZWzFdID0gZGVsdGFZWzJdID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb3ZlZCB8fCBkcmFnZ2VkKSB7XG4gICAgICAgICAgb25Nb3ZlICYmIG9uTW92ZShzZWxmKTtcblxuICAgICAgICAgIGlmIChkcmFnZ2VkKSB7XG4gICAgICAgICAgICBvbkRyYWcoc2VsZik7XG4gICAgICAgICAgICBkcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvY2tlZCAmJiAhKGxvY2tlZCA9IGZhbHNlKSAmJiBvbkxvY2tBeGlzICYmIG9uTG9ja0F4aXMoc2VsZik7XG5cbiAgICAgICAgaWYgKHdoZWVsZWQpIHtcbiAgICAgICAgICBvbldoZWVsKHNlbGYpO1xuICAgICAgICAgIHdoZWVsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlkID0gMDtcbiAgICAgIH0sXG4gICAgICAgICAgb25EZWx0YSA9IGZ1bmN0aW9uIG9uRGVsdGEoeCwgeSwgaW5kZXgpIHtcbiAgICAgICAgZGVsdGFYW2luZGV4XSArPSB4O1xuICAgICAgICBkZWx0YVlbaW5kZXhdICs9IHk7XG5cbiAgICAgICAgc2VsZi5fdngudXBkYXRlKHgpO1xuXG4gICAgICAgIHNlbGYuX3Z5LnVwZGF0ZSh5KTtcblxuICAgICAgICBkZWJvdW5jZSA/IGlkIHx8IChpZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpKSA6IHVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgICAgICBvblRvdWNoT3JQb2ludGVyRGVsdGEgPSBmdW5jdGlvbiBvblRvdWNoT3JQb2ludGVyRGVsdGEoeCwgeSkge1xuICAgICAgICBpZiAobG9ja0F4aXMgJiYgIWF4aXMpIHtcbiAgICAgICAgICBzZWxmLmF4aXMgPSBheGlzID0gTWF0aC5hYnMoeCkgPiBNYXRoLmFicyh5KSA/IFwieFwiIDogXCJ5XCI7XG4gICAgICAgICAgbG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChheGlzICE9PSBcInlcIikge1xuICAgICAgICAgIGRlbHRhWFsyXSArPSB4O1xuXG4gICAgICAgICAgc2VsZi5fdngudXBkYXRlKHgsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF4aXMgIT09IFwieFwiKSB7XG4gICAgICAgICAgZGVsdGFZWzJdICs9IHk7XG5cbiAgICAgICAgICBzZWxmLl92eS51cGRhdGUoeSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBkZWJvdW5jZSA/IGlkIHx8IChpZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpKSA6IHVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgICAgICBfb25EcmFnID0gZnVuY3Rpb24gX29uRHJhZyhlKSB7XG4gICAgICAgIGlmIChfaWdub3JlQ2hlY2soZSwgMSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlID0gX2dldEV2ZW50KGUsIHByZXZlbnREZWZhdWx0KTtcbiAgICAgICAgdmFyIHggPSBlLmNsaWVudFgsXG4gICAgICAgICAgICB5ID0gZS5jbGllbnRZLFxuICAgICAgICAgICAgZHggPSB4IC0gc2VsZi54LFxuICAgICAgICAgICAgZHkgPSB5IC0gc2VsZi55LFxuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHNlbGYuaXNEcmFnZ2luZztcbiAgICAgICAgc2VsZi54ID0geDtcbiAgICAgICAgc2VsZi55ID0geTtcblxuICAgICAgICBpZiAoaXNEcmFnZ2luZyB8fCBNYXRoLmFicyhzZWxmLnN0YXJ0WCAtIHgpID49IGRyYWdNaW5pbXVtIHx8IE1hdGguYWJzKHNlbGYuc3RhcnRZIC0geSkgPj0gZHJhZ01pbmltdW0pIHtcbiAgICAgICAgICBvbkRyYWcgJiYgKGRyYWdnZWQgPSB0cnVlKTtcbiAgICAgICAgICBpc0RyYWdnaW5nIHx8IChzZWxmLmlzRHJhZ2dpbmcgPSB0cnVlKTtcbiAgICAgICAgICBvblRvdWNoT3JQb2ludGVyRGVsdGEoZHgsIGR5KTtcbiAgICAgICAgICBpc0RyYWdnaW5nIHx8IG9uRHJhZ1N0YXJ0ICYmIG9uRHJhZ1N0YXJ0KHNlbGYpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgICAgIF9vblByZXNzID0gc2VsZi5vblByZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKF9pZ25vcmVDaGVjayhlLCAxKSB8fCBlICYmIGUuYnV0dG9uKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5heGlzID0gYXhpcyA9IG51bGw7XG4gICAgICAgIG9uU3RvcERlbGF5ZWRDYWxsLnBhdXNlKCk7XG4gICAgICAgIHNlbGYuaXNQcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgZSA9IF9nZXRFdmVudChlKTtcbiAgICAgICAgcHJldkRlbHRhWCA9IHByZXZEZWx0YVkgPSAwO1xuICAgICAgICBzZWxmLnN0YXJ0WCA9IHNlbGYueCA9IGUuY2xpZW50WDtcbiAgICAgICAgc2VsZi5zdGFydFkgPSBzZWxmLnkgPSBlLmNsaWVudFk7XG5cbiAgICAgICAgc2VsZi5fdngucmVzZXQoKTtcblxuICAgICAgICBzZWxmLl92eS5yZXNldCgpO1xuXG4gICAgICAgIF9hZGRMaXN0ZW5lcihpc05vcm1hbGl6ZXIgPyB0YXJnZXQgOiBvd25lckRvYywgX2V2ZW50VHlwZXNbMV0sIF9vbkRyYWcsIHBhc3NpdmUsIHRydWUpO1xuXG4gICAgICAgIHNlbGYuZGVsdGFYID0gc2VsZi5kZWx0YVkgPSAwO1xuICAgICAgICBvblByZXNzICYmIG9uUHJlc3Moc2VsZik7XG4gICAgICB9LFxuICAgICAgICAgIF9vblJlbGVhc2UgPSBzZWxmLm9uUmVsZWFzZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChfaWdub3JlQ2hlY2soZSwgMSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBfcmVtb3ZlTGlzdGVuZXIoaXNOb3JtYWxpemVyID8gdGFyZ2V0IDogb3duZXJEb2MsIF9ldmVudFR5cGVzWzFdLCBfb25EcmFnLCB0cnVlKTtcblxuICAgICAgICB2YXIgaXNUcmFja2luZ0RyYWcgPSAhaXNOYU4oc2VsZi55IC0gc2VsZi5zdGFydFkpLFxuICAgICAgICAgICAgd2FzRHJhZ2dpbmcgPSBzZWxmLmlzRHJhZ2dpbmcsXG4gICAgICAgICAgICBpc0RyYWdOb3RDbGljayA9IHdhc0RyYWdnaW5nICYmIChNYXRoLmFicyhzZWxmLnggLSBzZWxmLnN0YXJ0WCkgPiAzIHx8IE1hdGguYWJzKHNlbGYueSAtIHNlbGYuc3RhcnRZKSA+IDMpLFxuICAgICAgICAgICAgZXZlbnREYXRhID0gX2dldEV2ZW50KGUpO1xuXG4gICAgICAgIGlmICghaXNEcmFnTm90Q2xpY2sgJiYgaXNUcmFja2luZ0RyYWcpIHtcbiAgICAgICAgICBzZWxmLl92eC5yZXNldCgpO1xuXG4gICAgICAgICAgc2VsZi5fdnkucmVzZXQoKTtcblxuICAgICAgICAgIGlmIChwcmV2ZW50RGVmYXVsdCAmJiBhbGxvd0NsaWNrcykge1xuICAgICAgICAgICAgZ3NhcC5kZWxheWVkQ2FsbCgwLjA4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmIChfZ2V0VGltZSgpIC0gb25DbGlja1RpbWUgPiAzMDAgJiYgIWUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGljaykge1xuICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG93bmVyRG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICB2YXIgc3ludGhldGljRXZlbnQgPSBvd25lckRvYy5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO1xuICAgICAgICAgICAgICAgICAgc3ludGhldGljRXZlbnQuaW5pdE1vdXNlRXZlbnQoXCJjbGlja1wiLCB0cnVlLCB0cnVlLCBfd2luLCAxLCBldmVudERhdGEuc2NyZWVuWCwgZXZlbnREYXRhLnNjcmVlblksIGV2ZW50RGF0YS5jbGllbnRYLCBldmVudERhdGEuY2xpZW50WSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgZS50YXJnZXQuZGlzcGF0Y2hFdmVudChzeW50aGV0aWNFdmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlzRHJhZ2dpbmcgPSBzZWxmLmlzR2VzdHVyaW5nID0gc2VsZi5pc1ByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgb25TdG9wICYmIHdhc0RyYWdnaW5nICYmICFpc05vcm1hbGl6ZXIgJiYgb25TdG9wRGVsYXllZENhbGwucmVzdGFydCh0cnVlKTtcbiAgICAgICAgb25EcmFnRW5kICYmIHdhc0RyYWdnaW5nICYmIG9uRHJhZ0VuZChzZWxmKTtcbiAgICAgICAgb25SZWxlYXNlICYmIG9uUmVsZWFzZShzZWxmLCBpc0RyYWdOb3RDbGljayk7XG4gICAgICB9LFxuICAgICAgICAgIF9vbkdlc3R1cmVTdGFydCA9IGZ1bmN0aW9uIF9vbkdlc3R1cmVTdGFydChlKSB7XG4gICAgICAgIHJldHVybiBlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEgJiYgKHNlbGYuaXNHZXN0dXJpbmcgPSB0cnVlKSAmJiBvbkdlc3R1cmVTdGFydChlLCBzZWxmLmlzRHJhZ2dpbmcpO1xuICAgICAgfSxcbiAgICAgICAgICBfb25HZXN0dXJlRW5kID0gZnVuY3Rpb24gX29uR2VzdHVyZUVuZCgpIHtcbiAgICAgICAgcmV0dXJuIChzZWxmLmlzR2VzdHVyaW5nID0gZmFsc2UpIHx8IG9uR2VzdHVyZUVuZChzZWxmKTtcbiAgICAgIH0sXG4gICAgICAgICAgb25TY3JvbGwgPSBmdW5jdGlvbiBvblNjcm9sbChlKSB7XG4gICAgICAgIGlmIChfaWdub3JlQ2hlY2soZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgeCA9IHNjcm9sbEZ1bmNYKCksXG4gICAgICAgICAgICB5ID0gc2Nyb2xsRnVuY1koKTtcbiAgICAgICAgb25EZWx0YSgoeCAtIHNjcm9sbFgpICogc2Nyb2xsU3BlZWQsICh5IC0gc2Nyb2xsWSkgKiBzY3JvbGxTcGVlZCwgMSk7XG4gICAgICAgIHNjcm9sbFggPSB4O1xuICAgICAgICBzY3JvbGxZID0geTtcbiAgICAgICAgb25TdG9wICYmIG9uU3RvcERlbGF5ZWRDYWxsLnJlc3RhcnQodHJ1ZSk7XG4gICAgICB9LFxuICAgICAgICAgIF9vbldoZWVsID0gZnVuY3Rpb24gX29uV2hlZWwoZSkge1xuICAgICAgICBpZiAoX2lnbm9yZUNoZWNrKGUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZSA9IF9nZXRFdmVudChlLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgICAgIG9uV2hlZWwgJiYgKHdoZWVsZWQgPSB0cnVlKTtcbiAgICAgICAgdmFyIG11bHRpcGxpZXIgPSAoZS5kZWx0YU1vZGUgPT09IDEgPyBsaW5lSGVpZ2h0IDogZS5kZWx0YU1vZGUgPT09IDIgPyBfd2luLmlubmVySGVpZ2h0IDogMSkgKiB3aGVlbFNwZWVkO1xuICAgICAgICBvbkRlbHRhKGUuZGVsdGFYICogbXVsdGlwbGllciwgZS5kZWx0YVkgKiBtdWx0aXBsaWVyLCAwKTtcbiAgICAgICAgb25TdG9wICYmICFpc05vcm1hbGl6ZXIgJiYgb25TdG9wRGVsYXllZENhbGwucmVzdGFydCh0cnVlKTtcbiAgICAgIH0sXG4gICAgICAgICAgX29uTW92ZSA9IGZ1bmN0aW9uIF9vbk1vdmUoZSkge1xuICAgICAgICBpZiAoX2lnbm9yZUNoZWNrKGUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHggPSBlLmNsaWVudFgsXG4gICAgICAgICAgICB5ID0gZS5jbGllbnRZLFxuICAgICAgICAgICAgZHggPSB4IC0gc2VsZi54LFxuICAgICAgICAgICAgZHkgPSB5IC0gc2VsZi55O1xuICAgICAgICBzZWxmLnggPSB4O1xuICAgICAgICBzZWxmLnkgPSB5O1xuICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgIG9uU3RvcCAmJiBvblN0b3BEZWxheWVkQ2FsbC5yZXN0YXJ0KHRydWUpO1xuICAgICAgICAoZHggfHwgZHkpICYmIG9uVG91Y2hPclBvaW50ZXJEZWx0YShkeCwgZHkpO1xuICAgICAgfSxcbiAgICAgICAgICBfb25Ib3ZlciA9IGZ1bmN0aW9uIF9vbkhvdmVyKGUpIHtcbiAgICAgICAgc2VsZi5ldmVudCA9IGU7XG4gICAgICAgIG9uSG92ZXIoc2VsZik7XG4gICAgICB9LFxuICAgICAgICAgIF9vbkhvdmVyRW5kID0gZnVuY3Rpb24gX29uSG92ZXJFbmQoZSkge1xuICAgICAgICBzZWxmLmV2ZW50ID0gZTtcbiAgICAgICAgb25Ib3ZlckVuZChzZWxmKTtcbiAgICAgIH0sXG4gICAgICAgICAgX29uQ2xpY2sgPSBmdW5jdGlvbiBfb25DbGljayhlKSB7XG4gICAgICAgIHJldHVybiBfaWdub3JlQ2hlY2soZSkgfHwgX2dldEV2ZW50KGUsIHByZXZlbnREZWZhdWx0KSAmJiBvbkNsaWNrKHNlbGYpO1xuICAgICAgfTtcblxuICAgICAgb25TdG9wRGVsYXllZENhbGwgPSBzZWxmLl9kYyA9IGdzYXAuZGVsYXllZENhbGwob25TdG9wRGVsYXkgfHwgMC4yNSwgb25TdG9wRnVuYykucGF1c2UoKTtcbiAgICAgIHNlbGYuZGVsdGFYID0gc2VsZi5kZWx0YVkgPSAwO1xuICAgICAgc2VsZi5fdnggPSBfZ2V0VmVsb2NpdHlQcm9wKDAsIDUwLCB0cnVlKTtcbiAgICAgIHNlbGYuX3Z5ID0gX2dldFZlbG9jaXR5UHJvcCgwLCA1MCwgdHJ1ZSk7XG4gICAgICBzZWxmLnNjcm9sbFggPSBzY3JvbGxGdW5jWDtcbiAgICAgIHNlbGYuc2Nyb2xsWSA9IHNjcm9sbEZ1bmNZO1xuICAgICAgc2VsZi5pc0RyYWdnaW5nID0gc2VsZi5pc0dlc3R1cmluZyA9IHNlbGYuaXNQcmVzc2VkID0gZmFsc2U7XG5cbiAgICAgIF9jb250ZXh0KHRoaXMpO1xuXG4gICAgICBzZWxmLmVuYWJsZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghc2VsZi5pc0VuYWJsZWQpIHtcbiAgICAgICAgICBfYWRkTGlzdGVuZXIoaXNWaWV3cG9ydCA/IG93bmVyRG9jIDogdGFyZ2V0LCBcInNjcm9sbFwiLCBfb25TY3JvbGwpO1xuXG4gICAgICAgICAgdHlwZS5pbmRleE9mKFwic2Nyb2xsXCIpID49IDAgJiYgX2FkZExpc3RlbmVyKGlzVmlld3BvcnQgPyBvd25lckRvYyA6IHRhcmdldCwgXCJzY3JvbGxcIiwgb25TY3JvbGwsIHBhc3NpdmUsIGNhcHR1cmUpO1xuICAgICAgICAgIHR5cGUuaW5kZXhPZihcIndoZWVsXCIpID49IDAgJiYgX2FkZExpc3RlbmVyKHRhcmdldCwgXCJ3aGVlbFwiLCBfb25XaGVlbCwgcGFzc2l2ZSwgY2FwdHVyZSk7XG5cbiAgICAgICAgICBpZiAodHlwZS5pbmRleE9mKFwidG91Y2hcIikgPj0gMCAmJiBfaXNUb3VjaCB8fCB0eXBlLmluZGV4T2YoXCJwb2ludGVyXCIpID49IDApIHtcbiAgICAgICAgICAgIF9hZGRMaXN0ZW5lcih0YXJnZXQsIF9ldmVudFR5cGVzWzBdLCBfb25QcmVzcywgcGFzc2l2ZSwgY2FwdHVyZSk7XG5cbiAgICAgICAgICAgIF9hZGRMaXN0ZW5lcihvd25lckRvYywgX2V2ZW50VHlwZXNbMl0sIF9vblJlbGVhc2UpO1xuXG4gICAgICAgICAgICBfYWRkTGlzdGVuZXIob3duZXJEb2MsIF9ldmVudFR5cGVzWzNdLCBfb25SZWxlYXNlKTtcblxuICAgICAgICAgICAgYWxsb3dDbGlja3MgJiYgX2FkZExpc3RlbmVyKHRhcmdldCwgXCJjbGlja1wiLCBjbGlja0NhcHR1cmUsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgb25DbGljayAmJiBfYWRkTGlzdGVuZXIodGFyZ2V0LCBcImNsaWNrXCIsIF9vbkNsaWNrKTtcbiAgICAgICAgICAgIG9uR2VzdHVyZVN0YXJ0ICYmIF9hZGRMaXN0ZW5lcihvd25lckRvYywgXCJnZXN0dXJlc3RhcnRcIiwgX29uR2VzdHVyZVN0YXJ0KTtcbiAgICAgICAgICAgIG9uR2VzdHVyZUVuZCAmJiBfYWRkTGlzdGVuZXIob3duZXJEb2MsIFwiZ2VzdHVyZWVuZFwiLCBfb25HZXN0dXJlRW5kKTtcbiAgICAgICAgICAgIG9uSG92ZXIgJiYgX2FkZExpc3RlbmVyKHRhcmdldCwgX3BvaW50ZXJUeXBlICsgXCJlbnRlclwiLCBfb25Ib3Zlcik7XG4gICAgICAgICAgICBvbkhvdmVyRW5kICYmIF9hZGRMaXN0ZW5lcih0YXJnZXQsIF9wb2ludGVyVHlwZSArIFwibGVhdmVcIiwgX29uSG92ZXJFbmQpO1xuICAgICAgICAgICAgb25Nb3ZlICYmIF9hZGRMaXN0ZW5lcih0YXJnZXQsIF9wb2ludGVyVHlwZSArIFwibW92ZVwiLCBfb25Nb3ZlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLmlzRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgZSAmJiBlLnR5cGUgJiYgX29uUHJlc3MoZSk7XG4gICAgICAgICAgb25FbmFibGUgJiYgb25FbmFibGUoc2VsZik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNFbmFibGVkKSB7XG4gICAgICAgICAgX29ic2VydmVycy5maWx0ZXIoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgIHJldHVybiBvICE9PSBzZWxmICYmIF9pc1ZpZXdwb3J0KG8udGFyZ2V0KTtcbiAgICAgICAgICB9KS5sZW5ndGggfHwgX3JlbW92ZUxpc3RlbmVyKGlzVmlld3BvcnQgPyBvd25lckRvYyA6IHRhcmdldCwgXCJzY3JvbGxcIiwgX29uU2Nyb2xsKTtcblxuICAgICAgICAgIGlmIChzZWxmLmlzUHJlc3NlZCkge1xuICAgICAgICAgICAgc2VsZi5fdngucmVzZXQoKTtcblxuICAgICAgICAgICAgc2VsZi5fdnkucmVzZXQoKTtcblxuICAgICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKGlzTm9ybWFsaXplciA/IHRhcmdldCA6IG93bmVyRG9jLCBfZXZlbnRUeXBlc1sxXSwgX29uRHJhZywgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKGlzVmlld3BvcnQgPyBvd25lckRvYyA6IHRhcmdldCwgXCJzY3JvbGxcIiwgb25TY3JvbGwsIGNhcHR1cmUpO1xuXG4gICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKHRhcmdldCwgXCJ3aGVlbFwiLCBfb25XaGVlbCwgY2FwdHVyZSk7XG5cbiAgICAgICAgICBfcmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBfZXZlbnRUeXBlc1swXSwgX29uUHJlc3MsIGNhcHR1cmUpO1xuXG4gICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKG93bmVyRG9jLCBfZXZlbnRUeXBlc1syXSwgX29uUmVsZWFzZSk7XG5cbiAgICAgICAgICBfcmVtb3ZlTGlzdGVuZXIob3duZXJEb2MsIF9ldmVudFR5cGVzWzNdLCBfb25SZWxlYXNlKTtcblxuICAgICAgICAgIF9yZW1vdmVMaXN0ZW5lcih0YXJnZXQsIFwiY2xpY2tcIiwgY2xpY2tDYXB0dXJlLCB0cnVlKTtcblxuICAgICAgICAgIF9yZW1vdmVMaXN0ZW5lcih0YXJnZXQsIFwiY2xpY2tcIiwgX29uQ2xpY2spO1xuXG4gICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKG93bmVyRG9jLCBcImdlc3R1cmVzdGFydFwiLCBfb25HZXN0dXJlU3RhcnQpO1xuXG4gICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKG93bmVyRG9jLCBcImdlc3R1cmVlbmRcIiwgX29uR2VzdHVyZUVuZCk7XG5cbiAgICAgICAgICBfcmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBfcG9pbnRlclR5cGUgKyBcImVudGVyXCIsIF9vbkhvdmVyKTtcblxuICAgICAgICAgIF9yZW1vdmVMaXN0ZW5lcih0YXJnZXQsIF9wb2ludGVyVHlwZSArIFwibGVhdmVcIiwgX29uSG92ZXJFbmQpO1xuXG4gICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKHRhcmdldCwgX3BvaW50ZXJUeXBlICsgXCJtb3ZlXCIsIF9vbk1vdmUpO1xuXG4gICAgICAgICAgc2VsZi5pc0VuYWJsZWQgPSBzZWxmLmlzUHJlc3NlZCA9IHNlbGYuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgIG9uRGlzYWJsZSAmJiBvbkRpc2FibGUoc2VsZik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYua2lsbCA9IHNlbGYucmV2ZXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmRpc2FibGUoKTtcblxuICAgICAgICB2YXIgaSA9IF9vYnNlcnZlcnMuaW5kZXhPZihzZWxmKTtcblxuICAgICAgICBpID49IDAgJiYgX29ic2VydmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIF9ub3JtYWxpemVyID09PSBzZWxmICYmIChfbm9ybWFsaXplciA9IDApO1xuICAgICAgfTtcblxuICAgICAgX29ic2VydmVycy5wdXNoKHNlbGYpO1xuXG4gICAgICBpc05vcm1hbGl6ZXIgJiYgX2lzVmlld3BvcnQodGFyZ2V0KSAmJiAoX25vcm1hbGl6ZXIgPSBzZWxmKTtcbiAgICAgIHNlbGYuZW5hYmxlKGV2ZW50KTtcbiAgICB9O1xuXG4gICAgX2NyZWF0ZUNsYXNzKE9ic2VydmVyLCBbe1xuICAgICAga2V5OiBcInZlbG9jaXR5WFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92eC5nZXRWZWxvY2l0eSgpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ2ZWxvY2l0eVlcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdnkuZ2V0VmVsb2NpdHkoKTtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gT2JzZXJ2ZXI7XG4gIH0oKTtcbiAgT2JzZXJ2ZXIudmVyc2lvbiA9IFwiMy4xMi41XCI7XG5cbiAgT2JzZXJ2ZXIuY3JlYXRlID0gZnVuY3Rpb24gKHZhcnMpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmVyKHZhcnMpO1xuICB9O1xuXG4gIE9ic2VydmVyLnJlZ2lzdGVyID0gX2luaXRDb3JlO1xuXG4gIE9ic2VydmVyLmdldEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX29ic2VydmVycy5zbGljZSgpO1xuICB9O1xuXG4gIE9ic2VydmVyLmdldEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICByZXR1cm4gX29ic2VydmVycy5maWx0ZXIoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvLnZhcnMuaWQgPT09IGlkO1xuICAgIH0pWzBdO1xuICB9O1xuXG4gIF9nZXRHU0FQKCkgJiYgZ3NhcC5yZWdpc3RlclBsdWdpbihPYnNlcnZlcik7XG5cbiAgLyohXG4gICAqIFNjcm9sbFRyaWdnZXIgMy4xMi41XG4gICAqIGh0dHBzOi8vZ3NhcC5jb21cbiAgICpcbiAgICogQGxpY2Vuc2UgQ29weXJpZ2h0IDIwMDgtMjAyNCwgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICAgKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dzYXAuY29tL3N0YW5kYXJkLWxpY2Vuc2Ugb3IgZm9yXG4gICAqIENsdWIgR1NBUCBtZW1iZXJzLCB0aGUgYWdyZWVtZW50IGlzc3VlZCB3aXRoIHRoYXQgbWVtYmVyc2hpcC5cbiAgICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG4gICovXG5cbiAgdmFyIGdzYXAkMSxcbiAgICAgIF9jb3JlSW5pdHRlZCQxLFxuICAgICAgX3dpbiQxLFxuICAgICAgX2RvYyQxLFxuICAgICAgX2RvY0VsJDEsXG4gICAgICBfYm9keSQxLFxuICAgICAgX3Jvb3QkMSxcbiAgICAgIF9yZXNpemVEZWxheSxcbiAgICAgIF90b0FycmF5LFxuICAgICAgX2NsYW1wJDEsXG4gICAgICBfdGltZTIsXG4gICAgICBfc3luY0ludGVydmFsLFxuICAgICAgX3JlZnJlc2hpbmcsXG4gICAgICBfcG9pbnRlcklzRG93bixcbiAgICAgIF90cmFuc2Zvcm1Qcm9wLFxuICAgICAgX2ksXG4gICAgICBfcHJldldpZHRoLFxuICAgICAgX3ByZXZIZWlnaHQsXG4gICAgICBfYXV0b1JlZnJlc2gsXG4gICAgICBfc29ydCxcbiAgICAgIF9zdXBwcmVzc092ZXJ3cml0ZXMsXG4gICAgICBfaWdub3JlUmVzaXplLFxuICAgICAgX25vcm1hbGl6ZXIkMSxcbiAgICAgIF9pZ25vcmVNb2JpbGVSZXNpemUsXG4gICAgICBfYmFzZVNjcmVlbkhlaWdodCxcbiAgICAgIF9iYXNlU2NyZWVuV2lkdGgsXG4gICAgICBfZml4SU9TQnVnLFxuICAgICAgX2NvbnRleHQkMSxcbiAgICAgIF9zY3JvbGxSZXN0b3JhdGlvbixcbiAgICAgIF9kaXYxMDB2aCxcbiAgICAgIF8xMDB2aCxcbiAgICAgIF9pc1JldmVydGVkLFxuICAgICAgX2NsYW1waW5nTWF4LFxuICAgICAgX2xpbWl0Q2FsbGJhY2tzLFxuICAgICAgX3N0YXJ0dXAkMSA9IDEsXG4gICAgICBfZ2V0VGltZSQxID0gRGF0ZS5ub3csXG4gICAgICBfdGltZTEgPSBfZ2V0VGltZSQxKCksXG4gICAgICBfbGFzdFNjcm9sbFRpbWUgPSAwLFxuICAgICAgX2VuYWJsZWQgPSAwLFxuICAgICAgX3BhcnNlQ2xhbXAgPSBmdW5jdGlvbiBfcGFyc2VDbGFtcCh2YWx1ZSwgdHlwZSwgc2VsZikge1xuICAgIHZhciBjbGFtcCA9IF9pc1N0cmluZyh2YWx1ZSkgJiYgKHZhbHVlLnN1YnN0cigwLCA2KSA9PT0gXCJjbGFtcChcIiB8fCB2YWx1ZS5pbmRleE9mKFwibWF4XCIpID4gLTEpO1xuICAgIHNlbGZbXCJfXCIgKyB0eXBlICsgXCJDbGFtcFwiXSA9IGNsYW1wO1xuICAgIHJldHVybiBjbGFtcCA/IHZhbHVlLnN1YnN0cig2LCB2YWx1ZS5sZW5ndGggLSA3KSA6IHZhbHVlO1xuICB9LFxuICAgICAgX2tlZXBDbGFtcCA9IGZ1bmN0aW9uIF9rZWVwQ2xhbXAodmFsdWUsIGNsYW1wKSB7XG4gICAgcmV0dXJuIGNsYW1wICYmICghX2lzU3RyaW5nKHZhbHVlKSB8fCB2YWx1ZS5zdWJzdHIoMCwgNikgIT09IFwiY2xhbXAoXCIpID8gXCJjbGFtcChcIiArIHZhbHVlICsgXCIpXCIgOiB2YWx1ZTtcbiAgfSxcbiAgICAgIF9yYWZCdWdGaXggPSBmdW5jdGlvbiBfcmFmQnVnRml4KCkge1xuICAgIHJldHVybiBfZW5hYmxlZCAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX3JhZkJ1Z0ZpeCk7XG4gIH0sXG4gICAgICBfcG9pbnRlckRvd25IYW5kbGVyID0gZnVuY3Rpb24gX3BvaW50ZXJEb3duSGFuZGxlcigpIHtcbiAgICByZXR1cm4gX3BvaW50ZXJJc0Rvd24gPSAxO1xuICB9LFxuICAgICAgX3BvaW50ZXJVcEhhbmRsZXIgPSBmdW5jdGlvbiBfcG9pbnRlclVwSGFuZGxlcigpIHtcbiAgICByZXR1cm4gX3BvaW50ZXJJc0Rvd24gPSAwO1xuICB9LFxuICAgICAgX3Bhc3NUaHJvdWdoID0gZnVuY3Rpb24gX3Bhc3NUaHJvdWdoKHYpIHtcbiAgICByZXR1cm4gdjtcbiAgfSxcbiAgICAgIF9yb3VuZCA9IGZ1bmN0aW9uIF9yb3VuZCh2YWx1ZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogMTAwMDAwKSAvIDEwMDAwMCB8fCAwO1xuICB9LFxuICAgICAgX3dpbmRvd0V4aXN0cyA9IGZ1bmN0aW9uIF93aW5kb3dFeGlzdHMoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG4gIH0sXG4gICAgICBfZ2V0R1NBUCQxID0gZnVuY3Rpb24gX2dldEdTQVAoKSB7XG4gICAgcmV0dXJuIGdzYXAkMSB8fCBfd2luZG93RXhpc3RzKCkgJiYgKGdzYXAkMSA9IHdpbmRvdy5nc2FwKSAmJiBnc2FwJDEucmVnaXN0ZXJQbHVnaW4gJiYgZ3NhcCQxO1xuICB9LFxuICAgICAgX2lzVmlld3BvcnQkMSA9IGZ1bmN0aW9uIF9pc1ZpZXdwb3J0KGUpIHtcbiAgICByZXR1cm4gISF+X3Jvb3QkMS5pbmRleE9mKGUpO1xuICB9LFxuICAgICAgX2dldFZpZXdwb3J0RGltZW5zaW9uID0gZnVuY3Rpb24gX2dldFZpZXdwb3J0RGltZW5zaW9uKGRpbWVuc2lvblByb3BlcnR5KSB7XG4gICAgcmV0dXJuIChkaW1lbnNpb25Qcm9wZXJ0eSA9PT0gXCJIZWlnaHRcIiA/IF8xMDB2aCA6IF93aW4kMVtcImlubmVyXCIgKyBkaW1lbnNpb25Qcm9wZXJ0eV0pIHx8IF9kb2NFbCQxW1wiY2xpZW50XCIgKyBkaW1lbnNpb25Qcm9wZXJ0eV0gfHwgX2JvZHkkMVtcImNsaWVudFwiICsgZGltZW5zaW9uUHJvcGVydHldO1xuICB9LFxuICAgICAgX2dldEJvdW5kc0Z1bmMgPSBmdW5jdGlvbiBfZ2V0Qm91bmRzRnVuYyhlbGVtZW50KSB7XG4gICAgcmV0dXJuIF9nZXRQcm94eVByb3AoZWxlbWVudCwgXCJnZXRCb3VuZGluZ0NsaWVudFJlY3RcIikgfHwgKF9pc1ZpZXdwb3J0JDEoZWxlbWVudCkgPyBmdW5jdGlvbiAoKSB7XG4gICAgICBfd2luT2Zmc2V0cy53aWR0aCA9IF93aW4kMS5pbm5lcldpZHRoO1xuICAgICAgX3dpbk9mZnNldHMuaGVpZ2h0ID0gXzEwMHZoO1xuICAgICAgcmV0dXJuIF93aW5PZmZzZXRzO1xuICAgIH0gOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX2dldEJvdW5kcyhlbGVtZW50KTtcbiAgICB9KTtcbiAgfSxcbiAgICAgIF9nZXRTaXplRnVuYyA9IGZ1bmN0aW9uIF9nZXRTaXplRnVuYyhzY3JvbGxlciwgaXNWaWV3cG9ydCwgX3JlZikge1xuICAgIHZhciBkID0gX3JlZi5kLFxuICAgICAgICBkMiA9IF9yZWYuZDIsXG4gICAgICAgIGEgPSBfcmVmLmE7XG4gICAgcmV0dXJuIChhID0gX2dldFByb3h5UHJvcChzY3JvbGxlciwgXCJnZXRCb3VuZGluZ0NsaWVudFJlY3RcIikpID8gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGEoKVtkXTtcbiAgICB9IDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIChpc1ZpZXdwb3J0ID8gX2dldFZpZXdwb3J0RGltZW5zaW9uKGQyKSA6IHNjcm9sbGVyW1wiY2xpZW50XCIgKyBkMl0pIHx8IDA7XG4gICAgfTtcbiAgfSxcbiAgICAgIF9nZXRPZmZzZXRzRnVuYyA9IGZ1bmN0aW9uIF9nZXRPZmZzZXRzRnVuYyhlbGVtZW50LCBpc1ZpZXdwb3J0KSB7XG4gICAgcmV0dXJuICFpc1ZpZXdwb3J0IHx8IH5fcHJveGllcy5pbmRleE9mKGVsZW1lbnQpID8gX2dldEJvdW5kc0Z1bmMoZWxlbWVudCkgOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3dpbk9mZnNldHM7XG4gICAgfTtcbiAgfSxcbiAgICAgIF9tYXhTY3JvbGwgPSBmdW5jdGlvbiBfbWF4U2Nyb2xsKGVsZW1lbnQsIF9yZWYyKSB7XG4gICAgdmFyIHMgPSBfcmVmMi5zLFxuICAgICAgICBkMiA9IF9yZWYyLmQyLFxuICAgICAgICBkID0gX3JlZjIuZCxcbiAgICAgICAgYSA9IF9yZWYyLmE7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIChzID0gXCJzY3JvbGxcIiArIGQyKSAmJiAoYSA9IF9nZXRQcm94eVByb3AoZWxlbWVudCwgcykpID8gYSgpIC0gX2dldEJvdW5kc0Z1bmMoZWxlbWVudCkoKVtkXSA6IF9pc1ZpZXdwb3J0JDEoZWxlbWVudCkgPyAoX2RvY0VsJDFbc10gfHwgX2JvZHkkMVtzXSkgLSBfZ2V0Vmlld3BvcnREaW1lbnNpb24oZDIpIDogZWxlbWVudFtzXSAtIGVsZW1lbnRbXCJvZmZzZXRcIiArIGQyXSk7XG4gIH0sXG4gICAgICBfaXRlcmF0ZUF1dG9SZWZyZXNoID0gZnVuY3Rpb24gX2l0ZXJhdGVBdXRvUmVmcmVzaChmdW5jLCBldmVudHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9hdXRvUmVmcmVzaC5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgKCFldmVudHMgfHwgfmV2ZW50cy5pbmRleE9mKF9hdXRvUmVmcmVzaFtpICsgMV0pKSAmJiBmdW5jKF9hdXRvUmVmcmVzaFtpXSwgX2F1dG9SZWZyZXNoW2kgKyAxXSwgX2F1dG9SZWZyZXNoW2kgKyAyXSk7XG4gICAgfVxuICB9LFxuICAgICAgX2lzU3RyaW5nID0gZnVuY3Rpb24gX2lzU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIjtcbiAgfSxcbiAgICAgIF9pc0Z1bmN0aW9uID0gZnVuY3Rpb24gX2lzRnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCI7XG4gIH0sXG4gICAgICBfaXNOdW1iZXIgPSBmdW5jdGlvbiBfaXNOdW1iZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiO1xuICB9LFxuICAgICAgX2lzT2JqZWN0ID0gZnVuY3Rpb24gX2lzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIjtcbiAgfSxcbiAgICAgIF9lbmRBbmltYXRpb24gPSBmdW5jdGlvbiBfZW5kQW5pbWF0aW9uKGFuaW1hdGlvbiwgcmV2ZXJzZWQsIHBhdXNlKSB7XG4gICAgcmV0dXJuIGFuaW1hdGlvbiAmJiBhbmltYXRpb24ucHJvZ3Jlc3MocmV2ZXJzZWQgPyAwIDogMSkgJiYgcGF1c2UgJiYgYW5pbWF0aW9uLnBhdXNlKCk7XG4gIH0sXG4gICAgICBfY2FsbGJhY2sgPSBmdW5jdGlvbiBfY2FsbGJhY2soc2VsZiwgZnVuYykge1xuICAgIGlmIChzZWxmLmVuYWJsZWQpIHtcbiAgICAgIHZhciByZXN1bHQgPSBzZWxmLl9jdHggPyBzZWxmLl9jdHguYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMoc2VsZik7XG4gICAgICB9KSA6IGZ1bmMoc2VsZik7XG4gICAgICByZXN1bHQgJiYgcmVzdWx0LnRvdGFsVGltZSAmJiAoc2VsZi5jYWxsYmFja0FuaW1hdGlvbiA9IHJlc3VsdCk7XG4gICAgfVxuICB9LFxuICAgICAgX2FicyA9IE1hdGguYWJzLFxuICAgICAgX2xlZnQgPSBcImxlZnRcIixcbiAgICAgIF90b3AgPSBcInRvcFwiLFxuICAgICAgX3JpZ2h0ID0gXCJyaWdodFwiLFxuICAgICAgX2JvdHRvbSA9IFwiYm90dG9tXCIsXG4gICAgICBfd2lkdGggPSBcIndpZHRoXCIsXG4gICAgICBfaGVpZ2h0ID0gXCJoZWlnaHRcIixcbiAgICAgIF9SaWdodCA9IFwiUmlnaHRcIixcbiAgICAgIF9MZWZ0ID0gXCJMZWZ0XCIsXG4gICAgICBfVG9wID0gXCJUb3BcIixcbiAgICAgIF9Cb3R0b20gPSBcIkJvdHRvbVwiLFxuICAgICAgX3BhZGRpbmcgPSBcInBhZGRpbmdcIixcbiAgICAgIF9tYXJnaW4gPSBcIm1hcmdpblwiLFxuICAgICAgX1dpZHRoID0gXCJXaWR0aFwiLFxuICAgICAgX0hlaWdodCA9IFwiSGVpZ2h0XCIsXG4gICAgICBfcHggPSBcInB4XCIsXG4gICAgICBfZ2V0Q29tcHV0ZWRTdHlsZSA9IGZ1bmN0aW9uIF9nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gX3dpbiQxLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gIH0sXG4gICAgICBfbWFrZVBvc2l0aW9uYWJsZSA9IGZ1bmN0aW9uIF9tYWtlUG9zaXRpb25hYmxlKGVsZW1lbnQpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBfZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbjtcblxuICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgPyBwb3NpdGlvbiA6IFwicmVsYXRpdmVcIjtcbiAgfSxcbiAgICAgIF9zZXREZWZhdWx0cyA9IGZ1bmN0aW9uIF9zZXREZWZhdWx0cyhvYmosIGRlZmF1bHRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBkZWZhdWx0cykge1xuICAgICAgcCBpbiBvYmogfHwgKG9ialtwXSA9IGRlZmF1bHRzW3BdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xuICB9LFxuICAgICAgX2dldEJvdW5kcyA9IGZ1bmN0aW9uIF9nZXRCb3VuZHMoZWxlbWVudCwgd2l0aG91dFRyYW5zZm9ybXMpIHtcbiAgICB2YXIgdHdlZW4gPSB3aXRob3V0VHJhbnNmb3JtcyAmJiBfZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KVtfdHJhbnNmb3JtUHJvcF0gIT09IFwibWF0cml4KDEsIDAsIDAsIDEsIDAsIDApXCIgJiYgZ3NhcCQxLnRvKGVsZW1lbnQsIHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgeFBlcmNlbnQ6IDAsXG4gICAgICB5UGVyY2VudDogMCxcbiAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgcm90YXRpb25YOiAwLFxuICAgICAgcm90YXRpb25ZOiAwLFxuICAgICAgc2NhbGU6IDEsXG4gICAgICBza2V3WDogMCxcbiAgICAgIHNrZXdZOiAwXG4gICAgfSkucHJvZ3Jlc3MoMSksXG4gICAgICAgIGJvdW5kcyA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdHdlZW4gJiYgdHdlZW4ucHJvZ3Jlc3MoMCkua2lsbCgpO1xuICAgIHJldHVybiBib3VuZHM7XG4gIH0sXG4gICAgICBfZ2V0U2l6ZSA9IGZ1bmN0aW9uIF9nZXRTaXplKGVsZW1lbnQsIF9yZWYzKSB7XG4gICAgdmFyIGQyID0gX3JlZjMuZDI7XG4gICAgcmV0dXJuIGVsZW1lbnRbXCJvZmZzZXRcIiArIGQyXSB8fCBlbGVtZW50W1wiY2xpZW50XCIgKyBkMl0gfHwgMDtcbiAgfSxcbiAgICAgIF9nZXRMYWJlbFJhdGlvQXJyYXkgPSBmdW5jdGlvbiBfZ2V0TGFiZWxSYXRpb0FycmF5KHRpbWVsaW5lKSB7XG4gICAgdmFyIGEgPSBbXSxcbiAgICAgICAgbGFiZWxzID0gdGltZWxpbmUubGFiZWxzLFxuICAgICAgICBkdXJhdGlvbiA9IHRpbWVsaW5lLmR1cmF0aW9uKCksXG4gICAgICAgIHA7XG5cbiAgICBmb3IgKHAgaW4gbGFiZWxzKSB7XG4gICAgICBhLnB1c2gobGFiZWxzW3BdIC8gZHVyYXRpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9LFxuICAgICAgX2dldENsb3Nlc3RMYWJlbCA9IGZ1bmN0aW9uIF9nZXRDbG9zZXN0TGFiZWwoYW5pbWF0aW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGdzYXAkMS51dGlscy5zbmFwKF9nZXRMYWJlbFJhdGlvQXJyYXkoYW5pbWF0aW9uKSwgdmFsdWUpO1xuICAgIH07XG4gIH0sXG4gICAgICBfc25hcERpcmVjdGlvbmFsID0gZnVuY3Rpb24gX3NuYXBEaXJlY3Rpb25hbChzbmFwSW5jcmVtZW50T3JBcnJheSkge1xuICAgIHZhciBzbmFwID0gZ3NhcCQxLnV0aWxzLnNuYXAoc25hcEluY3JlbWVudE9yQXJyYXkpLFxuICAgICAgICBhID0gQXJyYXkuaXNBcnJheShzbmFwSW5jcmVtZW50T3JBcnJheSkgJiYgc25hcEluY3JlbWVudE9yQXJyYXkuc2xpY2UoMCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGEgLSBiO1xuICAgIH0pO1xuICAgIHJldHVybiBhID8gZnVuY3Rpb24gKHZhbHVlLCBkaXJlY3Rpb24sIHRocmVzaG9sZCkge1xuICAgICAgaWYgKHRocmVzaG9sZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRocmVzaG9sZCA9IDFlLTM7XG4gICAgICB9XG5cbiAgICAgIHZhciBpO1xuXG4gICAgICBpZiAoIWRpcmVjdGlvbikge1xuICAgICAgICByZXR1cm4gc25hcCh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XG4gICAgICAgIHZhbHVlIC09IHRocmVzaG9sZDtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChhW2ldID49IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYVtpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYVtpIC0gMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpID0gYS5sZW5ndGg7XG4gICAgICAgIHZhbHVlICs9IHRocmVzaG9sZDtcblxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgaWYgKGFbaV0gPD0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBhW2ldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYVswXTtcbiAgICB9IDogZnVuY3Rpb24gKHZhbHVlLCBkaXJlY3Rpb24sIHRocmVzaG9sZCkge1xuICAgICAgaWYgKHRocmVzaG9sZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRocmVzaG9sZCA9IDFlLTM7XG4gICAgICB9XG5cbiAgICAgIHZhciBzbmFwcGVkID0gc25hcCh2YWx1ZSk7XG4gICAgICByZXR1cm4gIWRpcmVjdGlvbiB8fCBNYXRoLmFicyhzbmFwcGVkIC0gdmFsdWUpIDwgdGhyZXNob2xkIHx8IHNuYXBwZWQgLSB2YWx1ZSA8IDAgPT09IGRpcmVjdGlvbiA8IDAgPyBzbmFwcGVkIDogc25hcChkaXJlY3Rpb24gPCAwID8gdmFsdWUgLSBzbmFwSW5jcmVtZW50T3JBcnJheSA6IHZhbHVlICsgc25hcEluY3JlbWVudE9yQXJyYXkpO1xuICAgIH07XG4gIH0sXG4gICAgICBfZ2V0TGFiZWxBdERpcmVjdGlvbiA9IGZ1bmN0aW9uIF9nZXRMYWJlbEF0RGlyZWN0aW9uKHRpbWVsaW5lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSwgc3QpIHtcbiAgICAgIHJldHVybiBfc25hcERpcmVjdGlvbmFsKF9nZXRMYWJlbFJhdGlvQXJyYXkodGltZWxpbmUpKSh2YWx1ZSwgc3QuZGlyZWN0aW9uKTtcbiAgICB9O1xuICB9LFxuICAgICAgX211bHRpTGlzdGVuZXIgPSBmdW5jdGlvbiBfbXVsdGlMaXN0ZW5lcihmdW5jLCBlbGVtZW50LCB0eXBlcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdHlwZXMuc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIHJldHVybiBmdW5jKGVsZW1lbnQsIHR5cGUsIGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfSxcbiAgICAgIF9hZGRMaXN0ZW5lciQxID0gZnVuY3Rpb24gX2FkZExpc3RlbmVyKGVsZW1lbnQsIHR5cGUsIGZ1bmMsIG5vblBhc3NpdmUsIGNhcHR1cmUpIHtcbiAgICByZXR1cm4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmMsIHtcbiAgICAgIHBhc3NpdmU6ICFub25QYXNzaXZlLFxuICAgICAgY2FwdHVyZTogISFjYXB0dXJlXG4gICAgfSk7XG4gIH0sXG4gICAgICBfcmVtb3ZlTGlzdGVuZXIkMSA9IGZ1bmN0aW9uIF9yZW1vdmVMaXN0ZW5lcihlbGVtZW50LCB0eXBlLCBmdW5jLCBjYXB0dXJlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jLCAhIWNhcHR1cmUpO1xuICB9LFxuICAgICAgX3doZWVsTGlzdGVuZXIgPSBmdW5jdGlvbiBfd2hlZWxMaXN0ZW5lcihmdW5jLCBlbCwgc2Nyb2xsRnVuYykge1xuICAgIHNjcm9sbEZ1bmMgPSBzY3JvbGxGdW5jICYmIHNjcm9sbEZ1bmMud2hlZWxIYW5kbGVyO1xuXG4gICAgaWYgKHNjcm9sbEZ1bmMpIHtcbiAgICAgIGZ1bmMoZWwsIFwid2hlZWxcIiwgc2Nyb2xsRnVuYyk7XG4gICAgICBmdW5jKGVsLCBcInRvdWNobW92ZVwiLCBzY3JvbGxGdW5jKTtcbiAgICB9XG4gIH0sXG4gICAgICBfbWFya2VyRGVmYXVsdHMgPSB7XG4gICAgc3RhcnRDb2xvcjogXCJncmVlblwiLFxuICAgIGVuZENvbG9yOiBcInJlZFwiLFxuICAgIGluZGVudDogMCxcbiAgICBmb250U2l6ZTogXCIxNnB4XCIsXG4gICAgZm9udFdlaWdodDogXCJub3JtYWxcIlxuICB9LFxuICAgICAgX2RlZmF1bHRzID0ge1xuICAgIHRvZ2dsZUFjdGlvbnM6IFwicGxheVwiLFxuICAgIGFudGljaXBhdGVQaW46IDBcbiAgfSxcbiAgICAgIF9rZXl3b3JkcyA9IHtcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICBjZW50ZXI6IDAuNSxcbiAgICBib3R0b206IDEsXG4gICAgcmlnaHQ6IDFcbiAgfSxcbiAgICAgIF9vZmZzZXRUb1B4ID0gZnVuY3Rpb24gX29mZnNldFRvUHgodmFsdWUsIHNpemUpIHtcbiAgICBpZiAoX2lzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgdmFyIGVxSW5kZXggPSB2YWx1ZS5pbmRleE9mKFwiPVwiKSxcbiAgICAgICAgICByZWxhdGl2ZSA9IH5lcUluZGV4ID8gKyh2YWx1ZS5jaGFyQXQoZXFJbmRleCAtIDEpICsgMSkgKiBwYXJzZUZsb2F0KHZhbHVlLnN1YnN0cihlcUluZGV4ICsgMSkpIDogMDtcblxuICAgICAgaWYgKH5lcUluZGV4KSB7XG4gICAgICAgIHZhbHVlLmluZGV4T2YoXCIlXCIpID4gZXFJbmRleCAmJiAocmVsYXRpdmUgKj0gc2l6ZSAvIDEwMCk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyKDAsIGVxSW5kZXggLSAxKTtcbiAgICAgIH1cblxuICAgICAgdmFsdWUgPSByZWxhdGl2ZSArICh2YWx1ZSBpbiBfa2V5d29yZHMgPyBfa2V5d29yZHNbdmFsdWVdICogc2l6ZSA6IH52YWx1ZS5pbmRleE9mKFwiJVwiKSA/IHBhcnNlRmxvYXQodmFsdWUpICogc2l6ZSAvIDEwMCA6IHBhcnNlRmxvYXQodmFsdWUpIHx8IDApO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgICAgIF9jcmVhdGVNYXJrZXIgPSBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKHR5cGUsIG5hbWUsIGNvbnRhaW5lciwgZGlyZWN0aW9uLCBfcmVmNCwgb2Zmc2V0LCBtYXRjaFdpZHRoRWwsIGNvbnRhaW5lckFuaW1hdGlvbikge1xuICAgIHZhciBzdGFydENvbG9yID0gX3JlZjQuc3RhcnRDb2xvcixcbiAgICAgICAgZW5kQ29sb3IgPSBfcmVmNC5lbmRDb2xvcixcbiAgICAgICAgZm9udFNpemUgPSBfcmVmNC5mb250U2l6ZSxcbiAgICAgICAgaW5kZW50ID0gX3JlZjQuaW5kZW50LFxuICAgICAgICBmb250V2VpZ2h0ID0gX3JlZjQuZm9udFdlaWdodDtcblxuICAgIHZhciBlID0gX2RvYyQxLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIHVzZUZpeGVkUG9zaXRpb24gPSBfaXNWaWV3cG9ydCQxKGNvbnRhaW5lcikgfHwgX2dldFByb3h5UHJvcChjb250YWluZXIsIFwicGluVHlwZVwiKSA9PT0gXCJmaXhlZFwiLFxuICAgICAgICBpc1Njcm9sbGVyID0gdHlwZS5pbmRleE9mKFwic2Nyb2xsZXJcIikgIT09IC0xLFxuICAgICAgICBwYXJlbnQgPSB1c2VGaXhlZFBvc2l0aW9uID8gX2JvZHkkMSA6IGNvbnRhaW5lcixcbiAgICAgICAgaXNTdGFydCA9IHR5cGUuaW5kZXhPZihcInN0YXJ0XCIpICE9PSAtMSxcbiAgICAgICAgY29sb3IgPSBpc1N0YXJ0ID8gc3RhcnRDb2xvciA6IGVuZENvbG9yLFxuICAgICAgICBjc3MgPSBcImJvcmRlci1jb2xvcjpcIiArIGNvbG9yICsgXCI7Zm9udC1zaXplOlwiICsgZm9udFNpemUgKyBcIjtjb2xvcjpcIiArIGNvbG9yICsgXCI7Zm9udC13ZWlnaHQ6XCIgKyBmb250V2VpZ2h0ICsgXCI7cG9pbnRlci1ldmVudHM6bm9uZTt3aGl0ZS1zcGFjZTpub3dyYXA7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZixBcmlhbDt6LWluZGV4OjEwMDA7cGFkZGluZzo0cHggOHB4O2JvcmRlci13aWR0aDowO2JvcmRlci1zdHlsZTpzb2xpZDtcIjtcblxuICAgIGNzcyArPSBcInBvc2l0aW9uOlwiICsgKChpc1Njcm9sbGVyIHx8IGNvbnRhaW5lckFuaW1hdGlvbikgJiYgdXNlRml4ZWRQb3NpdGlvbiA/IFwiZml4ZWQ7XCIgOiBcImFic29sdXRlO1wiKTtcbiAgICAoaXNTY3JvbGxlciB8fCBjb250YWluZXJBbmltYXRpb24gfHwgIXVzZUZpeGVkUG9zaXRpb24pICYmIChjc3MgKz0gKGRpcmVjdGlvbiA9PT0gX3ZlcnRpY2FsID8gX3JpZ2h0IDogX2JvdHRvbSkgKyBcIjpcIiArIChvZmZzZXQgKyBwYXJzZUZsb2F0KGluZGVudCkpICsgXCJweDtcIik7XG4gICAgbWF0Y2hXaWR0aEVsICYmIChjc3MgKz0gXCJib3gtc2l6aW5nOmJvcmRlci1ib3g7dGV4dC1hbGlnbjpsZWZ0O3dpZHRoOlwiICsgbWF0Y2hXaWR0aEVsLm9mZnNldFdpZHRoICsgXCJweDtcIik7XG4gICAgZS5faXNTdGFydCA9IGlzU3RhcnQ7XG4gICAgZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImdzYXAtbWFya2VyLVwiICsgdHlwZSArIChuYW1lID8gXCIgbWFya2VyLVwiICsgbmFtZSA6IFwiXCIpKTtcbiAgICBlLnN0eWxlLmNzc1RleHQgPSBjc3M7XG4gICAgZS5pbm5lclRleHQgPSBuYW1lIHx8IG5hbWUgPT09IDAgPyB0eXBlICsgXCItXCIgKyBuYW1lIDogdHlwZTtcbiAgICBwYXJlbnQuY2hpbGRyZW5bMF0gPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKGUsIHBhcmVudC5jaGlsZHJlblswXSkgOiBwYXJlbnQuYXBwZW5kQ2hpbGQoZSk7XG4gICAgZS5fb2Zmc2V0ID0gZVtcIm9mZnNldFwiICsgZGlyZWN0aW9uLm9wLmQyXTtcblxuICAgIF9wb3NpdGlvbk1hcmtlcihlLCAwLCBkaXJlY3Rpb24sIGlzU3RhcnQpO1xuXG4gICAgcmV0dXJuIGU7XG4gIH0sXG4gICAgICBfcG9zaXRpb25NYXJrZXIgPSBmdW5jdGlvbiBfcG9zaXRpb25NYXJrZXIobWFya2VyLCBzdGFydCwgZGlyZWN0aW9uLCBmbGlwcGVkKSB7XG4gICAgdmFyIHZhcnMgPSB7XG4gICAgICBkaXNwbGF5OiBcImJsb2NrXCJcbiAgICB9LFxuICAgICAgICBzaWRlID0gZGlyZWN0aW9uW2ZsaXBwZWQgPyBcIm9zMlwiIDogXCJwMlwiXSxcbiAgICAgICAgb3Bwb3NpdGVTaWRlID0gZGlyZWN0aW9uW2ZsaXBwZWQgPyBcInAyXCIgOiBcIm9zMlwiXTtcbiAgICBtYXJrZXIuX2lzRmxpcHBlZCA9IGZsaXBwZWQ7XG4gICAgdmFyc1tkaXJlY3Rpb24uYSArIFwiUGVyY2VudFwiXSA9IGZsaXBwZWQgPyAtMTAwIDogMDtcbiAgICB2YXJzW2RpcmVjdGlvbi5hXSA9IGZsaXBwZWQgPyBcIjFweFwiIDogMDtcbiAgICB2YXJzW1wiYm9yZGVyXCIgKyBzaWRlICsgX1dpZHRoXSA9IDE7XG4gICAgdmFyc1tcImJvcmRlclwiICsgb3Bwb3NpdGVTaWRlICsgX1dpZHRoXSA9IDA7XG4gICAgdmFyc1tkaXJlY3Rpb24ucF0gPSBzdGFydCArIFwicHhcIjtcbiAgICBnc2FwJDEuc2V0KG1hcmtlciwgdmFycyk7XG4gIH0sXG4gICAgICBfdHJpZ2dlcnMgPSBbXSxcbiAgICAgIF9pZHMgPSB7fSxcbiAgICAgIF9yYWZJRCxcbiAgICAgIF9zeW5jID0gZnVuY3Rpb24gX3N5bmMoKSB7XG4gICAgcmV0dXJuIF9nZXRUaW1lJDEoKSAtIF9sYXN0U2Nyb2xsVGltZSA+IDM0ICYmIChfcmFmSUQgfHwgKF9yYWZJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShfdXBkYXRlQWxsKSkpO1xuICB9LFxuICAgICAgX29uU2Nyb2xsJDEgPSBmdW5jdGlvbiBfb25TY3JvbGwoKSB7XG4gICAgaWYgKCFfbm9ybWFsaXplciQxIHx8ICFfbm9ybWFsaXplciQxLmlzUHJlc3NlZCB8fCBfbm9ybWFsaXplciQxLnN0YXJ0WCA+IF9ib2R5JDEuY2xpZW50V2lkdGgpIHtcbiAgICAgIF9zY3JvbGxlcnMuY2FjaGUrKztcblxuICAgICAgaWYgKF9ub3JtYWxpemVyJDEpIHtcbiAgICAgICAgX3JhZklEIHx8IChfcmFmSUQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX3VwZGF0ZUFsbCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3VwZGF0ZUFsbCgpO1xuICAgICAgfVxuXG4gICAgICBfbGFzdFNjcm9sbFRpbWUgfHwgX2Rpc3BhdGNoKFwic2Nyb2xsU3RhcnRcIik7XG4gICAgICBfbGFzdFNjcm9sbFRpbWUgPSBfZ2V0VGltZSQxKCk7XG4gICAgfVxuICB9LFxuICAgICAgX3NldEJhc2VEaW1lbnNpb25zID0gZnVuY3Rpb24gX3NldEJhc2VEaW1lbnNpb25zKCkge1xuICAgIF9iYXNlU2NyZWVuV2lkdGggPSBfd2luJDEuaW5uZXJXaWR0aDtcbiAgICBfYmFzZVNjcmVlbkhlaWdodCA9IF93aW4kMS5pbm5lckhlaWdodDtcbiAgfSxcbiAgICAgIF9vblJlc2l6ZSA9IGZ1bmN0aW9uIF9vblJlc2l6ZSgpIHtcbiAgICBfc2Nyb2xsZXJzLmNhY2hlKys7XG4gICAgIV9yZWZyZXNoaW5nICYmICFfaWdub3JlUmVzaXplICYmICFfZG9jJDEuZnVsbHNjcmVlbkVsZW1lbnQgJiYgIV9kb2MkMS53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCAmJiAoIV9pZ25vcmVNb2JpbGVSZXNpemUgfHwgX2Jhc2VTY3JlZW5XaWR0aCAhPT0gX3dpbiQxLmlubmVyV2lkdGggfHwgTWF0aC5hYnMoX3dpbiQxLmlubmVySGVpZ2h0IC0gX2Jhc2VTY3JlZW5IZWlnaHQpID4gX3dpbiQxLmlubmVySGVpZ2h0ICogMC4yNSkgJiYgX3Jlc2l6ZURlbGF5LnJlc3RhcnQodHJ1ZSk7XG4gIH0sXG4gICAgICBfbGlzdGVuZXJzID0ge30sXG4gICAgICBfZW1wdHlBcnJheSA9IFtdLFxuICAgICAgX3NvZnRSZWZyZXNoID0gZnVuY3Rpb24gX3NvZnRSZWZyZXNoKCkge1xuICAgIHJldHVybiBfcmVtb3ZlTGlzdGVuZXIkMShTY3JvbGxUcmlnZ2VyJDEsIFwic2Nyb2xsRW5kXCIsIF9zb2Z0UmVmcmVzaCkgfHwgX3JlZnJlc2hBbGwodHJ1ZSk7XG4gIH0sXG4gICAgICBfZGlzcGF0Y2ggPSBmdW5jdGlvbiBfZGlzcGF0Y2godHlwZSkge1xuICAgIHJldHVybiBfbGlzdGVuZXJzW3R5cGVdICYmIF9saXN0ZW5lcnNbdHlwZV0ubWFwKGZ1bmN0aW9uIChmKSB7XG4gICAgICByZXR1cm4gZigpO1xuICAgIH0pIHx8IF9lbXB0eUFycmF5O1xuICB9LFxuICAgICAgX3NhdmVkU3R5bGVzID0gW10sXG4gICAgICBfcmV2ZXJ0UmVjb3JkZWQgPSBmdW5jdGlvbiBfcmV2ZXJ0UmVjb3JkZWQobWVkaWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9zYXZlZFN0eWxlcy5sZW5ndGg7IGkgKz0gNSkge1xuICAgICAgaWYgKCFtZWRpYSB8fCBfc2F2ZWRTdHlsZXNbaSArIDRdICYmIF9zYXZlZFN0eWxlc1tpICsgNF0ucXVlcnkgPT09IG1lZGlhKSB7XG4gICAgICAgIF9zYXZlZFN0eWxlc1tpXS5zdHlsZS5jc3NUZXh0ID0gX3NhdmVkU3R5bGVzW2kgKyAxXTtcbiAgICAgICAgX3NhdmVkU3R5bGVzW2ldLmdldEJCb3ggJiYgX3NhdmVkU3R5bGVzW2ldLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCBfc2F2ZWRTdHlsZXNbaSArIDJdIHx8IFwiXCIpO1xuICAgICAgICBfc2F2ZWRTdHlsZXNbaSArIDNdLnVuY2FjaGUgPSAxO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICAgIF9yZXZlcnRBbGwgPSBmdW5jdGlvbiBfcmV2ZXJ0QWxsKGtpbGwsIG1lZGlhKSB7XG4gICAgdmFyIHRyaWdnZXI7XG5cbiAgICBmb3IgKF9pID0gMDsgX2kgPCBfdHJpZ2dlcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB0cmlnZ2VyID0gX3RyaWdnZXJzW19pXTtcblxuICAgICAgaWYgKHRyaWdnZXIgJiYgKCFtZWRpYSB8fCB0cmlnZ2VyLl9jdHggPT09IG1lZGlhKSkge1xuICAgICAgICBpZiAoa2lsbCkge1xuICAgICAgICAgIHRyaWdnZXIua2lsbCgxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cmlnZ2VyLnJldmVydCh0cnVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIF9pc1JldmVydGVkID0gdHJ1ZTtcbiAgICBtZWRpYSAmJiBfcmV2ZXJ0UmVjb3JkZWQobWVkaWEpO1xuICAgIG1lZGlhIHx8IF9kaXNwYXRjaChcInJldmVydFwiKTtcbiAgfSxcbiAgICAgIF9jbGVhclNjcm9sbE1lbW9yeSA9IGZ1bmN0aW9uIF9jbGVhclNjcm9sbE1lbW9yeShzY3JvbGxSZXN0b3JhdGlvbiwgZm9yY2UpIHtcbiAgICBfc2Nyb2xsZXJzLmNhY2hlKys7XG4gICAgKGZvcmNlIHx8ICFfcmVmcmVzaGluZ0FsbCkgJiYgX3Njcm9sbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiBfaXNGdW5jdGlvbihvYmopICYmIG9iai5jYWNoZUlEKysgJiYgKG9iai5yZWMgPSAwKTtcbiAgICB9KTtcbiAgICBfaXNTdHJpbmcoc2Nyb2xsUmVzdG9yYXRpb24pICYmIChfd2luJDEuaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9IF9zY3JvbGxSZXN0b3JhdGlvbiA9IHNjcm9sbFJlc3RvcmF0aW9uKTtcbiAgfSxcbiAgICAgIF9yZWZyZXNoaW5nQWxsLFxuICAgICAgX3JlZnJlc2hJRCA9IDAsXG4gICAgICBfcXVldWVSZWZyZXNoSUQsXG4gICAgICBfcXVldWVSZWZyZXNoQWxsID0gZnVuY3Rpb24gX3F1ZXVlUmVmcmVzaEFsbCgpIHtcbiAgICBpZiAoX3F1ZXVlUmVmcmVzaElEICE9PSBfcmVmcmVzaElEKSB7XG4gICAgICB2YXIgaWQgPSBfcXVldWVSZWZyZXNoSUQgPSBfcmVmcmVzaElEO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlkID09PSBfcmVmcmVzaElEICYmIF9yZWZyZXNoQWxsKHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAgICAgX3JlZnJlc2gxMDB2aCA9IGZ1bmN0aW9uIF9yZWZyZXNoMTAwdmgoKSB7XG4gICAgX2JvZHkkMS5hcHBlbmRDaGlsZChfZGl2MTAwdmgpO1xuXG4gICAgXzEwMHZoID0gIV9ub3JtYWxpemVyJDEgJiYgX2RpdjEwMHZoLm9mZnNldEhlaWdodCB8fCBfd2luJDEuaW5uZXJIZWlnaHQ7XG5cbiAgICBfYm9keSQxLnJlbW92ZUNoaWxkKF9kaXYxMDB2aCk7XG4gIH0sXG4gICAgICBfaGlkZUFsbE1hcmtlcnMgPSBmdW5jdGlvbiBfaGlkZUFsbE1hcmtlcnMoaGlkZSkge1xuICAgIHJldHVybiBfdG9BcnJheShcIi5nc2FwLW1hcmtlci1zdGFydCwgLmdzYXAtbWFya2VyLWVuZCwgLmdzYXAtbWFya2VyLXNjcm9sbGVyLXN0YXJ0LCAuZ3NhcC1tYXJrZXItc2Nyb2xsZXItZW5kXCIpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICByZXR1cm4gZWwuc3R5bGUuZGlzcGxheSA9IGhpZGUgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcbiAgICB9KTtcbiAgfSxcbiAgICAgIF9yZWZyZXNoQWxsID0gZnVuY3Rpb24gX3JlZnJlc2hBbGwoZm9yY2UsIHNraXBSZXZlcnQpIHtcbiAgICBpZiAoX2xhc3RTY3JvbGxUaW1lICYmICFmb3JjZSAmJiAhX2lzUmV2ZXJ0ZWQpIHtcbiAgICAgIF9hZGRMaXN0ZW5lciQxKFNjcm9sbFRyaWdnZXIkMSwgXCJzY3JvbGxFbmRcIiwgX3NvZnRSZWZyZXNoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIF9yZWZyZXNoMTAwdmgoKTtcblxuICAgIF9yZWZyZXNoaW5nQWxsID0gU2Nyb2xsVHJpZ2dlciQxLmlzUmVmcmVzaGluZyA9IHRydWU7XG5cbiAgICBfc2Nyb2xsZXJzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgcmV0dXJuIF9pc0Z1bmN0aW9uKG9iaikgJiYgKytvYmouY2FjaGVJRCAmJiAob2JqLnJlYyA9IG9iaigpKTtcbiAgICB9KTtcblxuICAgIHZhciByZWZyZXNoSW5pdHMgPSBfZGlzcGF0Y2goXCJyZWZyZXNoSW5pdFwiKTtcblxuICAgIF9zb3J0ICYmIFNjcm9sbFRyaWdnZXIkMS5zb3J0KCk7XG4gICAgc2tpcFJldmVydCB8fCBfcmV2ZXJ0QWxsKCk7XG5cbiAgICBfc2Nyb2xsZXJzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgaWYgKF9pc0Z1bmN0aW9uKG9iaikpIHtcbiAgICAgICAgb2JqLnNtb290aCAmJiAob2JqLnRhcmdldC5zdHlsZS5zY3JvbGxCZWhhdmlvciA9IFwiYXV0b1wiKTtcbiAgICAgICAgb2JqKDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX3RyaWdnZXJzLnNsaWNlKDApLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0LnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIF9pc1JldmVydGVkID0gZmFsc2U7XG5cbiAgICBfdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgaWYgKHQuX3N1YlBpbk9mZnNldCAmJiB0LnBpbikge1xuICAgICAgICB2YXIgcHJvcCA9IHQudmFycy5ob3Jpem9udGFsID8gXCJvZmZzZXRXaWR0aFwiIDogXCJvZmZzZXRIZWlnaHRcIixcbiAgICAgICAgICAgIG9yaWdpbmFsID0gdC5waW5bcHJvcF07XG4gICAgICAgIHQucmV2ZXJ0KHRydWUsIDEpO1xuICAgICAgICB0LmFkanVzdFBpblNwYWNpbmcodC5waW5bcHJvcF0gLSBvcmlnaW5hbCk7XG4gICAgICAgIHQucmVmcmVzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2NsYW1waW5nTWF4ID0gMTtcblxuICAgIF9oaWRlQWxsTWFya2Vycyh0cnVlKTtcblxuICAgIF90cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICB2YXIgbWF4ID0gX21heFNjcm9sbCh0LnNjcm9sbGVyLCB0Ll9kaXIpLFxuICAgICAgICAgIGVuZENsYW1wID0gdC52YXJzLmVuZCA9PT0gXCJtYXhcIiB8fCB0Ll9lbmRDbGFtcCAmJiB0LmVuZCA+IG1heCxcbiAgICAgICAgICBzdGFydENsYW1wID0gdC5fc3RhcnRDbGFtcCAmJiB0LnN0YXJ0ID49IG1heDtcblxuICAgICAgKGVuZENsYW1wIHx8IHN0YXJ0Q2xhbXApICYmIHQuc2V0UG9zaXRpb25zKHN0YXJ0Q2xhbXAgPyBtYXggLSAxIDogdC5zdGFydCwgZW5kQ2xhbXAgPyBNYXRoLm1heChzdGFydENsYW1wID8gbWF4IDogdC5zdGFydCArIDEsIG1heCkgOiB0LmVuZCwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBfaGlkZUFsbE1hcmtlcnMoZmFsc2UpO1xuXG4gICAgX2NsYW1waW5nTWF4ID0gMDtcbiAgICByZWZyZXNoSW5pdHMuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICByZXR1cm4gcmVzdWx0ICYmIHJlc3VsdC5yZW5kZXIgJiYgcmVzdWx0LnJlbmRlcigtMSk7XG4gICAgfSk7XG5cbiAgICBfc2Nyb2xsZXJzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgaWYgKF9pc0Z1bmN0aW9uKG9iaikpIHtcbiAgICAgICAgb2JqLnNtb290aCAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBvYmoudGFyZ2V0LnN0eWxlLnNjcm9sbEJlaGF2aW9yID0gXCJzbW9vdGhcIjtcbiAgICAgICAgfSk7XG4gICAgICAgIG9iai5yZWMgJiYgb2JqKG9iai5yZWMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2NsZWFyU2Nyb2xsTWVtb3J5KF9zY3JvbGxSZXN0b3JhdGlvbiwgMSk7XG5cbiAgICBfcmVzaXplRGVsYXkucGF1c2UoKTtcblxuICAgIF9yZWZyZXNoSUQrKztcbiAgICBfcmVmcmVzaGluZ0FsbCA9IDI7XG5cbiAgICBfdXBkYXRlQWxsKDIpO1xuXG4gICAgX3RyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiBfaXNGdW5jdGlvbih0LnZhcnMub25SZWZyZXNoKSAmJiB0LnZhcnMub25SZWZyZXNoKHQpO1xuICAgIH0pO1xuXG4gICAgX3JlZnJlc2hpbmdBbGwgPSBTY3JvbGxUcmlnZ2VyJDEuaXNSZWZyZXNoaW5nID0gZmFsc2U7XG5cbiAgICBfZGlzcGF0Y2goXCJyZWZyZXNoXCIpO1xuICB9LFxuICAgICAgX2xhc3RTY3JvbGwgPSAwLFxuICAgICAgX2RpcmVjdGlvbiA9IDEsXG4gICAgICBfcHJpbWFyeSxcbiAgICAgIF91cGRhdGVBbGwgPSBmdW5jdGlvbiBfdXBkYXRlQWxsKGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlID09PSAyIHx8ICFfcmVmcmVzaGluZ0FsbCAmJiAhX2lzUmV2ZXJ0ZWQpIHtcbiAgICAgIFNjcm9sbFRyaWdnZXIkMS5pc1VwZGF0aW5nID0gdHJ1ZTtcbiAgICAgIF9wcmltYXJ5ICYmIF9wcmltYXJ5LnVwZGF0ZSgwKTtcblxuICAgICAgdmFyIGwgPSBfdHJpZ2dlcnMubGVuZ3RoLFxuICAgICAgICAgIHRpbWUgPSBfZ2V0VGltZSQxKCksXG4gICAgICAgICAgcmVjb3JkVmVsb2NpdHkgPSB0aW1lIC0gX3RpbWUxID49IDUwLFxuICAgICAgICAgIHNjcm9sbCA9IGwgJiYgX3RyaWdnZXJzWzBdLnNjcm9sbCgpO1xuXG4gICAgICBfZGlyZWN0aW9uID0gX2xhc3RTY3JvbGwgPiBzY3JvbGwgPyAtMSA6IDE7XG4gICAgICBfcmVmcmVzaGluZ0FsbCB8fCAoX2xhc3RTY3JvbGwgPSBzY3JvbGwpO1xuXG4gICAgICBpZiAocmVjb3JkVmVsb2NpdHkpIHtcbiAgICAgICAgaWYgKF9sYXN0U2Nyb2xsVGltZSAmJiAhX3BvaW50ZXJJc0Rvd24gJiYgdGltZSAtIF9sYXN0U2Nyb2xsVGltZSA+IDIwMCkge1xuICAgICAgICAgIF9sYXN0U2Nyb2xsVGltZSA9IDA7XG5cbiAgICAgICAgICBfZGlzcGF0Y2goXCJzY3JvbGxFbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBfdGltZTIgPSBfdGltZTE7XG4gICAgICAgIF90aW1lMSA9IHRpbWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChfZGlyZWN0aW9uIDwgMCkge1xuICAgICAgICBfaSA9IGw7XG5cbiAgICAgICAgd2hpbGUgKF9pLS0gPiAwKSB7XG4gICAgICAgICAgX3RyaWdnZXJzW19pXSAmJiBfdHJpZ2dlcnNbX2ldLnVwZGF0ZSgwLCByZWNvcmRWZWxvY2l0eSk7XG4gICAgICAgIH1cblxuICAgICAgICBfZGlyZWN0aW9uID0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoX2kgPSAwOyBfaSA8IGw7IF9pKyspIHtcbiAgICAgICAgICBfdHJpZ2dlcnNbX2ldICYmIF90cmlnZ2Vyc1tfaV0udXBkYXRlKDAsIHJlY29yZFZlbG9jaXR5KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBTY3JvbGxUcmlnZ2VyJDEuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIF9yYWZJRCA9IDA7XG4gIH0sXG4gICAgICBfcHJvcE5hbWVzVG9Db3B5ID0gW19sZWZ0LCBfdG9wLCBfYm90dG9tLCBfcmlnaHQsIF9tYXJnaW4gKyBfQm90dG9tLCBfbWFyZ2luICsgX1JpZ2h0LCBfbWFyZ2luICsgX1RvcCwgX21hcmdpbiArIF9MZWZ0LCBcImRpc3BsYXlcIiwgXCJmbGV4U2hyaW5rXCIsIFwiZmxvYXRcIiwgXCJ6SW5kZXhcIiwgXCJncmlkQ29sdW1uU3RhcnRcIiwgXCJncmlkQ29sdW1uRW5kXCIsIFwiZ3JpZFJvd1N0YXJ0XCIsIFwiZ3JpZFJvd0VuZFwiLCBcImdyaWRBcmVhXCIsIFwianVzdGlmeVNlbGZcIiwgXCJhbGlnblNlbGZcIiwgXCJwbGFjZVNlbGZcIiwgXCJvcmRlclwiXSxcbiAgICAgIF9zdGF0ZVByb3BzID0gX3Byb3BOYW1lc1RvQ29weS5jb25jYXQoW193aWR0aCwgX2hlaWdodCwgXCJib3hTaXppbmdcIiwgXCJtYXhcIiArIF9XaWR0aCwgXCJtYXhcIiArIF9IZWlnaHQsIFwicG9zaXRpb25cIiwgX21hcmdpbiwgX3BhZGRpbmcsIF9wYWRkaW5nICsgX1RvcCwgX3BhZGRpbmcgKyBfUmlnaHQsIF9wYWRkaW5nICsgX0JvdHRvbSwgX3BhZGRpbmcgKyBfTGVmdF0pLFxuICAgICAgX3N3YXBQaW5PdXQgPSBmdW5jdGlvbiBfc3dhcFBpbk91dChwaW4sIHNwYWNlciwgc3RhdGUpIHtcbiAgICBfc2V0U3RhdGUoc3RhdGUpO1xuXG4gICAgdmFyIGNhY2hlID0gcGluLl9nc2FwO1xuXG4gICAgaWYgKGNhY2hlLnNwYWNlcklzTmF0aXZlKSB7XG4gICAgICBfc2V0U3RhdGUoY2FjaGUuc3BhY2VyU3RhdGUpO1xuICAgIH0gZWxzZSBpZiAocGluLl9nc2FwLnN3YXBwZWRJbikge1xuICAgICAgdmFyIHBhcmVudCA9IHNwYWNlci5wYXJlbnROb2RlO1xuXG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUocGluLCBzcGFjZXIpO1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoc3BhY2VyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwaW4uX2dzYXAuc3dhcHBlZEluID0gZmFsc2U7XG4gIH0sXG4gICAgICBfc3dhcFBpbkluID0gZnVuY3Rpb24gX3N3YXBQaW5JbihwaW4sIHNwYWNlciwgY3MsIHNwYWNlclN0YXRlKSB7XG4gICAgaWYgKCFwaW4uX2dzYXAuc3dhcHBlZEluKSB7XG4gICAgICB2YXIgaSA9IF9wcm9wTmFtZXNUb0NvcHkubGVuZ3RoLFxuICAgICAgICAgIHNwYWNlclN0eWxlID0gc3BhY2VyLnN0eWxlLFxuICAgICAgICAgIHBpblN0eWxlID0gcGluLnN0eWxlLFxuICAgICAgICAgIHA7XG5cbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgcCA9IF9wcm9wTmFtZXNUb0NvcHlbaV07XG4gICAgICAgIHNwYWNlclN0eWxlW3BdID0gY3NbcF07XG4gICAgICB9XG5cbiAgICAgIHNwYWNlclN0eWxlLnBvc2l0aW9uID0gY3MucG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiA/IFwiYWJzb2x1dGVcIiA6IFwicmVsYXRpdmVcIjtcbiAgICAgIGNzLmRpc3BsYXkgPT09IFwiaW5saW5lXCIgJiYgKHNwYWNlclN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiKTtcbiAgICAgIHBpblN0eWxlW19ib3R0b21dID0gcGluU3R5bGVbX3JpZ2h0XSA9IFwiYXV0b1wiO1xuICAgICAgc3BhY2VyU3R5bGUuZmxleEJhc2lzID0gY3MuZmxleEJhc2lzIHx8IFwiYXV0b1wiO1xuICAgICAgc3BhY2VyU3R5bGUub3ZlcmZsb3cgPSBcInZpc2libGVcIjtcbiAgICAgIHNwYWNlclN0eWxlLmJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuICAgICAgc3BhY2VyU3R5bGVbX3dpZHRoXSA9IF9nZXRTaXplKHBpbiwgX2hvcml6b250YWwpICsgX3B4O1xuICAgICAgc3BhY2VyU3R5bGVbX2hlaWdodF0gPSBfZ2V0U2l6ZShwaW4sIF92ZXJ0aWNhbCkgKyBfcHg7XG4gICAgICBzcGFjZXJTdHlsZVtfcGFkZGluZ10gPSBwaW5TdHlsZVtfbWFyZ2luXSA9IHBpblN0eWxlW190b3BdID0gcGluU3R5bGVbX2xlZnRdID0gXCIwXCI7XG5cbiAgICAgIF9zZXRTdGF0ZShzcGFjZXJTdGF0ZSk7XG5cbiAgICAgIHBpblN0eWxlW193aWR0aF0gPSBwaW5TdHlsZVtcIm1heFwiICsgX1dpZHRoXSA9IGNzW193aWR0aF07XG4gICAgICBwaW5TdHlsZVtfaGVpZ2h0XSA9IHBpblN0eWxlW1wibWF4XCIgKyBfSGVpZ2h0XSA9IGNzW19oZWlnaHRdO1xuICAgICAgcGluU3R5bGVbX3BhZGRpbmddID0gY3NbX3BhZGRpbmddO1xuXG4gICAgICBpZiAocGluLnBhcmVudE5vZGUgIT09IHNwYWNlcikge1xuICAgICAgICBwaW4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3BhY2VyLCBwaW4pO1xuICAgICAgICBzcGFjZXIuYXBwZW5kQ2hpbGQocGluKTtcbiAgICAgIH1cblxuICAgICAgcGluLl9nc2FwLnN3YXBwZWRJbiA9IHRydWU7XG4gICAgfVxuICB9LFxuICAgICAgX2NhcHNFeHAgPSAvKFtBLVpdKS9nLFxuICAgICAgX3NldFN0YXRlID0gZnVuY3Rpb24gX3NldFN0YXRlKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlKSB7XG4gICAgICB2YXIgc3R5bGUgPSBzdGF0ZS50LnN0eWxlLFxuICAgICAgICAgIGwgPSBzdGF0ZS5sZW5ndGgsXG4gICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgcCxcbiAgICAgICAgICB2YWx1ZTtcbiAgICAgIChzdGF0ZS50Ll9nc2FwIHx8IGdzYXAkMS5jb3JlLmdldENhY2hlKHN0YXRlLnQpKS51bmNhY2hlID0gMTtcblxuICAgICAgZm9yICg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgdmFsdWUgPSBzdGF0ZVtpICsgMV07XG4gICAgICAgIHAgPSBzdGF0ZVtpXTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBzdHlsZVtwXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKHN0eWxlW3BdKSB7XG4gICAgICAgICAgc3R5bGUucmVtb3ZlUHJvcGVydHkocC5yZXBsYWNlKF9jYXBzRXhwLCBcIi0kMVwiKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICAgIF9nZXRTdGF0ZSA9IGZ1bmN0aW9uIF9nZXRTdGF0ZShlbGVtZW50KSB7XG4gICAgdmFyIGwgPSBfc3RhdGVQcm9wcy5sZW5ndGgsXG4gICAgICAgIHN0eWxlID0gZWxlbWVudC5zdHlsZSxcbiAgICAgICAgc3RhdGUgPSBbXSxcbiAgICAgICAgaSA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgc3RhdGUucHVzaChfc3RhdGVQcm9wc1tpXSwgc3R5bGVbX3N0YXRlUHJvcHNbaV1dKTtcbiAgICB9XG5cbiAgICBzdGF0ZS50ID0gZWxlbWVudDtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH0sXG4gICAgICBfY29weVN0YXRlID0gZnVuY3Rpb24gX2NvcHlTdGF0ZShzdGF0ZSwgb3ZlcnJpZGUsIG9taXRPZmZzZXRzKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgICBsID0gc3RhdGUubGVuZ3RoLFxuICAgICAgICBpID0gb21pdE9mZnNldHMgPyA4IDogMCxcbiAgICAgICAgcDtcblxuICAgIGZvciAoOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgICBwID0gc3RhdGVbaV07XG4gICAgICByZXN1bHQucHVzaChwLCBwIGluIG92ZXJyaWRlID8gb3ZlcnJpZGVbcF0gOiBzdGF0ZVtpICsgMV0pO1xuICAgIH1cblxuICAgIHJlc3VsdC50ID0gc3RhdGUudDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuICAgICAgX3dpbk9mZnNldHMgPSB7XG4gICAgbGVmdDogMCxcbiAgICB0b3A6IDBcbiAgfSxcbiAgICAgIF9wYXJzZVBvc2l0aW9uID0gZnVuY3Rpb24gX3BhcnNlUG9zaXRpb24odmFsdWUsIHRyaWdnZXIsIHNjcm9sbGVyU2l6ZSwgZGlyZWN0aW9uLCBzY3JvbGwsIG1hcmtlciwgbWFya2VyU2Nyb2xsZXIsIHNlbGYsIHNjcm9sbGVyQm91bmRzLCBib3JkZXJXaWR0aCwgdXNlRml4ZWRQb3NpdGlvbiwgc2Nyb2xsZXJNYXgsIGNvbnRhaW5lckFuaW1hdGlvbiwgY2xhbXBaZXJvUHJvcCkge1xuICAgIF9pc0Z1bmN0aW9uKHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZShzZWxmKSk7XG5cbiAgICBpZiAoX2lzU3RyaW5nKHZhbHVlKSAmJiB2YWx1ZS5zdWJzdHIoMCwgMykgPT09IFwibWF4XCIpIHtcbiAgICAgIHZhbHVlID0gc2Nyb2xsZXJNYXggKyAodmFsdWUuY2hhckF0KDQpID09PSBcIj1cIiA/IF9vZmZzZXRUb1B4KFwiMFwiICsgdmFsdWUuc3Vic3RyKDMpLCBzY3JvbGxlclNpemUpIDogMCk7XG4gICAgfVxuXG4gICAgdmFyIHRpbWUgPSBjb250YWluZXJBbmltYXRpb24gPyBjb250YWluZXJBbmltYXRpb24udGltZSgpIDogMCxcbiAgICAgICAgcDEsXG4gICAgICAgIHAyLFxuICAgICAgICBlbGVtZW50O1xuICAgIGNvbnRhaW5lckFuaW1hdGlvbiAmJiBjb250YWluZXJBbmltYXRpb24uc2VlaygwKTtcbiAgICBpc05hTih2YWx1ZSkgfHwgKHZhbHVlID0gK3ZhbHVlKTtcblxuICAgIGlmICghX2lzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgX2lzRnVuY3Rpb24odHJpZ2dlcikgJiYgKHRyaWdnZXIgPSB0cmlnZ2VyKHNlbGYpKTtcbiAgICAgIHZhciBvZmZzZXRzID0gKHZhbHVlIHx8IFwiMFwiKS5zcGxpdChcIiBcIiksXG4gICAgICAgICAgYm91bmRzLFxuICAgICAgICAgIGxvY2FsT2Zmc2V0LFxuICAgICAgICAgIGdsb2JhbE9mZnNldCxcbiAgICAgICAgICBkaXNwbGF5O1xuICAgICAgZWxlbWVudCA9IF9nZXRUYXJnZXQodHJpZ2dlciwgc2VsZikgfHwgX2JvZHkkMTtcbiAgICAgIGJvdW5kcyA9IF9nZXRCb3VuZHMoZWxlbWVudCkgfHwge307XG5cbiAgICAgIGlmICgoIWJvdW5kcyB8fCAhYm91bmRzLmxlZnQgJiYgIWJvdW5kcy50b3ApICYmIF9nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgIGRpc3BsYXkgPSBlbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgYm91bmRzID0gX2dldEJvdW5kcyhlbGVtZW50KTtcbiAgICAgICAgZGlzcGxheSA/IGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXkgOiBlbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcbiAgICAgIH1cblxuICAgICAgbG9jYWxPZmZzZXQgPSBfb2Zmc2V0VG9QeChvZmZzZXRzWzBdLCBib3VuZHNbZGlyZWN0aW9uLmRdKTtcbiAgICAgIGdsb2JhbE9mZnNldCA9IF9vZmZzZXRUb1B4KG9mZnNldHNbMV0gfHwgXCIwXCIsIHNjcm9sbGVyU2l6ZSk7XG4gICAgICB2YWx1ZSA9IGJvdW5kc1tkaXJlY3Rpb24ucF0gLSBzY3JvbGxlckJvdW5kc1tkaXJlY3Rpb24ucF0gLSBib3JkZXJXaWR0aCArIGxvY2FsT2Zmc2V0ICsgc2Nyb2xsIC0gZ2xvYmFsT2Zmc2V0O1xuICAgICAgbWFya2VyU2Nyb2xsZXIgJiYgX3Bvc2l0aW9uTWFya2VyKG1hcmtlclNjcm9sbGVyLCBnbG9iYWxPZmZzZXQsIGRpcmVjdGlvbiwgc2Nyb2xsZXJTaXplIC0gZ2xvYmFsT2Zmc2V0IDwgMjAgfHwgbWFya2VyU2Nyb2xsZXIuX2lzU3RhcnQgJiYgZ2xvYmFsT2Zmc2V0ID4gMjApO1xuICAgICAgc2Nyb2xsZXJTaXplIC09IHNjcm9sbGVyU2l6ZSAtIGdsb2JhbE9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyQW5pbWF0aW9uICYmICh2YWx1ZSA9IGdzYXAkMS51dGlscy5tYXBSYW5nZShjb250YWluZXJBbmltYXRpb24uc2Nyb2xsVHJpZ2dlci5zdGFydCwgY29udGFpbmVyQW5pbWF0aW9uLnNjcm9sbFRyaWdnZXIuZW5kLCAwLCBzY3JvbGxlck1heCwgdmFsdWUpKTtcbiAgICAgIG1hcmtlclNjcm9sbGVyICYmIF9wb3NpdGlvbk1hcmtlcihtYXJrZXJTY3JvbGxlciwgc2Nyb2xsZXJTaXplLCBkaXJlY3Rpb24sIHRydWUpO1xuICAgIH1cblxuICAgIGlmIChjbGFtcFplcm9Qcm9wKSB7XG4gICAgICBzZWxmW2NsYW1wWmVyb1Byb3BdID0gdmFsdWUgfHwgLTAuMDAxO1xuICAgICAgdmFsdWUgPCAwICYmICh2YWx1ZSA9IDApO1xuICAgIH1cblxuICAgIGlmIChtYXJrZXIpIHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IHZhbHVlICsgc2Nyb2xsZXJTaXplLFxuICAgICAgICAgIGlzU3RhcnQgPSBtYXJrZXIuX2lzU3RhcnQ7XG4gICAgICBwMSA9IFwic2Nyb2xsXCIgKyBkaXJlY3Rpb24uZDI7XG5cbiAgICAgIF9wb3NpdGlvbk1hcmtlcihtYXJrZXIsIHBvc2l0aW9uLCBkaXJlY3Rpb24sIGlzU3RhcnQgJiYgcG9zaXRpb24gPiAyMCB8fCAhaXNTdGFydCAmJiAodXNlRml4ZWRQb3NpdGlvbiA/IE1hdGgubWF4KF9ib2R5JDFbcDFdLCBfZG9jRWwkMVtwMV0pIDogbWFya2VyLnBhcmVudE5vZGVbcDFdKSA8PSBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBpZiAodXNlRml4ZWRQb3NpdGlvbikge1xuICAgICAgICBzY3JvbGxlckJvdW5kcyA9IF9nZXRCb3VuZHMobWFya2VyU2Nyb2xsZXIpO1xuICAgICAgICB1c2VGaXhlZFBvc2l0aW9uICYmIChtYXJrZXIuc3R5bGVbZGlyZWN0aW9uLm9wLnBdID0gc2Nyb2xsZXJCb3VuZHNbZGlyZWN0aW9uLm9wLnBdIC0gZGlyZWN0aW9uLm9wLm0gLSBtYXJrZXIuX29mZnNldCArIF9weCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbnRhaW5lckFuaW1hdGlvbiAmJiBlbGVtZW50KSB7XG4gICAgICBwMSA9IF9nZXRCb3VuZHMoZWxlbWVudCk7XG4gICAgICBjb250YWluZXJBbmltYXRpb24uc2VlayhzY3JvbGxlck1heCk7XG4gICAgICBwMiA9IF9nZXRCb3VuZHMoZWxlbWVudCk7XG4gICAgICBjb250YWluZXJBbmltYXRpb24uX2NhU2Nyb2xsRGlzdCA9IHAxW2RpcmVjdGlvbi5wXSAtIHAyW2RpcmVjdGlvbi5wXTtcbiAgICAgIHZhbHVlID0gdmFsdWUgLyBjb250YWluZXJBbmltYXRpb24uX2NhU2Nyb2xsRGlzdCAqIHNjcm9sbGVyTWF4O1xuICAgIH1cblxuICAgIGNvbnRhaW5lckFuaW1hdGlvbiAmJiBjb250YWluZXJBbmltYXRpb24uc2Vlayh0aW1lKTtcbiAgICByZXR1cm4gY29udGFpbmVyQW5pbWF0aW9uID8gdmFsdWUgOiBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgfSxcbiAgICAgIF9wcmVmaXhFeHAgPSAvKHdlYmtpdHxtb3p8bGVuZ3RofGNzc1RleHR8aW5zZXQpL2ksXG4gICAgICBfcmVwYXJlbnQgPSBmdW5jdGlvbiBfcmVwYXJlbnQoZWxlbWVudCwgcGFyZW50LCB0b3AsIGxlZnQpIHtcbiAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlICE9PSBwYXJlbnQpIHtcbiAgICAgIHZhciBzdHlsZSA9IGVsZW1lbnQuc3R5bGUsXG4gICAgICAgICAgcCxcbiAgICAgICAgICBjcztcblxuICAgICAgaWYgKHBhcmVudCA9PT0gX2JvZHkkMSkge1xuICAgICAgICBlbGVtZW50Ll9zdE9yaWcgPSBzdHlsZS5jc3NUZXh0O1xuICAgICAgICBjcyA9IF9nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgICAgIGZvciAocCBpbiBjcykge1xuICAgICAgICAgIGlmICghK3AgJiYgIV9wcmVmaXhFeHAudGVzdChwKSAmJiBjc1twXSAmJiB0eXBlb2Ygc3R5bGVbcF0gPT09IFwic3RyaW5nXCIgJiYgcCAhPT0gXCIwXCIpIHtcbiAgICAgICAgICAgIHN0eWxlW3BdID0gY3NbcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3R5bGUudG9wID0gdG9wO1xuICAgICAgICBzdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLmNzc1RleHQgPSBlbGVtZW50Ll9zdE9yaWc7XG4gICAgICB9XG5cbiAgICAgIGdzYXAkMS5jb3JlLmdldENhY2hlKGVsZW1lbnQpLnVuY2FjaGUgPSAxO1xuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgfSxcbiAgICAgIF9pbnRlcnJ1cHRpb25UcmFja2VyID0gZnVuY3Rpb24gX2ludGVycnVwdGlvblRyYWNrZXIoZ2V0VmFsdWVGdW5jLCBpbml0aWFsVmFsdWUsIG9uSW50ZXJydXB0KSB7XG4gICAgdmFyIGxhc3QxID0gaW5pdGlhbFZhbHVlLFxuICAgICAgICBsYXN0MiA9IGxhc3QxO1xuICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZhciBjdXJyZW50ID0gTWF0aC5yb3VuZChnZXRWYWx1ZUZ1bmMoKSk7XG5cbiAgICAgIGlmIChjdXJyZW50ICE9PSBsYXN0MSAmJiBjdXJyZW50ICE9PSBsYXN0MiAmJiBNYXRoLmFicyhjdXJyZW50IC0gbGFzdDEpID4gMyAmJiBNYXRoLmFicyhjdXJyZW50IC0gbGFzdDIpID4gMykge1xuICAgICAgICB2YWx1ZSA9IGN1cnJlbnQ7XG4gICAgICAgIG9uSW50ZXJydXB0ICYmIG9uSW50ZXJydXB0KCk7XG4gICAgICB9XG5cbiAgICAgIGxhc3QyID0gbGFzdDE7XG4gICAgICBsYXN0MSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH0sXG4gICAgICBfc2hpZnRNYXJrZXIgPSBmdW5jdGlvbiBfc2hpZnRNYXJrZXIobWFya2VyLCBkaXJlY3Rpb24sIHZhbHVlKSB7XG4gICAgdmFyIHZhcnMgPSB7fTtcbiAgICB2YXJzW2RpcmVjdGlvbi5wXSA9IFwiKz1cIiArIHZhbHVlO1xuICAgIGdzYXAkMS5zZXQobWFya2VyLCB2YXJzKTtcbiAgfSxcbiAgICAgIF9nZXRUd2VlbkNyZWF0b3IgPSBmdW5jdGlvbiBfZ2V0VHdlZW5DcmVhdG9yKHNjcm9sbGVyLCBkaXJlY3Rpb24pIHtcbiAgICB2YXIgZ2V0U2Nyb2xsID0gX2dldFNjcm9sbEZ1bmMoc2Nyb2xsZXIsIGRpcmVjdGlvbiksXG4gICAgICAgIHByb3AgPSBcIl9zY3JvbGxcIiArIGRpcmVjdGlvbi5wMixcbiAgICAgICAgZ2V0VHdlZW4gPSBmdW5jdGlvbiBnZXRUd2VlbihzY3JvbGxUbywgdmFycywgaW5pdGlhbFZhbHVlLCBjaGFuZ2UxLCBjaGFuZ2UyKSB7XG4gICAgICB2YXIgdHdlZW4gPSBnZXRUd2Vlbi50d2VlbixcbiAgICAgICAgICBvbkNvbXBsZXRlID0gdmFycy5vbkNvbXBsZXRlLFxuICAgICAgICAgIG1vZGlmaWVycyA9IHt9O1xuICAgICAgaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlIHx8IGdldFNjcm9sbCgpO1xuXG4gICAgICB2YXIgY2hlY2tGb3JJbnRlcnJ1cHRpb24gPSBfaW50ZXJydXB0aW9uVHJhY2tlcihnZXRTY3JvbGwsIGluaXRpYWxWYWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0d2Vlbi5raWxsKCk7XG4gICAgICAgIGdldFR3ZWVuLnR3ZWVuID0gMDtcbiAgICAgIH0pO1xuXG4gICAgICBjaGFuZ2UyID0gY2hhbmdlMSAmJiBjaGFuZ2UyIHx8IDA7XG4gICAgICBjaGFuZ2UxID0gY2hhbmdlMSB8fCBzY3JvbGxUbyAtIGluaXRpYWxWYWx1ZTtcbiAgICAgIHR3ZWVuICYmIHR3ZWVuLmtpbGwoKTtcbiAgICAgIHZhcnNbcHJvcF0gPSBzY3JvbGxUbztcbiAgICAgIHZhcnMuaW5oZXJpdCA9IGZhbHNlO1xuICAgICAgdmFycy5tb2RpZmllcnMgPSBtb2RpZmllcnM7XG5cbiAgICAgIG1vZGlmaWVyc1twcm9wXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNoZWNrRm9ySW50ZXJydXB0aW9uKGluaXRpYWxWYWx1ZSArIGNoYW5nZTEgKiB0d2Vlbi5yYXRpbyArIGNoYW5nZTIgKiB0d2Vlbi5yYXRpbyAqIHR3ZWVuLnJhdGlvKTtcbiAgICAgIH07XG5cbiAgICAgIHZhcnMub25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zY3JvbGxlcnMuY2FjaGUrKztcbiAgICAgICAgZ2V0VHdlZW4udHdlZW4gJiYgX3VwZGF0ZUFsbCgpO1xuICAgICAgfTtcblxuICAgICAgdmFycy5vbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBnZXRUd2Vlbi50d2VlbiA9IDA7XG4gICAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZS5jYWxsKHR3ZWVuKTtcbiAgICAgIH07XG5cbiAgICAgIHR3ZWVuID0gZ2V0VHdlZW4udHdlZW4gPSBnc2FwJDEudG8oc2Nyb2xsZXIsIHZhcnMpO1xuICAgICAgcmV0dXJuIHR3ZWVuO1xuICAgIH07XG5cbiAgICBzY3JvbGxlcltwcm9wXSA9IGdldFNjcm9sbDtcblxuICAgIGdldFNjcm9sbC53aGVlbEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2V0VHdlZW4udHdlZW4gJiYgZ2V0VHdlZW4udHdlZW4ua2lsbCgpICYmIChnZXRUd2Vlbi50d2VlbiA9IDApO1xuICAgIH07XG5cbiAgICBfYWRkTGlzdGVuZXIkMShzY3JvbGxlciwgXCJ3aGVlbFwiLCBnZXRTY3JvbGwud2hlZWxIYW5kbGVyKTtcblxuICAgIFNjcm9sbFRyaWdnZXIkMS5pc1RvdWNoICYmIF9hZGRMaXN0ZW5lciQxKHNjcm9sbGVyLCBcInRvdWNobW92ZVwiLCBnZXRTY3JvbGwud2hlZWxIYW5kbGVyKTtcbiAgICByZXR1cm4gZ2V0VHdlZW47XG4gIH07XG5cbiAgdmFyIFNjcm9sbFRyaWdnZXIkMSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY3JvbGxUcmlnZ2VyKHZhcnMsIGFuaW1hdGlvbikge1xuICAgICAgX2NvcmVJbml0dGVkJDEgfHwgU2Nyb2xsVHJpZ2dlci5yZWdpc3Rlcihnc2FwJDEpIHx8IGNvbnNvbGUud2FybihcIlBsZWFzZSBnc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpXCIpO1xuXG4gICAgICBfY29udGV4dCQxKHRoaXMpO1xuXG4gICAgICB0aGlzLmluaXQodmFycywgYW5pbWF0aW9uKTtcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gU2Nyb2xsVHJpZ2dlci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uaW5pdCA9IGZ1bmN0aW9uIGluaXQodmFycywgYW5pbWF0aW9uKSB7XG4gICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5zdGFydCA9IDA7XG4gICAgICB0aGlzLnZhcnMgJiYgdGhpcy5raWxsKHRydWUsIHRydWUpO1xuXG4gICAgICBpZiAoIV9lbmFibGVkKSB7XG4gICAgICAgIHRoaXMudXBkYXRlID0gdGhpcy5yZWZyZXNoID0gdGhpcy5raWxsID0gX3Bhc3NUaHJvdWdoO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhcnMgPSBfc2V0RGVmYXVsdHMoX2lzU3RyaW5nKHZhcnMpIHx8IF9pc051bWJlcih2YXJzKSB8fCB2YXJzLm5vZGVUeXBlID8ge1xuICAgICAgICB0cmlnZ2VyOiB2YXJzXG4gICAgICB9IDogdmFycywgX2RlZmF1bHRzKTtcblxuICAgICAgdmFyIF92YXJzID0gdmFycyxcbiAgICAgICAgICBvblVwZGF0ZSA9IF92YXJzLm9uVXBkYXRlLFxuICAgICAgICAgIHRvZ2dsZUNsYXNzID0gX3ZhcnMudG9nZ2xlQ2xhc3MsXG4gICAgICAgICAgaWQgPSBfdmFycy5pZCxcbiAgICAgICAgICBvblRvZ2dsZSA9IF92YXJzLm9uVG9nZ2xlLFxuICAgICAgICAgIG9uUmVmcmVzaCA9IF92YXJzLm9uUmVmcmVzaCxcbiAgICAgICAgICBzY3J1YiA9IF92YXJzLnNjcnViLFxuICAgICAgICAgIHRyaWdnZXIgPSBfdmFycy50cmlnZ2VyLFxuICAgICAgICAgIHBpbiA9IF92YXJzLnBpbixcbiAgICAgICAgICBwaW5TcGFjaW5nID0gX3ZhcnMucGluU3BhY2luZyxcbiAgICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoID0gX3ZhcnMuaW52YWxpZGF0ZU9uUmVmcmVzaCxcbiAgICAgICAgICBhbnRpY2lwYXRlUGluID0gX3ZhcnMuYW50aWNpcGF0ZVBpbixcbiAgICAgICAgICBvblNjcnViQ29tcGxldGUgPSBfdmFycy5vblNjcnViQ29tcGxldGUsXG4gICAgICAgICAgb25TbmFwQ29tcGxldGUgPSBfdmFycy5vblNuYXBDb21wbGV0ZSxcbiAgICAgICAgICBvbmNlID0gX3ZhcnMub25jZSxcbiAgICAgICAgICBzbmFwID0gX3ZhcnMuc25hcCxcbiAgICAgICAgICBwaW5SZXBhcmVudCA9IF92YXJzLnBpblJlcGFyZW50LFxuICAgICAgICAgIHBpblNwYWNlciA9IF92YXJzLnBpblNwYWNlcixcbiAgICAgICAgICBjb250YWluZXJBbmltYXRpb24gPSBfdmFycy5jb250YWluZXJBbmltYXRpb24sXG4gICAgICAgICAgZmFzdFNjcm9sbEVuZCA9IF92YXJzLmZhc3RTY3JvbGxFbmQsXG4gICAgICAgICAgcHJldmVudE92ZXJsYXBzID0gX3ZhcnMucHJldmVudE92ZXJsYXBzLFxuICAgICAgICAgIGRpcmVjdGlvbiA9IHZhcnMuaG9yaXpvbnRhbCB8fCB2YXJzLmNvbnRhaW5lckFuaW1hdGlvbiAmJiB2YXJzLmhvcml6b250YWwgIT09IGZhbHNlID8gX2hvcml6b250YWwgOiBfdmVydGljYWwsXG4gICAgICAgICAgaXNUb2dnbGUgPSAhc2NydWIgJiYgc2NydWIgIT09IDAsXG4gICAgICAgICAgc2Nyb2xsZXIgPSBfZ2V0VGFyZ2V0KHZhcnMuc2Nyb2xsZXIgfHwgX3dpbiQxKSxcbiAgICAgICAgICBzY3JvbGxlckNhY2hlID0gZ3NhcCQxLmNvcmUuZ2V0Q2FjaGUoc2Nyb2xsZXIpLFxuICAgICAgICAgIGlzVmlld3BvcnQgPSBfaXNWaWV3cG9ydCQxKHNjcm9sbGVyKSxcbiAgICAgICAgICB1c2VGaXhlZFBvc2l0aW9uID0gKFwicGluVHlwZVwiIGluIHZhcnMgPyB2YXJzLnBpblR5cGUgOiBfZ2V0UHJveHlQcm9wKHNjcm9sbGVyLCBcInBpblR5cGVcIikgfHwgaXNWaWV3cG9ydCAmJiBcImZpeGVkXCIpID09PSBcImZpeGVkXCIsXG4gICAgICAgICAgY2FsbGJhY2tzID0gW3ZhcnMub25FbnRlciwgdmFycy5vbkxlYXZlLCB2YXJzLm9uRW50ZXJCYWNrLCB2YXJzLm9uTGVhdmVCYWNrXSxcbiAgICAgICAgICB0b2dnbGVBY3Rpb25zID0gaXNUb2dnbGUgJiYgdmFycy50b2dnbGVBY3Rpb25zLnNwbGl0KFwiIFwiKSxcbiAgICAgICAgICBtYXJrZXJzID0gXCJtYXJrZXJzXCIgaW4gdmFycyA/IHZhcnMubWFya2VycyA6IF9kZWZhdWx0cy5tYXJrZXJzLFxuICAgICAgICAgIGJvcmRlcldpZHRoID0gaXNWaWV3cG9ydCA/IDAgOiBwYXJzZUZsb2F0KF9nZXRDb21wdXRlZFN0eWxlKHNjcm9sbGVyKVtcImJvcmRlclwiICsgZGlyZWN0aW9uLnAyICsgX1dpZHRoXSkgfHwgMCxcbiAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICBvblJlZnJlc2hJbml0ID0gdmFycy5vblJlZnJlc2hJbml0ICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHZhcnMub25SZWZyZXNoSW5pdChzZWxmKTtcbiAgICAgIH0sXG4gICAgICAgICAgZ2V0U2Nyb2xsZXJTaXplID0gX2dldFNpemVGdW5jKHNjcm9sbGVyLCBpc1ZpZXdwb3J0LCBkaXJlY3Rpb24pLFxuICAgICAgICAgIGdldFNjcm9sbGVyT2Zmc2V0cyA9IF9nZXRPZmZzZXRzRnVuYyhzY3JvbGxlciwgaXNWaWV3cG9ydCksXG4gICAgICAgICAgbGFzdFNuYXAgPSAwLFxuICAgICAgICAgIGxhc3RSZWZyZXNoID0gMCxcbiAgICAgICAgICBwcmV2UHJvZ3Jlc3MgPSAwLFxuICAgICAgICAgIHNjcm9sbEZ1bmMgPSBfZ2V0U2Nyb2xsRnVuYyhzY3JvbGxlciwgZGlyZWN0aW9uKSxcbiAgICAgICAgICB0d2VlblRvLFxuICAgICAgICAgIHBpbkNhY2hlLFxuICAgICAgICAgIHNuYXBGdW5jLFxuICAgICAgICAgIHNjcm9sbDEsXG4gICAgICAgICAgc2Nyb2xsMixcbiAgICAgICAgICBzdGFydCxcbiAgICAgICAgICBlbmQsXG4gICAgICAgICAgbWFya2VyU3RhcnQsXG4gICAgICAgICAgbWFya2VyRW5kLFxuICAgICAgICAgIG1hcmtlclN0YXJ0VHJpZ2dlcixcbiAgICAgICAgICBtYXJrZXJFbmRUcmlnZ2VyLFxuICAgICAgICAgIG1hcmtlclZhcnMsXG4gICAgICAgICAgZXhlY3V0aW5nT25SZWZyZXNoLFxuICAgICAgICAgIGNoYW5nZSxcbiAgICAgICAgICBwaW5PcmlnaW5hbFN0YXRlLFxuICAgICAgICAgIHBpbkFjdGl2ZVN0YXRlLFxuICAgICAgICAgIHBpblN0YXRlLFxuICAgICAgICAgIHNwYWNlcixcbiAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgcGluR2V0dGVyLFxuICAgICAgICAgIHBpblNldHRlcixcbiAgICAgICAgICBwaW5TdGFydCxcbiAgICAgICAgICBwaW5DaGFuZ2UsXG4gICAgICAgICAgc3BhY2luZ1N0YXJ0LFxuICAgICAgICAgIHNwYWNlclN0YXRlLFxuICAgICAgICAgIG1hcmtlclN0YXJ0U2V0dGVyLFxuICAgICAgICAgIHBpbk1vdmVzLFxuICAgICAgICAgIG1hcmtlckVuZFNldHRlcixcbiAgICAgICAgICBjcyxcbiAgICAgICAgICBzbmFwMSxcbiAgICAgICAgICBzbmFwMixcbiAgICAgICAgICBzY3J1YlR3ZWVuLFxuICAgICAgICAgIHNjcnViU21vb3RoLFxuICAgICAgICAgIHNuYXBEdXJDbGFtcCxcbiAgICAgICAgICBzbmFwRGVsYXllZENhbGwsXG4gICAgICAgICAgcHJldlNjcm9sbCxcbiAgICAgICAgICBwcmV2QW5pbVByb2dyZXNzLFxuICAgICAgICAgIGNhTWFya2VyU2V0dGVyLFxuICAgICAgICAgIGN1c3RvbVJldmVydFJldHVybjtcblxuICAgICAgc2VsZi5fc3RhcnRDbGFtcCA9IHNlbGYuX2VuZENsYW1wID0gZmFsc2U7XG4gICAgICBzZWxmLl9kaXIgPSBkaXJlY3Rpb247XG4gICAgICBhbnRpY2lwYXRlUGluICo9IDQ1O1xuICAgICAgc2VsZi5zY3JvbGxlciA9IHNjcm9sbGVyO1xuICAgICAgc2VsZi5zY3JvbGwgPSBjb250YWluZXJBbmltYXRpb24gPyBjb250YWluZXJBbmltYXRpb24udGltZS5iaW5kKGNvbnRhaW5lckFuaW1hdGlvbikgOiBzY3JvbGxGdW5jO1xuICAgICAgc2Nyb2xsMSA9IHNjcm9sbEZ1bmMoKTtcbiAgICAgIHNlbGYudmFycyA9IHZhcnM7XG4gICAgICBhbmltYXRpb24gPSBhbmltYXRpb24gfHwgdmFycy5hbmltYXRpb247XG5cbiAgICAgIGlmIChcInJlZnJlc2hQcmlvcml0eVwiIGluIHZhcnMpIHtcbiAgICAgICAgX3NvcnQgPSAxO1xuICAgICAgICB2YXJzLnJlZnJlc2hQcmlvcml0eSA9PT0gLTk5OTkgJiYgKF9wcmltYXJ5ID0gc2VsZik7XG4gICAgICB9XG5cbiAgICAgIHNjcm9sbGVyQ2FjaGUudHdlZW5TY3JvbGwgPSBzY3JvbGxlckNhY2hlLnR3ZWVuU2Nyb2xsIHx8IHtcbiAgICAgICAgdG9wOiBfZ2V0VHdlZW5DcmVhdG9yKHNjcm9sbGVyLCBfdmVydGljYWwpLFxuICAgICAgICBsZWZ0OiBfZ2V0VHdlZW5DcmVhdG9yKHNjcm9sbGVyLCBfaG9yaXpvbnRhbClcbiAgICAgIH07XG4gICAgICBzZWxmLnR3ZWVuVG8gPSB0d2VlblRvID0gc2Nyb2xsZXJDYWNoZS50d2VlblNjcm9sbFtkaXJlY3Rpb24ucF07XG5cbiAgICAgIHNlbGYuc2NydWJEdXJhdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBzY3J1YlNtb290aCA9IF9pc051bWJlcih2YWx1ZSkgJiYgdmFsdWU7XG5cbiAgICAgICAgaWYgKCFzY3J1YlNtb290aCkge1xuICAgICAgICAgIHNjcnViVHdlZW4gJiYgc2NydWJUd2Vlbi5wcm9ncmVzcygxKS5raWxsKCk7XG4gICAgICAgICAgc2NydWJUd2VlbiA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2NydWJUd2VlbiA/IHNjcnViVHdlZW4uZHVyYXRpb24odmFsdWUpIDogc2NydWJUd2VlbiA9IGdzYXAkMS50byhhbmltYXRpb24sIHtcbiAgICAgICAgICAgIGVhc2U6IFwiZXhwb1wiLFxuICAgICAgICAgICAgdG90YWxQcm9ncmVzczogXCIrPTBcIixcbiAgICAgICAgICAgIGluaGVyaXQ6IGZhbHNlLFxuICAgICAgICAgICAgZHVyYXRpb246IHNjcnViU21vb3RoLFxuICAgICAgICAgICAgcGF1c2VkOiB0cnVlLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9uU2NydWJDb21wbGV0ZSAmJiBvblNjcnViQ29tcGxldGUoc2VsZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmIChhbmltYXRpb24pIHtcbiAgICAgICAgYW5pbWF0aW9uLnZhcnMubGF6eSA9IGZhbHNlO1xuICAgICAgICBhbmltYXRpb24uX2luaXR0ZWQgJiYgIXNlbGYuaXNSZXZlcnRlZCB8fCBhbmltYXRpb24udmFycy5pbW1lZGlhdGVSZW5kZXIgIT09IGZhbHNlICYmIHZhcnMuaW1tZWRpYXRlUmVuZGVyICE9PSBmYWxzZSAmJiBhbmltYXRpb24uZHVyYXRpb24oKSAmJiBhbmltYXRpb24ucmVuZGVyKDAsIHRydWUsIHRydWUpO1xuICAgICAgICBzZWxmLmFuaW1hdGlvbiA9IGFuaW1hdGlvbi5wYXVzZSgpO1xuICAgICAgICBhbmltYXRpb24uc2Nyb2xsVHJpZ2dlciA9IHNlbGY7XG4gICAgICAgIHNlbGYuc2NydWJEdXJhdGlvbihzY3J1Yik7XG4gICAgICAgIHNuYXAxID0gMDtcbiAgICAgICAgaWQgfHwgKGlkID0gYW5pbWF0aW9uLnZhcnMuaWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc25hcCkge1xuICAgICAgICBpZiAoIV9pc09iamVjdChzbmFwKSB8fCBzbmFwLnB1c2gpIHtcbiAgICAgICAgICBzbmFwID0ge1xuICAgICAgICAgICAgc25hcFRvOiBzbmFwXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIFwic2Nyb2xsQmVoYXZpb3JcIiBpbiBfYm9keSQxLnN0eWxlICYmIGdzYXAkMS5zZXQoaXNWaWV3cG9ydCA/IFtfYm9keSQxLCBfZG9jRWwkMV0gOiBzY3JvbGxlciwge1xuICAgICAgICAgIHNjcm9sbEJlaGF2aW9yOiBcImF1dG9cIlxuICAgICAgICB9KTtcblxuICAgICAgICBfc2Nyb2xsZXJzLmZvckVhY2goZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICByZXR1cm4gX2lzRnVuY3Rpb24obykgJiYgby50YXJnZXQgPT09IChpc1ZpZXdwb3J0ID8gX2RvYyQxLnNjcm9sbGluZ0VsZW1lbnQgfHwgX2RvY0VsJDEgOiBzY3JvbGxlcikgJiYgKG8uc21vb3RoID0gZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzbmFwRnVuYyA9IF9pc0Z1bmN0aW9uKHNuYXAuc25hcFRvKSA/IHNuYXAuc25hcFRvIDogc25hcC5zbmFwVG8gPT09IFwibGFiZWxzXCIgPyBfZ2V0Q2xvc2VzdExhYmVsKGFuaW1hdGlvbikgOiBzbmFwLnNuYXBUbyA9PT0gXCJsYWJlbHNEaXJlY3Rpb25hbFwiID8gX2dldExhYmVsQXREaXJlY3Rpb24oYW5pbWF0aW9uKSA6IHNuYXAuZGlyZWN0aW9uYWwgIT09IGZhbHNlID8gZnVuY3Rpb24gKHZhbHVlLCBzdCkge1xuICAgICAgICAgIHJldHVybiBfc25hcERpcmVjdGlvbmFsKHNuYXAuc25hcFRvKSh2YWx1ZSwgX2dldFRpbWUkMSgpIC0gbGFzdFJlZnJlc2ggPCA1MDAgPyAwIDogc3QuZGlyZWN0aW9uKTtcbiAgICAgICAgfSA6IGdzYXAkMS51dGlscy5zbmFwKHNuYXAuc25hcFRvKTtcbiAgICAgICAgc25hcER1ckNsYW1wID0gc25hcC5kdXJhdGlvbiB8fCB7XG4gICAgICAgICAgbWluOiAwLjEsXG4gICAgICAgICAgbWF4OiAyXG4gICAgICAgIH07XG4gICAgICAgIHNuYXBEdXJDbGFtcCA9IF9pc09iamVjdChzbmFwRHVyQ2xhbXApID8gX2NsYW1wJDEoc25hcER1ckNsYW1wLm1pbiwgc25hcER1ckNsYW1wLm1heCkgOiBfY2xhbXAkMShzbmFwRHVyQ2xhbXAsIHNuYXBEdXJDbGFtcCk7XG4gICAgICAgIHNuYXBEZWxheWVkQ2FsbCA9IGdzYXAkMS5kZWxheWVkQ2FsbChzbmFwLmRlbGF5IHx8IHNjcnViU21vb3RoIC8gMiB8fCAwLjEsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc2Nyb2xsID0gc2Nyb2xsRnVuYygpLFxuICAgICAgICAgICAgICByZWZyZXNoZWRSZWNlbnRseSA9IF9nZXRUaW1lJDEoKSAtIGxhc3RSZWZyZXNoIDwgNTAwLFxuICAgICAgICAgICAgICB0d2VlbiA9IHR3ZWVuVG8udHdlZW47XG5cbiAgICAgICAgICBpZiAoKHJlZnJlc2hlZFJlY2VudGx5IHx8IE1hdGguYWJzKHNlbGYuZ2V0VmVsb2NpdHkoKSkgPCAxMCkgJiYgIXR3ZWVuICYmICFfcG9pbnRlcklzRG93biAmJiBsYXN0U25hcCAhPT0gc2Nyb2xsKSB7XG4gICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAoc2Nyb2xsIC0gc3RhcnQpIC8gY2hhbmdlLFxuICAgICAgICAgICAgICAgIHRvdGFsUHJvZ3Jlc3MgPSBhbmltYXRpb24gJiYgIWlzVG9nZ2xlID8gYW5pbWF0aW9uLnRvdGFsUHJvZ3Jlc3MoKSA6IHByb2dyZXNzLFxuICAgICAgICAgICAgICAgIHZlbG9jaXR5ID0gcmVmcmVzaGVkUmVjZW50bHkgPyAwIDogKHRvdGFsUHJvZ3Jlc3MgLSBzbmFwMikgLyAoX2dldFRpbWUkMSgpIC0gX3RpbWUyKSAqIDEwMDAgfHwgMCxcbiAgICAgICAgICAgICAgICBjaGFuZ2UxID0gZ3NhcCQxLnV0aWxzLmNsYW1wKC1wcm9ncmVzcywgMSAtIHByb2dyZXNzLCBfYWJzKHZlbG9jaXR5IC8gMikgKiB2ZWxvY2l0eSAvIDAuMTg1KSxcbiAgICAgICAgICAgICAgICBuYXR1cmFsRW5kID0gcHJvZ3Jlc3MgKyAoc25hcC5pbmVydGlhID09PSBmYWxzZSA/IDAgOiBjaGFuZ2UxKSxcbiAgICAgICAgICAgICAgICBlbmRWYWx1ZSxcbiAgICAgICAgICAgICAgICBlbmRTY3JvbGwsXG4gICAgICAgICAgICAgICAgX3NuYXAgPSBzbmFwLFxuICAgICAgICAgICAgICAgIG9uU3RhcnQgPSBfc25hcC5vblN0YXJ0LFxuICAgICAgICAgICAgICAgIF9vbkludGVycnVwdCA9IF9zbmFwLm9uSW50ZXJydXB0LFxuICAgICAgICAgICAgICAgIF9vbkNvbXBsZXRlID0gX3NuYXAub25Db21wbGV0ZTtcbiAgICAgICAgICAgIGVuZFZhbHVlID0gc25hcEZ1bmMobmF0dXJhbEVuZCwgc2VsZik7XG4gICAgICAgICAgICBfaXNOdW1iZXIoZW5kVmFsdWUpIHx8IChlbmRWYWx1ZSA9IG5hdHVyYWxFbmQpO1xuICAgICAgICAgICAgZW5kU2Nyb2xsID0gTWF0aC5yb3VuZChzdGFydCArIGVuZFZhbHVlICogY2hhbmdlKTtcblxuICAgICAgICAgICAgaWYgKHNjcm9sbCA8PSBlbmQgJiYgc2Nyb2xsID49IHN0YXJ0ICYmIGVuZFNjcm9sbCAhPT0gc2Nyb2xsKSB7XG4gICAgICAgICAgICAgIGlmICh0d2VlbiAmJiAhdHdlZW4uX2luaXR0ZWQgJiYgdHdlZW4uZGF0YSA8PSBfYWJzKGVuZFNjcm9sbCAtIHNjcm9sbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoc25hcC5pbmVydGlhID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZTEgPSBlbmRWYWx1ZSAtIHByb2dyZXNzO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdHdlZW5UbyhlbmRTY3JvbGwsIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogc25hcER1ckNsYW1wKF9hYnMoTWF0aC5tYXgoX2FicyhuYXR1cmFsRW5kIC0gdG90YWxQcm9ncmVzcyksIF9hYnMoZW5kVmFsdWUgLSB0b3RhbFByb2dyZXNzKSkgKiAwLjE4NSAvIHZlbG9jaXR5IC8gMC4wNSB8fCAwKSksXG4gICAgICAgICAgICAgICAgZWFzZTogc25hcC5lYXNlIHx8IFwicG93ZXIzXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogX2FicyhlbmRTY3JvbGwgLSBzY3JvbGwpLFxuICAgICAgICAgICAgICAgIG9uSW50ZXJydXB0OiBmdW5jdGlvbiBvbkludGVycnVwdCgpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBzbmFwRGVsYXllZENhbGwucmVzdGFydCh0cnVlKSAmJiBfb25JbnRlcnJ1cHQgJiYgX29uSW50ZXJydXB0KHNlbGYpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICBsYXN0U25hcCA9IHNjcm9sbEZ1bmMoKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzY3J1YlR3ZWVuID8gc2NydWJUd2Vlbi5yZXNldFRvKFwidG90YWxQcm9ncmVzc1wiLCBlbmRWYWx1ZSwgYW5pbWF0aW9uLl90VGltZSAvIGFuaW1hdGlvbi5fdER1cikgOiBhbmltYXRpb24ucHJvZ3Jlc3MoZW5kVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBzbmFwMSA9IHNuYXAyID0gYW5pbWF0aW9uICYmICFpc1RvZ2dsZSA/IGFuaW1hdGlvbi50b3RhbFByb2dyZXNzKCkgOiBzZWxmLnByb2dyZXNzO1xuICAgICAgICAgICAgICAgICAgb25TbmFwQ29tcGxldGUgJiYgb25TbmFwQ29tcGxldGUoc2VsZik7XG4gICAgICAgICAgICAgICAgICBfb25Db21wbGV0ZSAmJiBfb25Db21wbGV0ZShzZWxmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sIHNjcm9sbCwgY2hhbmdlMSAqIGNoYW5nZSwgZW5kU2Nyb2xsIC0gc2Nyb2xsIC0gY2hhbmdlMSAqIGNoYW5nZSk7XG4gICAgICAgICAgICAgIG9uU3RhcnQgJiYgb25TdGFydChzZWxmLCB0d2VlblRvLnR3ZWVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuaXNBY3RpdmUgJiYgbGFzdFNuYXAgIT09IHNjcm9sbCkge1xuICAgICAgICAgICAgc25hcERlbGF5ZWRDYWxsLnJlc3RhcnQodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5wYXVzZSgpO1xuICAgICAgfVxuXG4gICAgICBpZCAmJiAoX2lkc1tpZF0gPSBzZWxmKTtcbiAgICAgIHRyaWdnZXIgPSBzZWxmLnRyaWdnZXIgPSBfZ2V0VGFyZ2V0KHRyaWdnZXIgfHwgcGluICE9PSB0cnVlICYmIHBpbik7XG4gICAgICBjdXN0b21SZXZlcnRSZXR1cm4gPSB0cmlnZ2VyICYmIHRyaWdnZXIuX2dzYXAgJiYgdHJpZ2dlci5fZ3NhcC5zdFJldmVydDtcbiAgICAgIGN1c3RvbVJldmVydFJldHVybiAmJiAoY3VzdG9tUmV2ZXJ0UmV0dXJuID0gY3VzdG9tUmV2ZXJ0UmV0dXJuKHNlbGYpKTtcbiAgICAgIHBpbiA9IHBpbiA9PT0gdHJ1ZSA/IHRyaWdnZXIgOiBfZ2V0VGFyZ2V0KHBpbik7XG4gICAgICBfaXNTdHJpbmcodG9nZ2xlQ2xhc3MpICYmICh0b2dnbGVDbGFzcyA9IHtcbiAgICAgICAgdGFyZ2V0czogdHJpZ2dlcixcbiAgICAgICAgY2xhc3NOYW1lOiB0b2dnbGVDbGFzc1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChwaW4pIHtcbiAgICAgICAgcGluU3BhY2luZyA9PT0gZmFsc2UgfHwgcGluU3BhY2luZyA9PT0gX21hcmdpbiB8fCAocGluU3BhY2luZyA9ICFwaW5TcGFjaW5nICYmIHBpbi5wYXJlbnROb2RlICYmIHBpbi5wYXJlbnROb2RlLnN0eWxlICYmIF9nZXRDb21wdXRlZFN0eWxlKHBpbi5wYXJlbnROb2RlKS5kaXNwbGF5ID09PSBcImZsZXhcIiA/IGZhbHNlIDogX3BhZGRpbmcpO1xuICAgICAgICBzZWxmLnBpbiA9IHBpbjtcbiAgICAgICAgcGluQ2FjaGUgPSBnc2FwJDEuY29yZS5nZXRDYWNoZShwaW4pO1xuXG4gICAgICAgIGlmICghcGluQ2FjaGUuc3BhY2VyKSB7XG4gICAgICAgICAgaWYgKHBpblNwYWNlcikge1xuICAgICAgICAgICAgcGluU3BhY2VyID0gX2dldFRhcmdldChwaW5TcGFjZXIpO1xuICAgICAgICAgICAgcGluU3BhY2VyICYmICFwaW5TcGFjZXIubm9kZVR5cGUgJiYgKHBpblNwYWNlciA9IHBpblNwYWNlci5jdXJyZW50IHx8IHBpblNwYWNlci5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgICAgIHBpbkNhY2hlLnNwYWNlcklzTmF0aXZlID0gISFwaW5TcGFjZXI7XG4gICAgICAgICAgICBwaW5TcGFjZXIgJiYgKHBpbkNhY2hlLnNwYWNlclN0YXRlID0gX2dldFN0YXRlKHBpblNwYWNlcikpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHBpbkNhY2hlLnNwYWNlciA9IHNwYWNlciA9IHBpblNwYWNlciB8fCBfZG9jJDEuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICBzcGFjZXIuY2xhc3NMaXN0LmFkZChcInBpbi1zcGFjZXJcIik7XG4gICAgICAgICAgaWQgJiYgc3BhY2VyLmNsYXNzTGlzdC5hZGQoXCJwaW4tc3BhY2VyLVwiICsgaWQpO1xuICAgICAgICAgIHBpbkNhY2hlLnBpblN0YXRlID0gcGluT3JpZ2luYWxTdGF0ZSA9IF9nZXRTdGF0ZShwaW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBpbk9yaWdpbmFsU3RhdGUgPSBwaW5DYWNoZS5waW5TdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhcnMuZm9yY2UzRCAhPT0gZmFsc2UgJiYgZ3NhcCQxLnNldChwaW4sIHtcbiAgICAgICAgICBmb3JjZTNEOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLnNwYWNlciA9IHNwYWNlciA9IHBpbkNhY2hlLnNwYWNlcjtcbiAgICAgICAgY3MgPSBfZ2V0Q29tcHV0ZWRTdHlsZShwaW4pO1xuICAgICAgICBzcGFjaW5nU3RhcnQgPSBjc1twaW5TcGFjaW5nICsgZGlyZWN0aW9uLm9zMl07XG4gICAgICAgIHBpbkdldHRlciA9IGdzYXAkMS5nZXRQcm9wZXJ0eShwaW4pO1xuICAgICAgICBwaW5TZXR0ZXIgPSBnc2FwJDEucXVpY2tTZXR0ZXIocGluLCBkaXJlY3Rpb24uYSwgX3B4KTtcblxuICAgICAgICBfc3dhcFBpbkluKHBpbiwgc3BhY2VyLCBjcyk7XG5cbiAgICAgICAgcGluU3RhdGUgPSBfZ2V0U3RhdGUocGluKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1hcmtlcnMpIHtcbiAgICAgICAgbWFya2VyVmFycyA9IF9pc09iamVjdChtYXJrZXJzKSA/IF9zZXREZWZhdWx0cyhtYXJrZXJzLCBfbWFya2VyRGVmYXVsdHMpIDogX21hcmtlckRlZmF1bHRzO1xuICAgICAgICBtYXJrZXJTdGFydFRyaWdnZXIgPSBfY3JlYXRlTWFya2VyKFwic2Nyb2xsZXItc3RhcnRcIiwgaWQsIHNjcm9sbGVyLCBkaXJlY3Rpb24sIG1hcmtlclZhcnMsIDApO1xuICAgICAgICBtYXJrZXJFbmRUcmlnZ2VyID0gX2NyZWF0ZU1hcmtlcihcInNjcm9sbGVyLWVuZFwiLCBpZCwgc2Nyb2xsZXIsIGRpcmVjdGlvbiwgbWFya2VyVmFycywgMCwgbWFya2VyU3RhcnRUcmlnZ2VyKTtcbiAgICAgICAgb2Zmc2V0ID0gbWFya2VyU3RhcnRUcmlnZ2VyW1wib2Zmc2V0XCIgKyBkaXJlY3Rpb24ub3AuZDJdO1xuXG4gICAgICAgIHZhciBjb250ZW50ID0gX2dldFRhcmdldChfZ2V0UHJveHlQcm9wKHNjcm9sbGVyLCBcImNvbnRlbnRcIikgfHwgc2Nyb2xsZXIpO1xuXG4gICAgICAgIG1hcmtlclN0YXJ0ID0gdGhpcy5tYXJrZXJTdGFydCA9IF9jcmVhdGVNYXJrZXIoXCJzdGFydFwiLCBpZCwgY29udGVudCwgZGlyZWN0aW9uLCBtYXJrZXJWYXJzLCBvZmZzZXQsIDAsIGNvbnRhaW5lckFuaW1hdGlvbik7XG4gICAgICAgIG1hcmtlckVuZCA9IHRoaXMubWFya2VyRW5kID0gX2NyZWF0ZU1hcmtlcihcImVuZFwiLCBpZCwgY29udGVudCwgZGlyZWN0aW9uLCBtYXJrZXJWYXJzLCBvZmZzZXQsIDAsIGNvbnRhaW5lckFuaW1hdGlvbik7XG4gICAgICAgIGNvbnRhaW5lckFuaW1hdGlvbiAmJiAoY2FNYXJrZXJTZXR0ZXIgPSBnc2FwJDEucXVpY2tTZXR0ZXIoW21hcmtlclN0YXJ0LCBtYXJrZXJFbmRdLCBkaXJlY3Rpb24uYSwgX3B4KSk7XG5cbiAgICAgICAgaWYgKCF1c2VGaXhlZFBvc2l0aW9uICYmICEoX3Byb3hpZXMubGVuZ3RoICYmIF9nZXRQcm94eVByb3Aoc2Nyb2xsZXIsIFwiZml4ZWRNYXJrZXJzXCIpID09PSB0cnVlKSkge1xuICAgICAgICAgIF9tYWtlUG9zaXRpb25hYmxlKGlzVmlld3BvcnQgPyBfYm9keSQxIDogc2Nyb2xsZXIpO1xuXG4gICAgICAgICAgZ3NhcCQxLnNldChbbWFya2VyU3RhcnRUcmlnZ2VyLCBtYXJrZXJFbmRUcmlnZ2VyXSwge1xuICAgICAgICAgICAgZm9yY2UzRDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG1hcmtlclN0YXJ0U2V0dGVyID0gZ3NhcCQxLnF1aWNrU2V0dGVyKG1hcmtlclN0YXJ0VHJpZ2dlciwgZGlyZWN0aW9uLmEsIF9weCk7XG4gICAgICAgICAgbWFya2VyRW5kU2V0dGVyID0gZ3NhcCQxLnF1aWNrU2V0dGVyKG1hcmtlckVuZFRyaWdnZXIsIGRpcmVjdGlvbi5hLCBfcHgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250YWluZXJBbmltYXRpb24pIHtcbiAgICAgICAgdmFyIG9sZE9uVXBkYXRlID0gY29udGFpbmVyQW5pbWF0aW9uLnZhcnMub25VcGRhdGUsXG4gICAgICAgICAgICBvbGRQYXJhbXMgPSBjb250YWluZXJBbmltYXRpb24udmFycy5vblVwZGF0ZVBhcmFtcztcbiAgICAgICAgY29udGFpbmVyQW5pbWF0aW9uLmV2ZW50Q2FsbGJhY2soXCJvblVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi51cGRhdGUoMCwgMCwgMSk7XG4gICAgICAgICAgb2xkT25VcGRhdGUgJiYgb2xkT25VcGRhdGUuYXBwbHkoY29udGFpbmVyQW5pbWF0aW9uLCBvbGRQYXJhbXMgfHwgW10pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgc2VsZi5wcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90cmlnZ2Vyc1tfdHJpZ2dlcnMuaW5kZXhPZihzZWxmKSAtIDFdO1xuICAgICAgfTtcblxuICAgICAgc2VsZi5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RyaWdnZXJzW190cmlnZ2Vycy5pbmRleE9mKHNlbGYpICsgMV07XG4gICAgICB9O1xuXG4gICAgICBzZWxmLnJldmVydCA9IGZ1bmN0aW9uIChyZXZlcnQsIHRlbXApIHtcbiAgICAgICAgaWYgKCF0ZW1wKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYua2lsbCh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByID0gcmV2ZXJ0ICE9PSBmYWxzZSB8fCAhc2VsZi5lbmFibGVkLFxuICAgICAgICAgICAgcHJldlJlZnJlc2hpbmcgPSBfcmVmcmVzaGluZztcblxuICAgICAgICBpZiAociAhPT0gc2VsZi5pc1JldmVydGVkKSB7XG4gICAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgIHByZXZTY3JvbGwgPSBNYXRoLm1heChzY3JvbGxGdW5jKCksIHNlbGYuc2Nyb2xsLnJlYyB8fCAwKTtcbiAgICAgICAgICAgIHByZXZQcm9ncmVzcyA9IHNlbGYucHJvZ3Jlc3M7XG4gICAgICAgICAgICBwcmV2QW5pbVByb2dyZXNzID0gYW5pbWF0aW9uICYmIGFuaW1hdGlvbi5wcm9ncmVzcygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1hcmtlclN0YXJ0ICYmIFttYXJrZXJTdGFydCwgbWFya2VyRW5kLCBtYXJrZXJTdGFydFRyaWdnZXIsIG1hcmtlckVuZFRyaWdnZXJdLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiBtLnN0eWxlLmRpc3BsYXkgPSByID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgX3JlZnJlc2hpbmcgPSBzZWxmO1xuICAgICAgICAgICAgc2VsZi51cGRhdGUocik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHBpbiAmJiAoIXBpblJlcGFyZW50IHx8ICFzZWxmLmlzQWN0aXZlKSkge1xuICAgICAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgICAgX3N3YXBQaW5PdXQocGluLCBzcGFjZXIsIHBpbk9yaWdpbmFsU3RhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX3N3YXBQaW5JbihwaW4sIHNwYWNlciwgX2dldENvbXB1dGVkU3R5bGUocGluKSwgc3BhY2VyU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHIgfHwgc2VsZi51cGRhdGUocik7XG4gICAgICAgICAgX3JlZnJlc2hpbmcgPSBwcmV2UmVmcmVzaGluZztcbiAgICAgICAgICBzZWxmLmlzUmV2ZXJ0ZWQgPSByO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLnJlZnJlc2ggPSBmdW5jdGlvbiAoc29mdCwgZm9yY2UsIHBvc2l0aW9uLCBwaW5PZmZzZXQpIHtcbiAgICAgICAgaWYgKChfcmVmcmVzaGluZyB8fCAhc2VsZi5lbmFibGVkKSAmJiAhZm9yY2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGluICYmIHNvZnQgJiYgX2xhc3RTY3JvbGxUaW1lKSB7XG4gICAgICAgICAgX2FkZExpc3RlbmVyJDEoU2Nyb2xsVHJpZ2dlciwgXCJzY3JvbGxFbmRcIiwgX3NvZnRSZWZyZXNoKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICFfcmVmcmVzaGluZ0FsbCAmJiBvblJlZnJlc2hJbml0ICYmIG9uUmVmcmVzaEluaXQoc2VsZik7XG4gICAgICAgIF9yZWZyZXNoaW5nID0gc2VsZjtcblxuICAgICAgICBpZiAodHdlZW5Uby50d2VlbiAmJiAhcG9zaXRpb24pIHtcbiAgICAgICAgICB0d2VlblRvLnR3ZWVuLmtpbGwoKTtcbiAgICAgICAgICB0d2VlblRvLnR3ZWVuID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjcnViVHdlZW4gJiYgc2NydWJUd2Vlbi5wYXVzZSgpO1xuICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoICYmIGFuaW1hdGlvbiAmJiBhbmltYXRpb24ucmV2ZXJ0KHtcbiAgICAgICAgICBraWxsOiBmYWxzZVxuICAgICAgICB9KS5pbnZhbGlkYXRlKCk7XG4gICAgICAgIHNlbGYuaXNSZXZlcnRlZCB8fCBzZWxmLnJldmVydCh0cnVlLCB0cnVlKTtcbiAgICAgICAgc2VsZi5fc3ViUGluT2Zmc2V0ID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHNpemUgPSBnZXRTY3JvbGxlclNpemUoKSxcbiAgICAgICAgICAgIHNjcm9sbGVyQm91bmRzID0gZ2V0U2Nyb2xsZXJPZmZzZXRzKCksXG4gICAgICAgICAgICBtYXggPSBjb250YWluZXJBbmltYXRpb24gPyBjb250YWluZXJBbmltYXRpb24uZHVyYXRpb24oKSA6IF9tYXhTY3JvbGwoc2Nyb2xsZXIsIGRpcmVjdGlvbiksXG4gICAgICAgICAgICBpc0ZpcnN0UmVmcmVzaCA9IGNoYW5nZSA8PSAwLjAxLFxuICAgICAgICAgICAgb2Zmc2V0ID0gMCxcbiAgICAgICAgICAgIG90aGVyUGluT2Zmc2V0ID0gcGluT2Zmc2V0IHx8IDAsXG4gICAgICAgICAgICBwYXJzZWRFbmQgPSBfaXNPYmplY3QocG9zaXRpb24pID8gcG9zaXRpb24uZW5kIDogdmFycy5lbmQsXG4gICAgICAgICAgICBwYXJzZWRFbmRUcmlnZ2VyID0gdmFycy5lbmRUcmlnZ2VyIHx8IHRyaWdnZXIsXG4gICAgICAgICAgICBwYXJzZWRTdGFydCA9IF9pc09iamVjdChwb3NpdGlvbikgPyBwb3NpdGlvbi5zdGFydCA6IHZhcnMuc3RhcnQgfHwgKHZhcnMuc3RhcnQgPT09IDAgfHwgIXRyaWdnZXIgPyAwIDogcGluID8gXCIwIDBcIiA6IFwiMCAxMDAlXCIpLFxuICAgICAgICAgICAgcGlubmVkQ29udGFpbmVyID0gc2VsZi5waW5uZWRDb250YWluZXIgPSB2YXJzLnBpbm5lZENvbnRhaW5lciAmJiBfZ2V0VGFyZ2V0KHZhcnMucGlubmVkQ29udGFpbmVyLCBzZWxmKSxcbiAgICAgICAgICAgIHRyaWdnZXJJbmRleCA9IHRyaWdnZXIgJiYgTWF0aC5tYXgoMCwgX3RyaWdnZXJzLmluZGV4T2Yoc2VsZikpIHx8IDAsXG4gICAgICAgICAgICBpID0gdHJpZ2dlckluZGV4LFxuICAgICAgICAgICAgY3MsXG4gICAgICAgICAgICBib3VuZHMsXG4gICAgICAgICAgICBzY3JvbGwsXG4gICAgICAgICAgICBpc1ZlcnRpY2FsLFxuICAgICAgICAgICAgb3ZlcnJpZGUsXG4gICAgICAgICAgICBjdXJUcmlnZ2VyLFxuICAgICAgICAgICAgY3VyUGluLFxuICAgICAgICAgICAgb3Bwb3NpdGVTY3JvbGwsXG4gICAgICAgICAgICBpbml0dGVkLFxuICAgICAgICAgICAgcmV2ZXJ0ZWRQaW5zLFxuICAgICAgICAgICAgZm9yY2VkT3ZlcmZsb3csXG4gICAgICAgICAgICBtYXJrZXJTdGFydE9mZnNldCxcbiAgICAgICAgICAgIG1hcmtlckVuZE9mZnNldDtcblxuICAgICAgICBpZiAobWFya2VycyAmJiBfaXNPYmplY3QocG9zaXRpb24pKSB7XG4gICAgICAgICAgbWFya2VyU3RhcnRPZmZzZXQgPSBnc2FwJDEuZ2V0UHJvcGVydHkobWFya2VyU3RhcnRUcmlnZ2VyLCBkaXJlY3Rpb24ucCk7XG4gICAgICAgICAgbWFya2VyRW5kT2Zmc2V0ID0gZ3NhcCQxLmdldFByb3BlcnR5KG1hcmtlckVuZFRyaWdnZXIsIGRpcmVjdGlvbi5wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICBjdXJUcmlnZ2VyID0gX3RyaWdnZXJzW2ldO1xuICAgICAgICAgIGN1clRyaWdnZXIuZW5kIHx8IGN1clRyaWdnZXIucmVmcmVzaCgwLCAxKSB8fCAoX3JlZnJlc2hpbmcgPSBzZWxmKTtcbiAgICAgICAgICBjdXJQaW4gPSBjdXJUcmlnZ2VyLnBpbjtcblxuICAgICAgICAgIGlmIChjdXJQaW4gJiYgKGN1clBpbiA9PT0gdHJpZ2dlciB8fCBjdXJQaW4gPT09IHBpbiB8fCBjdXJQaW4gPT09IHBpbm5lZENvbnRhaW5lcikgJiYgIWN1clRyaWdnZXIuaXNSZXZlcnRlZCkge1xuICAgICAgICAgICAgcmV2ZXJ0ZWRQaW5zIHx8IChyZXZlcnRlZFBpbnMgPSBbXSk7XG4gICAgICAgICAgICByZXZlcnRlZFBpbnMudW5zaGlmdChjdXJUcmlnZ2VyKTtcbiAgICAgICAgICAgIGN1clRyaWdnZXIucmV2ZXJ0KHRydWUsIHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjdXJUcmlnZ2VyICE9PSBfdHJpZ2dlcnNbaV0pIHtcbiAgICAgICAgICAgIHRyaWdnZXJJbmRleC0tO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF9pc0Z1bmN0aW9uKHBhcnNlZFN0YXJ0KSAmJiAocGFyc2VkU3RhcnQgPSBwYXJzZWRTdGFydChzZWxmKSk7XG4gICAgICAgIHBhcnNlZFN0YXJ0ID0gX3BhcnNlQ2xhbXAocGFyc2VkU3RhcnQsIFwic3RhcnRcIiwgc2VsZik7XG4gICAgICAgIHN0YXJ0ID0gX3BhcnNlUG9zaXRpb24ocGFyc2VkU3RhcnQsIHRyaWdnZXIsIHNpemUsIGRpcmVjdGlvbiwgc2Nyb2xsRnVuYygpLCBtYXJrZXJTdGFydCwgbWFya2VyU3RhcnRUcmlnZ2VyLCBzZWxmLCBzY3JvbGxlckJvdW5kcywgYm9yZGVyV2lkdGgsIHVzZUZpeGVkUG9zaXRpb24sIG1heCwgY29udGFpbmVyQW5pbWF0aW9uLCBzZWxmLl9zdGFydENsYW1wICYmIFwiX3N0YXJ0Q2xhbXBcIikgfHwgKHBpbiA/IC0wLjAwMSA6IDApO1xuICAgICAgICBfaXNGdW5jdGlvbihwYXJzZWRFbmQpICYmIChwYXJzZWRFbmQgPSBwYXJzZWRFbmQoc2VsZikpO1xuXG4gICAgICAgIGlmIChfaXNTdHJpbmcocGFyc2VkRW5kKSAmJiAhcGFyc2VkRW5kLmluZGV4T2YoXCIrPVwiKSkge1xuICAgICAgICAgIGlmICh+cGFyc2VkRW5kLmluZGV4T2YoXCIgXCIpKSB7XG4gICAgICAgICAgICBwYXJzZWRFbmQgPSAoX2lzU3RyaW5nKHBhcnNlZFN0YXJ0KSA/IHBhcnNlZFN0YXJ0LnNwbGl0KFwiIFwiKVswXSA6IFwiXCIpICsgcGFyc2VkRW5kO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBfb2Zmc2V0VG9QeChwYXJzZWRFbmQuc3Vic3RyKDIpLCBzaXplKTtcbiAgICAgICAgICAgIHBhcnNlZEVuZCA9IF9pc1N0cmluZyhwYXJzZWRTdGFydCkgPyBwYXJzZWRTdGFydCA6IChjb250YWluZXJBbmltYXRpb24gPyBnc2FwJDEudXRpbHMubWFwUmFuZ2UoMCwgY29udGFpbmVyQW5pbWF0aW9uLmR1cmF0aW9uKCksIGNvbnRhaW5lckFuaW1hdGlvbi5zY3JvbGxUcmlnZ2VyLnN0YXJ0LCBjb250YWluZXJBbmltYXRpb24uc2Nyb2xsVHJpZ2dlci5lbmQsIHN0YXJ0KSA6IHN0YXJ0KSArIG9mZnNldDtcbiAgICAgICAgICAgIHBhcnNlZEVuZFRyaWdnZXIgPSB0cmlnZ2VyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnNlZEVuZCA9IF9wYXJzZUNsYW1wKHBhcnNlZEVuZCwgXCJlbmRcIiwgc2VsZik7XG4gICAgICAgIGVuZCA9IE1hdGgubWF4KHN0YXJ0LCBfcGFyc2VQb3NpdGlvbihwYXJzZWRFbmQgfHwgKHBhcnNlZEVuZFRyaWdnZXIgPyBcIjEwMCUgMFwiIDogbWF4KSwgcGFyc2VkRW5kVHJpZ2dlciwgc2l6ZSwgZGlyZWN0aW9uLCBzY3JvbGxGdW5jKCkgKyBvZmZzZXQsIG1hcmtlckVuZCwgbWFya2VyRW5kVHJpZ2dlciwgc2VsZiwgc2Nyb2xsZXJCb3VuZHMsIGJvcmRlcldpZHRoLCB1c2VGaXhlZFBvc2l0aW9uLCBtYXgsIGNvbnRhaW5lckFuaW1hdGlvbiwgc2VsZi5fZW5kQ2xhbXAgJiYgXCJfZW5kQ2xhbXBcIikpIHx8IC0wLjAwMTtcbiAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgaSA9IHRyaWdnZXJJbmRleDtcblxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY3VyVHJpZ2dlciA9IF90cmlnZ2Vyc1tpXTtcbiAgICAgICAgICBjdXJQaW4gPSBjdXJUcmlnZ2VyLnBpbjtcblxuICAgICAgICAgIGlmIChjdXJQaW4gJiYgY3VyVHJpZ2dlci5zdGFydCAtIGN1clRyaWdnZXIuX3BpblB1c2ggPD0gc3RhcnQgJiYgIWNvbnRhaW5lckFuaW1hdGlvbiAmJiBjdXJUcmlnZ2VyLmVuZCA+IDApIHtcbiAgICAgICAgICAgIGNzID0gY3VyVHJpZ2dlci5lbmQgLSAoc2VsZi5fc3RhcnRDbGFtcCA/IE1hdGgubWF4KDAsIGN1clRyaWdnZXIuc3RhcnQpIDogY3VyVHJpZ2dlci5zdGFydCk7XG5cbiAgICAgICAgICAgIGlmICgoY3VyUGluID09PSB0cmlnZ2VyICYmIGN1clRyaWdnZXIuc3RhcnQgLSBjdXJUcmlnZ2VyLl9waW5QdXNoIDwgc3RhcnQgfHwgY3VyUGluID09PSBwaW5uZWRDb250YWluZXIpICYmIGlzTmFOKHBhcnNlZFN0YXJ0KSkge1xuICAgICAgICAgICAgICBvZmZzZXQgKz0gY3MgKiAoMSAtIGN1clRyaWdnZXIucHJvZ3Jlc3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXJQaW4gPT09IHBpbiAmJiAob3RoZXJQaW5PZmZzZXQgKz0gY3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ICs9IG9mZnNldDtcbiAgICAgICAgZW5kICs9IG9mZnNldDtcbiAgICAgICAgc2VsZi5fc3RhcnRDbGFtcCAmJiAoc2VsZi5fc3RhcnRDbGFtcCArPSBvZmZzZXQpO1xuXG4gICAgICAgIGlmIChzZWxmLl9lbmRDbGFtcCAmJiAhX3JlZnJlc2hpbmdBbGwpIHtcbiAgICAgICAgICBzZWxmLl9lbmRDbGFtcCA9IGVuZCB8fCAtMC4wMDE7XG4gICAgICAgICAgZW5kID0gTWF0aC5taW4oZW5kLCBfbWF4U2Nyb2xsKHNjcm9sbGVyLCBkaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYW5nZSA9IGVuZCAtIHN0YXJ0IHx8IChzdGFydCAtPSAwLjAxKSAmJiAwLjAwMTtcblxuICAgICAgICBpZiAoaXNGaXJzdFJlZnJlc2gpIHtcbiAgICAgICAgICBwcmV2UHJvZ3Jlc3MgPSBnc2FwJDEudXRpbHMuY2xhbXAoMCwgMSwgZ3NhcCQxLnV0aWxzLm5vcm1hbGl6ZShzdGFydCwgZW5kLCBwcmV2U2Nyb2xsKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9waW5QdXNoID0gb3RoZXJQaW5PZmZzZXQ7XG5cbiAgICAgICAgaWYgKG1hcmtlclN0YXJ0ICYmIG9mZnNldCkge1xuICAgICAgICAgIGNzID0ge307XG4gICAgICAgICAgY3NbZGlyZWN0aW9uLmFdID0gXCIrPVwiICsgb2Zmc2V0O1xuICAgICAgICAgIHBpbm5lZENvbnRhaW5lciAmJiAoY3NbZGlyZWN0aW9uLnBdID0gXCItPVwiICsgc2Nyb2xsRnVuYygpKTtcbiAgICAgICAgICBnc2FwJDEuc2V0KFttYXJrZXJTdGFydCwgbWFya2VyRW5kXSwgY3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBpbiAmJiAhKF9jbGFtcGluZ01heCAmJiBzZWxmLmVuZCA+PSBfbWF4U2Nyb2xsKHNjcm9sbGVyLCBkaXJlY3Rpb24pKSkge1xuICAgICAgICAgIGNzID0gX2dldENvbXB1dGVkU3R5bGUocGluKTtcbiAgICAgICAgICBpc1ZlcnRpY2FsID0gZGlyZWN0aW9uID09PSBfdmVydGljYWw7XG4gICAgICAgICAgc2Nyb2xsID0gc2Nyb2xsRnVuYygpO1xuICAgICAgICAgIHBpblN0YXJ0ID0gcGFyc2VGbG9hdChwaW5HZXR0ZXIoZGlyZWN0aW9uLmEpKSArIG90aGVyUGluT2Zmc2V0O1xuXG4gICAgICAgICAgaWYgKCFtYXggJiYgZW5kID4gMSkge1xuICAgICAgICAgICAgZm9yY2VkT3ZlcmZsb3cgPSAoaXNWaWV3cG9ydCA/IF9kb2MkMS5zY3JvbGxpbmdFbGVtZW50IHx8IF9kb2NFbCQxIDogc2Nyb2xsZXIpLnN0eWxlO1xuICAgICAgICAgICAgZm9yY2VkT3ZlcmZsb3cgPSB7XG4gICAgICAgICAgICAgIHN0eWxlOiBmb3JjZWRPdmVyZmxvdyxcbiAgICAgICAgICAgICAgdmFsdWU6IGZvcmNlZE92ZXJmbG93W1wib3ZlcmZsb3dcIiArIGRpcmVjdGlvbi5hLnRvVXBwZXJDYXNlKCldXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoaXNWaWV3cG9ydCAmJiBfZ2V0Q29tcHV0ZWRTdHlsZShfYm9keSQxKVtcIm92ZXJmbG93XCIgKyBkaXJlY3Rpb24uYS50b1VwcGVyQ2FzZSgpXSAhPT0gXCJzY3JvbGxcIikge1xuICAgICAgICAgICAgICBmb3JjZWRPdmVyZmxvdy5zdHlsZVtcIm92ZXJmbG93XCIgKyBkaXJlY3Rpb24uYS50b1VwcGVyQ2FzZSgpXSA9IFwic2Nyb2xsXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3N3YXBQaW5JbihwaW4sIHNwYWNlciwgY3MpO1xuXG4gICAgICAgICAgcGluU3RhdGUgPSBfZ2V0U3RhdGUocGluKTtcbiAgICAgICAgICBib3VuZHMgPSBfZ2V0Qm91bmRzKHBpbiwgdHJ1ZSk7XG4gICAgICAgICAgb3Bwb3NpdGVTY3JvbGwgPSB1c2VGaXhlZFBvc2l0aW9uICYmIF9nZXRTY3JvbGxGdW5jKHNjcm9sbGVyLCBpc1ZlcnRpY2FsID8gX2hvcml6b250YWwgOiBfdmVydGljYWwpKCk7XG5cbiAgICAgICAgICBpZiAocGluU3BhY2luZykge1xuICAgICAgICAgICAgc3BhY2VyU3RhdGUgPSBbcGluU3BhY2luZyArIGRpcmVjdGlvbi5vczIsIGNoYW5nZSArIG90aGVyUGluT2Zmc2V0ICsgX3B4XTtcbiAgICAgICAgICAgIHNwYWNlclN0YXRlLnQgPSBzcGFjZXI7XG4gICAgICAgICAgICBpID0gcGluU3BhY2luZyA9PT0gX3BhZGRpbmcgPyBfZ2V0U2l6ZShwaW4sIGRpcmVjdGlvbikgKyBjaGFuZ2UgKyBvdGhlclBpbk9mZnNldCA6IDA7XG5cbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgIHNwYWNlclN0YXRlLnB1c2goZGlyZWN0aW9uLmQsIGkgKyBfcHgpO1xuICAgICAgICAgICAgICBzcGFjZXIuc3R5bGUuZmxleEJhc2lzICE9PSBcImF1dG9cIiAmJiAoc3BhY2VyLnN0eWxlLmZsZXhCYXNpcyA9IGkgKyBfcHgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfc2V0U3RhdGUoc3BhY2VyU3RhdGUpO1xuXG4gICAgICAgICAgICBpZiAocGlubmVkQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgIF90cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQucGluID09PSBwaW5uZWRDb250YWluZXIgJiYgdC52YXJzLnBpblNwYWNpbmcgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICB0Ll9zdWJQaW5PZmZzZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVzZUZpeGVkUG9zaXRpb24gJiYgc2Nyb2xsRnVuYyhwcmV2U2Nyb2xsKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSA9IF9nZXRTaXplKHBpbiwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGkgJiYgc3BhY2VyLnN0eWxlLmZsZXhCYXNpcyAhPT0gXCJhdXRvXCIgJiYgKHNwYWNlci5zdHlsZS5mbGV4QmFzaXMgPSBpICsgX3B4KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXNlRml4ZWRQb3NpdGlvbikge1xuICAgICAgICAgICAgb3ZlcnJpZGUgPSB7XG4gICAgICAgICAgICAgIHRvcDogYm91bmRzLnRvcCArIChpc1ZlcnRpY2FsID8gc2Nyb2xsIC0gc3RhcnQgOiBvcHBvc2l0ZVNjcm9sbCkgKyBfcHgsXG4gICAgICAgICAgICAgIGxlZnQ6IGJvdW5kcy5sZWZ0ICsgKGlzVmVydGljYWwgPyBvcHBvc2l0ZVNjcm9sbCA6IHNjcm9sbCAtIHN0YXJ0KSArIF9weCxcbiAgICAgICAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG92ZXJyaWRlW193aWR0aF0gPSBvdmVycmlkZVtcIm1heFwiICsgX1dpZHRoXSA9IE1hdGguY2VpbChib3VuZHMud2lkdGgpICsgX3B4O1xuICAgICAgICAgICAgb3ZlcnJpZGVbX2hlaWdodF0gPSBvdmVycmlkZVtcIm1heFwiICsgX0hlaWdodF0gPSBNYXRoLmNlaWwoYm91bmRzLmhlaWdodCkgKyBfcHg7XG4gICAgICAgICAgICBvdmVycmlkZVtfbWFyZ2luXSA9IG92ZXJyaWRlW19tYXJnaW4gKyBfVG9wXSA9IG92ZXJyaWRlW19tYXJnaW4gKyBfUmlnaHRdID0gb3ZlcnJpZGVbX21hcmdpbiArIF9Cb3R0b21dID0gb3ZlcnJpZGVbX21hcmdpbiArIF9MZWZ0XSA9IFwiMFwiO1xuICAgICAgICAgICAgb3ZlcnJpZGVbX3BhZGRpbmddID0gY3NbX3BhZGRpbmddO1xuICAgICAgICAgICAgb3ZlcnJpZGVbX3BhZGRpbmcgKyBfVG9wXSA9IGNzW19wYWRkaW5nICsgX1RvcF07XG4gICAgICAgICAgICBvdmVycmlkZVtfcGFkZGluZyArIF9SaWdodF0gPSBjc1tfcGFkZGluZyArIF9SaWdodF07XG4gICAgICAgICAgICBvdmVycmlkZVtfcGFkZGluZyArIF9Cb3R0b21dID0gY3NbX3BhZGRpbmcgKyBfQm90dG9tXTtcbiAgICAgICAgICAgIG92ZXJyaWRlW19wYWRkaW5nICsgX0xlZnRdID0gY3NbX3BhZGRpbmcgKyBfTGVmdF07XG4gICAgICAgICAgICBwaW5BY3RpdmVTdGF0ZSA9IF9jb3B5U3RhdGUocGluT3JpZ2luYWxTdGF0ZSwgb3ZlcnJpZGUsIHBpblJlcGFyZW50KTtcbiAgICAgICAgICAgIF9yZWZyZXNoaW5nQWxsICYmIHNjcm9sbEZ1bmMoMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgaW5pdHRlZCA9IGFuaW1hdGlvbi5faW5pdHRlZDtcblxuICAgICAgICAgICAgX3N1cHByZXNzT3ZlcndyaXRlcygxKTtcblxuICAgICAgICAgICAgYW5pbWF0aW9uLnJlbmRlcihhbmltYXRpb24uZHVyYXRpb24oKSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBwaW5DaGFuZ2UgPSBwaW5HZXR0ZXIoZGlyZWN0aW9uLmEpIC0gcGluU3RhcnQgKyBjaGFuZ2UgKyBvdGhlclBpbk9mZnNldDtcbiAgICAgICAgICAgIHBpbk1vdmVzID0gTWF0aC5hYnMoY2hhbmdlIC0gcGluQ2hhbmdlKSA+IDE7XG4gICAgICAgICAgICB1c2VGaXhlZFBvc2l0aW9uICYmIHBpbk1vdmVzICYmIHBpbkFjdGl2ZVN0YXRlLnNwbGljZShwaW5BY3RpdmVTdGF0ZS5sZW5ndGggLSAyLCAyKTtcbiAgICAgICAgICAgIGFuaW1hdGlvbi5yZW5kZXIoMCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBpbml0dGVkIHx8IGFuaW1hdGlvbi5pbnZhbGlkYXRlKHRydWUpO1xuICAgICAgICAgICAgYW5pbWF0aW9uLnBhcmVudCB8fCBhbmltYXRpb24udG90YWxUaW1lKGFuaW1hdGlvbi50b3RhbFRpbWUoKSk7XG5cbiAgICAgICAgICAgIF9zdXBwcmVzc092ZXJ3cml0ZXMoMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpbkNoYW5nZSA9IGNoYW5nZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3JjZWRPdmVyZmxvdyAmJiAoZm9yY2VkT3ZlcmZsb3cudmFsdWUgPyBmb3JjZWRPdmVyZmxvdy5zdHlsZVtcIm92ZXJmbG93XCIgKyBkaXJlY3Rpb24uYS50b1VwcGVyQ2FzZSgpXSA9IGZvcmNlZE92ZXJmbG93LnZhbHVlIDogZm9yY2VkT3ZlcmZsb3cuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJvdmVyZmxvdy1cIiArIGRpcmVjdGlvbi5hKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJpZ2dlciAmJiBzY3JvbGxGdW5jKCkgJiYgIWNvbnRhaW5lckFuaW1hdGlvbikge1xuICAgICAgICAgIGJvdW5kcyA9IHRyaWdnZXIucGFyZW50Tm9kZTtcblxuICAgICAgICAgIHdoaWxlIChib3VuZHMgJiYgYm91bmRzICE9PSBfYm9keSQxKSB7XG4gICAgICAgICAgICBpZiAoYm91bmRzLl9waW5PZmZzZXQpIHtcbiAgICAgICAgICAgICAgc3RhcnQgLT0gYm91bmRzLl9waW5PZmZzZXQ7XG4gICAgICAgICAgICAgIGVuZCAtPSBib3VuZHMuX3Bpbk9mZnNldDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYm91bmRzID0gYm91bmRzLnBhcmVudE5vZGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV2ZXJ0ZWRQaW5zICYmIHJldmVydGVkUGlucy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIHQucmV2ZXJ0KGZhbHNlLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgc2VsZi5lbmQgPSBlbmQ7XG4gICAgICAgIHNjcm9sbDEgPSBzY3JvbGwyID0gX3JlZnJlc2hpbmdBbGwgPyBwcmV2U2Nyb2xsIDogc2Nyb2xsRnVuYygpO1xuXG4gICAgICAgIGlmICghY29udGFpbmVyQW5pbWF0aW9uICYmICFfcmVmcmVzaGluZ0FsbCkge1xuICAgICAgICAgIHNjcm9sbDEgPCBwcmV2U2Nyb2xsICYmIHNjcm9sbEZ1bmMocHJldlNjcm9sbCk7XG4gICAgICAgICAgc2VsZi5zY3JvbGwucmVjID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYucmV2ZXJ0KGZhbHNlLCB0cnVlKTtcbiAgICAgICAgbGFzdFJlZnJlc2ggPSBfZ2V0VGltZSQxKCk7XG5cbiAgICAgICAgaWYgKHNuYXBEZWxheWVkQ2FsbCkge1xuICAgICAgICAgIGxhc3RTbmFwID0gLTE7XG4gICAgICAgICAgc25hcERlbGF5ZWRDYWxsLnJlc3RhcnQodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBfcmVmcmVzaGluZyA9IDA7XG4gICAgICAgIGFuaW1hdGlvbiAmJiBpc1RvZ2dsZSAmJiAoYW5pbWF0aW9uLl9pbml0dGVkIHx8IHByZXZBbmltUHJvZ3Jlc3MpICYmIGFuaW1hdGlvbi5wcm9ncmVzcygpICE9PSBwcmV2QW5pbVByb2dyZXNzICYmIGFuaW1hdGlvbi5wcm9ncmVzcyhwcmV2QW5pbVByb2dyZXNzIHx8IDAsIHRydWUpLnJlbmRlcihhbmltYXRpb24udGltZSgpLCB0cnVlLCB0cnVlKTtcblxuICAgICAgICBpZiAoaXNGaXJzdFJlZnJlc2ggfHwgcHJldlByb2dyZXNzICE9PSBzZWxmLnByb2dyZXNzIHx8IGNvbnRhaW5lckFuaW1hdGlvbiB8fCBpbnZhbGlkYXRlT25SZWZyZXNoKSB7XG4gICAgICAgICAgYW5pbWF0aW9uICYmICFpc1RvZ2dsZSAmJiBhbmltYXRpb24udG90YWxQcm9ncmVzcyhjb250YWluZXJBbmltYXRpb24gJiYgc3RhcnQgPCAtMC4wMDEgJiYgIXByZXZQcm9ncmVzcyA/IGdzYXAkMS51dGlscy5ub3JtYWxpemUoc3RhcnQsIGVuZCwgMCkgOiBwcmV2UHJvZ3Jlc3MsIHRydWUpO1xuICAgICAgICAgIHNlbGYucHJvZ3Jlc3MgPSBpc0ZpcnN0UmVmcmVzaCB8fCAoc2Nyb2xsMSAtIHN0YXJ0KSAvIGNoYW5nZSA9PT0gcHJldlByb2dyZXNzID8gMCA6IHByZXZQcm9ncmVzcztcbiAgICAgICAgfVxuXG4gICAgICAgIHBpbiAmJiBwaW5TcGFjaW5nICYmIChzcGFjZXIuX3Bpbk9mZnNldCA9IE1hdGgucm91bmQoc2VsZi5wcm9ncmVzcyAqIHBpbkNoYW5nZSkpO1xuICAgICAgICBzY3J1YlR3ZWVuICYmIHNjcnViVHdlZW4uaW52YWxpZGF0ZSgpO1xuXG4gICAgICAgIGlmICghaXNOYU4obWFya2VyU3RhcnRPZmZzZXQpKSB7XG4gICAgICAgICAgbWFya2VyU3RhcnRPZmZzZXQgLT0gZ3NhcCQxLmdldFByb3BlcnR5KG1hcmtlclN0YXJ0VHJpZ2dlciwgZGlyZWN0aW9uLnApO1xuICAgICAgICAgIG1hcmtlckVuZE9mZnNldCAtPSBnc2FwJDEuZ2V0UHJvcGVydHkobWFya2VyRW5kVHJpZ2dlciwgZGlyZWN0aW9uLnApO1xuXG4gICAgICAgICAgX3NoaWZ0TWFya2VyKG1hcmtlclN0YXJ0VHJpZ2dlciwgZGlyZWN0aW9uLCBtYXJrZXJTdGFydE9mZnNldCk7XG5cbiAgICAgICAgICBfc2hpZnRNYXJrZXIobWFya2VyU3RhcnQsIGRpcmVjdGlvbiwgbWFya2VyU3RhcnRPZmZzZXQgLSAocGluT2Zmc2V0IHx8IDApKTtcblxuICAgICAgICAgIF9zaGlmdE1hcmtlcihtYXJrZXJFbmRUcmlnZ2VyLCBkaXJlY3Rpb24sIG1hcmtlckVuZE9mZnNldCk7XG5cbiAgICAgICAgICBfc2hpZnRNYXJrZXIobWFya2VyRW5kLCBkaXJlY3Rpb24sIG1hcmtlckVuZE9mZnNldCAtIChwaW5PZmZzZXQgfHwgMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaXNGaXJzdFJlZnJlc2ggJiYgIV9yZWZyZXNoaW5nQWxsICYmIHNlbGYudXBkYXRlKCk7XG5cbiAgICAgICAgaWYgKG9uUmVmcmVzaCAmJiAhX3JlZnJlc2hpbmdBbGwgJiYgIWV4ZWN1dGluZ09uUmVmcmVzaCkge1xuICAgICAgICAgIGV4ZWN1dGluZ09uUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgb25SZWZyZXNoKHNlbGYpO1xuICAgICAgICAgIGV4ZWN1dGluZ09uUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmdldFZlbG9jaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHNjcm9sbEZ1bmMoKSAtIHNjcm9sbDIpIC8gKF9nZXRUaW1lJDEoKSAtIF90aW1lMikgKiAxMDAwIHx8IDA7XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmVuZEFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2VuZEFuaW1hdGlvbihzZWxmLmNhbGxiYWNrQW5pbWF0aW9uKTtcblxuICAgICAgICBpZiAoYW5pbWF0aW9uKSB7XG4gICAgICAgICAgc2NydWJUd2VlbiA/IHNjcnViVHdlZW4ucHJvZ3Jlc3MoMSkgOiAhYW5pbWF0aW9uLnBhdXNlZCgpID8gX2VuZEFuaW1hdGlvbihhbmltYXRpb24sIGFuaW1hdGlvbi5yZXZlcnNlZCgpKSA6IGlzVG9nZ2xlIHx8IF9lbmRBbmltYXRpb24oYW5pbWF0aW9uLCBzZWxmLmRpcmVjdGlvbiA8IDAsIDEpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmxhYmVsVG9TY3JvbGwgPSBmdW5jdGlvbiAobGFiZWwpIHtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbiAmJiBhbmltYXRpb24ubGFiZWxzICYmIChzdGFydCB8fCBzZWxmLnJlZnJlc2goKSB8fCBzdGFydCkgKyBhbmltYXRpb24ubGFiZWxzW2xhYmVsXSAvIGFuaW1hdGlvbi5kdXJhdGlvbigpICogY2hhbmdlIHx8IDA7XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmdldFRyYWlsaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIGkgPSBfdHJpZ2dlcnMuaW5kZXhPZihzZWxmKSxcbiAgICAgICAgICAgIGEgPSBzZWxmLmRpcmVjdGlvbiA+IDAgPyBfdHJpZ2dlcnMuc2xpY2UoMCwgaSkucmV2ZXJzZSgpIDogX3RyaWdnZXJzLnNsaWNlKGkgKyAxKTtcblxuICAgICAgICByZXR1cm4gKF9pc1N0cmluZyhuYW1lKSA/IGEuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIHQudmFycy5wcmV2ZW50T3ZlcmxhcHMgPT09IG5hbWU7XG4gICAgICAgIH0pIDogYSkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuZGlyZWN0aW9uID4gMCA/IHQuZW5kIDw9IHN0YXJ0IDogdC5zdGFydCA+PSBlbmQ7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgc2VsZi51cGRhdGUgPSBmdW5jdGlvbiAocmVzZXQsIHJlY29yZFZlbG9jaXR5LCBmb3JjZUZha2UpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5lckFuaW1hdGlvbiAmJiAhZm9yY2VGYWtlICYmICFyZXNldCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzY3JvbGwgPSBfcmVmcmVzaGluZ0FsbCA9PT0gdHJ1ZSA/IHByZXZTY3JvbGwgOiBzZWxmLnNjcm9sbCgpLFxuICAgICAgICAgICAgcCA9IHJlc2V0ID8gMCA6IChzY3JvbGwgLSBzdGFydCkgLyBjaGFuZ2UsXG4gICAgICAgICAgICBjbGlwcGVkID0gcCA8IDAgPyAwIDogcCA+IDEgPyAxIDogcCB8fCAwLFxuICAgICAgICAgICAgcHJldlByb2dyZXNzID0gc2VsZi5wcm9ncmVzcyxcbiAgICAgICAgICAgIGlzQWN0aXZlLFxuICAgICAgICAgICAgd2FzQWN0aXZlLFxuICAgICAgICAgICAgdG9nZ2xlU3RhdGUsXG4gICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZUNoYW5nZWQsXG4gICAgICAgICAgICB0b2dnbGVkLFxuICAgICAgICAgICAgaXNBdE1heCxcbiAgICAgICAgICAgIGlzVGFraW5nQWN0aW9uO1xuXG4gICAgICAgIGlmIChyZWNvcmRWZWxvY2l0eSkge1xuICAgICAgICAgIHNjcm9sbDIgPSBzY3JvbGwxO1xuICAgICAgICAgIHNjcm9sbDEgPSBjb250YWluZXJBbmltYXRpb24gPyBzY3JvbGxGdW5jKCkgOiBzY3JvbGw7XG5cbiAgICAgICAgICBpZiAoc25hcCkge1xuICAgICAgICAgICAgc25hcDIgPSBzbmFwMTtcbiAgICAgICAgICAgIHNuYXAxID0gYW5pbWF0aW9uICYmICFpc1RvZ2dsZSA/IGFuaW1hdGlvbi50b3RhbFByb2dyZXNzKCkgOiBjbGlwcGVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbnRpY2lwYXRlUGluICYmIHBpbiAmJiAhX3JlZnJlc2hpbmcgJiYgIV9zdGFydHVwJDEgJiYgX2xhc3RTY3JvbGxUaW1lKSB7XG4gICAgICAgICAgaWYgKCFjbGlwcGVkICYmIHN0YXJ0IDwgc2Nyb2xsICsgKHNjcm9sbCAtIHNjcm9sbDIpIC8gKF9nZXRUaW1lJDEoKSAtIF90aW1lMikgKiBhbnRpY2lwYXRlUGluKSB7XG4gICAgICAgICAgICBjbGlwcGVkID0gMC4wMDAxO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2xpcHBlZCA9PT0gMSAmJiBlbmQgPiBzY3JvbGwgKyAoc2Nyb2xsIC0gc2Nyb2xsMikgLyAoX2dldFRpbWUkMSgpIC0gX3RpbWUyKSAqIGFudGljaXBhdGVQaW4pIHtcbiAgICAgICAgICAgIGNsaXBwZWQgPSAwLjk5OTk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNsaXBwZWQgIT09IHByZXZQcm9ncmVzcyAmJiBzZWxmLmVuYWJsZWQpIHtcbiAgICAgICAgICBpc0FjdGl2ZSA9IHNlbGYuaXNBY3RpdmUgPSAhIWNsaXBwZWQgJiYgY2xpcHBlZCA8IDE7XG4gICAgICAgICAgd2FzQWN0aXZlID0gISFwcmV2UHJvZ3Jlc3MgJiYgcHJldlByb2dyZXNzIDwgMTtcbiAgICAgICAgICB0b2dnbGVkID0gaXNBY3RpdmUgIT09IHdhc0FjdGl2ZTtcbiAgICAgICAgICBzdGF0ZUNoYW5nZWQgPSB0b2dnbGVkIHx8ICEhY2xpcHBlZCAhPT0gISFwcmV2UHJvZ3Jlc3M7XG4gICAgICAgICAgc2VsZi5kaXJlY3Rpb24gPSBjbGlwcGVkID4gcHJldlByb2dyZXNzID8gMSA6IC0xO1xuICAgICAgICAgIHNlbGYucHJvZ3Jlc3MgPSBjbGlwcGVkO1xuXG4gICAgICAgICAgaWYgKHN0YXRlQ2hhbmdlZCAmJiAhX3JlZnJlc2hpbmcpIHtcbiAgICAgICAgICAgIHRvZ2dsZVN0YXRlID0gY2xpcHBlZCAmJiAhcHJldlByb2dyZXNzID8gMCA6IGNsaXBwZWQgPT09IDEgPyAxIDogcHJldlByb2dyZXNzID09PSAxID8gMiA6IDM7XG5cbiAgICAgICAgICAgIGlmIChpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICBhY3Rpb24gPSAhdG9nZ2xlZCAmJiB0b2dnbGVBY3Rpb25zW3RvZ2dsZVN0YXRlICsgMV0gIT09IFwibm9uZVwiICYmIHRvZ2dsZUFjdGlvbnNbdG9nZ2xlU3RhdGUgKyAxXSB8fCB0b2dnbGVBY3Rpb25zW3RvZ2dsZVN0YXRlXTtcbiAgICAgICAgICAgICAgaXNUYWtpbmdBY3Rpb24gPSBhbmltYXRpb24gJiYgKGFjdGlvbiA9PT0gXCJjb21wbGV0ZVwiIHx8IGFjdGlvbiA9PT0gXCJyZXNldFwiIHx8IGFjdGlvbiBpbiBhbmltYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHByZXZlbnRPdmVybGFwcyAmJiAodG9nZ2xlZCB8fCBpc1Rha2luZ0FjdGlvbikgJiYgKGlzVGFraW5nQWN0aW9uIHx8IHNjcnViIHx8ICFhbmltYXRpb24pICYmIChfaXNGdW5jdGlvbihwcmV2ZW50T3ZlcmxhcHMpID8gcHJldmVudE92ZXJsYXBzKHNlbGYpIDogc2VsZi5nZXRUcmFpbGluZyhwcmV2ZW50T3ZlcmxhcHMpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0LmVuZEFuaW1hdGlvbigpO1xuICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIGlmICghaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIGlmIChzY3J1YlR3ZWVuICYmICFfcmVmcmVzaGluZyAmJiAhX3N0YXJ0dXAkMSkge1xuICAgICAgICAgICAgICBzY3J1YlR3ZWVuLl9kcC5fdGltZSAtIHNjcnViVHdlZW4uX3N0YXJ0ICE9PSBzY3J1YlR3ZWVuLl90aW1lICYmIHNjcnViVHdlZW4ucmVuZGVyKHNjcnViVHdlZW4uX2RwLl90aW1lIC0gc2NydWJUd2Vlbi5fc3RhcnQpO1xuXG4gICAgICAgICAgICAgIGlmIChzY3J1YlR3ZWVuLnJlc2V0VG8pIHtcbiAgICAgICAgICAgICAgICBzY3J1YlR3ZWVuLnJlc2V0VG8oXCJ0b3RhbFByb2dyZXNzXCIsIGNsaXBwZWQsIGFuaW1hdGlvbi5fdFRpbWUgLyBhbmltYXRpb24uX3REdXIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjcnViVHdlZW4udmFycy50b3RhbFByb2dyZXNzID0gY2xpcHBlZDtcbiAgICAgICAgICAgICAgICBzY3J1YlR3ZWVuLmludmFsaWRhdGUoKS5yZXN0YXJ0KCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgIGFuaW1hdGlvbi50b3RhbFByb2dyZXNzKGNsaXBwZWQsICEhKF9yZWZyZXNoaW5nICYmIChsYXN0UmVmcmVzaCB8fCByZXNldCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocGluKSB7XG4gICAgICAgICAgICByZXNldCAmJiBwaW5TcGFjaW5nICYmIChzcGFjZXIuc3R5bGVbcGluU3BhY2luZyArIGRpcmVjdGlvbi5vczJdID0gc3BhY2luZ1N0YXJ0KTtcblxuICAgICAgICAgICAgaWYgKCF1c2VGaXhlZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIHBpblNldHRlcihfcm91bmQocGluU3RhcnQgKyBwaW5DaGFuZ2UgKiBjbGlwcGVkKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlQ2hhbmdlZCkge1xuICAgICAgICAgICAgICBpc0F0TWF4ID0gIXJlc2V0ICYmIGNsaXBwZWQgPiBwcmV2UHJvZ3Jlc3MgJiYgZW5kICsgMSA+IHNjcm9sbCAmJiBzY3JvbGwgKyAxID49IF9tYXhTY3JvbGwoc2Nyb2xsZXIsIGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgaWYgKHBpblJlcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNldCAmJiAoaXNBY3RpdmUgfHwgaXNBdE1heCkpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBfZ2V0Qm91bmRzKHBpbiwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgX29mZnNldCA9IHNjcm9sbCAtIHN0YXJ0O1xuXG4gICAgICAgICAgICAgICAgICBfcmVwYXJlbnQocGluLCBfYm9keSQxLCBib3VuZHMudG9wICsgKGRpcmVjdGlvbiA9PT0gX3ZlcnRpY2FsID8gX29mZnNldCA6IDApICsgX3B4LCBib3VuZHMubGVmdCArIChkaXJlY3Rpb24gPT09IF92ZXJ0aWNhbCA/IDAgOiBfb2Zmc2V0KSArIF9weCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIF9yZXBhcmVudChwaW4sIHNwYWNlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3NldFN0YXRlKGlzQWN0aXZlIHx8IGlzQXRNYXggPyBwaW5BY3RpdmVTdGF0ZSA6IHBpblN0YXRlKTtcblxuICAgICAgICAgICAgICBwaW5Nb3ZlcyAmJiBjbGlwcGVkIDwgMSAmJiBpc0FjdGl2ZSB8fCBwaW5TZXR0ZXIocGluU3RhcnQgKyAoY2xpcHBlZCA9PT0gMSAmJiAhaXNBdE1heCA/IHBpbkNoYW5nZSA6IDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzbmFwICYmICF0d2VlblRvLnR3ZWVuICYmICFfcmVmcmVzaGluZyAmJiAhX3N0YXJ0dXAkMSAmJiBzbmFwRGVsYXllZENhbGwucmVzdGFydCh0cnVlKTtcbiAgICAgICAgICB0b2dnbGVDbGFzcyAmJiAodG9nZ2xlZCB8fCBvbmNlICYmIGNsaXBwZWQgJiYgKGNsaXBwZWQgPCAxIHx8ICFfbGltaXRDYWxsYmFja3MpKSAmJiBfdG9BcnJheSh0b2dnbGVDbGFzcy50YXJnZXRzKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdFtpc0FjdGl2ZSB8fCBvbmNlID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKHRvZ2dsZUNsYXNzLmNsYXNzTmFtZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgb25VcGRhdGUgJiYgIWlzVG9nZ2xlICYmICFyZXNldCAmJiBvblVwZGF0ZShzZWxmKTtcblxuICAgICAgICAgIGlmIChzdGF0ZUNoYW5nZWQgJiYgIV9yZWZyZXNoaW5nKSB7XG4gICAgICAgICAgICBpZiAoaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgaWYgKGlzVGFraW5nQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgICBhbmltYXRpb24ucGF1c2UoKS50b3RhbFByb2dyZXNzKDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5yZXN0YXJ0KHRydWUpLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwicmVzdGFydFwiKSB7XG4gICAgICAgICAgICAgICAgICBhbmltYXRpb24ucmVzdGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW2FjdGlvbl0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvblVwZGF0ZSAmJiBvblVwZGF0ZShzZWxmKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRvZ2dsZWQgfHwgIV9saW1pdENhbGxiYWNrcykge1xuICAgICAgICAgICAgICBvblRvZ2dsZSAmJiB0b2dnbGVkICYmIF9jYWxsYmFjayhzZWxmLCBvblRvZ2dsZSk7XG4gICAgICAgICAgICAgIGNhbGxiYWNrc1t0b2dnbGVTdGF0ZV0gJiYgX2NhbGxiYWNrKHNlbGYsIGNhbGxiYWNrc1t0b2dnbGVTdGF0ZV0pO1xuICAgICAgICAgICAgICBvbmNlICYmIChjbGlwcGVkID09PSAxID8gc2VsZi5raWxsKGZhbHNlLCAxKSA6IGNhbGxiYWNrc1t0b2dnbGVTdGF0ZV0gPSAwKTtcblxuICAgICAgICAgICAgICBpZiAoIXRvZ2dsZWQpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGVTdGF0ZSA9IGNsaXBwZWQgPT09IDEgPyAxIDogMztcbiAgICAgICAgICAgICAgICBjYWxsYmFja3NbdG9nZ2xlU3RhdGVdICYmIF9jYWxsYmFjayhzZWxmLCBjYWxsYmFja3NbdG9nZ2xlU3RhdGVdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmFzdFNjcm9sbEVuZCAmJiAhaXNBY3RpdmUgJiYgTWF0aC5hYnMoc2VsZi5nZXRWZWxvY2l0eSgpKSA+IChfaXNOdW1iZXIoZmFzdFNjcm9sbEVuZCkgPyBmYXN0U2Nyb2xsRW5kIDogMjUwMCkpIHtcbiAgICAgICAgICAgICAgX2VuZEFuaW1hdGlvbihzZWxmLmNhbGxiYWNrQW5pbWF0aW9uKTtcblxuICAgICAgICAgICAgICBzY3J1YlR3ZWVuID8gc2NydWJUd2Vlbi5wcm9ncmVzcygxKSA6IF9lbmRBbmltYXRpb24oYW5pbWF0aW9uLCBhY3Rpb24gPT09IFwicmV2ZXJzZVwiID8gMSA6ICFjbGlwcGVkLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzVG9nZ2xlICYmIG9uVXBkYXRlICYmICFfcmVmcmVzaGluZykge1xuICAgICAgICAgICAgb25VcGRhdGUoc2VsZik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hcmtlckVuZFNldHRlcikge1xuICAgICAgICAgIHZhciBuID0gY29udGFpbmVyQW5pbWF0aW9uID8gc2Nyb2xsIC8gY29udGFpbmVyQW5pbWF0aW9uLmR1cmF0aW9uKCkgKiAoY29udGFpbmVyQW5pbWF0aW9uLl9jYVNjcm9sbERpc3QgfHwgMCkgOiBzY3JvbGw7XG4gICAgICAgICAgbWFya2VyU3RhcnRTZXR0ZXIobiArIChtYXJrZXJTdGFydFRyaWdnZXIuX2lzRmxpcHBlZCA/IDEgOiAwKSk7XG4gICAgICAgICAgbWFya2VyRW5kU2V0dGVyKG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FNYXJrZXJTZXR0ZXIgJiYgY2FNYXJrZXJTZXR0ZXIoLXNjcm9sbCAvIGNvbnRhaW5lckFuaW1hdGlvbi5kdXJhdGlvbigpICogKGNvbnRhaW5lckFuaW1hdGlvbi5fY2FTY3JvbGxEaXN0IHx8IDApKTtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZW5hYmxlID0gZnVuY3Rpb24gKHJlc2V0LCByZWZyZXNoKSB7XG4gICAgICAgIGlmICghc2VsZi5lbmFibGVkKSB7XG4gICAgICAgICAgc2VsZi5lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAgIF9hZGRMaXN0ZW5lciQxKHNjcm9sbGVyLCBcInJlc2l6ZVwiLCBfb25SZXNpemUpO1xuXG4gICAgICAgICAgaXNWaWV3cG9ydCB8fCBfYWRkTGlzdGVuZXIkMShzY3JvbGxlciwgXCJzY3JvbGxcIiwgX29uU2Nyb2xsJDEpO1xuICAgICAgICAgIG9uUmVmcmVzaEluaXQgJiYgX2FkZExpc3RlbmVyJDEoU2Nyb2xsVHJpZ2dlciwgXCJyZWZyZXNoSW5pdFwiLCBvblJlZnJlc2hJbml0KTtcblxuICAgICAgICAgIGlmIChyZXNldCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MgPSBwcmV2UHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgICAgc2Nyb2xsMSA9IHNjcm9sbDIgPSBsYXN0U25hcCA9IHNjcm9sbEZ1bmMoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZWZyZXNoICE9PSBmYWxzZSAmJiBzZWxmLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2VsZi5nZXRUd2VlbiA9IGZ1bmN0aW9uIChzbmFwKSB7XG4gICAgICAgIHJldHVybiBzbmFwICYmIHR3ZWVuVG8gPyB0d2VlblRvLnR3ZWVuIDogc2NydWJUd2VlbjtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuc2V0UG9zaXRpb25zID0gZnVuY3Rpb24gKG5ld1N0YXJ0LCBuZXdFbmQsIGtlZXBDbGFtcCwgcGluT2Zmc2V0KSB7XG4gICAgICAgIGlmIChjb250YWluZXJBbmltYXRpb24pIHtcbiAgICAgICAgICB2YXIgc3QgPSBjb250YWluZXJBbmltYXRpb24uc2Nyb2xsVHJpZ2dlcixcbiAgICAgICAgICAgICAgZHVyYXRpb24gPSBjb250YWluZXJBbmltYXRpb24uZHVyYXRpb24oKSxcbiAgICAgICAgICAgICAgX2NoYW5nZSA9IHN0LmVuZCAtIHN0LnN0YXJ0O1xuXG4gICAgICAgICAgbmV3U3RhcnQgPSBzdC5zdGFydCArIF9jaGFuZ2UgKiBuZXdTdGFydCAvIGR1cmF0aW9uO1xuICAgICAgICAgIG5ld0VuZCA9IHN0LnN0YXJ0ICsgX2NoYW5nZSAqIG5ld0VuZCAvIGR1cmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5yZWZyZXNoKGZhbHNlLCBmYWxzZSwge1xuICAgICAgICAgIHN0YXJ0OiBfa2VlcENsYW1wKG5ld1N0YXJ0LCBrZWVwQ2xhbXAgJiYgISFzZWxmLl9zdGFydENsYW1wKSxcbiAgICAgICAgICBlbmQ6IF9rZWVwQ2xhbXAobmV3RW5kLCBrZWVwQ2xhbXAgJiYgISFzZWxmLl9lbmRDbGFtcClcbiAgICAgICAgfSwgcGluT2Zmc2V0KTtcbiAgICAgICAgc2VsZi51cGRhdGUoKTtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuYWRqdXN0UGluU3BhY2luZyA9IGZ1bmN0aW9uIChhbW91bnQpIHtcbiAgICAgICAgaWYgKHNwYWNlclN0YXRlICYmIGFtb3VudCkge1xuICAgICAgICAgIHZhciBpID0gc3BhY2VyU3RhdGUuaW5kZXhPZihkaXJlY3Rpb24uZCkgKyAxO1xuICAgICAgICAgIHNwYWNlclN0YXRlW2ldID0gcGFyc2VGbG9hdChzcGFjZXJTdGF0ZVtpXSkgKyBhbW91bnQgKyBfcHg7XG4gICAgICAgICAgc3BhY2VyU3RhdGVbMV0gPSBwYXJzZUZsb2F0KHNwYWNlclN0YXRlWzFdKSArIGFtb3VudCArIF9weDtcblxuICAgICAgICAgIF9zZXRTdGF0ZShzcGFjZXJTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZGlzYWJsZSA9IGZ1bmN0aW9uIChyZXNldCwgYWxsb3dBbmltYXRpb24pIHtcbiAgICAgICAgaWYgKHNlbGYuZW5hYmxlZCkge1xuICAgICAgICAgIHJlc2V0ICE9PSBmYWxzZSAmJiBzZWxmLnJldmVydCh0cnVlLCB0cnVlKTtcbiAgICAgICAgICBzZWxmLmVuYWJsZWQgPSBzZWxmLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgYWxsb3dBbmltYXRpb24gfHwgc2NydWJUd2VlbiAmJiBzY3J1YlR3ZWVuLnBhdXNlKCk7XG4gICAgICAgICAgcHJldlNjcm9sbCA9IDA7XG4gICAgICAgICAgcGluQ2FjaGUgJiYgKHBpbkNhY2hlLnVuY2FjaGUgPSAxKTtcbiAgICAgICAgICBvblJlZnJlc2hJbml0ICYmIF9yZW1vdmVMaXN0ZW5lciQxKFNjcm9sbFRyaWdnZXIsIFwicmVmcmVzaEluaXRcIiwgb25SZWZyZXNoSW5pdCk7XG5cbiAgICAgICAgICBpZiAoc25hcERlbGF5ZWRDYWxsKSB7XG4gICAgICAgICAgICBzbmFwRGVsYXllZENhbGwucGF1c2UoKTtcbiAgICAgICAgICAgIHR3ZWVuVG8udHdlZW4gJiYgdHdlZW5Uby50d2Vlbi5raWxsKCkgJiYgKHR3ZWVuVG8udHdlZW4gPSAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWlzVmlld3BvcnQpIHtcbiAgICAgICAgICAgIHZhciBpID0gX3RyaWdnZXJzLmxlbmd0aDtcblxuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICBpZiAoX3RyaWdnZXJzW2ldLnNjcm9sbGVyID09PSBzY3JvbGxlciAmJiBfdHJpZ2dlcnNbaV0gIT09IHNlbGYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX3JlbW92ZUxpc3RlbmVyJDEoc2Nyb2xsZXIsIFwicmVzaXplXCIsIF9vblJlc2l6ZSk7XG5cbiAgICAgICAgICAgIGlzVmlld3BvcnQgfHwgX3JlbW92ZUxpc3RlbmVyJDEoc2Nyb2xsZXIsIFwic2Nyb2xsXCIsIF9vblNjcm9sbCQxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYua2lsbCA9IGZ1bmN0aW9uIChyZXZlcnQsIGFsbG93QW5pbWF0aW9uKSB7XG4gICAgICAgIHNlbGYuZGlzYWJsZShyZXZlcnQsIGFsbG93QW5pbWF0aW9uKTtcbiAgICAgICAgc2NydWJUd2VlbiAmJiAhYWxsb3dBbmltYXRpb24gJiYgc2NydWJUd2Vlbi5raWxsKCk7XG4gICAgICAgIGlkICYmIGRlbGV0ZSBfaWRzW2lkXTtcblxuICAgICAgICB2YXIgaSA9IF90cmlnZ2Vycy5pbmRleE9mKHNlbGYpO1xuXG4gICAgICAgIGkgPj0gMCAmJiBfdHJpZ2dlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBpID09PSBfaSAmJiBfZGlyZWN0aW9uID4gMCAmJiBfaS0tO1xuICAgICAgICBpID0gMDtcblxuICAgICAgICBfdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiB0LnNjcm9sbGVyID09PSBzZWxmLnNjcm9sbGVyICYmIChpID0gMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGkgfHwgX3JlZnJlc2hpbmdBbGwgfHwgKHNlbGYuc2Nyb2xsLnJlYyA9IDApO1xuXG4gICAgICAgIGlmIChhbmltYXRpb24pIHtcbiAgICAgICAgICBhbmltYXRpb24uc2Nyb2xsVHJpZ2dlciA9IG51bGw7XG4gICAgICAgICAgcmV2ZXJ0ICYmIGFuaW1hdGlvbi5yZXZlcnQoe1xuICAgICAgICAgICAga2lsbDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbGxvd0FuaW1hdGlvbiB8fCBhbmltYXRpb24ua2lsbCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFya2VyU3RhcnQgJiYgW21hcmtlclN0YXJ0LCBtYXJrZXJFbmQsIG1hcmtlclN0YXJ0VHJpZ2dlciwgbWFya2VyRW5kVHJpZ2dlcl0uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgICAgIHJldHVybiBtLnBhcmVudE5vZGUgJiYgbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG0pO1xuICAgICAgICB9KTtcbiAgICAgICAgX3ByaW1hcnkgPT09IHNlbGYgJiYgKF9wcmltYXJ5ID0gMCk7XG5cbiAgICAgICAgaWYgKHBpbikge1xuICAgICAgICAgIHBpbkNhY2hlICYmIChwaW5DYWNoZS51bmNhY2hlID0gMSk7XG4gICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgICBfdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQucGluID09PSBwaW4gJiYgaSsrO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaSB8fCAocGluQ2FjaGUuc3BhY2VyID0gMCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXJzLm9uS2lsbCAmJiB2YXJzLm9uS2lsbChzZWxmKTtcbiAgICAgIH07XG5cbiAgICAgIF90cmlnZ2Vycy5wdXNoKHNlbGYpO1xuXG4gICAgICBzZWxmLmVuYWJsZShmYWxzZSwgZmFsc2UpO1xuICAgICAgY3VzdG9tUmV2ZXJ0UmV0dXJuICYmIGN1c3RvbVJldmVydFJldHVybihzZWxmKTtcblxuICAgICAgaWYgKGFuaW1hdGlvbiAmJiBhbmltYXRpb24uYWRkICYmICFjaGFuZ2UpIHtcbiAgICAgICAgdmFyIHVwZGF0ZUZ1bmMgPSBzZWxmLnVwZGF0ZTtcblxuICAgICAgICBzZWxmLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZSA9IHVwZGF0ZUZ1bmM7XG4gICAgICAgICAgc3RhcnQgfHwgZW5kIHx8IHNlbGYucmVmcmVzaCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGdzYXAkMS5kZWxheWVkQ2FsbCgwLjAxLCBzZWxmLnVwZGF0ZSk7XG4gICAgICAgIGNoYW5nZSA9IDAuMDE7XG4gICAgICAgIHN0YXJ0ID0gZW5kID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYucmVmcmVzaCgpO1xuICAgICAgfVxuXG4gICAgICBwaW4gJiYgX3F1ZXVlUmVmcmVzaEFsbCgpO1xuICAgIH07XG5cbiAgICBTY3JvbGxUcmlnZ2VyLnJlZ2lzdGVyID0gZnVuY3Rpb24gcmVnaXN0ZXIoY29yZSkge1xuICAgICAgaWYgKCFfY29yZUluaXR0ZWQkMSkge1xuICAgICAgICBnc2FwJDEgPSBjb3JlIHx8IF9nZXRHU0FQJDEoKTtcbiAgICAgICAgX3dpbmRvd0V4aXN0cygpICYmIHdpbmRvdy5kb2N1bWVudCAmJiBTY3JvbGxUcmlnZ2VyLmVuYWJsZSgpO1xuICAgICAgICBfY29yZUluaXR0ZWQkMSA9IF9lbmFibGVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX2NvcmVJbml0dGVkJDE7XG4gICAgfTtcblxuICAgIFNjcm9sbFRyaWdnZXIuZGVmYXVsdHMgPSBmdW5jdGlvbiBkZWZhdWx0cyhjb25maWcpIHtcbiAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb25maWcpIHtcbiAgICAgICAgICBfZGVmYXVsdHNbcF0gPSBjb25maWdbcF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICB9O1xuXG4gICAgU2Nyb2xsVHJpZ2dlci5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZShyZXNldCwga2lsbCkge1xuICAgICAgX2VuYWJsZWQgPSAwO1xuXG4gICAgICBfdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICByZXR1cm4gdHJpZ2dlcltraWxsID8gXCJraWxsXCIgOiBcImRpc2FibGVcIl0ocmVzZXQpO1xuICAgICAgfSk7XG5cbiAgICAgIF9yZW1vdmVMaXN0ZW5lciQxKF93aW4kMSwgXCJ3aGVlbFwiLCBfb25TY3JvbGwkMSk7XG5cbiAgICAgIF9yZW1vdmVMaXN0ZW5lciQxKF9kb2MkMSwgXCJzY3JvbGxcIiwgX29uU2Nyb2xsJDEpO1xuXG4gICAgICBjbGVhckludGVydmFsKF9zeW5jSW50ZXJ2YWwpO1xuXG4gICAgICBfcmVtb3ZlTGlzdGVuZXIkMShfZG9jJDEsIFwidG91Y2hjYW5jZWxcIiwgX3Bhc3NUaHJvdWdoKTtcblxuICAgICAgX3JlbW92ZUxpc3RlbmVyJDEoX2JvZHkkMSwgXCJ0b3VjaHN0YXJ0XCIsIF9wYXNzVGhyb3VnaCk7XG5cbiAgICAgIF9tdWx0aUxpc3RlbmVyKF9yZW1vdmVMaXN0ZW5lciQxLCBfZG9jJDEsIFwicG9pbnRlcmRvd24sdG91Y2hzdGFydCxtb3VzZWRvd25cIiwgX3BvaW50ZXJEb3duSGFuZGxlcik7XG5cbiAgICAgIF9tdWx0aUxpc3RlbmVyKF9yZW1vdmVMaXN0ZW5lciQxLCBfZG9jJDEsIFwicG9pbnRlcnVwLHRvdWNoZW5kLG1vdXNldXBcIiwgX3BvaW50ZXJVcEhhbmRsZXIpO1xuXG4gICAgICBfcmVzaXplRGVsYXkua2lsbCgpO1xuXG4gICAgICBfaXRlcmF0ZUF1dG9SZWZyZXNoKF9yZW1vdmVMaXN0ZW5lciQxKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfc2Nyb2xsZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIF93aGVlbExpc3RlbmVyKF9yZW1vdmVMaXN0ZW5lciQxLCBfc2Nyb2xsZXJzW2ldLCBfc2Nyb2xsZXJzW2kgKyAxXSk7XG5cbiAgICAgICAgX3doZWVsTGlzdGVuZXIoX3JlbW92ZUxpc3RlbmVyJDEsIF9zY3JvbGxlcnNbaV0sIF9zY3JvbGxlcnNbaSArIDJdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgU2Nyb2xsVHJpZ2dlci5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICBfd2luJDEgPSB3aW5kb3c7XG4gICAgICBfZG9jJDEgPSBkb2N1bWVudDtcbiAgICAgIF9kb2NFbCQxID0gX2RvYyQxLmRvY3VtZW50RWxlbWVudDtcbiAgICAgIF9ib2R5JDEgPSBfZG9jJDEuYm9keTtcblxuICAgICAgaWYgKGdzYXAkMSkge1xuICAgICAgICBfdG9BcnJheSA9IGdzYXAkMS51dGlscy50b0FycmF5O1xuICAgICAgICBfY2xhbXAkMSA9IGdzYXAkMS51dGlscy5jbGFtcDtcbiAgICAgICAgX2NvbnRleHQkMSA9IGdzYXAkMS5jb3JlLmNvbnRleHQgfHwgX3Bhc3NUaHJvdWdoO1xuICAgICAgICBfc3VwcHJlc3NPdmVyd3JpdGVzID0gZ3NhcCQxLmNvcmUuc3VwcHJlc3NPdmVyd3JpdGVzIHx8IF9wYXNzVGhyb3VnaDtcbiAgICAgICAgX3Njcm9sbFJlc3RvcmF0aW9uID0gX3dpbiQxLmhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gfHwgXCJhdXRvXCI7XG4gICAgICAgIF9sYXN0U2Nyb2xsID0gX3dpbiQxLnBhZ2VZT2Zmc2V0O1xuICAgICAgICBnc2FwJDEuY29yZS5nbG9iYWxzKFwiU2Nyb2xsVHJpZ2dlclwiLCBTY3JvbGxUcmlnZ2VyKTtcblxuICAgICAgICBpZiAoX2JvZHkkMSkge1xuICAgICAgICAgIF9lbmFibGVkID0gMTtcbiAgICAgICAgICBfZGl2MTAwdmggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIF9kaXYxMDB2aC5zdHlsZS5oZWlnaHQgPSBcIjEwMHZoXCI7XG4gICAgICAgICAgX2RpdjEwMHZoLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXG4gICAgICAgICAgX3JlZnJlc2gxMDB2aCgpO1xuXG4gICAgICAgICAgX3JhZkJ1Z0ZpeCgpO1xuXG4gICAgICAgICAgT2JzZXJ2ZXIucmVnaXN0ZXIoZ3NhcCQxKTtcbiAgICAgICAgICBTY3JvbGxUcmlnZ2VyLmlzVG91Y2ggPSBPYnNlcnZlci5pc1RvdWNoO1xuICAgICAgICAgIF9maXhJT1NCdWcgPSBPYnNlcnZlci5pc1RvdWNoICYmIC8oaVBhZHxpUGhvbmV8aVBvZHxNYWMpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgICBfaWdub3JlTW9iaWxlUmVzaXplID0gT2JzZXJ2ZXIuaXNUb3VjaCA9PT0gMTtcblxuICAgICAgICAgIF9hZGRMaXN0ZW5lciQxKF93aW4kMSwgXCJ3aGVlbFwiLCBfb25TY3JvbGwkMSk7XG5cbiAgICAgICAgICBfcm9vdCQxID0gW193aW4kMSwgX2RvYyQxLCBfZG9jRWwkMSwgX2JvZHkkMV07XG5cbiAgICAgICAgICBpZiAoZ3NhcCQxLm1hdGNoTWVkaWEpIHtcbiAgICAgICAgICAgIFNjcm9sbFRyaWdnZXIubWF0Y2hNZWRpYSA9IGZ1bmN0aW9uICh2YXJzKSB7XG4gICAgICAgICAgICAgIHZhciBtbSA9IGdzYXAkMS5tYXRjaE1lZGlhKCksXG4gICAgICAgICAgICAgICAgICBwO1xuXG4gICAgICAgICAgICAgIGZvciAocCBpbiB2YXJzKSB7XG4gICAgICAgICAgICAgICAgbW0uYWRkKHAsIHZhcnNbcF0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIG1tO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZ3NhcCQxLmFkZEV2ZW50TGlzdGVuZXIoXCJtYXRjaE1lZGlhSW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfcmV2ZXJ0QWxsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdzYXAkMS5hZGRFdmVudExpc3RlbmVyKFwibWF0Y2hNZWRpYVJldmVydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfcmV2ZXJ0UmVjb3JkZWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ3NhcCQxLmFkZEV2ZW50TGlzdGVuZXIoXCJtYXRjaE1lZGlhXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgX3JlZnJlc2hBbGwoMCwgMSk7XG5cbiAgICAgICAgICAgICAgX2Rpc3BhdGNoKFwibWF0Y2hNZWRpYVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ3NhcCQxLm1hdGNoTWVkaWEoXCIob3JpZW50YXRpb246IHBvcnRyYWl0KVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF9zZXRCYXNlRGltZW5zaW9ucygpO1xuXG4gICAgICAgICAgICAgIHJldHVybiBfc2V0QmFzZURpbWVuc2lvbnM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiUmVxdWlyZXMgR1NBUCAzLjExLjAgb3IgbGF0ZXJcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3NldEJhc2VEaW1lbnNpb25zKCk7XG5cbiAgICAgICAgICBfYWRkTGlzdGVuZXIkMShfZG9jJDEsIFwic2Nyb2xsXCIsIF9vblNjcm9sbCQxKTtcblxuICAgICAgICAgIHZhciBib2R5U3R5bGUgPSBfYm9keSQxLnN0eWxlLFxuICAgICAgICAgICAgICBib3JkZXIgPSBib2R5U3R5bGUuYm9yZGVyVG9wU3R5bGUsXG4gICAgICAgICAgICAgIEFuaW1hdGlvblByb3RvID0gZ3NhcCQxLmNvcmUuQW5pbWF0aW9uLnByb3RvdHlwZSxcbiAgICAgICAgICAgICAgYm91bmRzLFxuICAgICAgICAgICAgICBpO1xuICAgICAgICAgIEFuaW1hdGlvblByb3RvLnJldmVydCB8fCBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5pbWF0aW9uUHJvdG8sIFwicmV2ZXJ0XCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZSgtMC4wMSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYm9keVN0eWxlLmJvcmRlclRvcFN0eWxlID0gXCJzb2xpZFwiO1xuICAgICAgICAgIGJvdW5kcyA9IF9nZXRCb3VuZHMoX2JvZHkkMSk7XG4gICAgICAgICAgX3ZlcnRpY2FsLm0gPSBNYXRoLnJvdW5kKGJvdW5kcy50b3AgKyBfdmVydGljYWwuc2MoKSkgfHwgMDtcbiAgICAgICAgICBfaG9yaXpvbnRhbC5tID0gTWF0aC5yb3VuZChib3VuZHMubGVmdCArIF9ob3Jpem9udGFsLnNjKCkpIHx8IDA7XG4gICAgICAgICAgYm9yZGVyID8gYm9keVN0eWxlLmJvcmRlclRvcFN0eWxlID0gYm9yZGVyIDogYm9keVN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLXRvcC1zdHlsZVwiKTtcbiAgICAgICAgICBfc3luY0ludGVydmFsID0gc2V0SW50ZXJ2YWwoX3N5bmMsIDI1MCk7XG4gICAgICAgICAgZ3NhcCQxLmRlbGF5ZWRDYWxsKDAuNSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdGFydHVwJDEgPSAwO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgX2FkZExpc3RlbmVyJDEoX2RvYyQxLCBcInRvdWNoY2FuY2VsXCIsIF9wYXNzVGhyb3VnaCk7XG5cbiAgICAgICAgICBfYWRkTGlzdGVuZXIkMShfYm9keSQxLCBcInRvdWNoc3RhcnRcIiwgX3Bhc3NUaHJvdWdoKTtcblxuICAgICAgICAgIF9tdWx0aUxpc3RlbmVyKF9hZGRMaXN0ZW5lciQxLCBfZG9jJDEsIFwicG9pbnRlcmRvd24sdG91Y2hzdGFydCxtb3VzZWRvd25cIiwgX3BvaW50ZXJEb3duSGFuZGxlcik7XG5cbiAgICAgICAgICBfbXVsdGlMaXN0ZW5lcihfYWRkTGlzdGVuZXIkMSwgX2RvYyQxLCBcInBvaW50ZXJ1cCx0b3VjaGVuZCxtb3VzZXVwXCIsIF9wb2ludGVyVXBIYW5kbGVyKTtcblxuICAgICAgICAgIF90cmFuc2Zvcm1Qcm9wID0gZ3NhcCQxLnV0aWxzLmNoZWNrUHJlZml4KFwidHJhbnNmb3JtXCIpO1xuXG4gICAgICAgICAgX3N0YXRlUHJvcHMucHVzaChfdHJhbnNmb3JtUHJvcCk7XG5cbiAgICAgICAgICBfY29yZUluaXR0ZWQkMSA9IF9nZXRUaW1lJDEoKTtcbiAgICAgICAgICBfcmVzaXplRGVsYXkgPSBnc2FwJDEuZGVsYXllZENhbGwoMC4yLCBfcmVmcmVzaEFsbCkucGF1c2UoKTtcbiAgICAgICAgICBfYXV0b1JlZnJlc2ggPSBbX2RvYyQxLCBcInZpc2liaWxpdHljaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHcgPSBfd2luJDEuaW5uZXJXaWR0aCxcbiAgICAgICAgICAgICAgICBoID0gX3dpbiQxLmlubmVySGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoX2RvYyQxLmhpZGRlbikge1xuICAgICAgICAgICAgICBfcHJldldpZHRoID0gdztcbiAgICAgICAgICAgICAgX3ByZXZIZWlnaHQgPSBoO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfcHJldldpZHRoICE9PSB3IHx8IF9wcmV2SGVpZ2h0ICE9PSBoKSB7XG4gICAgICAgICAgICAgIF9vblJlc2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIF9kb2MkMSwgXCJET01Db250ZW50TG9hZGVkXCIsIF9yZWZyZXNoQWxsLCBfd2luJDEsIFwibG9hZFwiLCBfcmVmcmVzaEFsbCwgX3dpbiQxLCBcInJlc2l6ZVwiLCBfb25SZXNpemVdO1xuXG4gICAgICAgICAgX2l0ZXJhdGVBdXRvUmVmcmVzaChfYWRkTGlzdGVuZXIkMSk7XG5cbiAgICAgICAgICBfdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXIuZW5hYmxlKDAsIDEpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IF9zY3JvbGxlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgIF93aGVlbExpc3RlbmVyKF9yZW1vdmVMaXN0ZW5lciQxLCBfc2Nyb2xsZXJzW2ldLCBfc2Nyb2xsZXJzW2kgKyAxXSk7XG5cbiAgICAgICAgICAgIF93aGVlbExpc3RlbmVyKF9yZW1vdmVMaXN0ZW5lciQxLCBfc2Nyb2xsZXJzW2ldLCBfc2Nyb2xsZXJzW2kgKyAyXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFNjcm9sbFRyaWdnZXIuY29uZmlnID0gZnVuY3Rpb24gY29uZmlnKHZhcnMpIHtcbiAgICAgIFwibGltaXRDYWxsYmFja3NcIiBpbiB2YXJzICYmIChfbGltaXRDYWxsYmFja3MgPSAhIXZhcnMubGltaXRDYWxsYmFja3MpO1xuICAgICAgdmFyIG1zID0gdmFycy5zeW5jSW50ZXJ2YWw7XG4gICAgICBtcyAmJiBjbGVhckludGVydmFsKF9zeW5jSW50ZXJ2YWwpIHx8IChfc3luY0ludGVydmFsID0gbXMpICYmIHNldEludGVydmFsKF9zeW5jLCBtcyk7XG4gICAgICBcImlnbm9yZU1vYmlsZVJlc2l6ZVwiIGluIHZhcnMgJiYgKF9pZ25vcmVNb2JpbGVSZXNpemUgPSBTY3JvbGxUcmlnZ2VyLmlzVG91Y2ggPT09IDEgJiYgdmFycy5pZ25vcmVNb2JpbGVSZXNpemUpO1xuXG4gICAgICBpZiAoXCJhdXRvUmVmcmVzaEV2ZW50c1wiIGluIHZhcnMpIHtcbiAgICAgICAgX2l0ZXJhdGVBdXRvUmVmcmVzaChfcmVtb3ZlTGlzdGVuZXIkMSkgfHwgX2l0ZXJhdGVBdXRvUmVmcmVzaChfYWRkTGlzdGVuZXIkMSwgdmFycy5hdXRvUmVmcmVzaEV2ZW50cyB8fCBcIm5vbmVcIik7XG4gICAgICAgIF9pZ25vcmVSZXNpemUgPSAodmFycy5hdXRvUmVmcmVzaEV2ZW50cyArIFwiXCIpLmluZGV4T2YoXCJyZXNpemVcIikgPT09IC0xO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBTY3JvbGxUcmlnZ2VyLnNjcm9sbGVyUHJveHkgPSBmdW5jdGlvbiBzY3JvbGxlclByb3h5KHRhcmdldCwgdmFycykge1xuICAgICAgdmFyIHQgPSBfZ2V0VGFyZ2V0KHRhcmdldCksXG4gICAgICAgICAgaSA9IF9zY3JvbGxlcnMuaW5kZXhPZih0KSxcbiAgICAgICAgICBpc1ZpZXdwb3J0ID0gX2lzVmlld3BvcnQkMSh0KTtcblxuICAgICAgaWYgKH5pKSB7XG4gICAgICAgIF9zY3JvbGxlcnMuc3BsaWNlKGksIGlzVmlld3BvcnQgPyA2IDogMik7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YXJzKSB7XG4gICAgICAgIGlzVmlld3BvcnQgPyBfcHJveGllcy51bnNoaWZ0KF93aW4kMSwgdmFycywgX2JvZHkkMSwgdmFycywgX2RvY0VsJDEsIHZhcnMpIDogX3Byb3hpZXMudW5zaGlmdCh0LCB2YXJzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgU2Nyb2xsVHJpZ2dlci5jbGVhck1hdGNoTWVkaWEgPSBmdW5jdGlvbiBjbGVhck1hdGNoTWVkaWEocXVlcnkpIHtcbiAgICAgIF90cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0Ll9jdHggJiYgdC5fY3R4LnF1ZXJ5ID09PSBxdWVyeSAmJiB0Ll9jdHgua2lsbCh0cnVlLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBTY3JvbGxUcmlnZ2VyLmlzSW5WaWV3cG9ydCA9IGZ1bmN0aW9uIGlzSW5WaWV3cG9ydChlbGVtZW50LCByYXRpbywgaG9yaXpvbnRhbCkge1xuICAgICAgdmFyIGJvdW5kcyA9IChfaXNTdHJpbmcoZWxlbWVudCkgPyBfZ2V0VGFyZ2V0KGVsZW1lbnQpIDogZWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgb2Zmc2V0ID0gYm91bmRzW2hvcml6b250YWwgPyBfd2lkdGggOiBfaGVpZ2h0XSAqIHJhdGlvIHx8IDA7XG4gICAgICByZXR1cm4gaG9yaXpvbnRhbCA/IGJvdW5kcy5yaWdodCAtIG9mZnNldCA+IDAgJiYgYm91bmRzLmxlZnQgKyBvZmZzZXQgPCBfd2luJDEuaW5uZXJXaWR0aCA6IGJvdW5kcy5ib3R0b20gLSBvZmZzZXQgPiAwICYmIGJvdW5kcy50b3AgKyBvZmZzZXQgPCBfd2luJDEuaW5uZXJIZWlnaHQ7XG4gICAgfTtcblxuICAgIFNjcm9sbFRyaWdnZXIucG9zaXRpb25JblZpZXdwb3J0ID0gZnVuY3Rpb24gcG9zaXRpb25JblZpZXdwb3J0KGVsZW1lbnQsIHJlZmVyZW5jZVBvaW50LCBob3Jpem9udGFsKSB7XG4gICAgICBfaXNTdHJpbmcoZWxlbWVudCkgJiYgKGVsZW1lbnQgPSBfZ2V0VGFyZ2V0KGVsZW1lbnQpKTtcbiAgICAgIHZhciBib3VuZHMgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgIHNpemUgPSBib3VuZHNbaG9yaXpvbnRhbCA/IF93aWR0aCA6IF9oZWlnaHRdLFxuICAgICAgICAgIG9mZnNldCA9IHJlZmVyZW5jZVBvaW50ID09IG51bGwgPyBzaXplIC8gMiA6IHJlZmVyZW5jZVBvaW50IGluIF9rZXl3b3JkcyA/IF9rZXl3b3Jkc1tyZWZlcmVuY2VQb2ludF0gKiBzaXplIDogfnJlZmVyZW5jZVBvaW50LmluZGV4T2YoXCIlXCIpID8gcGFyc2VGbG9hdChyZWZlcmVuY2VQb2ludCkgKiBzaXplIC8gMTAwIDogcGFyc2VGbG9hdChyZWZlcmVuY2VQb2ludCkgfHwgMDtcbiAgICAgIHJldHVybiBob3Jpem9udGFsID8gKGJvdW5kcy5sZWZ0ICsgb2Zmc2V0KSAvIF93aW4kMS5pbm5lcldpZHRoIDogKGJvdW5kcy50b3AgKyBvZmZzZXQpIC8gX3dpbiQxLmlubmVySGVpZ2h0O1xuICAgIH07XG5cbiAgICBTY3JvbGxUcmlnZ2VyLmtpbGxBbGwgPSBmdW5jdGlvbiBraWxsQWxsKGFsbG93TGlzdGVuZXJzKSB7XG4gICAgICBfdHJpZ2dlcnMuc2xpY2UoMCkuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gdC52YXJzLmlkICE9PSBcIlNjcm9sbFNtb290aGVyXCIgJiYgdC5raWxsKCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGFsbG93TGlzdGVuZXJzICE9PSB0cnVlKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSBfbGlzdGVuZXJzLmtpbGxBbGwgfHwgW107XG4gICAgICAgIF9saXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICByZXR1cm4gZigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjcm9sbFRyaWdnZXI7XG4gIH0oKTtcbiAgU2Nyb2xsVHJpZ2dlciQxLnZlcnNpb24gPSBcIjMuMTIuNVwiO1xuXG4gIFNjcm9sbFRyaWdnZXIkMS5zYXZlU3R5bGVzID0gZnVuY3Rpb24gKHRhcmdldHMpIHtcbiAgICByZXR1cm4gdGFyZ2V0cyA/IF90b0FycmF5KHRhcmdldHMpLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuc3R5bGUpIHtcbiAgICAgICAgdmFyIGkgPSBfc2F2ZWRTdHlsZXMuaW5kZXhPZih0YXJnZXQpO1xuXG4gICAgICAgIGkgPj0gMCAmJiBfc2F2ZWRTdHlsZXMuc3BsaWNlKGksIDUpO1xuXG4gICAgICAgIF9zYXZlZFN0eWxlcy5wdXNoKHRhcmdldCwgdGFyZ2V0LnN0eWxlLmNzc1RleHQsIHRhcmdldC5nZXRCQm94ICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiksIGdzYXAkMS5jb3JlLmdldENhY2hlKHRhcmdldCksIF9jb250ZXh0JDEoKSk7XG4gICAgICB9XG4gICAgfSkgOiBfc2F2ZWRTdHlsZXM7XG4gIH07XG5cbiAgU2Nyb2xsVHJpZ2dlciQxLnJldmVydCA9IGZ1bmN0aW9uIChzb2Z0LCBtZWRpYSkge1xuICAgIHJldHVybiBfcmV2ZXJ0QWxsKCFzb2Z0LCBtZWRpYSk7XG4gIH07XG5cbiAgU2Nyb2xsVHJpZ2dlciQxLmNyZWF0ZSA9IGZ1bmN0aW9uICh2YXJzLCBhbmltYXRpb24pIHtcbiAgICByZXR1cm4gbmV3IFNjcm9sbFRyaWdnZXIkMSh2YXJzLCBhbmltYXRpb24pO1xuICB9O1xuXG4gIFNjcm9sbFRyaWdnZXIkMS5yZWZyZXNoID0gZnVuY3Rpb24gKHNhZmUpIHtcbiAgICByZXR1cm4gc2FmZSA/IF9vblJlc2l6ZSgpIDogKF9jb3JlSW5pdHRlZCQxIHx8IFNjcm9sbFRyaWdnZXIkMS5yZWdpc3RlcigpKSAmJiBfcmVmcmVzaEFsbCh0cnVlKTtcbiAgfTtcblxuICBTY3JvbGxUcmlnZ2VyJDEudXBkYXRlID0gZnVuY3Rpb24gKGZvcmNlKSB7XG4gICAgcmV0dXJuICsrX3Njcm9sbGVycy5jYWNoZSAmJiBfdXBkYXRlQWxsKGZvcmNlID09PSB0cnVlID8gMiA6IDApO1xuICB9O1xuXG4gIFNjcm9sbFRyaWdnZXIkMS5jbGVhclNjcm9sbE1lbW9yeSA9IF9jbGVhclNjcm9sbE1lbW9yeTtcblxuICBTY3JvbGxUcmlnZ2VyJDEubWF4U2Nyb2xsID0gZnVuY3Rpb24gKGVsZW1lbnQsIGhvcml6b250YWwpIHtcbiAgICByZXR1cm4gX21heFNjcm9sbChlbGVtZW50LCBob3Jpem9udGFsID8gX2hvcml6b250YWwgOiBfdmVydGljYWwpO1xuICB9O1xuXG4gIFNjcm9sbFRyaWdnZXIkMS5nZXRTY3JvbGxGdW5jID0gZnVuY3Rpb24gKGVsZW1lbnQsIGhvcml6b250YWwpIHtcbiAgICByZXR1cm4gX2dldFNjcm9sbEZ1bmMoX2dldFRhcmdldChlbGVtZW50KSwgaG9yaXpvbnRhbCA/IF9ob3Jpem9udGFsIDogX3ZlcnRpY2FsKTtcbiAgfTtcblxuICBTY3JvbGxUcmlnZ2VyJDEuZ2V0QnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBfaWRzW2lkXTtcbiAgfTtcblxuICBTY3JvbGxUcmlnZ2VyJDEuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdHJpZ2dlcnMuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gdC52YXJzLmlkICE9PSBcIlNjcm9sbFNtb290aGVyXCI7XG4gICAgfSk7XG4gIH07XG5cbiAgU2Nyb2xsVHJpZ2dlciQxLmlzU2Nyb2xsaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIV9sYXN0U2Nyb2xsVGltZTtcbiAgfTtcblxuICBTY3JvbGxUcmlnZ2VyJDEuc25hcERpcmVjdGlvbmFsID0gX3NuYXBEaXJlY3Rpb25hbDtcblxuICBTY3JvbGxUcmlnZ2VyJDEuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBjYWxsYmFjaykge1xuICAgIHZhciBhID0gX2xpc3RlbmVyc1t0eXBlXSB8fCAoX2xpc3RlbmVyc1t0eXBlXSA9IFtdKTtcbiAgICB+YS5pbmRleE9mKGNhbGxiYWNrKSB8fCBhLnB1c2goY2FsbGJhY2spO1xuICB9O1xuXG4gIFNjcm9sbFRyaWdnZXIkMS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGEgPSBfbGlzdGVuZXJzW3R5cGVdLFxuICAgICAgICBpID0gYSAmJiBhLmluZGV4T2YoY2FsbGJhY2spO1xuICAgIGkgPj0gMCAmJiBhLnNwbGljZShpLCAxKTtcbiAgfTtcblxuICBTY3JvbGxUcmlnZ2VyJDEuYmF0Y2ggPSBmdW5jdGlvbiAodGFyZ2V0cywgdmFycykge1xuICAgIHZhciByZXN1bHQgPSBbXSxcbiAgICAgICAgdmFyc0NvcHkgPSB7fSxcbiAgICAgICAgaW50ZXJ2YWwgPSB2YXJzLmludGVydmFsIHx8IDAuMDE2LFxuICAgICAgICBiYXRjaE1heCA9IHZhcnMuYmF0Y2hNYXggfHwgMWU5LFxuICAgICAgICBwcm94eUNhbGxiYWNrID0gZnVuY3Rpb24gcHJveHlDYWxsYmFjayh0eXBlLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGVsZW1lbnRzID0gW10sXG4gICAgICAgICAgdHJpZ2dlcnMgPSBbXSxcbiAgICAgICAgICBkZWxheSA9IGdzYXAkMS5kZWxheWVkQ2FsbChpbnRlcnZhbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayhlbGVtZW50cywgdHJpZ2dlcnMpO1xuICAgICAgICBlbGVtZW50cyA9IFtdO1xuICAgICAgICB0cmlnZ2VycyA9IFtdO1xuICAgICAgfSkucGF1c2UoKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZikge1xuICAgICAgICBlbGVtZW50cy5sZW5ndGggfHwgZGVsYXkucmVzdGFydCh0cnVlKTtcbiAgICAgICAgZWxlbWVudHMucHVzaChzZWxmLnRyaWdnZXIpO1xuICAgICAgICB0cmlnZ2Vycy5wdXNoKHNlbGYpO1xuICAgICAgICBiYXRjaE1heCA8PSBlbGVtZW50cy5sZW5ndGggJiYgZGVsYXkucHJvZ3Jlc3MoMSk7XG4gICAgICB9O1xuICAgIH0sXG4gICAgICAgIHA7XG5cbiAgICBmb3IgKHAgaW4gdmFycykge1xuICAgICAgdmFyc0NvcHlbcF0gPSBwLnN1YnN0cigwLCAyKSA9PT0gXCJvblwiICYmIF9pc0Z1bmN0aW9uKHZhcnNbcF0pICYmIHAgIT09IFwib25SZWZyZXNoSW5pdFwiID8gcHJveHlDYWxsYmFjayhwLCB2YXJzW3BdKSA6IHZhcnNbcF07XG4gICAgfVxuXG4gICAgaWYgKF9pc0Z1bmN0aW9uKGJhdGNoTWF4KSkge1xuICAgICAgYmF0Y2hNYXggPSBiYXRjaE1heCgpO1xuXG4gICAgICBfYWRkTGlzdGVuZXIkMShTY3JvbGxUcmlnZ2VyJDEsIFwicmVmcmVzaFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBiYXRjaE1heCA9IHZhcnMuYmF0Y2hNYXgoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b0FycmF5KHRhcmdldHMpLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gICAgICBmb3IgKHAgaW4gdmFyc0NvcHkpIHtcbiAgICAgICAgY29uZmlnW3BdID0gdmFyc0NvcHlbcF07XG4gICAgICB9XG5cbiAgICAgIGNvbmZpZy50cmlnZ2VyID0gdGFyZ2V0O1xuICAgICAgcmVzdWx0LnB1c2goU2Nyb2xsVHJpZ2dlciQxLmNyZWF0ZShjb25maWcpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIF9jbGFtcFNjcm9sbEFuZEdldER1cmF0aW9uTXVsdGlwbGllciA9IGZ1bmN0aW9uIF9jbGFtcFNjcm9sbEFuZEdldER1cmF0aW9uTXVsdGlwbGllcihzY3JvbGxGdW5jLCBjdXJyZW50LCBlbmQsIG1heCkge1xuICAgIGN1cnJlbnQgPiBtYXggPyBzY3JvbGxGdW5jKG1heCkgOiBjdXJyZW50IDwgMCAmJiBzY3JvbGxGdW5jKDApO1xuICAgIHJldHVybiBlbmQgPiBtYXggPyAobWF4IC0gY3VycmVudCkgLyAoZW5kIC0gY3VycmVudCkgOiBlbmQgPCAwID8gY3VycmVudCAvIChjdXJyZW50IC0gZW5kKSA6IDE7XG4gIH0sXG4gICAgICBfYWxsb3dOYXRpdmVQYW5uaW5nID0gZnVuY3Rpb24gX2FsbG93TmF0aXZlUGFubmluZyh0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgIGlmIChkaXJlY3Rpb24gPT09IHRydWUpIHtcbiAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcInRvdWNoLWFjdGlvblwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnN0eWxlLnRvdWNoQWN0aW9uID0gZGlyZWN0aW9uID09PSB0cnVlID8gXCJhdXRvXCIgOiBkaXJlY3Rpb24gPyBcInBhbi1cIiArIGRpcmVjdGlvbiArIChPYnNlcnZlci5pc1RvdWNoID8gXCIgcGluY2gtem9vbVwiIDogXCJcIikgOiBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICB0YXJnZXQgPT09IF9kb2NFbCQxICYmIF9hbGxvd05hdGl2ZVBhbm5pbmcoX2JvZHkkMSwgZGlyZWN0aW9uKTtcbiAgfSxcbiAgICAgIF9vdmVyZmxvdyA9IHtcbiAgICBhdXRvOiAxLFxuICAgIHNjcm9sbDogMVxuICB9LFxuICAgICAgX25lc3RlZFNjcm9sbCA9IGZ1bmN0aW9uIF9uZXN0ZWRTY3JvbGwoX3JlZjUpIHtcbiAgICB2YXIgZXZlbnQgPSBfcmVmNS5ldmVudCxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjUudGFyZ2V0LFxuICAgICAgICBheGlzID0gX3JlZjUuYXhpcztcblxuICAgIHZhciBub2RlID0gKGV2ZW50LmNoYW5nZWRUb3VjaGVzID8gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0gOiBldmVudCkudGFyZ2V0LFxuICAgICAgICBjYWNoZSA9IG5vZGUuX2dzYXAgfHwgZ3NhcCQxLmNvcmUuZ2V0Q2FjaGUobm9kZSksXG4gICAgICAgIHRpbWUgPSBfZ2V0VGltZSQxKCksXG4gICAgICAgIGNzO1xuXG4gICAgaWYgKCFjYWNoZS5faXNTY3JvbGxUIHx8IHRpbWUgLSBjYWNoZS5faXNTY3JvbGxUID4gMjAwMCkge1xuICAgICAgd2hpbGUgKG5vZGUgJiYgbm9kZSAhPT0gX2JvZHkkMSAmJiAobm9kZS5zY3JvbGxIZWlnaHQgPD0gbm9kZS5jbGllbnRIZWlnaHQgJiYgbm9kZS5zY3JvbGxXaWR0aCA8PSBub2RlLmNsaWVudFdpZHRoIHx8ICEoX292ZXJmbG93WyhjcyA9IF9nZXRDb21wdXRlZFN0eWxlKG5vZGUpKS5vdmVyZmxvd1ldIHx8IF9vdmVyZmxvd1tjcy5vdmVyZmxvd1hdKSkpIHtcbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgIH1cblxuICAgICAgY2FjaGUuX2lzU2Nyb2xsID0gbm9kZSAmJiBub2RlICE9PSB0YXJnZXQgJiYgIV9pc1ZpZXdwb3J0JDEobm9kZSkgJiYgKF9vdmVyZmxvd1soY3MgPSBfZ2V0Q29tcHV0ZWRTdHlsZShub2RlKSkub3ZlcmZsb3dZXSB8fCBfb3ZlcmZsb3dbY3Mub3ZlcmZsb3dYXSk7XG4gICAgICBjYWNoZS5faXNTY3JvbGxUID0gdGltZTtcbiAgICB9XG5cbiAgICBpZiAoY2FjaGUuX2lzU2Nyb2xsIHx8IGF4aXMgPT09IFwieFwiKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGV2ZW50Ll9nc2FwQWxsb3cgPSB0cnVlO1xuICAgIH1cbiAgfSxcbiAgICAgIF9pbnB1dE9ic2VydmVyID0gZnVuY3Rpb24gX2lucHV0T2JzZXJ2ZXIodGFyZ2V0LCB0eXBlLCBpbnB1dHMsIG5lc3RlZCkge1xuICAgIHJldHVybiBPYnNlcnZlci5jcmVhdGUoe1xuICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgZGVib3VuY2U6IGZhbHNlLFxuICAgICAgbG9ja0F4aXM6IHRydWUsXG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgb25XaGVlbDogbmVzdGVkID0gbmVzdGVkICYmIF9uZXN0ZWRTY3JvbGwsXG4gICAgICBvblByZXNzOiBuZXN0ZWQsXG4gICAgICBvbkRyYWc6IG5lc3RlZCxcbiAgICAgIG9uU2Nyb2xsOiBuZXN0ZWQsXG4gICAgICBvbkVuYWJsZTogZnVuY3Rpb24gb25FbmFibGUoKSB7XG4gICAgICAgIHJldHVybiBpbnB1dHMgJiYgX2FkZExpc3RlbmVyJDEoX2RvYyQxLCBPYnNlcnZlci5ldmVudFR5cGVzWzBdLCBfY2FwdHVyZUlucHV0cywgZmFsc2UsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIG9uRGlzYWJsZTogZnVuY3Rpb24gb25EaXNhYmxlKCkge1xuICAgICAgICByZXR1cm4gX3JlbW92ZUxpc3RlbmVyJDEoX2RvYyQxLCBPYnNlcnZlci5ldmVudFR5cGVzWzBdLCBfY2FwdHVyZUlucHV0cywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gICAgICBfaW5wdXRFeHAgPSAvKGlucHV0fGxhYmVsfHNlbGVjdHx0ZXh0YXJlYSkvaSxcbiAgICAgIF9pbnB1dElzRm9jdXNlZCxcbiAgICAgIF9jYXB0dXJlSW5wdXRzID0gZnVuY3Rpb24gX2NhcHR1cmVJbnB1dHMoZSkge1xuICAgIHZhciBpc0lucHV0ID0gX2lucHV0RXhwLnRlc3QoZS50YXJnZXQudGFnTmFtZSk7XG5cbiAgICBpZiAoaXNJbnB1dCB8fCBfaW5wdXRJc0ZvY3VzZWQpIHtcbiAgICAgIGUuX2dzYXBBbGxvdyA9IHRydWU7XG4gICAgICBfaW5wdXRJc0ZvY3VzZWQgPSBpc0lucHV0O1xuICAgIH1cbiAgfSxcbiAgICAgIF9nZXRTY3JvbGxOb3JtYWxpemVyID0gZnVuY3Rpb24gX2dldFNjcm9sbE5vcm1hbGl6ZXIodmFycykge1xuICAgIF9pc09iamVjdCh2YXJzKSB8fCAodmFycyA9IHt9KTtcbiAgICB2YXJzLnByZXZlbnREZWZhdWx0ID0gdmFycy5pc05vcm1hbGl6ZXIgPSB2YXJzLmFsbG93Q2xpY2tzID0gdHJ1ZTtcbiAgICB2YXJzLnR5cGUgfHwgKHZhcnMudHlwZSA9IFwid2hlZWwsdG91Y2hcIik7XG4gICAgdmFycy5kZWJvdW5jZSA9ICEhdmFycy5kZWJvdW5jZTtcbiAgICB2YXJzLmlkID0gdmFycy5pZCB8fCBcIm5vcm1hbGl6ZXJcIjtcblxuICAgIHZhciBfdmFyczIgPSB2YXJzLFxuICAgICAgICBub3JtYWxpemVTY3JvbGxYID0gX3ZhcnMyLm5vcm1hbGl6ZVNjcm9sbFgsXG4gICAgICAgIG1vbWVudHVtID0gX3ZhcnMyLm1vbWVudHVtLFxuICAgICAgICBhbGxvd05lc3RlZFNjcm9sbCA9IF92YXJzMi5hbGxvd05lc3RlZFNjcm9sbCxcbiAgICAgICAgb25SZWxlYXNlID0gX3ZhcnMyLm9uUmVsZWFzZSxcbiAgICAgICAgc2VsZixcbiAgICAgICAgbWF4WSxcbiAgICAgICAgdGFyZ2V0ID0gX2dldFRhcmdldCh2YXJzLnRhcmdldCkgfHwgX2RvY0VsJDEsXG4gICAgICAgIHNtb290aGVyID0gZ3NhcCQxLmNvcmUuZ2xvYmFscygpLlNjcm9sbFNtb290aGVyLFxuICAgICAgICBzbW9vdGhlckluc3RhbmNlID0gc21vb3RoZXIgJiYgc21vb3RoZXIuZ2V0KCksXG4gICAgICAgIGNvbnRlbnQgPSBfZml4SU9TQnVnICYmICh2YXJzLmNvbnRlbnQgJiYgX2dldFRhcmdldCh2YXJzLmNvbnRlbnQpIHx8IHNtb290aGVySW5zdGFuY2UgJiYgdmFycy5jb250ZW50ICE9PSBmYWxzZSAmJiAhc21vb3RoZXJJbnN0YW5jZS5zbW9vdGgoKSAmJiBzbW9vdGhlckluc3RhbmNlLmNvbnRlbnQoKSksXG4gICAgICAgIHNjcm9sbEZ1bmNZID0gX2dldFNjcm9sbEZ1bmModGFyZ2V0LCBfdmVydGljYWwpLFxuICAgICAgICBzY3JvbGxGdW5jWCA9IF9nZXRTY3JvbGxGdW5jKHRhcmdldCwgX2hvcml6b250YWwpLFxuICAgICAgICBzY2FsZSA9IDEsXG4gICAgICAgIGluaXRpYWxTY2FsZSA9IChPYnNlcnZlci5pc1RvdWNoICYmIF93aW4kMS52aXN1YWxWaWV3cG9ydCA/IF93aW4kMS52aXN1YWxWaWV3cG9ydC5zY2FsZSAqIF93aW4kMS52aXN1YWxWaWV3cG9ydC53aWR0aCA6IF93aW4kMS5vdXRlcldpZHRoKSAvIF93aW4kMS5pbm5lcldpZHRoLFxuICAgICAgICB3aGVlbFJlZnJlc2ggPSAwLFxuICAgICAgICByZXNvbHZlTW9tZW50dW1EdXJhdGlvbiA9IF9pc0Z1bmN0aW9uKG1vbWVudHVtKSA/IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBtb21lbnR1bShzZWxmKTtcbiAgICB9IDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG1vbWVudHVtIHx8IDIuODtcbiAgICB9LFxuICAgICAgICBsYXN0UmVmcmVzaElELFxuICAgICAgICBza2lwVG91Y2hNb3ZlLFxuICAgICAgICBpbnB1dE9ic2VydmVyID0gX2lucHV0T2JzZXJ2ZXIodGFyZ2V0LCB2YXJzLnR5cGUsIHRydWUsIGFsbG93TmVzdGVkU2Nyb2xsKSxcbiAgICAgICAgcmVzdW1lVG91Y2hNb3ZlID0gZnVuY3Rpb24gcmVzdW1lVG91Y2hNb3ZlKCkge1xuICAgICAgcmV0dXJuIHNraXBUb3VjaE1vdmUgPSBmYWxzZTtcbiAgICB9LFxuICAgICAgICBzY3JvbGxDbGFtcFggPSBfcGFzc1Rocm91Z2gsXG4gICAgICAgIHNjcm9sbENsYW1wWSA9IF9wYXNzVGhyb3VnaCxcbiAgICAgICAgdXBkYXRlQ2xhbXBzID0gZnVuY3Rpb24gdXBkYXRlQ2xhbXBzKCkge1xuICAgICAgbWF4WSA9IF9tYXhTY3JvbGwodGFyZ2V0LCBfdmVydGljYWwpO1xuICAgICAgc2Nyb2xsQ2xhbXBZID0gX2NsYW1wJDEoX2ZpeElPU0J1ZyA/IDEgOiAwLCBtYXhZKTtcbiAgICAgIG5vcm1hbGl6ZVNjcm9sbFggJiYgKHNjcm9sbENsYW1wWCA9IF9jbGFtcCQxKDAsIF9tYXhTY3JvbGwodGFyZ2V0LCBfaG9yaXpvbnRhbCkpKTtcbiAgICAgIGxhc3RSZWZyZXNoSUQgPSBfcmVmcmVzaElEO1xuICAgIH0sXG4gICAgICAgIHJlbW92ZUNvbnRlbnRPZmZzZXQgPSBmdW5jdGlvbiByZW1vdmVDb250ZW50T2Zmc2V0KCkge1xuICAgICAgY29udGVudC5fZ3NhcC55ID0gX3JvdW5kKHBhcnNlRmxvYXQoY29udGVudC5fZ3NhcC55KSArIHNjcm9sbEZ1bmNZLm9mZnNldCkgKyBcInB4XCI7XG4gICAgICBjb250ZW50LnN0eWxlLnRyYW5zZm9ybSA9IFwibWF0cml4M2QoMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgXCIgKyBwYXJzZUZsb2F0KGNvbnRlbnQuX2dzYXAueSkgKyBcIiwgMCwgMSlcIjtcbiAgICAgIHNjcm9sbEZ1bmNZLm9mZnNldCA9IHNjcm9sbEZ1bmNZLmNhY2hlSUQgPSAwO1xuICAgIH0sXG4gICAgICAgIGlnbm9yZURyYWcgPSBmdW5jdGlvbiBpZ25vcmVEcmFnKCkge1xuICAgICAgaWYgKHNraXBUb3VjaE1vdmUpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc3VtZVRvdWNoTW92ZSk7XG5cbiAgICAgICAgdmFyIG9mZnNldCA9IF9yb3VuZChzZWxmLmRlbHRhWSAvIDIpLFxuICAgICAgICAgICAgc2Nyb2xsID0gc2Nyb2xsQ2xhbXBZKHNjcm9sbEZ1bmNZLnYgLSBvZmZzZXQpO1xuXG4gICAgICAgIGlmIChjb250ZW50ICYmIHNjcm9sbCAhPT0gc2Nyb2xsRnVuY1kudiArIHNjcm9sbEZ1bmNZLm9mZnNldCkge1xuICAgICAgICAgIHNjcm9sbEZ1bmNZLm9mZnNldCA9IHNjcm9sbCAtIHNjcm9sbEZ1bmNZLnY7XG5cbiAgICAgICAgICB2YXIgeSA9IF9yb3VuZCgocGFyc2VGbG9hdChjb250ZW50ICYmIGNvbnRlbnQuX2dzYXAueSkgfHwgMCkgLSBzY3JvbGxGdW5jWS5vZmZzZXQpO1xuXG4gICAgICAgICAgY29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSBcIm1hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIFwiICsgeSArIFwiLCAwLCAxKVwiO1xuICAgICAgICAgIGNvbnRlbnQuX2dzYXAueSA9IHkgKyBcInB4XCI7XG4gICAgICAgICAgc2Nyb2xsRnVuY1kuY2FjaGVJRCA9IF9zY3JvbGxlcnMuY2FjaGU7XG5cbiAgICAgICAgICBfdXBkYXRlQWxsKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgc2Nyb2xsRnVuY1kub2Zmc2V0ICYmIHJlbW92ZUNvbnRlbnRPZmZzZXQoKTtcbiAgICAgIHNraXBUb3VjaE1vdmUgPSB0cnVlO1xuICAgIH0sXG4gICAgICAgIHR3ZWVuLFxuICAgICAgICBzdGFydFNjcm9sbFgsXG4gICAgICAgIHN0YXJ0U2Nyb2xsWSxcbiAgICAgICAgb25TdG9wRGVsYXllZENhbGwsXG4gICAgICAgIG9uUmVzaXplID0gZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgICB1cGRhdGVDbGFtcHMoKTtcblxuICAgICAgaWYgKHR3ZWVuLmlzQWN0aXZlKCkgJiYgdHdlZW4udmFycy5zY3JvbGxZID4gbWF4WSkge1xuICAgICAgICBzY3JvbGxGdW5jWSgpID4gbWF4WSA/IHR3ZWVuLnByb2dyZXNzKDEpICYmIHNjcm9sbEZ1bmNZKG1heFkpIDogdHdlZW4ucmVzZXRUbyhcInNjcm9sbFlcIiwgbWF4WSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnRlbnQgJiYgZ3NhcCQxLnNldChjb250ZW50LCB7XG4gICAgICB5OiBcIis9MFwiXG4gICAgfSk7XG5cbiAgICB2YXJzLmlnbm9yZUNoZWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBfZml4SU9TQnVnICYmIGUudHlwZSA9PT0gXCJ0b3VjaG1vdmVcIiAmJiBpZ25vcmVEcmFnKCkgfHwgc2NhbGUgPiAxLjA1ICYmIGUudHlwZSAhPT0gXCJ0b3VjaHN0YXJ0XCIgfHwgc2VsZi5pc0dlc3R1cmluZyB8fCBlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDE7XG4gICAgfTtcblxuICAgIHZhcnMub25QcmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNraXBUb3VjaE1vdmUgPSBmYWxzZTtcbiAgICAgIHZhciBwcmV2U2NhbGUgPSBzY2FsZTtcbiAgICAgIHNjYWxlID0gX3JvdW5kKChfd2luJDEudmlzdWFsVmlld3BvcnQgJiYgX3dpbiQxLnZpc3VhbFZpZXdwb3J0LnNjYWxlIHx8IDEpIC8gaW5pdGlhbFNjYWxlKTtcbiAgICAgIHR3ZWVuLnBhdXNlKCk7XG4gICAgICBwcmV2U2NhbGUgIT09IHNjYWxlICYmIF9hbGxvd05hdGl2ZVBhbm5pbmcodGFyZ2V0LCBzY2FsZSA+IDEuMDEgPyB0cnVlIDogbm9ybWFsaXplU2Nyb2xsWCA/IGZhbHNlIDogXCJ4XCIpO1xuICAgICAgc3RhcnRTY3JvbGxYID0gc2Nyb2xsRnVuY1goKTtcbiAgICAgIHN0YXJ0U2Nyb2xsWSA9IHNjcm9sbEZ1bmNZKCk7XG4gICAgICB1cGRhdGVDbGFtcHMoKTtcbiAgICAgIGxhc3RSZWZyZXNoSUQgPSBfcmVmcmVzaElEO1xuICAgIH07XG5cbiAgICB2YXJzLm9uUmVsZWFzZSA9IHZhcnMub25HZXN0dXJlU3RhcnQgPSBmdW5jdGlvbiAoc2VsZiwgd2FzRHJhZ2dpbmcpIHtcbiAgICAgIHNjcm9sbEZ1bmNZLm9mZnNldCAmJiByZW1vdmVDb250ZW50T2Zmc2V0KCk7XG5cbiAgICAgIGlmICghd2FzRHJhZ2dpbmcpIHtcbiAgICAgICAgb25TdG9wRGVsYXllZENhbGwucmVzdGFydCh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9zY3JvbGxlcnMuY2FjaGUrKztcbiAgICAgICAgdmFyIGR1ciA9IHJlc29sdmVNb21lbnR1bUR1cmF0aW9uKCksXG4gICAgICAgICAgICBjdXJyZW50U2Nyb2xsLFxuICAgICAgICAgICAgZW5kU2Nyb2xsO1xuXG4gICAgICAgIGlmIChub3JtYWxpemVTY3JvbGxYKSB7XG4gICAgICAgICAgY3VycmVudFNjcm9sbCA9IHNjcm9sbEZ1bmNYKCk7XG4gICAgICAgICAgZW5kU2Nyb2xsID0gY3VycmVudFNjcm9sbCArIGR1ciAqIDAuMDUgKiAtc2VsZi52ZWxvY2l0eVggLyAwLjIyNztcbiAgICAgICAgICBkdXIgKj0gX2NsYW1wU2Nyb2xsQW5kR2V0RHVyYXRpb25NdWx0aXBsaWVyKHNjcm9sbEZ1bmNYLCBjdXJyZW50U2Nyb2xsLCBlbmRTY3JvbGwsIF9tYXhTY3JvbGwodGFyZ2V0LCBfaG9yaXpvbnRhbCkpO1xuICAgICAgICAgIHR3ZWVuLnZhcnMuc2Nyb2xsWCA9IHNjcm9sbENsYW1wWChlbmRTY3JvbGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudFNjcm9sbCA9IHNjcm9sbEZ1bmNZKCk7XG4gICAgICAgIGVuZFNjcm9sbCA9IGN1cnJlbnRTY3JvbGwgKyBkdXIgKiAwLjA1ICogLXNlbGYudmVsb2NpdHlZIC8gMC4yMjc7XG4gICAgICAgIGR1ciAqPSBfY2xhbXBTY3JvbGxBbmRHZXREdXJhdGlvbk11bHRpcGxpZXIoc2Nyb2xsRnVuY1ksIGN1cnJlbnRTY3JvbGwsIGVuZFNjcm9sbCwgX21heFNjcm9sbCh0YXJnZXQsIF92ZXJ0aWNhbCkpO1xuICAgICAgICB0d2Vlbi52YXJzLnNjcm9sbFkgPSBzY3JvbGxDbGFtcFkoZW5kU2Nyb2xsKTtcbiAgICAgICAgdHdlZW4uaW52YWxpZGF0ZSgpLmR1cmF0aW9uKGR1cikucGxheSgwLjAxKTtcblxuICAgICAgICBpZiAoX2ZpeElPU0J1ZyAmJiB0d2Vlbi52YXJzLnNjcm9sbFkgPj0gbWF4WSB8fCBjdXJyZW50U2Nyb2xsID49IG1heFkgLSAxKSB7XG4gICAgICAgICAgZ3NhcCQxLnRvKHt9LCB7XG4gICAgICAgICAgICBvblVwZGF0ZTogb25SZXNpemUsXG4gICAgICAgICAgICBkdXJhdGlvbjogZHVyXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgb25SZWxlYXNlICYmIG9uUmVsZWFzZShzZWxmKTtcbiAgICB9O1xuXG4gICAgdmFycy5vbldoZWVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHdlZW4uX3RzICYmIHR3ZWVuLnBhdXNlKCk7XG5cbiAgICAgIGlmIChfZ2V0VGltZSQxKCkgLSB3aGVlbFJlZnJlc2ggPiAxMDAwKSB7XG4gICAgICAgIGxhc3RSZWZyZXNoSUQgPSAwO1xuICAgICAgICB3aGVlbFJlZnJlc2ggPSBfZ2V0VGltZSQxKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhcnMub25DaGFuZ2UgPSBmdW5jdGlvbiAoc2VsZiwgZHgsIGR5LCB4QXJyYXksIHlBcnJheSkge1xuICAgICAgX3JlZnJlc2hJRCAhPT0gbGFzdFJlZnJlc2hJRCAmJiB1cGRhdGVDbGFtcHMoKTtcbiAgICAgIGR4ICYmIG5vcm1hbGl6ZVNjcm9sbFggJiYgc2Nyb2xsRnVuY1goc2Nyb2xsQ2xhbXBYKHhBcnJheVsyXSA9PT0gZHggPyBzdGFydFNjcm9sbFggKyAoc2VsZi5zdGFydFggLSBzZWxmLngpIDogc2Nyb2xsRnVuY1goKSArIGR4IC0geEFycmF5WzFdKSk7XG5cbiAgICAgIGlmIChkeSkge1xuICAgICAgICBzY3JvbGxGdW5jWS5vZmZzZXQgJiYgcmVtb3ZlQ29udGVudE9mZnNldCgpO1xuICAgICAgICB2YXIgaXNUb3VjaCA9IHlBcnJheVsyXSA9PT0gZHksXG4gICAgICAgICAgICB5ID0gaXNUb3VjaCA/IHN0YXJ0U2Nyb2xsWSArIHNlbGYuc3RhcnRZIC0gc2VsZi55IDogc2Nyb2xsRnVuY1koKSArIGR5IC0geUFycmF5WzFdLFxuICAgICAgICAgICAgeUNsYW1wZWQgPSBzY3JvbGxDbGFtcFkoeSk7XG4gICAgICAgIGlzVG91Y2ggJiYgeSAhPT0geUNsYW1wZWQgJiYgKHN0YXJ0U2Nyb2xsWSArPSB5Q2xhbXBlZCAtIHkpO1xuICAgICAgICBzY3JvbGxGdW5jWSh5Q2xhbXBlZCk7XG4gICAgICB9XG5cbiAgICAgIChkeSB8fCBkeCkgJiYgX3VwZGF0ZUFsbCgpO1xuICAgIH07XG5cbiAgICB2YXJzLm9uRW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX2FsbG93TmF0aXZlUGFubmluZyh0YXJnZXQsIG5vcm1hbGl6ZVNjcm9sbFggPyBmYWxzZSA6IFwieFwiKTtcblxuICAgICAgU2Nyb2xsVHJpZ2dlciQxLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWZyZXNoXCIsIG9uUmVzaXplKTtcblxuICAgICAgX2FkZExpc3RlbmVyJDEoX3dpbiQxLCBcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XG5cbiAgICAgIGlmIChzY3JvbGxGdW5jWS5zbW9vdGgpIHtcbiAgICAgICAgc2Nyb2xsRnVuY1kudGFyZ2V0LnN0eWxlLnNjcm9sbEJlaGF2aW9yID0gXCJhdXRvXCI7XG4gICAgICAgIHNjcm9sbEZ1bmNZLnNtb290aCA9IHNjcm9sbEZ1bmNYLnNtb290aCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpbnB1dE9ic2VydmVyLmVuYWJsZSgpO1xuICAgIH07XG5cbiAgICB2YXJzLm9uRGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9hbGxvd05hdGl2ZVBhbm5pbmcodGFyZ2V0LCB0cnVlKTtcblxuICAgICAgX3JlbW92ZUxpc3RlbmVyJDEoX3dpbiQxLCBcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XG5cbiAgICAgIFNjcm9sbFRyaWdnZXIkMS5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVmcmVzaFwiLCBvblJlc2l6ZSk7XG4gICAgICBpbnB1dE9ic2VydmVyLmtpbGwoKTtcbiAgICB9O1xuXG4gICAgdmFycy5sb2NrQXhpcyA9IHZhcnMubG9ja0F4aXMgIT09IGZhbHNlO1xuICAgIHNlbGYgPSBuZXcgT2JzZXJ2ZXIodmFycyk7XG4gICAgc2VsZi5pT1MgPSBfZml4SU9TQnVnO1xuICAgIF9maXhJT1NCdWcgJiYgIXNjcm9sbEZ1bmNZKCkgJiYgc2Nyb2xsRnVuY1koMSk7XG4gICAgX2ZpeElPU0J1ZyAmJiBnc2FwJDEudGlja2VyLmFkZChfcGFzc1Rocm91Z2gpO1xuICAgIG9uU3RvcERlbGF5ZWRDYWxsID0gc2VsZi5fZGM7XG4gICAgdHdlZW4gPSBnc2FwJDEudG8oc2VsZiwge1xuICAgICAgZWFzZTogXCJwb3dlcjRcIixcbiAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgIGluaGVyaXQ6IGZhbHNlLFxuICAgICAgc2Nyb2xsWDogbm9ybWFsaXplU2Nyb2xsWCA/IFwiKz0wLjFcIiA6IFwiKz0wXCIsXG4gICAgICBzY3JvbGxZOiBcIis9MC4xXCIsXG4gICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgc2Nyb2xsWTogX2ludGVycnVwdGlvblRyYWNrZXIoc2Nyb2xsRnVuY1ksIHNjcm9sbEZ1bmNZKCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gdHdlZW4ucGF1c2UoKTtcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBvblVwZGF0ZTogX3VwZGF0ZUFsbCxcbiAgICAgIG9uQ29tcGxldGU6IG9uU3RvcERlbGF5ZWRDYWxsLnZhcnMub25Db21wbGV0ZVxuICAgIH0pO1xuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIFNjcm9sbFRyaWdnZXIkMS5zb3J0ID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICByZXR1cm4gX3RyaWdnZXJzLnNvcnQoZnVuYyB8fCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIChhLnZhcnMucmVmcmVzaFByaW9yaXR5IHx8IDApICogLTFlNiArIGEuc3RhcnQgLSAoYi5zdGFydCArIChiLnZhcnMucmVmcmVzaFByaW9yaXR5IHx8IDApICogLTFlNik7XG4gICAgfSk7XG4gIH07XG5cbiAgU2Nyb2xsVHJpZ2dlciQxLm9ic2VydmUgPSBmdW5jdGlvbiAodmFycykge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2ZXIodmFycyk7XG4gIH07XG5cbiAgU2Nyb2xsVHJpZ2dlciQxLm5vcm1hbGl6ZVNjcm9sbCA9IGZ1bmN0aW9uICh2YXJzKSB7XG4gICAgaWYgKHR5cGVvZiB2YXJzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gX25vcm1hbGl6ZXIkMTtcbiAgICB9XG5cbiAgICBpZiAodmFycyA9PT0gdHJ1ZSAmJiBfbm9ybWFsaXplciQxKSB7XG4gICAgICByZXR1cm4gX25vcm1hbGl6ZXIkMS5lbmFibGUoKTtcbiAgICB9XG5cbiAgICBpZiAodmFycyA9PT0gZmFsc2UpIHtcbiAgICAgIF9ub3JtYWxpemVyJDEgJiYgX25vcm1hbGl6ZXIkMS5raWxsKCk7XG4gICAgICBfbm9ybWFsaXplciQxID0gdmFycztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbm9ybWFsaXplciA9IHZhcnMgaW5zdGFuY2VvZiBPYnNlcnZlciA/IHZhcnMgOiBfZ2V0U2Nyb2xsTm9ybWFsaXplcih2YXJzKTtcbiAgICBfbm9ybWFsaXplciQxICYmIF9ub3JtYWxpemVyJDEudGFyZ2V0ID09PSBub3JtYWxpemVyLnRhcmdldCAmJiBfbm9ybWFsaXplciQxLmtpbGwoKTtcbiAgICBfaXNWaWV3cG9ydCQxKG5vcm1hbGl6ZXIudGFyZ2V0KSAmJiAoX25vcm1hbGl6ZXIkMSA9IG5vcm1hbGl6ZXIpO1xuICAgIHJldHVybiBub3JtYWxpemVyO1xuICB9O1xuXG4gIFNjcm9sbFRyaWdnZXIkMS5jb3JlID0ge1xuICAgIF9nZXRWZWxvY2l0eVByb3A6IF9nZXRWZWxvY2l0eVByb3AsXG4gICAgX2lucHV0T2JzZXJ2ZXI6IF9pbnB1dE9ic2VydmVyLFxuICAgIF9zY3JvbGxlcnM6IF9zY3JvbGxlcnMsXG4gICAgX3Byb3hpZXM6IF9wcm94aWVzLFxuICAgIGJyaWRnZToge1xuICAgICAgc3M6IGZ1bmN0aW9uIHNzKCkge1xuICAgICAgICBfbGFzdFNjcm9sbFRpbWUgfHwgX2Rpc3BhdGNoKFwic2Nyb2xsU3RhcnRcIik7XG4gICAgICAgIF9sYXN0U2Nyb2xsVGltZSA9IF9nZXRUaW1lJDEoKTtcbiAgICAgIH0sXG4gICAgICByZWY6IGZ1bmN0aW9uIHJlZigpIHtcbiAgICAgICAgcmV0dXJuIF9yZWZyZXNoaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgX2dldEdTQVAkMSgpICYmIGdzYXAkMS5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyJDEpO1xuXG4gIGV4cG9ydHMuU2Nyb2xsVHJpZ2dlciA9IFNjcm9sbFRyaWdnZXIkMTtcbiAgZXhwb3J0cy5kZWZhdWx0ID0gU2Nyb2xsVHJpZ2dlciQxO1xuXG4gIGlmICh0eXBlb2Yod2luZG93KSA9PT0gJ3VuZGVmaW5lZCcgfHwgd2luZG93ICE9PSBleHBvcnRzKSB7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTt9IGVsc2Uge2RlbGV0ZSB3aW5kb3cuZGVmYXVsdDt9XG5cbn0pKSk7XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG5cdChnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwud2luZG93ID0gZ2xvYmFsLndpbmRvdyB8fCB7fSkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG5cdHZhciBlbW9qaUV4cCA9IC8oW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXSg/OltcXHUyMDBEXFx1RkUwRl1bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdKXsyLH18XFx1RDgzRFxcdURDNjkoPzpcXHUyMDBEKD86KD86XFx1RDgzRFxcdURDNjlcXHUyMDBEKT9cXHVEODNEXFx1REM2N3woPzpcXHVEODNEXFx1REM2OVxcdTIwMEQpP1xcdUQ4M0RcXHVEQzY2KXxcXHVEODNDW1xcdURGRkItXFx1REZGRl0pfFxcdUQ4M0RcXHVEQzY5XFx1MjAwRCg/OlxcdUQ4M0RcXHVEQzY5XFx1MjAwRCk/XFx1RDgzRFxcdURDNjZcXHUyMDBEXFx1RDgzRFxcdURDNjZ8XFx1RDgzRFxcdURDNjlcXHUyMDBEKD86XFx1RDgzRFxcdURDNjlcXHUyMDBEKT9cXHVEODNEXFx1REM2N1xcdTIwMEQoPzpcXHVEODNEW1xcdURDNjZcXHVEQzY3XSl8XFx1RDgzQ1xcdURGRjNcXHVGRTBGXFx1MjAwRFxcdUQ4M0NcXHVERjA4fCg/OlxcdUQ4M0NbXFx1REZDM1xcdURGQzRcXHVERkNBXXxcXHVEODNEW1xcdURDNkVcXHVEQzcxXFx1REM3M1xcdURDNzdcXHVEQzgxXFx1REM4MlxcdURDODZcXHVEQzg3XFx1REU0NS1cXHVERTQ3XFx1REU0QlxcdURFNERcXHVERTRFXFx1REVBM1xcdURFQjQtXFx1REVCNl18XFx1RDgzRVtcXHVERDI2XFx1REQzNy1cXHVERDM5XFx1REQzRFxcdUREM0VcXHVEREQ2LVxcdURERERdKSg/OlxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSlcXHUyMDBEW1xcdTI2NDBcXHUyNjQyXVxcdUZFMEZ8XFx1RDgzRFxcdURDNjkoPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pXFx1MjAwRCg/OlxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdKXwoPzpcXHVEODNDW1xcdURGQzNcXHVERkM0XFx1REZDQV18XFx1RDgzRFtcXHVEQzZFXFx1REM2RlxcdURDNzFcXHVEQzczXFx1REM3N1xcdURDODFcXHVEQzgyXFx1REM4NlxcdURDODdcXHVERTQ1LVxcdURFNDdcXHVERTRCXFx1REU0RFxcdURFNEVcXHVERUEzXFx1REVCNC1cXHVERUI2XXxcXHVEODNFW1xcdUREMjZcXHVERDM3LVxcdUREMzlcXHVERDNDLVxcdUREM0VcXHVEREQ2LVxcdUREREZdKVxcdTIwMERbXFx1MjY0MFxcdTI2NDJdXFx1RkUwRnxcXHVEODNDXFx1RERGRFxcdUQ4M0NcXHVEREYwfFxcdUQ4M0NcXHVEREY2XFx1RDgzQ1xcdURERTZ8XFx1RDgzQ1xcdURERjRcXHVEODNDXFx1RERGMnxcXHVEODNDXFx1RERFOSg/OlxcdUQ4M0NbXFx1RERFQVxcdURERUNcXHVEREVGXFx1RERGMFxcdURERjJcXHVEREY0XFx1RERGRl0pfFxcdUQ4M0NcXHVEREY3KD86XFx1RDgzQ1tcXHVEREVBXFx1RERGNFxcdURERjhcXHVEREZBXFx1RERGQ10pfFxcdUQ4M0NcXHVEREU4KD86XFx1RDgzQ1tcXHVEREU2XFx1RERFOFxcdURERTlcXHVEREVCLVxcdURERUVcXHVEREYwLVxcdURERjVcXHVEREY3XFx1RERGQS1cXHVEREZGXSl8KD86XFx1MjZGOXxcXHVEODNDW1xcdURGQ0JcXHVERkNDXXxcXHVEODNEXFx1REQ3NSkoPzpcXHVGRTBGXFx1MjAwRFtcXHUyNjQwXFx1MjY0Ml18KD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKVxcdTIwMERbXFx1MjY0MFxcdTI2NDJdKVxcdUZFMEZ8KD86XFx1RDgzRFxcdURDNDFcXHVGRTBGXFx1MjAwRFxcdUQ4M0RcXHVEREU4fFxcdUQ4M0RcXHVEQzY5KD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKVxcdTIwMERbXFx1MjY5NVxcdTI2OTZcXHUyNzA4XXxcXHVEODNEXFx1REM2OVxcdTIwMERbXFx1MjY5NVxcdTI2OTZcXHUyNzA4XXxcXHVEODNEXFx1REM2OCg/Oig/OlxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSlcXHUyMDBEW1xcdTI2OTVcXHUyNjk2XFx1MjcwOF18XFx1MjAwRFtcXHUyNjk1XFx1MjY5NlxcdTI3MDhdKSlcXHVGRTBGfFxcdUQ4M0NcXHVEREYyKD86XFx1RDgzQ1tcXHVEREU2XFx1RERFOC1cXHVEREVEXFx1RERGMC1cXHVEREZGXSl8XFx1RDgzRFxcdURDNjlcXHUyMDBEKD86XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGOTNcXHVERkE0XFx1REZBOFxcdURGRUJcXHVERkVEXXxcXHVEODNEW1xcdURDQkJcXHVEQ0JDXFx1REQyN1xcdUREMkNcXHVERTgwXFx1REU5Ml18XFx1Mjc2NFxcdUZFMEZcXHUyMDBEKD86XFx1RDgzRFxcdURDOEJcXHUyMDBEKD86XFx1RDgzRFtcXHVEQzY4XFx1REM2OV0pfFxcdUQ4M0RbXFx1REM2OFxcdURDNjldKSl8XFx1RDgzQ1xcdURERjEoPzpcXHVEODNDW1xcdURERTYtXFx1RERFOFxcdURERUVcXHVEREYwXFx1RERGNy1cXHVEREZCXFx1RERGRV0pfFxcdUQ4M0NcXHVEREVGKD86XFx1RDgzQ1tcXHVEREVBXFx1RERGMlxcdURERjRcXHVEREY1XSl8XFx1RDgzQ1xcdURERUQoPzpcXHVEODNDW1xcdURERjBcXHVEREYyXFx1RERGM1xcdURERjdcXHVEREY5XFx1RERGQV0pfFxcdUQ4M0NcXHVEREVCKD86XFx1RDgzQ1tcXHVEREVFLVxcdURERjBcXHVEREYyXFx1RERGNFxcdURERjddKXxbI1xcKjAtOV1cXHVGRTBGXFx1MjBFM3xcXHVEODNDXFx1RERFNyg/OlxcdUQ4M0NbXFx1RERFNlxcdURERTdcXHVEREU5LVxcdURERUZcXHVEREYxLVxcdURERjRcXHVEREY2LVxcdURERjlcXHVEREZCXFx1RERGQ1xcdURERkVcXHVEREZGXSl8XFx1RDgzQ1xcdURERTYoPzpcXHVEODNDW1xcdURERTgtXFx1RERFQ1xcdURERUVcXHVEREYxXFx1RERGMlxcdURERjRcXHVEREY2LVxcdURERkFcXHVEREZDXFx1RERGRFxcdURERkZdKXxcXHVEODNDXFx1RERGRig/OlxcdUQ4M0NbXFx1RERFNlxcdURERjJcXHVEREZDXSl8XFx1RDgzQ1xcdURERjUoPzpcXHVEODNDW1xcdURERTZcXHVEREVBLVxcdURERURcXHVEREYwLVxcdURERjNcXHVEREY3LVxcdURERjlcXHVEREZDXFx1RERGRV0pfFxcdUQ4M0NcXHVEREZCKD86XFx1RDgzQ1tcXHVEREU2XFx1RERFOFxcdURERUFcXHVEREVDXFx1RERFRVxcdURERjNcXHVEREZBXSl8XFx1RDgzQ1xcdURERjMoPzpcXHVEODNDW1xcdURERTZcXHVEREU4XFx1RERFQS1cXHVEREVDXFx1RERFRVxcdURERjFcXHVEREY0XFx1RERGNVxcdURERjdcXHVEREZBXFx1RERGRl0pfFxcdUQ4M0NcXHVERkY0XFx1REI0MFxcdURDNjdcXHVEQjQwXFx1REM2Mig/OlxcdURCNDBcXHVEQzc3XFx1REI0MFxcdURDNkNcXHVEQjQwXFx1REM3M3xcXHVEQjQwXFx1REM3M1xcdURCNDBcXHVEQzYzXFx1REI0MFxcdURDNzR8XFx1REI0MFxcdURDNjVcXHVEQjQwXFx1REM2RVxcdURCNDBcXHVEQzY3KVxcdURCNDBcXHVEQzdGfFxcdUQ4M0RcXHVEQzY4KD86XFx1MjAwRCg/OlxcdTI3NjRcXHVGRTBGXFx1MjAwRCg/OlxcdUQ4M0RcXHVEQzhCXFx1MjAwRCk/XFx1RDgzRFxcdURDNjh8KD86KD86XFx1RDgzRFtcXHVEQzY4XFx1REM2OV0pXFx1MjAwRCk/XFx1RDgzRFxcdURDNjZcXHUyMDBEXFx1RDgzRFxcdURDNjZ8KD86KD86XFx1RDgzRFtcXHVEQzY4XFx1REM2OV0pXFx1MjAwRCk/XFx1RDgzRFxcdURDNjdcXHUyMDBEKD86XFx1RDgzRFtcXHVEQzY2XFx1REM2N10pfFxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdKXwoPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pXFx1MjAwRCg/OlxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdKSl8XFx1RDgzQ1xcdURERjgoPzpcXHVEODNDW1xcdURERTYtXFx1RERFQVxcdURERUMtXFx1RERGNFxcdURERjctXFx1RERGOVxcdURERkJcXHVEREZELVxcdURERkZdKXxcXHVEODNDXFx1RERGMCg/OlxcdUQ4M0NbXFx1RERFQVxcdURERUMtXFx1RERFRVxcdURERjJcXHVEREYzXFx1RERGNVxcdURERjdcXHVEREZDXFx1RERGRVxcdURERkZdKXxcXHVEODNDXFx1RERGRSg/OlxcdUQ4M0NbXFx1RERFQVxcdURERjldKXxcXHVEODNDXFx1RERFRSg/OlxcdUQ4M0NbXFx1RERFOC1cXHVEREVBXFx1RERGMS1cXHVEREY0XFx1RERGNi1cXHVEREY5XSl8XFx1RDgzQ1xcdURERjkoPzpcXHVEODNDW1xcdURERTZcXHVEREU4XFx1RERFOVxcdURERUItXFx1RERFRFxcdURERUYtXFx1RERGNFxcdURERjdcXHVEREY5XFx1RERGQlxcdURERkNcXHVEREZGXSl8XFx1RDgzQ1xcdURERUMoPzpcXHVEODNDW1xcdURERTZcXHVEREU3XFx1RERFOS1cXHVEREVFXFx1RERGMS1cXHVEREYzXFx1RERGNS1cXHVEREZBXFx1RERGQ1xcdURERkVdKXxcXHVEODNDXFx1RERGQSg/OlxcdUQ4M0NbXFx1RERFNlxcdURERUNcXHVEREYyXFx1RERGM1xcdURERjhcXHVEREZFXFx1RERGRl0pfFxcdUQ4M0NcXHVEREVBKD86XFx1RDgzQ1tcXHVEREU2XFx1RERFOFxcdURERUFcXHVEREVDXFx1RERFRFxcdURERjctXFx1RERGQV0pfFxcdUQ4M0NcXHVEREZDKD86XFx1RDgzQ1tcXHVEREVCXFx1RERGOF0pfCg/OlxcdTI2Rjl8XFx1RDgzQ1tcXHVERkNCXFx1REZDQ118XFx1RDgzRFxcdURENzUpKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKXwoPzpcXHVEODNDW1xcdURGQzNcXHVERkM0XFx1REZDQV18XFx1RDgzRFtcXHVEQzZFXFx1REM3MVxcdURDNzNcXHVEQzc3XFx1REM4MVxcdURDODJcXHVEQzg2XFx1REM4N1xcdURFNDUtXFx1REU0N1xcdURFNEJcXHVERTREXFx1REU0RVxcdURFQTNcXHVERUI0LVxcdURFQjZdfFxcdUQ4M0VbXFx1REQyNlxcdUREMzctXFx1REQzOVxcdUREM0RcXHVERDNFXFx1RERENi1cXHVEREREXSkoPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pfCg/OltcXHUyNjFEXFx1MjcwQS1cXHUyNzBEXXxcXHVEODNDW1xcdURGODVcXHVERkMyXFx1REZDN118XFx1RDgzRFtcXHVEQzQyXFx1REM0M1xcdURDNDYtXFx1REM1MFxcdURDNjZcXHVEQzY3XFx1REM3MFxcdURDNzJcXHVEQzc0LVxcdURDNzZcXHVEQzc4XFx1REM3Q1xcdURDODNcXHVEQzg1XFx1RENBQVxcdURENzRcXHVERDdBXFx1REQ5MFxcdUREOTVcXHVERDk2XFx1REU0Q1xcdURFNEZcXHVERUMwXFx1REVDQ118XFx1RDgzRVtcXHVERDE4LVxcdUREMUNcXHVERDFFXFx1REQxRlxcdUREMzAtXFx1REQzNlxcdURERDEtXFx1RERENV0pKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKXxcXHVEODNEXFx1REM2OCg/OlxcdTIwMEQoPzooPzooPzpcXHVEODNEW1xcdURDNjhcXHVEQzY5XSlcXHUyMDBEKT9cXHVEODNEXFx1REM2N3woPzooPzpcXHVEODNEW1xcdURDNjhcXHVEQzY5XSlcXHUyMDBEKT9cXHVEODNEXFx1REM2Nil8XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKXwoPzpbXFx1MjYxRFxcdTI2RjlcXHUyNzBBLVxcdTI3MERdfFxcdUQ4M0NbXFx1REY4NVxcdURGQzItXFx1REZDNFxcdURGQzdcXHVERkNBLVxcdURGQ0NdfFxcdUQ4M0RbXFx1REM0MlxcdURDNDNcXHVEQzQ2LVxcdURDNTBcXHVEQzY2LVxcdURDNjlcXHVEQzZFXFx1REM3MC1cXHVEQzc4XFx1REM3Q1xcdURDODEtXFx1REM4M1xcdURDODUtXFx1REM4N1xcdURDQUFcXHVERDc0XFx1REQ3NVxcdUREN0FcXHVERDkwXFx1REQ5NVxcdUREOTZcXHVERTQ1LVxcdURFNDdcXHVERTRCLVxcdURFNEZcXHVERUEzXFx1REVCNC1cXHVERUI2XFx1REVDMFxcdURFQ0NdfFxcdUQ4M0VbXFx1REQxOC1cXHVERDFDXFx1REQxRVxcdUREMUZcXHVERDI2XFx1REQzMC1cXHVERDM5XFx1REQzRFxcdUREM0VcXHVEREQxLVxcdURERERdKSg/OlxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSk/fCg/OltcXHUyMzFBXFx1MjMxQlxcdTIzRTktXFx1MjNFQ1xcdTIzRjBcXHUyM0YzXFx1MjVGRFxcdTI1RkVcXHUyNjE0XFx1MjYxNVxcdTI2NDgtXFx1MjY1M1xcdTI2N0ZcXHUyNjkzXFx1MjZBMVxcdTI2QUFcXHUyNkFCXFx1MjZCRFxcdTI2QkVcXHUyNkM0XFx1MjZDNVxcdTI2Q0VcXHUyNkQ0XFx1MjZFQVxcdTI2RjJcXHUyNkYzXFx1MjZGNVxcdTI2RkFcXHUyNkZEXFx1MjcwNVxcdTI3MEFcXHUyNzBCXFx1MjcyOFxcdTI3NENcXHUyNzRFXFx1Mjc1My1cXHUyNzU1XFx1Mjc1N1xcdTI3OTUtXFx1Mjc5N1xcdTI3QjBcXHUyN0JGXFx1MkIxQlxcdTJCMUNcXHUyQjUwXFx1MkI1NV18XFx1RDgzQ1tcXHVEQzA0XFx1RENDRlxcdUREOEVcXHVERDkxLVxcdUREOUFcXHVEREU2LVxcdURERkZcXHVERTAxXFx1REUxQVxcdURFMkZcXHVERTMyLVxcdURFMzZcXHVERTM4LVxcdURFM0FcXHVERTUwXFx1REU1MVxcdURGMDAtXFx1REYyMFxcdURGMkQtXFx1REYzNVxcdURGMzctXFx1REY3Q1xcdURGN0UtXFx1REY5M1xcdURGQTAtXFx1REZDQVxcdURGQ0YtXFx1REZEM1xcdURGRTAtXFx1REZGMFxcdURGRjRcXHVERkY4LVxcdURGRkZdfFxcdUQ4M0RbXFx1REMwMC1cXHVEQzNFXFx1REM0MFxcdURDNDItXFx1RENGQ1xcdURDRkYtXFx1REQzRFxcdURENEItXFx1REQ0RVxcdURENTAtXFx1REQ2N1xcdUREN0FcXHVERDk1XFx1REQ5NlxcdUREQTRcXHVEREZCLVxcdURFNEZcXHVERTgwLVxcdURFQzVcXHVERUNDXFx1REVEMC1cXHVERUQyXFx1REVFQlxcdURFRUNcXHVERUY0LVxcdURFRjhdfFxcdUQ4M0VbXFx1REQxMC1cXHVERDNBXFx1REQzQy1cXHVERDNFXFx1REQ0MC1cXHVERDQ1XFx1REQ0Ny1cXHVERDRDXFx1REQ1MC1cXHVERDZCXFx1REQ4MC1cXHVERDk3XFx1RERDMFxcdURERDAtXFx1RERFNl0pfCg/OlsjXFwqMC05XFx4QTlcXHhBRVxcdTIwM0NcXHUyMDQ5XFx1MjEyMlxcdTIxMzlcXHUyMTk0LVxcdTIxOTlcXHUyMUE5XFx1MjFBQVxcdTIzMUFcXHUyMzFCXFx1MjMyOFxcdTIzQ0ZcXHUyM0U5LVxcdTIzRjNcXHUyM0Y4LVxcdTIzRkFcXHUyNEMyXFx1MjVBQVxcdTI1QUJcXHUyNUI2XFx1MjVDMFxcdTI1RkItXFx1MjVGRVxcdTI2MDAtXFx1MjYwNFxcdTI2MEVcXHUyNjExXFx1MjYxNFxcdTI2MTVcXHUyNjE4XFx1MjYxRFxcdTI2MjBcXHUyNjIyXFx1MjYyM1xcdTI2MjZcXHUyNjJBXFx1MjYyRVxcdTI2MkZcXHUyNjM4LVxcdTI2M0FcXHUyNjQwXFx1MjY0MlxcdTI2NDgtXFx1MjY1M1xcdTI2NjBcXHUyNjYzXFx1MjY2NVxcdTI2NjZcXHUyNjY4XFx1MjY3QlxcdTI2N0ZcXHUyNjkyLVxcdTI2OTdcXHUyNjk5XFx1MjY5QlxcdTI2OUNcXHUyNkEwXFx1MjZBMVxcdTI2QUFcXHUyNkFCXFx1MjZCMFxcdTI2QjFcXHUyNkJEXFx1MjZCRVxcdTI2QzRcXHUyNkM1XFx1MjZDOFxcdTI2Q0VcXHUyNkNGXFx1MjZEMVxcdTI2RDNcXHUyNkQ0XFx1MjZFOVxcdTI2RUFcXHUyNkYwLVxcdTI2RjVcXHUyNkY3LVxcdTI2RkFcXHUyNkZEXFx1MjcwMlxcdTI3MDVcXHUyNzA4LVxcdTI3MERcXHUyNzBGXFx1MjcxMlxcdTI3MTRcXHUyNzE2XFx1MjcxRFxcdTI3MjFcXHUyNzI4XFx1MjczM1xcdTI3MzRcXHUyNzQ0XFx1Mjc0N1xcdTI3NENcXHUyNzRFXFx1Mjc1My1cXHUyNzU1XFx1Mjc1N1xcdTI3NjNcXHUyNzY0XFx1Mjc5NS1cXHUyNzk3XFx1MjdBMVxcdTI3QjBcXHUyN0JGXFx1MjkzNFxcdTI5MzVcXHUyQjA1LVxcdTJCMDdcXHUyQjFCXFx1MkIxQ1xcdTJCNTBcXHUyQjU1XFx1MzAzMFxcdTMwM0RcXHUzMjk3XFx1MzI5OV18XFx1RDgzQ1tcXHVEQzA0XFx1RENDRlxcdURENzBcXHVERDcxXFx1REQ3RVxcdUREN0ZcXHVERDhFXFx1REQ5MS1cXHVERDlBXFx1RERFNi1cXHVEREZGXFx1REUwMVxcdURFMDJcXHVERTFBXFx1REUyRlxcdURFMzItXFx1REUzQVxcdURFNTBcXHVERTUxXFx1REYwMC1cXHVERjIxXFx1REYyNC1cXHVERjkzXFx1REY5NlxcdURGOTdcXHVERjk5LVxcdURGOUJcXHVERjlFLVxcdURGRjBcXHVERkYzLVxcdURGRjVcXHVERkY3LVxcdURGRkZdfFxcdUQ4M0RbXFx1REMwMC1cXHVEQ0ZEXFx1RENGRi1cXHVERDNEXFx1REQ0OS1cXHVERDRFXFx1REQ1MC1cXHVERDY3XFx1REQ2RlxcdURENzBcXHVERDczLVxcdUREN0FcXHVERDg3XFx1REQ4QS1cXHVERDhEXFx1REQ5MFxcdUREOTVcXHVERDk2XFx1RERBNFxcdUREQTVcXHVEREE4XFx1RERCMVxcdUREQjJcXHVEREJDXFx1RERDMi1cXHVEREM0XFx1REREMS1cXHVEREQzXFx1REREQy1cXHVERERFXFx1RERFMVxcdURERTNcXHVEREU4XFx1RERFRlxcdURERjNcXHVEREZBLVxcdURFNEZcXHVERTgwLVxcdURFQzVcXHVERUNCLVxcdURFRDJcXHVERUUwLVxcdURFRTVcXHVERUU5XFx1REVFQlxcdURFRUNcXHVERUYwXFx1REVGMy1cXHVERUY4XXxcXHVEODNFW1xcdUREMTAtXFx1REQzQVxcdUREM0MtXFx1REQzRVxcdURENDAtXFx1REQ0NVxcdURENDctXFx1REQ0Q1xcdURENTAtXFx1REQ2QlxcdUREODAtXFx1REQ5N1xcdUREQzBcXHVEREQwLVxcdURERTZdKVxcdUZFMEYpLztcblx0ZnVuY3Rpb24gZ2V0VGV4dChlKSB7XG5cdCAgdmFyIHR5cGUgPSBlLm5vZGVUeXBlLFxuXHQgICAgICByZXN1bHQgPSBcIlwiO1xuXG5cdCAgaWYgKHR5cGUgPT09IDEgfHwgdHlwZSA9PT0gOSB8fCB0eXBlID09PSAxMSkge1xuXHQgICAgaWYgKHR5cGVvZiBlLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgIHJldHVybiBlLnRleHRDb250ZW50O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZm9yIChlID0gZS5maXJzdENoaWxkOyBlOyBlID0gZS5uZXh0U2libGluZykge1xuXHQgICAgICAgIHJlc3VsdCArPSBnZXRUZXh0KGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAzIHx8IHR5cGUgPT09IDQpIHtcblx0ICAgIHJldHVybiBlLm5vZGVWYWx1ZTtcblx0ICB9XG5cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0LyohXG5cdCAqIFNwbGl0VGV4dDogMy4xMi41XG5cdCAqIGh0dHBzOi8vZ3NhcC5jb21cblx0ICpcblx0ICogQGxpY2Vuc2UgQ29weXJpZ2h0IDIwMDgtMjAyNCwgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dzYXAuY29tL3N0YW5kYXJkLWxpY2Vuc2Ugb3IgZm9yXG5cdCAqIENsdWIgR1NBUCBtZW1iZXJzLCB0aGUgYWdyZWVtZW50IGlzc3VlZCB3aXRoIHRoYXQgbWVtYmVyc2hpcC5cblx0ICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG5cdCovXG5cblx0dmFyIF9kb2MsXG5cdCAgICBfd2luLFxuXHQgICAgX2NvcmVJbml0dGVkLFxuXHQgICAgZ3NhcCxcblx0ICAgIF9jb250ZXh0LFxuXHQgICAgX3RvQXJyYXksXG5cdCAgICBfc3RyaXBFeHAgPSAvKD86XFxyfFxcbnxcXHRcXHQpL2csXG5cdCAgICBfbXVsdGlwbGVTcGFjZXNFeHAgPSAvKD86XFxzXFxzKykvZyxcblx0ICAgIF9ub25CcmVha2luZ1NwYWNlID0gU3RyaW5nLmZyb21DaGFyQ29kZSgxNjApLFxuXHQgICAgX2luaXRDb3JlID0gZnVuY3Rpb24gX2luaXRDb3JlKGNvcmUpIHtcblx0ICBfZG9jID0gZG9jdW1lbnQ7XG5cdCAgX3dpbiA9IHdpbmRvdztcblx0ICBnc2FwID0gZ3NhcCB8fCBjb3JlIHx8IF93aW4uZ3NhcCB8fCBjb25zb2xlLndhcm4oXCJQbGVhc2UgZ3NhcC5yZWdpc3RlclBsdWdpbihTcGxpdFRleHQpXCIpO1xuXG5cdCAgaWYgKGdzYXApIHtcblx0ICAgIF90b0FycmF5ID0gZ3NhcC51dGlscy50b0FycmF5O1xuXG5cdCAgICBfY29udGV4dCA9IGdzYXAuY29yZS5jb250ZXh0IHx8IGZ1bmN0aW9uICgpIHt9O1xuXG5cdCAgICBfY29yZUluaXR0ZWQgPSAxO1xuXHQgIH1cblx0fSxcblx0ICAgIF9nZXRDb21wdXRlZFN0eWxlID0gZnVuY3Rpb24gX2dldENvbXB1dGVkU3R5bGUoZWxlbWVudCkge1xuXHQgIHJldHVybiBfd2luLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cdH0sXG5cdCAgICBfaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uIF9pc0Fic29sdXRlKHZhcnMpIHtcblx0ICByZXR1cm4gdmFycy5wb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHZhcnMuYWJzb2x1dGUgPT09IHRydWU7XG5cdH0sXG5cdCAgICBfZmluZFNwZWNpYWxDaGFycyA9IGZ1bmN0aW9uIF9maW5kU3BlY2lhbENoYXJzKHRleHQsIGNoYXJzKSB7XG5cdCAgdmFyIGkgPSBjaGFycy5sZW5ndGgsXG5cdCAgICAgIHM7XG5cblx0ICB3aGlsZSAoLS1pID4gLTEpIHtcblx0ICAgIHMgPSBjaGFyc1tpXTtcblxuXHQgICAgaWYgKHRleHQuc3Vic3RyKDAsIHMubGVuZ3RoKSA9PT0gcykge1xuXHQgICAgICByZXR1cm4gcy5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfVxuXHR9LFxuXHQgICAgX2RpdlN0YXJ0ID0gXCIgc3R5bGU9J3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWJsb2NrOydcIixcblx0ICAgIF9jc3NDbGFzc0Z1bmMgPSBmdW5jdGlvbiBfY3NzQ2xhc3NGdW5jKGNzc0NsYXNzLCB0YWcpIHtcblx0ICBpZiAoY3NzQ2xhc3MgPT09IHZvaWQgMCkge1xuXHQgICAgY3NzQ2xhc3MgPSBcIlwiO1xuXHQgIH1cblxuXHQgIHZhciBpdGVyYXRlID0gfmNzc0NsYXNzLmluZGV4T2YoXCIrK1wiKSxcblx0ICAgICAgbnVtID0gMTtcblxuXHQgIGlmIChpdGVyYXRlKSB7XG5cdCAgICBjc3NDbGFzcyA9IGNzc0NsYXNzLnNwbGl0KFwiKytcIikuam9pbihcIlwiKTtcblx0ICB9XG5cblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIFwiPFwiICsgdGFnICsgX2RpdlN0YXJ0ICsgKGNzc0NsYXNzID8gXCIgY2xhc3M9J1wiICsgY3NzQ2xhc3MgKyAoaXRlcmF0ZSA/IG51bSsrIDogXCJcIikgKyBcIic+XCIgOiBcIj5cIik7XG5cdCAgfTtcblx0fSxcblx0ICAgIF9zd2FwVGV4dCA9IGZ1bmN0aW9uIF9zd2FwVGV4dChlbGVtZW50LCBvbGRUZXh0LCBuZXdUZXh0KSB7XG5cdCAgdmFyIHR5cGUgPSBlbGVtZW50Lm5vZGVUeXBlO1xuXG5cdCAgaWYgKHR5cGUgPT09IDEgfHwgdHlwZSA9PT0gOSB8fCB0eXBlID09PSAxMSkge1xuXHQgICAgZm9yIChlbGVtZW50ID0gZWxlbWVudC5maXJzdENoaWxkOyBlbGVtZW50OyBlbGVtZW50ID0gZWxlbWVudC5uZXh0U2libGluZykge1xuXHQgICAgICBfc3dhcFRleHQoZWxlbWVudCwgb2xkVGV4dCwgbmV3VGV4dCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAzIHx8IHR5cGUgPT09IDQpIHtcblx0ICAgIGVsZW1lbnQubm9kZVZhbHVlID0gZWxlbWVudC5ub2RlVmFsdWUuc3BsaXQob2xkVGV4dCkuam9pbihuZXdUZXh0KTtcblx0ICB9XG5cdH0sXG5cdCAgICBfcHVzaFJldmVyc2VkID0gZnVuY3Rpb24gX3B1c2hSZXZlcnNlZChhLCBtZXJnZSkge1xuXHQgIHZhciBpID0gbWVyZ2UubGVuZ3RoO1xuXG5cdCAgd2hpbGUgKC0taSA+IC0xKSB7XG5cdCAgICBhLnB1c2gobWVyZ2VbaV0pO1xuXHQgIH1cblx0fSxcblx0ICAgIF9pc0JlZm9yZVdvcmREZWxpbWl0ZXIgPSBmdW5jdGlvbiBfaXNCZWZvcmVXb3JkRGVsaW1pdGVyKGUsIHJvb3QsIHdvcmREZWxpbWl0ZXIpIHtcblx0ICB2YXIgbmV4dDtcblxuXHQgIHdoaWxlIChlICYmIGUgIT09IHJvb3QpIHtcblx0ICAgIG5leHQgPSBlLl9uZXh0IHx8IGUubmV4dFNpYmxpbmc7XG5cblx0ICAgIGlmIChuZXh0KSB7XG5cdCAgICAgIHJldHVybiBuZXh0LnRleHRDb250ZW50LmNoYXJBdCgwKSA9PT0gd29yZERlbGltaXRlcjtcblx0ICAgIH1cblxuXHQgICAgZSA9IGUucGFyZW50Tm9kZSB8fCBlLl9wYXJlbnQ7XG5cdCAgfVxuXHR9LFxuXHQgICAgX2RlV29yZGlmeSA9IGZ1bmN0aW9uIF9kZVdvcmRpZnkoZSkge1xuXHQgIHZhciBjaGlsZHJlbiA9IF90b0FycmF5KGUuY2hpbGROb2RlcyksXG5cdCAgICAgIGwgPSBjaGlsZHJlbi5sZW5ndGgsXG5cdCAgICAgIGksXG5cdCAgICAgIGNoaWxkO1xuXG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcblxuXHQgICAgaWYgKGNoaWxkLl9pc1NwbGl0KSB7XG5cdCAgICAgIF9kZVdvcmRpZnkoY2hpbGQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGkgJiYgY2hpbGQucHJldmlvdXNTaWJsaW5nICYmIGNoaWxkLnByZXZpb3VzU2libGluZy5ub2RlVHlwZSA9PT0gMykge1xuXHQgICAgICAgIGNoaWxkLnByZXZpb3VzU2libGluZy5ub2RlVmFsdWUgKz0gY2hpbGQubm9kZVR5cGUgPT09IDMgPyBjaGlsZC5ub2RlVmFsdWUgOiBjaGlsZC5maXJzdENoaWxkLm5vZGVWYWx1ZTtcblx0ICAgICAgICBlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICAgICAgfSBlbHNlIGlmIChjaGlsZC5ub2RlVHlwZSAhPT0gMykge1xuXHQgICAgICAgIGUuaW5zZXJ0QmVmb3JlKGNoaWxkLmZpcnN0Q2hpbGQsIGNoaWxkKTtcblx0ICAgICAgICBlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fSxcblx0ICAgIF9nZXRTdHlsZUFzTnVtYmVyID0gZnVuY3Rpb24gX2dldFN0eWxlQXNOdW1iZXIobmFtZSwgY29tcHV0ZWRTdHlsZSkge1xuXHQgIHJldHVybiBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbbmFtZV0pIHx8IDA7XG5cdH0sXG5cdCAgICBfc2V0UG9zaXRpb25zQWZ0ZXJTcGxpdCA9IGZ1bmN0aW9uIF9zZXRQb3NpdGlvbnNBZnRlclNwbGl0KGVsZW1lbnQsIHZhcnMsIGFsbENoYXJzLCBhbGxXb3JkcywgYWxsTGluZXMsIG9yaWdXaWR0aCwgb3JpZ0hlaWdodCkge1xuXHQgIHZhciBjcyA9IF9nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuXHQgICAgICBwYWRkaW5nTGVmdCA9IF9nZXRTdHlsZUFzTnVtYmVyKFwicGFkZGluZ0xlZnRcIiwgY3MpLFxuXHQgICAgICBsaW5lT2Zmc2V0WSA9IC05OTksXG5cdCAgICAgIGJvcmRlclRvcEFuZEJvdHRvbSA9IF9nZXRTdHlsZUFzTnVtYmVyKFwiYm9yZGVyQm90dG9tV2lkdGhcIiwgY3MpICsgX2dldFN0eWxlQXNOdW1iZXIoXCJib3JkZXJUb3BXaWR0aFwiLCBjcyksXG5cdCAgICAgIGJvcmRlckxlZnRBbmRSaWdodCA9IF9nZXRTdHlsZUFzTnVtYmVyKFwiYm9yZGVyTGVmdFdpZHRoXCIsIGNzKSArIF9nZXRTdHlsZUFzTnVtYmVyKFwiYm9yZGVyUmlnaHRXaWR0aFwiLCBjcyksXG5cdCAgICAgIHBhZFRvcEFuZEJvdHRvbSA9IF9nZXRTdHlsZUFzTnVtYmVyKFwicGFkZGluZ1RvcFwiLCBjcykgKyBfZ2V0U3R5bGVBc051bWJlcihcInBhZGRpbmdCb3R0b21cIiwgY3MpLFxuXHQgICAgICBwYWRMZWZ0QW5kUmlnaHQgPSBfZ2V0U3R5bGVBc051bWJlcihcInBhZGRpbmdMZWZ0XCIsIGNzKSArIF9nZXRTdHlsZUFzTnVtYmVyKFwicGFkZGluZ1JpZ2h0XCIsIGNzKSxcblx0ICAgICAgbGluZVRocmVzaG9sZCA9IF9nZXRTdHlsZUFzTnVtYmVyKFwiZm9udFNpemVcIiwgY3MpICogKHZhcnMubGluZVRocmVzaG9sZCB8fCAwLjIpLFxuXHQgICAgICB0ZXh0QWxpZ24gPSBjcy50ZXh0QWxpZ24sXG5cdCAgICAgIGNoYXJBcnJheSA9IFtdLFxuXHQgICAgICB3b3JkQXJyYXkgPSBbXSxcblx0ICAgICAgbGluZUFycmF5ID0gW10sXG5cdCAgICAgIHdvcmREZWxpbWl0ZXIgPSB2YXJzLndvcmREZWxpbWl0ZXIgfHwgXCIgXCIsXG5cdCAgICAgIHRhZyA9IHZhcnMudGFnID8gdmFycy50YWcgOiB2YXJzLnNwYW4gPyBcInNwYW5cIiA6IFwiZGl2XCIsXG5cdCAgICAgIHR5cGVzID0gdmFycy50eXBlIHx8IHZhcnMuc3BsaXQgfHwgXCJjaGFycyx3b3JkcyxsaW5lc1wiLFxuXHQgICAgICBsaW5lcyA9IGFsbExpbmVzICYmIH50eXBlcy5pbmRleE9mKFwibGluZXNcIikgPyBbXSA6IG51bGwsXG5cdCAgICAgIHdvcmRzID0gfnR5cGVzLmluZGV4T2YoXCJ3b3Jkc1wiKSxcblx0ICAgICAgY2hhcnMgPSB+dHlwZXMuaW5kZXhPZihcImNoYXJzXCIpLFxuXHQgICAgICBhYnNvbHV0ZSA9IF9pc0Fic29sdXRlKHZhcnMpLFxuXHQgICAgICBsaW5lc0NsYXNzID0gdmFycy5saW5lc0NsYXNzLFxuXHQgICAgICBpdGVyYXRlTGluZSA9IH4obGluZXNDbGFzcyB8fCBcIlwiKS5pbmRleE9mKFwiKytcIiksXG5cdCAgICAgIHNwYWNlTm9kZXNUb1JlbW92ZSA9IFtdLFxuXHQgICAgICBpc0ZsZXggPSBjcy5kaXNwbGF5ID09PSBcImZsZXhcIixcblx0ICAgICAgcHJldklubGluZURpc3BsYXkgPSBlbGVtZW50LnN0eWxlLmRpc3BsYXksXG5cdCAgICAgIGksXG5cdCAgICAgIGosXG5cdCAgICAgIGwsXG5cdCAgICAgIG5vZGUsXG5cdCAgICAgIG5vZGVzLFxuXHQgICAgICBpc0NoaWxkLFxuXHQgICAgICBjdXJMaW5lLFxuXHQgICAgICBhZGRXb3JkU3BhY2VzLFxuXHQgICAgICBzdHlsZSxcblx0ICAgICAgbGluZU5vZGUsXG5cdCAgICAgIGxpbmVXaWR0aCxcblx0ICAgICAgb2Zmc2V0O1xuXG5cdCAgaXRlcmF0ZUxpbmUgJiYgKGxpbmVzQ2xhc3MgPSBsaW5lc0NsYXNzLnNwbGl0KFwiKytcIikuam9pbihcIlwiKSk7XG5cdCAgaXNGbGV4ICYmIChlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCIpO1xuXHQgIGogPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKTtcblx0ICBsID0gai5sZW5ndGg7XG5cdCAgbm9kZXMgPSBbXTtcblxuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIG5vZGVzW2ldID0galtpXTtcblx0ICB9XG5cblx0ICBpZiAobGluZXMgfHwgYWJzb2x1dGUpIHtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgbm9kZSA9IG5vZGVzW2ldO1xuXHQgICAgICBpc0NoaWxkID0gbm9kZS5wYXJlbnROb2RlID09PSBlbGVtZW50O1xuXG5cdCAgICAgIGlmIChpc0NoaWxkIHx8IGFic29sdXRlIHx8IGNoYXJzICYmICF3b3Jkcykge1xuXHQgICAgICAgIG9mZnNldCA9IG5vZGUub2Zmc2V0VG9wO1xuXG5cdCAgICAgICAgaWYgKGxpbmVzICYmIGlzQ2hpbGQgJiYgTWF0aC5hYnMob2Zmc2V0IC0gbGluZU9mZnNldFkpID4gbGluZVRocmVzaG9sZCAmJiAobm9kZS5ub2RlTmFtZSAhPT0gXCJCUlwiIHx8IGkgPT09IDApKSB7XG5cdCAgICAgICAgICBjdXJMaW5lID0gW107XG5cdCAgICAgICAgICBsaW5lcy5wdXNoKGN1ckxpbmUpO1xuXHQgICAgICAgICAgbGluZU9mZnNldFkgPSBvZmZzZXQ7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKGFic29sdXRlKSB7XG5cdCAgICAgICAgICBub2RlLl94ID0gbm9kZS5vZmZzZXRMZWZ0O1xuXHQgICAgICAgICAgbm9kZS5feSA9IG9mZnNldDtcblx0ICAgICAgICAgIG5vZGUuX3cgPSBub2RlLm9mZnNldFdpZHRoO1xuXHQgICAgICAgICAgbm9kZS5faCA9IG5vZGUub2Zmc2V0SGVpZ2h0O1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChsaW5lcykge1xuXHQgICAgICAgICAgaWYgKG5vZGUuX2lzU3BsaXQgJiYgaXNDaGlsZCB8fCAhY2hhcnMgJiYgaXNDaGlsZCB8fCB3b3JkcyAmJiBpc0NoaWxkIHx8ICF3b3JkcyAmJiBub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSA9PT0gZWxlbWVudCAmJiAhbm9kZS5wYXJlbnROb2RlLl9pc1NwbGl0KSB7XG5cdCAgICAgICAgICAgIGN1ckxpbmUucHVzaChub2RlKTtcblx0ICAgICAgICAgICAgbm9kZS5feCAtPSBwYWRkaW5nTGVmdDtcblxuXHQgICAgICAgICAgICBpZiAoX2lzQmVmb3JlV29yZERlbGltaXRlcihub2RlLCBlbGVtZW50LCB3b3JkRGVsaW1pdGVyKSkge1xuXHQgICAgICAgICAgICAgIG5vZGUuX3dvcmRFbmQgPSB0cnVlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cblx0ICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09PSBcIkJSXCIgJiYgKG5vZGUubmV4dFNpYmxpbmcgJiYgbm9kZS5uZXh0U2libGluZy5ub2RlTmFtZSA9PT0gXCJCUlwiIHx8IGkgPT09IDApKSB7XG5cdCAgICAgICAgICAgIGxpbmVzLnB1c2goW10pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblxuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIG5vZGUgPSBub2Rlc1tpXTtcblx0ICAgIGlzQ2hpbGQgPSBub2RlLnBhcmVudE5vZGUgPT09IGVsZW1lbnQ7XG5cblx0ICAgIGlmIChub2RlLm5vZGVOYW1lID09PSBcIkJSXCIpIHtcblx0ICAgICAgaWYgKGxpbmVzIHx8IGFic29sdXRlKSB7XG5cdCAgICAgICAgbm9kZS5wYXJlbnROb2RlICYmIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcblx0ICAgICAgICBub2Rlcy5zcGxpY2UoaS0tLCAxKTtcblx0ICAgICAgICBsLS07XG5cdCAgICAgIH0gZWxzZSBpZiAoIXdvcmRzKSB7XG5cdCAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoYWJzb2x1dGUpIHtcblx0ICAgICAgc3R5bGUgPSBub2RlLnN0eWxlO1xuXG5cdCAgICAgIGlmICghd29yZHMgJiYgIWlzQ2hpbGQpIHtcblx0ICAgICAgICBub2RlLl94ICs9IG5vZGUucGFyZW50Tm9kZS5feDtcblx0ICAgICAgICBub2RlLl95ICs9IG5vZGUucGFyZW50Tm9kZS5feTtcblx0ICAgICAgfVxuXG5cdCAgICAgIHN0eWxlLmxlZnQgPSBub2RlLl94ICsgXCJweFwiO1xuXHQgICAgICBzdHlsZS50b3AgPSBub2RlLl95ICsgXCJweFwiO1xuXHQgICAgICBzdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0ICAgICAgc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblx0ICAgICAgc3R5bGUud2lkdGggPSBub2RlLl93ICsgMSArIFwicHhcIjtcblx0ICAgICAgc3R5bGUuaGVpZ2h0ID0gbm9kZS5faCArIFwicHhcIjtcblx0ICAgIH1cblxuXHQgICAgaWYgKCF3b3JkcyAmJiBjaGFycykge1xuXHQgICAgICBpZiAobm9kZS5faXNTcGxpdCkge1xuXHQgICAgICAgIG5vZGUuX25leHQgPSBqID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgICAgICBub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XG5cblx0ICAgICAgICB3aGlsZSAoaiAmJiBqLm5vZGVUeXBlID09PSAzICYmIGoudGV4dENvbnRlbnQgPT09IFwiIFwiKSB7XG5cdCAgICAgICAgICBub2RlLl9uZXh0ID0gai5uZXh0U2libGluZztcblx0ICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChqKTtcblx0ICAgICAgICAgIGogPSBqLm5leHRTaWJsaW5nO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUuX2lzU3BsaXQpIHtcblx0ICAgICAgICBub2RlLl9wYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG5cblx0ICAgICAgICBpZiAoIW5vZGUucHJldmlvdXNTaWJsaW5nICYmIG5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgICAgICAgbm9kZS5maXJzdENoaWxkLl9pc0ZpcnN0ID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZyAmJiBub2RlLm5leHRTaWJsaW5nLnRleHRDb250ZW50ID09PSBcIiBcIiAmJiAhbm9kZS5uZXh0U2libGluZy5uZXh0U2libGluZykge1xuXHQgICAgICAgICAgc3BhY2VOb2Rlc1RvUmVtb3ZlLnB1c2gobm9kZS5uZXh0U2libGluZyk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgbm9kZS5fbmV4dCA9IG5vZGUubmV4dFNpYmxpbmcgJiYgbm9kZS5uZXh0U2libGluZy5faXNGaXJzdCA/IG51bGwgOiBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcblx0ICAgICAgICBub2Rlcy5zcGxpY2UoaS0tLCAxKTtcblx0ICAgICAgICBsLS07XG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzQ2hpbGQpIHtcblx0ICAgICAgICBvZmZzZXQgPSAhbm9kZS5uZXh0U2libGluZyAmJiBfaXNCZWZvcmVXb3JkRGVsaW1pdGVyKG5vZGUucGFyZW50Tm9kZSwgZWxlbWVudCwgd29yZERlbGltaXRlcik7XG5cdCAgICAgICAgbm9kZS5wYXJlbnROb2RlLl9wYXJlbnQgJiYgbm9kZS5wYXJlbnROb2RlLl9wYXJlbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG5cdCAgICAgICAgb2Zmc2V0ICYmIG5vZGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChfZG9jLmNyZWF0ZVRleHROb2RlKFwiIFwiKSk7XG5cblx0ICAgICAgICBpZiAodGFnID09PSBcInNwYW5cIikge1xuXHQgICAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBjaGFyQXJyYXkucHVzaChub2RlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUuX2lzU3BsaXQgJiYgIW5vZGUuX2lzU3BsaXQgJiYgbm9kZS5pbm5lckhUTUwgIT09IFwiXCIpIHtcblx0ICAgICAgd29yZEFycmF5LnB1c2gobm9kZSk7XG5cdCAgICB9IGVsc2UgaWYgKGNoYXJzICYmICFub2RlLl9pc1NwbGl0KSB7XG5cdCAgICAgIGlmICh0YWcgPT09IFwic3BhblwiKSB7XG5cdCAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjtcblx0ICAgICAgfVxuXG5cdCAgICAgIGNoYXJBcnJheS5wdXNoKG5vZGUpO1xuXHQgICAgfVxuXHQgIH1cblxuXHQgIGkgPSBzcGFjZU5vZGVzVG9SZW1vdmUubGVuZ3RoO1xuXG5cdCAgd2hpbGUgKC0taSA+IC0xKSB7XG5cdCAgICBzcGFjZU5vZGVzVG9SZW1vdmVbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzcGFjZU5vZGVzVG9SZW1vdmVbaV0pO1xuXHQgIH1cblxuXHQgIGlmIChsaW5lcykge1xuXHQgICAgaWYgKGFic29sdXRlKSB7XG5cdCAgICAgIGxpbmVOb2RlID0gX2RvYy5jcmVhdGVFbGVtZW50KHRhZyk7XG5cdCAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobGluZU5vZGUpO1xuXHQgICAgICBsaW5lV2lkdGggPSBsaW5lTm9kZS5vZmZzZXRXaWR0aCArIFwicHhcIjtcblx0ICAgICAgb2Zmc2V0ID0gbGluZU5vZGUub2Zmc2V0UGFyZW50ID09PSBlbGVtZW50ID8gMCA6IGVsZW1lbnQub2Zmc2V0TGVmdDtcblx0ICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChsaW5lTm9kZSk7XG5cdCAgICB9XG5cblx0ICAgIHN0eWxlID0gZWxlbWVudC5zdHlsZS5jc3NUZXh0O1xuXHQgICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gXCJkaXNwbGF5Om5vbmU7XCI7XG5cblx0ICAgIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xuXHQgICAgfVxuXG5cdCAgICBhZGRXb3JkU3BhY2VzID0gd29yZERlbGltaXRlciA9PT0gXCIgXCIgJiYgKCFhYnNvbHV0ZSB8fCAhd29yZHMgJiYgIWNoYXJzKTtcblxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGN1ckxpbmUgPSBsaW5lc1tpXTtcblx0ICAgICAgbGluZU5vZGUgPSBfZG9jLmNyZWF0ZUVsZW1lbnQodGFnKTtcblx0ICAgICAgbGluZU5vZGUuc3R5bGUuY3NzVGV4dCA9IFwiZGlzcGxheTpibG9jazt0ZXh0LWFsaWduOlwiICsgdGV4dEFsaWduICsgXCI7cG9zaXRpb246XCIgKyAoYWJzb2x1dGUgPyBcImFic29sdXRlO1wiIDogXCJyZWxhdGl2ZTtcIik7XG5cblx0ICAgICAgaWYgKGxpbmVzQ2xhc3MpIHtcblx0ICAgICAgICBsaW5lTm9kZS5jbGFzc05hbWUgPSBsaW5lc0NsYXNzICsgKGl0ZXJhdGVMaW5lID8gaSArIDEgOiBcIlwiKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGxpbmVBcnJheS5wdXNoKGxpbmVOb2RlKTtcblx0ICAgICAgbCA9IGN1ckxpbmUubGVuZ3RoO1xuXG5cdCAgICAgIGZvciAoaiA9IDA7IGogPCBsOyBqKyspIHtcblx0ICAgICAgICBpZiAoY3VyTGluZVtqXS5ub2RlTmFtZSAhPT0gXCJCUlwiKSB7XG5cdCAgICAgICAgICBub2RlID0gY3VyTGluZVtqXTtcblx0ICAgICAgICAgIGxpbmVOb2RlLmFwcGVuZENoaWxkKG5vZGUpO1xuXHQgICAgICAgICAgYWRkV29yZFNwYWNlcyAmJiBub2RlLl93b3JkRW5kICYmIGxpbmVOb2RlLmFwcGVuZENoaWxkKF9kb2MuY3JlYXRlVGV4dE5vZGUoXCIgXCIpKTtcblxuXHQgICAgICAgICAgaWYgKGFic29sdXRlKSB7XG5cdCAgICAgICAgICAgIGlmIChqID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgbGluZU5vZGUuc3R5bGUudG9wID0gbm9kZS5feSArIFwicHhcIjtcblx0ICAgICAgICAgICAgICBsaW5lTm9kZS5zdHlsZS5sZWZ0ID0gcGFkZGluZ0xlZnQgKyBvZmZzZXQgKyBcInB4XCI7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBub2RlLnN0eWxlLnRvcCA9IFwiMHB4XCI7XG5cblx0ICAgICAgICAgICAgaWYgKG9mZnNldCkge1xuXHQgICAgICAgICAgICAgIG5vZGUuc3R5bGUubGVmdCA9IG5vZGUuX3ggLSBvZmZzZXQgKyBcInB4XCI7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAobCA9PT0gMCkge1xuXHQgICAgICAgIGxpbmVOb2RlLmlubmVySFRNTCA9IFwiJm5ic3A7XCI7XG5cdCAgICAgIH0gZWxzZSBpZiAoIXdvcmRzICYmICFjaGFycykge1xuXHQgICAgICAgIF9kZVdvcmRpZnkobGluZU5vZGUpO1xuXG5cdCAgICAgICAgX3N3YXBUZXh0KGxpbmVOb2RlLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCksIFwiIFwiKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmIChhYnNvbHV0ZSkge1xuXHQgICAgICAgIGxpbmVOb2RlLnN0eWxlLndpZHRoID0gbGluZVdpZHRoO1xuXHQgICAgICAgIGxpbmVOb2RlLnN0eWxlLmhlaWdodCA9IG5vZGUuX2ggKyBcInB4XCI7XG5cdCAgICAgIH1cblxuXHQgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGxpbmVOb2RlKTtcblx0ICAgIH1cblxuXHQgICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gc3R5bGU7XG5cdCAgfVxuXG5cdCAgaWYgKGFic29sdXRlKSB7XG5cdCAgICBpZiAob3JpZ0hlaWdodCA+IGVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG5cdCAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gb3JpZ0hlaWdodCAtIHBhZFRvcEFuZEJvdHRvbSArIFwicHhcIjtcblxuXHQgICAgICBpZiAoZWxlbWVudC5jbGllbnRIZWlnaHQgPCBvcmlnSGVpZ2h0KSB7XG5cdCAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBvcmlnSGVpZ2h0ICsgYm9yZGVyVG9wQW5kQm90dG9tICsgXCJweFwiO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChvcmlnV2lkdGggPiBlbGVtZW50LmNsaWVudFdpZHRoKSB7XG5cdCAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBvcmlnV2lkdGggLSBwYWRMZWZ0QW5kUmlnaHQgKyBcInB4XCI7XG5cblx0ICAgICAgaWYgKGVsZW1lbnQuY2xpZW50V2lkdGggPCBvcmlnV2lkdGgpIHtcblx0ICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gb3JpZ1dpZHRoICsgYm9yZGVyTGVmdEFuZFJpZ2h0ICsgXCJweFwiO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgaXNGbGV4ICYmIChwcmV2SW5saW5lRGlzcGxheSA/IGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHByZXZJbmxpbmVEaXNwbGF5IDogZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImRpc3BsYXlcIikpO1xuXG5cdCAgX3B1c2hSZXZlcnNlZChhbGxDaGFycywgY2hhckFycmF5KTtcblxuXHQgIHdvcmRzICYmIF9wdXNoUmV2ZXJzZWQoYWxsV29yZHMsIHdvcmRBcnJheSk7XG5cblx0ICBfcHVzaFJldmVyc2VkKGFsbExpbmVzLCBsaW5lQXJyYXkpO1xuXHR9LFxuXHQgICAgX3NwbGl0UmF3VGV4dCA9IGZ1bmN0aW9uIF9zcGxpdFJhd1RleHQoZWxlbWVudCwgdmFycywgd29yZFN0YXJ0LCBjaGFyU3RhcnQpIHtcblx0ICB2YXIgdGFnID0gdmFycy50YWcgPyB2YXJzLnRhZyA6IHZhcnMuc3BhbiA/IFwic3BhblwiIDogXCJkaXZcIixcblx0ICAgICAgdHlwZXMgPSB2YXJzLnR5cGUgfHwgdmFycy5zcGxpdCB8fCBcImNoYXJzLHdvcmRzLGxpbmVzXCIsXG5cdCAgICAgIGNoYXJzID0gfnR5cGVzLmluZGV4T2YoXCJjaGFyc1wiKSxcblx0ICAgICAgYWJzb2x1dGUgPSBfaXNBYnNvbHV0ZSh2YXJzKSxcblx0ICAgICAgd29yZERlbGltaXRlciA9IHZhcnMud29yZERlbGltaXRlciB8fCBcIiBcIixcblx0ICAgICAgaXNXb3JkRGVsaW1pdGVyID0gZnVuY3Rpb24gaXNXb3JkRGVsaW1pdGVyKF9jaGFyKSB7XG5cdCAgICByZXR1cm4gX2NoYXIgPT09IHdvcmREZWxpbWl0ZXIgfHwgX2NoYXIgPT09IF9ub25CcmVha2luZ1NwYWNlICYmIHdvcmREZWxpbWl0ZXIgPT09IFwiIFwiO1xuXHQgIH0sXG5cdCAgICAgIHNwYWNlID0gd29yZERlbGltaXRlciAhPT0gXCIgXCIgPyBcIlwiIDogYWJzb2x1dGUgPyBcIiYjMTczOyBcIiA6IFwiIFwiLFxuXHQgICAgICB3b3JkRW5kID0gXCI8L1wiICsgdGFnICsgXCI+XCIsXG5cdCAgICAgIHdvcmRJc09wZW4gPSAxLFxuXHQgICAgICBzcGVjaWFsQ2hhcnMgPSB2YXJzLnNwZWNpYWxDaGFycyA/IHR5cGVvZiB2YXJzLnNwZWNpYWxDaGFycyA9PT0gXCJmdW5jdGlvblwiID8gdmFycy5zcGVjaWFsQ2hhcnMgOiBfZmluZFNwZWNpYWxDaGFycyA6IG51bGwsXG5cdCAgICAgIHRleHQsXG5cdCAgICAgIHNwbGl0VGV4dCxcblx0ICAgICAgaSxcblx0ICAgICAgaixcblx0ICAgICAgbCxcblx0ICAgICAgY2hhcmFjdGVyLFxuXHQgICAgICBoYXNUYWdTdGFydCxcblx0ICAgICAgdGVzdFJlc3VsdCxcblx0ICAgICAgY29udGFpbmVyID0gX2RvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuXHQgICAgICBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cblx0ICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgZWxlbWVudCk7XG5cdCAgY29udGFpbmVyLnRleHRDb250ZW50ID0gZWxlbWVudC5ub2RlVmFsdWU7XG5cdCAgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuXHQgIGVsZW1lbnQgPSBjb250YWluZXI7XG5cdCAgdGV4dCA9IGdldFRleHQoZWxlbWVudCk7XG5cdCAgaGFzVGFnU3RhcnQgPSB0ZXh0LmluZGV4T2YoXCI8XCIpICE9PSAtMTtcblxuXHQgIGlmICh2YXJzLnJlZHVjZVdoaXRlU3BhY2UgIT09IGZhbHNlKSB7XG5cdCAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKF9tdWx0aXBsZVNwYWNlc0V4cCwgXCIgXCIpLnJlcGxhY2UoX3N0cmlwRXhwLCBcIlwiKTtcblx0ICB9XG5cblx0ICBpZiAoaGFzVGFnU3RhcnQpIHtcblx0ICAgIHRleHQgPSB0ZXh0LnNwbGl0KFwiPFwiKS5qb2luKFwie3tMVH19XCIpO1xuXHQgIH1cblxuXHQgIGwgPSB0ZXh0Lmxlbmd0aDtcblx0ICBzcGxpdFRleHQgPSAodGV4dC5jaGFyQXQoMCkgPT09IFwiIFwiID8gc3BhY2UgOiBcIlwiKSArIHdvcmRTdGFydCgpO1xuXG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgY2hhcmFjdGVyID0gdGV4dC5jaGFyQXQoaSk7XG5cblx0ICAgIGlmIChzcGVjaWFsQ2hhcnMgJiYgKHRlc3RSZXN1bHQgPSBzcGVjaWFsQ2hhcnModGV4dC5zdWJzdHIoaSksIHZhcnMuc3BlY2lhbENoYXJzKSkpIHtcblx0ICAgICAgY2hhcmFjdGVyID0gdGV4dC5zdWJzdHIoaSwgdGVzdFJlc3VsdCB8fCAxKTtcblx0ICAgICAgc3BsaXRUZXh0ICs9IGNoYXJzICYmIGNoYXJhY3RlciAhPT0gXCIgXCIgPyBjaGFyU3RhcnQoKSArIGNoYXJhY3RlciArIFwiPC9cIiArIHRhZyArIFwiPlwiIDogY2hhcmFjdGVyO1xuXHQgICAgICBpICs9IHRlc3RSZXN1bHQgLSAxO1xuXHQgICAgfSBlbHNlIGlmIChpc1dvcmREZWxpbWl0ZXIoY2hhcmFjdGVyKSAmJiAhaXNXb3JkRGVsaW1pdGVyKHRleHQuY2hhckF0KGkgLSAxKSkgJiYgaSkge1xuXHQgICAgICBzcGxpdFRleHQgKz0gd29yZElzT3BlbiA/IHdvcmRFbmQgOiBcIlwiO1xuXHQgICAgICB3b3JkSXNPcGVuID0gMDtcblxuXHQgICAgICB3aGlsZSAoaXNXb3JkRGVsaW1pdGVyKHRleHQuY2hhckF0KGkgKyAxKSkpIHtcblx0ICAgICAgICBzcGxpdFRleHQgKz0gc3BhY2U7XG5cdCAgICAgICAgaSsrO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKGkgPT09IGwgLSAxKSB7XG5cdCAgICAgICAgc3BsaXRUZXh0ICs9IHNwYWNlO1xuXHQgICAgICB9IGVsc2UgaWYgKHRleHQuY2hhckF0KGkgKyAxKSAhPT0gXCIpXCIpIHtcblx0ICAgICAgICBzcGxpdFRleHQgKz0gc3BhY2UgKyB3b3JkU3RhcnQoKTtcblx0ICAgICAgICB3b3JkSXNPcGVuID0gMTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IFwie1wiICYmIHRleHQuc3Vic3RyKGksIDYpID09PSBcInt7TFR9fVwiKSB7XG5cdCAgICAgIHNwbGl0VGV4dCArPSBjaGFycyA/IGNoYXJTdGFydCgpICsgXCJ7e0xUfX1cIiArIFwiPC9cIiArIHRhZyArIFwiPlwiIDogXCJ7e0xUfX1cIjtcblx0ICAgICAgaSArPSA1O1xuXHQgICAgfSBlbHNlIGlmIChjaGFyYWN0ZXIuY2hhckNvZGVBdCgwKSA+PSAweEQ4MDAgJiYgY2hhcmFjdGVyLmNoYXJDb2RlQXQoMCkgPD0gMHhEQkZGIHx8IHRleHQuY2hhckNvZGVBdChpICsgMSkgPj0gMHhGRTAwICYmIHRleHQuY2hhckNvZGVBdChpICsgMSkgPD0gMHhGRTBGKSB7XG5cdCAgICAgIGogPSAoKHRleHQuc3Vic3RyKGksIDEyKS5zcGxpdChlbW9qaUV4cCkgfHwgW10pWzFdIHx8IFwiXCIpLmxlbmd0aCB8fCAyO1xuXHQgICAgICBzcGxpdFRleHQgKz0gY2hhcnMgJiYgY2hhcmFjdGVyICE9PSBcIiBcIiA/IGNoYXJTdGFydCgpICsgdGV4dC5zdWJzdHIoaSwgaikgKyBcIjwvXCIgKyB0YWcgKyBcIj5cIiA6IHRleHQuc3Vic3RyKGksIGopO1xuXHQgICAgICBpICs9IGogLSAxO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3BsaXRUZXh0ICs9IGNoYXJzICYmIGNoYXJhY3RlciAhPT0gXCIgXCIgPyBjaGFyU3RhcnQoKSArIGNoYXJhY3RlciArIFwiPC9cIiArIHRhZyArIFwiPlwiIDogY2hhcmFjdGVyO1xuXHQgICAgfVxuXHQgIH1cblxuXHQgIGVsZW1lbnQub3V0ZXJIVE1MID0gc3BsaXRUZXh0ICsgKHdvcmRJc09wZW4gPyB3b3JkRW5kIDogXCJcIik7XG5cdCAgaGFzVGFnU3RhcnQgJiYgX3N3YXBUZXh0KHBhcmVudCwgXCJ7e0xUfX1cIiwgXCI8XCIpO1xuXHR9LFxuXHQgICAgX3NwbGl0ID0gZnVuY3Rpb24gX3NwbGl0KGVsZW1lbnQsIHZhcnMsIHdvcmRTdGFydCwgY2hhclN0YXJ0KSB7XG5cdCAgdmFyIGNoaWxkcmVuID0gX3RvQXJyYXkoZWxlbWVudC5jaGlsZE5vZGVzKSxcblx0ICAgICAgbCA9IGNoaWxkcmVuLmxlbmd0aCxcblx0ICAgICAgYWJzb2x1dGUgPSBfaXNBYnNvbHV0ZSh2YXJzKSxcblx0ICAgICAgaSxcblx0ICAgICAgY2hpbGQ7XG5cblx0ICBpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gMyB8fCBsID4gMSkge1xuXHQgICAgdmFycy5hYnNvbHV0ZSA9IGZhbHNlO1xuXG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICAgIGNoaWxkLl9uZXh0ID0gY2hpbGQuX2lzRmlyc3QgPSBjaGlsZC5fcGFyZW50ID0gY2hpbGQuX3dvcmRFbmQgPSBudWxsO1xuXG5cdCAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPT0gMyB8fCAvXFxTKy8udGVzdChjaGlsZC5ub2RlVmFsdWUpKSB7XG5cdCAgICAgICAgaWYgKGFic29sdXRlICYmIGNoaWxkLm5vZGVUeXBlICE9PSAzICYmIF9nZXRDb21wdXRlZFN0eWxlKGNoaWxkKS5kaXNwbGF5ID09PSBcImlubGluZVwiKSB7XG5cdCAgICAgICAgICBjaGlsZC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0ICAgICAgICAgIGNoaWxkLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGNoaWxkLl9pc1NwbGl0ID0gdHJ1ZTtcblxuXHQgICAgICAgIF9zcGxpdChjaGlsZCwgdmFycywgd29yZFN0YXJ0LCBjaGFyU3RhcnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIHZhcnMuYWJzb2x1dGUgPSBhYnNvbHV0ZTtcblx0ICAgIGVsZW1lbnQuX2lzU3BsaXQgPSB0cnVlO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblxuXHQgIF9zcGxpdFJhd1RleHQoZWxlbWVudCwgdmFycywgd29yZFN0YXJ0LCBjaGFyU3RhcnQpO1xuXHR9O1xuXG5cdHZhciBTcGxpdFRleHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gU3BsaXRUZXh0KGVsZW1lbnQsIHZhcnMpIHtcblx0ICAgIF9jb3JlSW5pdHRlZCB8fCBfaW5pdENvcmUoKTtcblx0ICAgIHRoaXMuZWxlbWVudHMgPSBfdG9BcnJheShlbGVtZW50KTtcblx0ICAgIHRoaXMuY2hhcnMgPSBbXTtcblx0ICAgIHRoaXMud29yZHMgPSBbXTtcblx0ICAgIHRoaXMubGluZXMgPSBbXTtcblx0ICAgIHRoaXMuX29yaWdpbmFscyA9IFtdO1xuXHQgICAgdGhpcy52YXJzID0gdmFycyB8fCB7fTtcblxuXHQgICAgX2NvbnRleHQodGhpcyk7XG5cblx0ICAgICB0aGlzLnNwbGl0KHZhcnMpO1xuXHQgIH1cblxuXHQgIHZhciBfcHJvdG8gPSBTcGxpdFRleHQucHJvdG90eXBlO1xuXG5cdCAgX3Byb3RvLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQodmFycykge1xuXHQgICAgdGhpcy5pc1NwbGl0ICYmIHRoaXMucmV2ZXJ0KCk7XG5cdCAgICB0aGlzLnZhcnMgPSB2YXJzID0gdmFycyB8fCB0aGlzLnZhcnM7XG5cdCAgICB0aGlzLl9vcmlnaW5hbHMubGVuZ3RoID0gdGhpcy5jaGFycy5sZW5ndGggPSB0aGlzLndvcmRzLmxlbmd0aCA9IHRoaXMubGluZXMubGVuZ3RoID0gMDtcblxuXHQgICAgdmFyIGkgPSB0aGlzLmVsZW1lbnRzLmxlbmd0aCxcblx0ICAgICAgICB0YWcgPSB2YXJzLnRhZyA/IHZhcnMudGFnIDogdmFycy5zcGFuID8gXCJzcGFuXCIgOiBcImRpdlwiLFxuXHQgICAgICAgIHdvcmRTdGFydCA9IF9jc3NDbGFzc0Z1bmModmFycy53b3Jkc0NsYXNzLCB0YWcpLFxuXHQgICAgICAgIGNoYXJTdGFydCA9IF9jc3NDbGFzc0Z1bmModmFycy5jaGFyc0NsYXNzLCB0YWcpLFxuXHQgICAgICAgIG9yaWdIZWlnaHQsXG5cdCAgICAgICAgb3JpZ1dpZHRoLFxuXHQgICAgICAgIGU7XG5cblx0ICAgIHdoaWxlICgtLWkgPiAtMSkge1xuXHQgICAgICBlID0gdGhpcy5lbGVtZW50c1tpXTtcblx0ICAgICAgdGhpcy5fb3JpZ2luYWxzW2ldID0ge1xuXHQgICAgICAgIGh0bWw6IGUuaW5uZXJIVE1MLFxuXHQgICAgICAgIHN0eWxlOiBlLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpXG5cdCAgICAgIH07XG5cdCAgICAgIG9yaWdIZWlnaHQgPSBlLmNsaWVudEhlaWdodDtcblx0ICAgICAgb3JpZ1dpZHRoID0gZS5jbGllbnRXaWR0aDtcblxuXHQgICAgICBfc3BsaXQoZSwgdmFycywgd29yZFN0YXJ0LCBjaGFyU3RhcnQpO1xuXG5cdCAgICAgIF9zZXRQb3NpdGlvbnNBZnRlclNwbGl0KGUsIHZhcnMsIHRoaXMuY2hhcnMsIHRoaXMud29yZHMsIHRoaXMubGluZXMsIG9yaWdXaWR0aCwgb3JpZ0hlaWdodCk7XG5cdCAgICB9XG5cblx0ICAgIHRoaXMuY2hhcnMucmV2ZXJzZSgpO1xuXHQgICAgdGhpcy53b3Jkcy5yZXZlcnNlKCk7XG5cdCAgICB0aGlzLmxpbmVzLnJldmVyc2UoKTtcblx0ICAgIHRoaXMuaXNTcGxpdCA9IHRydWU7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXG5cdCAgX3Byb3RvLnJldmVydCA9IGZ1bmN0aW9uIHJldmVydCgpIHtcblx0ICAgIHZhciBvcmlnaW5hbHMgPSB0aGlzLl9vcmlnaW5hbHM7XG5cblx0ICAgIGlmICghb3JpZ2luYWxzKSB7XG5cdCAgICAgIHRocm93IFwicmV2ZXJ0KCkgY2FsbCB3YXNuJ3Qgc2NvcGVkIHByb3Blcmx5LlwiO1xuXHQgICAgfVxuXG5cdCAgICB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGUsIGkpIHtcblx0ICAgICAgZS5pbm5lckhUTUwgPSBvcmlnaW5hbHNbaV0uaHRtbDtcblx0ICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBvcmlnaW5hbHNbaV0uc3R5bGUpO1xuXHQgICAgfSk7XG5cdCAgICB0aGlzLmNoYXJzID0gW107XG5cdCAgICB0aGlzLndvcmRzID0gW107XG5cdCAgICB0aGlzLmxpbmVzID0gW107XG5cdCAgICB0aGlzLmlzU3BsaXQgPSBmYWxzZTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cblx0ICBTcGxpdFRleHQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGVsZW1lbnQsIHZhcnMpIHtcblx0ICAgIHJldHVybiBuZXcgU3BsaXRUZXh0KGVsZW1lbnQsIHZhcnMpO1xuXHQgIH07XG5cblx0ICByZXR1cm4gU3BsaXRUZXh0O1xuXHR9KCk7XG5cdFNwbGl0VGV4dC52ZXJzaW9uID0gXCIzLjEyLjVcIjtcblx0U3BsaXRUZXh0LnJlZ2lzdGVyID0gX2luaXRDb3JlO1xuXG5cdGV4cG9ydHMuU3BsaXRUZXh0ID0gU3BsaXRUZXh0O1xuXHRleHBvcnRzLmRlZmF1bHQgPSBTcGxpdFRleHQ7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC53aW5kb3cgPSBnbG9iYWwud2luZG93IHx8IHt9KSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cbiAgZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTtcbiAgICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgICBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuICB9XG5cbiAgZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gICAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9XG5cbiAgLyohXG4gICAqIEdTQVAgMy4xMi41XG4gICAqIGh0dHBzOi8vZ3NhcC5jb21cbiAgICpcbiAgICogQGxpY2Vuc2UgQ29weXJpZ2h0IDIwMDgtMjAyNCwgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICAgKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dzYXAuY29tL3N0YW5kYXJkLWxpY2Vuc2Ugb3IgZm9yXG4gICAqIENsdWIgR1NBUCBtZW1iZXJzLCB0aGUgYWdyZWVtZW50IGlzc3VlZCB3aXRoIHRoYXQgbWVtYmVyc2hpcC5cbiAgICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG4gICovXG4gIHZhciBfY29uZmlnID0ge1xuICAgIGF1dG9TbGVlcDogMTIwLFxuICAgIGZvcmNlM0Q6IFwiYXV0b1wiLFxuICAgIG51bGxUYXJnZXRXYXJuOiAxLFxuICAgIHVuaXRzOiB7XG4gICAgICBsaW5lSGVpZ2h0OiBcIlwiXG4gICAgfVxuICB9LFxuICAgICAgX2RlZmF1bHRzID0ge1xuICAgIGR1cmF0aW9uOiAuNSxcbiAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgIGRlbGF5OiAwXG4gIH0sXG4gICAgICBfc3VwcHJlc3NPdmVyd3JpdGVzLFxuICAgICAgX3JldmVydGluZyxcbiAgICAgIF9jb250ZXh0LFxuICAgICAgX2JpZ051bSA9IDFlOCxcbiAgICAgIF90aW55TnVtID0gMSAvIF9iaWdOdW0sXG4gICAgICBfMlBJID0gTWF0aC5QSSAqIDIsXG4gICAgICBfSEFMRl9QSSA9IF8yUEkgLyA0LFxuICAgICAgX2dzSUQgPSAwLFxuICAgICAgX3NxcnQgPSBNYXRoLnNxcnQsXG4gICAgICBfY29zID0gTWF0aC5jb3MsXG4gICAgICBfc2luID0gTWF0aC5zaW4sXG4gICAgICBfaXNTdHJpbmcgPSBmdW5jdGlvbiBfaXNTdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xuICB9LFxuICAgICAgX2lzRnVuY3Rpb24gPSBmdW5jdGlvbiBfaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIjtcbiAgfSxcbiAgICAgIF9pc051bWJlciA9IGZ1bmN0aW9uIF9pc051bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCI7XG4gIH0sXG4gICAgICBfaXNVbmRlZmluZWQgPSBmdW5jdGlvbiBfaXNVbmRlZmluZWQodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiO1xuICB9LFxuICAgICAgX2lzT2JqZWN0ID0gZnVuY3Rpb24gX2lzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIjtcbiAgfSxcbiAgICAgIF9pc05vdEZhbHNlID0gZnVuY3Rpb24gX2lzTm90RmFsc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IGZhbHNlO1xuICB9LFxuICAgICAgX3dpbmRvd0V4aXN0cyA9IGZ1bmN0aW9uIF93aW5kb3dFeGlzdHMoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG4gIH0sXG4gICAgICBfaXNGdW5jT3JTdHJpbmcgPSBmdW5jdGlvbiBfaXNGdW5jT3JTdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gX2lzRnVuY3Rpb24odmFsdWUpIHx8IF9pc1N0cmluZyh2YWx1ZSk7XG4gIH0sXG4gICAgICBfaXNUeXBlZEFycmF5ID0gdHlwZW9mIEFycmF5QnVmZmVyID09PSBcImZ1bmN0aW9uXCIgJiYgQXJyYXlCdWZmZXIuaXNWaWV3IHx8IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5LFxuICAgICAgX3N0cmljdE51bUV4cCA9IC8oPzotP1xcLj9cXGR8XFwuKSsvZ2ksXG4gICAgICBfbnVtRXhwID0gL1stKz0uXSpcXGQrWy5lXFwtK10qXFxkKltlXFwtK10qXFxkKi9nLFxuICAgICAgX251bVdpdGhVbml0RXhwID0gL1stKz0uXSpcXGQrWy5lLV0qXFxkKlthLXolXSovZyxcbiAgICAgIF9jb21wbGV4U3RyaW5nTnVtRXhwID0gL1stKz0uXSpcXGQrXFwuP1xcZCooPzplLXxlXFwrKT9cXGQqL2dpLFxuICAgICAgX3JlbEV4cCA9IC9bKy1dPS0/Wy5cXGRdKy8sXG4gICAgICBfZGVsaW1pdGVkVmFsdWVFeHAgPSAvW14sJ1wiXFxbXFxdXFxzXSsvZ2ksXG4gICAgICBfdW5pdEV4cCA9IC9eWytcXC09ZVxcc1xcZF0qXFxkK1suXFxkXSooW2Etel0qfCUpXFxzKiQvaSxcbiAgICAgIF9nbG9iYWxUaW1lbGluZSxcbiAgICAgIF93aW4sXG4gICAgICBfY29yZUluaXR0ZWQsXG4gICAgICBfZG9jLFxuICAgICAgX2dsb2JhbHMgPSB7fSxcbiAgICAgIF9pbnN0YWxsU2NvcGUgPSB7fSxcbiAgICAgIF9jb3JlUmVhZHksXG4gICAgICBfaW5zdGFsbCA9IGZ1bmN0aW9uIF9pbnN0YWxsKHNjb3BlKSB7XG4gICAgcmV0dXJuIChfaW5zdGFsbFNjb3BlID0gX21lcmdlKHNjb3BlLCBfZ2xvYmFscykpICYmIGdzYXA7XG4gIH0sXG4gICAgICBfbWlzc2luZ1BsdWdpbiA9IGZ1bmN0aW9uIF9taXNzaW5nUGx1Z2luKHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIHJldHVybiBjb25zb2xlLndhcm4oXCJJbnZhbGlkIHByb3BlcnR5XCIsIHByb3BlcnR5LCBcInNldCB0b1wiLCB2YWx1ZSwgXCJNaXNzaW5nIHBsdWdpbj8gZ3NhcC5yZWdpc3RlclBsdWdpbigpXCIpO1xuICB9LFxuICAgICAgX3dhcm4gPSBmdW5jdGlvbiBfd2FybihtZXNzYWdlLCBzdXBwcmVzcykge1xuICAgIHJldHVybiAhc3VwcHJlc3MgJiYgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9LFxuICAgICAgX2FkZEdsb2JhbCA9IGZ1bmN0aW9uIF9hZGRHbG9iYWwobmFtZSwgb2JqKSB7XG4gICAgcmV0dXJuIG5hbWUgJiYgKF9nbG9iYWxzW25hbWVdID0gb2JqKSAmJiBfaW5zdGFsbFNjb3BlICYmIChfaW5zdGFsbFNjb3BlW25hbWVdID0gb2JqKSB8fCBfZ2xvYmFscztcbiAgfSxcbiAgICAgIF9lbXB0eUZ1bmMgPSBmdW5jdGlvbiBfZW1wdHlGdW5jKCkge1xuICAgIHJldHVybiAwO1xuICB9LFxuICAgICAgX3N0YXJ0QXRSZXZlcnRDb25maWcgPSB7XG4gICAgc3VwcHJlc3NFdmVudHM6IHRydWUsXG4gICAgaXNTdGFydDogdHJ1ZSxcbiAgICBraWxsOiBmYWxzZVxuICB9LFxuICAgICAgX3JldmVydENvbmZpZ05vS2lsbCA9IHtcbiAgICBzdXBwcmVzc0V2ZW50czogdHJ1ZSxcbiAgICBraWxsOiBmYWxzZVxuICB9LFxuICAgICAgX3JldmVydENvbmZpZyA9IHtcbiAgICBzdXBwcmVzc0V2ZW50czogdHJ1ZVxuICB9LFxuICAgICAgX3Jlc2VydmVkUHJvcHMgPSB7fSxcbiAgICAgIF9sYXp5VHdlZW5zID0gW10sXG4gICAgICBfbGF6eUxvb2t1cCA9IHt9LFxuICAgICAgX2xhc3RSZW5kZXJlZEZyYW1lLFxuICAgICAgX3BsdWdpbnMgPSB7fSxcbiAgICAgIF9lZmZlY3RzID0ge30sXG4gICAgICBfbmV4dEdDRnJhbWUgPSAzMCxcbiAgICAgIF9oYXJuZXNzUGx1Z2lucyA9IFtdLFxuICAgICAgX2NhbGxiYWNrTmFtZXMgPSBcIlwiLFxuICAgICAgX2hhcm5lc3MgPSBmdW5jdGlvbiBfaGFybmVzcyh0YXJnZXRzKSB7XG4gICAgdmFyIHRhcmdldCA9IHRhcmdldHNbMF0sXG4gICAgICAgIGhhcm5lc3NQbHVnaW4sXG4gICAgICAgIGk7XG4gICAgX2lzT2JqZWN0KHRhcmdldCkgfHwgX2lzRnVuY3Rpb24odGFyZ2V0KSB8fCAodGFyZ2V0cyA9IFt0YXJnZXRzXSk7XG5cbiAgICBpZiAoIShoYXJuZXNzUGx1Z2luID0gKHRhcmdldC5fZ3NhcCB8fCB7fSkuaGFybmVzcykpIHtcbiAgICAgIGkgPSBfaGFybmVzc1BsdWdpbnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tICYmICFfaGFybmVzc1BsdWdpbnNbaV0udGFyZ2V0VGVzdCh0YXJnZXQpKSB7fVxuXG4gICAgICBoYXJuZXNzUGx1Z2luID0gX2hhcm5lc3NQbHVnaW5zW2ldO1xuICAgIH1cblxuICAgIGkgPSB0YXJnZXRzLmxlbmd0aDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRhcmdldHNbaV0gJiYgKHRhcmdldHNbaV0uX2dzYXAgfHwgKHRhcmdldHNbaV0uX2dzYXAgPSBuZXcgR1NDYWNoZSh0YXJnZXRzW2ldLCBoYXJuZXNzUGx1Z2luKSkpIHx8IHRhcmdldHMuc3BsaWNlKGksIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXRzO1xuICB9LFxuICAgICAgX2dldENhY2hlID0gZnVuY3Rpb24gX2dldENhY2hlKHRhcmdldCkge1xuICAgIHJldHVybiB0YXJnZXQuX2dzYXAgfHwgX2hhcm5lc3ModG9BcnJheSh0YXJnZXQpKVswXS5fZ3NhcDtcbiAgfSxcbiAgICAgIF9nZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIF9nZXRQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCB2KSB7XG4gICAgcmV0dXJuICh2ID0gdGFyZ2V0W3Byb3BlcnR5XSkgJiYgX2lzRnVuY3Rpb24odikgPyB0YXJnZXRbcHJvcGVydHldKCkgOiBfaXNVbmRlZmluZWQodikgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKHByb3BlcnR5KSB8fCB2O1xuICB9LFxuICAgICAgX2ZvckVhY2hOYW1lID0gZnVuY3Rpb24gX2ZvckVhY2hOYW1lKG5hbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIChuYW1lcyA9IG5hbWVzLnNwbGl0KFwiLFwiKSkuZm9yRWFjaChmdW5jKSB8fCBuYW1lcztcbiAgfSxcbiAgICAgIF9yb3VuZCA9IGZ1bmN0aW9uIF9yb3VuZCh2YWx1ZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogMTAwMDAwKSAvIDEwMDAwMCB8fCAwO1xuICB9LFxuICAgICAgX3JvdW5kUHJlY2lzZSA9IGZ1bmN0aW9uIF9yb3VuZFByZWNpc2UodmFsdWUpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIDEwMDAwMDAwKSAvIDEwMDAwMDAwIHx8IDA7XG4gIH0sXG4gICAgICBfcGFyc2VSZWxhdGl2ZSA9IGZ1bmN0aW9uIF9wYXJzZVJlbGF0aXZlKHN0YXJ0LCB2YWx1ZSkge1xuICAgIHZhciBvcGVyYXRvciA9IHZhbHVlLmNoYXJBdCgwKSxcbiAgICAgICAgZW5kID0gcGFyc2VGbG9hdCh2YWx1ZS5zdWJzdHIoMikpO1xuICAgIHN0YXJ0ID0gcGFyc2VGbG9hdChzdGFydCk7XG4gICAgcmV0dXJuIG9wZXJhdG9yID09PSBcIitcIiA/IHN0YXJ0ICsgZW5kIDogb3BlcmF0b3IgPT09IFwiLVwiID8gc3RhcnQgLSBlbmQgOiBvcGVyYXRvciA9PT0gXCIqXCIgPyBzdGFydCAqIGVuZCA6IHN0YXJ0IC8gZW5kO1xuICB9LFxuICAgICAgX2FycmF5Q29udGFpbnNBbnkgPSBmdW5jdGlvbiBfYXJyYXlDb250YWluc0FueSh0b1NlYXJjaCwgdG9GaW5kKSB7XG4gICAgdmFyIGwgPSB0b0ZpbmQubGVuZ3RoLFxuICAgICAgICBpID0gMDtcblxuICAgIGZvciAoOyB0b1NlYXJjaC5pbmRleE9mKHRvRmluZFtpXSkgPCAwICYmICsraSA8IGw7KSB7fVxuXG4gICAgcmV0dXJuIGkgPCBsO1xuICB9LFxuICAgICAgX2xhenlSZW5kZXIgPSBmdW5jdGlvbiBfbGF6eVJlbmRlcigpIHtcbiAgICB2YXIgbCA9IF9sYXp5VHdlZW5zLmxlbmd0aCxcbiAgICAgICAgYSA9IF9sYXp5VHdlZW5zLnNsaWNlKDApLFxuICAgICAgICBpLFxuICAgICAgICB0d2VlbjtcblxuICAgIF9sYXp5TG9va3VwID0ge307XG4gICAgX2xhenlUd2VlbnMubGVuZ3RoID0gMDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHR3ZWVuID0gYVtpXTtcbiAgICAgIHR3ZWVuICYmIHR3ZWVuLl9sYXp5ICYmICh0d2Vlbi5yZW5kZXIodHdlZW4uX2xhenlbMF0sIHR3ZWVuLl9sYXp5WzFdLCB0cnVlKS5fbGF6eSA9IDApO1xuICAgIH1cbiAgfSxcbiAgICAgIF9sYXp5U2FmZVJlbmRlciA9IGZ1bmN0aW9uIF9sYXp5U2FmZVJlbmRlcihhbmltYXRpb24sIHRpbWUsIHN1cHByZXNzRXZlbnRzLCBmb3JjZSkge1xuICAgIF9sYXp5VHdlZW5zLmxlbmd0aCAmJiAhX3JldmVydGluZyAmJiBfbGF6eVJlbmRlcigpO1xuICAgIGFuaW1hdGlvbi5yZW5kZXIodGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlIHx8IF9yZXZlcnRpbmcgJiYgdGltZSA8IDAgJiYgKGFuaW1hdGlvbi5faW5pdHRlZCB8fCBhbmltYXRpb24uX3N0YXJ0QXQpKTtcbiAgICBfbGF6eVR3ZWVucy5sZW5ndGggJiYgIV9yZXZlcnRpbmcgJiYgX2xhenlSZW5kZXIoKTtcbiAgfSxcbiAgICAgIF9udW1lcmljSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIF9udW1lcmljSWZQb3NzaWJsZSh2YWx1ZSkge1xuICAgIHZhciBuID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgcmV0dXJuIChuIHx8IG4gPT09IDApICYmICh2YWx1ZSArIFwiXCIpLm1hdGNoKF9kZWxpbWl0ZWRWYWx1ZUV4cCkubGVuZ3RoIDwgMiA/IG4gOiBfaXNTdHJpbmcodmFsdWUpID8gdmFsdWUudHJpbSgpIDogdmFsdWU7XG4gIH0sXG4gICAgICBfcGFzc1Rocm91Z2ggPSBmdW5jdGlvbiBfcGFzc1Rocm91Z2gocCkge1xuICAgIHJldHVybiBwO1xuICB9LFxuICAgICAgX3NldERlZmF1bHRzID0gZnVuY3Rpb24gX3NldERlZmF1bHRzKG9iaiwgZGVmYXVsdHMpIHtcbiAgICBmb3IgKHZhciBwIGluIGRlZmF1bHRzKSB7XG4gICAgICBwIGluIG9iaiB8fCAob2JqW3BdID0gZGVmYXVsdHNbcF0pO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH0sXG4gICAgICBfc2V0S2V5ZnJhbWVEZWZhdWx0cyA9IGZ1bmN0aW9uIF9zZXRLZXlmcmFtZURlZmF1bHRzKGV4Y2x1ZGVEdXJhdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAob2JqLCBkZWZhdWx0cykge1xuICAgICAgZm9yICh2YXIgcCBpbiBkZWZhdWx0cykge1xuICAgICAgICBwIGluIG9iaiB8fCBwID09PSBcImR1cmF0aW9uXCIgJiYgZXhjbHVkZUR1cmF0aW9uIHx8IHAgPT09IFwiZWFzZVwiIHx8IChvYmpbcF0gPSBkZWZhdWx0c1twXSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgICAgIF9tZXJnZSA9IGZ1bmN0aW9uIF9tZXJnZShiYXNlLCB0b01lcmdlKSB7XG4gICAgZm9yICh2YXIgcCBpbiB0b01lcmdlKSB7XG4gICAgICBiYXNlW3BdID0gdG9NZXJnZVtwXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZTtcbiAgfSxcbiAgICAgIF9tZXJnZURlZXAgPSBmdW5jdGlvbiBfbWVyZ2VEZWVwKGJhc2UsIHRvTWVyZ2UpIHtcbiAgICBmb3IgKHZhciBwIGluIHRvTWVyZ2UpIHtcbiAgICAgIHAgIT09IFwiX19wcm90b19fXCIgJiYgcCAhPT0gXCJjb25zdHJ1Y3RvclwiICYmIHAgIT09IFwicHJvdG90eXBlXCIgJiYgKGJhc2VbcF0gPSBfaXNPYmplY3QodG9NZXJnZVtwXSkgPyBfbWVyZ2VEZWVwKGJhc2VbcF0gfHwgKGJhc2VbcF0gPSB7fSksIHRvTWVyZ2VbcF0pIDogdG9NZXJnZVtwXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2U7XG4gIH0sXG4gICAgICBfY29weUV4Y2x1ZGluZyA9IGZ1bmN0aW9uIF9jb3B5RXhjbHVkaW5nKG9iaiwgZXhjbHVkaW5nKSB7XG4gICAgdmFyIGNvcHkgPSB7fSxcbiAgICAgICAgcDtcblxuICAgIGZvciAocCBpbiBvYmopIHtcbiAgICAgIHAgaW4gZXhjbHVkaW5nIHx8IChjb3B5W3BdID0gb2JqW3BdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29weTtcbiAgfSxcbiAgICAgIF9pbmhlcml0RGVmYXVsdHMgPSBmdW5jdGlvbiBfaW5oZXJpdERlZmF1bHRzKHZhcnMpIHtcbiAgICB2YXIgcGFyZW50ID0gdmFycy5wYXJlbnQgfHwgX2dsb2JhbFRpbWVsaW5lLFxuICAgICAgICBmdW5jID0gdmFycy5rZXlmcmFtZXMgPyBfc2V0S2V5ZnJhbWVEZWZhdWx0cyhfaXNBcnJheSh2YXJzLmtleWZyYW1lcykpIDogX3NldERlZmF1bHRzO1xuXG4gICAgaWYgKF9pc05vdEZhbHNlKHZhcnMuaW5oZXJpdCkpIHtcbiAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgZnVuYyh2YXJzLCBwYXJlbnQudmFycy5kZWZhdWx0cyk7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQgfHwgcGFyZW50Ll9kcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFycztcbiAgfSxcbiAgICAgIF9hcnJheXNNYXRjaCA9IGZ1bmN0aW9uIF9hcnJheXNNYXRjaChhMSwgYTIpIHtcbiAgICB2YXIgaSA9IGExLmxlbmd0aCxcbiAgICAgICAgbWF0Y2ggPSBpID09PSBhMi5sZW5ndGg7XG5cbiAgICB3aGlsZSAobWF0Y2ggJiYgaS0tICYmIGExW2ldID09PSBhMltpXSkge31cblxuICAgIHJldHVybiBpIDwgMDtcbiAgfSxcbiAgICAgIF9hZGRMaW5rZWRMaXN0SXRlbSA9IGZ1bmN0aW9uIF9hZGRMaW5rZWRMaXN0SXRlbShwYXJlbnQsIGNoaWxkLCBmaXJzdFByb3AsIGxhc3RQcm9wLCBzb3J0QnkpIHtcbiAgICBpZiAoZmlyc3RQcm9wID09PSB2b2lkIDApIHtcbiAgICAgIGZpcnN0UHJvcCA9IFwiX2ZpcnN0XCI7XG4gICAgfVxuXG4gICAgaWYgKGxhc3RQcm9wID09PSB2b2lkIDApIHtcbiAgICAgIGxhc3RQcm9wID0gXCJfbGFzdFwiO1xuICAgIH1cblxuICAgIHZhciBwcmV2ID0gcGFyZW50W2xhc3RQcm9wXSxcbiAgICAgICAgdDtcblxuICAgIGlmIChzb3J0QnkpIHtcbiAgICAgIHQgPSBjaGlsZFtzb3J0QnldO1xuXG4gICAgICB3aGlsZSAocHJldiAmJiBwcmV2W3NvcnRCeV0gPiB0KSB7XG4gICAgICAgIHByZXYgPSBwcmV2Ll9wcmV2O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcmV2KSB7XG4gICAgICBjaGlsZC5fbmV4dCA9IHByZXYuX25leHQ7XG4gICAgICBwcmV2Ll9uZXh0ID0gY2hpbGQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkLl9uZXh0ID0gcGFyZW50W2ZpcnN0UHJvcF07XG4gICAgICBwYXJlbnRbZmlyc3RQcm9wXSA9IGNoaWxkO1xuICAgIH1cblxuICAgIGlmIChjaGlsZC5fbmV4dCkge1xuICAgICAgY2hpbGQuX25leHQuX3ByZXYgPSBjaGlsZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyZW50W2xhc3RQcm9wXSA9IGNoaWxkO1xuICAgIH1cblxuICAgIGNoaWxkLl9wcmV2ID0gcHJldjtcbiAgICBjaGlsZC5wYXJlbnQgPSBjaGlsZC5fZHAgPSBwYXJlbnQ7XG4gICAgcmV0dXJuIGNoaWxkO1xuICB9LFxuICAgICAgX3JlbW92ZUxpbmtlZExpc3RJdGVtID0gZnVuY3Rpb24gX3JlbW92ZUxpbmtlZExpc3RJdGVtKHBhcmVudCwgY2hpbGQsIGZpcnN0UHJvcCwgbGFzdFByb3ApIHtcbiAgICBpZiAoZmlyc3RQcm9wID09PSB2b2lkIDApIHtcbiAgICAgIGZpcnN0UHJvcCA9IFwiX2ZpcnN0XCI7XG4gICAgfVxuXG4gICAgaWYgKGxhc3RQcm9wID09PSB2b2lkIDApIHtcbiAgICAgIGxhc3RQcm9wID0gXCJfbGFzdFwiO1xuICAgIH1cblxuICAgIHZhciBwcmV2ID0gY2hpbGQuX3ByZXYsXG4gICAgICAgIG5leHQgPSBjaGlsZC5fbmV4dDtcblxuICAgIGlmIChwcmV2KSB7XG4gICAgICBwcmV2Ll9uZXh0ID0gbmV4dDtcbiAgICB9IGVsc2UgaWYgKHBhcmVudFtmaXJzdFByb3BdID09PSBjaGlsZCkge1xuICAgICAgcGFyZW50W2ZpcnN0UHJvcF0gPSBuZXh0O1xuICAgIH1cblxuICAgIGlmIChuZXh0KSB7XG4gICAgICBuZXh0Ll9wcmV2ID0gcHJldjtcbiAgICB9IGVsc2UgaWYgKHBhcmVudFtsYXN0UHJvcF0gPT09IGNoaWxkKSB7XG4gICAgICBwYXJlbnRbbGFzdFByb3BdID0gcHJldjtcbiAgICB9XG5cbiAgICBjaGlsZC5fbmV4dCA9IGNoaWxkLl9wcmV2ID0gY2hpbGQucGFyZW50ID0gbnVsbDtcbiAgfSxcbiAgICAgIF9yZW1vdmVGcm9tUGFyZW50ID0gZnVuY3Rpb24gX3JlbW92ZUZyb21QYXJlbnQoY2hpbGQsIG9ubHlJZlBhcmVudEhhc0F1dG9SZW1vdmUpIHtcbiAgICBjaGlsZC5wYXJlbnQgJiYgKCFvbmx5SWZQYXJlbnRIYXNBdXRvUmVtb3ZlIHx8IGNoaWxkLnBhcmVudC5hdXRvUmVtb3ZlQ2hpbGRyZW4pICYmIGNoaWxkLnBhcmVudC5yZW1vdmUgJiYgY2hpbGQucGFyZW50LnJlbW92ZShjaGlsZCk7XG4gICAgY2hpbGQuX2FjdCA9IDA7XG4gIH0sXG4gICAgICBfdW5jYWNoZSA9IGZ1bmN0aW9uIF91bmNhY2hlKGFuaW1hdGlvbiwgY2hpbGQpIHtcbiAgICBpZiAoYW5pbWF0aW9uICYmICghY2hpbGQgfHwgY2hpbGQuX2VuZCA+IGFuaW1hdGlvbi5fZHVyIHx8IGNoaWxkLl9zdGFydCA8IDApKSB7XG4gICAgICB2YXIgYSA9IGFuaW1hdGlvbjtcblxuICAgICAgd2hpbGUgKGEpIHtcbiAgICAgICAgYS5fZGlydHkgPSAxO1xuICAgICAgICBhID0gYS5wYXJlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgfSxcbiAgICAgIF9yZWNhY2hlQW5jZXN0b3JzID0gZnVuY3Rpb24gX3JlY2FjaGVBbmNlc3RvcnMoYW5pbWF0aW9uKSB7XG4gICAgdmFyIHBhcmVudCA9IGFuaW1hdGlvbi5wYXJlbnQ7XG5cbiAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5wYXJlbnQpIHtcbiAgICAgIHBhcmVudC5fZGlydHkgPSAxO1xuICAgICAgcGFyZW50LnRvdGFsRHVyYXRpb24oKTtcbiAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgfSxcbiAgICAgIF9yZXdpbmRTdGFydEF0ID0gZnVuY3Rpb24gX3Jld2luZFN0YXJ0QXQodHdlZW4sIHRvdGFsVGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKSB7XG4gICAgcmV0dXJuIHR3ZWVuLl9zdGFydEF0ICYmIChfcmV2ZXJ0aW5nID8gdHdlZW4uX3N0YXJ0QXQucmV2ZXJ0KF9yZXZlcnRDb25maWdOb0tpbGwpIDogdHdlZW4udmFycy5pbW1lZGlhdGVSZW5kZXIgJiYgIXR3ZWVuLnZhcnMuYXV0b1JldmVydCB8fCB0d2Vlbi5fc3RhcnRBdC5yZW5kZXIodG90YWxUaW1lLCB0cnVlLCBmb3JjZSkpO1xuICB9LFxuICAgICAgX2hhc05vUGF1c2VkQW5jZXN0b3JzID0gZnVuY3Rpb24gX2hhc05vUGF1c2VkQW5jZXN0b3JzKGFuaW1hdGlvbikge1xuICAgIHJldHVybiAhYW5pbWF0aW9uIHx8IGFuaW1hdGlvbi5fdHMgJiYgX2hhc05vUGF1c2VkQW5jZXN0b3JzKGFuaW1hdGlvbi5wYXJlbnQpO1xuICB9LFxuICAgICAgX2VsYXBzZWRDeWNsZUR1cmF0aW9uID0gZnVuY3Rpb24gX2VsYXBzZWRDeWNsZUR1cmF0aW9uKGFuaW1hdGlvbikge1xuICAgIHJldHVybiBhbmltYXRpb24uX3JlcGVhdCA/IF9hbmltYXRpb25DeWNsZShhbmltYXRpb24uX3RUaW1lLCBhbmltYXRpb24gPSBhbmltYXRpb24uZHVyYXRpb24oKSArIGFuaW1hdGlvbi5fckRlbGF5KSAqIGFuaW1hdGlvbiA6IDA7XG4gIH0sXG4gICAgICBfYW5pbWF0aW9uQ3ljbGUgPSBmdW5jdGlvbiBfYW5pbWF0aW9uQ3ljbGUodFRpbWUsIGN5Y2xlRHVyYXRpb24pIHtcbiAgICB2YXIgd2hvbGUgPSBNYXRoLmZsb29yKHRUaW1lIC89IGN5Y2xlRHVyYXRpb24pO1xuICAgIHJldHVybiB0VGltZSAmJiB3aG9sZSA9PT0gdFRpbWUgPyB3aG9sZSAtIDEgOiB3aG9sZTtcbiAgfSxcbiAgICAgIF9wYXJlbnRUb0NoaWxkVG90YWxUaW1lID0gZnVuY3Rpb24gX3BhcmVudFRvQ2hpbGRUb3RhbFRpbWUocGFyZW50VGltZSwgY2hpbGQpIHtcbiAgICByZXR1cm4gKHBhcmVudFRpbWUgLSBjaGlsZC5fc3RhcnQpICogY2hpbGQuX3RzICsgKGNoaWxkLl90cyA+PSAwID8gMCA6IGNoaWxkLl9kaXJ0eSA/IGNoaWxkLnRvdGFsRHVyYXRpb24oKSA6IGNoaWxkLl90RHVyKTtcbiAgfSxcbiAgICAgIF9zZXRFbmQgPSBmdW5jdGlvbiBfc2V0RW5kKGFuaW1hdGlvbikge1xuICAgIHJldHVybiBhbmltYXRpb24uX2VuZCA9IF9yb3VuZFByZWNpc2UoYW5pbWF0aW9uLl9zdGFydCArIChhbmltYXRpb24uX3REdXIgLyBNYXRoLmFicyhhbmltYXRpb24uX3RzIHx8IGFuaW1hdGlvbi5fcnRzIHx8IF90aW55TnVtKSB8fCAwKSk7XG4gIH0sXG4gICAgICBfYWxpZ25QbGF5aGVhZCA9IGZ1bmN0aW9uIF9hbGlnblBsYXloZWFkKGFuaW1hdGlvbiwgdG90YWxUaW1lKSB7XG4gICAgdmFyIHBhcmVudCA9IGFuaW1hdGlvbi5fZHA7XG5cbiAgICBpZiAocGFyZW50ICYmIHBhcmVudC5zbW9vdGhDaGlsZFRpbWluZyAmJiBhbmltYXRpb24uX3RzKSB7XG4gICAgICBhbmltYXRpb24uX3N0YXJ0ID0gX3JvdW5kUHJlY2lzZShwYXJlbnQuX3RpbWUgLSAoYW5pbWF0aW9uLl90cyA+IDAgPyB0b3RhbFRpbWUgLyBhbmltYXRpb24uX3RzIDogKChhbmltYXRpb24uX2RpcnR5ID8gYW5pbWF0aW9uLnRvdGFsRHVyYXRpb24oKSA6IGFuaW1hdGlvbi5fdER1cikgLSB0b3RhbFRpbWUpIC8gLWFuaW1hdGlvbi5fdHMpKTtcblxuICAgICAgX3NldEVuZChhbmltYXRpb24pO1xuXG4gICAgICBwYXJlbnQuX2RpcnR5IHx8IF91bmNhY2hlKHBhcmVudCwgYW5pbWF0aW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5pbWF0aW9uO1xuICB9LFxuICAgICAgX3Bvc3RBZGRDaGVja3MgPSBmdW5jdGlvbiBfcG9zdEFkZENoZWNrcyh0aW1lbGluZSwgY2hpbGQpIHtcbiAgICB2YXIgdDtcblxuICAgIGlmIChjaGlsZC5fdGltZSB8fCAhY2hpbGQuX2R1ciAmJiBjaGlsZC5faW5pdHRlZCB8fCBjaGlsZC5fc3RhcnQgPCB0aW1lbGluZS5fdGltZSAmJiAoY2hpbGQuX2R1ciB8fCAhY2hpbGQuYWRkKSkge1xuICAgICAgdCA9IF9wYXJlbnRUb0NoaWxkVG90YWxUaW1lKHRpbWVsaW5lLnJhd1RpbWUoKSwgY2hpbGQpO1xuXG4gICAgICBpZiAoIWNoaWxkLl9kdXIgfHwgX2NsYW1wKDAsIGNoaWxkLnRvdGFsRHVyYXRpb24oKSwgdCkgLSBjaGlsZC5fdFRpbWUgPiBfdGlueU51bSkge1xuICAgICAgICBjaGlsZC5yZW5kZXIodCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKF91bmNhY2hlKHRpbWVsaW5lLCBjaGlsZCkuX2RwICYmIHRpbWVsaW5lLl9pbml0dGVkICYmIHRpbWVsaW5lLl90aW1lID49IHRpbWVsaW5lLl9kdXIgJiYgdGltZWxpbmUuX3RzKSB7XG4gICAgICBpZiAodGltZWxpbmUuX2R1ciA8IHRpbWVsaW5lLmR1cmF0aW9uKCkpIHtcbiAgICAgICAgdCA9IHRpbWVsaW5lO1xuXG4gICAgICAgIHdoaWxlICh0Ll9kcCkge1xuICAgICAgICAgIHQucmF3VGltZSgpID49IDAgJiYgdC50b3RhbFRpbWUodC5fdFRpbWUpO1xuICAgICAgICAgIHQgPSB0Ll9kcDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aW1lbGluZS5felRpbWUgPSAtX3RpbnlOdW07XG4gICAgfVxuICB9LFxuICAgICAgX2FkZFRvVGltZWxpbmUgPSBmdW5jdGlvbiBfYWRkVG9UaW1lbGluZSh0aW1lbGluZSwgY2hpbGQsIHBvc2l0aW9uLCBza2lwQ2hlY2tzKSB7XG4gICAgY2hpbGQucGFyZW50ICYmIF9yZW1vdmVGcm9tUGFyZW50KGNoaWxkKTtcbiAgICBjaGlsZC5fc3RhcnQgPSBfcm91bmRQcmVjaXNlKChfaXNOdW1iZXIocG9zaXRpb24pID8gcG9zaXRpb24gOiBwb3NpdGlvbiB8fCB0aW1lbGluZSAhPT0gX2dsb2JhbFRpbWVsaW5lID8gX3BhcnNlUG9zaXRpb24odGltZWxpbmUsIHBvc2l0aW9uLCBjaGlsZCkgOiB0aW1lbGluZS5fdGltZSkgKyBjaGlsZC5fZGVsYXkpO1xuICAgIGNoaWxkLl9lbmQgPSBfcm91bmRQcmVjaXNlKGNoaWxkLl9zdGFydCArIChjaGlsZC50b3RhbER1cmF0aW9uKCkgLyBNYXRoLmFicyhjaGlsZC50aW1lU2NhbGUoKSkgfHwgMCkpO1xuXG4gICAgX2FkZExpbmtlZExpc3RJdGVtKHRpbWVsaW5lLCBjaGlsZCwgXCJfZmlyc3RcIiwgXCJfbGFzdFwiLCB0aW1lbGluZS5fc29ydCA/IFwiX3N0YXJ0XCIgOiAwKTtcblxuICAgIF9pc0Zyb21PckZyb21TdGFydChjaGlsZCkgfHwgKHRpbWVsaW5lLl9yZWNlbnQgPSBjaGlsZCk7XG4gICAgc2tpcENoZWNrcyB8fCBfcG9zdEFkZENoZWNrcyh0aW1lbGluZSwgY2hpbGQpO1xuICAgIHRpbWVsaW5lLl90cyA8IDAgJiYgX2FsaWduUGxheWhlYWQodGltZWxpbmUsIHRpbWVsaW5lLl90VGltZSk7XG4gICAgcmV0dXJuIHRpbWVsaW5lO1xuICB9LFxuICAgICAgX3Njcm9sbFRyaWdnZXIgPSBmdW5jdGlvbiBfc2Nyb2xsVHJpZ2dlcihhbmltYXRpb24sIHRyaWdnZXIpIHtcbiAgICByZXR1cm4gKF9nbG9iYWxzLlNjcm9sbFRyaWdnZXIgfHwgX21pc3NpbmdQbHVnaW4oXCJzY3JvbGxUcmlnZ2VyXCIsIHRyaWdnZXIpKSAmJiBfZ2xvYmFscy5TY3JvbGxUcmlnZ2VyLmNyZWF0ZSh0cmlnZ2VyLCBhbmltYXRpb24pO1xuICB9LFxuICAgICAgX2F0dGVtcHRJbml0VHdlZW4gPSBmdW5jdGlvbiBfYXR0ZW1wdEluaXRUd2Vlbih0d2VlbiwgdGltZSwgZm9yY2UsIHN1cHByZXNzRXZlbnRzLCB0VGltZSkge1xuICAgIF9pbml0VHdlZW4odHdlZW4sIHRpbWUsIHRUaW1lKTtcblxuICAgIGlmICghdHdlZW4uX2luaXR0ZWQpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGlmICghZm9yY2UgJiYgdHdlZW4uX3B0ICYmICFfcmV2ZXJ0aW5nICYmICh0d2Vlbi5fZHVyICYmIHR3ZWVuLnZhcnMubGF6eSAhPT0gZmFsc2UgfHwgIXR3ZWVuLl9kdXIgJiYgdHdlZW4udmFycy5sYXp5KSAmJiBfbGFzdFJlbmRlcmVkRnJhbWUgIT09IF90aWNrZXIuZnJhbWUpIHtcbiAgICAgIF9sYXp5VHdlZW5zLnB1c2godHdlZW4pO1xuXG4gICAgICB0d2Vlbi5fbGF6eSA9IFt0VGltZSwgc3VwcHJlc3NFdmVudHNdO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICB9LFxuICAgICAgX3BhcmVudFBsYXloZWFkSXNCZWZvcmVTdGFydCA9IGZ1bmN0aW9uIF9wYXJlbnRQbGF5aGVhZElzQmVmb3JlU3RhcnQoX3JlZikge1xuICAgIHZhciBwYXJlbnQgPSBfcmVmLnBhcmVudDtcbiAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5fdHMgJiYgcGFyZW50Ll9pbml0dGVkICYmICFwYXJlbnQuX2xvY2sgJiYgKHBhcmVudC5yYXdUaW1lKCkgPCAwIHx8IF9wYXJlbnRQbGF5aGVhZElzQmVmb3JlU3RhcnQocGFyZW50KSk7XG4gIH0sXG4gICAgICBfaXNGcm9tT3JGcm9tU3RhcnQgPSBmdW5jdGlvbiBfaXNGcm9tT3JGcm9tU3RhcnQoX3JlZjIpIHtcbiAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG4gICAgcmV0dXJuIGRhdGEgPT09IFwiaXNGcm9tU3RhcnRcIiB8fCBkYXRhID09PSBcImlzU3RhcnRcIjtcbiAgfSxcbiAgICAgIF9yZW5kZXJaZXJvRHVyYXRpb25Ud2VlbiA9IGZ1bmN0aW9uIF9yZW5kZXJaZXJvRHVyYXRpb25Ud2Vlbih0d2VlbiwgdG90YWxUaW1lLCBzdXBwcmVzc0V2ZW50cywgZm9yY2UpIHtcbiAgICB2YXIgcHJldlJhdGlvID0gdHdlZW4ucmF0aW8sXG4gICAgICAgIHJhdGlvID0gdG90YWxUaW1lIDwgMCB8fCAhdG90YWxUaW1lICYmICghdHdlZW4uX3N0YXJ0ICYmIF9wYXJlbnRQbGF5aGVhZElzQmVmb3JlU3RhcnQodHdlZW4pICYmICEoIXR3ZWVuLl9pbml0dGVkICYmIF9pc0Zyb21PckZyb21TdGFydCh0d2VlbikpIHx8ICh0d2Vlbi5fdHMgPCAwIHx8IHR3ZWVuLl9kcC5fdHMgPCAwKSAmJiAhX2lzRnJvbU9yRnJvbVN0YXJ0KHR3ZWVuKSkgPyAwIDogMSxcbiAgICAgICAgcmVwZWF0RGVsYXkgPSB0d2Vlbi5fckRlbGF5LFxuICAgICAgICB0VGltZSA9IDAsXG4gICAgICAgIHB0LFxuICAgICAgICBpdGVyYXRpb24sXG4gICAgICAgIHByZXZJdGVyYXRpb247XG5cbiAgICBpZiAocmVwZWF0RGVsYXkgJiYgdHdlZW4uX3JlcGVhdCkge1xuICAgICAgdFRpbWUgPSBfY2xhbXAoMCwgdHdlZW4uX3REdXIsIHRvdGFsVGltZSk7XG4gICAgICBpdGVyYXRpb24gPSBfYW5pbWF0aW9uQ3ljbGUodFRpbWUsIHJlcGVhdERlbGF5KTtcbiAgICAgIHR3ZWVuLl95b3lvICYmIGl0ZXJhdGlvbiAmIDEgJiYgKHJhdGlvID0gMSAtIHJhdGlvKTtcblxuICAgICAgaWYgKGl0ZXJhdGlvbiAhPT0gX2FuaW1hdGlvbkN5Y2xlKHR3ZWVuLl90VGltZSwgcmVwZWF0RGVsYXkpKSB7XG4gICAgICAgIHByZXZSYXRpbyA9IDEgLSByYXRpbztcbiAgICAgICAgdHdlZW4udmFycy5yZXBlYXRSZWZyZXNoICYmIHR3ZWVuLl9pbml0dGVkICYmIHR3ZWVuLmludmFsaWRhdGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmF0aW8gIT09IHByZXZSYXRpbyB8fCBfcmV2ZXJ0aW5nIHx8IGZvcmNlIHx8IHR3ZWVuLl96VGltZSA9PT0gX3RpbnlOdW0gfHwgIXRvdGFsVGltZSAmJiB0d2Vlbi5felRpbWUpIHtcbiAgICAgIGlmICghdHdlZW4uX2luaXR0ZWQgJiYgX2F0dGVtcHRJbml0VHdlZW4odHdlZW4sIHRvdGFsVGltZSwgZm9yY2UsIHN1cHByZXNzRXZlbnRzLCB0VGltZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBwcmV2SXRlcmF0aW9uID0gdHdlZW4uX3pUaW1lO1xuICAgICAgdHdlZW4uX3pUaW1lID0gdG90YWxUaW1lIHx8IChzdXBwcmVzc0V2ZW50cyA/IF90aW55TnVtIDogMCk7XG4gICAgICBzdXBwcmVzc0V2ZW50cyB8fCAoc3VwcHJlc3NFdmVudHMgPSB0b3RhbFRpbWUgJiYgIXByZXZJdGVyYXRpb24pO1xuICAgICAgdHdlZW4ucmF0aW8gPSByYXRpbztcbiAgICAgIHR3ZWVuLl9mcm9tICYmIChyYXRpbyA9IDEgLSByYXRpbyk7XG4gICAgICB0d2Vlbi5fdGltZSA9IDA7XG4gICAgICB0d2Vlbi5fdFRpbWUgPSB0VGltZTtcbiAgICAgIHB0ID0gdHdlZW4uX3B0O1xuXG4gICAgICB3aGlsZSAocHQpIHtcbiAgICAgICAgcHQucihyYXRpbywgcHQuZCk7XG4gICAgICAgIHB0ID0gcHQuX25leHQ7XG4gICAgICB9XG5cbiAgICAgIHRvdGFsVGltZSA8IDAgJiYgX3Jld2luZFN0YXJ0QXQodHdlZW4sIHRvdGFsVGltZSwgc3VwcHJlc3NFdmVudHMsIHRydWUpO1xuICAgICAgdHdlZW4uX29uVXBkYXRlICYmICFzdXBwcmVzc0V2ZW50cyAmJiBfY2FsbGJhY2sodHdlZW4sIFwib25VcGRhdGVcIik7XG4gICAgICB0VGltZSAmJiB0d2Vlbi5fcmVwZWF0ICYmICFzdXBwcmVzc0V2ZW50cyAmJiB0d2Vlbi5wYXJlbnQgJiYgX2NhbGxiYWNrKHR3ZWVuLCBcIm9uUmVwZWF0XCIpO1xuXG4gICAgICBpZiAoKHRvdGFsVGltZSA+PSB0d2Vlbi5fdER1ciB8fCB0b3RhbFRpbWUgPCAwKSAmJiB0d2Vlbi5yYXRpbyA9PT0gcmF0aW8pIHtcbiAgICAgICAgcmF0aW8gJiYgX3JlbW92ZUZyb21QYXJlbnQodHdlZW4sIDEpO1xuXG4gICAgICAgIGlmICghc3VwcHJlc3NFdmVudHMgJiYgIV9yZXZlcnRpbmcpIHtcbiAgICAgICAgICBfY2FsbGJhY2sodHdlZW4sIHJhdGlvID8gXCJvbkNvbXBsZXRlXCIgOiBcIm9uUmV2ZXJzZUNvbXBsZXRlXCIsIHRydWUpO1xuXG4gICAgICAgICAgdHdlZW4uX3Byb20gJiYgdHdlZW4uX3Byb20oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXR3ZWVuLl96VGltZSkge1xuICAgICAgdHdlZW4uX3pUaW1lID0gdG90YWxUaW1lO1xuICAgIH1cbiAgfSxcbiAgICAgIF9maW5kTmV4dFBhdXNlVHdlZW4gPSBmdW5jdGlvbiBfZmluZE5leHRQYXVzZVR3ZWVuKGFuaW1hdGlvbiwgcHJldlRpbWUsIHRpbWUpIHtcbiAgICB2YXIgY2hpbGQ7XG5cbiAgICBpZiAodGltZSA+IHByZXZUaW1lKSB7XG4gICAgICBjaGlsZCA9IGFuaW1hdGlvbi5fZmlyc3Q7XG5cbiAgICAgIHdoaWxlIChjaGlsZCAmJiBjaGlsZC5fc3RhcnQgPD0gdGltZSkge1xuICAgICAgICBpZiAoY2hpbGQuZGF0YSA9PT0gXCJpc1BhdXNlXCIgJiYgY2hpbGQuX3N0YXJ0ID4gcHJldlRpbWUpIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZCA9IGNoaWxkLl9uZXh0O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZCA9IGFuaW1hdGlvbi5fbGFzdDtcblxuICAgICAgd2hpbGUgKGNoaWxkICYmIGNoaWxkLl9zdGFydCA+PSB0aW1lKSB7XG4gICAgICAgIGlmIChjaGlsZC5kYXRhID09PSBcImlzUGF1c2VcIiAmJiBjaGlsZC5fc3RhcnQgPCBwcmV2VGltZSkge1xuICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkID0gY2hpbGQuX3ByZXY7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgICAgX3NldER1cmF0aW9uID0gZnVuY3Rpb24gX3NldER1cmF0aW9uKGFuaW1hdGlvbiwgZHVyYXRpb24sIHNraXBVbmNhY2hlLCBsZWF2ZVBsYXloZWFkKSB7XG4gICAgdmFyIHJlcGVhdCA9IGFuaW1hdGlvbi5fcmVwZWF0LFxuICAgICAgICBkdXIgPSBfcm91bmRQcmVjaXNlKGR1cmF0aW9uKSB8fCAwLFxuICAgICAgICB0b3RhbFByb2dyZXNzID0gYW5pbWF0aW9uLl90VGltZSAvIGFuaW1hdGlvbi5fdER1cjtcbiAgICB0b3RhbFByb2dyZXNzICYmICFsZWF2ZVBsYXloZWFkICYmIChhbmltYXRpb24uX3RpbWUgKj0gZHVyIC8gYW5pbWF0aW9uLl9kdXIpO1xuICAgIGFuaW1hdGlvbi5fZHVyID0gZHVyO1xuICAgIGFuaW1hdGlvbi5fdER1ciA9ICFyZXBlYXQgPyBkdXIgOiByZXBlYXQgPCAwID8gMWUxMCA6IF9yb3VuZFByZWNpc2UoZHVyICogKHJlcGVhdCArIDEpICsgYW5pbWF0aW9uLl9yRGVsYXkgKiByZXBlYXQpO1xuICAgIHRvdGFsUHJvZ3Jlc3MgPiAwICYmICFsZWF2ZVBsYXloZWFkICYmIF9hbGlnblBsYXloZWFkKGFuaW1hdGlvbiwgYW5pbWF0aW9uLl90VGltZSA9IGFuaW1hdGlvbi5fdER1ciAqIHRvdGFsUHJvZ3Jlc3MpO1xuICAgIGFuaW1hdGlvbi5wYXJlbnQgJiYgX3NldEVuZChhbmltYXRpb24pO1xuICAgIHNraXBVbmNhY2hlIHx8IF91bmNhY2hlKGFuaW1hdGlvbi5wYXJlbnQsIGFuaW1hdGlvbik7XG4gICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgfSxcbiAgICAgIF9vblVwZGF0ZVRvdGFsRHVyYXRpb24gPSBmdW5jdGlvbiBfb25VcGRhdGVUb3RhbER1cmF0aW9uKGFuaW1hdGlvbikge1xuICAgIHJldHVybiBhbmltYXRpb24gaW5zdGFuY2VvZiBUaW1lbGluZSA/IF91bmNhY2hlKGFuaW1hdGlvbikgOiBfc2V0RHVyYXRpb24oYW5pbWF0aW9uLCBhbmltYXRpb24uX2R1cik7XG4gIH0sXG4gICAgICBfemVyb1Bvc2l0aW9uID0ge1xuICAgIF9zdGFydDogMCxcbiAgICBlbmRUaW1lOiBfZW1wdHlGdW5jLFxuICAgIHRvdGFsRHVyYXRpb246IF9lbXB0eUZ1bmNcbiAgfSxcbiAgICAgIF9wYXJzZVBvc2l0aW9uID0gZnVuY3Rpb24gX3BhcnNlUG9zaXRpb24oYW5pbWF0aW9uLCBwb3NpdGlvbiwgcGVyY2VudEFuaW1hdGlvbikge1xuICAgIHZhciBsYWJlbHMgPSBhbmltYXRpb24ubGFiZWxzLFxuICAgICAgICByZWNlbnQgPSBhbmltYXRpb24uX3JlY2VudCB8fCBfemVyb1Bvc2l0aW9uLFxuICAgICAgICBjbGlwcGVkRHVyYXRpb24gPSBhbmltYXRpb24uZHVyYXRpb24oKSA+PSBfYmlnTnVtID8gcmVjZW50LmVuZFRpbWUoZmFsc2UpIDogYW5pbWF0aW9uLl9kdXIsXG4gICAgICAgIGksXG4gICAgICAgIG9mZnNldCxcbiAgICAgICAgaXNQZXJjZW50O1xuXG4gICAgaWYgKF9pc1N0cmluZyhwb3NpdGlvbikgJiYgKGlzTmFOKHBvc2l0aW9uKSB8fCBwb3NpdGlvbiBpbiBsYWJlbHMpKSB7XG4gICAgICBvZmZzZXQgPSBwb3NpdGlvbi5jaGFyQXQoMCk7XG4gICAgICBpc1BlcmNlbnQgPSBwb3NpdGlvbi5zdWJzdHIoLTEpID09PSBcIiVcIjtcbiAgICAgIGkgPSBwb3NpdGlvbi5pbmRleE9mKFwiPVwiKTtcblxuICAgICAgaWYgKG9mZnNldCA9PT0gXCI8XCIgfHwgb2Zmc2V0ID09PSBcIj5cIikge1xuICAgICAgICBpID49IDAgJiYgKHBvc2l0aW9uID0gcG9zaXRpb24ucmVwbGFjZSgvPS8sIFwiXCIpKTtcbiAgICAgICAgcmV0dXJuIChvZmZzZXQgPT09IFwiPFwiID8gcmVjZW50Ll9zdGFydCA6IHJlY2VudC5lbmRUaW1lKHJlY2VudC5fcmVwZWF0ID49IDApKSArIChwYXJzZUZsb2F0KHBvc2l0aW9uLnN1YnN0cigxKSkgfHwgMCkgKiAoaXNQZXJjZW50ID8gKGkgPCAwID8gcmVjZW50IDogcGVyY2VudEFuaW1hdGlvbikudG90YWxEdXJhdGlvbigpIC8gMTAwIDogMSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpIDwgMCkge1xuICAgICAgICBwb3NpdGlvbiBpbiBsYWJlbHMgfHwgKGxhYmVsc1twb3NpdGlvbl0gPSBjbGlwcGVkRHVyYXRpb24pO1xuICAgICAgICByZXR1cm4gbGFiZWxzW3Bvc2l0aW9uXTtcbiAgICAgIH1cblxuICAgICAgb2Zmc2V0ID0gcGFyc2VGbG9hdChwb3NpdGlvbi5jaGFyQXQoaSAtIDEpICsgcG9zaXRpb24uc3Vic3RyKGkgKyAxKSk7XG5cbiAgICAgIGlmIChpc1BlcmNlbnQgJiYgcGVyY2VudEFuaW1hdGlvbikge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQgLyAxMDAgKiAoX2lzQXJyYXkocGVyY2VudEFuaW1hdGlvbikgPyBwZXJjZW50QW5pbWF0aW9uWzBdIDogcGVyY2VudEFuaW1hdGlvbikudG90YWxEdXJhdGlvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaSA+IDEgPyBfcGFyc2VQb3NpdGlvbihhbmltYXRpb24sIHBvc2l0aW9uLnN1YnN0cigwLCBpIC0gMSksIHBlcmNlbnRBbmltYXRpb24pICsgb2Zmc2V0IDogY2xpcHBlZER1cmF0aW9uICsgb2Zmc2V0O1xuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbiA9PSBudWxsID8gY2xpcHBlZER1cmF0aW9uIDogK3Bvc2l0aW9uO1xuICB9LFxuICAgICAgX2NyZWF0ZVR3ZWVuVHlwZSA9IGZ1bmN0aW9uIF9jcmVhdGVUd2VlblR5cGUodHlwZSwgcGFyYW1zLCB0aW1lbGluZSkge1xuICAgIHZhciBpc0xlZ2FjeSA9IF9pc051bWJlcihwYXJhbXNbMV0pLFxuICAgICAgICB2YXJzSW5kZXggPSAoaXNMZWdhY3kgPyAyIDogMSkgKyAodHlwZSA8IDIgPyAwIDogMSksXG4gICAgICAgIHZhcnMgPSBwYXJhbXNbdmFyc0luZGV4XSxcbiAgICAgICAgaXJWYXJzLFxuICAgICAgICBwYXJlbnQ7XG5cbiAgICBpc0xlZ2FjeSAmJiAodmFycy5kdXJhdGlvbiA9IHBhcmFtc1sxXSk7XG4gICAgdmFycy5wYXJlbnQgPSB0aW1lbGluZTtcblxuICAgIGlmICh0eXBlKSB7XG4gICAgICBpclZhcnMgPSB2YXJzO1xuICAgICAgcGFyZW50ID0gdGltZWxpbmU7XG5cbiAgICAgIHdoaWxlIChwYXJlbnQgJiYgIShcImltbWVkaWF0ZVJlbmRlclwiIGluIGlyVmFycykpIHtcbiAgICAgICAgaXJWYXJzID0gcGFyZW50LnZhcnMuZGVmYXVsdHMgfHwge307XG4gICAgICAgIHBhcmVudCA9IF9pc05vdEZhbHNlKHBhcmVudC52YXJzLmluaGVyaXQpICYmIHBhcmVudC5wYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgIHZhcnMuaW1tZWRpYXRlUmVuZGVyID0gX2lzTm90RmFsc2UoaXJWYXJzLmltbWVkaWF0ZVJlbmRlcik7XG4gICAgICB0eXBlIDwgMiA/IHZhcnMucnVuQmFja3dhcmRzID0gMSA6IHZhcnMuc3RhcnRBdCA9IHBhcmFtc1t2YXJzSW5kZXggLSAxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFR3ZWVuKHBhcmFtc1swXSwgdmFycywgcGFyYW1zW3ZhcnNJbmRleCArIDFdKTtcbiAgfSxcbiAgICAgIF9jb25kaXRpb25hbFJldHVybiA9IGZ1bmN0aW9uIF9jb25kaXRpb25hbFJldHVybih2YWx1ZSwgZnVuYykge1xuICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IGZ1bmModmFsdWUpIDogZnVuYztcbiAgfSxcbiAgICAgIF9jbGFtcCA9IGZ1bmN0aW9uIF9jbGFtcChtaW4sIG1heCwgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlO1xuICB9LFxuICAgICAgZ2V0VW5pdCA9IGZ1bmN0aW9uIGdldFVuaXQodmFsdWUsIHYpIHtcbiAgICByZXR1cm4gIV9pc1N0cmluZyh2YWx1ZSkgfHwgISh2ID0gX3VuaXRFeHAuZXhlYyh2YWx1ZSkpID8gXCJcIiA6IHZbMV07XG4gIH0sXG4gICAgICBjbGFtcCA9IGZ1bmN0aW9uIGNsYW1wKG1pbiwgbWF4LCB2YWx1ZSkge1xuICAgIHJldHVybiBfY29uZGl0aW9uYWxSZXR1cm4odmFsdWUsIGZ1bmN0aW9uICh2KSB7XG4gICAgICByZXR1cm4gX2NsYW1wKG1pbiwgbWF4LCB2KTtcbiAgICB9KTtcbiAgfSxcbiAgICAgIF9zbGljZSA9IFtdLnNsaWNlLFxuICAgICAgX2lzQXJyYXlMaWtlID0gZnVuY3Rpb24gX2lzQXJyYXlMaWtlKHZhbHVlLCBub25FbXB0eSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiBfaXNPYmplY3QodmFsdWUpICYmIFwibGVuZ3RoXCIgaW4gdmFsdWUgJiYgKCFub25FbXB0eSAmJiAhdmFsdWUubGVuZ3RoIHx8IHZhbHVlLmxlbmd0aCAtIDEgaW4gdmFsdWUgJiYgX2lzT2JqZWN0KHZhbHVlWzBdKSkgJiYgIXZhbHVlLm5vZGVUeXBlICYmIHZhbHVlICE9PSBfd2luO1xuICB9LFxuICAgICAgX2ZsYXR0ZW4gPSBmdW5jdGlvbiBfZmxhdHRlbihhciwgbGVhdmVTdHJpbmdzLCBhY2N1bXVsYXRvcikge1xuICAgIGlmIChhY2N1bXVsYXRvciA9PT0gdm9pZCAwKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IFtdO1xuICAgIH1cblxuICAgIHJldHVybiBhci5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdmFyIF9hY2N1bXVsYXRvcjtcblxuICAgICAgcmV0dXJuIF9pc1N0cmluZyh2YWx1ZSkgJiYgIWxlYXZlU3RyaW5ncyB8fCBfaXNBcnJheUxpa2UodmFsdWUsIDEpID8gKF9hY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yKS5wdXNoLmFwcGx5KF9hY2N1bXVsYXRvciwgdG9BcnJheSh2YWx1ZSkpIDogYWNjdW11bGF0b3IucHVzaCh2YWx1ZSk7XG4gICAgfSkgfHwgYWNjdW11bGF0b3I7XG4gIH0sXG4gICAgICB0b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSwgc2NvcGUsIGxlYXZlU3RyaW5ncykge1xuICAgIHJldHVybiBfY29udGV4dCAmJiAhc2NvcGUgJiYgX2NvbnRleHQuc2VsZWN0b3IgPyBfY29udGV4dC5zZWxlY3Rvcih2YWx1ZSkgOiBfaXNTdHJpbmcodmFsdWUpICYmICFsZWF2ZVN0cmluZ3MgJiYgKF9jb3JlSW5pdHRlZCB8fCAhX3dha2UoKSkgPyBfc2xpY2UuY2FsbCgoc2NvcGUgfHwgX2RvYykucXVlcnlTZWxlY3RvckFsbCh2YWx1ZSksIDApIDogX2lzQXJyYXkodmFsdWUpID8gX2ZsYXR0ZW4odmFsdWUsIGxlYXZlU3RyaW5ncykgOiBfaXNBcnJheUxpa2UodmFsdWUpID8gX3NsaWNlLmNhbGwodmFsdWUsIDApIDogdmFsdWUgPyBbdmFsdWVdIDogW107XG4gIH0sXG4gICAgICBzZWxlY3RvciA9IGZ1bmN0aW9uIHNlbGVjdG9yKHZhbHVlKSB7XG4gICAgdmFsdWUgPSB0b0FycmF5KHZhbHVlKVswXSB8fCBfd2FybihcIkludmFsaWQgc2NvcGVcIikgfHwge307XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICB2YXIgZWwgPSB2YWx1ZS5jdXJyZW50IHx8IHZhbHVlLm5hdGl2ZUVsZW1lbnQgfHwgdmFsdWU7XG4gICAgICByZXR1cm4gdG9BcnJheSh2LCBlbC5xdWVyeVNlbGVjdG9yQWxsID8gZWwgOiBlbCA9PT0gdmFsdWUgPyBfd2FybihcIkludmFsaWQgc2NvcGVcIikgfHwgX2RvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpIDogdmFsdWUpO1xuICAgIH07XG4gIH0sXG4gICAgICBzaHVmZmxlID0gZnVuY3Rpb24gc2h1ZmZsZShhKSB7XG4gICAgcmV0dXJuIGEuc29ydChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gLjUgLSBNYXRoLnJhbmRvbSgpO1xuICAgIH0pO1xuICB9LFxuICAgICAgZGlzdHJpYnV0ZSA9IGZ1bmN0aW9uIGRpc3RyaWJ1dGUodikge1xuICAgIGlmIChfaXNGdW5jdGlvbih2KSkge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuXG4gICAgdmFyIHZhcnMgPSBfaXNPYmplY3QodikgPyB2IDoge1xuICAgICAgZWFjaDogdlxuICAgIH0sXG4gICAgICAgIGVhc2UgPSBfcGFyc2VFYXNlKHZhcnMuZWFzZSksXG4gICAgICAgIGZyb20gPSB2YXJzLmZyb20gfHwgMCxcbiAgICAgICAgYmFzZSA9IHBhcnNlRmxvYXQodmFycy5iYXNlKSB8fCAwLFxuICAgICAgICBjYWNoZSA9IHt9LFxuICAgICAgICBpc0RlY2ltYWwgPSBmcm9tID4gMCAmJiBmcm9tIDwgMSxcbiAgICAgICAgcmF0aW9zID0gaXNOYU4oZnJvbSkgfHwgaXNEZWNpbWFsLFxuICAgICAgICBheGlzID0gdmFycy5heGlzLFxuICAgICAgICByYXRpb1ggPSBmcm9tLFxuICAgICAgICByYXRpb1kgPSBmcm9tO1xuXG4gICAgaWYgKF9pc1N0cmluZyhmcm9tKSkge1xuICAgICAgcmF0aW9YID0gcmF0aW9ZID0ge1xuICAgICAgICBjZW50ZXI6IC41LFxuICAgICAgICBlZGdlczogLjUsXG4gICAgICAgIGVuZDogMVxuICAgICAgfVtmcm9tXSB8fCAwO1xuICAgIH0gZWxzZSBpZiAoIWlzRGVjaW1hbCAmJiByYXRpb3MpIHtcbiAgICAgIHJhdGlvWCA9IGZyb21bMF07XG4gICAgICByYXRpb1kgPSBmcm9tWzFdO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoaSwgdGFyZ2V0LCBhKSB7XG4gICAgICB2YXIgbCA9IChhIHx8IHZhcnMpLmxlbmd0aCxcbiAgICAgICAgICBkaXN0YW5jZXMgPSBjYWNoZVtsXSxcbiAgICAgICAgICBvcmlnaW5YLFxuICAgICAgICAgIG9yaWdpblksXG4gICAgICAgICAgeCxcbiAgICAgICAgICB5LFxuICAgICAgICAgIGQsXG4gICAgICAgICAgaixcbiAgICAgICAgICBtYXgsXG4gICAgICAgICAgbWluLFxuICAgICAgICAgIHdyYXBBdDtcblxuICAgICAgaWYgKCFkaXN0YW5jZXMpIHtcbiAgICAgICAgd3JhcEF0ID0gdmFycy5ncmlkID09PSBcImF1dG9cIiA/IDAgOiAodmFycy5ncmlkIHx8IFsxLCBfYmlnTnVtXSlbMV07XG5cbiAgICAgICAgaWYgKCF3cmFwQXQpIHtcbiAgICAgICAgICBtYXggPSAtX2JpZ051bTtcblxuICAgICAgICAgIHdoaWxlIChtYXggPCAobWF4ID0gYVt3cmFwQXQrK10uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCkgJiYgd3JhcEF0IDwgbCkge31cblxuICAgICAgICAgIHdyYXBBdCA8IGwgJiYgd3JhcEF0LS07XG4gICAgICAgIH1cblxuICAgICAgICBkaXN0YW5jZXMgPSBjYWNoZVtsXSA9IFtdO1xuICAgICAgICBvcmlnaW5YID0gcmF0aW9zID8gTWF0aC5taW4od3JhcEF0LCBsKSAqIHJhdGlvWCAtIC41IDogZnJvbSAlIHdyYXBBdDtcbiAgICAgICAgb3JpZ2luWSA9IHdyYXBBdCA9PT0gX2JpZ051bSA/IDAgOiByYXRpb3MgPyBsICogcmF0aW9ZIC8gd3JhcEF0IC0gLjUgOiBmcm9tIC8gd3JhcEF0IHwgMDtcbiAgICAgICAgbWF4ID0gMDtcbiAgICAgICAgbWluID0gX2JpZ051bTtcblxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgbDsgaisrKSB7XG4gICAgICAgICAgeCA9IGogJSB3cmFwQXQgLSBvcmlnaW5YO1xuICAgICAgICAgIHkgPSBvcmlnaW5ZIC0gKGogLyB3cmFwQXQgfCAwKTtcbiAgICAgICAgICBkaXN0YW5jZXNbal0gPSBkID0gIWF4aXMgPyBfc3FydCh4ICogeCArIHkgKiB5KSA6IE1hdGguYWJzKGF4aXMgPT09IFwieVwiID8geSA6IHgpO1xuICAgICAgICAgIGQgPiBtYXggJiYgKG1heCA9IGQpO1xuICAgICAgICAgIGQgPCBtaW4gJiYgKG1pbiA9IGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnJvbSA9PT0gXCJyYW5kb21cIiAmJiBzaHVmZmxlKGRpc3RhbmNlcyk7XG4gICAgICAgIGRpc3RhbmNlcy5tYXggPSBtYXggLSBtaW47XG4gICAgICAgIGRpc3RhbmNlcy5taW4gPSBtaW47XG4gICAgICAgIGRpc3RhbmNlcy52ID0gbCA9IChwYXJzZUZsb2F0KHZhcnMuYW1vdW50KSB8fCBwYXJzZUZsb2F0KHZhcnMuZWFjaCkgKiAod3JhcEF0ID4gbCA/IGwgLSAxIDogIWF4aXMgPyBNYXRoLm1heCh3cmFwQXQsIGwgLyB3cmFwQXQpIDogYXhpcyA9PT0gXCJ5XCIgPyBsIC8gd3JhcEF0IDogd3JhcEF0KSB8fCAwKSAqIChmcm9tID09PSBcImVkZ2VzXCIgPyAtMSA6IDEpO1xuICAgICAgICBkaXN0YW5jZXMuYiA9IGwgPCAwID8gYmFzZSAtIGwgOiBiYXNlO1xuICAgICAgICBkaXN0YW5jZXMudSA9IGdldFVuaXQodmFycy5hbW91bnQgfHwgdmFycy5lYWNoKSB8fCAwO1xuICAgICAgICBlYXNlID0gZWFzZSAmJiBsIDwgMCA/IF9pbnZlcnRFYXNlKGVhc2UpIDogZWFzZTtcbiAgICAgIH1cblxuICAgICAgbCA9IChkaXN0YW5jZXNbaV0gLSBkaXN0YW5jZXMubWluKSAvIGRpc3RhbmNlcy5tYXggfHwgMDtcbiAgICAgIHJldHVybiBfcm91bmRQcmVjaXNlKGRpc3RhbmNlcy5iICsgKGVhc2UgPyBlYXNlKGwpIDogbCkgKiBkaXN0YW5jZXMudikgKyBkaXN0YW5jZXMudTtcbiAgICB9O1xuICB9LFxuICAgICAgX3JvdW5kTW9kaWZpZXIgPSBmdW5jdGlvbiBfcm91bmRNb2RpZmllcih2KSB7XG4gICAgdmFyIHAgPSBNYXRoLnBvdygxMCwgKCh2ICsgXCJcIikuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyYXcpIHtcbiAgICAgIHZhciBuID0gX3JvdW5kUHJlY2lzZShNYXRoLnJvdW5kKHBhcnNlRmxvYXQocmF3KSAvIHYpICogdiAqIHApO1xuXG4gICAgICByZXR1cm4gKG4gLSBuICUgMSkgLyBwICsgKF9pc051bWJlcihyYXcpID8gMCA6IGdldFVuaXQocmF3KSk7XG4gICAgfTtcbiAgfSxcbiAgICAgIHNuYXAgPSBmdW5jdGlvbiBzbmFwKHNuYXBUbywgdmFsdWUpIHtcbiAgICB2YXIgaXNBcnJheSA9IF9pc0FycmF5KHNuYXBUbyksXG4gICAgICAgIHJhZGl1cyxcbiAgICAgICAgaXMyRDtcblxuICAgIGlmICghaXNBcnJheSAmJiBfaXNPYmplY3Qoc25hcFRvKSkge1xuICAgICAgcmFkaXVzID0gaXNBcnJheSA9IHNuYXBUby5yYWRpdXMgfHwgX2JpZ051bTtcblxuICAgICAgaWYgKHNuYXBUby52YWx1ZXMpIHtcbiAgICAgICAgc25hcFRvID0gdG9BcnJheShzbmFwVG8udmFsdWVzKTtcblxuICAgICAgICBpZiAoaXMyRCA9ICFfaXNOdW1iZXIoc25hcFRvWzBdKSkge1xuICAgICAgICAgIHJhZGl1cyAqPSByYWRpdXM7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNuYXBUbyA9IF9yb3VuZE1vZGlmaWVyKHNuYXBUby5pbmNyZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfY29uZGl0aW9uYWxSZXR1cm4odmFsdWUsICFpc0FycmF5ID8gX3JvdW5kTW9kaWZpZXIoc25hcFRvKSA6IF9pc0Z1bmN0aW9uKHNuYXBUbykgPyBmdW5jdGlvbiAocmF3KSB7XG4gICAgICBpczJEID0gc25hcFRvKHJhdyk7XG4gICAgICByZXR1cm4gTWF0aC5hYnMoaXMyRCAtIHJhdykgPD0gcmFkaXVzID8gaXMyRCA6IHJhdztcbiAgICB9IDogZnVuY3Rpb24gKHJhdykge1xuICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KGlzMkQgPyByYXcueCA6IHJhdyksXG4gICAgICAgICAgeSA9IHBhcnNlRmxvYXQoaXMyRCA/IHJhdy55IDogMCksXG4gICAgICAgICAgbWluID0gX2JpZ051bSxcbiAgICAgICAgICBjbG9zZXN0ID0gMCxcbiAgICAgICAgICBpID0gc25hcFRvLmxlbmd0aCxcbiAgICAgICAgICBkeCxcbiAgICAgICAgICBkeTtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZiAoaXMyRCkge1xuICAgICAgICAgIGR4ID0gc25hcFRvW2ldLnggLSB4O1xuICAgICAgICAgIGR5ID0gc25hcFRvW2ldLnkgLSB5O1xuICAgICAgICAgIGR4ID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZHggPSBNYXRoLmFicyhzbmFwVG9baV0gLSB4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkeCA8IG1pbikge1xuICAgICAgICAgIG1pbiA9IGR4O1xuICAgICAgICAgIGNsb3Nlc3QgPSBpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNsb3Nlc3QgPSAhcmFkaXVzIHx8IG1pbiA8PSByYWRpdXMgPyBzbmFwVG9bY2xvc2VzdF0gOiByYXc7XG4gICAgICByZXR1cm4gaXMyRCB8fCBjbG9zZXN0ID09PSByYXcgfHwgX2lzTnVtYmVyKHJhdykgPyBjbG9zZXN0IDogY2xvc2VzdCArIGdldFVuaXQocmF3KTtcbiAgICB9KTtcbiAgfSxcbiAgICAgIHJhbmRvbSA9IGZ1bmN0aW9uIHJhbmRvbShtaW4sIG1heCwgcm91bmRpbmdJbmNyZW1lbnQsIHJldHVybkZ1bmN0aW9uKSB7XG4gICAgcmV0dXJuIF9jb25kaXRpb25hbFJldHVybihfaXNBcnJheShtaW4pID8gIW1heCA6IHJvdW5kaW5nSW5jcmVtZW50ID09PSB0cnVlID8gISEocm91bmRpbmdJbmNyZW1lbnQgPSAwKSA6ICFyZXR1cm5GdW5jdGlvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9pc0FycmF5KG1pbikgPyBtaW5bfn4oTWF0aC5yYW5kb20oKSAqIG1pbi5sZW5ndGgpXSA6IChyb3VuZGluZ0luY3JlbWVudCA9IHJvdW5kaW5nSW5jcmVtZW50IHx8IDFlLTUpICYmIChyZXR1cm5GdW5jdGlvbiA9IHJvdW5kaW5nSW5jcmVtZW50IDwgMSA/IE1hdGgucG93KDEwLCAocm91bmRpbmdJbmNyZW1lbnQgKyBcIlwiKS5sZW5ndGggLSAyKSA6IDEpICYmIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgobWluIC0gcm91bmRpbmdJbmNyZW1lbnQgLyAyICsgTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyByb3VuZGluZ0luY3JlbWVudCAqIC45OSkpIC8gcm91bmRpbmdJbmNyZW1lbnQpICogcm91bmRpbmdJbmNyZW1lbnQgKiByZXR1cm5GdW5jdGlvbikgLyByZXR1cm5GdW5jdGlvbjtcbiAgICB9KTtcbiAgfSxcbiAgICAgIHBpcGUgPSBmdW5jdGlvbiBwaXBlKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jdGlvbnMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBmdW5jdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKHYsIGYpIHtcbiAgICAgICAgcmV0dXJuIGYodik7XG4gICAgICB9LCB2YWx1ZSk7XG4gICAgfTtcbiAgfSxcbiAgICAgIHVuaXRpemUgPSBmdW5jdGlvbiB1bml0aXplKGZ1bmMsIHVuaXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuYyhwYXJzZUZsb2F0KHZhbHVlKSkgKyAodW5pdCB8fCBnZXRVbml0KHZhbHVlKSk7XG4gICAgfTtcbiAgfSxcbiAgICAgIG5vcm1hbGl6ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZShtaW4sIG1heCwgdmFsdWUpIHtcbiAgICByZXR1cm4gbWFwUmFuZ2UobWluLCBtYXgsIDAsIDEsIHZhbHVlKTtcbiAgfSxcbiAgICAgIF93cmFwQXJyYXkgPSBmdW5jdGlvbiBfd3JhcEFycmF5KGEsIHdyYXBwZXIsIHZhbHVlKSB7XG4gICAgcmV0dXJuIF9jb25kaXRpb25hbFJldHVybih2YWx1ZSwgZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICByZXR1cm4gYVt+fndyYXBwZXIoaW5kZXgpXTtcbiAgICB9KTtcbiAgfSxcbiAgICAgIHdyYXAgPSBmdW5jdGlvbiB3cmFwKG1pbiwgbWF4LCB2YWx1ZSkge1xuICAgIHZhciByYW5nZSA9IG1heCAtIG1pbjtcbiAgICByZXR1cm4gX2lzQXJyYXkobWluKSA/IF93cmFwQXJyYXkobWluLCB3cmFwKDAsIG1pbi5sZW5ndGgpLCBtYXgpIDogX2NvbmRpdGlvbmFsUmV0dXJuKHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiAocmFuZ2UgKyAodmFsdWUgLSBtaW4pICUgcmFuZ2UpICUgcmFuZ2UgKyBtaW47XG4gICAgfSk7XG4gIH0sXG4gICAgICB3cmFwWW95byA9IGZ1bmN0aW9uIHdyYXBZb3lvKG1pbiwgbWF4LCB2YWx1ZSkge1xuICAgIHZhciByYW5nZSA9IG1heCAtIG1pbixcbiAgICAgICAgdG90YWwgPSByYW5nZSAqIDI7XG4gICAgcmV0dXJuIF9pc0FycmF5KG1pbikgPyBfd3JhcEFycmF5KG1pbiwgd3JhcFlveW8oMCwgbWluLmxlbmd0aCAtIDEpLCBtYXgpIDogX2NvbmRpdGlvbmFsUmV0dXJuKHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZhbHVlID0gKHRvdGFsICsgKHZhbHVlIC0gbWluKSAlIHRvdGFsKSAlIHRvdGFsIHx8IDA7XG4gICAgICByZXR1cm4gbWluICsgKHZhbHVlID4gcmFuZ2UgPyB0b3RhbCAtIHZhbHVlIDogdmFsdWUpO1xuICAgIH0pO1xuICB9LFxuICAgICAgX3JlcGxhY2VSYW5kb20gPSBmdW5jdGlvbiBfcmVwbGFjZVJhbmRvbSh2YWx1ZSkge1xuICAgIHZhciBwcmV2ID0gMCxcbiAgICAgICAgcyA9IFwiXCIsXG4gICAgICAgIGksXG4gICAgICAgIG51bXMsXG4gICAgICAgIGVuZCxcbiAgICAgICAgaXNBcnJheTtcblxuICAgIHdoaWxlICh+KGkgPSB2YWx1ZS5pbmRleE9mKFwicmFuZG9tKFwiLCBwcmV2KSkpIHtcbiAgICAgIGVuZCA9IHZhbHVlLmluZGV4T2YoXCIpXCIsIGkpO1xuICAgICAgaXNBcnJheSA9IHZhbHVlLmNoYXJBdChpICsgNykgPT09IFwiW1wiO1xuICAgICAgbnVtcyA9IHZhbHVlLnN1YnN0cihpICsgNywgZW5kIC0gaSAtIDcpLm1hdGNoKGlzQXJyYXkgPyBfZGVsaW1pdGVkVmFsdWVFeHAgOiBfc3RyaWN0TnVtRXhwKTtcbiAgICAgIHMgKz0gdmFsdWUuc3Vic3RyKHByZXYsIGkgLSBwcmV2KSArIHJhbmRvbShpc0FycmF5ID8gbnVtcyA6ICtudW1zWzBdLCBpc0FycmF5ID8gMCA6ICtudW1zWzFdLCArbnVtc1syXSB8fCAxZS01KTtcbiAgICAgIHByZXYgPSBlbmQgKyAxO1xuICAgIH1cblxuICAgIHJldHVybiBzICsgdmFsdWUuc3Vic3RyKHByZXYsIHZhbHVlLmxlbmd0aCAtIHByZXYpO1xuICB9LFxuICAgICAgbWFwUmFuZ2UgPSBmdW5jdGlvbiBtYXBSYW5nZShpbk1pbiwgaW5NYXgsIG91dE1pbiwgb3V0TWF4LCB2YWx1ZSkge1xuICAgIHZhciBpblJhbmdlID0gaW5NYXggLSBpbk1pbixcbiAgICAgICAgb3V0UmFuZ2UgPSBvdXRNYXggLSBvdXRNaW47XG4gICAgcmV0dXJuIF9jb25kaXRpb25hbFJldHVybih2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gb3V0TWluICsgKCh2YWx1ZSAtIGluTWluKSAvIGluUmFuZ2UgKiBvdXRSYW5nZSB8fCAwKTtcbiAgICB9KTtcbiAgfSxcbiAgICAgIGludGVycG9sYXRlID0gZnVuY3Rpb24gaW50ZXJwb2xhdGUoc3RhcnQsIGVuZCwgcHJvZ3Jlc3MsIG11dGF0ZSkge1xuICAgIHZhciBmdW5jID0gaXNOYU4oc3RhcnQgKyBlbmQpID8gMCA6IGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gKDEgLSBwKSAqIHN0YXJ0ICsgcCAqIGVuZDtcbiAgICB9O1xuXG4gICAgaWYgKCFmdW5jKSB7XG4gICAgICB2YXIgaXNTdHJpbmcgPSBfaXNTdHJpbmcoc3RhcnQpLFxuICAgICAgICAgIG1hc3RlciA9IHt9LFxuICAgICAgICAgIHAsXG4gICAgICAgICAgaSxcbiAgICAgICAgICBpbnRlcnBvbGF0b3JzLFxuICAgICAgICAgIGwsXG4gICAgICAgICAgaWw7XG5cbiAgICAgIHByb2dyZXNzID09PSB0cnVlICYmIChtdXRhdGUgPSAxKSAmJiAocHJvZ3Jlc3MgPSBudWxsKTtcblxuICAgICAgaWYgKGlzU3RyaW5nKSB7XG4gICAgICAgIHN0YXJ0ID0ge1xuICAgICAgICAgIHA6IHN0YXJ0XG4gICAgICAgIH07XG4gICAgICAgIGVuZCA9IHtcbiAgICAgICAgICBwOiBlbmRcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAoX2lzQXJyYXkoc3RhcnQpICYmICFfaXNBcnJheShlbmQpKSB7XG4gICAgICAgIGludGVycG9sYXRvcnMgPSBbXTtcbiAgICAgICAgbCA9IHN0YXJ0Lmxlbmd0aDtcbiAgICAgICAgaWwgPSBsIC0gMjtcblxuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaW50ZXJwb2xhdG9ycy5wdXNoKGludGVycG9sYXRlKHN0YXJ0W2kgLSAxXSwgc3RhcnRbaV0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGwtLTtcblxuICAgICAgICBmdW5jID0gZnVuY3Rpb24gZnVuYyhwKSB7XG4gICAgICAgICAgcCAqPSBsO1xuICAgICAgICAgIHZhciBpID0gTWF0aC5taW4oaWwsIH5+cCk7XG4gICAgICAgICAgcmV0dXJuIGludGVycG9sYXRvcnNbaV0ocCAtIGkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHByb2dyZXNzID0gZW5kO1xuICAgICAgfSBlbHNlIGlmICghbXV0YXRlKSB7XG4gICAgICAgIHN0YXJ0ID0gX21lcmdlKF9pc0FycmF5KHN0YXJ0KSA/IFtdIDoge30sIHN0YXJ0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpbnRlcnBvbGF0b3JzKSB7XG4gICAgICAgIGZvciAocCBpbiBlbmQpIHtcbiAgICAgICAgICBfYWRkUHJvcFR3ZWVuLmNhbGwobWFzdGVyLCBzdGFydCwgcCwgXCJnZXRcIiwgZW5kW3BdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKHApIHtcbiAgICAgICAgICByZXR1cm4gX3JlbmRlclByb3BUd2VlbnMocCwgbWFzdGVyKSB8fCAoaXNTdHJpbmcgPyBzdGFydC5wIDogc3RhcnQpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfY29uZGl0aW9uYWxSZXR1cm4ocHJvZ3Jlc3MsIGZ1bmMpO1xuICB9LFxuICAgICAgX2dldExhYmVsSW5EaXJlY3Rpb24gPSBmdW5jdGlvbiBfZ2V0TGFiZWxJbkRpcmVjdGlvbih0aW1lbGluZSwgZnJvbVRpbWUsIGJhY2t3YXJkKSB7XG4gICAgdmFyIGxhYmVscyA9IHRpbWVsaW5lLmxhYmVscyxcbiAgICAgICAgbWluID0gX2JpZ051bSxcbiAgICAgICAgcCxcbiAgICAgICAgZGlzdGFuY2UsXG4gICAgICAgIGxhYmVsO1xuXG4gICAgZm9yIChwIGluIGxhYmVscykge1xuICAgICAgZGlzdGFuY2UgPSBsYWJlbHNbcF0gLSBmcm9tVGltZTtcblxuICAgICAgaWYgKGRpc3RhbmNlIDwgMCA9PT0gISFiYWNrd2FyZCAmJiBkaXN0YW5jZSAmJiBtaW4gPiAoZGlzdGFuY2UgPSBNYXRoLmFicyhkaXN0YW5jZSkpKSB7XG4gICAgICAgIGxhYmVsID0gcDtcbiAgICAgICAgbWluID0gZGlzdGFuY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhYmVsO1xuICB9LFxuICAgICAgX2NhbGxiYWNrID0gZnVuY3Rpb24gX2NhbGxiYWNrKGFuaW1hdGlvbiwgdHlwZSwgZXhlY3V0ZUxhenlGaXJzdCkge1xuICAgIHZhciB2ID0gYW5pbWF0aW9uLnZhcnMsXG4gICAgICAgIGNhbGxiYWNrID0gdlt0eXBlXSxcbiAgICAgICAgcHJldkNvbnRleHQgPSBfY29udGV4dCxcbiAgICAgICAgY29udGV4dCA9IGFuaW1hdGlvbi5fY3R4LFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHNjb3BlLFxuICAgICAgICByZXN1bHQ7XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcGFyYW1zID0gdlt0eXBlICsgXCJQYXJhbXNcIl07XG4gICAgc2NvcGUgPSB2LmNhbGxiYWNrU2NvcGUgfHwgYW5pbWF0aW9uO1xuICAgIGV4ZWN1dGVMYXp5Rmlyc3QgJiYgX2xhenlUd2VlbnMubGVuZ3RoICYmIF9sYXp5UmVuZGVyKCk7XG4gICAgY29udGV4dCAmJiAoX2NvbnRleHQgPSBjb250ZXh0KTtcbiAgICByZXN1bHQgPSBwYXJhbXMgPyBjYWxsYmFjay5hcHBseShzY29wZSwgcGFyYW1zKSA6IGNhbGxiYWNrLmNhbGwoc2NvcGUpO1xuICAgIF9jb250ZXh0ID0gcHJldkNvbnRleHQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcbiAgICAgIF9pbnRlcnJ1cHQgPSBmdW5jdGlvbiBfaW50ZXJydXB0KGFuaW1hdGlvbikge1xuICAgIF9yZW1vdmVGcm9tUGFyZW50KGFuaW1hdGlvbik7XG5cbiAgICBhbmltYXRpb24uc2Nyb2xsVHJpZ2dlciAmJiBhbmltYXRpb24uc2Nyb2xsVHJpZ2dlci5raWxsKCEhX3JldmVydGluZyk7XG4gICAgYW5pbWF0aW9uLnByb2dyZXNzKCkgPCAxICYmIF9jYWxsYmFjayhhbmltYXRpb24sIFwib25JbnRlcnJ1cHRcIik7XG4gICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgfSxcbiAgICAgIF9xdWlja1R3ZWVuLFxuICAgICAgX3JlZ2lzdGVyUGx1Z2luUXVldWUgPSBbXSxcbiAgICAgIF9jcmVhdGVQbHVnaW4gPSBmdW5jdGlvbiBfY3JlYXRlUGx1Z2luKGNvbmZpZykge1xuICAgIGlmICghY29uZmlnKSByZXR1cm47XG4gICAgY29uZmlnID0gIWNvbmZpZy5uYW1lICYmIGNvbmZpZ1tcImRlZmF1bHRcIl0gfHwgY29uZmlnO1xuXG4gICAgaWYgKF93aW5kb3dFeGlzdHMoKSB8fCBjb25maWcuaGVhZGxlc3MpIHtcbiAgICAgIHZhciBuYW1lID0gY29uZmlnLm5hbWUsXG4gICAgICAgICAgaXNGdW5jID0gX2lzRnVuY3Rpb24oY29uZmlnKSxcbiAgICAgICAgICBQbHVnaW4gPSBuYW1lICYmICFpc0Z1bmMgJiYgY29uZmlnLmluaXQgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3Byb3BzID0gW107XG4gICAgICB9IDogY29uZmlnLFxuICAgICAgICAgIGluc3RhbmNlRGVmYXVsdHMgPSB7XG4gICAgICAgIGluaXQ6IF9lbXB0eUZ1bmMsXG4gICAgICAgIHJlbmRlcjogX3JlbmRlclByb3BUd2VlbnMsXG4gICAgICAgIGFkZDogX2FkZFByb3BUd2VlbixcbiAgICAgICAga2lsbDogX2tpbGxQcm9wVHdlZW5zT2YsXG4gICAgICAgIG1vZGlmaWVyOiBfYWRkUGx1Z2luTW9kaWZpZXIsXG4gICAgICAgIHJhd1ZhcnM6IDBcbiAgICAgIH0sXG4gICAgICAgICAgc3RhdGljcyA9IHtcbiAgICAgICAgdGFyZ2V0VGVzdDogMCxcbiAgICAgICAgZ2V0OiAwLFxuICAgICAgICBnZXRTZXR0ZXI6IF9nZXRTZXR0ZXIsXG4gICAgICAgIGFsaWFzZXM6IHt9LFxuICAgICAgICByZWdpc3RlcjogMFxuICAgICAgfTtcblxuICAgICAgX3dha2UoKTtcblxuICAgICAgaWYgKGNvbmZpZyAhPT0gUGx1Z2luKSB7XG4gICAgICAgIGlmIChfcGx1Z2luc1tuYW1lXSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIF9zZXREZWZhdWx0cyhQbHVnaW4sIF9zZXREZWZhdWx0cyhfY29weUV4Y2x1ZGluZyhjb25maWcsIGluc3RhbmNlRGVmYXVsdHMpLCBzdGF0aWNzKSk7XG5cbiAgICAgICAgX21lcmdlKFBsdWdpbi5wcm90b3R5cGUsIF9tZXJnZShpbnN0YW5jZURlZmF1bHRzLCBfY29weUV4Y2x1ZGluZyhjb25maWcsIHN0YXRpY3MpKSk7XG5cbiAgICAgICAgX3BsdWdpbnNbUGx1Z2luLnByb3AgPSBuYW1lXSA9IFBsdWdpbjtcblxuICAgICAgICBpZiAoY29uZmlnLnRhcmdldFRlc3QpIHtcbiAgICAgICAgICBfaGFybmVzc1BsdWdpbnMucHVzaChQbHVnaW4pO1xuXG4gICAgICAgICAgX3Jlc2VydmVkUHJvcHNbbmFtZV0gPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgbmFtZSA9IChuYW1lID09PSBcImNzc1wiID8gXCJDU1NcIiA6IG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnN1YnN0cigxKSkgKyBcIlBsdWdpblwiO1xuICAgICAgfVxuXG4gICAgICBfYWRkR2xvYmFsKG5hbWUsIFBsdWdpbik7XG5cbiAgICAgIGNvbmZpZy5yZWdpc3RlciAmJiBjb25maWcucmVnaXN0ZXIoZ3NhcCwgUGx1Z2luLCBQcm9wVHdlZW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcmVnaXN0ZXJQbHVnaW5RdWV1ZS5wdXNoKGNvbmZpZyk7XG4gICAgfVxuICB9LFxuICAgICAgXzI1NSA9IDI1NSxcbiAgICAgIF9jb2xvckxvb2t1cCA9IHtcbiAgICBhcXVhOiBbMCwgXzI1NSwgXzI1NV0sXG4gICAgbGltZTogWzAsIF8yNTUsIDBdLFxuICAgIHNpbHZlcjogWzE5MiwgMTkyLCAxOTJdLFxuICAgIGJsYWNrOiBbMCwgMCwgMF0sXG4gICAgbWFyb29uOiBbMTI4LCAwLCAwXSxcbiAgICB0ZWFsOiBbMCwgMTI4LCAxMjhdLFxuICAgIGJsdWU6IFswLCAwLCBfMjU1XSxcbiAgICBuYXZ5OiBbMCwgMCwgMTI4XSxcbiAgICB3aGl0ZTogW18yNTUsIF8yNTUsIF8yNTVdLFxuICAgIG9saXZlOiBbMTI4LCAxMjgsIDBdLFxuICAgIHllbGxvdzogW18yNTUsIF8yNTUsIDBdLFxuICAgIG9yYW5nZTogW18yNTUsIDE2NSwgMF0sXG4gICAgZ3JheTogWzEyOCwgMTI4LCAxMjhdLFxuICAgIHB1cnBsZTogWzEyOCwgMCwgMTI4XSxcbiAgICBncmVlbjogWzAsIDEyOCwgMF0sXG4gICAgcmVkOiBbXzI1NSwgMCwgMF0sXG4gICAgcGluazogW18yNTUsIDE5MiwgMjAzXSxcbiAgICBjeWFuOiBbMCwgXzI1NSwgXzI1NV0sXG4gICAgdHJhbnNwYXJlbnQ6IFtfMjU1LCBfMjU1LCBfMjU1LCAwXVxuICB9LFxuICAgICAgX2h1ZSA9IGZ1bmN0aW9uIF9odWUoaCwgbTEsIG0yKSB7XG4gICAgaCArPSBoIDwgMCA/IDEgOiBoID4gMSA/IC0xIDogMDtcbiAgICByZXR1cm4gKGggKiA2IDwgMSA/IG0xICsgKG0yIC0gbTEpICogaCAqIDYgOiBoIDwgLjUgPyBtMiA6IGggKiAzIDwgMiA/IG0xICsgKG0yIC0gbTEpICogKDIgLyAzIC0gaCkgKiA2IDogbTEpICogXzI1NSArIC41IHwgMDtcbiAgfSxcbiAgICAgIHNwbGl0Q29sb3IgPSBmdW5jdGlvbiBzcGxpdENvbG9yKHYsIHRvSFNMLCBmb3JjZUFscGhhKSB7XG4gICAgdmFyIGEgPSAhdiA/IF9jb2xvckxvb2t1cC5ibGFjayA6IF9pc051bWJlcih2KSA/IFt2ID4+IDE2LCB2ID4+IDggJiBfMjU1LCB2ICYgXzI1NV0gOiAwLFxuICAgICAgICByLFxuICAgICAgICBnLFxuICAgICAgICBiLFxuICAgICAgICBoLFxuICAgICAgICBzLFxuICAgICAgICBsLFxuICAgICAgICBtYXgsXG4gICAgICAgIG1pbixcbiAgICAgICAgZCxcbiAgICAgICAgd2FzSFNMO1xuXG4gICAgaWYgKCFhKSB7XG4gICAgICBpZiAodi5zdWJzdHIoLTEpID09PSBcIixcIikge1xuICAgICAgICB2ID0gdi5zdWJzdHIoMCwgdi5sZW5ndGggLSAxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9jb2xvckxvb2t1cFt2XSkge1xuICAgICAgICBhID0gX2NvbG9yTG9va3VwW3ZdO1xuICAgICAgfSBlbHNlIGlmICh2LmNoYXJBdCgwKSA9PT0gXCIjXCIpIHtcbiAgICAgICAgaWYgKHYubGVuZ3RoIDwgNikge1xuICAgICAgICAgIHIgPSB2LmNoYXJBdCgxKTtcbiAgICAgICAgICBnID0gdi5jaGFyQXQoMik7XG4gICAgICAgICAgYiA9IHYuY2hhckF0KDMpO1xuICAgICAgICAgIHYgPSBcIiNcIiArIHIgKyByICsgZyArIGcgKyBiICsgYiArICh2Lmxlbmd0aCA9PT0gNSA/IHYuY2hhckF0KDQpICsgdi5jaGFyQXQoNCkgOiBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2Lmxlbmd0aCA9PT0gOSkge1xuICAgICAgICAgIGEgPSBwYXJzZUludCh2LnN1YnN0cigxLCA2KSwgMTYpO1xuICAgICAgICAgIHJldHVybiBbYSA+PiAxNiwgYSA+PiA4ICYgXzI1NSwgYSAmIF8yNTUsIHBhcnNlSW50KHYuc3Vic3RyKDcpLCAxNikgLyAyNTVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdiA9IHBhcnNlSW50KHYuc3Vic3RyKDEpLCAxNik7XG4gICAgICAgIGEgPSBbdiA+PiAxNiwgdiA+PiA4ICYgXzI1NSwgdiAmIF8yNTVdO1xuICAgICAgfSBlbHNlIGlmICh2LnN1YnN0cigwLCAzKSA9PT0gXCJoc2xcIikge1xuICAgICAgICBhID0gd2FzSFNMID0gdi5tYXRjaChfc3RyaWN0TnVtRXhwKTtcblxuICAgICAgICBpZiAoIXRvSFNMKSB7XG4gICAgICAgICAgaCA9ICthWzBdICUgMzYwIC8gMzYwO1xuICAgICAgICAgIHMgPSArYVsxXSAvIDEwMDtcbiAgICAgICAgICBsID0gK2FbMl0gLyAxMDA7XG4gICAgICAgICAgZyA9IGwgPD0gLjUgPyBsICogKHMgKyAxKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgICAgICAgciA9IGwgKiAyIC0gZztcbiAgICAgICAgICBhLmxlbmd0aCA+IDMgJiYgKGFbM10gKj0gMSk7XG4gICAgICAgICAgYVswXSA9IF9odWUoaCArIDEgLyAzLCByLCBnKTtcbiAgICAgICAgICBhWzFdID0gX2h1ZShoLCByLCBnKTtcbiAgICAgICAgICBhWzJdID0gX2h1ZShoIC0gMSAvIDMsIHIsIGcpO1xuICAgICAgICB9IGVsc2UgaWYgKH52LmluZGV4T2YoXCI9XCIpKSB7XG4gICAgICAgICAgYSA9IHYubWF0Y2goX251bUV4cCk7XG4gICAgICAgICAgZm9yY2VBbHBoYSAmJiBhLmxlbmd0aCA8IDQgJiYgKGFbM10gPSAxKTtcbiAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYSA9IHYubWF0Y2goX3N0cmljdE51bUV4cCkgfHwgX2NvbG9yTG9va3VwLnRyYW5zcGFyZW50O1xuICAgICAgfVxuXG4gICAgICBhID0gYS5tYXAoTnVtYmVyKTtcbiAgICB9XG5cbiAgICBpZiAodG9IU0wgJiYgIXdhc0hTTCkge1xuICAgICAgciA9IGFbMF0gLyBfMjU1O1xuICAgICAgZyA9IGFbMV0gLyBfMjU1O1xuICAgICAgYiA9IGFbMl0gLyBfMjU1O1xuICAgICAgbWF4ID0gTWF0aC5tYXgociwgZywgYik7XG4gICAgICBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcbiAgICAgIGwgPSAobWF4ICsgbWluKSAvIDI7XG5cbiAgICAgIGlmIChtYXggPT09IG1pbikge1xuICAgICAgICBoID0gcyA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkID0gbWF4IC0gbWluO1xuICAgICAgICBzID0gbCA+IDAuNSA/IGQgLyAoMiAtIG1heCAtIG1pbikgOiBkIC8gKG1heCArIG1pbik7XG4gICAgICAgIGggPSBtYXggPT09IHIgPyAoZyAtIGIpIC8gZCArIChnIDwgYiA/IDYgOiAwKSA6IG1heCA9PT0gZyA/IChiIC0gcikgLyBkICsgMiA6IChyIC0gZykgLyBkICsgNDtcbiAgICAgICAgaCAqPSA2MDtcbiAgICAgIH1cblxuICAgICAgYVswXSA9IH5+KGggKyAuNSk7XG4gICAgICBhWzFdID0gfn4ocyAqIDEwMCArIC41KTtcbiAgICAgIGFbMl0gPSB+fihsICogMTAwICsgLjUpO1xuICAgIH1cblxuICAgIGZvcmNlQWxwaGEgJiYgYS5sZW5ndGggPCA0ICYmIChhWzNdID0gMSk7XG4gICAgcmV0dXJuIGE7XG4gIH0sXG4gICAgICBfY29sb3JPcmRlckRhdGEgPSBmdW5jdGlvbiBfY29sb3JPcmRlckRhdGEodikge1xuICAgIHZhciB2YWx1ZXMgPSBbXSxcbiAgICAgICAgYyA9IFtdLFxuICAgICAgICBpID0gLTE7XG4gICAgdi5zcGxpdChfY29sb3JFeHApLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgIHZhciBhID0gdi5tYXRjaChfbnVtV2l0aFVuaXRFeHApIHx8IFtdO1xuICAgICAgdmFsdWVzLnB1c2guYXBwbHkodmFsdWVzLCBhKTtcbiAgICAgIGMucHVzaChpICs9IGEubGVuZ3RoICsgMSk7XG4gICAgfSk7XG4gICAgdmFsdWVzLmMgPSBjO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0sXG4gICAgICBfZm9ybWF0Q29sb3JzID0gZnVuY3Rpb24gX2Zvcm1hdENvbG9ycyhzLCB0b0hTTCwgb3JkZXJNYXRjaERhdGEpIHtcbiAgICB2YXIgcmVzdWx0ID0gXCJcIixcbiAgICAgICAgY29sb3JzID0gKHMgKyByZXN1bHQpLm1hdGNoKF9jb2xvckV4cCksXG4gICAgICAgIHR5cGUgPSB0b0hTTCA/IFwiaHNsYShcIiA6IFwicmdiYShcIixcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGMsXG4gICAgICAgIHNoZWxsLFxuICAgICAgICBkLFxuICAgICAgICBsO1xuXG4gICAgaWYgKCFjb2xvcnMpIHtcbiAgICAgIHJldHVybiBzO1xuICAgIH1cblxuICAgIGNvbG9ycyA9IGNvbG9ycy5tYXAoZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICByZXR1cm4gKGNvbG9yID0gc3BsaXRDb2xvcihjb2xvciwgdG9IU0wsIDEpKSAmJiB0eXBlICsgKHRvSFNMID8gY29sb3JbMF0gKyBcIixcIiArIGNvbG9yWzFdICsgXCIlLFwiICsgY29sb3JbMl0gKyBcIiUsXCIgKyBjb2xvclszXSA6IGNvbG9yLmpvaW4oXCIsXCIpKSArIFwiKVwiO1xuICAgIH0pO1xuXG4gICAgaWYgKG9yZGVyTWF0Y2hEYXRhKSB7XG4gICAgICBkID0gX2NvbG9yT3JkZXJEYXRhKHMpO1xuICAgICAgYyA9IG9yZGVyTWF0Y2hEYXRhLmM7XG5cbiAgICAgIGlmIChjLmpvaW4ocmVzdWx0KSAhPT0gZC5jLmpvaW4ocmVzdWx0KSkge1xuICAgICAgICBzaGVsbCA9IHMucmVwbGFjZShfY29sb3JFeHAsIFwiMVwiKS5zcGxpdChfbnVtV2l0aFVuaXRFeHApO1xuICAgICAgICBsID0gc2hlbGwubGVuZ3RoIC0gMTtcblxuICAgICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHJlc3VsdCArPSBzaGVsbFtpXSArICh+Yy5pbmRleE9mKGkpID8gY29sb3JzLnNoaWZ0KCkgfHwgdHlwZSArIFwiMCwwLDAsMClcIiA6IChkLmxlbmd0aCA/IGQgOiBjb2xvcnMubGVuZ3RoID8gY29sb3JzIDogb3JkZXJNYXRjaERhdGEpLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFzaGVsbCkge1xuICAgICAgc2hlbGwgPSBzLnNwbGl0KF9jb2xvckV4cCk7XG4gICAgICBsID0gc2hlbGwubGVuZ3RoIC0gMTtcblxuICAgICAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcmVzdWx0ICs9IHNoZWxsW2ldICsgY29sb3JzW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQgKyBzaGVsbFtsXTtcbiAgfSxcbiAgICAgIF9jb2xvckV4cCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcyA9IFwiKD86XFxcXGIoPzooPzpyZ2J8cmdiYXxoc2x8aHNsYSlcXFxcKC4rP1xcXFwpKXxcXFxcQiMoPzpbMC05YS1mXXszLDR9KXsxLDJ9XFxcXGJcIixcbiAgICAgICAgcDtcblxuICAgIGZvciAocCBpbiBfY29sb3JMb29rdXApIHtcbiAgICAgIHMgKz0gXCJ8XCIgKyBwICsgXCJcXFxcYlwiO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVnRXhwKHMgKyBcIilcIiwgXCJnaVwiKTtcbiAgfSgpLFxuICAgICAgX2hzbEV4cCA9IC9oc2xbYV0/XFwoLyxcbiAgICAgIF9jb2xvclN0cmluZ0ZpbHRlciA9IGZ1bmN0aW9uIF9jb2xvclN0cmluZ0ZpbHRlcihhKSB7XG4gICAgdmFyIGNvbWJpbmVkID0gYS5qb2luKFwiIFwiKSxcbiAgICAgICAgdG9IU0w7XG4gICAgX2NvbG9yRXhwLmxhc3RJbmRleCA9IDA7XG5cbiAgICBpZiAoX2NvbG9yRXhwLnRlc3QoY29tYmluZWQpKSB7XG4gICAgICB0b0hTTCA9IF9oc2xFeHAudGVzdChjb21iaW5lZCk7XG4gICAgICBhWzFdID0gX2Zvcm1hdENvbG9ycyhhWzFdLCB0b0hTTCk7XG4gICAgICBhWzBdID0gX2Zvcm1hdENvbG9ycyhhWzBdLCB0b0hTTCwgX2NvbG9yT3JkZXJEYXRhKGFbMV0pKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSxcbiAgICAgIF90aWNrZXJBY3RpdmUsXG4gICAgICBfdGlja2VyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0VGltZSA9IERhdGUubm93LFxuICAgICAgICBfbGFnVGhyZXNob2xkID0gNTAwLFxuICAgICAgICBfYWRqdXN0ZWRMYWcgPSAzMyxcbiAgICAgICAgX3N0YXJ0VGltZSA9IF9nZXRUaW1lKCksXG4gICAgICAgIF9sYXN0VXBkYXRlID0gX3N0YXJ0VGltZSxcbiAgICAgICAgX2dhcCA9IDEwMDAgLyAyNDAsXG4gICAgICAgIF9uZXh0VGltZSA9IF9nYXAsXG4gICAgICAgIF9saXN0ZW5lcnMgPSBbXSxcbiAgICAgICAgX2lkLFxuICAgICAgICBfcmVxLFxuICAgICAgICBfcmFmLFxuICAgICAgICBfc2VsZixcbiAgICAgICAgX2RlbHRhLFxuICAgICAgICBfaSxcbiAgICAgICAgX3RpY2sgPSBmdW5jdGlvbiBfdGljayh2KSB7XG4gICAgICB2YXIgZWxhcHNlZCA9IF9nZXRUaW1lKCkgLSBfbGFzdFVwZGF0ZSxcbiAgICAgICAgICBtYW51YWwgPSB2ID09PSB0cnVlLFxuICAgICAgICAgIG92ZXJsYXAsXG4gICAgICAgICAgZGlzcGF0Y2gsXG4gICAgICAgICAgdGltZSxcbiAgICAgICAgICBmcmFtZTtcblxuICAgICAgKGVsYXBzZWQgPiBfbGFnVGhyZXNob2xkIHx8IGVsYXBzZWQgPCAwKSAmJiAoX3N0YXJ0VGltZSArPSBlbGFwc2VkIC0gX2FkanVzdGVkTGFnKTtcbiAgICAgIF9sYXN0VXBkYXRlICs9IGVsYXBzZWQ7XG4gICAgICB0aW1lID0gX2xhc3RVcGRhdGUgLSBfc3RhcnRUaW1lO1xuICAgICAgb3ZlcmxhcCA9IHRpbWUgLSBfbmV4dFRpbWU7XG5cbiAgICAgIGlmIChvdmVybGFwID4gMCB8fCBtYW51YWwpIHtcbiAgICAgICAgZnJhbWUgPSArK19zZWxmLmZyYW1lO1xuICAgICAgICBfZGVsdGEgPSB0aW1lIC0gX3NlbGYudGltZSAqIDEwMDA7XG4gICAgICAgIF9zZWxmLnRpbWUgPSB0aW1lID0gdGltZSAvIDEwMDA7XG4gICAgICAgIF9uZXh0VGltZSArPSBvdmVybGFwICsgKG92ZXJsYXAgPj0gX2dhcCA/IDQgOiBfZ2FwIC0gb3ZlcmxhcCk7XG4gICAgICAgIGRpc3BhdGNoID0gMTtcbiAgICAgIH1cblxuICAgICAgbWFudWFsIHx8IChfaWQgPSBfcmVxKF90aWNrKSk7XG5cbiAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICBmb3IgKF9pID0gMDsgX2kgPCBfbGlzdGVuZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIF9saXN0ZW5lcnNbX2ldKHRpbWUsIF9kZWx0YSwgZnJhbWUsIHYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9zZWxmID0ge1xuICAgICAgdGltZTogMCxcbiAgICAgIGZyYW1lOiAwLFxuICAgICAgdGljazogZnVuY3Rpb24gdGljaygpIHtcbiAgICAgICAgX3RpY2sodHJ1ZSk7XG4gICAgICB9LFxuICAgICAgZGVsdGFSYXRpbzogZnVuY3Rpb24gZGVsdGFSYXRpbyhmcHMpIHtcbiAgICAgICAgcmV0dXJuIF9kZWx0YSAvICgxMDAwIC8gKGZwcyB8fCA2MCkpO1xuICAgICAgfSxcbiAgICAgIHdha2U6IGZ1bmN0aW9uIHdha2UoKSB7XG4gICAgICAgIGlmIChfY29yZVJlYWR5KSB7XG4gICAgICAgICAgaWYgKCFfY29yZUluaXR0ZWQgJiYgX3dpbmRvd0V4aXN0cygpKSB7XG4gICAgICAgICAgICBfd2luID0gX2NvcmVJbml0dGVkID0gd2luZG93O1xuICAgICAgICAgICAgX2RvYyA9IF93aW4uZG9jdW1lbnQgfHwge307XG4gICAgICAgICAgICBfZ2xvYmFscy5nc2FwID0gZ3NhcDtcbiAgICAgICAgICAgIChfd2luLmdzYXBWZXJzaW9ucyB8fCAoX3dpbi5nc2FwVmVyc2lvbnMgPSBbXSkpLnB1c2goZ3NhcC52ZXJzaW9uKTtcblxuICAgICAgICAgICAgX2luc3RhbGwoX2luc3RhbGxTY29wZSB8fCBfd2luLkdyZWVuU29ja0dsb2JhbHMgfHwgIV93aW4uZ3NhcCAmJiBfd2luIHx8IHt9KTtcblxuICAgICAgICAgICAgX3JlZ2lzdGVyUGx1Z2luUXVldWUuZm9yRWFjaChfY3JlYXRlUGx1Z2luKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfcmFmID0gdHlwZW9mIHJlcXVlc3RBbmltYXRpb25GcmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgICAgICAgX2lkICYmIF9zZWxmLnNsZWVwKCk7XG5cbiAgICAgICAgICBfcmVxID0gX3JhZiB8fCBmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZiwgX25leHRUaW1lIC0gX3NlbGYudGltZSAqIDEwMDAgKyAxIHwgMCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIF90aWNrZXJBY3RpdmUgPSAxO1xuXG4gICAgICAgICAgX3RpY2soMik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzbGVlcDogZnVuY3Rpb24gc2xlZXAoKSB7XG4gICAgICAgIChfcmFmID8gY2FuY2VsQW5pbWF0aW9uRnJhbWUgOiBjbGVhclRpbWVvdXQpKF9pZCk7XG4gICAgICAgIF90aWNrZXJBY3RpdmUgPSAwO1xuICAgICAgICBfcmVxID0gX2VtcHR5RnVuYztcbiAgICAgIH0sXG4gICAgICBsYWdTbW9vdGhpbmc6IGZ1bmN0aW9uIGxhZ1Ntb290aGluZyh0aHJlc2hvbGQsIGFkanVzdGVkTGFnKSB7XG4gICAgICAgIF9sYWdUaHJlc2hvbGQgPSB0aHJlc2hvbGQgfHwgSW5maW5pdHk7XG4gICAgICAgIF9hZGp1c3RlZExhZyA9IE1hdGgubWluKGFkanVzdGVkTGFnIHx8IDMzLCBfbGFnVGhyZXNob2xkKTtcbiAgICAgIH0sXG4gICAgICBmcHM6IGZ1bmN0aW9uIGZwcyhfZnBzKSB7XG4gICAgICAgIF9nYXAgPSAxMDAwIC8gKF9mcHMgfHwgMjQwKTtcbiAgICAgICAgX25leHRUaW1lID0gX3NlbGYudGltZSAqIDEwMDAgKyBfZ2FwO1xuICAgICAgfSxcbiAgICAgIGFkZDogZnVuY3Rpb24gYWRkKGNhbGxiYWNrLCBvbmNlLCBwcmlvcml0aXplKSB7XG4gICAgICAgIHZhciBmdW5jID0gb25jZSA/IGZ1bmN0aW9uICh0LCBkLCBmLCB2KSB7XG4gICAgICAgICAgY2FsbGJhY2sodCwgZCwgZiwgdik7XG5cbiAgICAgICAgICBfc2VsZi5yZW1vdmUoZnVuYyk7XG4gICAgICAgIH0gOiBjYWxsYmFjaztcblxuICAgICAgICBfc2VsZi5yZW1vdmUoY2FsbGJhY2spO1xuXG4gICAgICAgIF9saXN0ZW5lcnNbcHJpb3JpdGl6ZSA/IFwidW5zaGlmdFwiIDogXCJwdXNoXCJdKGZ1bmMpO1xuXG4gICAgICAgIF93YWtlKCk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2FsbGJhY2ssIGkpIHtcbiAgICAgICAgfihpID0gX2xpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKSkgJiYgX2xpc3RlbmVycy5zcGxpY2UoaSwgMSkgJiYgX2kgPj0gaSAmJiBfaS0tO1xuICAgICAgfSxcbiAgICAgIF9saXN0ZW5lcnM6IF9saXN0ZW5lcnNcbiAgICB9O1xuICAgIHJldHVybiBfc2VsZjtcbiAgfSgpLFxuICAgICAgX3dha2UgPSBmdW5jdGlvbiBfd2FrZSgpIHtcbiAgICByZXR1cm4gIV90aWNrZXJBY3RpdmUgJiYgX3RpY2tlci53YWtlKCk7XG4gIH0sXG4gICAgICBfZWFzZU1hcCA9IHt9LFxuICAgICAgX2N1c3RvbUVhc2VFeHAgPSAvXltcXGQuXFwtTV1bXFxkLlxcLSxcXHNdLyxcbiAgICAgIF9xdW90ZXNFeHAgPSAvW1wiJ10vZyxcbiAgICAgIF9wYXJzZU9iamVjdEluU3RyaW5nID0gZnVuY3Rpb24gX3BhcnNlT2JqZWN0SW5TdHJpbmcodmFsdWUpIHtcbiAgICB2YXIgb2JqID0ge30sXG4gICAgICAgIHNwbGl0ID0gdmFsdWUuc3Vic3RyKDEsIHZhbHVlLmxlbmd0aCAtIDMpLnNwbGl0KFwiOlwiKSxcbiAgICAgICAga2V5ID0gc3BsaXRbMF0sXG4gICAgICAgIGkgPSAxLFxuICAgICAgICBsID0gc3BsaXQubGVuZ3RoLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgdmFsLFxuICAgICAgICBwYXJzZWRWYWw7XG5cbiAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFsID0gc3BsaXRbaV07XG4gICAgICBpbmRleCA9IGkgIT09IGwgLSAxID8gdmFsLmxhc3RJbmRleE9mKFwiLFwiKSA6IHZhbC5sZW5ndGg7XG4gICAgICBwYXJzZWRWYWwgPSB2YWwuc3Vic3RyKDAsIGluZGV4KTtcbiAgICAgIG9ialtrZXldID0gaXNOYU4ocGFyc2VkVmFsKSA/IHBhcnNlZFZhbC5yZXBsYWNlKF9xdW90ZXNFeHAsIFwiXCIpLnRyaW0oKSA6ICtwYXJzZWRWYWw7XG4gICAgICBrZXkgPSB2YWwuc3Vic3RyKGluZGV4ICsgMSkudHJpbSgpO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH0sXG4gICAgICBfdmFsdWVJblBhcmVudGhlc2VzID0gZnVuY3Rpb24gX3ZhbHVlSW5QYXJlbnRoZXNlcyh2YWx1ZSkge1xuICAgIHZhciBvcGVuID0gdmFsdWUuaW5kZXhPZihcIihcIikgKyAxLFxuICAgICAgICBjbG9zZSA9IHZhbHVlLmluZGV4T2YoXCIpXCIpLFxuICAgICAgICBuZXN0ZWQgPSB2YWx1ZS5pbmRleE9mKFwiKFwiLCBvcGVuKTtcbiAgICByZXR1cm4gdmFsdWUuc3Vic3RyaW5nKG9wZW4sIH5uZXN0ZWQgJiYgbmVzdGVkIDwgY2xvc2UgPyB2YWx1ZS5pbmRleE9mKFwiKVwiLCBjbG9zZSArIDEpIDogY2xvc2UpO1xuICB9LFxuICAgICAgX2NvbmZpZ0Vhc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gX2NvbmZpZ0Vhc2VGcm9tU3RyaW5nKG5hbWUpIHtcbiAgICB2YXIgc3BsaXQgPSAobmFtZSArIFwiXCIpLnNwbGl0KFwiKFwiKSxcbiAgICAgICAgZWFzZSA9IF9lYXNlTWFwW3NwbGl0WzBdXTtcbiAgICByZXR1cm4gZWFzZSAmJiBzcGxpdC5sZW5ndGggPiAxICYmIGVhc2UuY29uZmlnID8gZWFzZS5jb25maWcuYXBwbHkobnVsbCwgfm5hbWUuaW5kZXhPZihcIntcIikgPyBbX3BhcnNlT2JqZWN0SW5TdHJpbmcoc3BsaXRbMV0pXSA6IF92YWx1ZUluUGFyZW50aGVzZXMobmFtZSkuc3BsaXQoXCIsXCIpLm1hcChfbnVtZXJpY0lmUG9zc2libGUpKSA6IF9lYXNlTWFwLl9DRSAmJiBfY3VzdG9tRWFzZUV4cC50ZXN0KG5hbWUpID8gX2Vhc2VNYXAuX0NFKFwiXCIsIG5hbWUpIDogZWFzZTtcbiAgfSxcbiAgICAgIF9pbnZlcnRFYXNlID0gZnVuY3Rpb24gX2ludmVydEVhc2UoZWFzZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIDEgLSBlYXNlKDEgLSBwKTtcbiAgICB9O1xuICB9LFxuICAgICAgX3Byb3BhZ2F0ZVlveW9FYXNlID0gZnVuY3Rpb24gX3Byb3BhZ2F0ZVlveW9FYXNlKHRpbWVsaW5lLCBpc1lveW8pIHtcbiAgICB2YXIgY2hpbGQgPSB0aW1lbGluZS5fZmlyc3QsXG4gICAgICAgIGVhc2U7XG5cbiAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRpbWVsaW5lKSB7XG4gICAgICAgIF9wcm9wYWdhdGVZb3lvRWFzZShjaGlsZCwgaXNZb3lvKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGQudmFycy55b3lvRWFzZSAmJiAoIWNoaWxkLl95b3lvIHx8ICFjaGlsZC5fcmVwZWF0KSAmJiBjaGlsZC5feW95byAhPT0gaXNZb3lvKSB7XG4gICAgICAgIGlmIChjaGlsZC50aW1lbGluZSkge1xuICAgICAgICAgIF9wcm9wYWdhdGVZb3lvRWFzZShjaGlsZC50aW1lbGluZSwgaXNZb3lvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlYXNlID0gY2hpbGQuX2Vhc2U7XG4gICAgICAgICAgY2hpbGQuX2Vhc2UgPSBjaGlsZC5feUVhc2U7XG4gICAgICAgICAgY2hpbGQuX3lFYXNlID0gZWFzZTtcbiAgICAgICAgICBjaGlsZC5feW95byA9IGlzWW95bztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjaGlsZCA9IGNoaWxkLl9uZXh0O1xuICAgIH1cbiAgfSxcbiAgICAgIF9wYXJzZUVhc2UgPSBmdW5jdGlvbiBfcGFyc2VFYXNlKGVhc2UsIGRlZmF1bHRFYXNlKSB7XG4gICAgcmV0dXJuICFlYXNlID8gZGVmYXVsdEVhc2UgOiAoX2lzRnVuY3Rpb24oZWFzZSkgPyBlYXNlIDogX2Vhc2VNYXBbZWFzZV0gfHwgX2NvbmZpZ0Vhc2VGcm9tU3RyaW5nKGVhc2UpKSB8fCBkZWZhdWx0RWFzZTtcbiAgfSxcbiAgICAgIF9pbnNlcnRFYXNlID0gZnVuY3Rpb24gX2luc2VydEVhc2UobmFtZXMsIGVhc2VJbiwgZWFzZU91dCwgZWFzZUluT3V0KSB7XG4gICAgaWYgKGVhc2VPdXQgPT09IHZvaWQgMCkge1xuICAgICAgZWFzZU91dCA9IGZ1bmN0aW9uIGVhc2VPdXQocCkge1xuICAgICAgICByZXR1cm4gMSAtIGVhc2VJbigxIC0gcCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChlYXNlSW5PdXQgPT09IHZvaWQgMCkge1xuICAgICAgZWFzZUluT3V0ID0gZnVuY3Rpb24gZWFzZUluT3V0KHApIHtcbiAgICAgICAgcmV0dXJuIHAgPCAuNSA/IGVhc2VJbihwICogMikgLyAyIDogMSAtIGVhc2VJbigoMSAtIHApICogMikgLyAyO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZWFzZSA9IHtcbiAgICAgIGVhc2VJbjogZWFzZUluLFxuICAgICAgZWFzZU91dDogZWFzZU91dCxcbiAgICAgIGVhc2VJbk91dDogZWFzZUluT3V0XG4gICAgfSxcbiAgICAgICAgbG93ZXJjYXNlTmFtZTtcblxuICAgIF9mb3JFYWNoTmFtZShuYW1lcywgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIF9lYXNlTWFwW25hbWVdID0gX2dsb2JhbHNbbmFtZV0gPSBlYXNlO1xuICAgICAgX2Vhc2VNYXBbbG93ZXJjYXNlTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKV0gPSBlYXNlT3V0O1xuXG4gICAgICBmb3IgKHZhciBwIGluIGVhc2UpIHtcbiAgICAgICAgX2Vhc2VNYXBbbG93ZXJjYXNlTmFtZSArIChwID09PSBcImVhc2VJblwiID8gXCIuaW5cIiA6IHAgPT09IFwiZWFzZU91dFwiID8gXCIub3V0XCIgOiBcIi5pbk91dFwiKV0gPSBfZWFzZU1hcFtuYW1lICsgXCIuXCIgKyBwXSA9IGVhc2VbcF07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZWFzZTtcbiAgfSxcbiAgICAgIF9lYXNlSW5PdXRGcm9tT3V0ID0gZnVuY3Rpb24gX2Vhc2VJbk91dEZyb21PdXQoZWFzZU91dCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIHAgPCAuNSA/ICgxIC0gZWFzZU91dCgxIC0gcCAqIDIpKSAvIDIgOiAuNSArIGVhc2VPdXQoKHAgLSAuNSkgKiAyKSAvIDI7XG4gICAgfTtcbiAgfSxcbiAgICAgIF9jb25maWdFbGFzdGljID0gZnVuY3Rpb24gX2NvbmZpZ0VsYXN0aWModHlwZSwgYW1wbGl0dWRlLCBwZXJpb2QpIHtcbiAgICB2YXIgcDEgPSBhbXBsaXR1ZGUgPj0gMSA/IGFtcGxpdHVkZSA6IDEsXG4gICAgICAgIHAyID0gKHBlcmlvZCB8fCAodHlwZSA/IC4zIDogLjQ1KSkgLyAoYW1wbGl0dWRlIDwgMSA/IGFtcGxpdHVkZSA6IDEpLFxuICAgICAgICBwMyA9IHAyIC8gXzJQSSAqIChNYXRoLmFzaW4oMSAvIHAxKSB8fCAwKSxcbiAgICAgICAgZWFzZU91dCA9IGZ1bmN0aW9uIGVhc2VPdXQocCkge1xuICAgICAgcmV0dXJuIHAgPT09IDEgPyAxIDogcDEgKiBNYXRoLnBvdygyLCAtMTAgKiBwKSAqIF9zaW4oKHAgLSBwMykgKiBwMikgKyAxO1xuICAgIH0sXG4gICAgICAgIGVhc2UgPSB0eXBlID09PSBcIm91dFwiID8gZWFzZU91dCA6IHR5cGUgPT09IFwiaW5cIiA/IGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gMSAtIGVhc2VPdXQoMSAtIHApO1xuICAgIH0gOiBfZWFzZUluT3V0RnJvbU91dChlYXNlT3V0KTtcblxuICAgIHAyID0gXzJQSSAvIHAyO1xuXG4gICAgZWFzZS5jb25maWcgPSBmdW5jdGlvbiAoYW1wbGl0dWRlLCBwZXJpb2QpIHtcbiAgICAgIHJldHVybiBfY29uZmlnRWxhc3RpYyh0eXBlLCBhbXBsaXR1ZGUsIHBlcmlvZCk7XG4gICAgfTtcblxuICAgIHJldHVybiBlYXNlO1xuICB9LFxuICAgICAgX2NvbmZpZ0JhY2sgPSBmdW5jdGlvbiBfY29uZmlnQmFjayh0eXBlLCBvdmVyc2hvb3QpIHtcbiAgICBpZiAob3ZlcnNob290ID09PSB2b2lkIDApIHtcbiAgICAgIG92ZXJzaG9vdCA9IDEuNzAxNTg7XG4gICAgfVxuXG4gICAgdmFyIGVhc2VPdXQgPSBmdW5jdGlvbiBlYXNlT3V0KHApIHtcbiAgICAgIHJldHVybiBwID8gLS1wICogcCAqICgob3ZlcnNob290ICsgMSkgKiBwICsgb3ZlcnNob290KSArIDEgOiAwO1xuICAgIH0sXG4gICAgICAgIGVhc2UgPSB0eXBlID09PSBcIm91dFwiID8gZWFzZU91dCA6IHR5cGUgPT09IFwiaW5cIiA/IGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gMSAtIGVhc2VPdXQoMSAtIHApO1xuICAgIH0gOiBfZWFzZUluT3V0RnJvbU91dChlYXNlT3V0KTtcblxuICAgIGVhc2UuY29uZmlnID0gZnVuY3Rpb24gKG92ZXJzaG9vdCkge1xuICAgICAgcmV0dXJuIF9jb25maWdCYWNrKHR5cGUsIG92ZXJzaG9vdCk7XG4gICAgfTtcblxuICAgIHJldHVybiBlYXNlO1xuICB9O1xuXG4gIF9mb3JFYWNoTmFtZShcIkxpbmVhcixRdWFkLEN1YmljLFF1YXJ0LFF1aW50LFN0cm9uZ1wiLCBmdW5jdGlvbiAobmFtZSwgaSkge1xuICAgIHZhciBwb3dlciA9IGkgPCA1ID8gaSArIDEgOiBpO1xuXG4gICAgX2luc2VydEVhc2UobmFtZSArIFwiLFBvd2VyXCIgKyAocG93ZXIgLSAxKSwgaSA/IGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gTWF0aC5wb3cocCwgcG93ZXIpO1xuICAgIH0gOiBmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIHA7XG4gICAgfSwgZnVuY3Rpb24gKHApIHtcbiAgICAgIHJldHVybiAxIC0gTWF0aC5wb3coMSAtIHAsIHBvd2VyKTtcbiAgICB9LCBmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIHAgPCAuNSA/IE1hdGgucG93KHAgKiAyLCBwb3dlcikgLyAyIDogMSAtIE1hdGgucG93KCgxIC0gcCkgKiAyLCBwb3dlcikgLyAyO1xuICAgIH0pO1xuICB9KTtcblxuICBfZWFzZU1hcC5MaW5lYXIuZWFzZU5vbmUgPSBfZWFzZU1hcC5ub25lID0gX2Vhc2VNYXAuTGluZWFyLmVhc2VJbjtcblxuICBfaW5zZXJ0RWFzZShcIkVsYXN0aWNcIiwgX2NvbmZpZ0VsYXN0aWMoXCJpblwiKSwgX2NvbmZpZ0VsYXN0aWMoXCJvdXRcIiksIF9jb25maWdFbGFzdGljKCkpO1xuXG4gIChmdW5jdGlvbiAobiwgYykge1xuICAgIHZhciBuMSA9IDEgLyBjLFxuICAgICAgICBuMiA9IDIgKiBuMSxcbiAgICAgICAgbjMgPSAyLjUgKiBuMSxcbiAgICAgICAgZWFzZU91dCA9IGZ1bmN0aW9uIGVhc2VPdXQocCkge1xuICAgICAgcmV0dXJuIHAgPCBuMSA/IG4gKiBwICogcCA6IHAgPCBuMiA/IG4gKiBNYXRoLnBvdyhwIC0gMS41IC8gYywgMikgKyAuNzUgOiBwIDwgbjMgPyBuICogKHAgLT0gMi4yNSAvIGMpICogcCArIC45Mzc1IDogbiAqIE1hdGgucG93KHAgLSAyLjYyNSAvIGMsIDIpICsgLjk4NDM3NTtcbiAgICB9O1xuXG4gICAgX2luc2VydEVhc2UoXCJCb3VuY2VcIiwgZnVuY3Rpb24gKHApIHtcbiAgICAgIHJldHVybiAxIC0gZWFzZU91dCgxIC0gcCk7XG4gICAgfSwgZWFzZU91dCk7XG4gIH0pKDcuNTYyNSwgMi43NSk7XG5cbiAgX2luc2VydEVhc2UoXCJFeHBvXCIsIGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0dXJuIHAgPyBNYXRoLnBvdygyLCAxMCAqIChwIC0gMSkpIDogMDtcbiAgfSk7XG5cbiAgX2luc2VydEVhc2UoXCJDaXJjXCIsIGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0dXJuIC0oX3NxcnQoMSAtIHAgKiBwKSAtIDEpO1xuICB9KTtcblxuICBfaW5zZXJ0RWFzZShcIlNpbmVcIiwgZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gcCA9PT0gMSA/IDEgOiAtX2NvcyhwICogX0hBTEZfUEkpICsgMTtcbiAgfSk7XG5cbiAgX2luc2VydEVhc2UoXCJCYWNrXCIsIF9jb25maWdCYWNrKFwiaW5cIiksIF9jb25maWdCYWNrKFwib3V0XCIpLCBfY29uZmlnQmFjaygpKTtcblxuICBfZWFzZU1hcC5TdGVwcGVkRWFzZSA9IF9lYXNlTWFwLnN0ZXBzID0gX2dsb2JhbHMuU3RlcHBlZEVhc2UgPSB7XG4gICAgY29uZmlnOiBmdW5jdGlvbiBjb25maWcoc3RlcHMsIGltbWVkaWF0ZVN0YXJ0KSB7XG4gICAgICBpZiAoc3RlcHMgPT09IHZvaWQgMCkge1xuICAgICAgICBzdGVwcyA9IDE7XG4gICAgICB9XG5cbiAgICAgIHZhciBwMSA9IDEgLyBzdGVwcyxcbiAgICAgICAgICBwMiA9IHN0ZXBzICsgKGltbWVkaWF0ZVN0YXJ0ID8gMCA6IDEpLFxuICAgICAgICAgIHAzID0gaW1tZWRpYXRlU3RhcnQgPyAxIDogMCxcbiAgICAgICAgICBtYXggPSAxIC0gX3RpbnlOdW07XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHApIHtcbiAgICAgICAgcmV0dXJuICgocDIgKiBfY2xhbXAoMCwgbWF4LCBwKSB8IDApICsgcDMpICogcDE7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbiAgX2RlZmF1bHRzLmVhc2UgPSBfZWFzZU1hcFtcInF1YWQub3V0XCJdO1xuXG4gIF9mb3JFYWNoTmFtZShcIm9uQ29tcGxldGUsb25VcGRhdGUsb25TdGFydCxvblJlcGVhdCxvblJldmVyc2VDb21wbGV0ZSxvbkludGVycnVwdFwiLCBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiBfY2FsbGJhY2tOYW1lcyArPSBuYW1lICsgXCIsXCIgKyBuYW1lICsgXCJQYXJhbXMsXCI7XG4gIH0pO1xuXG4gIHZhciBHU0NhY2hlID0gZnVuY3Rpb24gR1NDYWNoZSh0YXJnZXQsIGhhcm5lc3MpIHtcbiAgICB0aGlzLmlkID0gX2dzSUQrKztcbiAgICB0YXJnZXQuX2dzYXAgPSB0aGlzO1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMuaGFybmVzcyA9IGhhcm5lc3M7XG4gICAgdGhpcy5nZXQgPSBoYXJuZXNzID8gaGFybmVzcy5nZXQgOiBfZ2V0UHJvcGVydHk7XG4gICAgdGhpcy5zZXQgPSBoYXJuZXNzID8gaGFybmVzcy5nZXRTZXR0ZXIgOiBfZ2V0U2V0dGVyO1xuICB9O1xuICB2YXIgQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFuaW1hdGlvbih2YXJzKSB7XG4gICAgICB0aGlzLnZhcnMgPSB2YXJzO1xuICAgICAgdGhpcy5fZGVsYXkgPSArdmFycy5kZWxheSB8fCAwO1xuXG4gICAgICBpZiAodGhpcy5fcmVwZWF0ID0gdmFycy5yZXBlYXQgPT09IEluZmluaXR5ID8gLTIgOiB2YXJzLnJlcGVhdCB8fCAwKSB7XG4gICAgICAgIHRoaXMuX3JEZWxheSA9IHZhcnMucmVwZWF0RGVsYXkgfHwgMDtcbiAgICAgICAgdGhpcy5feW95byA9ICEhdmFycy55b3lvIHx8ICEhdmFycy55b3lvRWFzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fdHMgPSAxO1xuXG4gICAgICBfc2V0RHVyYXRpb24odGhpcywgK3ZhcnMuZHVyYXRpb24sIDEsIDEpO1xuXG4gICAgICB0aGlzLmRhdGEgPSB2YXJzLmRhdGE7XG5cbiAgICAgIGlmIChfY29udGV4dCkge1xuICAgICAgICB0aGlzLl9jdHggPSBfY29udGV4dDtcblxuICAgICAgICBfY29udGV4dC5kYXRhLnB1c2godGhpcyk7XG4gICAgICB9XG5cbiAgICAgIF90aWNrZXJBY3RpdmUgfHwgX3RpY2tlci53YWtlKCk7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IEFuaW1hdGlvbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZGVsYXkgPSBmdW5jdGlvbiBkZWxheSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlIHx8IHZhbHVlID09PSAwKSB7XG4gICAgICAgIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnNtb290aENoaWxkVGltaW5nICYmIHRoaXMuc3RhcnRUaW1lKHRoaXMuX3N0YXJ0ICsgdmFsdWUgLSB0aGlzLl9kZWxheSk7XG4gICAgICAgIHRoaXMuX2RlbGF5ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fZGVsYXk7XG4gICAgfTtcblxuICAgIF9wcm90by5kdXJhdGlvbiA9IGZ1bmN0aW9uIGR1cmF0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMudG90YWxEdXJhdGlvbih0aGlzLl9yZXBlYXQgPiAwID8gdmFsdWUgKyAodmFsdWUgKyB0aGlzLl9yRGVsYXkpICogdGhpcy5fcmVwZWF0IDogdmFsdWUpIDogdGhpcy50b3RhbER1cmF0aW9uKCkgJiYgdGhpcy5fZHVyO1xuICAgIH07XG5cbiAgICBfcHJvdG8udG90YWxEdXJhdGlvbiA9IGZ1bmN0aW9uIHRvdGFsRHVyYXRpb24odmFsdWUpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdER1cjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZGlydHkgPSAwO1xuICAgICAgcmV0dXJuIF9zZXREdXJhdGlvbih0aGlzLCB0aGlzLl9yZXBlYXQgPCAwID8gdmFsdWUgOiAodmFsdWUgLSB0aGlzLl9yZXBlYXQgKiB0aGlzLl9yRGVsYXkpIC8gKHRoaXMuX3JlcGVhdCArIDEpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnRvdGFsVGltZSA9IGZ1bmN0aW9uIHRvdGFsVGltZShfdG90YWxUaW1lLCBzdXBwcmVzc0V2ZW50cykge1xuICAgICAgX3dha2UoKTtcblxuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90VGltZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHBhcmVudCA9IHRoaXMuX2RwO1xuXG4gICAgICBpZiAocGFyZW50ICYmIHBhcmVudC5zbW9vdGhDaGlsZFRpbWluZyAmJiB0aGlzLl90cykge1xuICAgICAgICBfYWxpZ25QbGF5aGVhZCh0aGlzLCBfdG90YWxUaW1lKTtcblxuICAgICAgICAhcGFyZW50Ll9kcCB8fCBwYXJlbnQucGFyZW50IHx8IF9wb3N0QWRkQ2hlY2tzKHBhcmVudCwgdGhpcyk7XG5cbiAgICAgICAgd2hpbGUgKHBhcmVudCAmJiBwYXJlbnQucGFyZW50KSB7XG4gICAgICAgICAgaWYgKHBhcmVudC5wYXJlbnQuX3RpbWUgIT09IHBhcmVudC5fc3RhcnQgKyAocGFyZW50Ll90cyA+PSAwID8gcGFyZW50Ll90VGltZSAvIHBhcmVudC5fdHMgOiAocGFyZW50LnRvdGFsRHVyYXRpb24oKSAtIHBhcmVudC5fdFRpbWUpIC8gLXBhcmVudC5fdHMpKSB7XG4gICAgICAgICAgICBwYXJlbnQudG90YWxUaW1lKHBhcmVudC5fdFRpbWUsIHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMucGFyZW50ICYmIHRoaXMuX2RwLmF1dG9SZW1vdmVDaGlsZHJlbiAmJiAodGhpcy5fdHMgPiAwICYmIF90b3RhbFRpbWUgPCB0aGlzLl90RHVyIHx8IHRoaXMuX3RzIDwgMCAmJiBfdG90YWxUaW1lID4gMCB8fCAhdGhpcy5fdER1ciAmJiAhX3RvdGFsVGltZSkpIHtcbiAgICAgICAgICBfYWRkVG9UaW1lbGluZSh0aGlzLl9kcCwgdGhpcywgdGhpcy5fc3RhcnQgLSB0aGlzLl9kZWxheSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3RUaW1lICE9PSBfdG90YWxUaW1lIHx8ICF0aGlzLl9kdXIgJiYgIXN1cHByZXNzRXZlbnRzIHx8IHRoaXMuX2luaXR0ZWQgJiYgTWF0aC5hYnModGhpcy5felRpbWUpID09PSBfdGlueU51bSB8fCAhX3RvdGFsVGltZSAmJiAhdGhpcy5faW5pdHRlZCAmJiAodGhpcy5hZGQgfHwgdGhpcy5fcHRMb29rdXApKSB7XG4gICAgICAgIHRoaXMuX3RzIHx8ICh0aGlzLl9wVGltZSA9IF90b3RhbFRpbWUpO1xuXG4gICAgICAgIF9sYXp5U2FmZVJlbmRlcih0aGlzLCBfdG90YWxUaW1lLCBzdXBwcmVzc0V2ZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8udGltZSA9IGZ1bmN0aW9uIHRpbWUodmFsdWUsIHN1cHByZXNzRXZlbnRzKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMudG90YWxUaW1lKE1hdGgubWluKHRoaXMudG90YWxEdXJhdGlvbigpLCB2YWx1ZSArIF9lbGFwc2VkQ3ljbGVEdXJhdGlvbih0aGlzKSkgJSAodGhpcy5fZHVyICsgdGhpcy5fckRlbGF5KSB8fCAodmFsdWUgPyB0aGlzLl9kdXIgOiAwKSwgc3VwcHJlc3NFdmVudHMpIDogdGhpcy5fdGltZTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnRvdGFsUHJvZ3Jlc3MgPSBmdW5jdGlvbiB0b3RhbFByb2dyZXNzKHZhbHVlLCBzdXBwcmVzc0V2ZW50cykge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLnRvdGFsVGltZSh0aGlzLnRvdGFsRHVyYXRpb24oKSAqIHZhbHVlLCBzdXBwcmVzc0V2ZW50cykgOiB0aGlzLnRvdGFsRHVyYXRpb24oKSA/IE1hdGgubWluKDEsIHRoaXMuX3RUaW1lIC8gdGhpcy5fdER1cikgOiB0aGlzLnJhd1RpbWUoKSA+IDAgPyAxIDogMDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnByb2dyZXNzID0gZnVuY3Rpb24gcHJvZ3Jlc3ModmFsdWUsIHN1cHByZXNzRXZlbnRzKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMudG90YWxUaW1lKHRoaXMuZHVyYXRpb24oKSAqICh0aGlzLl95b3lvICYmICEodGhpcy5pdGVyYXRpb24oKSAmIDEpID8gMSAtIHZhbHVlIDogdmFsdWUpICsgX2VsYXBzZWRDeWNsZUR1cmF0aW9uKHRoaXMpLCBzdXBwcmVzc0V2ZW50cykgOiB0aGlzLmR1cmF0aW9uKCkgPyBNYXRoLm1pbigxLCB0aGlzLl90aW1lIC8gdGhpcy5fZHVyKSA6IHRoaXMucmF3VGltZSgpID4gMCA/IDEgOiAwO1xuICAgIH07XG5cbiAgICBfcHJvdG8uaXRlcmF0aW9uID0gZnVuY3Rpb24gaXRlcmF0aW9uKHZhbHVlLCBzdXBwcmVzc0V2ZW50cykge1xuICAgICAgdmFyIGN5Y2xlRHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uKCkgKyB0aGlzLl9yRGVsYXk7XG5cbiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gdGhpcy50b3RhbFRpbWUodGhpcy5fdGltZSArICh2YWx1ZSAtIDEpICogY3ljbGVEdXJhdGlvbiwgc3VwcHJlc3NFdmVudHMpIDogdGhpcy5fcmVwZWF0ID8gX2FuaW1hdGlvbkN5Y2xlKHRoaXMuX3RUaW1lLCBjeWNsZUR1cmF0aW9uKSArIDEgOiAxO1xuICAgIH07XG5cbiAgICBfcHJvdG8udGltZVNjYWxlID0gZnVuY3Rpb24gdGltZVNjYWxlKHZhbHVlLCBzdXBwcmVzc0V2ZW50cykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ydHMgPT09IC1fdGlueU51bSA/IDAgOiB0aGlzLl9ydHM7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ydHMgPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB2YXIgdFRpbWUgPSB0aGlzLnBhcmVudCAmJiB0aGlzLl90cyA/IF9wYXJlbnRUb0NoaWxkVG90YWxUaW1lKHRoaXMucGFyZW50Ll90aW1lLCB0aGlzKSA6IHRoaXMuX3RUaW1lO1xuICAgICAgdGhpcy5fcnRzID0gK3ZhbHVlIHx8IDA7XG4gICAgICB0aGlzLl90cyA9IHRoaXMuX3BzIHx8IHZhbHVlID09PSAtX3RpbnlOdW0gPyAwIDogdGhpcy5fcnRzO1xuICAgICAgdGhpcy50b3RhbFRpbWUoX2NsYW1wKC1NYXRoLmFicyh0aGlzLl9kZWxheSksIHRoaXMuX3REdXIsIHRUaW1lKSwgc3VwcHJlc3NFdmVudHMgIT09IGZhbHNlKTtcblxuICAgICAgX3NldEVuZCh0aGlzKTtcblxuICAgICAgcmV0dXJuIF9yZWNhY2hlQW5jZXN0b3JzKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8ucGF1c2VkID0gZnVuY3Rpb24gcGF1c2VkKHZhbHVlKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BzO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcHMgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3BzID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5fcFRpbWUgPSB0aGlzLl90VGltZSB8fCBNYXRoLm1heCgtdGhpcy5fZGVsYXksIHRoaXMucmF3VGltZSgpKTtcbiAgICAgICAgICB0aGlzLl90cyA9IHRoaXMuX2FjdCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3dha2UoKTtcblxuICAgICAgICAgIHRoaXMuX3RzID0gdGhpcy5fcnRzO1xuICAgICAgICAgIHRoaXMudG90YWxUaW1lKHRoaXMucGFyZW50ICYmICF0aGlzLnBhcmVudC5zbW9vdGhDaGlsZFRpbWluZyA/IHRoaXMucmF3VGltZSgpIDogdGhpcy5fdFRpbWUgfHwgdGhpcy5fcFRpbWUsIHRoaXMucHJvZ3Jlc3MoKSA9PT0gMSAmJiBNYXRoLmFicyh0aGlzLl96VGltZSkgIT09IF90aW55TnVtICYmICh0aGlzLl90VGltZSAtPSBfdGlueU51bSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8uc3RhcnRUaW1lID0gZnVuY3Rpb24gc3RhcnRUaW1lKHZhbHVlKSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9zdGFydCA9IHZhbHVlO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQgfHwgdGhpcy5fZHA7XG4gICAgICAgIHBhcmVudCAmJiAocGFyZW50Ll9zb3J0IHx8ICF0aGlzLnBhcmVudCkgJiYgX2FkZFRvVGltZWxpbmUocGFyZW50LCB0aGlzLCB2YWx1ZSAtIHRoaXMuX2RlbGF5KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9zdGFydDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmVuZFRpbWUgPSBmdW5jdGlvbiBlbmRUaW1lKGluY2x1ZGVSZXBlYXRzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhcnQgKyAoX2lzTm90RmFsc2UoaW5jbHVkZVJlcGVhdHMpID8gdGhpcy50b3RhbER1cmF0aW9uKCkgOiB0aGlzLmR1cmF0aW9uKCkpIC8gTWF0aC5hYnModGhpcy5fdHMgfHwgMSk7XG4gICAgfTtcblxuICAgIF9wcm90by5yYXdUaW1lID0gZnVuY3Rpb24gcmF3VGltZSh3cmFwUmVwZWF0cykge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXMuX2RwO1xuICAgICAgcmV0dXJuICFwYXJlbnQgPyB0aGlzLl90VGltZSA6IHdyYXBSZXBlYXRzICYmICghdGhpcy5fdHMgfHwgdGhpcy5fcmVwZWF0ICYmIHRoaXMuX3RpbWUgJiYgdGhpcy50b3RhbFByb2dyZXNzKCkgPCAxKSA/IHRoaXMuX3RUaW1lICUgKHRoaXMuX2R1ciArIHRoaXMuX3JEZWxheSkgOiAhdGhpcy5fdHMgPyB0aGlzLl90VGltZSA6IF9wYXJlbnRUb0NoaWxkVG90YWxUaW1lKHBhcmVudC5yYXdUaW1lKHdyYXBSZXBlYXRzKSwgdGhpcyk7XG4gICAgfTtcblxuICAgIF9wcm90by5yZXZlcnQgPSBmdW5jdGlvbiByZXZlcnQoY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHtcbiAgICAgICAgY29uZmlnID0gX3JldmVydENvbmZpZztcbiAgICAgIH1cblxuICAgICAgdmFyIHByZXZJc1JldmVydGluZyA9IF9yZXZlcnRpbmc7XG4gICAgICBfcmV2ZXJ0aW5nID0gY29uZmlnO1xuXG4gICAgICBpZiAodGhpcy5faW5pdHRlZCB8fCB0aGlzLl9zdGFydEF0KSB7XG4gICAgICAgIHRoaXMudGltZWxpbmUgJiYgdGhpcy50aW1lbGluZS5yZXZlcnQoY29uZmlnKTtcbiAgICAgICAgdGhpcy50b3RhbFRpbWUoLTAuMDEsIGNvbmZpZy5zdXBwcmVzc0V2ZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGF0YSAhPT0gXCJuZXN0ZWRcIiAmJiBjb25maWcua2lsbCAhPT0gZmFsc2UgJiYgdGhpcy5raWxsKCk7XG4gICAgICBfcmV2ZXJ0aW5nID0gcHJldklzUmV2ZXJ0aW5nO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90by5nbG9iYWxUaW1lID0gZnVuY3Rpb24gZ2xvYmFsVGltZShyYXdUaW1lKSB7XG4gICAgICB2YXIgYW5pbWF0aW9uID0gdGhpcyxcbiAgICAgICAgICB0aW1lID0gYXJndW1lbnRzLmxlbmd0aCA/IHJhd1RpbWUgOiBhbmltYXRpb24ucmF3VGltZSgpO1xuXG4gICAgICB3aGlsZSAoYW5pbWF0aW9uKSB7XG4gICAgICAgIHRpbWUgPSBhbmltYXRpb24uX3N0YXJ0ICsgdGltZSAvIChNYXRoLmFicyhhbmltYXRpb24uX3RzKSB8fCAxKTtcbiAgICAgICAgYW5pbWF0aW9uID0gYW5pbWF0aW9uLl9kcDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICF0aGlzLnBhcmVudCAmJiB0aGlzLl9zYXQgPyB0aGlzLl9zYXQuZ2xvYmFsVGltZShyYXdUaW1lKSA6IHRpbWU7XG4gICAgfTtcblxuICAgIF9wcm90by5yZXBlYXQgPSBmdW5jdGlvbiByZXBlYXQodmFsdWUpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3JlcGVhdCA9IHZhbHVlID09PSBJbmZpbml0eSA/IC0yIDogdmFsdWU7XG4gICAgICAgIHJldHVybiBfb25VcGRhdGVUb3RhbER1cmF0aW9uKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fcmVwZWF0ID09PSAtMiA/IEluZmluaXR5IDogdGhpcy5fcmVwZWF0O1xuICAgIH07XG5cbiAgICBfcHJvdG8ucmVwZWF0RGVsYXkgPSBmdW5jdGlvbiByZXBlYXREZWxheSh2YWx1ZSkge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHRpbWUgPSB0aGlzLl90aW1lO1xuICAgICAgICB0aGlzLl9yRGVsYXkgPSB2YWx1ZTtcblxuICAgICAgICBfb25VcGRhdGVUb3RhbER1cmF0aW9uKHRoaXMpO1xuXG4gICAgICAgIHJldHVybiB0aW1lID8gdGhpcy50aW1lKHRpbWUpIDogdGhpcztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX3JEZWxheTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnlveW8gPSBmdW5jdGlvbiB5b3lvKHZhbHVlKSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl95b3lvID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5feW95bztcbiAgICB9O1xuXG4gICAgX3Byb3RvLnNlZWsgPSBmdW5jdGlvbiBzZWVrKHBvc2l0aW9uLCBzdXBwcmVzc0V2ZW50cykge1xuICAgICAgcmV0dXJuIHRoaXMudG90YWxUaW1lKF9wYXJzZVBvc2l0aW9uKHRoaXMsIHBvc2l0aW9uKSwgX2lzTm90RmFsc2Uoc3VwcHJlc3NFdmVudHMpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnJlc3RhcnQgPSBmdW5jdGlvbiByZXN0YXJ0KGluY2x1ZGVEZWxheSwgc3VwcHJlc3NFdmVudHMpIHtcbiAgICAgIHJldHVybiB0aGlzLnBsYXkoKS50b3RhbFRpbWUoaW5jbHVkZURlbGF5ID8gLXRoaXMuX2RlbGF5IDogMCwgX2lzTm90RmFsc2Uoc3VwcHJlc3NFdmVudHMpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnBsYXkgPSBmdW5jdGlvbiBwbGF5KGZyb20sIHN1cHByZXNzRXZlbnRzKSB7XG4gICAgICBmcm9tICE9IG51bGwgJiYgdGhpcy5zZWVrKGZyb20sIHN1cHByZXNzRXZlbnRzKTtcbiAgICAgIHJldHVybiB0aGlzLnJldmVyc2VkKGZhbHNlKS5wYXVzZWQoZmFsc2UpO1xuICAgIH07XG5cbiAgICBfcHJvdG8ucmV2ZXJzZSA9IGZ1bmN0aW9uIHJldmVyc2UoZnJvbSwgc3VwcHJlc3NFdmVudHMpIHtcbiAgICAgIGZyb20gIT0gbnVsbCAmJiB0aGlzLnNlZWsoZnJvbSB8fCB0aGlzLnRvdGFsRHVyYXRpb24oKSwgc3VwcHJlc3NFdmVudHMpO1xuICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZWQodHJ1ZSkucGF1c2VkKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnBhdXNlID0gZnVuY3Rpb24gcGF1c2UoYXRUaW1lLCBzdXBwcmVzc0V2ZW50cykge1xuICAgICAgYXRUaW1lICE9IG51bGwgJiYgdGhpcy5zZWVrKGF0VGltZSwgc3VwcHJlc3NFdmVudHMpO1xuICAgICAgcmV0dXJuIHRoaXMucGF1c2VkKHRydWUpO1xuICAgIH07XG5cbiAgICBfcHJvdG8ucmVzdW1lID0gZnVuY3Rpb24gcmVzdW1lKCkge1xuICAgICAgcmV0dXJuIHRoaXMucGF1c2VkKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnJldmVyc2VkID0gZnVuY3Rpb24gcmV2ZXJzZWQodmFsdWUpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICEhdmFsdWUgIT09IHRoaXMucmV2ZXJzZWQoKSAmJiB0aGlzLnRpbWVTY2FsZSgtdGhpcy5fcnRzIHx8ICh2YWx1ZSA/IC1fdGlueU51bSA6IDApKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9ydHMgPCAwO1xuICAgIH07XG5cbiAgICBfcHJvdG8uaW52YWxpZGF0ZSA9IGZ1bmN0aW9uIGludmFsaWRhdGUoKSB7XG4gICAgICB0aGlzLl9pbml0dGVkID0gdGhpcy5fYWN0ID0gMDtcbiAgICAgIHRoaXMuX3pUaW1lID0gLV90aW55TnVtO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90by5pc0FjdGl2ZSA9IGZ1bmN0aW9uIGlzQWN0aXZlKCkge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXMuX2RwLFxuICAgICAgICAgIHN0YXJ0ID0gdGhpcy5fc3RhcnQsXG4gICAgICAgICAgcmF3VGltZTtcbiAgICAgIHJldHVybiAhISghcGFyZW50IHx8IHRoaXMuX3RzICYmIHRoaXMuX2luaXR0ZWQgJiYgcGFyZW50LmlzQWN0aXZlKCkgJiYgKHJhd1RpbWUgPSBwYXJlbnQucmF3VGltZSh0cnVlKSkgPj0gc3RhcnQgJiYgcmF3VGltZSA8IHRoaXMuZW5kVGltZSh0cnVlKSAtIF90aW55TnVtKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmV2ZW50Q2FsbGJhY2sgPSBmdW5jdGlvbiBldmVudENhbGxiYWNrKHR5cGUsIGNhbGxiYWNrLCBwYXJhbXMpIHtcbiAgICAgIHZhciB2YXJzID0gdGhpcy52YXJzO1xuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgIGRlbGV0ZSB2YXJzW3R5cGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhcnNbdHlwZV0gPSBjYWxsYmFjaztcbiAgICAgICAgICBwYXJhbXMgJiYgKHZhcnNbdHlwZSArIFwiUGFyYW1zXCJdID0gcGFyYW1zKTtcbiAgICAgICAgICB0eXBlID09PSBcIm9uVXBkYXRlXCIgJiYgKHRoaXMuX29uVXBkYXRlID0gY2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YXJzW3R5cGVdO1xuICAgIH07XG5cbiAgICBfcHJvdG8udGhlbiA9IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB2YXIgZiA9IF9pc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKSA/IG9uRnVsZmlsbGVkIDogX3Bhc3NUaHJvdWdoLFxuICAgICAgICAgICAgX3Jlc29sdmUgPSBmdW5jdGlvbiBfcmVzb2x2ZSgpIHtcbiAgICAgICAgICB2YXIgX3RoZW4gPSBzZWxmLnRoZW47XG4gICAgICAgICAgc2VsZi50aGVuID0gbnVsbDtcbiAgICAgICAgICBfaXNGdW5jdGlvbihmKSAmJiAoZiA9IGYoc2VsZikpICYmIChmLnRoZW4gfHwgZiA9PT0gc2VsZikgJiYgKHNlbGYudGhlbiA9IF90aGVuKTtcbiAgICAgICAgICByZXNvbHZlKGYpO1xuICAgICAgICAgIHNlbGYudGhlbiA9IF90aGVuO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzZWxmLl9pbml0dGVkICYmIHNlbGYudG90YWxQcm9ncmVzcygpID09PSAxICYmIHNlbGYuX3RzID49IDAgfHwgIXNlbGYuX3RUaW1lICYmIHNlbGYuX3RzIDwgMCkge1xuICAgICAgICAgIF9yZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5fcHJvbSA9IF9yZXNvbHZlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmtpbGwgPSBmdW5jdGlvbiBraWxsKCkge1xuICAgICAgX2ludGVycnVwdCh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFuaW1hdGlvbjtcbiAgfSgpO1xuXG4gIF9zZXREZWZhdWx0cyhBbmltYXRpb24ucHJvdG90eXBlLCB7XG4gICAgX3RpbWU6IDAsXG4gICAgX3N0YXJ0OiAwLFxuICAgIF9lbmQ6IDAsXG4gICAgX3RUaW1lOiAwLFxuICAgIF90RHVyOiAwLFxuICAgIF9kaXJ0eTogMCxcbiAgICBfcmVwZWF0OiAwLFxuICAgIF95b3lvOiBmYWxzZSxcbiAgICBwYXJlbnQ6IG51bGwsXG4gICAgX2luaXR0ZWQ6IGZhbHNlLFxuICAgIF9yRGVsYXk6IDAsXG4gICAgX3RzOiAxLFxuICAgIF9kcDogMCxcbiAgICByYXRpbzogMCxcbiAgICBfelRpbWU6IC1fdGlueU51bSxcbiAgICBfcHJvbTogMCxcbiAgICBfcHM6IGZhbHNlLFxuICAgIF9ydHM6IDFcbiAgfSk7XG5cbiAgdmFyIFRpbWVsaW5lID0gZnVuY3Rpb24gKF9BbmltYXRpb24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShUaW1lbGluZSwgX0FuaW1hdGlvbik7XG5cbiAgICBmdW5jdGlvbiBUaW1lbGluZSh2YXJzLCBwb3NpdGlvbikge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBpZiAodmFycyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHZhcnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMgPSBfQW5pbWF0aW9uLmNhbGwodGhpcywgdmFycykgfHwgdGhpcztcbiAgICAgIF90aGlzLmxhYmVscyA9IHt9O1xuICAgICAgX3RoaXMuc21vb3RoQ2hpbGRUaW1pbmcgPSAhIXZhcnMuc21vb3RoQ2hpbGRUaW1pbmc7XG4gICAgICBfdGhpcy5hdXRvUmVtb3ZlQ2hpbGRyZW4gPSAhIXZhcnMuYXV0b1JlbW92ZUNoaWxkcmVuO1xuICAgICAgX3RoaXMuX3NvcnQgPSBfaXNOb3RGYWxzZSh2YXJzLnNvcnRDaGlsZHJlbik7XG4gICAgICBfZ2xvYmFsVGltZWxpbmUgJiYgX2FkZFRvVGltZWxpbmUodmFycy5wYXJlbnQgfHwgX2dsb2JhbFRpbWVsaW5lLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgcG9zaXRpb24pO1xuICAgICAgdmFycy5yZXZlcnNlZCAmJiBfdGhpcy5yZXZlcnNlKCk7XG4gICAgICB2YXJzLnBhdXNlZCAmJiBfdGhpcy5wYXVzZWQodHJ1ZSk7XG4gICAgICB2YXJzLnNjcm9sbFRyaWdnZXIgJiYgX3Njcm9sbFRyaWdnZXIoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIHZhcnMuc2Nyb2xsVHJpZ2dlcik7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzIgPSBUaW1lbGluZS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8yLnRvID0gZnVuY3Rpb24gdG8odGFyZ2V0cywgdmFycywgcG9zaXRpb24pIHtcbiAgICAgIF9jcmVhdGVUd2VlblR5cGUoMCwgYXJndW1lbnRzLCB0aGlzKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90bzIuZnJvbSA9IGZ1bmN0aW9uIGZyb20odGFyZ2V0cywgdmFycywgcG9zaXRpb24pIHtcbiAgICAgIF9jcmVhdGVUd2VlblR5cGUoMSwgYXJndW1lbnRzLCB0aGlzKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90bzIuZnJvbVRvID0gZnVuY3Rpb24gZnJvbVRvKHRhcmdldHMsIGZyb21WYXJzLCB0b1ZhcnMsIHBvc2l0aW9uKSB7XG4gICAgICBfY3JlYXRlVHdlZW5UeXBlKDIsIGFyZ3VtZW50cywgdGhpcyk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8yLnNldCA9IGZ1bmN0aW9uIHNldCh0YXJnZXRzLCB2YXJzLCBwb3NpdGlvbikge1xuICAgICAgdmFycy5kdXJhdGlvbiA9IDA7XG4gICAgICB2YXJzLnBhcmVudCA9IHRoaXM7XG4gICAgICBfaW5oZXJpdERlZmF1bHRzKHZhcnMpLnJlcGVhdERlbGF5IHx8ICh2YXJzLnJlcGVhdCA9IDApO1xuICAgICAgdmFycy5pbW1lZGlhdGVSZW5kZXIgPSAhIXZhcnMuaW1tZWRpYXRlUmVuZGVyO1xuICAgICAgbmV3IFR3ZWVuKHRhcmdldHMsIHZhcnMsIF9wYXJzZVBvc2l0aW9uKHRoaXMsIHBvc2l0aW9uKSwgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5jYWxsID0gZnVuY3Rpb24gY2FsbChjYWxsYmFjaywgcGFyYW1zLCBwb3NpdGlvbikge1xuICAgICAgcmV0dXJuIF9hZGRUb1RpbWVsaW5lKHRoaXMsIFR3ZWVuLmRlbGF5ZWRDYWxsKDAsIGNhbGxiYWNrLCBwYXJhbXMpLCBwb3NpdGlvbik7XG4gICAgfTtcblxuICAgIF9wcm90bzIuc3RhZ2dlclRvID0gZnVuY3Rpb24gc3RhZ2dlclRvKHRhcmdldHMsIGR1cmF0aW9uLCB2YXJzLCBzdGFnZ2VyLCBwb3NpdGlvbiwgb25Db21wbGV0ZUFsbCwgb25Db21wbGV0ZUFsbFBhcmFtcykge1xuICAgICAgdmFycy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgdmFycy5zdGFnZ2VyID0gdmFycy5zdGFnZ2VyIHx8IHN0YWdnZXI7XG4gICAgICB2YXJzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlQWxsO1xuICAgICAgdmFycy5vbkNvbXBsZXRlUGFyYW1zID0gb25Db21wbGV0ZUFsbFBhcmFtcztcbiAgICAgIHZhcnMucGFyZW50ID0gdGhpcztcbiAgICAgIG5ldyBUd2Vlbih0YXJnZXRzLCB2YXJzLCBfcGFyc2VQb3NpdGlvbih0aGlzLCBwb3NpdGlvbikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90bzIuc3RhZ2dlckZyb20gPSBmdW5jdGlvbiBzdGFnZ2VyRnJvbSh0YXJnZXRzLCBkdXJhdGlvbiwgdmFycywgc3RhZ2dlciwgcG9zaXRpb24sIG9uQ29tcGxldGVBbGwsIG9uQ29tcGxldGVBbGxQYXJhbXMpIHtcbiAgICAgIHZhcnMucnVuQmFja3dhcmRzID0gMTtcbiAgICAgIF9pbmhlcml0RGVmYXVsdHModmFycykuaW1tZWRpYXRlUmVuZGVyID0gX2lzTm90RmFsc2UodmFycy5pbW1lZGlhdGVSZW5kZXIpO1xuICAgICAgcmV0dXJuIHRoaXMuc3RhZ2dlclRvKHRhcmdldHMsIGR1cmF0aW9uLCB2YXJzLCBzdGFnZ2VyLCBwb3NpdGlvbiwgb25Db21wbGV0ZUFsbCwgb25Db21wbGV0ZUFsbFBhcmFtcyk7XG4gICAgfTtcblxuICAgIF9wcm90bzIuc3RhZ2dlckZyb21UbyA9IGZ1bmN0aW9uIHN0YWdnZXJGcm9tVG8odGFyZ2V0cywgZHVyYXRpb24sIGZyb21WYXJzLCB0b1ZhcnMsIHN0YWdnZXIsIHBvc2l0aW9uLCBvbkNvbXBsZXRlQWxsLCBvbkNvbXBsZXRlQWxsUGFyYW1zKSB7XG4gICAgICB0b1ZhcnMuc3RhcnRBdCA9IGZyb21WYXJzO1xuICAgICAgX2luaGVyaXREZWZhdWx0cyh0b1ZhcnMpLmltbWVkaWF0ZVJlbmRlciA9IF9pc05vdEZhbHNlKHRvVmFycy5pbW1lZGlhdGVSZW5kZXIpO1xuICAgICAgcmV0dXJuIHRoaXMuc3RhZ2dlclRvKHRhcmdldHMsIGR1cmF0aW9uLCB0b1ZhcnMsIHN0YWdnZXIsIHBvc2l0aW9uLCBvbkNvbXBsZXRlQWxsLCBvbkNvbXBsZXRlQWxsUGFyYW1zKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIodG90YWxUaW1lLCBzdXBwcmVzc0V2ZW50cywgZm9yY2UpIHtcbiAgICAgIHZhciBwcmV2VGltZSA9IHRoaXMuX3RpbWUsXG4gICAgICAgICAgdER1ciA9IHRoaXMuX2RpcnR5ID8gdGhpcy50b3RhbER1cmF0aW9uKCkgOiB0aGlzLl90RHVyLFxuICAgICAgICAgIGR1ciA9IHRoaXMuX2R1cixcbiAgICAgICAgICB0VGltZSA9IHRvdGFsVGltZSA8PSAwID8gMCA6IF9yb3VuZFByZWNpc2UodG90YWxUaW1lKSxcbiAgICAgICAgICBjcm9zc2luZ1N0YXJ0ID0gdGhpcy5felRpbWUgPCAwICE9PSB0b3RhbFRpbWUgPCAwICYmICh0aGlzLl9pbml0dGVkIHx8ICFkdXIpLFxuICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgbmV4dCxcbiAgICAgICAgICBpdGVyYXRpb24sXG4gICAgICAgICAgY3ljbGVEdXJhdGlvbixcbiAgICAgICAgICBwcmV2UGF1c2VkLFxuICAgICAgICAgIHBhdXNlVHdlZW4sXG4gICAgICAgICAgdGltZVNjYWxlLFxuICAgICAgICAgIHByZXZTdGFydCxcbiAgICAgICAgICBwcmV2SXRlcmF0aW9uLFxuICAgICAgICAgIHlveW8sXG4gICAgICAgICAgaXNZb3lvO1xuICAgICAgdGhpcyAhPT0gX2dsb2JhbFRpbWVsaW5lICYmIHRUaW1lID4gdER1ciAmJiB0b3RhbFRpbWUgPj0gMCAmJiAodFRpbWUgPSB0RHVyKTtcblxuICAgICAgaWYgKHRUaW1lICE9PSB0aGlzLl90VGltZSB8fCBmb3JjZSB8fCBjcm9zc2luZ1N0YXJ0KSB7XG4gICAgICAgIGlmIChwcmV2VGltZSAhPT0gdGhpcy5fdGltZSAmJiBkdXIpIHtcbiAgICAgICAgICB0VGltZSArPSB0aGlzLl90aW1lIC0gcHJldlRpbWU7XG4gICAgICAgICAgdG90YWxUaW1lICs9IHRoaXMuX3RpbWUgLSBwcmV2VGltZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWUgPSB0VGltZTtcbiAgICAgICAgcHJldlN0YXJ0ID0gdGhpcy5fc3RhcnQ7XG4gICAgICAgIHRpbWVTY2FsZSA9IHRoaXMuX3RzO1xuICAgICAgICBwcmV2UGF1c2VkID0gIXRpbWVTY2FsZTtcblxuICAgICAgICBpZiAoY3Jvc3NpbmdTdGFydCkge1xuICAgICAgICAgIGR1ciB8fCAocHJldlRpbWUgPSB0aGlzLl96VGltZSk7XG4gICAgICAgICAgKHRvdGFsVGltZSB8fCAhc3VwcHJlc3NFdmVudHMpICYmICh0aGlzLl96VGltZSA9IHRvdGFsVGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fcmVwZWF0KSB7XG4gICAgICAgICAgeW95byA9IHRoaXMuX3lveW87XG4gICAgICAgICAgY3ljbGVEdXJhdGlvbiA9IGR1ciArIHRoaXMuX3JEZWxheTtcblxuICAgICAgICAgIGlmICh0aGlzLl9yZXBlYXQgPCAtMSAmJiB0b3RhbFRpbWUgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3RhbFRpbWUoY3ljbGVEdXJhdGlvbiAqIDEwMCArIHRvdGFsVGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aW1lID0gX3JvdW5kUHJlY2lzZSh0VGltZSAlIGN5Y2xlRHVyYXRpb24pO1xuXG4gICAgICAgICAgaWYgKHRUaW1lID09PSB0RHVyKSB7XG4gICAgICAgICAgICBpdGVyYXRpb24gPSB0aGlzLl9yZXBlYXQ7XG4gICAgICAgICAgICB0aW1lID0gZHVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpdGVyYXRpb24gPSB+fih0VGltZSAvIGN5Y2xlRHVyYXRpb24pO1xuXG4gICAgICAgICAgICBpZiAoaXRlcmF0aW9uICYmIGl0ZXJhdGlvbiA9PT0gdFRpbWUgLyBjeWNsZUR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgIHRpbWUgPSBkdXI7XG4gICAgICAgICAgICAgIGl0ZXJhdGlvbi0tO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aW1lID4gZHVyICYmICh0aW1lID0gZHVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwcmV2SXRlcmF0aW9uID0gX2FuaW1hdGlvbkN5Y2xlKHRoaXMuX3RUaW1lLCBjeWNsZUR1cmF0aW9uKTtcbiAgICAgICAgICAhcHJldlRpbWUgJiYgdGhpcy5fdFRpbWUgJiYgcHJldkl0ZXJhdGlvbiAhPT0gaXRlcmF0aW9uICYmIHRoaXMuX3RUaW1lIC0gcHJldkl0ZXJhdGlvbiAqIGN5Y2xlRHVyYXRpb24gLSB0aGlzLl9kdXIgPD0gMCAmJiAocHJldkl0ZXJhdGlvbiA9IGl0ZXJhdGlvbik7XG5cbiAgICAgICAgICBpZiAoeW95byAmJiBpdGVyYXRpb24gJiAxKSB7XG4gICAgICAgICAgICB0aW1lID0gZHVyIC0gdGltZTtcbiAgICAgICAgICAgIGlzWW95byA9IDE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGl0ZXJhdGlvbiAhPT0gcHJldkl0ZXJhdGlvbiAmJiAhdGhpcy5fbG9jaykge1xuICAgICAgICAgICAgdmFyIHJld2luZGluZyA9IHlveW8gJiYgcHJldkl0ZXJhdGlvbiAmIDEsXG4gICAgICAgICAgICAgICAgZG9lc1dyYXAgPSByZXdpbmRpbmcgPT09ICh5b3lvICYmIGl0ZXJhdGlvbiAmIDEpO1xuICAgICAgICAgICAgaXRlcmF0aW9uIDwgcHJldkl0ZXJhdGlvbiAmJiAocmV3aW5kaW5nID0gIXJld2luZGluZyk7XG4gICAgICAgICAgICBwcmV2VGltZSA9IHJld2luZGluZyA/IDAgOiB0VGltZSAlIGR1ciA/IGR1ciA6IHRUaW1lO1xuICAgICAgICAgICAgdGhpcy5fbG9jayA9IDE7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcihwcmV2VGltZSB8fCAoaXNZb3lvID8gMCA6IF9yb3VuZFByZWNpc2UoaXRlcmF0aW9uICogY3ljbGVEdXJhdGlvbikpLCBzdXBwcmVzc0V2ZW50cywgIWR1cikuX2xvY2sgPSAwO1xuICAgICAgICAgICAgdGhpcy5fdFRpbWUgPSB0VGltZTtcbiAgICAgICAgICAgICFzdXBwcmVzc0V2ZW50cyAmJiB0aGlzLnBhcmVudCAmJiBfY2FsbGJhY2sodGhpcywgXCJvblJlcGVhdFwiKTtcbiAgICAgICAgICAgIHRoaXMudmFycy5yZXBlYXRSZWZyZXNoICYmICFpc1lveW8gJiYgKHRoaXMuaW52YWxpZGF0ZSgpLl9sb2NrID0gMSk7XG5cbiAgICAgICAgICAgIGlmIChwcmV2VGltZSAmJiBwcmV2VGltZSAhPT0gdGhpcy5fdGltZSB8fCBwcmV2UGF1c2VkICE9PSAhdGhpcy5fdHMgfHwgdGhpcy52YXJzLm9uUmVwZWF0ICYmICF0aGlzLnBhcmVudCAmJiAhdGhpcy5fYWN0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkdXIgPSB0aGlzLl9kdXI7XG4gICAgICAgICAgICB0RHVyID0gdGhpcy5fdER1cjtcblxuICAgICAgICAgICAgaWYgKGRvZXNXcmFwKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2xvY2sgPSAyO1xuICAgICAgICAgICAgICBwcmV2VGltZSA9IHJld2luZGluZyA/IGR1ciA6IC0wLjAwMDE7XG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyKHByZXZUaW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgdGhpcy52YXJzLnJlcGVhdFJlZnJlc2ggJiYgIWlzWW95byAmJiB0aGlzLmludmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fbG9jayA9IDA7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5fdHMgJiYgIXByZXZQYXVzZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9wcm9wYWdhdGVZb3lvRWFzZSh0aGlzLCBpc1lveW8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9oYXNQYXVzZSAmJiAhdGhpcy5fZm9yY2luZyAmJiB0aGlzLl9sb2NrIDwgMikge1xuICAgICAgICAgIHBhdXNlVHdlZW4gPSBfZmluZE5leHRQYXVzZVR3ZWVuKHRoaXMsIF9yb3VuZFByZWNpc2UocHJldlRpbWUpLCBfcm91bmRQcmVjaXNlKHRpbWUpKTtcblxuICAgICAgICAgIGlmIChwYXVzZVR3ZWVuKSB7XG4gICAgICAgICAgICB0VGltZSAtPSB0aW1lIC0gKHRpbWUgPSBwYXVzZVR3ZWVuLl9zdGFydCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdFRpbWUgPSB0VGltZTtcbiAgICAgICAgdGhpcy5fdGltZSA9IHRpbWU7XG4gICAgICAgIHRoaXMuX2FjdCA9ICF0aW1lU2NhbGU7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9pbml0dGVkKSB7XG4gICAgICAgICAgdGhpcy5fb25VcGRhdGUgPSB0aGlzLnZhcnMub25VcGRhdGU7XG4gICAgICAgICAgdGhpcy5faW5pdHRlZCA9IDE7XG4gICAgICAgICAgdGhpcy5felRpbWUgPSB0b3RhbFRpbWU7XG4gICAgICAgICAgcHJldlRpbWUgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwcmV2VGltZSAmJiB0aW1lICYmICFzdXBwcmVzc0V2ZW50cyAmJiAhaXRlcmF0aW9uKSB7XG4gICAgICAgICAgX2NhbGxiYWNrKHRoaXMsIFwib25TdGFydFwiKTtcblxuICAgICAgICAgIGlmICh0aGlzLl90VGltZSAhPT0gdFRpbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lID49IHByZXZUaW1lICYmIHRvdGFsVGltZSA+PSAwKSB7XG4gICAgICAgICAgY2hpbGQgPSB0aGlzLl9maXJzdDtcblxuICAgICAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICAgICAgbmV4dCA9IGNoaWxkLl9uZXh0O1xuXG4gICAgICAgICAgICBpZiAoKGNoaWxkLl9hY3QgfHwgdGltZSA+PSBjaGlsZC5fc3RhcnQpICYmIGNoaWxkLl90cyAmJiBwYXVzZVR3ZWVuICE9PSBjaGlsZCkge1xuICAgICAgICAgICAgICBpZiAoY2hpbGQucGFyZW50ICE9PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKHRvdGFsVGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNoaWxkLnJlbmRlcihjaGlsZC5fdHMgPiAwID8gKHRpbWUgLSBjaGlsZC5fc3RhcnQpICogY2hpbGQuX3RzIDogKGNoaWxkLl9kaXJ0eSA/IGNoaWxkLnRvdGFsRHVyYXRpb24oKSA6IGNoaWxkLl90RHVyKSArICh0aW1lIC0gY2hpbGQuX3N0YXJ0KSAqIGNoaWxkLl90cywgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblxuICAgICAgICAgICAgICBpZiAodGltZSAhPT0gdGhpcy5fdGltZSB8fCAhdGhpcy5fdHMgJiYgIXByZXZQYXVzZWQpIHtcbiAgICAgICAgICAgICAgICBwYXVzZVR3ZWVuID0gMDtcbiAgICAgICAgICAgICAgICBuZXh0ICYmICh0VGltZSArPSB0aGlzLl96VGltZSA9IC1fdGlueU51bSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2hpbGQgPSBuZXh0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGlsZCA9IHRoaXMuX2xhc3Q7XG4gICAgICAgICAgdmFyIGFkanVzdGVkVGltZSA9IHRvdGFsVGltZSA8IDAgPyB0b3RhbFRpbWUgOiB0aW1lO1xuXG4gICAgICAgICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICAgICAgICBuZXh0ID0gY2hpbGQuX3ByZXY7XG5cbiAgICAgICAgICAgIGlmICgoY2hpbGQuX2FjdCB8fCBhZGp1c3RlZFRpbWUgPD0gY2hpbGQuX2VuZCkgJiYgY2hpbGQuX3RzICYmIHBhdXNlVHdlZW4gIT09IGNoaWxkKSB7XG4gICAgICAgICAgICAgIGlmIChjaGlsZC5wYXJlbnQgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXIodG90YWxUaW1lLCBzdXBwcmVzc0V2ZW50cywgZm9yY2UpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2hpbGQucmVuZGVyKGNoaWxkLl90cyA+IDAgPyAoYWRqdXN0ZWRUaW1lIC0gY2hpbGQuX3N0YXJ0KSAqIGNoaWxkLl90cyA6IChjaGlsZC5fZGlydHkgPyBjaGlsZC50b3RhbER1cmF0aW9uKCkgOiBjaGlsZC5fdER1cikgKyAoYWRqdXN0ZWRUaW1lIC0gY2hpbGQuX3N0YXJ0KSAqIGNoaWxkLl90cywgc3VwcHJlc3NFdmVudHMsIGZvcmNlIHx8IF9yZXZlcnRpbmcgJiYgKGNoaWxkLl9pbml0dGVkIHx8IGNoaWxkLl9zdGFydEF0KSk7XG5cbiAgICAgICAgICAgICAgaWYgKHRpbWUgIT09IHRoaXMuX3RpbWUgfHwgIXRoaXMuX3RzICYmICFwcmV2UGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgcGF1c2VUd2VlbiA9IDA7XG4gICAgICAgICAgICAgICAgbmV4dCAmJiAodFRpbWUgKz0gdGhpcy5felRpbWUgPSBhZGp1c3RlZFRpbWUgPyAtX3RpbnlOdW0gOiBfdGlueU51bSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2hpbGQgPSBuZXh0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXVzZVR3ZWVuICYmICFzdXBwcmVzc0V2ZW50cykge1xuICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICBwYXVzZVR3ZWVuLnJlbmRlcih0aW1lID49IHByZXZUaW1lID8gMCA6IC1fdGlueU51bSkuX3pUaW1lID0gdGltZSA+PSBwcmV2VGltZSA/IDEgOiAtMTtcblxuICAgICAgICAgIGlmICh0aGlzLl90cykge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnQgPSBwcmV2U3RhcnQ7XG5cbiAgICAgICAgICAgIF9zZXRFbmQodGhpcyk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcih0b3RhbFRpbWUsIHN1cHByZXNzRXZlbnRzLCBmb3JjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fb25VcGRhdGUgJiYgIXN1cHByZXNzRXZlbnRzICYmIF9jYWxsYmFjayh0aGlzLCBcIm9uVXBkYXRlXCIsIHRydWUpO1xuICAgICAgICBpZiAodFRpbWUgPT09IHREdXIgJiYgdGhpcy5fdFRpbWUgPj0gdGhpcy50b3RhbER1cmF0aW9uKCkgfHwgIXRUaW1lICYmIHByZXZUaW1lKSBpZiAocHJldlN0YXJ0ID09PSB0aGlzLl9zdGFydCB8fCBNYXRoLmFicyh0aW1lU2NhbGUpICE9PSBNYXRoLmFicyh0aGlzLl90cykpIGlmICghdGhpcy5fbG9jaykge1xuICAgICAgICAgICh0b3RhbFRpbWUgfHwgIWR1cikgJiYgKHRUaW1lID09PSB0RHVyICYmIHRoaXMuX3RzID4gMCB8fCAhdFRpbWUgJiYgdGhpcy5fdHMgPCAwKSAmJiBfcmVtb3ZlRnJvbVBhcmVudCh0aGlzLCAxKTtcblxuICAgICAgICAgIGlmICghc3VwcHJlc3NFdmVudHMgJiYgISh0b3RhbFRpbWUgPCAwICYmICFwcmV2VGltZSkgJiYgKHRUaW1lIHx8IHByZXZUaW1lIHx8ICF0RHVyKSkge1xuICAgICAgICAgICAgX2NhbGxiYWNrKHRoaXMsIHRUaW1lID09PSB0RHVyICYmIHRvdGFsVGltZSA+PSAwID8gXCJvbkNvbXBsZXRlXCIgOiBcIm9uUmV2ZXJzZUNvbXBsZXRlXCIsIHRydWUpO1xuXG4gICAgICAgICAgICB0aGlzLl9wcm9tICYmICEodFRpbWUgPCB0RHVyICYmIHRoaXMudGltZVNjYWxlKCkgPiAwKSAmJiB0aGlzLl9wcm9tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8yLmFkZCA9IGZ1bmN0aW9uIGFkZChjaGlsZCwgcG9zaXRpb24pIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBfaXNOdW1iZXIocG9zaXRpb24pIHx8IChwb3NpdGlvbiA9IF9wYXJzZVBvc2l0aW9uKHRoaXMsIHBvc2l0aW9uLCBjaGlsZCkpO1xuXG4gICAgICBpZiAoIShjaGlsZCBpbnN0YW5jZW9mIEFuaW1hdGlvbikpIHtcbiAgICAgICAgaWYgKF9pc0FycmF5KGNoaWxkKSkge1xuICAgICAgICAgIGNoaWxkLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5hZGQob2JqLCBwb3NpdGlvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2lzU3RyaW5nKGNoaWxkKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmFkZExhYmVsKGNoaWxkLCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2lzRnVuY3Rpb24oY2hpbGQpKSB7XG4gICAgICAgICAgY2hpbGQgPSBUd2Vlbi5kZWxheWVkQ2FsbCgwLCBjaGlsZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMgIT09IGNoaWxkID8gX2FkZFRvVGltZWxpbmUodGhpcywgY2hpbGQsIHBvc2l0aW9uKSA6IHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90bzIuZ2V0Q2hpbGRyZW4gPSBmdW5jdGlvbiBnZXRDaGlsZHJlbihuZXN0ZWQsIHR3ZWVucywgdGltZWxpbmVzLCBpZ25vcmVCZWZvcmVUaW1lKSB7XG4gICAgICBpZiAobmVzdGVkID09PSB2b2lkIDApIHtcbiAgICAgICAgbmVzdGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR3ZWVucyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHR3ZWVucyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aW1lbGluZXMgPT09IHZvaWQgMCkge1xuICAgICAgICB0aW1lbGluZXMgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaWdub3JlQmVmb3JlVGltZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGlnbm9yZUJlZm9yZVRpbWUgPSAtX2JpZ051bTtcbiAgICAgIH1cblxuICAgICAgdmFyIGEgPSBbXSxcbiAgICAgICAgICBjaGlsZCA9IHRoaXMuX2ZpcnN0O1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgaWYgKGNoaWxkLl9zdGFydCA+PSBpZ25vcmVCZWZvcmVUaW1lKSB7XG4gICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVHdlZW4pIHtcbiAgICAgICAgICAgIHR3ZWVucyAmJiBhLnB1c2goY2hpbGQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aW1lbGluZXMgJiYgYS5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIG5lc3RlZCAmJiBhLnB1c2guYXBwbHkoYSwgY2hpbGQuZ2V0Q2hpbGRyZW4odHJ1ZSwgdHdlZW5zLCB0aW1lbGluZXMpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZCA9IGNoaWxkLl9uZXh0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5nZXRCeUlkID0gZnVuY3Rpb24gZ2V0QnlJZChpZCkge1xuICAgICAgdmFyIGFuaW1hdGlvbnMgPSB0aGlzLmdldENoaWxkcmVuKDEsIDEsIDEpLFxuICAgICAgICAgIGkgPSBhbmltYXRpb25zLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uc1tpXS52YXJzLmlkID09PSBpZCkge1xuICAgICAgICAgIHJldHVybiBhbmltYXRpb25zW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzIucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKGNoaWxkKSB7XG4gICAgICBpZiAoX2lzU3RyaW5nKGNoaWxkKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVMYWJlbChjaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfaXNGdW5jdGlvbihjaGlsZCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2lsbFR3ZWVuc09mKGNoaWxkKTtcbiAgICAgIH1cblxuICAgICAgX3JlbW92ZUxpbmtlZExpc3RJdGVtKHRoaXMsIGNoaWxkKTtcblxuICAgICAgaWYgKGNoaWxkID09PSB0aGlzLl9yZWNlbnQpIHtcbiAgICAgICAgdGhpcy5fcmVjZW50ID0gdGhpcy5fbGFzdDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF91bmNhY2hlKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8yLnRvdGFsVGltZSA9IGZ1bmN0aW9uIHRvdGFsVGltZShfdG90YWxUaW1lMiwgc3VwcHJlc3NFdmVudHMpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdFRpbWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2ZvcmNpbmcgPSAxO1xuXG4gICAgICBpZiAoIXRoaXMuX2RwICYmIHRoaXMuX3RzKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gX3JvdW5kUHJlY2lzZShfdGlja2VyLnRpbWUgLSAodGhpcy5fdHMgPiAwID8gX3RvdGFsVGltZTIgLyB0aGlzLl90cyA6ICh0aGlzLnRvdGFsRHVyYXRpb24oKSAtIF90b3RhbFRpbWUyKSAvIC10aGlzLl90cykpO1xuICAgICAgfVxuXG4gICAgICBfQW5pbWF0aW9uLnByb3RvdHlwZS50b3RhbFRpbWUuY2FsbCh0aGlzLCBfdG90YWxUaW1lMiwgc3VwcHJlc3NFdmVudHMpO1xuXG4gICAgICB0aGlzLl9mb3JjaW5nID0gMDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8yLmFkZExhYmVsID0gZnVuY3Rpb24gYWRkTGFiZWwobGFiZWwsIHBvc2l0aW9uKSB7XG4gICAgICB0aGlzLmxhYmVsc1tsYWJlbF0gPSBfcGFyc2VQb3NpdGlvbih0aGlzLCBwb3NpdGlvbik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5yZW1vdmVMYWJlbCA9IGZ1bmN0aW9uIHJlbW92ZUxhYmVsKGxhYmVsKSB7XG4gICAgICBkZWxldGUgdGhpcy5sYWJlbHNbbGFiZWxdO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90bzIuYWRkUGF1c2UgPSBmdW5jdGlvbiBhZGRQYXVzZShwb3NpdGlvbiwgY2FsbGJhY2ssIHBhcmFtcykge1xuICAgICAgdmFyIHQgPSBUd2Vlbi5kZWxheWVkQ2FsbCgwLCBjYWxsYmFjayB8fCBfZW1wdHlGdW5jLCBwYXJhbXMpO1xuICAgICAgdC5kYXRhID0gXCJpc1BhdXNlXCI7XG4gICAgICB0aGlzLl9oYXNQYXVzZSA9IDE7XG4gICAgICByZXR1cm4gX2FkZFRvVGltZWxpbmUodGhpcywgdCwgX3BhcnNlUG9zaXRpb24odGhpcywgcG9zaXRpb24pKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5yZW1vdmVQYXVzZSA9IGZ1bmN0aW9uIHJlbW92ZVBhdXNlKHBvc2l0aW9uKSB7XG4gICAgICB2YXIgY2hpbGQgPSB0aGlzLl9maXJzdDtcbiAgICAgIHBvc2l0aW9uID0gX3BhcnNlUG9zaXRpb24odGhpcywgcG9zaXRpb24pO1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgaWYgKGNoaWxkLl9zdGFydCA9PT0gcG9zaXRpb24gJiYgY2hpbGQuZGF0YSA9PT0gXCJpc1BhdXNlXCIpIHtcbiAgICAgICAgICBfcmVtb3ZlRnJvbVBhcmVudChjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZCA9IGNoaWxkLl9uZXh0O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8yLmtpbGxUd2VlbnNPZiA9IGZ1bmN0aW9uIGtpbGxUd2VlbnNPZih0YXJnZXRzLCBwcm9wcywgb25seUFjdGl2ZSkge1xuICAgICAgdmFyIHR3ZWVucyA9IHRoaXMuZ2V0VHdlZW5zT2YodGFyZ2V0cywgb25seUFjdGl2ZSksXG4gICAgICAgICAgaSA9IHR3ZWVucy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgX292ZXJ3cml0aW5nVHdlZW4gIT09IHR3ZWVuc1tpXSAmJiB0d2VlbnNbaV0ua2lsbCh0YXJnZXRzLCBwcm9wcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8yLmdldFR3ZWVuc09mID0gZnVuY3Rpb24gZ2V0VHdlZW5zT2YodGFyZ2V0cywgb25seUFjdGl2ZSkge1xuICAgICAgdmFyIGEgPSBbXSxcbiAgICAgICAgICBwYXJzZWRUYXJnZXRzID0gdG9BcnJheSh0YXJnZXRzKSxcbiAgICAgICAgICBjaGlsZCA9IHRoaXMuX2ZpcnN0LFxuICAgICAgICAgIGlzR2xvYmFsVGltZSA9IF9pc051bWJlcihvbmx5QWN0aXZlKSxcbiAgICAgICAgICBjaGlsZHJlbjtcblxuICAgICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFR3ZWVuKSB7XG4gICAgICAgICAgaWYgKF9hcnJheUNvbnRhaW5zQW55KGNoaWxkLl90YXJnZXRzLCBwYXJzZWRUYXJnZXRzKSAmJiAoaXNHbG9iYWxUaW1lID8gKCFfb3ZlcndyaXRpbmdUd2VlbiB8fCBjaGlsZC5faW5pdHRlZCAmJiBjaGlsZC5fdHMpICYmIGNoaWxkLmdsb2JhbFRpbWUoMCkgPD0gb25seUFjdGl2ZSAmJiBjaGlsZC5nbG9iYWxUaW1lKGNoaWxkLnRvdGFsRHVyYXRpb24oKSkgPiBvbmx5QWN0aXZlIDogIW9ubHlBY3RpdmUgfHwgY2hpbGQuaXNBY3RpdmUoKSkpIHtcbiAgICAgICAgICAgIGEucHVzaChjaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKChjaGlsZHJlbiA9IGNoaWxkLmdldFR3ZWVuc09mKHBhcnNlZFRhcmdldHMsIG9ubHlBY3RpdmUpKS5sZW5ndGgpIHtcbiAgICAgICAgICBhLnB1c2guYXBwbHkoYSwgY2hpbGRyZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hpbGQgPSBjaGlsZC5fbmV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGE7XG4gICAgfTtcblxuICAgIF9wcm90bzIudHdlZW5UbyA9IGZ1bmN0aW9uIHR3ZWVuVG8ocG9zaXRpb24sIHZhcnMpIHtcbiAgICAgIHZhcnMgPSB2YXJzIHx8IHt9O1xuXG4gICAgICB2YXIgdGwgPSB0aGlzLFxuICAgICAgICAgIGVuZFRpbWUgPSBfcGFyc2VQb3NpdGlvbih0bCwgcG9zaXRpb24pLFxuICAgICAgICAgIF92YXJzID0gdmFycyxcbiAgICAgICAgICBzdGFydEF0ID0gX3ZhcnMuc3RhcnRBdCxcbiAgICAgICAgICBfb25TdGFydCA9IF92YXJzLm9uU3RhcnQsXG4gICAgICAgICAgb25TdGFydFBhcmFtcyA9IF92YXJzLm9uU3RhcnRQYXJhbXMsXG4gICAgICAgICAgaW1tZWRpYXRlUmVuZGVyID0gX3ZhcnMuaW1tZWRpYXRlUmVuZGVyLFxuICAgICAgICAgIGluaXR0ZWQsXG4gICAgICAgICAgdHdlZW4gPSBUd2Vlbi50byh0bCwgX3NldERlZmF1bHRzKHtcbiAgICAgICAgZWFzZTogdmFycy5lYXNlIHx8IFwibm9uZVwiLFxuICAgICAgICBsYXp5OiBmYWxzZSxcbiAgICAgICAgaW1tZWRpYXRlUmVuZGVyOiBmYWxzZSxcbiAgICAgICAgdGltZTogZW5kVGltZSxcbiAgICAgICAgb3ZlcndyaXRlOiBcImF1dG9cIixcbiAgICAgICAgZHVyYXRpb246IHZhcnMuZHVyYXRpb24gfHwgTWF0aC5hYnMoKGVuZFRpbWUgLSAoc3RhcnRBdCAmJiBcInRpbWVcIiBpbiBzdGFydEF0ID8gc3RhcnRBdC50aW1lIDogdGwuX3RpbWUpKSAvIHRsLnRpbWVTY2FsZSgpKSB8fCBfdGlueU51bSxcbiAgICAgICAgb25TdGFydDogZnVuY3Rpb24gb25TdGFydCgpIHtcbiAgICAgICAgICB0bC5wYXVzZSgpO1xuXG4gICAgICAgICAgaWYgKCFpbml0dGVkKSB7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB2YXJzLmR1cmF0aW9uIHx8IE1hdGguYWJzKChlbmRUaW1lIC0gKHN0YXJ0QXQgJiYgXCJ0aW1lXCIgaW4gc3RhcnRBdCA/IHN0YXJ0QXQudGltZSA6IHRsLl90aW1lKSkgLyB0bC50aW1lU2NhbGUoKSk7XG4gICAgICAgICAgICB0d2Vlbi5fZHVyICE9PSBkdXJhdGlvbiAmJiBfc2V0RHVyYXRpb24odHdlZW4sIGR1cmF0aW9uLCAwLCAxKS5yZW5kZXIodHdlZW4uX3RpbWUsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgaW5pdHRlZCA9IDE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX29uU3RhcnQgJiYgX29uU3RhcnQuYXBwbHkodHdlZW4sIG9uU3RhcnRQYXJhbXMgfHwgW10pO1xuICAgICAgICB9XG4gICAgICB9LCB2YXJzKSk7XG5cbiAgICAgIHJldHVybiBpbW1lZGlhdGVSZW5kZXIgPyB0d2Vlbi5yZW5kZXIoMCkgOiB0d2VlbjtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi50d2VlbkZyb21UbyA9IGZ1bmN0aW9uIHR3ZWVuRnJvbVRvKGZyb21Qb3NpdGlvbiwgdG9Qb3NpdGlvbiwgdmFycykge1xuICAgICAgcmV0dXJuIHRoaXMudHdlZW5Ubyh0b1Bvc2l0aW9uLCBfc2V0RGVmYXVsdHMoe1xuICAgICAgICBzdGFydEF0OiB7XG4gICAgICAgICAgdGltZTogX3BhcnNlUG9zaXRpb24odGhpcywgZnJvbVBvc2l0aW9uKVxuICAgICAgICB9XG4gICAgICB9LCB2YXJzKSk7XG4gICAgfTtcblxuICAgIF9wcm90bzIucmVjZW50ID0gZnVuY3Rpb24gcmVjZW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlY2VudDtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5uZXh0TGFiZWwgPSBmdW5jdGlvbiBuZXh0TGFiZWwoYWZ0ZXJUaW1lKSB7XG4gICAgICBpZiAoYWZ0ZXJUaW1lID09PSB2b2lkIDApIHtcbiAgICAgICAgYWZ0ZXJUaW1lID0gdGhpcy5fdGltZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9nZXRMYWJlbEluRGlyZWN0aW9uKHRoaXMsIF9wYXJzZVBvc2l0aW9uKHRoaXMsIGFmdGVyVGltZSkpO1xuICAgIH07XG5cbiAgICBfcHJvdG8yLnByZXZpb3VzTGFiZWwgPSBmdW5jdGlvbiBwcmV2aW91c0xhYmVsKGJlZm9yZVRpbWUpIHtcbiAgICAgIGlmIChiZWZvcmVUaW1lID09PSB2b2lkIDApIHtcbiAgICAgICAgYmVmb3JlVGltZSA9IHRoaXMuX3RpbWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfZ2V0TGFiZWxJbkRpcmVjdGlvbih0aGlzLCBfcGFyc2VQb3NpdGlvbih0aGlzLCBiZWZvcmVUaW1lKSwgMSk7XG4gICAgfTtcblxuICAgIF9wcm90bzIuY3VycmVudExhYmVsID0gZnVuY3Rpb24gY3VycmVudExhYmVsKHZhbHVlKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuc2Vlayh2YWx1ZSwgdHJ1ZSkgOiB0aGlzLnByZXZpb3VzTGFiZWwodGhpcy5fdGltZSArIF90aW55TnVtKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5zaGlmdENoaWxkcmVuID0gZnVuY3Rpb24gc2hpZnRDaGlsZHJlbihhbW91bnQsIGFkanVzdExhYmVscywgaWdub3JlQmVmb3JlVGltZSkge1xuICAgICAgaWYgKGlnbm9yZUJlZm9yZVRpbWUgPT09IHZvaWQgMCkge1xuICAgICAgICBpZ25vcmVCZWZvcmVUaW1lID0gMDtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoaWxkID0gdGhpcy5fZmlyc3QsXG4gICAgICAgICAgbGFiZWxzID0gdGhpcy5sYWJlbHMsXG4gICAgICAgICAgcDtcblxuICAgICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC5fc3RhcnQgPj0gaWdub3JlQmVmb3JlVGltZSkge1xuICAgICAgICAgIGNoaWxkLl9zdGFydCArPSBhbW91bnQ7XG4gICAgICAgICAgY2hpbGQuX2VuZCArPSBhbW91bnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZCA9IGNoaWxkLl9uZXh0O1xuICAgICAgfVxuXG4gICAgICBpZiAoYWRqdXN0TGFiZWxzKSB7XG4gICAgICAgIGZvciAocCBpbiBsYWJlbHMpIHtcbiAgICAgICAgICBpZiAobGFiZWxzW3BdID49IGlnbm9yZUJlZm9yZVRpbWUpIHtcbiAgICAgICAgICAgIGxhYmVsc1twXSArPSBhbW91bnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdW5jYWNoZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5pbnZhbGlkYXRlID0gZnVuY3Rpb24gaW52YWxpZGF0ZShzb2Z0KSB7XG4gICAgICB2YXIgY2hpbGQgPSB0aGlzLl9maXJzdDtcbiAgICAgIHRoaXMuX2xvY2sgPSAwO1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgY2hpbGQuaW52YWxpZGF0ZShzb2Z0KTtcbiAgICAgICAgY2hpbGQgPSBjaGlsZC5fbmV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9BbmltYXRpb24ucHJvdG90eXBlLmludmFsaWRhdGUuY2FsbCh0aGlzLCBzb2Z0KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKGluY2x1ZGVMYWJlbHMpIHtcbiAgICAgIGlmIChpbmNsdWRlTGFiZWxzID09PSB2b2lkIDApIHtcbiAgICAgICAgaW5jbHVkZUxhYmVscyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGlsZCA9IHRoaXMuX2ZpcnN0LFxuICAgICAgICAgIG5leHQ7XG5cbiAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICBuZXh0ID0gY2hpbGQuX25leHQ7XG4gICAgICAgIHRoaXMucmVtb3ZlKGNoaWxkKTtcbiAgICAgICAgY2hpbGQgPSBuZXh0O1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9kcCAmJiAodGhpcy5fdGltZSA9IHRoaXMuX3RUaW1lID0gdGhpcy5fcFRpbWUgPSAwKTtcbiAgICAgIGluY2x1ZGVMYWJlbHMgJiYgKHRoaXMubGFiZWxzID0ge30pO1xuICAgICAgcmV0dXJuIF91bmNhY2hlKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8yLnRvdGFsRHVyYXRpb24gPSBmdW5jdGlvbiB0b3RhbER1cmF0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgbWF4ID0gMCxcbiAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICBjaGlsZCA9IHNlbGYuX2xhc3QsXG4gICAgICAgICAgcHJldlN0YXJ0ID0gX2JpZ051bSxcbiAgICAgICAgICBwcmV2LFxuICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgIHBhcmVudDtcblxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYudGltZVNjYWxlKChzZWxmLl9yZXBlYXQgPCAwID8gc2VsZi5kdXJhdGlvbigpIDogc2VsZi50b3RhbER1cmF0aW9uKCkpIC8gKHNlbGYucmV2ZXJzZWQoKSA/IC12YWx1ZSA6IHZhbHVlKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLl9kaXJ0eSkge1xuICAgICAgICBwYXJlbnQgPSBzZWxmLnBhcmVudDtcblxuICAgICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgICBwcmV2ID0gY2hpbGQuX3ByZXY7XG4gICAgICAgICAgY2hpbGQuX2RpcnR5ICYmIGNoaWxkLnRvdGFsRHVyYXRpb24oKTtcbiAgICAgICAgICBzdGFydCA9IGNoaWxkLl9zdGFydDtcblxuICAgICAgICAgIGlmIChzdGFydCA+IHByZXZTdGFydCAmJiBzZWxmLl9zb3J0ICYmIGNoaWxkLl90cyAmJiAhc2VsZi5fbG9jaykge1xuICAgICAgICAgICAgc2VsZi5fbG9jayA9IDE7XG4gICAgICAgICAgICBfYWRkVG9UaW1lbGluZShzZWxmLCBjaGlsZCwgc3RhcnQgLSBjaGlsZC5fZGVsYXksIDEpLl9sb2NrID0gMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJldlN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHN0YXJ0IDwgMCAmJiBjaGlsZC5fdHMpIHtcbiAgICAgICAgICAgIG1heCAtPSBzdGFydDtcblxuICAgICAgICAgICAgaWYgKCFwYXJlbnQgJiYgIXNlbGYuX2RwIHx8IHBhcmVudCAmJiBwYXJlbnQuc21vb3RoQ2hpbGRUaW1pbmcpIHtcbiAgICAgICAgICAgICAgc2VsZi5fc3RhcnQgKz0gc3RhcnQgLyBzZWxmLl90cztcbiAgICAgICAgICAgICAgc2VsZi5fdGltZSAtPSBzdGFydDtcbiAgICAgICAgICAgICAgc2VsZi5fdFRpbWUgLT0gc3RhcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuc2hpZnRDaGlsZHJlbigtc3RhcnQsIGZhbHNlLCAtMWU5OTkpO1xuICAgICAgICAgICAgcHJldlN0YXJ0ID0gMDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjaGlsZC5fZW5kID4gbWF4ICYmIGNoaWxkLl90cyAmJiAobWF4ID0gY2hpbGQuX2VuZCk7XG4gICAgICAgICAgY2hpbGQgPSBwcmV2O1xuICAgICAgICB9XG5cbiAgICAgICAgX3NldER1cmF0aW9uKHNlbGYsIHNlbGYgPT09IF9nbG9iYWxUaW1lbGluZSAmJiBzZWxmLl90aW1lID4gbWF4ID8gc2VsZi5fdGltZSA6IG1heCwgMSwgMSk7XG5cbiAgICAgICAgc2VsZi5fZGlydHkgPSAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZi5fdER1cjtcbiAgICB9O1xuXG4gICAgVGltZWxpbmUudXBkYXRlUm9vdCA9IGZ1bmN0aW9uIHVwZGF0ZVJvb3QodGltZSkge1xuICAgICAgaWYgKF9nbG9iYWxUaW1lbGluZS5fdHMpIHtcbiAgICAgICAgX2xhenlTYWZlUmVuZGVyKF9nbG9iYWxUaW1lbGluZSwgX3BhcmVudFRvQ2hpbGRUb3RhbFRpbWUodGltZSwgX2dsb2JhbFRpbWVsaW5lKSk7XG5cbiAgICAgICAgX2xhc3RSZW5kZXJlZEZyYW1lID0gX3RpY2tlci5mcmFtZTtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aWNrZXIuZnJhbWUgPj0gX25leHRHQ0ZyYW1lKSB7XG4gICAgICAgIF9uZXh0R0NGcmFtZSArPSBfY29uZmlnLmF1dG9TbGVlcCB8fCAxMjA7XG4gICAgICAgIHZhciBjaGlsZCA9IF9nbG9iYWxUaW1lbGluZS5fZmlyc3Q7XG4gICAgICAgIGlmICghY2hpbGQgfHwgIWNoaWxkLl90cykgaWYgKF9jb25maWcuYXV0b1NsZWVwICYmIF90aWNrZXIuX2xpc3RlbmVycy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgd2hpbGUgKGNoaWxkICYmICFjaGlsZC5fdHMpIHtcbiAgICAgICAgICAgIGNoaWxkID0gY2hpbGQuX25leHQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2hpbGQgfHwgX3RpY2tlci5zbGVlcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lbGluZTtcbiAgfShBbmltYXRpb24pO1xuXG4gIF9zZXREZWZhdWx0cyhUaW1lbGluZS5wcm90b3R5cGUsIHtcbiAgICBfbG9jazogMCxcbiAgICBfaGFzUGF1c2U6IDAsXG4gICAgX2ZvcmNpbmc6IDBcbiAgfSk7XG5cbiAgdmFyIF9hZGRDb21wbGV4U3RyaW5nUHJvcFR3ZWVuID0gZnVuY3Rpb24gX2FkZENvbXBsZXhTdHJpbmdQcm9wVHdlZW4odGFyZ2V0LCBwcm9wLCBzdGFydCwgZW5kLCBzZXR0ZXIsIHN0cmluZ0ZpbHRlciwgZnVuY1BhcmFtKSB7XG4gICAgdmFyIHB0ID0gbmV3IFByb3BUd2Vlbih0aGlzLl9wdCwgdGFyZ2V0LCBwcm9wLCAwLCAxLCBfcmVuZGVyQ29tcGxleFN0cmluZywgbnVsbCwgc2V0dGVyKSxcbiAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICBtYXRjaEluZGV4ID0gMCxcbiAgICAgICAgcmVzdWx0LFxuICAgICAgICBzdGFydE51bXMsXG4gICAgICAgIGNvbG9yLFxuICAgICAgICBlbmROdW0sXG4gICAgICAgIGNodW5rLFxuICAgICAgICBzdGFydE51bSxcbiAgICAgICAgaGFzUmFuZG9tLFxuICAgICAgICBhO1xuICAgIHB0LmIgPSBzdGFydDtcbiAgICBwdC5lID0gZW5kO1xuICAgIHN0YXJ0ICs9IFwiXCI7XG4gICAgZW5kICs9IFwiXCI7XG5cbiAgICBpZiAoaGFzUmFuZG9tID0gfmVuZC5pbmRleE9mKFwicmFuZG9tKFwiKSkge1xuICAgICAgZW5kID0gX3JlcGxhY2VSYW5kb20oZW5kKTtcbiAgICB9XG5cbiAgICBpZiAoc3RyaW5nRmlsdGVyKSB7XG4gICAgICBhID0gW3N0YXJ0LCBlbmRdO1xuICAgICAgc3RyaW5nRmlsdGVyKGEsIHRhcmdldCwgcHJvcCk7XG4gICAgICBzdGFydCA9IGFbMF07XG4gICAgICBlbmQgPSBhWzFdO1xuICAgIH1cblxuICAgIHN0YXJ0TnVtcyA9IHN0YXJ0Lm1hdGNoKF9jb21wbGV4U3RyaW5nTnVtRXhwKSB8fCBbXTtcblxuICAgIHdoaWxlIChyZXN1bHQgPSBfY29tcGxleFN0cmluZ051bUV4cC5leGVjKGVuZCkpIHtcbiAgICAgIGVuZE51bSA9IHJlc3VsdFswXTtcbiAgICAgIGNodW5rID0gZW5kLnN1YnN0cmluZyhpbmRleCwgcmVzdWx0LmluZGV4KTtcblxuICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgIGNvbG9yID0gKGNvbG9yICsgMSkgJSA1O1xuICAgICAgfSBlbHNlIGlmIChjaHVuay5zdWJzdHIoLTUpID09PSBcInJnYmEoXCIpIHtcbiAgICAgICAgY29sb3IgPSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW5kTnVtICE9PSBzdGFydE51bXNbbWF0Y2hJbmRleCsrXSkge1xuICAgICAgICBzdGFydE51bSA9IHBhcnNlRmxvYXQoc3RhcnROdW1zW21hdGNoSW5kZXggLSAxXSkgfHwgMDtcbiAgICAgICAgcHQuX3B0ID0ge1xuICAgICAgICAgIF9uZXh0OiBwdC5fcHQsXG4gICAgICAgICAgcDogY2h1bmsgfHwgbWF0Y2hJbmRleCA9PT0gMSA/IGNodW5rIDogXCIsXCIsXG4gICAgICAgICAgczogc3RhcnROdW0sXG4gICAgICAgICAgYzogZW5kTnVtLmNoYXJBdCgxKSA9PT0gXCI9XCIgPyBfcGFyc2VSZWxhdGl2ZShzdGFydE51bSwgZW5kTnVtKSAtIHN0YXJ0TnVtIDogcGFyc2VGbG9hdChlbmROdW0pIC0gc3RhcnROdW0sXG4gICAgICAgICAgbTogY29sb3IgJiYgY29sb3IgPCA0ID8gTWF0aC5yb3VuZCA6IDBcbiAgICAgICAgfTtcbiAgICAgICAgaW5kZXggPSBfY29tcGxleFN0cmluZ051bUV4cC5sYXN0SW5kZXg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHQuYyA9IGluZGV4IDwgZW5kLmxlbmd0aCA/IGVuZC5zdWJzdHJpbmcoaW5kZXgsIGVuZC5sZW5ndGgpIDogXCJcIjtcbiAgICBwdC5mcCA9IGZ1bmNQYXJhbTtcblxuICAgIGlmIChfcmVsRXhwLnRlc3QoZW5kKSB8fCBoYXNSYW5kb20pIHtcbiAgICAgIHB0LmUgPSAwO1xuICAgIH1cblxuICAgIHRoaXMuX3B0ID0gcHQ7XG4gICAgcmV0dXJuIHB0O1xuICB9LFxuICAgICAgX2FkZFByb3BUd2VlbiA9IGZ1bmN0aW9uIF9hZGRQcm9wVHdlZW4odGFyZ2V0LCBwcm9wLCBzdGFydCwgZW5kLCBpbmRleCwgdGFyZ2V0cywgbW9kaWZpZXIsIHN0cmluZ0ZpbHRlciwgZnVuY1BhcmFtLCBvcHRpb25hbCkge1xuICAgIF9pc0Z1bmN0aW9uKGVuZCkgJiYgKGVuZCA9IGVuZChpbmRleCB8fCAwLCB0YXJnZXQsIHRhcmdldHMpKTtcbiAgICB2YXIgY3VycmVudFZhbHVlID0gdGFyZ2V0W3Byb3BdLFxuICAgICAgICBwYXJzZWRTdGFydCA9IHN0YXJ0ICE9PSBcImdldFwiID8gc3RhcnQgOiAhX2lzRnVuY3Rpb24oY3VycmVudFZhbHVlKSA/IGN1cnJlbnRWYWx1ZSA6IGZ1bmNQYXJhbSA/IHRhcmdldFtwcm9wLmluZGV4T2YoXCJzZXRcIikgfHwgIV9pc0Z1bmN0aW9uKHRhcmdldFtcImdldFwiICsgcHJvcC5zdWJzdHIoMyldKSA/IHByb3AgOiBcImdldFwiICsgcHJvcC5zdWJzdHIoMyldKGZ1bmNQYXJhbSkgOiB0YXJnZXRbcHJvcF0oKSxcbiAgICAgICAgc2V0dGVyID0gIV9pc0Z1bmN0aW9uKGN1cnJlbnRWYWx1ZSkgPyBfc2V0dGVyUGxhaW4gOiBmdW5jUGFyYW0gPyBfc2V0dGVyRnVuY1dpdGhQYXJhbSA6IF9zZXR0ZXJGdW5jLFxuICAgICAgICBwdDtcblxuICAgIGlmIChfaXNTdHJpbmcoZW5kKSkge1xuICAgICAgaWYgKH5lbmQuaW5kZXhPZihcInJhbmRvbShcIikpIHtcbiAgICAgICAgZW5kID0gX3JlcGxhY2VSYW5kb20oZW5kKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVuZC5jaGFyQXQoMSkgPT09IFwiPVwiKSB7XG4gICAgICAgIHB0ID0gX3BhcnNlUmVsYXRpdmUocGFyc2VkU3RhcnQsIGVuZCkgKyAoZ2V0VW5pdChwYXJzZWRTdGFydCkgfHwgMCk7XG5cbiAgICAgICAgaWYgKHB0IHx8IHB0ID09PSAwKSB7XG4gICAgICAgICAgZW5kID0gcHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbmFsIHx8IHBhcnNlZFN0YXJ0ICE9PSBlbmQgfHwgX2ZvcmNlQWxsUHJvcFR3ZWVucykge1xuICAgICAgaWYgKCFpc05hTihwYXJzZWRTdGFydCAqIGVuZCkgJiYgZW5kICE9PSBcIlwiKSB7XG4gICAgICAgIHB0ID0gbmV3IFByb3BUd2Vlbih0aGlzLl9wdCwgdGFyZ2V0LCBwcm9wLCArcGFyc2VkU3RhcnQgfHwgMCwgZW5kIC0gKHBhcnNlZFN0YXJ0IHx8IDApLCB0eXBlb2YgY3VycmVudFZhbHVlID09PSBcImJvb2xlYW5cIiA/IF9yZW5kZXJCb29sZWFuIDogX3JlbmRlclBsYWluLCAwLCBzZXR0ZXIpO1xuICAgICAgICBmdW5jUGFyYW0gJiYgKHB0LmZwID0gZnVuY1BhcmFtKTtcbiAgICAgICAgbW9kaWZpZXIgJiYgcHQubW9kaWZpZXIobW9kaWZpZXIsIHRoaXMsIHRhcmdldCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9wdCA9IHB0O1xuICAgICAgfVxuXG4gICAgICAhY3VycmVudFZhbHVlICYmICEocHJvcCBpbiB0YXJnZXQpICYmIF9taXNzaW5nUGx1Z2luKHByb3AsIGVuZCk7XG4gICAgICByZXR1cm4gX2FkZENvbXBsZXhTdHJpbmdQcm9wVHdlZW4uY2FsbCh0aGlzLCB0YXJnZXQsIHByb3AsIHBhcnNlZFN0YXJ0LCBlbmQsIHNldHRlciwgc3RyaW5nRmlsdGVyIHx8IF9jb25maWcuc3RyaW5nRmlsdGVyLCBmdW5jUGFyYW0pO1xuICAgIH1cbiAgfSxcbiAgICAgIF9wcm9jZXNzVmFycyA9IGZ1bmN0aW9uIF9wcm9jZXNzVmFycyh2YXJzLCBpbmRleCwgdGFyZ2V0LCB0YXJnZXRzLCB0d2Vlbikge1xuICAgIF9pc0Z1bmN0aW9uKHZhcnMpICYmICh2YXJzID0gX3BhcnNlRnVuY09yU3RyaW5nKHZhcnMsIHR3ZWVuLCBpbmRleCwgdGFyZ2V0LCB0YXJnZXRzKSk7XG5cbiAgICBpZiAoIV9pc09iamVjdCh2YXJzKSB8fCB2YXJzLnN0eWxlICYmIHZhcnMubm9kZVR5cGUgfHwgX2lzQXJyYXkodmFycykgfHwgX2lzVHlwZWRBcnJheSh2YXJzKSkge1xuICAgICAgcmV0dXJuIF9pc1N0cmluZyh2YXJzKSA/IF9wYXJzZUZ1bmNPclN0cmluZyh2YXJzLCB0d2VlbiwgaW5kZXgsIHRhcmdldCwgdGFyZ2V0cykgOiB2YXJzO1xuICAgIH1cblxuICAgIHZhciBjb3B5ID0ge30sXG4gICAgICAgIHA7XG5cbiAgICBmb3IgKHAgaW4gdmFycykge1xuICAgICAgY29weVtwXSA9IF9wYXJzZUZ1bmNPclN0cmluZyh2YXJzW3BdLCB0d2VlbiwgaW5kZXgsIHRhcmdldCwgdGFyZ2V0cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvcHk7XG4gIH0sXG4gICAgICBfY2hlY2tQbHVnaW4gPSBmdW5jdGlvbiBfY2hlY2tQbHVnaW4ocHJvcGVydHksIHZhcnMsIHR3ZWVuLCBpbmRleCwgdGFyZ2V0LCB0YXJnZXRzKSB7XG4gICAgdmFyIHBsdWdpbiwgcHQsIHB0TG9va3VwLCBpO1xuXG4gICAgaWYgKF9wbHVnaW5zW3Byb3BlcnR5XSAmJiAocGx1Z2luID0gbmV3IF9wbHVnaW5zW3Byb3BlcnR5XSgpKS5pbml0KHRhcmdldCwgcGx1Z2luLnJhd1ZhcnMgPyB2YXJzW3Byb3BlcnR5XSA6IF9wcm9jZXNzVmFycyh2YXJzW3Byb3BlcnR5XSwgaW5kZXgsIHRhcmdldCwgdGFyZ2V0cywgdHdlZW4pLCB0d2VlbiwgaW5kZXgsIHRhcmdldHMpICE9PSBmYWxzZSkge1xuICAgICAgdHdlZW4uX3B0ID0gcHQgPSBuZXcgUHJvcFR3ZWVuKHR3ZWVuLl9wdCwgdGFyZ2V0LCBwcm9wZXJ0eSwgMCwgMSwgcGx1Z2luLnJlbmRlciwgcGx1Z2luLCAwLCBwbHVnaW4ucHJpb3JpdHkpO1xuXG4gICAgICBpZiAodHdlZW4gIT09IF9xdWlja1R3ZWVuKSB7XG4gICAgICAgIHB0TG9va3VwID0gdHdlZW4uX3B0TG9va3VwW3R3ZWVuLl90YXJnZXRzLmluZGV4T2YodGFyZ2V0KV07XG4gICAgICAgIGkgPSBwbHVnaW4uX3Byb3BzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgcHRMb29rdXBbcGx1Z2luLl9wcm9wc1tpXV0gPSBwdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwbHVnaW47XG4gIH0sXG4gICAgICBfb3ZlcndyaXRpbmdUd2VlbixcbiAgICAgIF9mb3JjZUFsbFByb3BUd2VlbnMsXG4gICAgICBfaW5pdFR3ZWVuID0gZnVuY3Rpb24gX2luaXRUd2Vlbih0d2VlbiwgdGltZSwgdFRpbWUpIHtcbiAgICB2YXIgdmFycyA9IHR3ZWVuLnZhcnMsXG4gICAgICAgIGVhc2UgPSB2YXJzLmVhc2UsXG4gICAgICAgIHN0YXJ0QXQgPSB2YXJzLnN0YXJ0QXQsXG4gICAgICAgIGltbWVkaWF0ZVJlbmRlciA9IHZhcnMuaW1tZWRpYXRlUmVuZGVyLFxuICAgICAgICBsYXp5ID0gdmFycy5sYXp5LFxuICAgICAgICBvblVwZGF0ZSA9IHZhcnMub25VcGRhdGUsXG4gICAgICAgIHJ1bkJhY2t3YXJkcyA9IHZhcnMucnVuQmFja3dhcmRzLFxuICAgICAgICB5b3lvRWFzZSA9IHZhcnMueW95b0Vhc2UsXG4gICAgICAgIGtleWZyYW1lcyA9IHZhcnMua2V5ZnJhbWVzLFxuICAgICAgICBhdXRvUmV2ZXJ0ID0gdmFycy5hdXRvUmV2ZXJ0LFxuICAgICAgICBkdXIgPSB0d2Vlbi5fZHVyLFxuICAgICAgICBwcmV2U3RhcnRBdCA9IHR3ZWVuLl9zdGFydEF0LFxuICAgICAgICB0YXJnZXRzID0gdHdlZW4uX3RhcmdldHMsXG4gICAgICAgIHBhcmVudCA9IHR3ZWVuLnBhcmVudCxcbiAgICAgICAgZnVsbFRhcmdldHMgPSBwYXJlbnQgJiYgcGFyZW50LmRhdGEgPT09IFwibmVzdGVkXCIgPyBwYXJlbnQudmFycy50YXJnZXRzIDogdGFyZ2V0cyxcbiAgICAgICAgYXV0b092ZXJ3cml0ZSA9IHR3ZWVuLl9vdmVyd3JpdGUgPT09IFwiYXV0b1wiICYmICFfc3VwcHJlc3NPdmVyd3JpdGVzLFxuICAgICAgICB0bCA9IHR3ZWVuLnRpbWVsaW5lLFxuICAgICAgICBjbGVhblZhcnMsXG4gICAgICAgIGksXG4gICAgICAgIHAsXG4gICAgICAgIHB0LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIGhhc1ByaW9yaXR5LFxuICAgICAgICBnc0RhdGEsXG4gICAgICAgIGhhcm5lc3MsXG4gICAgICAgIHBsdWdpbixcbiAgICAgICAgcHRMb29rdXAsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBoYXJuZXNzVmFycyxcbiAgICAgICAgb3ZlcndyaXR0ZW47XG4gICAgdGwgJiYgKCFrZXlmcmFtZXMgfHwgIWVhc2UpICYmIChlYXNlID0gXCJub25lXCIpO1xuICAgIHR3ZWVuLl9lYXNlID0gX3BhcnNlRWFzZShlYXNlLCBfZGVmYXVsdHMuZWFzZSk7XG4gICAgdHdlZW4uX3lFYXNlID0geW95b0Vhc2UgPyBfaW52ZXJ0RWFzZShfcGFyc2VFYXNlKHlveW9FYXNlID09PSB0cnVlID8gZWFzZSA6IHlveW9FYXNlLCBfZGVmYXVsdHMuZWFzZSkpIDogMDtcblxuICAgIGlmICh5b3lvRWFzZSAmJiB0d2Vlbi5feW95byAmJiAhdHdlZW4uX3JlcGVhdCkge1xuICAgICAgeW95b0Vhc2UgPSB0d2Vlbi5feUVhc2U7XG4gICAgICB0d2Vlbi5feUVhc2UgPSB0d2Vlbi5fZWFzZTtcbiAgICAgIHR3ZWVuLl9lYXNlID0geW95b0Vhc2U7XG4gICAgfVxuXG4gICAgdHdlZW4uX2Zyb20gPSAhdGwgJiYgISF2YXJzLnJ1bkJhY2t3YXJkcztcblxuICAgIGlmICghdGwgfHwga2V5ZnJhbWVzICYmICF2YXJzLnN0YWdnZXIpIHtcbiAgICAgIGhhcm5lc3MgPSB0YXJnZXRzWzBdID8gX2dldENhY2hlKHRhcmdldHNbMF0pLmhhcm5lc3MgOiAwO1xuICAgICAgaGFybmVzc1ZhcnMgPSBoYXJuZXNzICYmIHZhcnNbaGFybmVzcy5wcm9wXTtcbiAgICAgIGNsZWFuVmFycyA9IF9jb3B5RXhjbHVkaW5nKHZhcnMsIF9yZXNlcnZlZFByb3BzKTtcblxuICAgICAgaWYgKHByZXZTdGFydEF0KSB7XG4gICAgICAgIHByZXZTdGFydEF0Ll96VGltZSA8IDAgJiYgcHJldlN0YXJ0QXQucHJvZ3Jlc3MoMSk7XG4gICAgICAgIHRpbWUgPCAwICYmIHJ1bkJhY2t3YXJkcyAmJiBpbW1lZGlhdGVSZW5kZXIgJiYgIWF1dG9SZXZlcnQgPyBwcmV2U3RhcnRBdC5yZW5kZXIoLTEsIHRydWUpIDogcHJldlN0YXJ0QXQucmV2ZXJ0KHJ1bkJhY2t3YXJkcyAmJiBkdXIgPyBfcmV2ZXJ0Q29uZmlnTm9LaWxsIDogX3N0YXJ0QXRSZXZlcnRDb25maWcpO1xuICAgICAgICBwcmV2U3RhcnRBdC5fbGF6eSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydEF0KSB7XG4gICAgICAgIF9yZW1vdmVGcm9tUGFyZW50KHR3ZWVuLl9zdGFydEF0ID0gVHdlZW4uc2V0KHRhcmdldHMsIF9zZXREZWZhdWx0cyh7XG4gICAgICAgICAgZGF0YTogXCJpc1N0YXJ0XCIsXG4gICAgICAgICAgb3ZlcndyaXRlOiBmYWxzZSxcbiAgICAgICAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICAgICAgICBpbW1lZGlhdGVSZW5kZXI6IHRydWUsXG4gICAgICAgICAgbGF6eTogIXByZXZTdGFydEF0ICYmIF9pc05vdEZhbHNlKGxhenkpLFxuICAgICAgICAgIHN0YXJ0QXQ6IG51bGwsXG4gICAgICAgICAgZGVsYXk6IDAsXG4gICAgICAgICAgb25VcGRhdGU6IG9uVXBkYXRlICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfY2FsbGJhY2sodHdlZW4sIFwib25VcGRhdGVcIik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdGFnZ2VyOiAwXG4gICAgICAgIH0sIHN0YXJ0QXQpKSk7XG5cbiAgICAgICAgdHdlZW4uX3N0YXJ0QXQuX2RwID0gMDtcbiAgICAgICAgdHdlZW4uX3N0YXJ0QXQuX3NhdCA9IHR3ZWVuO1xuICAgICAgICB0aW1lIDwgMCAmJiAoX3JldmVydGluZyB8fCAhaW1tZWRpYXRlUmVuZGVyICYmICFhdXRvUmV2ZXJ0KSAmJiB0d2Vlbi5fc3RhcnRBdC5yZXZlcnQoX3JldmVydENvbmZpZ05vS2lsbCk7XG5cbiAgICAgICAgaWYgKGltbWVkaWF0ZVJlbmRlcikge1xuICAgICAgICAgIGlmIChkdXIgJiYgdGltZSA8PSAwICYmIHRUaW1lIDw9IDApIHtcbiAgICAgICAgICAgIHRpbWUgJiYgKHR3ZWVuLl96VGltZSA9IHRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChydW5CYWNrd2FyZHMgJiYgZHVyKSB7XG4gICAgICAgIGlmICghcHJldlN0YXJ0QXQpIHtcbiAgICAgICAgICB0aW1lICYmIChpbW1lZGlhdGVSZW5kZXIgPSBmYWxzZSk7XG4gICAgICAgICAgcCA9IF9zZXREZWZhdWx0cyh7XG4gICAgICAgICAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgICAgICAgICAgZGF0YTogXCJpc0Zyb21TdGFydFwiLFxuICAgICAgICAgICAgbGF6eTogaW1tZWRpYXRlUmVuZGVyICYmICFwcmV2U3RhcnRBdCAmJiBfaXNOb3RGYWxzZShsYXp5KSxcbiAgICAgICAgICAgIGltbWVkaWF0ZVJlbmRlcjogaW1tZWRpYXRlUmVuZGVyLFxuICAgICAgICAgICAgc3RhZ2dlcjogMCxcbiAgICAgICAgICAgIHBhcmVudDogcGFyZW50XG4gICAgICAgICAgfSwgY2xlYW5WYXJzKTtcbiAgICAgICAgICBoYXJuZXNzVmFycyAmJiAocFtoYXJuZXNzLnByb3BdID0gaGFybmVzc1ZhcnMpO1xuXG4gICAgICAgICAgX3JlbW92ZUZyb21QYXJlbnQodHdlZW4uX3N0YXJ0QXQgPSBUd2Vlbi5zZXQodGFyZ2V0cywgcCkpO1xuXG4gICAgICAgICAgdHdlZW4uX3N0YXJ0QXQuX2RwID0gMDtcbiAgICAgICAgICB0d2Vlbi5fc3RhcnRBdC5fc2F0ID0gdHdlZW47XG4gICAgICAgICAgdGltZSA8IDAgJiYgKF9yZXZlcnRpbmcgPyB0d2Vlbi5fc3RhcnRBdC5yZXZlcnQoX3JldmVydENvbmZpZ05vS2lsbCkgOiB0d2Vlbi5fc3RhcnRBdC5yZW5kZXIoLTEsIHRydWUpKTtcbiAgICAgICAgICB0d2Vlbi5felRpbWUgPSB0aW1lO1xuXG4gICAgICAgICAgaWYgKCFpbW1lZGlhdGVSZW5kZXIpIHtcbiAgICAgICAgICAgIF9pbml0VHdlZW4odHdlZW4uX3N0YXJ0QXQsIF90aW55TnVtLCBfdGlueU51bSk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdGltZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0d2Vlbi5fcHQgPSB0d2Vlbi5fcHRDYWNoZSA9IDA7XG4gICAgICBsYXp5ID0gZHVyICYmIF9pc05vdEZhbHNlKGxhenkpIHx8IGxhenkgJiYgIWR1cjtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICAgICAgZ3NEYXRhID0gdGFyZ2V0Ll9nc2FwIHx8IF9oYXJuZXNzKHRhcmdldHMpW2ldLl9nc2FwO1xuICAgICAgICB0d2Vlbi5fcHRMb29rdXBbaV0gPSBwdExvb2t1cCA9IHt9O1xuICAgICAgICBfbGF6eUxvb2t1cFtnc0RhdGEuaWRdICYmIF9sYXp5VHdlZW5zLmxlbmd0aCAmJiBfbGF6eVJlbmRlcigpO1xuICAgICAgICBpbmRleCA9IGZ1bGxUYXJnZXRzID09PSB0YXJnZXRzID8gaSA6IGZ1bGxUYXJnZXRzLmluZGV4T2YodGFyZ2V0KTtcblxuICAgICAgICBpZiAoaGFybmVzcyAmJiAocGx1Z2luID0gbmV3IGhhcm5lc3MoKSkuaW5pdCh0YXJnZXQsIGhhcm5lc3NWYXJzIHx8IGNsZWFuVmFycywgdHdlZW4sIGluZGV4LCBmdWxsVGFyZ2V0cykgIT09IGZhbHNlKSB7XG4gICAgICAgICAgdHdlZW4uX3B0ID0gcHQgPSBuZXcgUHJvcFR3ZWVuKHR3ZWVuLl9wdCwgdGFyZ2V0LCBwbHVnaW4ubmFtZSwgMCwgMSwgcGx1Z2luLnJlbmRlciwgcGx1Z2luLCAwLCBwbHVnaW4ucHJpb3JpdHkpO1xuXG4gICAgICAgICAgcGx1Z2luLl9wcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBwdExvb2t1cFtuYW1lXSA9IHB0O1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcGx1Z2luLnByaW9yaXR5ICYmIChoYXNQcmlvcml0eSA9IDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFoYXJuZXNzIHx8IGhhcm5lc3NWYXJzKSB7XG4gICAgICAgICAgZm9yIChwIGluIGNsZWFuVmFycykge1xuICAgICAgICAgICAgaWYgKF9wbHVnaW5zW3BdICYmIChwbHVnaW4gPSBfY2hlY2tQbHVnaW4ocCwgY2xlYW5WYXJzLCB0d2VlbiwgaW5kZXgsIHRhcmdldCwgZnVsbFRhcmdldHMpKSkge1xuICAgICAgICAgICAgICBwbHVnaW4ucHJpb3JpdHkgJiYgKGhhc1ByaW9yaXR5ID0gMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwdExvb2t1cFtwXSA9IHB0ID0gX2FkZFByb3BUd2Vlbi5jYWxsKHR3ZWVuLCB0YXJnZXQsIHAsIFwiZ2V0XCIsIGNsZWFuVmFyc1twXSwgaW5kZXgsIGZ1bGxUYXJnZXRzLCAwLCB2YXJzLnN0cmluZ0ZpbHRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHdlZW4uX29wICYmIHR3ZWVuLl9vcFtpXSAmJiB0d2Vlbi5raWxsKHRhcmdldCwgdHdlZW4uX29wW2ldKTtcblxuICAgICAgICBpZiAoYXV0b092ZXJ3cml0ZSAmJiB0d2Vlbi5fcHQpIHtcbiAgICAgICAgICBfb3ZlcndyaXRpbmdUd2VlbiA9IHR3ZWVuO1xuXG4gICAgICAgICAgX2dsb2JhbFRpbWVsaW5lLmtpbGxUd2VlbnNPZih0YXJnZXQsIHB0TG9va3VwLCB0d2Vlbi5nbG9iYWxUaW1lKHRpbWUpKTtcblxuICAgICAgICAgIG92ZXJ3cml0dGVuID0gIXR3ZWVuLnBhcmVudDtcbiAgICAgICAgICBfb3ZlcndyaXRpbmdUd2VlbiA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICB0d2Vlbi5fcHQgJiYgbGF6eSAmJiAoX2xhenlMb29rdXBbZ3NEYXRhLmlkXSA9IDEpO1xuICAgICAgfVxuXG4gICAgICBoYXNQcmlvcml0eSAmJiBfc29ydFByb3BUd2VlbnNCeVByaW9yaXR5KHR3ZWVuKTtcbiAgICAgIHR3ZWVuLl9vbkluaXQgJiYgdHdlZW4uX29uSW5pdCh0d2Vlbik7XG4gICAgfVxuXG4gICAgdHdlZW4uX29uVXBkYXRlID0gb25VcGRhdGU7XG4gICAgdHdlZW4uX2luaXR0ZWQgPSAoIXR3ZWVuLl9vcCB8fCB0d2Vlbi5fcHQpICYmICFvdmVyd3JpdHRlbjtcbiAgICBrZXlmcmFtZXMgJiYgdGltZSA8PSAwICYmIHRsLnJlbmRlcihfYmlnTnVtLCB0cnVlLCB0cnVlKTtcbiAgfSxcbiAgICAgIF91cGRhdGVQcm9wVHdlZW5zID0gZnVuY3Rpb24gX3VwZGF0ZVByb3BUd2VlbnModHdlZW4sIHByb3BlcnR5LCB2YWx1ZSwgc3RhcnQsIHN0YXJ0SXNSZWxhdGl2ZSwgcmF0aW8sIHRpbWUsIHNraXBSZWN1cnNpb24pIHtcbiAgICB2YXIgcHRDYWNoZSA9ICh0d2Vlbi5fcHQgJiYgdHdlZW4uX3B0Q2FjaGUgfHwgKHR3ZWVuLl9wdENhY2hlID0ge30pKVtwcm9wZXJ0eV0sXG4gICAgICAgIHB0LFxuICAgICAgICByb290UFQsXG4gICAgICAgIGxvb2t1cCxcbiAgICAgICAgaTtcblxuICAgIGlmICghcHRDYWNoZSkge1xuICAgICAgcHRDYWNoZSA9IHR3ZWVuLl9wdENhY2hlW3Byb3BlcnR5XSA9IFtdO1xuICAgICAgbG9va3VwID0gdHdlZW4uX3B0TG9va3VwO1xuICAgICAgaSA9IHR3ZWVuLl90YXJnZXRzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBwdCA9IGxvb2t1cFtpXVtwcm9wZXJ0eV07XG5cbiAgICAgICAgaWYgKHB0ICYmIHB0LmQgJiYgcHQuZC5fcHQpIHtcbiAgICAgICAgICBwdCA9IHB0LmQuX3B0O1xuXG4gICAgICAgICAgd2hpbGUgKHB0ICYmIHB0LnAgIT09IHByb3BlcnR5ICYmIHB0LmZwICE9PSBwcm9wZXJ0eSkge1xuICAgICAgICAgICAgcHQgPSBwdC5fbmV4dDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXB0KSB7XG4gICAgICAgICAgX2ZvcmNlQWxsUHJvcFR3ZWVucyA9IDE7XG4gICAgICAgICAgdHdlZW4udmFyc1twcm9wZXJ0eV0gPSBcIis9MFwiO1xuXG4gICAgICAgICAgX2luaXRUd2Vlbih0d2VlbiwgdGltZSk7XG5cbiAgICAgICAgICBfZm9yY2VBbGxQcm9wVHdlZW5zID0gMDtcbiAgICAgICAgICByZXR1cm4gc2tpcFJlY3Vyc2lvbiA/IF93YXJuKHByb3BlcnR5ICsgXCIgbm90IGVsaWdpYmxlIGZvciByZXNldFwiKSA6IDE7XG4gICAgICAgIH1cblxuICAgICAgICBwdENhY2hlLnB1c2gocHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGkgPSBwdENhY2hlLmxlbmd0aDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHJvb3RQVCA9IHB0Q2FjaGVbaV07XG4gICAgICBwdCA9IHJvb3RQVC5fcHQgfHwgcm9vdFBUO1xuICAgICAgcHQucyA9IChzdGFydCB8fCBzdGFydCA9PT0gMCkgJiYgIXN0YXJ0SXNSZWxhdGl2ZSA/IHN0YXJ0IDogcHQucyArIChzdGFydCB8fCAwKSArIHJhdGlvICogcHQuYztcbiAgICAgIHB0LmMgPSB2YWx1ZSAtIHB0LnM7XG4gICAgICByb290UFQuZSAmJiAocm9vdFBULmUgPSBfcm91bmQodmFsdWUpICsgZ2V0VW5pdChyb290UFQuZSkpO1xuICAgICAgcm9vdFBULmIgJiYgKHJvb3RQVC5iID0gcHQucyArIGdldFVuaXQocm9vdFBULmIpKTtcbiAgICB9XG4gIH0sXG4gICAgICBfYWRkQWxpYXNlc1RvVmFycyA9IGZ1bmN0aW9uIF9hZGRBbGlhc2VzVG9WYXJzKHRhcmdldHMsIHZhcnMpIHtcbiAgICB2YXIgaGFybmVzcyA9IHRhcmdldHNbMF0gPyBfZ2V0Q2FjaGUodGFyZ2V0c1swXSkuaGFybmVzcyA6IDAsXG4gICAgICAgIHByb3BlcnR5QWxpYXNlcyA9IGhhcm5lc3MgJiYgaGFybmVzcy5hbGlhc2VzLFxuICAgICAgICBjb3B5LFxuICAgICAgICBwLFxuICAgICAgICBpLFxuICAgICAgICBhbGlhc2VzO1xuXG4gICAgaWYgKCFwcm9wZXJ0eUFsaWFzZXMpIHtcbiAgICAgIHJldHVybiB2YXJzO1xuICAgIH1cblxuICAgIGNvcHkgPSBfbWVyZ2Uoe30sIHZhcnMpO1xuXG4gICAgZm9yIChwIGluIHByb3BlcnR5QWxpYXNlcykge1xuICAgICAgaWYgKHAgaW4gY29weSkge1xuICAgICAgICBhbGlhc2VzID0gcHJvcGVydHlBbGlhc2VzW3BdLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgaSA9IGFsaWFzZXMubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICBjb3B5W2FsaWFzZXNbaV1dID0gY29weVtwXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb3B5O1xuICB9LFxuICAgICAgX3BhcnNlS2V5ZnJhbWUgPSBmdW5jdGlvbiBfcGFyc2VLZXlmcmFtZShwcm9wLCBvYmosIGFsbFByb3BzLCBlYXNlRWFjaCkge1xuICAgIHZhciBlYXNlID0gb2JqLmVhc2UgfHwgZWFzZUVhY2ggfHwgXCJwb3dlcjEuaW5PdXRcIixcbiAgICAgICAgcCxcbiAgICAgICAgYTtcblxuICAgIGlmIChfaXNBcnJheShvYmopKSB7XG4gICAgICBhID0gYWxsUHJvcHNbcHJvcF0gfHwgKGFsbFByb3BzW3Byb3BdID0gW10pO1xuICAgICAgb2JqLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpKSB7XG4gICAgICAgIHJldHVybiBhLnB1c2goe1xuICAgICAgICAgIHQ6IGkgLyAob2JqLmxlbmd0aCAtIDEpICogMTAwLFxuICAgICAgICAgIHY6IHZhbHVlLFxuICAgICAgICAgIGU6IGVhc2VcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChwIGluIG9iaikge1xuICAgICAgICBhID0gYWxsUHJvcHNbcF0gfHwgKGFsbFByb3BzW3BdID0gW10pO1xuICAgICAgICBwID09PSBcImVhc2VcIiB8fCBhLnB1c2goe1xuICAgICAgICAgIHQ6IHBhcnNlRmxvYXQocHJvcCksXG4gICAgICAgICAgdjogb2JqW3BdLFxuICAgICAgICAgIGU6IGVhc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgICAgX3BhcnNlRnVuY09yU3RyaW5nID0gZnVuY3Rpb24gX3BhcnNlRnVuY09yU3RyaW5nKHZhbHVlLCB0d2VlbiwgaSwgdGFyZ2V0LCB0YXJnZXRzKSB7XG4gICAgcmV0dXJuIF9pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwodHdlZW4sIGksIHRhcmdldCwgdGFyZ2V0cykgOiBfaXNTdHJpbmcodmFsdWUpICYmIH52YWx1ZS5pbmRleE9mKFwicmFuZG9tKFwiKSA/IF9yZXBsYWNlUmFuZG9tKHZhbHVlKSA6IHZhbHVlO1xuICB9LFxuICAgICAgX3N0YWdnZXJUd2VlblByb3BzID0gX2NhbGxiYWNrTmFtZXMgKyBcInJlcGVhdCxyZXBlYXREZWxheSx5b3lvLHJlcGVhdFJlZnJlc2gseW95b0Vhc2UsYXV0b1JldmVydFwiLFxuICAgICAgX3N0YWdnZXJQcm9wc1RvU2tpcCA9IHt9O1xuXG4gIF9mb3JFYWNoTmFtZShfc3RhZ2dlclR3ZWVuUHJvcHMgKyBcIixpZCxzdGFnZ2VyLGRlbGF5LGR1cmF0aW9uLHBhdXNlZCxzY3JvbGxUcmlnZ2VyXCIsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIF9zdGFnZ2VyUHJvcHNUb1NraXBbbmFtZV0gPSAxO1xuICB9KTtcblxuICB2YXIgVHdlZW4gPSBmdW5jdGlvbiAoX0FuaW1hdGlvbjIpIHtcbiAgICBfaW5oZXJpdHNMb29zZShUd2VlbiwgX0FuaW1hdGlvbjIpO1xuXG4gICAgZnVuY3Rpb24gVHdlZW4odGFyZ2V0cywgdmFycywgcG9zaXRpb24sIHNraXBJbmhlcml0KSB7XG4gICAgICB2YXIgX3RoaXMzO1xuXG4gICAgICBpZiAodHlwZW9mIHZhcnMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcG9zaXRpb24uZHVyYXRpb24gPSB2YXJzO1xuICAgICAgICB2YXJzID0gcG9zaXRpb247XG4gICAgICAgIHBvc2l0aW9uID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgX3RoaXMzID0gX0FuaW1hdGlvbjIuY2FsbCh0aGlzLCBza2lwSW5oZXJpdCA/IHZhcnMgOiBfaW5oZXJpdERlZmF1bHRzKHZhcnMpKSB8fCB0aGlzO1xuICAgICAgdmFyIF90aGlzMyR2YXJzID0gX3RoaXMzLnZhcnMsXG4gICAgICAgICAgZHVyYXRpb24gPSBfdGhpczMkdmFycy5kdXJhdGlvbixcbiAgICAgICAgICBkZWxheSA9IF90aGlzMyR2YXJzLmRlbGF5LFxuICAgICAgICAgIGltbWVkaWF0ZVJlbmRlciA9IF90aGlzMyR2YXJzLmltbWVkaWF0ZVJlbmRlcixcbiAgICAgICAgICBzdGFnZ2VyID0gX3RoaXMzJHZhcnMuc3RhZ2dlcixcbiAgICAgICAgICBvdmVyd3JpdGUgPSBfdGhpczMkdmFycy5vdmVyd3JpdGUsXG4gICAgICAgICAga2V5ZnJhbWVzID0gX3RoaXMzJHZhcnMua2V5ZnJhbWVzLFxuICAgICAgICAgIGRlZmF1bHRzID0gX3RoaXMzJHZhcnMuZGVmYXVsdHMsXG4gICAgICAgICAgc2Nyb2xsVHJpZ2dlciA9IF90aGlzMyR2YXJzLnNjcm9sbFRyaWdnZXIsXG4gICAgICAgICAgeW95b0Vhc2UgPSBfdGhpczMkdmFycy55b3lvRWFzZSxcbiAgICAgICAgICBwYXJlbnQgPSB2YXJzLnBhcmVudCB8fCBfZ2xvYmFsVGltZWxpbmUsXG4gICAgICAgICAgcGFyc2VkVGFyZ2V0cyA9IChfaXNBcnJheSh0YXJnZXRzKSB8fCBfaXNUeXBlZEFycmF5KHRhcmdldHMpID8gX2lzTnVtYmVyKHRhcmdldHNbMF0pIDogXCJsZW5ndGhcIiBpbiB2YXJzKSA/IFt0YXJnZXRzXSA6IHRvQXJyYXkodGFyZ2V0cyksXG4gICAgICAgICAgdGwsXG4gICAgICAgICAgaSxcbiAgICAgICAgICBjb3B5LFxuICAgICAgICAgIGwsXG4gICAgICAgICAgcCxcbiAgICAgICAgICBjdXJUYXJnZXQsXG4gICAgICAgICAgc3RhZ2dlckZ1bmMsXG4gICAgICAgICAgc3RhZ2dlclZhcnNUb01lcmdlO1xuICAgICAgX3RoaXMzLl90YXJnZXRzID0gcGFyc2VkVGFyZ2V0cy5sZW5ndGggPyBfaGFybmVzcyhwYXJzZWRUYXJnZXRzKSA6IF93YXJuKFwiR1NBUCB0YXJnZXQgXCIgKyB0YXJnZXRzICsgXCIgbm90IGZvdW5kLiBodHRwczovL2dzYXAuY29tXCIsICFfY29uZmlnLm51bGxUYXJnZXRXYXJuKSB8fCBbXTtcbiAgICAgIF90aGlzMy5fcHRMb29rdXAgPSBbXTtcbiAgICAgIF90aGlzMy5fb3ZlcndyaXRlID0gb3ZlcndyaXRlO1xuXG4gICAgICBpZiAoa2V5ZnJhbWVzIHx8IHN0YWdnZXIgfHwgX2lzRnVuY09yU3RyaW5nKGR1cmF0aW9uKSB8fCBfaXNGdW5jT3JTdHJpbmcoZGVsYXkpKSB7XG4gICAgICAgIHZhcnMgPSBfdGhpczMudmFycztcbiAgICAgICAgdGwgPSBfdGhpczMudGltZWxpbmUgPSBuZXcgVGltZWxpbmUoe1xuICAgICAgICAgIGRhdGE6IFwibmVzdGVkXCIsXG4gICAgICAgICAgZGVmYXVsdHM6IGRlZmF1bHRzIHx8IHt9LFxuICAgICAgICAgIHRhcmdldHM6IHBhcmVudCAmJiBwYXJlbnQuZGF0YSA9PT0gXCJuZXN0ZWRcIiA/IHBhcmVudC52YXJzLnRhcmdldHMgOiBwYXJzZWRUYXJnZXRzXG4gICAgICAgIH0pO1xuICAgICAgICB0bC5raWxsKCk7XG4gICAgICAgIHRsLnBhcmVudCA9IHRsLl9kcCA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMzKTtcbiAgICAgICAgdGwuX3N0YXJ0ID0gMDtcblxuICAgICAgICBpZiAoc3RhZ2dlciB8fCBfaXNGdW5jT3JTdHJpbmcoZHVyYXRpb24pIHx8IF9pc0Z1bmNPclN0cmluZyhkZWxheSkpIHtcbiAgICAgICAgICBsID0gcGFyc2VkVGFyZ2V0cy5sZW5ndGg7XG4gICAgICAgICAgc3RhZ2dlckZ1bmMgPSBzdGFnZ2VyICYmIGRpc3RyaWJ1dGUoc3RhZ2dlcik7XG5cbiAgICAgICAgICBpZiAoX2lzT2JqZWN0KHN0YWdnZXIpKSB7XG4gICAgICAgICAgICBmb3IgKHAgaW4gc3RhZ2dlcikge1xuICAgICAgICAgICAgICBpZiAofl9zdGFnZ2VyVHdlZW5Qcm9wcy5pbmRleE9mKHApKSB7XG4gICAgICAgICAgICAgICAgc3RhZ2dlclZhcnNUb01lcmdlIHx8IChzdGFnZ2VyVmFyc1RvTWVyZ2UgPSB7fSk7XG4gICAgICAgICAgICAgICAgc3RhZ2dlclZhcnNUb01lcmdlW3BdID0gc3RhZ2dlcltwXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHkgPSBfY29weUV4Y2x1ZGluZyh2YXJzLCBfc3RhZ2dlclByb3BzVG9Ta2lwKTtcbiAgICAgICAgICAgIGNvcHkuc3RhZ2dlciA9IDA7XG4gICAgICAgICAgICB5b3lvRWFzZSAmJiAoY29weS55b3lvRWFzZSA9IHlveW9FYXNlKTtcbiAgICAgICAgICAgIHN0YWdnZXJWYXJzVG9NZXJnZSAmJiBfbWVyZ2UoY29weSwgc3RhZ2dlclZhcnNUb01lcmdlKTtcbiAgICAgICAgICAgIGN1clRhcmdldCA9IHBhcnNlZFRhcmdldHNbaV07XG4gICAgICAgICAgICBjb3B5LmR1cmF0aW9uID0gK19wYXJzZUZ1bmNPclN0cmluZyhkdXJhdGlvbiwgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczMpLCBpLCBjdXJUYXJnZXQsIHBhcnNlZFRhcmdldHMpO1xuICAgICAgICAgICAgY29weS5kZWxheSA9ICgrX3BhcnNlRnVuY09yU3RyaW5nKGRlbGF5LCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMyksIGksIGN1clRhcmdldCwgcGFyc2VkVGFyZ2V0cykgfHwgMCkgLSBfdGhpczMuX2RlbGF5O1xuXG4gICAgICAgICAgICBpZiAoIXN0YWdnZXIgJiYgbCA9PT0gMSAmJiBjb3B5LmRlbGF5KSB7XG4gICAgICAgICAgICAgIF90aGlzMy5fZGVsYXkgPSBkZWxheSA9IGNvcHkuZGVsYXk7XG4gICAgICAgICAgICAgIF90aGlzMy5fc3RhcnQgKz0gZGVsYXk7XG4gICAgICAgICAgICAgIGNvcHkuZGVsYXkgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0bC50byhjdXJUYXJnZXQsIGNvcHksIHN0YWdnZXJGdW5jID8gc3RhZ2dlckZ1bmMoaSwgY3VyVGFyZ2V0LCBwYXJzZWRUYXJnZXRzKSA6IDApO1xuICAgICAgICAgICAgdGwuX2Vhc2UgPSBfZWFzZU1hcC5ub25lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRsLmR1cmF0aW9uKCkgPyBkdXJhdGlvbiA9IGRlbGF5ID0gMCA6IF90aGlzMy50aW1lbGluZSA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ZnJhbWVzKSB7XG4gICAgICAgICAgX2luaGVyaXREZWZhdWx0cyhfc2V0RGVmYXVsdHModGwudmFycy5kZWZhdWx0cywge1xuICAgICAgICAgICAgZWFzZTogXCJub25lXCJcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICB0bC5fZWFzZSA9IF9wYXJzZUVhc2Uoa2V5ZnJhbWVzLmVhc2UgfHwgdmFycy5lYXNlIHx8IFwibm9uZVwiKTtcbiAgICAgICAgICB2YXIgdGltZSA9IDAsXG4gICAgICAgICAgICAgIGEsXG4gICAgICAgICAgICAgIGtmLFxuICAgICAgICAgICAgICB2O1xuXG4gICAgICAgICAgaWYgKF9pc0FycmF5KGtleWZyYW1lcykpIHtcbiAgICAgICAgICAgIGtleWZyYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFtZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGwudG8ocGFyc2VkVGFyZ2V0cywgZnJhbWUsIFwiPlwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGwuZHVyYXRpb24oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29weSA9IHt9O1xuXG4gICAgICAgICAgICBmb3IgKHAgaW4ga2V5ZnJhbWVzKSB7XG4gICAgICAgICAgICAgIHAgPT09IFwiZWFzZVwiIHx8IHAgPT09IFwiZWFzZUVhY2hcIiB8fCBfcGFyc2VLZXlmcmFtZShwLCBrZXlmcmFtZXNbcF0sIGNvcHksIGtleWZyYW1lcy5lYXNlRWFjaCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAocCBpbiBjb3B5KSB7XG4gICAgICAgICAgICAgIGEgPSBjb3B5W3BdLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS50IC0gYi50O1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdGltZSA9IDA7XG5cbiAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBrZiA9IGFbaV07XG4gICAgICAgICAgICAgICAgdiA9IHtcbiAgICAgICAgICAgICAgICAgIGVhc2U6IGtmLmUsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogKGtmLnQgLSAoaSA/IGFbaSAtIDFdLnQgOiAwKSkgLyAxMDAgKiBkdXJhdGlvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdltwXSA9IGtmLnY7XG4gICAgICAgICAgICAgICAgdGwudG8ocGFyc2VkVGFyZ2V0cywgdiwgdGltZSk7XG4gICAgICAgICAgICAgICAgdGltZSArPSB2LmR1cmF0aW9uO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRsLmR1cmF0aW9uKCkgPCBkdXJhdGlvbiAmJiB0bC50byh7fSwge1xuICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24gLSB0bC5kdXJhdGlvbigpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkdXJhdGlvbiB8fCBfdGhpczMuZHVyYXRpb24oZHVyYXRpb24gPSB0bC5kdXJhdGlvbigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzMy50aW1lbGluZSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChvdmVyd3JpdGUgPT09IHRydWUgJiYgIV9zdXBwcmVzc092ZXJ3cml0ZXMpIHtcbiAgICAgICAgX292ZXJ3cml0aW5nVHdlZW4gPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMyk7XG5cbiAgICAgICAgX2dsb2JhbFRpbWVsaW5lLmtpbGxUd2VlbnNPZihwYXJzZWRUYXJnZXRzKTtcblxuICAgICAgICBfb3ZlcndyaXRpbmdUd2VlbiA9IDA7XG4gICAgICB9XG5cbiAgICAgIF9hZGRUb1RpbWVsaW5lKHBhcmVudCwgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczMpLCBwb3NpdGlvbik7XG5cbiAgICAgIHZhcnMucmV2ZXJzZWQgJiYgX3RoaXMzLnJldmVyc2UoKTtcbiAgICAgIHZhcnMucGF1c2VkICYmIF90aGlzMy5wYXVzZWQodHJ1ZSk7XG5cbiAgICAgIGlmIChpbW1lZGlhdGVSZW5kZXIgfHwgIWR1cmF0aW9uICYmICFrZXlmcmFtZXMgJiYgX3RoaXMzLl9zdGFydCA9PT0gX3JvdW5kUHJlY2lzZShwYXJlbnQuX3RpbWUpICYmIF9pc05vdEZhbHNlKGltbWVkaWF0ZVJlbmRlcikgJiYgX2hhc05vUGF1c2VkQW5jZXN0b3JzKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMzKSkgJiYgcGFyZW50LmRhdGEgIT09IFwibmVzdGVkXCIpIHtcbiAgICAgICAgX3RoaXMzLl90VGltZSA9IC1fdGlueU51bTtcblxuICAgICAgICBfdGhpczMucmVuZGVyKE1hdGgubWF4KDAsIC1kZWxheSkgfHwgMCk7XG4gICAgICB9XG5cbiAgICAgIHNjcm9sbFRyaWdnZXIgJiYgX3Njcm9sbFRyaWdnZXIoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczMpLCBzY3JvbGxUcmlnZ2VyKTtcbiAgICAgIHJldHVybiBfdGhpczM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzMgPSBUd2Vlbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8zLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcih0b3RhbFRpbWUsIHN1cHByZXNzRXZlbnRzLCBmb3JjZSkge1xuICAgICAgdmFyIHByZXZUaW1lID0gdGhpcy5fdGltZSxcbiAgICAgICAgICB0RHVyID0gdGhpcy5fdER1cixcbiAgICAgICAgICBkdXIgPSB0aGlzLl9kdXIsXG4gICAgICAgICAgaXNOZWdhdGl2ZSA9IHRvdGFsVGltZSA8IDAsXG4gICAgICAgICAgdFRpbWUgPSB0b3RhbFRpbWUgPiB0RHVyIC0gX3RpbnlOdW0gJiYgIWlzTmVnYXRpdmUgPyB0RHVyIDogdG90YWxUaW1lIDwgX3RpbnlOdW0gPyAwIDogdG90YWxUaW1lLFxuICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgcHQsXG4gICAgICAgICAgaXRlcmF0aW9uLFxuICAgICAgICAgIGN5Y2xlRHVyYXRpb24sXG4gICAgICAgICAgcHJldkl0ZXJhdGlvbixcbiAgICAgICAgICBpc1lveW8sXG4gICAgICAgICAgcmF0aW8sXG4gICAgICAgICAgdGltZWxpbmUsXG4gICAgICAgICAgeW95b0Vhc2U7XG5cbiAgICAgIGlmICghZHVyKSB7XG4gICAgICAgIF9yZW5kZXJaZXJvRHVyYXRpb25Ud2Vlbih0aGlzLCB0b3RhbFRpbWUsIHN1cHByZXNzRXZlbnRzLCBmb3JjZSk7XG4gICAgICB9IGVsc2UgaWYgKHRUaW1lICE9PSB0aGlzLl90VGltZSB8fCAhdG90YWxUaW1lIHx8IGZvcmNlIHx8ICF0aGlzLl9pbml0dGVkICYmIHRoaXMuX3RUaW1lIHx8IHRoaXMuX3N0YXJ0QXQgJiYgdGhpcy5felRpbWUgPCAwICE9PSBpc05lZ2F0aXZlKSB7XG4gICAgICAgIHRpbWUgPSB0VGltZTtcbiAgICAgICAgdGltZWxpbmUgPSB0aGlzLnRpbWVsaW5lO1xuXG4gICAgICAgIGlmICh0aGlzLl9yZXBlYXQpIHtcbiAgICAgICAgICBjeWNsZUR1cmF0aW9uID0gZHVyICsgdGhpcy5fckRlbGF5O1xuXG4gICAgICAgICAgaWYgKHRoaXMuX3JlcGVhdCA8IC0xICYmIGlzTmVnYXRpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvdGFsVGltZShjeWNsZUR1cmF0aW9uICogMTAwICsgdG90YWxUaW1lLCBzdXBwcmVzc0V2ZW50cywgZm9yY2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRpbWUgPSBfcm91bmRQcmVjaXNlKHRUaW1lICUgY3ljbGVEdXJhdGlvbik7XG5cbiAgICAgICAgICBpZiAodFRpbWUgPT09IHREdXIpIHtcbiAgICAgICAgICAgIGl0ZXJhdGlvbiA9IHRoaXMuX3JlcGVhdDtcbiAgICAgICAgICAgIHRpbWUgPSBkdXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGl0ZXJhdGlvbiA9IH5+KHRUaW1lIC8gY3ljbGVEdXJhdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChpdGVyYXRpb24gJiYgaXRlcmF0aW9uID09PSBfcm91bmRQcmVjaXNlKHRUaW1lIC8gY3ljbGVEdXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgdGltZSA9IGR1cjtcbiAgICAgICAgICAgICAgaXRlcmF0aW9uLS07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRpbWUgPiBkdXIgJiYgKHRpbWUgPSBkdXIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlzWW95byA9IHRoaXMuX3lveW8gJiYgaXRlcmF0aW9uICYgMTtcblxuICAgICAgICAgIGlmIChpc1lveW8pIHtcbiAgICAgICAgICAgIHlveW9FYXNlID0gdGhpcy5feUVhc2U7XG4gICAgICAgICAgICB0aW1lID0gZHVyIC0gdGltZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwcmV2SXRlcmF0aW9uID0gX2FuaW1hdGlvbkN5Y2xlKHRoaXMuX3RUaW1lLCBjeWNsZUR1cmF0aW9uKTtcblxuICAgICAgICAgIGlmICh0aW1lID09PSBwcmV2VGltZSAmJiAhZm9yY2UgJiYgdGhpcy5faW5pdHRlZCAmJiBpdGVyYXRpb24gPT09IHByZXZJdGVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX3RUaW1lID0gdFRpbWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXRlcmF0aW9uICE9PSBwcmV2SXRlcmF0aW9uKSB7XG4gICAgICAgICAgICB0aW1lbGluZSAmJiB0aGlzLl95RWFzZSAmJiBfcHJvcGFnYXRlWW95b0Vhc2UodGltZWxpbmUsIGlzWW95byk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnZhcnMucmVwZWF0UmVmcmVzaCAmJiAhaXNZb3lvICYmICF0aGlzLl9sb2NrICYmIHRoaXMuX3RpbWUgIT09IGN5Y2xlRHVyYXRpb24gJiYgdGhpcy5faW5pdHRlZCkge1xuICAgICAgICAgICAgICB0aGlzLl9sb2NrID0gZm9yY2UgPSAxO1xuICAgICAgICAgICAgICB0aGlzLnJlbmRlcihfcm91bmRQcmVjaXNlKGN5Y2xlRHVyYXRpb24gKiBpdGVyYXRpb24pLCB0cnVlKS5pbnZhbGlkYXRlKCkuX2xvY2sgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5faW5pdHRlZCkge1xuICAgICAgICAgIGlmIChfYXR0ZW1wdEluaXRUd2Vlbih0aGlzLCBpc05lZ2F0aXZlID8gdG90YWxUaW1lIDogdGltZSwgZm9yY2UsIHN1cHByZXNzRXZlbnRzLCB0VGltZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3RUaW1lID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChwcmV2VGltZSAhPT0gdGhpcy5fdGltZSAmJiAhKGZvcmNlICYmIHRoaXMudmFycy5yZXBlYXRSZWZyZXNoICYmIGl0ZXJhdGlvbiAhPT0gcHJldkl0ZXJhdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChkdXIgIT09IHRoaXMuX2R1cikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKHRvdGFsVGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90VGltZSA9IHRUaW1lO1xuICAgICAgICB0aGlzLl90aW1lID0gdGltZTtcblxuICAgICAgICBpZiAoIXRoaXMuX2FjdCAmJiB0aGlzLl90cykge1xuICAgICAgICAgIHRoaXMuX2FjdCA9IDE7XG4gICAgICAgICAgdGhpcy5fbGF6eSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJhdGlvID0gcmF0aW8gPSAoeW95b0Vhc2UgfHwgdGhpcy5fZWFzZSkodGltZSAvIGR1cik7XG5cbiAgICAgICAgaWYgKHRoaXMuX2Zyb20pIHtcbiAgICAgICAgICB0aGlzLnJhdGlvID0gcmF0aW8gPSAxIC0gcmF0aW87XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGltZSAmJiAhcHJldlRpbWUgJiYgIXN1cHByZXNzRXZlbnRzICYmICFpdGVyYXRpb24pIHtcbiAgICAgICAgICBfY2FsbGJhY2sodGhpcywgXCJvblN0YXJ0XCIpO1xuXG4gICAgICAgICAgaWYgKHRoaXMuX3RUaW1lICE9PSB0VGltZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHQgPSB0aGlzLl9wdDtcblxuICAgICAgICB3aGlsZSAocHQpIHtcbiAgICAgICAgICBwdC5yKHJhdGlvLCBwdC5kKTtcbiAgICAgICAgICBwdCA9IHB0Ll9uZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgdGltZWxpbmUgJiYgdGltZWxpbmUucmVuZGVyKHRvdGFsVGltZSA8IDAgPyB0b3RhbFRpbWUgOiB0aW1lbGluZS5fZHVyICogdGltZWxpbmUuX2Vhc2UodGltZSAvIHRoaXMuX2R1ciksIHN1cHByZXNzRXZlbnRzLCBmb3JjZSkgfHwgdGhpcy5fc3RhcnRBdCAmJiAodGhpcy5felRpbWUgPSB0b3RhbFRpbWUpO1xuXG4gICAgICAgIGlmICh0aGlzLl9vblVwZGF0ZSAmJiAhc3VwcHJlc3NFdmVudHMpIHtcbiAgICAgICAgICBpc05lZ2F0aXZlICYmIF9yZXdpbmRTdGFydEF0KHRoaXMsIHRvdGFsVGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblxuICAgICAgICAgIF9jYWxsYmFjayh0aGlzLCBcIm9uVXBkYXRlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcmVwZWF0ICYmIGl0ZXJhdGlvbiAhPT0gcHJldkl0ZXJhdGlvbiAmJiB0aGlzLnZhcnMub25SZXBlYXQgJiYgIXN1cHByZXNzRXZlbnRzICYmIHRoaXMucGFyZW50ICYmIF9jYWxsYmFjayh0aGlzLCBcIm9uUmVwZWF0XCIpO1xuXG4gICAgICAgIGlmICgodFRpbWUgPT09IHRoaXMuX3REdXIgfHwgIXRUaW1lKSAmJiB0aGlzLl90VGltZSA9PT0gdFRpbWUpIHtcbiAgICAgICAgICBpc05lZ2F0aXZlICYmICF0aGlzLl9vblVwZGF0ZSAmJiBfcmV3aW5kU3RhcnRBdCh0aGlzLCB0b3RhbFRpbWUsIHRydWUsIHRydWUpO1xuICAgICAgICAgICh0b3RhbFRpbWUgfHwgIWR1cikgJiYgKHRUaW1lID09PSB0aGlzLl90RHVyICYmIHRoaXMuX3RzID4gMCB8fCAhdFRpbWUgJiYgdGhpcy5fdHMgPCAwKSAmJiBfcmVtb3ZlRnJvbVBhcmVudCh0aGlzLCAxKTtcblxuICAgICAgICAgIGlmICghc3VwcHJlc3NFdmVudHMgJiYgIShpc05lZ2F0aXZlICYmICFwcmV2VGltZSkgJiYgKHRUaW1lIHx8IHByZXZUaW1lIHx8IGlzWW95bykpIHtcbiAgICAgICAgICAgIF9jYWxsYmFjayh0aGlzLCB0VGltZSA9PT0gdER1ciA/IFwib25Db21wbGV0ZVwiIDogXCJvblJldmVyc2VDb21wbGV0ZVwiLCB0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5fcHJvbSAmJiAhKHRUaW1lIDwgdER1ciAmJiB0aGlzLnRpbWVTY2FsZSgpID4gMCkgJiYgdGhpcy5fcHJvbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgX3Byb3RvMy50YXJnZXRzID0gZnVuY3Rpb24gdGFyZ2V0cygpIHtcbiAgICAgIHJldHVybiB0aGlzLl90YXJnZXRzO1xuICAgIH07XG5cbiAgICBfcHJvdG8zLmludmFsaWRhdGUgPSBmdW5jdGlvbiBpbnZhbGlkYXRlKHNvZnQpIHtcbiAgICAgICghc29mdCB8fCAhdGhpcy52YXJzLnJ1bkJhY2t3YXJkcykgJiYgKHRoaXMuX3N0YXJ0QXQgPSAwKTtcbiAgICAgIHRoaXMuX3B0ID0gdGhpcy5fb3AgPSB0aGlzLl9vblVwZGF0ZSA9IHRoaXMuX2xhenkgPSB0aGlzLnJhdGlvID0gMDtcbiAgICAgIHRoaXMuX3B0TG9va3VwID0gW107XG4gICAgICB0aGlzLnRpbWVsaW5lICYmIHRoaXMudGltZWxpbmUuaW52YWxpZGF0ZShzb2Z0KTtcbiAgICAgIHJldHVybiBfQW5pbWF0aW9uMi5wcm90b3R5cGUuaW52YWxpZGF0ZS5jYWxsKHRoaXMsIHNvZnQpO1xuICAgIH07XG5cbiAgICBfcHJvdG8zLnJlc2V0VG8gPSBmdW5jdGlvbiByZXNldFRvKHByb3BlcnR5LCB2YWx1ZSwgc3RhcnQsIHN0YXJ0SXNSZWxhdGl2ZSwgc2tpcFJlY3Vyc2lvbikge1xuICAgICAgX3RpY2tlckFjdGl2ZSB8fCBfdGlja2VyLndha2UoKTtcbiAgICAgIHRoaXMuX3RzIHx8IHRoaXMucGxheSgpO1xuICAgICAgdmFyIHRpbWUgPSBNYXRoLm1pbih0aGlzLl9kdXIsICh0aGlzLl9kcC5fdGltZSAtIHRoaXMuX3N0YXJ0KSAqIHRoaXMuX3RzKSxcbiAgICAgICAgICByYXRpbztcbiAgICAgIHRoaXMuX2luaXR0ZWQgfHwgX2luaXRUd2Vlbih0aGlzLCB0aW1lKTtcbiAgICAgIHJhdGlvID0gdGhpcy5fZWFzZSh0aW1lIC8gdGhpcy5fZHVyKTtcblxuICAgICAgaWYgKF91cGRhdGVQcm9wVHdlZW5zKHRoaXMsIHByb3BlcnR5LCB2YWx1ZSwgc3RhcnQsIHN0YXJ0SXNSZWxhdGl2ZSwgcmF0aW8sIHRpbWUsIHNraXBSZWN1cnNpb24pKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc2V0VG8ocHJvcGVydHksIHZhbHVlLCBzdGFydCwgc3RhcnRJc1JlbGF0aXZlLCAxKTtcbiAgICAgIH1cblxuICAgICAgX2FsaWduUGxheWhlYWQodGhpcywgMCk7XG5cbiAgICAgIHRoaXMucGFyZW50IHx8IF9hZGRMaW5rZWRMaXN0SXRlbSh0aGlzLl9kcCwgdGhpcywgXCJfZmlyc3RcIiwgXCJfbGFzdFwiLCB0aGlzLl9kcC5fc29ydCA/IFwiX3N0YXJ0XCIgOiAwKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcigwKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMy5raWxsID0gZnVuY3Rpb24ga2lsbCh0YXJnZXRzLCB2YXJzKSB7XG4gICAgICBpZiAodmFycyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHZhcnMgPSBcImFsbFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRhcmdldHMgJiYgKCF2YXJzIHx8IHZhcnMgPT09IFwiYWxsXCIpKSB7XG4gICAgICAgIHRoaXMuX2xhenkgPSB0aGlzLl9wdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IF9pbnRlcnJ1cHQodGhpcykgOiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50aW1lbGluZSkge1xuICAgICAgICB2YXIgdER1ciA9IHRoaXMudGltZWxpbmUudG90YWxEdXJhdGlvbigpO1xuICAgICAgICB0aGlzLnRpbWVsaW5lLmtpbGxUd2VlbnNPZih0YXJnZXRzLCB2YXJzLCBfb3ZlcndyaXRpbmdUd2VlbiAmJiBfb3ZlcndyaXRpbmdUd2Vlbi52YXJzLm92ZXJ3cml0ZSAhPT0gdHJ1ZSkuX2ZpcnN0IHx8IF9pbnRlcnJ1cHQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyZW50ICYmIHREdXIgIT09IHRoaXMudGltZWxpbmUudG90YWxEdXJhdGlvbigpICYmIF9zZXREdXJhdGlvbih0aGlzLCB0aGlzLl9kdXIgKiB0aGlzLnRpbWVsaW5lLl90RHVyIC8gdER1ciwgMCwgMSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyc2VkVGFyZ2V0cyA9IHRoaXMuX3RhcmdldHMsXG4gICAgICAgICAga2lsbGluZ1RhcmdldHMgPSB0YXJnZXRzID8gdG9BcnJheSh0YXJnZXRzKSA6IHBhcnNlZFRhcmdldHMsXG4gICAgICAgICAgcHJvcFR3ZWVuTG9va3VwID0gdGhpcy5fcHRMb29rdXAsXG4gICAgICAgICAgZmlyc3RQVCA9IHRoaXMuX3B0LFxuICAgICAgICAgIG92ZXJ3cml0dGVuUHJvcHMsXG4gICAgICAgICAgY3VyTG9va3VwLFxuICAgICAgICAgIGN1ck92ZXJ3cml0ZVByb3BzLFxuICAgICAgICAgIHByb3BzLFxuICAgICAgICAgIHAsXG4gICAgICAgICAgcHQsXG4gICAgICAgICAgaTtcblxuICAgICAgaWYgKCghdmFycyB8fCB2YXJzID09PSBcImFsbFwiKSAmJiBfYXJyYXlzTWF0Y2gocGFyc2VkVGFyZ2V0cywga2lsbGluZ1RhcmdldHMpKSB7XG4gICAgICAgIHZhcnMgPT09IFwiYWxsXCIgJiYgKHRoaXMuX3B0ID0gMCk7XG4gICAgICAgIHJldHVybiBfaW50ZXJydXB0KHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBvdmVyd3JpdHRlblByb3BzID0gdGhpcy5fb3AgPSB0aGlzLl9vcCB8fCBbXTtcblxuICAgICAgaWYgKHZhcnMgIT09IFwiYWxsXCIpIHtcbiAgICAgICAgaWYgKF9pc1N0cmluZyh2YXJzKSkge1xuICAgICAgICAgIHAgPSB7fTtcblxuICAgICAgICAgIF9mb3JFYWNoTmFtZSh2YXJzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHBbbmFtZV0gPSAxO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFycyA9IHA7XG4gICAgICAgIH1cblxuICAgICAgICB2YXJzID0gX2FkZEFsaWFzZXNUb1ZhcnMocGFyc2VkVGFyZ2V0cywgdmFycyk7XG4gICAgICB9XG5cbiAgICAgIGkgPSBwYXJzZWRUYXJnZXRzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZiAofmtpbGxpbmdUYXJnZXRzLmluZGV4T2YocGFyc2VkVGFyZ2V0c1tpXSkpIHtcbiAgICAgICAgICBjdXJMb29rdXAgPSBwcm9wVHdlZW5Mb29rdXBbaV07XG5cbiAgICAgICAgICBpZiAodmFycyA9PT0gXCJhbGxcIikge1xuICAgICAgICAgICAgb3ZlcndyaXR0ZW5Qcm9wc1tpXSA9IHZhcnM7XG4gICAgICAgICAgICBwcm9wcyA9IGN1ckxvb2t1cDtcbiAgICAgICAgICAgIGN1ck92ZXJ3cml0ZVByb3BzID0ge307XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1ck92ZXJ3cml0ZVByb3BzID0gb3ZlcndyaXR0ZW5Qcm9wc1tpXSA9IG92ZXJ3cml0dGVuUHJvcHNbaV0gfHwge307XG4gICAgICAgICAgICBwcm9wcyA9IHZhcnM7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChwIGluIHByb3BzKSB7XG4gICAgICAgICAgICBwdCA9IGN1ckxvb2t1cCAmJiBjdXJMb29rdXBbcF07XG5cbiAgICAgICAgICAgIGlmIChwdCkge1xuICAgICAgICAgICAgICBpZiAoIShcImtpbGxcIiBpbiBwdC5kKSB8fCBwdC5kLmtpbGwocCkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBfcmVtb3ZlTGlua2VkTGlzdEl0ZW0odGhpcywgcHQsIFwiX3B0XCIpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZGVsZXRlIGN1ckxvb2t1cFtwXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1ck92ZXJ3cml0ZVByb3BzICE9PSBcImFsbFwiKSB7XG4gICAgICAgICAgICAgIGN1ck92ZXJ3cml0ZVByb3BzW3BdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5faW5pdHRlZCAmJiAhdGhpcy5fcHQgJiYgZmlyc3RQVCAmJiBfaW50ZXJydXB0KHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFR3ZWVuLnRvID0gZnVuY3Rpb24gdG8odGFyZ2V0cywgdmFycykge1xuICAgICAgcmV0dXJuIG5ldyBUd2Vlbih0YXJnZXRzLCB2YXJzLCBhcmd1bWVudHNbMl0pO1xuICAgIH07XG5cbiAgICBUd2Vlbi5mcm9tID0gZnVuY3Rpb24gZnJvbSh0YXJnZXRzLCB2YXJzKSB7XG4gICAgICByZXR1cm4gX2NyZWF0ZVR3ZWVuVHlwZSgxLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBUd2Vlbi5kZWxheWVkQ2FsbCA9IGZ1bmN0aW9uIGRlbGF5ZWRDYWxsKGRlbGF5LCBjYWxsYmFjaywgcGFyYW1zLCBzY29wZSkge1xuICAgICAgcmV0dXJuIG5ldyBUd2VlbihjYWxsYmFjaywgMCwge1xuICAgICAgICBpbW1lZGlhdGVSZW5kZXI6IGZhbHNlLFxuICAgICAgICBsYXp5OiBmYWxzZSxcbiAgICAgICAgb3ZlcndyaXRlOiBmYWxzZSxcbiAgICAgICAgZGVsYXk6IGRlbGF5LFxuICAgICAgICBvbkNvbXBsZXRlOiBjYWxsYmFjayxcbiAgICAgICAgb25SZXZlcnNlQ29tcGxldGU6IGNhbGxiYWNrLFxuICAgICAgICBvbkNvbXBsZXRlUGFyYW1zOiBwYXJhbXMsXG4gICAgICAgIG9uUmV2ZXJzZUNvbXBsZXRlUGFyYW1zOiBwYXJhbXMsXG4gICAgICAgIGNhbGxiYWNrU2NvcGU6IHNjb3BlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgVHdlZW4uZnJvbVRvID0gZnVuY3Rpb24gZnJvbVRvKHRhcmdldHMsIGZyb21WYXJzLCB0b1ZhcnMpIHtcbiAgICAgIHJldHVybiBfY3JlYXRlVHdlZW5UeXBlKDIsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIFR3ZWVuLnNldCA9IGZ1bmN0aW9uIHNldCh0YXJnZXRzLCB2YXJzKSB7XG4gICAgICB2YXJzLmR1cmF0aW9uID0gMDtcbiAgICAgIHZhcnMucmVwZWF0RGVsYXkgfHwgKHZhcnMucmVwZWF0ID0gMCk7XG4gICAgICByZXR1cm4gbmV3IFR3ZWVuKHRhcmdldHMsIHZhcnMpO1xuICAgIH07XG5cbiAgICBUd2Vlbi5raWxsVHdlZW5zT2YgPSBmdW5jdGlvbiBraWxsVHdlZW5zT2YodGFyZ2V0cywgcHJvcHMsIG9ubHlBY3RpdmUpIHtcbiAgICAgIHJldHVybiBfZ2xvYmFsVGltZWxpbmUua2lsbFR3ZWVuc09mKHRhcmdldHMsIHByb3BzLCBvbmx5QWN0aXZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFR3ZWVuO1xuICB9KEFuaW1hdGlvbik7XG5cbiAgX3NldERlZmF1bHRzKFR3ZWVuLnByb3RvdHlwZSwge1xuICAgIF90YXJnZXRzOiBbXSxcbiAgICBfbGF6eTogMCxcbiAgICBfc3RhcnRBdDogMCxcbiAgICBfb3A6IDAsXG4gICAgX29uSW5pdDogMFxuICB9KTtcblxuICBfZm9yRWFjaE5hbWUoXCJzdGFnZ2VyVG8sc3RhZ2dlckZyb20sc3RhZ2dlckZyb21Ub1wiLCBmdW5jdGlvbiAobmFtZSkge1xuICAgIFR3ZWVuW25hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lKCksXG4gICAgICAgICAgcGFyYW1zID0gX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblxuICAgICAgcGFyYW1zLnNwbGljZShuYW1lID09PSBcInN0YWdnZXJGcm9tVG9cIiA/IDUgOiA0LCAwLCAwKTtcbiAgICAgIHJldHVybiB0bFtuYW1lXS5hcHBseSh0bCwgcGFyYW1zKTtcbiAgICB9O1xuICB9KTtcblxuICB2YXIgX3NldHRlclBsYWluID0gZnVuY3Rpb24gX3NldHRlclBsYWluKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgfSxcbiAgICAgIF9zZXR0ZXJGdW5jID0gZnVuY3Rpb24gX3NldHRlckZ1bmModGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XSh2YWx1ZSk7XG4gIH0sXG4gICAgICBfc2V0dGVyRnVuY1dpdGhQYXJhbSA9IGZ1bmN0aW9uIF9zZXR0ZXJGdW5jV2l0aFBhcmFtKHRhcmdldCwgcHJvcGVydHksIHZhbHVlLCBkYXRhKSB7XG4gICAgcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV0oZGF0YS5mcCwgdmFsdWUpO1xuICB9LFxuICAgICAgX3NldHRlckF0dHJpYnV0ZSA9IGZ1bmN0aW9uIF9zZXR0ZXJBdHRyaWJ1dGUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGFyZ2V0LnNldEF0dHJpYnV0ZShwcm9wZXJ0eSwgdmFsdWUpO1xuICB9LFxuICAgICAgX2dldFNldHRlciA9IGZ1bmN0aW9uIF9nZXRTZXR0ZXIodGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgIHJldHVybiBfaXNGdW5jdGlvbih0YXJnZXRbcHJvcGVydHldKSA/IF9zZXR0ZXJGdW5jIDogX2lzVW5kZWZpbmVkKHRhcmdldFtwcm9wZXJ0eV0pICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUgPyBfc2V0dGVyQXR0cmlidXRlIDogX3NldHRlclBsYWluO1xuICB9LFxuICAgICAgX3JlbmRlclBsYWluID0gZnVuY3Rpb24gX3JlbmRlclBsYWluKHJhdGlvLCBkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGEuc2V0KGRhdGEudCwgZGF0YS5wLCBNYXRoLnJvdW5kKChkYXRhLnMgKyBkYXRhLmMgKiByYXRpbykgKiAxMDAwMDAwKSAvIDEwMDAwMDAsIGRhdGEpO1xuICB9LFxuICAgICAgX3JlbmRlckJvb2xlYW4gPSBmdW5jdGlvbiBfcmVuZGVyQm9vbGVhbihyYXRpbywgZGF0YSkge1xuICAgIHJldHVybiBkYXRhLnNldChkYXRhLnQsIGRhdGEucCwgISEoZGF0YS5zICsgZGF0YS5jICogcmF0aW8pLCBkYXRhKTtcbiAgfSxcbiAgICAgIF9yZW5kZXJDb21wbGV4U3RyaW5nID0gZnVuY3Rpb24gX3JlbmRlckNvbXBsZXhTdHJpbmcocmF0aW8sIGRhdGEpIHtcbiAgICB2YXIgcHQgPSBkYXRhLl9wdCxcbiAgICAgICAgcyA9IFwiXCI7XG5cbiAgICBpZiAoIXJhdGlvICYmIGRhdGEuYikge1xuICAgICAgcyA9IGRhdGEuYjtcbiAgICB9IGVsc2UgaWYgKHJhdGlvID09PSAxICYmIGRhdGEuZSkge1xuICAgICAgcyA9IGRhdGEuZTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKHB0KSB7XG4gICAgICAgIHMgPSBwdC5wICsgKHB0Lm0gPyBwdC5tKHB0LnMgKyBwdC5jICogcmF0aW8pIDogTWF0aC5yb3VuZCgocHQucyArIHB0LmMgKiByYXRpbykgKiAxMDAwMCkgLyAxMDAwMCkgKyBzO1xuICAgICAgICBwdCA9IHB0Ll9uZXh0O1xuICAgICAgfVxuXG4gICAgICBzICs9IGRhdGEuYztcbiAgICB9XG5cbiAgICBkYXRhLnNldChkYXRhLnQsIGRhdGEucCwgcywgZGF0YSk7XG4gIH0sXG4gICAgICBfcmVuZGVyUHJvcFR3ZWVucyA9IGZ1bmN0aW9uIF9yZW5kZXJQcm9wVHdlZW5zKHJhdGlvLCBkYXRhKSB7XG4gICAgdmFyIHB0ID0gZGF0YS5fcHQ7XG5cbiAgICB3aGlsZSAocHQpIHtcbiAgICAgIHB0LnIocmF0aW8sIHB0LmQpO1xuICAgICAgcHQgPSBwdC5fbmV4dDtcbiAgICB9XG4gIH0sXG4gICAgICBfYWRkUGx1Z2luTW9kaWZpZXIgPSBmdW5jdGlvbiBfYWRkUGx1Z2luTW9kaWZpZXIobW9kaWZpZXIsIHR3ZWVuLCB0YXJnZXQsIHByb3BlcnR5KSB7XG4gICAgdmFyIHB0ID0gdGhpcy5fcHQsXG4gICAgICAgIG5leHQ7XG5cbiAgICB3aGlsZSAocHQpIHtcbiAgICAgIG5leHQgPSBwdC5fbmV4dDtcbiAgICAgIHB0LnAgPT09IHByb3BlcnR5ICYmIHB0Lm1vZGlmaWVyKG1vZGlmaWVyLCB0d2VlbiwgdGFyZ2V0KTtcbiAgICAgIHB0ID0gbmV4dDtcbiAgICB9XG4gIH0sXG4gICAgICBfa2lsbFByb3BUd2VlbnNPZiA9IGZ1bmN0aW9uIF9raWxsUHJvcFR3ZWVuc09mKHByb3BlcnR5KSB7XG4gICAgdmFyIHB0ID0gdGhpcy5fcHQsXG4gICAgICAgIGhhc05vbkRlcGVuZGVudFJlbWFpbmluZyxcbiAgICAgICAgbmV4dDtcblxuICAgIHdoaWxlIChwdCkge1xuICAgICAgbmV4dCA9IHB0Ll9uZXh0O1xuXG4gICAgICBpZiAocHQucCA9PT0gcHJvcGVydHkgJiYgIXB0Lm9wIHx8IHB0Lm9wID09PSBwcm9wZXJ0eSkge1xuICAgICAgICBfcmVtb3ZlTGlua2VkTGlzdEl0ZW0odGhpcywgcHQsIFwiX3B0XCIpO1xuICAgICAgfSBlbHNlIGlmICghcHQuZGVwKSB7XG4gICAgICAgIGhhc05vbkRlcGVuZGVudFJlbWFpbmluZyA9IDE7XG4gICAgICB9XG5cbiAgICAgIHB0ID0gbmV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gIWhhc05vbkRlcGVuZGVudFJlbWFpbmluZztcbiAgfSxcbiAgICAgIF9zZXR0ZXJXaXRoTW9kaWZpZXIgPSBmdW5jdGlvbiBfc2V0dGVyV2l0aE1vZGlmaWVyKHRhcmdldCwgcHJvcGVydHksIHZhbHVlLCBkYXRhKSB7XG4gICAgZGF0YS5tU2V0KHRhcmdldCwgcHJvcGVydHksIGRhdGEubS5jYWxsKGRhdGEudHdlZW4sIHZhbHVlLCBkYXRhLm10KSwgZGF0YSk7XG4gIH0sXG4gICAgICBfc29ydFByb3BUd2VlbnNCeVByaW9yaXR5ID0gZnVuY3Rpb24gX3NvcnRQcm9wVHdlZW5zQnlQcmlvcml0eShwYXJlbnQpIHtcbiAgICB2YXIgcHQgPSBwYXJlbnQuX3B0LFxuICAgICAgICBuZXh0LFxuICAgICAgICBwdDIsXG4gICAgICAgIGZpcnN0LFxuICAgICAgICBsYXN0O1xuXG4gICAgd2hpbGUgKHB0KSB7XG4gICAgICBuZXh0ID0gcHQuX25leHQ7XG4gICAgICBwdDIgPSBmaXJzdDtcblxuICAgICAgd2hpbGUgKHB0MiAmJiBwdDIucHIgPiBwdC5wcikge1xuICAgICAgICBwdDIgPSBwdDIuX25leHQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChwdC5fcHJldiA9IHB0MiA/IHB0Mi5fcHJldiA6IGxhc3QpIHtcbiAgICAgICAgcHQuX3ByZXYuX25leHQgPSBwdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpcnN0ID0gcHQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChwdC5fbmV4dCA9IHB0Mikge1xuICAgICAgICBwdDIuX3ByZXYgPSBwdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3QgPSBwdDtcbiAgICAgIH1cblxuICAgICAgcHQgPSBuZXh0O1xuICAgIH1cblxuICAgIHBhcmVudC5fcHQgPSBmaXJzdDtcbiAgfTtcblxuICB2YXIgUHJvcFR3ZWVuID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFByb3BUd2VlbihuZXh0LCB0YXJnZXQsIHByb3AsIHN0YXJ0LCBjaGFuZ2UsIHJlbmRlcmVyLCBkYXRhLCBzZXR0ZXIsIHByaW9yaXR5KSB7XG4gICAgICB0aGlzLnQgPSB0YXJnZXQ7XG4gICAgICB0aGlzLnMgPSBzdGFydDtcbiAgICAgIHRoaXMuYyA9IGNoYW5nZTtcbiAgICAgIHRoaXMucCA9IHByb3A7XG4gICAgICB0aGlzLnIgPSByZW5kZXJlciB8fCBfcmVuZGVyUGxhaW47XG4gICAgICB0aGlzLmQgPSBkYXRhIHx8IHRoaXM7XG4gICAgICB0aGlzLnNldCA9IHNldHRlciB8fCBfc2V0dGVyUGxhaW47XG4gICAgICB0aGlzLnByID0gcHJpb3JpdHkgfHwgMDtcbiAgICAgIHRoaXMuX25leHQgPSBuZXh0O1xuXG4gICAgICBpZiAobmV4dCkge1xuICAgICAgICBuZXh0Ll9wcmV2ID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvNCA9IFByb3BUd2Vlbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG80Lm1vZGlmaWVyID0gZnVuY3Rpb24gbW9kaWZpZXIoZnVuYywgdHdlZW4sIHRhcmdldCkge1xuICAgICAgdGhpcy5tU2V0ID0gdGhpcy5tU2V0IHx8IHRoaXMuc2V0O1xuICAgICAgdGhpcy5zZXQgPSBfc2V0dGVyV2l0aE1vZGlmaWVyO1xuICAgICAgdGhpcy5tID0gZnVuYztcbiAgICAgIHRoaXMubXQgPSB0YXJnZXQ7XG4gICAgICB0aGlzLnR3ZWVuID0gdHdlZW47XG4gICAgfTtcblxuICAgIHJldHVybiBQcm9wVHdlZW47XG4gIH0oKTtcblxuICBfZm9yRWFjaE5hbWUoX2NhbGxiYWNrTmFtZXMgKyBcInBhcmVudCxkdXJhdGlvbixlYXNlLGRlbGF5LG92ZXJ3cml0ZSxydW5CYWNrd2FyZHMsc3RhcnRBdCx5b3lvLGltbWVkaWF0ZVJlbmRlcixyZXBlYXQscmVwZWF0RGVsYXksZGF0YSxwYXVzZWQscmV2ZXJzZWQsbGF6eSxjYWxsYmFja1Njb3BlLHN0cmluZ0ZpbHRlcixpZCx5b3lvRWFzZSxzdGFnZ2VyLGluaGVyaXQscmVwZWF0UmVmcmVzaCxrZXlmcmFtZXMsYXV0b1JldmVydCxzY3JvbGxUcmlnZ2VyXCIsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIF9yZXNlcnZlZFByb3BzW25hbWVdID0gMTtcbiAgfSk7XG5cbiAgX2dsb2JhbHMuVHdlZW5NYXggPSBfZ2xvYmFscy5Ud2VlbkxpdGUgPSBUd2VlbjtcbiAgX2dsb2JhbHMuVGltZWxpbmVMaXRlID0gX2dsb2JhbHMuVGltZWxpbmVNYXggPSBUaW1lbGluZTtcbiAgX2dsb2JhbFRpbWVsaW5lID0gbmV3IFRpbWVsaW5lKHtcbiAgICBzb3J0Q2hpbGRyZW46IGZhbHNlLFxuICAgIGRlZmF1bHRzOiBfZGVmYXVsdHMsXG4gICAgYXV0b1JlbW92ZUNoaWxkcmVuOiB0cnVlLFxuICAgIGlkOiBcInJvb3RcIixcbiAgICBzbW9vdGhDaGlsZFRpbWluZzogdHJ1ZVxuICB9KTtcbiAgX2NvbmZpZy5zdHJpbmdGaWx0ZXIgPSBfY29sb3JTdHJpbmdGaWx0ZXI7XG5cbiAgdmFyIF9tZWRpYSA9IFtdLFxuICAgICAgX2xpc3RlbmVycyA9IHt9LFxuICAgICAgX2VtcHR5QXJyYXkgPSBbXSxcbiAgICAgIF9sYXN0TWVkaWFUaW1lID0gMCxcbiAgICAgIF9jb250ZXh0SUQgPSAwLFxuICAgICAgX2Rpc3BhdGNoID0gZnVuY3Rpb24gX2Rpc3BhdGNoKHR5cGUpIHtcbiAgICByZXR1cm4gKF9saXN0ZW5lcnNbdHlwZV0gfHwgX2VtcHR5QXJyYXkpLm1hcChmdW5jdGlvbiAoZikge1xuICAgICAgcmV0dXJuIGYoKTtcbiAgICB9KTtcbiAgfSxcbiAgICAgIF9vbk1lZGlhQ2hhbmdlID0gZnVuY3Rpb24gX29uTWVkaWFDaGFuZ2UoKSB7XG4gICAgdmFyIHRpbWUgPSBEYXRlLm5vdygpLFxuICAgICAgICBtYXRjaGVzID0gW107XG5cbiAgICBpZiAodGltZSAtIF9sYXN0TWVkaWFUaW1lID4gMikge1xuICAgICAgX2Rpc3BhdGNoKFwibWF0Y2hNZWRpYUluaXRcIik7XG5cbiAgICAgIF9tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHZhciBxdWVyaWVzID0gYy5xdWVyaWVzLFxuICAgICAgICAgICAgY29uZGl0aW9ucyA9IGMuY29uZGl0aW9ucyxcbiAgICAgICAgICAgIG1hdGNoLFxuICAgICAgICAgICAgcCxcbiAgICAgICAgICAgIGFueU1hdGNoLFxuICAgICAgICAgICAgdG9nZ2xlZDtcblxuICAgICAgICBmb3IgKHAgaW4gcXVlcmllcykge1xuICAgICAgICAgIG1hdGNoID0gX3dpbi5tYXRjaE1lZGlhKHF1ZXJpZXNbcF0pLm1hdGNoZXM7XG4gICAgICAgICAgbWF0Y2ggJiYgKGFueU1hdGNoID0gMSk7XG5cbiAgICAgICAgICBpZiAobWF0Y2ggIT09IGNvbmRpdGlvbnNbcF0pIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbnNbcF0gPSBtYXRjaDtcbiAgICAgICAgICAgIHRvZ2dsZWQgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b2dnbGVkKSB7XG4gICAgICAgICAgYy5yZXZlcnQoKTtcbiAgICAgICAgICBhbnlNYXRjaCAmJiBtYXRjaGVzLnB1c2goYyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBfZGlzcGF0Y2goXCJtYXRjaE1lZGlhUmV2ZXJ0XCIpO1xuXG4gICAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgcmV0dXJuIGMub25NYXRjaChjLCBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgIHJldHVybiBjLmFkZChudWxsLCBmdW5jKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIF9sYXN0TWVkaWFUaW1lID0gdGltZTtcblxuICAgICAgX2Rpc3BhdGNoKFwibWF0Y2hNZWRpYVwiKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udGV4dChmdW5jLCBzY29wZSkge1xuICAgICAgdGhpcy5zZWxlY3RvciA9IHNjb3BlICYmIHNlbGVjdG9yKHNjb3BlKTtcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5fciA9IFtdO1xuICAgICAgdGhpcy5pc1JldmVydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmlkID0gX2NvbnRleHRJRCsrO1xuICAgICAgZnVuYyAmJiB0aGlzLmFkZChmdW5jKTtcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvNSA9IENvbnRleHQucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvNS5hZGQgPSBmdW5jdGlvbiBhZGQobmFtZSwgZnVuYywgc2NvcGUpIHtcbiAgICAgIGlmIChfaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICBzY29wZSA9IGZ1bmM7XG4gICAgICAgIGZ1bmMgPSBuYW1lO1xuICAgICAgICBuYW1lID0gX2lzRnVuY3Rpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICBmID0gZnVuY3Rpb24gZigpIHtcbiAgICAgICAgdmFyIHByZXYgPSBfY29udGV4dCxcbiAgICAgICAgICAgIHByZXZTZWxlY3RvciA9IHNlbGYuc2VsZWN0b3IsXG4gICAgICAgICAgICByZXN1bHQ7XG4gICAgICAgIHByZXYgJiYgcHJldiAhPT0gc2VsZiAmJiBwcmV2LmRhdGEucHVzaChzZWxmKTtcbiAgICAgICAgc2NvcGUgJiYgKHNlbGYuc2VsZWN0b3IgPSBzZWxlY3RvcihzY29wZSkpO1xuICAgICAgICBfY29udGV4dCA9IHNlbGY7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcbiAgICAgICAgX2lzRnVuY3Rpb24ocmVzdWx0KSAmJiBzZWxmLl9yLnB1c2gocmVzdWx0KTtcbiAgICAgICAgX2NvbnRleHQgPSBwcmV2O1xuICAgICAgICBzZWxmLnNlbGVjdG9yID0gcHJldlNlbGVjdG9yO1xuICAgICAgICBzZWxmLmlzUmV2ZXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYubGFzdCA9IGY7XG4gICAgICByZXR1cm4gbmFtZSA9PT0gX2lzRnVuY3Rpb24gPyBmKHNlbGYsIGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmFkZChudWxsLCBmdW5jKTtcbiAgICAgIH0pIDogbmFtZSA/IHNlbGZbbmFtZV0gPSBmIDogZjtcbiAgICB9O1xuXG4gICAgX3Byb3RvNS5pZ25vcmUgPSBmdW5jdGlvbiBpZ25vcmUoZnVuYykge1xuICAgICAgdmFyIHByZXYgPSBfY29udGV4dDtcbiAgICAgIF9jb250ZXh0ID0gbnVsbDtcbiAgICAgIGZ1bmModGhpcyk7XG4gICAgICBfY29udGV4dCA9IHByZXY7XG4gICAgfTtcblxuICAgIF9wcm90bzUuZ2V0VHdlZW5zID0gZnVuY3Rpb24gZ2V0VHdlZW5zKCkge1xuICAgICAgdmFyIGEgPSBbXTtcbiAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgQ29udGV4dCA/IGEucHVzaC5hcHBseShhLCBlLmdldFR3ZWVucygpKSA6IGUgaW5zdGFuY2VvZiBUd2VlbiAmJiAhKGUucGFyZW50ICYmIGUucGFyZW50LmRhdGEgPT09IFwibmVzdGVkXCIpICYmIGEucHVzaChlKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGE7XG4gICAgfTtcblxuICAgIF9wcm90bzUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHRoaXMuX3IubGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aCA9IDA7XG4gICAgfTtcblxuICAgIF9wcm90bzUua2lsbCA9IGZ1bmN0aW9uIGtpbGwocmV2ZXJ0LCBtYXRjaE1lZGlhKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgaWYgKHJldmVydCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciB0d2VlbnMgPSBfdGhpczQuZ2V0VHdlZW5zKCksXG4gICAgICAgICAgICAgIGkgPSBfdGhpczQuZGF0YS5sZW5ndGgsXG4gICAgICAgICAgICAgIHQ7XG5cbiAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICB0ID0gX3RoaXM0LmRhdGFbaV07XG5cbiAgICAgICAgICAgIGlmICh0LmRhdGEgPT09IFwiaXNGbGlwXCIpIHtcbiAgICAgICAgICAgICAgdC5yZXZlcnQoKTtcbiAgICAgICAgICAgICAgdC5nZXRDaGlsZHJlbih0cnVlLCB0cnVlLCBmYWxzZSkuZm9yRWFjaChmdW5jdGlvbiAodHdlZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHdlZW5zLnNwbGljZSh0d2VlbnMuaW5kZXhPZih0d2VlbiksIDEpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0d2VlbnMubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBnOiB0Ll9kdXIgfHwgdC5fZGVsYXkgfHwgdC5fc2F0ICYmICF0Ll9zYXQudmFycy5pbW1lZGlhdGVSZW5kZXIgPyB0Lmdsb2JhbFRpbWUoMCkgOiAtSW5maW5pdHksXG4gICAgICAgICAgICAgIHQ6IHRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGIuZyAtIGEuZyB8fCAtSW5maW5pdHk7XG4gICAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgcmV0dXJuIG8udC5yZXZlcnQocmV2ZXJ0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpID0gX3RoaXM0LmRhdGEubGVuZ3RoO1xuXG4gICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgdCA9IF90aGlzNC5kYXRhW2ldO1xuXG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFRpbWVsaW5lKSB7XG4gICAgICAgICAgICAgIGlmICh0LmRhdGEgIT09IFwibmVzdGVkXCIpIHtcbiAgICAgICAgICAgICAgICB0LnNjcm9sbFRyaWdnZXIgJiYgdC5zY3JvbGxUcmlnZ2VyLnJldmVydCgpO1xuICAgICAgICAgICAgICAgIHQua2lsbCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAhKHQgaW5zdGFuY2VvZiBUd2VlbikgJiYgdC5yZXZlcnQgJiYgdC5yZXZlcnQocmV2ZXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfdGhpczQuX3IuZm9yRWFjaChmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgcmV0dXJuIGYocmV2ZXJ0LCBfdGhpczQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgX3RoaXM0LmlzUmV2ZXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9KSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5raWxsICYmIGUua2lsbCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICBpZiAobWF0Y2hNZWRpYSkge1xuICAgICAgICB2YXIgaSA9IF9tZWRpYS5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgIF9tZWRpYVtpXS5pZCA9PT0gdGhpcy5pZCAmJiBfbWVkaWEuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzUucmV2ZXJ0ID0gZnVuY3Rpb24gcmV2ZXJ0KGNvbmZpZykge1xuICAgICAgdGhpcy5raWxsKGNvbmZpZyB8fCB7fSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb250ZXh0O1xuICB9KCk7XG5cbiAgdmFyIE1hdGNoTWVkaWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWF0Y2hNZWRpYShzY29wZSkge1xuICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgICAgX2NvbnRleHQgJiYgX2NvbnRleHQuZGF0YS5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG82ID0gTWF0Y2hNZWRpYS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG82LmFkZCA9IGZ1bmN0aW9uIGFkZChjb25kaXRpb25zLCBmdW5jLCBzY29wZSkge1xuICAgICAgX2lzT2JqZWN0KGNvbmRpdGlvbnMpIHx8IChjb25kaXRpb25zID0ge1xuICAgICAgICBtYXRjaGVzOiBjb25kaXRpb25zXG4gICAgICB9KTtcbiAgICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQoMCwgc2NvcGUgfHwgdGhpcy5zY29wZSksXG4gICAgICAgICAgY29uZCA9IGNvbnRleHQuY29uZGl0aW9ucyA9IHt9LFxuICAgICAgICAgIG1xLFxuICAgICAgICAgIHAsXG4gICAgICAgICAgYWN0aXZlO1xuICAgICAgX2NvbnRleHQgJiYgIWNvbnRleHQuc2VsZWN0b3IgJiYgKGNvbnRleHQuc2VsZWN0b3IgPSBfY29udGV4dC5zZWxlY3Rvcik7XG4gICAgICB0aGlzLmNvbnRleHRzLnB1c2goY29udGV4dCk7XG4gICAgICBmdW5jID0gY29udGV4dC5hZGQoXCJvbk1hdGNoXCIsIGZ1bmMpO1xuICAgICAgY29udGV4dC5xdWVyaWVzID0gY29uZGl0aW9ucztcblxuICAgICAgZm9yIChwIGluIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgaWYgKHAgPT09IFwiYWxsXCIpIHtcbiAgICAgICAgICBhY3RpdmUgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1xID0gX3dpbi5tYXRjaE1lZGlhKGNvbmRpdGlvbnNbcF0pO1xuXG4gICAgICAgICAgaWYgKG1xKSB7XG4gICAgICAgICAgICBfbWVkaWEuaW5kZXhPZihjb250ZXh0KSA8IDAgJiYgX21lZGlhLnB1c2goY29udGV4dCk7XG4gICAgICAgICAgICAoY29uZFtwXSA9IG1xLm1hdGNoZXMpICYmIChhY3RpdmUgPSAxKTtcbiAgICAgICAgICAgIG1xLmFkZExpc3RlbmVyID8gbXEuYWRkTGlzdGVuZXIoX29uTWVkaWFDaGFuZ2UpIDogbXEuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBfb25NZWRpYUNoYW5nZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFjdGl2ZSAmJiBmdW5jKGNvbnRleHQsIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmFkZChudWxsLCBmKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90bzYucmV2ZXJ0ID0gZnVuY3Rpb24gcmV2ZXJ0KGNvbmZpZykge1xuICAgICAgdGhpcy5raWxsKGNvbmZpZyB8fCB7fSk7XG4gICAgfTtcblxuICAgIF9wcm90bzYua2lsbCA9IGZ1bmN0aW9uIGtpbGwocmV2ZXJ0KSB7XG4gICAgICB0aGlzLmNvbnRleHRzLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgcmV0dXJuIGMua2lsbChyZXZlcnQsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNYXRjaE1lZGlhO1xuICB9KCk7XG5cbiAgdmFyIF9nc2FwID0ge1xuICAgIHJlZ2lzdGVyUGx1Z2luOiBmdW5jdGlvbiByZWdpc3RlclBsdWdpbigpIHtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfY3JlYXRlUGx1Z2luKGNvbmZpZyk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHRpbWVsaW5lOiBmdW5jdGlvbiB0aW1lbGluZSh2YXJzKSB7XG4gICAgICByZXR1cm4gbmV3IFRpbWVsaW5lKHZhcnMpO1xuICAgIH0sXG4gICAgZ2V0VHdlZW5zT2Y6IGZ1bmN0aW9uIGdldFR3ZWVuc09mKHRhcmdldHMsIG9ubHlBY3RpdmUpIHtcbiAgICAgIHJldHVybiBfZ2xvYmFsVGltZWxpbmUuZ2V0VHdlZW5zT2YodGFyZ2V0cywgb25seUFjdGl2ZSk7XG4gICAgfSxcbiAgICBnZXRQcm9wZXJ0eTogZnVuY3Rpb24gZ2V0UHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgdW5pdCwgdW5jYWNoZSkge1xuICAgICAgX2lzU3RyaW5nKHRhcmdldCkgJiYgKHRhcmdldCA9IHRvQXJyYXkodGFyZ2V0KVswXSk7XG5cbiAgICAgIHZhciBnZXR0ZXIgPSBfZ2V0Q2FjaGUodGFyZ2V0IHx8IHt9KS5nZXQsXG4gICAgICAgICAgZm9ybWF0ID0gdW5pdCA/IF9wYXNzVGhyb3VnaCA6IF9udW1lcmljSWZQb3NzaWJsZTtcblxuICAgICAgdW5pdCA9PT0gXCJuYXRpdmVcIiAmJiAodW5pdCA9IFwiXCIpO1xuICAgICAgcmV0dXJuICF0YXJnZXQgPyB0YXJnZXQgOiAhcHJvcGVydHkgPyBmdW5jdGlvbiAocHJvcGVydHksIHVuaXQsIHVuY2FjaGUpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdCgoX3BsdWdpbnNbcHJvcGVydHldICYmIF9wbHVnaW5zW3Byb3BlcnR5XS5nZXQgfHwgZ2V0dGVyKSh0YXJnZXQsIHByb3BlcnR5LCB1bml0LCB1bmNhY2hlKSk7XG4gICAgICB9IDogZm9ybWF0KChfcGx1Z2luc1twcm9wZXJ0eV0gJiYgX3BsdWdpbnNbcHJvcGVydHldLmdldCB8fCBnZXR0ZXIpKHRhcmdldCwgcHJvcGVydHksIHVuaXQsIHVuY2FjaGUpKTtcbiAgICB9LFxuICAgIHF1aWNrU2V0dGVyOiBmdW5jdGlvbiBxdWlja1NldHRlcih0YXJnZXQsIHByb3BlcnR5LCB1bml0KSB7XG4gICAgICB0YXJnZXQgPSB0b0FycmF5KHRhcmdldCk7XG5cbiAgICAgIGlmICh0YXJnZXQubGVuZ3RoID4gMSkge1xuICAgICAgICB2YXIgc2V0dGVycyA9IHRhcmdldC5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gZ3NhcC5xdWlja1NldHRlcih0LCBwcm9wZXJ0eSwgdW5pdCk7XG4gICAgICAgIH0pLFxuICAgICAgICAgICAgbCA9IHNldHRlcnMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGkgPSBsO1xuXG4gICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgc2V0dGVyc1tpXSh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB0YXJnZXQgPSB0YXJnZXRbMF0gfHwge307XG5cbiAgICAgIHZhciBQbHVnaW4gPSBfcGx1Z2luc1twcm9wZXJ0eV0sXG4gICAgICAgICAgY2FjaGUgPSBfZ2V0Q2FjaGUodGFyZ2V0KSxcbiAgICAgICAgICBwID0gY2FjaGUuaGFybmVzcyAmJiAoY2FjaGUuaGFybmVzcy5hbGlhc2VzIHx8IHt9KVtwcm9wZXJ0eV0gfHwgcHJvcGVydHksXG4gICAgICAgICAgc2V0dGVyID0gUGx1Z2luID8gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBwID0gbmV3IFBsdWdpbigpO1xuICAgICAgICBfcXVpY2tUd2Vlbi5fcHQgPSAwO1xuICAgICAgICBwLmluaXQodGFyZ2V0LCB1bml0ID8gdmFsdWUgKyB1bml0IDogdmFsdWUsIF9xdWlja1R3ZWVuLCAwLCBbdGFyZ2V0XSk7XG4gICAgICAgIHAucmVuZGVyKDEsIHApO1xuICAgICAgICBfcXVpY2tUd2Vlbi5fcHQgJiYgX3JlbmRlclByb3BUd2VlbnMoMSwgX3F1aWNrVHdlZW4pO1xuICAgICAgfSA6IGNhY2hlLnNldCh0YXJnZXQsIHApO1xuXG4gICAgICByZXR1cm4gUGx1Z2luID8gc2V0dGVyIDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBzZXR0ZXIodGFyZ2V0LCBwLCB1bml0ID8gdmFsdWUgKyB1bml0IDogdmFsdWUsIGNhY2hlLCAxKTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBxdWlja1RvOiBmdW5jdGlvbiBxdWlja1RvKHRhcmdldCwgcHJvcGVydHksIHZhcnMpIHtcbiAgICAgIHZhciBfbWVyZ2UyO1xuXG4gICAgICB2YXIgdHdlZW4gPSBnc2FwLnRvKHRhcmdldCwgX21lcmdlKChfbWVyZ2UyID0ge30sIF9tZXJnZTJbcHJvcGVydHldID0gXCIrPTAuMVwiLCBfbWVyZ2UyLnBhdXNlZCA9IHRydWUsIF9tZXJnZTIpLCB2YXJzIHx8IHt9KSksXG4gICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmModmFsdWUsIHN0YXJ0LCBzdGFydElzUmVsYXRpdmUpIHtcbiAgICAgICAgcmV0dXJuIHR3ZWVuLnJlc2V0VG8ocHJvcGVydHksIHZhbHVlLCBzdGFydCwgc3RhcnRJc1JlbGF0aXZlKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmMudHdlZW4gPSB0d2VlbjtcbiAgICAgIHJldHVybiBmdW5jO1xuICAgIH0sXG4gICAgaXNUd2VlbmluZzogZnVuY3Rpb24gaXNUd2VlbmluZyh0YXJnZXRzKSB7XG4gICAgICByZXR1cm4gX2dsb2JhbFRpbWVsaW5lLmdldFR3ZWVuc09mKHRhcmdldHMsIHRydWUpLmxlbmd0aCA+IDA7XG4gICAgfSxcbiAgICBkZWZhdWx0czogZnVuY3Rpb24gZGVmYXVsdHModmFsdWUpIHtcbiAgICAgIHZhbHVlICYmIHZhbHVlLmVhc2UgJiYgKHZhbHVlLmVhc2UgPSBfcGFyc2VFYXNlKHZhbHVlLmVhc2UsIF9kZWZhdWx0cy5lYXNlKSk7XG4gICAgICByZXR1cm4gX21lcmdlRGVlcChfZGVmYXVsdHMsIHZhbHVlIHx8IHt9KTtcbiAgICB9LFxuICAgIGNvbmZpZzogZnVuY3Rpb24gY29uZmlnKHZhbHVlKSB7XG4gICAgICByZXR1cm4gX21lcmdlRGVlcChfY29uZmlnLCB2YWx1ZSB8fCB7fSk7XG4gICAgfSxcbiAgICByZWdpc3RlckVmZmVjdDogZnVuY3Rpb24gcmVnaXN0ZXJFZmZlY3QoX3JlZjMpIHtcbiAgICAgIHZhciBuYW1lID0gX3JlZjMubmFtZSxcbiAgICAgICAgICBlZmZlY3QgPSBfcmVmMy5lZmZlY3QsXG4gICAgICAgICAgcGx1Z2lucyA9IF9yZWYzLnBsdWdpbnMsXG4gICAgICAgICAgZGVmYXVsdHMgPSBfcmVmMy5kZWZhdWx0cyxcbiAgICAgICAgICBleHRlbmRUaW1lbGluZSA9IF9yZWYzLmV4dGVuZFRpbWVsaW5lO1xuICAgICAgKHBsdWdpbnMgfHwgXCJcIikuc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbk5hbWUgJiYgIV9wbHVnaW5zW3BsdWdpbk5hbWVdICYmICFfZ2xvYmFsc1twbHVnaW5OYW1lXSAmJiBfd2FybihuYW1lICsgXCIgZWZmZWN0IHJlcXVpcmVzIFwiICsgcGx1Z2luTmFtZSArIFwiIHBsdWdpbi5cIik7XG4gICAgICB9KTtcblxuICAgICAgX2VmZmVjdHNbbmFtZV0gPSBmdW5jdGlvbiAodGFyZ2V0cywgdmFycywgdGwpIHtcbiAgICAgICAgcmV0dXJuIGVmZmVjdCh0b0FycmF5KHRhcmdldHMpLCBfc2V0RGVmYXVsdHModmFycyB8fCB7fSwgZGVmYXVsdHMpLCB0bCk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoZXh0ZW5kVGltZWxpbmUpIHtcbiAgICAgICAgVGltZWxpbmUucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24gKHRhcmdldHMsIHZhcnMsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYWRkKF9lZmZlY3RzW25hbWVdKHRhcmdldHMsIF9pc09iamVjdCh2YXJzKSA/IHZhcnMgOiAocG9zaXRpb24gPSB2YXJzKSAmJiB7fSwgdGhpcyksIHBvc2l0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlZ2lzdGVyRWFzZTogZnVuY3Rpb24gcmVnaXN0ZXJFYXNlKG5hbWUsIGVhc2UpIHtcbiAgICAgIF9lYXNlTWFwW25hbWVdID0gX3BhcnNlRWFzZShlYXNlKTtcbiAgICB9LFxuICAgIHBhcnNlRWFzZTogZnVuY3Rpb24gcGFyc2VFYXNlKGVhc2UsIGRlZmF1bHRFYXNlKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IF9wYXJzZUVhc2UoZWFzZSwgZGVmYXVsdEVhc2UpIDogX2Vhc2VNYXA7XG4gICAgfSxcbiAgICBnZXRCeUlkOiBmdW5jdGlvbiBnZXRCeUlkKGlkKSB7XG4gICAgICByZXR1cm4gX2dsb2JhbFRpbWVsaW5lLmdldEJ5SWQoaWQpO1xuICAgIH0sXG4gICAgZXhwb3J0Um9vdDogZnVuY3Rpb24gZXhwb3J0Um9vdCh2YXJzLCBpbmNsdWRlRGVsYXllZENhbGxzKSB7XG4gICAgICBpZiAodmFycyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHZhcnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lKHZhcnMpLFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIG5leHQ7XG4gICAgICB0bC5zbW9vdGhDaGlsZFRpbWluZyA9IF9pc05vdEZhbHNlKHZhcnMuc21vb3RoQ2hpbGRUaW1pbmcpO1xuXG4gICAgICBfZ2xvYmFsVGltZWxpbmUucmVtb3ZlKHRsKTtcblxuICAgICAgdGwuX2RwID0gMDtcbiAgICAgIHRsLl90aW1lID0gdGwuX3RUaW1lID0gX2dsb2JhbFRpbWVsaW5lLl90aW1lO1xuICAgICAgY2hpbGQgPSBfZ2xvYmFsVGltZWxpbmUuX2ZpcnN0O1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgbmV4dCA9IGNoaWxkLl9uZXh0O1xuXG4gICAgICAgIGlmIChpbmNsdWRlRGVsYXllZENhbGxzIHx8ICEoIWNoaWxkLl9kdXIgJiYgY2hpbGQgaW5zdGFuY2VvZiBUd2VlbiAmJiBjaGlsZC52YXJzLm9uQ29tcGxldGUgPT09IGNoaWxkLl90YXJnZXRzWzBdKSkge1xuICAgICAgICAgIF9hZGRUb1RpbWVsaW5lKHRsLCBjaGlsZCwgY2hpbGQuX3N0YXJ0IC0gY2hpbGQuX2RlbGF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkID0gbmV4dDtcbiAgICAgIH1cblxuICAgICAgX2FkZFRvVGltZWxpbmUoX2dsb2JhbFRpbWVsaW5lLCB0bCwgMCk7XG5cbiAgICAgIHJldHVybiB0bDtcbiAgICB9LFxuICAgIGNvbnRleHQ6IGZ1bmN0aW9uIGNvbnRleHQoZnVuYywgc2NvcGUpIHtcbiAgICAgIHJldHVybiBmdW5jID8gbmV3IENvbnRleHQoZnVuYywgc2NvcGUpIDogX2NvbnRleHQ7XG4gICAgfSxcbiAgICBtYXRjaE1lZGlhOiBmdW5jdGlvbiBtYXRjaE1lZGlhKHNjb3BlKSB7XG4gICAgICByZXR1cm4gbmV3IE1hdGNoTWVkaWEoc2NvcGUpO1xuICAgIH0sXG4gICAgbWF0Y2hNZWRpYVJlZnJlc2g6IGZ1bmN0aW9uIG1hdGNoTWVkaWFSZWZyZXNoKCkge1xuICAgICAgcmV0dXJuIF9tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHZhciBjb25kID0gYy5jb25kaXRpb25zLFxuICAgICAgICAgICAgZm91bmQsXG4gICAgICAgICAgICBwO1xuXG4gICAgICAgIGZvciAocCBpbiBjb25kKSB7XG4gICAgICAgICAgaWYgKGNvbmRbcF0pIHtcbiAgICAgICAgICAgIGNvbmRbcF0gPSBmYWxzZTtcbiAgICAgICAgICAgIGZvdW5kID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3VuZCAmJiBjLnJldmVydCgpO1xuICAgICAgfSkgfHwgX29uTWVkaWFDaGFuZ2UoKTtcbiAgICB9LFxuICAgIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBhID0gX2xpc3RlbmVyc1t0eXBlXSB8fCAoX2xpc3RlbmVyc1t0eXBlXSA9IFtdKTtcbiAgICAgIH5hLmluZGV4T2YoY2FsbGJhY2spIHx8IGEucHVzaChjYWxsYmFjayk7XG4gICAgfSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgYSA9IF9saXN0ZW5lcnNbdHlwZV0sXG4gICAgICAgICAgaSA9IGEgJiYgYS5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgIGkgPj0gMCAmJiBhLnNwbGljZShpLCAxKTtcbiAgICB9LFxuICAgIHV0aWxzOiB7XG4gICAgICB3cmFwOiB3cmFwLFxuICAgICAgd3JhcFlveW86IHdyYXBZb3lvLFxuICAgICAgZGlzdHJpYnV0ZTogZGlzdHJpYnV0ZSxcbiAgICAgIHJhbmRvbTogcmFuZG9tLFxuICAgICAgc25hcDogc25hcCxcbiAgICAgIG5vcm1hbGl6ZTogbm9ybWFsaXplLFxuICAgICAgZ2V0VW5pdDogZ2V0VW5pdCxcbiAgICAgIGNsYW1wOiBjbGFtcCxcbiAgICAgIHNwbGl0Q29sb3I6IHNwbGl0Q29sb3IsXG4gICAgICB0b0FycmF5OiB0b0FycmF5LFxuICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLFxuICAgICAgbWFwUmFuZ2U6IG1hcFJhbmdlLFxuICAgICAgcGlwZTogcGlwZSxcbiAgICAgIHVuaXRpemU6IHVuaXRpemUsXG4gICAgICBpbnRlcnBvbGF0ZTogaW50ZXJwb2xhdGUsXG4gICAgICBzaHVmZmxlOiBzaHVmZmxlXG4gICAgfSxcbiAgICBpbnN0YWxsOiBfaW5zdGFsbCxcbiAgICBlZmZlY3RzOiBfZWZmZWN0cyxcbiAgICB0aWNrZXI6IF90aWNrZXIsXG4gICAgdXBkYXRlUm9vdDogVGltZWxpbmUudXBkYXRlUm9vdCxcbiAgICBwbHVnaW5zOiBfcGx1Z2lucyxcbiAgICBnbG9iYWxUaW1lbGluZTogX2dsb2JhbFRpbWVsaW5lLFxuICAgIGNvcmU6IHtcbiAgICAgIFByb3BUd2VlbjogUHJvcFR3ZWVuLFxuICAgICAgZ2xvYmFsczogX2FkZEdsb2JhbCxcbiAgICAgIFR3ZWVuOiBUd2VlbixcbiAgICAgIFRpbWVsaW5lOiBUaW1lbGluZSxcbiAgICAgIEFuaW1hdGlvbjogQW5pbWF0aW9uLFxuICAgICAgZ2V0Q2FjaGU6IF9nZXRDYWNoZSxcbiAgICAgIF9yZW1vdmVMaW5rZWRMaXN0SXRlbTogX3JlbW92ZUxpbmtlZExpc3RJdGVtLFxuICAgICAgcmV2ZXJ0aW5nOiBmdW5jdGlvbiByZXZlcnRpbmcoKSB7XG4gICAgICAgIHJldHVybiBfcmV2ZXJ0aW5nO1xuICAgICAgfSxcbiAgICAgIGNvbnRleHQ6IGZ1bmN0aW9uIGNvbnRleHQodG9BZGQpIHtcbiAgICAgICAgaWYgKHRvQWRkICYmIF9jb250ZXh0KSB7XG4gICAgICAgICAgX2NvbnRleHQuZGF0YS5wdXNoKHRvQWRkKTtcblxuICAgICAgICAgIHRvQWRkLl9jdHggPSBfY29udGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfY29udGV4dDtcbiAgICAgIH0sXG4gICAgICBzdXBwcmVzc092ZXJ3cml0ZXM6IGZ1bmN0aW9uIHN1cHByZXNzT3ZlcndyaXRlcyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gX3N1cHByZXNzT3ZlcndyaXRlcyA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfZm9yRWFjaE5hbWUoXCJ0byxmcm9tLGZyb21UbyxkZWxheWVkQ2FsbCxzZXQsa2lsbFR3ZWVuc09mXCIsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIF9nc2FwW25hbWVdID0gVHdlZW5bbmFtZV07XG4gIH0pO1xuXG4gIF90aWNrZXIuYWRkKFRpbWVsaW5lLnVwZGF0ZVJvb3QpO1xuXG4gIF9xdWlja1R3ZWVuID0gX2dzYXAudG8oe30sIHtcbiAgICBkdXJhdGlvbjogMFxuICB9KTtcblxuICB2YXIgX2dldFBsdWdpblByb3BUd2VlbiA9IGZ1bmN0aW9uIF9nZXRQbHVnaW5Qcm9wVHdlZW4ocGx1Z2luLCBwcm9wKSB7XG4gICAgdmFyIHB0ID0gcGx1Z2luLl9wdDtcblxuICAgIHdoaWxlIChwdCAmJiBwdC5wICE9PSBwcm9wICYmIHB0Lm9wICE9PSBwcm9wICYmIHB0LmZwICE9PSBwcm9wKSB7XG4gICAgICBwdCA9IHB0Ll9uZXh0O1xuICAgIH1cblxuICAgIHJldHVybiBwdDtcbiAgfSxcbiAgICAgIF9hZGRNb2RpZmllcnMgPSBmdW5jdGlvbiBfYWRkTW9kaWZpZXJzKHR3ZWVuLCBtb2RpZmllcnMpIHtcbiAgICB2YXIgdGFyZ2V0cyA9IHR3ZWVuLl90YXJnZXRzLFxuICAgICAgICBwLFxuICAgICAgICBpLFxuICAgICAgICBwdDtcblxuICAgIGZvciAocCBpbiBtb2RpZmllcnMpIHtcbiAgICAgIGkgPSB0YXJnZXRzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBwdCA9IHR3ZWVuLl9wdExvb2t1cFtpXVtwXTtcblxuICAgICAgICBpZiAocHQgJiYgKHB0ID0gcHQuZCkpIHtcbiAgICAgICAgICBpZiAocHQuX3B0KSB7XG4gICAgICAgICAgICBwdCA9IF9nZXRQbHVnaW5Qcm9wVHdlZW4ocHQsIHApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHB0ICYmIHB0Lm1vZGlmaWVyICYmIHB0Lm1vZGlmaWVyKG1vZGlmaWVyc1twXSwgdHdlZW4sIHRhcmdldHNbaV0sIHApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgICAgX2J1aWxkTW9kaWZpZXJQbHVnaW4gPSBmdW5jdGlvbiBfYnVpbGRNb2RpZmllclBsdWdpbihuYW1lLCBtb2RpZmllcikge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcmF3VmFyczogMSxcbiAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQodGFyZ2V0LCB2YXJzLCB0d2Vlbikge1xuICAgICAgICB0d2Vlbi5fb25Jbml0ID0gZnVuY3Rpb24gKHR3ZWVuKSB7XG4gICAgICAgICAgdmFyIHRlbXAsIHA7XG5cbiAgICAgICAgICBpZiAoX2lzU3RyaW5nKHZhcnMpKSB7XG4gICAgICAgICAgICB0ZW1wID0ge307XG5cbiAgICAgICAgICAgIF9mb3JFYWNoTmFtZSh2YXJzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcFtuYW1lXSA9IDE7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFycyA9IHRlbXA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG1vZGlmaWVyKSB7XG4gICAgICAgICAgICB0ZW1wID0ge307XG5cbiAgICAgICAgICAgIGZvciAocCBpbiB2YXJzKSB7XG4gICAgICAgICAgICAgIHRlbXBbcF0gPSBtb2RpZmllcih2YXJzW3BdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFycyA9IHRlbXA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2FkZE1vZGlmaWVycyh0d2VlbiwgdmFycyk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICB2YXIgZ3NhcCA9IF9nc2FwLnJlZ2lzdGVyUGx1Z2luKHtcbiAgICBuYW1lOiBcImF0dHJcIixcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KHRhcmdldCwgdmFycywgdHdlZW4sIGluZGV4LCB0YXJnZXRzKSB7XG4gICAgICB2YXIgcCwgcHQsIHY7XG4gICAgICB0aGlzLnR3ZWVuID0gdHdlZW47XG5cbiAgICAgIGZvciAocCBpbiB2YXJzKSB7XG4gICAgICAgIHYgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHApIHx8IFwiXCI7XG4gICAgICAgIHB0ID0gdGhpcy5hZGQodGFyZ2V0LCBcInNldEF0dHJpYnV0ZVwiLCAodiB8fCAwKSArIFwiXCIsIHZhcnNbcF0sIGluZGV4LCB0YXJnZXRzLCAwLCAwLCBwKTtcbiAgICAgICAgcHQub3AgPSBwO1xuICAgICAgICBwdC5iID0gdjtcblxuICAgICAgICB0aGlzLl9wcm9wcy5wdXNoKHApO1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIocmF0aW8sIGRhdGEpIHtcbiAgICAgIHZhciBwdCA9IGRhdGEuX3B0O1xuXG4gICAgICB3aGlsZSAocHQpIHtcbiAgICAgICAgX3JldmVydGluZyA/IHB0LnNldChwdC50LCBwdC5wLCBwdC5iLCBwdCkgOiBwdC5yKHJhdGlvLCBwdC5kKTtcbiAgICAgICAgcHQgPSBwdC5fbmV4dDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBuYW1lOiBcImVuZEFycmF5XCIsXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCh0YXJnZXQsIHZhbHVlKSB7XG4gICAgICB2YXIgaSA9IHZhbHVlLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB0aGlzLmFkZCh0YXJnZXQsIGksIHRhcmdldFtpXSB8fCAwLCB2YWx1ZVtpXSwgMCwgMCwgMCwgMCwgMCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBfYnVpbGRNb2RpZmllclBsdWdpbihcInJvdW5kUHJvcHNcIiwgX3JvdW5kTW9kaWZpZXIpLCBfYnVpbGRNb2RpZmllclBsdWdpbihcIm1vZGlmaWVyc1wiKSwgX2J1aWxkTW9kaWZpZXJQbHVnaW4oXCJzbmFwXCIsIHNuYXApKSB8fCBfZ3NhcDtcbiAgVHdlZW4udmVyc2lvbiA9IFRpbWVsaW5lLnZlcnNpb24gPSBnc2FwLnZlcnNpb24gPSBcIjMuMTIuNVwiO1xuICBfY29yZVJlYWR5ID0gMTtcbiAgX3dpbmRvd0V4aXN0cygpICYmIF93YWtlKCk7XG4gIHZhciBQb3dlcjAgPSBfZWFzZU1hcC5Qb3dlcjAsXG4gICAgICBQb3dlcjEgPSBfZWFzZU1hcC5Qb3dlcjEsXG4gICAgICBQb3dlcjIgPSBfZWFzZU1hcC5Qb3dlcjIsXG4gICAgICBQb3dlcjMgPSBfZWFzZU1hcC5Qb3dlcjMsXG4gICAgICBQb3dlcjQgPSBfZWFzZU1hcC5Qb3dlcjQsXG4gICAgICBMaW5lYXIgPSBfZWFzZU1hcC5MaW5lYXIsXG4gICAgICBRdWFkID0gX2Vhc2VNYXAuUXVhZCxcbiAgICAgIEN1YmljID0gX2Vhc2VNYXAuQ3ViaWMsXG4gICAgICBRdWFydCA9IF9lYXNlTWFwLlF1YXJ0LFxuICAgICAgUXVpbnQgPSBfZWFzZU1hcC5RdWludCxcbiAgICAgIFN0cm9uZyA9IF9lYXNlTWFwLlN0cm9uZyxcbiAgICAgIEVsYXN0aWMgPSBfZWFzZU1hcC5FbGFzdGljLFxuICAgICAgQmFjayA9IF9lYXNlTWFwLkJhY2ssXG4gICAgICBTdGVwcGVkRWFzZSA9IF9lYXNlTWFwLlN0ZXBwZWRFYXNlLFxuICAgICAgQm91bmNlID0gX2Vhc2VNYXAuQm91bmNlLFxuICAgICAgU2luZSA9IF9lYXNlTWFwLlNpbmUsXG4gICAgICBFeHBvID0gX2Vhc2VNYXAuRXhwbyxcbiAgICAgIENpcmMgPSBfZWFzZU1hcC5DaXJjO1xuXG4gIHZhciBfd2luJDEsXG4gICAgICBfZG9jJDEsXG4gICAgICBfZG9jRWxlbWVudCxcbiAgICAgIF9wbHVnaW5Jbml0dGVkLFxuICAgICAgX3RlbXBEaXYsXG4gICAgICBfdGVtcERpdlN0eWxlcixcbiAgICAgIF9yZWNlbnRTZXR0ZXJQbHVnaW4sXG4gICAgICBfcmV2ZXJ0aW5nJDEsXG4gICAgICBfd2luZG93RXhpc3RzJDEgPSBmdW5jdGlvbiBfd2luZG93RXhpc3RzKCkge1xuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xuICB9LFxuICAgICAgX3RyYW5zZm9ybVByb3BzID0ge30sXG4gICAgICBfUkFEMkRFRyA9IDE4MCAvIE1hdGguUEksXG4gICAgICBfREVHMlJBRCA9IE1hdGguUEkgLyAxODAsXG4gICAgICBfYXRhbjIgPSBNYXRoLmF0YW4yLFxuICAgICAgX2JpZ051bSQxID0gMWU4LFxuICAgICAgX2NhcHNFeHAgPSAvKFtBLVpdKS9nLFxuICAgICAgX2hvcml6b250YWxFeHAgPSAvKGxlZnR8cmlnaHR8d2lkdGh8bWFyZ2lufHBhZGRpbmd8eCkvaSxcbiAgICAgIF9jb21wbGV4RXhwID0gL1tcXHMsXFwoXVxcUy8sXG4gICAgICBfcHJvcGVydHlBbGlhc2VzID0ge1xuICAgIGF1dG9BbHBoYTogXCJvcGFjaXR5LHZpc2liaWxpdHlcIixcbiAgICBzY2FsZTogXCJzY2FsZVgsc2NhbGVZXCIsXG4gICAgYWxwaGE6IFwib3BhY2l0eVwiXG4gIH0sXG4gICAgICBfcmVuZGVyQ1NTUHJvcCA9IGZ1bmN0aW9uIF9yZW5kZXJDU1NQcm9wKHJhdGlvLCBkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGEuc2V0KGRhdGEudCwgZGF0YS5wLCBNYXRoLnJvdW5kKChkYXRhLnMgKyBkYXRhLmMgKiByYXRpbykgKiAxMDAwMCkgLyAxMDAwMCArIGRhdGEudSwgZGF0YSk7XG4gIH0sXG4gICAgICBfcmVuZGVyUHJvcFdpdGhFbmQgPSBmdW5jdGlvbiBfcmVuZGVyUHJvcFdpdGhFbmQocmF0aW8sIGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YS5zZXQoZGF0YS50LCBkYXRhLnAsIHJhdGlvID09PSAxID8gZGF0YS5lIDogTWF0aC5yb3VuZCgoZGF0YS5zICsgZGF0YS5jICogcmF0aW8pICogMTAwMDApIC8gMTAwMDAgKyBkYXRhLnUsIGRhdGEpO1xuICB9LFxuICAgICAgX3JlbmRlckNTU1Byb3BXaXRoQmVnaW5uaW5nID0gZnVuY3Rpb24gX3JlbmRlckNTU1Byb3BXaXRoQmVnaW5uaW5nKHJhdGlvLCBkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGEuc2V0KGRhdGEudCwgZGF0YS5wLCByYXRpbyA/IE1hdGgucm91bmQoKGRhdGEucyArIGRhdGEuYyAqIHJhdGlvKSAqIDEwMDAwKSAvIDEwMDAwICsgZGF0YS51IDogZGF0YS5iLCBkYXRhKTtcbiAgfSxcbiAgICAgIF9yZW5kZXJSb3VuZGVkQ1NTUHJvcCA9IGZ1bmN0aW9uIF9yZW5kZXJSb3VuZGVkQ1NTUHJvcChyYXRpbywgZGF0YSkge1xuICAgIHZhciB2YWx1ZSA9IGRhdGEucyArIGRhdGEuYyAqIHJhdGlvO1xuICAgIGRhdGEuc2V0KGRhdGEudCwgZGF0YS5wLCB+fih2YWx1ZSArICh2YWx1ZSA8IDAgPyAtLjUgOiAuNSkpICsgZGF0YS51LCBkYXRhKTtcbiAgfSxcbiAgICAgIF9yZW5kZXJOb25Ud2VlbmluZ1ZhbHVlID0gZnVuY3Rpb24gX3JlbmRlck5vblR3ZWVuaW5nVmFsdWUocmF0aW8sIGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YS5zZXQoZGF0YS50LCBkYXRhLnAsIHJhdGlvID8gZGF0YS5lIDogZGF0YS5iLCBkYXRhKTtcbiAgfSxcbiAgICAgIF9yZW5kZXJOb25Ud2VlbmluZ1ZhbHVlT25seUF0RW5kID0gZnVuY3Rpb24gX3JlbmRlck5vblR3ZWVuaW5nVmFsdWVPbmx5QXRFbmQocmF0aW8sIGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YS5zZXQoZGF0YS50LCBkYXRhLnAsIHJhdGlvICE9PSAxID8gZGF0YS5iIDogZGF0YS5lLCBkYXRhKTtcbiAgfSxcbiAgICAgIF9zZXR0ZXJDU1NTdHlsZSA9IGZ1bmN0aW9uIF9zZXR0ZXJDU1NTdHlsZSh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIHJldHVybiB0YXJnZXQuc3R5bGVbcHJvcGVydHldID0gdmFsdWU7XG4gIH0sXG4gICAgICBfc2V0dGVyQ1NTUHJvcCA9IGZ1bmN0aW9uIF9zZXR0ZXJDU1NQcm9wKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRhcmdldC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpO1xuICB9LFxuICAgICAgX3NldHRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIF9zZXR0ZXJUcmFuc2Zvcm0odGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGFyZ2V0Ll9nc2FwW3Byb3BlcnR5XSA9IHZhbHVlO1xuICB9LFxuICAgICAgX3NldHRlclNjYWxlID0gZnVuY3Rpb24gX3NldHRlclNjYWxlKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRhcmdldC5fZ3NhcC5zY2FsZVggPSB0YXJnZXQuX2dzYXAuc2NhbGVZID0gdmFsdWU7XG4gIH0sXG4gICAgICBfc2V0dGVyU2NhbGVXaXRoUmVuZGVyID0gZnVuY3Rpb24gX3NldHRlclNjYWxlV2l0aFJlbmRlcih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgZGF0YSwgcmF0aW8pIHtcbiAgICB2YXIgY2FjaGUgPSB0YXJnZXQuX2dzYXA7XG4gICAgY2FjaGUuc2NhbGVYID0gY2FjaGUuc2NhbGVZID0gdmFsdWU7XG4gICAgY2FjaGUucmVuZGVyVHJhbnNmb3JtKHJhdGlvLCBjYWNoZSk7XG4gIH0sXG4gICAgICBfc2V0dGVyVHJhbnNmb3JtV2l0aFJlbmRlciA9IGZ1bmN0aW9uIF9zZXR0ZXJUcmFuc2Zvcm1XaXRoUmVuZGVyKHRhcmdldCwgcHJvcGVydHksIHZhbHVlLCBkYXRhLCByYXRpbykge1xuICAgIHZhciBjYWNoZSA9IHRhcmdldC5fZ3NhcDtcbiAgICBjYWNoZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBjYWNoZS5yZW5kZXJUcmFuc2Zvcm0ocmF0aW8sIGNhY2hlKTtcbiAgfSxcbiAgICAgIF90cmFuc2Zvcm1Qcm9wID0gXCJ0cmFuc2Zvcm1cIixcbiAgICAgIF90cmFuc2Zvcm1PcmlnaW5Qcm9wID0gX3RyYW5zZm9ybVByb3AgKyBcIk9yaWdpblwiLFxuICAgICAgX3NhdmVTdHlsZSA9IGZ1bmN0aW9uIF9zYXZlU3R5bGUocHJvcGVydHksIGlzTm90Q1NTKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldCxcbiAgICAgICAgc3R5bGUgPSB0YXJnZXQuc3R5bGUsXG4gICAgICAgIGNhY2hlID0gdGFyZ2V0Ll9nc2FwO1xuXG4gICAgaWYgKHByb3BlcnR5IGluIF90cmFuc2Zvcm1Qcm9wcyAmJiBzdHlsZSkge1xuICAgICAgdGhpcy50Zm0gPSB0aGlzLnRmbSB8fCB7fTtcblxuICAgICAgaWYgKHByb3BlcnR5ICE9PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgIHByb3BlcnR5ID0gX3Byb3BlcnR5QWxpYXNlc1twcm9wZXJ0eV0gfHwgcHJvcGVydHk7XG4gICAgICAgIH5wcm9wZXJ0eS5pbmRleE9mKFwiLFwiKSA/IHByb3BlcnR5LnNwbGl0KFwiLFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnRmbVthXSA9IF9nZXQodGFyZ2V0LCBhKTtcbiAgICAgICAgfSkgOiB0aGlzLnRmbVtwcm9wZXJ0eV0gPSBjYWNoZS54ID8gY2FjaGVbcHJvcGVydHldIDogX2dldCh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgICAgcHJvcGVydHkgPT09IF90cmFuc2Zvcm1PcmlnaW5Qcm9wICYmICh0aGlzLnRmbS56T3JpZ2luID0gY2FjaGUuek9yaWdpbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gX3Byb3BlcnR5QWxpYXNlcy50cmFuc2Zvcm0uc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICByZXR1cm4gX3NhdmVTdHlsZS5jYWxsKF90aGlzLCBwLCBpc05vdENTUyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5pbmRleE9mKF90cmFuc2Zvcm1Qcm9wKSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlLnN2Zykge1xuICAgICAgICB0aGlzLnN2Z28gPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdmctb3JpZ2luXCIpO1xuICAgICAgICB0aGlzLnByb3BzLnB1c2goX3RyYW5zZm9ybU9yaWdpblByb3AsIGlzTm90Q1NTLCBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgcHJvcGVydHkgPSBfdHJhbnNmb3JtUHJvcDtcbiAgICB9XG5cbiAgICAoc3R5bGUgfHwgaXNOb3RDU1MpICYmIHRoaXMucHJvcHMucHVzaChwcm9wZXJ0eSwgaXNOb3RDU1MsIHN0eWxlW3Byb3BlcnR5XSk7XG4gIH0sXG4gICAgICBfcmVtb3ZlSW5kZXBlbmRlbnRUcmFuc2Zvcm1zID0gZnVuY3Rpb24gX3JlbW92ZUluZGVwZW5kZW50VHJhbnNmb3JtcyhzdHlsZSkge1xuICAgIGlmIChzdHlsZS50cmFuc2xhdGUpIHtcbiAgICAgIHN0eWxlLnJlbW92ZVByb3BlcnR5KFwidHJhbnNsYXRlXCIpO1xuICAgICAgc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJzY2FsZVwiKTtcbiAgICAgIHN0eWxlLnJlbW92ZVByb3BlcnR5KFwicm90YXRlXCIpO1xuICAgIH1cbiAgfSxcbiAgICAgIF9yZXZlcnRTdHlsZSA9IGZ1bmN0aW9uIF9yZXZlcnRTdHlsZSgpIHtcbiAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICB0YXJnZXQgPSB0aGlzLnRhcmdldCxcbiAgICAgICAgc3R5bGUgPSB0YXJnZXQuc3R5bGUsXG4gICAgICAgIGNhY2hlID0gdGFyZ2V0Ll9nc2FwLFxuICAgICAgICBpLFxuICAgICAgICBwO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICBwcm9wc1tpICsgMV0gPyB0YXJnZXRbcHJvcHNbaV1dID0gcHJvcHNbaSArIDJdIDogcHJvcHNbaSArIDJdID8gc3R5bGVbcHJvcHNbaV1dID0gcHJvcHNbaSArIDJdIDogc3R5bGUucmVtb3ZlUHJvcGVydHkocHJvcHNbaV0uc3Vic3RyKDAsIDIpID09PSBcIi0tXCIgPyBwcm9wc1tpXSA6IHByb3BzW2ldLnJlcGxhY2UoX2NhcHNFeHAsIFwiLSQxXCIpLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRmbSkge1xuICAgICAgZm9yIChwIGluIHRoaXMudGZtKSB7XG4gICAgICAgIGNhY2hlW3BdID0gdGhpcy50Zm1bcF07XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWNoZS5zdmcpIHtcbiAgICAgICAgY2FjaGUucmVuZGVyVHJhbnNmb3JtKCk7XG4gICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN2Zy1vcmlnaW5cIiwgdGhpcy5zdmdvIHx8IFwiXCIpO1xuICAgICAgfVxuXG4gICAgICBpID0gX3JldmVydGluZyQxKCk7XG5cbiAgICAgIGlmICgoIWkgfHwgIWkuaXNTdGFydCkgJiYgIXN0eWxlW190cmFuc2Zvcm1Qcm9wXSkge1xuICAgICAgICBfcmVtb3ZlSW5kZXBlbmRlbnRUcmFuc2Zvcm1zKHN0eWxlKTtcblxuICAgICAgICBpZiAoY2FjaGUuek9yaWdpbiAmJiBzdHlsZVtfdHJhbnNmb3JtT3JpZ2luUHJvcF0pIHtcbiAgICAgICAgICBzdHlsZVtfdHJhbnNmb3JtT3JpZ2luUHJvcF0gKz0gXCIgXCIgKyBjYWNoZS56T3JpZ2luICsgXCJweFwiO1xuICAgICAgICAgIGNhY2hlLnpPcmlnaW4gPSAwO1xuICAgICAgICAgIGNhY2hlLnJlbmRlclRyYW5zZm9ybSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FjaGUudW5jYWNoZSA9IDE7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgICAgX2dldFN0eWxlU2F2ZXIgPSBmdW5jdGlvbiBfZ2V0U3R5bGVTYXZlcih0YXJnZXQsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgc2F2ZXIgPSB7XG4gICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgIHByb3BzOiBbXSxcbiAgICAgIHJldmVydDogX3JldmVydFN0eWxlLFxuICAgICAgc2F2ZTogX3NhdmVTdHlsZVxuICAgIH07XG4gICAgdGFyZ2V0Ll9nc2FwIHx8IGdzYXAuY29yZS5nZXRDYWNoZSh0YXJnZXQpO1xuICAgIHByb3BlcnRpZXMgJiYgcHJvcGVydGllcy5zcGxpdChcIixcIikuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIHNhdmVyLnNhdmUocCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNhdmVyO1xuICB9LFxuICAgICAgX3N1cHBvcnRzM0QsXG4gICAgICBfY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIF9jcmVhdGVFbGVtZW50KHR5cGUsIG5zKSB7XG4gICAgdmFyIGUgPSBfZG9jJDEuY3JlYXRlRWxlbWVudE5TID8gX2RvYyQxLmNyZWF0ZUVsZW1lbnROUygobnMgfHwgXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIpLnJlcGxhY2UoL15odHRwcy8sIFwiaHR0cFwiKSwgdHlwZSkgOiBfZG9jJDEuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICByZXR1cm4gZSAmJiBlLnN0eWxlID8gZSA6IF9kb2MkMS5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICB9LFxuICAgICAgX2dldENvbXB1dGVkUHJvcGVydHkgPSBmdW5jdGlvbiBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBza2lwUHJlZml4RmFsbGJhY2spIHtcbiAgICB2YXIgY3MgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG4gICAgcmV0dXJuIGNzW3Byb3BlcnR5XSB8fCBjcy5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5LnJlcGxhY2UoX2NhcHNFeHAsIFwiLSQxXCIpLnRvTG93ZXJDYXNlKCkpIHx8IGNzLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpIHx8ICFza2lwUHJlZml4RmFsbGJhY2sgJiYgX2dldENvbXB1dGVkUHJvcGVydHkodGFyZ2V0LCBfY2hlY2tQcm9wUHJlZml4KHByb3BlcnR5KSB8fCBwcm9wZXJ0eSwgMSkgfHwgXCJcIjtcbiAgfSxcbiAgICAgIF9wcmVmaXhlcyA9IFwiTyxNb3osbXMsTXMsV2Via2l0XCIuc3BsaXQoXCIsXCIpLFxuICAgICAgX2NoZWNrUHJvcFByZWZpeCA9IGZ1bmN0aW9uIF9jaGVja1Byb3BQcmVmaXgocHJvcGVydHksIGVsZW1lbnQsIHByZWZlclByZWZpeCkge1xuICAgIHZhciBlID0gZWxlbWVudCB8fCBfdGVtcERpdixcbiAgICAgICAgcyA9IGUuc3R5bGUsXG4gICAgICAgIGkgPSA1O1xuXG4gICAgaWYgKHByb3BlcnR5IGluIHMgJiYgIXByZWZlclByZWZpeCkge1xuICAgICAgcmV0dXJuIHByb3BlcnR5O1xuICAgIH1cblxuICAgIHByb3BlcnR5ID0gcHJvcGVydHkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zdWJzdHIoMSk7XG5cbiAgICB3aGlsZSAoaS0tICYmICEoX3ByZWZpeGVzW2ldICsgcHJvcGVydHkgaW4gcykpIHt9XG5cbiAgICByZXR1cm4gaSA8IDAgPyBudWxsIDogKGkgPT09IDMgPyBcIm1zXCIgOiBpID49IDAgPyBfcHJlZml4ZXNbaV0gOiBcIlwiKSArIHByb3BlcnR5O1xuICB9LFxuICAgICAgX2luaXRDb3JlID0gZnVuY3Rpb24gX2luaXRDb3JlKCkge1xuICAgIGlmIChfd2luZG93RXhpc3RzJDEoKSAmJiB3aW5kb3cuZG9jdW1lbnQpIHtcbiAgICAgIF93aW4kMSA9IHdpbmRvdztcbiAgICAgIF9kb2MkMSA9IF93aW4kMS5kb2N1bWVudDtcbiAgICAgIF9kb2NFbGVtZW50ID0gX2RvYyQxLmRvY3VtZW50RWxlbWVudDtcbiAgICAgIF90ZW1wRGl2ID0gX2NyZWF0ZUVsZW1lbnQoXCJkaXZcIikgfHwge1xuICAgICAgICBzdHlsZToge31cbiAgICAgIH07XG4gICAgICBfdGVtcERpdlN0eWxlciA9IF9jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgX3RyYW5zZm9ybVByb3AgPSBfY2hlY2tQcm9wUHJlZml4KF90cmFuc2Zvcm1Qcm9wKTtcbiAgICAgIF90cmFuc2Zvcm1PcmlnaW5Qcm9wID0gX3RyYW5zZm9ybVByb3AgKyBcIk9yaWdpblwiO1xuICAgICAgX3RlbXBEaXYuc3R5bGUuY3NzVGV4dCA9IFwiYm9yZGVyLXdpZHRoOjA7bGluZS1oZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTtwYWRkaW5nOjBcIjtcbiAgICAgIF9zdXBwb3J0czNEID0gISFfY2hlY2tQcm9wUHJlZml4KFwicGVyc3BlY3RpdmVcIik7XG4gICAgICBfcmV2ZXJ0aW5nJDEgPSBnc2FwLmNvcmUucmV2ZXJ0aW5nO1xuICAgICAgX3BsdWdpbkluaXR0ZWQgPSAxO1xuICAgIH1cbiAgfSxcbiAgICAgIF9nZXRCQm94SGFjayA9IGZ1bmN0aW9uIF9nZXRCQm94SGFjayhzd2FwSWZQb3NzaWJsZSkge1xuICAgIHZhciBzdmcgPSBfY3JlYXRlRWxlbWVudChcInN2Z1wiLCB0aGlzLm93bmVyU1ZHRWxlbWVudCAmJiB0aGlzLm93bmVyU1ZHRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ4bWxuc1wiKSB8fCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIpLFxuICAgICAgICBvbGRQYXJlbnQgPSB0aGlzLnBhcmVudE5vZGUsXG4gICAgICAgIG9sZFNpYmxpbmcgPSB0aGlzLm5leHRTaWJsaW5nLFxuICAgICAgICBvbGRDU1MgPSB0aGlzLnN0eWxlLmNzc1RleHQsXG4gICAgICAgIGJib3g7XG5cbiAgICBfZG9jRWxlbWVudC5hcHBlbmRDaGlsZChzdmcpO1xuXG4gICAgc3ZnLmFwcGVuZENoaWxkKHRoaXMpO1xuICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgIGlmIChzd2FwSWZQb3NzaWJsZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYmJveCA9IHRoaXMuZ2V0QkJveCgpO1xuICAgICAgICB0aGlzLl9nc2FwQkJveCA9IHRoaXMuZ2V0QkJveDtcbiAgICAgICAgdGhpcy5nZXRCQm94ID0gX2dldEJCb3hIYWNrO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2dzYXBCQm94KSB7XG4gICAgICBiYm94ID0gdGhpcy5fZ3NhcEJCb3goKTtcbiAgICB9XG5cbiAgICBpZiAob2xkUGFyZW50KSB7XG4gICAgICBpZiAob2xkU2libGluZykge1xuICAgICAgICBvbGRQYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMsIG9sZFNpYmxpbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2xkUGFyZW50LmFwcGVuZENoaWxkKHRoaXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9kb2NFbGVtZW50LnJlbW92ZUNoaWxkKHN2Zyk7XG5cbiAgICB0aGlzLnN0eWxlLmNzc1RleHQgPSBvbGRDU1M7XG4gICAgcmV0dXJuIGJib3g7XG4gIH0sXG4gICAgICBfZ2V0QXR0cmlidXRlRmFsbGJhY2tzID0gZnVuY3Rpb24gX2dldEF0dHJpYnV0ZUZhbGxiYWNrcyh0YXJnZXQsIGF0dHJpYnV0ZXNBcnJheSkge1xuICAgIHZhciBpID0gYXR0cmlidXRlc0FycmF5Lmxlbmd0aDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZXNBcnJheVtpXSkpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlc0FycmF5W2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICAgICBfZ2V0QkJveCA9IGZ1bmN0aW9uIF9nZXRCQm94KHRhcmdldCkge1xuICAgIHZhciBib3VuZHM7XG5cbiAgICB0cnkge1xuICAgICAgYm91bmRzID0gdGFyZ2V0LmdldEJCb3goKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYm91bmRzID0gX2dldEJCb3hIYWNrLmNhbGwodGFyZ2V0LCB0cnVlKTtcbiAgICB9XG5cbiAgICBib3VuZHMgJiYgKGJvdW5kcy53aWR0aCB8fCBib3VuZHMuaGVpZ2h0KSB8fCB0YXJnZXQuZ2V0QkJveCA9PT0gX2dldEJCb3hIYWNrIHx8IChib3VuZHMgPSBfZ2V0QkJveEhhY2suY2FsbCh0YXJnZXQsIHRydWUpKTtcbiAgICByZXR1cm4gYm91bmRzICYmICFib3VuZHMud2lkdGggJiYgIWJvdW5kcy54ICYmICFib3VuZHMueSA/IHtcbiAgICAgIHg6ICtfZ2V0QXR0cmlidXRlRmFsbGJhY2tzKHRhcmdldCwgW1wieFwiLCBcImN4XCIsIFwieDFcIl0pIHx8IDAsXG4gICAgICB5OiArX2dldEF0dHJpYnV0ZUZhbGxiYWNrcyh0YXJnZXQsIFtcInlcIiwgXCJjeVwiLCBcInkxXCJdKSB8fCAwLFxuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9IDogYm91bmRzO1xuICB9LFxuICAgICAgX2lzU1ZHID0gZnVuY3Rpb24gX2lzU1ZHKGUpIHtcbiAgICByZXR1cm4gISEoZS5nZXRDVE0gJiYgKCFlLnBhcmVudE5vZGUgfHwgZS5vd25lclNWR0VsZW1lbnQpICYmIF9nZXRCQm94KGUpKTtcbiAgfSxcbiAgICAgIF9yZW1vdmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5KSB7XG4gICAgaWYgKHByb3BlcnR5KSB7XG4gICAgICB2YXIgc3R5bGUgPSB0YXJnZXQuc3R5bGUsXG4gICAgICAgICAgZmlyc3QyQ2hhcnM7XG5cbiAgICAgIGlmIChwcm9wZXJ0eSBpbiBfdHJhbnNmb3JtUHJvcHMgJiYgcHJvcGVydHkgIT09IF90cmFuc2Zvcm1PcmlnaW5Qcm9wKSB7XG4gICAgICAgIHByb3BlcnR5ID0gX3RyYW5zZm9ybVByb3A7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdHlsZS5yZW1vdmVQcm9wZXJ0eSkge1xuICAgICAgICBmaXJzdDJDaGFycyA9IHByb3BlcnR5LnN1YnN0cigwLCAyKTtcblxuICAgICAgICBpZiAoZmlyc3QyQ2hhcnMgPT09IFwibXNcIiB8fCBwcm9wZXJ0eS5zdWJzdHIoMCwgNikgPT09IFwid2Via2l0XCIpIHtcbiAgICAgICAgICBwcm9wZXJ0eSA9IFwiLVwiICsgcHJvcGVydHk7XG4gICAgICAgIH1cblxuICAgICAgICBzdHlsZS5yZW1vdmVQcm9wZXJ0eShmaXJzdDJDaGFycyA9PT0gXCItLVwiID8gcHJvcGVydHkgOiBwcm9wZXJ0eS5yZXBsYWNlKF9jYXBzRXhwLCBcIi0kMVwiKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZShwcm9wZXJ0eSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgICAgX2FkZE5vblR3ZWVuaW5nUFQgPSBmdW5jdGlvbiBfYWRkTm9uVHdlZW5pbmdQVChwbHVnaW4sIHRhcmdldCwgcHJvcGVydHksIGJlZ2lubmluZywgZW5kLCBvbmx5U2V0QXRFbmQpIHtcbiAgICB2YXIgcHQgPSBuZXcgUHJvcFR3ZWVuKHBsdWdpbi5fcHQsIHRhcmdldCwgcHJvcGVydHksIDAsIDEsIG9ubHlTZXRBdEVuZCA/IF9yZW5kZXJOb25Ud2VlbmluZ1ZhbHVlT25seUF0RW5kIDogX3JlbmRlck5vblR3ZWVuaW5nVmFsdWUpO1xuICAgIHBsdWdpbi5fcHQgPSBwdDtcbiAgICBwdC5iID0gYmVnaW5uaW5nO1xuICAgIHB0LmUgPSBlbmQ7XG5cbiAgICBwbHVnaW4uX3Byb3BzLnB1c2gocHJvcGVydHkpO1xuXG4gICAgcmV0dXJuIHB0O1xuICB9LFxuICAgICAgX25vbkNvbnZlcnRpYmxlVW5pdHMgPSB7XG4gICAgZGVnOiAxLFxuICAgIHJhZDogMSxcbiAgICB0dXJuOiAxXG4gIH0sXG4gICAgICBfbm9uU3RhbmRhcmRMYXlvdXRzID0ge1xuICAgIGdyaWQ6IDEsXG4gICAgZmxleDogMVxuICB9LFxuICAgICAgX2NvbnZlcnRUb1VuaXQgPSBmdW5jdGlvbiBfY29udmVydFRvVW5pdCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgdW5pdCkge1xuICAgIHZhciBjdXJWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpIHx8IDAsXG4gICAgICAgIGN1clVuaXQgPSAodmFsdWUgKyBcIlwiKS50cmltKCkuc3Vic3RyKChjdXJWYWx1ZSArIFwiXCIpLmxlbmd0aCkgfHwgXCJweFwiLFxuICAgICAgICBzdHlsZSA9IF90ZW1wRGl2LnN0eWxlLFxuICAgICAgICBob3Jpem9udGFsID0gX2hvcml6b250YWxFeHAudGVzdChwcm9wZXJ0eSksXG4gICAgICAgIGlzUm9vdFNWRyA9IHRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic3ZnXCIsXG4gICAgICAgIG1lYXN1cmVQcm9wZXJ0eSA9IChpc1Jvb3RTVkcgPyBcImNsaWVudFwiIDogXCJvZmZzZXRcIikgKyAoaG9yaXpvbnRhbCA/IFwiV2lkdGhcIiA6IFwiSGVpZ2h0XCIpLFxuICAgICAgICBhbW91bnQgPSAxMDAsXG4gICAgICAgIHRvUGl4ZWxzID0gdW5pdCA9PT0gXCJweFwiLFxuICAgICAgICB0b1BlcmNlbnQgPSB1bml0ID09PSBcIiVcIixcbiAgICAgICAgcHgsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgY2FjaGUsXG4gICAgICAgIGlzU1ZHO1xuXG4gICAgaWYgKHVuaXQgPT09IGN1clVuaXQgfHwgIWN1clZhbHVlIHx8IF9ub25Db252ZXJ0aWJsZVVuaXRzW3VuaXRdIHx8IF9ub25Db252ZXJ0aWJsZVVuaXRzW2N1clVuaXRdKSB7XG4gICAgICByZXR1cm4gY3VyVmFsdWU7XG4gICAgfVxuXG4gICAgY3VyVW5pdCAhPT0gXCJweFwiICYmICF0b1BpeGVscyAmJiAoY3VyVmFsdWUgPSBfY29udmVydFRvVW5pdCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgXCJweFwiKSk7XG4gICAgaXNTVkcgPSB0YXJnZXQuZ2V0Q1RNICYmIF9pc1NWRyh0YXJnZXQpO1xuXG4gICAgaWYgKCh0b1BlcmNlbnQgfHwgY3VyVW5pdCA9PT0gXCIlXCIpICYmIChfdHJhbnNmb3JtUHJvcHNbcHJvcGVydHldIHx8IH5wcm9wZXJ0eS5pbmRleE9mKFwiYWRpdXNcIikpKSB7XG4gICAgICBweCA9IGlzU1ZHID8gdGFyZ2V0LmdldEJCb3goKVtob3Jpem9udGFsID8gXCJ3aWR0aFwiIDogXCJoZWlnaHRcIl0gOiB0YXJnZXRbbWVhc3VyZVByb3BlcnR5XTtcbiAgICAgIHJldHVybiBfcm91bmQodG9QZXJjZW50ID8gY3VyVmFsdWUgLyBweCAqIGFtb3VudCA6IGN1clZhbHVlIC8gMTAwICogcHgpO1xuICAgIH1cblxuICAgIHN0eWxlW2hvcml6b250YWwgPyBcIndpZHRoXCIgOiBcImhlaWdodFwiXSA9IGFtb3VudCArICh0b1BpeGVscyA/IGN1clVuaXQgOiB1bml0KTtcbiAgICBwYXJlbnQgPSB+cHJvcGVydHkuaW5kZXhPZihcImFkaXVzXCIpIHx8IHVuaXQgPT09IFwiZW1cIiAmJiB0YXJnZXQuYXBwZW5kQ2hpbGQgJiYgIWlzUm9vdFNWRyA/IHRhcmdldCA6IHRhcmdldC5wYXJlbnROb2RlO1xuXG4gICAgaWYgKGlzU1ZHKSB7XG4gICAgICBwYXJlbnQgPSAodGFyZ2V0Lm93bmVyU1ZHRWxlbWVudCB8fCB7fSkucGFyZW50Tm9kZTtcbiAgICB9XG5cbiAgICBpZiAoIXBhcmVudCB8fCBwYXJlbnQgPT09IF9kb2MkMSB8fCAhcGFyZW50LmFwcGVuZENoaWxkKSB7XG4gICAgICBwYXJlbnQgPSBfZG9jJDEuYm9keTtcbiAgICB9XG5cbiAgICBjYWNoZSA9IHBhcmVudC5fZ3NhcDtcblxuICAgIGlmIChjYWNoZSAmJiB0b1BlcmNlbnQgJiYgY2FjaGUud2lkdGggJiYgaG9yaXpvbnRhbCAmJiBjYWNoZS50aW1lID09PSBfdGlja2VyLnRpbWUgJiYgIWNhY2hlLnVuY2FjaGUpIHtcbiAgICAgIHJldHVybiBfcm91bmQoY3VyVmFsdWUgLyBjYWNoZS53aWR0aCAqIGFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0b1BlcmNlbnQgJiYgKHByb3BlcnR5ID09PSBcImhlaWdodFwiIHx8IHByb3BlcnR5ID09PSBcIndpZHRoXCIpKSB7XG4gICAgICAgIHZhciB2ID0gdGFyZ2V0LnN0eWxlW3Byb3BlcnR5XTtcbiAgICAgICAgdGFyZ2V0LnN0eWxlW3Byb3BlcnR5XSA9IGFtb3VudCArIHVuaXQ7XG4gICAgICAgIHB4ID0gdGFyZ2V0W21lYXN1cmVQcm9wZXJ0eV07XG4gICAgICAgIHYgPyB0YXJnZXQuc3R5bGVbcHJvcGVydHldID0gdiA6IF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICh0b1BlcmNlbnQgfHwgY3VyVW5pdCA9PT0gXCIlXCIpICYmICFfbm9uU3RhbmRhcmRMYXlvdXRzW19nZXRDb21wdXRlZFByb3BlcnR5KHBhcmVudCwgXCJkaXNwbGF5XCIpXSAmJiAoc3R5bGUucG9zaXRpb24gPSBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIFwicG9zaXRpb25cIikpO1xuICAgICAgICBwYXJlbnQgPT09IHRhcmdldCAmJiAoc3R5bGUucG9zaXRpb24gPSBcInN0YXRpY1wiKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKF90ZW1wRGl2KTtcbiAgICAgICAgcHggPSBfdGVtcERpdlttZWFzdXJlUHJvcGVydHldO1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX3RlbXBEaXYpO1xuICAgICAgICBzdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGhvcml6b250YWwgJiYgdG9QZXJjZW50KSB7XG4gICAgICAgIGNhY2hlID0gX2dldENhY2hlKHBhcmVudCk7XG4gICAgICAgIGNhY2hlLnRpbWUgPSBfdGlja2VyLnRpbWU7XG4gICAgICAgIGNhY2hlLndpZHRoID0gcGFyZW50W21lYXN1cmVQcm9wZXJ0eV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yb3VuZCh0b1BpeGVscyA/IHB4ICogY3VyVmFsdWUgLyBhbW91bnQgOiBweCAmJiBjdXJWYWx1ZSA/IGFtb3VudCAvIHB4ICogY3VyVmFsdWUgOiAwKTtcbiAgfSxcbiAgICAgIF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHVuaXQsIHVuY2FjaGUpIHtcbiAgICB2YXIgdmFsdWU7XG4gICAgX3BsdWdpbkluaXR0ZWQgfHwgX2luaXRDb3JlKCk7XG5cbiAgICBpZiAocHJvcGVydHkgaW4gX3Byb3BlcnR5QWxpYXNlcyAmJiBwcm9wZXJ0eSAhPT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgcHJvcGVydHkgPSBfcHJvcGVydHlBbGlhc2VzW3Byb3BlcnR5XTtcblxuICAgICAgaWYgKH5wcm9wZXJ0eS5pbmRleE9mKFwiLFwiKSkge1xuICAgICAgICBwcm9wZXJ0eSA9IHByb3BlcnR5LnNwbGl0KFwiLFwiKVswXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoX3RyYW5zZm9ybVByb3BzW3Byb3BlcnR5XSAmJiBwcm9wZXJ0eSAhPT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgdmFsdWUgPSBfcGFyc2VUcmFuc2Zvcm0odGFyZ2V0LCB1bmNhY2hlKTtcbiAgICAgIHZhbHVlID0gcHJvcGVydHkgIT09IFwidHJhbnNmb3JtT3JpZ2luXCIgPyB2YWx1ZVtwcm9wZXJ0eV0gOiB2YWx1ZS5zdmcgPyB2YWx1ZS5vcmlnaW4gOiBfZmlyc3RUd29Pbmx5KF9nZXRDb21wdXRlZFByb3BlcnR5KHRhcmdldCwgX3RyYW5zZm9ybU9yaWdpblByb3ApKSArIFwiIFwiICsgdmFsdWUuek9yaWdpbiArIFwicHhcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSB0YXJnZXQuc3R5bGVbcHJvcGVydHldO1xuXG4gICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSBcImF1dG9cIiB8fCB1bmNhY2hlIHx8IH4odmFsdWUgKyBcIlwiKS5pbmRleE9mKFwiY2FsYyhcIikpIHtcbiAgICAgICAgdmFsdWUgPSBfc3BlY2lhbFByb3BzW3Byb3BlcnR5XSAmJiBfc3BlY2lhbFByb3BzW3Byb3BlcnR5XSh0YXJnZXQsIHByb3BlcnR5LCB1bml0KSB8fCBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5KSB8fCBfZ2V0UHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSkgfHwgKHByb3BlcnR5ID09PSBcIm9wYWNpdHlcIiA/IDEgOiAwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdW5pdCAmJiAhfih2YWx1ZSArIFwiXCIpLnRyaW0oKS5pbmRleE9mKFwiIFwiKSA/IF9jb252ZXJ0VG9Vbml0KHRhcmdldCwgcHJvcGVydHksIHZhbHVlLCB1bml0KSArIHVuaXQgOiB2YWx1ZTtcbiAgfSxcbiAgICAgIF90d2VlbkNvbXBsZXhDU1NTdHJpbmcgPSBmdW5jdGlvbiBfdHdlZW5Db21wbGV4Q1NTU3RyaW5nKHRhcmdldCwgcHJvcCwgc3RhcnQsIGVuZCkge1xuICAgIGlmICghc3RhcnQgfHwgc3RhcnQgPT09IFwibm9uZVwiKSB7XG4gICAgICB2YXIgcCA9IF9jaGVja1Byb3BQcmVmaXgocHJvcCwgdGFyZ2V0LCAxKSxcbiAgICAgICAgICBzID0gcCAmJiBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIHAsIDEpO1xuXG4gICAgICBpZiAocyAmJiBzICE9PSBzdGFydCkge1xuICAgICAgICBwcm9wID0gcDtcbiAgICAgICAgc3RhcnQgPSBzO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImJvcmRlckNvbG9yXCIpIHtcbiAgICAgICAgc3RhcnQgPSBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIFwiYm9yZGVyVG9wQ29sb3JcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHB0ID0gbmV3IFByb3BUd2Vlbih0aGlzLl9wdCwgdGFyZ2V0LnN0eWxlLCBwcm9wLCAwLCAxLCBfcmVuZGVyQ29tcGxleFN0cmluZyksXG4gICAgICAgIGluZGV4ID0gMCxcbiAgICAgICAgbWF0Y2hJbmRleCA9IDAsXG4gICAgICAgIGEsXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgc3RhcnRWYWx1ZXMsXG4gICAgICAgIHN0YXJ0TnVtLFxuICAgICAgICBjb2xvcixcbiAgICAgICAgc3RhcnRWYWx1ZSxcbiAgICAgICAgZW5kVmFsdWUsXG4gICAgICAgIGVuZE51bSxcbiAgICAgICAgY2h1bmssXG4gICAgICAgIGVuZFVuaXQsXG4gICAgICAgIHN0YXJ0VW5pdCxcbiAgICAgICAgZW5kVmFsdWVzO1xuICAgIHB0LmIgPSBzdGFydDtcbiAgICBwdC5lID0gZW5kO1xuICAgIHN0YXJ0ICs9IFwiXCI7XG4gICAgZW5kICs9IFwiXCI7XG5cbiAgICBpZiAoZW5kID09PSBcImF1dG9cIikge1xuICAgICAgc3RhcnRWYWx1ZSA9IHRhcmdldC5zdHlsZVtwcm9wXTtcbiAgICAgIHRhcmdldC5zdHlsZVtwcm9wXSA9IGVuZDtcbiAgICAgIGVuZCA9IF9nZXRDb21wdXRlZFByb3BlcnR5KHRhcmdldCwgcHJvcCkgfHwgZW5kO1xuICAgICAgc3RhcnRWYWx1ZSA/IHRhcmdldC5zdHlsZVtwcm9wXSA9IHN0YXJ0VmFsdWUgOiBfcmVtb3ZlUHJvcGVydHkodGFyZ2V0LCBwcm9wKTtcbiAgICB9XG5cbiAgICBhID0gW3N0YXJ0LCBlbmRdO1xuXG4gICAgX2NvbG9yU3RyaW5nRmlsdGVyKGEpO1xuXG4gICAgc3RhcnQgPSBhWzBdO1xuICAgIGVuZCA9IGFbMV07XG4gICAgc3RhcnRWYWx1ZXMgPSBzdGFydC5tYXRjaChfbnVtV2l0aFVuaXRFeHApIHx8IFtdO1xuICAgIGVuZFZhbHVlcyA9IGVuZC5tYXRjaChfbnVtV2l0aFVuaXRFeHApIHx8IFtdO1xuXG4gICAgaWYgKGVuZFZhbHVlcy5sZW5ndGgpIHtcbiAgICAgIHdoaWxlIChyZXN1bHQgPSBfbnVtV2l0aFVuaXRFeHAuZXhlYyhlbmQpKSB7XG4gICAgICAgIGVuZFZhbHVlID0gcmVzdWx0WzBdO1xuICAgICAgICBjaHVuayA9IGVuZC5zdWJzdHJpbmcoaW5kZXgsIHJlc3VsdC5pbmRleCk7XG5cbiAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgY29sb3IgPSAoY29sb3IgKyAxKSAlIDU7XG4gICAgICAgIH0gZWxzZSBpZiAoY2h1bmsuc3Vic3RyKC01KSA9PT0gXCJyZ2JhKFwiIHx8IGNodW5rLnN1YnN0cigtNSkgPT09IFwiaHNsYShcIikge1xuICAgICAgICAgIGNvbG9yID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmRWYWx1ZSAhPT0gKHN0YXJ0VmFsdWUgPSBzdGFydFZhbHVlc1ttYXRjaEluZGV4KytdIHx8IFwiXCIpKSB7XG4gICAgICAgICAgc3RhcnROdW0gPSBwYXJzZUZsb2F0KHN0YXJ0VmFsdWUpIHx8IDA7XG4gICAgICAgICAgc3RhcnRVbml0ID0gc3RhcnRWYWx1ZS5zdWJzdHIoKHN0YXJ0TnVtICsgXCJcIikubGVuZ3RoKTtcbiAgICAgICAgICBlbmRWYWx1ZS5jaGFyQXQoMSkgPT09IFwiPVwiICYmIChlbmRWYWx1ZSA9IF9wYXJzZVJlbGF0aXZlKHN0YXJ0TnVtLCBlbmRWYWx1ZSkgKyBzdGFydFVuaXQpO1xuICAgICAgICAgIGVuZE51bSA9IHBhcnNlRmxvYXQoZW5kVmFsdWUpO1xuICAgICAgICAgIGVuZFVuaXQgPSBlbmRWYWx1ZS5zdWJzdHIoKGVuZE51bSArIFwiXCIpLmxlbmd0aCk7XG4gICAgICAgICAgaW5kZXggPSBfbnVtV2l0aFVuaXRFeHAubGFzdEluZGV4IC0gZW5kVW5pdC5sZW5ndGg7XG5cbiAgICAgICAgICBpZiAoIWVuZFVuaXQpIHtcbiAgICAgICAgICAgIGVuZFVuaXQgPSBlbmRVbml0IHx8IF9jb25maWcudW5pdHNbcHJvcF0gfHwgc3RhcnRVbml0O1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGVuZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZW5kICs9IGVuZFVuaXQ7XG4gICAgICAgICAgICAgIHB0LmUgKz0gZW5kVW5pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3RhcnRVbml0ICE9PSBlbmRVbml0KSB7XG4gICAgICAgICAgICBzdGFydE51bSA9IF9jb252ZXJ0VG9Vbml0KHRhcmdldCwgcHJvcCwgc3RhcnRWYWx1ZSwgZW5kVW5pdCkgfHwgMDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwdC5fcHQgPSB7XG4gICAgICAgICAgICBfbmV4dDogcHQuX3B0LFxuICAgICAgICAgICAgcDogY2h1bmsgfHwgbWF0Y2hJbmRleCA9PT0gMSA/IGNodW5rIDogXCIsXCIsXG4gICAgICAgICAgICBzOiBzdGFydE51bSxcbiAgICAgICAgICAgIGM6IGVuZE51bSAtIHN0YXJ0TnVtLFxuICAgICAgICAgICAgbTogY29sb3IgJiYgY29sb3IgPCA0IHx8IHByb3AgPT09IFwiekluZGV4XCIgPyBNYXRoLnJvdW5kIDogMFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcHQuYyA9IGluZGV4IDwgZW5kLmxlbmd0aCA/IGVuZC5zdWJzdHJpbmcoaW5kZXgsIGVuZC5sZW5ndGgpIDogXCJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcHQuciA9IHByb3AgPT09IFwiZGlzcGxheVwiICYmIGVuZCA9PT0gXCJub25lXCIgPyBfcmVuZGVyTm9uVHdlZW5pbmdWYWx1ZU9ubHlBdEVuZCA6IF9yZW5kZXJOb25Ud2VlbmluZ1ZhbHVlO1xuICAgIH1cblxuICAgIF9yZWxFeHAudGVzdChlbmQpICYmIChwdC5lID0gMCk7XG4gICAgdGhpcy5fcHQgPSBwdDtcbiAgICByZXR1cm4gcHQ7XG4gIH0sXG4gICAgICBfa2V5d29yZFRvUGVyY2VudCA9IHtcbiAgICB0b3A6IFwiMCVcIixcbiAgICBib3R0b206IFwiMTAwJVwiLFxuICAgIGxlZnQ6IFwiMCVcIixcbiAgICByaWdodDogXCIxMDAlXCIsXG4gICAgY2VudGVyOiBcIjUwJVwiXG4gIH0sXG4gICAgICBfY29udmVydEtleXdvcmRzVG9QZXJjZW50YWdlcyA9IGZ1bmN0aW9uIF9jb252ZXJ0S2V5d29yZHNUb1BlcmNlbnRhZ2VzKHZhbHVlKSB7XG4gICAgdmFyIHNwbGl0ID0gdmFsdWUuc3BsaXQoXCIgXCIpLFxuICAgICAgICB4ID0gc3BsaXRbMF0sXG4gICAgICAgIHkgPSBzcGxpdFsxXSB8fCBcIjUwJVwiO1xuXG4gICAgaWYgKHggPT09IFwidG9wXCIgfHwgeCA9PT0gXCJib3R0b21cIiB8fCB5ID09PSBcImxlZnRcIiB8fCB5ID09PSBcInJpZ2h0XCIpIHtcbiAgICAgIHZhbHVlID0geDtcbiAgICAgIHggPSB5O1xuICAgICAgeSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNwbGl0WzBdID0gX2tleXdvcmRUb1BlcmNlbnRbeF0gfHwgeDtcbiAgICBzcGxpdFsxXSA9IF9rZXl3b3JkVG9QZXJjZW50W3ldIHx8IHk7XG4gICAgcmV0dXJuIHNwbGl0LmpvaW4oXCIgXCIpO1xuICB9LFxuICAgICAgX3JlbmRlckNsZWFyUHJvcHMgPSBmdW5jdGlvbiBfcmVuZGVyQ2xlYXJQcm9wcyhyYXRpbywgZGF0YSkge1xuICAgIGlmIChkYXRhLnR3ZWVuICYmIGRhdGEudHdlZW4uX3RpbWUgPT09IGRhdGEudHdlZW4uX2R1cikge1xuICAgICAgdmFyIHRhcmdldCA9IGRhdGEudCxcbiAgICAgICAgICBzdHlsZSA9IHRhcmdldC5zdHlsZSxcbiAgICAgICAgICBwcm9wcyA9IGRhdGEudSxcbiAgICAgICAgICBjYWNoZSA9IHRhcmdldC5fZ3NhcCxcbiAgICAgICAgICBwcm9wLFxuICAgICAgICAgIGNsZWFyVHJhbnNmb3JtcyxcbiAgICAgICAgICBpO1xuXG4gICAgICBpZiAocHJvcHMgPT09IFwiYWxsXCIgfHwgcHJvcHMgPT09IHRydWUpIHtcbiAgICAgICAgc3R5bGUuY3NzVGV4dCA9IFwiXCI7XG4gICAgICAgIGNsZWFyVHJhbnNmb3JtcyA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wcyA9IHByb3BzLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgaSA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoLS1pID4gLTEpIHtcbiAgICAgICAgICBwcm9wID0gcHJvcHNbaV07XG5cbiAgICAgICAgICBpZiAoX3RyYW5zZm9ybVByb3BzW3Byb3BdKSB7XG4gICAgICAgICAgICBjbGVhclRyYW5zZm9ybXMgPSAxO1xuICAgICAgICAgICAgcHJvcCA9IHByb3AgPT09IFwidHJhbnNmb3JtT3JpZ2luXCIgPyBfdHJhbnNmb3JtT3JpZ2luUHJvcCA6IF90cmFuc2Zvcm1Qcm9wO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjbGVhclRyYW5zZm9ybXMpIHtcbiAgICAgICAgX3JlbW92ZVByb3BlcnR5KHRhcmdldCwgX3RyYW5zZm9ybVByb3ApO1xuXG4gICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgIGNhY2hlLnN2ZyAmJiB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwidHJhbnNmb3JtXCIpO1xuXG4gICAgICAgICAgX3BhcnNlVHJhbnNmb3JtKHRhcmdldCwgMSk7XG5cbiAgICAgICAgICBjYWNoZS51bmNhY2hlID0gMTtcblxuICAgICAgICAgIF9yZW1vdmVJbmRlcGVuZGVudFRyYW5zZm9ybXMoc3R5bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgICAgX3NwZWNpYWxQcm9wcyA9IHtcbiAgICBjbGVhclByb3BzOiBmdW5jdGlvbiBjbGVhclByb3BzKHBsdWdpbiwgdGFyZ2V0LCBwcm9wZXJ0eSwgZW5kVmFsdWUsIHR3ZWVuKSB7XG4gICAgICBpZiAodHdlZW4uZGF0YSAhPT0gXCJpc0Zyb21TdGFydFwiKSB7XG4gICAgICAgIHZhciBwdCA9IHBsdWdpbi5fcHQgPSBuZXcgUHJvcFR3ZWVuKHBsdWdpbi5fcHQsIHRhcmdldCwgcHJvcGVydHksIDAsIDAsIF9yZW5kZXJDbGVhclByb3BzKTtcbiAgICAgICAgcHQudSA9IGVuZFZhbHVlO1xuICAgICAgICBwdC5wciA9IC0xMDtcbiAgICAgICAgcHQudHdlZW4gPSB0d2VlbjtcblxuICAgICAgICBwbHVnaW4uX3Byb3BzLnB1c2gocHJvcGVydHkpO1xuXG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICAgIF9pZGVudGl0eTJETWF0cml4ID0gWzEsIDAsIDAsIDEsIDAsIDBdLFxuICAgICAgX3JvdGF0aW9uYWxQcm9wZXJ0aWVzID0ge30sXG4gICAgICBfaXNOdWxsVHJhbnNmb3JtID0gZnVuY3Rpb24gX2lzTnVsbFRyYW5zZm9ybSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gXCJtYXRyaXgoMSwgMCwgMCwgMSwgMCwgMClcIiB8fCB2YWx1ZSA9PT0gXCJub25lXCIgfHwgIXZhbHVlO1xuICB9LFxuICAgICAgX2dldENvbXB1dGVkVHJhbnNmb3JtTWF0cml4QXNBcnJheSA9IGZ1bmN0aW9uIF9nZXRDb21wdXRlZFRyYW5zZm9ybU1hdHJpeEFzQXJyYXkodGFyZ2V0KSB7XG4gICAgdmFyIG1hdHJpeFN0cmluZyA9IF9nZXRDb21wdXRlZFByb3BlcnR5KHRhcmdldCwgX3RyYW5zZm9ybVByb3ApO1xuXG4gICAgcmV0dXJuIF9pc051bGxUcmFuc2Zvcm0obWF0cml4U3RyaW5nKSA/IF9pZGVudGl0eTJETWF0cml4IDogbWF0cml4U3RyaW5nLnN1YnN0cig3KS5tYXRjaChfbnVtRXhwKS5tYXAoX3JvdW5kKTtcbiAgfSxcbiAgICAgIF9nZXRNYXRyaXggPSBmdW5jdGlvbiBfZ2V0TWF0cml4KHRhcmdldCwgZm9yY2UyRCkge1xuICAgIHZhciBjYWNoZSA9IHRhcmdldC5fZ3NhcCB8fCBfZ2V0Q2FjaGUodGFyZ2V0KSxcbiAgICAgICAgc3R5bGUgPSB0YXJnZXQuc3R5bGUsXG4gICAgICAgIG1hdHJpeCA9IF9nZXRDb21wdXRlZFRyYW5zZm9ybU1hdHJpeEFzQXJyYXkodGFyZ2V0KSxcbiAgICAgICAgcGFyZW50LFxuICAgICAgICBuZXh0U2libGluZyxcbiAgICAgICAgdGVtcCxcbiAgICAgICAgYWRkZWRUb0RPTTtcblxuICAgIGlmIChjYWNoZS5zdmcgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiKSkge1xuICAgICAgdGVtcCA9IHRhcmdldC50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpLm1hdHJpeDtcbiAgICAgIG1hdHJpeCA9IFt0ZW1wLmEsIHRlbXAuYiwgdGVtcC5jLCB0ZW1wLmQsIHRlbXAuZSwgdGVtcC5mXTtcbiAgICAgIHJldHVybiBtYXRyaXguam9pbihcIixcIikgPT09IFwiMSwwLDAsMSwwLDBcIiA/IF9pZGVudGl0eTJETWF0cml4IDogbWF0cml4O1xuICAgIH0gZWxzZSBpZiAobWF0cml4ID09PSBfaWRlbnRpdHkyRE1hdHJpeCAmJiAhdGFyZ2V0Lm9mZnNldFBhcmVudCAmJiB0YXJnZXQgIT09IF9kb2NFbGVtZW50ICYmICFjYWNoZS5zdmcpIHtcbiAgICAgIHRlbXAgPSBzdHlsZS5kaXNwbGF5O1xuICAgICAgc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlO1xuXG4gICAgICBpZiAoIXBhcmVudCB8fCAhdGFyZ2V0Lm9mZnNldFBhcmVudCkge1xuICAgICAgICBhZGRlZFRvRE9NID0gMTtcbiAgICAgICAgbmV4dFNpYmxpbmcgPSB0YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICAgIF9kb2NFbGVtZW50LmFwcGVuZENoaWxkKHRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIG1hdHJpeCA9IF9nZXRDb21wdXRlZFRyYW5zZm9ybU1hdHJpeEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgIHRlbXAgPyBzdHlsZS5kaXNwbGF5ID0gdGVtcCA6IF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIFwiZGlzcGxheVwiKTtcblxuICAgICAgaWYgKGFkZGVkVG9ET00pIHtcbiAgICAgICAgbmV4dFNpYmxpbmcgPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRhcmdldCwgbmV4dFNpYmxpbmcpIDogcGFyZW50ID8gcGFyZW50LmFwcGVuZENoaWxkKHRhcmdldCkgOiBfZG9jRWxlbWVudC5yZW1vdmVDaGlsZCh0YXJnZXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmb3JjZTJEICYmIG1hdHJpeC5sZW5ndGggPiA2ID8gW21hdHJpeFswXSwgbWF0cml4WzFdLCBtYXRyaXhbNF0sIG1hdHJpeFs1XSwgbWF0cml4WzEyXSwgbWF0cml4WzEzXV0gOiBtYXRyaXg7XG4gIH0sXG4gICAgICBfYXBwbHlTVkdPcmlnaW4gPSBmdW5jdGlvbiBfYXBwbHlTVkdPcmlnaW4odGFyZ2V0LCBvcmlnaW4sIG9yaWdpbklzQWJzb2x1dGUsIHNtb290aCwgbWF0cml4QXJyYXksIHBsdWdpblRvQWRkUHJvcFR3ZWVuc1RvKSB7XG4gICAgdmFyIGNhY2hlID0gdGFyZ2V0Ll9nc2FwLFxuICAgICAgICBtYXRyaXggPSBtYXRyaXhBcnJheSB8fCBfZ2V0TWF0cml4KHRhcmdldCwgdHJ1ZSksXG4gICAgICAgIHhPcmlnaW5PbGQgPSBjYWNoZS54T3JpZ2luIHx8IDAsXG4gICAgICAgIHlPcmlnaW5PbGQgPSBjYWNoZS55T3JpZ2luIHx8IDAsXG4gICAgICAgIHhPZmZzZXRPbGQgPSBjYWNoZS54T2Zmc2V0IHx8IDAsXG4gICAgICAgIHlPZmZzZXRPbGQgPSBjYWNoZS55T2Zmc2V0IHx8IDAsXG4gICAgICAgIGEgPSBtYXRyaXhbMF0sXG4gICAgICAgIGIgPSBtYXRyaXhbMV0sXG4gICAgICAgIGMgPSBtYXRyaXhbMl0sXG4gICAgICAgIGQgPSBtYXRyaXhbM10sXG4gICAgICAgIHR4ID0gbWF0cml4WzRdLFxuICAgICAgICB0eSA9IG1hdHJpeFs1XSxcbiAgICAgICAgb3JpZ2luU3BsaXQgPSBvcmlnaW4uc3BsaXQoXCIgXCIpLFxuICAgICAgICB4T3JpZ2luID0gcGFyc2VGbG9hdChvcmlnaW5TcGxpdFswXSkgfHwgMCxcbiAgICAgICAgeU9yaWdpbiA9IHBhcnNlRmxvYXQob3JpZ2luU3BsaXRbMV0pIHx8IDAsXG4gICAgICAgIGJvdW5kcyxcbiAgICAgICAgZGV0ZXJtaW5hbnQsXG4gICAgICAgIHgsXG4gICAgICAgIHk7XG5cbiAgICBpZiAoIW9yaWdpbklzQWJzb2x1dGUpIHtcbiAgICAgIGJvdW5kcyA9IF9nZXRCQm94KHRhcmdldCk7XG4gICAgICB4T3JpZ2luID0gYm91bmRzLnggKyAofm9yaWdpblNwbGl0WzBdLmluZGV4T2YoXCIlXCIpID8geE9yaWdpbiAvIDEwMCAqIGJvdW5kcy53aWR0aCA6IHhPcmlnaW4pO1xuICAgICAgeU9yaWdpbiA9IGJvdW5kcy55ICsgKH4ob3JpZ2luU3BsaXRbMV0gfHwgb3JpZ2luU3BsaXRbMF0pLmluZGV4T2YoXCIlXCIpID8geU9yaWdpbiAvIDEwMCAqIGJvdW5kcy5oZWlnaHQgOiB5T3JpZ2luKTtcbiAgICB9IGVsc2UgaWYgKG1hdHJpeCAhPT0gX2lkZW50aXR5MkRNYXRyaXggJiYgKGRldGVybWluYW50ID0gYSAqIGQgLSBiICogYykpIHtcbiAgICAgIHggPSB4T3JpZ2luICogKGQgLyBkZXRlcm1pbmFudCkgKyB5T3JpZ2luICogKC1jIC8gZGV0ZXJtaW5hbnQpICsgKGMgKiB0eSAtIGQgKiB0eCkgLyBkZXRlcm1pbmFudDtcbiAgICAgIHkgPSB4T3JpZ2luICogKC1iIC8gZGV0ZXJtaW5hbnQpICsgeU9yaWdpbiAqIChhIC8gZGV0ZXJtaW5hbnQpIC0gKGEgKiB0eSAtIGIgKiB0eCkgLyBkZXRlcm1pbmFudDtcbiAgICAgIHhPcmlnaW4gPSB4O1xuICAgICAgeU9yaWdpbiA9IHk7XG4gICAgfVxuXG4gICAgaWYgKHNtb290aCB8fCBzbW9vdGggIT09IGZhbHNlICYmIGNhY2hlLnNtb290aCkge1xuICAgICAgdHggPSB4T3JpZ2luIC0geE9yaWdpbk9sZDtcbiAgICAgIHR5ID0geU9yaWdpbiAtIHlPcmlnaW5PbGQ7XG4gICAgICBjYWNoZS54T2Zmc2V0ID0geE9mZnNldE9sZCArICh0eCAqIGEgKyB0eSAqIGMpIC0gdHg7XG4gICAgICBjYWNoZS55T2Zmc2V0ID0geU9mZnNldE9sZCArICh0eCAqIGIgKyB0eSAqIGQpIC0gdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlLnhPZmZzZXQgPSBjYWNoZS55T2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBjYWNoZS54T3JpZ2luID0geE9yaWdpbjtcbiAgICBjYWNoZS55T3JpZ2luID0geU9yaWdpbjtcbiAgICBjYWNoZS5zbW9vdGggPSAhIXNtb290aDtcbiAgICBjYWNoZS5vcmlnaW4gPSBvcmlnaW47XG4gICAgY2FjaGUub3JpZ2luSXNBYnNvbHV0ZSA9ICEhb3JpZ2luSXNBYnNvbHV0ZTtcbiAgICB0YXJnZXQuc3R5bGVbX3RyYW5zZm9ybU9yaWdpblByb3BdID0gXCIwcHggMHB4XCI7XG5cbiAgICBpZiAocGx1Z2luVG9BZGRQcm9wVHdlZW5zVG8pIHtcbiAgICAgIF9hZGROb25Ud2VlbmluZ1BUKHBsdWdpblRvQWRkUHJvcFR3ZWVuc1RvLCBjYWNoZSwgXCJ4T3JpZ2luXCIsIHhPcmlnaW5PbGQsIHhPcmlnaW4pO1xuXG4gICAgICBfYWRkTm9uVHdlZW5pbmdQVChwbHVnaW5Ub0FkZFByb3BUd2VlbnNUbywgY2FjaGUsIFwieU9yaWdpblwiLCB5T3JpZ2luT2xkLCB5T3JpZ2luKTtcblxuICAgICAgX2FkZE5vblR3ZWVuaW5nUFQocGx1Z2luVG9BZGRQcm9wVHdlZW5zVG8sIGNhY2hlLCBcInhPZmZzZXRcIiwgeE9mZnNldE9sZCwgY2FjaGUueE9mZnNldCk7XG5cbiAgICAgIF9hZGROb25Ud2VlbmluZ1BUKHBsdWdpblRvQWRkUHJvcFR3ZWVuc1RvLCBjYWNoZSwgXCJ5T2Zmc2V0XCIsIHlPZmZzZXRPbGQsIGNhY2hlLnlPZmZzZXQpO1xuICAgIH1cblxuICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN2Zy1vcmlnaW5cIiwgeE9yaWdpbiArIFwiIFwiICsgeU9yaWdpbik7XG4gIH0sXG4gICAgICBfcGFyc2VUcmFuc2Zvcm0gPSBmdW5jdGlvbiBfcGFyc2VUcmFuc2Zvcm0odGFyZ2V0LCB1bmNhY2hlKSB7XG4gICAgdmFyIGNhY2hlID0gdGFyZ2V0Ll9nc2FwIHx8IG5ldyBHU0NhY2hlKHRhcmdldCk7XG5cbiAgICBpZiAoXCJ4XCIgaW4gY2FjaGUgJiYgIXVuY2FjaGUgJiYgIWNhY2hlLnVuY2FjaGUpIHtcbiAgICAgIHJldHVybiBjYWNoZTtcbiAgICB9XG5cbiAgICB2YXIgc3R5bGUgPSB0YXJnZXQuc3R5bGUsXG4gICAgICAgIGludmVydGVkU2NhbGVYID0gY2FjaGUuc2NhbGVYIDwgMCxcbiAgICAgICAgcHggPSBcInB4XCIsXG4gICAgICAgIGRlZyA9IFwiZGVnXCIsXG4gICAgICAgIGNzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLFxuICAgICAgICBvcmlnaW4gPSBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIF90cmFuc2Zvcm1PcmlnaW5Qcm9wKSB8fCBcIjBcIixcbiAgICAgICAgeCxcbiAgICAgICAgeSxcbiAgICAgICAgeixcbiAgICAgICAgc2NhbGVYLFxuICAgICAgICBzY2FsZVksXG4gICAgICAgIHJvdGF0aW9uLFxuICAgICAgICByb3RhdGlvblgsXG4gICAgICAgIHJvdGF0aW9uWSxcbiAgICAgICAgc2tld1gsXG4gICAgICAgIHNrZXdZLFxuICAgICAgICBwZXJzcGVjdGl2ZSxcbiAgICAgICAgeE9yaWdpbixcbiAgICAgICAgeU9yaWdpbixcbiAgICAgICAgbWF0cml4LFxuICAgICAgICBhbmdsZSxcbiAgICAgICAgY29zLFxuICAgICAgICBzaW4sXG4gICAgICAgIGEsXG4gICAgICAgIGIsXG4gICAgICAgIGMsXG4gICAgICAgIGQsXG4gICAgICAgIGExMixcbiAgICAgICAgYTIyLFxuICAgICAgICB0MSxcbiAgICAgICAgdDIsXG4gICAgICAgIHQzLFxuICAgICAgICBhMTMsXG4gICAgICAgIGEyMyxcbiAgICAgICAgYTMzLFxuICAgICAgICBhNDIsXG4gICAgICAgIGE0MyxcbiAgICAgICAgYTMyO1xuICAgIHggPSB5ID0geiA9IHJvdGF0aW9uID0gcm90YXRpb25YID0gcm90YXRpb25ZID0gc2tld1ggPSBza2V3WSA9IHBlcnNwZWN0aXZlID0gMDtcbiAgICBzY2FsZVggPSBzY2FsZVkgPSAxO1xuICAgIGNhY2hlLnN2ZyA9ICEhKHRhcmdldC5nZXRDVE0gJiYgX2lzU1ZHKHRhcmdldCkpO1xuXG4gICAgaWYgKGNzLnRyYW5zbGF0ZSkge1xuICAgICAgaWYgKGNzLnRyYW5zbGF0ZSAhPT0gXCJub25lXCIgfHwgY3Muc2NhbGUgIT09IFwibm9uZVwiIHx8IGNzLnJvdGF0ZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgc3R5bGVbX3RyYW5zZm9ybVByb3BdID0gKGNzLnRyYW5zbGF0ZSAhPT0gXCJub25lXCIgPyBcInRyYW5zbGF0ZTNkKFwiICsgKGNzLnRyYW5zbGF0ZSArIFwiIDAgMFwiKS5zcGxpdChcIiBcIikuc2xpY2UoMCwgMykuam9pbihcIiwgXCIpICsgXCIpIFwiIDogXCJcIikgKyAoY3Mucm90YXRlICE9PSBcIm5vbmVcIiA/IFwicm90YXRlKFwiICsgY3Mucm90YXRlICsgXCIpIFwiIDogXCJcIikgKyAoY3Muc2NhbGUgIT09IFwibm9uZVwiID8gXCJzY2FsZShcIiArIGNzLnNjYWxlLnNwbGl0KFwiIFwiKS5qb2luKFwiLFwiKSArIFwiKSBcIiA6IFwiXCIpICsgKGNzW190cmFuc2Zvcm1Qcm9wXSAhPT0gXCJub25lXCIgPyBjc1tfdHJhbnNmb3JtUHJvcF0gOiBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgc3R5bGUuc2NhbGUgPSBzdHlsZS5yb3RhdGUgPSBzdHlsZS50cmFuc2xhdGUgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICBtYXRyaXggPSBfZ2V0TWF0cml4KHRhcmdldCwgY2FjaGUuc3ZnKTtcblxuICAgIGlmIChjYWNoZS5zdmcpIHtcbiAgICAgIGlmIChjYWNoZS51bmNhY2hlKSB7XG4gICAgICAgIHQyID0gdGFyZ2V0LmdldEJCb3goKTtcbiAgICAgICAgb3JpZ2luID0gY2FjaGUueE9yaWdpbiAtIHQyLnggKyBcInB4IFwiICsgKGNhY2hlLnlPcmlnaW4gLSB0Mi55KSArIFwicHhcIjtcbiAgICAgICAgdDEgPSBcIlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdDEgPSAhdW5jYWNoZSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdmctb3JpZ2luXCIpO1xuICAgICAgfVxuXG4gICAgICBfYXBwbHlTVkdPcmlnaW4odGFyZ2V0LCB0MSB8fCBvcmlnaW4sICEhdDEgfHwgY2FjaGUub3JpZ2luSXNBYnNvbHV0ZSwgY2FjaGUuc21vb3RoICE9PSBmYWxzZSwgbWF0cml4KTtcbiAgICB9XG5cbiAgICB4T3JpZ2luID0gY2FjaGUueE9yaWdpbiB8fCAwO1xuICAgIHlPcmlnaW4gPSBjYWNoZS55T3JpZ2luIHx8IDA7XG5cbiAgICBpZiAobWF0cml4ICE9PSBfaWRlbnRpdHkyRE1hdHJpeCkge1xuICAgICAgYSA9IG1hdHJpeFswXTtcbiAgICAgIGIgPSBtYXRyaXhbMV07XG4gICAgICBjID0gbWF0cml4WzJdO1xuICAgICAgZCA9IG1hdHJpeFszXTtcbiAgICAgIHggPSBhMTIgPSBtYXRyaXhbNF07XG4gICAgICB5ID0gYTIyID0gbWF0cml4WzVdO1xuXG4gICAgICBpZiAobWF0cml4Lmxlbmd0aCA9PT0gNikge1xuICAgICAgICBzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYik7XG4gICAgICAgIHNjYWxlWSA9IE1hdGguc3FydChkICogZCArIGMgKiBjKTtcbiAgICAgICAgcm90YXRpb24gPSBhIHx8IGIgPyBfYXRhbjIoYiwgYSkgKiBfUkFEMkRFRyA6IDA7XG4gICAgICAgIHNrZXdYID0gYyB8fCBkID8gX2F0YW4yKGMsIGQpICogX1JBRDJERUcgKyByb3RhdGlvbiA6IDA7XG4gICAgICAgIHNrZXdYICYmIChzY2FsZVkgKj0gTWF0aC5hYnMoTWF0aC5jb3Moc2tld1ggKiBfREVHMlJBRCkpKTtcblxuICAgICAgICBpZiAoY2FjaGUuc3ZnKSB7XG4gICAgICAgICAgeCAtPSB4T3JpZ2luIC0gKHhPcmlnaW4gKiBhICsgeU9yaWdpbiAqIGMpO1xuICAgICAgICAgIHkgLT0geU9yaWdpbiAtICh4T3JpZ2luICogYiArIHlPcmlnaW4gKiBkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYTMyID0gbWF0cml4WzZdO1xuICAgICAgICBhNDIgPSBtYXRyaXhbN107XG4gICAgICAgIGExMyA9IG1hdHJpeFs4XTtcbiAgICAgICAgYTIzID0gbWF0cml4WzldO1xuICAgICAgICBhMzMgPSBtYXRyaXhbMTBdO1xuICAgICAgICBhNDMgPSBtYXRyaXhbMTFdO1xuICAgICAgICB4ID0gbWF0cml4WzEyXTtcbiAgICAgICAgeSA9IG1hdHJpeFsxM107XG4gICAgICAgIHogPSBtYXRyaXhbMTRdO1xuICAgICAgICBhbmdsZSA9IF9hdGFuMihhMzIsIGEzMyk7XG4gICAgICAgIHJvdGF0aW9uWCA9IGFuZ2xlICogX1JBRDJERUc7XG5cbiAgICAgICAgaWYgKGFuZ2xlKSB7XG4gICAgICAgICAgY29zID0gTWF0aC5jb3MoLWFuZ2xlKTtcbiAgICAgICAgICBzaW4gPSBNYXRoLnNpbigtYW5nbGUpO1xuICAgICAgICAgIHQxID0gYTEyICogY29zICsgYTEzICogc2luO1xuICAgICAgICAgIHQyID0gYTIyICogY29zICsgYTIzICogc2luO1xuICAgICAgICAgIHQzID0gYTMyICogY29zICsgYTMzICogc2luO1xuICAgICAgICAgIGExMyA9IGExMiAqIC1zaW4gKyBhMTMgKiBjb3M7XG4gICAgICAgICAgYTIzID0gYTIyICogLXNpbiArIGEyMyAqIGNvcztcbiAgICAgICAgICBhMzMgPSBhMzIgKiAtc2luICsgYTMzICogY29zO1xuICAgICAgICAgIGE0MyA9IGE0MiAqIC1zaW4gKyBhNDMgKiBjb3M7XG4gICAgICAgICAgYTEyID0gdDE7XG4gICAgICAgICAgYTIyID0gdDI7XG4gICAgICAgICAgYTMyID0gdDM7XG4gICAgICAgIH1cblxuICAgICAgICBhbmdsZSA9IF9hdGFuMigtYywgYTMzKTtcbiAgICAgICAgcm90YXRpb25ZID0gYW5nbGUgKiBfUkFEMkRFRztcblxuICAgICAgICBpZiAoYW5nbGUpIHtcbiAgICAgICAgICBjb3MgPSBNYXRoLmNvcygtYW5nbGUpO1xuICAgICAgICAgIHNpbiA9IE1hdGguc2luKC1hbmdsZSk7XG4gICAgICAgICAgdDEgPSBhICogY29zIC0gYTEzICogc2luO1xuICAgICAgICAgIHQyID0gYiAqIGNvcyAtIGEyMyAqIHNpbjtcbiAgICAgICAgICB0MyA9IGMgKiBjb3MgLSBhMzMgKiBzaW47XG4gICAgICAgICAgYTQzID0gZCAqIHNpbiArIGE0MyAqIGNvcztcbiAgICAgICAgICBhID0gdDE7XG4gICAgICAgICAgYiA9IHQyO1xuICAgICAgICAgIGMgPSB0MztcbiAgICAgICAgfVxuXG4gICAgICAgIGFuZ2xlID0gX2F0YW4yKGIsIGEpO1xuICAgICAgICByb3RhdGlvbiA9IGFuZ2xlICogX1JBRDJERUc7XG5cbiAgICAgICAgaWYgKGFuZ2xlKSB7XG4gICAgICAgICAgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICAgIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICAgICAgICB0MSA9IGEgKiBjb3MgKyBiICogc2luO1xuICAgICAgICAgIHQyID0gYTEyICogY29zICsgYTIyICogc2luO1xuICAgICAgICAgIGIgPSBiICogY29zIC0gYSAqIHNpbjtcbiAgICAgICAgICBhMjIgPSBhMjIgKiBjb3MgLSBhMTIgKiBzaW47XG4gICAgICAgICAgYSA9IHQxO1xuICAgICAgICAgIGExMiA9IHQyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJvdGF0aW9uWCAmJiBNYXRoLmFicyhyb3RhdGlvblgpICsgTWF0aC5hYnMocm90YXRpb24pID4gMzU5LjkpIHtcbiAgICAgICAgICByb3RhdGlvblggPSByb3RhdGlvbiA9IDA7XG4gICAgICAgICAgcm90YXRpb25ZID0gMTgwIC0gcm90YXRpb25ZO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NhbGVYID0gX3JvdW5kKE1hdGguc3FydChhICogYSArIGIgKiBiICsgYyAqIGMpKTtcbiAgICAgICAgc2NhbGVZID0gX3JvdW5kKE1hdGguc3FydChhMjIgKiBhMjIgKyBhMzIgKiBhMzIpKTtcbiAgICAgICAgYW5nbGUgPSBfYXRhbjIoYTEyLCBhMjIpO1xuICAgICAgICBza2V3WCA9IE1hdGguYWJzKGFuZ2xlKSA+IDAuMDAwMiA/IGFuZ2xlICogX1JBRDJERUcgOiAwO1xuICAgICAgICBwZXJzcGVjdGl2ZSA9IGE0MyA/IDEgLyAoYTQzIDwgMCA/IC1hNDMgOiBhNDMpIDogMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlLnN2Zykge1xuICAgICAgICB0MSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIik7XG4gICAgICAgIGNhY2hlLmZvcmNlQ1NTID0gdGFyZ2V0LnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCBcIlwiKSB8fCAhX2lzTnVsbFRyYW5zZm9ybShfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIF90cmFuc2Zvcm1Qcm9wKSk7XG4gICAgICAgIHQxICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgdDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChNYXRoLmFicyhza2V3WCkgPiA5MCAmJiBNYXRoLmFicyhza2V3WCkgPCAyNzApIHtcbiAgICAgIGlmIChpbnZlcnRlZFNjYWxlWCkge1xuICAgICAgICBzY2FsZVggKj0gLTE7XG4gICAgICAgIHNrZXdYICs9IHJvdGF0aW9uIDw9IDAgPyAxODAgOiAtMTgwO1xuICAgICAgICByb3RhdGlvbiArPSByb3RhdGlvbiA8PSAwID8gMTgwIDogLTE4MDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjYWxlWSAqPSAtMTtcbiAgICAgICAgc2tld1ggKz0gc2tld1ggPD0gMCA/IDE4MCA6IC0xODA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdW5jYWNoZSA9IHVuY2FjaGUgfHwgY2FjaGUudW5jYWNoZTtcbiAgICBjYWNoZS54ID0geCAtICgoY2FjaGUueFBlcmNlbnQgPSB4ICYmICghdW5jYWNoZSAmJiBjYWNoZS54UGVyY2VudCB8fCAoTWF0aC5yb3VuZCh0YXJnZXQub2Zmc2V0V2lkdGggLyAyKSA9PT0gTWF0aC5yb3VuZCgteCkgPyAtNTAgOiAwKSkpID8gdGFyZ2V0Lm9mZnNldFdpZHRoICogY2FjaGUueFBlcmNlbnQgLyAxMDAgOiAwKSArIHB4O1xuICAgIGNhY2hlLnkgPSB5IC0gKChjYWNoZS55UGVyY2VudCA9IHkgJiYgKCF1bmNhY2hlICYmIGNhY2hlLnlQZXJjZW50IHx8IChNYXRoLnJvdW5kKHRhcmdldC5vZmZzZXRIZWlnaHQgLyAyKSA9PT0gTWF0aC5yb3VuZCgteSkgPyAtNTAgOiAwKSkpID8gdGFyZ2V0Lm9mZnNldEhlaWdodCAqIGNhY2hlLnlQZXJjZW50IC8gMTAwIDogMCkgKyBweDtcbiAgICBjYWNoZS56ID0geiArIHB4O1xuICAgIGNhY2hlLnNjYWxlWCA9IF9yb3VuZChzY2FsZVgpO1xuICAgIGNhY2hlLnNjYWxlWSA9IF9yb3VuZChzY2FsZVkpO1xuICAgIGNhY2hlLnJvdGF0aW9uID0gX3JvdW5kKHJvdGF0aW9uKSArIGRlZztcbiAgICBjYWNoZS5yb3RhdGlvblggPSBfcm91bmQocm90YXRpb25YKSArIGRlZztcbiAgICBjYWNoZS5yb3RhdGlvblkgPSBfcm91bmQocm90YXRpb25ZKSArIGRlZztcbiAgICBjYWNoZS5za2V3WCA9IHNrZXdYICsgZGVnO1xuICAgIGNhY2hlLnNrZXdZID0gc2tld1kgKyBkZWc7XG4gICAgY2FjaGUudHJhbnNmb3JtUGVyc3BlY3RpdmUgPSBwZXJzcGVjdGl2ZSArIHB4O1xuXG4gICAgaWYgKGNhY2hlLnpPcmlnaW4gPSBwYXJzZUZsb2F0KG9yaWdpbi5zcGxpdChcIiBcIilbMl0pIHx8ICF1bmNhY2hlICYmIGNhY2hlLnpPcmlnaW4gfHwgMCkge1xuICAgICAgc3R5bGVbX3RyYW5zZm9ybU9yaWdpblByb3BdID0gX2ZpcnN0VHdvT25seShvcmlnaW4pO1xuICAgIH1cblxuICAgIGNhY2hlLnhPZmZzZXQgPSBjYWNoZS55T2Zmc2V0ID0gMDtcbiAgICBjYWNoZS5mb3JjZTNEID0gX2NvbmZpZy5mb3JjZTNEO1xuICAgIGNhY2hlLnJlbmRlclRyYW5zZm9ybSA9IGNhY2hlLnN2ZyA/IF9yZW5kZXJTVkdUcmFuc2Zvcm1zIDogX3N1cHBvcnRzM0QgPyBfcmVuZGVyQ1NTVHJhbnNmb3JtcyA6IF9yZW5kZXJOb24zRFRyYW5zZm9ybXM7XG4gICAgY2FjaGUudW5jYWNoZSA9IDA7XG4gICAgcmV0dXJuIGNhY2hlO1xuICB9LFxuICAgICAgX2ZpcnN0VHdvT25seSA9IGZ1bmN0aW9uIF9maXJzdFR3b09ubHkodmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlID0gdmFsdWUuc3BsaXQoXCIgXCIpKVswXSArIFwiIFwiICsgdmFsdWVbMV07XG4gIH0sXG4gICAgICBfYWRkUHhUcmFuc2xhdGUgPSBmdW5jdGlvbiBfYWRkUHhUcmFuc2xhdGUodGFyZ2V0LCBzdGFydCwgdmFsdWUpIHtcbiAgICB2YXIgdW5pdCA9IGdldFVuaXQoc3RhcnQpO1xuICAgIHJldHVybiBfcm91bmQocGFyc2VGbG9hdChzdGFydCkgKyBwYXJzZUZsb2F0KF9jb252ZXJ0VG9Vbml0KHRhcmdldCwgXCJ4XCIsIHZhbHVlICsgXCJweFwiLCB1bml0KSkpICsgdW5pdDtcbiAgfSxcbiAgICAgIF9yZW5kZXJOb24zRFRyYW5zZm9ybXMgPSBmdW5jdGlvbiBfcmVuZGVyTm9uM0RUcmFuc2Zvcm1zKHJhdGlvLCBjYWNoZSkge1xuICAgIGNhY2hlLnogPSBcIjBweFwiO1xuICAgIGNhY2hlLnJvdGF0aW9uWSA9IGNhY2hlLnJvdGF0aW9uWCA9IFwiMGRlZ1wiO1xuICAgIGNhY2hlLmZvcmNlM0QgPSAwO1xuXG4gICAgX3JlbmRlckNTU1RyYW5zZm9ybXMocmF0aW8sIGNhY2hlKTtcbiAgfSxcbiAgICAgIF96ZXJvRGVnID0gXCIwZGVnXCIsXG4gICAgICBfemVyb1B4ID0gXCIwcHhcIixcbiAgICAgIF9lbmRQYXJlbnRoZXNpcyA9IFwiKSBcIixcbiAgICAgIF9yZW5kZXJDU1NUcmFuc2Zvcm1zID0gZnVuY3Rpb24gX3JlbmRlckNTU1RyYW5zZm9ybXMocmF0aW8sIGNhY2hlKSB7XG4gICAgdmFyIF9yZWYgPSBjYWNoZSB8fCB0aGlzLFxuICAgICAgICB4UGVyY2VudCA9IF9yZWYueFBlcmNlbnQsXG4gICAgICAgIHlQZXJjZW50ID0gX3JlZi55UGVyY2VudCxcbiAgICAgICAgeCA9IF9yZWYueCxcbiAgICAgICAgeSA9IF9yZWYueSxcbiAgICAgICAgeiA9IF9yZWYueixcbiAgICAgICAgcm90YXRpb24gPSBfcmVmLnJvdGF0aW9uLFxuICAgICAgICByb3RhdGlvblkgPSBfcmVmLnJvdGF0aW9uWSxcbiAgICAgICAgcm90YXRpb25YID0gX3JlZi5yb3RhdGlvblgsXG4gICAgICAgIHNrZXdYID0gX3JlZi5za2V3WCxcbiAgICAgICAgc2tld1kgPSBfcmVmLnNrZXdZLFxuICAgICAgICBzY2FsZVggPSBfcmVmLnNjYWxlWCxcbiAgICAgICAgc2NhbGVZID0gX3JlZi5zY2FsZVksXG4gICAgICAgIHRyYW5zZm9ybVBlcnNwZWN0aXZlID0gX3JlZi50cmFuc2Zvcm1QZXJzcGVjdGl2ZSxcbiAgICAgICAgZm9yY2UzRCA9IF9yZWYuZm9yY2UzRCxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZi50YXJnZXQsXG4gICAgICAgIHpPcmlnaW4gPSBfcmVmLnpPcmlnaW4sXG4gICAgICAgIHRyYW5zZm9ybXMgPSBcIlwiLFxuICAgICAgICB1c2UzRCA9IGZvcmNlM0QgPT09IFwiYXV0b1wiICYmIHJhdGlvICYmIHJhdGlvICE9PSAxIHx8IGZvcmNlM0QgPT09IHRydWU7XG5cbiAgICBpZiAoek9yaWdpbiAmJiAocm90YXRpb25YICE9PSBfemVyb0RlZyB8fCByb3RhdGlvblkgIT09IF96ZXJvRGVnKSkge1xuICAgICAgdmFyIGFuZ2xlID0gcGFyc2VGbG9hdChyb3RhdGlvblkpICogX0RFRzJSQUQsXG4gICAgICAgICAgYTEzID0gTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICAgIGEzMyA9IE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgICBjb3M7XG5cbiAgICAgIGFuZ2xlID0gcGFyc2VGbG9hdChyb3RhdGlvblgpICogX0RFRzJSQUQ7XG4gICAgICBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICB4ID0gX2FkZFB4VHJhbnNsYXRlKHRhcmdldCwgeCwgYTEzICogY29zICogLXpPcmlnaW4pO1xuICAgICAgeSA9IF9hZGRQeFRyYW5zbGF0ZSh0YXJnZXQsIHksIC1NYXRoLnNpbihhbmdsZSkgKiAtek9yaWdpbik7XG4gICAgICB6ID0gX2FkZFB4VHJhbnNsYXRlKHRhcmdldCwgeiwgYTMzICogY29zICogLXpPcmlnaW4gKyB6T3JpZ2luKTtcbiAgICB9XG5cbiAgICBpZiAodHJhbnNmb3JtUGVyc3BlY3RpdmUgIT09IF96ZXJvUHgpIHtcbiAgICAgIHRyYW5zZm9ybXMgKz0gXCJwZXJzcGVjdGl2ZShcIiArIHRyYW5zZm9ybVBlcnNwZWN0aXZlICsgX2VuZFBhcmVudGhlc2lzO1xuICAgIH1cblxuICAgIGlmICh4UGVyY2VudCB8fCB5UGVyY2VudCkge1xuICAgICAgdHJhbnNmb3JtcyArPSBcInRyYW5zbGF0ZShcIiArIHhQZXJjZW50ICsgXCIlLCBcIiArIHlQZXJjZW50ICsgXCIlKSBcIjtcbiAgICB9XG5cbiAgICBpZiAodXNlM0QgfHwgeCAhPT0gX3plcm9QeCB8fCB5ICE9PSBfemVyb1B4IHx8IHogIT09IF96ZXJvUHgpIHtcbiAgICAgIHRyYW5zZm9ybXMgKz0geiAhPT0gX3plcm9QeCB8fCB1c2UzRCA/IFwidHJhbnNsYXRlM2QoXCIgKyB4ICsgXCIsIFwiICsgeSArIFwiLCBcIiArIHogKyBcIikgXCIgOiBcInRyYW5zbGF0ZShcIiArIHggKyBcIiwgXCIgKyB5ICsgX2VuZFBhcmVudGhlc2lzO1xuICAgIH1cblxuICAgIGlmIChyb3RhdGlvbiAhPT0gX3plcm9EZWcpIHtcbiAgICAgIHRyYW5zZm9ybXMgKz0gXCJyb3RhdGUoXCIgKyByb3RhdGlvbiArIF9lbmRQYXJlbnRoZXNpcztcbiAgICB9XG5cbiAgICBpZiAocm90YXRpb25ZICE9PSBfemVyb0RlZykge1xuICAgICAgdHJhbnNmb3JtcyArPSBcInJvdGF0ZVkoXCIgKyByb3RhdGlvblkgKyBfZW5kUGFyZW50aGVzaXM7XG4gICAgfVxuXG4gICAgaWYgKHJvdGF0aW9uWCAhPT0gX3plcm9EZWcpIHtcbiAgICAgIHRyYW5zZm9ybXMgKz0gXCJyb3RhdGVYKFwiICsgcm90YXRpb25YICsgX2VuZFBhcmVudGhlc2lzO1xuICAgIH1cblxuICAgIGlmIChza2V3WCAhPT0gX3plcm9EZWcgfHwgc2tld1kgIT09IF96ZXJvRGVnKSB7XG4gICAgICB0cmFuc2Zvcm1zICs9IFwic2tldyhcIiArIHNrZXdYICsgXCIsIFwiICsgc2tld1kgKyBfZW5kUGFyZW50aGVzaXM7XG4gICAgfVxuXG4gICAgaWYgKHNjYWxlWCAhPT0gMSB8fCBzY2FsZVkgIT09IDEpIHtcbiAgICAgIHRyYW5zZm9ybXMgKz0gXCJzY2FsZShcIiArIHNjYWxlWCArIFwiLCBcIiArIHNjYWxlWSArIF9lbmRQYXJlbnRoZXNpcztcbiAgICB9XG5cbiAgICB0YXJnZXQuc3R5bGVbX3RyYW5zZm9ybVByb3BdID0gdHJhbnNmb3JtcyB8fCBcInRyYW5zbGF0ZSgwLCAwKVwiO1xuICB9LFxuICAgICAgX3JlbmRlclNWR1RyYW5zZm9ybXMgPSBmdW5jdGlvbiBfcmVuZGVyU1ZHVHJhbnNmb3JtcyhyYXRpbywgY2FjaGUpIHtcbiAgICB2YXIgX3JlZjIgPSBjYWNoZSB8fCB0aGlzLFxuICAgICAgICB4UGVyY2VudCA9IF9yZWYyLnhQZXJjZW50LFxuICAgICAgICB5UGVyY2VudCA9IF9yZWYyLnlQZXJjZW50LFxuICAgICAgICB4ID0gX3JlZjIueCxcbiAgICAgICAgeSA9IF9yZWYyLnksXG4gICAgICAgIHJvdGF0aW9uID0gX3JlZjIucm90YXRpb24sXG4gICAgICAgIHNrZXdYID0gX3JlZjIuc2tld1gsXG4gICAgICAgIHNrZXdZID0gX3JlZjIuc2tld1ksXG4gICAgICAgIHNjYWxlWCA9IF9yZWYyLnNjYWxlWCxcbiAgICAgICAgc2NhbGVZID0gX3JlZjIuc2NhbGVZLFxuICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQsXG4gICAgICAgIHhPcmlnaW4gPSBfcmVmMi54T3JpZ2luLFxuICAgICAgICB5T3JpZ2luID0gX3JlZjIueU9yaWdpbixcbiAgICAgICAgeE9mZnNldCA9IF9yZWYyLnhPZmZzZXQsXG4gICAgICAgIHlPZmZzZXQgPSBfcmVmMi55T2Zmc2V0LFxuICAgICAgICBmb3JjZUNTUyA9IF9yZWYyLmZvcmNlQ1NTLFxuICAgICAgICB0eCA9IHBhcnNlRmxvYXQoeCksXG4gICAgICAgIHR5ID0gcGFyc2VGbG9hdCh5KSxcbiAgICAgICAgYTExLFxuICAgICAgICBhMjEsXG4gICAgICAgIGExMixcbiAgICAgICAgYTIyLFxuICAgICAgICB0ZW1wO1xuXG4gICAgcm90YXRpb24gPSBwYXJzZUZsb2F0KHJvdGF0aW9uKTtcbiAgICBza2V3WCA9IHBhcnNlRmxvYXQoc2tld1gpO1xuICAgIHNrZXdZID0gcGFyc2VGbG9hdChza2V3WSk7XG5cbiAgICBpZiAoc2tld1kpIHtcbiAgICAgIHNrZXdZID0gcGFyc2VGbG9hdChza2V3WSk7XG4gICAgICBza2V3WCArPSBza2V3WTtcbiAgICAgIHJvdGF0aW9uICs9IHNrZXdZO1xuICAgIH1cblxuICAgIGlmIChyb3RhdGlvbiB8fCBza2V3WCkge1xuICAgICAgcm90YXRpb24gKj0gX0RFRzJSQUQ7XG4gICAgICBza2V3WCAqPSBfREVHMlJBRDtcbiAgICAgIGExMSA9IE1hdGguY29zKHJvdGF0aW9uKSAqIHNjYWxlWDtcbiAgICAgIGEyMSA9IE1hdGguc2luKHJvdGF0aW9uKSAqIHNjYWxlWDtcbiAgICAgIGExMiA9IE1hdGguc2luKHJvdGF0aW9uIC0gc2tld1gpICogLXNjYWxlWTtcbiAgICAgIGEyMiA9IE1hdGguY29zKHJvdGF0aW9uIC0gc2tld1gpICogc2NhbGVZO1xuXG4gICAgICBpZiAoc2tld1gpIHtcbiAgICAgICAgc2tld1kgKj0gX0RFRzJSQUQ7XG4gICAgICAgIHRlbXAgPSBNYXRoLnRhbihza2V3WCAtIHNrZXdZKTtcbiAgICAgICAgdGVtcCA9IE1hdGguc3FydCgxICsgdGVtcCAqIHRlbXApO1xuICAgICAgICBhMTIgKj0gdGVtcDtcbiAgICAgICAgYTIyICo9IHRlbXA7XG5cbiAgICAgICAgaWYgKHNrZXdZKSB7XG4gICAgICAgICAgdGVtcCA9IE1hdGgudGFuKHNrZXdZKTtcbiAgICAgICAgICB0ZW1wID0gTWF0aC5zcXJ0KDEgKyB0ZW1wICogdGVtcCk7XG4gICAgICAgICAgYTExICo9IHRlbXA7XG4gICAgICAgICAgYTIxICo9IHRlbXA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYTExID0gX3JvdW5kKGExMSk7XG4gICAgICBhMjEgPSBfcm91bmQoYTIxKTtcbiAgICAgIGExMiA9IF9yb3VuZChhMTIpO1xuICAgICAgYTIyID0gX3JvdW5kKGEyMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGExMSA9IHNjYWxlWDtcbiAgICAgIGEyMiA9IHNjYWxlWTtcbiAgICAgIGEyMSA9IGExMiA9IDA7XG4gICAgfVxuXG4gICAgaWYgKHR4ICYmICF+KHggKyBcIlwiKS5pbmRleE9mKFwicHhcIikgfHwgdHkgJiYgIX4oeSArIFwiXCIpLmluZGV4T2YoXCJweFwiKSkge1xuICAgICAgdHggPSBfY29udmVydFRvVW5pdCh0YXJnZXQsIFwieFwiLCB4LCBcInB4XCIpO1xuICAgICAgdHkgPSBfY29udmVydFRvVW5pdCh0YXJnZXQsIFwieVwiLCB5LCBcInB4XCIpO1xuICAgIH1cblxuICAgIGlmICh4T3JpZ2luIHx8IHlPcmlnaW4gfHwgeE9mZnNldCB8fCB5T2Zmc2V0KSB7XG4gICAgICB0eCA9IF9yb3VuZCh0eCArIHhPcmlnaW4gLSAoeE9yaWdpbiAqIGExMSArIHlPcmlnaW4gKiBhMTIpICsgeE9mZnNldCk7XG4gICAgICB0eSA9IF9yb3VuZCh0eSArIHlPcmlnaW4gLSAoeE9yaWdpbiAqIGEyMSArIHlPcmlnaW4gKiBhMjIpICsgeU9mZnNldCk7XG4gICAgfVxuXG4gICAgaWYgKHhQZXJjZW50IHx8IHlQZXJjZW50KSB7XG4gICAgICB0ZW1wID0gdGFyZ2V0LmdldEJCb3goKTtcbiAgICAgIHR4ID0gX3JvdW5kKHR4ICsgeFBlcmNlbnQgLyAxMDAgKiB0ZW1wLndpZHRoKTtcbiAgICAgIHR5ID0gX3JvdW5kKHR5ICsgeVBlcmNlbnQgLyAxMDAgKiB0ZW1wLmhlaWdodCk7XG4gICAgfVxuXG4gICAgdGVtcCA9IFwibWF0cml4KFwiICsgYTExICsgXCIsXCIgKyBhMjEgKyBcIixcIiArIGExMiArIFwiLFwiICsgYTIyICsgXCIsXCIgKyB0eCArIFwiLFwiICsgdHkgKyBcIilcIjtcbiAgICB0YXJnZXQuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIHRlbXApO1xuICAgIGZvcmNlQ1NTICYmICh0YXJnZXQuc3R5bGVbX3RyYW5zZm9ybVByb3BdID0gdGVtcCk7XG4gIH0sXG4gICAgICBfYWRkUm90YXRpb25hbFByb3BUd2VlbiA9IGZ1bmN0aW9uIF9hZGRSb3RhdGlvbmFsUHJvcFR3ZWVuKHBsdWdpbiwgdGFyZ2V0LCBwcm9wZXJ0eSwgc3RhcnROdW0sIGVuZFZhbHVlKSB7XG4gICAgdmFyIGNhcCA9IDM2MCxcbiAgICAgICAgaXNTdHJpbmcgPSBfaXNTdHJpbmcoZW5kVmFsdWUpLFxuICAgICAgICBlbmROdW0gPSBwYXJzZUZsb2F0KGVuZFZhbHVlKSAqIChpc1N0cmluZyAmJiB+ZW5kVmFsdWUuaW5kZXhPZihcInJhZFwiKSA/IF9SQUQyREVHIDogMSksXG4gICAgICAgIGNoYW5nZSA9IGVuZE51bSAtIHN0YXJ0TnVtLFxuICAgICAgICBmaW5hbFZhbHVlID0gc3RhcnROdW0gKyBjaGFuZ2UgKyBcImRlZ1wiLFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIHB0O1xuXG4gICAgaWYgKGlzU3RyaW5nKSB7XG4gICAgICBkaXJlY3Rpb24gPSBlbmRWYWx1ZS5zcGxpdChcIl9cIilbMV07XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwic2hvcnRcIikge1xuICAgICAgICBjaGFuZ2UgJT0gY2FwO1xuXG4gICAgICAgIGlmIChjaGFuZ2UgIT09IGNoYW5nZSAlIChjYXAgLyAyKSkge1xuICAgICAgICAgIGNoYW5nZSArPSBjaGFuZ2UgPCAwID8gY2FwIDogLWNhcDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcImN3XCIgJiYgY2hhbmdlIDwgMCkge1xuICAgICAgICBjaGFuZ2UgPSAoY2hhbmdlICsgY2FwICogX2JpZ051bSQxKSAlIGNhcCAtIH5+KGNoYW5nZSAvIGNhcCkgKiBjYXA7XG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gXCJjY3dcIiAmJiBjaGFuZ2UgPiAwKSB7XG4gICAgICAgIGNoYW5nZSA9IChjaGFuZ2UgLSBjYXAgKiBfYmlnTnVtJDEpICUgY2FwIC0gfn4oY2hhbmdlIC8gY2FwKSAqIGNhcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwbHVnaW4uX3B0ID0gcHQgPSBuZXcgUHJvcFR3ZWVuKHBsdWdpbi5fcHQsIHRhcmdldCwgcHJvcGVydHksIHN0YXJ0TnVtLCBjaGFuZ2UsIF9yZW5kZXJQcm9wV2l0aEVuZCk7XG4gICAgcHQuZSA9IGZpbmFsVmFsdWU7XG4gICAgcHQudSA9IFwiZGVnXCI7XG5cbiAgICBwbHVnaW4uX3Byb3BzLnB1c2gocHJvcGVydHkpO1xuXG4gICAgcmV0dXJuIHB0O1xuICB9LFxuICAgICAgX2Fzc2lnbiA9IGZ1bmN0aW9uIF9hc3NpZ24odGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBmb3IgKHZhciBwIGluIHNvdXJjZSkge1xuICAgICAgdGFyZ2V0W3BdID0gc291cmNlW3BdO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH0sXG4gICAgICBfYWRkUmF3VHJhbnNmb3JtUFRzID0gZnVuY3Rpb24gX2FkZFJhd1RyYW5zZm9ybVBUcyhwbHVnaW4sIHRyYW5zZm9ybXMsIHRhcmdldCkge1xuICAgIHZhciBzdGFydENhY2hlID0gX2Fzc2lnbih7fSwgdGFyZ2V0Ll9nc2FwKSxcbiAgICAgICAgZXhjbHVkZSA9IFwicGVyc3BlY3RpdmUsZm9yY2UzRCx0cmFuc2Zvcm1PcmlnaW4sc3ZnT3JpZ2luXCIsXG4gICAgICAgIHN0eWxlID0gdGFyZ2V0LnN0eWxlLFxuICAgICAgICBlbmRDYWNoZSxcbiAgICAgICAgcCxcbiAgICAgICAgc3RhcnRWYWx1ZSxcbiAgICAgICAgZW5kVmFsdWUsXG4gICAgICAgIHN0YXJ0TnVtLFxuICAgICAgICBlbmROdW0sXG4gICAgICAgIHN0YXJ0VW5pdCxcbiAgICAgICAgZW5kVW5pdDtcblxuICAgIGlmIChzdGFydENhY2hlLnN2Zykge1xuICAgICAgc3RhcnRWYWx1ZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIik7XG4gICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIFwiXCIpO1xuICAgICAgc3R5bGVbX3RyYW5zZm9ybVByb3BdID0gdHJhbnNmb3JtcztcbiAgICAgIGVuZENhY2hlID0gX3BhcnNlVHJhbnNmb3JtKHRhcmdldCwgMSk7XG5cbiAgICAgIF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIF90cmFuc2Zvcm1Qcm9wKTtcblxuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCBzdGFydFZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRWYWx1ZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KVtfdHJhbnNmb3JtUHJvcF07XG4gICAgICBzdHlsZVtfdHJhbnNmb3JtUHJvcF0gPSB0cmFuc2Zvcm1zO1xuICAgICAgZW5kQ2FjaGUgPSBfcGFyc2VUcmFuc2Zvcm0odGFyZ2V0LCAxKTtcbiAgICAgIHN0eWxlW190cmFuc2Zvcm1Qcm9wXSA9IHN0YXJ0VmFsdWU7XG4gICAgfVxuXG4gICAgZm9yIChwIGluIF90cmFuc2Zvcm1Qcm9wcykge1xuICAgICAgc3RhcnRWYWx1ZSA9IHN0YXJ0Q2FjaGVbcF07XG4gICAgICBlbmRWYWx1ZSA9IGVuZENhY2hlW3BdO1xuXG4gICAgICBpZiAoc3RhcnRWYWx1ZSAhPT0gZW5kVmFsdWUgJiYgZXhjbHVkZS5pbmRleE9mKHApIDwgMCkge1xuICAgICAgICBzdGFydFVuaXQgPSBnZXRVbml0KHN0YXJ0VmFsdWUpO1xuICAgICAgICBlbmRVbml0ID0gZ2V0VW5pdChlbmRWYWx1ZSk7XG4gICAgICAgIHN0YXJ0TnVtID0gc3RhcnRVbml0ICE9PSBlbmRVbml0ID8gX2NvbnZlcnRUb1VuaXQodGFyZ2V0LCBwLCBzdGFydFZhbHVlLCBlbmRVbml0KSA6IHBhcnNlRmxvYXQoc3RhcnRWYWx1ZSk7XG4gICAgICAgIGVuZE51bSA9IHBhcnNlRmxvYXQoZW5kVmFsdWUpO1xuICAgICAgICBwbHVnaW4uX3B0ID0gbmV3IFByb3BUd2VlbihwbHVnaW4uX3B0LCBlbmRDYWNoZSwgcCwgc3RhcnROdW0sIGVuZE51bSAtIHN0YXJ0TnVtLCBfcmVuZGVyQ1NTUHJvcCk7XG4gICAgICAgIHBsdWdpbi5fcHQudSA9IGVuZFVuaXQgfHwgMDtcblxuICAgICAgICBwbHVnaW4uX3Byb3BzLnB1c2gocCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2Fzc2lnbihlbmRDYWNoZSwgc3RhcnRDYWNoZSk7XG4gIH07XG5cbiAgX2ZvckVhY2hOYW1lKFwicGFkZGluZyxtYXJnaW4sV2lkdGgsUmFkaXVzXCIsIGZ1bmN0aW9uIChuYW1lLCBpbmRleCkge1xuICAgIHZhciB0ID0gXCJUb3BcIixcbiAgICAgICAgciA9IFwiUmlnaHRcIixcbiAgICAgICAgYiA9IFwiQm90dG9tXCIsXG4gICAgICAgIGwgPSBcIkxlZnRcIixcbiAgICAgICAgcHJvcHMgPSAoaW5kZXggPCAzID8gW3QsIHIsIGIsIGxdIDogW3QgKyBsLCB0ICsgciwgYiArIHIsIGIgKyBsXSkubWFwKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICByZXR1cm4gaW5kZXggPCAyID8gbmFtZSArIHNpZGUgOiBcImJvcmRlclwiICsgc2lkZSArIG5hbWU7XG4gICAgfSk7XG5cbiAgICBfc3BlY2lhbFByb3BzW2luZGV4ID4gMSA/IFwiYm9yZGVyXCIgKyBuYW1lIDogbmFtZV0gPSBmdW5jdGlvbiAocGx1Z2luLCB0YXJnZXQsIHByb3BlcnR5LCBlbmRWYWx1ZSwgdHdlZW4pIHtcbiAgICAgIHZhciBhLCB2YXJzO1xuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgYSA9IHByb3BzLm1hcChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgIHJldHVybiBfZ2V0KHBsdWdpbiwgcHJvcCwgcHJvcGVydHkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFycyA9IGEuam9pbihcIiBcIik7XG4gICAgICAgIHJldHVybiB2YXJzLnNwbGl0KGFbMF0pLmxlbmd0aCA9PT0gNSA/IGFbMF0gOiB2YXJzO1xuICAgICAgfVxuXG4gICAgICBhID0gKGVuZFZhbHVlICsgXCJcIikuc3BsaXQoXCIgXCIpO1xuICAgICAgdmFycyA9IHt9O1xuICAgICAgcHJvcHMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCwgaSkge1xuICAgICAgICByZXR1cm4gdmFyc1twcm9wXSA9IGFbaV0gPSBhW2ldIHx8IGFbKGkgLSAxKSAvIDIgfCAwXTtcbiAgICAgIH0pO1xuICAgICAgcGx1Z2luLmluaXQodGFyZ2V0LCB2YXJzLCB0d2Vlbik7XG4gICAgfTtcbiAgfSk7XG5cbiAgdmFyIENTU1BsdWdpbiA9IHtcbiAgICBuYW1lOiBcImNzc1wiLFxuICAgIHJlZ2lzdGVyOiBfaW5pdENvcmUsXG4gICAgdGFyZ2V0VGVzdDogZnVuY3Rpb24gdGFyZ2V0VGVzdCh0YXJnZXQpIHtcbiAgICAgIHJldHVybiB0YXJnZXQuc3R5bGUgJiYgdGFyZ2V0Lm5vZGVUeXBlO1xuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCh0YXJnZXQsIHZhcnMsIHR3ZWVuLCBpbmRleCwgdGFyZ2V0cykge1xuICAgICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHMsXG4gICAgICAgICAgc3R5bGUgPSB0YXJnZXQuc3R5bGUsXG4gICAgICAgICAgc3RhcnRBdCA9IHR3ZWVuLnZhcnMuc3RhcnRBdCxcbiAgICAgICAgICBzdGFydFZhbHVlLFxuICAgICAgICAgIGVuZFZhbHVlLFxuICAgICAgICAgIGVuZE51bSxcbiAgICAgICAgICBzdGFydE51bSxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHNwZWNpYWxQcm9wLFxuICAgICAgICAgIHAsXG4gICAgICAgICAgc3RhcnRVbml0LFxuICAgICAgICAgIGVuZFVuaXQsXG4gICAgICAgICAgcmVsYXRpdmUsXG4gICAgICAgICAgaXNUcmFuc2Zvcm1SZWxhdGVkLFxuICAgICAgICAgIHRyYW5zZm9ybVByb3BUd2VlbixcbiAgICAgICAgICBjYWNoZSxcbiAgICAgICAgICBzbW9vdGgsXG4gICAgICAgICAgaGFzUHJpb3JpdHksXG4gICAgICAgICAgaW5saW5lUHJvcHM7XG4gICAgICBfcGx1Z2luSW5pdHRlZCB8fCBfaW5pdENvcmUoKTtcbiAgICAgIHRoaXMuc3R5bGVzID0gdGhpcy5zdHlsZXMgfHwgX2dldFN0eWxlU2F2ZXIodGFyZ2V0KTtcbiAgICAgIGlubGluZVByb3BzID0gdGhpcy5zdHlsZXMucHJvcHM7XG4gICAgICB0aGlzLnR3ZWVuID0gdHdlZW47XG5cbiAgICAgIGZvciAocCBpbiB2YXJzKSB7XG4gICAgICAgIGlmIChwID09PSBcImF1dG9Sb3VuZFwiKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBlbmRWYWx1ZSA9IHZhcnNbcF07XG5cbiAgICAgICAgaWYgKF9wbHVnaW5zW3BdICYmIF9jaGVja1BsdWdpbihwLCB2YXJzLCB0d2VlbiwgaW5kZXgsIHRhcmdldCwgdGFyZ2V0cykpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHR5cGUgPSB0eXBlb2YgZW5kVmFsdWU7XG4gICAgICAgIHNwZWNpYWxQcm9wID0gX3NwZWNpYWxQcm9wc1twXTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgZW5kVmFsdWUgPSBlbmRWYWx1ZS5jYWxsKHR3ZWVuLCBpbmRleCwgdGFyZ2V0LCB0YXJnZXRzKTtcbiAgICAgICAgICB0eXBlID0gdHlwZW9mIGVuZFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUgPT09IFwic3RyaW5nXCIgJiYgfmVuZFZhbHVlLmluZGV4T2YoXCJyYW5kb20oXCIpKSB7XG4gICAgICAgICAgZW5kVmFsdWUgPSBfcmVwbGFjZVJhbmRvbShlbmRWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3BlY2lhbFByb3ApIHtcbiAgICAgICAgICBzcGVjaWFsUHJvcCh0aGlzLCB0YXJnZXQsIHAsIGVuZFZhbHVlLCB0d2VlbikgJiYgKGhhc1ByaW9yaXR5ID0gMSk7XG4gICAgICAgIH0gZWxzZSBpZiAocC5zdWJzdHIoMCwgMikgPT09IFwiLS1cIikge1xuICAgICAgICAgIHN0YXJ0VmFsdWUgPSAoZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmdldFByb3BlcnR5VmFsdWUocCkgKyBcIlwiKS50cmltKCk7XG4gICAgICAgICAgZW5kVmFsdWUgKz0gXCJcIjtcbiAgICAgICAgICBfY29sb3JFeHAubGFzdEluZGV4ID0gMDtcblxuICAgICAgICAgIGlmICghX2NvbG9yRXhwLnRlc3Qoc3RhcnRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHN0YXJ0VW5pdCA9IGdldFVuaXQoc3RhcnRWYWx1ZSk7XG4gICAgICAgICAgICBlbmRVbml0ID0gZ2V0VW5pdChlbmRWYWx1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZW5kVW5pdCA/IHN0YXJ0VW5pdCAhPT0gZW5kVW5pdCAmJiAoc3RhcnRWYWx1ZSA9IF9jb252ZXJ0VG9Vbml0KHRhcmdldCwgcCwgc3RhcnRWYWx1ZSwgZW5kVW5pdCkgKyBlbmRVbml0KSA6IHN0YXJ0VW5pdCAmJiAoZW5kVmFsdWUgKz0gc3RhcnRVbml0KTtcbiAgICAgICAgICB0aGlzLmFkZChzdHlsZSwgXCJzZXRQcm9wZXJ0eVwiLCBzdGFydFZhbHVlLCBlbmRWYWx1ZSwgaW5kZXgsIHRhcmdldHMsIDAsIDAsIHApO1xuICAgICAgICAgIHByb3BzLnB1c2gocCk7XG4gICAgICAgICAgaW5saW5lUHJvcHMucHVzaChwLCAwLCBzdHlsZVtwXSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGlmIChzdGFydEF0ICYmIHAgaW4gc3RhcnRBdCkge1xuICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHR5cGVvZiBzdGFydEF0W3BdID09PSBcImZ1bmN0aW9uXCIgPyBzdGFydEF0W3BdLmNhbGwodHdlZW4sIGluZGV4LCB0YXJnZXQsIHRhcmdldHMpIDogc3RhcnRBdFtwXTtcbiAgICAgICAgICAgIF9pc1N0cmluZyhzdGFydFZhbHVlKSAmJiB+c3RhcnRWYWx1ZS5pbmRleE9mKFwicmFuZG9tKFwiKSAmJiAoc3RhcnRWYWx1ZSA9IF9yZXBsYWNlUmFuZG9tKHN0YXJ0VmFsdWUpKTtcbiAgICAgICAgICAgIGdldFVuaXQoc3RhcnRWYWx1ZSArIFwiXCIpIHx8IHN0YXJ0VmFsdWUgPT09IFwiYXV0b1wiIHx8IChzdGFydFZhbHVlICs9IF9jb25maWcudW5pdHNbcF0gfHwgZ2V0VW5pdChfZ2V0KHRhcmdldCwgcCkpIHx8IFwiXCIpO1xuICAgICAgICAgICAgKHN0YXJ0VmFsdWUgKyBcIlwiKS5jaGFyQXQoMSkgPT09IFwiPVwiICYmIChzdGFydFZhbHVlID0gX2dldCh0YXJnZXQsIHApKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IF9nZXQodGFyZ2V0LCBwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdGFydE51bSA9IHBhcnNlRmxvYXQoc3RhcnRWYWx1ZSk7XG4gICAgICAgICAgcmVsYXRpdmUgPSB0eXBlID09PSBcInN0cmluZ1wiICYmIGVuZFZhbHVlLmNoYXJBdCgxKSA9PT0gXCI9XCIgJiYgZW5kVmFsdWUuc3Vic3RyKDAsIDIpO1xuICAgICAgICAgIHJlbGF0aXZlICYmIChlbmRWYWx1ZSA9IGVuZFZhbHVlLnN1YnN0cigyKSk7XG4gICAgICAgICAgZW5kTnVtID0gcGFyc2VGbG9hdChlbmRWYWx1ZSk7XG5cbiAgICAgICAgICBpZiAocCBpbiBfcHJvcGVydHlBbGlhc2VzKSB7XG4gICAgICAgICAgICBpZiAocCA9PT0gXCJhdXRvQWxwaGFcIikge1xuICAgICAgICAgICAgICBpZiAoc3RhcnROdW0gPT09IDEgJiYgX2dldCh0YXJnZXQsIFwidmlzaWJpbGl0eVwiKSA9PT0gXCJoaWRkZW5cIiAmJiBlbmROdW0pIHtcbiAgICAgICAgICAgICAgICBzdGFydE51bSA9IDA7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpbmxpbmVQcm9wcy5wdXNoKFwidmlzaWJpbGl0eVwiLCAwLCBzdHlsZS52aXNpYmlsaXR5KTtcblxuICAgICAgICAgICAgICBfYWRkTm9uVHdlZW5pbmdQVCh0aGlzLCBzdHlsZSwgXCJ2aXNpYmlsaXR5XCIsIHN0YXJ0TnVtID8gXCJpbmhlcml0XCIgOiBcImhpZGRlblwiLCBlbmROdW0gPyBcImluaGVyaXRcIiA6IFwiaGlkZGVuXCIsICFlbmROdW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocCAhPT0gXCJzY2FsZVwiICYmIHAgIT09IFwidHJhbnNmb3JtXCIpIHtcbiAgICAgICAgICAgICAgcCA9IF9wcm9wZXJ0eUFsaWFzZXNbcF07XG4gICAgICAgICAgICAgIH5wLmluZGV4T2YoXCIsXCIpICYmIChwID0gcC5zcGxpdChcIixcIilbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlzVHJhbnNmb3JtUmVsYXRlZCA9IHAgaW4gX3RyYW5zZm9ybVByb3BzO1xuXG4gICAgICAgICAgaWYgKGlzVHJhbnNmb3JtUmVsYXRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZXMuc2F2ZShwKTtcblxuICAgICAgICAgICAgaWYgKCF0cmFuc2Zvcm1Qcm9wVHdlZW4pIHtcbiAgICAgICAgICAgICAgY2FjaGUgPSB0YXJnZXQuX2dzYXA7XG4gICAgICAgICAgICAgIGNhY2hlLnJlbmRlclRyYW5zZm9ybSAmJiAhdmFycy5wYXJzZVRyYW5zZm9ybSB8fCBfcGFyc2VUcmFuc2Zvcm0odGFyZ2V0LCB2YXJzLnBhcnNlVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgc21vb3RoID0gdmFycy5zbW9vdGhPcmlnaW4gIT09IGZhbHNlICYmIGNhY2hlLnNtb290aDtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUHJvcFR3ZWVuID0gdGhpcy5fcHQgPSBuZXcgUHJvcFR3ZWVuKHRoaXMuX3B0LCBzdHlsZSwgX3RyYW5zZm9ybVByb3AsIDAsIDEsIGNhY2hlLnJlbmRlclRyYW5zZm9ybSwgY2FjaGUsIDAsIC0xKTtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUHJvcFR3ZWVuLmRlcCA9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwID09PSBcInNjYWxlXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHQgPSBuZXcgUHJvcFR3ZWVuKHRoaXMuX3B0LCBjYWNoZSwgXCJzY2FsZVlcIiwgY2FjaGUuc2NhbGVZLCAocmVsYXRpdmUgPyBfcGFyc2VSZWxhdGl2ZShjYWNoZS5zY2FsZVksIHJlbGF0aXZlICsgZW5kTnVtKSA6IGVuZE51bSkgLSBjYWNoZS5zY2FsZVkgfHwgMCwgX3JlbmRlckNTU1Byb3ApO1xuICAgICAgICAgICAgICB0aGlzLl9wdC51ID0gMDtcbiAgICAgICAgICAgICAgcHJvcHMucHVzaChcInNjYWxlWVwiLCBwKTtcbiAgICAgICAgICAgICAgcCArPSBcIlhcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocCA9PT0gXCJ0cmFuc2Zvcm1PcmlnaW5cIikge1xuICAgICAgICAgICAgICBpbmxpbmVQcm9wcy5wdXNoKF90cmFuc2Zvcm1PcmlnaW5Qcm9wLCAwLCBzdHlsZVtfdHJhbnNmb3JtT3JpZ2luUHJvcF0pO1xuICAgICAgICAgICAgICBlbmRWYWx1ZSA9IF9jb252ZXJ0S2V5d29yZHNUb1BlcmNlbnRhZ2VzKGVuZFZhbHVlKTtcblxuICAgICAgICAgICAgICBpZiAoY2FjaGUuc3ZnKSB7XG4gICAgICAgICAgICAgICAgX2FwcGx5U1ZHT3JpZ2luKHRhcmdldCwgZW5kVmFsdWUsIDAsIHNtb290aCwgMCwgdGhpcyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5kVW5pdCA9IHBhcnNlRmxvYXQoZW5kVmFsdWUuc3BsaXQoXCIgXCIpWzJdKSB8fCAwO1xuICAgICAgICAgICAgICAgIGVuZFVuaXQgIT09IGNhY2hlLnpPcmlnaW4gJiYgX2FkZE5vblR3ZWVuaW5nUFQodGhpcywgY2FjaGUsIFwiek9yaWdpblwiLCBjYWNoZS56T3JpZ2luLCBlbmRVbml0KTtcblxuICAgICAgICAgICAgICAgIF9hZGROb25Ud2VlbmluZ1BUKHRoaXMsIHN0eWxlLCBwLCBfZmlyc3RUd29Pbmx5KHN0YXJ0VmFsdWUpLCBfZmlyc3RUd29Pbmx5KGVuZFZhbHVlKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocCA9PT0gXCJzdmdPcmlnaW5cIikge1xuICAgICAgICAgICAgICBfYXBwbHlTVkdPcmlnaW4odGFyZ2V0LCBlbmRWYWx1ZSwgMSwgc21vb3RoLCAwLCB0aGlzKTtcblxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocCBpbiBfcm90YXRpb25hbFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgX2FkZFJvdGF0aW9uYWxQcm9wVHdlZW4odGhpcywgY2FjaGUsIHAsIHN0YXJ0TnVtLCByZWxhdGl2ZSA/IF9wYXJzZVJlbGF0aXZlKHN0YXJ0TnVtLCByZWxhdGl2ZSArIGVuZFZhbHVlKSA6IGVuZFZhbHVlKTtcblxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocCA9PT0gXCJzbW9vdGhPcmlnaW5cIikge1xuICAgICAgICAgICAgICBfYWRkTm9uVHdlZW5pbmdQVCh0aGlzLCBjYWNoZSwgXCJzbW9vdGhcIiwgY2FjaGUuc21vb3RoLCBlbmRWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHAgPT09IFwiZm9yY2UzRFwiKSB7XG4gICAgICAgICAgICAgIGNhY2hlW3BdID0gZW5kVmFsdWU7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICAgIF9hZGRSYXdUcmFuc2Zvcm1QVHModGhpcywgZW5kVmFsdWUsIHRhcmdldCk7XG5cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICghKHAgaW4gc3R5bGUpKSB7XG4gICAgICAgICAgICBwID0gX2NoZWNrUHJvcFByZWZpeChwKSB8fCBwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc1RyYW5zZm9ybVJlbGF0ZWQgfHwgKGVuZE51bSB8fCBlbmROdW0gPT09IDApICYmIChzdGFydE51bSB8fCBzdGFydE51bSA9PT0gMCkgJiYgIV9jb21wbGV4RXhwLnRlc3QoZW5kVmFsdWUpICYmIHAgaW4gc3R5bGUpIHtcbiAgICAgICAgICAgIHN0YXJ0VW5pdCA9IChzdGFydFZhbHVlICsgXCJcIikuc3Vic3RyKChzdGFydE51bSArIFwiXCIpLmxlbmd0aCk7XG4gICAgICAgICAgICBlbmROdW0gfHwgKGVuZE51bSA9IDApO1xuICAgICAgICAgICAgZW5kVW5pdCA9IGdldFVuaXQoZW5kVmFsdWUpIHx8IChwIGluIF9jb25maWcudW5pdHMgPyBfY29uZmlnLnVuaXRzW3BdIDogc3RhcnRVbml0KTtcbiAgICAgICAgICAgIHN0YXJ0VW5pdCAhPT0gZW5kVW5pdCAmJiAoc3RhcnROdW0gPSBfY29udmVydFRvVW5pdCh0YXJnZXQsIHAsIHN0YXJ0VmFsdWUsIGVuZFVuaXQpKTtcbiAgICAgICAgICAgIHRoaXMuX3B0ID0gbmV3IFByb3BUd2Vlbih0aGlzLl9wdCwgaXNUcmFuc2Zvcm1SZWxhdGVkID8gY2FjaGUgOiBzdHlsZSwgcCwgc3RhcnROdW0sIChyZWxhdGl2ZSA/IF9wYXJzZVJlbGF0aXZlKHN0YXJ0TnVtLCByZWxhdGl2ZSArIGVuZE51bSkgOiBlbmROdW0pIC0gc3RhcnROdW0sICFpc1RyYW5zZm9ybVJlbGF0ZWQgJiYgKGVuZFVuaXQgPT09IFwicHhcIiB8fCBwID09PSBcInpJbmRleFwiKSAmJiB2YXJzLmF1dG9Sb3VuZCAhPT0gZmFsc2UgPyBfcmVuZGVyUm91bmRlZENTU1Byb3AgOiBfcmVuZGVyQ1NTUHJvcCk7XG4gICAgICAgICAgICB0aGlzLl9wdC51ID0gZW5kVW5pdCB8fCAwO1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRVbml0ICE9PSBlbmRVbml0ICYmIGVuZFVuaXQgIT09IFwiJVwiKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3B0LmIgPSBzdGFydFZhbHVlO1xuICAgICAgICAgICAgICB0aGlzLl9wdC5yID0gX3JlbmRlckNTU1Byb3BXaXRoQmVnaW5uaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoIShwIGluIHN0eWxlKSkge1xuICAgICAgICAgICAgaWYgKHAgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRoaXMuYWRkKHRhcmdldCwgcCwgc3RhcnRWYWx1ZSB8fCB0YXJnZXRbcF0sIHJlbGF0aXZlID8gcmVsYXRpdmUgKyBlbmRWYWx1ZSA6IGVuZFZhbHVlLCBpbmRleCwgdGFyZ2V0cyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHAgIT09IFwicGFyc2VUcmFuc2Zvcm1cIikge1xuICAgICAgICAgICAgICBfbWlzc2luZ1BsdWdpbihwLCBlbmRWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90d2VlbkNvbXBsZXhDU1NTdHJpbmcuY2FsbCh0aGlzLCB0YXJnZXQsIHAsIHN0YXJ0VmFsdWUsIHJlbGF0aXZlID8gcmVsYXRpdmUgKyBlbmRWYWx1ZSA6IGVuZFZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpc1RyYW5zZm9ybVJlbGF0ZWQgfHwgKHAgaW4gc3R5bGUgPyBpbmxpbmVQcm9wcy5wdXNoKHAsIDAsIHN0eWxlW3BdKSA6IGlubGluZVByb3BzLnB1c2gocCwgMSwgc3RhcnRWYWx1ZSB8fCB0YXJnZXRbcF0pKTtcbiAgICAgICAgICBwcm9wcy5wdXNoKHApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGhhc1ByaW9yaXR5ICYmIF9zb3J0UHJvcFR3ZWVuc0J5UHJpb3JpdHkodGhpcyk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyYXRpbywgZGF0YSkge1xuICAgICAgaWYgKGRhdGEudHdlZW4uX3RpbWUgfHwgIV9yZXZlcnRpbmckMSgpKSB7XG4gICAgICAgIHZhciBwdCA9IGRhdGEuX3B0O1xuXG4gICAgICAgIHdoaWxlIChwdCkge1xuICAgICAgICAgIHB0LnIocmF0aW8sIHB0LmQpO1xuICAgICAgICAgIHB0ID0gcHQuX25leHQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEuc3R5bGVzLnJldmVydCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0OiBfZ2V0LFxuICAgIGFsaWFzZXM6IF9wcm9wZXJ0eUFsaWFzZXMsXG4gICAgZ2V0U2V0dGVyOiBmdW5jdGlvbiBnZXRTZXR0ZXIodGFyZ2V0LCBwcm9wZXJ0eSwgcGx1Z2luKSB7XG4gICAgICB2YXIgcCA9IF9wcm9wZXJ0eUFsaWFzZXNbcHJvcGVydHldO1xuICAgICAgcCAmJiBwLmluZGV4T2YoXCIsXCIpIDwgMCAmJiAocHJvcGVydHkgPSBwKTtcbiAgICAgIHJldHVybiBwcm9wZXJ0eSBpbiBfdHJhbnNmb3JtUHJvcHMgJiYgcHJvcGVydHkgIT09IF90cmFuc2Zvcm1PcmlnaW5Qcm9wICYmICh0YXJnZXQuX2dzYXAueCB8fCBfZ2V0KHRhcmdldCwgXCJ4XCIpKSA/IHBsdWdpbiAmJiBfcmVjZW50U2V0dGVyUGx1Z2luID09PSBwbHVnaW4gPyBwcm9wZXJ0eSA9PT0gXCJzY2FsZVwiID8gX3NldHRlclNjYWxlIDogX3NldHRlclRyYW5zZm9ybSA6IChfcmVjZW50U2V0dGVyUGx1Z2luID0gcGx1Z2luIHx8IHt9KSAmJiAocHJvcGVydHkgPT09IFwic2NhbGVcIiA/IF9zZXR0ZXJTY2FsZVdpdGhSZW5kZXIgOiBfc2V0dGVyVHJhbnNmb3JtV2l0aFJlbmRlcikgOiB0YXJnZXQuc3R5bGUgJiYgIV9pc1VuZGVmaW5lZCh0YXJnZXQuc3R5bGVbcHJvcGVydHldKSA/IF9zZXR0ZXJDU1NTdHlsZSA6IH5wcm9wZXJ0eS5pbmRleE9mKFwiLVwiKSA/IF9zZXR0ZXJDU1NQcm9wIDogX2dldFNldHRlcih0YXJnZXQsIHByb3BlcnR5KTtcbiAgICB9LFxuICAgIGNvcmU6IHtcbiAgICAgIF9yZW1vdmVQcm9wZXJ0eTogX3JlbW92ZVByb3BlcnR5LFxuICAgICAgX2dldE1hdHJpeDogX2dldE1hdHJpeFxuICAgIH1cbiAgfTtcbiAgZ3NhcC51dGlscy5jaGVja1ByZWZpeCA9IF9jaGVja1Byb3BQcmVmaXg7XG4gIGdzYXAuY29yZS5nZXRTdHlsZVNhdmVyID0gX2dldFN0eWxlU2F2ZXI7XG5cbiAgKGZ1bmN0aW9uIChwb3NpdGlvbkFuZFNjYWxlLCByb3RhdGlvbiwgb3RoZXJzLCBhbGlhc2VzKSB7XG4gICAgdmFyIGFsbCA9IF9mb3JFYWNoTmFtZShwb3NpdGlvbkFuZFNjYWxlICsgXCIsXCIgKyByb3RhdGlvbiArIFwiLFwiICsgb3RoZXJzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgX3RyYW5zZm9ybVByb3BzW25hbWVdID0gMTtcbiAgICB9KTtcblxuICAgIF9mb3JFYWNoTmFtZShyb3RhdGlvbiwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIF9jb25maWcudW5pdHNbbmFtZV0gPSBcImRlZ1wiO1xuICAgICAgX3JvdGF0aW9uYWxQcm9wZXJ0aWVzW25hbWVdID0gMTtcbiAgICB9KTtcblxuICAgIF9wcm9wZXJ0eUFsaWFzZXNbYWxsWzEzXV0gPSBwb3NpdGlvbkFuZFNjYWxlICsgXCIsXCIgKyByb3RhdGlvbjtcblxuICAgIF9mb3JFYWNoTmFtZShhbGlhc2VzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIHNwbGl0ID0gbmFtZS5zcGxpdChcIjpcIik7XG4gICAgICBfcHJvcGVydHlBbGlhc2VzW3NwbGl0WzFdXSA9IGFsbFtzcGxpdFswXV07XG4gICAgfSk7XG4gIH0pKFwieCx5LHosc2NhbGUsc2NhbGVYLHNjYWxlWSx4UGVyY2VudCx5UGVyY2VudFwiLCBcInJvdGF0aW9uLHJvdGF0aW9uWCxyb3RhdGlvblksc2tld1gsc2tld1lcIiwgXCJ0cmFuc2Zvcm0sdHJhbnNmb3JtT3JpZ2luLHN2Z09yaWdpbixmb3JjZTNELHNtb290aE9yaWdpbix0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiLCBcIjA6dHJhbnNsYXRlWCwxOnRyYW5zbGF0ZVksMjp0cmFuc2xhdGVaLDg6cm90YXRlLDg6cm90YXRpb25aLDg6cm90YXRlWiw5OnJvdGF0ZVgsMTA6cm90YXRlWVwiKTtcblxuICBfZm9yRWFjaE5hbWUoXCJ4LHkseix0b3AscmlnaHQsYm90dG9tLGxlZnQsd2lkdGgsaGVpZ2h0LGZvbnRTaXplLHBhZGRpbmcsbWFyZ2luLHBlcnNwZWN0aXZlXCIsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgX2NvbmZpZy51bml0c1tuYW1lXSA9IFwicHhcIjtcbiAgfSk7XG5cbiAgZ3NhcC5yZWdpc3RlclBsdWdpbihDU1NQbHVnaW4pO1xuXG4gIHZhciBnc2FwV2l0aENTUyA9IGdzYXAucmVnaXN0ZXJQbHVnaW4oQ1NTUGx1Z2luKSB8fCBnc2FwLFxuICAgICAgVHdlZW5NYXhXaXRoQ1NTID0gZ3NhcFdpdGhDU1MuY29yZS5Ud2VlbjtcblxuICBleHBvcnRzLkJhY2sgPSBCYWNrO1xuICBleHBvcnRzLkJvdW5jZSA9IEJvdW5jZTtcbiAgZXhwb3J0cy5DU1NQbHVnaW4gPSBDU1NQbHVnaW47XG4gIGV4cG9ydHMuQ2lyYyA9IENpcmM7XG4gIGV4cG9ydHMuQ3ViaWMgPSBDdWJpYztcbiAgZXhwb3J0cy5FbGFzdGljID0gRWxhc3RpYztcbiAgZXhwb3J0cy5FeHBvID0gRXhwbztcbiAgZXhwb3J0cy5MaW5lYXIgPSBMaW5lYXI7XG4gIGV4cG9ydHMuUG93ZXIwID0gUG93ZXIwO1xuICBleHBvcnRzLlBvd2VyMSA9IFBvd2VyMTtcbiAgZXhwb3J0cy5Qb3dlcjIgPSBQb3dlcjI7XG4gIGV4cG9ydHMuUG93ZXIzID0gUG93ZXIzO1xuICBleHBvcnRzLlBvd2VyNCA9IFBvd2VyNDtcbiAgZXhwb3J0cy5RdWFkID0gUXVhZDtcbiAgZXhwb3J0cy5RdWFydCA9IFF1YXJ0O1xuICBleHBvcnRzLlF1aW50ID0gUXVpbnQ7XG4gIGV4cG9ydHMuU2luZSA9IFNpbmU7XG4gIGV4cG9ydHMuU3RlcHBlZEVhc2UgPSBTdGVwcGVkRWFzZTtcbiAgZXhwb3J0cy5TdHJvbmcgPSBTdHJvbmc7XG4gIGV4cG9ydHMuVGltZWxpbmVMaXRlID0gVGltZWxpbmU7XG4gIGV4cG9ydHMuVGltZWxpbmVNYXggPSBUaW1lbGluZTtcbiAgZXhwb3J0cy5Ud2VlbkxpdGUgPSBUd2VlbjtcbiAgZXhwb3J0cy5Ud2Vlbk1heCA9IFR3ZWVuTWF4V2l0aENTUztcbiAgZXhwb3J0cy5kZWZhdWx0ID0gZ3NhcFdpdGhDU1M7XG4gIGV4cG9ydHMuZ3NhcCA9IGdzYXBXaXRoQ1NTO1xuXG4gIGlmICh0eXBlb2Yod2luZG93KSA9PT0gJ3VuZGVmaW5lZCcgfHwgd2luZG93ICE9PSBleHBvcnRzKSB7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTt9IGVsc2Uge2RlbGV0ZSB3aW5kb3cuZGVmYXVsdDt9XG5cbn0pKSk7XG4iLCIvKiBNYXBib3ggR0wgSlMgaXMgQ29weXJpZ2h0IMKpIDIwMjAgTWFwYm94IGFuZCBzdWJqZWN0IHRvIHRoZSBNYXBib3ggVGVybXMgb2YgU2VydmljZSAoKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbGVnYWwvdG9zLykuICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xudHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxudHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbihnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5tYXBib3hnbCA9IGZhY3RvcnkoKSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5cbnZhciBzaGFyZWQsIHdvcmtlciwgbWFwYm94Z2w7XG4vLyBkZWZpbmUgZ2V0cyBjYWxsZWQgdGhyZWUgdGltZXM6IG9uZSBmb3IgZWFjaCBjaHVuay4gd2UgcmVseSBvbiB0aGUgb3JkZXJcbi8vIHRoZXkncmUgaW1wb3J0ZWQgdG8ga25vdyB3aGljaCBpcyB3aGljaFxuZnVuY3Rpb24gZGVmaW5lKF8sIGNodW5rKSB7XG5pZiAoIXNoYXJlZCkge1xuICAgIHNoYXJlZCA9IGNodW5rO1xufSBlbHNlIGlmICghd29ya2VyKSB7XG4gICAgd29ya2VyID0gY2h1bms7XG59IGVsc2Uge1xuICAgIHZhciB3b3JrZXJCdW5kbGVTdHJpbmcgPSBcInNlbGYub25lcnJvciA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmVycm9yKCdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBwYXJzaW5nIHRoZSBXZWJXb3JrZXIgYnVuZGxlLiBUaGlzIGlzIG1vc3QgbGlrZWx5IGR1ZSB0byBpbXByb3BlciB0cmFuc3BpbGF0aW9uIGJ5IEJhYmVsOyBwbGVhc2Ugc2VlIGh0dHBzOi8vZG9jcy5tYXBib3guY29tL21hcGJveC1nbC1qcy9ndWlkZXMvaW5zdGFsbC8jdHJhbnNwaWxpbmcnKTsgfTsgdmFyIHNoYXJlZENodW5rID0ge307IChcIiArIHNoYXJlZCArIFwiKShzaGFyZWRDaHVuayk7IChcIiArIHdvcmtlciArIFwiKShzaGFyZWRDaHVuayk7IHNlbGYub25lcnJvciA9IG51bGw7XCJcblxuICAgIHZhciBzaGFyZWRDaHVuayA9IHt9O1xuICAgIHNoYXJlZChzaGFyZWRDaHVuayk7XG4gICAgbWFwYm94Z2wgPSBjaHVuayhzaGFyZWRDaHVuayk7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdyAmJiB3aW5kb3cuVVJMICYmIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKSB7XG4gICAgICAgIG1hcGJveGdsLndvcmtlclVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFt3b3JrZXJCdW5kbGVTdHJpbmddLCB7IHR5cGU6ICd0ZXh0L2phdmFzY3JpcHQnIH0pKTtcbiAgICB9XG59XG59XG5cblxuZGVmaW5lKFtcImV4cG9ydHNcIl0sKGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6e30scj1cIjIuMTUuMFwiO2xldCBuO2NvbnN0IGk9e0FQSV9VUkw6XCJodHRwczovL2FwaS5tYXBib3guY29tXCIsZ2V0IEFQSV9VUkxfUkVHRVgoKXtpZihudWxsPT1uKXtjb25zdCB0PS9eKChodHRwcz86KT9cXC9cXC8pPyhbXlxcL10rXFwuKT9tYXBib3hcXC5jKG58b20pKFxcL3xcXD98JCkvaTt0cnl7bj1udWxsIT1wcm9jZXNzLmVudi5BUElfVVJMX1JFR0VYP25ldyBSZWdFeHAocHJvY2Vzcy5lbnYuQVBJX1VSTF9SRUdFWCk6dDt9Y2F0Y2goZSl7bj10O319cmV0dXJuIG59LGdldCBBUElfVElMRUpTT05fUkVHRVgoKXtyZXR1cm4gL14oKGh0dHBzPzopP1xcL1xcLyk/KFteXFwvXStcXC4pP21hcGJveFxcLmMobnxvbSkoXFwvdlswLTldKlxcLy4qXFwuanNvbi4qJCkvaX0sZ2V0IEFQSV9TUFJJVEVfUkVHRVgoKXtyZXR1cm4gL14oKGh0dHBzPzopP1xcL1xcLyk/KFteXFwvXStcXC4pP21hcGJveFxcLmMobnxvbSkoXFwvc3R5bGVzXFwvdlswLTldKlxcLykoLipcXC9zcHJpdGUuKlxcLi4qJCkvaX0sZ2V0IEFQSV9GT05UU19SRUdFWCgpe3JldHVybiAvXigoaHR0cHM/Oik/XFwvXFwvKT8oW15cXC9dK1xcLik/bWFwYm94XFwuYyhufG9tKShcXC9mb250c1xcL3ZbMC05XSpcXC8pKC4qXFwucGJmLiokKS9pfSxnZXQgQVBJX1NUWUxFX1JFR0VYKCl7cmV0dXJuIC9eKChodHRwcz86KT9cXC9cXC8pPyhbXlxcL10rXFwuKT9tYXBib3hcXC5jKG58b20pKFxcL3N0eWxlc1xcL3ZbMC05XSpcXC8pKC4qJCkvaX0sZ2V0IEFQSV9DRE5fVVJMX1JFR0VYKCl7cmV0dXJuIC9eKChodHRwcz86KT9cXC9cXC8pP2FwaVxcLm1hcGJveFxcLmMobnxvbSkoXFwvbWFwYm94LWdsLWpzXFwvKSguKiQpL2l9LGdldCBFVkVOVFNfVVJMKCl7aWYoIWkuQVBJX1VSTClyZXR1cm4gbnVsbDt0cnl7Y29uc3QgdD1uZXcgVVJMKGkuQVBJX1VSTCk7cmV0dXJuIFwiYXBpLm1hcGJveC5jblwiPT09dC5ob3N0bmFtZT9cImh0dHBzOi8vZXZlbnRzLm1hcGJveC5jbi9ldmVudHMvdjJcIjpcImFwaS5tYXBib3guY29tXCI9PT10Lmhvc3RuYW1lP1wiaHR0cHM6Ly9ldmVudHMubWFwYm94LmNvbS9ldmVudHMvdjJcIjpudWxsfWNhdGNoKHQpe3JldHVybiBudWxsfX0sU0VTU0lPTl9QQVRIOlwiL21hcC1zZXNzaW9ucy92MVwiLEZFRURCQUNLX1VSTDpcImh0dHBzOi8vYXBwcy5tYXBib3guY29tL2ZlZWRiYWNrXCIsVElMRV9VUkxfVkVSU0lPTjpcInY0XCIsUkFTVEVSX1VSTF9QUkVGSVg6XCJyYXN0ZXIvdjFcIixSRVFVSVJFX0FDQ0VTU19UT0tFTjohMCxBQ0NFU1NfVE9LRU46bnVsbCxNQVhfUEFSQUxMRUxfSU1BR0VfUkVRVUVTVFM6MTZ9LHM9e3N1cHBvcnRlZDohMSx0ZXN0U3VwcG9ydDpmdW5jdGlvbih0KXshbCYmbyYmKHU/Yyh0KTphPXQpO319O2xldCBhLG8sbD0hMSx1PSExO2Z1bmN0aW9uIGModCl7Y29uc3QgZT10LmNyZWF0ZVRleHR1cmUoKTt0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxlKTt0cnl7aWYodC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLHQuUkdCQSx0LlJHQkEsdC5VTlNJR05FRF9CWVRFLG8pLHQuaXNDb250ZXh0TG9zdCgpKXJldHVybjtzLnN1cHBvcnRlZD0hMDt9Y2F0Y2godCl7fXQuZGVsZXRlVGV4dHVyZShlKSxsPSEwO31lLmRvY3VtZW50JiYobz1lLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksby5vbmxvYWQ9ZnVuY3Rpb24oKXthJiZjKGEpLGE9bnVsbCx1PSEwO30sby5vbmVycm9yPWZ1bmN0aW9uKCl7bD0hMCxhPW51bGw7fSxvLnNyYz1cImRhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1JoNEFBQUJYUlVKUVZsQTRUQkVBQUFBdkFRQUFBQWZRLy83M3YvK0JpT2gvQUFBPVwiKTtjb25zdCBoPVwiMDFcIjtmdW5jdGlvbiBwKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LFwiZGVmYXVsdFwiKT90LmRlZmF1bHQ6dH12YXIgZD1mO2Z1bmN0aW9uIGYodCxlLHIsbil7dGhpcy5jeD0zKnQsdGhpcy5ieD0zKihyLXQpLXRoaXMuY3gsdGhpcy5heD0xLXRoaXMuY3gtdGhpcy5ieCx0aGlzLmN5PTMqZSx0aGlzLmJ5PTMqKG4tZSktdGhpcy5jeSx0aGlzLmF5PTEtdGhpcy5jeS10aGlzLmJ5LHRoaXMucDF4PXQsdGhpcy5wMXk9ZSx0aGlzLnAyeD1yLHRoaXMucDJ5PW47fWYucHJvdG90eXBlPXtzYW1wbGVDdXJ2ZVg6ZnVuY3Rpb24odCl7cmV0dXJuICgodGhpcy5heCp0K3RoaXMuYngpKnQrdGhpcy5jeCkqdH0sc2FtcGxlQ3VydmVZOmZ1bmN0aW9uKHQpe3JldHVybiAoKHRoaXMuYXkqdCt0aGlzLmJ5KSp0K3RoaXMuY3kpKnR9LHNhbXBsZUN1cnZlRGVyaXZhdGl2ZVg6ZnVuY3Rpb24odCl7cmV0dXJuICgzKnRoaXMuYXgqdCsyKnRoaXMuYngpKnQrdGhpcy5jeH0sc29sdmVDdXJ2ZVg6ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0xZS02KSx0PDApcmV0dXJuIDA7aWYodD4xKXJldHVybiAxO2Zvcih2YXIgcj10LG49MDtuPDg7bisrKXt2YXIgaT10aGlzLnNhbXBsZUN1cnZlWChyKS10O2lmKE1hdGguYWJzKGkpPGUpcmV0dXJuIHI7dmFyIHM9dGhpcy5zYW1wbGVDdXJ2ZURlcml2YXRpdmVYKHIpO2lmKE1hdGguYWJzKHMpPDFlLTYpYnJlYWs7ci09aS9zO312YXIgYT0wLG89MTtmb3Iocj10LG49MDtuPDIwJiYoaT10aGlzLnNhbXBsZUN1cnZlWChyKSwhKE1hdGguYWJzKGktdCk8ZSkpO24rKyl0Pmk/YT1yOm89cixyPS41KihvLWEpK2E7cmV0dXJuIHJ9LHNvbHZlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc2FtcGxlQ3VydmVZKHRoaXMuc29sdmVDdXJ2ZVgodCxlKSl9fTt2YXIgeT1wKGQpLG09ZztmdW5jdGlvbiBnKHQsZSl7dGhpcy54PXQsdGhpcy55PWU7fWcucHJvdG90eXBlPXtjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgZyh0aGlzLngsdGhpcy55KX0sYWRkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX2FkZCh0KX0sc3ViOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX3N1Yih0KX0sbXVsdEJ5UG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fbXVsdEJ5UG9pbnQodCl9LGRpdkJ5UG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fZGl2QnlQb2ludCh0KX0sbXVsdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9tdWx0KHQpfSxkaXY6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fZGl2KHQpfSxyb3RhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fcm90YXRlKHQpfSxyb3RhdGVBcm91bmQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9yb3RhdGVBcm91bmQodCxlKX0sbWF0TXVsdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9tYXRNdWx0KHQpfSx1bml0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fdW5pdCgpfSxwZXJwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fcGVycCgpfSxyb3VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkuX3JvdW5kKCl9LG1hZzpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX0sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9PT10LngmJnRoaXMueT09PXQueX0sZGlzdDpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdFNxcih0KSl9LGRpc3RTcXI6ZnVuY3Rpb24odCl7dmFyIGU9dC54LXRoaXMueCxyPXQueS10aGlzLnk7cmV0dXJuIGUqZStyKnJ9LGFuZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYXRhbjIodGhpcy55LHRoaXMueCl9LGFuZ2xlVG86ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguYXRhbjIodGhpcy55LXQueSx0aGlzLngtdC54KX0sYW5nbGVXaXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFuZ2xlV2l0aFNlcCh0LngsdC55KX0sYW5nbGVXaXRoU2VwOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguYXRhbjIodGhpcy54KmUtdGhpcy55KnQsdGhpcy54KnQrdGhpcy55KmUpfSxfbWF0TXVsdDpmdW5jdGlvbih0KXt2YXIgZT10WzJdKnRoaXMueCt0WzNdKnRoaXMueTtyZXR1cm4gdGhpcy54PXRbMF0qdGhpcy54K3RbMV0qdGhpcy55LHRoaXMueT1lLHRoaXN9LF9hZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXN9LF9zdWI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueC09dC54LHRoaXMueS09dC55LHRoaXN9LF9tdWx0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqPXQsdGhpcy55Kj10LHRoaXN9LF9kaXY6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueC89dCx0aGlzLnkvPXQsdGhpc30sX211bHRCeVBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqPXQueCx0aGlzLnkqPXQueSx0aGlzfSxfZGl2QnlQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Lz10LngsdGhpcy55Lz10LnksdGhpc30sX3VuaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGl2KHRoaXMubWFnKCkpLHRoaXN9LF9wZXJwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy55O3JldHVybiB0aGlzLnk9dGhpcy54LHRoaXMueD0tdCx0aGlzfSxfcm90YXRlOmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguY29zKHQpLHI9TWF0aC5zaW4odCksbj1yKnRoaXMueCtlKnRoaXMueTtyZXR1cm4gdGhpcy54PWUqdGhpcy54LXIqdGhpcy55LHRoaXMueT1uLHRoaXN9LF9yb3RhdGVBcm91bmQ6ZnVuY3Rpb24odCxlKXt2YXIgcj1NYXRoLmNvcyh0KSxuPU1hdGguc2luKHQpLGk9ZS55K24qKHRoaXMueC1lLngpK3IqKHRoaXMueS1lLnkpO3JldHVybiB0aGlzLng9ZS54K3IqKHRoaXMueC1lLngpLW4qKHRoaXMueS1lLnkpLHRoaXMueT1pLHRoaXN9LF9yb3VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpLHRoaXMueT1NYXRoLnJvdW5kKHRoaXMueSksdGhpc319LGcuY29udmVydD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGc/dDpBcnJheS5pc0FycmF5KHQpP25ldyBnKHRbMF0sdFsxXSk6dH07dmFyIHg9cChtKTtjb25zdCB2PU1hdGguUEkvMTgwLGI9MTgwL01hdGguUEk7ZnVuY3Rpb24gdyh0KXtyZXR1cm4gdCp2fWZ1bmN0aW9uIF8odCl7cmV0dXJuIHQqYn1jb25zdCBBPVtbMCwwXSxbMSwwXSxbMSwxXSxbMCwxXV07ZnVuY3Rpb24gUyh0KXtpZih0PD0wKXJldHVybiAwO2lmKHQ+PTEpcmV0dXJuIDE7Y29uc3QgZT10KnQscj1lKnQ7cmV0dXJuIDQqKHQ8LjU/cjozKih0LWUpK3ItLjc1KX1mdW5jdGlvbiBrKHQsZSxyLG4pe2NvbnN0IGk9bmV3IHkodCxlLHIsbik7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBpLnNvbHZlKHQpfX1jb25zdCBJPWsoLjI1LC4xLC4yNSwxKTtmdW5jdGlvbiBNKHQsZSxyKXtyZXR1cm4gTWF0aC5taW4ocixNYXRoLm1heChlLHQpKX1mdW5jdGlvbiBUKHQsZSxyKXtyZXR1cm4gKHI9TSgoci10KS8oZS10KSwwLDEpKSpyKigzLTIqcil9ZnVuY3Rpb24geih0LGUscil7Y29uc3Qgbj1yLWUsaT0oKHQtZSklbituKSVuK2U7cmV0dXJuIGk9PT1lP3I6aX1mdW5jdGlvbiBCKHQsZSxyKXtpZighdC5sZW5ndGgpcmV0dXJuIHIobnVsbCxbXSk7bGV0IG49dC5sZW5ndGg7Y29uc3QgaT1uZXcgQXJyYXkodC5sZW5ndGgpO2xldCBzPW51bGw7dC5mb3JFYWNoKCgodCxhKT0+e2UodCwoKHQsZSk9Pnt0JiYocz10KSxpW2FdPWUsMD09LS1uJiZyKHMsaSk7fSkpO30pKTt9ZnVuY3Rpb24gRSh0KXtjb25zdCBlPVtdO2Zvcihjb25zdCByIGluIHQpZS5wdXNoKHRbcl0pO3JldHVybiBlfWZ1bmN0aW9uIEModCwuLi5lKXtmb3IoY29uc3QgciBvZiBlKWZvcihjb25zdCBlIGluIHIpdFtlXT1yW2VdO3JldHVybiB0fWxldCBQPTE7ZnVuY3Rpb24gRCgpe3JldHVybiBQKyt9ZnVuY3Rpb24gVigpe3JldHVybiBmdW5jdGlvbiB0KGUpe3JldHVybiBlPyhlXk1hdGgucmFuZG9tKCkqKDE2Pj5lLzQpKS50b1N0cmluZygxNik6KFsxZTddKy1bMWUzXSstNGUzKy04ZTMrLTFlMTEpLnJlcGxhY2UoL1swMThdL2csdCl9KCl9ZnVuY3Rpb24gTCh0KXtyZXR1cm4gdDw9MT8xOk1hdGgucG93KDIsTWF0aC5jZWlsKE1hdGgubG9nKHQpL01hdGguTE4yKSl9ZnVuY3Rpb24gRih0KXtyZXR1cm4gISF0JiYvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVs0XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfSQvaS50ZXN0KHQpfWZ1bmN0aW9uIFIodCxlKXt0LmZvckVhY2goKHQ9PntlW3RdJiYoZVt0XT1lW3RdLmJpbmQoZSkpO30pKTt9ZnVuY3Rpb24gVSh0LGUpe3JldHVybiAtMSE9PXQuaW5kZXhPZihlLHQubGVuZ3RoLWUubGVuZ3RoKX1mdW5jdGlvbiAkKHQsZSxyKXtjb25zdCBuPXt9O2Zvcihjb25zdCBpIGluIHQpbltpXT1lLmNhbGwocnx8dGhpcyx0W2ldLGksdCk7cmV0dXJuIG59ZnVuY3Rpb24gaih0LGUscil7Y29uc3Qgbj17fTtmb3IoY29uc3QgaSBpbiB0KWUuY2FsbChyfHx0aGlzLHRbaV0saSx0KSYmKG5baV09dFtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gTyh0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90Lm1hcChPKTpcIm9iamVjdFwiPT10eXBlb2YgdCYmdD8kKHQsTyk6dH1jb25zdCBxPXt9O2Z1bmN0aW9uIE4odCl7cVt0XXx8KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4odCkscVt0XT0hMCk7fWZ1bmN0aW9uIEcodCxlLHIpe3JldHVybiAoci55LXQueSkqKGUueC10LngpPihlLnktdC55KSooci54LXQueCl9ZnVuY3Rpb24gWih0KXtsZXQgZT0wO2ZvcihsZXQgcixuLGk9MCxzPXQubGVuZ3RoLGE9cy0xO2k8czthPWkrKylyPXRbaV0sbj10W2FdLGUrPShuLngtci54KSooci55K24ueSk7cmV0dXJuIGV9ZnVuY3Rpb24gSygpe3JldHVybiBcInVuZGVmaW5lZFwiIT10eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGV9ZnVuY3Rpb24gWCh0KXtjb25zdCBlPXt9O2lmKHQucmVwbGFjZSgvKD86XnwoPzpcXHMqXFwsXFxzKikpKFteXFx4MDAtXFx4MjBcXChcXCk8PkBcXCw7XFw6XFxcXFwiXFwvXFxbXFxdXFw/XFw9XFx7XFx9XFx4N0ZdKykoPzpcXD0oPzooW15cXHgwMC1cXHgyMFxcKFxcKTw+QFxcLDtcXDpcXFxcXCJcXC9cXFtcXF1cXD9cXD1cXHtcXH1cXHg3Rl0rKXwoPzpcXFwiKCg/OlteXCJcXFxcXXxcXFxcLikqKVxcXCIpKSk/L2csKCh0LHIsbixpKT0+e2NvbnN0IHM9bnx8aTtyZXR1cm4gZVtyXT0hc3x8cy50b0xvd2VyQ2FzZSgpLFwiXCJ9KSksZVtcIm1heC1hZ2VcIl0pe2NvbnN0IHQ9cGFyc2VJbnQoZVtcIm1heC1hZ2VcIl0sMTApO2lzTmFOKHQpP2RlbGV0ZSBlW1wibWF4LWFnZVwiXTplW1wibWF4LWFnZVwiXT10O31yZXR1cm4gZX1sZXQgSj1udWxsO2Z1bmN0aW9uIEgodCl7aWYobnVsbD09Sil7Y29uc3QgZT10Lm5hdmlnYXRvcj90Lm5hdmlnYXRvci51c2VyQWdlbnQ6bnVsbDtKPSEhdC5zYWZhcml8fCEoIWV8fCEoL1xcYihpUGFkfGlQaG9uZXxpUG9kKVxcYi8udGVzdChlKXx8ZS5tYXRjaChcIlNhZmFyaVwiKSYmIWUubWF0Y2goXCJDaHJvbWVcIikpKTt9cmV0dXJuIEp9ZnVuY3Rpb24gWSh0KXt0cnl7Y29uc3Qgcj1lW3RdO3JldHVybiByLnNldEl0ZW0oXCJfbWFwYm94X3Rlc3RfXCIsMSksci5yZW1vdmVJdGVtKFwiX21hcGJveF90ZXN0X1wiKSwhMH1jYXRjaCh0KXtyZXR1cm4gITF9fWZ1bmN0aW9uIFcodCxlKXtyZXR1cm4gW3RbNCplXSx0WzQqZSsxXSx0WzQqZSsyXSx0WzQqZSszXV19Y29uc3QgUT1cIm1hcGJveC10aWxlc1wiO2xldCB0dD01MDAsZXQ9NTA7bGV0IHJ0LG50O2Z1bmN0aW9uIGl0KCl7dHJ5e3JldHVybiBlLmNhY2hlc31jYXRjaCh0KXt9fWZ1bmN0aW9uIHN0KCl7aXQoKSYmIXJ0JiYocnQ9ZS5jYWNoZXMub3BlbihRKSk7fWZ1bmN0aW9uIGF0KHQpe2NvbnN0IGU9dC5pbmRleE9mKFwiP1wiKTtpZihlPDApcmV0dXJuIHQ7Y29uc3Qgcj1mdW5jdGlvbih0KXtjb25zdCBlPXQuaW5kZXhPZihcIj9cIik7cmV0dXJuIGU+MD90LnNsaWNlKGUrMSkuc3BsaXQoXCImXCIpOltdfSh0KSxuPXIuZmlsdGVyKCh0PT57Y29uc3QgZT10LnNwbGl0KFwiPVwiKTtyZXR1cm4gXCJsYW5ndWFnZVwiPT09ZVswXXx8XCJ3b3JsZHZpZXdcIj09PWVbMF19KSk7cmV0dXJuIG4ubGVuZ3RoP2Ake3Quc2xpY2UoMCxlKX0/JHtuLmpvaW4oXCImXCIpfWA6dC5zbGljZSgwLGUpfWxldCBvdD0xLzA7Y29uc3QgbHQ9e1Vua25vd246XCJVbmtub3duXCIsU3R5bGU6XCJTdHlsZVwiLFNvdXJjZTpcIlNvdXJjZVwiLFRpbGU6XCJUaWxlXCIsR2x5cGhzOlwiR2x5cGhzXCIsU3ByaXRlSW1hZ2U6XCJTcHJpdGVJbWFnZVwiLFNwcml0ZUpTT046XCJTcHJpdGVKU09OXCIsSW1hZ2U6XCJJbWFnZVwifTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZnJlZXplJiZPYmplY3QuZnJlZXplKGx0KTtjbGFzcyB1dCBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsZSxyKXs0MDE9PT1lJiZidChyKSYmKHQrPVwiOiB5b3UgbWF5IGhhdmUgcHJvdmlkZWQgYW4gaW52YWxpZCBNYXBib3ggYWNjZXNzIHRva2VuLiBTZWUgaHR0cHM6Ly9kb2NzLm1hcGJveC5jb20vYXBpL292ZXJ2aWV3LyNhY2Nlc3MtdG9rZW5zLWFuZC10b2tlbi1zY29wZXNcIiksc3VwZXIodCksdGhpcy5zdGF0dXM9ZSx0aGlzLnVybD1yO310b1N0cmluZygpe3JldHVybiBgJHt0aGlzLm5hbWV9OiAke3RoaXMubWVzc2FnZX0gKCR7dGhpcy5zdGF0dXN9KTogJHt0aGlzLnVybH1gfX1jb25zdCBjdD1LKCk/KCk9PnNlbGYud29ya2VyJiZzZWxmLndvcmtlci5yZWZlcnJlcjooKT0+KFwiYmxvYjpcIj09PWUubG9jYXRpb24ucHJvdG9jb2w/ZS5wYXJlbnQ6ZSkubG9jYXRpb24uaHJlZjtjb25zdCBodD1mdW5jdGlvbih0LHIpe2lmKCEoL15maWxlOi8udGVzdChuPXQudXJsKXx8L15maWxlOi8udGVzdChjdCgpKSYmIS9eXFx3KzovLnRlc3QobikpKXtpZihlLmZldGNoJiZlLlJlcXVlc3QmJmUuQWJvcnRDb250cm9sbGVyJiZlLlJlcXVlc3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KFwic2lnbmFsXCIpKXJldHVybiBmdW5jdGlvbih0LHIpe2NvbnN0IG49bmV3IGUuQWJvcnRDb250cm9sbGVyLGk9bmV3IGUuUmVxdWVzdCh0LnVybCx7bWV0aG9kOnQubWV0aG9kfHxcIkdFVFwiLGJvZHk6dC5ib2R5LGNyZWRlbnRpYWxzOnQuY3JlZGVudGlhbHMsaGVhZGVyczp0LmhlYWRlcnMscmVmZXJyZXI6Y3QoKSxyZWZlcnJlclBvbGljeTp0LnJlZmVycmVyUG9saWN5LHNpZ25hbDpuLnNpZ25hbH0pO2xldCBzPSExLGE9ITE7Y29uc3Qgbz0obD1pLnVybCkuaW5kZXhPZihcInNrdT1cIik+MCYmYnQobCk7dmFyIGw7XCJqc29uXCI9PT10LnR5cGUmJmkuaGVhZGVycy5zZXQoXCJBY2NlcHRcIixcImFwcGxpY2F0aW9uL2pzb25cIik7Y29uc3QgdT0obixzLGwpPT57aWYoYSlyZXR1cm47aWYobiYmXCJTZWN1cml0eUVycm9yXCIhPT1uLm1lc3NhZ2UmJk4obi50b1N0cmluZygpKSxzJiZsKXJldHVybiBjKHMpO2NvbnN0IHU9RGF0ZS5ub3coKTtlLmZldGNoKGkpLnRoZW4oKGU9PntpZihlLm9rKXtjb25zdCB0PW8/ZS5jbG9uZSgpOm51bGw7cmV0dXJuIGMoZSx0LHUpfXJldHVybiByKG5ldyB1dChlLnN0YXR1c1RleHQsZS5zdGF0dXMsdC51cmwpKX0pKS5jYXRjaCgoZT0+e1wiQWJvcnRFcnJvclwiIT09ZS5uYW1lJiZyKG5ldyBFcnJvcihgJHtlLm1lc3NhZ2V9ICR7dC51cmx9YCkpO30pKTt9LGM9KG4sbyxsKT0+eyhcImFycmF5QnVmZmVyXCI9PT10LnR5cGU/bi5hcnJheUJ1ZmZlcigpOlwianNvblwiPT09dC50eXBlP24uanNvbigpOm4udGV4dCgpKS50aGVuKCh0PT57YXx8KG8mJmwmJmZ1bmN0aW9uKHQscixuKXtpZihzdCgpLCFydClyZXR1cm47Y29uc3QgaT17c3RhdHVzOnIuc3RhdHVzLHN0YXR1c1RleHQ6ci5zdGF0dXNUZXh0LGhlYWRlcnM6bmV3IGUuSGVhZGVyc307ci5oZWFkZXJzLmZvckVhY2goKCh0LGUpPT5pLmhlYWRlcnMuc2V0KGUsdCkpKTtjb25zdCBzPVgoci5oZWFkZXJzLmdldChcIkNhY2hlLUNvbnRyb2xcIil8fFwiXCIpO2lmKHNbXCJuby1zdG9yZVwiXSlyZXR1cm47c1tcIm1heC1hZ2VcIl0mJmkuaGVhZGVycy5zZXQoXCJFeHBpcmVzXCIsbmV3IERhdGUobisxZTMqc1tcIm1heC1hZ2VcIl0pLnRvVVRDU3RyaW5nKCkpO2NvbnN0IGE9aS5oZWFkZXJzLmdldChcIkV4cGlyZXNcIik7YSYmKG5ldyBEYXRlKGEpLmdldFRpbWUoKS1uPDQyZTR8fGZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09bnQpdHJ5e25ldyBSZXNwb25zZShuZXcgUmVhZGFibGVTdHJlYW0pLG50PSEwO31jYXRjaCh0KXtudD0hMTt9bnQ/ZSh0LmJvZHkpOnQuYmxvYigpLnRoZW4oZSk7fShyLChyPT57Y29uc3Qgbj1uZXcgZS5SZXNwb25zZShyLGkpO3N0KCkscnQmJnJ0LnRoZW4oKGU9PmUucHV0KGF0KHQudXJsKSxuKSkpLmNhdGNoKCh0PT5OKHQubWVzc2FnZSkpKTt9KSkpO30oaSxvLGwpLHM9ITAscihudWxsLHQsbi5oZWFkZXJzLmdldChcIkNhY2hlLUNvbnRyb2xcIiksbi5oZWFkZXJzLmdldChcIkV4cGlyZXNcIikpKTt9KSkuY2F0Y2goKHQ9PnthfHxyKG5ldyBFcnJvcih0Lm1lc3NhZ2UpKTt9KSk7fTtyZXR1cm4gbz9mdW5jdGlvbih0LGUpe2lmKHN0KCksIXJ0KXJldHVybiBlKG51bGwpO2NvbnN0IHI9YXQodC51cmwpO3J0LnRoZW4oKHQ9Pnt0Lm1hdGNoKHIpLnRoZW4oKG49Pntjb25zdCBpPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiAhMTtjb25zdCBlPW5ldyBEYXRlKHQuaGVhZGVycy5nZXQoXCJFeHBpcmVzXCIpfHwwKSxyPVgodC5oZWFkZXJzLmdldChcIkNhY2hlLUNvbnRyb2xcIil8fFwiXCIpO3JldHVybiBlPkRhdGUubm93KCkmJiFyW1wibm8tY2FjaGVcIl19KG4pO3QuZGVsZXRlKHIpLGkmJnQucHV0KHIsbi5jbG9uZSgpKSxlKG51bGwsbixpKTt9KSkuY2F0Y2goZSk7fSkpLmNhdGNoKGUpO30oaSx1KTp1KG51bGwsbnVsbCkse2NhbmNlbDooKT0+e2E9ITAsc3x8bi5hYm9ydCgpO319fSh0LHIpO2lmKEsoKSYmc2VsZi53b3JrZXImJnNlbGYud29ya2VyLmFjdG9yKXJldHVybiBzZWxmLndvcmtlci5hY3Rvci5zZW5kKFwiZ2V0UmVzb3VyY2VcIix0LHIsdm9pZCAwLCEwKX12YXIgbjtyZXR1cm4gZnVuY3Rpb24odCxyKXtjb25zdCBuPW5ldyBlLlhNTEh0dHBSZXF1ZXN0O24ub3Blbih0Lm1ldGhvZHx8XCJHRVRcIix0LnVybCwhMCksXCJhcnJheUJ1ZmZlclwiPT09dC50eXBlJiYobi5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiKTtmb3IoY29uc3QgZSBpbiB0LmhlYWRlcnMpbi5zZXRSZXF1ZXN0SGVhZGVyKGUsdC5oZWFkZXJzW2VdKTtyZXR1cm4gXCJqc29uXCI9PT10LnR5cGUmJihuLnJlc3BvbnNlVHlwZT1cInRleHRcIixuLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixcImFwcGxpY2F0aW9uL2pzb25cIikpLG4ud2l0aENyZWRlbnRpYWxzPVwiaW5jbHVkZVwiPT09dC5jcmVkZW50aWFscyxuLm9uZXJyb3I9KCk9PntyKG5ldyBFcnJvcihuLnN0YXR1c1RleHQpKTt9LG4ub25sb2FkPSgpPT57aWYoKG4uc3RhdHVzPj0yMDAmJm4uc3RhdHVzPDMwMHx8MD09PW4uc3RhdHVzKSYmbnVsbCE9PW4ucmVzcG9uc2Upe2xldCBlPW4ucmVzcG9uc2U7aWYoXCJqc29uXCI9PT10LnR5cGUpdHJ5e2U9SlNPTi5wYXJzZShuLnJlc3BvbnNlKTt9Y2F0Y2godCl7cmV0dXJuIHIodCl9cihudWxsLGUsbi5nZXRSZXNwb25zZUhlYWRlcihcIkNhY2hlLUNvbnRyb2xcIiksbi5nZXRSZXNwb25zZUhlYWRlcihcIkV4cGlyZXNcIikpO31lbHNlIHIobmV3IHV0KG4uc3RhdHVzVGV4dCxuLnN0YXR1cyx0LnVybCkpO30sbi5zZW5kKHQuYm9keSkse2NhbmNlbDooKT0+bi5hYm9ydCgpfX0odCxyKX0scHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaHQoQyh0LHt0eXBlOlwiYXJyYXlCdWZmZXJcIn0pLGUpfTtmdW5jdGlvbiBkdCh0KXtjb25zdCByPWUuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuIHIuaHJlZj10LHIucHJvdG9jb2w9PT1lLmRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sJiZyLmhvc3Q9PT1lLmRvY3VtZW50LmxvY2F0aW9uLmhvc3R9Y29uc3QgZnQ9XCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBQzBsRVFWUVlWMk5nQUFJQUFBVUFBYXJWeUZFQUFBQUFTVVZPUks1Q1lJST1cIjtsZXQgeXQsbXQ7eXQ9W10sbXQ9MDtjb25zdCBndD1mdW5jdGlvbih0LHIpe2lmKHMuc3VwcG9ydGVkJiYodC5oZWFkZXJzfHwodC5oZWFkZXJzPXt9KSx0LmhlYWRlcnMuYWNjZXB0PVwiaW1hZ2Uvd2VicCwqLypcIiksbXQ+PWkuTUFYX1BBUkFMTEVMX0lNQUdFX1JFUVVFU1RTKXtjb25zdCBlPXtyZXF1ZXN0UGFyYW1ldGVyczp0LGNhbGxiYWNrOnIsY2FuY2VsbGVkOiExLGNhbmNlbCgpe3RoaXMuY2FuY2VsbGVkPSEwO319O3JldHVybiB5dC5wdXNoKGUpLGV9bXQrKztsZXQgbj0hMTtjb25zdCBhPSgpPT57aWYoIW4pZm9yKG49ITAsbXQtLTt5dC5sZW5ndGgmJm10PGkuTUFYX1BBUkFMTEVMX0lNQUdFX1JFUVVFU1RTOyl7Y29uc3QgdD15dC5zaGlmdCgpLHtyZXF1ZXN0UGFyYW1ldGVyczplLGNhbGxiYWNrOnIsY2FuY2VsbGVkOm59PXQ7bnx8KHQuY2FuY2VsPWd0KGUscikuY2FuY2VsKTt9fSxvPXB0KHQsKCh0LG4saSxzKT0+e2EoKSx0P3IodCk6biYmKGUuY3JlYXRlSW1hZ2VCaXRtYXA/ZnVuY3Rpb24odCxyKXtjb25zdCBuPW5ldyBlLkJsb2IoW25ldyBVaW50OEFycmF5KHQpXSx7dHlwZTpcImltYWdlL3BuZ1wifSk7ZS5jcmVhdGVJbWFnZUJpdG1hcChuKS50aGVuKCh0PT57cihudWxsLHQpO30pKS5jYXRjaCgodD0+e3IobmV3IEVycm9yKGBDb3VsZCBub3QgbG9hZCBpbWFnZSBiZWNhdXNlIG9mICR7dC5tZXNzYWdlfS4gUGxlYXNlIG1ha2Ugc3VyZSB0byB1c2UgYSBzdXBwb3J0ZWQgaW1hZ2UgdHlwZSBzdWNoIGFzIFBORyBvciBKUEVHLiBOb3RlIHRoYXQgU1ZHcyBhcmUgbm90IHN1cHBvcnRlZC5gKSk7fSkpO30obiwoKHQsZSk9PnIodCxlLGkscykpKTpmdW5jdGlvbih0LHIpe2NvbnN0IG49bmV3IGUuSW1hZ2UsaT1lLlVSTDtuLm9ubG9hZD0oKT0+e3IobnVsbCxuKSxpLnJldm9rZU9iamVjdFVSTChuLnNyYyksbi5vbmxvYWQ9bnVsbCxlLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PntuLnNyYz1mdDt9KSk7fSxuLm9uZXJyb3I9KCk9PnIobmV3IEVycm9yKFwiQ291bGQgbm90IGxvYWQgaW1hZ2UuIFBsZWFzZSBtYWtlIHN1cmUgdG8gdXNlIGEgc3VwcG9ydGVkIGltYWdlIHR5cGUgc3VjaCBhcyBQTkcgb3IgSlBFRy4gTm90ZSB0aGF0IFNWR3MgYXJlIG5vdCBzdXBwb3J0ZWQuXCIpKTtjb25zdCBzPW5ldyBlLkJsb2IoW25ldyBVaW50OEFycmF5KHQpXSx7dHlwZTpcImltYWdlL3BuZ1wifSk7bi5zcmM9dC5ieXRlTGVuZ3RoP2kuY3JlYXRlT2JqZWN0VVJMKHMpOmZ0O30obiwoKHQsZSk9PnIodCxlLGkscykpKSk7fSkpO3JldHVybiB7Y2FuY2VsOigpPT57by5jYW5jZWwoKSxhKCk7fX19LHh0PVwiTk9fQUNDRVNTX1RPS0VOXCI7ZnVuY3Rpb24gdnQodCl7cmV0dXJuIDA9PT10LmluZGV4T2YoXCJtYXBib3g6XCIpfWZ1bmN0aW9uIGJ0KHQpe3JldHVybiBpLkFQSV9VUkxfUkVHRVgudGVzdCh0KX1mdW5jdGlvbiB3dCh0KXtyZXR1cm4gaS5BUElfQ0ROX1VSTF9SRUdFWC50ZXN0KHQpfWZ1bmN0aW9uIF90KHQpe3JldHVybiBpLkFQSV9TVFlMRV9SRUdFWC50ZXN0KHQpJiYhQXQodCl9ZnVuY3Rpb24gQXQodCl7cmV0dXJuIGkuQVBJX1NQUklURV9SRUdFWC50ZXN0KHQpfWNvbnN0IFN0PS9eKFxcdyspOlxcL1xcLyhbXi8/XSopKFxcL1teP10rKT9cXD8/KC4rKT8vO2Z1bmN0aW9uIGt0KHQpe2NvbnN0IGU9dC5tYXRjaChTdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHBhcnNlIFVSTCBvYmplY3RcIik7cmV0dXJuIHtwcm90b2NvbDplWzFdLGF1dGhvcml0eTplWzJdLHBhdGg6ZVszXXx8XCIvXCIscGFyYW1zOmVbNF0/ZVs0XS5zcGxpdChcIiZcIik6W119fWZ1bmN0aW9uIEl0KHQpe2NvbnN0IGU9dC5wYXJhbXMubGVuZ3RoP2A/JHt0LnBhcmFtcy5qb2luKFwiJlwiKX1gOlwiXCI7cmV0dXJuIGAke3QucHJvdG9jb2x9Oi8vJHt0LmF1dGhvcml0eX0ke3QucGF0aH0ke2V9YH1jb25zdCBNdD1cIm1hcGJveC5ldmVudERhdGFcIjtmdW5jdGlvbiBUdCh0KXtpZighdClyZXR1cm4gbnVsbDtjb25zdCByPXQuc3BsaXQoXCIuXCIpO2lmKCFyfHwzIT09ci5sZW5ndGgpcmV0dXJuIG51bGw7dHJ5e3JldHVybiBKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChlLmF0b2IoclsxXSkuc3BsaXQoXCJcIikubWFwKCh0PT5cIiVcIisoXCIwMFwiK3QuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSkpLmpvaW4oXCJcIikpKX1jYXRjaCh0KXtyZXR1cm4gbnVsbH19Y2xhc3MgenR7Y29uc3RydWN0b3IodCl7dGhpcy50eXBlPXQsdGhpcy5hbm9uSWQ9bnVsbCx0aGlzLmV2ZW50RGF0YT17fSx0aGlzLnF1ZXVlPVtdLHRoaXMucGVuZGluZ1JlcXVlc3Q9bnVsbDt9Z2V0U3RvcmFnZUtleSh0KXtjb25zdCByPVR0KGkuQUNDRVNTX1RPS0VOKTtsZXQgbj1cIlwiO3JldHVybiBuPXImJnIudT9lLmJ0b2EoZW5jb2RlVVJJQ29tcG9uZW50KHIudSkucmVwbGFjZSgvJShbMC05QS1GXXsyfSkvZywoKHQsZSk9PlN0cmluZy5mcm9tQ2hhckNvZGUoTnVtYmVyKFwiMHhcIitlKSkpKSk6aS5BQ0NFU1NfVE9LRU58fFwiXCIsdD9gJHtNdH0uJHt0fToke259YDpgJHtNdH06JHtufWB9ZmV0Y2hFdmVudERhdGEoKXtjb25zdCB0PVkoXCJsb2NhbFN0b3JhZ2VcIikscj10aGlzLmdldFN0b3JhZ2VLZXkoKSxuPXRoaXMuZ2V0U3RvcmFnZUtleShcInV1aWRcIik7aWYodCl0cnl7Y29uc3QgdD1lLmxvY2FsU3RvcmFnZS5nZXRJdGVtKHIpO3QmJih0aGlzLmV2ZW50RGF0YT1KU09OLnBhcnNlKHQpKTtjb25zdCBpPWUubG9jYWxTdG9yYWdlLmdldEl0ZW0obik7aSYmKHRoaXMuYW5vbklkPWkpO31jYXRjaCh0KXtOKFwiVW5hYmxlIHRvIHJlYWQgZnJvbSBMb2NhbFN0b3JhZ2VcIik7fX1zYXZlRXZlbnREYXRhKCl7Y29uc3QgdD1ZKFwibG9jYWxTdG9yYWdlXCIpLHI9dGhpcy5nZXRTdG9yYWdlS2V5KCksbj10aGlzLmdldFN0b3JhZ2VLZXkoXCJ1dWlkXCIpO2lmKHQpdHJ5e2UubG9jYWxTdG9yYWdlLnNldEl0ZW0obix0aGlzLmFub25JZCksT2JqZWN0LmtleXModGhpcy5ldmVudERhdGEpLmxlbmd0aD49MSYmZS5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShyLEpTT04uc3RyaW5naWZ5KHRoaXMuZXZlbnREYXRhKSk7fWNhdGNoKHQpe04oXCJVbmFibGUgdG8gd3JpdGUgdG8gTG9jYWxTdG9yYWdlXCIpO319cHJvY2Vzc1JlcXVlc3RzKHQpe31wb3N0RXZlbnQodCxlLHIsbil7aWYoIWkuRVZFTlRTX1VSTClyZXR1cm47Y29uc3Qgcz1rdChpLkVWRU5UU19VUkwpO3MucGFyYW1zLnB1c2goYGFjY2Vzc190b2tlbj0ke258fGkuQUNDRVNTX1RPS0VOfHxcIlwifWApO2NvbnN0IGE9e2V2ZW50OnRoaXMudHlwZSxjcmVhdGVkOm5ldyBEYXRlKHQpLnRvSVNPU3RyaW5nKCl9LG89ZT9DKGEsZSk6YSxsPXt1cmw6SXQocyksaGVhZGVyczp7XCJDb250ZW50LVR5cGVcIjpcInRleHQvcGxhaW5cIn0sYm9keTpKU09OLnN0cmluZ2lmeShbb10pfTt0aGlzLnBlbmRpbmdSZXF1ZXN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGh0KEModCx7bWV0aG9kOlwiUE9TVFwifSksZSl9KGwsKHQ9Pnt0aGlzLnBlbmRpbmdSZXF1ZXN0PW51bGwscih0KSx0aGlzLnNhdmVFdmVudERhdGEoKSx0aGlzLnByb2Nlc3NSZXF1ZXN0cyhuKTt9KSk7fXF1ZXVlUmVxdWVzdCh0LGUpe3RoaXMucXVldWUucHVzaCh0KSx0aGlzLnByb2Nlc3NSZXF1ZXN0cyhlKTt9fWNvbnN0IEJ0PW5ldyBjbGFzcyBleHRlbmRzIHp0e2NvbnN0cnVjdG9yKHQpe3N1cGVyKFwiYXBwVXNlclR1cm5zdGlsZVwiKSx0aGlzLl9jdXN0b21BY2Nlc3NUb2tlbj10O31wb3N0VHVybnN0aWxlRXZlbnQodCxlKXtpLkVWRU5UU19VUkwmJmkuQUNDRVNTX1RPS0VOJiZBcnJheS5pc0FycmF5KHQpJiZ0LnNvbWUoKHQ9PnZ0KHQpfHxidCh0KSkpJiZ0aGlzLnF1ZXVlUmVxdWVzdChEYXRlLm5vdygpLGUpO31wcm9jZXNzUmVxdWVzdHModCl7aWYodGhpcy5wZW5kaW5nUmVxdWVzdHx8MD09PXRoaXMucXVldWUubGVuZ3RoKXJldHVybjt0aGlzLmFub25JZCYmdGhpcy5ldmVudERhdGEubGFzdFN1Y2Nlc3MmJnRoaXMuZXZlbnREYXRhLnRva2VuVXx8dGhpcy5mZXRjaEV2ZW50RGF0YSgpO2NvbnN0IGU9VHQoaS5BQ0NFU1NfVE9LRU4pLG49ZT9lLnU6aS5BQ0NFU1NfVE9LRU47bGV0IHM9biE9PXRoaXMuZXZlbnREYXRhLnRva2VuVTtGKHRoaXMuYW5vbklkKXx8KHRoaXMuYW5vbklkPVYoKSxzPSEwKTtjb25zdCBhPXRoaXMucXVldWUuc2hpZnQoKTtpZih0aGlzLmV2ZW50RGF0YS5sYXN0U3VjY2Vzcyl7Y29uc3QgdD1uZXcgRGF0ZSh0aGlzLmV2ZW50RGF0YS5sYXN0U3VjY2VzcyksZT1uZXcgRGF0ZShhKSxyPShhLXRoaXMuZXZlbnREYXRhLmxhc3RTdWNjZXNzKS84NjRlNTtzPXN8fHI+PTF8fHI8LTF8fHQuZ2V0RGF0ZSgpIT09ZS5nZXREYXRlKCk7fWVsc2Ugcz0hMDtzP3RoaXMucG9zdEV2ZW50KGEse3Nka0lkZW50aWZpZXI6XCJtYXBib3gtZ2wtanNcIixzZGtWZXJzaW9uOnIsc2t1SWQ6aCxcImVuYWJsZWQudGVsZW1ldHJ5XCI6ITEsdXNlcklkOnRoaXMuYW5vbklkfSwodD0+e3R8fCh0aGlzLmV2ZW50RGF0YS5sYXN0U3VjY2Vzcz1hLHRoaXMuZXZlbnREYXRhLnRva2VuVT1uKTt9KSx0KTp0aGlzLnByb2Nlc3NSZXF1ZXN0cygpO319LEV0PUJ0LnBvc3RUdXJuc3RpbGVFdmVudC5iaW5kKEJ0KSxDdD1uZXcgY2xhc3MgZXh0ZW5kcyB6dHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwibWFwLmxvYWRcIiksdGhpcy5zdWNjZXNzPXt9LHRoaXMuc2t1VG9rZW49XCJcIjt9cG9zdE1hcExvYWRFdmVudCh0LGUscixuKXt0aGlzLnNrdVRva2VuPWUsdGhpcy5lcnJvckNiPW4saS5FVkVOVFNfVVJMJiYocnx8aS5BQ0NFU1NfVE9LRU4/dGhpcy5xdWV1ZVJlcXVlc3Qoe2lkOnQsdGltZXN0YW1wOkRhdGUubm93KCl9LHIpOnRoaXMuZXJyb3JDYihuZXcgRXJyb3IoeHQpKSk7fXByb2Nlc3NSZXF1ZXN0cyh0KXtpZih0aGlzLnBlbmRpbmdSZXF1ZXN0fHwwPT09dGhpcy5xdWV1ZS5sZW5ndGgpcmV0dXJuO2NvbnN0e2lkOmUsdGltZXN0YW1wOm59PXRoaXMucXVldWUuc2hpZnQoKTtlJiZ0aGlzLnN1Y2Nlc3NbZV18fCh0aGlzLmFub25JZHx8dGhpcy5mZXRjaEV2ZW50RGF0YSgpLEYodGhpcy5hbm9uSWQpfHwodGhpcy5hbm9uSWQ9VigpKSx0aGlzLnBvc3RFdmVudChuLHtzZGtJZGVudGlmaWVyOlwibWFwYm94LWdsLWpzXCIsc2RrVmVyc2lvbjpyLHNrdUlkOmgsc2t1VG9rZW46dGhpcy5za3VUb2tlbix1c2VySWQ6dGhpcy5hbm9uSWR9LCh0PT57dD90aGlzLmVycm9yQ2IodCk6ZSYmKHRoaXMuc3VjY2Vzc1tlXT0hMCk7fSksdCkpO319LFB0PUN0LnBvc3RNYXBMb2FkRXZlbnQuYmluZChDdCksRHQ9bmV3IGNsYXNzIGV4dGVuZHMgenR7Y29uc3RydWN0b3IoKXtzdXBlcihcImdsanMucGVyZm9ybWFuY2VcIik7fXBvc3RQZXJmb3JtYW5jZUV2ZW50KHQsZSl7aS5FVkVOVFNfVVJMJiYodHx8aS5BQ0NFU1NfVE9LRU4pJiZ0aGlzLnF1ZXVlUmVxdWVzdCh7dGltZXN0YW1wOkRhdGUubm93KCkscGVyZm9ybWFuY2VEYXRhOmV9LHQpO31wcm9jZXNzUmVxdWVzdHModCl7aWYodGhpcy5wZW5kaW5nUmVxdWVzdHx8MD09PXRoaXMucXVldWUubGVuZ3RoKXJldHVybjtjb25zdHt0aW1lc3RhbXA6bixwZXJmb3JtYW5jZURhdGE6aX09dGhpcy5xdWV1ZS5zaGlmdCgpLHM9ZnVuY3Rpb24odCl7Y29uc3Qgbj1lLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJyZXNvdXJjZVwiKSxpPWUucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm1hcmtcIikscz1mdW5jdGlvbih0KXtjb25zdCBlPXt9O2lmKHQpZm9yKGNvbnN0IHIgaW4gdClpZihcIm90aGVyXCIhPT1yKWZvcihjb25zdCBuIG9mIHRbcl0pe2NvbnN0IHQ9YCR7cn1SZXNvbHZlUmFuZ2VNaW5gLGk9YCR7cn1SZXNvbHZlUmFuZ2VNYXhgLHM9YCR7cn1SZXF1ZXN0Q291bnRgLGE9YCR7cn1SZXF1ZXN0Q2FjaGVkQ291bnRgO2VbdF09TWF0aC5taW4oZVt0XXx8MS8wLG4uc3RhcnRUaW1lKSxlW2ldPU1hdGgubWF4KGVbaV18fC0xLzAsbi5yZXNwb25zZUVuZCk7Y29uc3Qgbz10PT57dm9pZCAwPT09ZVt0XSYmKGVbdF09MCksKytlW3RdO307dm9pZCAwIT09bi50cmFuc2ZlclNpemUmJjA9PT1uLnRyYW5zZmVyU2l6ZSYmbyhhKSxvKHMpO31yZXR1cm4gZX0oZnVuY3Rpb24odCxlKXtjb25zdCByPXt9O2lmKHQpZm9yKGNvbnN0IG4gb2YgdCl7Y29uc3QgdD1lKG4pO3ZvaWQgMD09PXJbdF0mJihyW3RdPVtdKSxyW3RdLnB1c2gobik7fXJldHVybiByfShuLGp0KSksYT1lLmRldmljZVBpeGVsUmF0aW8sbz1lLm5hdmlnYXRvci5jb25uZWN0aW9ufHxlLm5hdmlnYXRvci5tb3pDb25uZWN0aW9ufHxlLm5hdmlnYXRvci53ZWJraXRDb25uZWN0aW9uLGw9e2NvdW50ZXJzOltdLG1ldGFkYXRhOltdLGF0dHJpYnV0ZXM6W119LHU9KHQsZSxyKT0+e251bGwhPXImJnQucHVzaCh7bmFtZTplLHZhbHVlOnIudG9TdHJpbmcoKX0pO307Zm9yKGNvbnN0IHQgaW4gcyl1KGwuY291bnRlcnMsdCxzW3RdKTtpZih0LmludGVyYWN0aW9uUmFuZ2VbMF0hPT0xLzAmJnQuaW50ZXJhY3Rpb25SYW5nZVsxXSE9PS0xLzAmJih1KGwuY291bnRlcnMsXCJpbnRlcmFjdGlvblJhbmdlTWluXCIsdC5pbnRlcmFjdGlvblJhbmdlWzBdKSx1KGwuY291bnRlcnMsXCJpbnRlcmFjdGlvblJhbmdlTWF4XCIsdC5pbnRlcmFjdGlvblJhbmdlWzFdKSksaSlmb3IoY29uc3QgdCBvZiBPYmplY3Qua2V5cyhVdCkpe2NvbnN0IGU9VXRbdF0scj1pLmZpbmQoKHQ9PnQubmFtZT09PWUpKTtyJiZ1KGwuY291bnRlcnMsZSxyLnN0YXJ0VGltZSk7fXJldHVybiB1KGwuY291bnRlcnMsXCJ2aXNpYmlsaXR5SGlkZGVuXCIsdC52aXNpYmlsaXR5SGlkZGVuKSx1KGwuYXR0cmlidXRlcyxcInN0eWxlXCIsZnVuY3Rpb24odCl7aWYodClmb3IoY29uc3QgZSBvZiB0KXtjb25zdCB0PWUubmFtZS5zcGxpdChcIj9cIilbMF07aWYoX3QodCkpe2NvbnN0IGU9dC5zcGxpdChcIi9cIikuc2xpY2UoLTIpO2lmKDI9PT1lLmxlbmd0aClyZXR1cm4gYG1hcGJveDovL3N0eWxlcy8ke2VbMF19LyR7ZVsxXX1gfX19KG4pKSx1KGwuYXR0cmlidXRlcyxcInRlcnJhaW5FbmFibGVkXCIsdC50ZXJyYWluRW5hYmxlZD9cInRydWVcIjpcImZhbHNlXCIpLHUobC5hdHRyaWJ1dGVzLFwiZm9nRW5hYmxlZFwiLHQuZm9nRW5hYmxlZD9cInRydWVcIjpcImZhbHNlXCIpLHUobC5hdHRyaWJ1dGVzLFwicHJvamVjdGlvblwiLHQucHJvamVjdGlvbiksdShsLmF0dHJpYnV0ZXMsXCJ6b29tXCIsdC56b29tKSx1KGwubWV0YWRhdGEsXCJkZXZpY2VQaXhlbFJhdGlvXCIsYSksdShsLm1ldGFkYXRhLFwiY29ubmVjdGlvbkVmZmVjdGl2ZVR5cGVcIixvP28uZWZmZWN0aXZlVHlwZTp2b2lkIDApLHUobC5tZXRhZGF0YSxcIm5hdmlnYXRvclVzZXJBZ2VudFwiLGUubmF2aWdhdG9yLnVzZXJBZ2VudCksdShsLm1ldGFkYXRhLFwic2NyZWVuV2lkdGhcIixlLnNjcmVlbi53aWR0aCksdShsLm1ldGFkYXRhLFwic2NyZWVuSGVpZ2h0XCIsZS5zY3JlZW4uaGVpZ2h0KSx1KGwubWV0YWRhdGEsXCJ3aW5kb3dXaWR0aFwiLGUuaW5uZXJXaWR0aCksdShsLm1ldGFkYXRhLFwid2luZG93SGVpZ2h0XCIsZS5pbm5lckhlaWdodCksdShsLm1ldGFkYXRhLFwibWFwV2lkdGhcIix0LndpZHRoL2EpLHUobC5tZXRhZGF0YSxcIm1hcEhlaWdodFwiLHQuaGVpZ2h0L2EpLHUobC5tZXRhZGF0YSxcIndlYmdsUmVuZGVyZXJcIix0LnJlbmRlcmVyKSx1KGwubWV0YWRhdGEsXCJ3ZWJnbFZlbmRvclwiLHQudmVuZG9yKSx1KGwubWV0YWRhdGEsXCJzZGtWZXJzaW9uXCIsciksdShsLm1ldGFkYXRhLFwic2RrSWRlbnRpZmllclwiLFwibWFwYm94LWdsLWpzXCIpLGx9KGkpO2Zvcihjb25zdCB0IG9mIHMubWV0YWRhdGEpO2Zvcihjb25zdCB0IG9mIHMuY291bnRlcnMpO2Zvcihjb25zdCB0IG9mIHMuYXR0cmlidXRlcyk7dGhpcy5wb3N0RXZlbnQobixzLCgoKT0+e30pLHQpO319LFZ0PUR0LnBvc3RQZXJmb3JtYW5jZUV2ZW50LmJpbmQoRHQpLEx0PW5ldyBjbGFzcyBleHRlbmRzIHp0e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJtYXAuYXV0aFwiKSx0aGlzLnN1Y2Nlc3M9e30sdGhpcy5za3VUb2tlbj1cIlwiO31nZXRTZXNzaW9uKHQsZSxyLG4pe2lmKCFpLkFQSV9VUkx8fCFpLlNFU1NJT05fUEFUSClyZXR1cm47Y29uc3Qgcz1rdChpLkFQSV9VUkwraS5TRVNTSU9OX1BBVEgpO3MucGFyYW1zLnB1c2goYHNrdT0ke2V8fFwiXCJ9YCkscy5wYXJhbXMucHVzaChgYWNjZXNzX3Rva2VuPSR7bnx8aS5BQ0NFU1NfVE9LRU58fFwiXCJ9YCk7Y29uc3QgYT17dXJsOkl0KHMpLGhlYWRlcnM6e1wiQ29udGVudC1UeXBlXCI6XCJ0ZXh0L3BsYWluXCJ9fTt0aGlzLnBlbmRpbmdSZXF1ZXN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGh0KEModCx7bWV0aG9kOlwiR0VUXCJ9KSxlKX0oYSwodD0+e3RoaXMucGVuZGluZ1JlcXVlc3Q9bnVsbCxyKHQpLHRoaXMuc2F2ZUV2ZW50RGF0YSgpLHRoaXMucHJvY2Vzc1JlcXVlc3RzKG4pO30pKTt9Z2V0U2Vzc2lvbkFQSSh0LGUscixuKXt0aGlzLnNrdVRva2VuPWUsdGhpcy5lcnJvckNiPW4saS5TRVNTSU9OX1BBVEgmJmkuQVBJX1VSTCYmKHJ8fGkuQUNDRVNTX1RPS0VOP3RoaXMucXVldWVSZXF1ZXN0KHtpZDp0LHRpbWVzdGFtcDpEYXRlLm5vdygpfSxyKTp0aGlzLmVycm9yQ2IobmV3IEVycm9yKHh0KSkpO31wcm9jZXNzUmVxdWVzdHModCl7aWYodGhpcy5wZW5kaW5nUmVxdWVzdHx8MD09PXRoaXMucXVldWUubGVuZ3RoKXJldHVybjtjb25zdHtpZDplLHRpbWVzdGFtcDpyfT10aGlzLnF1ZXVlLnNoaWZ0KCk7ZSYmdGhpcy5zdWNjZXNzW2VdfHx0aGlzLmdldFNlc3Npb24ocix0aGlzLnNrdVRva2VuLCh0PT57dD90aGlzLmVycm9yQ2IodCk6ZSYmKHRoaXMuc3VjY2Vzc1tlXT0hMCk7fSksdCk7fX0sRnQ9THQuZ2V0U2Vzc2lvbkFQSS5iaW5kKEx0KSxSdD1uZXcgU2V0LFV0PXtjcmVhdGU6XCJjcmVhdGVcIixsb2FkOlwibG9hZFwiLGZ1bGxMb2FkOlwiZnVsbExvYWRcIn0sJHQ9e21hcmsodCl7ZS5wZXJmb3JtYW5jZS5tYXJrKHQpO30sbWVhc3VyZSh0LHIsbil7ZS5wZXJmb3JtYW5jZS5tZWFzdXJlKHQscixuKTt9fTtmdW5jdGlvbiBqdCh0KXtjb25zdCBlPXQubmFtZS5zcGxpdChcIj9cIilbMF07cmV0dXJuIHd0KGUpJiZlLmluY2x1ZGVzKFwibWFwYm94LWdsLmpzXCIpP1wiamF2YXNjcmlwdFwiOnd0KGUpJiZlLmluY2x1ZGVzKFwibWFwYm94LWdsLmNzc1wiKT9cImNzc1wiOmZ1bmN0aW9uKHQpe3JldHVybiBpLkFQSV9GT05UU19SRUdFWC50ZXN0KHQpfShlKT9cImZvbnRSYW5nZVwiOkF0KGUpP1wic3ByaXRlXCI6X3QoZSk/XCJzdHlsZVwiOmZ1bmN0aW9uKHQpe3JldHVybiBpLkFQSV9USUxFSlNPTl9SRUdFWC50ZXN0KHQpfShlKT9cInRpbGVqc29uXCI6XCJvdGhlclwifWNvbnN0IE90PWUucGVyZm9ybWFuY2U7ZnVuY3Rpb24gcXQodCl7Y29uc3QgZT10P3QudXJsLnRvU3RyaW5nKCk6dm9pZCAwO3JldHVybiBPdC5nZXRFbnRyaWVzQnlOYW1lKGUpfWxldCBOdCxHdCxadCxLdDtjb25zdCBYdD17bm93OigpPT52b2lkIDAhPT1adD9adDplLnBlcmZvcm1hbmNlLm5vdygpLHNldE5vdyh0KXtadD10O30scmVzdG9yZU5vdygpe1p0PXZvaWQgMDt9LGZyYW1lKHQpe2NvbnN0IHI9ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCk7cmV0dXJuIHtjYW5jZWw6KCk9PmUuY2FuY2VsQW5pbWF0aW9uRnJhbWUocil9fSxnZXRJbWFnZURhdGEodCxyPTApe2NvbnN0e3dpZHRoOm4saGVpZ2h0Oml9PXQ7S3R8fChLdD1lLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpO2NvbnN0IHM9S3QuZ2V0Q29udGV4dChcIjJkXCIse3dpbGxSZWFkRnJlcXVlbnRseTohMH0pO2lmKCFzKXRocm93IG5ldyBFcnJvcihcImZhaWxlZCB0byBjcmVhdGUgY2FudmFzIDJkIGNvbnRleHRcIik7cmV0dXJuIChuPkt0LndpZHRofHxpPkt0LmhlaWdodCkmJihLdC53aWR0aD1uLEt0LmhlaWdodD1pKSxzLmNsZWFyUmVjdCgtciwtcixuKzIqcixpKzIqcikscy5kcmF3SW1hZ2UodCwwLDAsbixpKSxzLmdldEltYWdlRGF0YSgtciwtcixuKzIqcixpKzIqcil9LHJlc29sdmVVUkw6dD0+KE50fHwoTnQ9ZS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSksTnQuaHJlZj10LE50LmhyZWYpLGdldCBkZXZpY2VQaXhlbFJhdGlvKCl7cmV0dXJuIGUuZGV2aWNlUGl4ZWxSYXRpb30sZ2V0IHByZWZlcnNSZWR1Y2VkTW90aW9uKCl7cmV0dXJuICEhZS5tYXRjaE1lZGlhJiYobnVsbD09R3QmJihHdD1lLm1hdGNoTWVkaWEoXCIocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKVwiKSksR3QubWF0Y2hlcyl9fTtmdW5jdGlvbiBKdCh0LGUscil7clt0XSYmLTEhPT1yW3RdLmluZGV4T2YoZSl8fChyW3RdPXJbdF18fFtdLHJbdF0ucHVzaChlKSk7fWZ1bmN0aW9uIEh0KHQsZSxyKXtpZihyJiZyW3RdKXtjb25zdCBuPXJbdF0uaW5kZXhPZihlKTstMSE9PW4mJnJbdF0uc3BsaWNlKG4sMSk7fX1jbGFzcyBZdHtjb25zdHJ1Y3Rvcih0LGU9e30pe0ModGhpcyxlKSx0aGlzLnR5cGU9dDt9fWNsYXNzIFd0IGV4dGVuZHMgWXR7Y29uc3RydWN0b3IodCxlPXt9KXtzdXBlcihcImVycm9yXCIsQyh7ZXJyb3I6dH0sZSkpO319Y2xhc3MgUXR7b24odCxlKXtyZXR1cm4gdGhpcy5fbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVyc3x8e30sSnQodCxlLHRoaXMuX2xpc3RlbmVycyksdGhpc31vZmYodCxlKXtyZXR1cm4gSHQodCxlLHRoaXMuX2xpc3RlbmVycyksSHQodCxlLHRoaXMuX29uZVRpbWVMaXN0ZW5lcnMpLHRoaXN9b25jZSh0LGUpe3JldHVybiBlPyh0aGlzLl9vbmVUaW1lTGlzdGVuZXJzPXRoaXMuX29uZVRpbWVMaXN0ZW5lcnN8fHt9LEp0KHQsZSx0aGlzLl9vbmVUaW1lTGlzdGVuZXJzKSx0aGlzKTpuZXcgUHJvbWlzZSgoZT0+dGhpcy5vbmNlKHQsZSkpKX1maXJlKHQsZSl7XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PW5ldyBZdCh0LGV8fHt9KSk7Y29uc3Qgcj10LnR5cGU7aWYodGhpcy5saXN0ZW5zKHIpKXt0LnRhcmdldD10aGlzO2NvbnN0IGU9dGhpcy5fbGlzdGVuZXJzJiZ0aGlzLl9saXN0ZW5lcnNbcl0/dGhpcy5fbGlzdGVuZXJzW3JdLnNsaWNlKCk6W107Zm9yKGNvbnN0IHIgb2YgZSlyLmNhbGwodGhpcyx0KTtjb25zdCBuPXRoaXMuX29uZVRpbWVMaXN0ZW5lcnMmJnRoaXMuX29uZVRpbWVMaXN0ZW5lcnNbcl0/dGhpcy5fb25lVGltZUxpc3RlbmVyc1tyXS5zbGljZSgpOltdO2Zvcihjb25zdCBlIG9mIG4pSHQocixlLHRoaXMuX29uZVRpbWVMaXN0ZW5lcnMpLGUuY2FsbCh0aGlzLHQpO2NvbnN0IGk9dGhpcy5fZXZlbnRlZFBhcmVudDtpJiYoQyh0LFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX2V2ZW50ZWRQYXJlbnREYXRhP3RoaXMuX2V2ZW50ZWRQYXJlbnREYXRhKCk6dGhpcy5fZXZlbnRlZFBhcmVudERhdGEpLGkuZmlyZSh0KSk7fWVsc2UgdCBpbnN0YW5jZW9mIFd0JiZjb25zb2xlLmVycm9yKHQuZXJyb3IpO3JldHVybiB0aGlzfWxpc3RlbnModCl7cmV0dXJuICEhKHRoaXMuX2xpc3RlbmVycyYmdGhpcy5fbGlzdGVuZXJzW3RdJiZ0aGlzLl9saXN0ZW5lcnNbdF0ubGVuZ3RoPjB8fHRoaXMuX29uZVRpbWVMaXN0ZW5lcnMmJnRoaXMuX29uZVRpbWVMaXN0ZW5lcnNbdF0mJnRoaXMuX29uZVRpbWVMaXN0ZW5lcnNbdF0ubGVuZ3RoPjB8fHRoaXMuX2V2ZW50ZWRQYXJlbnQmJnRoaXMuX2V2ZW50ZWRQYXJlbnQubGlzdGVucyh0KSl9c2V0RXZlbnRlZFBhcmVudCh0LGUpe3JldHVybiB0aGlzLl9ldmVudGVkUGFyZW50PXQsdGhpcy5fZXZlbnRlZFBhcmVudERhdGE9ZSx0aGlzfX12YXIgdGU9SlNPTi5wYXJzZSgne1wiJHZlcnNpb25cIjo4LFwiJHJvb3RcIjp7XCJ2ZXJzaW9uXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6WzhdfSxcIm5hbWVcIjp7XCJ0eXBlXCI6XCJzdHJpbmdcIn0sXCJtZXRhZGF0YVwiOntcInR5cGVcIjpcIipcIn0sXCJjZW50ZXJcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcIm51bWJlclwifSxcInpvb21cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIn0sXCJiZWFyaW5nXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcInBlcmlvZFwiOjM2MCxcInVuaXRzXCI6XCJkZWdyZWVzXCJ9LFwicGl0Y2hcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowLFwidW5pdHNcIjpcImRlZ3JlZXNcIn0sXCJsaWdodFwiOntcInR5cGVcIjpcImxpZ2h0XCJ9LFwidGVycmFpblwiOntcInR5cGVcIjpcInRlcnJhaW5cIn0sXCJmb2dcIjp7XCJ0eXBlXCI6XCJmb2dcIn0sXCJzb3VyY2VzXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwic291cmNlc1wifSxcInNwcml0ZVwiOntcInR5cGVcIjpcInN0cmluZ1wifSxcImdseXBoc1wiOntcInR5cGVcIjpcInN0cmluZ1wifSxcInRyYW5zaXRpb25cIjp7XCJ0eXBlXCI6XCJ0cmFuc2l0aW9uXCJ9LFwicHJvamVjdGlvblwiOntcInR5cGVcIjpcInByb2plY3Rpb25cIn0sXCJsYXllcnNcIjp7XCJyZXF1aXJlZFwiOnRydWUsXCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcImxheWVyXCJ9fSxcInNvdXJjZXNcIjp7XCIqXCI6e1widHlwZVwiOlwic291cmNlXCJ9fSxcInNvdXJjZVwiOltcInNvdXJjZV92ZWN0b3JcIixcInNvdXJjZV9yYXN0ZXJcIixcInNvdXJjZV9yYXN0ZXJfZGVtXCIsXCJzb3VyY2VfZ2VvanNvblwiLFwic291cmNlX3ZpZGVvXCIsXCJzb3VyY2VfaW1hZ2VcIl0sXCJzb3VyY2VfdmVjdG9yXCI6e1widHlwZVwiOntcInJlcXVpcmVkXCI6dHJ1ZSxcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcInZlY3RvclwiOnt9fX0sXCJ1cmxcIjp7XCJ0eXBlXCI6XCJzdHJpbmdcIn0sXCJ0aWxlc1wiOntcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwic3RyaW5nXCJ9LFwiYm91bmRzXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJudW1iZXJcIixcImxlbmd0aFwiOjQsXCJkZWZhdWx0XCI6Wy0xODAsLTg1LjA1MTEyOSwxODAsODUuMDUxMTI5XX0sXCJzY2hlbWVcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJ4eXpcIjp7fSxcInRtc1wiOnt9fSxcImRlZmF1bHRcIjpcInh5elwifSxcIm1pbnpvb21cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowfSxcIm1heHpvb21cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoyMn0sXCJhdHRyaWJ1dGlvblwiOntcInR5cGVcIjpcInN0cmluZ1wifSxcInByb21vdGVJZFwiOntcInR5cGVcIjpcInByb21vdGVJZFwifSxcInZvbGF0aWxlXCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOmZhbHNlfSxcIipcIjp7XCJ0eXBlXCI6XCIqXCJ9fSxcInNvdXJjZV9yYXN0ZXJcIjp7XCJ0eXBlXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wicmFzdGVyXCI6e319fSxcInVybFwiOntcInR5cGVcIjpcInN0cmluZ1wifSxcInRpbGVzXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJzdHJpbmdcIn0sXCJib3VuZHNcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcIm51bWJlclwiLFwibGVuZ3RoXCI6NCxcImRlZmF1bHRcIjpbLTE4MCwtODUuMDUxMTI5LDE4MCw4NS4wNTExMjldfSxcIm1pbnpvb21cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowfSxcIm1heHpvb21cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoyMn0sXCJ0aWxlU2l6ZVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjUxMixcInVuaXRzXCI6XCJwaXhlbHNcIn0sXCJzY2hlbWVcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJ4eXpcIjp7fSxcInRtc1wiOnt9fSxcImRlZmF1bHRcIjpcInh5elwifSxcImF0dHJpYnV0aW9uXCI6e1widHlwZVwiOlwic3RyaW5nXCJ9LFwidm9sYXRpbGVcIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2V9LFwiKlwiOntcInR5cGVcIjpcIipcIn19LFwic291cmNlX3Jhc3Rlcl9kZW1cIjp7XCJ0eXBlXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wicmFzdGVyLWRlbVwiOnt9fX0sXCJ1cmxcIjp7XCJ0eXBlXCI6XCJzdHJpbmdcIn0sXCJ0aWxlc1wiOntcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwic3RyaW5nXCJ9LFwiYm91bmRzXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJudW1iZXJcIixcImxlbmd0aFwiOjQsXCJkZWZhdWx0XCI6Wy0xODAsLTg1LjA1MTEyOSwxODAsODUuMDUxMTI5XX0sXCJtaW56b29tXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MH0sXCJtYXh6b29tXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MjJ9LFwidGlsZVNpemVcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjo1MTIsXCJ1bml0c1wiOlwicGl4ZWxzXCJ9LFwiYXR0cmlidXRpb25cIjp7XCJ0eXBlXCI6XCJzdHJpbmdcIn0sXCJlbmNvZGluZ1wiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcInRlcnJhcml1bVwiOnt9LFwibWFwYm94XCI6e319LFwiZGVmYXVsdFwiOlwibWFwYm94XCJ9LFwidm9sYXRpbGVcIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2V9LFwiKlwiOntcInR5cGVcIjpcIipcIn19LFwic291cmNlX2dlb2pzb25cIjp7XCJ0eXBlXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wiZ2VvanNvblwiOnt9fX0sXCJkYXRhXCI6e1widHlwZVwiOlwiKlwifSxcIm1heHpvb21cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoxOH0sXCJhdHRyaWJ1dGlvblwiOntcInR5cGVcIjpcInN0cmluZ1wifSxcImJ1ZmZlclwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjEyOCxcIm1heGltdW1cIjo1MTIsXCJtaW5pbXVtXCI6MH0sXCJmaWx0ZXJcIjp7XCJ0eXBlXCI6XCIqXCJ9LFwidG9sZXJhbmNlXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MC4zNzV9LFwiY2x1c3RlclwiOntcInR5cGVcIjpcImJvb2xlYW5cIixcImRlZmF1bHRcIjpmYWxzZX0sXCJjbHVzdGVyUmFkaXVzXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6NTAsXCJtaW5pbXVtXCI6MH0sXCJjbHVzdGVyTWF4Wm9vbVwiOntcInR5cGVcIjpcIm51bWJlclwifSxcImNsdXN0ZXJNaW5Qb2ludHNcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIn0sXCJjbHVzdGVyUHJvcGVydGllc1wiOntcInR5cGVcIjpcIipcIn0sXCJsaW5lTWV0cmljc1wiOntcInR5cGVcIjpcImJvb2xlYW5cIixcImRlZmF1bHRcIjpmYWxzZX0sXCJnZW5lcmF0ZUlkXCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOmZhbHNlfSxcInByb21vdGVJZFwiOntcInR5cGVcIjpcInByb21vdGVJZFwifX0sXCJzb3VyY2VfdmlkZW9cIjp7XCJ0eXBlXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1widmlkZW9cIjp7fX19LFwidXJsc1wiOntcInJlcXVpcmVkXCI6dHJ1ZSxcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwic3RyaW5nXCJ9LFwiY29vcmRpbmF0ZXNcIjp7XCJyZXF1aXJlZFwiOnRydWUsXCJ0eXBlXCI6XCJhcnJheVwiLFwibGVuZ3RoXCI6NCxcInZhbHVlXCI6e1widHlwZVwiOlwiYXJyYXlcIixcImxlbmd0aFwiOjIsXCJ2YWx1ZVwiOlwibnVtYmVyXCJ9fX0sXCJzb3VyY2VfaW1hZ2VcIjp7XCJ0eXBlXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wiaW1hZ2VcIjp7fX19LFwidXJsXCI6e1wicmVxdWlyZWRcIjp0cnVlLFwidHlwZVwiOlwic3RyaW5nXCJ9LFwiY29vcmRpbmF0ZXNcIjp7XCJyZXF1aXJlZFwiOnRydWUsXCJ0eXBlXCI6XCJhcnJheVwiLFwibGVuZ3RoXCI6NCxcInZhbHVlXCI6e1widHlwZVwiOlwiYXJyYXlcIixcImxlbmd0aFwiOjIsXCJ2YWx1ZVwiOlwibnVtYmVyXCJ9fX0sXCJsYXllclwiOntcImlkXCI6e1widHlwZVwiOlwic3RyaW5nXCIsXCJyZXF1aXJlZFwiOnRydWV9LFwidHlwZVwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcImZpbGxcIjp7fSxcImxpbmVcIjp7fSxcInN5bWJvbFwiOnt9LFwiY2lyY2xlXCI6e30sXCJoZWF0bWFwXCI6e30sXCJmaWxsLWV4dHJ1c2lvblwiOnt9LFwicmFzdGVyXCI6e30sXCJoaWxsc2hhZGVcIjp7fSxcImJhY2tncm91bmRcIjp7fSxcInNreVwiOnt9fSxcInJlcXVpcmVkXCI6dHJ1ZX0sXCJtZXRhZGF0YVwiOntcInR5cGVcIjpcIipcIn0sXCJzb3VyY2VcIjp7XCJ0eXBlXCI6XCJzdHJpbmdcIn0sXCJzb3VyY2UtbGF5ZXJcIjp7XCJ0eXBlXCI6XCJzdHJpbmdcIn0sXCJtaW56b29tXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoyNH0sXCJtYXh6b29tXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoyNH0sXCJmaWx0ZXJcIjp7XCJ0eXBlXCI6XCJmaWx0ZXJcIn0sXCJsYXlvdXRcIjp7XCJ0eXBlXCI6XCJsYXlvdXRcIn0sXCJwYWludFwiOntcInR5cGVcIjpcInBhaW50XCJ9fSxcImxheW91dFwiOltcImxheW91dF9maWxsXCIsXCJsYXlvdXRfbGluZVwiLFwibGF5b3V0X2NpcmNsZVwiLFwibGF5b3V0X2hlYXRtYXBcIixcImxheW91dF9maWxsLWV4dHJ1c2lvblwiLFwibGF5b3V0X3N5bWJvbFwiLFwibGF5b3V0X3Jhc3RlclwiLFwibGF5b3V0X2hpbGxzaGFkZVwiLFwibGF5b3V0X2JhY2tncm91bmRcIixcImxheW91dF9za3lcIl0sXCJsYXlvdXRfYmFja2dyb3VuZFwiOntcInZpc2liaWxpdHlcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJ2aXNpYmxlXCI6e30sXCJub25lXCI6e319LFwiZGVmYXVsdFwiOlwidmlzaWJsZVwiLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LFwibGF5b3V0X3NreVwiOntcInZpc2liaWxpdHlcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJ2aXNpYmxlXCI6e30sXCJub25lXCI6e319LFwiZGVmYXVsdFwiOlwidmlzaWJsZVwiLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LFwibGF5b3V0X2ZpbGxcIjp7XCJmaWxsLXNvcnQta2V5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInZpc2liaWxpdHlcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJ2aXNpYmxlXCI6e30sXCJub25lXCI6e319LFwiZGVmYXVsdFwiOlwidmlzaWJsZVwiLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LFwibGF5b3V0X2NpcmNsZVwiOntcImNpcmNsZS1zb3J0LWtleVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJ2aXNpYmlsaXR5XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1widmlzaWJsZVwiOnt9LFwibm9uZVwiOnt9fSxcImRlZmF1bHRcIjpcInZpc2libGVcIixcInByb3BlcnR5LXR5cGVcIjpcImNvbnN0YW50XCJ9fSxcImxheW91dF9oZWF0bWFwXCI6e1widmlzaWJpbGl0eVwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcInZpc2libGVcIjp7fSxcIm5vbmVcIjp7fX0sXCJkZWZhdWx0XCI6XCJ2aXNpYmxlXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJjb25zdGFudFwifX0sXCJsYXlvdXRfZmlsbC1leHRydXNpb25cIjp7XCJ2aXNpYmlsaXR5XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1widmlzaWJsZVwiOnt9LFwibm9uZVwiOnt9fSxcImRlZmF1bHRcIjpcInZpc2libGVcIixcInByb3BlcnR5LXR5cGVcIjpcImNvbnN0YW50XCJ9LFwiZmlsbC1leHRydXNpb24tZWRnZS1yYWRpdXNcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcInByaXZhdGVcIjp0cnVlLFwiZGVmYXVsdFwiOjAsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxLFwicHJvcGVydHktdHlwZVwiOlwiY29uc3RhbnRcIn19LFwibGF5b3V0X2xpbmVcIjp7XCJsaW5lLWNhcFwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcImJ1dHRcIjp7fSxcInJvdW5kXCI6e30sXCJzcXVhcmVcIjp7fX0sXCJkZWZhdWx0XCI6XCJidXR0XCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImxpbmUtam9pblwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcImJldmVsXCI6e30sXCJyb3VuZFwiOnt9LFwibWl0ZXJcIjp7fX0sXCJkZWZhdWx0XCI6XCJtaXRlclwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLW1pdGVyLWxpbWl0XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MixcInJlcXVpcmVzXCI6W3tcImxpbmUtam9pblwiOlwibWl0ZXJcIn1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwibGluZS1yb3VuZC1saW1pdFwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjEuMDUsXCJyZXF1aXJlc1wiOlt7XCJsaW5lLWpvaW5cIjpcInJvdW5kXCJ9XSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImxpbmUtc29ydC1rZXlcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidmlzaWJpbGl0eVwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcInZpc2libGVcIjp7fSxcIm5vbmVcIjp7fX0sXCJkZWZhdWx0XCI6XCJ2aXNpYmxlXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJjb25zdGFudFwifX0sXCJsYXlvdXRfc3ltYm9sXCI6e1wic3ltYm9sLXBsYWNlbWVudFwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcInBvaW50XCI6e30sXCJsaW5lXCI6e30sXCJsaW5lLWNlbnRlclwiOnt9fSxcImRlZmF1bHRcIjpcInBvaW50XCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwic3ltYm9sLXNwYWNpbmdcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoyNTAsXCJtaW5pbXVtXCI6MSxcInVuaXRzXCI6XCJwaXhlbHNcIixcInJlcXVpcmVzXCI6W3tcInN5bWJvbC1wbGFjZW1lbnRcIjpcImxpbmVcIn1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwic3ltYm9sLWF2b2lkLWVkZ2VzXCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInN5bWJvbC1zb3J0LWtleVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJzeW1ib2wtei1vcmRlclwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcImF1dG9cIjp7fSxcInZpZXdwb3J0LXlcIjp7fSxcInNvdXJjZVwiOnt9fSxcImRlZmF1bHRcIjpcImF1dG9cIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJpY29uLWFsbG93LW92ZXJsYXBcIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2UsXCJyZXF1aXJlc1wiOltcImljb24taW1hZ2VcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaWNvbi1pZ25vcmUtcGxhY2VtZW50XCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOmZhbHNlLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24tb3B0aW9uYWxcIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2UsXCJyZXF1aXJlc1wiOltcImljb24taW1hZ2VcIixcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnRcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJtYXBcIjp7fSxcInZpZXdwb3J0XCI6e30sXCJhdXRvXCI6e319LFwiZGVmYXVsdFwiOlwiYXV0b1wiLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24tc2l6ZVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjEsXCJtaW5pbXVtXCI6MCxcInVuaXRzXCI6XCJmYWN0b3Igb2YgdGhlIG9yaWdpbmFsIGljb24gc2l6ZVwiLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24tdGV4dC1maXRcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJub25lXCI6e30sXCJ3aWR0aFwiOnt9LFwiaGVpZ2h0XCI6e30sXCJib3RoXCI6e319LFwiZGVmYXVsdFwiOlwibm9uZVwiLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCIsXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImljb24tdGV4dC1maXQtcGFkZGluZ1wiOntcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwibnVtYmVyXCIsXCJsZW5ndGhcIjo0LFwiZGVmYXVsdFwiOlswLDAsMCwwXSxcInVuaXRzXCI6XCJwaXhlbHNcIixcInJlcXVpcmVzXCI6W1wiaWNvbi1pbWFnZVwiLFwidGV4dC1maWVsZFwiLHtcImljb24tdGV4dC1maXRcIjpbXCJib3RoXCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdfV0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJpY29uLWltYWdlXCI6e1widHlwZVwiOlwicmVzb2x2ZWRJbWFnZVwiLFwidG9rZW5zXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi1yb3RhdGVcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowLFwicGVyaW9kXCI6MzYwLFwidW5pdHNcIjpcImRlZ3JlZXNcIixcInJlcXVpcmVzXCI6W1wiaWNvbi1pbWFnZVwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJpY29uLXBhZGRpbmdcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoyLFwibWluaW11bVwiOjAsXCJ1bml0c1wiOlwicGl4ZWxzXCIsXCJyZXF1aXJlc1wiOltcImljb24taW1hZ2VcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJpY29uLWtlZXAtdXByaWdodFwiOntcInR5cGVcIjpcImJvb2xlYW5cIixcImRlZmF1bHRcIjpmYWxzZSxcInJlcXVpcmVzXCI6W1wiaWNvbi1pbWFnZVwiLHtcImljb24tcm90YXRpb24tYWxpZ25tZW50XCI6XCJtYXBcIn0se1wic3ltYm9sLXBsYWNlbWVudFwiOltcImxpbmVcIixcImxpbmUtY2VudGVyXCJdfV0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaWNvbi1vZmZzZXRcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcIm51bWJlclwiLFwibGVuZ3RoXCI6MixcImRlZmF1bHRcIjpbMCwwXSxcInJlcXVpcmVzXCI6W1wiaWNvbi1pbWFnZVwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJpY29uLWFuY2hvclwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcImNlbnRlclwiOnt9LFwibGVmdFwiOnt9LFwicmlnaHRcIjp7fSxcInRvcFwiOnt9LFwiYm90dG9tXCI6e30sXCJ0b3AtbGVmdFwiOnt9LFwidG9wLXJpZ2h0XCI6e30sXCJib3R0b20tbGVmdFwiOnt9LFwiYm90dG9tLXJpZ2h0XCI6e319LFwiZGVmYXVsdFwiOlwiY2VudGVyXCIsXCJyZXF1aXJlc1wiOltcImljb24taW1hZ2VcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24tcGl0Y2gtYWxpZ25tZW50XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wibWFwXCI6e30sXCJ2aWV3cG9ydFwiOnt9LFwiYXV0b1wiOnt9fSxcImRlZmF1bHRcIjpcImF1dG9cIixcInJlcXVpcmVzXCI6W1wiaWNvbi1pbWFnZVwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJ0ZXh0LXBpdGNoLWFsaWdubWVudFwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcIm1hcFwiOnt9LFwidmlld3BvcnRcIjp7fSxcImF1dG9cIjp7fX0sXCJkZWZhdWx0XCI6XCJhdXRvXCIsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJtYXBcIjp7fSxcInZpZXdwb3J0XCI6e30sXCJhdXRvXCI6e319LFwiZGVmYXVsdFwiOlwiYXV0b1wiLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQtZmllbGRcIjp7XCJ0eXBlXCI6XCJmb3JtYXR0ZWRcIixcImRlZmF1bHRcIjpcIlwiLFwidG9rZW5zXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1mb250XCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJzdHJpbmdcIixcImRlZmF1bHRcIjpbXCJPcGVuIFNhbnMgUmVndWxhclwiLFwiQXJpYWwgVW5pY29kZSBNUyBSZWd1bGFyXCJdLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJ0ZXh0LXNpemVcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoxNixcIm1pbmltdW1cIjowLFwidW5pdHNcIjpcInBpeGVsc1wiLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtbWF4LXdpZHRoXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MTAsXCJtaW5pbXVtXCI6MCxcInVuaXRzXCI6XCJlbXNcIixcInJlcXVpcmVzXCI6W1widGV4dC1maWVsZFwiLHtcInN5bWJvbC1wbGFjZW1lbnRcIjpbXCJwb2ludFwiXX1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtbGluZS1oZWlnaHRcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoxLjIsXCJ1bml0c1wiOlwiZW1zXCIsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1sZXR0ZXItc3BhY2luZ1wiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJ1bml0c1wiOlwiZW1zXCIsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1qdXN0aWZ5XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wiYXV0b1wiOnt9LFwibGVmdFwiOnt9LFwiY2VudGVyXCI6e30sXCJyaWdodFwiOnt9fSxcImRlZmF1bHRcIjpcImNlbnRlclwiLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJ0ZXh0LXJhZGlhbC1vZmZzZXRcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcInVuaXRzXCI6XCJlbXNcIixcImRlZmF1bHRcIjowLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19fSxcInRleHQtdmFyaWFibGUtYW5jaG9yXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJjZW50ZXJcIjp7fSxcImxlZnRcIjp7fSxcInJpZ2h0XCI6e30sXCJ0b3BcIjp7fSxcImJvdHRvbVwiOnt9LFwidG9wLWxlZnRcIjp7fSxcInRvcC1yaWdodFwiOnt9LFwiYm90dG9tLWxlZnRcIjp7fSxcImJvdHRvbS1yaWdodFwiOnt9fSxcInJlcXVpcmVzXCI6W1widGV4dC1maWVsZFwiLHtcInN5bWJvbC1wbGFjZW1lbnRcIjpbXCJwb2ludFwiXX1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQtYW5jaG9yXCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wiY2VudGVyXCI6e30sXCJsZWZ0XCI6e30sXCJyaWdodFwiOnt9LFwidG9wXCI6e30sXCJib3R0b21cIjp7fSxcInRvcC1sZWZ0XCI6e30sXCJ0b3AtcmlnaHRcIjp7fSxcImJvdHRvbS1sZWZ0XCI6e30sXCJib3R0b20tcmlnaHRcIjp7fX0sXCJkZWZhdWx0XCI6XCJjZW50ZXJcIixcInJlcXVpcmVzXCI6W1widGV4dC1maWVsZFwiLHtcIiFcIjpcInRleHQtdmFyaWFibGUtYW5jaG9yXCJ9XSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1tYXgtYW5nbGVcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjo0NSxcInVuaXRzXCI6XCJkZWdyZWVzXCIsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIix7XCJzeW1ib2wtcGxhY2VtZW50XCI6W1wibGluZVwiLFwibGluZS1jZW50ZXJcIl19XSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQtd3JpdGluZy1tb2RlXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJob3Jpem9udGFsXCI6e30sXCJ2ZXJ0aWNhbFwiOnt9fSxcInJlcXVpcmVzXCI6W1widGV4dC1maWVsZFwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJ0ZXh0LXJvdGF0ZVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJwZXJpb2RcIjozNjAsXCJ1bml0c1wiOlwiZGVncmVlc1wiLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtcGFkZGluZ1wiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjIsXCJtaW5pbXVtXCI6MCxcInVuaXRzXCI6XCJwaXhlbHNcIixcInJlcXVpcmVzXCI6W1widGV4dC1maWVsZFwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQta2VlcC11cHJpZ2h0XCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOnRydWUsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIix7XCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiOlwibWFwXCJ9LHtcInN5bWJvbC1wbGFjZW1lbnRcIjpbXCJsaW5lXCIsXCJsaW5lLWNlbnRlclwiXX1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInRleHQtdHJhbnNmb3JtXCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wibm9uZVwiOnt9LFwidXBwZXJjYXNlXCI6e30sXCJsb3dlcmNhc2VcIjp7fX0sXCJkZWZhdWx0XCI6XCJub25lXCIsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtb2Zmc2V0XCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJudW1iZXJcIixcInVuaXRzXCI6XCJlbXNcIixcImxlbmd0aFwiOjIsXCJkZWZhdWx0XCI6WzAsMF0sXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIix7XCIhXCI6XCJ0ZXh0LXJhZGlhbC1vZmZzZXRcIn1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtYWxsb3ctb3ZlcmxhcFwiOntcInR5cGVcIjpcImJvb2xlYW5cIixcImRlZmF1bHRcIjpmYWxzZSxcInJlcXVpcmVzXCI6W1widGV4dC1maWVsZFwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnRcIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2UsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC1vcHRpb25hbFwiOntcInR5cGVcIjpcImJvb2xlYW5cIixcImRlZmF1bHRcIjpmYWxzZSxcInJlcXVpcmVzXCI6W1widGV4dC1maWVsZFwiLFwiaWNvbi1pbWFnZVwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJ2aXNpYmlsaXR5XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1widmlzaWJsZVwiOnt9LFwibm9uZVwiOnt9fSxcImRlZmF1bHRcIjpcInZpc2libGVcIixcInByb3BlcnR5LXR5cGVcIjpcImNvbnN0YW50XCJ9fSxcImxheW91dF9yYXN0ZXJcIjp7XCJ2aXNpYmlsaXR5XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1widmlzaWJsZVwiOnt9LFwibm9uZVwiOnt9fSxcImRlZmF1bHRcIjpcInZpc2libGVcIixcInByb3BlcnR5LXR5cGVcIjpcImNvbnN0YW50XCJ9fSxcImxheW91dF9oaWxsc2hhZGVcIjp7XCJ2aXNpYmlsaXR5XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1widmlzaWJsZVwiOnt9LFwibm9uZVwiOnt9fSxcImRlZmF1bHRcIjpcInZpc2libGVcIixcInByb3BlcnR5LXR5cGVcIjpcImNvbnN0YW50XCJ9fSxcImZpbHRlclwiOntcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwiKlwifSxcImZpbHRlcl9zeW1ib2xcIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2UsXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcInBpdGNoXCIsXCJkaXN0YW5jZS1mcm9tLWNlbnRlclwiXX19LFwiZmlsdGVyX2ZpbGxcIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2UsXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19fSxcImZpbHRlcl9saW5lXCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOmZhbHNlLFwidHJhbnNpdGlvblwiOmZhbHNlLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfX0sXCJmaWx0ZXJfY2lyY2xlXCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOmZhbHNlLFwidHJhbnNpdGlvblwiOmZhbHNlLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfX0sXCJmaWx0ZXJfZmlsbC1leHRydXNpb25cIjp7XCJ0eXBlXCI6XCJib29sZWFuXCIsXCJkZWZhdWx0XCI6ZmFsc2UsXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19fSxcImZpbHRlcl9oZWF0bWFwXCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOmZhbHNlLFwidHJhbnNpdGlvblwiOmZhbHNlLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCJdfX0sXCJmaWx0ZXJfb3BlcmF0b3JcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCI9PVwiOnt9LFwiIT1cIjp7fSxcIj5cIjp7fSxcIj49XCI6e30sXCI8XCI6e30sXCI8PVwiOnt9LFwiaW5cIjp7fSxcIiFpblwiOnt9LFwiYWxsXCI6e30sXCJhbnlcIjp7fSxcIm5vbmVcIjp7fSxcImhhc1wiOnt9LFwiIWhhc1wiOnt9LFwid2l0aGluXCI6e319fSxcImdlb21ldHJ5X3R5cGVcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJQb2ludFwiOnt9LFwiTGluZVN0cmluZ1wiOnt9LFwiUG9seWdvblwiOnt9fX0sXCJmdW5jdGlvblwiOntcImV4cHJlc3Npb25cIjp7XCJ0eXBlXCI6XCJleHByZXNzaW9uXCJ9LFwic3RvcHNcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcImZ1bmN0aW9uX3N0b3BcIn0sXCJiYXNlXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowfSxcInByb3BlcnR5XCI6e1widHlwZVwiOlwic3RyaW5nXCIsXCJkZWZhdWx0XCI6XCIkem9vbVwifSxcInR5cGVcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJpZGVudGl0eVwiOnt9LFwiZXhwb25lbnRpYWxcIjp7fSxcImludGVydmFsXCI6e30sXCJjYXRlZ29yaWNhbFwiOnt9fSxcImRlZmF1bHRcIjpcImV4cG9uZW50aWFsXCJ9LFwiY29sb3JTcGFjZVwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcInJnYlwiOnt9LFwibGFiXCI6e30sXCJoY2xcIjp7fX0sXCJkZWZhdWx0XCI6XCJyZ2JcIn0sXCJkZWZhdWx0XCI6e1widHlwZVwiOlwiKlwiLFwicmVxdWlyZWRcIjpmYWxzZX19LFwiZnVuY3Rpb25fc3RvcFwiOntcInR5cGVcIjpcImFycmF5XCIsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoyNCxcInZhbHVlXCI6W1wibnVtYmVyXCIsXCJjb2xvclwiXSxcImxlbmd0aFwiOjJ9LFwiZXhwcmVzc2lvblwiOntcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwiKlwiLFwibWluaW11bVwiOjF9LFwiZm9nXCI6e1wicmFuZ2VcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwiZGVmYXVsdFwiOlswLjUsMTBdLFwibWluaW11bVwiOi0yMCxcIm1heGltdW1cIjoyMCxcImxlbmd0aFwiOjIsXCJ2YWx1ZVwiOlwibnVtYmVyXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCIsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19fSxcImNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcImRlZmF1bHRcIjpcIiNmZmZmZmZcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwidHJhbnNpdGlvblwiOnRydWV9LFwiaGlnaC1jb2xvclwiOntcInR5cGVcIjpcImNvbG9yXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCIsXCJkZWZhdWx0XCI6XCIjMjQ1Y2RmXCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInRyYW5zaXRpb25cIjp0cnVlfSxcInNwYWNlLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcImRlZmF1bHRcIjpbXCJpbnRlcnBvbGF0ZVwiLFtcImxpbmVhclwiXSxbXCJ6b29tXCJdLDQsXCIjMDEwYjE5XCIsNyxcIiMzNjdhYjlcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInRyYW5zaXRpb25cIjp0cnVlfSxcImhvcml6b24tYmxlbmRcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcImRlZmF1bHRcIjpbXCJpbnRlcnBvbGF0ZVwiLFtcImxpbmVhclwiXSxbXCJ6b29tXCJdLDQsMC4yLDcsMC4xXSxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInRyYW5zaXRpb25cIjp0cnVlfSxcInN0YXItaW50ZW5zaXR5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCIsXCJkZWZhdWx0XCI6W1wiaW50ZXJwb2xhdGVcIixbXCJsaW5lYXJcIl0sW1wiem9vbVwiXSw1LDAuMzUsNiwwXSxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInRyYW5zaXRpb25cIjp0cnVlfX0sXCJsaWdodFwiOntcImFuY2hvclwiOntcInR5cGVcIjpcImVudW1cIixcImRlZmF1bHRcIjpcInZpZXdwb3J0XCIsXCJ2YWx1ZXNcIjp7XCJtYXBcIjp7fSxcInZpZXdwb3J0XCI6e319LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwiLFwidHJhbnNpdGlvblwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19fSxcInBvc2l0aW9uXCI6e1widHlwZVwiOlwiYXJyYXlcIixcImRlZmF1bHRcIjpbMS4xNSwyMTAsMzBdLFwibGVuZ3RoXCI6MyxcInZhbHVlXCI6XCJudW1iZXJcIixcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcInRyYW5zaXRpb25cIjp0cnVlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX19LFwiY29sb3JcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwiLFwiZGVmYXVsdFwiOlwiI2ZmZmZmZlwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJ0cmFuc2l0aW9uXCI6dHJ1ZX0sXCJpbnRlbnNpdHlcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcImRlZmF1bHRcIjowLjUsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJ0cmFuc2l0aW9uXCI6dHJ1ZX19LFwicHJvamVjdGlvblwiOntcIm5hbWVcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJhbGJlcnNcIjp7fSxcImVxdWFsRWFydGhcIjp7fSxcImVxdWlyZWN0YW5ndWxhclwiOnt9LFwibGFtYmVydENvbmZvcm1hbENvbmljXCI6e30sXCJtZXJjYXRvclwiOnt9LFwibmF0dXJhbEVhcnRoXCI6e30sXCJ3aW5rZWxUcmlwZWxcIjp7fSxcImdsb2JlXCI6e319LFwiZGVmYXVsdFwiOlwibWVyY2F0b3JcIixcInJlcXVpcmVkXCI6dHJ1ZX0sXCJjZW50ZXJcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwibGVuZ3RoXCI6MixcInZhbHVlXCI6XCJudW1iZXJcIixcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcIm1pbmltdW1cIjpbLTE4MCwtOTBdLFwibWF4aW11bVwiOlsxODAsOTBdLFwidHJhbnNpdGlvblwiOmZhbHNlLFwicmVxdWlyZXNcIjpbe1wibmFtZVwiOltcImFsYmVyc1wiLFwibGFtYmVydENvbmZvcm1hbENvbmljXCJdfV19LFwicGFyYWxsZWxzXCI6e1widHlwZVwiOlwiYXJyYXlcIixcImxlbmd0aFwiOjIsXCJ2YWx1ZVwiOlwibnVtYmVyXCIsXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCIsXCJtaW5pbXVtXCI6Wy05MCwtOTBdLFwibWF4aW11bVwiOls5MCw5MF0sXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJyZXF1aXJlc1wiOlt7XCJuYW1lXCI6W1wiYWxiZXJzXCIsXCJsYW1iZXJ0Q29uZm9ybWFsQ29uaWNcIl19XX19LFwidGVycmFpblwiOntcInNvdXJjZVwiOntcInR5cGVcIjpcInN0cmluZ1wiLFwicmVxdWlyZWRcIjp0cnVlfSxcImV4YWdnZXJhdGlvblwiOntcInR5cGVcIjpcIm51bWJlclwiLFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwiLFwiZGVmYXVsdFwiOjEsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxMDAwLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcInJlcXVpcmVzXCI6W1wic291cmNlXCJdfX0sXCJwYWludFwiOltcInBhaW50X2ZpbGxcIixcInBhaW50X2xpbmVcIixcInBhaW50X2NpcmNsZVwiLFwicGFpbnRfaGVhdG1hcFwiLFwicGFpbnRfZmlsbC1leHRydXNpb25cIixcInBhaW50X3N5bWJvbFwiLFwicGFpbnRfcmFzdGVyXCIsXCJwYWludF9oaWxsc2hhZGVcIixcInBhaW50X2JhY2tncm91bmRcIixcInBhaW50X3NreVwiXSxcInBhaW50X2ZpbGxcIjp7XCJmaWxsLWFudGlhbGlhc1wiOntcInR5cGVcIjpcImJvb2xlYW5cIixcImRlZmF1bHRcIjp0cnVlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtb3BhY2l0eVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjEsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiZmlsbC1jb2xvclwiOntcInR5cGVcIjpcImNvbG9yXCIsXCJkZWZhdWx0XCI6XCIjMDAwMDAwXCIsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcInJlcXVpcmVzXCI6W3tcIiFcIjpcImZpbGwtcGF0dGVyblwifV0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiZmlsbC1vdXRsaW5lLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcInRyYW5zaXRpb25cIjp0cnVlLFwicmVxdWlyZXNcIjpbe1wiIVwiOlwiZmlsbC1wYXR0ZXJuXCJ9LHtcImZpbGwtYW50aWFsaWFzXCI6dHJ1ZX1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImZpbGwtdHJhbnNsYXRlXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJudW1iZXJcIixcImxlbmd0aFwiOjIsXCJkZWZhdWx0XCI6WzAsMF0sXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcInVuaXRzXCI6XCJwaXhlbHNcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtdHJhbnNsYXRlLWFuY2hvclwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcIm1hcFwiOnt9LFwidmlld3BvcnRcIjp7fX0sXCJkZWZhdWx0XCI6XCJtYXBcIixcInJlcXVpcmVzXCI6W1wiZmlsbC10cmFuc2xhdGVcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiZmlsbC1wYXR0ZXJuXCI6e1widHlwZVwiOlwicmVzb2x2ZWRJbWFnZVwiLFwidHJhbnNpdGlvblwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn19LFwicGFpbnRfZmlsbC1leHRydXNpb25cIjp7XCJmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtZXh0cnVzaW9uLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpcIiMwMDAwMDBcIixcInRyYW5zaXRpb25cIjp0cnVlLFwicmVxdWlyZXNcIjpbe1wiIVwiOlwiZmlsbC1leHRydXNpb24tcGF0dGVyblwifV0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJudW1iZXJcIixcImxlbmd0aFwiOjIsXCJkZWZhdWx0XCI6WzAsMF0sXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcInVuaXRzXCI6XCJwaXhlbHNcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZS1hbmNob3JcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJtYXBcIjp7fSxcInZpZXdwb3J0XCI6e319LFwiZGVmYXVsdFwiOlwibWFwXCIsXCJyZXF1aXJlc1wiOltcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZVwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCI6e1widHlwZVwiOlwicmVzb2x2ZWRJbWFnZVwiLFwidHJhbnNpdGlvblwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJmaWxsLWV4dHJ1c2lvbi1oZWlnaHRcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowLFwibWluaW11bVwiOjAsXCJ1bml0c1wiOlwibWV0ZXJzXCIsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcImZlYXR1cmUtc3RhdGVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJmaWxsLWV4dHJ1c2lvbi1iYXNlXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcIm1pbmltdW1cIjowLFwidW5pdHNcIjpcIm1ldGVyc1wiLFwidHJhbnNpdGlvblwiOnRydWUsXCJyZXF1aXJlc1wiOltcImZpbGwtZXh0cnVzaW9uLWhlaWdodFwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcImZlYXR1cmUtc3RhdGVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJmaWxsLWV4dHJ1c2lvbi12ZXJ0aWNhbC1ncmFkaWVudFwiOntcInR5cGVcIjpcImJvb2xlYW5cIixcImRlZmF1bHRcIjp0cnVlLFwidHJhbnNpdGlvblwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImZpbGwtZXh0cnVzaW9uLWFtYmllbnQtb2NjbHVzaW9uLWludGVuc2l0eVwiOntcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcInR5cGVcIjpcIm51bWJlclwiLFwicHJpdmF0ZVwiOnRydWUsXCJkZWZhdWx0XCI6MCxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInRyYW5zaXRpb25cIjp0cnVlfSxcImZpbGwtZXh0cnVzaW9uLWFtYmllbnQtb2NjbHVzaW9uLXJhZGl1c1wiOntcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIixcInR5cGVcIjpcIm51bWJlclwiLFwicHJpdmF0ZVwiOnRydWUsXCJkZWZhdWx0XCI6MyxcIm1pbmltdW1cIjowLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcInJlcXVpcmVzXCI6W1wiZmlsbC1leHRydXNpb24tZWRnZS1yYWRpdXNcIl19LFwiZmlsbC1leHRydXNpb24tcm91bmRlZC1yb29mXCI6e1widHlwZVwiOlwiYm9vbGVhblwiLFwiZGVmYXVsdFwiOnRydWUsXCJyZXF1aXJlc1wiOltcImZpbGwtZXh0cnVzaW9uLWVkZ2UtcmFkaXVzXCJdLFwidHJhbnNpdGlvblwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifX0sXCJwYWludF9saW5lXCI6e1wibGluZS1vcGFjaXR5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcImZlYXR1cmUtc3RhdGVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpcIiMwMDAwMDBcIixcInRyYW5zaXRpb25cIjp0cnVlLFwicmVxdWlyZXNcIjpbe1wiIVwiOlwibGluZS1wYXR0ZXJuXCJ9XSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcImZlYXR1cmUtc3RhdGVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLXRyYW5zbGF0ZVwiOntcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwibnVtYmVyXCIsXCJsZW5ndGhcIjoyLFwiZGVmYXVsdFwiOlswLDBdLFwidHJhbnNpdGlvblwiOnRydWUsXCJ1bml0c1wiOlwicGl4ZWxzXCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJsaW5lLXRyYW5zbGF0ZS1hbmNob3JcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJtYXBcIjp7fSxcInZpZXdwb3J0XCI6e319LFwiZGVmYXVsdFwiOlwibWFwXCIsXCJyZXF1aXJlc1wiOltcImxpbmUtdHJhbnNsYXRlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImxpbmUtd2lkdGhcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoxLFwibWluaW11bVwiOjAsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcInVuaXRzXCI6XCJwaXhlbHNcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcImZlYXR1cmUtc3RhdGVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLWdhcC13aWR0aFwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJtaW5pbXVtXCI6MCxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImxpbmUtb2Zmc2V0XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImxpbmUtYmx1clwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJtaW5pbXVtXCI6MCxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImxpbmUtZGFzaGFycmF5XCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJudW1iZXJcIixcIm1pbmltdW1cIjowLFwidHJhbnNpdGlvblwiOmZhbHNlLFwidW5pdHNcIjpcImxpbmUgd2lkdGhzXCIsXCJyZXF1aXJlc1wiOlt7XCIhXCI6XCJsaW5lLXBhdHRlcm5cIn1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJsaW5lLXBhdHRlcm5cIjp7XCJ0eXBlXCI6XCJyZXNvbHZlZEltYWdlXCIsXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImxpbmUtZ3JhZGllbnRcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwidHJhbnNpdGlvblwiOmZhbHNlLFwicmVxdWlyZXNcIjpbe1wiIVwiOlwibGluZS1wYXR0ZXJuXCJ9LHtcInNvdXJjZVwiOlwiZ2VvanNvblwiLFwiaGFzXCI6e1wibGluZU1ldHJpY3NcIjp0cnVlfX1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wibGluZS1wcm9ncmVzc1wiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJjb2xvci1yYW1wXCJ9LFwibGluZS10cmltLW9mZnNldFwiOntcInR5cGVcIjpcImFycmF5XCIsXCJ2YWx1ZVwiOlwibnVtYmVyXCIsXCJsZW5ndGhcIjoyLFwiZGVmYXVsdFwiOlswLDBdLFwibWluaW11bVwiOlswLDBdLFwibWF4aW11bVwiOlsxLDFdLFwidHJhbnNpdGlvblwiOmZhbHNlLFwicmVxdWlyZXNcIjpbe1wic291cmNlXCI6XCJnZW9qc29uXCIsXCJoYXNcIjp7XCJsaW5lTWV0cmljc1wiOnRydWV9fV0sXCJwcm9wZXJ0eS10eXBlXCI6XCJjb25zdGFudFwifX0sXCJwYWludF9jaXJjbGVcIjp7XCJjaXJjbGUtcmFkaXVzXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6NSxcIm1pbmltdW1cIjowLFwidHJhbnNpdGlvblwiOnRydWUsXCJ1bml0c1wiOlwicGl4ZWxzXCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiY2lyY2xlLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpcIiMwMDAwMDBcIixcInRyYW5zaXRpb25cIjp0cnVlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImNpcmNsZS1ibHVyXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcInRyYW5zaXRpb25cIjp0cnVlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImNpcmNsZS1vcGFjaXR5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcImZlYXR1cmUtc3RhdGVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn0sXCJjaXJjbGUtdHJhbnNsYXRlXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInZhbHVlXCI6XCJudW1iZXJcIixcImxlbmd0aFwiOjIsXCJkZWZhdWx0XCI6WzAsMF0sXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcInVuaXRzXCI6XCJwaXhlbHNcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImNpcmNsZS10cmFuc2xhdGUtYW5jaG9yXCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wibWFwXCI6e30sXCJ2aWV3cG9ydFwiOnt9fSxcImRlZmF1bHRcIjpcIm1hcFwiLFwicmVxdWlyZXNcIjpbXCJjaXJjbGUtdHJhbnNsYXRlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImNpcmNsZS1waXRjaC1zY2FsZVwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcIm1hcFwiOnt9LFwidmlld3BvcnRcIjp7fX0sXCJkZWZhdWx0XCI6XCJtYXBcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJjaXJjbGUtcGl0Y2gtYWxpZ25tZW50XCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wibWFwXCI6e30sXCJ2aWV3cG9ydFwiOnt9fSxcImRlZmF1bHRcIjpcInZpZXdwb3J0XCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiY2lyY2xlLXN0cm9rZS13aWR0aFwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJtaW5pbXVtXCI6MCxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImNpcmNsZS1zdHJva2UtY29sb3JcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwiZGVmYXVsdFwiOlwiIzAwMDAwMFwiLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiY2lyY2xlLXN0cm9rZS1vcGFjaXR5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIixcImZlYXR1cmVcIixcImZlYXR1cmUtc3RhdGVcIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1kcml2ZW5cIn19LFwicGFpbnRfaGVhdG1hcFwiOntcImhlYXRtYXAtcmFkaXVzXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MzAsXCJtaW5pbXVtXCI6MSxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImhlYXRtYXAtd2VpZ2h0XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowLFwidHJhbnNpdGlvblwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImhlYXRtYXAtaW50ZW5zaXR5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJoZWF0bWFwLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpbXCJpbnRlcnBvbGF0ZVwiLFtcImxpbmVhclwiXSxbXCJoZWF0bWFwLWRlbnNpdHlcIl0sMCxcInJnYmEoMCwgMCwgMjU1LCAwKVwiLDAuMSxcInJveWFsYmx1ZVwiLDAuMyxcImN5YW5cIiwwLjUsXCJsaW1lXCIsMC43LFwieWVsbG93XCIsMSxcInJlZFwiXSxcInRyYW5zaXRpb25cIjpmYWxzZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcImhlYXRtYXAtZGVuc2l0eVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJjb2xvci1yYW1wXCJ9LFwiaGVhdG1hcC1vcGFjaXR5XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MSxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifX0sXCJwYWludF9zeW1ib2xcIjp7XCJpY29uLW9wYWNpdHlcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoxLFwibWluaW11bVwiOjAsXCJtYXhpbXVtXCI6MSxcInRyYW5zaXRpb25cIjp0cnVlLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24tY29sb3JcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwiZGVmYXVsdFwiOlwiIzAwMDAwMFwiLFwidHJhbnNpdGlvblwiOnRydWUsXCJyZXF1aXJlc1wiOltcImljb24taW1hZ2VcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi1oYWxvLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpcInJnYmEoMCwgMCwgMCwgMClcIixcInRyYW5zaXRpb25cIjp0cnVlLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24taGFsby13aWR0aFwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJtaW5pbXVtXCI6MCxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcImljb24taGFsby1ibHVyXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcIm1pbmltdW1cIjowLFwidHJhbnNpdGlvblwiOnRydWUsXCJ1bml0c1wiOlwicGl4ZWxzXCIsXCJyZXF1aXJlc1wiOltcImljb24taW1hZ2VcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwiaWNvbi10cmFuc2xhdGVcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcIm51bWJlclwiLFwibGVuZ3RoXCI6MixcImRlZmF1bHRcIjpbMCwwXSxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaWNvbi10cmFuc2xhdGUtYW5jaG9yXCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wibWFwXCI6e30sXCJ2aWV3cG9ydFwiOnt9fSxcImRlZmF1bHRcIjpcIm1hcFwiLFwicmVxdWlyZXNcIjpbXCJpY29uLWltYWdlXCIsXCJpY29uLXRyYW5zbGF0ZVwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJ0ZXh0LW9wYWNpdHlcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoxLFwibWluaW11bVwiOjAsXCJtYXhpbXVtXCI6MSxcInRyYW5zaXRpb25cIjp0cnVlLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtY29sb3JcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwiZGVmYXVsdFwiOlwiIzAwMDAwMFwiLFwidHJhbnNpdGlvblwiOnRydWUsXCJvdmVycmlkYWJsZVwiOnRydWUsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC1oYWxvLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpcInJnYmEoMCwgMCwgMCwgMClcIixcInRyYW5zaXRpb25cIjp0cnVlLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtaGFsby13aWR0aFwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJtaW5pbXVtXCI6MCxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiLFwiZmVhdHVyZVwiLFwiZmVhdHVyZS1zdGF0ZVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWRyaXZlblwifSxcInRleHQtaGFsby1ibHVyXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcIm1pbmltdW1cIjowLFwidHJhbnNpdGlvblwiOnRydWUsXCJ1bml0c1wiOlwicGl4ZWxzXCIsXCJyZXF1aXJlc1wiOltcInRleHQtZmllbGRcIl0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCIsXCJmZWF0dXJlXCIsXCJmZWF0dXJlLXN0YXRlXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCJ9LFwidGV4dC10cmFuc2xhdGVcIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcIm51bWJlclwiLFwibGVuZ3RoXCI6MixcImRlZmF1bHRcIjpbMCwwXSxcInRyYW5zaXRpb25cIjp0cnVlLFwidW5pdHNcIjpcInBpeGVsc1wiLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCJdLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwidGV4dC10cmFuc2xhdGUtYW5jaG9yXCI6e1widHlwZVwiOlwiZW51bVwiLFwidmFsdWVzXCI6e1wibWFwXCI6e30sXCJ2aWV3cG9ydFwiOnt9fSxcImRlZmF1bHRcIjpcIm1hcFwiLFwicmVxdWlyZXNcIjpbXCJ0ZXh0LWZpZWxkXCIsXCJ0ZXh0LXRyYW5zbGF0ZVwiXSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn19LFwicGFpbnRfcmFzdGVyXCI6e1wicmFzdGVyLW9wYWNpdHlcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjoxLFwibWluaW11bVwiOjAsXCJtYXhpbXVtXCI6MSxcInRyYW5zaXRpb25cIjp0cnVlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwicmFzdGVyLWh1ZS1yb3RhdGVcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowLFwicGVyaW9kXCI6MzYwLFwidHJhbnNpdGlvblwiOnRydWUsXCJ1bml0c1wiOlwiZGVncmVlc1wiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwicmFzdGVyLWJyaWdodG5lc3MtbWluXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInJhc3Rlci1icmlnaHRuZXNzLW1heFwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjEsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJyYXN0ZXItc2F0dXJhdGlvblwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjAsXCJtaW5pbXVtXCI6LTEsXCJtYXhpbXVtXCI6MSxcInRyYW5zaXRpb25cIjp0cnVlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwicmFzdGVyLWNvbnRyYXN0XCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MCxcIm1pbmltdW1cIjotMSxcIm1heGltdW1cIjoxLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJyYXN0ZXItcmVzYW1wbGluZ1wiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcImxpbmVhclwiOnt9LFwibmVhcmVzdFwiOnt9fSxcImRlZmF1bHRcIjpcImxpbmVhclwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInJhc3Rlci1mYWRlLWR1cmF0aW9uXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MzAwLFwibWluaW11bVwiOjAsXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJ1bml0c1wiOlwibWlsbGlzZWNvbmRzXCIsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn19LFwicGFpbnRfaGlsbHNoYWRlXCI6e1wiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1kaXJlY3Rpb25cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjozMzUsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjozNTksXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWFuY2hvclwiOntcInR5cGVcIjpcImVudW1cIixcInZhbHVlc1wiOntcIm1hcFwiOnt9LFwidmlld3BvcnRcIjp7fX0sXCJkZWZhdWx0XCI6XCJ2aWV3cG9ydFwiLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImhpbGxzaGFkZS1leGFnZ2VyYXRpb25cIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowLjUsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJoaWxsc2hhZGUtc2hhZG93LWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpcIiMwMDAwMDBcIixcInRyYW5zaXRpb25cIjp0cnVlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiaGlsbHNoYWRlLWhpZ2hsaWdodC1jb2xvclwiOntcInR5cGVcIjpcImNvbG9yXCIsXCJkZWZhdWx0XCI6XCIjRkZGRkZGXCIsXCJ0cmFuc2l0aW9uXCI6dHJ1ZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjp0cnVlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImhpbGxzaGFkZS1hY2NlbnQtY29sb3JcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwiZGVmYXVsdFwiOlwiIzAwMDAwMFwiLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn19LFwicGFpbnRfYmFja2dyb3VuZFwiOntcImJhY2tncm91bmQtY29sb3JcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwiZGVmYXVsdFwiOlwiIzAwMDAwMFwiLFwidHJhbnNpdGlvblwiOnRydWUsXCJyZXF1aXJlc1wiOlt7XCIhXCI6XCJiYWNrZ3JvdW5kLXBhdHRlcm5cIn1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOnRydWUsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwiYmFja2dyb3VuZC1wYXR0ZXJuXCI6e1widHlwZVwiOlwicmVzb2x2ZWRJbWFnZVwiLFwidHJhbnNpdGlvblwiOmZhbHNlLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcImJhY2tncm91bmQtb3BhY2l0eVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjEsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn19LFwicGFpbnRfc2t5XCI6e1wic2t5LXR5cGVcIjp7XCJ0eXBlXCI6XCJlbnVtXCIsXCJ2YWx1ZXNcIjp7XCJncmFkaWVudFwiOnt9LFwiYXRtb3NwaGVyZVwiOnt9fSxcImRlZmF1bHRcIjpcImF0bW9zcGhlcmVcIixcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJza3ktYXRtb3NwaGVyZS1zdW5cIjp7XCJ0eXBlXCI6XCJhcnJheVwiLFwidmFsdWVcIjpcIm51bWJlclwiLFwibGVuZ3RoXCI6MixcInVuaXRzXCI6XCJkZWdyZWVzXCIsXCJtaW5pbXVtXCI6WzAsMF0sXCJtYXhpbXVtXCI6WzM2MCwxODBdLFwidHJhbnNpdGlvblwiOmZhbHNlLFwicmVxdWlyZXNcIjpbe1wic2t5LXR5cGVcIjpcImF0bW9zcGhlcmVcIn1dLFwiZXhwcmVzc2lvblwiOntcImludGVycG9sYXRlZFwiOmZhbHNlLFwicGFyYW1ldGVyc1wiOltcInpvb21cIl19LFwicHJvcGVydHktdHlwZVwiOlwiZGF0YS1jb25zdGFudFwifSxcInNreS1hdG1vc3BoZXJlLXN1bi1pbnRlbnNpdHlcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcInJlcXVpcmVzXCI6W3tcInNreS10eXBlXCI6XCJhdG1vc3BoZXJlXCJ9XSxcImRlZmF1bHRcIjoxMCxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjEwMCxcInRyYW5zaXRpb25cIjpmYWxzZSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJza3ktZ3JhZGllbnQtY2VudGVyXCI6e1widHlwZVwiOlwiYXJyYXlcIixcInJlcXVpcmVzXCI6W3tcInNreS10eXBlXCI6XCJncmFkaWVudFwifV0sXCJ2YWx1ZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6WzAsMF0sXCJsZW5ndGhcIjoyLFwidW5pdHNcIjpcImRlZ3JlZXNcIixcIm1pbmltdW1cIjpbMCwwXSxcIm1heGltdW1cIjpbMzYwLDE4MF0sXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6ZmFsc2UsXCJwYXJhbWV0ZXJzXCI6W1wiem9vbVwiXX0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwic2t5LWdyYWRpZW50LXJhZGl1c1wiOntcInR5cGVcIjpcIm51bWJlclwiLFwicmVxdWlyZXNcIjpbe1wic2t5LXR5cGVcIjpcImdyYWRpZW50XCJ9XSxcImRlZmF1bHRcIjo5MCxcIm1pbmltdW1cIjowLFwibWF4aW11bVwiOjE4MCxcInRyYW5zaXRpb25cIjpmYWxzZSxcImV4cHJlc3Npb25cIjp7XCJpbnRlcnBvbGF0ZWRcIjpmYWxzZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJza3ktZ3JhZGllbnRcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwiZGVmYXVsdFwiOltcImludGVycG9sYXRlXCIsW1wibGluZWFyXCJdLFtcInNreS1yYWRpYWwtcHJvZ3Jlc3NcIl0sMC44LFwiIzg3Y2VlYlwiLDEsXCJ3aGl0ZVwiXSxcInRyYW5zaXRpb25cIjpmYWxzZSxcInJlcXVpcmVzXCI6W3tcInNreS10eXBlXCI6XCJncmFkaWVudFwifV0sXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJza3ktcmFkaWFsLXByb2dyZXNzXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImNvbG9yLXJhbXBcIn0sXCJza3ktYXRtb3NwaGVyZS1oYWxvLWNvbG9yXCI6e1widHlwZVwiOlwiY29sb3JcIixcImRlZmF1bHRcIjpcIndoaXRlXCIsXCJ0cmFuc2l0aW9uXCI6ZmFsc2UsXCJyZXF1aXJlc1wiOlt7XCJza3ktdHlwZVwiOlwiYXRtb3NwaGVyZVwifV0sXCJwcm9wZXJ0eS10eXBlXCI6XCJkYXRhLWNvbnN0YW50XCJ9LFwic2t5LWF0bW9zcGhlcmUtY29sb3JcIjp7XCJ0eXBlXCI6XCJjb2xvclwiLFwiZGVmYXVsdFwiOlwid2hpdGVcIixcInRyYW5zaXRpb25cIjpmYWxzZSxcInJlcXVpcmVzXCI6W3tcInNreS10eXBlXCI6XCJhdG1vc3BoZXJlXCJ9XSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn0sXCJza3ktb3BhY2l0eVwiOntcInR5cGVcIjpcIm51bWJlclwiLFwiZGVmYXVsdFwiOjEsXCJtaW5pbXVtXCI6MCxcIm1heGltdW1cIjoxLFwidHJhbnNpdGlvblwiOnRydWUsXCJleHByZXNzaW9uXCI6e1wiaW50ZXJwb2xhdGVkXCI6dHJ1ZSxcInBhcmFtZXRlcnNcIjpbXCJ6b29tXCJdfSxcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtY29uc3RhbnRcIn19LFwidHJhbnNpdGlvblwiOntcImR1cmF0aW9uXCI6e1widHlwZVwiOlwibnVtYmVyXCIsXCJkZWZhdWx0XCI6MzAwLFwibWluaW11bVwiOjAsXCJ1bml0c1wiOlwibWlsbGlzZWNvbmRzXCJ9LFwiZGVsYXlcIjp7XCJ0eXBlXCI6XCJudW1iZXJcIixcImRlZmF1bHRcIjowLFwibWluaW11bVwiOjAsXCJ1bml0c1wiOlwibWlsbGlzZWNvbmRzXCJ9fSxcInByb3BlcnR5LXR5cGVcIjp7XCJkYXRhLWRyaXZlblwiOntcInR5cGVcIjpcInByb3BlcnR5LXR5cGVcIn0sXCJjb2xvci1yYW1wXCI6e1widHlwZVwiOlwicHJvcGVydHktdHlwZVwifSxcImRhdGEtY29uc3RhbnRcIjp7XCJ0eXBlXCI6XCJwcm9wZXJ0eS10eXBlXCJ9LFwiY29uc3RhbnRcIjp7XCJ0eXBlXCI6XCJwcm9wZXJ0eS10eXBlXCJ9fSxcInByb21vdGVJZFwiOntcIipcIjp7XCJ0eXBlXCI6XCJzdHJpbmdcIn19fScpO2Z1bmN0aW9uIGVlKHQsLi4uZSl7Zm9yKGNvbnN0IHIgb2YgZSlmb3IoY29uc3QgZSBpbiByKXRbZV09cltlXTtyZXR1cm4gdH1mdW5jdGlvbiByZSh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE51bWJlcnx8dCBpbnN0YW5jZW9mIFN0cmluZ3x8dCBpbnN0YW5jZW9mIEJvb2xlYW4/dC52YWx1ZU9mKCk6dH1mdW5jdGlvbiBuZSh0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0Lm1hcChuZSk7aWYodCBpbnN0YW5jZW9mIE9iamVjdCYmISh0IGluc3RhbmNlb2YgTnVtYmVyfHx0IGluc3RhbmNlb2YgU3RyaW5nfHx0IGluc3RhbmNlb2YgQm9vbGVhbikpe2NvbnN0IGU9e307Zm9yKGNvbnN0IHIgaW4gdCllW3JdPW5lKHRbcl0pO3JldHVybiBlfXJldHVybiByZSh0KX1jbGFzcyBpZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoZSksdGhpcy5tZXNzYWdlPWUsdGhpcy5rZXk9dDt9fXZhciBzZT1pZTtjbGFzcyBhZXtjb25zdHJ1Y3Rvcih0LGU9W10pe3RoaXMucGFyZW50PXQsdGhpcy5iaW5kaW5ncz17fTtmb3IoY29uc3RbdCxyXW9mIGUpdGhpcy5iaW5kaW5nc1t0XT1yO31jb25jYXQodCl7cmV0dXJuIG5ldyBhZSh0aGlzLHQpfWdldCh0KXtpZih0aGlzLmJpbmRpbmdzW3RdKXJldHVybiB0aGlzLmJpbmRpbmdzW3RdO2lmKHRoaXMucGFyZW50KXJldHVybiB0aGlzLnBhcmVudC5nZXQodCk7dGhyb3cgbmV3IEVycm9yKGAke3R9IG5vdCBmb3VuZCBpbiBzY29wZS5gKX1oYXModCl7cmV0dXJuICEhdGhpcy5iaW5kaW5nc1t0XXx8ISF0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuaGFzKHQpfX12YXIgb2U9YWU7Y29uc3QgbGU9e2tpbmQ6XCJudWxsXCJ9LHVlPXtraW5kOlwibnVtYmVyXCJ9LGNlPXtraW5kOlwic3RyaW5nXCJ9LGhlPXtraW5kOlwiYm9vbGVhblwifSxwZT17a2luZDpcImNvbG9yXCJ9LGRlPXtraW5kOlwib2JqZWN0XCJ9LGZlPXtraW5kOlwidmFsdWVcIn0seWU9e2tpbmQ6XCJjb2xsYXRvclwifSxtZT17a2luZDpcImZvcm1hdHRlZFwifSxnZT17a2luZDpcInJlc29sdmVkSW1hZ2VcIn07ZnVuY3Rpb24geGUodCxlKXtyZXR1cm4ge2tpbmQ6XCJhcnJheVwiLGl0ZW1UeXBlOnQsTjplfX1mdW5jdGlvbiB2ZSh0KXtpZihcImFycmF5XCI9PT10LmtpbmQpe2NvbnN0IGU9dmUodC5pdGVtVHlwZSk7cmV0dXJuIFwibnVtYmVyXCI9PXR5cGVvZiB0Lk4/YGFycmF5PCR7ZX0sICR7dC5OfT5gOlwidmFsdWVcIj09PXQuaXRlbVR5cGUua2luZD9cImFycmF5XCI6YGFycmF5PCR7ZX0+YH1yZXR1cm4gdC5raW5kfWNvbnN0IGJlPVtsZSx1ZSxjZSxoZSxwZSxtZSxkZSx4ZShmZSksZ2VdO2Z1bmN0aW9uIHdlKHQsZSl7aWYoXCJlcnJvclwiPT09ZS5raW5kKXJldHVybiBudWxsO2lmKFwiYXJyYXlcIj09PXQua2luZCl7aWYoXCJhcnJheVwiPT09ZS5raW5kJiYoMD09PWUuTiYmXCJ2YWx1ZVwiPT09ZS5pdGVtVHlwZS5raW5kfHwhd2UodC5pdGVtVHlwZSxlLml0ZW1UeXBlKSkmJihcIm51bWJlclwiIT10eXBlb2YgdC5OfHx0Lk49PT1lLk4pKXJldHVybiBudWxsfWVsc2Uge2lmKHQua2luZD09PWUua2luZClyZXR1cm4gbnVsbDtpZihcInZhbHVlXCI9PT10LmtpbmQpZm9yKGNvbnN0IHQgb2YgYmUpaWYoIXdlKHQsZSkpcmV0dXJuIG51bGx9cmV0dXJuIGBFeHBlY3RlZCAke3ZlKHQpfSBidXQgZm91bmQgJHt2ZShlKX0gaW5zdGVhZC5gfWZ1bmN0aW9uIF9lKHQsZSl7cmV0dXJuIGUuc29tZSgoZT0+ZS5raW5kPT09dC5raW5kKSl9ZnVuY3Rpb24gQWUodCxlKXtyZXR1cm4gZS5zb21lKChlPT5cIm51bGxcIj09PWU/bnVsbD09PXQ6XCJhcnJheVwiPT09ZT9BcnJheS5pc0FycmF5KHQpOlwib2JqZWN0XCI9PT1lP3QmJiFBcnJheS5pc0FycmF5KHQpJiZcIm9iamVjdFwiPT10eXBlb2YgdDplPT09dHlwZW9mIHQpKX12YXIgU2Usa2U9e3RyYW5zcGFyZW50OlswLDAsMCwwXSxhbGljZWJsdWU6WzI0MCwyNDgsMjU1LDFdLGFudGlxdWV3aGl0ZTpbMjUwLDIzNSwyMTUsMV0sYXF1YTpbMCwyNTUsMjU1LDFdLGFxdWFtYXJpbmU6WzEyNywyNTUsMjEyLDFdLGF6dXJlOlsyNDAsMjU1LDI1NSwxXSxiZWlnZTpbMjQ1LDI0NSwyMjAsMV0sYmlzcXVlOlsyNTUsMjI4LDE5NiwxXSxibGFjazpbMCwwLDAsMV0sYmxhbmNoZWRhbG1vbmQ6WzI1NSwyMzUsMjA1LDFdLGJsdWU6WzAsMCwyNTUsMV0sYmx1ZXZpb2xldDpbMTM4LDQzLDIyNiwxXSxicm93bjpbMTY1LDQyLDQyLDFdLGJ1cmx5d29vZDpbMjIyLDE4NCwxMzUsMV0sY2FkZXRibHVlOls5NSwxNTgsMTYwLDFdLGNoYXJ0cmV1c2U6WzEyNywyNTUsMCwxXSxjaG9jb2xhdGU6WzIxMCwxMDUsMzAsMV0sY29yYWw6WzI1NSwxMjcsODAsMV0sY29ybmZsb3dlcmJsdWU6WzEwMCwxNDksMjM3LDFdLGNvcm5zaWxrOlsyNTUsMjQ4LDIyMCwxXSxjcmltc29uOlsyMjAsMjAsNjAsMV0sY3lhbjpbMCwyNTUsMjU1LDFdLGRhcmtibHVlOlswLDAsMTM5LDFdLGRhcmtjeWFuOlswLDEzOSwxMzksMV0sZGFya2dvbGRlbnJvZDpbMTg0LDEzNCwxMSwxXSxkYXJrZ3JheTpbMTY5LDE2OSwxNjksMV0sZGFya2dyZWVuOlswLDEwMCwwLDFdLGRhcmtncmV5OlsxNjksMTY5LDE2OSwxXSxkYXJra2hha2k6WzE4OSwxODMsMTA3LDFdLGRhcmttYWdlbnRhOlsxMzksMCwxMzksMV0sZGFya29saXZlZ3JlZW46Wzg1LDEwNyw0NywxXSxkYXJrb3JhbmdlOlsyNTUsMTQwLDAsMV0sZGFya29yY2hpZDpbMTUzLDUwLDIwNCwxXSxkYXJrcmVkOlsxMzksMCwwLDFdLGRhcmtzYWxtb246WzIzMywxNTAsMTIyLDFdLGRhcmtzZWFncmVlbjpbMTQzLDE4OCwxNDMsMV0sZGFya3NsYXRlYmx1ZTpbNzIsNjEsMTM5LDFdLGRhcmtzbGF0ZWdyYXk6WzQ3LDc5LDc5LDFdLGRhcmtzbGF0ZWdyZXk6WzQ3LDc5LDc5LDFdLGRhcmt0dXJxdW9pc2U6WzAsMjA2LDIwOSwxXSxkYXJrdmlvbGV0OlsxNDgsMCwyMTEsMV0sZGVlcHBpbms6WzI1NSwyMCwxNDcsMV0sZGVlcHNreWJsdWU6WzAsMTkxLDI1NSwxXSxkaW1ncmF5OlsxMDUsMTA1LDEwNSwxXSxkaW1ncmV5OlsxMDUsMTA1LDEwNSwxXSxkb2RnZXJibHVlOlszMCwxNDQsMjU1LDFdLGZpcmVicmljazpbMTc4LDM0LDM0LDFdLGZsb3JhbHdoaXRlOlsyNTUsMjUwLDI0MCwxXSxmb3Jlc3RncmVlbjpbMzQsMTM5LDM0LDFdLGZ1Y2hzaWE6WzI1NSwwLDI1NSwxXSxnYWluc2Jvcm86WzIyMCwyMjAsMjIwLDFdLGdob3N0d2hpdGU6WzI0OCwyNDgsMjU1LDFdLGdvbGQ6WzI1NSwyMTUsMCwxXSxnb2xkZW5yb2Q6WzIxOCwxNjUsMzIsMV0sZ3JheTpbMTI4LDEyOCwxMjgsMV0sZ3JlZW46WzAsMTI4LDAsMV0sZ3JlZW55ZWxsb3c6WzE3MywyNTUsNDcsMV0sZ3JleTpbMTI4LDEyOCwxMjgsMV0saG9uZXlkZXc6WzI0MCwyNTUsMjQwLDFdLGhvdHBpbms6WzI1NSwxMDUsMTgwLDFdLGluZGlhbnJlZDpbMjA1LDkyLDkyLDFdLGluZGlnbzpbNzUsMCwxMzAsMV0saXZvcnk6WzI1NSwyNTUsMjQwLDFdLGtoYWtpOlsyNDAsMjMwLDE0MCwxXSxsYXZlbmRlcjpbMjMwLDIzMCwyNTAsMV0sbGF2ZW5kZXJibHVzaDpbMjU1LDI0MCwyNDUsMV0sbGF3bmdyZWVuOlsxMjQsMjUyLDAsMV0sbGVtb25jaGlmZm9uOlsyNTUsMjUwLDIwNSwxXSxsaWdodGJsdWU6WzE3MywyMTYsMjMwLDFdLGxpZ2h0Y29yYWw6WzI0MCwxMjgsMTI4LDFdLGxpZ2h0Y3lhbjpbMjI0LDI1NSwyNTUsMV0sbGlnaHRnb2xkZW5yb2R5ZWxsb3c6WzI1MCwyNTAsMjEwLDFdLGxpZ2h0Z3JheTpbMjExLDIxMSwyMTEsMV0sbGlnaHRncmVlbjpbMTQ0LDIzOCwxNDQsMV0sbGlnaHRncmV5OlsyMTEsMjExLDIxMSwxXSxsaWdodHBpbms6WzI1NSwxODIsMTkzLDFdLGxpZ2h0c2FsbW9uOlsyNTUsMTYwLDEyMiwxXSxsaWdodHNlYWdyZWVuOlszMiwxNzgsMTcwLDFdLGxpZ2h0c2t5Ymx1ZTpbMTM1LDIwNiwyNTAsMV0sbGlnaHRzbGF0ZWdyYXk6WzExOSwxMzYsMTUzLDFdLGxpZ2h0c2xhdGVncmV5OlsxMTksMTM2LDE1MywxXSxsaWdodHN0ZWVsYmx1ZTpbMTc2LDE5NiwyMjIsMV0sbGlnaHR5ZWxsb3c6WzI1NSwyNTUsMjI0LDFdLGxpbWU6WzAsMjU1LDAsMV0sbGltZWdyZWVuOls1MCwyMDUsNTAsMV0sbGluZW46WzI1MCwyNDAsMjMwLDFdLG1hZ2VudGE6WzI1NSwwLDI1NSwxXSxtYXJvb246WzEyOCwwLDAsMV0sbWVkaXVtYXF1YW1hcmluZTpbMTAyLDIwNSwxNzAsMV0sbWVkaXVtYmx1ZTpbMCwwLDIwNSwxXSxtZWRpdW1vcmNoaWQ6WzE4Niw4NSwyMTEsMV0sbWVkaXVtcHVycGxlOlsxNDcsMTEyLDIxOSwxXSxtZWRpdW1zZWFncmVlbjpbNjAsMTc5LDExMywxXSxtZWRpdW1zbGF0ZWJsdWU6WzEyMywxMDQsMjM4LDFdLG1lZGl1bXNwcmluZ2dyZWVuOlswLDI1MCwxNTQsMV0sbWVkaXVtdHVycXVvaXNlOls3MiwyMDksMjA0LDFdLG1lZGl1bXZpb2xldHJlZDpbMTk5LDIxLDEzMywxXSxtaWRuaWdodGJsdWU6WzI1LDI1LDExMiwxXSxtaW50Y3JlYW06WzI0NSwyNTUsMjUwLDFdLG1pc3R5cm9zZTpbMjU1LDIyOCwyMjUsMV0sbW9jY2FzaW46WzI1NSwyMjgsMTgxLDFdLG5hdmFqb3doaXRlOlsyNTUsMjIyLDE3MywxXSxuYXZ5OlswLDAsMTI4LDFdLG9sZGxhY2U6WzI1MywyNDUsMjMwLDFdLG9saXZlOlsxMjgsMTI4LDAsMV0sb2xpdmVkcmFiOlsxMDcsMTQyLDM1LDFdLG9yYW5nZTpbMjU1LDE2NSwwLDFdLG9yYW5nZXJlZDpbMjU1LDY5LDAsMV0sb3JjaGlkOlsyMTgsMTEyLDIxNCwxXSxwYWxlZ29sZGVucm9kOlsyMzgsMjMyLDE3MCwxXSxwYWxlZ3JlZW46WzE1MiwyNTEsMTUyLDFdLHBhbGV0dXJxdW9pc2U6WzE3NSwyMzgsMjM4LDFdLHBhbGV2aW9sZXRyZWQ6WzIxOSwxMTIsMTQ3LDFdLHBhcGF5YXdoaXA6WzI1NSwyMzksMjEzLDFdLHBlYWNocHVmZjpbMjU1LDIxOCwxODUsMV0scGVydTpbMjA1LDEzMyw2MywxXSxwaW5rOlsyNTUsMTkyLDIwMywxXSxwbHVtOlsyMjEsMTYwLDIyMSwxXSxwb3dkZXJibHVlOlsxNzYsMjI0LDIzMCwxXSxwdXJwbGU6WzEyOCwwLDEyOCwxXSxyZWJlY2NhcHVycGxlOlsxMDIsNTEsMTUzLDFdLHJlZDpbMjU1LDAsMCwxXSxyb3N5YnJvd246WzE4OCwxNDMsMTQzLDFdLHJveWFsYmx1ZTpbNjUsMTA1LDIyNSwxXSxzYWRkbGVicm93bjpbMTM5LDY5LDE5LDFdLHNhbG1vbjpbMjUwLDEyOCwxMTQsMV0sc2FuZHlicm93bjpbMjQ0LDE2NCw5NiwxXSxzZWFncmVlbjpbNDYsMTM5LDg3LDFdLHNlYXNoZWxsOlsyNTUsMjQ1LDIzOCwxXSxzaWVubmE6WzE2MCw4Miw0NSwxXSxzaWx2ZXI6WzE5MiwxOTIsMTkyLDFdLHNreWJsdWU6WzEzNSwyMDYsMjM1LDFdLHNsYXRlYmx1ZTpbMTA2LDkwLDIwNSwxXSxzbGF0ZWdyYXk6WzExMiwxMjgsMTQ0LDFdLHNsYXRlZ3JleTpbMTEyLDEyOCwxNDQsMV0sc25vdzpbMjU1LDI1MCwyNTAsMV0sc3ByaW5nZ3JlZW46WzAsMjU1LDEyNywxXSxzdGVlbGJsdWU6WzcwLDEzMCwxODAsMV0sdGFuOlsyMTAsMTgwLDE0MCwxXSx0ZWFsOlswLDEyOCwxMjgsMV0sdGhpc3RsZTpbMjE2LDE5MSwyMTYsMV0sdG9tYXRvOlsyNTUsOTksNzEsMV0sdHVycXVvaXNlOls2NCwyMjQsMjA4LDFdLHZpb2xldDpbMjM4LDEzMCwyMzgsMV0sd2hlYXQ6WzI0NSwyMjIsMTc5LDFdLHdoaXRlOlsyNTUsMjU1LDI1NSwxXSx3aGl0ZXNtb2tlOlsyNDUsMjQ1LDI0NSwxXSx5ZWxsb3c6WzI1NSwyNTUsMCwxXSx5ZWxsb3dncmVlbjpbMTU0LDIwNSw1MCwxXX07ZnVuY3Rpb24gSWUodCl7cmV0dXJuICh0PU1hdGgucm91bmQodCkpPDA/MDp0PjI1NT8yNTU6dH1mdW5jdGlvbiBNZSh0KXtyZXR1cm4gSWUoXCIlXCI9PT10W3QubGVuZ3RoLTFdP3BhcnNlRmxvYXQodCkvMTAwKjI1NTpwYXJzZUludCh0KSl9ZnVuY3Rpb24gVGUodCl7cmV0dXJuIChlPVwiJVwiPT09dFt0Lmxlbmd0aC0xXT9wYXJzZUZsb2F0KHQpLzEwMDpwYXJzZUZsb2F0KHQpKTwwPzA6ZT4xPzE6ZTt2YXIgZTt9ZnVuY3Rpb24gemUodCxlLHIpe3JldHVybiByPDA/cis9MTpyPjEmJihyLT0xKSw2KnI8MT90KyhlLXQpKnIqNjoyKnI8MT9lOjMqcjwyP3QrKGUtdCkqKDIvMy1yKSo2OnR9dHJ5e1NlPXt9LnBhcnNlQ1NTQ29sb3I9ZnVuY3Rpb24odCl7dmFyIGUscj10LnJlcGxhY2UoLyAvZyxcIlwiKS50b0xvd2VyQ2FzZSgpO2lmKHIgaW4ga2UpcmV0dXJuIGtlW3JdLnNsaWNlKCk7aWYoXCIjXCI9PT1yWzBdKXJldHVybiA0PT09ci5sZW5ndGg/KGU9cGFyc2VJbnQoci5zdWJzdHIoMSksMTYpKT49MCYmZTw9NDA5NT9bKDM4NDAmZSk+PjR8KDM4NDAmZSk+PjgsMjQwJmV8KDI0MCZlKT4+NCwxNSZlfCgxNSZlKTw8NCwxXTpudWxsOjc9PT1yLmxlbmd0aCYmKGU9cGFyc2VJbnQoci5zdWJzdHIoMSksMTYpKT49MCYmZTw9MTY3NzcyMTU/WygxNjcxMTY4MCZlKT4+MTYsKDY1MjgwJmUpPj44LDI1NSZlLDFdOm51bGw7dmFyIG49ci5pbmRleE9mKFwiKFwiKSxpPXIuaW5kZXhPZihcIilcIik7aWYoLTEhPT1uJiZpKzE9PT1yLmxlbmd0aCl7dmFyIHM9ci5zdWJzdHIoMCxuKSxhPXIuc3Vic3RyKG4rMSxpLShuKzEpKS5zcGxpdChcIixcIiksbz0xO3N3aXRjaChzKXtjYXNlXCJyZ2JhXCI6aWYoNCE9PWEubGVuZ3RoKXJldHVybiBudWxsO289VGUoYS5wb3AoKSk7Y2FzZVwicmdiXCI6cmV0dXJuIDMhPT1hLmxlbmd0aD9udWxsOltNZShhWzBdKSxNZShhWzFdKSxNZShhWzJdKSxvXTtjYXNlXCJoc2xhXCI6aWYoNCE9PWEubGVuZ3RoKXJldHVybiBudWxsO289VGUoYS5wb3AoKSk7Y2FzZVwiaHNsXCI6aWYoMyE9PWEubGVuZ3RoKXJldHVybiBudWxsO3ZhciBsPShwYXJzZUZsb2F0KGFbMF0pJTM2MCszNjApJTM2MC8zNjAsdT1UZShhWzFdKSxjPVRlKGFbMl0pLGg9Yzw9LjU/YyoodSsxKTpjK3UtYyp1LHA9MipjLWg7cmV0dXJuIFtJZSgyNTUqemUocCxoLGwrMS8zKSksSWUoMjU1KnplKHAsaCxsKSksSWUoMjU1KnplKHAsaCxsLTEvMykpLG9dO2RlZmF1bHQ6cmV0dXJuIG51bGx9fXJldHVybiBudWxsfTt9Y2F0Y2godCl7fWNsYXNzIEJle2NvbnN0cnVjdG9yKHQsZSxyLG49MSl7dGhpcy5yPXQsdGhpcy5nPWUsdGhpcy5iPXIsdGhpcy5hPW47fXN0YXRpYyBwYXJzZSh0KXtpZighdClyZXR1cm47aWYodCBpbnN0YW5jZW9mIEJlKXJldHVybiB0O2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybjtjb25zdCBlPVNlKHQpO3JldHVybiBlP25ldyBCZShlWzBdLzI1NSplWzNdLGVbMV0vMjU1KmVbM10sZVsyXS8yNTUqZVszXSxlWzNdKTp2b2lkIDB9dG9TdHJpbmcoKXtjb25zdFt0LGUscixuXT10aGlzLnRvQXJyYXkoKTtyZXR1cm4gYHJnYmEoJHtNYXRoLnJvdW5kKHQpfSwke01hdGgucm91bmQoZSl9LCR7TWF0aC5yb3VuZChyKX0sJHtufSlgfXRvQXJyYXkoKXtjb25zdHtyOnQsZzplLGI6cixhOm59PXRoaXM7cmV0dXJuIDA9PT1uP1swLDAsMCwwXTpbMjU1KnQvbiwyNTUqZS9uLDI1NSpyL24sbl19dG9BcnJheTAxKCl7Y29uc3R7cjp0LGc6ZSxiOnIsYTpufT10aGlzO3JldHVybiAwPT09bj9bMCwwLDAsMF06W3QvbixlL24sci9uLG5dfXRvQXJyYXkwMVByZW11bHRpcGxpZWRBbHBoYSgpe2NvbnN0e3I6dCxnOmUsYjpyLGE6bn09dGhpcztyZXR1cm4gW3QsZSxyLG5dfX1CZS5ibGFjaz1uZXcgQmUoMCwwLDAsMSksQmUud2hpdGU9bmV3IEJlKDEsMSwxLDEpLEJlLnRyYW5zcGFyZW50PW5ldyBCZSgwLDAsMCwwKSxCZS5yZWQ9bmV3IEJlKDEsMCwwLDEpLEJlLmJsdWU9bmV3IEJlKDAsMCwxLDEpO3ZhciBFZT1CZTtjbGFzcyBDZXtjb25zdHJ1Y3Rvcih0LGUscil7dGhpcy5zZW5zaXRpdml0eT10P2U/XCJ2YXJpYW50XCI6XCJjYXNlXCI6ZT9cImFjY2VudFwiOlwiYmFzZVwiLHRoaXMubG9jYWxlPXIsdGhpcy5jb2xsYXRvcj1uZXcgSW50bC5Db2xsYXRvcih0aGlzLmxvY2FsZT90aGlzLmxvY2FsZTpbXSx7c2Vuc2l0aXZpdHk6dGhpcy5zZW5zaXRpdml0eSx1c2FnZTpcInNlYXJjaFwifSk7fWNvbXBhcmUodCxlKXtyZXR1cm4gdGhpcy5jb2xsYXRvci5jb21wYXJlKHQsZSl9cmVzb2x2ZWRMb2NhbGUoKXtyZXR1cm4gbmV3IEludGwuQ29sbGF0b3IodGhpcy5sb2NhbGU/dGhpcy5sb2NhbGU6W10pLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZX19Y2xhc3MgUGV7Y29uc3RydWN0b3IodCxlLHIsbixpKXt0aGlzLnRleHQ9dC5ub3JtYWxpemU/dC5ub3JtYWxpemUoKTp0LHRoaXMuaW1hZ2U9ZSx0aGlzLnNjYWxlPXIsdGhpcy5mb250U3RhY2s9bix0aGlzLnRleHRDb2xvcj1pO319Y2xhc3MgRGV7Y29uc3RydWN0b3IodCl7dGhpcy5zZWN0aW9ucz10O31zdGF0aWMgZnJvbVN0cmluZyh0KXtyZXR1cm4gbmV3IERlKFtuZXcgUGUodCxudWxsLG51bGwsbnVsbCxudWxsKV0pfWlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMuc2VjdGlvbnMubGVuZ3RofHwhdGhpcy5zZWN0aW9ucy5zb21lKCh0PT4wIT09dC50ZXh0Lmxlbmd0aHx8dC5pbWFnZSYmMCE9PXQuaW1hZ2UubmFtZS5sZW5ndGgpKX1zdGF0aWMgZmFjdG9yeSh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIERlP3Q6RGUuZnJvbVN0cmluZyh0KX10b1N0cmluZygpe3JldHVybiAwPT09dGhpcy5zZWN0aW9ucy5sZW5ndGg/XCJcIjp0aGlzLnNlY3Rpb25zLm1hcCgodD0+dC50ZXh0KSkuam9pbihcIlwiKX1zZXJpYWxpemUoKXtjb25zdCB0PVtcImZvcm1hdFwiXTtmb3IoY29uc3QgZSBvZiB0aGlzLnNlY3Rpb25zKXtpZihlLmltYWdlKXt0LnB1c2goW1wiaW1hZ2VcIixlLmltYWdlLm5hbWVdKTtjb250aW51ZX10LnB1c2goZS50ZXh0KTtjb25zdCByPXt9O2UuZm9udFN0YWNrJiYocltcInRleHQtZm9udFwiXT1bXCJsaXRlcmFsXCIsZS5mb250U3RhY2suc3BsaXQoXCIsXCIpXSksZS5zY2FsZSYmKHJbXCJmb250LXNjYWxlXCJdPWUuc2NhbGUpLGUudGV4dENvbG9yJiYocltcInRleHQtY29sb3JcIl09W1wicmdiYVwiXS5jb25jYXQoZS50ZXh0Q29sb3IudG9BcnJheSgpKSksdC5wdXNoKHIpO31yZXR1cm4gdH19Y2xhc3MgVmV7Y29uc3RydWN0b3IodCl7dGhpcy5uYW1lPXQubmFtZSx0aGlzLmF2YWlsYWJsZT10LmF2YWlsYWJsZTt9dG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5uYW1lfXN0YXRpYyBmcm9tU3RyaW5nKHQpe3JldHVybiB0P25ldyBWZSh7bmFtZTp0LGF2YWlsYWJsZTohMX0pOm51bGx9c2VyaWFsaXplKCl7cmV0dXJuIFtcImltYWdlXCIsdGhpcy5uYW1lXX19ZnVuY3Rpb24gTGUodCxlLHIsbil7cmV0dXJuIFwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pj0wJiZ0PD0yNTUmJlwibnVtYmVyXCI9PXR5cGVvZiBlJiZlPj0wJiZlPD0yNTUmJlwibnVtYmVyXCI9PXR5cGVvZiByJiZyPj0wJiZyPD0yNTU/dm9pZCAwPT09bnx8XCJudW1iZXJcIj09dHlwZW9mIG4mJm4+PTAmJm48PTE/bnVsbDpgSW52YWxpZCByZ2JhIHZhbHVlIFske1t0LGUscixuXS5qb2luKFwiLCBcIil9XTogJ2EnIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxLmA6YEludmFsaWQgcmdiYSB2YWx1ZSBbJHsoXCJudW1iZXJcIj09dHlwZW9mIG4/W3QsZSxyLG5dOlt0LGUscl0pLmpvaW4oXCIsIFwiKX1dOiAncicsICdnJywgYW5kICdiJyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjU1LmB9ZnVuY3Rpb24gRmUodCl7aWYobnVsbD09PXQpcmV0dXJuICEwO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiAhMDtpZihcImJvb2xlYW5cIj09dHlwZW9mIHQpcmV0dXJuICEwO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiAhMDtpZih0IGluc3RhbmNlb2YgRWUpcmV0dXJuICEwO2lmKHQgaW5zdGFuY2VvZiBDZSlyZXR1cm4gITA7aWYodCBpbnN0YW5jZW9mIERlKXJldHVybiAhMDtpZih0IGluc3RhbmNlb2YgVmUpcmV0dXJuICEwO2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcihjb25zdCBlIG9mIHQpaWYoIUZlKGUpKXJldHVybiAhMTtyZXR1cm4gITB9aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpe2Zvcihjb25zdCBlIGluIHQpaWYoIUZlKHRbZV0pKXJldHVybiAhMTtyZXR1cm4gITB9cmV0dXJuICExfWZ1bmN0aW9uIFJlKHQpe2lmKG51bGw9PT10KXJldHVybiBsZTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gY2U7aWYoXCJib29sZWFuXCI9PXR5cGVvZiB0KXJldHVybiBoZTtpZihcIm51bWJlclwiPT10eXBlb2YgdClyZXR1cm4gdWU7aWYodCBpbnN0YW5jZW9mIEVlKXJldHVybiBwZTtpZih0IGluc3RhbmNlb2YgQ2UpcmV0dXJuIHllO2lmKHQgaW5zdGFuY2VvZiBEZSlyZXR1cm4gbWU7aWYodCBpbnN0YW5jZW9mIFZlKXJldHVybiBnZTtpZihBcnJheS5pc0FycmF5KHQpKXtjb25zdCBlPXQubGVuZ3RoO2xldCByO2Zvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9UmUoZSk7aWYocil7aWYocj09PXQpY29udGludWU7cj1mZTticmVha31yPXQ7fXJldHVybiB4ZShyfHxmZSxlKX1yZXR1cm4gZGV9ZnVuY3Rpb24gVWUodCl7Y29uc3QgZT10eXBlb2YgdDtyZXR1cm4gbnVsbD09PXQ/XCJcIjpcInN0cmluZ1wiPT09ZXx8XCJudW1iZXJcIj09PWV8fFwiYm9vbGVhblwiPT09ZT9TdHJpbmcodCk6dCBpbnN0YW5jZW9mIEVlfHx0IGluc3RhbmNlb2YgRGV8fHQgaW5zdGFuY2VvZiBWZT90LnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkodCl9Y2xhc3MgJGV7Y29uc3RydWN0b3IodCxlKXt0aGlzLnR5cGU9dCx0aGlzLnZhbHVlPWU7fXN0YXRpYyBwYXJzZSh0LGUpe2lmKDIhPT10Lmxlbmd0aClyZXR1cm4gZS5lcnJvcihgJ2xpdGVyYWwnIGV4cHJlc3Npb24gcmVxdWlyZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIGJ1dCBmb3VuZCAke3QubGVuZ3RoLTF9IGluc3RlYWQuYCk7aWYoIUZlKHRbMV0pKXJldHVybiBlLmVycm9yKFwiaW52YWxpZCB2YWx1ZVwiKTtjb25zdCByPXRbMV07bGV0IG49UmUocik7Y29uc3QgaT1lLmV4cGVjdGVkVHlwZTtyZXR1cm4gXCJhcnJheVwiIT09bi5raW5kfHwwIT09bi5OfHwhaXx8XCJhcnJheVwiIT09aS5raW5kfHxcIm51bWJlclwiPT10eXBlb2YgaS5OJiYwIT09aS5OfHwobj1pKSxuZXcgJGUobixyKX1ldmFsdWF0ZSgpe3JldHVybiB0aGlzLnZhbHVlfWVhY2hDaGlsZCgpe31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICEwfXNlcmlhbGl6ZSgpe3JldHVybiBcImFycmF5XCI9PT10aGlzLnR5cGUua2luZHx8XCJvYmplY3RcIj09PXRoaXMudHlwZS5raW5kP1tcImxpdGVyYWxcIix0aGlzLnZhbHVlXTp0aGlzLnZhbHVlIGluc3RhbmNlb2YgRWU/W1wicmdiYVwiXS5jb25jYXQodGhpcy52YWx1ZS50b0FycmF5KCkpOnRoaXMudmFsdWUgaW5zdGFuY2VvZiBEZT90aGlzLnZhbHVlLnNlcmlhbGl6ZSgpOnRoaXMudmFsdWV9fXZhciBqZT0kZSxPZT1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLm5hbWU9XCJFeHByZXNzaW9uRXZhbHVhdGlvbkVycm9yXCIsdGhpcy5tZXNzYWdlPXQ7fXRvSlNPTigpe3JldHVybiB0aGlzLm1lc3NhZ2V9fTtjb25zdCBxZT17c3RyaW5nOmNlLG51bWJlcjp1ZSxib29sZWFuOmhlLG9iamVjdDpkZX07Y2xhc3MgTmV7Y29uc3RydWN0b3IodCxlKXt0aGlzLnR5cGU9dCx0aGlzLmFyZ3M9ZTt9c3RhdGljIHBhcnNlKHQsZSl7aWYodC5sZW5ndGg8MilyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC5cIik7bGV0IHIsbj0xO2NvbnN0IGk9dFswXTtpZihcImFycmF5XCI9PT1pKXtsZXQgaSxzO2lmKHQubGVuZ3RoPjIpe2NvbnN0IHI9dFsxXTtpZihcInN0cmluZ1wiIT10eXBlb2Ygcnx8IShyIGluIHFlKXx8XCJvYmplY3RcIj09PXIpcmV0dXJuIGUuZXJyb3IoJ1RoZSBpdGVtIHR5cGUgYXJndW1lbnQgb2YgXCJhcnJheVwiIG11c3QgYmUgb25lIG9mIHN0cmluZywgbnVtYmVyLCBib29sZWFuJywxKTtpPXFlW3JdLG4rKzt9ZWxzZSBpPWZlO2lmKHQubGVuZ3RoPjMpe2lmKG51bGwhPT10WzJdJiYoXCJudW1iZXJcIiE9dHlwZW9mIHRbMl18fHRbMl08MHx8dFsyXSE9PU1hdGguZmxvb3IodFsyXSkpKXJldHVybiBlLmVycm9yKCdUaGUgbGVuZ3RoIGFyZ3VtZW50IHRvIFwiYXJyYXlcIiBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBsaXRlcmFsJywyKTtzPXRbMl0sbisrO31yPXhlKGkscyk7fWVsc2Ugcj1xZVtpXTtjb25zdCBzPVtdO2Zvcig7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9ZS5wYXJzZSh0W25dLG4sZmUpO2lmKCFyKXJldHVybiBudWxsO3MucHVzaChyKTt9cmV0dXJuIG5ldyBOZShyLHMpfWV2YWx1YXRlKHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5hcmdzLmxlbmd0aDtlKyspe2NvbnN0IHI9dGhpcy5hcmdzW2VdLmV2YWx1YXRlKHQpO2lmKCF3ZSh0aGlzLnR5cGUsUmUocikpKXJldHVybiByO2lmKGU9PT10aGlzLmFyZ3MubGVuZ3RoLTEpdGhyb3cgbmV3IE9lKGBFeHBlY3RlZCB2YWx1ZSB0byBiZSBvZiB0eXBlICR7dmUodGhpcy50eXBlKX0sIGJ1dCBmb3VuZCAke3ZlKFJlKHIpKX0gaW5zdGVhZC5gKX1yZXR1cm4gbnVsbH1lYWNoQ2hpbGQodCl7dGhpcy5hcmdzLmZvckVhY2godCk7fW91dHB1dERlZmluZWQoKXtyZXR1cm4gdGhpcy5hcmdzLmV2ZXJ5KCh0PT50Lm91dHB1dERlZmluZWQoKSkpfXNlcmlhbGl6ZSgpe2NvbnN0IHQ9dGhpcy50eXBlLGU9W3Qua2luZF07aWYoXCJhcnJheVwiPT09dC5raW5kKXtjb25zdCByPXQuaXRlbVR5cGU7aWYoXCJzdHJpbmdcIj09PXIua2luZHx8XCJudW1iZXJcIj09PXIua2luZHx8XCJib29sZWFuXCI9PT1yLmtpbmQpe2UucHVzaChyLmtpbmQpO2NvbnN0IG49dC5OOyhcIm51bWJlclwiPT10eXBlb2Ygbnx8dGhpcy5hcmdzLmxlbmd0aD4xKSYmZS5wdXNoKG4pO319cmV0dXJuIGUuY29uY2F0KHRoaXMuYXJncy5tYXAoKHQ9PnQuc2VyaWFsaXplKCkpKSl9fXZhciBHZT1OZTtjbGFzcyBaZXtjb25zdHJ1Y3Rvcih0KXt0aGlzLnR5cGU9bWUsdGhpcy5zZWN0aW9ucz10O31zdGF0aWMgcGFyc2UodCxlKXtpZih0Lmxlbmd0aDwyKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYXQgbGVhc3Qgb25lIGFyZ3VtZW50LlwiKTtjb25zdCByPXRbMV07aWYoIUFycmF5LmlzQXJyYXkocikmJlwib2JqZWN0XCI9PXR5cGVvZiByKXJldHVybiBlLmVycm9yKFwiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBpbWFnZSBvciB0ZXh0IHNlY3Rpb24uXCIpO2NvbnN0IG49W107bGV0IGk9ITE7Zm9yKGxldCByPTE7cjw9dC5sZW5ndGgtMTsrK3Ipe2NvbnN0IHM9dFtyXTtpZihpJiZcIm9iamVjdFwiPT10eXBlb2YgcyYmIUFycmF5LmlzQXJyYXkocykpe2k9ITE7bGV0IHQ9bnVsbDtpZihzW1wiZm9udC1zY2FsZVwiXSYmKHQ9ZS5wYXJzZShzW1wiZm9udC1zY2FsZVwiXSwxLHVlKSwhdCkpcmV0dXJuIG51bGw7bGV0IHI9bnVsbDtpZihzW1widGV4dC1mb250XCJdJiYocj1lLnBhcnNlKHNbXCJ0ZXh0LWZvbnRcIl0sMSx4ZShjZSkpLCFyKSlyZXR1cm4gbnVsbDtsZXQgYT1udWxsO2lmKHNbXCJ0ZXh0LWNvbG9yXCJdJiYoYT1lLnBhcnNlKHNbXCJ0ZXh0LWNvbG9yXCJdLDEscGUpLCFhKSlyZXR1cm4gbnVsbDtjb25zdCBvPW5bbi5sZW5ndGgtMV07by5zY2FsZT10LG8uZm9udD1yLG8udGV4dENvbG9yPWE7fWVsc2Uge2NvbnN0IHM9ZS5wYXJzZSh0W3JdLDEsZmUpO2lmKCFzKXJldHVybiBudWxsO2NvbnN0IGE9cy50eXBlLmtpbmQ7aWYoXCJzdHJpbmdcIiE9PWEmJlwidmFsdWVcIiE9PWEmJlwibnVsbFwiIT09YSYmXCJyZXNvbHZlZEltYWdlXCIhPT1hKXJldHVybiBlLmVycm9yKFwiRm9ybWF0dGVkIHRleHQgdHlwZSBtdXN0IGJlICdzdHJpbmcnLCAndmFsdWUnLCAnaW1hZ2UnIG9yICdudWxsJy5cIik7aT0hMCxuLnB1c2goe2NvbnRlbnQ6cyxzY2FsZTpudWxsLGZvbnQ6bnVsbCx0ZXh0Q29sb3I6bnVsbH0pO319cmV0dXJuIG5ldyBaZShuKX1ldmFsdWF0ZSh0KXtyZXR1cm4gbmV3IERlKHRoaXMuc2VjdGlvbnMubWFwKChlPT57Y29uc3Qgcj1lLmNvbnRlbnQuZXZhbHVhdGUodCk7cmV0dXJuIFJlKHIpPT09Z2U/bmV3IFBlKFwiXCIscixudWxsLG51bGwsbnVsbCk6bmV3IFBlKFVlKHIpLG51bGwsZS5zY2FsZT9lLnNjYWxlLmV2YWx1YXRlKHQpOm51bGwsZS5mb250P2UuZm9udC5ldmFsdWF0ZSh0KS5qb2luKFwiLFwiKTpudWxsLGUudGV4dENvbG9yP2UudGV4dENvbG9yLmV2YWx1YXRlKHQpOm51bGwpfSkpKX1lYWNoQ2hpbGQodCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5zZWN0aW9ucyl0KGUuY29udGVudCksZS5zY2FsZSYmdChlLnNjYWxlKSxlLmZvbnQmJnQoZS5mb250KSxlLnRleHRDb2xvciYmdChlLnRleHRDb2xvcik7fW91dHB1dERlZmluZWQoKXtyZXR1cm4gITF9c2VyaWFsaXplKCl7Y29uc3QgdD1bXCJmb3JtYXRcIl07Zm9yKGNvbnN0IGUgb2YgdGhpcy5zZWN0aW9ucyl7dC5wdXNoKGUuY29udGVudC5zZXJpYWxpemUoKSk7Y29uc3Qgcj17fTtlLnNjYWxlJiYocltcImZvbnQtc2NhbGVcIl09ZS5zY2FsZS5zZXJpYWxpemUoKSksZS5mb250JiYocltcInRleHQtZm9udFwiXT1lLmZvbnQuc2VyaWFsaXplKCkpLGUudGV4dENvbG9yJiYocltcInRleHQtY29sb3JcIl09ZS50ZXh0Q29sb3Iuc2VyaWFsaXplKCkpLHQucHVzaChyKTt9cmV0dXJuIHR9fWNsYXNzIEtle2NvbnN0cnVjdG9yKHQpe3RoaXMudHlwZT1nZSx0aGlzLmlucHV0PXQ7fXN0YXRpYyBwYXJzZSh0LGUpe2lmKDIhPT10Lmxlbmd0aClyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIHR3byBhcmd1bWVudHMuXCIpO2NvbnN0IHI9ZS5wYXJzZSh0WzFdLDEsY2UpO3JldHVybiByP25ldyBLZShyKTplLmVycm9yKFwiTm8gaW1hZ2UgbmFtZSBwcm92aWRlZC5cIil9ZXZhbHVhdGUodCl7Y29uc3QgZT10aGlzLmlucHV0LmV2YWx1YXRlKHQpLHI9VmUuZnJvbVN0cmluZyhlKTtyZXR1cm4gciYmdC5hdmFpbGFibGVJbWFnZXMmJihyLmF2YWlsYWJsZT10LmF2YWlsYWJsZUltYWdlcy5pbmRleE9mKGUpPi0xKSxyfWVhY2hDaGlsZCh0KXt0KHRoaXMuaW5wdXQpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe3JldHVybiBbXCJpbWFnZVwiLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldfX1jb25zdCBYZT17XCJ0by1ib29sZWFuXCI6aGUsXCJ0by1jb2xvclwiOnBlLFwidG8tbnVtYmVyXCI6dWUsXCJ0by1zdHJpbmdcIjpjZX07Y2xhc3MgSmV7Y29uc3RydWN0b3IodCxlKXt0aGlzLnR5cGU9dCx0aGlzLmFyZ3M9ZTt9c3RhdGljIHBhcnNlKHQsZSl7aWYodC5sZW5ndGg8MilyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC5cIik7Y29uc3Qgcj10WzBdO2lmKChcInRvLWJvb2xlYW5cIj09PXJ8fFwidG8tc3RyaW5nXCI9PT1yKSYmMiE9PXQubGVuZ3RoKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgb25lIGFyZ3VtZW50LlwiKTtjb25zdCBuPVhlW3JdLGk9W107Zm9yKGxldCByPTE7cjx0Lmxlbmd0aDtyKyspe2NvbnN0IG49ZS5wYXJzZSh0W3JdLHIsZmUpO2lmKCFuKXJldHVybiBudWxsO2kucHVzaChuKTt9cmV0dXJuIG5ldyBKZShuLGkpfWV2YWx1YXRlKHQpe2lmKFwiYm9vbGVhblwiPT09dGhpcy50eXBlLmtpbmQpcmV0dXJuIEJvb2xlYW4odGhpcy5hcmdzWzBdLmV2YWx1YXRlKHQpKTtpZihcImNvbG9yXCI9PT10aGlzLnR5cGUua2luZCl7bGV0IGUscjtmb3IoY29uc3QgbiBvZiB0aGlzLmFyZ3Mpe2lmKGU9bi5ldmFsdWF0ZSh0KSxyPW51bGwsZSBpbnN0YW5jZW9mIEVlKXJldHVybiBlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtjb25zdCByPXQucGFyc2VDb2xvcihlKTtpZihyKXJldHVybiByfWVsc2UgaWYoQXJyYXkuaXNBcnJheShlKSYmKHI9ZS5sZW5ndGg8M3x8ZS5sZW5ndGg+ND9gSW52YWxpZCByYmdhIHZhbHVlICR7SlNPTi5zdHJpbmdpZnkoZSl9OiBleHBlY3RlZCBhbiBhcnJheSBjb250YWluaW5nIGVpdGhlciB0aHJlZSBvciBmb3VyIG51bWVyaWMgdmFsdWVzLmA6TGUoZVswXSxlWzFdLGVbMl0sZVszXSksIXIpKXJldHVybiBuZXcgRWUoZVswXS8yNTUsZVsxXS8yNTUsZVsyXS8yNTUsZVszXSl9dGhyb3cgbmV3IE9lKHJ8fGBDb3VsZCBub3QgcGFyc2UgY29sb3IgZnJvbSB2YWx1ZSAnJHtcInN0cmluZ1wiPT10eXBlb2YgZT9lOlN0cmluZyhKU09OLnN0cmluZ2lmeShlKSl9J2ApfWlmKFwibnVtYmVyXCI9PT10aGlzLnR5cGUua2luZCl7bGV0IGU9bnVsbDtmb3IoY29uc3QgciBvZiB0aGlzLmFyZ3Mpe2lmKGU9ci5ldmFsdWF0ZSh0KSxudWxsPT09ZSlyZXR1cm4gMDtjb25zdCBuPU51bWJlcihlKTtpZighaXNOYU4obikpcmV0dXJuIG59dGhyb3cgbmV3IE9lKGBDb3VsZCBub3QgY29udmVydCAke0pTT04uc3RyaW5naWZ5KGUpfSB0byBudW1iZXIuYCl9cmV0dXJuIFwiZm9ybWF0dGVkXCI9PT10aGlzLnR5cGUua2luZD9EZS5mcm9tU3RyaW5nKFVlKHRoaXMuYXJnc1swXS5ldmFsdWF0ZSh0KSkpOlwicmVzb2x2ZWRJbWFnZVwiPT09dGhpcy50eXBlLmtpbmQ/VmUuZnJvbVN0cmluZyhVZSh0aGlzLmFyZ3NbMF0uZXZhbHVhdGUodCkpKTpVZSh0aGlzLmFyZ3NbMF0uZXZhbHVhdGUodCkpfWVhY2hDaGlsZCh0KXt0aGlzLmFyZ3MuZm9yRWFjaCh0KTt9b3V0cHV0RGVmaW5lZCgpe3JldHVybiB0aGlzLmFyZ3MuZXZlcnkoKHQ9PnQub3V0cHV0RGVmaW5lZCgpKSl9c2VyaWFsaXplKCl7aWYoXCJmb3JtYXR0ZWRcIj09PXRoaXMudHlwZS5raW5kKXJldHVybiBuZXcgWmUoW3tjb250ZW50OnRoaXMuYXJnc1swXSxzY2FsZTpudWxsLGZvbnQ6bnVsbCx0ZXh0Q29sb3I6bnVsbH1dKS5zZXJpYWxpemUoKTtpZihcInJlc29sdmVkSW1hZ2VcIj09PXRoaXMudHlwZS5raW5kKXJldHVybiBuZXcgS2UodGhpcy5hcmdzWzBdKS5zZXJpYWxpemUoKTtjb25zdCB0PVtgdG8tJHt0aGlzLnR5cGUua2luZH1gXTtyZXR1cm4gdGhpcy5lYWNoQ2hpbGQoKGU9Pnt0LnB1c2goZS5zZXJpYWxpemUoKSk7fSkpLHR9fXZhciBIZT1KZTtjb25zdCBZZT1bXCJVbmtub3duXCIsXCJQb2ludFwiLFwiTGluZVN0cmluZ1wiLFwiUG9seWdvblwiXTt2YXIgV2U9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmdsb2JhbHM9bnVsbCx0aGlzLmZlYXR1cmU9bnVsbCx0aGlzLmZlYXR1cmVTdGF0ZT1udWxsLHRoaXMuZm9ybWF0dGVkU2VjdGlvbj1udWxsLHRoaXMuX3BhcnNlQ29sb3JDYWNoZT17fSx0aGlzLmF2YWlsYWJsZUltYWdlcz1udWxsLHRoaXMuY2Fub25pY2FsPW51bGwsdGhpcy5mZWF0dXJlVGlsZUNvb3JkPW51bGwsdGhpcy5mZWF0dXJlRGlzdGFuY2VEYXRhPW51bGw7fWlkKCl7cmV0dXJuIHRoaXMuZmVhdHVyZSYmdm9pZCAwIT09dGhpcy5mZWF0dXJlLmlkP3RoaXMuZmVhdHVyZS5pZDpudWxsfWdlb21ldHJ5VHlwZSgpe3JldHVybiB0aGlzLmZlYXR1cmU/XCJudW1iZXJcIj09dHlwZW9mIHRoaXMuZmVhdHVyZS50eXBlP1llW3RoaXMuZmVhdHVyZS50eXBlXTp0aGlzLmZlYXR1cmUudHlwZTpudWxsfWdlb21ldHJ5KCl7cmV0dXJuIHRoaXMuZmVhdHVyZSYmXCJnZW9tZXRyeVwiaW4gdGhpcy5mZWF0dXJlP3RoaXMuZmVhdHVyZS5nZW9tZXRyeTpudWxsfWNhbm9uaWNhbElEKCl7cmV0dXJuIHRoaXMuY2Fub25pY2FsfXByb3BlcnRpZXMoKXtyZXR1cm4gdGhpcy5mZWF0dXJlJiZ0aGlzLmZlYXR1cmUucHJvcGVydGllc3x8e319ZGlzdGFuY2VGcm9tQ2VudGVyKCl7aWYodGhpcy5mZWF0dXJlVGlsZUNvb3JkJiZ0aGlzLmZlYXR1cmVEaXN0YW5jZURhdGEpe2NvbnN0IHQ9dGhpcy5mZWF0dXJlRGlzdGFuY2VEYXRhLmNlbnRlcixlPXRoaXMuZmVhdHVyZURpc3RhbmNlRGF0YS5zY2FsZSx7eDpyLHk6bn09dGhpcy5mZWF0dXJlVGlsZUNvb3JkO3JldHVybiB0aGlzLmZlYXR1cmVEaXN0YW5jZURhdGEuYmVhcmluZ1swXSoociplLXRbMF0pK3RoaXMuZmVhdHVyZURpc3RhbmNlRGF0YS5iZWFyaW5nWzFdKihuKmUtdFsxXSl9cmV0dXJuIDB9cGFyc2VDb2xvcih0KXtsZXQgZT10aGlzLl9wYXJzZUNvbG9yQ2FjaGVbdF07cmV0dXJuIGV8fChlPXRoaXMuX3BhcnNlQ29sb3JDYWNoZVt0XT1FZS5wYXJzZSh0KSksZX19O2NsYXNzIFFle2NvbnN0cnVjdG9yKHQsZSxyLG4pe3RoaXMubmFtZT10LHRoaXMudHlwZT1lLHRoaXMuX2V2YWx1YXRlPXIsdGhpcy5hcmdzPW47fWV2YWx1YXRlKHQpe3JldHVybiB0aGlzLl9ldmFsdWF0ZSh0LHRoaXMuYXJncyl9ZWFjaENoaWxkKHQpe3RoaXMuYXJncy5mb3JFYWNoKHQpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe3JldHVybiBbdGhpcy5uYW1lXS5jb25jYXQodGhpcy5hcmdzLm1hcCgodD0+dC5zZXJpYWxpemUoKSkpKX1zdGF0aWMgcGFyc2UodCxlKXtjb25zdCByPXRbMF0sbj1RZS5kZWZpbml0aW9uc1tyXTtpZighbilyZXR1cm4gZS5lcnJvcihgVW5rbm93biBleHByZXNzaW9uIFwiJHtyfVwiLiBJZiB5b3Ugd2FudGVkIGEgbGl0ZXJhbCBhcnJheSwgdXNlIFtcImxpdGVyYWxcIiwgWy4uLl1dLmAsMCk7Y29uc3QgaT1BcnJheS5pc0FycmF5KG4pP25bMF06bi50eXBlLHM9QXJyYXkuaXNBcnJheShuKT9bW25bMV0sblsyXV1dOm4ub3ZlcmxvYWRzLGE9cy5maWx0ZXIoKChbZV0pPT4hQXJyYXkuaXNBcnJheShlKXx8ZS5sZW5ndGg9PT10Lmxlbmd0aC0xKSk7bGV0IG89bnVsbDtmb3IoY29uc3RbbixzXW9mIGEpe289bmV3IElyKGUucmVnaXN0cnksZS5wYXRoLG51bGwsZS5zY29wZSk7Y29uc3QgYT1bXTtsZXQgbD0hMTtmb3IobGV0IGU9MTtlPHQubGVuZ3RoO2UrKyl7Y29uc3Qgcj10W2VdLGk9QXJyYXkuaXNBcnJheShuKT9uW2UtMV06bi50eXBlLHM9by5wYXJzZShyLDErYS5sZW5ndGgsaSk7aWYoIXMpe2w9ITA7YnJlYWt9YS5wdXNoKHMpO31pZighbClpZihBcnJheS5pc0FycmF5KG4pJiZuLmxlbmd0aCE9PWEubGVuZ3RoKW8uZXJyb3IoYEV4cGVjdGVkICR7bi5sZW5ndGh9IGFyZ3VtZW50cywgYnV0IGZvdW5kICR7YS5sZW5ndGh9IGluc3RlYWQuYCk7ZWxzZSB7Zm9yKGxldCB0PTA7dDxhLmxlbmd0aDt0Kyspe2NvbnN0IGU9QXJyYXkuaXNBcnJheShuKT9uW3RdOm4udHlwZSxyPWFbdF07by5jb25jYXQodCsxKS5jaGVja1N1YnR5cGUoZSxyLnR5cGUpO31pZigwPT09by5lcnJvcnMubGVuZ3RoKXJldHVybiBuZXcgUWUocixpLHMsYSl9fWlmKDE9PT1hLmxlbmd0aCllLmVycm9ycy5wdXNoKC4uLm8uZXJyb3JzKTtlbHNlIHtjb25zdCByPShhLmxlbmd0aD9hOnMpLm1hcCgoKFt0XSk9PntyZXR1cm4gZT10LEFycmF5LmlzQXJyYXkoZSk/YCgke2UubWFwKHZlKS5qb2luKFwiLCBcIil9KWA6YCgke3ZlKGUudHlwZSl9Li4uKWA7dmFyIGU7fSkpLmpvaW4oXCIgfCBcIiksbj1bXTtmb3IobGV0IHI9MTtyPHQubGVuZ3RoO3IrKyl7Y29uc3QgaT1lLnBhcnNlKHRbcl0sMStuLmxlbmd0aCk7aWYoIWkpcmV0dXJuIG51bGw7bi5wdXNoKHZlKGkudHlwZSkpO31lLmVycm9yKGBFeHBlY3RlZCBhcmd1bWVudHMgb2YgdHlwZSAke3J9LCBidXQgZm91bmQgKCR7bi5qb2luKFwiLCBcIil9KSBpbnN0ZWFkLmApO31yZXR1cm4gbnVsbH1zdGF0aWMgcmVnaXN0ZXIodCxlKXtRZS5kZWZpbml0aW9ucz1lO2Zvcihjb25zdCByIGluIGUpdFtyXT1RZTt9fXZhciB0cj1RZTtjbGFzcyBlcntjb25zdHJ1Y3Rvcih0LGUscil7dGhpcy50eXBlPXllLHRoaXMubG9jYWxlPXIsdGhpcy5jYXNlU2Vuc2l0aXZlPXQsdGhpcy5kaWFjcml0aWNTZW5zaXRpdmU9ZTt9c3RhdGljIHBhcnNlKHQsZSl7aWYoMiE9PXQubGVuZ3RoKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgb25lIGFyZ3VtZW50LlwiKTtjb25zdCByPXRbMV07aWYoXCJvYmplY3RcIiE9dHlwZW9mIHJ8fEFycmF5LmlzQXJyYXkocikpcmV0dXJuIGUuZXJyb3IoXCJDb2xsYXRvciBvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0LlwiKTtjb25zdCBuPWUucGFyc2Uodm9pZCAwIT09cltcImNhc2Utc2Vuc2l0aXZlXCJdJiZyW1wiY2FzZS1zZW5zaXRpdmVcIl0sMSxoZSk7aWYoIW4pcmV0dXJuIG51bGw7Y29uc3QgaT1lLnBhcnNlKHZvaWQgMCE9PXJbXCJkaWFjcml0aWMtc2Vuc2l0aXZlXCJdJiZyW1wiZGlhY3JpdGljLXNlbnNpdGl2ZVwiXSwxLGhlKTtpZighaSlyZXR1cm4gbnVsbDtsZXQgcz1udWxsO3JldHVybiByLmxvY2FsZSYmKHM9ZS5wYXJzZShyLmxvY2FsZSwxLGNlKSwhcyk/bnVsbDpuZXcgZXIobixpLHMpfWV2YWx1YXRlKHQpe3JldHVybiBuZXcgQ2UodGhpcy5jYXNlU2Vuc2l0aXZlLmV2YWx1YXRlKHQpLHRoaXMuZGlhY3JpdGljU2Vuc2l0aXZlLmV2YWx1YXRlKHQpLHRoaXMubG9jYWxlP3RoaXMubG9jYWxlLmV2YWx1YXRlKHQpOm51bGwpfWVhY2hDaGlsZCh0KXt0KHRoaXMuY2FzZVNlbnNpdGl2ZSksdCh0aGlzLmRpYWNyaXRpY1NlbnNpdGl2ZSksdGhpcy5sb2NhbGUmJnQodGhpcy5sb2NhbGUpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe2NvbnN0IHQ9e307cmV0dXJuIHRbXCJjYXNlLXNlbnNpdGl2ZVwiXT10aGlzLmNhc2VTZW5zaXRpdmUuc2VyaWFsaXplKCksdFtcImRpYWNyaXRpYy1zZW5zaXRpdmVcIl09dGhpcy5kaWFjcml0aWNTZW5zaXRpdmUuc2VyaWFsaXplKCksdGhpcy5sb2NhbGUmJih0LmxvY2FsZT10aGlzLmxvY2FsZS5zZXJpYWxpemUoKSksW1wiY29sbGF0b3JcIix0XX19Y29uc3QgcnI9ODE5MjtmdW5jdGlvbiBucih0LGUpe3RbMF09TWF0aC5taW4odFswXSxlWzBdKSx0WzFdPU1hdGgubWluKHRbMV0sZVsxXSksdFsyXT1NYXRoLm1heCh0WzJdLGVbMF0pLHRbM109TWF0aC5tYXgodFszXSxlWzFdKTt9ZnVuY3Rpb24gaXIodCxlKXtyZXR1cm4gISh0WzBdPD1lWzBdfHx0WzJdPj1lWzJdfHx0WzFdPD1lWzFdfHx0WzNdPj1lWzNdKX1mdW5jdGlvbiBzcih0LGUpe2NvbnN0IHI9KDE4MCt0WzBdKS8zNjAsbj0oMTgwLTE4MC9NYXRoLlBJKk1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkvNCt0WzFdKk1hdGguUEkvMzYwKSkpLzM2MCxpPU1hdGgucG93KDIsZS56KTtyZXR1cm4gW01hdGgucm91bmQocippKnJyKSxNYXRoLnJvdW5kKG4qaSpycildfWZ1bmN0aW9uIGFyKHQsZSxyKXtjb25zdCBuPXRbMF0tZVswXSxpPXRbMV0tZVsxXSxzPXRbMF0tclswXSxhPXRbMV0tclsxXTtyZXR1cm4gbiphLXMqaT09MCYmbipzPD0wJiZpKmE8PTB9ZnVuY3Rpb24gb3IodCxlKXtsZXQgcj0hMTtmb3IobGV0IGE9MCxvPWUubGVuZ3RoO2E8bzthKyspe2NvbnN0IG89ZVthXTtmb3IobGV0IGU9MCxhPW8ubGVuZ3RoO2U8YS0xO2UrKyl7aWYoYXIodCxvW2VdLG9bZSsxXSkpcmV0dXJuICExOyhpPW9bZV0pWzFdPihuPXQpWzFdIT0ocz1vW2UrMV0pWzFdPm5bMV0mJm5bMF08KHNbMF0taVswXSkqKG5bMV0taVsxXSkvKHNbMV0taVsxXSkraVswXSYmKHI9IXIpO319dmFyIG4saSxzO3JldHVybiByfWZ1bmN0aW9uIGxyKHQsZSl7Zm9yKGxldCByPTA7cjxlLmxlbmd0aDtyKyspaWYob3IodCxlW3JdKSlyZXR1cm4gITA7cmV0dXJuICExfWZ1bmN0aW9uIHVyKHQsZSxyLG4pe2NvbnN0IGk9blswXS1yWzBdLHM9blsxXS1yWzFdLGE9KHRbMF0tclswXSkqcy1pKih0WzFdLXJbMV0pLG89KGVbMF0tclswXSkqcy1pKihlWzFdLXJbMV0pO3JldHVybiBhPjAmJm88MHx8YTwwJiZvPjB9ZnVuY3Rpb24gY3IodCxlLHIpe2Zvcihjb25zdCB1IG9mIHIpZm9yKGxldCByPTA7cjx1Lmxlbmd0aC0xOysrcilpZigwIT0obz1bKGE9dVtyKzFdKVswXS0ocz11W3JdKVswXSxhWzFdLXNbMV1dKVswXSoobD1bKGk9ZSlbMF0tKG49dClbMF0saVsxXS1uWzFdXSlbMV0tb1sxXSpsWzBdJiZ1cihuLGkscyxhKSYmdXIocyxhLG4saSkpcmV0dXJuICEwO3ZhciBuLGkscyxhLG8sbDtyZXR1cm4gITF9ZnVuY3Rpb24gaHIodCxlKXtmb3IobGV0IHI9MDtyPHQubGVuZ3RoOysrcilpZighb3IodFtyXSxlKSlyZXR1cm4gITE7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aC0xOysrcilpZihjcih0W3JdLHRbcisxXSxlKSlyZXR1cm4gITE7cmV0dXJuICEwfWZ1bmN0aW9uIHByKHQsZSl7Zm9yKGxldCByPTA7cjxlLmxlbmd0aDtyKyspaWYoaHIodCxlW3JdKSlyZXR1cm4gITA7cmV0dXJuICExfWZ1bmN0aW9uIGRyKHQsZSxyKXtjb25zdCBuPVtdO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKXtjb25zdCBzPVtdO2ZvcihsZXQgbj0wO248dFtpXS5sZW5ndGg7bisrKXtjb25zdCBhPXNyKHRbaV1bbl0scik7bnIoZSxhKSxzLnB1c2goYSk7fW4ucHVzaChzKTt9cmV0dXJuIG59ZnVuY3Rpb24gZnIodCxlLHIpe2NvbnN0IG49W107Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IHM9ZHIodFtpXSxlLHIpO24ucHVzaChzKTt9cmV0dXJuIG59ZnVuY3Rpb24geXIodCxlLHIsbil7aWYodFswXTxyWzBdfHx0WzBdPnJbMl0pe2NvbnN0IGU9LjUqbjtsZXQgaT10WzBdLXJbMF0+ZT8tbjpyWzBdLXRbMF0+ZT9uOjA7MD09PWkmJihpPXRbMF0tclsyXT5lPy1uOnJbMl0tdFswXT5lP246MCksdFswXSs9aTt9bnIoZSx0KTt9ZnVuY3Rpb24gbXIodCxlLHIsbil7Y29uc3QgaT1NYXRoLnBvdygyLG4ueikqcnIscz1bbi54KnJyLG4ueSpycl0sYT1bXTtpZighdClyZXR1cm4gYTtmb3IoY29uc3QgbiBvZiB0KWZvcihjb25zdCB0IG9mIG4pe2NvbnN0IG49W3QueCtzWzBdLHQueStzWzFdXTt5cihuLGUscixpKSxhLnB1c2gobik7fXJldHVybiBhfWZ1bmN0aW9uIGdyKHQsZSxyLG4pe2NvbnN0IGk9TWF0aC5wb3coMixuLnopKnJyLHM9W24ueCpycixuLnkqcnJdLGE9W107aWYoIXQpcmV0dXJuIGE7Zm9yKGNvbnN0IHIgb2YgdCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgbiBvZiByKXtjb25zdCByPVtuLngrc1swXSxuLnkrc1sxXV07bnIoZSxyKSx0LnB1c2gocik7fWEucHVzaCh0KTt9aWYoZVsyXS1lWzBdPD1pLzIpeyhvPWUpWzBdPW9bMV09MS8wLG9bMl09b1szXT0tMS8wO2Zvcihjb25zdCB0IG9mIGEpZm9yKGNvbnN0IG4gb2YgdCl5cihuLGUscixpKTt9dmFyIG87cmV0dXJuIGF9Y2xhc3MgeHJ7Y29uc3RydWN0b3IodCxlKXt0aGlzLnR5cGU9aGUsdGhpcy5nZW9qc29uPXQsdGhpcy5nZW9tZXRyaWVzPWU7fXN0YXRpYyBwYXJzZSh0LGUpe2lmKDIhPT10Lmxlbmd0aClyZXR1cm4gZS5lcnJvcihgJ3dpdGhpbicgZXhwcmVzc2lvbiByZXF1aXJlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgYnV0IGZvdW5kICR7dC5sZW5ndGgtMX0gaW5zdGVhZC5gKTtpZihGZSh0WzFdKSl7Y29uc3QgZT10WzFdO2lmKFwiRmVhdHVyZUNvbGxlY3Rpb25cIj09PWUudHlwZSlmb3IobGV0IHQ9MDt0PGUuZmVhdHVyZXMubGVuZ3RoOysrdCl7Y29uc3Qgcj1lLmZlYXR1cmVzW3RdLmdlb21ldHJ5LnR5cGU7aWYoXCJQb2x5Z29uXCI9PT1yfHxcIk11bHRpUG9seWdvblwiPT09cilyZXR1cm4gbmV3IHhyKGUsZS5mZWF0dXJlc1t0XS5nZW9tZXRyeSl9ZWxzZSBpZihcIkZlYXR1cmVcIj09PWUudHlwZSl7Y29uc3QgdD1lLmdlb21ldHJ5LnR5cGU7aWYoXCJQb2x5Z29uXCI9PT10fHxcIk11bHRpUG9seWdvblwiPT09dClyZXR1cm4gbmV3IHhyKGUsZS5nZW9tZXRyeSl9ZWxzZSBpZihcIlBvbHlnb25cIj09PWUudHlwZXx8XCJNdWx0aVBvbHlnb25cIj09PWUudHlwZSlyZXR1cm4gbmV3IHhyKGUsZSl9cmV0dXJuIGUuZXJyb3IoXCInd2l0aGluJyBleHByZXNzaW9uIHJlcXVpcmVzIHZhbGlkIGdlb2pzb24gb2JqZWN0IHRoYXQgY29udGFpbnMgcG9seWdvbiBnZW9tZXRyeSB0eXBlLlwiKX1ldmFsdWF0ZSh0KXtpZihudWxsIT10Lmdlb21ldHJ5KCkmJm51bGwhPXQuY2Fub25pY2FsSUQoKSl7aWYoXCJQb2ludFwiPT09dC5nZW9tZXRyeVR5cGUoKSlyZXR1cm4gZnVuY3Rpb24odCxlKXtjb25zdCByPVsxLzAsMS8wLC0xLzAsLTEvMF0sbj1bMS8wLDEvMCwtMS8wLC0xLzBdLGk9dC5jYW5vbmljYWxJRCgpO2lmKCFpKXJldHVybiAhMTtpZihcIlBvbHlnb25cIj09PWUudHlwZSl7Y29uc3Qgcz1kcihlLmNvb3JkaW5hdGVzLG4saSksYT1tcih0Lmdlb21ldHJ5KCkscixuLGkpO2lmKCFpcihyLG4pKXJldHVybiAhMTtmb3IoY29uc3QgdCBvZiBhKWlmKCFvcih0LHMpKXJldHVybiAhMX1pZihcIk11bHRpUG9seWdvblwiPT09ZS50eXBlKXtjb25zdCBzPWZyKGUuY29vcmRpbmF0ZXMsbixpKSxhPW1yKHQuZ2VvbWV0cnkoKSxyLG4saSk7aWYoIWlyKHIsbikpcmV0dXJuICExO2Zvcihjb25zdCB0IG9mIGEpaWYoIWxyKHQscykpcmV0dXJuICExfXJldHVybiAhMH0odCx0aGlzLmdlb21ldHJpZXMpO2lmKFwiTGluZVN0cmluZ1wiPT09dC5nZW9tZXRyeVR5cGUoKSlyZXR1cm4gZnVuY3Rpb24odCxlKXtjb25zdCByPVsxLzAsMS8wLC0xLzAsLTEvMF0sbj1bMS8wLDEvMCwtMS8wLC0xLzBdLGk9dC5jYW5vbmljYWxJRCgpO2lmKCFpKXJldHVybiAhMTtpZihcIlBvbHlnb25cIj09PWUudHlwZSl7Y29uc3Qgcz1kcihlLmNvb3JkaW5hdGVzLG4saSksYT1ncih0Lmdlb21ldHJ5KCkscixuLGkpO2lmKCFpcihyLG4pKXJldHVybiAhMTtmb3IoY29uc3QgdCBvZiBhKWlmKCFocih0LHMpKXJldHVybiAhMX1pZihcIk11bHRpUG9seWdvblwiPT09ZS50eXBlKXtjb25zdCBzPWZyKGUuY29vcmRpbmF0ZXMsbixpKSxhPWdyKHQuZ2VvbWV0cnkoKSxyLG4saSk7aWYoIWlyKHIsbikpcmV0dXJuICExO2Zvcihjb25zdCB0IG9mIGEpaWYoIXByKHQscykpcmV0dXJuICExfXJldHVybiAhMH0odCx0aGlzLmdlb21ldHJpZXMpfXJldHVybiAhMX1lYWNoQ2hpbGQoKXt9b3V0cHV0RGVmaW5lZCgpe3JldHVybiAhMH1zZXJpYWxpemUoKXtyZXR1cm4gW1wid2l0aGluXCIsdGhpcy5nZW9qc29uXX19dmFyIHZyPXhyO2Z1bmN0aW9uIGJyKHQpe2lmKHQgaW5zdGFuY2VvZiB0cil7aWYoXCJnZXRcIj09PXQubmFtZSYmMT09PXQuYXJncy5sZW5ndGgpcmV0dXJuICExO2lmKFwiZmVhdHVyZS1zdGF0ZVwiPT09dC5uYW1lKXJldHVybiAhMTtpZihcImhhc1wiPT09dC5uYW1lJiYxPT09dC5hcmdzLmxlbmd0aClyZXR1cm4gITE7aWYoXCJwcm9wZXJ0aWVzXCI9PT10Lm5hbWV8fFwiZ2VvbWV0cnktdHlwZVwiPT09dC5uYW1lfHxcImlkXCI9PT10Lm5hbWUpcmV0dXJuICExO2lmKC9eZmlsdGVyLS8udGVzdCh0Lm5hbWUpKXJldHVybiAhMX1pZih0IGluc3RhbmNlb2YgdnIpcmV0dXJuICExO2xldCBlPSEwO3JldHVybiB0LmVhY2hDaGlsZCgodD0+e2UmJiFicih0KSYmKGU9ITEpO30pKSxlfWZ1bmN0aW9uIHdyKHQpe2lmKHQgaW5zdGFuY2VvZiB0ciYmXCJmZWF0dXJlLXN0YXRlXCI9PT10Lm5hbWUpcmV0dXJuICExO2xldCBlPSEwO3JldHVybiB0LmVhY2hDaGlsZCgodD0+e2UmJiF3cih0KSYmKGU9ITEpO30pKSxlfWZ1bmN0aW9uIF9yKHQsZSl7aWYodCBpbnN0YW5jZW9mIHRyJiZlLmluZGV4T2YodC5uYW1lKT49MClyZXR1cm4gITE7bGV0IHI9ITA7cmV0dXJuIHQuZWFjaENoaWxkKCh0PT57ciYmIV9yKHQsZSkmJihyPSExKTt9KSkscn1jbGFzcyBBcntjb25zdHJ1Y3Rvcih0LGUpe3RoaXMudHlwZT1lLnR5cGUsdGhpcy5uYW1lPXQsdGhpcy5ib3VuZEV4cHJlc3Npb249ZTt9c3RhdGljIHBhcnNlKHQsZSl7aWYoMiE9PXQubGVuZ3RofHxcInN0cmluZ1wiIT10eXBlb2YgdFsxXSlyZXR1cm4gZS5lcnJvcihcIid2YXInIGV4cHJlc3Npb24gcmVxdWlyZXMgZXhhY3RseSBvbmUgc3RyaW5nIGxpdGVyYWwgYXJndW1lbnQuXCIpO2NvbnN0IHI9dFsxXTtyZXR1cm4gZS5zY29wZS5oYXMocik/bmV3IEFyKHIsZS5zY29wZS5nZXQocikpOmUuZXJyb3IoYFVua25vd24gdmFyaWFibGUgXCIke3J9XCIuIE1ha2Ugc3VyZSBcIiR7cn1cIiBoYXMgYmVlbiBib3VuZCBpbiBhbiBlbmNsb3NpbmcgXCJsZXRcIiBleHByZXNzaW9uIGJlZm9yZSB1c2luZyBpdC5gLDEpfWV2YWx1YXRlKHQpe3JldHVybiB0aGlzLmJvdW5kRXhwcmVzc2lvbi5ldmFsdWF0ZSh0KX1lYWNoQ2hpbGQoKXt9b3V0cHV0RGVmaW5lZCgpe3JldHVybiAhMX1zZXJpYWxpemUoKXtyZXR1cm4gW1widmFyXCIsdGhpcy5uYW1lXX19dmFyIFNyPUFyO2NsYXNzIGtye2NvbnN0cnVjdG9yKHQsZT1bXSxyLG49bmV3IG9lLGk9W10pe3RoaXMucmVnaXN0cnk9dCx0aGlzLnBhdGg9ZSx0aGlzLmtleT1lLm1hcCgodD0+YFske3R9XWApKS5qb2luKFwiXCIpLHRoaXMuc2NvcGU9bix0aGlzLmVycm9ycz1pLHRoaXMuZXhwZWN0ZWRUeXBlPXI7fXBhcnNlKHQsZSxyLG4saT17fSl7cmV0dXJuIGU/dGhpcy5jb25jYXQoZSxyLG4pLl9wYXJzZSh0LGkpOnRoaXMuX3BhcnNlKHQsaSl9X3BhcnNlKHQsZSl7ZnVuY3Rpb24gcih0LGUscil7cmV0dXJuIFwiYXNzZXJ0XCI9PT1yP25ldyBHZShlLFt0XSk6XCJjb2VyY2VcIj09PXI/bmV3IEhlKGUsW3RdKTp0fWlmKG51bGwhPT10JiZcInN0cmluZ1wiIT10eXBlb2YgdCYmXCJib29sZWFuXCIhPXR5cGVvZiB0JiZcIm51bWJlclwiIT10eXBlb2YgdHx8KHQ9W1wibGl0ZXJhbFwiLHRdKSxBcnJheS5pc0FycmF5KHQpKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHRoaXMuZXJyb3IoJ0V4cGVjdGVkIGFuIGFycmF5IHdpdGggYXQgbGVhc3Qgb25lIGVsZW1lbnQuIElmIHlvdSB3YW50ZWQgYSBsaXRlcmFsIGFycmF5LCB1c2UgW1wibGl0ZXJhbFwiLCBbXV0uJyk7Y29uc3Qgbj10WzBdO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBuKXJldHVybiB0aGlzLmVycm9yKGBFeHByZXNzaW9uIG5hbWUgbXVzdCBiZSBhIHN0cmluZywgYnV0IGZvdW5kICR7dHlwZW9mIG59IGluc3RlYWQuIElmIHlvdSB3YW50ZWQgYSBsaXRlcmFsIGFycmF5LCB1c2UgW1wibGl0ZXJhbFwiLCBbLi4uXV0uYCwwKSxudWxsO2NvbnN0IGk9dGhpcy5yZWdpc3RyeVtuXTtpZihpKXtsZXQgbj1pLnBhcnNlKHQsdGhpcyk7aWYoIW4pcmV0dXJuIG51bGw7aWYodGhpcy5leHBlY3RlZFR5cGUpe2NvbnN0IHQ9dGhpcy5leHBlY3RlZFR5cGUsaT1uLnR5cGU7aWYoXCJzdHJpbmdcIiE9PXQua2luZCYmXCJudW1iZXJcIiE9PXQua2luZCYmXCJib29sZWFuXCIhPT10LmtpbmQmJlwib2JqZWN0XCIhPT10LmtpbmQmJlwiYXJyYXlcIiE9PXQua2luZHx8XCJ2YWx1ZVwiIT09aS5raW5kKWlmKFwiY29sb3JcIiE9PXQua2luZCYmXCJmb3JtYXR0ZWRcIiE9PXQua2luZCYmXCJyZXNvbHZlZEltYWdlXCIhPT10LmtpbmR8fFwidmFsdWVcIiE9PWkua2luZCYmXCJzdHJpbmdcIiE9PWkua2luZCl7aWYodGhpcy5jaGVja1N1YnR5cGUodCxpKSlyZXR1cm4gbnVsbH1lbHNlIG49cihuLHQsZS50eXBlQW5ub3RhdGlvbnx8XCJjb2VyY2VcIik7ZWxzZSBuPXIobix0LGUudHlwZUFubm90YXRpb258fFwiYXNzZXJ0XCIpO31pZighKG4gaW5zdGFuY2VvZiBqZSkmJlwicmVzb2x2ZWRJbWFnZVwiIT09bi50eXBlLmtpbmQmJk1yKG4pKXtjb25zdCB0PW5ldyBXZTt0cnl7bj1uZXcgamUobi50eXBlLG4uZXZhbHVhdGUodCkpO31jYXRjaCh0KXtyZXR1cm4gdGhpcy5lcnJvcih0Lm1lc3NhZ2UpLG51bGx9fXJldHVybiBufXJldHVybiB0aGlzLmVycm9yKGBVbmtub3duIGV4cHJlc3Npb24gXCIke259XCIuIElmIHlvdSB3YW50ZWQgYSBsaXRlcmFsIGFycmF5LCB1c2UgW1wibGl0ZXJhbFwiLCBbLi4uXV0uYCwwKX1yZXR1cm4gdGhpcy5lcnJvcih2b2lkIDA9PT10P1wiJ3VuZGVmaW5lZCcgdmFsdWUgaW52YWxpZC4gVXNlIG51bGwgaW5zdGVhZC5cIjpcIm9iamVjdFwiPT10eXBlb2YgdD8nQmFyZSBvYmplY3RzIGludmFsaWQuIFVzZSBbXCJsaXRlcmFsXCIsIHsuLi59XSBpbnN0ZWFkLic6YEV4cGVjdGVkIGFuIGFycmF5LCBidXQgZm91bmQgJHt0eXBlb2YgdH0gaW5zdGVhZC5gKX1jb25jYXQodCxlLHIpe2NvbnN0IG49XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5wYXRoLmNvbmNhdCh0KTp0aGlzLnBhdGgsaT1yP3RoaXMuc2NvcGUuY29uY2F0KHIpOnRoaXMuc2NvcGU7cmV0dXJuIG5ldyBrcih0aGlzLnJlZ2lzdHJ5LG4sZXx8bnVsbCxpLHRoaXMuZXJyb3JzKX1lcnJvcih0LC4uLmUpe2NvbnN0IHI9YCR7dGhpcy5rZXl9JHtlLm1hcCgodD0+YFske3R9XWApKS5qb2luKFwiXCIpfWA7dGhpcy5lcnJvcnMucHVzaChuZXcgc2Uocix0KSk7fWNoZWNrU3VidHlwZSh0LGUpe2NvbnN0IHI9d2UodCxlKTtyZXR1cm4gciYmdGhpcy5lcnJvcihyKSxyfX12YXIgSXI9a3I7ZnVuY3Rpb24gTXIodCl7aWYodCBpbnN0YW5jZW9mIFNyKXJldHVybiBNcih0LmJvdW5kRXhwcmVzc2lvbik7aWYodCBpbnN0YW5jZW9mIHRyJiZcImVycm9yXCI9PT10Lm5hbWUpcmV0dXJuICExO2lmKHQgaW5zdGFuY2VvZiBlcilyZXR1cm4gITE7aWYodCBpbnN0YW5jZW9mIHZyKXJldHVybiAhMTtjb25zdCBlPXQgaW5zdGFuY2VvZiBIZXx8dCBpbnN0YW5jZW9mIEdlO2xldCByPSEwO3JldHVybiB0LmVhY2hDaGlsZCgodD0+e3I9ZT9yJiZNcih0KTpyJiZ0IGluc3RhbmNlb2YgamU7fSkpLCEhciYmYnIodCkmJl9yKHQsW1wiem9vbVwiLFwiaGVhdG1hcC1kZW5zaXR5XCIsXCJsaW5lLXByb2dyZXNzXCIsXCJza3ktcmFkaWFsLXByb2dyZXNzXCIsXCJhY2N1bXVsYXRlZFwiLFwiaXMtc3VwcG9ydGVkLXNjcmlwdFwiLFwicGl0Y2hcIixcImRpc3RhbmNlLWZyb20tY2VudGVyXCJdKX1mdW5jdGlvbiBUcih0LGUpe2NvbnN0IHI9dC5sZW5ndGgtMTtsZXQgbixpLHM9MCxhPXIsbz0wO2Zvcig7czw9YTspaWYobz1NYXRoLmZsb29yKChzK2EpLzIpLG49dFtvXSxpPXRbbysxXSxuPD1lKXtpZihvPT09cnx8ZTxpKXJldHVybiBvO3M9bysxO31lbHNlIHtpZighKG4+ZSkpdGhyb3cgbmV3IE9lKFwiSW5wdXQgaXMgbm90IGEgbnVtYmVyLlwiKTthPW8tMTt9cmV0dXJuIDB9Y2xhc3MgenJ7Y29uc3RydWN0b3IodCxlLHIpe3RoaXMudHlwZT10LHRoaXMuaW5wdXQ9ZSx0aGlzLmxhYmVscz1bXSx0aGlzLm91dHB1dHM9W107Zm9yKGNvbnN0W3QsZV1vZiByKXRoaXMubGFiZWxzLnB1c2godCksdGhpcy5vdXRwdXRzLnB1c2goZSk7fXN0YXRpYyBwYXJzZSh0LGUpe2lmKHQubGVuZ3RoLTE8NClyZXR1cm4gZS5lcnJvcihgRXhwZWN0ZWQgYXQgbGVhc3QgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCBvbmx5ICR7dC5sZW5ndGgtMX0uYCk7aWYoKHQubGVuZ3RoLTEpJTIhPTApcmV0dXJuIGUuZXJyb3IoXCJFeHBlY3RlZCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMuXCIpO2NvbnN0IHI9ZS5wYXJzZSh0WzFdLDEsdWUpO2lmKCFyKXJldHVybiBudWxsO2NvbnN0IG49W107bGV0IGk9bnVsbDtlLmV4cGVjdGVkVHlwZSYmXCJ2YWx1ZVwiIT09ZS5leHBlY3RlZFR5cGUua2luZCYmKGk9ZS5leHBlY3RlZFR5cGUpO2ZvcihsZXQgcj0xO3I8dC5sZW5ndGg7cis9Mil7Y29uc3Qgcz0xPT09cj8tMS8wOnRbcl0sYT10W3IrMV0sbz1yLGw9cisxO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBzKXJldHVybiBlLmVycm9yKCdJbnB1dC9vdXRwdXQgcGFpcnMgZm9yIFwic3RlcFwiIGV4cHJlc3Npb25zIG11c3QgYmUgZGVmaW5lZCB1c2luZyBsaXRlcmFsIG51bWVyaWMgdmFsdWVzIChub3QgY29tcHV0ZWQgZXhwcmVzc2lvbnMpIGZvciB0aGUgaW5wdXQgdmFsdWVzLicsbyk7aWYobi5sZW5ndGgmJm5bbi5sZW5ndGgtMV1bMF0+PXMpcmV0dXJuIGUuZXJyb3IoJ0lucHV0L291dHB1dCBwYWlycyBmb3IgXCJzdGVwXCIgZXhwcmVzc2lvbnMgbXVzdCBiZSBhcnJhbmdlZCB3aXRoIGlucHV0IHZhbHVlcyBpbiBzdHJpY3RseSBhc2NlbmRpbmcgb3JkZXIuJyxvKTtjb25zdCB1PWUucGFyc2UoYSxsLGkpO2lmKCF1KXJldHVybiBudWxsO2k9aXx8dS50eXBlLG4ucHVzaChbcyx1XSk7fXJldHVybiBuZXcgenIoaSxyLG4pfWV2YWx1YXRlKHQpe2NvbnN0IGU9dGhpcy5sYWJlbHMscj10aGlzLm91dHB1dHM7aWYoMT09PWUubGVuZ3RoKXJldHVybiByWzBdLmV2YWx1YXRlKHQpO2NvbnN0IG49dGhpcy5pbnB1dC5ldmFsdWF0ZSh0KTtpZihuPD1lWzBdKXJldHVybiByWzBdLmV2YWx1YXRlKHQpO2NvbnN0IGk9ZS5sZW5ndGg7cmV0dXJuIG4+PWVbaS0xXT9yW2ktMV0uZXZhbHVhdGUodCk6cltUcihlLG4pXS5ldmFsdWF0ZSh0KX1lYWNoQ2hpbGQodCl7dCh0aGlzLmlucHV0KTtmb3IoY29uc3QgZSBvZiB0aGlzLm91dHB1dHMpdChlKTt9b3V0cHV0RGVmaW5lZCgpe3JldHVybiB0aGlzLm91dHB1dHMuZXZlcnkoKHQ9PnQub3V0cHV0RGVmaW5lZCgpKSl9c2VyaWFsaXplKCl7Y29uc3QgdD1bXCJzdGVwXCIsdGhpcy5pbnB1dC5zZXJpYWxpemUoKV07Zm9yKGxldCBlPTA7ZTx0aGlzLmxhYmVscy5sZW5ndGg7ZSsrKWU+MCYmdC5wdXNoKHRoaXMubGFiZWxzW2VdKSx0LnB1c2godGhpcy5vdXRwdXRzW2VdLnNlcmlhbGl6ZSgpKTtyZXR1cm4gdH19dmFyIEJyPXpyO2Z1bmN0aW9uIEVyKHQsZSxyKXtyZXR1cm4gdCooMS1yKStlKnJ9dmFyIENyPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGFycmF5OmZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdC5tYXAoKCh0LG4pPT5Fcih0LGVbbl0scikpKX0sY29sb3I6ZnVuY3Rpb24odCxlLHIpe3JldHVybiBuZXcgRWUoRXIodC5yLGUucixyKSxFcih0LmcsZS5nLHIpLEVyKHQuYixlLmIsciksRXIodC5hLGUuYSxyKSl9LG51bWJlcjpFcn0pO2NvbnN0IFByPS45NTA0NyxEcj0xLjA4ODgzLFZyPTQvMjksTHI9Ni8yOSxGcj0zKkxyKkxyLFJyPUxyKkxyKkxyLFVyPU1hdGguUEkvMTgwLCRyPTE4MC9NYXRoLlBJO2Z1bmN0aW9uIGpyKHQpe3JldHVybiB0PlJyP01hdGgucG93KHQsMS8zKTp0L0ZyK1ZyfWZ1bmN0aW9uIE9yKHQpe3JldHVybiB0PkxyP3QqdCp0OkZyKih0LVZyKX1mdW5jdGlvbiBxcih0KXtyZXR1cm4gMjU1Kih0PD0uMDAzMTMwOD8xMi45Mip0OjEuMDU1Kk1hdGgucG93KHQsMS8yLjQpLS4wNTUpfWZ1bmN0aW9uIE5yKHQpe3JldHVybiAodC89MjU1KTw9LjA0MDQ1P3QvMTIuOTI6TWF0aC5wb3coKHQrLjA1NSkvMS4wNTUsMi40KX1mdW5jdGlvbiBHcih0KXtjb25zdCBlPU5yKHQucikscj1Ocih0LmcpLG49TnIodC5iKSxpPWpyKCguNDEyNDU2NCplKy4zNTc1NzYxKnIrLjE4MDQzNzUqbikvUHIpLHM9anIoKC4yMTI2NzI5KmUrLjcxNTE1MjIqcisuMDcyMTc1Km4pLzEpO3JldHVybiB7bDoxMTYqcy0xNixhOjUwMCooaS1zKSxiOjIwMCoocy1qcigoLjAxOTMzMzkqZSsuMTE5MTkyKnIrLjk1MDMwNDEqbikvRHIpKSxhbHBoYTp0LmF9fWZ1bmN0aW9uIFpyKHQpe2xldCBlPSh0LmwrMTYpLzExNixyPWlzTmFOKHQuYSk/ZTplK3QuYS81MDAsbj1pc05hTih0LmIpP2U6ZS10LmIvMjAwO3JldHVybiBlPTEqT3IoZSkscj1QcipPcihyKSxuPURyKk9yKG4pLG5ldyBFZShxcigzLjI0MDQ1NDIqci0xLjUzNzEzODUqZS0uNDk4NTMxNCpuKSxxcigtLjk2OTI2NipyKzEuODc2MDEwOCplKy4wNDE1NTYqbikscXIoLjA1NTY0MzQqci0uMjA0MDI1OSplKzEuMDU3MjI1MipuKSx0LmFscGhhKX1mdW5jdGlvbiBLcih0LGUscil7Y29uc3Qgbj1lLXQ7cmV0dXJuIHQrcioobj4xODB8fG48LTE4MD9uLTM2MCpNYXRoLnJvdW5kKG4vMzYwKTpuKX1jb25zdCBYcj17Zm9yd2FyZDpHcixyZXZlcnNlOlpyLGludGVycG9sYXRlOmZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4ge2w6RXIodC5sLGUubCxyKSxhOkVyKHQuYSxlLmEsciksYjpFcih0LmIsZS5iLHIpLGFscGhhOkVyKHQuYWxwaGEsZS5hbHBoYSxyKX19fSxKcj17Zm9yd2FyZDpmdW5jdGlvbih0KXtjb25zdHtsOmUsYTpyLGI6bn09R3IodCksaT1NYXRoLmF0YW4yKG4scikqJHI7cmV0dXJuIHtoOmk8MD9pKzM2MDppLGM6TWF0aC5zcXJ0KHIqcituKm4pLGw6ZSxhbHBoYTp0LmF9fSxyZXZlcnNlOmZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5oKlVyLHI9dC5jO3JldHVybiBacih7bDp0LmwsYTpNYXRoLmNvcyhlKSpyLGI6TWF0aC5zaW4oZSkqcixhbHBoYTp0LmFscGhhfSl9LGludGVycG9sYXRlOmZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4ge2g6S3IodC5oLGUuaCxyKSxjOkVyKHQuYyxlLmMsciksbDpFcih0LmwsZS5sLHIpLGFscGhhOkVyKHQuYWxwaGEsZS5hbHBoYSxyKX19fTt2YXIgSHI9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsaGNsOkpyLGxhYjpYcn0pO2NsYXNzIFlye2NvbnN0cnVjdG9yKHQsZSxyLG4saSl7dGhpcy50eXBlPXQsdGhpcy5vcGVyYXRvcj1lLHRoaXMuaW50ZXJwb2xhdGlvbj1yLHRoaXMuaW5wdXQ9bix0aGlzLmxhYmVscz1bXSx0aGlzLm91dHB1dHM9W107Zm9yKGNvbnN0W3QsZV1vZiBpKXRoaXMubGFiZWxzLnB1c2godCksdGhpcy5vdXRwdXRzLnB1c2goZSk7fXN0YXRpYyBpbnRlcnBvbGF0aW9uRmFjdG9yKHQsZSxyLG4pe2xldCBpPTA7aWYoXCJleHBvbmVudGlhbFwiPT09dC5uYW1lKWk9V3IoZSx0LmJhc2UscixuKTtlbHNlIGlmKFwibGluZWFyXCI9PT10Lm5hbWUpaT1XcihlLDEscixuKTtlbHNlIGlmKFwiY3ViaWMtYmV6aWVyXCI9PT10Lm5hbWUpe2NvbnN0IHM9dC5jb250cm9sUG9pbnRzO2k9bmV3IHkoc1swXSxzWzFdLHNbMl0sc1szXSkuc29sdmUoV3IoZSwxLHIsbikpO31yZXR1cm4gaX1zdGF0aWMgcGFyc2UodCxlKXtsZXRbcixuLGksLi4uc109dDtpZighQXJyYXkuaXNBcnJheShuKXx8MD09PW4ubGVuZ3RoKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYW4gaW50ZXJwb2xhdGlvbiB0eXBlIGV4cHJlc3Npb24uXCIsMSk7aWYoXCJsaW5lYXJcIj09PW5bMF0pbj17bmFtZTpcImxpbmVhclwifTtlbHNlIGlmKFwiZXhwb25lbnRpYWxcIj09PW5bMF0pe2NvbnN0IHQ9blsxXTtpZihcIm51bWJlclwiIT10eXBlb2YgdClyZXR1cm4gZS5lcnJvcihcIkV4cG9uZW50aWFsIGludGVycG9sYXRpb24gcmVxdWlyZXMgYSBudW1lcmljIGJhc2UuXCIsMSwxKTtuPXtuYW1lOlwiZXhwb25lbnRpYWxcIixiYXNlOnR9O31lbHNlIHtpZihcImN1YmljLWJlemllclwiIT09blswXSlyZXR1cm4gZS5lcnJvcihgVW5rbm93biBpbnRlcnBvbGF0aW9uIHR5cGUgJHtTdHJpbmcoblswXSl9YCwxLDApO3tjb25zdCB0PW4uc2xpY2UoMSk7aWYoNCE9PXQubGVuZ3RofHx0LnNvbWUoKHQ9PlwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fHQ+MSkpKXJldHVybiBlLmVycm9yKFwiQ3ViaWMgYmV6aWVyIGludGVycG9sYXRpb24gcmVxdWlyZXMgZm91ciBudW1lcmljIGFyZ3VtZW50cyB3aXRoIHZhbHVlcyBiZXR3ZWVuIDAgYW5kIDEuXCIsMSk7bj17bmFtZTpcImN1YmljLWJlemllclwiLGNvbnRyb2xQb2ludHM6dH07fX1pZih0Lmxlbmd0aC0xPDQpcmV0dXJuIGUuZXJyb3IoYEV4cGVjdGVkIGF0IGxlYXN0IDQgYXJndW1lbnRzLCBidXQgZm91bmQgb25seSAke3QubGVuZ3RoLTF9LmApO2lmKCh0Lmxlbmd0aC0xKSUyIT0wKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzLlwiKTtpZihpPWUucGFyc2UoaSwyLHVlKSwhaSlyZXR1cm4gbnVsbDtjb25zdCBhPVtdO2xldCBvPW51bGw7XCJpbnRlcnBvbGF0ZS1oY2xcIj09PXJ8fFwiaW50ZXJwb2xhdGUtbGFiXCI9PT1yP289cGU6ZS5leHBlY3RlZFR5cGUmJlwidmFsdWVcIiE9PWUuZXhwZWN0ZWRUeXBlLmtpbmQmJihvPWUuZXhwZWN0ZWRUeXBlKTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrPTIpe2NvbnN0IHI9c1t0XSxuPXNbdCsxXSxpPXQrMyxsPXQrNDtpZihcIm51bWJlclwiIT10eXBlb2YgcilyZXR1cm4gZS5lcnJvcignSW5wdXQvb3V0cHV0IHBhaXJzIGZvciBcImludGVycG9sYXRlXCIgZXhwcmVzc2lvbnMgbXVzdCBiZSBkZWZpbmVkIHVzaW5nIGxpdGVyYWwgbnVtZXJpYyB2YWx1ZXMgKG5vdCBjb21wdXRlZCBleHByZXNzaW9ucykgZm9yIHRoZSBpbnB1dCB2YWx1ZXMuJyxpKTtpZihhLmxlbmd0aCYmYVthLmxlbmd0aC0xXVswXT49cilyZXR1cm4gZS5lcnJvcignSW5wdXQvb3V0cHV0IHBhaXJzIGZvciBcImludGVycG9sYXRlXCIgZXhwcmVzc2lvbnMgbXVzdCBiZSBhcnJhbmdlZCB3aXRoIGlucHV0IHZhbHVlcyBpbiBzdHJpY3RseSBhc2NlbmRpbmcgb3JkZXIuJyxpKTtjb25zdCB1PWUucGFyc2UobixsLG8pO2lmKCF1KXJldHVybiBudWxsO289b3x8dS50eXBlLGEucHVzaChbcix1XSk7fXJldHVybiBcIm51bWJlclwiPT09by5raW5kfHxcImNvbG9yXCI9PT1vLmtpbmR8fFwiYXJyYXlcIj09PW8ua2luZCYmXCJudW1iZXJcIj09PW8uaXRlbVR5cGUua2luZCYmXCJudW1iZXJcIj09dHlwZW9mIG8uTj9uZXcgWXIobyxyLG4saSxhKTplLmVycm9yKGBUeXBlICR7dmUobyl9IGlzIG5vdCBpbnRlcnBvbGF0YWJsZS5gKX1ldmFsdWF0ZSh0KXtjb25zdCBlPXRoaXMubGFiZWxzLHI9dGhpcy5vdXRwdXRzO2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gclswXS5ldmFsdWF0ZSh0KTtjb25zdCBuPXRoaXMuaW5wdXQuZXZhbHVhdGUodCk7aWYobjw9ZVswXSlyZXR1cm4gclswXS5ldmFsdWF0ZSh0KTtjb25zdCBpPWUubGVuZ3RoO2lmKG4+PWVbaS0xXSlyZXR1cm4gcltpLTFdLmV2YWx1YXRlKHQpO2NvbnN0IHM9VHIoZSxuKSxhPVlyLmludGVycG9sYXRpb25GYWN0b3IodGhpcy5pbnRlcnBvbGF0aW9uLG4sZVtzXSxlW3MrMV0pLG89cltzXS5ldmFsdWF0ZSh0KSxsPXJbcysxXS5ldmFsdWF0ZSh0KTtyZXR1cm4gXCJpbnRlcnBvbGF0ZVwiPT09dGhpcy5vcGVyYXRvcj9Dclt0aGlzLnR5cGUua2luZC50b0xvd2VyQ2FzZSgpXShvLGwsYSk6XCJpbnRlcnBvbGF0ZS1oY2xcIj09PXRoaXMub3BlcmF0b3I/SnIucmV2ZXJzZShKci5pbnRlcnBvbGF0ZShKci5mb3J3YXJkKG8pLEpyLmZvcndhcmQobCksYSkpOlhyLnJldmVyc2UoWHIuaW50ZXJwb2xhdGUoWHIuZm9yd2FyZChvKSxYci5mb3J3YXJkKGwpLGEpKX1lYWNoQ2hpbGQodCl7dCh0aGlzLmlucHV0KTtmb3IoY29uc3QgZSBvZiB0aGlzLm91dHB1dHMpdChlKTt9b3V0cHV0RGVmaW5lZCgpe3JldHVybiB0aGlzLm91dHB1dHMuZXZlcnkoKHQ9PnQub3V0cHV0RGVmaW5lZCgpKSl9c2VyaWFsaXplKCl7bGV0IHQ7dD1cImxpbmVhclwiPT09dGhpcy5pbnRlcnBvbGF0aW9uLm5hbWU/W1wibGluZWFyXCJdOlwiZXhwb25lbnRpYWxcIj09PXRoaXMuaW50ZXJwb2xhdGlvbi5uYW1lPzE9PT10aGlzLmludGVycG9sYXRpb24uYmFzZT9bXCJsaW5lYXJcIl06W1wiZXhwb25lbnRpYWxcIix0aGlzLmludGVycG9sYXRpb24uYmFzZV06W1wiY3ViaWMtYmV6aWVyXCJdLmNvbmNhdCh0aGlzLmludGVycG9sYXRpb24uY29udHJvbFBvaW50cyk7Y29uc3QgZT1bdGhpcy5vcGVyYXRvcix0LHRoaXMuaW5wdXQuc2VyaWFsaXplKCldO2ZvcihsZXQgdD0wO3Q8dGhpcy5sYWJlbHMubGVuZ3RoO3QrKyllLnB1c2godGhpcy5sYWJlbHNbdF0sdGhpcy5vdXRwdXRzW3RdLnNlcmlhbGl6ZSgpKTtyZXR1cm4gZX19ZnVuY3Rpb24gV3IodCxlLHIsbil7Y29uc3QgaT1uLXIscz10LXI7cmV0dXJuIDA9PT1pPzA6MT09PWU/cy9pOihNYXRoLnBvdyhlLHMpLTEpLyhNYXRoLnBvdyhlLGkpLTEpfXZhciBRcj1ZcjtjbGFzcyB0bntjb25zdHJ1Y3Rvcih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXJncz1lO31zdGF0aWMgcGFyc2UodCxlKXtpZih0Lmxlbmd0aDwyKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWN0ZWQgYXQgbGVhc3Qgb25lIGFyZ3VtZW50LlwiKTtsZXQgcj1udWxsO2NvbnN0IG49ZS5leHBlY3RlZFR5cGU7biYmXCJ2YWx1ZVwiIT09bi5raW5kJiYocj1uKTtjb25zdCBpPVtdO2Zvcihjb25zdCBuIG9mIHQuc2xpY2UoMSkpe2NvbnN0IHQ9ZS5wYXJzZShuLDEraS5sZW5ndGgscix2b2lkIDAse3R5cGVBbm5vdGF0aW9uOlwib21pdFwifSk7aWYoIXQpcmV0dXJuIG51bGw7cj1yfHx0LnR5cGUsaS5wdXNoKHQpO31jb25zdCBzPW4mJmkuc29tZSgodD0+d2Uobix0LnR5cGUpKSk7cmV0dXJuIG5ldyB0bihzP2ZlOnIsaSl9ZXZhbHVhdGUodCl7bGV0IGUscj1udWxsLG49MDtmb3IoY29uc3QgaSBvZiB0aGlzLmFyZ3Mpe2lmKG4rKyxyPWkuZXZhbHVhdGUodCksciYmciBpbnN0YW5jZW9mIFZlJiYhci5hdmFpbGFibGUmJihlfHwoZT1yKSxyPW51bGwsbj09PXRoaXMuYXJncy5sZW5ndGgpKXJldHVybiBlO2lmKG51bGwhPT1yKWJyZWFrfXJldHVybiByfWVhY2hDaGlsZCh0KXt0aGlzLmFyZ3MuZm9yRWFjaCh0KTt9b3V0cHV0RGVmaW5lZCgpe3JldHVybiB0aGlzLmFyZ3MuZXZlcnkoKHQ9PnQub3V0cHV0RGVmaW5lZCgpKSl9c2VyaWFsaXplKCl7Y29uc3QgdD1bXCJjb2FsZXNjZVwiXTtyZXR1cm4gdGhpcy5lYWNoQ2hpbGQoKGU9Pnt0LnB1c2goZS5zZXJpYWxpemUoKSk7fSkpLHR9fXZhciBlbj10bjtjbGFzcyBybntjb25zdHJ1Y3Rvcih0LGUpe3RoaXMudHlwZT1lLnR5cGUsdGhpcy5iaW5kaW5ncz1bXS5jb25jYXQodCksdGhpcy5yZXN1bHQ9ZTt9ZXZhbHVhdGUodCl7cmV0dXJuIHRoaXMucmVzdWx0LmV2YWx1YXRlKHQpfWVhY2hDaGlsZCh0KXtmb3IoY29uc3QgZSBvZiB0aGlzLmJpbmRpbmdzKXQoZVsxXSk7dCh0aGlzLnJlc3VsdCk7fXN0YXRpYyBwYXJzZSh0LGUpe2lmKHQubGVuZ3RoPDQpcmV0dXJuIGUuZXJyb3IoYEV4cGVjdGVkIGF0IGxlYXN0IDMgYXJndW1lbnRzLCBidXQgZm91bmQgJHt0Lmxlbmd0aC0xfSBpbnN0ZWFkLmApO2NvbnN0IHI9W107Zm9yKGxldCBuPTE7bjx0Lmxlbmd0aC0xO24rPTIpe2NvbnN0IGk9dFtuXTtpZihcInN0cmluZ1wiIT10eXBlb2YgaSlyZXR1cm4gZS5lcnJvcihgRXhwZWN0ZWQgc3RyaW5nLCBidXQgZm91bmQgJHt0eXBlb2YgaX0gaW5zdGVhZC5gLG4pO2lmKC9bXmEtekEtWjAtOV9dLy50ZXN0KGkpKXJldHVybiBlLmVycm9yKFwiVmFyaWFibGUgbmFtZXMgbXVzdCBjb250YWluIG9ubHkgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgb3IgJ18nLlwiLG4pO2NvbnN0IHM9ZS5wYXJzZSh0W24rMV0sbisxKTtpZighcylyZXR1cm4gbnVsbDtyLnB1c2goW2ksc10pO31jb25zdCBuPWUucGFyc2UodFt0Lmxlbmd0aC0xXSx0Lmxlbmd0aC0xLGUuZXhwZWN0ZWRUeXBlLHIpO3JldHVybiBuP25ldyBybihyLG4pOm51bGx9b3V0cHV0RGVmaW5lZCgpe3JldHVybiB0aGlzLnJlc3VsdC5vdXRwdXREZWZpbmVkKCl9c2VyaWFsaXplKCl7Y29uc3QgdD1bXCJsZXRcIl07Zm9yKGNvbnN0W2Uscl1vZiB0aGlzLmJpbmRpbmdzKXQucHVzaChlLHIuc2VyaWFsaXplKCkpO3JldHVybiB0LnB1c2godGhpcy5yZXN1bHQuc2VyaWFsaXplKCkpLHR9fXZhciBubj1ybjtjbGFzcyBzbntjb25zdHJ1Y3Rvcih0LGUscil7dGhpcy50eXBlPXQsdGhpcy5pbmRleD1lLHRoaXMuaW5wdXQ9cjt9c3RhdGljIHBhcnNlKHQsZSl7aWYoMyE9PXQubGVuZ3RoKXJldHVybiBlLmVycm9yKGBFeHBlY3RlZCAyIGFyZ3VtZW50cywgYnV0IGZvdW5kICR7dC5sZW5ndGgtMX0gaW5zdGVhZC5gKTtjb25zdCByPWUucGFyc2UodFsxXSwxLHVlKSxuPWUucGFyc2UodFsyXSwyLHhlKGUuZXhwZWN0ZWRUeXBlfHxmZSkpO3JldHVybiByJiZuP25ldyBzbihuLnR5cGUuaXRlbVR5cGUscixuKTpudWxsfWV2YWx1YXRlKHQpe2NvbnN0IGU9dGhpcy5pbmRleC5ldmFsdWF0ZSh0KSxyPXRoaXMuaW5wdXQuZXZhbHVhdGUodCk7aWYoZTwwKXRocm93IG5ldyBPZShgQXJyYXkgaW5kZXggb3V0IG9mIGJvdW5kczogJHtlfSA8IDAuYCk7aWYoZT49ci5sZW5ndGgpdGhyb3cgbmV3IE9lKGBBcnJheSBpbmRleCBvdXQgb2YgYm91bmRzOiAke2V9ID4gJHtyLmxlbmd0aC0xfS5gKTtpZihlIT09TWF0aC5mbG9vcihlKSl0aHJvdyBuZXcgT2UoYEFycmF5IGluZGV4IG11c3QgYmUgYW4gaW50ZWdlciwgYnV0IGZvdW5kICR7ZX0gaW5zdGVhZC5gKTtyZXR1cm4gcltlXX1lYWNoQ2hpbGQodCl7dCh0aGlzLmluZGV4KSx0KHRoaXMuaW5wdXQpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe3JldHVybiBbXCJhdFwiLHRoaXMuaW5kZXguc2VyaWFsaXplKCksdGhpcy5pbnB1dC5zZXJpYWxpemUoKV19fXZhciBhbj1zbjtjbGFzcyBvbntjb25zdHJ1Y3Rvcih0LGUpe3RoaXMudHlwZT1oZSx0aGlzLm5lZWRsZT10LHRoaXMuaGF5c3RhY2s9ZTt9c3RhdGljIHBhcnNlKHQsZSl7aWYoMyE9PXQubGVuZ3RoKXJldHVybiBlLmVycm9yKGBFeHBlY3RlZCAyIGFyZ3VtZW50cywgYnV0IGZvdW5kICR7dC5sZW5ndGgtMX0gaW5zdGVhZC5gKTtjb25zdCByPWUucGFyc2UodFsxXSwxLGZlKSxuPWUucGFyc2UodFsyXSwyLGZlKTtyZXR1cm4gciYmbj9fZShyLnR5cGUsW2hlLGNlLHVlLGxlLGZlXSk/bmV3IG9uKHIsbik6ZS5lcnJvcihgRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBib29sZWFuLCBzdHJpbmcsIG51bWJlciBvciBudWxsLCBidXQgZm91bmQgJHt2ZShyLnR5cGUpfSBpbnN0ZWFkYCk6bnVsbH1ldmFsdWF0ZSh0KXtjb25zdCBlPXRoaXMubmVlZGxlLmV2YWx1YXRlKHQpLHI9dGhpcy5oYXlzdGFjay5ldmFsdWF0ZSh0KTtpZihudWxsPT1yKXJldHVybiAhMTtpZighQWUoZSxbXCJib29sZWFuXCIsXCJzdHJpbmdcIixcIm51bWJlclwiLFwibnVsbFwiXSkpdGhyb3cgbmV3IE9lKGBFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBvZiB0eXBlIGJvb2xlYW4sIHN0cmluZywgbnVtYmVyIG9yIG51bGwsIGJ1dCBmb3VuZCAke3ZlKFJlKGUpKX0gaW5zdGVhZC5gKTtpZighQWUocixbXCJzdHJpbmdcIixcImFycmF5XCJdKSl0aHJvdyBuZXcgT2UoYEV4cGVjdGVkIHNlY29uZCBhcmd1bWVudCB0byBiZSBvZiB0eXBlIGFycmF5IG9yIHN0cmluZywgYnV0IGZvdW5kICR7dmUoUmUocikpfSBpbnN0ZWFkLmApO3JldHVybiByLmluZGV4T2YoZSk+PTB9ZWFjaENoaWxkKHQpe3QodGhpcy5uZWVkbGUpLHQodGhpcy5oYXlzdGFjayk7fW91dHB1dERlZmluZWQoKXtyZXR1cm4gITB9c2VyaWFsaXplKCl7cmV0dXJuIFtcImluXCIsdGhpcy5uZWVkbGUuc2VyaWFsaXplKCksdGhpcy5oYXlzdGFjay5zZXJpYWxpemUoKV19fXZhciBsbj1vbjtjbGFzcyB1bntjb25zdHJ1Y3Rvcih0LGUscil7dGhpcy50eXBlPXVlLHRoaXMubmVlZGxlPXQsdGhpcy5oYXlzdGFjaz1lLHRoaXMuZnJvbUluZGV4PXI7fXN0YXRpYyBwYXJzZSh0LGUpe2lmKHQubGVuZ3RoPD0yfHx0Lmxlbmd0aD49NSlyZXR1cm4gZS5lcnJvcihgRXhwZWN0ZWQgMyBvciA0IGFyZ3VtZW50cywgYnV0IGZvdW5kICR7dC5sZW5ndGgtMX0gaW5zdGVhZC5gKTtjb25zdCByPWUucGFyc2UodFsxXSwxLGZlKSxuPWUucGFyc2UodFsyXSwyLGZlKTtpZighcnx8IW4pcmV0dXJuIG51bGw7aWYoIV9lKHIudHlwZSxbaGUsY2UsdWUsbGUsZmVdKSlyZXR1cm4gZS5lcnJvcihgRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBib29sZWFuLCBzdHJpbmcsIG51bWJlciBvciBudWxsLCBidXQgZm91bmQgJHt2ZShyLnR5cGUpfSBpbnN0ZWFkYCk7aWYoND09PXQubGVuZ3RoKXtjb25zdCBpPWUucGFyc2UodFszXSwzLHVlKTtyZXR1cm4gaT9uZXcgdW4ocixuLGkpOm51bGx9cmV0dXJuIG5ldyB1bihyLG4pfWV2YWx1YXRlKHQpe2NvbnN0IGU9dGhpcy5uZWVkbGUuZXZhbHVhdGUodCkscj10aGlzLmhheXN0YWNrLmV2YWx1YXRlKHQpO2lmKCFBZShlLFtcImJvb2xlYW5cIixcInN0cmluZ1wiLFwibnVtYmVyXCIsXCJudWxsXCJdKSl0aHJvdyBuZXcgT2UoYEV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGJlIG9mIHR5cGUgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIgb3IgbnVsbCwgYnV0IGZvdW5kICR7dmUoUmUoZSkpfSBpbnN0ZWFkLmApO2lmKCFBZShyLFtcInN0cmluZ1wiLFwiYXJyYXlcIl0pKXRocm93IG5ldyBPZShgRXhwZWN0ZWQgc2Vjb25kIGFyZ3VtZW50IHRvIGJlIG9mIHR5cGUgYXJyYXkgb3Igc3RyaW5nLCBidXQgZm91bmQgJHt2ZShSZShyKSl9IGluc3RlYWQuYCk7aWYodGhpcy5mcm9tSW5kZXgpe2NvbnN0IG49dGhpcy5mcm9tSW5kZXguZXZhbHVhdGUodCk7cmV0dXJuIHIuaW5kZXhPZihlLG4pfXJldHVybiByLmluZGV4T2YoZSl9ZWFjaENoaWxkKHQpe3QodGhpcy5uZWVkbGUpLHQodGhpcy5oYXlzdGFjayksdGhpcy5mcm9tSW5kZXgmJnQodGhpcy5mcm9tSW5kZXgpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe2lmKG51bGwhPXRoaXMuZnJvbUluZGV4JiZ2b2lkIDAhPT10aGlzLmZyb21JbmRleCl7Y29uc3QgdD10aGlzLmZyb21JbmRleC5zZXJpYWxpemUoKTtyZXR1cm4gW1wiaW5kZXgtb2ZcIix0aGlzLm5lZWRsZS5zZXJpYWxpemUoKSx0aGlzLmhheXN0YWNrLnNlcmlhbGl6ZSgpLHRdfXJldHVybiBbXCJpbmRleC1vZlwiLHRoaXMubmVlZGxlLnNlcmlhbGl6ZSgpLHRoaXMuaGF5c3RhY2suc2VyaWFsaXplKCldfX12YXIgY249dW47Y2xhc3MgaG57Y29uc3RydWN0b3IodCxlLHIsbixpLHMpe3RoaXMuaW5wdXRUeXBlPXQsdGhpcy50eXBlPWUsdGhpcy5pbnB1dD1yLHRoaXMuY2FzZXM9bix0aGlzLm91dHB1dHM9aSx0aGlzLm90aGVyd2lzZT1zO31zdGF0aWMgcGFyc2UodCxlKXtpZih0Lmxlbmd0aDw1KXJldHVybiBlLmVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCA0IGFyZ3VtZW50cywgYnV0IGZvdW5kIG9ubHkgJHt0Lmxlbmd0aC0xfS5gKTtpZih0Lmxlbmd0aCUyIT0xKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzLlwiKTtsZXQgcixuO2UuZXhwZWN0ZWRUeXBlJiZcInZhbHVlXCIhPT1lLmV4cGVjdGVkVHlwZS5raW5kJiYobj1lLmV4cGVjdGVkVHlwZSk7Y29uc3QgaT17fSxzPVtdO2ZvcihsZXQgYT0yO2E8dC5sZW5ndGgtMTthKz0yKXtsZXQgbz10W2FdO2NvbnN0IGw9dFthKzFdO0FycmF5LmlzQXJyYXkobyl8fChvPVtvXSk7Y29uc3QgdT1lLmNvbmNhdChhKTtpZigwPT09by5sZW5ndGgpcmV0dXJuIHUuZXJyb3IoXCJFeHBlY3RlZCBhdCBsZWFzdCBvbmUgYnJhbmNoIGxhYmVsLlwiKTtmb3IoY29uc3QgdCBvZiBvKXtpZihcIm51bWJlclwiIT10eXBlb2YgdCYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIHUuZXJyb3IoXCJCcmFuY2ggbGFiZWxzIG11c3QgYmUgbnVtYmVycyBvciBzdHJpbmdzLlwiKTtpZihcIm51bWJlclwiPT10eXBlb2YgdCYmTWF0aC5hYnModCk+TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpcmV0dXJuIHUuZXJyb3IoYEJyYW5jaCBsYWJlbHMgbXVzdCBiZSBpbnRlZ2VycyBubyBsYXJnZXIgdGhhbiAke051bWJlci5NQVhfU0FGRV9JTlRFR0VSfS5gKTtpZihcIm51bWJlclwiPT10eXBlb2YgdCYmTWF0aC5mbG9vcih0KSE9PXQpcmV0dXJuIHUuZXJyb3IoXCJOdW1lcmljIGJyYW5jaCBsYWJlbHMgbXVzdCBiZSBpbnRlZ2VyIHZhbHVlcy5cIik7aWYocil7aWYodS5jaGVja1N1YnR5cGUocixSZSh0KSkpcmV0dXJuIG51bGx9ZWxzZSByPVJlKHQpO2lmKHZvaWQgMCE9PWlbU3RyaW5nKHQpXSlyZXR1cm4gdS5lcnJvcihcIkJyYW5jaCBsYWJlbHMgbXVzdCBiZSB1bmlxdWUuXCIpO2lbU3RyaW5nKHQpXT1zLmxlbmd0aDt9Y29uc3QgYz1lLnBhcnNlKGwsYSxuKTtpZighYylyZXR1cm4gbnVsbDtuPW58fGMudHlwZSxzLnB1c2goYyk7fWNvbnN0IGE9ZS5wYXJzZSh0WzFdLDEsZmUpO2lmKCFhKXJldHVybiBudWxsO2NvbnN0IG89ZS5wYXJzZSh0W3QubGVuZ3RoLTFdLHQubGVuZ3RoLTEsbik7cmV0dXJuIG8/XCJ2YWx1ZVwiIT09YS50eXBlLmtpbmQmJmUuY29uY2F0KDEpLmNoZWNrU3VidHlwZShyLGEudHlwZSk/bnVsbDpuZXcgaG4ocixuLGEsaSxzLG8pOm51bGx9ZXZhbHVhdGUodCl7Y29uc3QgZT10aGlzLmlucHV0LmV2YWx1YXRlKHQpO3JldHVybiAoUmUoZSk9PT10aGlzLmlucHV0VHlwZSYmdGhpcy5vdXRwdXRzW3RoaXMuY2FzZXNbZV1dfHx0aGlzLm90aGVyd2lzZSkuZXZhbHVhdGUodCl9ZWFjaENoaWxkKHQpe3QodGhpcy5pbnB1dCksdGhpcy5vdXRwdXRzLmZvckVhY2godCksdCh0aGlzLm90aGVyd2lzZSk7fW91dHB1dERlZmluZWQoKXtyZXR1cm4gdGhpcy5vdXRwdXRzLmV2ZXJ5KCh0PT50Lm91dHB1dERlZmluZWQoKSkpJiZ0aGlzLm90aGVyd2lzZS5vdXRwdXREZWZpbmVkKCl9c2VyaWFsaXplKCl7Y29uc3QgdD1bXCJtYXRjaFwiLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldLGU9T2JqZWN0LmtleXModGhpcy5jYXNlcykuc29ydCgpLHI9W10sbj17fTtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPW5bdGhpcy5jYXNlc1t0XV07dm9pZCAwPT09ZT8oblt0aGlzLmNhc2VzW3RdXT1yLmxlbmd0aCxyLnB1c2goW3RoaXMuY2FzZXNbdF0sW3RdXSkpOnJbZV1bMV0ucHVzaCh0KTt9Y29uc3QgaT10PT5cIm51bWJlclwiPT09dGhpcy5pbnB1dFR5cGUua2luZD9OdW1iZXIodCk6dDtmb3IoY29uc3RbZSxuXW9mIHIpdC5wdXNoKDE9PT1uLmxlbmd0aD9pKG5bMF0pOm4ubWFwKGkpKSx0LnB1c2godGhpcy5vdXRwdXRzW2VdLnNlcmlhbGl6ZSgpKTtyZXR1cm4gdC5wdXNoKHRoaXMub3RoZXJ3aXNlLnNlcmlhbGl6ZSgpKSx0fX12YXIgcG49aG47Y2xhc3MgZG57Y29uc3RydWN0b3IodCxlLHIpe3RoaXMudHlwZT10LHRoaXMuYnJhbmNoZXM9ZSx0aGlzLm90aGVyd2lzZT1yO31zdGF0aWMgcGFyc2UodCxlKXtpZih0Lmxlbmd0aDw0KXJldHVybiBlLmVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAzIGFyZ3VtZW50cywgYnV0IGZvdW5kIG9ubHkgJHt0Lmxlbmd0aC0xfS5gKTtpZih0Lmxlbmd0aCUyIT0wKXJldHVybiBlLmVycm9yKFwiRXhwZWN0ZWQgYW4gb2RkIG51bWJlciBvZiBhcmd1bWVudHMuXCIpO2xldCByO2UuZXhwZWN0ZWRUeXBlJiZcInZhbHVlXCIhPT1lLmV4cGVjdGVkVHlwZS5raW5kJiYocj1lLmV4cGVjdGVkVHlwZSk7Y29uc3Qgbj1bXTtmb3IobGV0IGk9MTtpPHQubGVuZ3RoLTE7aSs9Mil7Y29uc3Qgcz1lLnBhcnNlKHRbaV0saSxoZSk7aWYoIXMpcmV0dXJuIG51bGw7Y29uc3QgYT1lLnBhcnNlKHRbaSsxXSxpKzEscik7aWYoIWEpcmV0dXJuIG51bGw7bi5wdXNoKFtzLGFdKSxyPXJ8fGEudHlwZTt9Y29uc3QgaT1lLnBhcnNlKHRbdC5sZW5ndGgtMV0sdC5sZW5ndGgtMSxyKTtyZXR1cm4gaT9uZXcgZG4ocixuLGkpOm51bGx9ZXZhbHVhdGUodCl7Zm9yKGNvbnN0W2Uscl1vZiB0aGlzLmJyYW5jaGVzKWlmKGUuZXZhbHVhdGUodCkpcmV0dXJuIHIuZXZhbHVhdGUodCk7cmV0dXJuIHRoaXMub3RoZXJ3aXNlLmV2YWx1YXRlKHQpfWVhY2hDaGlsZCh0KXtmb3IoY29uc3RbZSxyXW9mIHRoaXMuYnJhbmNoZXMpdChlKSx0KHIpO3QodGhpcy5vdGhlcndpc2UpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuIHRoaXMuYnJhbmNoZXMuZXZlcnkoKChbdCxlXSk9PmUub3V0cHV0RGVmaW5lZCgpKSkmJnRoaXMub3RoZXJ3aXNlLm91dHB1dERlZmluZWQoKX1zZXJpYWxpemUoKXtjb25zdCB0PVtcImNhc2VcIl07cmV0dXJuIHRoaXMuZWFjaENoaWxkKChlPT57dC5wdXNoKGUuc2VyaWFsaXplKCkpO30pKSx0fX12YXIgZm49ZG47Y2xhc3MgeW57Y29uc3RydWN0b3IodCxlLHIsbil7dGhpcy50eXBlPXQsdGhpcy5pbnB1dD1lLHRoaXMuYmVnaW5JbmRleD1yLHRoaXMuZW5kSW5kZXg9bjt9c3RhdGljIHBhcnNlKHQsZSl7aWYodC5sZW5ndGg8PTJ8fHQubGVuZ3RoPj01KXJldHVybiBlLmVycm9yKGBFeHBlY3RlZCAzIG9yIDQgYXJndW1lbnRzLCBidXQgZm91bmQgJHt0Lmxlbmd0aC0xfSBpbnN0ZWFkLmApO2NvbnN0IHI9ZS5wYXJzZSh0WzFdLDEsZmUpLG49ZS5wYXJzZSh0WzJdLDIsdWUpO2lmKCFyfHwhbilyZXR1cm4gbnVsbDtpZighX2Uoci50eXBlLFt4ZShmZSksY2UsZmVdKSlyZXR1cm4gZS5lcnJvcihgRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBhcnJheSBvciBzdHJpbmcsIGJ1dCBmb3VuZCAke3ZlKHIudHlwZSl9IGluc3RlYWRgKTtpZig0PT09dC5sZW5ndGgpe2NvbnN0IGk9ZS5wYXJzZSh0WzNdLDMsdWUpO3JldHVybiBpP25ldyB5bihyLnR5cGUscixuLGkpOm51bGx9cmV0dXJuIG5ldyB5bihyLnR5cGUscixuKX1ldmFsdWF0ZSh0KXtjb25zdCBlPXRoaXMuaW5wdXQuZXZhbHVhdGUodCkscj10aGlzLmJlZ2luSW5kZXguZXZhbHVhdGUodCk7aWYoIUFlKGUsW1wic3RyaW5nXCIsXCJhcnJheVwiXSkpdGhyb3cgbmV3IE9lKGBFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBvZiB0eXBlIGFycmF5IG9yIHN0cmluZywgYnV0IGZvdW5kICR7dmUoUmUoZSkpfSBpbnN0ZWFkLmApO2lmKHRoaXMuZW5kSW5kZXgpe2NvbnN0IG49dGhpcy5lbmRJbmRleC5ldmFsdWF0ZSh0KTtyZXR1cm4gZS5zbGljZShyLG4pfXJldHVybiBlLnNsaWNlKHIpfWVhY2hDaGlsZCh0KXt0KHRoaXMuaW5wdXQpLHQodGhpcy5iZWdpbkluZGV4KSx0aGlzLmVuZEluZGV4JiZ0KHRoaXMuZW5kSW5kZXgpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe2lmKG51bGwhPXRoaXMuZW5kSW5kZXgmJnZvaWQgMCE9PXRoaXMuZW5kSW5kZXgpe2NvbnN0IHQ9dGhpcy5lbmRJbmRleC5zZXJpYWxpemUoKTtyZXR1cm4gW1wic2xpY2VcIix0aGlzLmlucHV0LnNlcmlhbGl6ZSgpLHRoaXMuYmVnaW5JbmRleC5zZXJpYWxpemUoKSx0XX1yZXR1cm4gW1wic2xpY2VcIix0aGlzLmlucHV0LnNlcmlhbGl6ZSgpLHRoaXMuYmVnaW5JbmRleC5zZXJpYWxpemUoKV19fXZhciBtbj15bjtmdW5jdGlvbiBnbih0LGUpe3JldHVybiBcIj09XCI9PT10fHxcIiE9XCI9PT10P1wiYm9vbGVhblwiPT09ZS5raW5kfHxcInN0cmluZ1wiPT09ZS5raW5kfHxcIm51bWJlclwiPT09ZS5raW5kfHxcIm51bGxcIj09PWUua2luZHx8XCJ2YWx1ZVwiPT09ZS5raW5kOlwic3RyaW5nXCI9PT1lLmtpbmR8fFwibnVtYmVyXCI9PT1lLmtpbmR8fFwidmFsdWVcIj09PWUua2luZH1mdW5jdGlvbiB4bih0LGUscixuKXtyZXR1cm4gMD09PW4uY29tcGFyZShlLHIpfWZ1bmN0aW9uIHZuKHQsZSxyKXtjb25zdCBuPVwiPT1cIiE9PXQmJlwiIT1cIiE9PXQ7cmV0dXJuIGNsYXNzIGl7Y29uc3RydWN0b3IodCxlLHIpe3RoaXMudHlwZT1oZSx0aGlzLmxocz10LHRoaXMucmhzPWUsdGhpcy5jb2xsYXRvcj1yLHRoaXMuaGFzVW50eXBlZEFyZ3VtZW50PVwidmFsdWVcIj09PXQudHlwZS5raW5kfHxcInZhbHVlXCI9PT1lLnR5cGUua2luZDt9c3RhdGljIHBhcnNlKHQsZSl7aWYoMyE9PXQubGVuZ3RoJiY0IT09dC5sZW5ndGgpcmV0dXJuIGUuZXJyb3IoXCJFeHBlY3RlZCB0d28gb3IgdGhyZWUgYXJndW1lbnRzLlwiKTtjb25zdCByPXRbMF07bGV0IHM9ZS5wYXJzZSh0WzFdLDEsZmUpO2lmKCFzKXJldHVybiBudWxsO2lmKCFnbihyLHMudHlwZSkpcmV0dXJuIGUuY29uY2F0KDEpLmVycm9yKGBcIiR7cn1cIiBjb21wYXJpc29ucyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgdHlwZSAnJHt2ZShzLnR5cGUpfScuYCk7bGV0IGE9ZS5wYXJzZSh0WzJdLDIsZmUpO2lmKCFhKXJldHVybiBudWxsO2lmKCFnbihyLGEudHlwZSkpcmV0dXJuIGUuY29uY2F0KDIpLmVycm9yKGBcIiR7cn1cIiBjb21wYXJpc29ucyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgdHlwZSAnJHt2ZShhLnR5cGUpfScuYCk7aWYocy50eXBlLmtpbmQhPT1hLnR5cGUua2luZCYmXCJ2YWx1ZVwiIT09cy50eXBlLmtpbmQmJlwidmFsdWVcIiE9PWEudHlwZS5raW5kKXJldHVybiBlLmVycm9yKGBDYW5ub3QgY29tcGFyZSB0eXBlcyAnJHt2ZShzLnR5cGUpfScgYW5kICcke3ZlKGEudHlwZSl9Jy5gKTtuJiYoXCJ2YWx1ZVwiPT09cy50eXBlLmtpbmQmJlwidmFsdWVcIiE9PWEudHlwZS5raW5kP3M9bmV3IEdlKGEudHlwZSxbc10pOlwidmFsdWVcIiE9PXMudHlwZS5raW5kJiZcInZhbHVlXCI9PT1hLnR5cGUua2luZCYmKGE9bmV3IEdlKHMudHlwZSxbYV0pKSk7bGV0IG89bnVsbDtpZig0PT09dC5sZW5ndGgpe2lmKFwic3RyaW5nXCIhPT1zLnR5cGUua2luZCYmXCJzdHJpbmdcIiE9PWEudHlwZS5raW5kJiZcInZhbHVlXCIhPT1zLnR5cGUua2luZCYmXCJ2YWx1ZVwiIT09YS50eXBlLmtpbmQpcmV0dXJuIGUuZXJyb3IoXCJDYW5ub3QgdXNlIGNvbGxhdG9yIHRvIGNvbXBhcmUgbm9uLXN0cmluZyB0eXBlcy5cIik7aWYobz1lLnBhcnNlKHRbM10sMyx5ZSksIW8pcmV0dXJuIG51bGx9cmV0dXJuIG5ldyBpKHMsYSxvKX1ldmFsdWF0ZShpKXtjb25zdCBzPXRoaXMubGhzLmV2YWx1YXRlKGkpLGE9dGhpcy5yaHMuZXZhbHVhdGUoaSk7aWYobiYmdGhpcy5oYXNVbnR5cGVkQXJndW1lbnQpe2NvbnN0IGU9UmUocykscj1SZShhKTtpZihlLmtpbmQhPT1yLmtpbmR8fFwic3RyaW5nXCIhPT1lLmtpbmQmJlwibnVtYmVyXCIhPT1lLmtpbmQpdGhyb3cgbmV3IE9lKGBFeHBlY3RlZCBhcmd1bWVudHMgZm9yIFwiJHt0fVwiIHRvIGJlIChzdHJpbmcsIHN0cmluZykgb3IgKG51bWJlciwgbnVtYmVyKSwgYnV0IGZvdW5kICgke2Uua2luZH0sICR7ci5raW5kfSkgaW5zdGVhZC5gKX1pZih0aGlzLmNvbGxhdG9yJiYhbiYmdGhpcy5oYXNVbnR5cGVkQXJndW1lbnQpe2NvbnN0IHQ9UmUocykscj1SZShhKTtpZihcInN0cmluZ1wiIT09dC5raW5kfHxcInN0cmluZ1wiIT09ci5raW5kKXJldHVybiBlKGkscyxhKX1yZXR1cm4gdGhpcy5jb2xsYXRvcj9yKGkscyxhLHRoaXMuY29sbGF0b3IuZXZhbHVhdGUoaSkpOmUoaSxzLGEpfWVhY2hDaGlsZCh0KXt0KHRoaXMubGhzKSx0KHRoaXMucmhzKSx0aGlzLmNvbGxhdG9yJiZ0KHRoaXMuY29sbGF0b3IpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICEwfXNlcmlhbGl6ZSgpe2NvbnN0IGU9W3RdO3JldHVybiB0aGlzLmVhY2hDaGlsZCgodD0+e2UucHVzaCh0LnNlcmlhbGl6ZSgpKTt9KSksZX19fWNvbnN0IGJuPXZuKFwiPT1cIiwoZnVuY3Rpb24odCxlLHIpe3JldHVybiBlPT09cn0pLHhuKSx3bj12bihcIiE9XCIsKGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZSE9PXJ9KSwoZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuICF4bigwLGUscixuKX0pKSxfbj12bihcIjxcIiwoZnVuY3Rpb24odCxlLHIpe3JldHVybiBlPHJ9KSwoZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIG4uY29tcGFyZShlLHIpPDB9KSksQW49dm4oXCI+XCIsKGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZT5yfSksKGZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBuLmNvbXBhcmUoZSxyKT4wfSkpLFNuPXZuKFwiPD1cIiwoZnVuY3Rpb24odCxlLHIpe3JldHVybiBlPD1yfSksKGZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBuLmNvbXBhcmUoZSxyKTw9MH0pKSxrbj12bihcIj49XCIsKGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZT49cn0pLChmdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbi5jb21wYXJlKGUscik+PTB9KSk7Y2xhc3MgSW57Y29uc3RydWN0b3IodCxlLHIsbixpLHMpe3RoaXMudHlwZT1jZSx0aGlzLm51bWJlcj10LHRoaXMubG9jYWxlPWUsdGhpcy5jdXJyZW5jeT1yLHRoaXMudW5pdD1uLHRoaXMubWluRnJhY3Rpb25EaWdpdHM9aSx0aGlzLm1heEZyYWN0aW9uRGlnaXRzPXM7fXN0YXRpYyBwYXJzZSh0LGUpe2lmKDMhPT10Lmxlbmd0aClyZXR1cm4gZS5lcnJvcihcIkV4cGVjdGVkIHR3byBhcmd1bWVudHMuXCIpO2NvbnN0IHI9ZS5wYXJzZSh0WzFdLDEsdWUpO2lmKCFyKXJldHVybiBudWxsO2NvbnN0IG49dFsyXTtpZihcIm9iamVjdFwiIT10eXBlb2Ygbnx8QXJyYXkuaXNBcnJheShuKSlyZXR1cm4gZS5lcnJvcihcIk51bWJlckZvcm1hdCBvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0LlwiKTtsZXQgaT1udWxsO2lmKG4ubG9jYWxlJiYoaT1lLnBhcnNlKG4ubG9jYWxlLDEsY2UpLCFpKSlyZXR1cm4gbnVsbDtsZXQgcz1udWxsO2lmKG4uY3VycmVuY3kmJihzPWUucGFyc2Uobi5jdXJyZW5jeSwxLGNlKSwhcykpcmV0dXJuIG51bGw7bGV0IGE9bnVsbDtpZihuLnVuaXQmJihhPWUucGFyc2Uobi51bml0LDEsY2UpLCFhKSlyZXR1cm4gbnVsbDtsZXQgbz1udWxsO2lmKG5bXCJtaW4tZnJhY3Rpb24tZGlnaXRzXCJdJiYobz1lLnBhcnNlKG5bXCJtaW4tZnJhY3Rpb24tZGlnaXRzXCJdLDEsdWUpLCFvKSlyZXR1cm4gbnVsbDtsZXQgbD1udWxsO3JldHVybiBuW1wibWF4LWZyYWN0aW9uLWRpZ2l0c1wiXSYmKGw9ZS5wYXJzZShuW1wibWF4LWZyYWN0aW9uLWRpZ2l0c1wiXSwxLHVlKSwhbCk/bnVsbDpuZXcgSW4ocixpLHMsYSxvLGwpfWV2YWx1YXRlKHQpe3JldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGhpcy5sb2NhbGU/dGhpcy5sb2NhbGUuZXZhbHVhdGUodCk6W10se3N0eWxlOih0aGlzLmN1cnJlbmN5P1wiY3VycmVuY3lcIjp0aGlzLnVuaXQmJlwidW5pdFwiKXx8XCJkZWNpbWFsXCIsY3VycmVuY3k6dGhpcy5jdXJyZW5jeT90aGlzLmN1cnJlbmN5LmV2YWx1YXRlKHQpOnZvaWQgMCx1bml0OnRoaXMudW5pdD90aGlzLnVuaXQuZXZhbHVhdGUodCk6dm9pZCAwLG1pbmltdW1GcmFjdGlvbkRpZ2l0czp0aGlzLm1pbkZyYWN0aW9uRGlnaXRzP3RoaXMubWluRnJhY3Rpb25EaWdpdHMuZXZhbHVhdGUodCk6dm9pZCAwLG1heGltdW1GcmFjdGlvbkRpZ2l0czp0aGlzLm1heEZyYWN0aW9uRGlnaXRzP3RoaXMubWF4RnJhY3Rpb25EaWdpdHMuZXZhbHVhdGUodCk6dm9pZCAwfSkuZm9ybWF0KHRoaXMubnVtYmVyLmV2YWx1YXRlKHQpKX1lYWNoQ2hpbGQodCl7dCh0aGlzLm51bWJlciksdGhpcy5sb2NhbGUmJnQodGhpcy5sb2NhbGUpLHRoaXMuY3VycmVuY3kmJnQodGhpcy5jdXJyZW5jeSksdGhpcy51bml0JiZ0KHRoaXMudW5pdCksdGhpcy5taW5GcmFjdGlvbkRpZ2l0cyYmdCh0aGlzLm1pbkZyYWN0aW9uRGlnaXRzKSx0aGlzLm1heEZyYWN0aW9uRGlnaXRzJiZ0KHRoaXMubWF4RnJhY3Rpb25EaWdpdHMpO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe2NvbnN0IHQ9e307cmV0dXJuIHRoaXMubG9jYWxlJiYodC5sb2NhbGU9dGhpcy5sb2NhbGUuc2VyaWFsaXplKCkpLHRoaXMuY3VycmVuY3kmJih0LmN1cnJlbmN5PXRoaXMuY3VycmVuY3kuc2VyaWFsaXplKCkpLHRoaXMudW5pdCYmKHQudW5pdD10aGlzLnVuaXQuc2VyaWFsaXplKCkpLHRoaXMubWluRnJhY3Rpb25EaWdpdHMmJih0W1wibWluLWZyYWN0aW9uLWRpZ2l0c1wiXT10aGlzLm1pbkZyYWN0aW9uRGlnaXRzLnNlcmlhbGl6ZSgpKSx0aGlzLm1heEZyYWN0aW9uRGlnaXRzJiYodFtcIm1heC1mcmFjdGlvbi1kaWdpdHNcIl09dGhpcy5tYXhGcmFjdGlvbkRpZ2l0cy5zZXJpYWxpemUoKSksW1wibnVtYmVyLWZvcm1hdFwiLHRoaXMubnVtYmVyLnNlcmlhbGl6ZSgpLHRdfX1jbGFzcyBNbntjb25zdHJ1Y3Rvcih0KXt0aGlzLnR5cGU9dWUsdGhpcy5pbnB1dD10O31zdGF0aWMgcGFyc2UodCxlKXtpZigyIT09dC5sZW5ndGgpcmV0dXJuIGUuZXJyb3IoYEV4cGVjdGVkIDEgYXJndW1lbnQsIGJ1dCBmb3VuZCAke3QubGVuZ3RoLTF9IGluc3RlYWQuYCk7Y29uc3Qgcj1lLnBhcnNlKHRbMV0sMSk7cmV0dXJuIHI/XCJhcnJheVwiIT09ci50eXBlLmtpbmQmJlwic3RyaW5nXCIhPT1yLnR5cGUua2luZCYmXCJ2YWx1ZVwiIT09ci50eXBlLmtpbmQ/ZS5lcnJvcihgRXhwZWN0ZWQgYXJndW1lbnQgb2YgdHlwZSBzdHJpbmcgb3IgYXJyYXksIGJ1dCBmb3VuZCAke3ZlKHIudHlwZSl9IGluc3RlYWQuYCk6bmV3IE1uKHIpOm51bGx9ZXZhbHVhdGUodCl7Y29uc3QgZT10aGlzLmlucHV0LmV2YWx1YXRlKHQpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBlLmxlbmd0aDtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlLmxlbmd0aDt0aHJvdyBuZXcgT2UoYEV4cGVjdGVkIHZhbHVlIHRvIGJlIG9mIHR5cGUgc3RyaW5nIG9yIGFycmF5LCBidXQgZm91bmQgJHt2ZShSZShlKSl9IGluc3RlYWQuYCl9ZWFjaENoaWxkKHQpe3QodGhpcy5pbnB1dCk7fW91dHB1dERlZmluZWQoKXtyZXR1cm4gITF9c2VyaWFsaXplKCl7Y29uc3QgdD1bXCJsZW5ndGhcIl07cmV0dXJuIHRoaXMuZWFjaENoaWxkKChlPT57dC5wdXNoKGUuc2VyaWFsaXplKCkpO30pKSx0fX1jb25zdCBUbj17XCI9PVwiOmJuLFwiIT1cIjp3bixcIj5cIjpBbixcIjxcIjpfbixcIj49XCI6a24sXCI8PVwiOlNuLGFycmF5OkdlLGF0OmFuLGJvb2xlYW46R2UsY2FzZTpmbixjb2FsZXNjZTplbixjb2xsYXRvcjplcixmb3JtYXQ6WmUsaW1hZ2U6S2UsaW46bG4sXCJpbmRleC1vZlwiOmNuLGludGVycG9sYXRlOlFyLFwiaW50ZXJwb2xhdGUtaGNsXCI6UXIsXCJpbnRlcnBvbGF0ZS1sYWJcIjpRcixsZW5ndGg6TW4sbGV0Om5uLGxpdGVyYWw6amUsbWF0Y2g6cG4sbnVtYmVyOkdlLFwibnVtYmVyLWZvcm1hdFwiOkluLG9iamVjdDpHZSxzbGljZTptbixzdGVwOkJyLHN0cmluZzpHZSxcInRvLWJvb2xlYW5cIjpIZSxcInRvLWNvbG9yXCI6SGUsXCJ0by1udW1iZXJcIjpIZSxcInRvLXN0cmluZ1wiOkhlLHZhcjpTcix3aXRoaW46dnJ9O2Z1bmN0aW9uIHpuKHQsW2UscixuLGldKXtlPWUuZXZhbHVhdGUodCkscj1yLmV2YWx1YXRlKHQpLG49bi5ldmFsdWF0ZSh0KTtjb25zdCBzPWk/aS5ldmFsdWF0ZSh0KToxLGE9TGUoZSxyLG4scyk7aWYoYSl0aHJvdyBuZXcgT2UoYSk7cmV0dXJuIG5ldyBFZShlLzI1NSpzLHIvMjU1KnMsbi8yNTUqcyxzKX1mdW5jdGlvbiBCbih0LGUpe3JldHVybiB0IGluIGV9ZnVuY3Rpb24gRW4odCxlKXtjb25zdCByPWVbdF07cmV0dXJuIHZvaWQgMD09PXI/bnVsbDpyfWZ1bmN0aW9uIENuKHQpe3JldHVybiB7dHlwZTp0fX10ci5yZWdpc3RlcihUbix7ZXJyb3I6W3traW5kOlwiZXJyb3JcIn0sW2NlXSwodCxbZV0pPT57dGhyb3cgbmV3IE9lKGUuZXZhbHVhdGUodCkpfV0sdHlwZW9mOltjZSxbZmVdLCh0LFtlXSk9PnZlKFJlKGUuZXZhbHVhdGUodCkpKV0sXCJ0by1yZ2JhXCI6W3hlKHVlLDQpLFtwZV0sKHQsW2VdKT0+ZS5ldmFsdWF0ZSh0KS50b0FycmF5KCldLHJnYjpbcGUsW3VlLHVlLHVlXSx6bl0scmdiYTpbcGUsW3VlLHVlLHVlLHVlXSx6bl0saGFzOnt0eXBlOmhlLG92ZXJsb2FkczpbW1tjZV0sKHQsW2VdKT0+Qm4oZS5ldmFsdWF0ZSh0KSx0LnByb3BlcnRpZXMoKSldLFtbY2UsZGVdLCh0LFtlLHJdKT0+Qm4oZS5ldmFsdWF0ZSh0KSxyLmV2YWx1YXRlKHQpKV1dfSxnZXQ6e3R5cGU6ZmUsb3ZlcmxvYWRzOltbW2NlXSwodCxbZV0pPT5FbihlLmV2YWx1YXRlKHQpLHQucHJvcGVydGllcygpKV0sW1tjZSxkZV0sKHQsW2Uscl0pPT5FbihlLmV2YWx1YXRlKHQpLHIuZXZhbHVhdGUodCkpXV19LFwiZmVhdHVyZS1zdGF0ZVwiOltmZSxbY2VdLCh0LFtlXSk9PkVuKGUuZXZhbHVhdGUodCksdC5mZWF0dXJlU3RhdGV8fHt9KV0scHJvcGVydGllczpbZGUsW10sdD0+dC5wcm9wZXJ0aWVzKCldLFwiZ2VvbWV0cnktdHlwZVwiOltjZSxbXSx0PT50Lmdlb21ldHJ5VHlwZSgpXSxpZDpbZmUsW10sdD0+dC5pZCgpXSx6b29tOlt1ZSxbXSx0PT50Lmdsb2JhbHMuem9vbV0scGl0Y2g6W3VlLFtdLHQ9PnQuZ2xvYmFscy5waXRjaHx8MF0sXCJkaXN0YW5jZS1mcm9tLWNlbnRlclwiOlt1ZSxbXSx0PT50LmRpc3RhbmNlRnJvbUNlbnRlcigpXSxcImhlYXRtYXAtZGVuc2l0eVwiOlt1ZSxbXSx0PT50Lmdsb2JhbHMuaGVhdG1hcERlbnNpdHl8fDBdLFwibGluZS1wcm9ncmVzc1wiOlt1ZSxbXSx0PT50Lmdsb2JhbHMubGluZVByb2dyZXNzfHwwXSxcInNreS1yYWRpYWwtcHJvZ3Jlc3NcIjpbdWUsW10sdD0+dC5nbG9iYWxzLnNreVJhZGlhbFByb2dyZXNzfHwwXSxhY2N1bXVsYXRlZDpbZmUsW10sdD0+dm9pZCAwPT09dC5nbG9iYWxzLmFjY3VtdWxhdGVkP251bGw6dC5nbG9iYWxzLmFjY3VtdWxhdGVkXSxcIitcIjpbdWUsQ24odWUpLCh0LGUpPT57bGV0IHI9MDtmb3IoY29uc3QgbiBvZiBlKXIrPW4uZXZhbHVhdGUodCk7cmV0dXJuIHJ9XSxcIipcIjpbdWUsQ24odWUpLCh0LGUpPT57bGV0IHI9MTtmb3IoY29uc3QgbiBvZiBlKXIqPW4uZXZhbHVhdGUodCk7cmV0dXJuIHJ9XSxcIi1cIjp7dHlwZTp1ZSxvdmVybG9hZHM6W1tbdWUsdWVdLCh0LFtlLHJdKT0+ZS5ldmFsdWF0ZSh0KS1yLmV2YWx1YXRlKHQpXSxbW3VlXSwodCxbZV0pPT4tZS5ldmFsdWF0ZSh0KV1dfSxcIi9cIjpbdWUsW3VlLHVlXSwodCxbZSxyXSk9PmUuZXZhbHVhdGUodCkvci5ldmFsdWF0ZSh0KV0sXCIlXCI6W3VlLFt1ZSx1ZV0sKHQsW2Uscl0pPT5lLmV2YWx1YXRlKHQpJXIuZXZhbHVhdGUodCldLGxuMjpbdWUsW10sKCk9Pk1hdGguTE4yXSxwaTpbdWUsW10sKCk9Pk1hdGguUEldLGU6W3VlLFtdLCgpPT5NYXRoLkVdLFwiXlwiOlt1ZSxbdWUsdWVdLCh0LFtlLHJdKT0+TWF0aC5wb3coZS5ldmFsdWF0ZSh0KSxyLmV2YWx1YXRlKHQpKV0sc3FydDpbdWUsW3VlXSwodCxbZV0pPT5NYXRoLnNxcnQoZS5ldmFsdWF0ZSh0KSldLGxvZzEwOlt1ZSxbdWVdLCh0LFtlXSk9Pk1hdGgubG9nKGUuZXZhbHVhdGUodCkpL01hdGguTE4xMF0sbG46W3VlLFt1ZV0sKHQsW2VdKT0+TWF0aC5sb2coZS5ldmFsdWF0ZSh0KSldLGxvZzI6W3VlLFt1ZV0sKHQsW2VdKT0+TWF0aC5sb2coZS5ldmFsdWF0ZSh0KSkvTWF0aC5MTjJdLHNpbjpbdWUsW3VlXSwodCxbZV0pPT5NYXRoLnNpbihlLmV2YWx1YXRlKHQpKV0sY29zOlt1ZSxbdWVdLCh0LFtlXSk9Pk1hdGguY29zKGUuZXZhbHVhdGUodCkpXSx0YW46W3VlLFt1ZV0sKHQsW2VdKT0+TWF0aC50YW4oZS5ldmFsdWF0ZSh0KSldLGFzaW46W3VlLFt1ZV0sKHQsW2VdKT0+TWF0aC5hc2luKGUuZXZhbHVhdGUodCkpXSxhY29zOlt1ZSxbdWVdLCh0LFtlXSk9Pk1hdGguYWNvcyhlLmV2YWx1YXRlKHQpKV0sYXRhbjpbdWUsW3VlXSwodCxbZV0pPT5NYXRoLmF0YW4oZS5ldmFsdWF0ZSh0KSldLG1pbjpbdWUsQ24odWUpLCh0LGUpPT5NYXRoLm1pbiguLi5lLm1hcCgoZT0+ZS5ldmFsdWF0ZSh0KSkpKV0sbWF4Olt1ZSxDbih1ZSksKHQsZSk9Pk1hdGgubWF4KC4uLmUubWFwKChlPT5lLmV2YWx1YXRlKHQpKSkpXSxhYnM6W3VlLFt1ZV0sKHQsW2VdKT0+TWF0aC5hYnMoZS5ldmFsdWF0ZSh0KSldLHJvdW5kOlt1ZSxbdWVdLCh0LFtlXSk9Pntjb25zdCByPWUuZXZhbHVhdGUodCk7cmV0dXJuIHI8MD8tTWF0aC5yb3VuZCgtcik6TWF0aC5yb3VuZChyKX1dLGZsb29yOlt1ZSxbdWVdLCh0LFtlXSk9Pk1hdGguZmxvb3IoZS5ldmFsdWF0ZSh0KSldLGNlaWw6W3VlLFt1ZV0sKHQsW2VdKT0+TWF0aC5jZWlsKGUuZXZhbHVhdGUodCkpXSxcImZpbHRlci09PVwiOltoZSxbY2UsZmVdLCh0LFtlLHJdKT0+dC5wcm9wZXJ0aWVzKClbZS52YWx1ZV09PT1yLnZhbHVlXSxcImZpbHRlci1pZC09PVwiOltoZSxbZmVdLCh0LFtlXSk9PnQuaWQoKT09PWUudmFsdWVdLFwiZmlsdGVyLXR5cGUtPT1cIjpbaGUsW2NlXSwodCxbZV0pPT50Lmdlb21ldHJ5VHlwZSgpPT09ZS52YWx1ZV0sXCJmaWx0ZXItPFwiOltoZSxbY2UsZmVdLCh0LFtlLHJdKT0+e2NvbnN0IG49dC5wcm9wZXJ0aWVzKClbZS52YWx1ZV0saT1yLnZhbHVlO3JldHVybiB0eXBlb2Ygbj09dHlwZW9mIGkmJm48aX1dLFwiZmlsdGVyLWlkLTxcIjpbaGUsW2ZlXSwodCxbZV0pPT57Y29uc3Qgcj10LmlkKCksbj1lLnZhbHVlO3JldHVybiB0eXBlb2Ygcj09dHlwZW9mIG4mJnI8bn1dLFwiZmlsdGVyLT5cIjpbaGUsW2NlLGZlXSwodCxbZSxyXSk9Pntjb25zdCBuPXQucHJvcGVydGllcygpW2UudmFsdWVdLGk9ci52YWx1ZTtyZXR1cm4gdHlwZW9mIG49PXR5cGVvZiBpJiZuPml9XSxcImZpbHRlci1pZC0+XCI6W2hlLFtmZV0sKHQsW2VdKT0+e2NvbnN0IHI9dC5pZCgpLG49ZS52YWx1ZTtyZXR1cm4gdHlwZW9mIHI9PXR5cGVvZiBuJiZyPm59XSxcImZpbHRlci08PVwiOltoZSxbY2UsZmVdLCh0LFtlLHJdKT0+e2NvbnN0IG49dC5wcm9wZXJ0aWVzKClbZS52YWx1ZV0saT1yLnZhbHVlO3JldHVybiB0eXBlb2Ygbj09dHlwZW9mIGkmJm48PWl9XSxcImZpbHRlci1pZC08PVwiOltoZSxbZmVdLCh0LFtlXSk9Pntjb25zdCByPXQuaWQoKSxuPWUudmFsdWU7cmV0dXJuIHR5cGVvZiByPT10eXBlb2YgbiYmcjw9bn1dLFwiZmlsdGVyLT49XCI6W2hlLFtjZSxmZV0sKHQsW2Uscl0pPT57Y29uc3Qgbj10LnByb3BlcnRpZXMoKVtlLnZhbHVlXSxpPXIudmFsdWU7cmV0dXJuIHR5cGVvZiBuPT10eXBlb2YgaSYmbj49aX1dLFwiZmlsdGVyLWlkLT49XCI6W2hlLFtmZV0sKHQsW2VdKT0+e2NvbnN0IHI9dC5pZCgpLG49ZS52YWx1ZTtyZXR1cm4gdHlwZW9mIHI9PXR5cGVvZiBuJiZyPj1ufV0sXCJmaWx0ZXItaGFzXCI6W2hlLFtmZV0sKHQsW2VdKT0+ZS52YWx1ZSBpbiB0LnByb3BlcnRpZXMoKV0sXCJmaWx0ZXItaGFzLWlkXCI6W2hlLFtdLHQ9Pm51bGwhPT10LmlkKCkmJnZvaWQgMCE9PXQuaWQoKV0sXCJmaWx0ZXItdHlwZS1pblwiOltoZSxbeGUoY2UpXSwodCxbZV0pPT5lLnZhbHVlLmluZGV4T2YodC5nZW9tZXRyeVR5cGUoKSk+PTBdLFwiZmlsdGVyLWlkLWluXCI6W2hlLFt4ZShmZSldLCh0LFtlXSk9PmUudmFsdWUuaW5kZXhPZih0LmlkKCkpPj0wXSxcImZpbHRlci1pbi1zbWFsbFwiOltoZSxbY2UseGUoZmUpXSwodCxbZSxyXSk9PnIudmFsdWUuaW5kZXhPZih0LnByb3BlcnRpZXMoKVtlLnZhbHVlXSk+PTBdLFwiZmlsdGVyLWluLWxhcmdlXCI6W2hlLFtjZSx4ZShmZSldLCh0LFtlLHJdKT0+ZnVuY3Rpb24odCxlLHIsbil7Zm9yKDtyPD1uOyl7Y29uc3QgaT1yK24+PjE7aWYoZVtpXT09PXQpcmV0dXJuICEwO2VbaV0+dD9uPWktMTpyPWkrMTt9cmV0dXJuICExfSh0LnByb3BlcnRpZXMoKVtlLnZhbHVlXSxyLnZhbHVlLDAsci52YWx1ZS5sZW5ndGgtMSldLGFsbDp7dHlwZTpoZSxvdmVybG9hZHM6W1tbaGUsaGVdLCh0LFtlLHJdKT0+ZS5ldmFsdWF0ZSh0KSYmci5ldmFsdWF0ZSh0KV0sW0NuKGhlKSwodCxlKT0+e2Zvcihjb25zdCByIG9mIGUpaWYoIXIuZXZhbHVhdGUodCkpcmV0dXJuICExO3JldHVybiAhMH1dXX0sYW55Ont0eXBlOmhlLG92ZXJsb2FkczpbW1toZSxoZV0sKHQsW2Uscl0pPT5lLmV2YWx1YXRlKHQpfHxyLmV2YWx1YXRlKHQpXSxbQ24oaGUpLCh0LGUpPT57Zm9yKGNvbnN0IHIgb2YgZSlpZihyLmV2YWx1YXRlKHQpKXJldHVybiAhMDtyZXR1cm4gITF9XV19LFwiIVwiOltoZSxbaGVdLCh0LFtlXSk9PiFlLmV2YWx1YXRlKHQpXSxcImlzLXN1cHBvcnRlZC1zY3JpcHRcIjpbaGUsW2NlXSwodCxbZV0pPT57Y29uc3Qgcj10Lmdsb2JhbHMmJnQuZ2xvYmFscy5pc1N1cHBvcnRlZFNjcmlwdDtyZXR1cm4gIXJ8fHIoZS5ldmFsdWF0ZSh0KSl9XSx1cGNhc2U6W2NlLFtjZV0sKHQsW2VdKT0+ZS5ldmFsdWF0ZSh0KS50b1VwcGVyQ2FzZSgpXSxkb3duY2FzZTpbY2UsW2NlXSwodCxbZV0pPT5lLmV2YWx1YXRlKHQpLnRvTG93ZXJDYXNlKCldLGNvbmNhdDpbY2UsQ24oZmUpLCh0LGUpPT5lLm1hcCgoZT0+VWUoZS5ldmFsdWF0ZSh0KSkpKS5qb2luKFwiXCIpXSxcInJlc29sdmVkLWxvY2FsZVwiOltjZSxbeWVdLCh0LFtlXSk9PmUuZXZhbHVhdGUodCkucmVzb2x2ZWRMb2NhbGUoKV19KTt2YXIgUG49VG47ZnVuY3Rpb24gRG4odCl7cmV0dXJuIHtyZXN1bHQ6XCJzdWNjZXNzXCIsdmFsdWU6dH19ZnVuY3Rpb24gVm4odCl7cmV0dXJuIHtyZXN1bHQ6XCJlcnJvclwiLHZhbHVlOnR9fWZ1bmN0aW9uIExuKHQpe3JldHVybiBcImRhdGEtZHJpdmVuXCI9PT10W1wicHJvcGVydHktdHlwZVwiXX1mdW5jdGlvbiBGbih0KXtyZXR1cm4gISF0LmV4cHJlc3Npb24mJnQuZXhwcmVzc2lvbi5wYXJhbWV0ZXJzLmluZGV4T2YoXCJ6b29tXCIpPi0xfWZ1bmN0aW9uIFJuKHQpe3JldHVybiAhIXQuZXhwcmVzc2lvbiYmdC5leHByZXNzaW9uLmludGVycG9sYXRlZH1mdW5jdGlvbiBVbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE51bWJlcj9cIm51bWJlclwiOnQgaW5zdGFuY2VvZiBTdHJpbmc/XCJzdHJpbmdcIjp0IGluc3RhbmNlb2YgQm9vbGVhbj9cImJvb2xlYW5cIjpBcnJheS5pc0FycmF5KHQpP1wiYXJyYXlcIjpudWxsPT09dD9cIm51bGxcIjp0eXBlb2YgdH1mdW5jdGlvbiAkbih0KXtyZXR1cm4gXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10JiYhQXJyYXkuaXNBcnJheSh0KX1mdW5jdGlvbiBqbih0KXtyZXR1cm4gdH1mdW5jdGlvbiBPbih0LGUpe2NvbnN0IHI9XCJjb2xvclwiPT09ZS50eXBlLG49dC5zdG9wcyYmXCJvYmplY3RcIj09dHlwZW9mIHQuc3RvcHNbMF1bMF0saT1ufHwhKG58fHZvaWQgMCE9PXQucHJvcGVydHkpLHM9dC50eXBlfHwoUm4oZSk/XCJleHBvbmVudGlhbFwiOlwiaW50ZXJ2YWxcIik7aWYociYmKCh0PWVlKHt9LHQpKS5zdG9wcyYmKHQuc3RvcHM9dC5zdG9wcy5tYXAoKHQ9Plt0WzBdLEVlLnBhcnNlKHRbMV0pXSkpKSx0LmRlZmF1bHQ9RWUucGFyc2UodC5kZWZhdWx0P3QuZGVmYXVsdDplLmRlZmF1bHQpKSx0LmNvbG9yU3BhY2UmJlwicmdiXCIhPT10LmNvbG9yU3BhY2UmJiFIclt0LmNvbG9yU3BhY2VdKXRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb2xvciBzcGFjZTogJHt0LmNvbG9yU3BhY2V9YCk7bGV0IGEsbyxsO2lmKFwiZXhwb25lbnRpYWxcIj09PXMpYT1abjtlbHNlIGlmKFwiaW50ZXJ2YWxcIj09PXMpYT1HbjtlbHNlIGlmKFwiY2F0ZWdvcmljYWxcIj09PXMpe2E9Tm4sbz1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcihjb25zdCBlIG9mIHQuc3RvcHMpb1tlWzBdXT1lWzFdO2w9dHlwZW9mIHQuc3RvcHNbMF1bMF07fWVsc2Uge2lmKFwiaWRlbnRpdHlcIiE9PXMpdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGZ1bmN0aW9uIHR5cGUgXCIke3N9XCJgKTthPUtuO31pZihuKXtjb25zdCByPXt9LG49W107Zm9yKGxldCBlPTA7ZTx0LnN0b3BzLmxlbmd0aDtlKyspe2NvbnN0IGk9dC5zdG9wc1tlXSxzPWlbMF0uem9vbTt2b2lkIDA9PT1yW3NdJiYocltzXT17em9vbTpzLHR5cGU6dC50eXBlLHByb3BlcnR5OnQucHJvcGVydHksZGVmYXVsdDp0LmRlZmF1bHQsc3RvcHM6W119LG4ucHVzaChzKSkscltzXS5zdG9wcy5wdXNoKFtpWzBdLnZhbHVlLGlbMV1dKTt9Y29uc3QgaT1bXTtmb3IoY29uc3QgdCBvZiBuKWkucHVzaChbclt0XS56b29tLE9uKHJbdF0sZSldKTtjb25zdCBzPXtuYW1lOlwibGluZWFyXCJ9O3JldHVybiB7a2luZDpcImNvbXBvc2l0ZVwiLGludGVycG9sYXRpb25UeXBlOnMsaW50ZXJwb2xhdGlvbkZhY3RvcjpRci5pbnRlcnBvbGF0aW9uRmFjdG9yLmJpbmQodm9pZCAwLHMpLHpvb21TdG9wczppLm1hcCgodD0+dFswXSkpLGV2YWx1YXRlOih7em9vbTpyfSxuKT0+Wm4oe3N0b3BzOmksYmFzZTp0LmJhc2V9LGUscikuZXZhbHVhdGUocixuKX19aWYoaSl7Y29uc3Qgcj1cImV4cG9uZW50aWFsXCI9PT1zP3tuYW1lOlwiZXhwb25lbnRpYWxcIixiYXNlOnZvaWQgMCE9PXQuYmFzZT90LmJhc2U6MX06bnVsbDtyZXR1cm4ge2tpbmQ6XCJjYW1lcmFcIixpbnRlcnBvbGF0aW9uVHlwZTpyLGludGVycG9sYXRpb25GYWN0b3I6UXIuaW50ZXJwb2xhdGlvbkZhY3Rvci5iaW5kKHZvaWQgMCxyKSx6b29tU3RvcHM6dC5zdG9wcy5tYXAoKHQ9PnRbMF0pKSxldmFsdWF0ZTooe3pvb206cn0pPT5hKHQsZSxyLG8sbCl9fXJldHVybiB7a2luZDpcInNvdXJjZVwiLGV2YWx1YXRlKHIsbil7Y29uc3QgaT1uJiZuLnByb3BlcnRpZXM/bi5wcm9wZXJ0aWVzW3QucHJvcGVydHldOnZvaWQgMDtyZXR1cm4gdm9pZCAwPT09aT9xbih0LmRlZmF1bHQsZS5kZWZhdWx0KTphKHQsZSxpLG8sbCl9fX1mdW5jdGlvbiBxbih0LGUscil7cmV0dXJuIHZvaWQgMCE9PXQ/dDp2b2lkIDAhPT1lP2U6dm9pZCAwIT09cj9yOnZvaWQgMH1mdW5jdGlvbiBObih0LGUscixuLGkpe3JldHVybiBxbih0eXBlb2Ygcj09PWk/bltyXTp2b2lkIDAsdC5kZWZhdWx0LGUuZGVmYXVsdCl9ZnVuY3Rpb24gR24odCxlLHIpe2lmKFwibnVtYmVyXCIhPT1VbihyKSlyZXR1cm4gcW4odC5kZWZhdWx0LGUuZGVmYXVsdCk7Y29uc3Qgbj10LnN0b3BzLmxlbmd0aDtpZigxPT09bilyZXR1cm4gdC5zdG9wc1swXVsxXTtpZihyPD10LnN0b3BzWzBdWzBdKXJldHVybiB0LnN0b3BzWzBdWzFdO2lmKHI+PXQuc3RvcHNbbi0xXVswXSlyZXR1cm4gdC5zdG9wc1tuLTFdWzFdO2NvbnN0IGk9VHIodC5zdG9wcy5tYXAoKHQ9PnRbMF0pKSxyKTtyZXR1cm4gdC5zdG9wc1tpXVsxXX1mdW5jdGlvbiBabih0LGUscil7Y29uc3Qgbj12b2lkIDAhPT10LmJhc2U/dC5iYXNlOjE7aWYoXCJudW1iZXJcIiE9PVVuKHIpKXJldHVybiBxbih0LmRlZmF1bHQsZS5kZWZhdWx0KTtjb25zdCBpPXQuc3RvcHMubGVuZ3RoO2lmKDE9PT1pKXJldHVybiB0LnN0b3BzWzBdWzFdO2lmKHI8PXQuc3RvcHNbMF1bMF0pcmV0dXJuIHQuc3RvcHNbMF1bMV07aWYocj49dC5zdG9wc1tpLTFdWzBdKXJldHVybiB0LnN0b3BzW2ktMV1bMV07Y29uc3Qgcz1Ucih0LnN0b3BzLm1hcCgodD0+dFswXSkpLHIpLGE9ZnVuY3Rpb24odCxlLHIsbil7Y29uc3QgaT1uLXIscz10LXI7cmV0dXJuIDA9PT1pPzA6MT09PWU/cy9pOihNYXRoLnBvdyhlLHMpLTEpLyhNYXRoLnBvdyhlLGkpLTEpfShyLG4sdC5zdG9wc1tzXVswXSx0LnN0b3BzW3MrMV1bMF0pLG89dC5zdG9wc1tzXVsxXSxsPXQuc3RvcHNbcysxXVsxXTtsZXQgdT1DcltlLnR5cGVdfHxqbjtpZih0LmNvbG9yU3BhY2UmJlwicmdiXCIhPT10LmNvbG9yU3BhY2Upe2NvbnN0IGU9SHJbdC5jb2xvclNwYWNlXTt1PSh0LHIpPT5lLnJldmVyc2UoZS5pbnRlcnBvbGF0ZShlLmZvcndhcmQodCksZS5mb3J3YXJkKHIpLGEpKTt9cmV0dXJuIFwiZnVuY3Rpb25cIj09dHlwZW9mIG8uZXZhbHVhdGU/e2V2YWx1YXRlKC4uLnQpe2NvbnN0IGU9by5ldmFsdWF0ZS5hcHBseSh2b2lkIDAsdCkscj1sLmV2YWx1YXRlLmFwcGx5KHZvaWQgMCx0KTtpZih2b2lkIDAhPT1lJiZ2b2lkIDAhPT1yKXJldHVybiB1KGUscixhKX19OnUobyxsLGEpfWZ1bmN0aW9uIEtuKHQsZSxyKXtyZXR1cm4gXCJjb2xvclwiPT09ZS50eXBlP3I9RWUucGFyc2Uocik6XCJmb3JtYXR0ZWRcIj09PWUudHlwZT9yPURlLmZyb21TdHJpbmcoci50b1N0cmluZygpKTpcInJlc29sdmVkSW1hZ2VcIj09PWUudHlwZT9yPVZlLmZyb21TdHJpbmcoci50b1N0cmluZygpKTpVbihyKT09PWUudHlwZXx8XCJlbnVtXCI9PT1lLnR5cGUmJmUudmFsdWVzW3JdfHwocj12b2lkIDApLHFuKHIsdC5kZWZhdWx0LGUuZGVmYXVsdCl9Y2xhc3MgWG57Y29uc3RydWN0b3IodCxlKXt0aGlzLmV4cHJlc3Npb249dCx0aGlzLl93YXJuaW5nSGlzdG9yeT17fSx0aGlzLl9ldmFsdWF0b3I9bmV3IFdlLHRoaXMuX2RlZmF1bHRWYWx1ZT1lP2Z1bmN0aW9uKHQpe3JldHVybiBcImNvbG9yXCI9PT10LnR5cGUmJigkbih0LmRlZmF1bHQpfHxBcnJheS5pc0FycmF5KHQuZGVmYXVsdCkpP25ldyBFZSgwLDAsMCwwKTpcImNvbG9yXCI9PT10LnR5cGU/RWUucGFyc2UodC5kZWZhdWx0KXx8bnVsbDp2b2lkIDA9PT10LmRlZmF1bHQ/bnVsbDp0LmRlZmF1bHR9KGUpOm51bGwsdGhpcy5fZW51bVZhbHVlcz1lJiZcImVudW1cIj09PWUudHlwZT9lLnZhbHVlczpudWxsO31ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKHQsZSxyLG4saSxzLGEsbyl7cmV0dXJuIHRoaXMuX2V2YWx1YXRvci5nbG9iYWxzPXQsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmU9ZSx0aGlzLl9ldmFsdWF0b3IuZmVhdHVyZVN0YXRlPXIsdGhpcy5fZXZhbHVhdG9yLmNhbm9uaWNhbD1ufHxudWxsLHRoaXMuX2V2YWx1YXRvci5hdmFpbGFibGVJbWFnZXM9aXx8bnVsbCx0aGlzLl9ldmFsdWF0b3IuZm9ybWF0dGVkU2VjdGlvbj1zLHRoaXMuX2V2YWx1YXRvci5mZWF0dXJlVGlsZUNvb3JkPWF8fG51bGwsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmVEaXN0YW5jZURhdGE9b3x8bnVsbCx0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5fZXZhbHVhdG9yKX1ldmFsdWF0ZSh0LGUscixuLGkscyxhLG8pe3RoaXMuX2V2YWx1YXRvci5nbG9iYWxzPXQsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmU9ZXx8bnVsbCx0aGlzLl9ldmFsdWF0b3IuZmVhdHVyZVN0YXRlPXJ8fG51bGwsdGhpcy5fZXZhbHVhdG9yLmNhbm9uaWNhbD1ufHxudWxsLHRoaXMuX2V2YWx1YXRvci5hdmFpbGFibGVJbWFnZXM9aXx8bnVsbCx0aGlzLl9ldmFsdWF0b3IuZm9ybWF0dGVkU2VjdGlvbj1zfHxudWxsLHRoaXMuX2V2YWx1YXRvci5mZWF0dXJlVGlsZUNvb3JkPWF8fG51bGwsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmVEaXN0YW5jZURhdGE9b3x8bnVsbDt0cnl7Y29uc3QgdD10aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5fZXZhbHVhdG9yKTtpZihudWxsPT10fHxcIm51bWJlclwiPT10eXBlb2YgdCYmdCE9dClyZXR1cm4gdGhpcy5fZGVmYXVsdFZhbHVlO2lmKHRoaXMuX2VudW1WYWx1ZXMmJiEodCBpbiB0aGlzLl9lbnVtVmFsdWVzKSl0aHJvdyBuZXcgT2UoYEV4cGVjdGVkIHZhbHVlIHRvIGJlIG9uZSBvZiAke09iamVjdC5rZXlzKHRoaXMuX2VudW1WYWx1ZXMpLm1hcCgodD0+SlNPTi5zdHJpbmdpZnkodCkpKS5qb2luKFwiLCBcIil9LCBidXQgZm91bmQgJHtKU09OLnN0cmluZ2lmeSh0KX0gaW5zdGVhZC5gKTtyZXR1cm4gdH1jYXRjaCh0KXtyZXR1cm4gdGhpcy5fd2FybmluZ0hpc3RvcnlbdC5tZXNzYWdlXXx8KHRoaXMuX3dhcm5pbmdIaXN0b3J5W3QubWVzc2FnZV09ITAsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUud2Fybih0Lm1lc3NhZ2UpKSx0aGlzLl9kZWZhdWx0VmFsdWV9fX1mdW5jdGlvbiBKbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmdC5sZW5ndGg+MCYmXCJzdHJpbmdcIj09dHlwZW9mIHRbMF0mJnRbMF1pbiBQbn1mdW5jdGlvbiBIbih0LGUpe2NvbnN0IHI9bmV3IElyKFBuLFtdLGU/ZnVuY3Rpb24odCl7Y29uc3QgZT17Y29sb3I6cGUsc3RyaW5nOmNlLG51bWJlcjp1ZSxlbnVtOmNlLGJvb2xlYW46aGUsZm9ybWF0dGVkOm1lLHJlc29sdmVkSW1hZ2U6Z2V9O3JldHVybiBcImFycmF5XCI9PT10LnR5cGU/eGUoZVt0LnZhbHVlXXx8ZmUsdC5sZW5ndGgpOmVbdC50eXBlXX0oZSk6dm9pZCAwKSxuPXIucGFyc2UodCx2b2lkIDAsdm9pZCAwLHZvaWQgMCxlJiZcInN0cmluZ1wiPT09ZS50eXBlP3t0eXBlQW5ub3RhdGlvbjpcImNvZXJjZVwifTp2b2lkIDApO3JldHVybiBuP0RuKG5ldyBYbihuLGUpKTpWbihyLmVycm9ycyl9Y2xhc3MgWW57Y29uc3RydWN0b3IodCxlKXt0aGlzLmtpbmQ9dCx0aGlzLl9zdHlsZUV4cHJlc3Npb249ZSx0aGlzLmlzU3RhdGVEZXBlbmRlbnQ9XCJjb25zdGFudFwiIT09dCYmIXdyKGUuZXhwcmVzc2lvbik7fWV2YWx1YXRlV2l0aG91dEVycm9ySGFuZGxpbmcodCxlLHIsbixpLHMpe3JldHVybiB0aGlzLl9zdHlsZUV4cHJlc3Npb24uZXZhbHVhdGVXaXRob3V0RXJyb3JIYW5kbGluZyh0LGUscixuLGkscyl9ZXZhbHVhdGUodCxlLHIsbixpLHMpe3JldHVybiB0aGlzLl9zdHlsZUV4cHJlc3Npb24uZXZhbHVhdGUodCxlLHIsbixpLHMpfX1jbGFzcyBXbntjb25zdHJ1Y3Rvcih0LGUscixuKXt0aGlzLmtpbmQ9dCx0aGlzLnpvb21TdG9wcz1yLHRoaXMuX3N0eWxlRXhwcmVzc2lvbj1lLHRoaXMuaXNTdGF0ZURlcGVuZGVudD1cImNhbWVyYVwiIT09dCYmIXdyKGUuZXhwcmVzc2lvbiksdGhpcy5pbnRlcnBvbGF0aW9uVHlwZT1uO31ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKHQsZSxyLG4saSxzKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlV2l0aG91dEVycm9ySGFuZGxpbmcodCxlLHIsbixpLHMpfWV2YWx1YXRlKHQsZSxyLG4saSxzKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlKHQsZSxyLG4saSxzKX1pbnRlcnBvbGF0aW9uRmFjdG9yKHQsZSxyKXtyZXR1cm4gdGhpcy5pbnRlcnBvbGF0aW9uVHlwZT9Rci5pbnRlcnBvbGF0aW9uRmFjdG9yKHRoaXMuaW50ZXJwb2xhdGlvblR5cGUsdCxlLHIpOjB9fWZ1bmN0aW9uIFFuKHQsZSl7aWYoXCJlcnJvclwiPT09KHQ9SG4odCxlKSkucmVzdWx0KXJldHVybiB0O2NvbnN0IHI9dC52YWx1ZS5leHByZXNzaW9uLG49YnIocik7aWYoIW4mJiFMbihlKSlyZXR1cm4gVm4oW25ldyBzZShcIlwiLFwiZGF0YSBleHByZXNzaW9ucyBub3Qgc3VwcG9ydGVkXCIpXSk7Y29uc3QgaT1fcihyLFtcInpvb21cIixcInBpdGNoXCIsXCJkaXN0YW5jZS1mcm9tLWNlbnRlclwiXSk7aWYoIWkmJiFGbihlKSlyZXR1cm4gVm4oW25ldyBzZShcIlwiLFwiem9vbSBleHByZXNzaW9ucyBub3Qgc3VwcG9ydGVkXCIpXSk7Y29uc3Qgcz1laShyKTtyZXR1cm4gc3x8aT9zIGluc3RhbmNlb2Ygc2U/Vm4oW3NdKTpzIGluc3RhbmNlb2YgUXImJiFSbihlKT9WbihbbmV3IHNlKFwiXCIsJ1wiaW50ZXJwb2xhdGVcIiBleHByZXNzaW9ucyBjYW5ub3QgYmUgdXNlZCB3aXRoIHRoaXMgcHJvcGVydHknKV0pOkRuKHM/bmV3IFduKG4/XCJjYW1lcmFcIjpcImNvbXBvc2l0ZVwiLHQudmFsdWUscy5sYWJlbHMscyBpbnN0YW5jZW9mIFFyP3MuaW50ZXJwb2xhdGlvbjp2b2lkIDApOm5ldyBZbihuP1wiY29uc3RhbnRcIjpcInNvdXJjZVwiLHQudmFsdWUpKTpWbihbbmV3IHNlKFwiXCIsJ1wiem9vbVwiIGV4cHJlc3Npb24gbWF5IG9ubHkgYmUgdXNlZCBhcyBpbnB1dCB0byBhIHRvcC1sZXZlbCBcInN0ZXBcIiBvciBcImludGVycG9sYXRlXCIgZXhwcmVzc2lvbi4nKV0pfWNsYXNzIHRpe2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5fcGFyYW1ldGVycz10LHRoaXMuX3NwZWNpZmljYXRpb249ZSxlZSh0aGlzLE9uKHRoaXMuX3BhcmFtZXRlcnMsdGhpcy5fc3BlY2lmaWNhdGlvbikpO31zdGF0aWMgZGVzZXJpYWxpemUodCl7cmV0dXJuIG5ldyB0aSh0Ll9wYXJhbWV0ZXJzLHQuX3NwZWNpZmljYXRpb24pfXN0YXRpYyBzZXJpYWxpemUodCl7cmV0dXJuIHtfcGFyYW1ldGVyczp0Ll9wYXJhbWV0ZXJzLF9zcGVjaWZpY2F0aW9uOnQuX3NwZWNpZmljYXRpb259fX1mdW5jdGlvbiBlaSh0KXtsZXQgZT1udWxsO2lmKHQgaW5zdGFuY2VvZiBubillPWVpKHQucmVzdWx0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBlbil7Zm9yKGNvbnN0IHIgb2YgdC5hcmdzKWlmKGU9ZWkociksZSlicmVha31lbHNlICh0IGluc3RhbmNlb2YgQnJ8fHQgaW5zdGFuY2VvZiBRcikmJnQuaW5wdXQgaW5zdGFuY2VvZiB0ciYmXCJ6b29tXCI9PT10LmlucHV0Lm5hbWUmJihlPXQpO3JldHVybiBlIGluc3RhbmNlb2Ygc2V8fHQuZWFjaENoaWxkKCh0PT57Y29uc3Qgcj1laSh0KTtyIGluc3RhbmNlb2Ygc2U/ZT1yOiFlJiZyP2U9bmV3IHNlKFwiXCIsJ1wiem9vbVwiIGV4cHJlc3Npb24gbWF5IG9ubHkgYmUgdXNlZCBhcyBpbnB1dCB0byBhIHRvcC1sZXZlbCBcInN0ZXBcIiBvciBcImludGVycG9sYXRlXCIgZXhwcmVzc2lvbi4nKTplJiZyJiZlIT09ciYmKGU9bmV3IHNlKFwiXCIsJ09ubHkgb25lIHpvb20tYmFzZWQgXCJzdGVwXCIgb3IgXCJpbnRlcnBvbGF0ZVwiIHN1YmV4cHJlc3Npb24gbWF5IGJlIHVzZWQgaW4gYW4gZXhwcmVzc2lvbi4nKSk7fSkpLGV9Y2xhc3Mgcml7Y29uc3RydWN0b3IodCxlLHIsbil7dGhpcy5tZXNzYWdlPSh0P2Ake3R9OiBgOlwiXCIpK3IsbiYmKHRoaXMuaWRlbnRpZmllcj1uKSxudWxsIT1lJiZlLl9fbGluZV9fJiYodGhpcy5saW5lPWUuX19saW5lX18pO319ZnVuY3Rpb24gbmkodCl7Y29uc3QgZT10LmtleSxyPXQudmFsdWUsbj10LnZhbHVlU3BlY3x8e30saT10Lm9iamVjdEVsZW1lbnRWYWxpZGF0b3JzfHx7fSxzPXQuc3R5bGUsYT10LnN0eWxlU3BlYztsZXQgbz1bXTtjb25zdCBsPVVuKHIpO2lmKFwib2JqZWN0XCIhPT1sKXJldHVybiBbbmV3IHJpKGUscixgb2JqZWN0IGV4cGVjdGVkLCAke2x9IGZvdW5kYCldO2Zvcihjb25zdCB0IGluIHIpe2NvbnN0IGw9dC5zcGxpdChcIi5cIilbMF07bGV0IHU7aVtsXT91PWlbbF06bltsXT91PUZpOmlbXCIqXCJdP3U9aVtcIipcIl06bltcIipcIl0mJih1PUZpKSx1P289by5jb25jYXQodSh7a2V5OihlP2Ake2V9LmA6ZSkrdCx2YWx1ZTpyW3RdLHZhbHVlU3BlYzpuW2xdfHxuW1wiKlwiXSxzdHlsZTpzLHN0eWxlU3BlYzphLG9iamVjdDpyLG9iamVjdEtleTp0fSxyKSk6by5wdXNoKG5ldyByaShlLHJbdF0sYHVua25vd24gcHJvcGVydHkgXCIke3R9XCJgKSk7fWZvcihjb25zdCB0IGluIG4paVt0XXx8blt0XS5yZXF1aXJlZCYmdm9pZCAwPT09blt0XS5kZWZhdWx0JiZ2b2lkIDA9PT1yW3RdJiZvLnB1c2gobmV3IHJpKGUscixgbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcIiR7dH1cImApKTtyZXR1cm4gb31mdW5jdGlvbiBpaSh0KXtjb25zdCBlPXQudmFsdWUscj10LnZhbHVlU3BlYyxuPXQuc3R5bGUsaT10LnN0eWxlU3BlYyxzPXQua2V5LGE9dC5hcnJheUVsZW1lbnRWYWxpZGF0b3J8fEZpO2lmKFwiYXJyYXlcIiE9PVVuKGUpKXJldHVybiBbbmV3IHJpKHMsZSxgYXJyYXkgZXhwZWN0ZWQsICR7VW4oZSl9IGZvdW5kYCldO2lmKHIubGVuZ3RoJiZlLmxlbmd0aCE9PXIubGVuZ3RoKXJldHVybiBbbmV3IHJpKHMsZSxgYXJyYXkgbGVuZ3RoICR7ci5sZW5ndGh9IGV4cGVjdGVkLCBsZW5ndGggJHtlLmxlbmd0aH0gZm91bmRgKV07aWYocltcIm1pbi1sZW5ndGhcIl0mJmUubGVuZ3RoPHJbXCJtaW4tbGVuZ3RoXCJdKXJldHVybiBbbmV3IHJpKHMsZSxgYXJyYXkgbGVuZ3RoIGF0IGxlYXN0ICR7cltcIm1pbi1sZW5ndGhcIl19IGV4cGVjdGVkLCBsZW5ndGggJHtlLmxlbmd0aH0gZm91bmRgKV07bGV0IG89e3R5cGU6ci52YWx1ZSx2YWx1ZXM6ci52YWx1ZXMsbWluaW11bTpyLm1pbmltdW0sbWF4aW11bTpyLm1heGltdW0sZnVuY3Rpb246dm9pZCAwfTtpLiR2ZXJzaW9uPDcmJihvLmZ1bmN0aW9uPXIuZnVuY3Rpb24pLFwib2JqZWN0XCI9PT1VbihyLnZhbHVlKSYmKG89ci52YWx1ZSk7bGV0IGw9W107Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0KyspbD1sLmNvbmNhdChhKHthcnJheTplLGFycmF5SW5kZXg6dCx2YWx1ZTplW3RdLHZhbHVlU3BlYzpvLHN0eWxlOm4sc3R5bGVTcGVjOmksa2V5OmAke3N9WyR7dH1dYH0pKTtyZXR1cm4gbH1mdW5jdGlvbiBzaSh0KXtjb25zdCBlPXQua2V5LHI9dC52YWx1ZSxuPXQudmFsdWVTcGVjO2xldCBpPVVuKHIpO2lmKFwibnVtYmVyXCI9PT1pJiZyIT1yJiYoaT1cIk5hTlwiKSxcIm51bWJlclwiIT09aSlyZXR1cm4gW25ldyByaShlLHIsYG51bWJlciBleHBlY3RlZCwgJHtpfSBmb3VuZGApXTtpZihcIm1pbmltdW1cImluIG4pe2xldCBpPW4ubWluaW11bTtpZihcImFycmF5XCI9PT1VbihuLm1pbmltdW0pJiYoaT1uLm1pbmltdW1bdC5hcnJheUluZGV4XSkscjxpKXJldHVybiBbbmV3IHJpKGUscixgJHtyfSBpcyBsZXNzIHRoYW4gdGhlIG1pbmltdW0gdmFsdWUgJHtpfWApXX1pZihcIm1heGltdW1cImluIG4pe2xldCBpPW4ubWF4aW11bTtpZihcImFycmF5XCI9PT1VbihuLm1heGltdW0pJiYoaT1uLm1heGltdW1bdC5hcnJheUluZGV4XSkscj5pKXJldHVybiBbbmV3IHJpKGUscixgJHtyfSBpcyBncmVhdGVyIHRoYW4gdGhlIG1heGltdW0gdmFsdWUgJHtpfWApXX1yZXR1cm4gW119ZnVuY3Rpb24gYWkodCl7Y29uc3QgZT10LnZhbHVlU3BlYyxyPXJlKHQudmFsdWUudHlwZSk7bGV0IG4saSxzLGE9e307Y29uc3Qgbz1cImNhdGVnb3JpY2FsXCIhPT1yJiZ2b2lkIDA9PT10LnZhbHVlLnByb3BlcnR5LGw9IW8sdT1cImFycmF5XCI9PT1Vbih0LnZhbHVlLnN0b3BzKSYmXCJhcnJheVwiPT09VW4odC52YWx1ZS5zdG9wc1swXSkmJlwib2JqZWN0XCI9PT1Vbih0LnZhbHVlLnN0b3BzWzBdWzBdKSxjPW5pKHtrZXk6dC5rZXksdmFsdWU6dC52YWx1ZSx2YWx1ZVNwZWM6dC5zdHlsZVNwZWMuZnVuY3Rpb24sc3R5bGU6dC5zdHlsZSxzdHlsZVNwZWM6dC5zdHlsZVNwZWMsb2JqZWN0RWxlbWVudFZhbGlkYXRvcnM6e3N0b3BzOmZ1bmN0aW9uKHQpe2lmKFwiaWRlbnRpdHlcIj09PXIpcmV0dXJuIFtuZXcgcmkodC5rZXksdC52YWx1ZSwnaWRlbnRpdHkgZnVuY3Rpb24gbWF5IG5vdCBoYXZlIGEgXCJzdG9wc1wiIHByb3BlcnR5JyldO2xldCBlPVtdO2NvbnN0IG49dC52YWx1ZTtyZXR1cm4gZT1lLmNvbmNhdChpaSh7a2V5OnQua2V5LHZhbHVlOm4sdmFsdWVTcGVjOnQudmFsdWVTcGVjLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjLGFycmF5RWxlbWVudFZhbGlkYXRvcjpofSkpLFwiYXJyYXlcIj09PVVuKG4pJiYwPT09bi5sZW5ndGgmJmUucHVzaChuZXcgcmkodC5rZXksbixcImFycmF5IG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgc3RvcFwiKSksZX0sZGVmYXVsdDpmdW5jdGlvbih0KXtyZXR1cm4gRmkoe2tleTp0LmtleSx2YWx1ZTp0LnZhbHVlLHZhbHVlU3BlYzplLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjfSl9fX0pO3JldHVybiBcImlkZW50aXR5XCI9PT1yJiZvJiZjLnB1c2gobmV3IHJpKHQua2V5LHQudmFsdWUsJ21pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJwcm9wZXJ0eVwiJykpLFwiaWRlbnRpdHlcIj09PXJ8fHQudmFsdWUuc3RvcHN8fGMucHVzaChuZXcgcmkodC5rZXksdC52YWx1ZSwnbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcInN0b3BzXCInKSksXCJleHBvbmVudGlhbFwiPT09ciYmdC52YWx1ZVNwZWMuZXhwcmVzc2lvbiYmIVJuKHQudmFsdWVTcGVjKSYmYy5wdXNoKG5ldyByaSh0LmtleSx0LnZhbHVlLFwiZXhwb25lbnRpYWwgZnVuY3Rpb25zIG5vdCBzdXBwb3J0ZWRcIikpLHQuc3R5bGVTcGVjLiR2ZXJzaW9uPj04JiYobCYmIUxuKHQudmFsdWVTcGVjKT9jLnB1c2gobmV3IHJpKHQua2V5LHQudmFsdWUsXCJwcm9wZXJ0eSBmdW5jdGlvbnMgbm90IHN1cHBvcnRlZFwiKSk6byYmIUZuKHQudmFsdWVTcGVjKSYmYy5wdXNoKG5ldyByaSh0LmtleSx0LnZhbHVlLFwiem9vbSBmdW5jdGlvbnMgbm90IHN1cHBvcnRlZFwiKSkpLFwiY2F0ZWdvcmljYWxcIiE9PXImJiF1fHx2b2lkIDAhPT10LnZhbHVlLnByb3BlcnR5fHxjLnB1c2gobmV3IHJpKHQua2V5LHQudmFsdWUsJ1wicHJvcGVydHlcIiBwcm9wZXJ0eSBpcyByZXF1aXJlZCcpKSxjO2Z1bmN0aW9uIGgodCl7bGV0IHI9W107Y29uc3Qgbj10LnZhbHVlLG89dC5rZXk7aWYoXCJhcnJheVwiIT09VW4obikpcmV0dXJuIFtuZXcgcmkobyxuLGBhcnJheSBleHBlY3RlZCwgJHtVbihuKX0gZm91bmRgKV07aWYoMiE9PW4ubGVuZ3RoKXJldHVybiBbbmV3IHJpKG8sbixgYXJyYXkgbGVuZ3RoIDIgZXhwZWN0ZWQsIGxlbmd0aCAke24ubGVuZ3RofSBmb3VuZGApXTtpZih1KXtpZihcIm9iamVjdFwiIT09VW4oblswXSkpcmV0dXJuIFtuZXcgcmkobyxuLGBvYmplY3QgZXhwZWN0ZWQsICR7VW4oblswXSl9IGZvdW5kYCldO2lmKHZvaWQgMD09PW5bMF0uem9vbSlyZXR1cm4gW25ldyByaShvLG4sXCJvYmplY3Qgc3RvcCBrZXkgbXVzdCBoYXZlIHpvb21cIildO2lmKHZvaWQgMD09PW5bMF0udmFsdWUpcmV0dXJuIFtuZXcgcmkobyxuLFwib2JqZWN0IHN0b3Aga2V5IG11c3QgaGF2ZSB2YWx1ZVwiKV07Y29uc3QgZT1yZShuWzBdLnpvb20pO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlKXJldHVybiBbbmV3IHJpKG8sblswXS56b29tLFwic3RvcCB6b29tIHZhbHVlcyBtdXN0IGJlIG51bWJlcnNcIildO2lmKHMmJnM+ZSlyZXR1cm4gW25ldyByaShvLG5bMF0uem9vbSxcInN0b3Agem9vbSB2YWx1ZXMgbXVzdCBhcHBlYXIgaW4gYXNjZW5kaW5nIG9yZGVyXCIpXTtlIT09cyYmKHM9ZSxpPXZvaWQgMCxhPXt9KSxyPXIuY29uY2F0KG5pKHtrZXk6YCR7b31bMF1gLHZhbHVlOm5bMF0sdmFsdWVTcGVjOnt6b29tOnt9fSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlYyxvYmplY3RFbGVtZW50VmFsaWRhdG9yczp7em9vbTpzaSx2YWx1ZTpwfX0pKTt9ZWxzZSByPXIuY29uY2F0KHAoe2tleTpgJHtvfVswXWAsdmFsdWU6blswXSx2YWx1ZVNwZWM6e30sc3R5bGU6dC5zdHlsZSxzdHlsZVNwZWM6dC5zdHlsZVNwZWN9LG4pKTtyZXR1cm4gSm4obmUoblsxXSkpP3IuY29uY2F0KFtuZXcgcmkoYCR7b31bMV1gLG5bMV0sXCJleHByZXNzaW9ucyBhcmUgbm90IGFsbG93ZWQgaW4gZnVuY3Rpb24gc3RvcHMuXCIpXSk6ci5jb25jYXQoRmkoe2tleTpgJHtvfVsxXWAsdmFsdWU6blsxXSx2YWx1ZVNwZWM6ZSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlY30pKX1mdW5jdGlvbiBwKHQscyl7Y29uc3Qgbz1Vbih0LnZhbHVlKSxsPXJlKHQudmFsdWUpLHU9bnVsbCE9PXQudmFsdWU/dC52YWx1ZTpzO2lmKG4pe2lmKG8hPT1uKXJldHVybiBbbmV3IHJpKHQua2V5LHUsYCR7b30gc3RvcCBkb21haW4gdHlwZSBtdXN0IG1hdGNoIHByZXZpb3VzIHN0b3AgZG9tYWluIHR5cGUgJHtufWApXX1lbHNlIG49bztpZihcIm51bWJlclwiIT09byYmXCJzdHJpbmdcIiE9PW8mJlwiYm9vbGVhblwiIT09byYmXCJudW1iZXJcIiE9dHlwZW9mIGwmJlwic3RyaW5nXCIhPXR5cGVvZiBsJiZcImJvb2xlYW5cIiE9dHlwZW9mIGwpcmV0dXJuIFtuZXcgcmkodC5rZXksdSxcInN0b3AgZG9tYWluIHZhbHVlIG11c3QgYmUgYSBudW1iZXIsIHN0cmluZywgb3IgYm9vbGVhblwiKV07aWYoXCJudW1iZXJcIiE9PW8mJlwiY2F0ZWdvcmljYWxcIiE9PXIpe2xldCBuPWBudW1iZXIgZXhwZWN0ZWQsICR7b30gZm91bmRgO3JldHVybiBMbihlKSYmdm9pZCAwPT09ciYmKG4rPSdcXG5JZiB5b3UgaW50ZW5kZWQgdG8gdXNlIGEgY2F0ZWdvcmljYWwgZnVuY3Rpb24sIHNwZWNpZnkgYFwidHlwZVwiOiBcImNhdGVnb3JpY2FsXCJgLicpLFtuZXcgcmkodC5rZXksdSxuKV19cmV0dXJuIFwiY2F0ZWdvcmljYWxcIiE9PXJ8fFwibnVtYmVyXCIhPT1vfHxcIm51bWJlclwiPT10eXBlb2YgbCYmaXNGaW5pdGUobCkmJk1hdGguZmxvb3IobCk9PT1sP1wiY2F0ZWdvcmljYWxcIiE9PXImJlwibnVtYmVyXCI9PT1vJiZcIm51bWJlclwiPT10eXBlb2YgbCYmXCJudW1iZXJcIj09dHlwZW9mIGkmJnZvaWQgMCE9PWkmJmw8aT9bbmV3IHJpKHQua2V5LHUsXCJzdG9wIGRvbWFpbiB2YWx1ZXMgbXVzdCBhcHBlYXIgaW4gYXNjZW5kaW5nIG9yZGVyXCIpXTooaT1sLFwiY2F0ZWdvcmljYWxcIj09PXImJmwgaW4gYT9bbmV3IHJpKHQua2V5LHUsXCJzdG9wIGRvbWFpbiB2YWx1ZXMgbXVzdCBiZSB1bmlxdWVcIildOihhW2xdPSEwLFtdKSk6W25ldyByaSh0LmtleSx1LGBpbnRlZ2VyIGV4cGVjdGVkLCBmb3VuZCAke1N0cmluZyhsKX1gKV19fWZ1bmN0aW9uIG9pKHQpe2NvbnN0IGU9KFwicHJvcGVydHlcIj09PXQuZXhwcmVzc2lvbkNvbnRleHQ/UW46SG4pKG5lKHQudmFsdWUpLHQudmFsdWVTcGVjKTtpZihcImVycm9yXCI9PT1lLnJlc3VsdClyZXR1cm4gZS52YWx1ZS5tYXAoKGU9Pm5ldyByaShgJHt0LmtleX0ke2Uua2V5fWAsdC52YWx1ZSxlLm1lc3NhZ2UpKSk7Y29uc3Qgcj1lLnZhbHVlLmV4cHJlc3Npb258fGUudmFsdWUuX3N0eWxlRXhwcmVzc2lvbi5leHByZXNzaW9uO2lmKFwicHJvcGVydHlcIj09PXQuZXhwcmVzc2lvbkNvbnRleHQmJlwidGV4dC1mb250XCI9PT10LnByb3BlcnR5S2V5JiYhci5vdXRwdXREZWZpbmVkKCkpcmV0dXJuIFtuZXcgcmkodC5rZXksdC52YWx1ZSxgSW52YWxpZCBkYXRhIGV4cHJlc3Npb24gZm9yIFwiJHt0LnByb3BlcnR5S2V5fVwiLiBPdXRwdXQgdmFsdWVzIG11c3QgYmUgY29udGFpbmVkIGFzIGxpdGVyYWxzIHdpdGhpbiB0aGUgZXhwcmVzc2lvbi5gKV07aWYoXCJwcm9wZXJ0eVwiPT09dC5leHByZXNzaW9uQ29udGV4dCYmXCJsYXlvdXRcIj09PXQucHJvcGVydHlUeXBlJiYhd3IocikpcmV0dXJuIFtuZXcgcmkodC5rZXksdC52YWx1ZSwnXCJmZWF0dXJlLXN0YXRlXCIgZGF0YSBleHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIGxheW91dCBwcm9wZXJ0aWVzLicpXTtpZihcImZpbHRlclwiPT09dC5leHByZXNzaW9uQ29udGV4dClyZXR1cm4gbGkocix0KTtpZih0LmV4cHJlc3Npb25Db250ZXh0JiYwPT09dC5leHByZXNzaW9uQ29udGV4dC5pbmRleE9mKFwiY2x1c3RlclwiKSl7aWYoIV9yKHIsW1wiem9vbVwiLFwiZmVhdHVyZS1zdGF0ZVwiXSkpcmV0dXJuIFtuZXcgcmkodC5rZXksdC52YWx1ZSwnXCJ6b29tXCIgYW5kIFwiZmVhdHVyZS1zdGF0ZVwiIGV4cHJlc3Npb25zIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggY2x1c3RlciBwcm9wZXJ0aWVzLicpXTtpZihcImNsdXN0ZXItaW5pdGlhbFwiPT09dC5leHByZXNzaW9uQ29udGV4dCYmIWJyKHIpKXJldHVybiBbbmV3IHJpKHQua2V5LHQudmFsdWUsXCJGZWF0dXJlIGRhdGEgZXhwcmVzc2lvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBpbml0aWFsIGV4cHJlc3Npb24gcGFydCBvZiBjbHVzdGVyIHByb3BlcnRpZXMuXCIpXX1yZXR1cm4gW119ZnVuY3Rpb24gbGkodCxlKXtjb25zdCByPW5ldyBTZXQoW1wiem9vbVwiLFwiZmVhdHVyZS1zdGF0ZVwiLFwicGl0Y2hcIixcImRpc3RhbmNlLWZyb20tY2VudGVyXCJdKTtpZihlLnZhbHVlU3BlYyYmZS52YWx1ZVNwZWMuZXhwcmVzc2lvbilmb3IoY29uc3QgdCBvZiBlLnZhbHVlU3BlYy5leHByZXNzaW9uLnBhcmFtZXRlcnMpci5kZWxldGUodCk7aWYoMD09PXIuc2l6ZSlyZXR1cm4gW107Y29uc3Qgbj1bXTtyZXR1cm4gdCBpbnN0YW5jZW9mIHRyJiZyLmhhcyh0Lm5hbWUpP1tuZXcgcmkoZS5rZXksZS52YWx1ZSxgW1wiJHt0Lm5hbWV9XCJdIGV4cHJlc3Npb24gaXMgbm90IHN1cHBvcnRlZCBpbiBhIGZpbHRlciBmb3IgYSAke2Uub2JqZWN0LnR5cGV9IGxheWVyIHdpdGggaWQ6ICR7ZS5vYmplY3QuaWR9YCldOih0LmVhY2hDaGlsZCgodD0+e24ucHVzaCguLi5saSh0LGUpKTt9KSksbil9ZnVuY3Rpb24gdWkodCl7Y29uc3QgZT10LmtleSxyPXQudmFsdWUsbj10LnZhbHVlU3BlYyxpPVtdO3JldHVybiBBcnJheS5pc0FycmF5KG4udmFsdWVzKT8tMT09PW4udmFsdWVzLmluZGV4T2YocmUocikpJiZpLnB1c2gobmV3IHJpKGUscixgZXhwZWN0ZWQgb25lIG9mIFske24udmFsdWVzLmpvaW4oXCIsIFwiKX1dLCAke0pTT04uc3RyaW5naWZ5KHIpfSBmb3VuZGApKTotMT09PU9iamVjdC5rZXlzKG4udmFsdWVzKS5pbmRleE9mKHJlKHIpKSYmaS5wdXNoKG5ldyByaShlLHIsYGV4cGVjdGVkIG9uZSBvZiBbJHtPYmplY3Qua2V5cyhuLnZhbHVlcykuam9pbihcIiwgXCIpfV0sICR7SlNPTi5zdHJpbmdpZnkocil9IGZvdW5kYCkpLGl9ZnVuY3Rpb24gY2kodCl7aWYoITA9PT10fHwhMT09PXQpcmV0dXJuICEwO2lmKCFBcnJheS5pc0FycmF5KHQpfHwwPT09dC5sZW5ndGgpcmV0dXJuICExO3N3aXRjaCh0WzBdKXtjYXNlXCJoYXNcIjpyZXR1cm4gdC5sZW5ndGg+PTImJlwiJGlkXCIhPT10WzFdJiZcIiR0eXBlXCIhPT10WzFdO2Nhc2VcImluXCI6cmV0dXJuIHQubGVuZ3RoPj0zJiYoXCJzdHJpbmdcIiE9dHlwZW9mIHRbMV18fEFycmF5LmlzQXJyYXkodFsyXSkpO2Nhc2VcIiFpblwiOmNhc2VcIiFoYXNcIjpjYXNlXCJub25lXCI6cmV0dXJuICExO2Nhc2VcIj09XCI6Y2FzZVwiIT1cIjpjYXNlXCI+XCI6Y2FzZVwiPj1cIjpjYXNlXCI8XCI6Y2FzZVwiPD1cIjpyZXR1cm4gMyE9PXQubGVuZ3RofHxBcnJheS5pc0FycmF5KHRbMV0pfHxBcnJheS5pc0FycmF5KHRbMl0pO2Nhc2VcImFueVwiOmNhc2VcImFsbFwiOmZvcihjb25zdCBlIG9mIHQuc2xpY2UoMSkpaWYoIWNpKGUpJiZcImJvb2xlYW5cIiE9dHlwZW9mIGUpcmV0dXJuICExO3JldHVybiAhMDtkZWZhdWx0OnJldHVybiAhMH19ZnVuY3Rpb24gaGkodCxlPVwiZmlsbFwiKXtpZihudWxsPT10KXJldHVybiB7ZmlsdGVyOigpPT4hMCxuZWVkR2VvbWV0cnk6ITEsbmVlZEZlYXR1cmU6ITF9O2NpKHQpfHwodD14aSh0KSk7Y29uc3Qgcj10O2xldCBuPSEwO3RyeXtuPWZ1bmN0aW9uKHQpe2lmKCFmaSh0KSlyZXR1cm4gdDtsZXQgZT1uZSh0KTtyZXR1cm4gZGkoZSksZT1waShlKSxlfShyKTt9Y2F0Y2godCl7Y29uc29sZS53YXJuKGBGYWlsZWQgdG8gZXh0cmFjdCBzdGF0aWMgZmlsdGVyLiBGaWx0ZXIgd2lsbCBjb250aW51ZSB3b3JraW5nLCBidXQgYXQgaGlnaGVyIG1lbW9yeSB1c2FnZSBhbmQgc2xvd2VyIGZyYW1lcmF0ZS5cXG5UaGlzIGlzIG1vc3QgbGlrZWx5IGEgYnVnLCBwbGVhc2UgcmVwb3J0IHRoaXMgdmlhIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2lzc3Vlcy9uZXc/YXNzaWduZWVzPSZsYWJlbHM9JnRlbXBsYXRlPUJ1Z19yZXBvcnQubWRcXG5hbmQgcGFzdGUgdGhlIGNvbnRlbnRzIG9mIHRoaXMgbWVzc2FnZSBpbiB0aGUgcmVwb3J0LlxcblRoYW5rIHlvdSFcXG5GaWx0ZXIgRXhwcmVzc2lvbjpcXG4ke0pTT04uc3RyaW5naWZ5KHIsbnVsbCwyKX1cXG4gICAgICAgIGApO31jb25zdCBpPXRlW2BmaWx0ZXJfJHtlfWBdLHM9SG4obixpKTtsZXQgYT1udWxsO2lmKFwiZXJyb3JcIj09PXMucmVzdWx0KXRocm93IG5ldyBFcnJvcihzLnZhbHVlLm1hcCgodD0+YCR7dC5rZXl9OiAke3QubWVzc2FnZX1gKSkuam9pbihcIiwgXCIpKTthPSh0LGUscik9PnMudmFsdWUuZXZhbHVhdGUodCxlLHt9LHIpO2xldCBvPW51bGwsbD1udWxsO2lmKG4hPT1yKXtjb25zdCB0PUhuKHIsaSk7aWYoXCJlcnJvclwiPT09dC5yZXN1bHQpdGhyb3cgbmV3IEVycm9yKHQudmFsdWUubWFwKCh0PT5gJHt0LmtleX06ICR7dC5tZXNzYWdlfWApKS5qb2luKFwiLCBcIikpO289KGUscixuLGkscyk9PnQudmFsdWUuZXZhbHVhdGUoZSxyLHt9LG4sdm9pZCAwLHZvaWQgMCxpLHMpLGw9IWJyKHQudmFsdWUuZXhwcmVzc2lvbik7fXJldHVybiB7ZmlsdGVyOmEsZHluYW1pY0ZpbHRlcjpvfHx2b2lkIDAsbmVlZEdlb21ldHJ5OmdpKG4pLG5lZWRGZWF0dXJlOiEhbH19ZnVuY3Rpb24gcGkodCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHQ7Y29uc3QgZT1mdW5jdGlvbih0KXtpZih5aS5oYXModFswXSkpZm9yKGxldCBlPTE7ZTx0Lmxlbmd0aDtlKyspaWYoZmkodFtlXSkpcmV0dXJuICEwO3JldHVybiB0fSh0KTtyZXR1cm4gITA9PT1lP2U6ZS5tYXAoKHQ9PnBpKHQpKSl9ZnVuY3Rpb24gZGkodCl7bGV0IGU9ITE7Y29uc3Qgcj1bXTtpZihcImNhc2VcIj09PXRbMF0pe2ZvcihsZXQgbj0xO248dC5sZW5ndGgtMTtuKz0yKWU9ZXx8ZmkodFtuXSksci5wdXNoKHRbbisxXSk7ci5wdXNoKHRbdC5sZW5ndGgtMV0pO31lbHNlIGlmKFwibWF0Y2hcIj09PXRbMF0pe2U9ZXx8ZmkodFsxXSk7Zm9yKGxldCBlPTI7ZTx0Lmxlbmd0aC0xO2UrPTIpci5wdXNoKHRbZSsxXSk7ci5wdXNoKHRbdC5sZW5ndGgtMV0pO31lbHNlIGlmKFwic3RlcFwiPT09dFswXSl7ZT1lfHxmaSh0WzFdKTtmb3IobGV0IGU9MTtlPHQubGVuZ3RoLTE7ZSs9MilyLnB1c2godFtlKzFdKTt9ZSYmKHQubGVuZ3RoPTAsdC5wdXNoKFwiYW55XCIsLi4ucikpO2ZvcihsZXQgZT0xO2U8dC5sZW5ndGg7ZSsrKWRpKHRbZV0pO31mdW5jdGlvbiBmaSh0KXtpZighQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gITE7aWYoXCJwaXRjaFwiPT09KGU9dFswXSl8fFwiZGlzdGFuY2UtZnJvbS1jZW50ZXJcIj09PWUpcmV0dXJuICEwO3ZhciBlO2ZvcihsZXQgZT0xO2U8dC5sZW5ndGg7ZSsrKWlmKGZpKHRbZV0pKXJldHVybiAhMDtyZXR1cm4gITF9Y29uc3QgeWk9bmV3IFNldChbXCJpblwiLFwiPT1cIixcIiE9XCIsXCI+XCIsXCI+PVwiLFwiPFwiLFwiPD1cIixcInRvLWJvb2xlYW5cIl0pO2Z1bmN0aW9uIG1pKHQsZSl7cmV0dXJuIHQ8ZT8tMTp0PmU/MTowfWZ1bmN0aW9uIGdpKHQpe2lmKCFBcnJheS5pc0FycmF5KHQpKXJldHVybiAhMTtpZihcIndpdGhpblwiPT09dFswXSlyZXR1cm4gITA7Zm9yKGxldCBlPTE7ZTx0Lmxlbmd0aDtlKyspaWYoZ2kodFtlXSkpcmV0dXJuICEwO3JldHVybiAhMX1mdW5jdGlvbiB4aSh0KXtpZighdClyZXR1cm4gITA7Y29uc3QgZT10WzBdO3JldHVybiB0Lmxlbmd0aDw9MT9cImFueVwiIT09ZTpcIj09XCI9PT1lP3ZpKHRbMV0sdFsyXSxcIj09XCIpOlwiIT1cIj09PWU/X2kodmkodFsxXSx0WzJdLFwiPT1cIikpOlwiPFwiPT09ZXx8XCI+XCI9PT1lfHxcIjw9XCI9PT1lfHxcIj49XCI9PT1lP3ZpKHRbMV0sdFsyXSxlKTpcImFueVwiPT09ZT8ocj10LnNsaWNlKDEpLFtcImFueVwiXS5jb25jYXQoci5tYXAoeGkpKSk6XCJhbGxcIj09PWU/W1wiYWxsXCJdLmNvbmNhdCh0LnNsaWNlKDEpLm1hcCh4aSkpOlwibm9uZVwiPT09ZT9bXCJhbGxcIl0uY29uY2F0KHQuc2xpY2UoMSkubWFwKHhpKS5tYXAoX2kpKTpcImluXCI9PT1lP2JpKHRbMV0sdC5zbGljZSgyKSk6XCIhaW5cIj09PWU/X2koYmkodFsxXSx0LnNsaWNlKDIpKSk6XCJoYXNcIj09PWU/d2kodFsxXSk6XCIhaGFzXCI9PT1lP19pKHdpKHRbMV0pKTpcIndpdGhpblwiIT09ZXx8dDt2YXIgcjt9ZnVuY3Rpb24gdmkodCxlLHIpe3N3aXRjaCh0KXtjYXNlXCIkdHlwZVwiOnJldHVybiBbYGZpbHRlci10eXBlLSR7cn1gLGVdO2Nhc2VcIiRpZFwiOnJldHVybiBbYGZpbHRlci1pZC0ke3J9YCxlXTtkZWZhdWx0OnJldHVybiBbYGZpbHRlci0ke3J9YCx0LGVdfX1mdW5jdGlvbiBiaSh0LGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gITE7c3dpdGNoKHQpe2Nhc2VcIiR0eXBlXCI6cmV0dXJuIFtcImZpbHRlci10eXBlLWluXCIsW1wibGl0ZXJhbFwiLGVdXTtjYXNlXCIkaWRcIjpyZXR1cm4gW1wiZmlsdGVyLWlkLWluXCIsW1wibGl0ZXJhbFwiLGVdXTtkZWZhdWx0OnJldHVybiBlLmxlbmd0aD4yMDAmJiFlLnNvbWUoKHQ9PnR5cGVvZiB0IT10eXBlb2YgZVswXSkpP1tcImZpbHRlci1pbi1sYXJnZVwiLHQsW1wibGl0ZXJhbFwiLGUuc29ydChtaSldXTpbXCJmaWx0ZXItaW4tc21hbGxcIix0LFtcImxpdGVyYWxcIixlXV19fWZ1bmN0aW9uIHdpKHQpe3N3aXRjaCh0KXtjYXNlXCIkdHlwZVwiOnJldHVybiAhMDtjYXNlXCIkaWRcIjpyZXR1cm4gW1wiZmlsdGVyLWhhcy1pZFwiXTtkZWZhdWx0OnJldHVybiBbXCJmaWx0ZXItaGFzXCIsdF19fWZ1bmN0aW9uIF9pKHQpe3JldHVybiBbXCIhXCIsdF19ZnVuY3Rpb24gQWkodCl7cmV0dXJuIGNpKG5lKHQudmFsdWUpKT9vaShlZSh7fSx0LHtleHByZXNzaW9uQ29udGV4dDpcImZpbHRlclwiLHZhbHVlU3BlYzp0LnN0eWxlU3BlY1tgZmlsdGVyXyR7dC5sYXllclR5cGV8fFwiZmlsbFwifWBdfSkpOlNpKHQpfWZ1bmN0aW9uIFNpKHQpe2NvbnN0IGU9dC52YWx1ZSxyPXQua2V5O2lmKFwiYXJyYXlcIiE9PVVuKGUpKXJldHVybiBbbmV3IHJpKHIsZSxgYXJyYXkgZXhwZWN0ZWQsICR7VW4oZSl9IGZvdW5kYCldO2NvbnN0IG49dC5zdHlsZVNwZWM7bGV0IGkscz1bXTtpZihlLmxlbmd0aDwxKXJldHVybiBbbmV3IHJpKHIsZSxcImZpbHRlciBhcnJheSBtdXN0IGhhdmUgYXQgbGVhc3QgMSBlbGVtZW50XCIpXTtzd2l0Y2gocz1zLmNvbmNhdCh1aSh7a2V5OmAke3J9WzBdYCx2YWx1ZTplWzBdLHZhbHVlU3BlYzpuLmZpbHRlcl9vcGVyYXRvcixzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlY30pKSxyZShlWzBdKSl7Y2FzZVwiPFwiOmNhc2VcIjw9XCI6Y2FzZVwiPlwiOmNhc2VcIj49XCI6ZS5sZW5ndGg+PTImJlwiJHR5cGVcIj09PXJlKGVbMV0pJiZzLnB1c2gobmV3IHJpKHIsZSxgXCIkdHlwZVwiIGNhbm5vdCBiZSB1c2Ugd2l0aCBvcGVyYXRvciBcIiR7ZVswXX1cImApKTtjYXNlXCI9PVwiOmNhc2VcIiE9XCI6MyE9PWUubGVuZ3RoJiZzLnB1c2gobmV3IHJpKHIsZSxgZmlsdGVyIGFycmF5IGZvciBvcGVyYXRvciBcIiR7ZVswXX1cIiBtdXN0IGhhdmUgMyBlbGVtZW50c2ApKTtjYXNlXCJpblwiOmNhc2VcIiFpblwiOmUubGVuZ3RoPj0yJiYoaT1VbihlWzFdKSxcInN0cmluZ1wiIT09aSYmcy5wdXNoKG5ldyByaShgJHtyfVsxXWAsZVsxXSxgc3RyaW5nIGV4cGVjdGVkLCAke2l9IGZvdW5kYCkpKTtmb3IobGV0IGE9MjthPGUubGVuZ3RoO2ErKylpPVVuKGVbYV0pLFwiJHR5cGVcIj09PXJlKGVbMV0pP3M9cy5jb25jYXQodWkoe2tleTpgJHtyfVske2F9XWAsdmFsdWU6ZVthXSx2YWx1ZVNwZWM6bi5nZW9tZXRyeV90eXBlLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjfSkpOlwic3RyaW5nXCIhPT1pJiZcIm51bWJlclwiIT09aSYmXCJib29sZWFuXCIhPT1pJiZzLnB1c2gobmV3IHJpKGAke3J9WyR7YX1dYCxlW2FdLGBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbiBleHBlY3RlZCwgJHtpfSBmb3VuZGApKTticmVhaztjYXNlXCJhbnlcIjpjYXNlXCJhbGxcIjpjYXNlXCJub25lXCI6Zm9yKGxldCBuPTE7bjxlLmxlbmd0aDtuKyspcz1zLmNvbmNhdChTaSh7a2V5OmAke3J9WyR7bn1dYCx2YWx1ZTplW25dLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjfSkpO2JyZWFrO2Nhc2VcImhhc1wiOmNhc2VcIiFoYXNcIjppPVVuKGVbMV0pLDIhPT1lLmxlbmd0aD9zLnB1c2gobmV3IHJpKHIsZSxgZmlsdGVyIGFycmF5IGZvciBcIiR7ZVswXX1cIiBvcGVyYXRvciBtdXN0IGhhdmUgMiBlbGVtZW50c2ApKTpcInN0cmluZ1wiIT09aSYmcy5wdXNoKG5ldyByaShgJHtyfVsxXWAsZVsxXSxgc3RyaW5nIGV4cGVjdGVkLCAke2l9IGZvdW5kYCkpO2JyZWFrO2Nhc2VcIndpdGhpblwiOmk9VW4oZVsxXSksMiE9PWUubGVuZ3RoP3MucHVzaChuZXcgcmkocixlLGBmaWx0ZXIgYXJyYXkgZm9yIFwiJHtlWzBdfVwiIG9wZXJhdG9yIG11c3QgaGF2ZSAyIGVsZW1lbnRzYCkpOlwib2JqZWN0XCIhPT1pJiZzLnB1c2gobmV3IHJpKGAke3J9WzFdYCxlWzFdLGBvYmplY3QgZXhwZWN0ZWQsICR7aX0gZm91bmRgKSk7fXJldHVybiBzfWZ1bmN0aW9uIGtpKHQsZSl7Y29uc3Qgcj10LmtleSxuPXQuc3R5bGUsaT10LnN0eWxlU3BlYyxzPXQudmFsdWUsYT10Lm9iamVjdEtleSxvPWlbYCR7ZX1fJHt0LmxheWVyVHlwZX1gXTtpZighbylyZXR1cm4gW107Y29uc3QgbD1hLm1hdGNoKC9eKC4qKS10cmFuc2l0aW9uJC8pO2lmKFwicGFpbnRcIj09PWUmJmwmJm9bbFsxXV0mJm9bbFsxXV0udHJhbnNpdGlvbilyZXR1cm4gRmkoe2tleTpyLHZhbHVlOnMsdmFsdWVTcGVjOmkudHJhbnNpdGlvbixzdHlsZTpuLHN0eWxlU3BlYzppfSk7Y29uc3QgdT10LnZhbHVlU3BlY3x8b1thXTtpZighdSlyZXR1cm4gW25ldyByaShyLHMsYHVua25vd24gcHJvcGVydHkgXCIke2F9XCJgKV07bGV0IGM7aWYoXCJzdHJpbmdcIj09PVVuKHMpJiZMbih1KSYmIXUudG9rZW5zJiYoYz0vXnsoW159XSspfSQvLmV4ZWMocykpKXtjb25zdCB0PWBcXGB7IFwidHlwZVwiOiBcImlkZW50aXR5XCIsIFwicHJvcGVydHlcIjogJHtjP0pTT04uc3RyaW5naWZ5KGNbMV0pOidcIl9cIid9IH1cXGBgO3JldHVybiBbbmV3IHJpKHIscyxgXCIke2F9XCIgZG9lcyBub3Qgc3VwcG9ydCBpbnRlcnBvbGF0aW9uIHN5bnRheFxcblVzZSBhbiBpZGVudGl0eSBwcm9wZXJ0eSBmdW5jdGlvbiBpbnN0ZWFkOiAke3R9LmApXX1jb25zdCBoPVtdO3JldHVybiBcInN5bWJvbFwiPT09dC5sYXllclR5cGUmJihcInRleHQtZmllbGRcIj09PWEmJm4mJiFuLmdseXBocyYmaC5wdXNoKG5ldyByaShyLHMsJ3VzZSBvZiBcInRleHQtZmllbGRcIiByZXF1aXJlcyBhIHN0eWxlIFwiZ2x5cGhzXCIgcHJvcGVydHknKSksXCJ0ZXh0LWZvbnRcIj09PWEmJiRuKG5lKHMpKSYmXCJpZGVudGl0eVwiPT09cmUocy50eXBlKSYmaC5wdXNoKG5ldyByaShyLHMsJ1widGV4dC1mb250XCIgZG9lcyBub3Qgc3VwcG9ydCBpZGVudGl0eSBmdW5jdGlvbnMnKSkpLGguY29uY2F0KEZpKHtrZXk6dC5rZXksdmFsdWU6cyx2YWx1ZVNwZWM6dSxzdHlsZTpuLHN0eWxlU3BlYzppLGV4cHJlc3Npb25Db250ZXh0OlwicHJvcGVydHlcIixwcm9wZXJ0eVR5cGU6ZSxwcm9wZXJ0eUtleTphfSkpfWZ1bmN0aW9uIElpKHQpe3JldHVybiBraSh0LFwicGFpbnRcIil9ZnVuY3Rpb24gTWkodCl7cmV0dXJuIGtpKHQsXCJsYXlvdXRcIil9ZnVuY3Rpb24gVGkodCl7bGV0IGU9W107Y29uc3Qgcj10LnZhbHVlLG49dC5rZXksaT10LnN0eWxlLHM9dC5zdHlsZVNwZWM7ci50eXBlfHxyLnJlZnx8ZS5wdXNoKG5ldyByaShuLHIsJ2VpdGhlciBcInR5cGVcIiBvciBcInJlZlwiIGlzIHJlcXVpcmVkJykpO2xldCBhPXJlKHIudHlwZSk7Y29uc3Qgbz1yZShyLnJlZik7aWYoci5pZCl7Y29uc3Qgcz1yZShyLmlkKTtmb3IobGV0IGE9MDthPHQuYXJyYXlJbmRleDthKyspe2NvbnN0IHQ9aS5sYXllcnNbYV07cmUodC5pZCk9PT1zJiZlLnB1c2gobmV3IHJpKG4sci5pZCxgZHVwbGljYXRlIGxheWVyIGlkIFwiJHtyLmlkfVwiLCBwcmV2aW91c2x5IHVzZWQgYXQgbGluZSAke3QuaWQuX19saW5lX199YCkpO319aWYoXCJyZWZcImluIHIpe2xldCB0O1tcInR5cGVcIixcInNvdXJjZVwiLFwic291cmNlLWxheWVyXCIsXCJmaWx0ZXJcIixcImxheW91dFwiXS5mb3JFYWNoKCh0PT57dCBpbiByJiZlLnB1c2gobmV3IHJpKG4sclt0XSxgXCIke3R9XCIgaXMgcHJvaGliaXRlZCBmb3IgcmVmIGxheWVyc2ApKTt9KSksaS5sYXllcnMuZm9yRWFjaCgoZT0+e3JlKGUuaWQpPT09byYmKHQ9ZSk7fSkpLHQ/dC5yZWY/ZS5wdXNoKG5ldyByaShuLHIucmVmLFwicmVmIGNhbm5vdCByZWZlcmVuY2UgYW5vdGhlciByZWYgbGF5ZXJcIikpOmE9cmUodC50eXBlKTpcInN0cmluZ1wiPT10eXBlb2YgbyYmZS5wdXNoKG5ldyByaShuLHIucmVmLGByZWYgbGF5ZXIgXCIke299XCIgbm90IGZvdW5kYCkpO31lbHNlIGlmKFwiYmFja2dyb3VuZFwiIT09YSYmXCJza3lcIiE9PWEpaWYoci5zb3VyY2Upe2NvbnN0IHQ9aS5zb3VyY2VzJiZpLnNvdXJjZXNbci5zb3VyY2VdLHM9dCYmcmUodC50eXBlKTt0P1widmVjdG9yXCI9PT1zJiZcInJhc3RlclwiPT09YT9lLnB1c2gobmV3IHJpKG4sci5zb3VyY2UsYGxheWVyIFwiJHtyLmlkfVwiIHJlcXVpcmVzIGEgcmFzdGVyIHNvdXJjZWApKTpcInJhc3RlclwiPT09cyYmXCJyYXN0ZXJcIiE9PWE/ZS5wdXNoKG5ldyByaShuLHIuc291cmNlLGBsYXllciBcIiR7ci5pZH1cIiByZXF1aXJlcyBhIHZlY3RvciBzb3VyY2VgKSk6XCJ2ZWN0b3JcIiE9PXN8fHJbXCJzb3VyY2UtbGF5ZXJcIl0/XCJyYXN0ZXItZGVtXCI9PT1zJiZcImhpbGxzaGFkZVwiIT09YT9lLnB1c2gobmV3IHJpKG4sci5zb3VyY2UsXCJyYXN0ZXItZGVtIHNvdXJjZSBjYW4gb25seSBiZSB1c2VkIHdpdGggbGF5ZXIgdHlwZSAnaGlsbHNoYWRlJy5cIikpOlwibGluZVwiIT09YXx8IXIucGFpbnR8fCFyLnBhaW50W1wibGluZS1ncmFkaWVudFwiXSYmIXIucGFpbnRbXCJsaW5lLXRyaW0tb2Zmc2V0XCJdfHxcImdlb2pzb25cIj09PXMmJnQubGluZU1ldHJpY3N8fGUucHVzaChuZXcgcmkobixyLGBsYXllciBcIiR7ci5pZH1cIiBzcGVjaWZpZXMgYSBsaW5lLWdyYWRpZW50LCB3aGljaCByZXF1aXJlcyBhIEdlb0pTT04gc291cmNlIHdpdGggXFxgbGluZU1ldHJpY3NcXGAgZW5hYmxlZC5gKSk6ZS5wdXNoKG5ldyByaShuLHIsYGxheWVyIFwiJHtyLmlkfVwiIG11c3Qgc3BlY2lmeSBhIFwic291cmNlLWxheWVyXCJgKSk6ZS5wdXNoKG5ldyByaShuLHIuc291cmNlLGBzb3VyY2UgXCIke3Iuc291cmNlfVwiIG5vdCBmb3VuZGApKTt9ZWxzZSBlLnB1c2gobmV3IHJpKG4sciwnbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcInNvdXJjZVwiJykpO3JldHVybiBlPWUuY29uY2F0KG5pKHtrZXk6bix2YWx1ZTpyLHZhbHVlU3BlYzpzLmxheWVyLHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOntcIipcIjooKT0+W10sdHlwZTooKT0+Rmkoe2tleTpgJHtufS50eXBlYCx2YWx1ZTpyLnR5cGUsdmFsdWVTcGVjOnMubGF5ZXIudHlwZSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlYyxvYmplY3Q6cixvYmplY3RLZXk6XCJ0eXBlXCJ9KSxmaWx0ZXI6dD0+QWkoZWUoe2xheWVyVHlwZTphfSx0KSksbGF5b3V0OnQ9Pm5pKHtsYXllcjpyLGtleTp0LmtleSx2YWx1ZTp0LnZhbHVlLHZhbHVlU3BlYzp7fSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzp0LnN0eWxlU3BlYyxvYmplY3RFbGVtZW50VmFsaWRhdG9yczp7XCIqXCI6dD0+TWkoZWUoe2xheWVyVHlwZTphfSx0KSl9fSkscGFpbnQ6dD0+bmkoe2xheWVyOnIsa2V5OnQua2V5LHZhbHVlOnQudmFsdWUsdmFsdWVTcGVjOnt9LHN0eWxlOnQuc3R5bGUsc3R5bGVTcGVjOnQuc3R5bGVTcGVjLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOntcIipcIjp0PT5JaShlZSh7bGF5ZXJUeXBlOmF9LHQpKX19KX19KSksZX1mdW5jdGlvbiB6aSh0KXtjb25zdCBlPXQudmFsdWUscj10LmtleSxuPVVuKGUpO3JldHVybiBcInN0cmluZ1wiIT09bj9bbmV3IHJpKHIsZSxgc3RyaW5nIGV4cGVjdGVkLCAke259IGZvdW5kYCldOltdfWNvbnN0IEJpPXtwcm9tb3RlSWQ6ZnVuY3Rpb24oe2tleTp0LHZhbHVlOmV9KXtpZihcInN0cmluZ1wiPT09VW4oZSkpcmV0dXJuIHppKHtrZXk6dCx2YWx1ZTplfSk7e2NvbnN0IHI9W107Zm9yKGNvbnN0IG4gaW4gZSlyLnB1c2goLi4uemkoe2tleTpgJHt0fS4ke259YCx2YWx1ZTplW25dfSkpO3JldHVybiByfX19O2Z1bmN0aW9uIEVpKHQpe2NvbnN0IGU9dC52YWx1ZSxyPXQua2V5LG49dC5zdHlsZVNwZWMsaT10LnN0eWxlO2lmKCFlLnR5cGUpcmV0dXJuIFtuZXcgcmkocixlLCdcInR5cGVcIiBpcyByZXF1aXJlZCcpXTtjb25zdCBzPXJlKGUudHlwZSk7bGV0IGE7c3dpdGNoKHMpe2Nhc2VcInZlY3RvclwiOmNhc2VcInJhc3RlclwiOmNhc2VcInJhc3Rlci1kZW1cIjpyZXR1cm4gYT1uaSh7a2V5OnIsdmFsdWU6ZSx2YWx1ZVNwZWM6bltgc291cmNlXyR7cy5yZXBsYWNlKFwiLVwiLFwiX1wiKX1gXSxzdHlsZTp0LnN0eWxlLHN0eWxlU3BlYzpuLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOkJpfSksYTtjYXNlXCJnZW9qc29uXCI6aWYoYT1uaSh7a2V5OnIsdmFsdWU6ZSx2YWx1ZVNwZWM6bi5zb3VyY2VfZ2VvanNvbixzdHlsZTppLHN0eWxlU3BlYzpuLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOkJpfSksZS5jbHVzdGVyKWZvcihjb25zdCB0IGluIGUuY2x1c3RlclByb3BlcnRpZXMpe2NvbnN0W24saV09ZS5jbHVzdGVyUHJvcGVydGllc1t0XSxzPVwic3RyaW5nXCI9PXR5cGVvZiBuP1tuLFtcImFjY3VtdWxhdGVkXCJdLFtcImdldFwiLHRdXTpuO2EucHVzaCguLi5vaSh7a2V5OmAke3J9LiR7dH0ubWFwYCx2YWx1ZTppLGV4cHJlc3Npb25Db250ZXh0OlwiY2x1c3Rlci1tYXBcIn0pKSxhLnB1c2goLi4ub2koe2tleTpgJHtyfS4ke3R9LnJlZHVjZWAsdmFsdWU6cyxleHByZXNzaW9uQ29udGV4dDpcImNsdXN0ZXItcmVkdWNlXCJ9KSk7fXJldHVybiBhO2Nhc2VcInZpZGVvXCI6cmV0dXJuIG5pKHtrZXk6cix2YWx1ZTplLHZhbHVlU3BlYzpuLnNvdXJjZV92aWRlbyxzdHlsZTppLHN0eWxlU3BlYzpufSk7Y2FzZVwiaW1hZ2VcIjpyZXR1cm4gbmkoe2tleTpyLHZhbHVlOmUsdmFsdWVTcGVjOm4uc291cmNlX2ltYWdlLHN0eWxlOmksc3R5bGVTcGVjOm59KTtjYXNlXCJjYW52YXNcIjpyZXR1cm4gW25ldyByaShyLG51bGwsXCJQbGVhc2UgdXNlIHJ1bnRpbWUgQVBJcyB0byBhZGQgY2FudmFzIHNvdXJjZXMsIHJhdGhlciB0aGFuIGluY2x1ZGluZyB0aGVtIGluIHN0eWxlc2hlZXRzLlwiLFwic291cmNlLmNhbnZhc1wiKV07ZGVmYXVsdDpyZXR1cm4gdWkoe2tleTpgJHtyfS50eXBlYCx2YWx1ZTplLnR5cGUsdmFsdWVTcGVjOnt2YWx1ZXM6Q2kobil9LHN0eWxlOmksc3R5bGVTcGVjOm59KX19ZnVuY3Rpb24gQ2kodCl7cmV0dXJuIHQuc291cmNlLnJlZHVjZSgoKGUscik9Pntjb25zdCBuPXRbcl07cmV0dXJuIFwiZW51bVwiPT09bi50eXBlLnR5cGUmJihlPWUuY29uY2F0KE9iamVjdC5rZXlzKG4udHlwZS52YWx1ZXMpKSksZX0pLFtdKX1mdW5jdGlvbiBQaSh0KXtjb25zdCBlPXQudmFsdWUscj10LnN0eWxlU3BlYyxuPXIubGlnaHQsaT10LnN0eWxlO2xldCBzPVtdO2NvbnN0IGE9VW4oZSk7aWYodm9pZCAwPT09ZSlyZXR1cm4gcztpZihcIm9iamVjdFwiIT09YSlyZXR1cm4gcz1zLmNvbmNhdChbbmV3IHJpKFwibGlnaHRcIixlLGBvYmplY3QgZXhwZWN0ZWQsICR7YX0gZm91bmRgKV0pLHM7Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3QgYT10Lm1hdGNoKC9eKC4qKS10cmFuc2l0aW9uJC8pO3M9cy5jb25jYXQoYSYmblthWzFdXSYmblthWzFdXS50cmFuc2l0aW9uP0ZpKHtrZXk6dCx2YWx1ZTplW3RdLHZhbHVlU3BlYzpyLnRyYW5zaXRpb24sc3R5bGU6aSxzdHlsZVNwZWM6cn0pOm5bdF0/Rmkoe2tleTp0LHZhbHVlOmVbdF0sdmFsdWVTcGVjOm5bdF0sc3R5bGU6aSxzdHlsZVNwZWM6cn0pOltuZXcgcmkodCxlW3RdLGB1bmtub3duIHByb3BlcnR5IFwiJHt0fVwiYCldKTt9cmV0dXJuIHN9ZnVuY3Rpb24gRGkodCl7Y29uc3QgZT10LnZhbHVlLHI9dC5rZXksbj10LnN0eWxlLGk9dC5zdHlsZVNwZWMscz1pLnRlcnJhaW47bGV0IGE9W107Y29uc3Qgbz1VbihlKTtpZih2b2lkIDA9PT1lKXJldHVybiBhO2lmKFwib2JqZWN0XCIhPT1vKXJldHVybiBhPWEuY29uY2F0KFtuZXcgcmkoXCJ0ZXJyYWluXCIsZSxgb2JqZWN0IGV4cGVjdGVkLCAke299IGZvdW5kYCldKSxhO2Zvcihjb25zdCB0IGluIGUpe2NvbnN0IHI9dC5tYXRjaCgvXiguKiktdHJhbnNpdGlvbiQvKTthPWEuY29uY2F0KHImJnNbclsxXV0mJnNbclsxXV0udHJhbnNpdGlvbj9GaSh7a2V5OnQsdmFsdWU6ZVt0XSx2YWx1ZVNwZWM6aS50cmFuc2l0aW9uLHN0eWxlOm4sc3R5bGVTcGVjOml9KTpzW3RdP0ZpKHtrZXk6dCx2YWx1ZTplW3RdLHZhbHVlU3BlYzpzW3RdLHN0eWxlOm4sc3R5bGVTcGVjOml9KTpbbmV3IHJpKHQsZVt0XSxgdW5rbm93biBwcm9wZXJ0eSBcIiR7dH1cImApXSk7fWlmKGUuc291cmNlKXtjb25zdCB0PW4uc291cmNlcyYmbi5zb3VyY2VzW2Uuc291cmNlXSxpPXQmJnJlKHQudHlwZSk7dD9cInJhc3Rlci1kZW1cIiE9PWkmJmEucHVzaChuZXcgcmkocixlLnNvdXJjZSxgdGVycmFpbiBjYW5ub3QgYmUgdXNlZCB3aXRoIGEgc291cmNlIG9mIHR5cGUgJHtTdHJpbmcoaSl9LCBpdCBvbmx5IGJlIHVzZWQgd2l0aCBhIFwicmFzdGVyLWRlbVwiIHNvdXJjZSB0eXBlYCkpOmEucHVzaChuZXcgcmkocixlLnNvdXJjZSxgc291cmNlIFwiJHtlLnNvdXJjZX1cIiBub3QgZm91bmRgKSk7fWVsc2UgYS5wdXNoKG5ldyByaShyLGUsJ3RlcnJhaW4gaXMgbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcInNvdXJjZVwiJykpO3JldHVybiBhfWZ1bmN0aW9uIFZpKHQpe2NvbnN0IGU9dC52YWx1ZSxyPXQuc3R5bGUsbj10LnN0eWxlU3BlYyxpPW4uZm9nO2xldCBzPVtdO2NvbnN0IGE9VW4oZSk7aWYodm9pZCAwPT09ZSlyZXR1cm4gcztpZihcIm9iamVjdFwiIT09YSlyZXR1cm4gcz1zLmNvbmNhdChbbmV3IHJpKFwiZm9nXCIsZSxgb2JqZWN0IGV4cGVjdGVkLCAke2F9IGZvdW5kYCldKSxzO2Zvcihjb25zdCB0IGluIGUpe2NvbnN0IGE9dC5tYXRjaCgvXiguKiktdHJhbnNpdGlvbiQvKTtzPXMuY29uY2F0KGEmJmlbYVsxXV0mJmlbYVsxXV0udHJhbnNpdGlvbj9GaSh7a2V5OnQsdmFsdWU6ZVt0XSx2YWx1ZVNwZWM6bi50cmFuc2l0aW9uLHN0eWxlOnIsc3R5bGVTcGVjOm59KTppW3RdP0ZpKHtrZXk6dCx2YWx1ZTplW3RdLHZhbHVlU3BlYzppW3RdLHN0eWxlOnIsc3R5bGVTcGVjOm59KTpbbmV3IHJpKHQsZVt0XSxgdW5rbm93biBwcm9wZXJ0eSBcIiR7dH1cImApXSk7fXJldHVybiBzfWNvbnN0IExpPXtcIipcIjooKT0+W10sYXJyYXk6aWksYm9vbGVhbjpmdW5jdGlvbih0KXtjb25zdCBlPXQudmFsdWUscj10LmtleSxuPVVuKGUpO3JldHVybiBcImJvb2xlYW5cIiE9PW4/W25ldyByaShyLGUsYGJvb2xlYW4gZXhwZWN0ZWQsICR7bn0gZm91bmRgKV06W119LG51bWJlcjpzaSxjb2xvcjpmdW5jdGlvbih0KXtjb25zdCBlPXQua2V5LHI9dC52YWx1ZSxuPVVuKHIpO3JldHVybiBcInN0cmluZ1wiIT09bj9bbmV3IHJpKGUscixgY29sb3IgZXhwZWN0ZWQsICR7bn0gZm91bmRgKV06bnVsbD09PVNlKHIpP1tuZXcgcmkoZSxyLGBjb2xvciBleHBlY3RlZCwgXCIke3J9XCIgZm91bmRgKV06W119LGVudW06dWksZmlsdGVyOkFpLGZ1bmN0aW9uOmFpLGxheWVyOlRpLG9iamVjdDpuaSxzb3VyY2U6RWksbGlnaHQ6UGksdGVycmFpbjpEaSxmb2c6Vmksc3RyaW5nOnppLGZvcm1hdHRlZDpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXppKHQpLmxlbmd0aD9bXTpvaSh0KX0scmVzb2x2ZWRJbWFnZTpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXppKHQpLmxlbmd0aD9bXTpvaSh0KX0scHJvamVjdGlvbjpmdW5jdGlvbih0KXtjb25zdCBlPXQudmFsdWUscj10LnN0eWxlU3BlYyxuPXIucHJvamVjdGlvbixpPXQuc3R5bGU7bGV0IHM9W107Y29uc3QgYT1VbihlKTtpZihcIm9iamVjdFwiPT09YSlmb3IoY29uc3QgdCBpbiBlKXM9cy5jb25jYXQoRmkoe2tleTp0LHZhbHVlOmVbdF0sdmFsdWVTcGVjOm5bdF0sc3R5bGU6aSxzdHlsZVNwZWM6cn0pKTtlbHNlIFwic3RyaW5nXCIhPT1hJiYocz1zLmNvbmNhdChbbmV3IHJpKFwicHJvamVjdGlvblwiLGUsYG9iamVjdCBvciBzdHJpbmcgZXhwZWN0ZWQsICR7YX0gZm91bmRgKV0pKTtyZXR1cm4gc319O2Z1bmN0aW9uIEZpKHQpe2NvbnN0IGU9dC52YWx1ZSxyPXQudmFsdWVTcGVjLG49dC5zdHlsZVNwZWM7cmV0dXJuIHIuZXhwcmVzc2lvbiYmJG4ocmUoZSkpP2FpKHQpOnIuZXhwcmVzc2lvbiYmSm4obmUoZSkpP29pKHQpOnIudHlwZSYmTGlbci50eXBlXT9MaVtyLnR5cGVdKHQpOm5pKGVlKHt9LHQse3ZhbHVlU3BlYzpyLnR5cGU/bltyLnR5cGVdOnJ9KSl9ZnVuY3Rpb24gUmkodCl7Y29uc3QgZT10LnZhbHVlLHI9dC5rZXksbj16aSh0KTtyZXR1cm4gbi5sZW5ndGh8fCgtMT09PWUuaW5kZXhPZihcIntmb250c3RhY2t9XCIpJiZuLnB1c2gobmV3IHJpKHIsZSwnXCJnbHlwaHNcIiB1cmwgbXVzdCBpbmNsdWRlIGEgXCJ7Zm9udHN0YWNrfVwiIHRva2VuJykpLC0xPT09ZS5pbmRleE9mKFwie3JhbmdlfVwiKSYmbi5wdXNoKG5ldyByaShyLGUsJ1wiZ2x5cGhzXCIgdXJsIG11c3QgaW5jbHVkZSBhIFwie3JhbmdlfVwiIHRva2VuJykpKSxufWZ1bmN0aW9uIFVpKHQsZT10ZSl7cmV0dXJuIE9pKEZpKHtrZXk6XCJcIix2YWx1ZTp0LHZhbHVlU3BlYzplLiRyb290LHN0eWxlU3BlYzplLHN0eWxlOnQsb2JqZWN0RWxlbWVudFZhbGlkYXRvcnM6e2dseXBoczpSaSxcIipcIjooKT0+W119fSkpfWNvbnN0ICRpPXQ9Pk9pKElpKHQpKSxqaT10PT5PaShNaSh0KSk7ZnVuY3Rpb24gT2kodCl7cmV0dXJuIHQuc2xpY2UoKS5zb3J0KCgodCxlKT0+dC5saW5lJiZlLmxpbmU/dC5saW5lLWUubGluZTowKSl9ZnVuY3Rpb24gcWkodCxlKXtsZXQgcj0hMTtpZihlJiZlLmxlbmd0aClmb3IoY29uc3QgbiBvZiBlKXQuZmlyZShuZXcgV3QobmV3IEVycm9yKG4ubWVzc2FnZSkpKSxyPSEwO3JldHVybiByfXZhciBOaT1aaSxHaT0zO2Z1bmN0aW9uIFppKHQsZSxyKXt2YXIgbj10aGlzLmNlbGxzPVtdO2lmKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7dGhpcy5hcnJheUJ1ZmZlcj10O3ZhciBpPW5ldyBJbnQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO3Q9aVswXSx0aGlzLmQ9KGU9aVsxXSkrMioocj1pWzJdKTtmb3IodmFyIHM9MDtzPHRoaXMuZCp0aGlzLmQ7cysrKXt2YXIgYT1pW0dpK3NdLG89aVtHaStzKzFdO24ucHVzaChhPT09bz9udWxsOmkuc3ViYXJyYXkoYSxvKSk7fXZhciBsPWlbR2krbi5sZW5ndGgrMV07dGhpcy5rZXlzPWkuc3ViYXJyYXkoaVtHaStuLmxlbmd0aF0sbCksdGhpcy5iYm94ZXM9aS5zdWJhcnJheShsKSx0aGlzLmluc2VydD10aGlzLl9pbnNlcnRSZWFkb25seTt9ZWxzZSB7dGhpcy5kPWUrMipyO2Zvcih2YXIgdT0wO3U8dGhpcy5kKnRoaXMuZDt1Kyspbi5wdXNoKFtdKTt0aGlzLmtleXM9W10sdGhpcy5iYm94ZXM9W107fXRoaXMubj1lLHRoaXMuZXh0ZW50PXQsdGhpcy5wYWRkaW5nPXIsdGhpcy5zY2FsZT1lL3QsdGhpcy51aWQ9MDt2YXIgYz1yL2UqdDt0aGlzLm1pbj0tYyx0aGlzLm1heD10K2M7fVppLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlLHIsbixpKXt0aGlzLl9mb3JFYWNoQ2VsbChlLHIsbixpLHRoaXMuX2luc2VydENlbGwsdGhpcy51aWQrKyksdGhpcy5rZXlzLnB1c2godCksdGhpcy5iYm94ZXMucHVzaChlKSx0aGlzLmJib3hlcy5wdXNoKHIpLHRoaXMuYmJveGVzLnB1c2gobiksdGhpcy5iYm94ZXMucHVzaChpKTt9LFppLnByb3RvdHlwZS5faW5zZXJ0UmVhZG9ubHk9ZnVuY3Rpb24oKXt0aHJvdyBcIkNhbm5vdCBpbnNlcnQgaW50byBhIEdyaWRJbmRleCBjcmVhdGVkIGZyb20gYW4gQXJyYXlCdWZmZXIuXCJ9LFppLnByb3RvdHlwZS5faW5zZXJ0Q2VsbD1mdW5jdGlvbih0LGUscixuLGkscyl7dGhpcy5jZWxsc1tpXS5wdXNoKHMpO30sWmkucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIHM9dGhpcy5taW4sYT10aGlzLm1heDtpZih0PD1zJiZlPD1zJiZhPD1yJiZhPD1uJiYhaSlyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5rZXlzKTt2YXIgbz1bXTtyZXR1cm4gdGhpcy5fZm9yRWFjaENlbGwodCxlLHIsbix0aGlzLl9xdWVyeUNlbGwsbyx7fSxpKSxvfSxaaS5wcm90b3R5cGUuX3F1ZXJ5Q2VsbD1mdW5jdGlvbih0LGUscixuLGkscyxhLG8pe3ZhciBsPXRoaXMuY2VsbHNbaV07aWYobnVsbCE9PWwpZm9yKHZhciB1PXRoaXMua2V5cyxjPXRoaXMuYmJveGVzLGg9MDtoPGwubGVuZ3RoO2grKyl7dmFyIHA9bFtoXTtpZih2b2lkIDA9PT1hW3BdKXt2YXIgZD00KnA7KG8/byhjW2QrMF0sY1tkKzFdLGNbZCsyXSxjW2QrM10pOnQ8PWNbZCsyXSYmZTw9Y1tkKzNdJiZyPj1jW2QrMF0mJm4+PWNbZCsxXSk/KGFbcF09ITAscy5wdXNoKHVbcF0pKTphW3BdPSExO319fSxaaS5wcm90b3R5cGUuX2ZvckVhY2hDZWxsPWZ1bmN0aW9uKHQsZSxyLG4saSxzLGEsbyl7Zm9yKHZhciBsPXRoaXMuX2NvbnZlcnRUb0NlbGxDb29yZCh0KSx1PXRoaXMuX2NvbnZlcnRUb0NlbGxDb29yZChlKSxjPXRoaXMuX2NvbnZlcnRUb0NlbGxDb29yZChyKSxoPXRoaXMuX2NvbnZlcnRUb0NlbGxDb29yZChuKSxwPWw7cDw9YztwKyspZm9yKHZhciBkPXU7ZDw9aDtkKyspe3ZhciBmPXRoaXMuZCpkK3A7aWYoKCFvfHxvKHRoaXMuX2NvbnZlcnRGcm9tQ2VsbENvb3JkKHApLHRoaXMuX2NvbnZlcnRGcm9tQ2VsbENvb3JkKGQpLHRoaXMuX2NvbnZlcnRGcm9tQ2VsbENvb3JkKHArMSksdGhpcy5fY29udmVydEZyb21DZWxsQ29vcmQoZCsxKSkpJiZpLmNhbGwodGhpcyx0LGUscixuLGYscyxhLG8pKXJldHVybn19LFppLnByb3RvdHlwZS5fY29udmVydEZyb21DZWxsQ29vcmQ9ZnVuY3Rpb24odCl7cmV0dXJuICh0LXRoaXMucGFkZGluZykvdGhpcy5zY2FsZX0sWmkucHJvdG90eXBlLl9jb252ZXJ0VG9DZWxsQ29vcmQ9ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5taW4odGhpcy5kLTEsTWF0aC5mbG9vcih0KnRoaXMuc2NhbGUpK3RoaXMucGFkZGluZykpfSxaaS5wcm90b3R5cGUudG9BcnJheUJ1ZmZlcj1mdW5jdGlvbigpe2lmKHRoaXMuYXJyYXlCdWZmZXIpcmV0dXJuIHRoaXMuYXJyYXlCdWZmZXI7Zm9yKHZhciB0PXRoaXMuY2VsbHMsZT1HaSt0aGlzLmNlbGxzLmxlbmd0aCsxKzEscj0wLG49MDtuPHRoaXMuY2VsbHMubGVuZ3RoO24rKylyKz10aGlzLmNlbGxzW25dLmxlbmd0aDt2YXIgaT1uZXcgSW50MzJBcnJheShlK3IrdGhpcy5rZXlzLmxlbmd0aCt0aGlzLmJib3hlcy5sZW5ndGgpO2lbMF09dGhpcy5leHRlbnQsaVsxXT10aGlzLm4saVsyXT10aGlzLnBhZGRpbmc7Zm9yKHZhciBzPWUsYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbz10W2FdO2lbR2krYV09cyxpLnNldChvLHMpLHMrPW8ubGVuZ3RoO31yZXR1cm4gaVtHaSt0Lmxlbmd0aF09cyxpLnNldCh0aGlzLmtleXMscyksaVtHaSt0Lmxlbmd0aCsxXT1zKz10aGlzLmtleXMubGVuZ3RoLGkuc2V0KHRoaXMuYmJveGVzLHMpLHMrPXRoaXMuYmJveGVzLmxlbmd0aCxpLmJ1ZmZlcn07dmFyIEtpPXAoTmkpO2NvbnN0IFhpPXt9O2Z1bmN0aW9uIEppKHQsZSxyPXt9KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9jbGFzc1JlZ2lzdHJ5S2V5XCIse3ZhbHVlOmUsd3JpdGVhYmxlOiExfSksWGlbZV09e2tsYXNzOnQsb21pdDpyLm9taXR8fFtdfTt9SmkoT2JqZWN0LFwiT2JqZWN0XCIpLEtpLnNlcmlhbGl6ZT1mdW5jdGlvbih0LGUpe2NvbnN0IHI9dC50b0FycmF5QnVmZmVyKCk7cmV0dXJuIGUmJmUucHVzaChyKSx7YnVmZmVyOnJ9fSxLaS5kZXNlcmlhbGl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEtpKHQuYnVmZmVyKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KEtpLFwibmFtZVwiLHt2YWx1ZTpcIkdyaWRcIn0pLEppKEtpLFwiR3JpZFwiKSxKaShFZSxcIkNvbG9yXCIpLEppKEVycm9yLFwiRXJyb3JcIiksSmkodXQsXCJBSkFYRXJyb3JcIiksSmkoVmUsXCJSZXNvbHZlZEltYWdlXCIpLEppKHRpLFwiU3R5bGVQcm9wZXJ0eUZ1bmN0aW9uXCIpLEppKFhuLFwiU3R5bGVFeHByZXNzaW9uXCIse29taXQ6W1wiX2V2YWx1YXRvclwiXX0pLEppKFduLFwiWm9vbURlcGVuZGVudEV4cHJlc3Npb25cIiksSmkoWW4sXCJab29tQ29uc3RhbnRFeHByZXNzaW9uXCIpLEppKHRyLFwiQ29tcG91bmRFeHByZXNzaW9uXCIse29taXQ6W1wiX2V2YWx1YXRlXCJdfSk7Zm9yKGNvbnN0IHQgaW4gUG4pWGlbUG5bdF0uX2NsYXNzUmVnaXN0cnlLZXldfHxKaShQblt0XSxgRXhwcmVzc2lvbiR7dH1gKTtmdW5jdGlvbiBIaSh0KXtyZXR1cm4gdCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHx0LmNvbnN0cnVjdG9yJiZcIkFycmF5QnVmZmVyXCI9PT10LmNvbnN0cnVjdG9yLm5hbWUpfWZ1bmN0aW9uIFlpKHQpe3JldHVybiBlLkltYWdlQml0bWFwJiZ0IGluc3RhbmNlb2YgZS5JbWFnZUJpdG1hcH1mdW5jdGlvbiBXaSh0LHIpe2lmKG51bGw9PXR8fFwiYm9vbGVhblwiPT10eXBlb2YgdHx8XCJudW1iZXJcIj09dHlwZW9mIHR8fFwic3RyaW5nXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgQm9vbGVhbnx8dCBpbnN0YW5jZW9mIE51bWJlcnx8dCBpbnN0YW5jZW9mIFN0cmluZ3x8dCBpbnN0YW5jZW9mIERhdGV8fHQgaW5zdGFuY2VvZiBSZWdFeHApcmV0dXJuIHQ7aWYoSGkodCl8fFlpKHQpKXJldHVybiByJiZyLnB1c2godCksdDtpZihBcnJheUJ1ZmZlci5pc1ZpZXcodCkpe2NvbnN0IGU9dDtyZXR1cm4gciYmci5wdXNoKGUuYnVmZmVyKSxlfWlmKHQgaW5zdGFuY2VvZiBlLkltYWdlRGF0YSlyZXR1cm4gciYmci5wdXNoKHQuZGF0YS5idWZmZXIpLHQ7aWYoQXJyYXkuaXNBcnJheSh0KSl7Y29uc3QgZT1bXTtmb3IoY29uc3QgbiBvZiB0KWUucHVzaChXaShuLHIpKTtyZXR1cm4gZX1pZihcIm9iamVjdFwiPT10eXBlb2YgdCl7Y29uc3QgZT10LmNvbnN0cnVjdG9yLG49ZS5fY2xhc3NSZWdpc3RyeUtleTtpZighbil0aHJvdyBuZXcgRXJyb3IoYGNhbid0IHNlcmlhbGl6ZSBvYmplY3Qgb2YgdW5yZWdpc3RlcmVkIGNsYXNzICR7bn1gKTtjb25zdCBpPWUuc2VyaWFsaXplP2Uuc2VyaWFsaXplKHQscik6e307aWYoIWUuc2VyaWFsaXplKXtmb3IoY29uc3QgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJihYaVtuXS5vbWl0LmluZGV4T2YoZSk+PTB8fChpW2VdPVdpKHRbZV0scikpKTt0IGluc3RhbmNlb2YgRXJyb3ImJihpLm1lc3NhZ2U9dC5tZXNzYWdlKTt9aWYoaS4kbmFtZSl0aHJvdyBuZXcgRXJyb3IoXCIkbmFtZSBwcm9wZXJ0eSBpcyByZXNlcnZlZCBmb3Igd29ya2VyIHNlcmlhbGl6YXRpb24gbG9naWMuXCIpO3JldHVybiBcIk9iamVjdFwiIT09biYmKGkuJG5hbWU9biksaX10aHJvdyBuZXcgRXJyb3IoXCJjYW4ndCBzZXJpYWxpemUgb2JqZWN0IG9mIHR5cGUgXCIrdHlwZW9mIHQpfWZ1bmN0aW9uIFFpKHQpe2lmKG51bGw9PXR8fFwiYm9vbGVhblwiPT10eXBlb2YgdHx8XCJudW1iZXJcIj09dHlwZW9mIHR8fFwic3RyaW5nXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgQm9vbGVhbnx8dCBpbnN0YW5jZW9mIE51bWJlcnx8dCBpbnN0YW5jZW9mIFN0cmluZ3x8dCBpbnN0YW5jZW9mIERhdGV8fHQgaW5zdGFuY2VvZiBSZWdFeHB8fEhpKHQpfHxZaSh0KXx8QXJyYXlCdWZmZXIuaXNWaWV3KHQpfHx0IGluc3RhbmNlb2YgZS5JbWFnZURhdGEpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdC5tYXAoUWkpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXtjb25zdCBlPXQuJG5hbWV8fFwiT2JqZWN0XCIse2tsYXNzOnJ9PVhpW2VdO2lmKCFyKXRocm93IG5ldyBFcnJvcihgY2FuJ3QgZGVzZXJpYWxpemUgdW5yZWdpc3RlcmVkIGNsYXNzICR7ZX1gKTtpZihyLmRlc2VyaWFsaXplKXJldHVybiByLmRlc2VyaWFsaXplKHQpO2NvbnN0IG49T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSk7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXModCkpXCIkbmFtZVwiIT09ZSYmKG5bZV09UWkodFtlXSkpO3JldHVybiBufXRocm93IG5ldyBFcnJvcihcImNhbid0IGRlc2VyaWFsaXplIG9iamVjdCBvZiB0eXBlIFwiK3R5cGVvZiB0KX1jb25zdCB0cz17XCJMYXRpbi0xIFN1cHBsZW1lbnRcIjp0PT50Pj0xMjgmJnQ8PTI1NSxBcmFiaWM6dD0+dD49MTUzNiYmdDw9MTc5MSxcIkFyYWJpYyBTdXBwbGVtZW50XCI6dD0+dD49MTg3MiYmdDw9MTkxOSxcIkFyYWJpYyBFeHRlbmRlZC1BXCI6dD0+dD49MjIwOCYmdDw9MjMwMyxcIkhhbmd1bCBKYW1vXCI6dD0+dD49NDM1MiYmdDw9NDYwNyxcIlVuaWZpZWQgQ2FuYWRpYW4gQWJvcmlnaW5hbCBTeWxsYWJpY3NcIjp0PT50Pj01MTIwJiZ0PD01NzU5LEtobWVyOnQ9PnQ+PTYwMTYmJnQ8PTYxNDMsXCJVbmlmaWVkIENhbmFkaWFuIEFib3JpZ2luYWwgU3lsbGFiaWNzIEV4dGVuZGVkXCI6dD0+dD49NjMyMCYmdDw9NjM5OSxcIkdlbmVyYWwgUHVuY3R1YXRpb25cIjp0PT50Pj04MTkyJiZ0PD04MzAzLFwiTGV0dGVybGlrZSBTeW1ib2xzXCI6dD0+dD49ODQ0OCYmdDw9ODUyNyxcIk51bWJlciBGb3Jtc1wiOnQ9PnQ+PTg1MjgmJnQ8PTg1OTEsXCJNaXNjZWxsYW5lb3VzIFRlY2huaWNhbFwiOnQ9PnQ+PTg5NjAmJnQ8PTkyMTUsXCJDb250cm9sIFBpY3R1cmVzXCI6dD0+dD49OTIxNiYmdDw9OTI3OSxcIk9wdGljYWwgQ2hhcmFjdGVyIFJlY29nbml0aW9uXCI6dD0+dD49OTI4MCYmdDw9OTMxMSxcIkVuY2xvc2VkIEFscGhhbnVtZXJpY3NcIjp0PT50Pj05MzEyJiZ0PD05NDcxLFwiR2VvbWV0cmljIFNoYXBlc1wiOnQ9PnQ+PTk2MzImJnQ8PTk3MjcsXCJNaXNjZWxsYW5lb3VzIFN5bWJvbHNcIjp0PT50Pj05NzI4JiZ0PD05OTgzLFwiTWlzY2VsbGFuZW91cyBTeW1ib2xzIGFuZCBBcnJvd3NcIjp0PT50Pj0xMTAwOCYmdDw9MTEyNjMsXCJDSksgUmFkaWNhbHMgU3VwcGxlbWVudFwiOnQ9PnQ+PTExOTA0JiZ0PD0xMjAzMSxcIkthbmd4aSBSYWRpY2Fsc1wiOnQ9PnQ+PTEyMDMyJiZ0PD0xMjI1NSxcIklkZW9ncmFwaGljIERlc2NyaXB0aW9uIENoYXJhY3RlcnNcIjp0PT50Pj0xMjI3MiYmdDw9MTIyODcsXCJDSksgU3ltYm9scyBhbmQgUHVuY3R1YXRpb25cIjp0PT50Pj0xMjI4OCYmdDw9MTIzNTEsSGlyYWdhbmE6dD0+dD49MTIzNTImJnQ8PTEyNDQ3LEthdGFrYW5hOnQ9PnQ+PTEyNDQ4JiZ0PD0xMjU0MyxCb3BvbW9mbzp0PT50Pj0xMjU0NCYmdDw9MTI1OTEsXCJIYW5ndWwgQ29tcGF0aWJpbGl0eSBKYW1vXCI6dD0+dD49MTI1OTImJnQ8PTEyNjg3LEthbmJ1bjp0PT50Pj0xMjY4OCYmdDw9MTI3MDMsXCJCb3BvbW9mbyBFeHRlbmRlZFwiOnQ9PnQ+PTEyNzA0JiZ0PD0xMjczNSxcIkNKSyBTdHJva2VzXCI6dD0+dD49MTI3MzYmJnQ8PTEyNzgzLFwiS2F0YWthbmEgUGhvbmV0aWMgRXh0ZW5zaW9uc1wiOnQ9PnQ+PTEyNzg0JiZ0PD0xMjc5OSxcIkVuY2xvc2VkIENKSyBMZXR0ZXJzIGFuZCBNb250aHNcIjp0PT50Pj0xMjgwMCYmdDw9MTMwNTUsXCJDSksgQ29tcGF0aWJpbGl0eVwiOnQ9PnQ+PTEzMDU2JiZ0PD0xMzMxMSxcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEFcIjp0PT50Pj0xMzMxMiYmdDw9MTk5MDMsXCJZaWppbmcgSGV4YWdyYW0gU3ltYm9sc1wiOnQ9PnQ+PTE5OTA0JiZ0PD0xOTk2NyxcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHNcIjp0PT50Pj0xOTk2OCYmdDw9NDA5NTksXCJZaSBTeWxsYWJsZXNcIjp0PT50Pj00MDk2MCYmdDw9NDIxMjcsXCJZaSBSYWRpY2Fsc1wiOnQ9PnQ+PTQyMTI4JiZ0PD00MjE5MSxcIkhhbmd1bCBKYW1vIEV4dGVuZGVkLUFcIjp0PT50Pj00MzM2MCYmdDw9NDMzOTEsXCJIYW5ndWwgU3lsbGFibGVzXCI6dD0+dD49NDQwMzImJnQ8PTU1MjE1LFwiSGFuZ3VsIEphbW8gRXh0ZW5kZWQtQlwiOnQ9PnQ+PTU1MjE2JiZ0PD01NTI5NSxcIlByaXZhdGUgVXNlIEFyZWFcIjp0PT50Pj01NzM0NCYmdDw9NjM3NDMsXCJDSksgQ29tcGF0aWJpbGl0eSBJZGVvZ3JhcGhzXCI6dD0+dD49NjM3NDQmJnQ8PTY0MjU1LFwiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1BXCI6dD0+dD49NjQzMzYmJnQ8PTY1MDIzLFwiVmVydGljYWwgRm9ybXNcIjp0PT50Pj02NTA0MCYmdDw9NjUwNTUsXCJDSksgQ29tcGF0aWJpbGl0eSBGb3Jtc1wiOnQ9PnQ+PTY1MDcyJiZ0PD02NTEwMyxcIlNtYWxsIEZvcm0gVmFyaWFudHNcIjp0PT50Pj02NTEwNCYmdDw9NjUxMzUsXCJBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUJcIjp0PT50Pj02NTEzNiYmdDw9NjUyNzksXCJIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3Jtc1wiOnQ9PnQ+PTY1MjgwJiZ0PD02NTUxOX07ZnVuY3Rpb24gZXModCl7Zm9yKGNvbnN0IGUgb2YgdClpZihpcyhlLmNoYXJDb2RlQXQoMCkpKXJldHVybiAhMDtyZXR1cm4gITF9ZnVuY3Rpb24gcnModCl7Zm9yKGNvbnN0IGUgb2YgdClpZighbnMoZS5jaGFyQ29kZUF0KDApKSlyZXR1cm4gITE7cmV0dXJuICEwfWZ1bmN0aW9uIG5zKHQpe3JldHVybiAhKHRzLkFyYWJpYyh0KXx8dHNbXCJBcmFiaWMgU3VwcGxlbWVudFwiXSh0KXx8dHNbXCJBcmFiaWMgRXh0ZW5kZWQtQVwiXSh0KXx8dHNbXCJBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUFcIl0odCl8fHRzW1wiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CXCJdKHQpKX1mdW5jdGlvbiBpcyh0KXtyZXR1cm4gISg3NDYhPT10JiY3NDchPT10JiYodDw0MzUyfHwhKHRzW1wiQm9wb21vZm8gRXh0ZW5kZWRcIl0odCl8fHRzLkJvcG9tb2ZvKHQpfHx0c1tcIkNKSyBDb21wYXRpYmlsaXR5IEZvcm1zXCJdKHQpJiYhKHQ+PTY1MDk3JiZ0PD02NTEwMyl8fHRzW1wiQ0pLIENvbXBhdGliaWxpdHkgSWRlb2dyYXBoc1wiXSh0KXx8dHNbXCJDSksgQ29tcGF0aWJpbGl0eVwiXSh0KXx8dHNbXCJDSksgUmFkaWNhbHMgU3VwcGxlbWVudFwiXSh0KXx8dHNbXCJDSksgU3Ryb2tlc1wiXSh0KXx8ISghdHNbXCJDSksgU3ltYm9scyBhbmQgUHVuY3R1YXRpb25cIl0odCl8fHQ+PTEyMjk2JiZ0PD0xMjMwNXx8dD49MTIzMDgmJnQ8PTEyMzE5fHwxMjMzNj09PXQpfHx0c1tcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEFcIl0odCl8fHRzW1wiQ0pLIFVuaWZpZWQgSWRlb2dyYXBoc1wiXSh0KXx8dHNbXCJFbmNsb3NlZCBDSksgTGV0dGVycyBhbmQgTW9udGhzXCJdKHQpfHx0c1tcIkhhbmd1bCBDb21wYXRpYmlsaXR5IEphbW9cIl0odCl8fHRzW1wiSGFuZ3VsIEphbW8gRXh0ZW5kZWQtQVwiXSh0KXx8dHNbXCJIYW5ndWwgSmFtbyBFeHRlbmRlZC1CXCJdKHQpfHx0c1tcIkhhbmd1bCBKYW1vXCJdKHQpfHx0c1tcIkhhbmd1bCBTeWxsYWJsZXNcIl0odCl8fHRzLkhpcmFnYW5hKHQpfHx0c1tcIklkZW9ncmFwaGljIERlc2NyaXB0aW9uIENoYXJhY3RlcnNcIl0odCl8fHRzLkthbmJ1bih0KXx8dHNbXCJLYW5neGkgUmFkaWNhbHNcIl0odCl8fHRzW1wiS2F0YWthbmEgUGhvbmV0aWMgRXh0ZW5zaW9uc1wiXSh0KXx8dHMuS2F0YWthbmEodCkmJjEyNTQwIT09dHx8ISghdHNbXCJIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3Jtc1wiXSh0KXx8NjUyODg9PT10fHw2NTI4OT09PXR8fDY1MjkzPT09dHx8dD49NjUzMDYmJnQ8PTY1MzEwfHw2NTMzOT09PXR8fDY1MzQxPT09dHx8NjUzNDM9PT10fHx0Pj02NTM3MSYmdDw9NjU1MDN8fDY1NTA3PT09dHx8dD49NjU1MTImJnQ8PTY1NTE5KXx8ISghdHNbXCJTbWFsbCBGb3JtIFZhcmlhbnRzXCJdKHQpfHx0Pj02NTExMiYmdDw9NjUxMTh8fHQ+PTY1MTIzJiZ0PD02NTEyNil8fHRzW1wiVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljc1wiXSh0KXx8dHNbXCJVbmlmaWVkIENhbmFkaWFuIEFib3JpZ2luYWwgU3lsbGFiaWNzIEV4dGVuZGVkXCJdKHQpfHx0c1tcIlZlcnRpY2FsIEZvcm1zXCJdKHQpfHx0c1tcIllpamluZyBIZXhhZ3JhbSBTeW1ib2xzXCJdKHQpfHx0c1tcIllpIFN5bGxhYmxlc1wiXSh0KXx8dHNbXCJZaSBSYWRpY2Fsc1wiXSh0KSkpKX1mdW5jdGlvbiBzcyh0KXtyZXR1cm4gIShpcyh0KXx8ZnVuY3Rpb24odCl7cmV0dXJuICEhKHRzW1wiTGF0aW4tMSBTdXBwbGVtZW50XCJdKHQpJiYoMTY3PT09dHx8MTY5PT09dHx8MTc0PT09dHx8MTc3PT09dHx8MTg4PT09dHx8MTg5PT09dHx8MTkwPT09dHx8MjE1PT09dHx8MjQ3PT09dCl8fHRzW1wiR2VuZXJhbCBQdW5jdHVhdGlvblwiXSh0KSYmKDgyMTQ9PT10fHw4MjI0PT09dHx8ODIyNT09PXR8fDgyNDA9PT10fHw4MjQxPT09dHx8ODI1MT09PXR8fDgyNTI9PT10fHw4MjU4PT09dHx8ODI2Mz09PXR8fDgyNjQ9PT10fHw4MjY1PT09dHx8ODI3Mz09PXQpfHx0c1tcIkxldHRlcmxpa2UgU3ltYm9sc1wiXSh0KXx8dHNbXCJOdW1iZXIgRm9ybXNcIl0odCl8fHRzW1wiTWlzY2VsbGFuZW91cyBUZWNobmljYWxcIl0odCkmJih0Pj04OTYwJiZ0PD04OTY3fHx0Pj04OTcyJiZ0PD04OTkxfHx0Pj04OTk2JiZ0PD05ZTN8fDkwMDM9PT10fHx0Pj05MDg1JiZ0PD05MTE0fHx0Pj05MTUwJiZ0PD05MTY1fHw5MTY3PT09dHx8dD49OTE2OSYmdDw9OTE3OXx8dD49OTE4NiYmdDw9OTIxNSl8fHRzW1wiQ29udHJvbCBQaWN0dXJlc1wiXSh0KSYmOTI1MSE9PXR8fHRzW1wiT3B0aWNhbCBDaGFyYWN0ZXIgUmVjb2duaXRpb25cIl0odCl8fHRzW1wiRW5jbG9zZWQgQWxwaGFudW1lcmljc1wiXSh0KXx8dHNbXCJHZW9tZXRyaWMgU2hhcGVzXCJdKHQpfHx0c1tcIk1pc2NlbGxhbmVvdXMgU3ltYm9sc1wiXSh0KSYmISh0Pj05NzU0JiZ0PD05NzU5KXx8dHNbXCJNaXNjZWxsYW5lb3VzIFN5bWJvbHMgYW5kIEFycm93c1wiXSh0KSYmKHQ+PTExMDI2JiZ0PD0xMTA1NXx8dD49MTEwODgmJnQ8PTExMDk3fHx0Pj0xMTE5MiYmdDw9MTEyNDMpfHx0c1tcIkNKSyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvblwiXSh0KXx8dHMuS2F0YWthbmEodCl8fHRzW1wiUHJpdmF0ZSBVc2UgQXJlYVwiXSh0KXx8dHNbXCJDSksgQ29tcGF0aWJpbGl0eSBGb3Jtc1wiXSh0KXx8dHNbXCJTbWFsbCBGb3JtIFZhcmlhbnRzXCJdKHQpfHx0c1tcIkhhbGZ3aWR0aCBhbmQgRnVsbHdpZHRoIEZvcm1zXCJdKHQpfHw4NzM0PT09dHx8ODc1Nj09PXR8fDg3NTc9PT10fHx0Pj05OTg0JiZ0PD0xMDA4N3x8dD49MTAxMDImJnQ8PTEwMTMxfHw2NTUzMj09PXR8fDY1NTMzPT09dCl9KHQpKX1mdW5jdGlvbiBhcyh0KXtyZXR1cm4gdD49MTQyNCYmdDw9MjMwM3x8dHNbXCJBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUFcIl0odCl8fHRzW1wiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CXCJdKHQpfWZ1bmN0aW9uIG9zKHQsZSl7cmV0dXJuICEoIWUmJmFzKHQpfHx0Pj0yMzA0JiZ0PD0zNTgzfHx0Pj0zODQwJiZ0PD00MjU1fHx0cy5LaG1lcih0KSl9ZnVuY3Rpb24gbHModCl7Zm9yKGNvbnN0IGUgb2YgdClpZihhcyhlLmNoYXJDb2RlQXQoMCkpKXJldHVybiAhMDtyZXR1cm4gITF9Y29uc3QgdXM9XCJkZWZlcnJlZFwiLGNzPVwibG9hZGluZ1wiLGhzPVwibG9hZGVkXCI7bGV0IHBzPW51bGwsZHM9XCJ1bmF2YWlsYWJsZVwiLGZzPW51bGw7Y29uc3QgeXM9ZnVuY3Rpb24odCl7dCYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQuaW5kZXhPZihcIk5ldHdvcmtFcnJvclwiKT4tMSYmKGRzPVwiZXJyb3JcIikscHMmJnBzKHQpO307ZnVuY3Rpb24gbXMoKXtncy5maXJlKG5ldyBZdChcInBsdWdpblN0YXRlQ2hhbmdlXCIse3BsdWdpblN0YXR1czpkcyxwbHVnaW5VUkw6ZnN9KSk7fWNvbnN0IGdzPW5ldyBRdCx4cz1mdW5jdGlvbigpe3JldHVybiBkc30sdnM9ZnVuY3Rpb24oKXtpZihkcyE9PXVzfHwhZnMpdGhyb3cgbmV3IEVycm9yKFwicnRsLXRleHQtcGx1Z2luIGNhbm5vdCBiZSBkb3dubG9hZGVkIHVubGVzcyBhIHBsdWdpblVSTCBpcyBzcGVjaWZpZWRcIik7ZHM9Y3MsbXMoKSxmcyYmcHQoe3VybDpmc30sKHQ9Pnt0P3lzKHQpOihkcz1ocyxtcygpKTt9KSk7fSxicz17YXBwbHlBcmFiaWNTaGFwaW5nOm51bGwscHJvY2Vzc0JpZGlyZWN0aW9uYWxUZXh0Om51bGwscHJvY2Vzc1N0eWxlZEJpZGlyZWN0aW9uYWxUZXh0Om51bGwsaXNMb2FkZWQ6KCk9PmRzPT09aHN8fG51bGwhPWJzLmFwcGx5QXJhYmljU2hhcGluZyxpc0xvYWRpbmc6KCk9PmRzPT09Y3Msc2V0U3RhdGUodCl7ZHM9dC5wbHVnaW5TdGF0dXMsZnM9dC5wbHVnaW5VUkw7fSxpc1BhcnNlZDooKT0+bnVsbCE9YnMuYXBwbHlBcmFiaWNTaGFwaW5nJiZudWxsIT1icy5wcm9jZXNzQmlkaXJlY3Rpb25hbFRleHQmJm51bGwhPWJzLnByb2Nlc3NTdHlsZWRCaWRpcmVjdGlvbmFsVGV4dCxnZXRQbHVnaW5VUkw6KCk9PmZzfTtjbGFzcyB3c3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuem9vbT10LGU/KHRoaXMubm93PWUubm93LHRoaXMuZmFkZUR1cmF0aW9uPWUuZmFkZUR1cmF0aW9uLHRoaXMudHJhbnNpdGlvbj1lLnRyYW5zaXRpb24sdGhpcy5waXRjaD1lLnBpdGNoKToodGhpcy5ub3c9MCx0aGlzLmZhZGVEdXJhdGlvbj0wLHRoaXMudHJhbnNpdGlvbj17fSx0aGlzLnBpdGNoPTApO31pc1N1cHBvcnRlZFNjcmlwdCh0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXtmb3IoY29uc3QgciBvZiB0KWlmKCFvcyhyLmNoYXJDb2RlQXQoMCksZSkpcmV0dXJuICExO3JldHVybiAhMH0odCxicy5pc0xvYWRlZCgpKX19Y2xhc3MgX3N7Y29uc3RydWN0b3IodCxlKXt0aGlzLnByb3BlcnR5PXQsdGhpcy52YWx1ZT1lLHRoaXMuZXhwcmVzc2lvbj1mdW5jdGlvbih0LGUpe2lmKCRuKHQpKXJldHVybiBuZXcgdGkodCxlKTtpZihKbih0KSl7Y29uc3Qgcj1Rbih0LGUpO2lmKFwiZXJyb3JcIj09PXIucmVzdWx0KXRocm93IG5ldyBFcnJvcihyLnZhbHVlLm1hcCgodD0+YCR7dC5rZXl9OiAke3QubWVzc2FnZX1gKSkuam9pbihcIiwgXCIpKTtyZXR1cm4gci52YWx1ZX17bGV0IHI9dDtyZXR1cm4gXCJzdHJpbmdcIj09dHlwZW9mIHQmJlwiY29sb3JcIj09PWUudHlwZSYmKHI9RWUucGFyc2UodCkpLHtraW5kOlwiY29uc3RhbnRcIixldmFsdWF0ZTooKT0+cn19fSh2b2lkIDA9PT1lP3Quc3BlY2lmaWNhdGlvbi5kZWZhdWx0OmUsdC5zcGVjaWZpY2F0aW9uKTt9aXNEYXRhRHJpdmVuKCl7cmV0dXJuIFwic291cmNlXCI9PT10aGlzLmV4cHJlc3Npb24ua2luZHx8XCJjb21wb3NpdGVcIj09PXRoaXMuZXhwcmVzc2lvbi5raW5kfXBvc3NpYmx5RXZhbHVhdGUodCxlLHIpe3JldHVybiB0aGlzLnByb3BlcnR5LnBvc3NpYmx5RXZhbHVhdGUodGhpcyx0LGUscil9fWNsYXNzIEFze2NvbnN0cnVjdG9yKHQpe3RoaXMucHJvcGVydHk9dCx0aGlzLnZhbHVlPW5ldyBfcyh0LHZvaWQgMCk7fXRyYW5zaXRpb25lZCh0LGUpe3JldHVybiBuZXcga3ModGhpcy5wcm9wZXJ0eSx0aGlzLnZhbHVlLGUsQyh7fSx0LnRyYW5zaXRpb24sdGhpcy50cmFuc2l0aW9uKSx0Lm5vdyl9dW50cmFuc2l0aW9uZWQoKXtyZXR1cm4gbmV3IGtzKHRoaXMucHJvcGVydHksdGhpcy52YWx1ZSxudWxsLHt9LDApfX1jbGFzcyBTc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl9wcm9wZXJ0aWVzPXQsdGhpcy5fdmFsdWVzPU9iamVjdC5jcmVhdGUodC5kZWZhdWx0VHJhbnNpdGlvbmFibGVQcm9wZXJ0eVZhbHVlcyk7fWdldFZhbHVlKHQpe3JldHVybiBPKHRoaXMuX3ZhbHVlc1t0XS52YWx1ZS52YWx1ZSl9c2V0VmFsdWUodCxlKXt0aGlzLl92YWx1ZXMuaGFzT3duUHJvcGVydHkodCl8fCh0aGlzLl92YWx1ZXNbdF09bmV3IEFzKHRoaXMuX3ZhbHVlc1t0XS5wcm9wZXJ0eSkpLHRoaXMuX3ZhbHVlc1t0XS52YWx1ZT1uZXcgX3ModGhpcy5fdmFsdWVzW3RdLnByb3BlcnR5LG51bGw9PT1lP3ZvaWQgMDpPKGUpKTt9Z2V0VHJhbnNpdGlvbih0KXtyZXR1cm4gTyh0aGlzLl92YWx1ZXNbdF0udHJhbnNpdGlvbil9c2V0VHJhbnNpdGlvbih0LGUpe3RoaXMuX3ZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh0KXx8KHRoaXMuX3ZhbHVlc1t0XT1uZXcgQXModGhpcy5fdmFsdWVzW3RdLnByb3BlcnR5KSksdGhpcy5fdmFsdWVzW3RdLnRyYW5zaXRpb249TyhlKXx8dm9pZCAwO31zZXJpYWxpemUoKXtjb25zdCB0PXt9O2Zvcihjb25zdCBlIG9mIE9iamVjdC5rZXlzKHRoaXMuX3ZhbHVlcykpe2NvbnN0IHI9dGhpcy5nZXRWYWx1ZShlKTt2b2lkIDAhPT1yJiYodFtlXT1yKTtjb25zdCBuPXRoaXMuZ2V0VHJhbnNpdGlvbihlKTt2b2lkIDAhPT1uJiYodFtgJHtlfS10cmFuc2l0aW9uYF09bik7fXJldHVybiB0fXRyYW5zaXRpb25lZCh0LGUpe2NvbnN0IHI9bmV3IElzKHRoaXMuX3Byb3BlcnRpZXMpO2Zvcihjb25zdCBuIG9mIE9iamVjdC5rZXlzKHRoaXMuX3ZhbHVlcykpci5fdmFsdWVzW25dPXRoaXMuX3ZhbHVlc1tuXS50cmFuc2l0aW9uZWQodCxlLl92YWx1ZXNbbl0pO3JldHVybiByfXVudHJhbnNpdGlvbmVkKCl7Y29uc3QgdD1uZXcgSXModGhpcy5fcHJvcGVydGllcyk7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXModGhpcy5fdmFsdWVzKSl0Ll92YWx1ZXNbZV09dGhpcy5fdmFsdWVzW2VdLnVudHJhbnNpdGlvbmVkKCk7cmV0dXJuIHR9fWNsYXNzIGtze2NvbnN0cnVjdG9yKHQsZSxyLG4saSl7Y29uc3Qgcz1uLmRlbGF5fHwwLGE9bi5kdXJhdGlvbnx8MDtpPWl8fDAsdGhpcy5wcm9wZXJ0eT10LHRoaXMudmFsdWU9ZSx0aGlzLmJlZ2luPWkrcyx0aGlzLmVuZD10aGlzLmJlZ2luK2EsdC5zcGVjaWZpY2F0aW9uLnRyYW5zaXRpb24mJihuLmRlbGF5fHxuLmR1cmF0aW9uKSYmKHRoaXMucHJpb3I9cik7fXBvc3NpYmx5RXZhbHVhdGUodCxlLHIpe2NvbnN0IG49dC5ub3d8fDAsaT10aGlzLnZhbHVlLnBvc3NpYmx5RXZhbHVhdGUodCxlLHIpLHM9dGhpcy5wcmlvcjtpZihzKXtpZihuPnRoaXMuZW5kKXJldHVybiB0aGlzLnByaW9yPW51bGwsaTtpZih0aGlzLnZhbHVlLmlzRGF0YURyaXZlbigpKXJldHVybiB0aGlzLnByaW9yPW51bGwsaTtpZihuPHRoaXMuYmVnaW4pcmV0dXJuIHMucG9zc2libHlFdmFsdWF0ZSh0LGUscik7e2NvbnN0IGE9KG4tdGhpcy5iZWdpbikvKHRoaXMuZW5kLXRoaXMuYmVnaW4pO3JldHVybiB0aGlzLnByb3BlcnR5LmludGVycG9sYXRlKHMucG9zc2libHlFdmFsdWF0ZSh0LGUsciksaSxTKGEpKX19cmV0dXJuIGl9fWNsYXNzIElze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3Byb3BlcnRpZXM9dCx0aGlzLl92YWx1ZXM9T2JqZWN0LmNyZWF0ZSh0LmRlZmF1bHRUcmFuc2l0aW9uaW5nUHJvcGVydHlWYWx1ZXMpO31wb3NzaWJseUV2YWx1YXRlKHQsZSxyKXtjb25zdCBuPW5ldyB6cyh0aGlzLl9wcm9wZXJ0aWVzKTtmb3IoY29uc3QgaSBvZiBPYmplY3Qua2V5cyh0aGlzLl92YWx1ZXMpKW4uX3ZhbHVlc1tpXT10aGlzLl92YWx1ZXNbaV0ucG9zc2libHlFdmFsdWF0ZSh0LGUscik7cmV0dXJuIG59aGFzVHJhbnNpdGlvbigpe2Zvcihjb25zdCB0IG9mIE9iamVjdC5rZXlzKHRoaXMuX3ZhbHVlcykpaWYodGhpcy5fdmFsdWVzW3RdLnByaW9yKXJldHVybiAhMDtyZXR1cm4gITF9fWNsYXNzIE1ze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3Byb3BlcnRpZXM9dCx0aGlzLl92YWx1ZXM9T2JqZWN0LmNyZWF0ZSh0LmRlZmF1bHRQcm9wZXJ0eVZhbHVlcyk7fWdldFZhbHVlKHQpe3JldHVybiBPKHRoaXMuX3ZhbHVlc1t0XS52YWx1ZSl9c2V0VmFsdWUodCxlKXt0aGlzLl92YWx1ZXNbdF09bmV3IF9zKHRoaXMuX3ZhbHVlc1t0XS5wcm9wZXJ0eSxudWxsPT09ZT92b2lkIDA6TyhlKSk7fXNlcmlhbGl6ZSgpe2NvbnN0IHQ9e307Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXModGhpcy5fdmFsdWVzKSl7Y29uc3Qgcj10aGlzLmdldFZhbHVlKGUpO3ZvaWQgMCE9PXImJih0W2VdPXIpO31yZXR1cm4gdH1wb3NzaWJseUV2YWx1YXRlKHQsZSxyKXtjb25zdCBuPW5ldyB6cyh0aGlzLl9wcm9wZXJ0aWVzKTtmb3IoY29uc3QgaSBvZiBPYmplY3Qua2V5cyh0aGlzLl92YWx1ZXMpKW4uX3ZhbHVlc1tpXT10aGlzLl92YWx1ZXNbaV0ucG9zc2libHlFdmFsdWF0ZSh0LGUscik7cmV0dXJuIG59fWNsYXNzIFRze2NvbnN0cnVjdG9yKHQsZSxyKXt0aGlzLnByb3BlcnR5PXQsdGhpcy52YWx1ZT1lLHRoaXMucGFyYW1ldGVycz1yO31pc0NvbnN0YW50KCl7cmV0dXJuIFwiY29uc3RhbnRcIj09PXRoaXMudmFsdWUua2luZH1jb25zdGFudE9yKHQpe3JldHVybiBcImNvbnN0YW50XCI9PT10aGlzLnZhbHVlLmtpbmQ/dGhpcy52YWx1ZS52YWx1ZTp0fWV2YWx1YXRlKHQsZSxyLG4pe3JldHVybiB0aGlzLnByb3BlcnR5LmV2YWx1YXRlKHRoaXMudmFsdWUsdGhpcy5wYXJhbWV0ZXJzLHQsZSxyLG4pfX1jbGFzcyB6c3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl9wcm9wZXJ0aWVzPXQsdGhpcy5fdmFsdWVzPU9iamVjdC5jcmVhdGUodC5kZWZhdWx0UG9zc2libHlFdmFsdWF0ZWRWYWx1ZXMpO31nZXQodCl7cmV0dXJuIHRoaXMuX3ZhbHVlc1t0XX19Y2xhc3MgQnN7Y29uc3RydWN0b3IodCl7dGhpcy5zcGVjaWZpY2F0aW9uPXQ7fXBvc3NpYmx5RXZhbHVhdGUodCxlKXtyZXR1cm4gdC5leHByZXNzaW9uLmV2YWx1YXRlKGUpfWludGVycG9sYXRlKHQsZSxyKXtjb25zdCBuPUNyW3RoaXMuc3BlY2lmaWNhdGlvbi50eXBlXTtyZXR1cm4gbj9uKHQsZSxyKTp0fX1jbGFzcyBFc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuc3BlY2lmaWNhdGlvbj10LHRoaXMub3ZlcnJpZGVzPWU7fXBvc3NpYmx5RXZhbHVhdGUodCxlLHIsbil7cmV0dXJuIG5ldyBUcyh0aGlzLFwiY29uc3RhbnRcIj09PXQuZXhwcmVzc2lvbi5raW5kfHxcImNhbWVyYVwiPT09dC5leHByZXNzaW9uLmtpbmQ/e2tpbmQ6XCJjb25zdGFudFwiLHZhbHVlOnQuZXhwcmVzc2lvbi5ldmFsdWF0ZShlLG51bGwse30scixuKX06dC5leHByZXNzaW9uLGUpfWludGVycG9sYXRlKHQsZSxyKXtpZihcImNvbnN0YW50XCIhPT10LnZhbHVlLmtpbmR8fFwiY29uc3RhbnRcIiE9PWUudmFsdWUua2luZClyZXR1cm4gdDtpZih2b2lkIDA9PT10LnZhbHVlLnZhbHVlfHx2b2lkIDA9PT1lLnZhbHVlLnZhbHVlKXJldHVybiBuZXcgVHModGhpcyx7a2luZDpcImNvbnN0YW50XCIsdmFsdWU6dm9pZCAwfSx0LnBhcmFtZXRlcnMpO2NvbnN0IG49Q3JbdGhpcy5zcGVjaWZpY2F0aW9uLnR5cGVdO3JldHVybiBuP25ldyBUcyh0aGlzLHtraW5kOlwiY29uc3RhbnRcIix2YWx1ZTpuKHQudmFsdWUudmFsdWUsZS52YWx1ZS52YWx1ZSxyKX0sdC5wYXJhbWV0ZXJzKTp0fWV2YWx1YXRlKHQsZSxyLG4saSxzKXtyZXR1cm4gXCJjb25zdGFudFwiPT09dC5raW5kP3QudmFsdWU6dC5ldmFsdWF0ZShlLHIsbixpLHMpfX1jbGFzcyBDc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLnNwZWNpZmljYXRpb249dDt9cG9zc2libHlFdmFsdWF0ZSh0LGUscixuKXtyZXR1cm4gISF0LmV4cHJlc3Npb24uZXZhbHVhdGUoZSxudWxsLHt9LHIsbil9aW50ZXJwb2xhdGUoKXtyZXR1cm4gITF9fWNsYXNzIFBze2NvbnN0cnVjdG9yKHQpe3RoaXMucHJvcGVydGllcz10LHRoaXMuZGVmYXVsdFByb3BlcnR5VmFsdWVzPXt9LHRoaXMuZGVmYXVsdFRyYW5zaXRpb25hYmxlUHJvcGVydHlWYWx1ZXM9e30sdGhpcy5kZWZhdWx0VHJhbnNpdGlvbmluZ1Byb3BlcnR5VmFsdWVzPXt9LHRoaXMuZGVmYXVsdFBvc3NpYmx5RXZhbHVhdGVkVmFsdWVzPXt9LHRoaXMub3ZlcnJpZGFibGVQcm9wZXJ0aWVzPVtdO2NvbnN0IGU9bmV3IHdzKDAse30pO2Zvcihjb25zdCByIGluIHQpe2NvbnN0IG49dFtyXTtuLnNwZWNpZmljYXRpb24ub3ZlcnJpZGFibGUmJnRoaXMub3ZlcnJpZGFibGVQcm9wZXJ0aWVzLnB1c2gocik7Y29uc3QgaT10aGlzLmRlZmF1bHRQcm9wZXJ0eVZhbHVlc1tyXT1uZXcgX3Mobix2b2lkIDApLHM9dGhpcy5kZWZhdWx0VHJhbnNpdGlvbmFibGVQcm9wZXJ0eVZhbHVlc1tyXT1uZXcgQXMobik7dGhpcy5kZWZhdWx0VHJhbnNpdGlvbmluZ1Byb3BlcnR5VmFsdWVzW3JdPXMudW50cmFuc2l0aW9uZWQoKSx0aGlzLmRlZmF1bHRQb3NzaWJseUV2YWx1YXRlZFZhbHVlc1tyXT1pLnBvc3NpYmx5RXZhbHVhdGUoZSk7fX19ZnVuY3Rpb24gRHModCxlKXtyZXR1cm4gMjU2Kih0PU0oTWF0aC5mbG9vcih0KSwwLDI1NSkpK00oTWF0aC5mbG9vcihlKSwwLDI1NSl9SmkoRXMsXCJEYXRhRHJpdmVuUHJvcGVydHlcIiksSmkoQnMsXCJEYXRhQ29uc3RhbnRQcm9wZXJ0eVwiKSxKaShDcyxcIkNvbG9yUmFtcFByb3BlcnR5XCIpO2NvbnN0IFZzPXtJbnQ4OkludDhBcnJheSxVaW50ODpVaW50OEFycmF5LEludDE2OkludDE2QXJyYXksVWludDE2OlVpbnQxNkFycmF5LEludDMyOkludDMyQXJyYXksVWludDMyOlVpbnQzMkFycmF5LEZsb2F0MzI6RmxvYXQzMkFycmF5fTtjbGFzcyBMc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuX3N0cnVjdEFycmF5PXQsdGhpcy5fcG9zMT1lKnRoaXMuc2l6ZSx0aGlzLl9wb3MyPXRoaXMuX3BvczEvMix0aGlzLl9wb3M0PXRoaXMuX3BvczEvNCx0aGlzLl9wb3M4PXRoaXMuX3BvczEvODt9fWNsYXNzIEZze2NvbnN0cnVjdG9yKCl7dGhpcy5pc1RyYW5zZmVycmVkPSExLHRoaXMuY2FwYWNpdHk9LTEsdGhpcy5yZXNpemUoMCk7fXN0YXRpYyBzZXJpYWxpemUodCxlKXtyZXR1cm4gdC5fdHJpbSgpLGUmJih0LmlzVHJhbnNmZXJyZWQ9ITAsZS5wdXNoKHQuYXJyYXlCdWZmZXIpKSx7bGVuZ3RoOnQubGVuZ3RoLGFycmF5QnVmZmVyOnQuYXJyYXlCdWZmZXJ9fXN0YXRpYyBkZXNlcmlhbGl6ZSh0KXtjb25zdCBlPU9iamVjdC5jcmVhdGUodGhpcy5wcm90b3R5cGUpO3JldHVybiBlLmFycmF5QnVmZmVyPXQuYXJyYXlCdWZmZXIsZS5sZW5ndGg9dC5sZW5ndGgsZS5jYXBhY2l0eT10LmFycmF5QnVmZmVyLmJ5dGVMZW5ndGgvZS5ieXRlc1BlckVsZW1lbnQsZS5fcmVmcmVzaFZpZXdzKCksZX1fdHJpbSgpe3RoaXMubGVuZ3RoIT09dGhpcy5jYXBhY2l0eSYmKHRoaXMuY2FwYWNpdHk9dGhpcy5sZW5ndGgsdGhpcy5hcnJheUJ1ZmZlcj10aGlzLmFycmF5QnVmZmVyLnNsaWNlKDAsdGhpcy5sZW5ndGgqdGhpcy5ieXRlc1BlckVsZW1lbnQpLHRoaXMuX3JlZnJlc2hWaWV3cygpKTt9Y2xlYXIoKXt0aGlzLmxlbmd0aD0wO31yZXNpemUodCl7dGhpcy5yZXNlcnZlKHQpLHRoaXMubGVuZ3RoPXQ7fXJlc2VydmUodCl7aWYodD50aGlzLmNhcGFjaXR5KXt0aGlzLmNhcGFjaXR5PU1hdGgubWF4KHQsTWF0aC5mbG9vcig1KnRoaXMuY2FwYWNpdHkpLDEyOCksdGhpcy5hcnJheUJ1ZmZlcj1uZXcgQXJyYXlCdWZmZXIodGhpcy5jYXBhY2l0eSp0aGlzLmJ5dGVzUGVyRWxlbWVudCk7Y29uc3QgZT10aGlzLnVpbnQ4O3RoaXMuX3JlZnJlc2hWaWV3cygpLGUmJnRoaXMudWludDguc2V0KGUpO319X3JlZnJlc2hWaWV3cygpe3Rocm93IG5ldyBFcnJvcihcIl9yZWZyZXNoVmlld3MoKSBtdXN0IGJlIGltcGxlbWVudGVkIGJ5IGVhY2ggY29uY3JldGUgU3RydWN0QXJyYXkgbGF5b3V0XCIpfWRlc3Ryb3koKXt0aGlzLmludDg9dGhpcy51aW50OD10aGlzLmludDE2PXRoaXMudWludDE2PXRoaXMuaW50MzI9dGhpcy51aW50MzI9dGhpcy5mbG9hdDMyPW51bGwsdGhpcy5hcnJheUJ1ZmZlcj1udWxsO319ZnVuY3Rpb24gUnModCxlPTEpe2xldCByPTAsbj0wO3JldHVybiB7bWVtYmVyczp0Lm1hcCgodD0+e2NvbnN0IGk9VnNbdC50eXBlXS5CWVRFU19QRVJfRUxFTUVOVCxzPXI9VXMocixNYXRoLm1heChlLGkpKSxhPXQuY29tcG9uZW50c3x8MTtyZXR1cm4gbj1NYXRoLm1heChuLGkpLHIrPWkqYSx7bmFtZTp0Lm5hbWUsdHlwZTp0LnR5cGUsY29tcG9uZW50czphLG9mZnNldDpzfX0pKSxzaXplOlVzKHIsTWF0aC5tYXgobixlKSksYWxpZ25tZW50OmV9fWZ1bmN0aW9uIFVzKHQsZSl7cmV0dXJuIE1hdGguY2VpbCh0L2UpKmV9Y2xhc3MgJHMgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUpe2NvbnN0IHI9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKHIrMSksdGhpcy5lbXBsYWNlKHIsdCxlKX1lbXBsYWNlKHQsZSxyKXtjb25zdCBuPTIqdDtyZXR1cm4gdGhpcy5pbnQxNltuKzBdPWUsdGhpcy5pbnQxNltuKzFdPXIsdH19JHMucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD00LEppKCRzLFwiU3RydWN0QXJyYXlMYXlvdXQyaTRcIik7Y2xhc3MganMgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscil7Y29uc3Qgbj10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUobisxKSx0aGlzLmVtcGxhY2Uobix0LGUscil9ZW1wbGFjZSh0LGUscixuKXtjb25zdCBpPTMqdDtyZXR1cm4gdGhpcy5pbnQxNltpKzBdPWUsdGhpcy5pbnQxNltpKzFdPXIsdGhpcy5pbnQxNltpKzJdPW4sdH19anMucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD02LEppKGpzLFwiU3RydWN0QXJyYXlMYXlvdXQzaTZcIik7Y2xhc3MgT3MgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuKXtjb25zdCBpPXRoaXMubGVuZ3RoO3JldHVybiB0aGlzLnJlc2l6ZShpKzEpLHRoaXMuZW1wbGFjZShpLHQsZSxyLG4pfWVtcGxhY2UodCxlLHIsbixpKXtjb25zdCBzPTQqdDtyZXR1cm4gdGhpcy5pbnQxNltzKzBdPWUsdGhpcy5pbnQxNltzKzFdPXIsdGhpcy5pbnQxNltzKzJdPW4sdGhpcy5pbnQxNltzKzNdPWksdH19T3MucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD04LEppKE9zLFwiU3RydWN0QXJyYXlMYXlvdXQ0aThcIik7Y2xhc3MgcXMgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuZmxvYXQzMj1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuLGkscyxhKXtjb25zdCBvPXRoaXMubGVuZ3RoO3JldHVybiB0aGlzLnJlc2l6ZShvKzEpLHRoaXMuZW1wbGFjZShvLHQsZSxyLG4saSxzLGEpfWVtcGxhY2UodCxlLHIsbixpLHMsYSxvKXtjb25zdCBsPTYqdCx1PTEyKnQsYz0zKnQ7cmV0dXJuIHRoaXMuaW50MTZbbCswXT1lLHRoaXMuaW50MTZbbCsxXT1yLHRoaXMudWludDhbdSs0XT1uLHRoaXMudWludDhbdSs1XT1pLHRoaXMudWludDhbdSs2XT1zLHRoaXMudWludDhbdSs3XT1hLHRoaXMuZmxvYXQzMltjKzJdPW8sdH19cXMucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0xMixKaShxcyxcIlN0cnVjdEFycmF5TGF5b3V0Mmk0dWIxZjEyXCIpO2NsYXNzIE5zIGV4dGVuZHMgRnN7X3JlZnJlc2hWaWV3cygpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5mbG9hdDMyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fWVtcGxhY2VCYWNrKHQsZSxyLG4pe2NvbnN0IGk9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKGkrMSksdGhpcy5lbXBsYWNlKGksdCxlLHIsbil9ZW1wbGFjZSh0LGUscixuLGkpe2NvbnN0IHM9NCp0O3JldHVybiB0aGlzLmZsb2F0MzJbcyswXT1lLHRoaXMuZmxvYXQzMltzKzFdPXIsdGhpcy5mbG9hdDMyW3MrMl09bix0aGlzLmZsb2F0MzJbcyszXT1pLHR9fU5zLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9MTYsSmkoTnMsXCJTdHJ1Y3RBcnJheUxheW91dDRmMTZcIik7Y2xhc3MgR3MgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQxNj1uZXcgVWludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5mbG9hdDMyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fWVtcGxhY2VCYWNrKHQsZSxyLG4saSl7Y29uc3Qgcz10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUocysxKSx0aGlzLmVtcGxhY2Uocyx0LGUscixuLGkpfWVtcGxhY2UodCxlLHIsbixpLHMpe2NvbnN0IGE9Nip0LG89Myp0O3JldHVybiB0aGlzLnVpbnQxNlthKzBdPWUsdGhpcy51aW50MTZbYSsxXT1yLHRoaXMudWludDE2W2ErMl09bix0aGlzLnVpbnQxNlthKzNdPWksdGhpcy5mbG9hdDMyW28rMl09cyx0fX1Hcy5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTEyLEppKEdzLFwiU3RydWN0QXJyYXlMYXlvdXQ0dWkxZjEyXCIpO2NsYXNzIFpzIGV4dGVuZHMgRnN7X3JlZnJlc2hWaWV3cygpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MTY9bmV3IFVpbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuKXtjb25zdCBpPXRoaXMubGVuZ3RoO3JldHVybiB0aGlzLnJlc2l6ZShpKzEpLHRoaXMuZW1wbGFjZShpLHQsZSxyLG4pfWVtcGxhY2UodCxlLHIsbixpKXtjb25zdCBzPTQqdDtyZXR1cm4gdGhpcy51aW50MTZbcyswXT1lLHRoaXMudWludDE2W3MrMV09cix0aGlzLnVpbnQxNltzKzJdPW4sdGhpcy51aW50MTZbcyszXT1pLHR9fVpzLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9OCxKaShacyxcIlN0cnVjdEFycmF5TGF5b3V0NHVpOFwiKTtjbGFzcyBLcyBleHRlbmRzIEZze19yZWZyZXNoVmlld3MoKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuaW50MTY9bmV3IEludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fWVtcGxhY2VCYWNrKHQsZSxyLG4saSxzKXtjb25zdCBhPXRoaXMubGVuZ3RoO3JldHVybiB0aGlzLnJlc2l6ZShhKzEpLHRoaXMuZW1wbGFjZShhLHQsZSxyLG4saSxzKX1lbXBsYWNlKHQsZSxyLG4saSxzLGEpe2NvbnN0IG89Nip0O3JldHVybiB0aGlzLmludDE2W28rMF09ZSx0aGlzLmludDE2W28rMV09cix0aGlzLmludDE2W28rMl09bix0aGlzLmludDE2W28rM109aSx0aGlzLmludDE2W28rNF09cyx0aGlzLmludDE2W28rNV09YSx0fX1Lcy5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTEyLEppKEtzLFwiU3RydWN0QXJyYXlMYXlvdXQ2aTEyXCIpO2NsYXNzIFhzIGV4dGVuZHMgRnN7X3JlZnJlc2hWaWV3cygpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5pbnQxNj1uZXcgSW50MTZBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQxNj1uZXcgVWludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fWVtcGxhY2VCYWNrKHQsZSxyLG4saSxzLGEsbyxsLHUsYyxoKXtjb25zdCBwPXRoaXMubGVuZ3RoO3JldHVybiB0aGlzLnJlc2l6ZShwKzEpLHRoaXMuZW1wbGFjZShwLHQsZSxyLG4saSxzLGEsbyxsLHUsYyxoKX1lbXBsYWNlKHQsZSxyLG4saSxzLGEsbyxsLHUsYyxoLHApe2NvbnN0IGQ9MTIqdDtyZXR1cm4gdGhpcy5pbnQxNltkKzBdPWUsdGhpcy5pbnQxNltkKzFdPXIsdGhpcy5pbnQxNltkKzJdPW4sdGhpcy5pbnQxNltkKzNdPWksdGhpcy51aW50MTZbZCs0XT1zLHRoaXMudWludDE2W2QrNV09YSx0aGlzLnVpbnQxNltkKzZdPW8sdGhpcy51aW50MTZbZCs3XT1sLHRoaXMuaW50MTZbZCs4XT11LHRoaXMuaW50MTZbZCs5XT1jLHRoaXMuaW50MTZbZCsxMF09aCx0aGlzLmludDE2W2QrMTFdPXAsdH19WHMucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0yNCxKaShYcyxcIlN0cnVjdEFycmF5TGF5b3V0NGk0dWk0aTI0XCIpO2NsYXNzIEpzIGV4dGVuZHMgRnN7X3JlZnJlc2hWaWV3cygpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5pbnQxNj1uZXcgSW50MTZBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9ZW1wbGFjZUJhY2sodCxlLHIsbixpLHMpe2NvbnN0IGE9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKGErMSksdGhpcy5lbXBsYWNlKGEsdCxlLHIsbixpLHMpfWVtcGxhY2UodCxlLHIsbixpLHMsYSl7Y29uc3Qgbz0xMCp0LGw9NSp0O3JldHVybiB0aGlzLmludDE2W28rMF09ZSx0aGlzLmludDE2W28rMV09cix0aGlzLmludDE2W28rMl09bix0aGlzLmZsb2F0MzJbbCsyXT1pLHRoaXMuZmxvYXQzMltsKzNdPXMsdGhpcy5mbG9hdDMyW2wrNF09YSx0fX1Kcy5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTIwLEppKEpzLFwiU3RydWN0QXJyYXlMYXlvdXQzaTNmMjBcIik7Y2xhc3MgSHMgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQzMj1uZXcgVWludDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fWVtcGxhY2VCYWNrKHQpe2NvbnN0IGU9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKGUrMSksdGhpcy5lbXBsYWNlKGUsdCl9ZW1wbGFjZSh0LGUpe3JldHVybiB0aGlzLnVpbnQzMlsxKnQrMF09ZSx0fX1Icy5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTQsSmkoSHMsXCJTdHJ1Y3RBcnJheUxheW91dDF1bDRcIik7Y2xhc3MgWXMgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuZmxvYXQzMj1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMudWludDMyPW5ldyBVaW50MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQxNj1uZXcgVWludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fWVtcGxhY2VCYWNrKHQsZSxyLG4saSxzLGEsbyxsLHUsYyxoLHApe2NvbnN0IGQ9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKGQrMSksdGhpcy5lbXBsYWNlKGQsdCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCl9ZW1wbGFjZSh0LGUscixuLGkscyxhLG8sbCx1LGMsaCxwLGQpe2NvbnN0IGY9MjAqdCx5PTEwKnQ7cmV0dXJuIHRoaXMuaW50MTZbZiswXT1lLHRoaXMuaW50MTZbZisxXT1yLHRoaXMuaW50MTZbZisyXT1uLHRoaXMuaW50MTZbZiszXT1pLHRoaXMuaW50MTZbZis0XT1zLHRoaXMuZmxvYXQzMlt5KzNdPWEsdGhpcy5mbG9hdDMyW3krNF09byx0aGlzLmZsb2F0MzJbeSs1XT1sLHRoaXMuZmxvYXQzMlt5KzZdPXUsdGhpcy5pbnQxNltmKzE0XT1jLHRoaXMudWludDMyW3krOF09aCx0aGlzLnVpbnQxNltmKzE4XT1wLHRoaXMudWludDE2W2YrMTldPWQsdH19WXMucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD00MCxKaShZcyxcIlN0cnVjdEFycmF5TGF5b3V0NWk0ZjFpMXVsMnVpNDBcIik7Y2xhc3MgV3MgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuLGkscyxhKXtjb25zdCBvPXRoaXMubGVuZ3RoO3JldHVybiB0aGlzLnJlc2l6ZShvKzEpLHRoaXMuZW1wbGFjZShvLHQsZSxyLG4saSxzLGEpfWVtcGxhY2UodCxlLHIsbixpLHMsYSxvKXtjb25zdCBsPTgqdDtyZXR1cm4gdGhpcy5pbnQxNltsKzBdPWUsdGhpcy5pbnQxNltsKzFdPXIsdGhpcy5pbnQxNltsKzJdPW4sdGhpcy5pbnQxNltsKzRdPWksdGhpcy5pbnQxNltsKzVdPXMsdGhpcy5pbnQxNltsKzZdPWEsdGhpcy5pbnQxNltsKzddPW8sdH19V3MucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0xNixKaShXcyxcIlN0cnVjdEFycmF5TGF5b3V0M2kyaTJpMTZcIik7Y2xhc3MgUXMgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmludDE2PW5ldyBJbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuLGkpe2NvbnN0IHM9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKHMrMSksdGhpcy5lbXBsYWNlKHMsdCxlLHIsbixpKX1lbXBsYWNlKHQsZSxyLG4saSxzKXtjb25zdCBhPTQqdCxvPTgqdDtyZXR1cm4gdGhpcy5mbG9hdDMyW2ErMF09ZSx0aGlzLmZsb2F0MzJbYSsxXT1yLHRoaXMuZmxvYXQzMlthKzJdPW4sdGhpcy5pbnQxNltvKzZdPWksdGhpcy5pbnQxNltvKzddPXMsdH19UXMucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0xNixKaShRcyxcIlN0cnVjdEFycmF5TGF5b3V0MmYxZjJpMTZcIik7Y2xhc3MgdGEgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9ZW1wbGFjZUJhY2sodCxlLHIsbil7Y29uc3QgaT10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUoaSsxKSx0aGlzLmVtcGxhY2UoaSx0LGUscixuKX1lbXBsYWNlKHQsZSxyLG4saSl7Y29uc3Qgcz0xMip0LGE9Myp0O3JldHVybiB0aGlzLnVpbnQ4W3MrMF09ZSx0aGlzLnVpbnQ4W3MrMV09cix0aGlzLmZsb2F0MzJbYSsxXT1uLHRoaXMuZmxvYXQzMlthKzJdPWksdH19dGEucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0xMixKaSh0YSxcIlN0cnVjdEFycmF5TGF5b3V0MnViMmYxMlwiKTtjbGFzcyBlYSBleHRlbmRzIEZze19yZWZyZXNoVmlld3MoKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuZmxvYXQzMj1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscil7Y29uc3Qgbj10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUobisxKSx0aGlzLmVtcGxhY2Uobix0LGUscil9ZW1wbGFjZSh0LGUscixuKXtjb25zdCBpPTMqdDtyZXR1cm4gdGhpcy5mbG9hdDMyW2krMF09ZSx0aGlzLmZsb2F0MzJbaSsxXT1yLHRoaXMuZmxvYXQzMltpKzJdPW4sdH19ZWEucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0xMixKaShlYSxcIlN0cnVjdEFycmF5TGF5b3V0M2YxMlwiKTtjbGFzcyByYSBleHRlbmRzIEZze19yZWZyZXNoVmlld3MoKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMudWludDE2PW5ldyBVaW50MTZBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9ZW1wbGFjZUJhY2sodCxlLHIpe2NvbnN0IG49dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKG4rMSksdGhpcy5lbXBsYWNlKG4sdCxlLHIpfWVtcGxhY2UodCxlLHIsbil7Y29uc3QgaT0zKnQ7cmV0dXJuIHRoaXMudWludDE2W2krMF09ZSx0aGlzLnVpbnQxNltpKzFdPXIsdGhpcy51aW50MTZbaSsyXT1uLHR9fXJhLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9NixKaShyYSxcIlN0cnVjdEFycmF5TGF5b3V0M3VpNlwiKTtjbGFzcyBuYSBleHRlbmRzIEZze19yZWZyZXNoVmlld3MoKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuaW50MTY9bmV3IEludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5mbG9hdDMyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MTY9bmV3IFVpbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMudWludDMyPW5ldyBVaW50MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9ZW1wbGFjZUJhY2sodCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCxkLGYseSxtLGcseCx2LGIpe2NvbnN0IHc9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKHcrMSksdGhpcy5lbXBsYWNlKHcsdCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCxkLGYseSxtLGcseCx2LGIpfWVtcGxhY2UodCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCxkLGYseSxtLGcseCx2LGIsdyl7Y29uc3QgXz0zMCp0LEE9MTUqdCxTPTYwKnQ7cmV0dXJuIHRoaXMuaW50MTZbXyswXT1lLHRoaXMuaW50MTZbXysxXT1yLHRoaXMuaW50MTZbXysyXT1uLHRoaXMuZmxvYXQzMltBKzJdPWksdGhpcy5mbG9hdDMyW0ErM109cyx0aGlzLnVpbnQxNltfKzhdPWEsdGhpcy51aW50MTZbXys5XT1vLHRoaXMudWludDMyW0ErNV09bCx0aGlzLnVpbnQzMltBKzZdPXUsdGhpcy51aW50MzJbQSs3XT1jLHRoaXMudWludDE2W18rMTZdPWgsdGhpcy51aW50MTZbXysxN109cCx0aGlzLnVpbnQxNltfKzE4XT1kLHRoaXMuZmxvYXQzMltBKzEwXT1mLHRoaXMuZmxvYXQzMltBKzExXT15LHRoaXMudWludDhbUys0OF09bSx0aGlzLnVpbnQ4W1MrNDldPWcsdGhpcy51aW50OFtTKzUwXT14LHRoaXMudWludDMyW0ErMTNdPXYsdGhpcy5pbnQxNltfKzI4XT1iLHRoaXMudWludDhbUys1OF09dyx0fX1uYS5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTYwLEppKG5hLFwiU3RydWN0QXJyYXlMYXlvdXQzaTJmMnVpM3VsM3VpMmYzdWIxdWwxaTF1YjYwXCIpO2NsYXNzIGlhIGV4dGVuZHMgRnN7X3JlZnJlc2hWaWV3cygpe3RoaXMudWludDg9bmV3IFVpbnQ4QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy5pbnQxNj1uZXcgSW50MTZBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQxNj1uZXcgVWludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MzI9bmV3IFVpbnQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuLGkscyxhLG8sbCx1LGMsaCxwLGQsZix5LG0sZyx4LHYsYix3LF8sQSxTLGssSSxNLFQseil7Y29uc3QgQj10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUoQisxKSx0aGlzLmVtcGxhY2UoQix0LGUscixuLGkscyxhLG8sbCx1LGMsaCxwLGQsZix5LG0sZyx4LHYsYix3LF8sQSxTLGssSSxNLFQseil9ZW1wbGFjZSh0LGUscixuLGkscyxhLG8sbCx1LGMsaCxwLGQsZix5LG0sZyx4LHYsYix3LF8sQSxTLGssSSxNLFQseixCKXtjb25zdCBFPTM4KnQsQz0xOSp0O3JldHVybiB0aGlzLmludDE2W0UrMF09ZSx0aGlzLmludDE2W0UrMV09cix0aGlzLmludDE2W0UrMl09bix0aGlzLmZsb2F0MzJbQysyXT1pLHRoaXMuZmxvYXQzMltDKzNdPXMsdGhpcy5pbnQxNltFKzhdPWEsdGhpcy5pbnQxNltFKzldPW8sdGhpcy5pbnQxNltFKzEwXT1sLHRoaXMuaW50MTZbRSsxMV09dSx0aGlzLmludDE2W0UrMTJdPWMsdGhpcy5pbnQxNltFKzEzXT1oLHRoaXMudWludDE2W0UrMTRdPXAsdGhpcy51aW50MTZbRSsxNV09ZCx0aGlzLnVpbnQxNltFKzE2XT1mLHRoaXMudWludDE2W0UrMTddPXksdGhpcy51aW50MTZbRSsxOF09bSx0aGlzLnVpbnQxNltFKzE5XT1nLHRoaXMudWludDE2W0UrMjBdPXgsdGhpcy51aW50MTZbRSsyMV09dix0aGlzLnVpbnQxNltFKzIyXT1iLHRoaXMudWludDE2W0UrMjNdPXcsdGhpcy51aW50MTZbRSsyNF09Xyx0aGlzLnVpbnQxNltFKzI1XT1BLHRoaXMudWludDE2W0UrMjZdPVMsdGhpcy51aW50MTZbRSsyN109ayx0aGlzLnVpbnQxNltFKzI4XT1JLHRoaXMudWludDMyW0MrMTVdPU0sdGhpcy5mbG9hdDMyW0MrMTZdPVQsdGhpcy5mbG9hdDMyW0MrMTddPXosdGhpcy5mbG9hdDMyW0MrMThdPUIsdH19aWEucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD03NixKaShpYSxcIlN0cnVjdEFycmF5TGF5b3V0M2kyZjZpMTV1aTF1bDNmNzZcIik7Y2xhc3Mgc2EgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLmZsb2F0MzI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9ZW1wbGFjZUJhY2sodCl7Y29uc3QgZT10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUoZSsxKSx0aGlzLmVtcGxhY2UoZSx0KX1lbXBsYWNlKHQsZSl7cmV0dXJuIHRoaXMuZmxvYXQzMlsxKnQrMF09ZSx0fX1zYS5wcm90b3R5cGUuYnl0ZXNQZXJFbGVtZW50PTQsSmkoc2EsXCJTdHJ1Y3RBcnJheUxheW91dDFmNFwiKTtjbGFzcyBhYSBleHRlbmRzIEZze19yZWZyZXNoVmlld3MoKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuZmxvYXQzMj1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuLGkpe2NvbnN0IHM9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKHMrMSksdGhpcy5lbXBsYWNlKHMsdCxlLHIsbixpKX1lbXBsYWNlKHQsZSxyLG4saSxzKXtjb25zdCBhPTUqdDtyZXR1cm4gdGhpcy5mbG9hdDMyW2ErMF09ZSx0aGlzLmZsb2F0MzJbYSsxXT1yLHRoaXMuZmxvYXQzMlthKzJdPW4sdGhpcy5mbG9hdDMyW2ErM109aSx0aGlzLmZsb2F0MzJbYSs0XT1zLHR9fWFhLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9MjAsSmkoYWEsXCJTdHJ1Y3RBcnJheUxheW91dDVmMjBcIik7Y2xhc3Mgb2EgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQzMj1uZXcgVWludDMyQXJyYXkodGhpcy5hcnJheUJ1ZmZlciksdGhpcy51aW50MTY9bmV3IFVpbnQxNkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUscixuKXtjb25zdCBpPXRoaXMubGVuZ3RoO3JldHVybiB0aGlzLnJlc2l6ZShpKzEpLHRoaXMuZW1wbGFjZShpLHQsZSxyLG4pfWVtcGxhY2UodCxlLHIsbixpKXtjb25zdCBzPTYqdDtyZXR1cm4gdGhpcy51aW50MzJbMyp0KzBdPWUsdGhpcy51aW50MTZbcysyXT1yLHRoaXMudWludDE2W3MrM109bix0aGlzLnVpbnQxNltzKzRdPWksdH19b2EucHJvdG90eXBlLmJ5dGVzUGVyRWxlbWVudD0xMixKaShvYSxcIlN0cnVjdEFycmF5TGF5b3V0MXVsM3VpMTJcIik7Y2xhc3MgbGEgZXh0ZW5kcyBGc3tfcmVmcmVzaFZpZXdzKCl7dGhpcy51aW50OD1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5QnVmZmVyKSx0aGlzLnVpbnQxNj1uZXcgVWludDE2QXJyYXkodGhpcy5hcnJheUJ1ZmZlcik7fWVtcGxhY2VCYWNrKHQsZSl7Y29uc3Qgcj10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUocisxKSx0aGlzLmVtcGxhY2Uocix0LGUpfWVtcGxhY2UodCxlLHIpe2NvbnN0IG49Mip0O3JldHVybiB0aGlzLnVpbnQxNltuKzBdPWUsdGhpcy51aW50MTZbbisxXT1yLHR9fWxhLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9NCxKaShsYSxcIlN0cnVjdEFycmF5TGF5b3V0MnVpNFwiKTtjbGFzcyB1YSBleHRlbmRzIEZze19yZWZyZXNoVmlld3MoKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMudWludDE2PW5ldyBVaW50MTZBcnJheSh0aGlzLmFycmF5QnVmZmVyKTt9ZW1wbGFjZUJhY2sodCl7Y29uc3QgZT10aGlzLmxlbmd0aDtyZXR1cm4gdGhpcy5yZXNpemUoZSsxKSx0aGlzLmVtcGxhY2UoZSx0KX1lbXBsYWNlKHQsZSl7cmV0dXJuIHRoaXMudWludDE2WzEqdCswXT1lLHR9fXVhLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9MixKaSh1YSxcIlN0cnVjdEFycmF5TGF5b3V0MXVpMlwiKTtjbGFzcyBjYSBleHRlbmRzIEZze19yZWZyZXNoVmlld3MoKXt0aGlzLnVpbnQ4PW5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLHRoaXMuZmxvYXQzMj1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO31lbXBsYWNlQmFjayh0LGUpe2NvbnN0IHI9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMucmVzaXplKHIrMSksdGhpcy5lbXBsYWNlKHIsdCxlKX1lbXBsYWNlKHQsZSxyKXtjb25zdCBuPTIqdDtyZXR1cm4gdGhpcy5mbG9hdDMyW24rMF09ZSx0aGlzLmZsb2F0MzJbbisxXT1yLHR9fWNhLnByb3RvdHlwZS5ieXRlc1BlckVsZW1lbnQ9OCxKaShjYSxcIlN0cnVjdEFycmF5TGF5b3V0MmY4XCIpO2NsYXNzIGhhIGV4dGVuZHMgTHN7Z2V0IHByb2plY3RlZEFuY2hvclgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMiswXX1nZXQgcHJvamVjdGVkQW5jaG9yWSgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzFdfWdldCBwcm9qZWN0ZWRBbmNob3JaKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMl19Z2V0IHRpbGVBbmNob3JYKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrM119Z2V0IHRpbGVBbmNob3JZKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrNF19Z2V0IHgxKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCszXX1nZXQgeTEoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuZmxvYXQzMlt0aGlzLl9wb3M0KzRdfWdldCB4Migpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5mbG9hdDMyW3RoaXMuX3BvczQrNV19Z2V0IHkyKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCs2XX1nZXQgcGFkZGluZygpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzE0XX1nZXQgZmVhdHVyZUluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQzMlt0aGlzLl9wb3M0KzhdfWdldCBzb3VyY2VMYXllckluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzE4XX1nZXQgYnVja2V0SW5kZXgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMTldfX1oYS5wcm90b3R5cGUuc2l6ZT00MDtjbGFzcyBwYSBleHRlbmRzIFlze2dldCh0KXtyZXR1cm4gbmV3IGhhKHRoaXMsdCl9fUppKHBhLFwiQ29sbGlzaW9uQm94QXJyYXlcIik7Y2xhc3MgZGEgZXh0ZW5kcyBMc3tnZXQgcHJvamVjdGVkQW5jaG9yWCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzBdfWdldCBwcm9qZWN0ZWRBbmNob3JZKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMV19Z2V0IHByb2plY3RlZEFuY2hvclooKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisyXX1nZXQgdGlsZUFuY2hvclgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuZmxvYXQzMlt0aGlzLl9wb3M0KzJdfWdldCB0aWxlQW5jaG9yWSgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5mbG9hdDMyW3RoaXMuX3BvczQrM119Z2V0IGdseXBoU3RhcnRJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMis4XX1nZXQgbnVtR2x5cGhzKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzldfWdldCB2ZXJ0ZXhTdGFydEluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQzMlt0aGlzLl9wb3M0KzVdfWdldCBsaW5lU3RhcnRJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCs2XX1nZXQgbGluZUxlbmd0aCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCs3XX1nZXQgc2VnbWVudCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxNl19Z2V0IGxvd2VyU2l6ZSgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxN119Z2V0IHVwcGVyU2l6ZSgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxOF19Z2V0IGxpbmVPZmZzZXRYKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCsxMF19Z2V0IGxpbmVPZmZzZXRZKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCsxMV19Z2V0IHdyaXRpbmdNb2RlKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQ4W3RoaXMuX3BvczErNDhdfWdldCBwbGFjZWRPcmllbnRhdGlvbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50OFt0aGlzLl9wb3MxKzQ5XX1zZXQgcGxhY2VkT3JpZW50YXRpb24odCl7dGhpcy5fc3RydWN0QXJyYXkudWludDhbdGhpcy5fcG9zMSs0OV09dDt9Z2V0IGhpZGRlbigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50OFt0aGlzLl9wb3MxKzUwXX1zZXQgaGlkZGVuKHQpe3RoaXMuX3N0cnVjdEFycmF5LnVpbnQ4W3RoaXMuX3BvczErNTBdPXQ7fWdldCBjcm9zc1RpbGVJRCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCsxM119c2V0IGNyb3NzVGlsZUlEKHQpe3RoaXMuX3N0cnVjdEFycmF5LnVpbnQzMlt0aGlzLl9wb3M0KzEzXT10O31nZXQgYXNzb2NpYXRlZEljb25JbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzI4XX1nZXQgZmxpcFN0YXRlKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQ4W3RoaXMuX3BvczErNThdfXNldCBmbGlwU3RhdGUodCl7dGhpcy5fc3RydWN0QXJyYXkudWludDhbdGhpcy5fcG9zMSs1OF09dDt9fWRhLnByb3RvdHlwZS5zaXplPTYwO2NsYXNzIGZhIGV4dGVuZHMgbmF7Z2V0KHQpe3JldHVybiBuZXcgZGEodGhpcyx0KX19SmkoZmEsXCJQbGFjZWRTeW1ib2xBcnJheVwiKTtjbGFzcyB5YSBleHRlbmRzIExze2dldCBwcm9qZWN0ZWRBbmNob3JYKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMF19Z2V0IHByb2plY3RlZEFuY2hvclkoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisxXX1nZXQgcHJvamVjdGVkQW5jaG9yWigpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5pbnQxNlt0aGlzLl9wb3MyKzJdfWdldCB0aWxlQW5jaG9yWCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS5mbG9hdDMyW3RoaXMuX3BvczQrMl19Z2V0IHRpbGVBbmNob3JZKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCszXX1nZXQgcmlnaHRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMis4XX1nZXQgY2VudGVySnVzdGlmaWVkVGV4dFN5bWJvbEluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrOV19Z2V0IGxlZnRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisxMF19Z2V0IHZlcnRpY2FsUGxhY2VkVGV4dFN5bWJvbEluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMTFdfWdldCBwbGFjZWRJY29uU3ltYm9sSW5kZXgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkuaW50MTZbdGhpcy5fcG9zMisxMl19Z2V0IHZlcnRpY2FsUGxhY2VkSWNvblN5bWJvbEluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmludDE2W3RoaXMuX3BvczIrMTNdfWdldCBrZXkoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMTRdfWdldCB0ZXh0Qm94U3RhcnRJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxNV19Z2V0IHRleHRCb3hFbmRJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxNl19Z2V0IHZlcnRpY2FsVGV4dEJveFN0YXJ0SW5kZXgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMTddfWdldCB2ZXJ0aWNhbFRleHRCb3hFbmRJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisxOF19Z2V0IGljb25Cb3hTdGFydEluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzE5XX1nZXQgaWNvbkJveEVuZEluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzIwXX1nZXQgdmVydGljYWxJY29uQm94U3RhcnRJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisyMV19Z2V0IHZlcnRpY2FsSWNvbkJveEVuZEluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzIyXX1nZXQgZmVhdHVyZUluZGV4KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzIzXX1nZXQgbnVtSG9yaXpvbnRhbEdseXBoVmVydGljZXMoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMjRdfWdldCBudW1WZXJ0aWNhbEdseXBoVmVydGljZXMoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMjVdfWdldCBudW1JY29uVmVydGljZXMoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrMjZdfWdldCBudW1WZXJ0aWNhbEljb25WZXJ0aWNlcygpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisyN119Z2V0IHVzZVJ1bnRpbWVDb2xsaXNpb25DaXJjbGVzKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzI4XX1nZXQgY3Jvc3NUaWxlSUQoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDMyW3RoaXMuX3BvczQrMTVdfXNldCBjcm9zc1RpbGVJRCh0KXt0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCsxNV09dDt9Z2V0IHRleHRPZmZzZXQwKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCsxNl19Z2V0IHRleHRPZmZzZXQxKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCsxN119Z2V0IGNvbGxpc2lvbkNpcmNsZURpYW1ldGVyKCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LmZsb2F0MzJbdGhpcy5fcG9zNCsxOF19fXlhLnByb3RvdHlwZS5zaXplPTc2O2NsYXNzIG1hIGV4dGVuZHMgaWF7Z2V0KHQpe3JldHVybiBuZXcgeWEodGhpcyx0KX19SmkobWEsXCJTeW1ib2xJbnN0YW5jZUFycmF5XCIpO2NsYXNzIGdhIGV4dGVuZHMgc2F7Z2V0b2Zmc2V0WCh0KXtyZXR1cm4gdGhpcy5mbG9hdDMyWzEqdCswXX19SmkoZ2EsXCJHbHlwaE9mZnNldEFycmF5XCIpO2NsYXNzIHhhIGV4dGVuZHMgJHN7Z2V0eCh0KXtyZXR1cm4gdGhpcy5pbnQxNlsyKnQrMF19Z2V0eSh0KXtyZXR1cm4gdGhpcy5pbnQxNlsyKnQrMV19fUppKHhhLFwiU3ltYm9sTGluZVZlcnRleEFycmF5XCIpO2NsYXNzIHZhIGV4dGVuZHMgTHN7Z2V0IGZlYXR1cmVJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MzJbdGhpcy5fcG9zNCswXX1nZXQgc291cmNlTGF5ZXJJbmRleCgpe3JldHVybiB0aGlzLl9zdHJ1Y3RBcnJheS51aW50MTZbdGhpcy5fcG9zMisyXX1nZXQgYnVja2V0SW5kZXgoKXtyZXR1cm4gdGhpcy5fc3RydWN0QXJyYXkudWludDE2W3RoaXMuX3BvczIrM119Z2V0IGxheW91dFZlcnRleEFycmF5T2Zmc2V0KCl7cmV0dXJuIHRoaXMuX3N0cnVjdEFycmF5LnVpbnQxNlt0aGlzLl9wb3MyKzRdfX12YS5wcm90b3R5cGUuc2l6ZT0xMjtjbGFzcyBiYSBleHRlbmRzIG9he2dldCh0KXtyZXR1cm4gbmV3IHZhKHRoaXMsdCl9fUppKGJhLFwiRmVhdHVyZUluZGV4QXJyYXlcIik7Y2xhc3Mgd2EgZXh0ZW5kcyBsYXtnZXRhX2NlbnRyb2lkX3BvczAodCl7cmV0dXJuIHRoaXMudWludDE2WzIqdCswXX1nZXRhX2NlbnRyb2lkX3BvczEodCl7cmV0dXJuIHRoaXMudWludDE2WzIqdCsxXX19Smkod2EsXCJGaWxsRXh0cnVzaW9uQ2VudHJvaWRBcnJheVwiKTtjb25zdCBfYT1Scyhbe25hbWU6XCJhX3BhdHRlcm5cIixjb21wb25lbnRzOjQsdHlwZTpcIlVpbnQxNlwifSx7bmFtZTpcImFfcGl4ZWxfcmF0aW9cIixjb21wb25lbnRzOjEsdHlwZTpcIkZsb2F0MzJcIn1dKSxBYT1Scyhbe25hbWU6XCJhX2Rhc2hcIixjb21wb25lbnRzOjQsdHlwZTpcIlVpbnQxNlwifV0pO3ZhciBTYT17ZXhwb3J0czp7fX0sa2E9e2V4cG9ydHM6e319O2thLmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGkscyxhLG8sbCx1O2ZvcihuPXQubGVuZ3RoLShyPTMmdC5sZW5ndGgpLGk9ZSxhPTM0MzI5MTgzNTMsbz00NjE4NDU5MDcsdT0wO3U8bjspbD0yNTUmdC5jaGFyQ29kZUF0KHUpfCgyNTUmdC5jaGFyQ29kZUF0KCsrdSkpPDw4fCgyNTUmdC5jaGFyQ29kZUF0KCsrdSkpPDwxNnwoMjU1JnQuY2hhckNvZGVBdCgrK3UpKTw8MjQsKyt1LGk9Mjc0OTIrKDY1NTM1JihzPTUqKDY1NTM1JihpPShpXj1sPSg2NTUzNSYobD0obD0oNjU1MzUmbCkqYSsoKChsPj4+MTYpKmEmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSk8PDE1fGw+Pj4xNykpKm8rKCgobD4+PjE2KSpvJjY1NTM1KTw8MTYpJjQyOTQ5NjcyOTUpPDwxM3xpPj4+MTkpKSsoKDUqKGk+Pj4xNikmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSkpKygoNTg5NjQrKHM+Pj4xNikmNjU1MzUpPDwxNik7c3dpdGNoKGw9MCxyKXtjYXNlIDM6bF49KDI1NSZ0LmNoYXJDb2RlQXQodSsyKSk8PDE2O2Nhc2UgMjpsXj0oMjU1JnQuY2hhckNvZGVBdCh1KzEpKTw8ODtjYXNlIDE6aV49bD0oNjU1MzUmKGw9KGw9KDY1NTM1JihsXj0yNTUmdC5jaGFyQ29kZUF0KHUpKSkqYSsoKChsPj4+MTYpKmEmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSk8PDE1fGw+Pj4xNykpKm8rKCgobD4+PjE2KSpvJjY1NTM1KTw8MTYpJjQyOTQ5NjcyOTU7fXJldHVybiBpXj10Lmxlbmd0aCxpPTIyNDY4MjI1MDcqKDY1NTM1JihpXj1pPj4+MTYpKSsoKDIyNDY4MjI1MDcqKGk+Pj4xNikmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxpPTMyNjY0ODk5MDkqKDY1NTM1JihpXj1pPj4+MTMpKSsoKDMyNjY0ODk5MDkqKGk+Pj4xNikmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSwoaV49aT4+PjE2KT4+PjB9O3ZhciBJYT1rYS5leHBvcnRzLE1hPXtleHBvcnRzOnt9fTtNYS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByLG49dC5sZW5ndGgsaT1lXm4scz0wO24+PTQ7KXI9MTU0MDQ4MzQ3NyooNjU1MzUmKHI9MjU1JnQuY2hhckNvZGVBdChzKXwoMjU1JnQuY2hhckNvZGVBdCgrK3MpKTw8OHwoMjU1JnQuY2hhckNvZGVBdCgrK3MpKTw8MTZ8KDI1NSZ0LmNoYXJDb2RlQXQoKytzKSk8PDI0KSkrKCgxNTQwNDgzNDc3KihyPj4+MTYpJjY1NTM1KTw8MTYpLGk9MTU0MDQ4MzQ3NyooNjU1MzUmaSkrKCgxNTQwNDgzNDc3KihpPj4+MTYpJjY1NTM1KTw8MTYpXihyPTE1NDA0ODM0NzcqKDY1NTM1JihyXj1yPj4+MjQpKSsoKDE1NDA0ODM0NzcqKHI+Pj4xNikmNjU1MzUpPDwxNikpLG4tPTQsKytzO3N3aXRjaChuKXtjYXNlIDM6aV49KDI1NSZ0LmNoYXJDb2RlQXQocysyKSk8PDE2O2Nhc2UgMjppXj0oMjU1JnQuY2hhckNvZGVBdChzKzEpKTw8ODtjYXNlIDE6aT0xNTQwNDgzNDc3Kig2NTUzNSYoaV49MjU1JnQuY2hhckNvZGVBdChzKSkpKygoMTU0MDQ4MzQ3NyooaT4+PjE2KSY2NTUzNSk8PDE2KTt9cmV0dXJuIGk9MTU0MDQ4MzQ3NyooNjU1MzUmKGlePWk+Pj4xMykpKygoMTU0MDQ4MzQ3NyooaT4+PjE2KSY2NTUzNSk8PDE2KSwoaV49aT4+PjE1KT4+PjB9O3ZhciBUYT1JYSx6YT1NYS5leHBvcnRzO1NhLmV4cG9ydHM9VGEsU2EuZXhwb3J0cy5tdXJtdXIzPVRhLFNhLmV4cG9ydHMubXVybXVyMj16YTt2YXIgQmE9cChTYS5leHBvcnRzKTtjbGFzcyBFYXtjb25zdHJ1Y3Rvcigpe3RoaXMuaWRzPVtdLHRoaXMucG9zaXRpb25zPVtdLHRoaXMuaW5kZXhlZD0hMTt9YWRkKHQsZSxyLG4pe3RoaXMuaWRzLnB1c2goQ2EodCkpLHRoaXMucG9zaXRpb25zLnB1c2goZSxyLG4pO31nZXRQb3NpdGlvbnModCl7Y29uc3QgZT1DYSh0KTtsZXQgcj0wLG49dGhpcy5pZHMubGVuZ3RoLTE7Zm9yKDtyPG47KXtjb25zdCB0PXIrbj4+MTt0aGlzLmlkc1t0XT49ZT9uPXQ6cj10KzE7fWNvbnN0IGk9W107Zm9yKDt0aGlzLmlkc1tyXT09PWU7KWkucHVzaCh7aW5kZXg6dGhpcy5wb3NpdGlvbnNbMypyXSxzdGFydDp0aGlzLnBvc2l0aW9uc1szKnIrMV0sZW5kOnRoaXMucG9zaXRpb25zWzMqcisyXX0pLHIrKztyZXR1cm4gaX1zdGF0aWMgc2VyaWFsaXplKHQsZSl7Y29uc3Qgcj1uZXcgRmxvYXQ2NEFycmF5KHQuaWRzKSxuPW5ldyBVaW50MzJBcnJheSh0LnBvc2l0aW9ucyk7cmV0dXJuIFBhKHIsbiwwLHIubGVuZ3RoLTEpLGUmJmUucHVzaChyLmJ1ZmZlcixuLmJ1ZmZlcikse2lkczpyLHBvc2l0aW9uczpufX1zdGF0aWMgZGVzZXJpYWxpemUodCl7Y29uc3QgZT1uZXcgRWE7cmV0dXJuIGUuaWRzPXQuaWRzLGUucG9zaXRpb25zPXQucG9zaXRpb25zLGUuaW5kZXhlZD0hMCxlfX1mdW5jdGlvbiBDYSh0KXtjb25zdCBlPSt0O3JldHVybiAhaXNOYU4oZSkmJk51bWJlci5NSU5fU0FGRV9JTlRFR0VSPD1lJiZlPD1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUj9lOkJhKFN0cmluZyh0KSl9ZnVuY3Rpb24gUGEodCxlLHIsbil7Zm9yKDtyPG47KXtjb25zdCBpPXRbcituPj4xXTtsZXQgcz1yLTEsYT1uKzE7Zm9yKDs7KXtkb3tzKys7fXdoaWxlKHRbc108aSk7ZG97YS0tO313aGlsZSh0W2FdPmkpO2lmKHM+PWEpYnJlYWs7RGEodCxzLGEpLERhKGUsMypzLDMqYSksRGEoZSwzKnMrMSwzKmErMSksRGEoZSwzKnMrMiwzKmErMik7fWEtcjxuLWE/KFBhKHQsZSxyLGEpLHI9YSsxKTooUGEodCxlLGErMSxuKSxuPWEpO319ZnVuY3Rpb24gRGEodCxlLHIpe2NvbnN0IG49dFtlXTt0W2VdPXRbcl0sdFtyXT1uO31KaShFYSxcIkZlYXR1cmVQb3NpdGlvbk1hcFwiKTtjbGFzcyBWYXtjb25zdHJ1Y3Rvcih0KXt0aGlzLmdsPXQuZ2wsdGhpcy5pbml0aWFsaXplZD0hMTt9ZmV0Y2hVbmlmb3JtTG9jYXRpb24odCxlKXtyZXR1cm4gdGhpcy5sb2NhdGlvbnx8dGhpcy5pbml0aWFsaXplZHx8KHRoaXMubG9jYXRpb249dGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odCxlKSx0aGlzLmluaXRpYWxpemVkPSEwKSwhIXRoaXMubG9jYXRpb259fWNsYXNzIExhIGV4dGVuZHMgVmF7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5jdXJyZW50PTA7fXNldCh0LGUscil7dGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpJiZ0aGlzLmN1cnJlbnQhPT1yJiYodGhpcy5jdXJyZW50PXIsdGhpcy5nbC51bmlmb3JtMWYodGhpcy5sb2NhdGlvbixyKSk7fX1jbGFzcyBGYSBleHRlbmRzIFZhe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuY3VycmVudD1bMCwwLDAsMF07fXNldCh0LGUscil7dGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpJiYoclswXT09PXRoaXMuY3VycmVudFswXSYmclsxXT09PXRoaXMuY3VycmVudFsxXSYmclsyXT09PXRoaXMuY3VycmVudFsyXSYmclszXT09PXRoaXMuY3VycmVudFszXXx8KHRoaXMuY3VycmVudD1yLHRoaXMuZ2wudW5pZm9ybTRmKHRoaXMubG9jYXRpb24sclswXSxyWzFdLHJbMl0sclszXSkpKTt9fWNsYXNzIFJhIGV4dGVuZHMgVmF7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5jdXJyZW50PUVlLnRyYW5zcGFyZW50O31zZXQodCxlLHIpe3RoaXMuZmV0Y2hVbmlmb3JtTG9jYXRpb24odCxlKSYmKHIucj09PXRoaXMuY3VycmVudC5yJiZyLmc9PT10aGlzLmN1cnJlbnQuZyYmci5iPT09dGhpcy5jdXJyZW50LmImJnIuYT09PXRoaXMuY3VycmVudC5hfHwodGhpcy5jdXJyZW50PXIsdGhpcy5nbC51bmlmb3JtNGYodGhpcy5sb2NhdGlvbixyLnIsci5nLHIuYixyLmEpKSk7fX1jb25zdCBVYT1uZXcgRmxvYXQzMkFycmF5KDE2KSwkYT1uZXcgRmxvYXQzMkFycmF5KDkpLGphPW5ldyBGbG9hdDMyQXJyYXkoNCk7ZnVuY3Rpb24gT2EodCl7cmV0dXJuIFtEcygyNTUqdC5yLDI1NSp0LmcpLERzKDI1NSp0LmIsMjU1KnQuYSldfWNsYXNzIHFhe2NvbnN0cnVjdG9yKHQsZSxyKXt0aGlzLnZhbHVlPXQsdGhpcy51bmlmb3JtTmFtZXM9ZS5tYXAoKHQ9PmB1XyR7dH1gKSksdGhpcy50eXBlPXI7fXNldFVuaWZvcm0odCxlLHIsbixpKXtlLnNldCh0LGksbi5jb25zdGFudE9yKHRoaXMudmFsdWUpKTt9Z2V0QmluZGluZyh0LGUpe3JldHVybiBcImNvbG9yXCI9PT10aGlzLnR5cGU/bmV3IFJhKHQpOm5ldyBMYSh0KX19Y2xhc3MgTmF7Y29uc3RydWN0b3IodCxlKXt0aGlzLnVuaWZvcm1OYW1lcz1lLm1hcCgodD0+YHVfJHt0fWApKSx0aGlzLnBhdHRlcm49bnVsbCx0aGlzLnBpeGVsUmF0aW89MTt9c2V0Q29uc3RhbnRQYXR0ZXJuUG9zaXRpb25zKHQpe3RoaXMucGl4ZWxSYXRpbz10LnBpeGVsUmF0aW98fDEsdGhpcy5wYXR0ZXJuPXQudGwuY29uY2F0KHQuYnIpO31zZXRVbmlmb3JtKHQsZSxyLG4saSl7Y29uc3Qgcz1cInVfcGF0dGVyblwiPT09aXx8XCJ1X2Rhc2hcIj09PWk/dGhpcy5wYXR0ZXJuOlwidV9waXhlbF9yYXRpb1wiPT09aT90aGlzLnBpeGVsUmF0aW86bnVsbDtzJiZlLnNldCh0LGkscyk7fWdldEJpbmRpbmcodCxlKXtyZXR1cm4gXCJ1X3BhdHRlcm5cIj09PWV8fFwidV9kYXNoXCI9PT1lP25ldyBGYSh0KTpuZXcgTGEodCl9fWNsYXNzIEdhe2NvbnN0cnVjdG9yKHQsZSxyLG4pe3RoaXMuZXhwcmVzc2lvbj10LHRoaXMudHlwZT1yLHRoaXMubWF4VmFsdWU9MCx0aGlzLnBhaW50VmVydGV4QXR0cmlidXRlcz1lLm1hcCgodD0+KHtuYW1lOmBhXyR7dH1gLHR5cGU6XCJGbG9hdDMyXCIsY29tcG9uZW50czpcImNvbG9yXCI9PT1yPzI6MSxvZmZzZXQ6MH0pKSksdGhpcy5wYWludFZlcnRleEFycmF5PW5ldyBuO31wb3B1bGF0ZVBhaW50QXJyYXkodCxlLHIsbixpLHMpe2NvbnN0IGE9dGhpcy5wYWludFZlcnRleEFycmF5Lmxlbmd0aCxvPXRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZShuZXcgd3MoMCksZSx7fSxpLG4scyk7dGhpcy5wYWludFZlcnRleEFycmF5LnJlc2l6ZSh0KSx0aGlzLl9zZXRQYWludFZhbHVlKGEsdCxvKTt9dXBkYXRlUGFpbnRBcnJheSh0LGUscixuLGkpe2NvbnN0IHM9dGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHt6b29tOjB9LHIsbix2b2lkIDAsaSk7dGhpcy5fc2V0UGFpbnRWYWx1ZSh0LGUscyk7fV9zZXRQYWludFZhbHVlKHQsZSxyKXtpZihcImNvbG9yXCI9PT10aGlzLnR5cGUpe2NvbnN0IG49T2Eocik7Zm9yKGxldCByPXQ7cjxlO3IrKyl0aGlzLnBhaW50VmVydGV4QXJyYXkuZW1wbGFjZShyLG5bMF0sblsxXSk7fWVsc2Uge2ZvcihsZXQgbj10O248ZTtuKyspdGhpcy5wYWludFZlcnRleEFycmF5LmVtcGxhY2UobixyKTt0aGlzLm1heFZhbHVlPU1hdGgubWF4KHRoaXMubWF4VmFsdWUsTWF0aC5hYnMocikpO319dXBsb2FkKHQpe3RoaXMucGFpbnRWZXJ0ZXhBcnJheSYmdGhpcy5wYWludFZlcnRleEFycmF5LmFycmF5QnVmZmVyJiYodGhpcy5wYWludFZlcnRleEJ1ZmZlciYmdGhpcy5wYWludFZlcnRleEJ1ZmZlci5idWZmZXI/dGhpcy5wYWludFZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKHRoaXMucGFpbnRWZXJ0ZXhBcnJheSk6dGhpcy5wYWludFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLnBhaW50VmVydGV4QXJyYXksdGhpcy5wYWludFZlcnRleEF0dHJpYnV0ZXMsdGhpcy5leHByZXNzaW9uLmlzU3RhdGVEZXBlbmRlbnQpKTt9ZGVzdHJveSgpe3RoaXMucGFpbnRWZXJ0ZXhCdWZmZXImJnRoaXMucGFpbnRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpO319Y2xhc3MgWmF7Y29uc3RydWN0b3IodCxlLHIsbixpLHMpe3RoaXMuZXhwcmVzc2lvbj10LHRoaXMudW5pZm9ybU5hbWVzPWUubWFwKCh0PT5gdV8ke3R9X3RgKSksdGhpcy50eXBlPXIsdGhpcy51c2VJbnRlZ2VyWm9vbT1uLHRoaXMuem9vbT1pLHRoaXMubWF4VmFsdWU9MCx0aGlzLnBhaW50VmVydGV4QXR0cmlidXRlcz1lLm1hcCgodD0+KHtuYW1lOmBhXyR7dH1gLHR5cGU6XCJGbG9hdDMyXCIsY29tcG9uZW50czpcImNvbG9yXCI9PT1yPzQ6MixvZmZzZXQ6MH0pKSksdGhpcy5wYWludFZlcnRleEFycmF5PW5ldyBzO31wb3B1bGF0ZVBhaW50QXJyYXkodCxlLHIsbixpLHMpe2NvbnN0IGE9dGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKG5ldyB3cyh0aGlzLnpvb20pLGUse30saSxuLHMpLG89dGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKG5ldyB3cyh0aGlzLnpvb20rMSksZSx7fSxpLG4scyksbD10aGlzLnBhaW50VmVydGV4QXJyYXkubGVuZ3RoO3RoaXMucGFpbnRWZXJ0ZXhBcnJheS5yZXNpemUodCksdGhpcy5fc2V0UGFpbnRWYWx1ZShsLHQsYSxvKTt9dXBkYXRlUGFpbnRBcnJheSh0LGUscixuLGkpe2NvbnN0IHM9dGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHt6b29tOnRoaXMuem9vbX0scixuLHZvaWQgMCxpKSxhPXRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSh7em9vbTp0aGlzLnpvb20rMX0scixuLHZvaWQgMCxpKTt0aGlzLl9zZXRQYWludFZhbHVlKHQsZSxzLGEpO31fc2V0UGFpbnRWYWx1ZSh0LGUscixuKXtpZihcImNvbG9yXCI9PT10aGlzLnR5cGUpe2NvbnN0IGk9T2Eocikscz1PYShuKTtmb3IobGV0IHI9dDtyPGU7cisrKXRoaXMucGFpbnRWZXJ0ZXhBcnJheS5lbXBsYWNlKHIsaVswXSxpWzFdLHNbMF0sc1sxXSk7fWVsc2Uge2ZvcihsZXQgaT10O2k8ZTtpKyspdGhpcy5wYWludFZlcnRleEFycmF5LmVtcGxhY2UoaSxyLG4pO3RoaXMubWF4VmFsdWU9TWF0aC5tYXgodGhpcy5tYXhWYWx1ZSxNYXRoLmFicyhyKSxNYXRoLmFicyhuKSk7fX11cGxvYWQodCl7dGhpcy5wYWludFZlcnRleEFycmF5JiZ0aGlzLnBhaW50VmVydGV4QXJyYXkuYXJyYXlCdWZmZXImJih0aGlzLnBhaW50VmVydGV4QnVmZmVyJiZ0aGlzLnBhaW50VmVydGV4QnVmZmVyLmJ1ZmZlcj90aGlzLnBhaW50VmVydGV4QnVmZmVyLnVwZGF0ZURhdGEodGhpcy5wYWludFZlcnRleEFycmF5KTp0aGlzLnBhaW50VmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMucGFpbnRWZXJ0ZXhBcnJheSx0aGlzLnBhaW50VmVydGV4QXR0cmlidXRlcyx0aGlzLmV4cHJlc3Npb24uaXNTdGF0ZURlcGVuZGVudCkpO31kZXN0cm95KCl7dGhpcy5wYWludFZlcnRleEJ1ZmZlciYmdGhpcy5wYWludFZlcnRleEJ1ZmZlci5kZXN0cm95KCk7fXNldFVuaWZvcm0odCxlLHIsbixpKXtjb25zdCBzPXRoaXMudXNlSW50ZWdlclpvb20/TWF0aC5mbG9vcihyLnpvb20pOnIuem9vbSxhPU0odGhpcy5leHByZXNzaW9uLmludGVycG9sYXRpb25GYWN0b3Iocyx0aGlzLnpvb20sdGhpcy56b29tKzEpLDAsMSk7ZS5zZXQodCxpLGEpO31nZXRCaW5kaW5nKHQsZSl7cmV0dXJuIG5ldyBMYSh0KX19Y2xhc3MgS2F7Y29uc3RydWN0b3IodCxlLHIsbixpKXt0aGlzLmV4cHJlc3Npb249dCx0aGlzLmxheWVySWQ9aSx0aGlzLnBhaW50VmVydGV4QXR0cmlidXRlcz0oXCJhcnJheVwiPT09cj9BYTpfYSkubWVtYmVycztmb3IobGV0IHQ9MDt0PGUubGVuZ3RoOysrdCk7dGhpcy5wYWludFZlcnRleEFycmF5PW5ldyBuO31wb3B1bGF0ZVBhaW50QXJyYXkodCxlLHIpe2NvbnN0IG49dGhpcy5wYWludFZlcnRleEFycmF5Lmxlbmd0aDt0aGlzLnBhaW50VmVydGV4QXJyYXkucmVzaXplKHQpLHRoaXMuX3NldFBhaW50VmFsdWVzKG4sdCxlLnBhdHRlcm5zJiZlLnBhdHRlcm5zW3RoaXMubGF5ZXJJZF0scik7fXVwZGF0ZVBhaW50QXJyYXkodCxlLHIsbixpLHMpe3RoaXMuX3NldFBhaW50VmFsdWVzKHQsZSxyLnBhdHRlcm5zJiZyLnBhdHRlcm5zW3RoaXMubGF5ZXJJZF0scyk7fV9zZXRQYWludFZhbHVlcyh0LGUscixuKXtpZighbnx8IXIpcmV0dXJuO2NvbnN0IGk9bltyXTtpZighaSlyZXR1cm47Y29uc3R7dGw6cyxicjphLHBpeGVsUmF0aW86b309aTtmb3IobGV0IHI9dDtyPGU7cisrKXRoaXMucGFpbnRWZXJ0ZXhBcnJheS5lbXBsYWNlKHIsc1swXSxzWzFdLGFbMF0sYVsxXSxvKTt9dXBsb2FkKHQpe3RoaXMucGFpbnRWZXJ0ZXhBcnJheSYmdGhpcy5wYWludFZlcnRleEFycmF5LmFycmF5QnVmZmVyJiYodGhpcy5wYWludFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLnBhaW50VmVydGV4QXJyYXksdGhpcy5wYWludFZlcnRleEF0dHJpYnV0ZXMsdGhpcy5leHByZXNzaW9uLmlzU3RhdGVEZXBlbmRlbnQpKTt9ZGVzdHJveSgpe3RoaXMucGFpbnRWZXJ0ZXhCdWZmZXImJnRoaXMucGFpbnRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpO319Y2xhc3MgWGF7Y29uc3RydWN0b3IodCxlLHI9KCgpPT4hMCkpe3RoaXMuYmluZGVycz17fSx0aGlzLl9idWZmZXJzPVtdO2NvbnN0IG49W107Zm9yKGNvbnN0IGkgaW4gdC5wYWludC5fdmFsdWVzKXtpZighcihpKSljb250aW51ZTtjb25zdCBzPXQucGFpbnQuZ2V0KGkpO2lmKCEocyBpbnN0YW5jZW9mIFRzJiZMbihzLnByb3BlcnR5LnNwZWNpZmljYXRpb24pKSljb250aW51ZTtjb25zdCBhPVlhKGksdC50eXBlKSxvPXMudmFsdWUsbD1zLnByb3BlcnR5LnNwZWNpZmljYXRpb24udHlwZSx1PSEhcy5wcm9wZXJ0eS51c2VJbnRlZ2VyWm9vbSxjPVwibGluZS1kYXNoYXJyYXlcIj09PWl8fGkuZW5kc1dpdGgoXCJwYXR0ZXJuXCIpLGg9XCJsaW5lLWRhc2hhcnJheVwiPT09aSYmXCJjb25zdGFudFwiIT09dC5sYXlvdXQuZ2V0KFwibGluZS1jYXBcIikudmFsdWUua2luZDtpZihcImNvbnN0YW50XCIhPT1vLmtpbmR8fGgpaWYoXCJzb3VyY2VcIj09PW8ua2luZHx8aHx8Yyl7Y29uc3QgZT10byhpLGwsXCJzb3VyY2VcIik7dGhpcy5iaW5kZXJzW2ldPWM/bmV3IEthKG8sYSxsLGUsdC5pZCk6bmV3IEdhKG8sYSxsLGUpLG4ucHVzaChgL2FfJHtpfWApO31lbHNlIHtjb25zdCB0PXRvKGksbCxcImNvbXBvc2l0ZVwiKTt0aGlzLmJpbmRlcnNbaV09bmV3IFphKG8sYSxsLHUsZSx0KSxuLnB1c2goYC96XyR7aX1gKTt9ZWxzZSB0aGlzLmJpbmRlcnNbaV09Yz9uZXcgTmEoby52YWx1ZSxhKTpuZXcgcWEoby52YWx1ZSxhLGwpLG4ucHVzaChgL3VfJHtpfWApO310aGlzLmNhY2hlS2V5PW4uc29ydCgpLmpvaW4oXCJcIik7fWdldE1heFZhbHVlKHQpe2NvbnN0IGU9dGhpcy5iaW5kZXJzW3RdO3JldHVybiBlIGluc3RhbmNlb2YgR2F8fGUgaW5zdGFuY2VvZiBaYT9lLm1heFZhbHVlOjB9cG9wdWxhdGVQYWludEFycmF5cyh0LGUscixuLGkscyl7Zm9yKGNvbnN0IGEgaW4gdGhpcy5iaW5kZXJzKXtjb25zdCBvPXRoaXMuYmluZGVyc1thXTsobyBpbnN0YW5jZW9mIEdhfHxvIGluc3RhbmNlb2YgWmF8fG8gaW5zdGFuY2VvZiBLYSkmJm8ucG9wdWxhdGVQYWludEFycmF5KHQsZSxyLG4saSxzKTt9fXNldENvbnN0YW50UGF0dGVyblBvc2l0aW9ucyh0KXtmb3IoY29uc3QgZSBpbiB0aGlzLmJpbmRlcnMpe2NvbnN0IHI9dGhpcy5iaW5kZXJzW2VdO3IgaW5zdGFuY2VvZiBOYSYmci5zZXRDb25zdGFudFBhdHRlcm5Qb3NpdGlvbnModCk7fX11cGRhdGVQYWludEFycmF5cyh0LGUscixuLGkscyl7bGV0IGE9ITE7Zm9yKGNvbnN0IG8gaW4gdCl7Y29uc3QgbD1lLmdldFBvc2l0aW9ucyhvKTtmb3IoY29uc3QgZSBvZiBsKXtjb25zdCBsPXIuZmVhdHVyZShlLmluZGV4KTtmb3IoY29uc3QgciBpbiB0aGlzLmJpbmRlcnMpe2NvbnN0IHU9dGhpcy5iaW5kZXJzW3JdO2lmKCh1IGluc3RhbmNlb2YgR2F8fHUgaW5zdGFuY2VvZiBaYXx8dSBpbnN0YW5jZW9mIEthKSYmITA9PT11LmV4cHJlc3Npb24uaXNTdGF0ZURlcGVuZGVudCl7Y29uc3QgYz1uLnBhaW50LmdldChyKTt1LmV4cHJlc3Npb249Yy52YWx1ZSx1LnVwZGF0ZVBhaW50QXJyYXkoZS5zdGFydCxlLmVuZCxsLHRbb10saSxzKSxhPSEwO319fX1yZXR1cm4gYX1kZWZpbmVzKCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgZSBpbiB0aGlzLmJpbmRlcnMpe2NvbnN0IHI9dGhpcy5iaW5kZXJzW2VdOyhyIGluc3RhbmNlb2YgcWF8fHIgaW5zdGFuY2VvZiBOYSkmJnQucHVzaCguLi5yLnVuaWZvcm1OYW1lcy5tYXAoKHQ9PmAjZGVmaW5lIEhBU19VTklGT1JNXyR7dH1gKSkpO31yZXR1cm4gdH1nZXRCaW5kZXJBdHRyaWJ1dGVzKCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgZSBpbiB0aGlzLmJpbmRlcnMpe2NvbnN0IHI9dGhpcy5iaW5kZXJzW2VdO2lmKHIgaW5zdGFuY2VvZiBHYXx8ciBpbnN0YW5jZW9mIFphfHxyIGluc3RhbmNlb2YgS2EpZm9yKGxldCBlPTA7ZTxyLnBhaW50VmVydGV4QXR0cmlidXRlcy5sZW5ndGg7ZSsrKXQucHVzaChyLnBhaW50VmVydGV4QXR0cmlidXRlc1tlXS5uYW1lKTt9cmV0dXJuIHR9Z2V0QmluZGVyVW5pZm9ybXMoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBlIGluIHRoaXMuYmluZGVycyl7Y29uc3Qgcj10aGlzLmJpbmRlcnNbZV07aWYociBpbnN0YW5jZW9mIHFhfHxyIGluc3RhbmNlb2YgTmF8fHIgaW5zdGFuY2VvZiBaYSlmb3IoY29uc3QgZSBvZiByLnVuaWZvcm1OYW1lcyl0LnB1c2goZSk7fXJldHVybiB0fWdldFBhaW50VmVydGV4QnVmZmVycygpe3JldHVybiB0aGlzLl9idWZmZXJzfWdldFVuaWZvcm1zKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHIgaW4gdGhpcy5iaW5kZXJzKXtjb25zdCBuPXRoaXMuYmluZGVyc1tyXTtpZihuIGluc3RhbmNlb2YgcWF8fG4gaW5zdGFuY2VvZiBOYXx8biBpbnN0YW5jZW9mIFphKWZvcihjb25zdCBpIG9mIG4udW5pZm9ybU5hbWVzKWUucHVzaCh7bmFtZTppLHByb3BlcnR5OnIsYmluZGluZzpuLmdldEJpbmRpbmcodCxpKX0pO31yZXR1cm4gZX1zZXRVbmlmb3Jtcyh0LGUscixuLGkpe2Zvcihjb25zdHtuYW1lOmUscHJvcGVydHk6cyxiaW5kaW5nOmF9b2Ygcil0aGlzLmJpbmRlcnNbc10uc2V0VW5pZm9ybSh0LGEsaSxuLmdldChzKSxlKTt9dXBkYXRlUGFpbnRCdWZmZXJzKCl7dGhpcy5fYnVmZmVycz1bXTtmb3IoY29uc3QgdCBpbiB0aGlzLmJpbmRlcnMpe2NvbnN0IGU9dGhpcy5iaW5kZXJzW3RdOyhlIGluc3RhbmNlb2YgR2F8fGUgaW5zdGFuY2VvZiBaYXx8ZSBpbnN0YW5jZW9mIEthKSYmZS5wYWludFZlcnRleEJ1ZmZlciYmdGhpcy5fYnVmZmVycy5wdXNoKGUucGFpbnRWZXJ0ZXhCdWZmZXIpO319dXBsb2FkKHQpe2Zvcihjb25zdCBlIGluIHRoaXMuYmluZGVycyl7Y29uc3Qgcj10aGlzLmJpbmRlcnNbZV07KHIgaW5zdGFuY2VvZiBHYXx8ciBpbnN0YW5jZW9mIFphfHxyIGluc3RhbmNlb2YgS2EpJiZyLnVwbG9hZCh0KTt9dGhpcy51cGRhdGVQYWludEJ1ZmZlcnMoKTt9ZGVzdHJveSgpe2Zvcihjb25zdCB0IGluIHRoaXMuYmluZGVycyl7Y29uc3QgZT10aGlzLmJpbmRlcnNbdF07KGUgaW5zdGFuY2VvZiBHYXx8ZSBpbnN0YW5jZW9mIFphfHxlIGluc3RhbmNlb2YgS2EpJiZlLmRlc3Ryb3koKTt9fX1jbGFzcyBKYXtjb25zdHJ1Y3Rvcih0LGUscj0oKCk9PiEwKSl7dGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9e307Zm9yKGNvbnN0IG4gb2YgdCl0aGlzLnByb2dyYW1Db25maWd1cmF0aW9uc1tuLmlkXT1uZXcgWGEobixlLHIpO3RoaXMubmVlZHNVcGxvYWQ9ITEsdGhpcy5fZmVhdHVyZU1hcD1uZXcgRWEsdGhpcy5fYnVmZmVyT2Zmc2V0PTA7fXBvcHVsYXRlUGFpbnRBcnJheXModCxlLHIsbixpLHMsYSl7Zm9yKGNvbnN0IHIgaW4gdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMpdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnNbcl0ucG9wdWxhdGVQYWludEFycmF5cyh0LGUsbixpLHMsYSk7dm9pZCAwIT09ZS5pZCYmdGhpcy5fZmVhdHVyZU1hcC5hZGQoZS5pZCxyLHRoaXMuX2J1ZmZlck9mZnNldCx0KSx0aGlzLl9idWZmZXJPZmZzZXQ9dCx0aGlzLm5lZWRzVXBsb2FkPSEwO311cGRhdGVQYWludEFycmF5cyh0LGUscixuLGkpe2Zvcihjb25zdCBzIG9mIHIpdGhpcy5uZWVkc1VwbG9hZD10aGlzLnByb2dyYW1Db25maWd1cmF0aW9uc1tzLmlkXS51cGRhdGVQYWludEFycmF5cyh0LHRoaXMuX2ZlYXR1cmVNYXAsZSxzLG4saSl8fHRoaXMubmVlZHNVcGxvYWQ7fWdldCh0KXtyZXR1cm4gdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnNbdF19dXBsb2FkKHQpe2lmKHRoaXMubmVlZHNVcGxvYWQpe2Zvcihjb25zdCBlIGluIHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zKXRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zW2VdLnVwbG9hZCh0KTt0aGlzLm5lZWRzVXBsb2FkPSExO319ZGVzdHJveSgpe2Zvcihjb25zdCB0IGluIHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zKXRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zW3RdLmRlc3Ryb3koKTt9fWNvbnN0IEhhPXtcInRleHQtb3BhY2l0eVwiOltcIm9wYWNpdHlcIl0sXCJpY29uLW9wYWNpdHlcIjpbXCJvcGFjaXR5XCJdLFwidGV4dC1jb2xvclwiOltcImZpbGxfY29sb3JcIl0sXCJpY29uLWNvbG9yXCI6W1wiZmlsbF9jb2xvclwiXSxcInRleHQtaGFsby1jb2xvclwiOltcImhhbG9fY29sb3JcIl0sXCJpY29uLWhhbG8tY29sb3JcIjpbXCJoYWxvX2NvbG9yXCJdLFwidGV4dC1oYWxvLWJsdXJcIjpbXCJoYWxvX2JsdXJcIl0sXCJpY29uLWhhbG8tYmx1clwiOltcImhhbG9fYmx1clwiXSxcInRleHQtaGFsby13aWR0aFwiOltcImhhbG9fd2lkdGhcIl0sXCJpY29uLWhhbG8td2lkdGhcIjpbXCJoYWxvX3dpZHRoXCJdLFwibGluZS1nYXAtd2lkdGhcIjpbXCJnYXB3aWR0aFwiXSxcImxpbmUtcGF0dGVyblwiOltcInBhdHRlcm5cIixcInBpeGVsX3JhdGlvXCJdLFwiZmlsbC1wYXR0ZXJuXCI6W1wicGF0dGVyblwiLFwicGl4ZWxfcmF0aW9cIl0sXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCI6W1wicGF0dGVyblwiLFwicGl4ZWxfcmF0aW9cIl0sXCJsaW5lLWRhc2hhcnJheVwiOltcImRhc2hcIl19O2Z1bmN0aW9uIFlhKHQsZSl7cmV0dXJuIEhhW3RdfHxbdC5yZXBsYWNlKGAke2V9LWAsXCJcIikucmVwbGFjZSgvLS9nLFwiX1wiKV19Y29uc3QgV2E9e1wibGluZS1wYXR0ZXJuXCI6e3NvdXJjZTpHcyxjb21wb3NpdGU6R3N9LFwiZmlsbC1wYXR0ZXJuXCI6e3NvdXJjZTpHcyxjb21wb3NpdGU6R3N9LFwiZmlsbC1leHRydXNpb24tcGF0dGVyblwiOntzb3VyY2U6R3MsY29tcG9zaXRlOkdzfSxcImxpbmUtZGFzaGFycmF5XCI6e3NvdXJjZTpacyxjb21wb3NpdGU6WnN9fSxRYT17Y29sb3I6e3NvdXJjZTpjYSxjb21wb3NpdGU6TnN9LG51bWJlcjp7c291cmNlOnNhLGNvbXBvc2l0ZTpjYX19O2Z1bmN0aW9uIHRvKHQsZSxyKXtjb25zdCBuPVdhW3RdO3JldHVybiBuJiZuW3JdfHxRYVtlXVtyXX1KaShxYSxcIkNvbnN0YW50QmluZGVyXCIpLEppKE5hLFwiUGF0dGVybkNvbnN0YW50QmluZGVyXCIpLEppKEdhLFwiU291cmNlRXhwcmVzc2lvbkJpbmRlclwiKSxKaShLYSxcIlBhdHRlcm5Db21wb3NpdGVCaW5kZXJcIiksSmkoWmEsXCJDb21wb3NpdGVFeHByZXNzaW9uQmluZGVyXCIpLEppKFhhLFwiUHJvZ3JhbUNvbmZpZ3VyYXRpb25cIix7b21pdDpbXCJfYnVmZmVyc1wiXX0pLEppKEphLFwiUHJvZ3JhbUNvbmZpZ3VyYXRpb25TZXRcIik7Y29uc3QgZW89XCItdHJhbnNpdGlvblwiO2NsYXNzIHJvIGV4dGVuZHMgUXR7Y29uc3RydWN0b3IodCxlKXtpZihzdXBlcigpLHRoaXMuaWQ9dC5pZCx0aGlzLnR5cGU9dC50eXBlLHRoaXMuX2ZlYXR1cmVGaWx0ZXI9e2ZpbHRlcjooKT0+ITAsbmVlZEdlb21ldHJ5OiExLG5lZWRGZWF0dXJlOiExfSx0aGlzLl9maWx0ZXJDb21waWxlZD0hMSxcImN1c3RvbVwiIT09dC50eXBlJiYodGhpcy5tZXRhZGF0YT10Lm1ldGFkYXRhLHRoaXMubWluem9vbT10Lm1pbnpvb20sdGhpcy5tYXh6b29tPXQubWF4em9vbSxcImJhY2tncm91bmRcIiE9PXQudHlwZSYmXCJza3lcIiE9PXQudHlwZSYmKHRoaXMuc291cmNlPXQuc291cmNlLHRoaXMuc291cmNlTGF5ZXI9dFtcInNvdXJjZS1sYXllclwiXSx0aGlzLmZpbHRlcj10LmZpbHRlciksZS5sYXlvdXQmJih0aGlzLl91bmV2YWx1YXRlZExheW91dD1uZXcgTXMoZS5sYXlvdXQpKSxlLnBhaW50KSl7dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludD1uZXcgU3MoZS5wYWludCk7Zm9yKGNvbnN0IGUgaW4gdC5wYWludCl0aGlzLnNldFBhaW50UHJvcGVydHkoZSx0LnBhaW50W2VdLHt2YWxpZGF0ZTohMX0pO2Zvcihjb25zdCBlIGluIHQubGF5b3V0KXRoaXMuc2V0TGF5b3V0UHJvcGVydHkoZSx0LmxheW91dFtlXSx7dmFsaWRhdGU6ITF9KTt0aGlzLl90cmFuc2l0aW9uaW5nUGFpbnQ9dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC51bnRyYW5zaXRpb25lZCgpLHRoaXMucGFpbnQ9bmV3IHpzKGUucGFpbnQpO319Z2V0TGF5b3V0UHJvcGVydHkodCl7cmV0dXJuIFwidmlzaWJpbGl0eVwiPT09dD90aGlzLnZpc2liaWxpdHk6dGhpcy5fdW5ldmFsdWF0ZWRMYXlvdXQuZ2V0VmFsdWUodCl9c2V0TGF5b3V0UHJvcGVydHkodCxlLHI9e30pe251bGwhPWUmJnRoaXMuX3ZhbGlkYXRlKGppLGBsYXllcnMuJHt0aGlzLmlkfS5sYXlvdXQuJHt0fWAsdCxlLHIpfHwoXCJ2aXNpYmlsaXR5XCIhPT10P3RoaXMuX3VuZXZhbHVhdGVkTGF5b3V0LnNldFZhbHVlKHQsZSk6dGhpcy52aXNpYmlsaXR5PWUpO31nZXRQYWludFByb3BlcnR5KHQpe3JldHVybiBVKHQsZW8pP3RoaXMuX3RyYW5zaXRpb25hYmxlUGFpbnQuZ2V0VHJhbnNpdGlvbih0LnNsaWNlKDAsLTExKSk6dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC5nZXRWYWx1ZSh0KX1zZXRQYWludFByb3BlcnR5KHQsZSxyPXt9KXtpZihudWxsIT1lJiZ0aGlzLl92YWxpZGF0ZSgkaSxgbGF5ZXJzLiR7dGhpcy5pZH0ucGFpbnQuJHt0fWAsdCxlLHIpKXJldHVybiAhMTtpZihVKHQsZW8pKXJldHVybiB0aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50LnNldFRyYW5zaXRpb24odC5zbGljZSgwLC0xMSksZXx8dm9pZCAwKSwhMTt7Y29uc3Qgcj10aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50Ll92YWx1ZXNbdF0sbj1yLnZhbHVlLmlzRGF0YURyaXZlbigpLGk9ci52YWx1ZTt0aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50LnNldFZhbHVlKHQsZSksdGhpcy5faGFuZGxlU3BlY2lhbFBhaW50UHJvcGVydHlVcGRhdGUodCk7Y29uc3Qgcz10aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50Ll92YWx1ZXNbdF0udmFsdWUsYT1zLmlzRGF0YURyaXZlbigpLG89VSh0LFwicGF0dGVyblwiKXx8XCJsaW5lLWRhc2hhcnJheVwiPT09dDtyZXR1cm4gYXx8bnx8b3x8dGhpcy5faGFuZGxlT3ZlcnJpZGFibGVQYWludFByb3BlcnR5VXBkYXRlKHQsaSxzKX19X2hhbmRsZVNwZWNpYWxQYWludFByb3BlcnR5VXBkYXRlKHQpe31nZXRQcm9ncmFtSWRzKCl7cmV0dXJuIG51bGx9Z2V0UHJvZ3JhbUNvbmZpZ3VyYXRpb24odCl7cmV0dXJuIG51bGx9X2hhbmRsZU92ZXJyaWRhYmxlUGFpbnRQcm9wZXJ0eVVwZGF0ZSh0LGUscil7cmV0dXJuICExfWlzSGlkZGVuKHQpe3JldHVybiAhISh0aGlzLm1pbnpvb20mJnQ8dGhpcy5taW56b29tKXx8ISEodGhpcy5tYXh6b29tJiZ0Pj10aGlzLm1heHpvb20pfHxcIm5vbmVcIj09PXRoaXMudmlzaWJpbGl0eX11cGRhdGVUcmFuc2l0aW9ucyh0KXt0aGlzLl90cmFuc2l0aW9uaW5nUGFpbnQ9dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC50cmFuc2l0aW9uZWQodCx0aGlzLl90cmFuc2l0aW9uaW5nUGFpbnQpO31oYXNUcmFuc2l0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zaXRpb25pbmdQYWludC5oYXNUcmFuc2l0aW9uKCl9cmVjYWxjdWxhdGUodCxlKXt0aGlzLl91bmV2YWx1YXRlZExheW91dCYmKHRoaXMubGF5b3V0PXRoaXMuX3VuZXZhbHVhdGVkTGF5b3V0LnBvc3NpYmx5RXZhbHVhdGUodCx2b2lkIDAsZSkpLHRoaXMucGFpbnQ9dGhpcy5fdHJhbnNpdGlvbmluZ1BhaW50LnBvc3NpYmx5RXZhbHVhdGUodCx2b2lkIDAsZSk7fXNlcmlhbGl6ZSgpe2NvbnN0IHQ9e2lkOnRoaXMuaWQsdHlwZTp0aGlzLnR5cGUsc291cmNlOnRoaXMuc291cmNlLFwic291cmNlLWxheWVyXCI6dGhpcy5zb3VyY2VMYXllcixtZXRhZGF0YTp0aGlzLm1ldGFkYXRhLG1pbnpvb206dGhpcy5taW56b29tLG1heHpvb206dGhpcy5tYXh6b29tLGZpbHRlcjp0aGlzLmZpbHRlcixsYXlvdXQ6dGhpcy5fdW5ldmFsdWF0ZWRMYXlvdXQmJnRoaXMuX3VuZXZhbHVhdGVkTGF5b3V0LnNlcmlhbGl6ZSgpLHBhaW50OnRoaXMuX3RyYW5zaXRpb25hYmxlUGFpbnQmJnRoaXMuX3RyYW5zaXRpb25hYmxlUGFpbnQuc2VyaWFsaXplKCl9O3JldHVybiB0aGlzLnZpc2liaWxpdHkmJih0LmxheW91dD10LmxheW91dHx8e30sdC5sYXlvdXQudmlzaWJpbGl0eT10aGlzLnZpc2liaWxpdHkpLGoodCwoKHQsZSk9PiEodm9pZCAwPT09dHx8XCJsYXlvdXRcIj09PWUmJiFPYmplY3Qua2V5cyh0KS5sZW5ndGh8fFwicGFpbnRcIj09PWUmJiFPYmplY3Qua2V5cyh0KS5sZW5ndGgpKSl9X3ZhbGlkYXRlKHQsZSxyLG4saT17fSl7cmV0dXJuICghaXx8ITEhPT1pLnZhbGlkYXRlKSYmcWkodGhpcyx0LmNhbGwoVWkse2tleTplLGxheWVyVHlwZTp0aGlzLnR5cGUsb2JqZWN0S2V5OnIsdmFsdWU6bixzdHlsZVNwZWM6dGUsc3R5bGU6e2dseXBoczohMCxzcHJpdGU6ITB9fSkpfWlzM0QoKXtyZXR1cm4gITF9aXNTa3koKXtyZXR1cm4gITF9aXNUaWxlQ2xpcHBlZCgpe3JldHVybiAhMX1oYXNPZmZzY3JlZW5QYXNzKCl7cmV0dXJuICExfXJlc2l6ZSgpe31pc1N0YXRlRGVwZW5kZW50KCl7Zm9yKGNvbnN0IHQgaW4gdGhpcy5wYWludC5fdmFsdWVzKXtjb25zdCBlPXRoaXMucGFpbnQuZ2V0KHQpO2lmKGUgaW5zdGFuY2VvZiBUcyYmTG4oZS5wcm9wZXJ0eS5zcGVjaWZpY2F0aW9uKSYmKFwic291cmNlXCI9PT1lLnZhbHVlLmtpbmR8fFwiY29tcG9zaXRlXCI9PT1lLnZhbHVlLmtpbmQpJiZlLnZhbHVlLmlzU3RhdGVEZXBlbmRlbnQpcmV0dXJuICEwfXJldHVybiAhMX1jb21waWxlRmlsdGVyKCl7dGhpcy5fZmlsdGVyQ29tcGlsZWR8fCh0aGlzLl9mZWF0dXJlRmlsdGVyPWhpKHRoaXMuZmlsdGVyKSx0aGlzLl9maWx0ZXJDb21waWxlZD0hMCk7fWludmFsaWRhdGVDb21waWxlZEZpbHRlcigpe3RoaXMuX2ZpbHRlckNvbXBpbGVkPSExO31keW5hbWljRmlsdGVyKCl7cmV0dXJuIHRoaXMuX2ZlYXR1cmVGaWx0ZXIuZHluYW1pY0ZpbHRlcn1keW5hbWljRmlsdGVyTmVlZHNGZWF0dXJlKCl7cmV0dXJuIHRoaXMuX2ZlYXR1cmVGaWx0ZXIubmVlZEZlYXR1cmV9fWNvbnN0IG5vPVJzKFt7bmFtZTpcImFfcG9zXCIsY29tcG9uZW50czoyLHR5cGU6XCJJbnQxNlwifV0sNCksaW89UnMoW3tuYW1lOlwiYV9wb3NfM1wiLGNvbXBvbmVudHM6Myx0eXBlOlwiSW50MTZcIn0se25hbWU6XCJhX3Bvc19ub3JtYWxfM1wiLGNvbXBvbmVudHM6Myx0eXBlOlwiSW50MTZcIn1dKTtjbGFzcyBzb3tjb25zdHJ1Y3Rvcih0PVtdKXt0aGlzLnNlZ21lbnRzPXQ7fXByZXBhcmVTZWdtZW50KHQsZSxyLG4pe2xldCBpPXRoaXMuc2VnbWVudHNbdGhpcy5zZWdtZW50cy5sZW5ndGgtMV07cmV0dXJuIHQ+c28uTUFYX1ZFUlRFWF9BUlJBWV9MRU5HVEgmJk4oYE1heCB2ZXJ0aWNlcyBwZXIgc2VnbWVudCBpcyAke3NvLk1BWF9WRVJURVhfQVJSQVlfTEVOR1RIfTogYnVja2V0IHJlcXVlc3RlZCAke3R9YCksKCFpfHxpLnZlcnRleExlbmd0aCt0PnNvLk1BWF9WRVJURVhfQVJSQVlfTEVOR1RIfHxpLnNvcnRLZXkhPT1uKSYmKGk9e3ZlcnRleE9mZnNldDplLmxlbmd0aCxwcmltaXRpdmVPZmZzZXQ6ci5sZW5ndGgsdmVydGV4TGVuZ3RoOjAscHJpbWl0aXZlTGVuZ3RoOjB9LHZvaWQgMCE9PW4mJihpLnNvcnRLZXk9biksdGhpcy5zZWdtZW50cy5wdXNoKGkpKSxpfWdldCgpe3JldHVybiB0aGlzLnNlZ21lbnRzfWRlc3Ryb3koKXtmb3IoY29uc3QgdCBvZiB0aGlzLnNlZ21lbnRzKWZvcihjb25zdCBlIGluIHQudmFvcyl0LnZhb3NbZV0uZGVzdHJveSgpO31zdGF0aWMgc2ltcGxlU2VnbWVudCh0LGUscixuKXtyZXR1cm4gbmV3IHNvKFt7dmVydGV4T2Zmc2V0OnQscHJpbWl0aXZlT2Zmc2V0OmUsdmVydGV4TGVuZ3RoOnIscHJpbWl0aXZlTGVuZ3RoOm4sdmFvczp7fSxzb3J0S2V5OjB9XSl9fXNvLk1BWF9WRVJURVhfQVJSQVlfTEVOR1RIPU1hdGgucG93KDIsMTYpLTEsSmkoc28sXCJTZWdtZW50VmVjdG9yXCIpO3ZhciBhbz04MTkyO2NsYXNzIG9ve2NvbnN0cnVjdG9yKHQsZSl7dCYmKGU/dGhpcy5zZXRTb3V0aFdlc3QodCkuc2V0Tm9ydGhFYXN0KGUpOjQ9PT10Lmxlbmd0aD90aGlzLnNldFNvdXRoV2VzdChbdFswXSx0WzFdXSkuc2V0Tm9ydGhFYXN0KFt0WzJdLHRbM11dKTp0aGlzLnNldFNvdXRoV2VzdCh0WzBdKS5zZXROb3J0aEVhc3QodFsxXSkpO31zZXROb3J0aEVhc3QodCl7cmV0dXJuIHRoaXMuX25lPXQgaW5zdGFuY2VvZiBPbD9uZXcgT2wodC5sbmcsdC5sYXQpOk9sLmNvbnZlcnQodCksdGhpc31zZXRTb3V0aFdlc3QodCl7cmV0dXJuIHRoaXMuX3N3PXQgaW5zdGFuY2VvZiBPbD9uZXcgT2wodC5sbmcsdC5sYXQpOk9sLmNvbnZlcnQodCksdGhpc31leHRlbmQodCl7Y29uc3QgZT10aGlzLl9zdyxyPXRoaXMuX25lO2xldCBuLGk7aWYodCBpbnN0YW5jZW9mIE9sKW49dCxpPXQ7ZWxzZSB7aWYoISh0IGluc3RhbmNlb2Ygb28pKXJldHVybiBBcnJheS5pc0FycmF5KHQpPzQ9PT10Lmxlbmd0aHx8dC5ldmVyeShBcnJheS5pc0FycmF5KT90aGlzLmV4dGVuZChvby5jb252ZXJ0KHQpKTp0aGlzLmV4dGVuZChPbC5jb252ZXJ0KHQpKTpcIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9PXQmJnQuaGFzT3duUHJvcGVydHkoXCJsYXRcIikmJih0Lmhhc093blByb3BlcnR5KFwibG9uXCIpfHx0Lmhhc093blByb3BlcnR5KFwibG5nXCIpKT90aGlzLmV4dGVuZChPbC5jb252ZXJ0KHQpKTp0aGlzO2lmKG49dC5fc3csaT10Ll9uZSwhbnx8IWkpcmV0dXJuIHRoaXN9cmV0dXJuIGV8fHI/KGUubG5nPU1hdGgubWluKG4ubG5nLGUubG5nKSxlLmxhdD1NYXRoLm1pbihuLmxhdCxlLmxhdCksci5sbmc9TWF0aC5tYXgoaS5sbmcsci5sbmcpLHIubGF0PU1hdGgubWF4KGkubGF0LHIubGF0KSk6KHRoaXMuX3N3PW5ldyBPbChuLmxuZyxuLmxhdCksdGhpcy5fbmU9bmV3IE9sKGkubG5nLGkubGF0KSksdGhpc31nZXRDZW50ZXIoKXtyZXR1cm4gbmV3IE9sKCh0aGlzLl9zdy5sbmcrdGhpcy5fbmUubG5nKS8yLCh0aGlzLl9zdy5sYXQrdGhpcy5fbmUubGF0KS8yKX1nZXRTb3V0aFdlc3QoKXtyZXR1cm4gdGhpcy5fc3d9Z2V0Tm9ydGhFYXN0KCl7cmV0dXJuIHRoaXMuX25lfWdldE5vcnRoV2VzdCgpe3JldHVybiBuZXcgT2wodGhpcy5nZXRXZXN0KCksdGhpcy5nZXROb3J0aCgpKX1nZXRTb3V0aEVhc3QoKXtyZXR1cm4gbmV3IE9sKHRoaXMuZ2V0RWFzdCgpLHRoaXMuZ2V0U291dGgoKSl9Z2V0V2VzdCgpe3JldHVybiB0aGlzLl9zdy5sbmd9Z2V0U291dGgoKXtyZXR1cm4gdGhpcy5fc3cubGF0fWdldEVhc3QoKXtyZXR1cm4gdGhpcy5fbmUubG5nfWdldE5vcnRoKCl7cmV0dXJuIHRoaXMuX25lLmxhdH10b0FycmF5KCl7cmV0dXJuIFt0aGlzLl9zdy50b0FycmF5KCksdGhpcy5fbmUudG9BcnJheSgpXX10b1N0cmluZygpe3JldHVybiBgTG5nTGF0Qm91bmRzKCR7dGhpcy5fc3cudG9TdHJpbmcoKX0sICR7dGhpcy5fbmUudG9TdHJpbmcoKX0pYH1pc0VtcHR5KCl7cmV0dXJuICEodGhpcy5fc3cmJnRoaXMuX25lKX1jb250YWlucyh0KXtjb25zdHtsbmc6ZSxsYXQ6cn09T2wuY29udmVydCh0KTtsZXQgbj10aGlzLl9zdy5sbmc8PWUmJmU8PXRoaXMuX25lLmxuZztyZXR1cm4gdGhpcy5fc3cubG5nPnRoaXMuX25lLmxuZyYmKG49dGhpcy5fc3cubG5nPj1lJiZlPj10aGlzLl9uZS5sbmcpLHRoaXMuX3N3LmxhdDw9ciYmcjw9dGhpcy5fbmUubGF0JiZufXN0YXRpYyBjb252ZXJ0KHQpe3JldHVybiAhdHx8dCBpbnN0YW5jZW9mIG9vP3Q6bmV3IG9vKHQpfX12YXIgbG89MWUtNix1bz1cInVuZGVmaW5lZFwiIT10eXBlb2YgRmxvYXQzMkFycmF5P0Zsb2F0MzJBcnJheTpBcnJheTtmdW5jdGlvbiBjbygpe3ZhciB0PW5ldyB1byg5KTtyZXR1cm4gdW8hPUZsb2F0MzJBcnJheSYmKHRbMV09MCx0WzJdPTAsdFszXT0wLHRbNV09MCx0WzZdPTAsdFs3XT0wKSx0WzBdPTEsdFs0XT0xLHRbOF09MSx0fWZ1bmN0aW9uIGhvKHQsZSxyKXt2YXIgbj1lWzBdLGk9ZVsxXSxzPWVbMl0sYT1lWzNdLG89ZVs0XSxsPWVbNV0sdT1lWzZdLGM9ZVs3XSxoPWVbOF0scD1yWzBdLGQ9clsxXSxmPXJbMl0seT1yWzNdLG09cls0XSxnPXJbNV0seD1yWzZdLHY9cls3XSxiPXJbOF07cmV0dXJuIHRbMF09cCpuK2QqYStmKnUsdFsxXT1wKmkrZCpvK2YqYyx0WzJdPXAqcytkKmwrZipoLHRbM109eSpuK20qYStnKnUsdFs0XT15KmkrbSpvK2cqYyx0WzVdPXkqcyttKmwrZypoLHRbNl09eCpuK3YqYStiKnUsdFs3XT14KmkrdipvK2IqYyx0WzhdPXgqcyt2KmwrYipoLHR9ZnVuY3Rpb24gcG8odCl7cmV0dXJuIHRbMF09MSx0WzFdPTAsdFsyXT0wLHRbM109MCx0WzRdPTAsdFs1XT0xLHRbNl09MCx0WzddPTAsdFs4XT0wLHRbOV09MCx0WzEwXT0xLHRbMTFdPTAsdFsxMl09MCx0WzEzXT0wLHRbMTRdPTAsdFsxNV09MSx0fWZ1bmN0aW9uIGZvKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT1lWzJdLHM9ZVszXSxhPWVbNF0sbz1lWzVdLGw9ZVs2XSx1PWVbN10sYz1lWzhdLGg9ZVs5XSxwPWVbMTBdLGQ9ZVsxMV0sZj1lWzEyXSx5PWVbMTNdLG09ZVsxNF0sZz1lWzE1XSx4PXIqby1uKmEsdj1yKmwtaSphLGI9cip1LXMqYSx3PW4qbC1pKm8sXz1uKnUtcypvLEE9aSp1LXMqbCxTPWMqeS1oKmYsaz1jKm0tcCpmLEk9YypnLWQqZixNPWgqbS1wKnksVD1oKmctZCp5LHo9cCpnLWQqbSxCPXgqei12KlQrYipNK3cqSS1fKmsrQSpTO3JldHVybiBCPyh0WzBdPShvKnotbCpUK3UqTSkqKEI9MS9CKSx0WzFdPShpKlQtbip6LXMqTSkqQix0WzJdPSh5KkEtbSpfK2cqdykqQix0WzNdPShwKl8taCpBLWQqdykqQix0WzRdPShsKkktYSp6LXUqaykqQix0WzVdPShyKnotaSpJK3MqaykqQix0WzZdPShtKmItZipBLWcqdikqQix0WzddPShjKkEtcCpiK2QqdikqQix0WzhdPShhKlQtbypJK3UqUykqQix0WzldPShuKkktcipULXMqUykqQix0WzEwXT0oZipfLXkqYitnKngpKkIsdFsxMV09KGgqYi1jKl8tZCp4KSpCLHRbMTJdPShvKmstYSpNLWwqUykqQix0WzEzXT0ocipNLW4qaytpKlMpKkIsdFsxNF09KHkqdi1mKnctbSp4KSpCLHRbMTVdPShjKnctaCp2K3AqeCkqQix0KTpudWxsfWZ1bmN0aW9uIHlvKHQsZSxyKXt2YXIgbj1lWzBdLGk9ZVsxXSxzPWVbMl0sYT1lWzNdLG89ZVs0XSxsPWVbNV0sdT1lWzZdLGM9ZVs3XSxoPWVbOF0scD1lWzldLGQ9ZVsxMF0sZj1lWzExXSx5PWVbMTJdLG09ZVsxM10sZz1lWzE0XSx4PWVbMTVdLHY9clswXSxiPXJbMV0sdz1yWzJdLF89clszXTtyZXR1cm4gdFswXT12Km4rYipvK3cqaCtfKnksdFsxXT12KmkrYipsK3cqcCtfKm0sdFsyXT12KnMrYip1K3cqZCtfKmcsdFszXT12KmErYipjK3cqZitfKngsdFs0XT0odj1yWzRdKSpuKyhiPXJbNV0pKm8rKHc9cls2XSkqaCsoXz1yWzddKSp5LHRbNV09dippK2IqbCt3KnArXyptLHRbNl09dipzK2IqdSt3KmQrXypnLHRbN109diphK2IqYyt3KmYrXyp4LHRbOF09KHY9cls4XSkqbisoYj1yWzldKSpvKyh3PXJbMTBdKSpoKyhfPXJbMTFdKSp5LHRbOV09dippK2IqbCt3KnArXyptLHRbMTBdPXYqcytiKnUrdypkK18qZyx0WzExXT12KmErYipjK3cqZitfKngsdFsxMl09KHY9clsxMl0pKm4rKGI9clsxM10pKm8rKHc9clsxNF0pKmgrKF89clsxNV0pKnksdFsxM109dippK2IqbCt3KnArXyptLHRbMTRdPXYqcytiKnUrdypkK18qZyx0WzE1XT12KmErYipjK3cqZitfKngsdH1mdW5jdGlvbiBtbyh0LGUscil7dmFyIG4saSxzLGEsbyxsLHUsYyxoLHAsZCxmLHk9clswXSxtPXJbMV0sZz1yWzJdO3JldHVybiBlPT09dD8odFsxMl09ZVswXSp5K2VbNF0qbStlWzhdKmcrZVsxMl0sdFsxM109ZVsxXSp5K2VbNV0qbStlWzldKmcrZVsxM10sdFsxNF09ZVsyXSp5K2VbNl0qbStlWzEwXSpnK2VbMTRdLHRbMTVdPWVbM10qeStlWzddKm0rZVsxMV0qZytlWzE1XSk6KGk9ZVsxXSxzPWVbMl0sYT1lWzNdLG89ZVs0XSxsPWVbNV0sdT1lWzZdLGM9ZVs3XSxoPWVbOF0scD1lWzldLGQ9ZVsxMF0sZj1lWzExXSx0WzBdPW49ZVswXSx0WzFdPWksdFsyXT1zLHRbM109YSx0WzRdPW8sdFs1XT1sLHRbNl09dSx0WzddPWMsdFs4XT1oLHRbOV09cCx0WzEwXT1kLHRbMTFdPWYsdFsxMl09bip5K28qbStoKmcrZVsxMl0sdFsxM109aSp5K2wqbStwKmcrZVsxM10sdFsxNF09cyp5K3UqbStkKmcrZVsxNF0sdFsxNV09YSp5K2MqbStmKmcrZVsxNV0pLHR9ZnVuY3Rpb24gZ28odCxlLHIpe3ZhciBuPXJbMF0saT1yWzFdLHM9clsyXTtyZXR1cm4gdFswXT1lWzBdKm4sdFsxXT1lWzFdKm4sdFsyXT1lWzJdKm4sdFszXT1lWzNdKm4sdFs0XT1lWzRdKmksdFs1XT1lWzVdKmksdFs2XT1lWzZdKmksdFs3XT1lWzddKmksdFs4XT1lWzhdKnMsdFs5XT1lWzldKnMsdFsxMF09ZVsxMF0qcyx0WzExXT1lWzExXSpzLHRbMTJdPWVbMTJdLHRbMTNdPWVbMTNdLHRbMTRdPWVbMTRdLHRbMTVdPWVbMTVdLHR9ZnVuY3Rpb24geG8odCxlLHIpe3ZhciBuPU1hdGguc2luKHIpLGk9TWF0aC5jb3Mocikscz1lWzRdLGE9ZVs1XSxvPWVbNl0sbD1lWzddLHU9ZVs4XSxjPWVbOV0saD1lWzEwXSxwPWVbMTFdO3JldHVybiBlIT09dCYmKHRbMF09ZVswXSx0WzFdPWVbMV0sdFsyXT1lWzJdLHRbM109ZVszXSx0WzEyXT1lWzEyXSx0WzEzXT1lWzEzXSx0WzE0XT1lWzE0XSx0WzE1XT1lWzE1XSksdFs0XT1zKmkrdSpuLHRbNV09YSppK2Mqbix0WzZdPW8qaStoKm4sdFs3XT1sKmkrcCpuLHRbOF09dSppLXMqbix0WzldPWMqaS1hKm4sdFsxMF09aCppLW8qbix0WzExXT1wKmktbCpuLHR9ZnVuY3Rpb24gdm8odCxlLHIpe3ZhciBuPU1hdGguc2luKHIpLGk9TWF0aC5jb3Mocikscz1lWzBdLGE9ZVsxXSxvPWVbMl0sbD1lWzNdLHU9ZVs4XSxjPWVbOV0saD1lWzEwXSxwPWVbMTFdO3JldHVybiBlIT09dCYmKHRbNF09ZVs0XSx0WzVdPWVbNV0sdFs2XT1lWzZdLHRbN109ZVs3XSx0WzEyXT1lWzEyXSx0WzEzXT1lWzEzXSx0WzE0XT1lWzE0XSx0WzE1XT1lWzE1XSksdFswXT1zKmktdSpuLHRbMV09YSppLWMqbix0WzJdPW8qaS1oKm4sdFszXT1sKmktcCpuLHRbOF09cypuK3UqaSx0WzldPWEqbitjKmksdFsxMF09bypuK2gqaSx0WzExXT1sKm4rcCppLHR9ZnVuY3Rpb24gYm8odCxlKXtyZXR1cm4gdFswXT1lWzBdLHRbMV09MCx0WzJdPTAsdFszXT0wLHRbNF09MCx0WzVdPWVbMV0sdFs2XT0wLHRbN109MCx0WzhdPTAsdFs5XT0wLHRbMTBdPWVbMl0sdFsxMV09MCx0WzEyXT0wLHRbMTNdPTAsdFsxNF09MCx0WzE1XT0xLHR9ZnVuY3Rpb24gd28odCxlLHIpe3ZhciBuLGkscyxhPXJbMF0sbz1yWzFdLGw9clsyXSx1PU1hdGguaHlwb3QoYSxvLGwpO3JldHVybiB1PGxvP251bGw6KGEqPXU9MS91LG8qPXUsbCo9dSxuPU1hdGguc2luKGUpLGk9TWF0aC5jb3MoZSksdFswXT1hKmEqKHM9MS1pKStpLHRbMV09byphKnMrbCpuLHRbMl09bCphKnMtbypuLHRbM109MCx0WzRdPWEqbypzLWwqbix0WzVdPW8qbypzK2ksdFs2XT1sKm8qcythKm4sdFs3XT0wLHRbOF09YSpsKnMrbypuLHRbOV09bypsKnMtYSpuLHRbMTBdPWwqbCpzK2ksdFsxMV09MCx0WzEyXT0wLHRbMTNdPTAsdFsxNF09MCx0WzE1XT0xLHQpfU1hdGguaHlwb3R8fChNYXRoLmh5cG90PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT1hcmd1bWVudHMubGVuZ3RoO2UtLTspdCs9YXJndW1lbnRzW2VdKmFyZ3VtZW50c1tlXTtyZXR1cm4gTWF0aC5zcXJ0KHQpfSk7dmFyIF9vPXlvO2Z1bmN0aW9uIEFvKCl7dmFyIHQ9bmV3IHVvKDMpO3JldHVybiB1byE9RmxvYXQzMkFycmF5JiYodFswXT0wLHRbMV09MCx0WzJdPTApLHR9ZnVuY3Rpb24gU28odCl7dmFyIGU9bmV3IHVvKDMpO3JldHVybiBlWzBdPXRbMF0sZVsxXT10WzFdLGVbMl09dFsyXSxlfWZ1bmN0aW9uIGtvKHQpe3JldHVybiBNYXRoLmh5cG90KHRbMF0sdFsxXSx0WzJdKX1mdW5jdGlvbiBJbyh0LGUscil7dmFyIG49bmV3IHVvKDMpO3JldHVybiBuWzBdPXQsblsxXT1lLG5bMl09cixufWZ1bmN0aW9uIE1vKHQsZSxyKXtyZXR1cm4gdFswXT1lWzBdK3JbMF0sdFsxXT1lWzFdK3JbMV0sdFsyXT1lWzJdK3JbMl0sdH1mdW5jdGlvbiBUbyh0LGUscil7cmV0dXJuIHRbMF09ZVswXS1yWzBdLHRbMV09ZVsxXS1yWzFdLHRbMl09ZVsyXS1yWzJdLHR9ZnVuY3Rpb24gem8odCxlLHIpe3JldHVybiB0WzBdPWVbMF0qclswXSx0WzFdPWVbMV0qclsxXSx0WzJdPWVbMl0qclsyXSx0fWZ1bmN0aW9uIEJvKHQsZSxyKXtyZXR1cm4gdFswXT1NYXRoLm1pbihlWzBdLHJbMF0pLHRbMV09TWF0aC5taW4oZVsxXSxyWzFdKSx0WzJdPU1hdGgubWluKGVbMl0sclsyXSksdH1mdW5jdGlvbiBFbyh0LGUscil7cmV0dXJuIHRbMF09TWF0aC5tYXgoZVswXSxyWzBdKSx0WzFdPU1hdGgubWF4KGVbMV0sclsxXSksdFsyXT1NYXRoLm1heChlWzJdLHJbMl0pLHR9ZnVuY3Rpb24gQ28odCxlLHIpe3JldHVybiB0WzBdPWVbMF0qcix0WzFdPWVbMV0qcix0WzJdPWVbMl0qcix0fWZ1bmN0aW9uIFBvKHQsZSxyLG4pe3JldHVybiB0WzBdPWVbMF0rclswXSpuLHRbMV09ZVsxXStyWzFdKm4sdFsyXT1lWzJdK3JbMl0qbix0fWZ1bmN0aW9uIERvKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT1lWzJdLHM9cipyK24qbitpKmk7cmV0dXJuIHM+MCYmKHM9MS9NYXRoLnNxcnQocykpLHRbMF09ZVswXSpzLHRbMV09ZVsxXSpzLHRbMl09ZVsyXSpzLHR9ZnVuY3Rpb24gVm8odCxlKXtyZXR1cm4gdFswXSplWzBdK3RbMV0qZVsxXSt0WzJdKmVbMl19ZnVuY3Rpb24gTG8odCxlLHIpe3ZhciBuPWVbMF0saT1lWzFdLHM9ZVsyXSxhPXJbMF0sbz1yWzFdLGw9clsyXTtyZXR1cm4gdFswXT1pKmwtcypvLHRbMV09cyphLW4qbCx0WzJdPW4qby1pKmEsdH1mdW5jdGlvbiBGbyh0LGUscil7dmFyIG49ZVswXSxpPWVbMV0scz1lWzJdLGE9clszXSpuK3JbN10qaStyWzExXSpzK3JbMTVdO3JldHVybiB0WzBdPShyWzBdKm4rcls0XSppK3JbOF0qcytyWzEyXSkvKGE9YXx8MSksdFsxXT0oclsxXSpuK3JbNV0qaStyWzldKnMrclsxM10pL2EsdFsyXT0oclsyXSpuK3JbNl0qaStyWzEwXSpzK3JbMTRdKS9hLHR9ZnVuY3Rpb24gUm8odCxlLHIpe3ZhciBuPXJbMF0saT1yWzFdLHM9clsyXSxhPWVbMF0sbz1lWzFdLGw9ZVsyXSx1PWkqbC1zKm8sYz1zKmEtbipsLGg9bipvLWkqYSxwPWkqaC1zKmMsZD1zKnUtbipoLGY9bipjLWkqdSx5PTIqclszXTtyZXR1cm4gYyo9eSxoKj15LGQqPTIsZio9Mix0WzBdPWErKHUqPXkpKyhwKj0yKSx0WzFdPW8rYytkLHRbMl09bCtoK2YsdH12YXIgVW8sJG89VG8sam89em8sT289a287ZnVuY3Rpb24gcW8odCxlLHIpe3JldHVybiB0WzBdPWVbMF0qcix0WzFdPWVbMV0qcix0WzJdPWVbMl0qcix0WzNdPWVbM10qcix0fWZ1bmN0aW9uIE5vKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT1lWzJdLHM9ZVszXSxhPXIqcituKm4raSppK3MqcztyZXR1cm4gYT4wJiYoYT0xL01hdGguc3FydChhKSksdFswXT1yKmEsdFsxXT1uKmEsdFsyXT1pKmEsdFszXT1zKmEsdH1mdW5jdGlvbiBHbyh0LGUscil7dmFyIG49ZVswXSxpPWVbMV0scz1lWzJdLGE9ZVszXTtyZXR1cm4gdFswXT1yWzBdKm4rcls0XSppK3JbOF0qcytyWzEyXSphLHRbMV09clsxXSpuK3JbNV0qaStyWzldKnMrclsxM10qYSx0WzJdPXJbMl0qbityWzZdKmkrclsxMF0qcytyWzE0XSphLHRbM109clszXSpuK3JbN10qaStyWzExXSpzK3JbMTVdKmEsdH1mdW5jdGlvbiBabygpe3ZhciB0PW5ldyB1byg0KTtyZXR1cm4gdW8hPUZsb2F0MzJBcnJheSYmKHRbMF09MCx0WzFdPTAsdFsyXT0wKSx0WzNdPTEsdH1mdW5jdGlvbiBLbyh0KXtyZXR1cm4gdFswXT0wLHRbMV09MCx0WzJdPTAsdFszXT0xLHR9ZnVuY3Rpb24gWG8odCxlLHIpe3IqPS41O3ZhciBuPWVbMF0saT1lWzFdLHM9ZVsyXSxhPWVbM10sbz1NYXRoLnNpbihyKSxsPU1hdGguY29zKHIpO3JldHVybiB0WzBdPW4qbCthKm8sdFsxXT1pKmwrcypvLHRbMl09cypsLWkqbyx0WzNdPWEqbC1uKm8sdH1mdW5jdGlvbiBKbyh0LGUscil7cio9LjU7dmFyIG49ZVswXSxpPWVbMV0scz1lWzJdLGE9ZVszXSxvPU1hdGguc2luKHIpLGw9TWF0aC5jb3Mocik7cmV0dXJuIHRbMF09bipsLXMqbyx0WzFdPWkqbCthKm8sdFsyXT1zKmwrbipvLHRbM109YSpsLWkqbyx0fUFvKCksVW89bmV3IHVvKDQpLHVvIT1GbG9hdDMyQXJyYXkmJihVb1swXT0wLFVvWzFdPTAsVW9bMl09MCxVb1szXT0wKTt2YXIgSG89Tm87QW8oKSxJbygxLDAsMCksSW8oMCwxLDApLFpvKCksWm8oKSxjbygpO2NvbnN0IFlvPVJzKFt7dHlwZTpcIkZsb2F0MzJcIixuYW1lOlwiYV9nbG9iZV9wb3NcIixjb21wb25lbnRzOjN9LHt0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJhX3V2XCIsY29tcG9uZW50czoyfV0pLHttZW1iZXJzOldvfT1ZbyxRbz1Scyhbe25hbWU6XCJhX3Bvc18zXCIsY29tcG9uZW50czozLHR5cGU6XCJJbnQxNlwifV0pO3ZhciB0bD1Scyhbe25hbWU6XCJhX3Bvc1wiLHR5cGU6XCJJbnQxNlwiLGNvbXBvbmVudHM6Mn1dKTtjbGFzcyBlbHtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMucG9zPXQsdGhpcy5kaXI9ZTt9aW50ZXJzZWN0c1BsYW5lKHQsZSxyKXtjb25zdCBuPVZvKGUsdGhpcy5kaXIpO2lmKE1hdGguYWJzKG4pPDFlLTYpcmV0dXJuICExO2NvbnN0IGk9KCh0WzBdLXRoaXMucG9zWzBdKSplWzBdKyh0WzFdLXRoaXMucG9zWzFdKSplWzFdKyh0WzJdLXRoaXMucG9zWzJdKSplWzJdKS9uO3JldHVybiByWzBdPXRoaXMucG9zWzBdK3RoaXMuZGlyWzBdKmksclsxXT10aGlzLnBvc1sxXSt0aGlzLmRpclsxXSppLHJbMl09dGhpcy5wb3NbMl0rdGhpcy5kaXJbMl0qaSwhMH1jbG9zZXN0UG9pbnRPblNwaGVyZSh0LGUscil7aWYoZnVuY3Rpb24odCxlKXt2YXIgcj10WzBdLG49dFsxXSxpPXRbMl0scz1lWzBdLGE9ZVsxXSxvPWVbMl07cmV0dXJuIE1hdGguYWJzKHItcyk8PWxvKk1hdGgubWF4KDEsTWF0aC5hYnMociksTWF0aC5hYnMocykpJiZNYXRoLmFicyhuLWEpPD1sbypNYXRoLm1heCgxLE1hdGguYWJzKG4pLE1hdGguYWJzKGEpKSYmTWF0aC5hYnMoaS1vKTw9bG8qTWF0aC5tYXgoMSxNYXRoLmFicyhpKSxNYXRoLmFicyhvKSl9KHRoaXMucG9zLHQpfHwwPT09ZSlyZXR1cm4gclswXT1yWzFdPXJbMl09MCwhMTtjb25zdFtuLGksc109dGhpcy5kaXIsYT10aGlzLnBvc1swXS10WzBdLG89dGhpcy5wb3NbMV0tdFsxXSxsPXRoaXMucG9zWzJdLXRbMl0sdT1uKm4raSppK3MqcyxjPTIqKGEqbitvKmkrbCpzKSxoPWMqYy00KnUqKGEqYStvKm8rbCpsLWUqZSk7aWYoaDwwKXtjb25zdCB0PU1hdGgubWF4KC1jLzIsMCksdT1hK24qdCxoPW8raSp0LHA9bCtzKnQsZD1NYXRoLmh5cG90KHUsaCxwKTtyZXR1cm4gclswXT11KmUvZCxyWzFdPWgqZS9kLHJbMl09cCplL2QsITF9e2NvbnN0IHQ9KC1jLU1hdGguc3FydChoKSkvKDIqdSk7aWYodDwwKXtjb25zdCB0PU1hdGguaHlwb3QoYSxvLGwpO3JldHVybiByWzBdPWEqZS90LHJbMV09byplL3QsclsyXT1sKmUvdCwhMX1yZXR1cm4gclswXT1hK24qdCxyWzFdPW8raSp0LHJbMl09bCtzKnQsITB9fX1jbGFzcyBybHtjb25zdHJ1Y3Rvcih0LGUscixuLGkpe3RoaXMuVEw9dCx0aGlzLlRSPWUsdGhpcy5CUj1yLHRoaXMuQkw9bix0aGlzLmhvcml6b249aTt9c3RhdGljIGZyb21JbnZQcm9qZWN0aW9uTWF0cml4KHQsZSxyKXtjb25zdCBuPVstMSwxLDFdLGk9WzEsMSwxXSxzPVsxLC0xLDFdLGE9Wy0xLC0xLDFdLG89Rm8obixuLHQpLGw9Rm8oaSxpLHQpLHU9Rm8ocyxzLHQpLGM9Rm8oYSxhLHQpO3JldHVybiBuZXcgcmwobyxsLHUsYyxlL3IpfX1jbGFzcyBubHtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMucG9pbnRzPXQsdGhpcy5wbGFuZXM9ZTt9c3RhdGljIGZyb21JbnZQcm9qZWN0aW9uTWF0cml4KHQsZSxyLG4pe2NvbnN0IGk9TWF0aC5wb3coMixyKSxzPVtbLTEsMSwtMSwxXSxbMSwxLC0xLDFdLFsxLC0xLC0xLDFdLFstMSwtMSwtMSwxXSxbLTEsMSwxLDFdLFsxLDEsMSwxXSxbMSwtMSwxLDFdLFstMSwtMSwxLDFdXS5tYXAoKHI9Pntjb25zdCBzPUdvKFtdLHIsdCksYT0xL3NbM10vZSppO3JldHVybiBmdW5jdGlvbih0LGUscil7cmV0dXJuIHRbMF09ZVswXSpyWzBdLHRbMV09ZVsxXSpyWzFdLHRbMl09ZVsyXSpyWzJdLHRbM109ZVszXSpyWzNdLHR9KHMscyxbYSxhLG4/MS9zWzNdOmEsYV0pfSkpLGE9W1swLDEsMl0sWzYsNSw0XSxbMCwzLDddLFsyLDEsNV0sWzMsMiw2XSxbMCw0LDVdXS5tYXAoKHQ9Pntjb25zdCBlPURvKFtdLExvKFtdLCRvKFtdLHNbdFswXV0sc1t0WzFdXSksJG8oW10sc1t0WzJdXSxzW3RbMV1dKSkpLHI9LVZvKGUsc1t0WzFdXSk7cmV0dXJuIGUuY29uY2F0KHIpfSkpO3JldHVybiBuZXcgbmwocyxhKX19Y2xhc3MgaWx7c3RhdGljIGZyb21Qb2ludHModCl7Y29uc3QgZT1bMS8wLDEvMCwxLzBdLHI9Wy0xLzAsLTEvMCwtMS8wXTtmb3IoY29uc3QgbiBvZiB0KUJvKGUsZSxuKSxFbyhyLHIsbik7cmV0dXJuIG5ldyBpbChlLHIpfXN0YXRpYyBhcHBseVRyYW5zZm9ybSh0LGUpe2NvbnN0IHI9dC5nZXRDb3JuZXJzKCk7Zm9yKGxldCB0PTA7dDxyLmxlbmd0aDsrK3QpRm8oclt0XSxyW3RdLGUpO3JldHVybiBpbC5mcm9tUG9pbnRzKHIpfWNvbnN0cnVjdG9yKHQsZSl7dGhpcy5taW49dCx0aGlzLm1heD1lLHRoaXMuY2VudGVyPUNvKFtdLE1vKFtdLHRoaXMubWluLHRoaXMubWF4KSwuNSk7fXF1YWRyYW50KHQpe2NvbnN0IGU9W3QlMj09MCx0PDJdLHI9U28odGhpcy5taW4pLG49U28odGhpcy5tYXgpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXJbdF09ZVt0XT90aGlzLm1pblt0XTp0aGlzLmNlbnRlclt0XSxuW3RdPWVbdF0/dGhpcy5jZW50ZXJbdF06dGhpcy5tYXhbdF07cmV0dXJuIG5bMl09dGhpcy5tYXhbMl0sbmV3IGlsKHIsbil9ZGlzdGFuY2VYKHQpe3JldHVybiBNYXRoLm1heChNYXRoLm1pbih0aGlzLm1heFswXSx0WzBdKSx0aGlzLm1pblswXSktdFswXX1kaXN0YW5jZVkodCl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHRoaXMubWF4WzFdLHRbMV0pLHRoaXMubWluWzFdKS10WzFdfWRpc3RhbmNlWih0KXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odGhpcy5tYXhbMl0sdFsyXSksdGhpcy5taW5bMl0pLXRbMl19Z2V0Q29ybmVycygpe2NvbnN0IHQ9dGhpcy5taW4sZT10aGlzLm1heDtyZXR1cm4gW1t0WzBdLHRbMV0sdFsyXV0sW2VbMF0sdFsxXSx0WzJdXSxbZVswXSxlWzFdLHRbMl1dLFt0WzBdLGVbMV0sdFsyXV0sW3RbMF0sdFsxXSxlWzJdXSxbZVswXSx0WzFdLGVbMl1dLFtlWzBdLGVbMV0sZVsyXV0sW3RbMF0sZVsxXSxlWzJdXV19aW50ZXJzZWN0cyh0KXtjb25zdCBlPXRoaXMuZ2V0Q29ybmVycygpO2xldCByPSEwO2ZvcihsZXQgbj0wO248dC5wbGFuZXMubGVuZ3RoO24rKyl7Y29uc3QgaT10LnBsYW5lc1tuXTtsZXQgcz0wO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXMrPVZvKGksZVt0XSkraVszXT49MDtpZigwPT09cylyZXR1cm4gMDtzIT09ZS5sZW5ndGgmJihyPSExKTt9aWYocilyZXR1cm4gMjtmb3IobGV0IGU9MDtlPDM7ZSsrKXtsZXQgcj1OdW1iZXIuTUFYX1ZBTFVFLG49LU51bWJlci5NQVhfVkFMVUU7Zm9yKGxldCBpPTA7aTx0LnBvaW50cy5sZW5ndGg7aSsrKXtjb25zdCBzPXQucG9pbnRzW2ldW2VdLXRoaXMubWluW2VdO3I9TWF0aC5taW4ocixzKSxuPU1hdGgubWF4KG4scyk7fWlmKG48MHx8cj50aGlzLm1heFtlXS10aGlzLm1pbltlXSlyZXR1cm4gMH1yZXR1cm4gMX19Y29uc3Qgc2w9NSxhbD02LG9sPWFvL01hdGguUEkvMixsbD0xNjM4Myx1bD02NCxjbD1bdWwsMzIsMTZdLGhsPS1vbCxwbD1vbCxkbD1bbmV3IGlsKFtobCxobCxobF0sW3BsLHBsLHBsXSksbmV3IGlsKFtobCxobCxobF0sWzAsMCxwbF0pLG5ldyBpbChbMCxobCxobF0sW3BsLDAscGxdKSxuZXcgaWwoW2hsLDAsaGxdLFswLHBsLHBsXSksbmV3IGlsKFswLDAsaGxdLFtwbCxwbCxwbF0pXTtmdW5jdGlvbiBmbCh0KXtyZXR1cm4gdCpvbC9VbH1mdW5jdGlvbiB5bCh0LGUscixuPSEwKXtjb25zdCBpPUNvKFtdLHQuX2NhbWVyYS5wb3NpdGlvbix0LndvcmxkU2l6ZSkscz1bZSxyLDEsMV07R28ocyxzLHQucGl4ZWxNYXRyaXhJbnZlcnNlKSxxbyhzLHMsMS9zWzNdKTtjb25zdCBhPURvKFtdLCRvKFtdLHMsaSkpLG89dC5nbG9iZU1hdHJpeCxsPVtvWzEyXSxvWzEzXSxvWzE0XV0sdT0kbyhbXSxsLGkpLGM9a28odSksaD1EbyhbXSx1KSxwPXQud29ybGRTaXplLygyKk1hdGguUEkpLGQ9Vm8oaCxhKSxmPU1hdGguYXNpbihwL2MpO2lmKGY8TWF0aC5hY29zKGQpKXtpZighbilyZXR1cm4gbnVsbDtjb25zdCB0PVtdLGU9W107Q28odCxhLGMvZCksRG8oZSwkbyhlLHQsdSkpLERvKGEsTW8oYSx1LENvKGEsZSxNYXRoLnRhbihmKSpjKSkpO31jb25zdCB5PVtdO25ldyBlbChpLGEpLmNsb3Nlc3RQb2ludE9uU3BoZXJlKGwscCx5KTtjb25zdCBtPURvKFtdLFcobywwKSksZz1EbyhbXSxXKG8sMSkpLHg9RG8oW10sVyhvLDIpKSx2PVZvKG0seSksYj1WbyhnLHkpLHc9Vm8oeCx5KSxBPV8oTWF0aC5hc2luKC1iL3ApKTtsZXQgUz1fKE1hdGguYXRhbjIodix3KSk7Uz10LmNlbnRlci5sbmcrZnVuY3Rpb24odCxlKXtjb25zdCByPShlLXQrMTgwKSUzNjAtMTgwO3JldHVybiByPC0xODA/ciszNjA6cn0odC5jZW50ZXIubG5nLFMpO2NvbnN0IGs9TmwoUyksST1NKEdsKEEpLDAsMSk7cmV0dXJuIG5ldyBXbChrLEkpfWNsYXNzIG1se2NvbnN0cnVjdG9yKHQsZSxyKXt0aGlzLmE9JG8oW10sdCxyKSx0aGlzLmI9JG8oW10sZSxyKSx0aGlzLmNlbnRlcj1yO2NvbnN0IG49RG8oW10sdGhpcy5hKSxpPURvKFtdLHRoaXMuYik7dGhpcy5hbmdsZT1NYXRoLmFjb3MoVm8obixpKSk7fX1mdW5jdGlvbiBnbCh0LGUpe2lmKDA9PT10LmFuZ2xlKXJldHVybiBudWxsO2xldCByO3JldHVybiByPTA9PT10LmFbZV0/MS90LmFuZ2xlKi41Kk1hdGguUEk6MS90LmFuZ2xlKk1hdGguYXRhbih0LmJbZV0vdC5hW2VdL01hdGguc2luKHQuYW5nbGUpLTEvTWF0aC50YW4odC5hbmdsZSkpLHI8MHx8cj4xP251bGw6ZnVuY3Rpb24odCxlLHIsbil7Y29uc3QgaT1NYXRoLnNpbihyKTtyZXR1cm4gdCooTWF0aC5zaW4oKDEtbikqcikvaSkrZSooTWF0aC5zaW4obipyKS9pKX0odC5hW2VdLHQuYltlXSx0LmFuZ2xlLE0ociwwLDEpKSt0LmNlbnRlcltlXX1mdW5jdGlvbiB4bCh0KXtpZih0Lno8PTEpcmV0dXJuIGRsW3QueisyKnQueSt0LnhdO2NvbnN0IGU9U2woQWwodCkpO3JldHVybiBpbC5mcm9tUG9pbnRzKGUpfWZ1bmN0aW9uIHZsKHQsZSxyKXtyZXR1cm4gQ28odCx0LDEtciksUG8odCx0LGUscil9ZnVuY3Rpb24gYmwodCxlKXtjb25zdCByPVBsKGUuem9vbSk7aWYoMD09PXIpcmV0dXJuIHhsKHQpO2NvbnN0IG49QWwodCksaT1TbChuKSxzPU5sKG4uZ2V0V2VzdCgpKSplLndvcmxkU2l6ZSxhPU5sKG4uZ2V0RWFzdCgpKSplLndvcmxkU2l6ZSxvPUdsKG4uZ2V0Tm9ydGgoKSkqZS53b3JsZFNpemUsbD1HbChuLmdldFNvdXRoKCkpKmUud29ybGRTaXplLHU9W3MsbywwXSxjPVthLG8sMF0saD1bcyxsLDBdLHA9W2EsbCwwXSxkPWZvKFtdLGUuZ2xvYmVNYXRyaXgpO3JldHVybiBGbyh1LHUsZCksRm8oYyxjLGQpLEZvKGgsaCxkKSxGbyhwLHAsZCksaVswXT12bChpWzBdLGgsciksaVsxXT12bChpWzFdLHAsciksaVsyXT12bChpWzJdLGMsciksaVszXT12bChpWzNdLHUsciksaWwuZnJvbVBvaW50cyhpKX1mdW5jdGlvbiB3bCh0LGUscil7Zm9yKGNvbnN0IG4gb2YgdClGbyhuLG4sZSksQ28obixuLHIpO31mdW5jdGlvbiBfbCh0LGUscil7Y29uc3Qgbj1lL3Qud29ybGRTaXplLGk9dC5nbG9iZU1hdHJpeDtpZihyLno8PTEpe2NvbnN0IHQ9eGwocikuZ2V0Q29ybmVycygpO3JldHVybiB3bCh0LGksbiksaWwuZnJvbVBvaW50cyh0KX1jb25zdCBzPUFsKHIpLGE9U2wocyk7d2woYSxpLG4pO2NvbnN0IG89TnVtYmVyLk1BWF9WQUxVRSxsPVstbywtbywtb10sdT1bbyxvLG9dO2lmKHMuY29udGFpbnModC5jZW50ZXIpKXtmb3IoY29uc3QgdCBvZiBhKUJvKHUsdSx0KSxFbyhsLGwsdCk7bFsyXT0wO2NvbnN0IGU9dC5wb2ludCxyPVtlLngqbixlLnkqbiwwXTtyZXR1cm4gQm8odSx1LHIpLEVvKGwsbCxyKSxuZXcgaWwodSxsKX1jb25zdCBjPVtpWzEyXSpuLGlbMTNdKm4saVsxNF0qbl0saD1zLmdldENlbnRlcigpLHA9TSh0LmNlbnRlci5sYXQsLUhsLEhsKSxkPU0oaC5sYXQsLUhsLEhsKSxmPU5sKHQuY2VudGVyLmxuZykseT1HbChwKTtsZXQgbT1mLU5sKGgubG5nKTtjb25zdCBnPXktR2woZCk7bT4uNT9tLT0xOm08LS41JiYobSs9MSk7bGV0IHg9MDtNYXRoLmFicyhtKT5NYXRoLmFicyhnKT94PW0+PTA/MTozOih4PWc+PTA/MDoyLFBvKGMsYyxbaVs0XSpuLGlbNV0qbixpWzZdKm5dLC1NYXRoLnNpbih3KGc+PTA/cy5nZXRTb3V0aCgpOnMuZ2V0Tm9ydGgoKSkpKm9sKSk7Y29uc3Qgdj1hW3hdLGI9YVsoeCsxKSU0XSxfPW5ldyBtbCh2LGIsYyksQT1bZ2woXywwKXx8dlswXSxnbChfLDEpfHx2WzFdLGdsKF8sMil8fHZbMl1dLFM9UGwodC56b29tKTtpZihTPjApe2NvbnN0IG49ZnVuY3Rpb24oe3g6dCx5OmUsejpyfSxuLGkscyxhKXtjb25zdCBvPTEvKDE8PHIpO2xldCBsPXQqbyx1PWwrbyxjPWUqbyxoPWMrbyxwPTA7Y29uc3QgZD0obCt1KS8yLXM7cmV0dXJuIGQ+LjU/cD0tMTpkPC0uNSYmKHA9MSksbD0oKGwrcCkqbi0ocyo9bikpKmkrcyx1PSgodStwKSpuLXMpKmkrcyxjPShjKm4tKGEqPW4pKSppK2EsaD0oaCpuLWEpKmkrYSxbW2wsaCwwXSxbdSxoLDBdLFt1LGMsMF0sW2wsYywwXV19KHIsZSx0Ll9waXhlbHNQZXJNZXJjYXRvclBpeGVsLGYseSk7Zm9yKGxldCB0PTA7dDxhLmxlbmd0aDt0KyspdmwoYVt0XSxuW3RdLFMpO2NvbnN0IGk9TW8oW10sblt4XSxuWyh4KzEpJTRdKTtDbyhpLGksLjUpLHZsKEEsaSxTKTt9Zm9yKGNvbnN0IHQgb2YgYSlCbyh1LHUsdCksRW8obCxsLHQpO3JldHVybiB1WzJdPU1hdGgubWluKHZbMl0sYlsyXSksQm8odSx1LEEpLEVvKGwsbCxBKSxuZXcgaWwodSxsKX1mdW5jdGlvbiBBbCh7eDp0LHk6ZSx6OnJ9KXtjb25zdCBuPTEvKDE8PHIpLGk9bmV3IE9sKEtsKHQqbiksWGwoKGUrMSkqbikpLHM9bmV3IE9sKEtsKCh0KzEpKm4pLFhsKGUqbikpO3JldHVybiBuZXcgb28oaSxzKX1mdW5jdGlvbiBTbCh0KXtjb25zdCBlPXcodC5nZXROb3J0aCgpKSxyPXcodC5nZXRTb3V0aCgpKSxuPU1hdGguY29zKGUpLGk9TWF0aC5jb3Mocikscz1NYXRoLnNpbihlKSxhPU1hdGguc2luKHIpLG89dC5nZXRXZXN0KCksbD10LmdldEVhc3QoKTtyZXR1cm4gW2tsKGksYSxvKSxrbChpLGEsbCksa2wobixzLGwpLGtsKG4scyxvKV19ZnVuY3Rpb24ga2wodCxlLHIsbj1vbCl7cmV0dXJuIHI9dyhyKSxbdCpNYXRoLnNpbihyKSpuLC1lKm4sdCpNYXRoLmNvcyhyKSpuXX1mdW5jdGlvbiBJbCh0LGUscil7cmV0dXJuIGtsKE1hdGguY29zKHcodCkpLE1hdGguc2luKHcodCkpLGUscil9ZnVuY3Rpb24gTWwodCxlLHIsbil7Y29uc3QgaT0xPDxyLnoscz0odC9hbytyLngpL2k7cmV0dXJuIElsKFhsKChlL2FvK3IueSkvaSksS2wocyksbil9ZnVuY3Rpb24gVGwoe21pbjp0LG1heDplfSl7cmV0dXJuIGxsL01hdGgubWF4KGVbMF0tdFswXSxlWzFdLXRbMV0sZVsyXS10WzJdKX1jb25zdCB6bD1uZXcgRmxvYXQ2NEFycmF5KDE2KTtmdW5jdGlvbiBCbCh0KXtjb25zdCBlPVRsKHQpLHI9Ym8oemwsW2UsZSxlXSk7cmV0dXJuIG1vKHIsciwoKG49W10pWzBdPS0oaT10Lm1pbilbMF0sblsxXT0taVsxXSxuWzJdPS1pWzJdLG4pKTt2YXIgbixpO31mdW5jdGlvbiBFbCh0KXtjb25zdCBlPShuPXQubWluLChyPXpsKVswXT0xLHJbMV09MCxyWzJdPTAsclszXT0wLHJbNF09MCxyWzVdPTEscls2XT0wLHJbN109MCxyWzhdPTAscls5XT0wLHJbMTBdPTEsclsxMV09MCxyWzEyXT1uWzBdLHJbMTNdPW5bMV0sclsxNF09blsyXSxyWzE1XT0xLHIpO3ZhciByLG47Y29uc3QgaT0xL1RsKHQpO3JldHVybiBnbyhlLGUsW2ksaSxpXSl9ZnVuY3Rpb24gQ2wodCxlLHIsbixpKXtjb25zdCBzPWZ1bmN0aW9uKHQpe2NvbnN0IGU9YW8vKDIqTWF0aC5QSSk7cmV0dXJuIHQvKDIqTWF0aC5QSSkvZX0ociksYT1bdCxlLC1yLygyKk1hdGguUEkpXSxvPXBvKG5ldyBGbG9hdDY0QXJyYXkoMTYpKTtyZXR1cm4gbW8obyxvLGEpLGdvKG8sbyxbcyxzLHNdKSx4byhvLG8sdygtaSkpLHZvKG8sbyx3KC1uKSksb31mdW5jdGlvbiBQbCh0KXtyZXR1cm4gVChzbCxhbCx0KX1mdW5jdGlvbiBEbCh0LGUpe2NvbnN0IHI9SWwoZS5sYXQsZS5sbmcpLG49ZnVuY3Rpb24odCl7Y29uc3QgZT1JbCh0Ll9jZW50ZXIubGF0LHQuX2NlbnRlci5sbmcpO2xldCByPUxvKFtdLElvKDAsMSwwKSxlKTtjb25zdCBuPXdvKFtdLC10LmFuZ2xlLGUpO3I9Rm8ocixyLG4pLHdvKG4sLXQuX3BpdGNoLHIpO2NvbnN0IGk9RG8oW10sZSk7cmV0dXJuIENvKGksaSxmbCh0LmNhbWVyYVRvQ2VudGVyRGlzdGFuY2UvdC5waXhlbHNQZXJNZXRlcikpLEZvKGksaSxuKSxNbyhbXSxlLGkpfSh0KTtyZXR1cm4gYT0oaT1UbyhbXSxuLHIpKVswXSxvPWlbMV0sbD1pWzJdLHU9KHM9cilbMF0sYz1zWzFdLGg9c1syXSxkPShwPU1hdGguc3FydChhKmErbypvK2wqbCkqTWF0aC5zcXJ0KHUqdStjKmMraCpoKSkmJlZvKGkscykvcCxNYXRoLmFjb3MoTWF0aC5taW4oTWF0aC5tYXgoZCwtMSksMSkpO3ZhciBpLHMsYSxvLGwsdSxjLGgscCxkO31mdW5jdGlvbiBWbCh0LGUpe3JldHVybiBEbCh0LGUpPk1hdGguUEkvMioxLjAxfWNvbnN0IExsPXcoODUpLEZsPU1hdGguY29zKExsKSxSbD1NYXRoLnNpbihMbCksVWw9NjM3MTAwOC44LCRsPTIqTWF0aC5QSSpVbDtjbGFzcyBqbHtjb25zdHJ1Y3Rvcih0LGUpe2lmKGlzTmFOKHQpfHxpc05hTihlKSl0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgTG5nTGF0IG9iamVjdDogKCR7dH0sICR7ZX0pYCk7aWYodGhpcy5sbmc9K3QsdGhpcy5sYXQ9K2UsdGhpcy5sYXQ+OTB8fHRoaXMubGF0PC05MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIExuZ0xhdCBsYXRpdHVkZSB2YWx1ZTogbXVzdCBiZSBiZXR3ZWVuIC05MCBhbmQgOTBcIil9d3JhcCgpe3JldHVybiBuZXcgamwoeih0aGlzLmxuZywtMTgwLDE4MCksdGhpcy5sYXQpfXRvQXJyYXkoKXtyZXR1cm4gW3RoaXMubG5nLHRoaXMubGF0XX10b1N0cmluZygpe3JldHVybiBgTG5nTGF0KCR7dGhpcy5sbmd9LCAke3RoaXMubGF0fSlgfWRpc3RhbmNlVG8odCl7Y29uc3QgZT1NYXRoLlBJLzE4MCxyPXRoaXMubGF0KmUsbj10LmxhdCplLGk9TWF0aC5zaW4ocikqTWF0aC5zaW4obikrTWF0aC5jb3MocikqTWF0aC5jb3MobikqTWF0aC5jb3MoKHQubG5nLXRoaXMubG5nKSplKTtyZXR1cm4gVWwqTWF0aC5hY29zKE1hdGgubWluKGksMSkpfXRvQm91bmRzKHQ9MCl7Y29uc3QgZT0zNjAqdC80MDA3NTAxNyxyPWUvTWF0aC5jb3MoTWF0aC5QSS8xODAqdGhpcy5sYXQpO3JldHVybiBuZXcgb28obmV3IGpsKHRoaXMubG5nLXIsdGhpcy5sYXQtZSksbmV3IGpsKHRoaXMubG5nK3IsdGhpcy5sYXQrZSkpfXRvRWNlZih0KXtjb25zdCBlPWZsKHQpO3JldHVybiBJbCh0aGlzLmxhdCx0aGlzLmxuZyxvbCtlKX1zdGF0aWMgY29udmVydCh0KXtpZih0IGluc3RhbmNlb2YgamwpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSYmKDI9PT10Lmxlbmd0aHx8Mz09PXQubGVuZ3RoKSlyZXR1cm4gbmV3IGpsKE51bWJlcih0WzBdKSxOdW1iZXIodFsxXSkpO2lmKCFBcnJheS5pc0FycmF5KHQpJiZcIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9PXQpcmV0dXJuIG5ldyBqbChOdW1iZXIoXCJsbmdcImluIHQ/dC5sbmc6dC5sb24pLE51bWJlcih0LmxhdCkpO3Rocm93IG5ldyBFcnJvcihcImBMbmdMYXRMaWtlYCBhcmd1bWVudCBtdXN0IGJlIHNwZWNpZmllZCBhcyBhIExuZ0xhdCBpbnN0YW5jZSwgYW4gb2JqZWN0IHtsbmc6IDxsbmc+LCBsYXQ6IDxsYXQ+fSwgYW4gb2JqZWN0IHtsb246IDxsbmc+LCBsYXQ6IDxsYXQ+fSwgb3IgYW4gYXJyYXkgb2YgWzxsbmc+LCA8bGF0Pl1cIil9fXZhciBPbD1qbDtmdW5jdGlvbiBxbCh0KXtyZXR1cm4gJGwqTWF0aC5jb3ModCpNYXRoLlBJLzE4MCl9ZnVuY3Rpb24gTmwodCl7cmV0dXJuICgxODArdCkvMzYwfWZ1bmN0aW9uIEdsKHQpe3JldHVybiAoMTgwLTE4MC9NYXRoLlBJKk1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkvNCt0Kk1hdGguUEkvMzYwKSkpLzM2MH1mdW5jdGlvbiBabCh0LGUpe3JldHVybiB0L3FsKGUpfWZ1bmN0aW9uIEtsKHQpe3JldHVybiAzNjAqdC0xODB9ZnVuY3Rpb24gWGwodCl7cmV0dXJuIDM2MC9NYXRoLlBJKk1hdGguYXRhbihNYXRoLmV4cCgoMTgwLTM2MCp0KSpNYXRoLlBJLzE4MCkpLTkwfWZ1bmN0aW9uIEpsKHQsZSl7cmV0dXJuIHQqcWwoWGwoZSkpfWNvbnN0IEhsPTg1LjA1MTEyOTtmdW5jdGlvbiBZbCh0KXtyZXR1cm4gMS9NYXRoLmNvcyh0Kk1hdGguUEkvMTgwKX1jbGFzcyBXbHtjb25zdHJ1Y3Rvcih0LGUscj0wKXt0aGlzLng9K3QsdGhpcy55PStlLHRoaXMuej0rcjt9c3RhdGljIGZyb21MbmdMYXQodCxlPTApe2NvbnN0IHI9T2wuY29udmVydCh0KTtyZXR1cm4gbmV3IFdsKE5sKHIubG5nKSxHbChyLmxhdCksWmwoZSxyLmxhdCkpfXRvTG5nTGF0KCl7cmV0dXJuIG5ldyBPbChLbCh0aGlzLngpLFhsKHRoaXMueSkpfXRvQWx0aXR1ZGUoKXtyZXR1cm4gSmwodGhpcy56LHRoaXMueSl9bWV0ZXJJbk1lcmNhdG9yQ29vcmRpbmF0ZVVuaXRzKCl7cmV0dXJuIDEvJGwqWWwoWGwodGhpcy55KSl9fWZ1bmN0aW9uIFFsKHQsZSxyLG4saSxzLGEsbyxsKXtjb25zdCB1PShlK24pLzIsYz0ocitpKS8yLGg9bmV3IHgodSxjKTtvKGgpLGZ1bmN0aW9uKHQsZSxyLG4saSxzKXtjb25zdCBhPXItaSxvPW4tcztyZXR1cm4gTWF0aC5hYnMoKG4tZSkqYS0oci10KSpvKS9NYXRoLmh5cG90KGEsbyl9KGgueCxoLnkscy54LHMueSxhLngsYS55KT49bD8oUWwodCxlLHIsdSxjLHMsaCxvLGwpLFFsKHQsdSxjLG4saSxoLGEsbyxsKSk6dC5wdXNoKGEpO31mdW5jdGlvbiB0dSh0LGUscil7bGV0IG49dFswXSxpPW4ueCxzPW4ueTtlKG4pO2NvbnN0IGE9W25dO2ZvcihsZXQgbz0xO288dC5sZW5ndGg7bysrKXtjb25zdCBsPXRbb10se3g6dSx5OmN9PWw7ZShsKSxRbChhLGkscyx1LGMsbixsLGUsciksaT11LHM9YyxuPWw7fXJldHVybiBhfWZ1bmN0aW9uIGV1KHQsZSxyLG4pe2lmKG4oZSxyKSl7Y29uc3QgaT1lLmFkZChyKS5fbXVsdCguNSk7ZXUodCxlLGksbiksZXUodCxpLHIsbik7fWVsc2UgdC5wdXNoKHIpO31mdW5jdGlvbiBydSh0LGUpe2xldCByPXRbMF07Y29uc3Qgbj1bcl07Zm9yKGxldCBpPTE7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IHM9dFtpXTtldShuLHIscyxlKSxyPXM7fXJldHVybiBufWNvbnN0IG51PU1hdGgucG93KDIsMTQpLTEsaXU9LW51LTE7ZnVuY3Rpb24gc3UodCxlKXtjb25zdCByPU1hdGgucm91bmQodC54KmUpLG49TWF0aC5yb3VuZCh0LnkqZSk7cmV0dXJuIHQueD1NKHIsaXUsbnUpLHQueT1NKG4saXUsbnUpLChyPHQueHx8cj50LngrMXx8bjx0Lnl8fG4+dC55KzEpJiZOKFwiR2VvbWV0cnkgZXhjZWVkcyBhbGxvd2VkIGV4dGVudCwgcmVkdWNlIHlvdXIgdmVjdG9yIHRpbGUgYnVmZmVyIHNpemVcIiksdH1mdW5jdGlvbiBhdSh0LGUscil7Y29uc3Qgbj10LmxvYWRHZW9tZXRyeSgpLGk9dC5leHRlbnQscz1hby9pO2lmKGUmJnImJnIucHJvamVjdGlvbi5pc1JlcHJvamVjdGVkSW5UaWxlU3BhY2Upe2NvbnN0IHM9MTw8ZS56LHtzY2FsZTphLHg6byx5OmwscHJvamVjdGlvbjp1fT1yLGM9dD0+e2NvbnN0IHI9S2woKGUueCt0LngvaSkvcyksbj1YbCgoZS55K3QueS9pKS9zKSxjPXUucHJvamVjdChyLG4pO3QueD0oYy54KmEtbykqaSx0Lnk9KGMueSphLWwpKmk7fTtmb3IobGV0IGU9MDtlPG4ubGVuZ3RoO2UrKylpZigxIT09dC50eXBlKW5bZV09dHUobltlXSxjLDEpO2Vsc2Uge2NvbnN0IHQ9W107Zm9yKGNvbnN0IHIgb2YgbltlXSlyLng8MHx8ci54Pj1pfHxyLnk8MHx8ci55Pj1pfHwoYyhyKSx0LnB1c2gocikpO25bZV09dDt9fWZvcihjb25zdCB0IG9mIG4pZm9yKGNvbnN0IGUgb2YgdClzdShlLHMpO3JldHVybiBufWZ1bmN0aW9uIG91KHQsZSl7cmV0dXJuIHt0eXBlOnQudHlwZSxpZDp0LmlkLHByb3BlcnRpZXM6dC5wcm9wZXJ0aWVzLGdlb21ldHJ5OmU/YXUodCk6W119fWZ1bmN0aW9uIGx1KHQsZSxyLG4saSl7dC5lbXBsYWNlQmFjaygyKmUrKG4rMSkvMiwyKnIrKGkrMSkvMik7fWZ1bmN0aW9uIHV1KHQsZSxyKXtjb25zdCBuPTE2Mzg0O3QuZW1wbGFjZUJhY2soZS54LGUueSxlLnosclswXSpuLHJbMV0qbixyWzJdKm4pO31jbGFzcyBjdXtjb25zdHJ1Y3Rvcih0KXt0aGlzLnpvb209dC56b29tLHRoaXMub3ZlcnNjYWxpbmc9dC5vdmVyc2NhbGluZyx0aGlzLmxheWVycz10LmxheWVycyx0aGlzLmxheWVySWRzPXRoaXMubGF5ZXJzLm1hcCgodD0+dC5pZCkpLHRoaXMuaW5kZXg9dC5pbmRleCx0aGlzLmhhc1BhdHRlcm49ITEsdGhpcy5wcm9qZWN0aW9uPXQucHJvamVjdGlvbix0aGlzLmxheW91dFZlcnRleEFycmF5PW5ldyAkcyx0aGlzLmluZGV4QXJyYXk9bmV3IHJhLHRoaXMuc2VnbWVudHM9bmV3IHNvLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zPW5ldyBKYSh0LmxheWVycyx0Lnpvb20pLHRoaXMuc3RhdGVEZXBlbmRlbnRMYXllcklkcz10aGlzLmxheWVycy5maWx0ZXIoKHQ9PnQuaXNTdGF0ZURlcGVuZGVudCgpKSkubWFwKCh0PT50LmlkKSk7fXBvcHVsYXRlKHQsZSxyLG4pe2NvbnN0IGk9dGhpcy5sYXllcnNbMF0scz1bXTtsZXQgYT1udWxsO1wiY2lyY2xlXCI9PT1pLnR5cGUmJihhPWkubGF5b3V0LmdldChcImNpcmNsZS1zb3J0LWtleVwiKSk7Zm9yKGNvbnN0e2ZlYXR1cmU6ZSxpZDppLGluZGV4Om8sc291cmNlTGF5ZXJJbmRleDpsfW9mIHQpe2NvbnN0IHQ9dGhpcy5sYXllcnNbMF0uX2ZlYXR1cmVGaWx0ZXIubmVlZEdlb21ldHJ5LHU9b3UoZSx0KTtpZighdGhpcy5sYXllcnNbMF0uX2ZlYXR1cmVGaWx0ZXIuZmlsdGVyKG5ldyB3cyh0aGlzLnpvb20pLHUscikpY29udGludWU7Y29uc3QgYz1hP2EuZXZhbHVhdGUodSx7fSxyKTp2b2lkIDAsaD17aWQ6aSxwcm9wZXJ0aWVzOmUucHJvcGVydGllcyx0eXBlOmUudHlwZSxzb3VyY2VMYXllckluZGV4OmwsaW5kZXg6byxnZW9tZXRyeTp0P3UuZ2VvbWV0cnk6YXUoZSxyLG4pLHBhdHRlcm5zOnt9LHNvcnRLZXk6Y307cy5wdXNoKGgpO31hJiZzLnNvcnQoKCh0LGUpPT50LnNvcnRLZXktZS5zb3J0S2V5KSk7bGV0IG89bnVsbDtcImdsb2JlXCI9PT1uLnByb2plY3Rpb24ubmFtZSYmKHRoaXMuZ2xvYmVFeHRWZXJ0ZXhBcnJheT1uZXcgS3Msbz1uLnByb2plY3Rpb24pO2Zvcihjb25zdCBuIG9mIHMpe2NvbnN0e2dlb21ldHJ5OmksaW5kZXg6cyxzb3VyY2VMYXllckluZGV4OmF9PW4sbD10W3NdLmZlYXR1cmU7dGhpcy5hZGRGZWF0dXJlKG4saSxzLGUuYXZhaWxhYmxlSW1hZ2VzLHIsbyksZS5mZWF0dXJlSW5kZXguaW5zZXJ0KGwsaSxzLGEsdGhpcy5pbmRleCk7fX11cGRhdGUodCxlLHIsbil7dGhpcy5zdGF0ZURlcGVuZGVudExheWVycy5sZW5ndGgmJnRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnVwZGF0ZVBhaW50QXJyYXlzKHQsZSx0aGlzLnN0YXRlRGVwZW5kZW50TGF5ZXJzLHIsbik7fWlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RofXVwbG9hZFBlbmRpbmcoKXtyZXR1cm4gIXRoaXMudXBsb2FkZWR8fHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLm5lZWRzVXBsb2FkfXVwbG9hZCh0KXt0aGlzLnVwbG9hZGVkfHwodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxuby5tZW1iZXJzKSx0aGlzLmluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIodGhpcy5pbmRleEFycmF5KSx0aGlzLmdsb2JlRXh0VmVydGV4QXJyYXkmJih0aGlzLmdsb2JlRXh0VmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMuZ2xvYmVFeHRWZXJ0ZXhBcnJheSxpby5tZW1iZXJzKSkpLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnVwbG9hZCh0KSx0aGlzLnVwbG9hZGVkPSEwO31kZXN0cm95KCl7dGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXImJih0aGlzLmxheW91dFZlcnRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5pbmRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMuZGVzdHJveSgpLHRoaXMuc2VnbWVudHMuZGVzdHJveSgpLHRoaXMuZ2xvYmVFeHRWZXJ0ZXhCdWZmZXImJnRoaXMuZ2xvYmVFeHRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpKTt9YWRkRmVhdHVyZSh0LGUscixuLGkscyl7Zm9yKGNvbnN0IHIgb2YgZSlmb3IoY29uc3QgZSBvZiByKXtjb25zdCByPWUueCxuPWUueTtpZihyPDB8fHI+PWFvfHxuPDB8fG4+PWFvKWNvbnRpbnVlO2lmKHMpe2NvbnN0IHQ9cy5wcm9qZWN0VGlsZVBvaW50KHIsbixpKSxlPXMudXBWZWN0b3IoaSxyLG4pLGE9dGhpcy5nbG9iZUV4dFZlcnRleEFycmF5O3V1KGEsdCxlKSx1dShhLHQsZSksdXUoYSx0LGUpLHV1KGEsdCxlKTt9Y29uc3QgYT10aGlzLnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KDQsdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXksdC5zb3J0S2V5KSxvPWEudmVydGV4TGVuZ3RoO2x1KHRoaXMubGF5b3V0VmVydGV4QXJyYXkscixuLC0xLC0xKSxsdSh0aGlzLmxheW91dFZlcnRleEFycmF5LHIsbiwxLC0xKSxsdSh0aGlzLmxheW91dFZlcnRleEFycmF5LHIsbiwxLDEpLGx1KHRoaXMubGF5b3V0VmVydGV4QXJyYXkscixuLC0xLDEpLHRoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhvLG8rMSxvKzIpLHRoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhvLG8rMixvKzMpLGEudmVydGV4TGVuZ3RoKz00LGEucHJpbWl0aXZlTGVuZ3RoKz0yO310aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5wb3B1bGF0ZVBhaW50QXJyYXlzKHRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RoLHQscix7fSxuLGkpO319ZnVuY3Rpb24gaHUodCxlKXtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKylpZihidShlLHRbcl0pKXJldHVybiAhMDtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKylpZihidSh0LGVbcl0pKXJldHVybiAhMDtyZXR1cm4gISF5dSh0LGUpfWZ1bmN0aW9uIHB1KHQsZSxyKXtyZXR1cm4gISFidSh0LGUpfHwhIWd1KGUsdCxyKX1mdW5jdGlvbiBkdSh0LGUpe2lmKDE9PT10Lmxlbmd0aClyZXR1cm4gdnUoZSx0WzBdKTtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKyl7Y29uc3Qgbj1lW3JdO2ZvcihsZXQgZT0wO2U8bi5sZW5ndGg7ZSsrKWlmKGJ1KHQsbltlXSkpcmV0dXJuICEwfWZvcihsZXQgcj0wO3I8dC5sZW5ndGg7cisrKWlmKHZ1KGUsdFtyXSkpcmV0dXJuICEwO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGg7cisrKWlmKHl1KHQsZVtyXSkpcmV0dXJuICEwO3JldHVybiAhMX1mdW5jdGlvbiBmdSh0LGUscil7aWYodC5sZW5ndGg+MSl7aWYoeXUodCxlKSlyZXR1cm4gITA7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspaWYoZ3UoZVtuXSx0LHIpKXJldHVybiAhMH1mb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKylpZihndSh0W25dLGUscikpcmV0dXJuICEwO3JldHVybiAhMX1mdW5jdGlvbiB5dSh0LGUpe2lmKDA9PT10Lmxlbmd0aHx8MD09PWUubGVuZ3RoKXJldHVybiAhMTtmb3IobGV0IHI9MDtyPHQubGVuZ3RoLTE7cisrKXtjb25zdCBuPXRbcl0saT10W3IrMV07Zm9yKGxldCB0PTA7dDxlLmxlbmd0aC0xO3QrKylpZihtdShuLGksZVt0XSxlW3QrMV0pKXJldHVybiAhMH1yZXR1cm4gITF9ZnVuY3Rpb24gbXUodCxlLHIsbil7cmV0dXJuIEcodCxyLG4pIT09RyhlLHIsbikmJkcodCxlLHIpIT09Ryh0LGUsbil9ZnVuY3Rpb24gZ3UodCxlLHIpe2NvbnN0IG49cipyO2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gdC5kaXN0U3FyKGVbMF0pPG47Zm9yKGxldCByPTE7cjxlLmxlbmd0aDtyKyspaWYoeHUodCxlW3ItMV0sZVtyXSk8bilyZXR1cm4gITA7cmV0dXJuICExfWZ1bmN0aW9uIHh1KHQsZSxyKXtjb25zdCBuPWUuZGlzdFNxcihyKTtpZigwPT09bilyZXR1cm4gdC5kaXN0U3FyKGUpO2NvbnN0IGk9KCh0LngtZS54KSooci54LWUueCkrKHQueS1lLnkpKihyLnktZS55KSkvbjtyZXR1cm4gdC5kaXN0U3FyKGk8MD9lOmk+MT9yOnIuc3ViKGUpLl9tdWx0KGkpLl9hZGQoZSkpfWZ1bmN0aW9uIHZ1KHQsZSl7bGV0IHIsbixpLHM9ITE7Zm9yKGxldCBhPTA7YTx0Lmxlbmd0aDthKyspe3I9dFthXTtmb3IobGV0IHQ9MCxhPXIubGVuZ3RoLTE7dDxyLmxlbmd0aDthPXQrKyluPXJbdF0saT1yW2FdLG4ueT5lLnkhPWkueT5lLnkmJmUueDwoaS54LW4ueCkqKGUueS1uLnkpLyhpLnktbi55KStuLngmJihzPSFzKTt9cmV0dXJuIHN9ZnVuY3Rpb24gYnUodCxlKXtsZXQgcj0hMTtmb3IobGV0IG49MCxpPXQubGVuZ3RoLTE7bjx0Lmxlbmd0aDtpPW4rKyl7Y29uc3Qgcz10W25dLGE9dFtpXTtzLnk+ZS55IT1hLnk+ZS55JiZlLng8KGEueC1zLngpKihlLnktcy55KS8oYS55LXMueSkrcy54JiYocj0hcik7fXJldHVybiByfWZ1bmN0aW9uIHd1KHQsZSxyLG4saSl7Zm9yKGNvbnN0IHMgb2YgdClpZihlPD1zLngmJnI8PXMueSYmbj49cy54JiZpPj1zLnkpcmV0dXJuICEwO2NvbnN0IHM9W25ldyB4KGUsciksbmV3IHgoZSxpKSxuZXcgeChuLGkpLG5ldyB4KG4scildO2lmKHQubGVuZ3RoPjIpZm9yKGNvbnN0IGUgb2YgcylpZihidSh0LGUpKXJldHVybiAhMDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoLTE7ZSsrKWlmKF91KHRbZV0sdFtlKzFdLHMpKXJldHVybiAhMDtyZXR1cm4gITF9ZnVuY3Rpb24gX3UodCxlLHIpe2NvbnN0IG49clswXSxpPXJbMl07aWYodC54PG4ueCYmZS54PG4ueHx8dC54PmkueCYmZS54PmkueHx8dC55PG4ueSYmZS55PG4ueXx8dC55PmkueSYmZS55PmkueSlyZXR1cm4gITE7Y29uc3Qgcz1HKHQsZSxyWzBdKTtyZXR1cm4gcyE9PUcodCxlLHJbMV0pfHxzIT09Ryh0LGUsclsyXSl8fHMhPT1HKHQsZSxyWzNdKX1mdW5jdGlvbiBBdSh0LGUscil7Y29uc3Qgbj1lLnBhaW50LmdldCh0KS52YWx1ZTtyZXR1cm4gXCJjb25zdGFudFwiPT09bi5raW5kP24udmFsdWU6ci5wcm9ncmFtQ29uZmlndXJhdGlvbnMuZ2V0KGUuaWQpLmdldE1heFZhbHVlKHQpfWZ1bmN0aW9uIFN1KHQpe3JldHVybiBNYXRoLnNxcnQodFswXSp0WzBdK3RbMV0qdFsxXSl9ZnVuY3Rpb24ga3UodCxlLHIsbixpKXtpZighZVswXSYmIWVbMV0pcmV0dXJuIHQ7Y29uc3Qgcz14LmNvbnZlcnQoZSkuX211bHQoaSk7XCJ2aWV3cG9ydFwiPT09ciYmcy5fcm90YXRlKC1uKTtjb25zdCBhPVtdO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKWEucHVzaCh0W2VdLnN1YihzKSk7cmV0dXJuIGF9ZnVuY3Rpb24gSXUodCxlLHIsbil7Y29uc3QgaT14LmNvbnZlcnQodCkuX211bHQobik7cmV0dXJuIFwidmlld3BvcnRcIj09PWUmJmkuX3JvdGF0ZSgtciksaX1KaShjdSxcIkNpcmNsZUJ1Y2tldFwiLHtvbWl0OltcImxheWVyc1wiXX0pO2NvbnN0IE11PW5ldyBQcyh7XCJjaXJjbGUtc29ydC1rZXlcIjpuZXcgRXModGUubGF5b3V0X2NpcmNsZVtcImNpcmNsZS1zb3J0LWtleVwiXSl9KTt2YXIgVHU9e3BhaW50Om5ldyBQcyh7XCJjaXJjbGUtcmFkaXVzXCI6bmV3IEVzKHRlLnBhaW50X2NpcmNsZVtcImNpcmNsZS1yYWRpdXNcIl0pLFwiY2lyY2xlLWNvbG9yXCI6bmV3IEVzKHRlLnBhaW50X2NpcmNsZVtcImNpcmNsZS1jb2xvclwiXSksXCJjaXJjbGUtYmx1clwiOm5ldyBFcyh0ZS5wYWludF9jaXJjbGVbXCJjaXJjbGUtYmx1clwiXSksXCJjaXJjbGUtb3BhY2l0eVwiOm5ldyBFcyh0ZS5wYWludF9jaXJjbGVbXCJjaXJjbGUtb3BhY2l0eVwiXSksXCJjaXJjbGUtdHJhbnNsYXRlXCI6bmV3IEJzKHRlLnBhaW50X2NpcmNsZVtcImNpcmNsZS10cmFuc2xhdGVcIl0pLFwiY2lyY2xlLXRyYW5zbGF0ZS1hbmNob3JcIjpuZXcgQnModGUucGFpbnRfY2lyY2xlW1wiY2lyY2xlLXRyYW5zbGF0ZS1hbmNob3JcIl0pLFwiY2lyY2xlLXBpdGNoLXNjYWxlXCI6bmV3IEJzKHRlLnBhaW50X2NpcmNsZVtcImNpcmNsZS1waXRjaC1zY2FsZVwiXSksXCJjaXJjbGUtcGl0Y2gtYWxpZ25tZW50XCI6bmV3IEJzKHRlLnBhaW50X2NpcmNsZVtcImNpcmNsZS1waXRjaC1hbGlnbm1lbnRcIl0pLFwiY2lyY2xlLXN0cm9rZS13aWR0aFwiOm5ldyBFcyh0ZS5wYWludF9jaXJjbGVbXCJjaXJjbGUtc3Ryb2tlLXdpZHRoXCJdKSxcImNpcmNsZS1zdHJva2UtY29sb3JcIjpuZXcgRXModGUucGFpbnRfY2lyY2xlW1wiY2lyY2xlLXN0cm9rZS1jb2xvclwiXSksXCJjaXJjbGUtc3Ryb2tlLW9wYWNpdHlcIjpuZXcgRXModGUucGFpbnRfY2lyY2xlW1wiY2lyY2xlLXN0cm9rZS1vcGFjaXR5XCJdKX0pLGxheW91dDpNdX07ZnVuY3Rpb24genUodCxlLHIsbixpLHMsYSxvLGwpe2lmKHMmJnQucXVlcnlHZW9tZXRyeS5pc0Fib3ZlSG9yaXpvbilyZXR1cm4gITE7cyYmKGwqPXQucGl4ZWxUb1RpbGVVbml0c0ZhY3Rvcik7Y29uc3QgdT10LnRpbGVJRC5jYW5vbmljYWwsYz1yLnByb2plY3Rpb24udXBWZWN0b3JTY2FsZSh1LHIuY2VudGVyLmxhdCxyLndvcmxkU2l6ZSkubWV0ZXJzVG9UaWxlO2Zvcihjb25zdCBoIG9mIGUpZm9yKGNvbnN0IGUgb2YgaCl7Y29uc3QgaD1lLmFkZChvKSxwPWkmJnIuZWxldmF0aW9uP3IuZWxldmF0aW9uLmV4YWdnZXJhdGlvbigpKmkuZ2V0RWxldmF0aW9uQXQoaC54LGgueSwhMCk6MCxkPXIucHJvamVjdGlvbi5wcm9qZWN0VGlsZVBvaW50KGgueCxoLnksdSk7aWYocD4wKXtjb25zdCB0PXIucHJvamVjdGlvbi51cFZlY3Rvcih1LGgueCxoLnkpO2QueCs9dFswXSpjKnAsZC55Kz10WzFdKmMqcCxkLnorPXRbMl0qYypwO31jb25zdCBmPXM/aDpCdShkLngsZC55LGQueixuKSx5PXM/dC50aWxlc3BhY2VSYXlzLm1hcCgodD0+UHUodCxwKSkpOnQucXVlcnlHZW9tZXRyeS5zY3JlZW5HZW9tZXRyeSxtPUdvKFtdLFtkLngsZC55LGQueiwxXSxuKTtpZighYSYmcz9sKj1tWzNdL3IuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZTphJiYhcyYmKGwqPXIuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZS9tWzNdKSxzKXtjb25zdCB0PVhsKChlLnkvYW8rdS55KS8oMTw8dS56KSk7bC89ci5wcm9qZWN0aW9uLnBpeGVsc1Blck1ldGVyKHQsMSkvWmwoMSx0KTt9aWYocHUoeSxmLGwpKXJldHVybiAhMH1yZXR1cm4gITF9ZnVuY3Rpb24gQnUodCxlLHIsbil7Y29uc3QgaT1HbyhbXSxbdCxlLHIsMV0sbik7cmV0dXJuIG5ldyB4KGlbMF0vaVszXSxpWzFdL2lbM10pfWNvbnN0IEV1PUlvKDAsMCwwKSxDdT1JbygwLDAsMSk7ZnVuY3Rpb24gUHUodCxlKXtjb25zdCByPUFvKCk7cmV0dXJuIEV1WzJdPWUsdC5pbnRlcnNlY3RzUGxhbmUoRXUsQ3UsciksbmV3IHgoclswXSxyWzFdKX1jbGFzcyBEdSBleHRlbmRzIGN1e31mdW5jdGlvbiBWdSh0LHt3aWR0aDplLGhlaWdodDpyfSxuLGkpe2lmKGkpe2lmKGkgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSlpPW5ldyBVaW50OEFycmF5KGkuYnVmZmVyKTtlbHNlIGlmKGkubGVuZ3RoIT09ZSpyKm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJtaXNtYXRjaGVkIGltYWdlIHNpemVcIil9ZWxzZSBpPW5ldyBVaW50OEFycmF5KGUqcipuKTtyZXR1cm4gdC53aWR0aD1lLHQuaGVpZ2h0PXIsdC5kYXRhPWksdH1mdW5jdGlvbiBMdSh0LGUscil7Y29uc3R7d2lkdGg6bixoZWlnaHQ6aX09ZTtuPT09dC53aWR0aCYmaT09PXQuaGVpZ2h0fHwoRnUodCxlLHt4OjAseTowfSx7eDowLHk6MH0se3dpZHRoOk1hdGgubWluKHQud2lkdGgsbiksaGVpZ2h0Ok1hdGgubWluKHQuaGVpZ2h0LGkpfSxyKSx0LndpZHRoPW4sdC5oZWlnaHQ9aSx0LmRhdGE9ZS5kYXRhKTt9ZnVuY3Rpb24gRnUodCxlLHIsbixpLHMpe2lmKDA9PT1pLndpZHRofHwwPT09aS5oZWlnaHQpcmV0dXJuIGU7aWYoaS53aWR0aD50LndpZHRofHxpLmhlaWdodD50LmhlaWdodHx8ci54PnQud2lkdGgtaS53aWR0aHx8ci55PnQuaGVpZ2h0LWkuaGVpZ2h0KXRocm93IG5ldyBSYW5nZUVycm9yKFwib3V0IG9mIHJhbmdlIHNvdXJjZSBjb29yZGluYXRlcyBmb3IgaW1hZ2UgY29weVwiKTtpZihpLndpZHRoPmUud2lkdGh8fGkuaGVpZ2h0PmUuaGVpZ2h0fHxuLng+ZS53aWR0aC1pLndpZHRofHxuLnk+ZS5oZWlnaHQtaS5oZWlnaHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgZGVzdGluYXRpb24gY29vcmRpbmF0ZXMgZm9yIGltYWdlIGNvcHlcIik7Y29uc3QgYT10LmRhdGEsbz1lLmRhdGE7Zm9yKGxldCBsPTA7bDxpLmhlaWdodDtsKyspe2NvbnN0IHU9KChyLnkrbCkqdC53aWR0aCtyLngpKnMsYz0oKG4ueStsKSplLndpZHRoK24ueCkqcztmb3IobGV0IHQ9MDt0PGkud2lkdGgqczt0Kyspb1tjK3RdPWFbdSt0XTt9cmV0dXJuIGV9SmkoRHUsXCJIZWF0bWFwQnVja2V0XCIse29taXQ6W1wibGF5ZXJzXCJdfSk7Y2xhc3MgUnV7Y29uc3RydWN0b3IodCxlKXtWdSh0aGlzLHQsMSxlKTt9cmVzaXplKHQpe0x1KHRoaXMsbmV3IFJ1KHQpLDEpO31jbG9uZSgpe3JldHVybiBuZXcgUnUoe3dpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fSxuZXcgVWludDhBcnJheSh0aGlzLmRhdGEpKX1zdGF0aWMgY29weSh0LGUscixuLGkpe0Z1KHQsZSxyLG4saSwxKTt9fWNsYXNzIFV1e2NvbnN0cnVjdG9yKHQsZSl7VnUodGhpcyx0LDQsZSk7fXJlc2l6ZSh0KXtMdSh0aGlzLG5ldyBVdSh0KSw0KTt9cmVwbGFjZSh0LGUpe2U/dGhpcy5kYXRhLnNldCh0KTp0aGlzLmRhdGE9dCBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5P25ldyBVaW50OEFycmF5KHQuYnVmZmVyKTp0O31jbG9uZSgpe3JldHVybiBuZXcgVXUoe3dpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fSxuZXcgVWludDhBcnJheSh0aGlzLmRhdGEpKX1zdGF0aWMgY29weSh0LGUscixuLGkpe0Z1KHQsZSxyLG4saSw0KTt9fUppKFJ1LFwiQWxwaGFJbWFnZVwiKSxKaShVdSxcIlJHQkFJbWFnZVwiKTt2YXIgJHU9e3BhaW50Om5ldyBQcyh7XCJoZWF0bWFwLXJhZGl1c1wiOm5ldyBFcyh0ZS5wYWludF9oZWF0bWFwW1wiaGVhdG1hcC1yYWRpdXNcIl0pLFwiaGVhdG1hcC13ZWlnaHRcIjpuZXcgRXModGUucGFpbnRfaGVhdG1hcFtcImhlYXRtYXAtd2VpZ2h0XCJdKSxcImhlYXRtYXAtaW50ZW5zaXR5XCI6bmV3IEJzKHRlLnBhaW50X2hlYXRtYXBbXCJoZWF0bWFwLWludGVuc2l0eVwiXSksXCJoZWF0bWFwLWNvbG9yXCI6bmV3IENzKHRlLnBhaW50X2hlYXRtYXBbXCJoZWF0bWFwLWNvbG9yXCJdKSxcImhlYXRtYXAtb3BhY2l0eVwiOm5ldyBCcyh0ZS5wYWludF9oZWF0bWFwW1wiaGVhdG1hcC1vcGFjaXR5XCJdKX0pfTtmdW5jdGlvbiBqdSh0KXtjb25zdCBlPXt9LHI9dC5yZXNvbHV0aW9ufHwyNTYsbj10LmNsaXBzP3QuY2xpcHMubGVuZ3RoOjEsaT10LmltYWdlfHxuZXcgVXUoe3dpZHRoOnIsaGVpZ2h0Om59KSxzPShyLG4scyk9PntlW3QuZXZhbHVhdGlvbktleV09cztjb25zdCBhPXQuZXhwcmVzc2lvbi5ldmFsdWF0ZShlKTtpLmRhdGFbcituKzBdPU1hdGguZmxvb3IoMjU1KmEuci9hLmEpLGkuZGF0YVtyK24rMV09TWF0aC5mbG9vcigyNTUqYS5nL2EuYSksaS5kYXRhW3IrbisyXT1NYXRoLmZsb29yKDI1NSphLmIvYS5hKSxpLmRhdGFbcituKzNdPU1hdGguZmxvb3IoMjU1KmEuYSk7fTtpZih0LmNsaXBzKWZvcihsZXQgZT0wLGk9MDtlPG47KytlLGkrPTQqcilmb3IobGV0IG49MCxhPTA7bjxyO24rKyxhKz00KXtjb25zdCBvPW4vKHItMSkse3N0YXJ0OmwsZW5kOnV9PXQuY2xpcHNbZV07cyhpLGEsbCooMS1vKSt1Km8pO31lbHNlIGZvcihsZXQgdD0wLGU9MDt0PHI7dCsrLGUrPTQpcygwLGUsdC8oci0xKSk7cmV0dXJuIGl9dmFyIE91PXtwYWludDpuZXcgUHMoe1wiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1kaXJlY3Rpb25cIjpuZXcgQnModGUucGFpbnRfaGlsbHNoYWRlW1wiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1kaXJlY3Rpb25cIl0pLFwiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1hbmNob3JcIjpuZXcgQnModGUucGFpbnRfaGlsbHNoYWRlW1wiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1hbmNob3JcIl0pLFwiaGlsbHNoYWRlLWV4YWdnZXJhdGlvblwiOm5ldyBCcyh0ZS5wYWludF9oaWxsc2hhZGVbXCJoaWxsc2hhZGUtZXhhZ2dlcmF0aW9uXCJdKSxcImhpbGxzaGFkZS1zaGFkb3ctY29sb3JcIjpuZXcgQnModGUucGFpbnRfaGlsbHNoYWRlW1wiaGlsbHNoYWRlLXNoYWRvdy1jb2xvclwiXSksXCJoaWxsc2hhZGUtaGlnaGxpZ2h0LWNvbG9yXCI6bmV3IEJzKHRlLnBhaW50X2hpbGxzaGFkZVtcImhpbGxzaGFkZS1oaWdobGlnaHQtY29sb3JcIl0pLFwiaGlsbHNoYWRlLWFjY2VudC1jb2xvclwiOm5ldyBCcyh0ZS5wYWludF9oaWxsc2hhZGVbXCJoaWxsc2hhZGUtYWNjZW50LWNvbG9yXCJdKX0pfTtjb25zdCBxdT1Scyhbe25hbWU6XCJhX3Bvc1wiLGNvbXBvbmVudHM6Mix0eXBlOlwiSW50MTZcIn1dLDQpLHttZW1iZXJzOk51fT1xdTt2YXIgR3U9e2V4cG9ydHM6e319O2Z1bmN0aW9uIFp1KHQsZSxyKXtyPXJ8fDI7dmFyIG4saSxzLGEsbyxsLHUsYz1lJiZlLmxlbmd0aCxoPWM/ZVswXSpyOnQubGVuZ3RoLHA9S3UodCwwLGgsciwhMCksZD1bXTtpZighcHx8cC5uZXh0PT09cC5wcmV2KXJldHVybiBkO2lmKGMmJihwPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpLHMsYSxvPVtdO2ZvcihpPTAscz1lLmxlbmd0aDtpPHM7aSsrKShhPUt1KHQsZVtpXSpuLGk8cy0xP2VbaSsxXSpuOnQubGVuZ3RoLG4sITEpKT09PWEubmV4dCYmKGEuc3RlaW5lcj0hMCksby5wdXNoKGljKGEpKTtmb3Ioby5zb3J0KHRjKSxpPTA7aTxvLmxlbmd0aDtpKyspcj1lYyhvW2ldLHIpO3JldHVybiByfSh0LGUscCxyKSksdC5sZW5ndGg+ODAqcil7bj1zPXRbMF0saT1hPXRbMV07Zm9yKHZhciBmPXI7ZjxoO2YrPXIpKG89dFtmXSk8biYmKG49byksKGw9dFtmKzFdKTxpJiYoaT1sKSxvPnMmJihzPW8pLGw+YSYmKGE9bCk7dT0wIT09KHU9TWF0aC5tYXgocy1uLGEtaSkpPzMyNzY3L3U6MDt9cmV0dXJuIEp1KHAsZCxyLG4saSx1LDApLGR9ZnVuY3Rpb24gS3UodCxlLHIsbixpKXt2YXIgcyxhO2lmKGk9PT1nYyh0LGUscixuKT4wKWZvcihzPWU7czxyO3MrPW4pYT1mYyhzLHRbc10sdFtzKzFdLGEpO2Vsc2UgZm9yKHM9ci1uO3M+PWU7cy09bilhPWZjKHMsdFtzXSx0W3MrMV0sYSk7cmV0dXJuIGEmJmxjKGEsYS5uZXh0KSYmKHljKGEpLGE9YS5uZXh0KSxhfWZ1bmN0aW9uIFh1KHQsZSl7aWYoIXQpcmV0dXJuIHQ7ZXx8KGU9dCk7dmFyIHIsbj10O2Rve2lmKHI9ITEsbi5zdGVpbmVyfHwhbGMobixuLm5leHQpJiYwIT09b2Mobi5wcmV2LG4sbi5uZXh0KSluPW4ubmV4dDtlbHNlIHtpZih5YyhuKSwobj1lPW4ucHJldik9PT1uLm5leHQpYnJlYWs7cj0hMDt9fXdoaWxlKHJ8fG4hPT1lKTtyZXR1cm4gZX1mdW5jdGlvbiBKdSh0LGUscixuLGkscyxhKXtpZih0KXshYSYmcyYmZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9dDtkb3swPT09aS56JiYoaS56PW5jKGkueCxpLnksZSxyLG4pKSxpLnByZXZaPWkucHJldixpLm5leHRaPWkubmV4dCxpPWkubmV4dDt9d2hpbGUoaSE9PXQpO2kucHJldloubmV4dFo9bnVsbCxpLnByZXZaPW51bGwsZnVuY3Rpb24odCl7dmFyIGUscixuLGkscyxhLG8sbCx1PTE7ZG97Zm9yKHI9dCx0PW51bGwscz1udWxsLGE9MDtyOyl7Zm9yKGErKyxuPXIsbz0wLGU9MDtlPHUmJihvKyssbj1uLm5leHRaKTtlKyspO2ZvcihsPXU7bz4wfHxsPjAmJm47KTAhPT1vJiYoMD09PWx8fCFufHxyLno8PW4ueik/KGk9cixyPXIubmV4dFosby0tKTooaT1uLG49bi5uZXh0WixsLS0pLHM/cy5uZXh0Wj1pOnQ9aSxpLnByZXZaPXMscz1pO3I9bjt9cy5uZXh0Wj1udWxsLHUqPTI7fXdoaWxlKGE+MSl9KGkpO30odCxuLGkscyk7Zm9yKHZhciBvLGwsdT10O3QucHJldiE9PXQubmV4dDspaWYobz10LnByZXYsbD10Lm5leHQscz9ZdSh0LG4saSxzKTpIdSh0KSllLnB1c2goby5pL3J8MCksZS5wdXNoKHQuaS9yfDApLGUucHVzaChsLmkvcnwwKSx5Yyh0KSx0PWwubmV4dCx1PWwubmV4dDtlbHNlIGlmKCh0PWwpPT09dSl7YT8xPT09YT9KdSh0PVd1KFh1KHQpLGUsciksZSxyLG4saSxzLDIpOjI9PT1hJiZRdSh0LGUscixuLGkscyk6SnUoWHUodCksZSxyLG4saSxzLDEpO2JyZWFrfX19ZnVuY3Rpb24gSHUodCl7dmFyIGU9dC5wcmV2LHI9dCxuPXQubmV4dDtpZihvYyhlLHIsbik+PTApcmV0dXJuICExO2Zvcih2YXIgaT1lLngscz1yLngsYT1uLngsbz1lLnksbD1yLnksdT1uLnksYz1pPHM/aTxhP2k6YTpzPGE/czphLGg9bzxsP288dT9vOnU6bDx1P2w6dSxwPWk+cz9pPmE/aTphOnM+YT9zOmEsZD1vPmw/bz51P286dTpsPnU/bDp1LGY9bi5uZXh0O2YhPT1lOyl7aWYoZi54Pj1jJiZmLng8PXAmJmYueT49aCYmZi55PD1kJiZzYyhpLG8scyxsLGEsdSxmLngsZi55KSYmb2MoZi5wcmV2LGYsZi5uZXh0KT49MClyZXR1cm4gITE7Zj1mLm5leHQ7fXJldHVybiAhMH1mdW5jdGlvbiBZdSh0LGUscixuKXt2YXIgaT10LnByZXYscz10LGE9dC5uZXh0O2lmKG9jKGkscyxhKT49MClyZXR1cm4gITE7Zm9yKHZhciBvPWkueCxsPXMueCx1PWEueCxjPWkueSxoPXMueSxwPWEueSxkPW88bD9vPHU/bzp1Omw8dT9sOnUsZj1jPGg/YzxwP2M6cDpoPHA/aDpwLHk9bz5sP28+dT9vOnU6bD51P2w6dSxtPWM+aD9jPnA/YzpwOmg+cD9oOnAsZz1uYyhkLGYsZSxyLG4pLHg9bmMoeSxtLGUscixuKSx2PXQucHJldlosYj10Lm5leHRaO3YmJnYuej49ZyYmYiYmYi56PD14Oyl7aWYodi54Pj1kJiZ2Lng8PXkmJnYueT49ZiYmdi55PD1tJiZ2IT09aSYmdiE9PWEmJnNjKG8sYyxsLGgsdSxwLHYueCx2LnkpJiZvYyh2LnByZXYsdix2Lm5leHQpPj0wKXJldHVybiAhMTtpZih2PXYucHJldlosYi54Pj1kJiZiLng8PXkmJmIueT49ZiYmYi55PD1tJiZiIT09aSYmYiE9PWEmJnNjKG8sYyxsLGgsdSxwLGIueCxiLnkpJiZvYyhiLnByZXYsYixiLm5leHQpPj0wKXJldHVybiAhMTtiPWIubmV4dFo7fWZvcig7diYmdi56Pj1nOyl7aWYodi54Pj1kJiZ2Lng8PXkmJnYueT49ZiYmdi55PD1tJiZ2IT09aSYmdiE9PWEmJnNjKG8sYyxsLGgsdSxwLHYueCx2LnkpJiZvYyh2LnByZXYsdix2Lm5leHQpPj0wKXJldHVybiAhMTt2PXYucHJldlo7fWZvcig7YiYmYi56PD14Oyl7aWYoYi54Pj1kJiZiLng8PXkmJmIueT49ZiYmYi55PD1tJiZiIT09aSYmYiE9PWEmJnNjKG8sYyxsLGgsdSxwLGIueCxiLnkpJiZvYyhiLnByZXYsYixiLm5leHQpPj0wKXJldHVybiAhMTtiPWIubmV4dFo7fXJldHVybiAhMH1mdW5jdGlvbiBXdSh0LGUscil7dmFyIG49dDtkb3t2YXIgaT1uLnByZXYscz1uLm5leHQubmV4dDshbGMoaSxzKSYmdWMoaSxuLG4ubmV4dCxzKSYmcGMoaSxzKSYmcGMocyxpKSYmKGUucHVzaChpLmkvcnwwKSxlLnB1c2gobi5pL3J8MCksZS5wdXNoKHMuaS9yfDApLHljKG4pLHljKG4ubmV4dCksbj10PXMpLG49bi5uZXh0O313aGlsZShuIT09dCk7cmV0dXJuIFh1KG4pfWZ1bmN0aW9uIFF1KHQsZSxyLG4saSxzKXt2YXIgYT10O2Rve2Zvcih2YXIgbz1hLm5leHQubmV4dDtvIT09YS5wcmV2Oyl7aWYoYS5pIT09by5pJiZhYyhhLG8pKXt2YXIgbD1kYyhhLG8pO3JldHVybiBhPVh1KGEsYS5uZXh0KSxsPVh1KGwsbC5uZXh0KSxKdShhLGUscixuLGkscywwKSx2b2lkIEp1KGwsZSxyLG4saSxzLDApfW89by5uZXh0O31hPWEubmV4dDt9d2hpbGUoYSE9PXQpfWZ1bmN0aW9uIHRjKHQsZSl7cmV0dXJuIHQueC1lLnh9ZnVuY3Rpb24gZWModCxlKXt2YXIgcj1mdW5jdGlvbih0LGUpe3ZhciByLG49ZSxpPXQueCxzPXQueSxhPS0xLzA7ZG97aWYoczw9bi55JiZzPj1uLm5leHQueSYmbi5uZXh0LnkhPT1uLnkpe3ZhciBvPW4ueCsocy1uLnkpKihuLm5leHQueC1uLngpLyhuLm5leHQueS1uLnkpO2lmKG88PWkmJm8+YSYmKGE9byxyPW4ueDxuLm5leHQueD9uOm4ubmV4dCxvPT09aSkpcmV0dXJuIHJ9bj1uLm5leHQ7fXdoaWxlKG4hPT1lKTtpZighcilyZXR1cm4gbnVsbDt2YXIgbCx1PXIsYz1yLngsaD1yLnkscD0xLzA7bj1yO2Rve2k+PW4ueCYmbi54Pj1jJiZpIT09bi54JiZzYyhzPGg/aTphLHMsYyxoLHM8aD9hOmkscyxuLngsbi55KSYmKGw9TWF0aC5hYnMocy1uLnkpLyhpLW4ueCkscGMobix0KSYmKGw8cHx8bD09PXAmJihuLng+ci54fHxuLng9PT1yLngmJnJjKHIsbikpKSYmKHI9bixwPWwpKSxuPW4ubmV4dDt9d2hpbGUobiE9PXUpO3JldHVybiByfSh0LGUpO2lmKCFyKXJldHVybiBlO3ZhciBuPWRjKHIsdCk7cmV0dXJuIFh1KG4sbi5uZXh0KSxYdShyLHIubmV4dCl9ZnVuY3Rpb24gcmModCxlKXtyZXR1cm4gb2ModC5wcmV2LHQsZS5wcmV2KTwwJiZvYyhlLm5leHQsdCx0Lm5leHQpPDB9ZnVuY3Rpb24gbmModCxlLHIsbixpKXtyZXR1cm4gKHQ9MTQzMTY1NTc2NSYoKHQ9ODU4OTkzNDU5JigodD0yNTI2NDUxMzUmKCh0PTE2NzExOTM1JigodD0odC1yKSppfDApfHQ8PDgpKXx0PDw0KSl8dDw8MikpfHQ8PDEpKXwoZT0xNDMxNjU1NzY1JigoZT04NTg5OTM0NTkmKChlPTI1MjY0NTEzNSYoKGU9MTY3MTE5MzUmKChlPShlLW4pKml8MCl8ZTw8OCkpfGU8PDQpKXxlPDwyKSl8ZTw8MSkpPDwxfWZ1bmN0aW9uIGljKHQpe3ZhciBlPXQscj10O2RveyhlLng8ci54fHxlLng9PT1yLngmJmUueTxyLnkpJiYocj1lKSxlPWUubmV4dDt9d2hpbGUoZSE9PXQpO3JldHVybiByfWZ1bmN0aW9uIHNjKHQsZSxyLG4saSxzLGEsbyl7cmV0dXJuIChpLWEpKihlLW8pPj0odC1hKSoocy1vKSYmKHQtYSkqKG4tbyk+PShyLWEpKihlLW8pJiYoci1hKSoocy1vKT49KGktYSkqKG4tbyl9ZnVuY3Rpb24gYWModCxlKXtyZXR1cm4gdC5uZXh0LmkhPT1lLmkmJnQucHJldi5pIT09ZS5pJiYhZnVuY3Rpb24odCxlKXt2YXIgcj10O2Rve2lmKHIuaSE9PXQuaSYmci5uZXh0LmkhPT10LmkmJnIuaSE9PWUuaSYmci5uZXh0LmkhPT1lLmkmJnVjKHIsci5uZXh0LHQsZSkpcmV0dXJuICEwO3I9ci5uZXh0O313aGlsZShyIT09dCk7cmV0dXJuICExfSh0LGUpJiYocGModCxlKSYmcGMoZSx0KSYmZnVuY3Rpb24odCxlKXt2YXIgcj10LG49ITEsaT0odC54K2UueCkvMixzPSh0LnkrZS55KS8yO2Rve3IueT5zIT1yLm5leHQueT5zJiZyLm5leHQueSE9PXIueSYmaTwoci5uZXh0Lngtci54KSoocy1yLnkpLyhyLm5leHQueS1yLnkpK3IueCYmKG49IW4pLHI9ci5uZXh0O313aGlsZShyIT09dCk7cmV0dXJuIG59KHQsZSkmJihvYyh0LnByZXYsdCxlLnByZXYpfHxvYyh0LGUucHJldixlKSl8fGxjKHQsZSkmJm9jKHQucHJldix0LHQubmV4dCk+MCYmb2MoZS5wcmV2LGUsZS5uZXh0KT4wKX1mdW5jdGlvbiBvYyh0LGUscil7cmV0dXJuIChlLnktdC55KSooci54LWUueCktKGUueC10LngpKihyLnktZS55KX1mdW5jdGlvbiBsYyh0LGUpe3JldHVybiB0Lng9PT1lLngmJnQueT09PWUueX1mdW5jdGlvbiB1Yyh0LGUscixuKXt2YXIgaT1oYyhvYyh0LGUscikpLHM9aGMob2ModCxlLG4pKSxhPWhjKG9jKHIsbix0KSksbz1oYyhvYyhyLG4sZSkpO3JldHVybiBpIT09cyYmYSE9PW98fCEoMCE9PWl8fCFjYyh0LHIsZSkpfHwhKDAhPT1zfHwhY2ModCxuLGUpKXx8ISgwIT09YXx8IWNjKHIsdCxuKSl8fCEoMCE9PW98fCFjYyhyLGUsbikpfWZ1bmN0aW9uIGNjKHQsZSxyKXtyZXR1cm4gZS54PD1NYXRoLm1heCh0Lngsci54KSYmZS54Pj1NYXRoLm1pbih0Lngsci54KSYmZS55PD1NYXRoLm1heCh0Lnksci55KSYmZS55Pj1NYXRoLm1pbih0Lnksci55KX1mdW5jdGlvbiBoYyh0KXtyZXR1cm4gdD4wPzE6dDwwPy0xOjB9ZnVuY3Rpb24gcGModCxlKXtyZXR1cm4gb2ModC5wcmV2LHQsdC5uZXh0KTwwP29jKHQsZSx0Lm5leHQpPj0wJiZvYyh0LHQucHJldixlKT49MDpvYyh0LGUsdC5wcmV2KTwwfHxvYyh0LHQubmV4dCxlKTwwfWZ1bmN0aW9uIGRjKHQsZSl7dmFyIHI9bmV3IG1jKHQuaSx0LngsdC55KSxuPW5ldyBtYyhlLmksZS54LGUueSksaT10Lm5leHQscz1lLnByZXY7cmV0dXJuIHQubmV4dD1lLGUucHJldj10LHIubmV4dD1pLGkucHJldj1yLG4ubmV4dD1yLHIucHJldj1uLHMubmV4dD1uLG4ucHJldj1zLG59ZnVuY3Rpb24gZmModCxlLHIsbil7dmFyIGk9bmV3IG1jKHQsZSxyKTtyZXR1cm4gbj8oaS5uZXh0PW4ubmV4dCxpLnByZXY9bixuLm5leHQucHJldj1pLG4ubmV4dD1pKTooaS5wcmV2PWksaS5uZXh0PWkpLGl9ZnVuY3Rpb24geWModCl7dC5uZXh0LnByZXY9dC5wcmV2LHQucHJldi5uZXh0PXQubmV4dCx0LnByZXZaJiYodC5wcmV2Wi5uZXh0Wj10Lm5leHRaKSx0Lm5leHRaJiYodC5uZXh0Wi5wcmV2Wj10LnByZXZaKTt9ZnVuY3Rpb24gbWModCxlLHIpe3RoaXMuaT10LHRoaXMueD1lLHRoaXMueT1yLHRoaXMucHJldj1udWxsLHRoaXMubmV4dD1udWxsLHRoaXMuej0wLHRoaXMucHJldlo9bnVsbCx0aGlzLm5leHRaPW51bGwsdGhpcy5zdGVpbmVyPSExO31mdW5jdGlvbiBnYyh0LGUscixuKXtmb3IodmFyIGk9MCxzPWUsYT1yLW47czxyO3MrPW4paSs9KHRbYV0tdFtzXSkqKHRbcysxXSt0W2ErMV0pLGE9cztyZXR1cm4gaX1HdS5leHBvcnRzPVp1LEd1LmV4cG9ydHMuZGVmYXVsdD1adSxadS5kZXZpYXRpb249ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9ZSYmZS5sZW5ndGgscz1NYXRoLmFicyhnYyh0LDAsaT9lWzBdKnI6dC5sZW5ndGgscikpO2lmKGkpZm9yKHZhciBhPTAsbz1lLmxlbmd0aDthPG87YSsrKXMtPU1hdGguYWJzKGdjKHQsZVthXSpyLGE8by0xP2VbYSsxXSpyOnQubGVuZ3RoLHIpKTt2YXIgbD0wO2ZvcihhPTA7YTxuLmxlbmd0aDthKz0zKXt2YXIgdT1uW2FdKnIsYz1uW2ErMV0qcixoPW5bYSsyXSpyO2wrPU1hdGguYWJzKCh0W3VdLXRbaF0pKih0W2MrMV0tdFt1KzFdKS0odFt1XS10W2NdKSoodFtoKzFdLXRbdSsxXSkpO31yZXR1cm4gMD09PXMmJjA9PT1sPzA6TWF0aC5hYnMoKGwtcykvcyl9LFp1LmZsYXR0ZW49ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRbMF1bMF0ubGVuZ3RoLHI9e3ZlcnRpY2VzOltdLGhvbGVzOltdLGRpbWVuc2lvbnM6ZX0sbj0wLGk9MDtpPHQubGVuZ3RoO2krKyl7Zm9yKHZhciBzPTA7czx0W2ldLmxlbmd0aDtzKyspZm9yKHZhciBhPTA7YTxlO2ErKylyLnZlcnRpY2VzLnB1c2godFtpXVtzXVthXSk7aT4wJiZyLmhvbGVzLnB1c2gobis9dFtpLTFdLmxlbmd0aCk7fXJldHVybiByfTt2YXIgeGM9cChHdS5leHBvcnRzKTtmdW5jdGlvbiB2Yyh0LGUscixuLGkpe2JjKHQsZSxyfHwwLG58fHQubGVuZ3RoLTEsaXx8X2MpO31mdW5jdGlvbiBiYyh0LGUscixuLGkpe2Zvcig7bj5yOyl7aWYobi1yPjYwMCl7dmFyIHM9bi1yKzEsYT1lLXIrMSxvPU1hdGgubG9nKHMpLGw9LjUqTWF0aC5leHAoMipvLzMpLHU9LjUqTWF0aC5zcXJ0KG8qbCoocy1sKS9zKSooYS1zLzI8MD8tMToxKTtiYyh0LGUsTWF0aC5tYXgocixNYXRoLmZsb29yKGUtYSpsL3MrdSkpLE1hdGgubWluKG4sTWF0aC5mbG9vcihlKyhzLWEpKmwvcyt1KSksaSk7fXZhciBjPXRbZV0saD1yLHA9bjtmb3Iod2ModCxyLGUpLGkodFtuXSxjKT4wJiZ3Yyh0LHIsbik7aDxwOyl7Zm9yKHdjKHQsaCxwKSxoKysscC0tO2kodFtoXSxjKTwwOyloKys7Zm9yKDtpKHRbcF0sYyk+MDspcC0tO30wPT09aSh0W3JdLGMpP3djKHQscixwKTp3Yyh0LCsrcCxuKSxwPD1lJiYocj1wKzEpLGU8PXAmJihuPXAtMSk7fX1mdW5jdGlvbiB3Yyh0LGUscil7dmFyIG49dFtlXTt0W2VdPXRbcl0sdFtyXT1uO31mdW5jdGlvbiBfYyh0LGUpe3JldHVybiB0PGU/LTE6dD5lPzE6MH1mdW5jdGlvbiBBYyh0LGUpe2NvbnN0IHI9dC5sZW5ndGg7aWYocjw9MSlyZXR1cm4gW3RdO2NvbnN0IG49W107bGV0IGkscztmb3IobGV0IGU9MDtlPHI7ZSsrKXtjb25zdCByPVoodFtlXSk7MCE9PXImJih0W2VdLmFyZWE9TWF0aC5hYnMociksdm9pZCAwPT09cyYmKHM9cjwwKSxzPT09cjwwPyhpJiZuLnB1c2goaSksaT1bdFtlXV0pOmkucHVzaCh0W2VdKSk7fWlmKGkmJm4ucHVzaChpKSxlPjEpZm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0Kyspblt0XS5sZW5ndGg8PWV8fCh2YyhuW3RdLGUsMSxuW3RdLmxlbmd0aC0xLFNjKSxuW3RdPW5bdF0uc2xpY2UoMCxlKSk7cmV0dXJuIG59ZnVuY3Rpb24gU2ModCxlKXtyZXR1cm4gZS5hcmVhLXQuYXJlYX1mdW5jdGlvbiBrYyh0LGUscil7Y29uc3Qgbj1yLnBhdHRlcm5EZXBlbmRlbmNpZXM7bGV0IGk9ITE7Zm9yKGNvbnN0IHIgb2YgZSl7Y29uc3QgZT1yLnBhaW50LmdldChgJHt0fS1wYXR0ZXJuYCk7ZS5pc0NvbnN0YW50KCl8fChpPSEwKTtjb25zdCBzPWUuY29uc3RhbnRPcihudWxsKTtzJiYoaT0hMCxuW3NdPSEwKTt9cmV0dXJuIGl9ZnVuY3Rpb24gSWModCxlLHIsbixpKXtjb25zdCBzPWkucGF0dGVybkRlcGVuZGVuY2llcztmb3IoY29uc3QgYSBvZiBlKXtjb25zdCBlPWEucGFpbnQuZ2V0KGAke3R9LXBhdHRlcm5gKS52YWx1ZTtpZihcImNvbnN0YW50XCIhPT1lLmtpbmQpe2xldCB0PWUuZXZhbHVhdGUoe3pvb206bn0scix7fSxpLmF2YWlsYWJsZUltYWdlcyk7dD10JiZ0Lm5hbWU/dC5uYW1lOnQsc1t0XT0hMCxyLnBhdHRlcm5zW2EuaWRdPXQ7fX1yZXR1cm4gcn1jbGFzcyBNY3tjb25zdHJ1Y3Rvcih0KXt0aGlzLnpvb209dC56b29tLHRoaXMub3ZlcnNjYWxpbmc9dC5vdmVyc2NhbGluZyx0aGlzLmxheWVycz10LmxheWVycyx0aGlzLmxheWVySWRzPXRoaXMubGF5ZXJzLm1hcCgodD0+dC5pZCkpLHRoaXMuaW5kZXg9dC5pbmRleCx0aGlzLmhhc1BhdHRlcm49ITEsdGhpcy5wYXR0ZXJuRmVhdHVyZXM9W10sdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheT1uZXcgJHMsdGhpcy5pbmRleEFycmF5PW5ldyByYSx0aGlzLmluZGV4QXJyYXkyPW5ldyBsYSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucz1uZXcgSmEodC5sYXllcnMsdC56b29tKSx0aGlzLnNlZ21lbnRzPW5ldyBzbyx0aGlzLnNlZ21lbnRzMj1uZXcgc28sdGhpcy5zdGF0ZURlcGVuZGVudExheWVySWRzPXRoaXMubGF5ZXJzLmZpbHRlcigodD0+dC5pc1N0YXRlRGVwZW5kZW50KCkpKS5tYXAoKHQ9PnQuaWQpKSx0aGlzLnByb2plY3Rpb249dC5wcm9qZWN0aW9uO31wb3B1bGF0ZSh0LGUscixuKXt0aGlzLmhhc1BhdHRlcm49a2MoXCJmaWxsXCIsdGhpcy5sYXllcnMsZSk7Y29uc3QgaT10aGlzLmxheWVyc1swXS5sYXlvdXQuZ2V0KFwiZmlsbC1zb3J0LWtleVwiKSxzPVtdO2Zvcihjb25zdHtmZWF0dXJlOmEsaWQ6byxpbmRleDpsLHNvdXJjZUxheWVySW5kZXg6dX1vZiB0KXtjb25zdCB0PXRoaXMubGF5ZXJzWzBdLl9mZWF0dXJlRmlsdGVyLm5lZWRHZW9tZXRyeSxjPW91KGEsdCk7aWYoIXRoaXMubGF5ZXJzWzBdLl9mZWF0dXJlRmlsdGVyLmZpbHRlcihuZXcgd3ModGhpcy56b29tKSxjLHIpKWNvbnRpbnVlO2NvbnN0IGg9aT9pLmV2YWx1YXRlKGMse30scixlLmF2YWlsYWJsZUltYWdlcyk6dm9pZCAwLHA9e2lkOm8scHJvcGVydGllczphLnByb3BlcnRpZXMsdHlwZTphLnR5cGUsc291cmNlTGF5ZXJJbmRleDp1LGluZGV4OmwsZ2VvbWV0cnk6dD9jLmdlb21ldHJ5OmF1KGEscixuKSxwYXR0ZXJuczp7fSxzb3J0S2V5Omh9O3MucHVzaChwKTt9aSYmcy5zb3J0KCgodCxlKT0+dC5zb3J0S2V5LWUuc29ydEtleSkpO2Zvcihjb25zdCBuIG9mIHMpe2NvbnN0e2dlb21ldHJ5OmksaW5kZXg6cyxzb3VyY2VMYXllckluZGV4OmF9PW47aWYodGhpcy5oYXNQYXR0ZXJuKXtjb25zdCB0PUljKFwiZmlsbFwiLHRoaXMubGF5ZXJzLG4sdGhpcy56b29tLGUpO3RoaXMucGF0dGVybkZlYXR1cmVzLnB1c2godCk7fWVsc2UgdGhpcy5hZGRGZWF0dXJlKG4saSxzLHIse30sZS5hdmFpbGFibGVJbWFnZXMpO2UuZmVhdHVyZUluZGV4Lmluc2VydCh0W3NdLmZlYXR1cmUsaSxzLGEsdGhpcy5pbmRleCk7fX11cGRhdGUodCxlLHIsbil7dGhpcy5zdGF0ZURlcGVuZGVudExheWVycy5sZW5ndGgmJnRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnVwZGF0ZVBhaW50QXJyYXlzKHQsZSx0aGlzLnN0YXRlRGVwZW5kZW50TGF5ZXJzLHIsbik7fWFkZEZlYXR1cmVzKHQsZSxyLG4saSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5wYXR0ZXJuRmVhdHVyZXMpdGhpcy5hZGRGZWF0dXJlKHQsdC5nZW9tZXRyeSx0LmluZGV4LGUscixuKTt9aXNFbXB0eSgpe3JldHVybiAwPT09dGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5sZW5ndGh9dXBsb2FkUGVuZGluZygpe3JldHVybiAhdGhpcy51cGxvYWRlZHx8dGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMubmVlZHNVcGxvYWR9dXBsb2FkKHQpe3RoaXMudXBsb2FkZWR8fCh0aGlzLmxheW91dFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLmxheW91dFZlcnRleEFycmF5LE51KSx0aGlzLmluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIodGhpcy5pbmRleEFycmF5KSx0aGlzLmluZGV4QnVmZmVyMj10LmNyZWF0ZUluZGV4QnVmZmVyKHRoaXMuaW5kZXhBcnJheTIpKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy51cGxvYWQodCksdGhpcy51cGxvYWRlZD0hMDt9ZGVzdHJveSgpe3RoaXMubGF5b3V0VmVydGV4QnVmZmVyJiYodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIyLmRlc3Ryb3koKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5kZXN0cm95KCksdGhpcy5zZWdtZW50cy5kZXN0cm95KCksdGhpcy5zZWdtZW50czIuZGVzdHJveSgpKTt9YWRkRmVhdHVyZSh0LGUscixuLGkscz1bXSl7Zm9yKGNvbnN0IHQgb2YgQWMoZSw1MDApKXtsZXQgZT0wO2Zvcihjb25zdCByIG9mIHQpZSs9ci5sZW5ndGg7Y29uc3Qgcj10aGlzLnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KGUsdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXkpLG49ci52ZXJ0ZXhMZW5ndGgsaT1bXSxzPVtdO2Zvcihjb25zdCBlIG9mIHQpe2lmKDA9PT1lLmxlbmd0aCljb250aW51ZTtlIT09dFswXSYmcy5wdXNoKGkubGVuZ3RoLzIpO2NvbnN0IHI9dGhpcy5zZWdtZW50czIucHJlcGFyZVNlZ21lbnQoZS5sZW5ndGgsdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXkyKSxuPXIudmVydGV4TGVuZ3RoO3RoaXMubGF5b3V0VmVydGV4QXJyYXkuZW1wbGFjZUJhY2soZVswXS54LGVbMF0ueSksdGhpcy5pbmRleEFycmF5Mi5lbXBsYWNlQmFjayhuK2UubGVuZ3RoLTEsbiksaS5wdXNoKGVbMF0ueCksaS5wdXNoKGVbMF0ueSk7Zm9yKGxldCB0PTE7dDxlLmxlbmd0aDt0KyspdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5lbXBsYWNlQmFjayhlW3RdLngsZVt0XS55KSx0aGlzLmluZGV4QXJyYXkyLmVtcGxhY2VCYWNrKG4rdC0xLG4rdCksaS5wdXNoKGVbdF0ueCksaS5wdXNoKGVbdF0ueSk7ci52ZXJ0ZXhMZW5ndGgrPWUubGVuZ3RoLHIucHJpbWl0aXZlTGVuZ3RoKz1lLmxlbmd0aDt9Y29uc3QgYT14YyhpLHMpO2ZvcihsZXQgdD0wO3Q8YS5sZW5ndGg7dCs9Myl0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2sobithW3RdLG4rYVt0KzFdLG4rYVt0KzJdKTtyLnZlcnRleExlbmd0aCs9ZSxyLnByaW1pdGl2ZUxlbmd0aCs9YS5sZW5ndGgvMzt9dGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMucG9wdWxhdGVQYWludEFycmF5cyh0aGlzLmxheW91dFZlcnRleEFycmF5Lmxlbmd0aCx0LHIsaSxzLG4pO319SmkoTWMsXCJGaWxsQnVja2V0XCIse29taXQ6W1wibGF5ZXJzXCIsXCJwYXR0ZXJuRmVhdHVyZXNcIl19KTtjb25zdCBUYz1uZXcgUHMoe1wiZmlsbC1zb3J0LWtleVwiOm5ldyBFcyh0ZS5sYXlvdXRfZmlsbFtcImZpbGwtc29ydC1rZXlcIl0pfSk7dmFyIHpjPXtwYWludDpuZXcgUHMoe1wiZmlsbC1hbnRpYWxpYXNcIjpuZXcgQnModGUucGFpbnRfZmlsbFtcImZpbGwtYW50aWFsaWFzXCJdKSxcImZpbGwtb3BhY2l0eVwiOm5ldyBFcyh0ZS5wYWludF9maWxsW1wiZmlsbC1vcGFjaXR5XCJdKSxcImZpbGwtY29sb3JcIjpuZXcgRXModGUucGFpbnRfZmlsbFtcImZpbGwtY29sb3JcIl0pLFwiZmlsbC1vdXRsaW5lLWNvbG9yXCI6bmV3IEVzKHRlLnBhaW50X2ZpbGxbXCJmaWxsLW91dGxpbmUtY29sb3JcIl0pLFwiZmlsbC10cmFuc2xhdGVcIjpuZXcgQnModGUucGFpbnRfZmlsbFtcImZpbGwtdHJhbnNsYXRlXCJdKSxcImZpbGwtdHJhbnNsYXRlLWFuY2hvclwiOm5ldyBCcyh0ZS5wYWludF9maWxsW1wiZmlsbC10cmFuc2xhdGUtYW5jaG9yXCJdKSxcImZpbGwtcGF0dGVyblwiOm5ldyBFcyh0ZS5wYWludF9maWxsW1wiZmlsbC1wYXR0ZXJuXCJdKX0pLGxheW91dDpUY307Y29uc3QgQmM9UnMoW3tuYW1lOlwiYV9wb3Nfbm9ybWFsX2VkXCIsY29tcG9uZW50czo0LHR5cGU6XCJJbnQxNlwifV0pLEVjPVJzKFt7bmFtZTpcImFfY2VudHJvaWRfcG9zXCIsY29tcG9uZW50czoyLHR5cGU6XCJVaW50MTZcIn1dKSxDYz1Scyhbe25hbWU6XCJhX3Bvc18zXCIsY29tcG9uZW50czozLHR5cGU6XCJJbnQxNlwifSx7bmFtZTpcImFfcG9zX25vcm1hbF8zXCIsY29tcG9uZW50czozLHR5cGU6XCJJbnQxNlwifV0pLHttZW1iZXJzOlBjfT1CYzt2YXIgRGM9e30sVmM9bSxMYz1GYztmdW5jdGlvbiBGYyh0LGUscixuLGkpe3RoaXMucHJvcGVydGllcz17fSx0aGlzLmV4dGVudD1yLHRoaXMudHlwZT0wLHRoaXMuX3BiZj10LHRoaXMuX2dlb21ldHJ5PS0xLHRoaXMuX2tleXM9bix0aGlzLl92YWx1ZXM9aSx0LnJlYWRGaWVsZHMoUmMsdGhpcyxlKTt9ZnVuY3Rpb24gUmModCxlLHIpezE9PXQ/ZS5pZD1yLnJlYWRWYXJpbnQoKToyPT10P2Z1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXQucmVhZFZhcmludCgpK3QucG9zO3QucG9zPHI7KXt2YXIgbj1lLl9rZXlzW3QucmVhZFZhcmludCgpXSxpPWUuX3ZhbHVlc1t0LnJlYWRWYXJpbnQoKV07ZS5wcm9wZXJ0aWVzW25dPWk7fX0ocixlKTozPT10P2UudHlwZT1yLnJlYWRWYXJpbnQoKTo0PT10JiYoZS5fZ2VvbWV0cnk9ci5wb3MpO31mdW5jdGlvbiBVYyh0KXtmb3IodmFyIGUscixuPTAsaT0wLHM9dC5sZW5ndGgsYT1zLTE7aTxzO2E9aSsrKW4rPSgocj10W2FdKS54LShlPXRbaV0pLngpKihlLnkrci55KTtyZXR1cm4gbn1GYy50eXBlcz1bXCJVbmtub3duXCIsXCJQb2ludFwiLFwiTGluZVN0cmluZ1wiLFwiUG9seWdvblwiXSxGYy5wcm90b3R5cGUubG9hZEdlb21ldHJ5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGJmO3QucG9zPXRoaXMuX2dlb21ldHJ5O2Zvcih2YXIgZSxyPXQucmVhZFZhcmludCgpK3QucG9zLG49MSxpPTAscz0wLGE9MCxvPVtdO3QucG9zPHI7KXtpZihpPD0wKXt2YXIgbD10LnJlYWRWYXJpbnQoKTtuPTcmbCxpPWw+PjM7fWlmKGktLSwxPT09bnx8Mj09PW4pcys9dC5yZWFkU1ZhcmludCgpLGErPXQucmVhZFNWYXJpbnQoKSwxPT09biYmKGUmJm8ucHVzaChlKSxlPVtdKSxlLnB1c2gobmV3IFZjKHMsYSkpO2Vsc2Uge2lmKDchPT1uKXRocm93IG5ldyBFcnJvcihcInVua25vd24gY29tbWFuZCBcIituKTtlJiZlLnB1c2goZVswXS5jbG9uZSgpKTt9fXJldHVybiBlJiZvLnB1c2goZSksb30sRmMucHJvdG90eXBlLmJib3g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9wYmY7dC5wb3M9dGhpcy5fZ2VvbWV0cnk7Zm9yKHZhciBlPXQucmVhZFZhcmludCgpK3QucG9zLHI9MSxuPTAsaT0wLHM9MCxhPTEvMCxvPS0xLzAsbD0xLzAsdT0tMS8wO3QucG9zPGU7KXtpZihuPD0wKXt2YXIgYz10LnJlYWRWYXJpbnQoKTtyPTcmYyxuPWM+PjM7fWlmKG4tLSwxPT09cnx8Mj09PXIpKGkrPXQucmVhZFNWYXJpbnQoKSk8YSYmKGE9aSksaT5vJiYobz1pKSwocys9dC5yZWFkU1ZhcmludCgpKTxsJiYobD1zKSxzPnUmJih1PXMpO2Vsc2UgaWYoNyE9PXIpdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biBjb21tYW5kIFwiK3IpfXJldHVybiBbYSxsLG8sdV19LEZjLnByb3RvdHlwZS50b0dlb0pTT049ZnVuY3Rpb24odCxlLHIpe3ZhciBuLGkscz10aGlzLmV4dGVudCpNYXRoLnBvdygyLHIpLGE9dGhpcy5leHRlbnQqdCxvPXRoaXMuZXh0ZW50KmUsbD10aGlzLmxvYWRHZW9tZXRyeSgpLHU9RmMudHlwZXNbdGhpcy50eXBlXTtmdW5jdGlvbiBjKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXt2YXIgcj10W2VdO3RbZV09WzM2MCooci54K2EpL3MtMTgwLDM2MC9NYXRoLlBJKk1hdGguYXRhbihNYXRoLmV4cCgoMTgwLTM2MCooci55K28pL3MpKk1hdGguUEkvMTgwKSktOTBdO319c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSAxOnZhciBoPVtdO2ZvcihuPTA7bjxsLmxlbmd0aDtuKyspaFtuXT1sW25dWzBdO2MobD1oKTticmVhaztjYXNlIDI6Zm9yKG49MDtuPGwubGVuZ3RoO24rKyljKGxbbl0pO2JyZWFrO2Nhc2UgMzpmb3IobD1mdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aDtpZihlPD0xKXJldHVybiBbdF07Zm9yKHZhciByLG4saT1bXSxzPTA7czxlO3MrKyl7dmFyIGE9VWModFtzXSk7MCE9PWEmJih2b2lkIDA9PT1uJiYobj1hPDApLG49PT1hPDA/KHImJmkucHVzaChyKSxyPVt0W3NdXSk6ci5wdXNoKHRbc10pKTt9cmV0dXJuIHImJmkucHVzaChyKSxpfShsKSxuPTA7bjxsLmxlbmd0aDtuKyspZm9yKGk9MDtpPGxbbl0ubGVuZ3RoO2krKyljKGxbbl1baV0pO30xPT09bC5sZW5ndGg/bD1sWzBdOnU9XCJNdWx0aVwiK3U7dmFyIHA9e3R5cGU6XCJGZWF0dXJlXCIsZ2VvbWV0cnk6e3R5cGU6dSxjb29yZGluYXRlczpsfSxwcm9wZXJ0aWVzOnRoaXMucHJvcGVydGllc307cmV0dXJuIFwiaWRcImluIHRoaXMmJihwLmlkPXRoaXMuaWQpLHB9O3ZhciAkYz1MYyxqYz1PYztmdW5jdGlvbiBPYyh0LGUpe3RoaXMudmVyc2lvbj0xLHRoaXMubmFtZT1udWxsLHRoaXMuZXh0ZW50PTQwOTYsdGhpcy5sZW5ndGg9MCx0aGlzLl9wYmY9dCx0aGlzLl9rZXlzPVtdLHRoaXMuX3ZhbHVlcz1bXSx0aGlzLl9mZWF0dXJlcz1bXSx0LnJlYWRGaWVsZHMocWMsdGhpcyxlKSx0aGlzLmxlbmd0aD10aGlzLl9mZWF0dXJlcy5sZW5ndGg7fWZ1bmN0aW9uIHFjKHQsZSxyKXsxNT09PXQ/ZS52ZXJzaW9uPXIucmVhZFZhcmludCgpOjE9PT10P2UubmFtZT1yLnJlYWRTdHJpbmcoKTo1PT09dD9lLmV4dGVudD1yLnJlYWRWYXJpbnQoKToyPT09dD9lLl9mZWF0dXJlcy5wdXNoKHIucG9zKTozPT09dD9lLl9rZXlzLnB1c2goci5yZWFkU3RyaW5nKCkpOjQ9PT10JiZlLl92YWx1ZXMucHVzaChmdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxyPXQucmVhZFZhcmludCgpK3QucG9zO3QucG9zPHI7KXt2YXIgbj10LnJlYWRWYXJpbnQoKT4+MztlPTE9PT1uP3QucmVhZFN0cmluZygpOjI9PT1uP3QucmVhZEZsb2F0KCk6Mz09PW4/dC5yZWFkRG91YmxlKCk6ND09PW4/dC5yZWFkVmFyaW50NjQoKTo1PT09bj90LnJlYWRWYXJpbnQoKTo2PT09bj90LnJlYWRTVmFyaW50KCk6Nz09PW4/dC5yZWFkQm9vbGVhbigpOm51bGw7fXJldHVybiBlfShyKSk7fU9jLnByb3RvdHlwZS5mZWF0dXJlPWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5fZmVhdHVyZXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcImZlYXR1cmUgaW5kZXggb3V0IG9mIGJvdW5kc1wiKTt0aGlzLl9wYmYucG9zPXRoaXMuX2ZlYXR1cmVzW3RdO3ZhciBlPXRoaXMuX3BiZi5yZWFkVmFyaW50KCkrdGhpcy5fcGJmLnBvcztyZXR1cm4gbmV3ICRjKHRoaXMuX3BiZixlLHRoaXMuZXh0ZW50LHRoaXMuX2tleXMsdGhpcy5fdmFsdWVzKX07dmFyIE5jPWpjO2Z1bmN0aW9uIEdjKHQsZSxyKXtpZigzPT09dCl7dmFyIG49bmV3IE5jKHIsci5yZWFkVmFyaW50KCkrci5wb3MpO24ubGVuZ3RoJiYoZVtuLm5hbWVdPW4pO319dmFyIFpjPURjLlZlY3RvclRpbGU9ZnVuY3Rpb24odCxlKXt0aGlzLmxheWVycz10LnJlYWRGaWVsZHMoR2Mse30sZSk7fSxLYz1EYy5WZWN0b3JUaWxlRmVhdHVyZT1MYztmdW5jdGlvbiBYYyh0LGUscixuKXtjb25zdCBpPVtdLHM9MD09PW4/KHQsZSxyLG4saSxzKT0+e3QucHVzaChuZXcgeChzLHIrKHMtZSkvKG4tZSkqKGktcikpKTt9Oih0LGUscixuLGkscyk9Pnt0LnB1c2gobmV3IHgoZSsocy1yKS8oaS1yKSoobi1lKSxzKSk7fTtmb3IoY29uc3QgYSBvZiB0KXtjb25zdCB0PVtdO2Zvcihjb25zdCBpIG9mIGEpe2lmKGkubGVuZ3RoPD0yKWNvbnRpbnVlO2NvbnN0IGE9W107Zm9yKGxldCB0PTA7dDxpLmxlbmd0aC0xO3QrKyl7Y29uc3Qgbz1pW3RdLngsbD1pW3RdLnksdT1pW3QrMV0ueCxjPWlbdCsxXS55LGg9MD09PW4/bzpsLHA9MD09PW4/dTpjO2g8ZT9wPmUmJnMoYSxvLGwsdSxjLGUpOmg+cj9wPHImJnMoYSxvLGwsdSxjLHIpOmEucHVzaChpW3RdKSxwPGUmJmg+PWUmJnMoYSxvLGwsdSxjLGUpLHA+ciYmaDw9ciYmcyhhLG8sbCx1LGMscik7fWxldCBvPWlbaS5sZW5ndGgtMV07Y29uc3QgbD0wPT09bj9vLng6by55O2w+PWUmJmw8PXImJmEucHVzaChvKSxhLmxlbmd0aCYmKG89YVthLmxlbmd0aC0xXSxhWzBdLng9PT1vLngmJmFbMF0ueT09PW8ueXx8YS5wdXNoKGFbMF0pLHQucHVzaChhKSk7fXQubGVuZ3RoJiZpLnB1c2godCk7fXJldHVybiBpfURjLlZlY3RvclRpbGVMYXllcj1qYztjb25zdCBKYz1LYy50eXBlcyxIYz1NYXRoLnBvdygyLDEzKTtmdW5jdGlvbiBZYyh0LGUscixuLGkscyxhLG8pe3QuZW1wbGFjZUJhY2soKGU8PDEpK2EsKHI8PDEpK3MsKE1hdGguZmxvb3IobipIYyk8PDEpK2ksTWF0aC5yb3VuZChvKSk7fWZ1bmN0aW9uIFdjKHQsZSxyKXtjb25zdCBuPTE2Mzg0O3QuZW1wbGFjZUJhY2soZS54LGUueSxlLnosclswXSpuLHJbMV0qbixyWzJdKm4pO31jbGFzcyBRY3tjb25zdHJ1Y3Rvcigpe3RoaXMuYWNjPW5ldyB4KDAsMCksdGhpcy5wb2x5Q291bnQ9W107fXN0YXJ0UmluZyh0KXt0aGlzLmN1cnJlbnRQb2x5Q291bnQ9e2VkZ2VzOjAsdG9wOjB9LHRoaXMucG9seUNvdW50LnB1c2godGhpcy5jdXJyZW50UG9seUNvdW50KSx0aGlzLm1pbnx8KHRoaXMubWluPW5ldyB4KHQueCx0LnkpLHRoaXMubWF4PW5ldyB4KHQueCx0LnkpKTt9YXBwZW5kKHQsZSl7dGhpcy5jdXJyZW50UG9seUNvdW50LmVkZ2VzKyssdGhpcy5hY2MuX2FkZCh0KTtjb25zdCByPXRoaXMubWluLG49dGhpcy5tYXg7dC54PHIueD9yLng9dC54OnQueD5uLngmJihuLng9dC54KSx0Lnk8ci55P3IueT10Lnk6dC55Pm4ueSYmKG4ueT10LnkpLCgoMD09PXQueHx8dC54PT09YW8pJiZ0Lng9PT1lLngpIT0oKDA9PT10Lnl8fHQueT09PWFvKSYmdC55PT09ZS55KSYmdGhpcy5wcm9jZXNzQm9yZGVyT3ZlcmxhcCh0LGUpLGUueDwwIT10Lng8MCYmdGhpcy5hZGRCb3JkZXJJbnRlcnNlY3Rpb24oMCxFcihlLnksdC55LCgwLWUueCkvKHQueC1lLngpKSksZS54PmFvIT10Lng+YW8mJnRoaXMuYWRkQm9yZGVySW50ZXJzZWN0aW9uKDEsRXIoZS55LHQueSwoYW8tZS54KS8odC54LWUueCkpKSxlLnk8MCE9dC55PDAmJnRoaXMuYWRkQm9yZGVySW50ZXJzZWN0aW9uKDIsRXIoZS54LHQueCwoMC1lLnkpLyh0LnktZS55KSkpLGUueT5hbyE9dC55PmFvJiZ0aGlzLmFkZEJvcmRlckludGVyc2VjdGlvbigzLEVyKGUueCx0LngsKGFvLWUueSkvKHQueS1lLnkpKSk7fWFkZEJvcmRlckludGVyc2VjdGlvbih0LGUpe3RoaXMuYm9yZGVyc3x8KHRoaXMuYm9yZGVycz1bW051bWJlci5NQVhfVkFMVUUsLU51bWJlci5NQVhfVkFMVUVdLFtOdW1iZXIuTUFYX1ZBTFVFLC1OdW1iZXIuTUFYX1ZBTFVFXSxbTnVtYmVyLk1BWF9WQUxVRSwtTnVtYmVyLk1BWF9WQUxVRV0sW051bWJlci5NQVhfVkFMVUUsLU51bWJlci5NQVhfVkFMVUVdXSk7Y29uc3Qgcj10aGlzLmJvcmRlcnNbdF07ZTxyWzBdJiYoclswXT1lKSxlPnJbMV0mJihyWzFdPWUpO31wcm9jZXNzQm9yZGVyT3ZlcmxhcCh0LGUpe2lmKHQueD09PWUueCl7aWYodC55PT09ZS55KXJldHVybjtjb25zdCByPTA9PT10Lng/MDoxO3RoaXMuYWRkQm9yZGVySW50ZXJzZWN0aW9uKHIsZS55KSx0aGlzLmFkZEJvcmRlckludGVyc2VjdGlvbihyLHQueSk7fWVsc2Uge2NvbnN0IHI9MD09PXQueT8yOjM7dGhpcy5hZGRCb3JkZXJJbnRlcnNlY3Rpb24ocixlLngpLHRoaXMuYWRkQm9yZGVySW50ZXJzZWN0aW9uKHIsdC54KTt9fWNlbnRyb2lkKCl7Y29uc3QgdD10aGlzLnBvbHlDb3VudC5yZWR1Y2UoKCh0LGUpPT50K2UuZWRnZXMpLDApO3JldHVybiAwIT09dD90aGlzLmFjYy5kaXYodCkuX3JvdW5kKCk6bmV3IHgoMCwwKX1zcGFuKCl7cmV0dXJuIG5ldyB4KHRoaXMubWF4LngtdGhpcy5taW4ueCx0aGlzLm1heC55LXRoaXMubWluLnkpfWludGVyc2VjdHNDb3VudCgpe3JldHVybiB0aGlzLmJvcmRlcnMucmVkdWNlKCgodCxlKT0+dCsgKyhlWzBdIT09TnVtYmVyLk1BWF9WQUxVRSkpLDApfX1jbGFzcyB0aHtjb25zdHJ1Y3Rvcih0KXt0aGlzLnpvb209dC56b29tLHRoaXMuY2Fub25pY2FsPXQuY2Fub25pY2FsLHRoaXMub3ZlcnNjYWxpbmc9dC5vdmVyc2NhbGluZyx0aGlzLmxheWVycz10LmxheWVycyx0aGlzLmxheWVySWRzPXRoaXMubGF5ZXJzLm1hcCgodD0+dC5pZCkpLHRoaXMuaW5kZXg9dC5pbmRleCx0aGlzLmhhc1BhdHRlcm49ITEsdGhpcy5lZGdlUmFkaXVzPTAsdGhpcy5wcm9qZWN0aW9uPXQucHJvamVjdGlvbix0aGlzLmxheW91dFZlcnRleEFycmF5PW5ldyBPcyx0aGlzLmNlbnRyb2lkVmVydGV4QXJyYXk9bmV3IHdhLHRoaXMuaW5kZXhBcnJheT1uZXcgcmEsdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9bmV3IEphKHQubGF5ZXJzLHQuem9vbSksdGhpcy5zZWdtZW50cz1uZXcgc28sdGhpcy5zdGF0ZURlcGVuZGVudExheWVySWRzPXRoaXMubGF5ZXJzLmZpbHRlcigodD0+dC5pc1N0YXRlRGVwZW5kZW50KCkpKS5tYXAoKHQ9PnQuaWQpKSx0aGlzLmVuYWJsZVRlcnJhaW49dC5lbmFibGVUZXJyYWluO31wb3B1bGF0ZSh0LGUscixuKXt0aGlzLmZlYXR1cmVzPVtdLHRoaXMuaGFzUGF0dGVybj1rYyhcImZpbGwtZXh0cnVzaW9uXCIsdGhpcy5sYXllcnMsZSksdGhpcy5mZWF0dXJlc09uQm9yZGVyPVtdLHRoaXMuYm9yZGVycz1bW10sW10sW10sW11dLHRoaXMuYm9yZGVyRG9uZVdpdGhOZWlnaGJvclo9Wy0xLC0xLC0xLC0xXSx0aGlzLnRpbGVUb01ldGVyPWZ1bmN0aW9uKHQpe2NvbnN0IGU9TWF0aC5leHAoTWF0aC5QSSooMS10LnkvKDE8PHQueikqMikpO3JldHVybiA4MDE1MDAzNCplLyhlKmUrMSkvYW8vKDE8PHQueil9KHIpLHRoaXMuZWRnZVJhZGl1cz10aGlzLmxheWVyc1swXS5sYXlvdXQuZ2V0KFwiZmlsbC1leHRydXNpb24tZWRnZS1yYWRpdXNcIikvdGhpcy50aWxlVG9NZXRlcjtmb3IoY29uc3R7ZmVhdHVyZTppLGlkOnMsaW5kZXg6YSxzb3VyY2VMYXllckluZGV4Om99b2YgdCl7Y29uc3QgdD10aGlzLmxheWVyc1swXS5fZmVhdHVyZUZpbHRlci5uZWVkR2VvbWV0cnksbD1vdShpLHQpO2lmKCF0aGlzLmxheWVyc1swXS5fZmVhdHVyZUZpbHRlci5maWx0ZXIobmV3IHdzKHRoaXMuem9vbSksbCxyKSljb250aW51ZTtjb25zdCB1PXtpZDpzLHNvdXJjZUxheWVySW5kZXg6byxpbmRleDphLGdlb21ldHJ5OnQ/bC5nZW9tZXRyeTphdShpLHIsbikscHJvcGVydGllczppLnByb3BlcnRpZXMsdHlwZTppLnR5cGUscGF0dGVybnM6e319LGM9dGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5sZW5ndGg7dGhpcy5oYXNQYXR0ZXJuP3RoaXMuZmVhdHVyZXMucHVzaChJYyhcImZpbGwtZXh0cnVzaW9uXCIsdGhpcy5sYXllcnMsdSx0aGlzLnpvb20sZSkpOnRoaXMuYWRkRmVhdHVyZSh1LHUuZ2VvbWV0cnksYSxyLHt9LGUuYXZhaWxhYmxlSW1hZ2VzLG4pLGUuZmVhdHVyZUluZGV4Lmluc2VydChpLHUuZ2VvbWV0cnksYSxvLHRoaXMuaW5kZXgsYyk7fXRoaXMuc29ydEJvcmRlcnMoKTt9YWRkRmVhdHVyZXModCxlLHIsbixpKXtmb3IoY29uc3QgdCBvZiB0aGlzLmZlYXR1cmVzKXtjb25zdHtnZW9tZXRyeTpzfT10O3RoaXMuYWRkRmVhdHVyZSh0LHMsdC5pbmRleCxlLHIsbixpKTt9dGhpcy5zb3J0Qm9yZGVycygpO311cGRhdGUodCxlLHIsbil7dGhpcy5zdGF0ZURlcGVuZGVudExheWVycy5sZW5ndGgmJnRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnVwZGF0ZVBhaW50QXJyYXlzKHQsZSx0aGlzLnN0YXRlRGVwZW5kZW50TGF5ZXJzLHIsbik7fWlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RofXVwbG9hZFBlbmRpbmcoKXtyZXR1cm4gIXRoaXMudXBsb2FkZWR8fHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLm5lZWRzVXBsb2FkfXVwbG9hZCh0KXt0aGlzLnVwbG9hZGVkfHwodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxQYyksdGhpcy5pbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKHRoaXMuaW5kZXhBcnJheSksdGhpcy5sYXlvdXRWZXJ0ZXhFeHRBcnJheSYmKHRoaXMubGF5b3V0VmVydGV4RXh0QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMubGF5b3V0VmVydGV4RXh0QXJyYXksQ2MubWVtYmVycywhMCkpKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy51cGxvYWQodCksdGhpcy51cGxvYWRlZD0hMDt9dXBsb2FkQ2VudHJvaWQodCl7MCE9PXRoaXMuY2VudHJvaWRWZXJ0ZXhBcnJheS5sZW5ndGgmJih0aGlzLmNlbnRyb2lkVmVydGV4QnVmZmVyP3RoaXMubmVlZHNDZW50cm9pZFVwZGF0ZSYmdGhpcy5jZW50cm9pZFZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKHRoaXMuY2VudHJvaWRWZXJ0ZXhBcnJheSk6dGhpcy5jZW50cm9pZFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLmNlbnRyb2lkVmVydGV4QXJyYXksRWMubWVtYmVycywhMCksdGhpcy5uZWVkc0NlbnRyb2lkVXBkYXRlPSExKTt9ZGVzdHJveSgpe3RoaXMubGF5b3V0VmVydGV4QnVmZmVyJiYodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuY2VudHJvaWRWZXJ0ZXhCdWZmZXImJnRoaXMuY2VudHJvaWRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMubGF5b3V0VmVydGV4RXh0QnVmZmVyJiZ0aGlzLmxheW91dFZlcnRleEV4dEJ1ZmZlci5kZXN0cm95KCksdGhpcy5pbmRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMuZGVzdHJveSgpLHRoaXMuc2VnbWVudHMuZGVzdHJveSgpKTt9YWRkRmVhdHVyZSh0LGUscixuLGkscyxhKXtjb25zdCBvPVtuZXcgeCgwLDApLG5ldyB4KGFvLGFvKV0sbD1hLnByb2plY3Rpb24sdT1cImdsb2JlXCI9PT1sLm5hbWUsYz10aGlzLmVuYWJsZVRlcnJhaW4mJiF1P25ldyBRYzpudWxsLGg9XCJQb2x5Z29uXCI9PT1KY1t0LnR5cGVdO3UmJiF0aGlzLmxheW91dFZlcnRleEV4dEFycmF5JiYodGhpcy5sYXlvdXRWZXJ0ZXhFeHRBcnJheT1uZXcgS3MpO2NvbnN0IHA9QWMoZSw1MDApO2ZvcihsZXQgdD1wLmxlbmd0aC0xO3Q+PTA7dC0tKXtjb25zdCBlPXBbdF07KDA9PT1lLmxlbmd0aHx8KGQ9ZVswXSkuZXZlcnkoKHQ9PnQueDw9MCkpfHxkLmV2ZXJ5KCh0PT50Lng+PWFvKSl8fGQuZXZlcnkoKHQ9PnQueTw9MCkpfHxkLmV2ZXJ5KCh0PT50Lnk+PWFvKSkpJiZwLnNwbGljZSh0LDEpO312YXIgZDtsZXQgZjtpZih1KWY9bGgocCxvLG4pO2Vsc2Uge2Y9W107Zm9yKGNvbnN0IHQgb2YgcClmLnB1c2goe3BvbHlnb246dCxib3VuZHM6b30pO31jb25zdCB5PWg/dGhpcy5lZGdlUmFkaXVzOjA7Zm9yKGNvbnN0e3BvbHlnb246dCxib3VuZHM6ZX1vZiBmKXtsZXQgcj0wLGk9MDtmb3IoY29uc3QgZSBvZiB0KWgmJiFlWzBdLmVxdWFscyhlW2UubGVuZ3RoLTFdKSYmZS5wdXNoKGVbMF0pLGkrPWg/ZS5sZW5ndGgtMTplLmxlbmd0aDtjb25zdCBzPXRoaXMuc2VnbWVudHMucHJlcGFyZVNlZ21lbnQoKGg/NTo0KSppLHRoaXMubGF5b3V0VmVydGV4QXJyYXksdGhpcy5pbmRleEFycmF5KTtpZihoKXtjb25zdCBlPVtdLGk9W107cj1zLnZlcnRleExlbmd0aDtmb3IoY29uc3QgciBvZiB0KXtsZXQgYSxvO3IubGVuZ3RoJiZyIT09dFswXSYmaS5wdXNoKGUubGVuZ3RoLzIpLGE9clsxXS5zdWIoclswXSkuX3BlcnAoKS5fdW5pdCgpO2ZvcihsZXQgdD0xO3Q8ci5sZW5ndGg7dCsrKXtjb25zdCBpPXJbdF0sYz1yW3Q9PT1yLmxlbmd0aC0xPzE6dCsxXTtsZXR7eDpoLHk6cH09aTtpZih5KXtvPWMuc3ViKGkpLl9wZXJwKCkuX3VuaXQoKTtjb25zdCB0PWEuYWRkKG8pLl91bml0KCksZT15Kk1hdGgubWluKDQsMS8oYS54KnQueCthLnkqdC55KSk7aCs9ZSp0LngscCs9ZSp0LnksYT1vO31ZYyh0aGlzLmxheW91dFZlcnRleEFycmF5LGgscCwwLDAsMSwxLDApLHMudmVydGV4TGVuZ3RoKyssZS5wdXNoKGkueCxpLnkpLHUmJldjKHRoaXMubGF5b3V0VmVydGV4RXh0QXJyYXksbC5wcm9qZWN0VGlsZVBvaW50KGgscCxuKSxsLnVwVmVjdG9yKG4saCxwKSk7fX1jb25zdCBhPXhjKGUsaSk7Zm9yKGxldCB0PTA7dDxhLmxlbmd0aDt0Kz0zKXRoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhyK2FbdF0scithW3QrMl0scithW3QrMV0pLHMucHJpbWl0aXZlTGVuZ3RoKys7fWZvcihjb25zdCBpIG9mIHQpe2MmJmkubGVuZ3RoJiZjLnN0YXJ0UmluZyhpWzBdKTtsZXQgdCxhLG8scD1pLmxlbmd0aD40JiZzaChpW2kubGVuZ3RoLTJdLGlbMF0saVsxXSksZD15P3JoKGlbaS5sZW5ndGgtMl0saVswXSxpWzFdLHkpOjA7YT1pWzFdLnN1YihpWzBdKS5fcGVycCgpLl91bml0KCk7bGV0IGY9ITA7Zm9yKGxldCBtPTEsZz0wO208aS5sZW5ndGg7bSsrKXtsZXQgeD1pW20tMV0sdj1pW21dO2NvbnN0IGI9aVttPT09aS5sZW5ndGgtMT8xOm0rMV07aWYoYyYmaCYmYy5jdXJyZW50UG9seUNvdW50LnRvcCsrLGloKHYseCxlKSl7eSYmKGE9Yi5zdWIodikuX3BlcnAoKS5fdW5pdCgpLGY9IWYpO2NvbnRpbnVlfWMmJmMuYXBwZW5kKHYseCk7Y29uc3Qgdz12LnN1Yih4KS5fcGVycCgpLF89dy54LyhNYXRoLmFicyh3LngpK01hdGguYWJzKHcueSkpLEE9dy55PjA/MTowLFM9eC5kaXN0KHYpO2lmKGcrUz4zMjc2OCYmKGc9MCkseSl7bz1iLnN1Yih2KS5fcGVycCgpLl91bml0KCk7bGV0IHQ9bmgoeCx2LGIsZWgoYSxvKSx5KTtpc05hTih0KSYmKHQ9MCk7Y29uc3QgZT12LnN1Yih4KS5fdW5pdCgpO3g9eC5hZGQoZS5tdWx0KGQpKS5fcm91bmQoKSx2PXYuYWRkKGUubXVsdCgtdCkpLl9yb3VuZCgpLGQ9dCxhPW87fWNvbnN0IGs9cy52ZXJ0ZXhMZW5ndGgsST1pLmxlbmd0aD40JiZzaCh4LHYsYik7bGV0IE09YWgoZyxwLGYpO2lmKFljKHRoaXMubGF5b3V0VmVydGV4QXJyYXkseC54LHgueSxfLEEsMCwwLE0pLFljKHRoaXMubGF5b3V0VmVydGV4QXJyYXkseC54LHgueSxfLEEsMCwxLE0pLGcrPVMsTT1haChnLEksIWYpLHA9SSxZYyh0aGlzLmxheW91dFZlcnRleEFycmF5LHYueCx2LnksXyxBLDAsMCxNKSxZYyh0aGlzLmxheW91dFZlcnRleEFycmF5LHYueCx2LnksXyxBLDAsMSxNKSxzLnZlcnRleExlbmd0aCs9NCx0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2soayswLGsrMSxrKzIpLHRoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhrKzEsayszLGsrMikscy5wcmltaXRpdmVMZW5ndGgrPTIseSl7Y29uc3Qgbj1yKygxPT09bT9pLmxlbmd0aC0yOm0tMiksYT0xPT09bT9yOm4rMTtpZih0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2soaysxLG4sayszKSx0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2sobixhLGsrMykscy5wcmltaXRpdmVMZW5ndGgrPTIsdm9pZCAwPT09dCYmKHQ9ayksIWloKGIsaVttXSxlKSl7Y29uc3QgZT1tPT09aS5sZW5ndGgtMT90OnMudmVydGV4TGVuZ3RoO3RoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhrKzIsayszLGUpLHRoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhrKzMsZSsxLGUpLHRoaXMuaW5kZXhBcnJheS5lbXBsYWNlQmFjayhrKzMsYSxlKzEpLHMucHJpbWl0aXZlTGVuZ3RoKz0zO31mPSFmO31pZih1KXtjb25zdCB0PXRoaXMubGF5b3V0VmVydGV4RXh0QXJyYXksZT1sLnByb2plY3RUaWxlUG9pbnQoeC54LHgueSxuKSxyPWwucHJvamVjdFRpbGVQb2ludCh2Lngsdi55LG4pLGk9bC51cFZlY3RvcihuLHgueCx4LnkpLHM9bC51cFZlY3RvcihuLHYueCx2LnkpO1djKHQsZSxpKSxXYyh0LGUsaSksV2ModCxyLHMpLFdjKHQscixzKTt9fWgmJihyKz1pLmxlbmd0aC0xKTt9fWlmKGMmJmMucG9seUNvdW50Lmxlbmd0aD4wKXtpZihjLmJvcmRlcnMpe2MudmVydGV4QXJyYXlPZmZzZXQ9dGhpcy5jZW50cm9pZFZlcnRleEFycmF5Lmxlbmd0aDtjb25zdCB0PWMuYm9yZGVycyxlPXRoaXMuZmVhdHVyZXNPbkJvcmRlci5wdXNoKGMpLTE7Zm9yKGxldCByPTA7cjw0O3IrKyl0W3JdWzBdIT09TnVtYmVyLk1BWF9WQUxVRSYmdGhpcy5ib3JkZXJzW3JdLnB1c2goZSk7fXRoaXMuZW5jb2RlQ2VudHJvaWQoYy5ib3JkZXJzP3ZvaWQgMDpjLmNlbnRyb2lkKCksYyk7fXRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnBvcHVsYXRlUGFpbnRBcnJheXModGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5sZW5ndGgsdCxyLGkscyxuKTt9c29ydEJvcmRlcnMoKXtmb3IobGV0IHQ9MDt0PDQ7dCsrKXRoaXMuYm9yZGVyc1t0XS5zb3J0KCgoZSxyKT0+dGhpcy5mZWF0dXJlc09uQm9yZGVyW2VdLmJvcmRlcnNbdF1bMF0tdGhpcy5mZWF0dXJlc09uQm9yZGVyW3JdLmJvcmRlcnNbdF1bMF0pKTt9ZW5jb2RlQ2VudHJvaWQodCxlLHI9ITApe2xldCBuLGk7aWYodClpZigwIT09dC55KXtjb25zdCByPWUuc3BhbigpLl9tdWx0KHRoaXMudGlsZVRvTWV0ZXIpO249KE1hdGgubWF4KHQueCwxKTw8MykrTWF0aC5taW4oNyxNYXRoLnJvdW5kKHIueC8xMCkpLGk9KE1hdGgubWF4KHQueSwxKTw8MykrTWF0aC5taW4oNyxNYXRoLnJvdW5kKHIueS8xMCkpO31lbHNlIG49TWF0aC5jZWlsKDcqKHQueCs0NTApKSxpPTA7ZWxzZSBuPTAsaT0rcjtsZXQgcz1yP3RoaXMuY2VudHJvaWRWZXJ0ZXhBcnJheS5sZW5ndGg6ZS52ZXJ0ZXhBcnJheU9mZnNldDtmb3IoY29uc3QgdCBvZiBlLnBvbHlDb3VudCl7ciYmdGhpcy5jZW50cm9pZFZlcnRleEFycmF5LnJlc2l6ZSh0aGlzLmNlbnRyb2lkVmVydGV4QXJyYXkubGVuZ3RoKzQqdC5lZGdlcyt0LnRvcCk7Zm9yKGxldCBlPTA7ZTx0LnRvcDtlKyspdGhpcy5jZW50cm9pZFZlcnRleEFycmF5LmVtcGxhY2UocysrLG4saSk7Zm9yKGxldCBlPTA7ZTwyKnQuZWRnZXM7ZSsrKXRoaXMuY2VudHJvaWRWZXJ0ZXhBcnJheS5lbXBsYWNlKHMrKywwLGkpLHRoaXMuY2VudHJvaWRWZXJ0ZXhBcnJheS5lbXBsYWNlKHMrKyxuLGkpO319fWZ1bmN0aW9uIGVoKHQsZSl7Y29uc3Qgcj10LmFkZChlKS5fdW5pdCgpO3JldHVybiB0Lngqci54K3QueSpyLnl9ZnVuY3Rpb24gcmgodCxlLHIsbil7Y29uc3QgaT1lLnN1Yih0KS5fcGVycCgpLl91bml0KCkscz1yLnN1YihlKS5fcGVycCgpLl91bml0KCk7cmV0dXJuIG5oKHQsZSxyLGVoKGkscyksbil9ZnVuY3Rpb24gbmgodCxlLHIsbixpKXtjb25zdCBzPU1hdGguc3FydCgxLW4qbik7cmV0dXJuIE1hdGgubWluKHQuZGlzdChlKS8zLGUuZGlzdChyKS8zLGkqcy9uKX1mdW5jdGlvbiBpaCh0LGUscil7cmV0dXJuIHQueDxyWzBdLngmJmUueDxyWzBdLnh8fHQueD5yWzFdLngmJmUueD5yWzFdLnh8fHQueTxyWzBdLnkmJmUueTxyWzBdLnl8fHQueT5yWzFdLnkmJmUueT5yWzFdLnl9ZnVuY3Rpb24gc2godCxlLHIpe2lmKHQueDwwfHx0Lng+PWFvfHxlLng8MHx8ZS54Pj1hb3x8ci54PDB8fHIueD49YW8pcmV0dXJuICExO2NvbnN0IG49ci5zdWIoZSksaT1uLnBlcnAoKSxzPXQuc3ViKGUpO3JldHVybiAobi54KnMueCtuLnkqcy55KS9NYXRoLnNxcnQoKG4ueCpuLngrbi55Km4ueSkqKHMueCpzLngrcy55KnMueSkpPi0uODY2JiZpLngqcy54K2kueSpzLnk8MH1mdW5jdGlvbiBhaCh0LGUscil7Y29uc3Qgbj1lPzJ8dDotMyZ0O3JldHVybiByPzF8bjotMiZufWZ1bmN0aW9uIG9oKCl7Y29uc3QgdD1NYXRoLlBJLzMyLGU9TWF0aC50YW4odCkscj1VbDtyZXR1cm4gcipNYXRoLnNxcnQoMSsyKmUqZSktcn1mdW5jdGlvbiBsaCh0LGUscil7Y29uc3Qgbj0xPDxyLnosaT1LbChyLngvbikscz1LbCgoci54KzEpL24pLGE9WGwoci55L24pLG89WGwoKHIueSsxKS9uKTtyZXR1cm4gZnVuY3Rpb24odCxlLHIsbixpPTAscyl7Y29uc3QgYT1bXTtpZighdC5sZW5ndGh8fCFyfHwhbilyZXR1cm4gYTtjb25zdCBvPSh0LGUpPT57Zm9yKGNvbnN0IHIgb2YgdClhLnB1c2goe3BvbHlnb246cixib3VuZHM6ZX0pO30sbD1NYXRoLmNlaWwoTWF0aC5sb2cyKHIpKSx1PU1hdGguY2VpbChNYXRoLmxvZzIobikpLGM9bC11LGg9W107Zm9yKGxldCB0PTA7dDxNYXRoLmFicyhjKTt0KyspaC5wdXNoKGM+MD8wOjEpO2ZvcihsZXQgdD0wO3Q8TWF0aC5taW4obCx1KTt0KyspaC5wdXNoKDApLGgucHVzaCgxKTtsZXQgcD10O2lmKHA9WGMocCxlWzBdLnktaSxlWzFdLnkraSwxKSxwPVhjKHAsZVswXS54LWksZVsxXS54K2ksMCksIXAubGVuZ3RoKXJldHVybiBhO2NvbnN0IGQ9W107Zm9yKGgubGVuZ3RoP2QucHVzaCh7cG9seWdvbnM6cCxib3VuZHM6ZSxkZXB0aDowfSk6byhwLGUpO2QubGVuZ3RoOyl7Y29uc3QgdD1kLnBvcCgpLGU9dC5kZXB0aCxyPWhbZV0sbj10LmJvdW5kc1swXSxhPXQuYm91bmRzWzFdLGw9MD09PXI/bi54Om4ueSx1PTA9PT1yP2EueDphLnksYz1zP3MocixsLHUpOi41KihsK3UpLHA9WGModC5wb2x5Z29ucyxsLWksYytpLHIpLGY9WGModC5wb2x5Z29ucyxjLWksdStpLHIpO2lmKHAubGVuZ3RoKXtjb25zdCB0PVtuLG5ldyB4KDA9PT1yP2M6YS54LDE9PT1yP2M6YS55KV07aC5sZW5ndGg+ZSsxP2QucHVzaCh7cG9seWdvbnM6cCxib3VuZHM6dCxkZXB0aDplKzF9KTpvKHAsdCk7fWlmKGYubGVuZ3RoKXtjb25zdCB0PVtuZXcgeCgwPT09cj9jOm4ueCwxPT09cj9jOm4ueSksYV07aC5sZW5ndGg+ZSsxP2QucHVzaCh7cG9seWdvbnM6Zixib3VuZHM6dCxkZXB0aDplKzF9KTpvKGYsdCk7fX1yZXR1cm4gYX0odCxlLE1hdGguY2VpbCgocy1pKS8xMS4yNSksTWF0aC5jZWlsKChhLW8pLzExLjI1KSwxLCgodCxlLGkpPT57aWYoMD09PXQpcmV0dXJuIC41KihlK2kpO3tjb25zdCB0PVhsKChyLnkrZS9hbykvbik7cmV0dXJuIChHbCguNSooWGwoKHIueStpL2FvKS9uKSt0KSkqbi1yLnkpKmFvfX0pKX1KaSh0aCxcIkZpbGxFeHRydXNpb25CdWNrZXRcIix7b21pdDpbXCJsYXllcnNcIixcImZlYXR1cmVzXCJdfSksSmkoUWMsXCJQYXJ0TWV0YWRhdGFcIik7Y29uc3QgdWg9bmV3IFBzKHtcImZpbGwtZXh0cnVzaW9uLWVkZ2UtcmFkaXVzXCI6bmV3IEJzKHRlW1wibGF5b3V0X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tZWRnZS1yYWRpdXNcIl0pfSk7dmFyIGNoPXtwYWludDpuZXcgUHMoe1wiZmlsbC1leHRydXNpb24tb3BhY2l0eVwiOm5ldyBCcyh0ZVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tb3BhY2l0eVwiXSksXCJmaWxsLWV4dHJ1c2lvbi1jb2xvclwiOm5ldyBFcyh0ZVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tY29sb3JcIl0pLFwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlXCI6bmV3IEJzKHRlW1wicGFpbnRfZmlsbC1leHRydXNpb25cIl1bXCJmaWxsLWV4dHJ1c2lvbi10cmFuc2xhdGVcIl0pLFwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlLWFuY2hvclwiOm5ldyBCcyh0ZVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlLWFuY2hvclwiXSksXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCI6bmV3IEVzKHRlW1wicGFpbnRfZmlsbC1leHRydXNpb25cIl1bXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCJdKSxcImZpbGwtZXh0cnVzaW9uLWhlaWdodFwiOm5ldyBFcyh0ZVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24taGVpZ2h0XCJdKSxcImZpbGwtZXh0cnVzaW9uLWJhc2VcIjpuZXcgRXModGVbXCJwYWludF9maWxsLWV4dHJ1c2lvblwiXVtcImZpbGwtZXh0cnVzaW9uLWJhc2VcIl0pLFwiZmlsbC1leHRydXNpb24tdmVydGljYWwtZ3JhZGllbnRcIjpuZXcgQnModGVbXCJwYWludF9maWxsLWV4dHJ1c2lvblwiXVtcImZpbGwtZXh0cnVzaW9uLXZlcnRpY2FsLWdyYWRpZW50XCJdKSxcImZpbGwtZXh0cnVzaW9uLWFtYmllbnQtb2NjbHVzaW9uLWludGVuc2l0eVwiOm5ldyBCcyh0ZVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tYW1iaWVudC1vY2NsdXNpb24taW50ZW5zaXR5XCJdKSxcImZpbGwtZXh0cnVzaW9uLWFtYmllbnQtb2NjbHVzaW9uLXJhZGl1c1wiOm5ldyBCcyh0ZVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tYW1iaWVudC1vY2NsdXNpb24tcmFkaXVzXCJdKSxcImZpbGwtZXh0cnVzaW9uLXJvdW5kZWQtcm9vZlwiOm5ldyBCcyh0ZVtcInBhaW50X2ZpbGwtZXh0cnVzaW9uXCJdW1wiZmlsbC1leHRydXNpb24tcm91bmRlZC1yb29mXCJdKX0pLGxheW91dDp1aH07ZnVuY3Rpb24gaGgodCxlLHIpe3ZhciBuPTIqTWF0aC5QSSo2Mzc4MTM3LzI1Ni9NYXRoLnBvdygyLHIpO3JldHVybiBbdCpuLTIqTWF0aC5QSSo2Mzc4MTM3LzIsZSpuLTIqTWF0aC5QSSo2Mzc4MTM3LzJdfWNsYXNzIHBoe2NvbnN0cnVjdG9yKHQsZSxyKXt0aGlzLno9dCx0aGlzLng9ZSx0aGlzLnk9cix0aGlzLmtleT15aCgwLHQsdCxlLHIpO31lcXVhbHModCl7cmV0dXJuIHRoaXMuej09PXQueiYmdGhpcy54PT09dC54JiZ0aGlzLnk9PT10Lnl9dXJsKHQsZSl7Y29uc3Qgcj1mdW5jdGlvbih0LGUscil7dmFyIG49aGgoMjU2KnQsMjU2KihlPU1hdGgucG93KDIsciktZS0xKSxyKSxpPWhoKDI1NioodCsxKSwyNTYqKGUrMSkscik7cmV0dXJuIG5bMF0rXCIsXCIrblsxXStcIixcIitpWzBdK1wiLFwiK2lbMV19KHRoaXMueCx0aGlzLnksdGhpcy56KSxuPWZ1bmN0aW9uKHQsZSxyKXtsZXQgbixpPVwiXCI7Zm9yKGxldCBzPXQ7cz4wO3MtLSluPTE8PHMtMSxpKz0oZSZuPzE6MCkrKHImbj8yOjApO3JldHVybiBpfSh0aGlzLnosdGhpcy54LHRoaXMueSk7cmV0dXJuIHRbKHRoaXMueCt0aGlzLnkpJXQubGVuZ3RoXS5yZXBsYWNlKFwie3ByZWZpeH1cIiwodGhpcy54JTE2KS50b1N0cmluZygxNikrKHRoaXMueSUxNikudG9TdHJpbmcoMTYpKS5yZXBsYWNlKC97en0vZyxTdHJpbmcodGhpcy56KSkucmVwbGFjZSgve3h9L2csU3RyaW5nKHRoaXMueCkpLnJlcGxhY2UoL3t5fS9nLFN0cmluZyhcInRtc1wiPT09ZT9NYXRoLnBvdygyLHRoaXMueiktdGhpcy55LTE6dGhpcy55KSkucmVwbGFjZShcIntxdWFka2V5fVwiLG4pLnJlcGxhY2UoXCJ7YmJveC1lcHNnLTM4NTd9XCIscil9dG9TdHJpbmcoKXtyZXR1cm4gYCR7dGhpcy56fS8ke3RoaXMueH0vJHt0aGlzLnl9YH19Y2xhc3MgZGh7Y29uc3RydWN0b3IodCxlKXt0aGlzLndyYXA9dCx0aGlzLmNhbm9uaWNhbD1lLHRoaXMua2V5PXloKHQsZS56LGUueixlLngsZS55KTt9fWNsYXNzIGZoe2NvbnN0cnVjdG9yKHQsZSxyLG4saSl7dGhpcy5vdmVyc2NhbGVkWj10LHRoaXMud3JhcD1lLHRoaXMuY2Fub25pY2FsPW5ldyBwaChyLCtuLCtpKSx0aGlzLmtleT0wPT09ZSYmdD09PXI/dGhpcy5jYW5vbmljYWwua2V5OnloKGUsdCxyLG4saSk7fWVxdWFscyh0KXtyZXR1cm4gdGhpcy5vdmVyc2NhbGVkWj09PXQub3ZlcnNjYWxlZFomJnRoaXMud3JhcD09PXQud3JhcCYmdGhpcy5jYW5vbmljYWwuZXF1YWxzKHQuY2Fub25pY2FsKX1zY2FsZWRUbyh0KXtjb25zdCBlPXRoaXMuY2Fub25pY2FsLnotdDtyZXR1cm4gdD50aGlzLmNhbm9uaWNhbC56P25ldyBmaCh0LHRoaXMud3JhcCx0aGlzLmNhbm9uaWNhbC56LHRoaXMuY2Fub25pY2FsLngsdGhpcy5jYW5vbmljYWwueSk6bmV3IGZoKHQsdGhpcy53cmFwLHQsdGhpcy5jYW5vbmljYWwueD4+ZSx0aGlzLmNhbm9uaWNhbC55Pj5lKX1jYWxjdWxhdGVTY2FsZWRLZXkodCxlPSEwKXtpZih0aGlzLm92ZXJzY2FsZWRaPT09dCYmZSlyZXR1cm4gdGhpcy5rZXk7aWYodD50aGlzLmNhbm9uaWNhbC56KXJldHVybiB5aCh0aGlzLndyYXAqK2UsdCx0aGlzLmNhbm9uaWNhbC56LHRoaXMuY2Fub25pY2FsLngsdGhpcy5jYW5vbmljYWwueSk7e2NvbnN0IHI9dGhpcy5jYW5vbmljYWwuei10O3JldHVybiB5aCh0aGlzLndyYXAqK2UsdCx0LHRoaXMuY2Fub25pY2FsLng+PnIsdGhpcy5jYW5vbmljYWwueT4+cil9fWlzQ2hpbGRPZih0KXtpZih0LndyYXAhPT10aGlzLndyYXApcmV0dXJuICExO2NvbnN0IGU9dGhpcy5jYW5vbmljYWwuei10LmNhbm9uaWNhbC56O3JldHVybiAwPT09dC5vdmVyc2NhbGVkWnx8dC5vdmVyc2NhbGVkWjx0aGlzLm92ZXJzY2FsZWRaJiZ0LmNhbm9uaWNhbC54PT09dGhpcy5jYW5vbmljYWwueD4+ZSYmdC5jYW5vbmljYWwueT09PXRoaXMuY2Fub25pY2FsLnk+PmV9Y2hpbGRyZW4odCl7aWYodGhpcy5vdmVyc2NhbGVkWj49dClyZXR1cm4gW25ldyBmaCh0aGlzLm92ZXJzY2FsZWRaKzEsdGhpcy53cmFwLHRoaXMuY2Fub25pY2FsLnosdGhpcy5jYW5vbmljYWwueCx0aGlzLmNhbm9uaWNhbC55KV07Y29uc3QgZT10aGlzLmNhbm9uaWNhbC56KzEscj0yKnRoaXMuY2Fub25pY2FsLngsbj0yKnRoaXMuY2Fub25pY2FsLnk7cmV0dXJuIFtuZXcgZmgoZSx0aGlzLndyYXAsZSxyLG4pLG5ldyBmaChlLHRoaXMud3JhcCxlLHIrMSxuKSxuZXcgZmgoZSx0aGlzLndyYXAsZSxyLG4rMSksbmV3IGZoKGUsdGhpcy53cmFwLGUscisxLG4rMSldfWlzTGVzc1RoYW4odCl7cmV0dXJuIHRoaXMud3JhcDx0LndyYXB8fCEodGhpcy53cmFwPnQud3JhcCkmJih0aGlzLm92ZXJzY2FsZWRaPHQub3ZlcnNjYWxlZFp8fCEodGhpcy5vdmVyc2NhbGVkWj50Lm92ZXJzY2FsZWRaKSYmKHRoaXMuY2Fub25pY2FsLng8dC5jYW5vbmljYWwueHx8ISh0aGlzLmNhbm9uaWNhbC54PnQuY2Fub25pY2FsLngpJiZ0aGlzLmNhbm9uaWNhbC55PHQuY2Fub25pY2FsLnkpKX13cmFwcGVkKCl7cmV0dXJuIG5ldyBmaCh0aGlzLm92ZXJzY2FsZWRaLDAsdGhpcy5jYW5vbmljYWwueix0aGlzLmNhbm9uaWNhbC54LHRoaXMuY2Fub25pY2FsLnkpfXVud3JhcFRvKHQpe3JldHVybiBuZXcgZmgodGhpcy5vdmVyc2NhbGVkWix0LHRoaXMuY2Fub25pY2FsLnosdGhpcy5jYW5vbmljYWwueCx0aGlzLmNhbm9uaWNhbC55KX1vdmVyc2NhbGVGYWN0b3IoKXtyZXR1cm4gTWF0aC5wb3coMix0aGlzLm92ZXJzY2FsZWRaLXRoaXMuY2Fub25pY2FsLnopfXRvVW53cmFwcGVkKCl7cmV0dXJuIG5ldyBkaCh0aGlzLndyYXAsdGhpcy5jYW5vbmljYWwpfXRvU3RyaW5nKCl7cmV0dXJuIGAke3RoaXMub3ZlcnNjYWxlZFp9LyR7dGhpcy5jYW5vbmljYWwueH0vJHt0aGlzLmNhbm9uaWNhbC55fWB9fWZ1bmN0aW9uIHloKHQsZSxyLG4saSl7Y29uc3Qgcz0xPDxNYXRoLm1pbihyLDIyKTtsZXQgYT1zKihpJXMpK24lcztyZXR1cm4gdCYmcjwyMiYmKGErPXMqcyooKHQ8MD8tMip0LTE6Mip0KSUoMTw8MiooMjItcikpKSksMTYqKDMyKmErcikrKGUtcil9SmkocGgsXCJDYW5vbmljYWxUaWxlSURcIiksSmkoZmgsXCJPdmVyc2NhbGVkVGlsZUlEXCIse29taXQ6W1wicHJvak1hdHJpeFwiXX0pO2NsYXNzIG1oIGV4dGVuZHMgeHtjb25zdHJ1Y3Rvcih0LGUscil7c3VwZXIodCxlKSx0aGlzLno9cjt9fWZ1bmN0aW9uIGdoKHQsZSl7cmV0dXJuIHQueCplLngrdC55KmUueX1mdW5jdGlvbiB4aCh0LGUpe2lmKDE9PT10Lmxlbmd0aCl7bGV0IHI9MDtjb25zdCBuPWVbcisrXTtsZXQgaTtmb3IoOyFpfHxuLmVxdWFscyhpKTspaWYoaT1lW3IrK10sIWkpcmV0dXJuIDEvMDtmb3IoO3I8ZS5sZW5ndGg7cisrKXtjb25zdCBzPWVbcl0sYT10WzBdLG89aS5zdWIobiksbD1zLnN1YihuKSx1PWEuc3ViKG4pLGM9Z2gobyxvKSxoPWdoKG8sbCkscD1naChsLGwpLGQ9Z2godSxvKSxmPWdoKHUsbCkseT1jKnAtaCpoLG09KHAqZC1oKmYpL3ksZz0oYypmLWgqZCkveSx4PW4ueiooMS1tLWcpK2kueiptK3MueipnO2lmKGlzRmluaXRlKHgpKXJldHVybiB4fXJldHVybiAxLzB9e2xldCB0PTEvMDtmb3IoY29uc3QgciBvZiBlKXQ9TWF0aC5taW4odCxyLnopO3JldHVybiB0fX1mdW5jdGlvbiB2aCh0LGUscixuLGkscyxhLG8pe2NvbnN0IGw9YSppLmdldEVsZXZhdGlvbkF0KHQsZSwhMCwhMCksdT0wIT09c1swXSxjPXU/MD09PXNbMV0/YSooc1swXS83LTQ1MCk6YSpmdW5jdGlvbih0LGUscil7Y29uc3Qgbj1NYXRoLmZsb29yKGVbMF0vOCksaT1NYXRoLmZsb29yKGVbMV0vOCkscz0xMCooZVswXS04Km4pLGE9MTAqKGVbMV0tOCppKSxvPXQuZ2V0RWxldmF0aW9uQXQobixpLCEwLCEwKSxsPXQuZ2V0TWV0ZXJUb0RFTShyKSx1PU1hdGguZmxvb3IoLjUqKHMqbC0xKSksYz1NYXRoLmZsb29yKC41KihhKmwtMSkpLGg9dC50aWxlQ29vcmRUb1BpeGVsKG4saSkscD0yKnUrMSxkPTIqYysxLGY9ZnVuY3Rpb24odCxlLHIsbixpKXtyZXR1cm4gW3QuZ2V0RWxldmF0aW9uQXRQaXhlbChlLHIsITApLHQuZ2V0RWxldmF0aW9uQXRQaXhlbChlK2ksciwhMCksdC5nZXRFbGV2YXRpb25BdFBpeGVsKGUscitpLCEwKSx0LmdldEVsZXZhdGlvbkF0UGl4ZWwoZStuLHIraSwhMCldfSh0LGgueC11LGgueS1jLHAsZCkseT1NYXRoLmFicyhmWzBdLWZbMV0pLG09TWF0aC5hYnMoZlsyXS1mWzNdKSxnPU1hdGguYWJzKGZbMF0tZlsyXSkrTWF0aC5hYnMoZlsxXS1mWzNdKSx4PU1hdGgubWluKC4yNSwuNSpsKih5K20pL3ApLHY9TWF0aC5taW4oLjI1LC41KmwqZy9kKTtyZXR1cm4gbytNYXRoLm1heCh4KnMsdiphKX0oaSxzLG8pOmw7cmV0dXJuIHtiYXNlOmwrKDA9PT1yKT8tMTpyLHRvcDp1P01hdGgubWF4KGMrbixsK3IrMik6bCtufX1jb25zdCBiaD1Scyhbe25hbWU6XCJhX3Bvc19ub3JtYWxcIixjb21wb25lbnRzOjIsdHlwZTpcIkludDE2XCJ9LHtuYW1lOlwiYV9kYXRhXCIsY29tcG9uZW50czo0LHR5cGU6XCJVaW50OFwifSx7bmFtZTpcImFfbGluZXNvZmFyXCIsY29tcG9uZW50czoxLHR5cGU6XCJGbG9hdDMyXCJ9XSw0KSx7bWVtYmVyczp3aH09YmgsX2g9UnMoW3tuYW1lOlwiYV9wYWNrZWRcIixjb21wb25lbnRzOjQsdHlwZTpcIkZsb2F0MzJcIn1dKSx7bWVtYmVyczpBaH09X2gsU2g9S2MudHlwZXMsa2g9TWF0aC5jb3MoTWF0aC5QSS8xODAqMzcuNSk7Y2xhc3MgSWh7Y29uc3RydWN0b3IodCl7dGhpcy56b29tPXQuem9vbSx0aGlzLm92ZXJzY2FsaW5nPXQub3ZlcnNjYWxpbmcsdGhpcy5sYXllcnM9dC5sYXllcnMsdGhpcy5sYXllcklkcz10aGlzLmxheWVycy5tYXAoKHQ9PnQuaWQpKSx0aGlzLmluZGV4PXQuaW5kZXgsdGhpcy5wcm9qZWN0aW9uPXQucHJvamVjdGlvbix0aGlzLmhhc1BhdHRlcm49ITEsdGhpcy5wYXR0ZXJuRmVhdHVyZXM9W10sdGhpcy5saW5lQ2xpcHNBcnJheT1bXSx0aGlzLmdyYWRpZW50cz17fSx0aGlzLmxheWVycy5mb3JFYWNoKCh0PT57dGhpcy5ncmFkaWVudHNbdC5pZF09e307fSkpLHRoaXMubGF5b3V0VmVydGV4QXJyYXk9bmV3IHFzLHRoaXMubGF5b3V0VmVydGV4QXJyYXkyPW5ldyBOcyx0aGlzLmluZGV4QXJyYXk9bmV3IHJhLHRoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zPW5ldyBKYSh0LmxheWVycyx0Lnpvb20pLHRoaXMuc2VnbWVudHM9bmV3IHNvLHRoaXMubWF4TGluZUxlbmd0aD0wLHRoaXMuc3RhdGVEZXBlbmRlbnRMYXllcklkcz10aGlzLmxheWVycy5maWx0ZXIoKHQ9PnQuaXNTdGF0ZURlcGVuZGVudCgpKSkubWFwKCh0PT50LmlkKSk7fXBvcHVsYXRlKHQsZSxyLG4pe3RoaXMuaGFzUGF0dGVybj1rYyhcImxpbmVcIix0aGlzLmxheWVycyxlKTtjb25zdCBpPXRoaXMubGF5ZXJzWzBdLmxheW91dC5nZXQoXCJsaW5lLXNvcnQta2V5XCIpLHM9W107Zm9yKGNvbnN0e2ZlYXR1cmU6ZSxpZDphLGluZGV4Om8sc291cmNlTGF5ZXJJbmRleDpsfW9mIHQpe2NvbnN0IHQ9dGhpcy5sYXllcnNbMF0uX2ZlYXR1cmVGaWx0ZXIubmVlZEdlb21ldHJ5LHU9b3UoZSx0KTtpZighdGhpcy5sYXllcnNbMF0uX2ZlYXR1cmVGaWx0ZXIuZmlsdGVyKG5ldyB3cyh0aGlzLnpvb20pLHUscikpY29udGludWU7Y29uc3QgYz1pP2kuZXZhbHVhdGUodSx7fSxyKTp2b2lkIDAsaD17aWQ6YSxwcm9wZXJ0aWVzOmUucHJvcGVydGllcyx0eXBlOmUudHlwZSxzb3VyY2VMYXllckluZGV4OmwsaW5kZXg6byxnZW9tZXRyeTp0P3UuZ2VvbWV0cnk6YXUoZSxyLG4pLHBhdHRlcm5zOnt9LHNvcnRLZXk6Y307cy5wdXNoKGgpO31pJiZzLnNvcnQoKCh0LGUpPT50LnNvcnRLZXktZS5zb3J0S2V5KSk7Y29uc3R7bGluZUF0bGFzOmEsZmVhdHVyZUluZGV4Om99PWUsbD10aGlzLmFkZENvbnN0YW50RGFzaGVzKGEpO2Zvcihjb25zdCBuIG9mIHMpe2NvbnN0e2dlb21ldHJ5OmksaW5kZXg6cyxzb3VyY2VMYXllckluZGV4OnV9PW47aWYobCYmdGhpcy5hZGRGZWF0dXJlRGFzaGVzKG4sYSksdGhpcy5oYXNQYXR0ZXJuKXtjb25zdCB0PUljKFwibGluZVwiLHRoaXMubGF5ZXJzLG4sdGhpcy56b29tLGUpO3RoaXMucGF0dGVybkZlYXR1cmVzLnB1c2godCk7fWVsc2UgdGhpcy5hZGRGZWF0dXJlKG4saSxzLHIsYS5wb3NpdGlvbnMsZS5hdmFpbGFibGVJbWFnZXMpO28uaW5zZXJ0KHRbc10uZmVhdHVyZSxpLHMsdSx0aGlzLmluZGV4KTt9fWFkZENvbnN0YW50RGFzaGVzKHQpe2xldCBlPSExO2Zvcihjb25zdCByIG9mIHRoaXMubGF5ZXJzKXtjb25zdCBuPXIucGFpbnQuZ2V0KFwibGluZS1kYXNoYXJyYXlcIikudmFsdWUsaT1yLmxheW91dC5nZXQoXCJsaW5lLWNhcFwiKS52YWx1ZTtpZihcImNvbnN0YW50XCIhPT1uLmtpbmR8fFwiY29uc3RhbnRcIiE9PWkua2luZCllPSEwO2Vsc2Uge2NvbnN0IGU9aS52YWx1ZSxyPW4udmFsdWU7aWYoIXIpY29udGludWU7dC5hZGREYXNoKHIsZSk7fX1yZXR1cm4gZX1hZGRGZWF0dXJlRGFzaGVzKHQsZSl7Y29uc3Qgcj10aGlzLnpvb207Zm9yKGNvbnN0IG4gb2YgdGhpcy5sYXllcnMpe2NvbnN0IGk9bi5wYWludC5nZXQoXCJsaW5lLWRhc2hhcnJheVwiKS52YWx1ZSxzPW4ubGF5b3V0LmdldChcImxpbmUtY2FwXCIpLnZhbHVlO2lmKFwiY29uc3RhbnRcIj09PWkua2luZCYmXCJjb25zdGFudFwiPT09cy5raW5kKWNvbnRpbnVlO2xldCBhLG87aWYoXCJjb25zdGFudFwiPT09aS5raW5kKXtpZihhPWkudmFsdWUsIWEpY29udGludWV9ZWxzZSBhPWkuZXZhbHVhdGUoe3pvb206cn0sdCk7bz1cImNvbnN0YW50XCI9PT1zLmtpbmQ/cy52YWx1ZTpzLmV2YWx1YXRlKHt6b29tOnJ9LHQpLGUuYWRkRGFzaChhLG8pLHQucGF0dGVybnNbbi5pZF09ZS5nZXRLZXkoYSxvKTt9fXVwZGF0ZSh0LGUscixuKXt0aGlzLnN0YXRlRGVwZW5kZW50TGF5ZXJzLmxlbmd0aCYmdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBkYXRlUGFpbnRBcnJheXModCxlLHRoaXMuc3RhdGVEZXBlbmRlbnRMYXllcnMscixuKTt9YWRkRmVhdHVyZXModCxlLHIsbixpKXtmb3IoY29uc3QgdCBvZiB0aGlzLnBhdHRlcm5GZWF0dXJlcyl0aGlzLmFkZEZlYXR1cmUodCx0Lmdlb21ldHJ5LHQuaW5kZXgsZSxyLG4pO31pc0VtcHR5KCl7cmV0dXJuIDA9PT10aGlzLmxheW91dFZlcnRleEFycmF5Lmxlbmd0aH11cGxvYWRQZW5kaW5nKCl7cmV0dXJuICF0aGlzLnVwbG9hZGVkfHx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5uZWVkc1VwbG9hZH11cGxvYWQodCl7dGhpcy51cGxvYWRlZHx8KDAhPT10aGlzLmxheW91dFZlcnRleEFycmF5Mi5sZW5ndGgmJih0aGlzLmxheW91dFZlcnRleEJ1ZmZlcjI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheTIsQWgpKSx0aGlzLmxheW91dFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLmxheW91dFZlcnRleEFycmF5LHdoKSx0aGlzLmluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIodGhpcy5pbmRleEFycmF5KSksdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMudXBsb2FkKHQpLHRoaXMudXBsb2FkZWQ9ITA7fWRlc3Ryb3koKXt0aGlzLmxheW91dFZlcnRleEJ1ZmZlciYmKHRoaXMubGF5b3V0VmVydGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLmluZGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy5kZXN0cm95KCksdGhpcy5zZWdtZW50cy5kZXN0cm95KCkpO31saW5lRmVhdHVyZUNsaXBzKHQpe2lmKHQucHJvcGVydGllcyYmdC5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KFwibWFwYm94X2NsaXBfc3RhcnRcIikmJnQucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShcIm1hcGJveF9jbGlwX2VuZFwiKSlyZXR1cm4ge3N0YXJ0Oit0LnByb3BlcnRpZXMubWFwYm94X2NsaXBfc3RhcnQsZW5kOit0LnByb3BlcnRpZXMubWFwYm94X2NsaXBfZW5kfX1hZGRGZWF0dXJlKHQsZSxyLG4saSxzKXtjb25zdCBhPXRoaXMubGF5ZXJzWzBdLmxheW91dCxvPWEuZ2V0KFwibGluZS1qb2luXCIpLmV2YWx1YXRlKHQse30pLGw9YS5nZXQoXCJsaW5lLWNhcFwiKS5ldmFsdWF0ZSh0LHt9KSx1PWEuZ2V0KFwibGluZS1taXRlci1saW1pdFwiKSxjPWEuZ2V0KFwibGluZS1yb3VuZC1saW1pdFwiKTt0aGlzLmxpbmVDbGlwcz10aGlzLmxpbmVGZWF0dXJlQ2xpcHModCk7Zm9yKGNvbnN0IHIgb2YgZSl0aGlzLmFkZExpbmUocix0LG8sbCx1LGMpO3RoaXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnBvcHVsYXRlUGFpbnRBcnJheXModGhpcy5sYXlvdXRWZXJ0ZXhBcnJheS5sZW5ndGgsdCxyLGkscyxuKTt9YWRkTGluZSh0LGUscixuLGkscyl7aWYodGhpcy5kaXN0YW5jZT0wLHRoaXMuc2NhbGVkRGlzdGFuY2U9MCx0aGlzLnRvdGFsRGlzdGFuY2U9MCx0aGlzLmxpbmVTb0Zhcj0wLHRoaXMubGluZUNsaXBzKXt0aGlzLmxpbmVDbGlwc0FycmF5LnB1c2godGhpcy5saW5lQ2xpcHMpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGgtMTtlKyspdGhpcy50b3RhbERpc3RhbmNlKz10W2VdLmRpc3QodFtlKzFdKTt0aGlzLnVwZGF0ZVNjYWxlZERpc3RhbmNlKCksdGhpcy5tYXhMaW5lTGVuZ3RoPU1hdGgubWF4KHRoaXMubWF4TGluZUxlbmd0aCx0aGlzLnRvdGFsRGlzdGFuY2UpO31jb25zdCBhPVwiUG9seWdvblwiPT09U2hbZS50eXBlXTtsZXQgbz10Lmxlbmd0aDtmb3IoO28+PTImJnRbby0xXS5lcXVhbHModFtvLTJdKTspby0tO2xldCBsPTA7Zm9yKDtsPG8tMSYmdFtsXS5lcXVhbHModFtsKzFdKTspbCsrO2lmKG88KGE/MzoyKSlyZXR1cm47XCJiZXZlbFwiPT09ciYmKGk9MS4wNSk7Y29uc3QgdT10aGlzLm92ZXJzY2FsaW5nPD0xNj8xNSphby8oNTEyKnRoaXMub3ZlcnNjYWxpbmcpOjAsYz10aGlzLnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KDEwKm8sdGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmluZGV4QXJyYXkpO2xldCBoLHAsZCxmLHk7dGhpcy5lMT10aGlzLmUyPS0xLGEmJihoPXRbby0yXSx5PXRbbF0uc3ViKGgpLl91bml0KCkuX3BlcnAoKSk7Zm9yKGxldCBlPWw7ZTxvO2UrKyl7aWYoZD1lPT09by0xP2E/dFtsKzFdOnZvaWQgMDp0W2UrMV0sZCYmdFtlXS5lcXVhbHMoZCkpY29udGludWU7eSYmKGY9eSksaCYmKHA9aCksaD10W2VdLHk9ZD9kLnN1YihoKS5fdW5pdCgpLl9wZXJwKCk6ZixmPWZ8fHk7bGV0IG09Zi5hZGQoeSk7MD09PW0ueCYmMD09PW0ueXx8bS5fdW5pdCgpO2NvbnN0IGc9Zi54KnkueCtmLnkqeS55LHg9bS54KnkueCttLnkqeS55LHY9MCE9PXg/MS94OjEvMCxiPTIqTWF0aC5zcXJ0KDItMip4KSx3PXg8a2gmJnAmJmQsXz1mLngqeS55LWYueSp5Lng+MDtpZih3JiZlPmwpe2NvbnN0IHQ9aC5kaXN0KHApO2lmKHQ+Mip1KXtjb25zdCBlPWguc3ViKGguc3ViKHApLl9tdWx0KHUvdCkuX3JvdW5kKCkpO3RoaXMudXBkYXRlRGlzdGFuY2UocCxlKSx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoZSxmLDAsMCxjKSxwPWU7fX1jb25zdCBBPXAmJmQ7bGV0IFM9QT9yOmE/XCJidXR0XCI6bjtpZihBJiZcInJvdW5kXCI9PT1TJiYodjxzP1M9XCJtaXRlclwiOnY8PTImJihTPVwiZmFrZXJvdW5kXCIpKSxcIm1pdGVyXCI9PT1TJiZ2PmkmJihTPVwiYmV2ZWxcIiksXCJiZXZlbFwiPT09UyYmKHY+MiYmKFM9XCJmbGlwYmV2ZWxcIiksdjxpJiYoUz1cIm1pdGVyXCIpKSxwJiZ0aGlzLnVwZGF0ZURpc3RhbmNlKHAsaCksXCJtaXRlclwiPT09UyltLl9tdWx0KHYpLHRoaXMuYWRkQ3VycmVudFZlcnRleChoLG0sMCwwLGMpO2Vsc2UgaWYoXCJmbGlwYmV2ZWxcIj09PVMpe2lmKHY+MTAwKW09eS5tdWx0KC0xKTtlbHNlIHtjb25zdCB0PXYqZi5hZGQoeSkubWFnKCkvZi5zdWIoeSkubWFnKCk7bS5fcGVycCgpLl9tdWx0KHQqKF8/LTE6MSkpO310aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCxtLDAsMCxjKSx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCxtLm11bHQoLTEpLDAsMCxjKTt9ZWxzZSBpZihcImJldmVsXCI9PT1TfHxcImZha2Vyb3VuZFwiPT09Uyl7Y29uc3QgdD0tTWF0aC5zcXJ0KHYqdi0xKSxlPV8/dDowLHI9Xz8wOnQ7aWYocCYmdGhpcy5hZGRDdXJyZW50VmVydGV4KGgsZixlLHIsYyksXCJmYWtlcm91bmRcIj09PVMpe2NvbnN0IHQ9TWF0aC5yb3VuZCgxODAqYi9NYXRoLlBJLzIwKTtmb3IobGV0IGU9MTtlPHQ7ZSsrKXtsZXQgcj1lL3Q7aWYoLjUhPT1yKXtjb25zdCB0PXItLjU7cis9cip0KihyLTEpKigoMS4wOTA0K2cqKGcqKDMuNTU2NDUtMS40MzUxOSpnKS0zLjI0NTIpKSp0KnQrKC44NDgwMTMrZyooLjIxNTYzOCpnLTEuMDYwMjEpKSk7fWNvbnN0IG49eS5zdWIoZikuX211bHQocikuX2FkZChmKS5fdW5pdCgpLl9tdWx0KF8/LTE6MSk7dGhpcy5hZGRIYWxmVmVydGV4KGgsbi54LG4ueSwhMSxfLDAsYyk7fX1kJiZ0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCx5LC1lLC1yLGMpO31lbHNlIGlmKFwiYnV0dFwiPT09Uyl0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCxtLDAsMCxjKTtlbHNlIGlmKFwic3F1YXJlXCI9PT1TKXtjb25zdCB0PXA/MTotMTtwfHx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCxtLHQsdCxjKSx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCxtLDAsMCxjKSxwJiZ0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCxtLHQsdCxjKTt9ZWxzZSBcInJvdW5kXCI9PT1TJiYocCYmKHRoaXMuYWRkQ3VycmVudFZlcnRleChoLGYsMCwwLGMpLHRoaXMuYWRkQ3VycmVudFZlcnRleChoLGYsMSwxLGMsITApKSxkJiYodGhpcy5hZGRDdXJyZW50VmVydGV4KGgseSwtMSwtMSxjLCEwKSx0aGlzLmFkZEN1cnJlbnRWZXJ0ZXgoaCx5LDAsMCxjKSkpO2lmKHcmJmU8by0xKXtjb25zdCB0PWguZGlzdChkKTtpZih0PjIqdSl7Y29uc3QgZT1oLmFkZChkLnN1YihoKS5fbXVsdCh1L3QpLl9yb3VuZCgpKTt0aGlzLnVwZGF0ZURpc3RhbmNlKGgsZSksdGhpcy5hZGRDdXJyZW50VmVydGV4KGUseSwwLDAsYyksaD1lO319fX1hZGRDdXJyZW50VmVydGV4KHQsZSxyLG4saSxzPSExKXtjb25zdCBhPWUueSpuLWUueCxvPS1lLnktZS54Km47dGhpcy5hZGRIYWxmVmVydGV4KHQsZS54K2UueSpyLGUueS1lLngqcixzLCExLHIsaSksdGhpcy5hZGRIYWxmVmVydGV4KHQsYSxvLHMsITAsLW4saSk7fWFkZEhhbGZWZXJ0ZXgoe3g6dCx5OmV9LHIsbixpLHMsYSxvKXt0aGlzLmxheW91dFZlcnRleEFycmF5LmVtcGxhY2VCYWNrKCh0PDwxKSsoaT8xOjApLChlPDwxKSsocz8xOjApLE1hdGgucm91bmQoNjMqcikrMTI4LE1hdGgucm91bmQoNjMqbikrMTI4LDErKDA9PT1hPzA6YTwwPy0xOjEpLDAsdGhpcy5saW5lU29GYXIpLHRoaXMubGluZUNsaXBzJiZ0aGlzLmxheW91dFZlcnRleEFycmF5Mi5lbXBsYWNlQmFjayh0aGlzLnNjYWxlZERpc3RhbmNlLHRoaXMubGluZUNsaXBzQXJyYXkubGVuZ3RoLHRoaXMubGluZUNsaXBzLnN0YXJ0LHRoaXMubGluZUNsaXBzLmVuZCk7Y29uc3QgbD1vLnZlcnRleExlbmd0aCsrO3RoaXMuZTE+PTAmJnRoaXMuZTI+PTAmJih0aGlzLmluZGV4QXJyYXkuZW1wbGFjZUJhY2sodGhpcy5lMSx0aGlzLmUyLGwpLG8ucHJpbWl0aXZlTGVuZ3RoKyspLHM/dGhpcy5lMj1sOnRoaXMuZTE9bDt9dXBkYXRlU2NhbGVkRGlzdGFuY2UoKXtpZih0aGlzLmxpbmVDbGlwcyl7Y29uc3QgdD10aGlzLnRvdGFsRGlzdGFuY2UvKHRoaXMubGluZUNsaXBzLmVuZC10aGlzLmxpbmVDbGlwcy5zdGFydCk7dGhpcy5zY2FsZWREaXN0YW5jZT10aGlzLmRpc3RhbmNlL3RoaXMudG90YWxEaXN0YW5jZSx0aGlzLmxpbmVTb0Zhcj10KnRoaXMubGluZUNsaXBzLnN0YXJ0K3RoaXMuZGlzdGFuY2U7fWVsc2UgdGhpcy5saW5lU29GYXI9dGhpcy5kaXN0YW5jZTt9dXBkYXRlRGlzdGFuY2UodCxlKXt0aGlzLmRpc3RhbmNlKz10LmRpc3QoZSksdGhpcy51cGRhdGVTY2FsZWREaXN0YW5jZSgpO319SmkoSWgsXCJMaW5lQnVja2V0XCIse29taXQ6W1wibGF5ZXJzXCIsXCJwYXR0ZXJuRmVhdHVyZXNcIl19KTtjb25zdCBNaD1uZXcgUHMoe1wibGluZS1jYXBcIjpuZXcgRXModGUubGF5b3V0X2xpbmVbXCJsaW5lLWNhcFwiXSksXCJsaW5lLWpvaW5cIjpuZXcgRXModGUubGF5b3V0X2xpbmVbXCJsaW5lLWpvaW5cIl0pLFwibGluZS1taXRlci1saW1pdFwiOm5ldyBCcyh0ZS5sYXlvdXRfbGluZVtcImxpbmUtbWl0ZXItbGltaXRcIl0pLFwibGluZS1yb3VuZC1saW1pdFwiOm5ldyBCcyh0ZS5sYXlvdXRfbGluZVtcImxpbmUtcm91bmQtbGltaXRcIl0pLFwibGluZS1zb3J0LWtleVwiOm5ldyBFcyh0ZS5sYXlvdXRfbGluZVtcImxpbmUtc29ydC1rZXlcIl0pfSk7dmFyIFRoPXtwYWludDpuZXcgUHMoe1wibGluZS1vcGFjaXR5XCI6bmV3IEVzKHRlLnBhaW50X2xpbmVbXCJsaW5lLW9wYWNpdHlcIl0pLFwibGluZS1jb2xvclwiOm5ldyBFcyh0ZS5wYWludF9saW5lW1wibGluZS1jb2xvclwiXSksXCJsaW5lLXRyYW5zbGF0ZVwiOm5ldyBCcyh0ZS5wYWludF9saW5lW1wibGluZS10cmFuc2xhdGVcIl0pLFwibGluZS10cmFuc2xhdGUtYW5jaG9yXCI6bmV3IEJzKHRlLnBhaW50X2xpbmVbXCJsaW5lLXRyYW5zbGF0ZS1hbmNob3JcIl0pLFwibGluZS13aWR0aFwiOm5ldyBFcyh0ZS5wYWludF9saW5lW1wibGluZS13aWR0aFwiXSksXCJsaW5lLWdhcC13aWR0aFwiOm5ldyBFcyh0ZS5wYWludF9saW5lW1wibGluZS1nYXAtd2lkdGhcIl0pLFwibGluZS1vZmZzZXRcIjpuZXcgRXModGUucGFpbnRfbGluZVtcImxpbmUtb2Zmc2V0XCJdKSxcImxpbmUtYmx1clwiOm5ldyBFcyh0ZS5wYWludF9saW5lW1wibGluZS1ibHVyXCJdKSxcImxpbmUtZGFzaGFycmF5XCI6bmV3IEVzKHRlLnBhaW50X2xpbmVbXCJsaW5lLWRhc2hhcnJheVwiXSksXCJsaW5lLXBhdHRlcm5cIjpuZXcgRXModGUucGFpbnRfbGluZVtcImxpbmUtcGF0dGVyblwiXSksXCJsaW5lLWdyYWRpZW50XCI6bmV3IENzKHRlLnBhaW50X2xpbmVbXCJsaW5lLWdyYWRpZW50XCJdKSxcImxpbmUtdHJpbS1vZmZzZXRcIjpuZXcgQnModGUucGFpbnRfbGluZVtcImxpbmUtdHJpbS1vZmZzZXRcIl0pfSksbGF5b3V0Ok1ofTtjb25zdCB6aD1uZXcgY2xhc3MgZXh0ZW5kcyBFc3twb3NzaWJseUV2YWx1YXRlKHQsZSl7cmV0dXJuIGU9bmV3IHdzKE1hdGguZmxvb3IoZS56b29tKSx7bm93OmUubm93LGZhZGVEdXJhdGlvbjplLmZhZGVEdXJhdGlvbix0cmFuc2l0aW9uOmUudHJhbnNpdGlvbn0pLHN1cGVyLnBvc3NpYmx5RXZhbHVhdGUodCxlKX1ldmFsdWF0ZSh0LGUscixuKXtyZXR1cm4gZT1DKHt9LGUse3pvb206TWF0aC5mbG9vcihlLnpvb20pfSksc3VwZXIuZXZhbHVhdGUodCxlLHIsbil9fShUaC5wYWludC5wcm9wZXJ0aWVzW1wibGluZS13aWR0aFwiXS5zcGVjaWZpY2F0aW9uKTtmdW5jdGlvbiBCaCh0LGUpe3JldHVybiBlPjA/ZSsyKnQ6dH16aC51c2VJbnRlZ2VyWm9vbT0hMDtjb25zdCBFaD1Scyhbe25hbWU6XCJhX3Bvc19vZmZzZXRcIixjb21wb25lbnRzOjQsdHlwZTpcIkludDE2XCJ9LHtuYW1lOlwiYV90ZXhfc2l6ZVwiLGNvbXBvbmVudHM6NCx0eXBlOlwiVWludDE2XCJ9LHtuYW1lOlwiYV9waXhlbG9mZnNldFwiLGNvbXBvbmVudHM6NCx0eXBlOlwiSW50MTZcIn1dLDQpLENoPVJzKFt7bmFtZTpcImFfZ2xvYmVfYW5jaG9yXCIsY29tcG9uZW50czozLHR5cGU6XCJJbnQxNlwifSx7bmFtZTpcImFfZ2xvYmVfbm9ybWFsXCIsY29tcG9uZW50czozLHR5cGU6XCJGbG9hdDMyXCJ9XSw0KSxQaD1Scyhbe25hbWU6XCJhX3Byb2plY3RlZF9wb3NcIixjb21wb25lbnRzOjQsdHlwZTpcIkZsb2F0MzJcIn1dLDQpO1JzKFt7bmFtZTpcImFfZmFkZV9vcGFjaXR5XCIsY29tcG9uZW50czoxLHR5cGU6XCJVaW50MzJcIn1dLDQpO2NvbnN0IERoPVJzKFt7bmFtZTpcImFfcGxhY2VkXCIsY29tcG9uZW50czoyLHR5cGU6XCJVaW50OFwifSx7bmFtZTpcImFfc2hpZnRcIixjb21wb25lbnRzOjIsdHlwZTpcIkZsb2F0MzJcIn1dKSxWaD1Scyhbe25hbWU6XCJhX3NpemVfc2NhbGVcIixjb21wb25lbnRzOjEsdHlwZTpcIkZsb2F0MzJcIn0se25hbWU6XCJhX3BhZGRpbmdcIixjb21wb25lbnRzOjIsdHlwZTpcIkZsb2F0MzJcIn1dKTtScyhbe3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJwcm9qZWN0ZWRBbmNob3JYXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwicHJvamVjdGVkQW5jaG9yWVwifSx7dHlwZTpcIkludDE2XCIsbmFtZTpcInByb2plY3RlZEFuY2hvclpcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJ0aWxlQW5jaG9yWFwifSx7dHlwZTpcIkludDE2XCIsbmFtZTpcInRpbGVBbmNob3JZXCJ9LHt0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJ4MVwifSx7dHlwZTpcIkZsb2F0MzJcIixuYW1lOlwieTFcIn0se3R5cGU6XCJGbG9hdDMyXCIsbmFtZTpcIngyXCJ9LHt0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJ5MlwifSx7dHlwZTpcIkludDE2XCIsbmFtZTpcInBhZGRpbmdcIn0se3R5cGU6XCJVaW50MzJcIixuYW1lOlwiZmVhdHVyZUluZGV4XCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcInNvdXJjZUxheWVySW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwiYnVja2V0SW5kZXhcIn1dKTtjb25zdCBMaD1Scyhbe25hbWU6XCJhX3Bvc1wiLGNvbXBvbmVudHM6Myx0eXBlOlwiSW50MTZcIn0se25hbWU6XCJhX2FuY2hvcl9wb3NcIixjb21wb25lbnRzOjIsdHlwZTpcIkludDE2XCJ9LHtuYW1lOlwiYV9leHRydWRlXCIsY29tcG9uZW50czoyLHR5cGU6XCJJbnQxNlwifV0sNCksRmg9UnMoW3tuYW1lOlwiYV9wb3NfMmZcIixjb21wb25lbnRzOjIsdHlwZTpcIkZsb2F0MzJcIn0se25hbWU6XCJhX3JhZGl1c1wiLGNvbXBvbmVudHM6MSx0eXBlOlwiRmxvYXQzMlwifSx7bmFtZTpcImFfZmxhZ3NcIixjb21wb25lbnRzOjIsdHlwZTpcIkludDE2XCJ9XSw0KTtScyhbe25hbWU6XCJ0cmlhbmdsZVwiLGNvbXBvbmVudHM6Myx0eXBlOlwiVWludDE2XCJ9XSksUnMoW3t0eXBlOlwiSW50MTZcIixuYW1lOlwicHJvamVjdGVkQW5jaG9yWFwifSx7dHlwZTpcIkludDE2XCIsbmFtZTpcInByb2plY3RlZEFuY2hvcllcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJwcm9qZWN0ZWRBbmNob3JaXCJ9LHt0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJ0aWxlQW5jaG9yWFwifSx7dHlwZTpcIkZsb2F0MzJcIixuYW1lOlwidGlsZUFuY2hvcllcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwiZ2x5cGhTdGFydEluZGV4XCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcIm51bUdseXBoc1wifSx7dHlwZTpcIlVpbnQzMlwiLG5hbWU6XCJ2ZXJ0ZXhTdGFydEluZGV4XCJ9LHt0eXBlOlwiVWludDMyXCIsbmFtZTpcImxpbmVTdGFydEluZGV4XCJ9LHt0eXBlOlwiVWludDMyXCIsbmFtZTpcImxpbmVMZW5ndGhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwic2VnbWVudFwifSx7dHlwZTpcIlVpbnQxNlwiLG5hbWU6XCJsb3dlclNpemVcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwidXBwZXJTaXplXCJ9LHt0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJsaW5lT2Zmc2V0WFwifSx7dHlwZTpcIkZsb2F0MzJcIixuYW1lOlwibGluZU9mZnNldFlcIn0se3R5cGU6XCJVaW50OFwiLG5hbWU6XCJ3cml0aW5nTW9kZVwifSx7dHlwZTpcIlVpbnQ4XCIsbmFtZTpcInBsYWNlZE9yaWVudGF0aW9uXCJ9LHt0eXBlOlwiVWludDhcIixuYW1lOlwiaGlkZGVuXCJ9LHt0eXBlOlwiVWludDMyXCIsbmFtZTpcImNyb3NzVGlsZUlEXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwiYXNzb2NpYXRlZEljb25JbmRleFwifSx7dHlwZTpcIlVpbnQ4XCIsbmFtZTpcImZsaXBTdGF0ZVwifV0pLFJzKFt7dHlwZTpcIkludDE2XCIsbmFtZTpcInByb2plY3RlZEFuY2hvclhcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJwcm9qZWN0ZWRBbmNob3JZXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwicHJvamVjdGVkQW5jaG9yWlwifSx7dHlwZTpcIkZsb2F0MzJcIixuYW1lOlwidGlsZUFuY2hvclhcIn0se3R5cGU6XCJGbG9hdDMyXCIsbmFtZTpcInRpbGVBbmNob3JZXCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwicmlnaHRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXhcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJjZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXhcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJsZWZ0SnVzdGlmaWVkVGV4dFN5bWJvbEluZGV4XCJ9LHt0eXBlOlwiSW50MTZcIixuYW1lOlwidmVydGljYWxQbGFjZWRUZXh0U3ltYm9sSW5kZXhcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJwbGFjZWRJY29uU3ltYm9sSW5kZXhcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJ2ZXJ0aWNhbFBsYWNlZEljb25TeW1ib2xJbmRleFwifSx7dHlwZTpcIlVpbnQxNlwiLG5hbWU6XCJrZXlcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwidGV4dEJveFN0YXJ0SW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwidGV4dEJveEVuZEluZGV4XCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcInZlcnRpY2FsVGV4dEJveFN0YXJ0SW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwidmVydGljYWxUZXh0Qm94RW5kSW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwiaWNvbkJveFN0YXJ0SW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwiaWNvbkJveEVuZEluZGV4XCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcInZlcnRpY2FsSWNvbkJveFN0YXJ0SW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwidmVydGljYWxJY29uQm94RW5kSW5kZXhcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwiZmVhdHVyZUluZGV4XCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcIm51bUhvcml6b250YWxHbHlwaFZlcnRpY2VzXCJ9LHt0eXBlOlwiVWludDE2XCIsbmFtZTpcIm51bVZlcnRpY2FsR2x5cGhWZXJ0aWNlc1wifSx7dHlwZTpcIlVpbnQxNlwiLG5hbWU6XCJudW1JY29uVmVydGljZXNcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwibnVtVmVydGljYWxJY29uVmVydGljZXNcIn0se3R5cGU6XCJVaW50MTZcIixuYW1lOlwidXNlUnVudGltZUNvbGxpc2lvbkNpcmNsZXNcIn0se3R5cGU6XCJVaW50MzJcIixuYW1lOlwiY3Jvc3NUaWxlSURcIn0se3R5cGU6XCJGbG9hdDMyXCIsY29tcG9uZW50czoyLG5hbWU6XCJ0ZXh0T2Zmc2V0XCJ9LHt0eXBlOlwiRmxvYXQzMlwiLG5hbWU6XCJjb2xsaXNpb25DaXJjbGVEaWFtZXRlclwifV0pLFJzKFt7dHlwZTpcIkZsb2F0MzJcIixuYW1lOlwib2Zmc2V0WFwifV0pLFJzKFt7dHlwZTpcIkludDE2XCIsbmFtZTpcInhcIn0se3R5cGU6XCJJbnQxNlwiLG5hbWU6XCJ5XCJ9XSk7dmFyIFJoPTI0O2NvbnN0IFVoPTEyODtmdW5jdGlvbiAkaCh0LGUpe2NvbnN0e2V4cHJlc3Npb246cn09ZTtpZihcImNvbnN0YW50XCI9PT1yLmtpbmQpcmV0dXJuIHtraW5kOlwiY29uc3RhbnRcIixsYXlvdXRTaXplOnIuZXZhbHVhdGUobmV3IHdzKHQrMSkpfTtpZihcInNvdXJjZVwiPT09ci5raW5kKXJldHVybiB7a2luZDpcInNvdXJjZVwifTt7Y29uc3R7em9vbVN0b3BzOmUsaW50ZXJwb2xhdGlvblR5cGU6bn09cjtsZXQgaT0wO2Zvcig7aTxlLmxlbmd0aCYmZVtpXTw9dDspaSsrO2k9TWF0aC5tYXgoMCxpLTEpO2xldCBzPWk7Zm9yKDtzPGUubGVuZ3RoJiZlW3NdPHQrMTspcysrO3M9TWF0aC5taW4oZS5sZW5ndGgtMSxzKTtjb25zdCBhPWVbaV0sbz1lW3NdO3JldHVybiBcImNvbXBvc2l0ZVwiPT09ci5raW5kP3traW5kOlwiY29tcG9zaXRlXCIsbWluWm9vbTphLG1heFpvb206byxpbnRlcnBvbGF0aW9uVHlwZTpufTp7a2luZDpcImNhbWVyYVwiLG1pblpvb206YSxtYXhab29tOm8sbWluU2l6ZTpyLmV2YWx1YXRlKG5ldyB3cyhhKSksbWF4U2l6ZTpyLmV2YWx1YXRlKG5ldyB3cyhvKSksaW50ZXJwb2xhdGlvblR5cGU6bn19fWZ1bmN0aW9uIGpoKHQse3VTaXplOmUsdVNpemVUOnJ9LHtsb3dlclNpemU6bix1cHBlclNpemU6aX0pe3JldHVybiBcInNvdXJjZVwiPT09dC5raW5kP24vVWg6XCJjb21wb3NpdGVcIj09PXQua2luZD9FcihuL1VoLGkvVWgscik6ZX1mdW5jdGlvbiBPaCh0LGUpe2xldCByPTAsbj0wO2lmKFwiY29uc3RhbnRcIj09PXQua2luZCluPXQubGF5b3V0U2l6ZTtlbHNlIGlmKFwic291cmNlXCIhPT10LmtpbmQpe2NvbnN0e2ludGVycG9sYXRpb25UeXBlOmksbWluWm9vbTpzLG1heFpvb206YX09dCxvPWk/TShRci5pbnRlcnBvbGF0aW9uRmFjdG9yKGksZSxzLGEpLDAsMSk6MDtcImNhbWVyYVwiPT09dC5raW5kP249RXIodC5taW5TaXplLHQubWF4U2l6ZSxvKTpyPW87fXJldHVybiB7dVNpemVUOnIsdVNpemU6bn19dmFyIHFoPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLFNJWkVfUEFDS19GQUNUT1I6VWgsZXZhbHVhdGVTaXplRm9yRmVhdHVyZTpqaCxldmFsdWF0ZVNpemVGb3Jab29tOk9oLGdldFNpemVEYXRhOiRofSk7ZnVuY3Rpb24gTmgodCxlLHIpe3JldHVybiB0LnNlY3Rpb25zLmZvckVhY2goKHQ9Pnt0LnRleHQ9ZnVuY3Rpb24odCxlLHIpe2NvbnN0IG49ZS5sYXlvdXQuZ2V0KFwidGV4dC10cmFuc2Zvcm1cIikuZXZhbHVhdGUocix7fSk7cmV0dXJuIFwidXBwZXJjYXNlXCI9PT1uP3Q9dC50b0xvY2FsZVVwcGVyQ2FzZSgpOlwibG93ZXJjYXNlXCI9PT1uJiYodD10LnRvTG9jYWxlTG93ZXJDYXNlKCkpLGJzLmFwcGx5QXJhYmljU2hhcGluZyYmKHQ9YnMuYXBwbHlBcmFiaWNTaGFwaW5nKHQpKSx0fSh0LnRleHQsZSxyKTt9KSksdH1jb25zdCBHaD17XCIhXCI6XCLvuJVcIixcIiNcIjpcIu+8g1wiLCQ6XCLvvIRcIixcIiVcIjpcIu+8hVwiLFwiJlwiOlwi77yGXCIsXCIoXCI6XCLvuLVcIixcIilcIjpcIu+4tlwiLFwiKlwiOlwi77yKXCIsXCIrXCI6XCLvvItcIixcIixcIjpcIu+4kFwiLFwiLVwiOlwi77iyXCIsXCIuXCI6XCLjg7tcIixcIi9cIjpcIu+8j1wiLFwiOlwiOlwi77iTXCIsXCI7XCI6XCLvuJRcIixcIjxcIjpcIu+4v1wiLFwiPVwiOlwi77ydXCIsXCI+XCI6XCLvuYBcIixcIj9cIjpcIu+4llwiLFwiQFwiOlwi77ygXCIsXCJbXCI6XCLvuYdcIixcIlxcXFxcIjpcIu+8vFwiLFwiXVwiOlwi77mIXCIsXCJeXCI6XCLvvL5cIixfOlwi77izXCIsXCJgXCI6XCLvvYBcIixcIntcIjpcIu+4t1wiLFwifFwiOlwi4oCVXCIsXCJ9XCI6XCLvuLhcIixcIn5cIjpcIu+9nlwiLFwiwqJcIjpcIu+/oFwiLFwiwqNcIjpcIu+/oVwiLFwiwqVcIjpcIu+/pVwiLFwiwqZcIjpcIu+/pFwiLFwiwqxcIjpcIu+/olwiLFwiwq9cIjpcIu+/o1wiLFwi4oCTXCI6XCLvuLJcIixcIuKAlFwiOlwi77ixXCIsXCLigJhcIjpcIu+5g1wiLFwi4oCZXCI6XCLvuYRcIixcIuKAnFwiOlwi77mBXCIsXCLigJ1cIjpcIu+5glwiLFwi4oCmXCI6XCLvuJlcIixcIuKAp1wiOlwi44O7XCIsXCLigqlcIjpcIu+/plwiLFwi44CBXCI6XCLvuJFcIixcIuOAglwiOlwi77iSXCIsXCLjgIhcIjpcIu+4v1wiLFwi44CJXCI6XCLvuYBcIixcIuOAilwiOlwi77i9XCIsXCLjgItcIjpcIu+4vlwiLFwi44CMXCI6XCLvuYFcIixcIuOAjVwiOlwi77mCXCIsXCLjgI5cIjpcIu+5g1wiLFwi44CPXCI6XCLvuYRcIixcIuOAkFwiOlwi77i7XCIsXCLjgJFcIjpcIu+4vFwiLFwi44CUXCI6XCLvuLlcIixcIuOAlVwiOlwi77i6XCIsXCLjgJZcIjpcIu+4l1wiLFwi44CXXCI6XCLvuJhcIixcIu+8gVwiOlwi77iVXCIsXCLvvIhcIjpcIu+4tVwiLFwi77yJXCI6XCLvuLZcIixcIu+8jFwiOlwi77iQXCIsXCLvvI1cIjpcIu+4slwiLFwi77yOXCI6XCLjg7tcIixcIu+8mlwiOlwi77iTXCIsXCLvvJtcIjpcIu+4lFwiLFwi77ycXCI6XCLvuL9cIixcIu+8nlwiOlwi77mAXCIsXCLvvJ9cIjpcIu+4llwiLFwi77y7XCI6XCLvuYdcIixcIu+8vVwiOlwi77mIXCIsXCLvvL9cIjpcIu+4s1wiLFwi772bXCI6XCLvuLdcIixcIu+9nFwiOlwi4oCVXCIsXCLvvZ1cIjpcIu+4uFwiLFwi772fXCI6XCLvuLVcIixcIu+9oFwiOlwi77i2XCIsXCLvvaFcIjpcIu+4klwiLFwi772iXCI6XCLvuYFcIixcIu+9o1wiOlwi77mCXCIsXCLihpBcIjpcIuKGkVwiLFwi4oaSXCI6XCLihpNcIn07ZnVuY3Rpb24gWmgodCl7cmV0dXJuIFwi77i2XCI9PT10fHxcIu+5iFwiPT09dHx8XCLvuLhcIj09PXR8fFwi77mEXCI9PT10fHxcIu+5glwiPT09dHx8XCLvuL5cIj09PXR8fFwi77i8XCI9PT10fHxcIu+4ulwiPT09dHx8XCLvuJhcIj09PXR8fFwi77mAXCI9PT10fHxcIu+4kFwiPT09dHx8XCLvuJNcIj09PXR8fFwi77iUXCI9PT10fHxcIu+9gFwiPT09dHx8XCLvv6NcIj09PXR8fFwi77iRXCI9PT10fHxcIu+4klwiPT09dH1mdW5jdGlvbiBLaCh0KXtyZXR1cm4gXCLvuLVcIj09PXR8fFwi77mHXCI9PT10fHxcIu+4t1wiPT09dHx8XCLvuYNcIj09PXR8fFwi77mBXCI9PT10fHxcIu+4vVwiPT09dHx8XCLvuLtcIj09PXR8fFwi77i5XCI9PT10fHxcIu+4l1wiPT09dHx8XCLvuL9cIj09PXR9dmFyIFhoPVloLEpoPWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIHMsYSxvPTgqaS1uLTEsbD0oMTw8byktMSx1PWw+PjEsYz0tNyxoPXI/aS0xOjAscD1yPy0xOjEsZD10W2UraF07Zm9yKGgrPXAscz1kJigxPDwtYyktMSxkPj49LWMsYys9bztjPjA7cz0yNTYqcyt0W2UraF0saCs9cCxjLT04KTtmb3IoYT1zJigxPDwtYyktMSxzPj49LWMsYys9bjtjPjA7YT0yNTYqYSt0W2UraF0saCs9cCxjLT04KTtpZigwPT09cylzPTEtdTtlbHNlIHtpZihzPT09bClyZXR1cm4gYT9OYU46MS8wKihkPy0xOjEpO2ErPU1hdGgucG93KDIsbikscy09dTt9cmV0dXJuIChkPy0xOjEpKmEqTWF0aC5wb3coMixzLW4pfSxIaD1mdW5jdGlvbih0LGUscixuLGkscyl7dmFyIGEsbyxsLHU9OCpzLWktMSxjPSgxPDx1KS0xLGg9Yz4+MSxwPTIzPT09aT9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjAsZD1uPzA6cy0xLGY9bj8xOi0xLHk9ZTwwfHwwPT09ZSYmMS9lPDA/MTowO2ZvcihlPU1hdGguYWJzKGUpLGlzTmFOKGUpfHxlPT09MS8wPyhvPWlzTmFOKGUpPzE6MCxhPWMpOihhPU1hdGguZmxvb3IoTWF0aC5sb2coZSkvTWF0aC5MTjIpLGUqKGw9TWF0aC5wb3coMiwtYSkpPDEmJihhLS0sbCo9MiksKGUrPWEraD49MT9wL2w6cCpNYXRoLnBvdygyLDEtaCkpKmw+PTImJihhKyssbC89MiksYStoPj1jPyhvPTAsYT1jKTphK2g+PTE/KG89KGUqbC0xKSpNYXRoLnBvdygyLGkpLGErPWgpOihvPWUqTWF0aC5wb3coMixoLTEpKk1hdGgucG93KDIsaSksYT0wKSk7aT49ODt0W3IrZF09MjU1Jm8sZCs9ZixvLz0yNTYsaS09OCk7Zm9yKGE9YTw8aXxvLHUrPWk7dT4wO3RbcitkXT0yNTUmYSxkKz1mLGEvPTI1Nix1LT04KTt0W3IrZC1mXXw9MTI4Knk7fTtcbi8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovZnVuY3Rpb24gWWgodCl7dGhpcy5idWY9QXJyYXlCdWZmZXIuaXNWaWV3JiZBcnJheUJ1ZmZlci5pc1ZpZXcodCk/dDpuZXcgVWludDhBcnJheSh0fHwwKSx0aGlzLnBvcz0wLHRoaXMudHlwZT0wLHRoaXMubGVuZ3RoPXRoaXMuYnVmLmxlbmd0aDt9WWguVmFyaW50PTAsWWguRml4ZWQ2ND0xLFloLkJ5dGVzPTIsWWguRml4ZWQzMj01O3ZhciBXaD00Mjk0OTY3Mjk2LFFoPTEvV2gsdHA9XCJ1bmRlZmluZWRcIj09dHlwZW9mIFRleHREZWNvZGVyP251bGw6bmV3IFRleHREZWNvZGVyKFwidXRmOFwiKTtmdW5jdGlvbiBlcCh0KXtyZXR1cm4gdC50eXBlPT09WWguQnl0ZXM/dC5yZWFkVmFyaW50KCkrdC5wb3M6dC5wb3MrMX1mdW5jdGlvbiBycCh0LGUscil7cmV0dXJuIHI/NDI5NDk2NzI5NiplKyh0Pj4+MCk6NDI5NDk2NzI5NiooZT4+PjApKyh0Pj4+MCl9ZnVuY3Rpb24gbnAodCxlLHIpe3ZhciBuPWU8PTE2MzgzPzE6ZTw9MjA5NzE1MT8yOmU8PTI2ODQzNTQ1NT8zOk1hdGguZmxvb3IoTWF0aC5sb2coZSkvKDcqTWF0aC5MTjIpKTtyLnJlYWxsb2Mobik7Zm9yKHZhciBpPXIucG9zLTE7aT49dDtpLS0pci5idWZbaStuXT1yLmJ1ZltpXTt9ZnVuY3Rpb24gaXAodCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlVmFyaW50KHRbcl0pO31mdW5jdGlvbiBzcCh0LGUpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWUud3JpdGVTVmFyaW50KHRbcl0pO31mdW5jdGlvbiBhcCh0LGUpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWUud3JpdGVGbG9hdCh0W3JdKTt9ZnVuY3Rpb24gb3AodCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlRG91YmxlKHRbcl0pO31mdW5jdGlvbiBscCh0LGUpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWUud3JpdGVCb29sZWFuKHRbcl0pO31mdW5jdGlvbiB1cCh0LGUpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWUud3JpdGVGaXhlZDMyKHRbcl0pO31mdW5jdGlvbiBjcCh0LGUpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWUud3JpdGVTRml4ZWQzMih0W3JdKTt9ZnVuY3Rpb24gaHAodCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlRml4ZWQ2NCh0W3JdKTt9ZnVuY3Rpb24gcHAodCxlKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllLndyaXRlU0ZpeGVkNjQodFtyXSk7fWZ1bmN0aW9uIGRwKHQsZSl7cmV0dXJuICh0W2VdfHRbZSsxXTw8OHx0W2UrMl08PDE2KSsxNjc3NzIxNip0W2UrM119ZnVuY3Rpb24gZnAodCxlLHIpe3Rbcl09ZSx0W3IrMV09ZT4+PjgsdFtyKzJdPWU+Pj4xNix0W3IrM109ZT4+PjI0O31mdW5jdGlvbiB5cCh0LGUpe3JldHVybiAodFtlXXx0W2UrMV08PDh8dFtlKzJdPDwxNikrKHRbZSszXTw8MjQpfVloLnByb3RvdHlwZT17ZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYnVmPW51bGw7fSxyZWFkRmllbGRzOmZ1bmN0aW9uKHQsZSxyKXtmb3Iocj1yfHx0aGlzLmxlbmd0aDt0aGlzLnBvczxyOyl7dmFyIG49dGhpcy5yZWFkVmFyaW50KCksaT1uPj4zLHM9dGhpcy5wb3M7dGhpcy50eXBlPTcmbix0KGksZSx0aGlzKSx0aGlzLnBvcz09PXMmJnRoaXMuc2tpcChuKTt9cmV0dXJuIGV9LHJlYWRNZXNzYWdlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVhZEZpZWxkcyh0LGUsdGhpcy5yZWFkVmFyaW50KCkrdGhpcy5wb3MpfSxyZWFkRml4ZWQzMjpmdW5jdGlvbigpe3ZhciB0PWRwKHRoaXMuYnVmLHRoaXMucG9zKTtyZXR1cm4gdGhpcy5wb3MrPTQsdH0scmVhZFNGaXhlZDMyOmZ1bmN0aW9uKCl7dmFyIHQ9eXAodGhpcy5idWYsdGhpcy5wb3MpO3JldHVybiB0aGlzLnBvcys9NCx0fSxyZWFkRml4ZWQ2NDpmdW5jdGlvbigpe3ZhciB0PWRwKHRoaXMuYnVmLHRoaXMucG9zKStkcCh0aGlzLmJ1Zix0aGlzLnBvcys0KSpXaDtyZXR1cm4gdGhpcy5wb3MrPTgsdH0scmVhZFNGaXhlZDY0OmZ1bmN0aW9uKCl7dmFyIHQ9ZHAodGhpcy5idWYsdGhpcy5wb3MpK3lwKHRoaXMuYnVmLHRoaXMucG9zKzQpKldoO3JldHVybiB0aGlzLnBvcys9OCx0fSxyZWFkRmxvYXQ6ZnVuY3Rpb24oKXt2YXIgdD1KaCh0aGlzLmJ1Zix0aGlzLnBvcywhMCwyMyw0KTtyZXR1cm4gdGhpcy5wb3MrPTQsdH0scmVhZERvdWJsZTpmdW5jdGlvbigpe3ZhciB0PUpoKHRoaXMuYnVmLHRoaXMucG9zLCEwLDUyLDgpO3JldHVybiB0aGlzLnBvcys9OCx0fSxyZWFkVmFyaW50OmZ1bmN0aW9uKHQpe3ZhciBlLHIsbj10aGlzLmJ1ZjtyZXR1cm4gZT0xMjcmKHI9blt0aGlzLnBvcysrXSkscjwxMjg/ZTooZXw9KDEyNyYocj1uW3RoaXMucG9zKytdKSk8PDcscjwxMjg/ZTooZXw9KDEyNyYocj1uW3RoaXMucG9zKytdKSk8PDE0LHI8MTI4P2U6KGV8PSgxMjcmKHI9blt0aGlzLnBvcysrXSkpPDwyMSxyPDEyOD9lOmZ1bmN0aW9uKHQsZSxyKXt2YXIgbixpLHM9ci5idWY7aWYobj0oMTEyJihpPXNbci5wb3MrK10pKT4+NCxpPDEyOClyZXR1cm4gcnAodCxuLGUpO2lmKG58PSgxMjcmKGk9c1tyLnBvcysrXSkpPDwzLGk8MTI4KXJldHVybiBycCh0LG4sZSk7aWYobnw9KDEyNyYoaT1zW3IucG9zKytdKSk8PDEwLGk8MTI4KXJldHVybiBycCh0LG4sZSk7aWYobnw9KDEyNyYoaT1zW3IucG9zKytdKSk8PDE3LGk8MTI4KXJldHVybiBycCh0LG4sZSk7aWYobnw9KDEyNyYoaT1zW3IucG9zKytdKSk8PDI0LGk8MTI4KXJldHVybiBycCh0LG4sZSk7aWYobnw9KDEmKGk9c1tyLnBvcysrXSkpPDwzMSxpPDEyOClyZXR1cm4gcnAodCxuLGUpO3Rocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHZhcmludCBub3QgbW9yZSB0aGFuIDEwIGJ5dGVzXCIpfShlfD0oMTUmKHI9blt0aGlzLnBvc10pKTw8MjgsdCx0aGlzKSkpKX0scmVhZFZhcmludDY0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZFZhcmludCghMCl9LHJlYWRTVmFyaW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkVmFyaW50KCk7cmV0dXJuIHQlMj09MT8odCsxKS8tMjp0LzJ9LHJlYWRCb29sZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5yZWFkVmFyaW50KCkpfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkVmFyaW50KCkrdGhpcy5wb3MsZT10aGlzLnBvcztyZXR1cm4gdGhpcy5wb3M9dCx0LWU+PTEyJiZ0cD9mdW5jdGlvbih0LGUscil7cmV0dXJuIHRwLmRlY29kZSh0LnN1YmFycmF5KGUscikpfSh0aGlzLmJ1ZixlLHQpOmZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG49XCJcIixpPWU7aTxyOyl7dmFyIHMsYSxvLGw9dFtpXSx1PW51bGwsYz1sPjIzOT80Omw+MjIzPzM6bD4xOTE/MjoxO2lmKGkrYz5yKWJyZWFrOzE9PT1jP2w8MTI4JiYodT1sKToyPT09Yz8xMjg9PSgxOTImKHM9dFtpKzFdKSkmJih1PSgzMSZsKTw8Nnw2MyZzKTw9MTI3JiYodT1udWxsKTozPT09Yz8oYT10W2krMl0sMTI4PT0oMTkyJihzPXRbaSsxXSkpJiYxMjg9PSgxOTImYSkmJigodT0oMTUmbCk8PDEyfCg2MyZzKTw8Nnw2MyZhKTw9MjA0N3x8dT49NTUyOTYmJnU8PTU3MzQzKSYmKHU9bnVsbCkpOjQ9PT1jJiYoYT10W2krMl0sbz10W2krM10sMTI4PT0oMTkyJihzPXRbaSsxXSkpJiYxMjg9PSgxOTImYSkmJjEyOD09KDE5MiZvKSYmKCh1PSgxNSZsKTw8MTh8KDYzJnMpPDwxMnwoNjMmYSk8PDZ8NjMmbyk8PTY1NTM1fHx1Pj0xMTE0MTEyKSYmKHU9bnVsbCkpLG51bGw9PT11Pyh1PTY1NTMzLGM9MSk6dT42NTUzNSYmKHUtPTY1NTM2LG4rPVN0cmluZy5mcm9tQ2hhckNvZGUodT4+PjEwJjEwMjN8NTUyOTYpLHU9NTYzMjB8MTAyMyZ1KSxuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHUpLGkrPWM7fXJldHVybiBufSh0aGlzLmJ1ZixlLHQpfSxyZWFkQnl0ZXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlYWRWYXJpbnQoKSt0aGlzLnBvcyxlPXRoaXMuYnVmLnN1YmFycmF5KHRoaXMucG9zLHQpO3JldHVybiB0aGlzLnBvcz10LGV9LHJlYWRQYWNrZWRWYXJpbnQ6ZnVuY3Rpb24odCxlKXtpZih0aGlzLnR5cGUhPT1ZaC5CeXRlcylyZXR1cm4gdC5wdXNoKHRoaXMucmVhZFZhcmludChlKSk7dmFyIHI9ZXAodGhpcyk7Zm9yKHQ9dHx8W107dGhpcy5wb3M8cjspdC5wdXNoKHRoaXMucmVhZFZhcmludChlKSk7cmV0dXJuIHR9LHJlYWRQYWNrZWRTVmFyaW50OmZ1bmN0aW9uKHQpe2lmKHRoaXMudHlwZSE9PVloLkJ5dGVzKXJldHVybiB0LnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTt2YXIgZT1lcCh0aGlzKTtmb3IodD10fHxbXTt0aGlzLnBvczxlOyl0LnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTtyZXR1cm4gdH0scmVhZFBhY2tlZEJvb2xlYW46ZnVuY3Rpb24odCl7aWYodGhpcy50eXBlIT09WWguQnl0ZXMpcmV0dXJuIHQucHVzaCh0aGlzLnJlYWRCb29sZWFuKCkpO3ZhciBlPWVwKHRoaXMpO2Zvcih0PXR8fFtdO3RoaXMucG9zPGU7KXQucHVzaCh0aGlzLnJlYWRCb29sZWFuKCkpO3JldHVybiB0fSxyZWFkUGFja2VkRmxvYXQ6ZnVuY3Rpb24odCl7aWYodGhpcy50eXBlIT09WWguQnl0ZXMpcmV0dXJuIHQucHVzaCh0aGlzLnJlYWRGbG9hdCgpKTt2YXIgZT1lcCh0aGlzKTtmb3IodD10fHxbXTt0aGlzLnBvczxlOyl0LnB1c2godGhpcy5yZWFkRmxvYXQoKSk7cmV0dXJuIHR9LHJlYWRQYWNrZWREb3VibGU6ZnVuY3Rpb24odCl7aWYodGhpcy50eXBlIT09WWguQnl0ZXMpcmV0dXJuIHQucHVzaCh0aGlzLnJlYWREb3VibGUoKSk7dmFyIGU9ZXAodGhpcyk7Zm9yKHQ9dHx8W107dGhpcy5wb3M8ZTspdC5wdXNoKHRoaXMucmVhZERvdWJsZSgpKTtyZXR1cm4gdH0scmVhZFBhY2tlZEZpeGVkMzI6ZnVuY3Rpb24odCl7aWYodGhpcy50eXBlIT09WWguQnl0ZXMpcmV0dXJuIHQucHVzaCh0aGlzLnJlYWRGaXhlZDMyKCkpO3ZhciBlPWVwKHRoaXMpO2Zvcih0PXR8fFtdO3RoaXMucG9zPGU7KXQucHVzaCh0aGlzLnJlYWRGaXhlZDMyKCkpO3JldHVybiB0fSxyZWFkUGFja2VkU0ZpeGVkMzI6ZnVuY3Rpb24odCl7aWYodGhpcy50eXBlIT09WWguQnl0ZXMpcmV0dXJuIHQucHVzaCh0aGlzLnJlYWRTRml4ZWQzMigpKTt2YXIgZT1lcCh0aGlzKTtmb3IodD10fHxbXTt0aGlzLnBvczxlOyl0LnB1c2godGhpcy5yZWFkU0ZpeGVkMzIoKSk7cmV0dXJuIHR9LHJlYWRQYWNrZWRGaXhlZDY0OmZ1bmN0aW9uKHQpe2lmKHRoaXMudHlwZSE9PVloLkJ5dGVzKXJldHVybiB0LnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTt2YXIgZT1lcCh0aGlzKTtmb3IodD10fHxbXTt0aGlzLnBvczxlOyl0LnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTtyZXR1cm4gdH0scmVhZFBhY2tlZFNGaXhlZDY0OmZ1bmN0aW9uKHQpe2lmKHRoaXMudHlwZSE9PVloLkJ5dGVzKXJldHVybiB0LnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7dmFyIGU9ZXAodGhpcyk7Zm9yKHQ9dHx8W107dGhpcy5wb3M8ZTspdC5wdXNoKHRoaXMucmVhZFNGaXhlZDY0KCkpO3JldHVybiB0fSxza2lwOmZ1bmN0aW9uKHQpe3ZhciBlPTcmdDtpZihlPT09WWguVmFyaW50KWZvcig7dGhpcy5idWZbdGhpcy5wb3MrK10+MTI3Oyk7ZWxzZSBpZihlPT09WWguQnl0ZXMpdGhpcy5wb3M9dGhpcy5yZWFkVmFyaW50KCkrdGhpcy5wb3M7ZWxzZSBpZihlPT09WWguRml4ZWQzMil0aGlzLnBvcys9NDtlbHNlIHtpZihlIT09WWguRml4ZWQ2NCl0aHJvdyBuZXcgRXJyb3IoXCJVbmltcGxlbWVudGVkIHR5cGU6IFwiK2UpO3RoaXMucG9zKz04O319LHdyaXRlVGFnOmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZVZhcmludCh0PDwzfGUpO30scmVhbGxvYzpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5sZW5ndGh8fDE2O2U8dGhpcy5wb3MrdDspZSo9MjtpZihlIT09dGhpcy5sZW5ndGgpe3ZhciByPW5ldyBVaW50OEFycmF5KGUpO3Iuc2V0KHRoaXMuYnVmKSx0aGlzLmJ1Zj1yLHRoaXMubGVuZ3RoPWU7fX0sZmluaXNoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoPXRoaXMucG9zLHRoaXMucG9zPTAsdGhpcy5idWYuc3ViYXJyYXkoMCx0aGlzLmxlbmd0aCl9LHdyaXRlRml4ZWQzMjpmdW5jdGlvbih0KXt0aGlzLnJlYWxsb2MoNCksZnAodGhpcy5idWYsdCx0aGlzLnBvcyksdGhpcy5wb3MrPTQ7fSx3cml0ZVNGaXhlZDMyOmZ1bmN0aW9uKHQpe3RoaXMucmVhbGxvYyg0KSxmcCh0aGlzLmJ1Zix0LHRoaXMucG9zKSx0aGlzLnBvcys9NDt9LHdyaXRlRml4ZWQ2NDpmdW5jdGlvbih0KXt0aGlzLnJlYWxsb2MoOCksZnAodGhpcy5idWYsLTEmdCx0aGlzLnBvcyksZnAodGhpcy5idWYsTWF0aC5mbG9vcih0KlFoKSx0aGlzLnBvcys0KSx0aGlzLnBvcys9ODt9LHdyaXRlU0ZpeGVkNjQ6ZnVuY3Rpb24odCl7dGhpcy5yZWFsbG9jKDgpLGZwKHRoaXMuYnVmLC0xJnQsdGhpcy5wb3MpLGZwKHRoaXMuYnVmLE1hdGguZmxvb3IodCpRaCksdGhpcy5wb3MrNCksdGhpcy5wb3MrPTg7fSx3cml0ZVZhcmludDpmdW5jdGlvbih0KXsodD0rdHx8MCk+MjY4NDM1NDU1fHx0PDA/ZnVuY3Rpb24odCxlKXt2YXIgcixuO2lmKHQ+PTA/KHI9dCU0Mjk0OTY3Mjk2fDAsbj10LzQyOTQ5NjcyOTZ8MCk6KG49figtdC80Mjk0OTY3Mjk2KSw0Mjk0OTY3Mjk1XihyPX4oLXQlNDI5NDk2NzI5NikpP3I9cisxfDA6KHI9MCxuPW4rMXwwKSksdD49MHgxMDAwMDAwMDAwMDAwMDAwMHx8dDwtMHgxMDAwMDAwMDAwMDAwMDAwMCl0aHJvdyBuZXcgRXJyb3IoXCJHaXZlbiB2YXJpbnQgZG9lc24ndCBmaXQgaW50byAxMCBieXRlc1wiKTtlLnJlYWxsb2MoMTApLGZ1bmN0aW9uKHQsZSxyKXtyLmJ1ZltyLnBvcysrXT0xMjcmdHwxMjgsdD4+Pj03LHIuYnVmW3IucG9zKytdPTEyNyZ0fDEyOCx0Pj4+PTcsci5idWZbci5wb3MrK109MTI3JnR8MTI4LHQ+Pj49NyxyLmJ1ZltyLnBvcysrXT0xMjcmdHwxMjgsci5idWZbci5wb3NdPTEyNyYodD4+Pj03KTt9KHIsMCxlKSxmdW5jdGlvbih0LGUpe3ZhciByPSg3JnQpPDw0O2UuYnVmW2UucG9zKytdfD1yfCgodD4+Pj0zKT8xMjg6MCksdCYmKGUuYnVmW2UucG9zKytdPTEyNyZ0fCgodD4+Pj03KT8xMjg6MCksdCYmKGUuYnVmW2UucG9zKytdPTEyNyZ0fCgodD4+Pj03KT8xMjg6MCksdCYmKGUuYnVmW2UucG9zKytdPTEyNyZ0fCgodD4+Pj03KT8xMjg6MCksdCYmKGUuYnVmW2UucG9zKytdPTEyNyZ0fCgodD4+Pj03KT8xMjg6MCksdCYmKGUuYnVmW2UucG9zKytdPTEyNyZ0KSkpKSk7fShuLGUpO30odCx0aGlzKToodGhpcy5yZWFsbG9jKDQpLHRoaXMuYnVmW3RoaXMucG9zKytdPTEyNyZ0fCh0PjEyNz8xMjg6MCksdDw9MTI3fHwodGhpcy5idWZbdGhpcy5wb3MrK109MTI3Jih0Pj4+PTcpfCh0PjEyNz8xMjg6MCksdDw9MTI3fHwodGhpcy5idWZbdGhpcy5wb3MrK109MTI3Jih0Pj4+PTcpfCh0PjEyNz8xMjg6MCksdDw9MTI3fHwodGhpcy5idWZbdGhpcy5wb3MrK109dD4+PjcmMTI3KSkpKTt9LHdyaXRlU1ZhcmludDpmdW5jdGlvbih0KXt0aGlzLndyaXRlVmFyaW50KHQ8MD8yKi10LTE6Mip0KTt9LHdyaXRlQm9vbGVhbjpmdW5jdGlvbih0KXt0aGlzLndyaXRlVmFyaW50KEJvb2xlYW4odCkpO30sd3JpdGVTdHJpbmc6ZnVuY3Rpb24odCl7dD1TdHJpbmcodCksdGhpcy5yZWFsbG9jKDQqdC5sZW5ndGgpLHRoaXMucG9zKys7dmFyIGU9dGhpcy5wb3M7dGhpcy5wb3M9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbixpLHM9MDtzPGUubGVuZ3RoO3MrKyl7aWYoKG49ZS5jaGFyQ29kZUF0KHMpKT41NTI5NSYmbjw1NzM0NCl7aWYoIWkpe24+NTYzMTl8fHMrMT09PWUubGVuZ3RoPyh0W3IrK109MjM5LHRbcisrXT0xOTEsdFtyKytdPTE4OSk6aT1uO2NvbnRpbnVlfWlmKG48NTYzMjApe3RbcisrXT0yMzksdFtyKytdPTE5MSx0W3IrK109MTg5LGk9bjtjb250aW51ZX1uPWktNTUyOTY8PDEwfG4tNTYzMjB8NjU1MzYsaT1udWxsO31lbHNlIGkmJih0W3IrK109MjM5LHRbcisrXT0xOTEsdFtyKytdPTE4OSxpPW51bGwpO248MTI4P3RbcisrXT1uOihuPDIwNDg/dFtyKytdPW4+PjZ8MTkyOihuPDY1NTM2P3RbcisrXT1uPj4xMnwyMjQ6KHRbcisrXT1uPj4xOHwyNDAsdFtyKytdPW4+PjEyJjYzfDEyOCksdFtyKytdPW4+PjYmNjN8MTI4KSx0W3IrK109NjMmbnwxMjgpO31yZXR1cm4gcn0odGhpcy5idWYsdCx0aGlzLnBvcyk7dmFyIHI9dGhpcy5wb3MtZTtyPj0xMjgmJm5wKGUscix0aGlzKSx0aGlzLnBvcz1lLTEsdGhpcy53cml0ZVZhcmludChyKSx0aGlzLnBvcys9cjt9LHdyaXRlRmxvYXQ6ZnVuY3Rpb24odCl7dGhpcy5yZWFsbG9jKDQpLEhoKHRoaXMuYnVmLHQsdGhpcy5wb3MsITAsMjMsNCksdGhpcy5wb3MrPTQ7fSx3cml0ZURvdWJsZTpmdW5jdGlvbih0KXt0aGlzLnJlYWxsb2MoOCksSGgodGhpcy5idWYsdCx0aGlzLnBvcywhMCw1Miw4KSx0aGlzLnBvcys9ODt9LHdyaXRlQnl0ZXM6ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGg7dGhpcy53cml0ZVZhcmludChlKSx0aGlzLnJlYWxsb2MoZSk7Zm9yKHZhciByPTA7cjxlO3IrKyl0aGlzLmJ1Zlt0aGlzLnBvcysrXT10W3JdO30sd3JpdGVSYXdNZXNzYWdlOmZ1bmN0aW9uKHQsZSl7dGhpcy5wb3MrKzt2YXIgcj10aGlzLnBvczt0KGUsdGhpcyk7dmFyIG49dGhpcy5wb3MtcjtuPj0xMjgmJm5wKHIsbix0aGlzKSx0aGlzLnBvcz1yLTEsdGhpcy53cml0ZVZhcmludChuKSx0aGlzLnBvcys9bjt9LHdyaXRlTWVzc2FnZTpmdW5jdGlvbih0LGUscil7dGhpcy53cml0ZVRhZyh0LFloLkJ5dGVzKSx0aGlzLndyaXRlUmF3TWVzc2FnZShlLHIpO30sd3JpdGVQYWNrZWRWYXJpbnQ6ZnVuY3Rpb24odCxlKXtlLmxlbmd0aCYmdGhpcy53cml0ZU1lc3NhZ2UodCxpcCxlKTt9LHdyaXRlUGFja2VkU1ZhcmludDpmdW5jdGlvbih0LGUpe2UubGVuZ3RoJiZ0aGlzLndyaXRlTWVzc2FnZSh0LHNwLGUpO30sd3JpdGVQYWNrZWRCb29sZWFuOmZ1bmN0aW9uKHQsZSl7ZS5sZW5ndGgmJnRoaXMud3JpdGVNZXNzYWdlKHQsbHAsZSk7fSx3cml0ZVBhY2tlZEZsb2F0OmZ1bmN0aW9uKHQsZSl7ZS5sZW5ndGgmJnRoaXMud3JpdGVNZXNzYWdlKHQsYXAsZSk7fSx3cml0ZVBhY2tlZERvdWJsZTpmdW5jdGlvbih0LGUpe2UubGVuZ3RoJiZ0aGlzLndyaXRlTWVzc2FnZSh0LG9wLGUpO30sd3JpdGVQYWNrZWRGaXhlZDMyOmZ1bmN0aW9uKHQsZSl7ZS5sZW5ndGgmJnRoaXMud3JpdGVNZXNzYWdlKHQsdXAsZSk7fSx3cml0ZVBhY2tlZFNGaXhlZDMyOmZ1bmN0aW9uKHQsZSl7ZS5sZW5ndGgmJnRoaXMud3JpdGVNZXNzYWdlKHQsY3AsZSk7fSx3cml0ZVBhY2tlZEZpeGVkNjQ6ZnVuY3Rpb24odCxlKXtlLmxlbmd0aCYmdGhpcy53cml0ZU1lc3NhZ2UodCxocCxlKTt9LHdyaXRlUGFja2VkU0ZpeGVkNjQ6ZnVuY3Rpb24odCxlKXtlLmxlbmd0aCYmdGhpcy53cml0ZU1lc3NhZ2UodCxwcCxlKTt9LHdyaXRlQnl0ZXNGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxZaC5CeXRlcyksdGhpcy53cml0ZUJ5dGVzKGUpO30sd3JpdGVGaXhlZDMyRmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsWWguRml4ZWQzMiksdGhpcy53cml0ZUZpeGVkMzIoZSk7fSx3cml0ZVNGaXhlZDMyRmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsWWguRml4ZWQzMiksdGhpcy53cml0ZVNGaXhlZDMyKGUpO30sd3JpdGVGaXhlZDY0RmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsWWguRml4ZWQ2NCksdGhpcy53cml0ZUZpeGVkNjQoZSk7fSx3cml0ZVNGaXhlZDY0RmllbGQ6ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlVGFnKHQsWWguRml4ZWQ2NCksdGhpcy53cml0ZVNGaXhlZDY0KGUpO30sd3JpdGVWYXJpbnRGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxZaC5WYXJpbnQpLHRoaXMud3JpdGVWYXJpbnQoZSk7fSx3cml0ZVNWYXJpbnRGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxZaC5WYXJpbnQpLHRoaXMud3JpdGVTVmFyaW50KGUpO30sd3JpdGVTdHJpbmdGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxZaC5CeXRlcyksdGhpcy53cml0ZVN0cmluZyhlKTt9LHdyaXRlRmxvYXRGaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVUYWcodCxZaC5GaXhlZDMyKSx0aGlzLndyaXRlRmxvYXQoZSk7fSx3cml0ZURvdWJsZUZpZWxkOmZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZVRhZyh0LFloLkZpeGVkNjQpLHRoaXMud3JpdGVEb3VibGUoZSk7fSx3cml0ZUJvb2xlYW5GaWVsZDpmdW5jdGlvbih0LGUpe3RoaXMud3JpdGVWYXJpbnRGaWVsZCh0LEJvb2xlYW4oZSkpO319O3ZhciBtcD1wKFhoKTtjb25zdCBncD0zO2Z1bmN0aW9uIHhwKHQsZSxyKXtlLmdseXBocz1bXSwxPT09dCYmci5yZWFkTWVzc2FnZSh2cCxlKTt9ZnVuY3Rpb24gdnAodCxlLHIpe2lmKDM9PT10KXtjb25zdHtpZDp0LGJpdG1hcDpuLHdpZHRoOmksaGVpZ2h0OnMsbGVmdDphLHRvcDpvLGFkdmFuY2U6bH09ci5yZWFkTWVzc2FnZShicCx7fSk7ZS5nbHlwaHMucHVzaCh7aWQ6dCxiaXRtYXA6bmV3IFJ1KHt3aWR0aDppKzIqZ3AsaGVpZ2h0OnMrMipncH0sbiksbWV0cmljczp7d2lkdGg6aSxoZWlnaHQ6cyxsZWZ0OmEsdG9wOm8sYWR2YW5jZTpsfX0pO31lbHNlIDQ9PT10P2UuYXNjZW5kZXI9ci5yZWFkU1ZhcmludCgpOjU9PT10JiYoZS5kZXNjZW5kZXI9ci5yZWFkU1ZhcmludCgpKTt9ZnVuY3Rpb24gYnAodCxlLHIpezE9PT10P2UuaWQ9ci5yZWFkVmFyaW50KCk6Mj09PXQ/ZS5iaXRtYXA9ci5yZWFkQnl0ZXMoKTozPT09dD9lLndpZHRoPXIucmVhZFZhcmludCgpOjQ9PT10P2UuaGVpZ2h0PXIucmVhZFZhcmludCgpOjU9PT10P2UubGVmdD1yLnJlYWRTVmFyaW50KCk6Nj09PXQ/ZS50b3A9ci5yZWFkU1ZhcmludCgpOjc9PT10JiYoZS5hZHZhbmNlPXIucmVhZFZhcmludCgpKTt9Y29uc3Qgd3A9Z3A7ZnVuY3Rpb24gX3AodCl7bGV0IGU9MCxyPTA7Zm9yKGNvbnN0IG4gb2YgdCllKz1uLncqbi5oLHI9TWF0aC5tYXgocixuLncpO3Quc29ydCgoKHQsZSk9PmUuaC10LmgpKTtjb25zdCBuPVt7eDowLHk6MCx3Ok1hdGgubWF4KE1hdGguY2VpbChNYXRoLnNxcnQoZS8uOTUpKSxyKSxoOjEvMH1dO2xldCBpPTAscz0wO2Zvcihjb25zdCBlIG9mIHQpZm9yKGxldCB0PW4ubGVuZ3RoLTE7dD49MDt0LS0pe2NvbnN0IHI9blt0XTtpZighKGUudz5yLnd8fGUuaD5yLmgpKXtpZihlLng9ci54LGUueT1yLnkscz1NYXRoLm1heChzLGUueStlLmgpLGk9TWF0aC5tYXgoaSxlLngrZS53KSxlLnc9PT1yLncmJmUuaD09PXIuaCl7Y29uc3QgZT1uLnBvcCgpO3Q8bi5sZW5ndGgmJihuW3RdPWUpO31lbHNlIGUuaD09PXIuaD8oci54Kz1lLncsci53LT1lLncpOmUudz09PXIudz8oci55Kz1lLmgsci5oLT1lLmgpOihuLnB1c2goe3g6ci54K2Uudyx5OnIueSx3OnIudy1lLncsaDplLmh9KSxyLnkrPWUuaCxyLmgtPWUuaCk7YnJlYWt9fXJldHVybiB7dzppLGg6cyxmaWxsOmUvKGkqcyl8fDB9fWNvbnN0IEFwPTE7Y2xhc3MgU3B7Y29uc3RydWN0b3IodCx7cGl4ZWxSYXRpbzplLHZlcnNpb246cixzdHJldGNoWDpuLHN0cmV0Y2hZOmksY29udGVudDpzfSl7dGhpcy5wYWRkZWRSZWN0PXQsdGhpcy5waXhlbFJhdGlvPWUsdGhpcy5zdHJldGNoWD1uLHRoaXMuc3RyZXRjaFk9aSx0aGlzLmNvbnRlbnQ9cyx0aGlzLnZlcnNpb249cjt9Z2V0IHRsKCl7cmV0dXJuIFt0aGlzLnBhZGRlZFJlY3QueCtBcCx0aGlzLnBhZGRlZFJlY3QueStBcF19Z2V0IGJyKCl7cmV0dXJuIFt0aGlzLnBhZGRlZFJlY3QueCt0aGlzLnBhZGRlZFJlY3Qudy1BcCx0aGlzLnBhZGRlZFJlY3QueSt0aGlzLnBhZGRlZFJlY3QuaC1BcF19Z2V0IGRpc3BsYXlTaXplKCl7cmV0dXJuIFsodGhpcy5wYWRkZWRSZWN0LnctMipBcCkvdGhpcy5waXhlbFJhdGlvLCh0aGlzLnBhZGRlZFJlY3QuaC0yKkFwKS90aGlzLnBpeGVsUmF0aW9dfX1jbGFzcyBrcHtjb25zdHJ1Y3Rvcih0LGUpe2NvbnN0IHI9e30sbj17fTt0aGlzLmhhdmVSZW5kZXJDYWxsYmFja3M9W107Y29uc3QgaT1bXTt0aGlzLmFkZEltYWdlcyh0LHIsaSksdGhpcy5hZGRJbWFnZXMoZSxuLGkpO2NvbnN0e3c6cyxoOmF9PV9wKGkpLG89bmV3IFV1KHt3aWR0aDpzfHwxLGhlaWdodDphfHwxfSk7Zm9yKGNvbnN0IGUgaW4gdCl7Y29uc3Qgbj10W2VdLGk9cltlXS5wYWRkZWRSZWN0O1V1LmNvcHkobi5kYXRhLG8se3g6MCx5OjB9LHt4OmkueCtBcCx5OmkueStBcH0sbi5kYXRhKTt9Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3Qgcj1lW3RdLGk9blt0XS5wYWRkZWRSZWN0LHM9aS54K0FwLGE9aS55K0FwLGw9ci5kYXRhLndpZHRoLHU9ci5kYXRhLmhlaWdodDtVdS5jb3B5KHIuZGF0YSxvLHt4OjAseTowfSx7eDpzLHk6YX0sci5kYXRhKSxVdS5jb3B5KHIuZGF0YSxvLHt4OjAseTp1LTF9LHt4OnMseTphLTF9LHt3aWR0aDpsLGhlaWdodDoxfSksVXUuY29weShyLmRhdGEsbyx7eDowLHk6MH0se3g6cyx5OmErdX0se3dpZHRoOmwsaGVpZ2h0OjF9KSxVdS5jb3B5KHIuZGF0YSxvLHt4OmwtMSx5OjB9LHt4OnMtMSx5OmF9LHt3aWR0aDoxLGhlaWdodDp1fSksVXUuY29weShyLmRhdGEsbyx7eDowLHk6MH0se3g6cytsLHk6YX0se3dpZHRoOjEsaGVpZ2h0OnV9KTt9dGhpcy5pbWFnZT1vLHRoaXMuaWNvblBvc2l0aW9ucz1yLHRoaXMucGF0dGVyblBvc2l0aW9ucz1uO31hZGRJbWFnZXModCxlLHIpe2Zvcihjb25zdCBuIGluIHQpe2NvbnN0IGk9dFtuXSxzPXt4OjAseTowLHc6aS5kYXRhLndpZHRoKzIqQXAsaDppLmRhdGEuaGVpZ2h0KzIqQXB9O3IucHVzaChzKSxlW25dPW5ldyBTcChzLGkpLGkuaGFzUmVuZGVyQ2FsbGJhY2smJnRoaXMuaGF2ZVJlbmRlckNhbGxiYWNrcy5wdXNoKG4pO319cGF0Y2hVcGRhdGVkSW1hZ2VzKHQsZSl7dGhpcy5oYXZlUmVuZGVyQ2FsbGJhY2tzPXRoaXMuaGF2ZVJlbmRlckNhbGxiYWNrcy5maWx0ZXIoKGU9PnQuaGFzSW1hZ2UoZSkpKSx0LmRpc3BhdGNoUmVuZGVyQ2FsbGJhY2tzKHRoaXMuaGF2ZVJlbmRlckNhbGxiYWNrcyk7Zm9yKGNvbnN0IHIgaW4gdC51cGRhdGVkSW1hZ2VzKXRoaXMucGF0Y2hVcGRhdGVkSW1hZ2UodGhpcy5pY29uUG9zaXRpb25zW3JdLHQuZ2V0SW1hZ2UociksZSksdGhpcy5wYXRjaFVwZGF0ZWRJbWFnZSh0aGlzLnBhdHRlcm5Qb3NpdGlvbnNbcl0sdC5nZXRJbWFnZShyKSxlKTt9cGF0Y2hVcGRhdGVkSW1hZ2UodCxlLHIpe2lmKCF0fHwhZSlyZXR1cm47aWYodC52ZXJzaW9uPT09ZS52ZXJzaW9uKXJldHVybjt0LnZlcnNpb249ZS52ZXJzaW9uO2NvbnN0W24saV09dC50bDtyLnVwZGF0ZShlLmRhdGEsdm9pZCAwLHt4Om4seTppfSk7fX1KaShTcCxcIkltYWdlUG9zaXRpb25cIiksSmkoa3AsXCJJbWFnZUF0bGFzXCIpO2NvbnN0IElwPXtob3Jpem9udGFsOjEsdmVydGljYWw6Mixob3Jpem9udGFsT25seTozfSxNcD0tMTc7Y2xhc3MgVHB7Y29uc3RydWN0b3IoKXt0aGlzLnNjYWxlPTEsdGhpcy5mb250U3RhY2s9XCJcIix0aGlzLmltYWdlTmFtZT1udWxsO31zdGF0aWMgZm9yVGV4dCh0LGUpe2NvbnN0IHI9bmV3IFRwO3JldHVybiByLnNjYWxlPXR8fDEsci5mb250U3RhY2s9ZSxyfXN0YXRpYyBmb3JJbWFnZSh0KXtjb25zdCBlPW5ldyBUcDtyZXR1cm4gZS5pbWFnZU5hbWU9dCxlfX1jbGFzcyB6cHtjb25zdHJ1Y3Rvcigpe3RoaXMudGV4dD1cIlwiLHRoaXMuc2VjdGlvbkluZGV4PVtdLHRoaXMuc2VjdGlvbnM9W10sdGhpcy5pbWFnZVNlY3Rpb25JRD1udWxsO31zdGF0aWMgZnJvbUZlYXR1cmUodCxlKXtjb25zdCByPW5ldyB6cDtmb3IobGV0IG49MDtuPHQuc2VjdGlvbnMubGVuZ3RoO24rKyl7Y29uc3QgaT10LnNlY3Rpb25zW25dO2kuaW1hZ2U/ci5hZGRJbWFnZVNlY3Rpb24oaSk6ci5hZGRUZXh0U2VjdGlvbihpLGUpO31yZXR1cm4gcn1sZW5ndGgoKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH1nZXRTZWN0aW9uKHQpe3JldHVybiB0aGlzLnNlY3Rpb25zW3RoaXMuc2VjdGlvbkluZGV4W3RdXX1nZXRTZWN0aW9ucygpe3JldHVybiB0aGlzLnNlY3Rpb25zfWdldFNlY3Rpb25JbmRleCh0KXtyZXR1cm4gdGhpcy5zZWN0aW9uSW5kZXhbdF19Z2V0Q2hhckNvZGUodCl7cmV0dXJuIHRoaXMudGV4dC5jaGFyQ29kZUF0KHQpfXZlcnRpY2FsaXplUHVuY3R1YXRpb24odCl7dGhpcy50ZXh0PWZ1bmN0aW9uKHQsZSl7bGV0IHI9XCJcIjtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyl7Y29uc3QgaT10LmNoYXJDb2RlQXQobisxKXx8bnVsbCxzPXQuY2hhckNvZGVBdChuLTEpfHxudWxsO3IrPSFlJiYoaSYmc3MoaSkmJiFHaFt0W24rMV1dfHxzJiZzcyhzKSYmIUdoW3Rbbi0xXV0pfHwhR2hbdFtuXV0/dFtuXTpHaFt0W25dXTt9cmV0dXJuIHJ9KHRoaXMudGV4dCx0KTt9dHJpbSgpe2xldCB0PTA7Zm9yKGxldCBlPTA7ZTx0aGlzLnRleHQubGVuZ3RoJiZFcFt0aGlzLnRleHQuY2hhckNvZGVBdChlKV07ZSsrKXQrKztsZXQgZT10aGlzLnRleHQubGVuZ3RoO2ZvcihsZXQgcj10aGlzLnRleHQubGVuZ3RoLTE7cj49MCYmcj49dCYmRXBbdGhpcy50ZXh0LmNoYXJDb2RlQXQocildO3ItLSllLS07dGhpcy50ZXh0PXRoaXMudGV4dC5zdWJzdHJpbmcodCxlKSx0aGlzLnNlY3Rpb25JbmRleD10aGlzLnNlY3Rpb25JbmRleC5zbGljZSh0LGUpO31zdWJzdHJpbmcodCxlKXtjb25zdCByPW5ldyB6cDtyZXR1cm4gci50ZXh0PXRoaXMudGV4dC5zdWJzdHJpbmcodCxlKSxyLnNlY3Rpb25JbmRleD10aGlzLnNlY3Rpb25JbmRleC5zbGljZSh0LGUpLHIuc2VjdGlvbnM9dGhpcy5zZWN0aW9ucyxyfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMudGV4dH1nZXRNYXhTY2FsZSgpe3JldHVybiB0aGlzLnNlY3Rpb25JbmRleC5yZWR1Y2UoKCh0LGUpPT5NYXRoLm1heCh0LHRoaXMuc2VjdGlvbnNbZV0uc2NhbGUpKSwwKX1hZGRUZXh0U2VjdGlvbih0LGUpe3RoaXMudGV4dCs9dC50ZXh0LHRoaXMuc2VjdGlvbnMucHVzaChUcC5mb3JUZXh0KHQuc2NhbGUsdC5mb250U3RhY2t8fGUpKTtjb25zdCByPXRoaXMuc2VjdGlvbnMubGVuZ3RoLTE7Zm9yKGxldCBlPTA7ZTx0LnRleHQubGVuZ3RoOysrZSl0aGlzLnNlY3Rpb25JbmRleC5wdXNoKHIpO31hZGRJbWFnZVNlY3Rpb24odCl7Y29uc3QgZT10LmltYWdlP3QuaW1hZ2UubmFtZTpcIlwiO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gdm9pZCBOKFwiQ2FuJ3QgYWRkIEZvcm1hdHRlZFNlY3Rpb24gd2l0aCBhbiBlbXB0eSBpbWFnZS5cIik7Y29uc3Qgcj10aGlzLmdldE5leHRJbWFnZVNlY3Rpb25DaGFyQ29kZSgpO3I/KHRoaXMudGV4dCs9U3RyaW5nLmZyb21DaGFyQ29kZShyKSx0aGlzLnNlY3Rpb25zLnB1c2goVHAuZm9ySW1hZ2UoZSkpLHRoaXMuc2VjdGlvbkluZGV4LnB1c2godGhpcy5zZWN0aW9ucy5sZW5ndGgtMSkpOk4oXCJSZWFjaGVkIG1heGltdW0gbnVtYmVyIG9mIGltYWdlcyA2NDAxXCIpO31nZXROZXh0SW1hZ2VTZWN0aW9uQ2hhckNvZGUoKXtyZXR1cm4gdGhpcy5pbWFnZVNlY3Rpb25JRD90aGlzLmltYWdlU2VjdGlvbklEPj02Mzc0Mz9udWxsOisrdGhpcy5pbWFnZVNlY3Rpb25JRDoodGhpcy5pbWFnZVNlY3Rpb25JRD01NzM0NCx0aGlzLmltYWdlU2VjdGlvbklEKX19ZnVuY3Rpb24gQnAodCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCxkLGYpe2NvbnN0IHk9enAuZnJvbUZlYXR1cmUodCxpKTtoPT09SXAudmVydGljYWwmJnkudmVydGljYWxpemVQdW5jdHVhdGlvbihwKTtsZXQgbT1bXTtjb25zdCBnPWZ1bmN0aW9uKHQsZSxyLG4saSxzKXtpZighdClyZXR1cm4gW107Y29uc3QgYT1bXSxvPWZ1bmN0aW9uKHQsZSxyLG4saSxzKXtsZXQgYT0wO2ZvcihsZXQgcj0wO3I8dC5sZW5ndGgoKTtyKyspe2NvbnN0IG89dC5nZXRTZWN0aW9uKHIpO2ErPVBwKHQuZ2V0Q2hhckNvZGUociksbyxuLGksZSxzKTt9cmV0dXJuIGEvTWF0aC5tYXgoMSxNYXRoLmNlaWwoYS9yKSl9KHQsZSxyLG4saSxzKSxsPXQudGV4dC5pbmRleE9mKFwi4oCLXCIpPj0wO2xldCB1PTA7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aCgpO3IrKyl7Y29uc3QgaD10LmdldFNlY3Rpb24ocikscD10LmdldENoYXJDb2RlKHIpO2lmKEVwW3BdfHwodSs9UHAocCxoLG4saSxlLHMpKSxyPHQubGVuZ3RoKCktMSl7Y29uc3QgZT0hKChjPXApPDExOTA0fHwhKHRzW1wiQm9wb21vZm8gRXh0ZW5kZWRcIl0oYyl8fHRzLkJvcG9tb2ZvKGMpfHx0c1tcIkNKSyBDb21wYXRpYmlsaXR5IEZvcm1zXCJdKGMpfHx0c1tcIkNKSyBDb21wYXRpYmlsaXR5IElkZW9ncmFwaHNcIl0oYyl8fHRzW1wiQ0pLIENvbXBhdGliaWxpdHlcIl0oYyl8fHRzW1wiQ0pLIFJhZGljYWxzIFN1cHBsZW1lbnRcIl0oYyl8fHRzW1wiQ0pLIFN0cm9rZXNcIl0oYyl8fHRzW1wiQ0pLIFN5bWJvbHMgYW5kIFB1bmN0dWF0aW9uXCJdKGMpfHx0c1tcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEFcIl0oYyl8fHRzW1wiQ0pLIFVuaWZpZWQgSWRlb2dyYXBoc1wiXShjKXx8dHNbXCJFbmNsb3NlZCBDSksgTGV0dGVycyBhbmQgTW9udGhzXCJdKGMpfHx0c1tcIkhhbGZ3aWR0aCBhbmQgRnVsbHdpZHRoIEZvcm1zXCJdKGMpfHx0cy5IaXJhZ2FuYShjKXx8dHNbXCJJZGVvZ3JhcGhpYyBEZXNjcmlwdGlvbiBDaGFyYWN0ZXJzXCJdKGMpfHx0c1tcIkthbmd4aSBSYWRpY2Fsc1wiXShjKXx8dHNbXCJLYXRha2FuYSBQaG9uZXRpYyBFeHRlbnNpb25zXCJdKGMpfHx0cy5LYXRha2FuYShjKXx8dHNbXCJWZXJ0aWNhbCBGb3Jtc1wiXShjKXx8dHNbXCJZaSBSYWRpY2Fsc1wiXShjKXx8dHNbXCJZaSBTeWxsYWJsZXNcIl0oYykpKTsoQ3BbcF18fGV8fGguaW1hZ2VOYW1lKSYmYS5wdXNoKExwKHIrMSx1LG8sYSxWcChwLHQuZ2V0Q2hhckNvZGUocisxKSxlJiZsKSwhMSkpO319dmFyIGM7cmV0dXJuIEZwKExwKHQubGVuZ3RoKCksdSxvLGEsMCwhMCkpfSh5LHUscyxlLG4sZCkse3Byb2Nlc3NCaWRpcmVjdGlvbmFsVGV4dDp4LHByb2Nlc3NTdHlsZWRCaWRpcmVjdGlvbmFsVGV4dDp2fT1icztpZih4JiYxPT09eS5zZWN0aW9ucy5sZW5ndGgpe2NvbnN0IHQ9eCh5LnRvU3RyaW5nKCksZyk7Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD1uZXcgenA7dC50ZXh0PWUsdC5zZWN0aW9ucz15LnNlY3Rpb25zO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGg7cisrKXQuc2VjdGlvbkluZGV4LnB1c2goMCk7bS5wdXNoKHQpO319ZWxzZSBpZih2KXtjb25zdCB0PXYoeS50ZXh0LHkuc2VjdGlvbkluZGV4LGcpO2Zvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9bmV3IHpwO3QudGV4dD1lWzBdLHQuc2VjdGlvbkluZGV4PWVbMV0sdC5zZWN0aW9ucz15LnNlY3Rpb25zLG0ucHVzaCh0KTt9fWVsc2UgbT1mdW5jdGlvbih0LGUpe2NvbnN0IHI9W10sbj10LnRleHQ7bGV0IGk9MDtmb3IoY29uc3QgbiBvZiBlKXIucHVzaCh0LnN1YnN0cmluZyhpLG4pKSxpPW47cmV0dXJuIGk8bi5sZW5ndGgmJnIucHVzaCh0LnN1YnN0cmluZyhpLG4ubGVuZ3RoKSkscn0oeSxnKTtjb25zdCBiPVtdLHc9e3Bvc2l0aW9uZWRMaW5lczpiLHRleHQ6eS50b1N0cmluZygpLHRvcDpjWzFdLGJvdHRvbTpjWzFdLGxlZnQ6Y1swXSxyaWdodDpjWzBdLHdyaXRpbmdNb2RlOmgsaWNvbnNJblRleHQ6ITEsdmVydGljYWxpemFibGU6ITEsaGFzQmFzZWxpbmU6ITF9O3JldHVybiBmdW5jdGlvbih0LGUscixuLGkscyxhLG8sbCx1LGMsaCl7bGV0IHA9MCxkPTAsZj0wO2NvbnN0IHk9XCJyaWdodFwiPT09bz8xOlwibGVmdFwiPT09bz8wOi41O2xldCBtPSExO2Zvcihjb25zdCB0IG9mIGkpe2NvbnN0IHI9dC5nZXRTZWN0aW9ucygpO2Zvcihjb25zdCB0IG9mIHIpe2lmKHQuaW1hZ2VOYW1lKWNvbnRpbnVlO2NvbnN0IHI9ZVt0LmZvbnRTdGFja107aWYociYmKG09dm9pZCAwIT09ci5hc2NlbmRlciYmdm9pZCAwIT09ci5kZXNjZW5kZXIsIW0pKWJyZWFrfWlmKCFtKWJyZWFrfWxldCBnPTA7Zm9yKGNvbnN0IGEgb2YgaSl7YS50cmltKCk7Y29uc3QgaT1hLmdldE1heFNjYWxlKCksbz0oaS0xKSpSaCx2PXtwb3NpdGlvbmVkR2x5cGhzOltdLGxpbmVPZmZzZXQ6MH07dC5wb3NpdGlvbmVkTGluZXNbZ109djtjb25zdCBiPXYucG9zaXRpb25lZEdseXBocztsZXQgdz0wO2lmKCFhLmxlbmd0aCgpKXtkKz1zLCsrZztjb250aW51ZX1sZXQgXz0wLEE9MDtmb3IobGV0IHM9MDtzPGEubGVuZ3RoKCk7cysrKXtjb25zdCBvPWEuZ2V0U2VjdGlvbihzKSxmPWEuZ2V0U2VjdGlvbkluZGV4KHMpLHk9YS5nZXRDaGFyQ29kZShzKTtsZXQgZz1vLnNjYWxlLHY9bnVsbCxTPW51bGwsaz1udWxsLEk9UmgsTT0wO2NvbnN0IFQ9IShsPT09SXAuaG9yaXpvbnRhbHx8IWMmJiFpcyh5KXx8YyYmKEVwW3ldfHwoeD15LHRzLkFyYWJpYyh4KXx8dHNbXCJBcmFiaWMgU3VwcGxlbWVudFwiXSh4KXx8dHNbXCJBcmFiaWMgRXh0ZW5kZWQtQVwiXSh4KXx8dHNbXCJBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUFcIl0oeCl8fHRzW1wiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CXCJdKHgpKSkpO2lmKG8uaW1hZ2VOYW1lKXtjb25zdCBlPW5bby5pbWFnZU5hbWVdO2lmKCFlKWNvbnRpbnVlO2s9by5pbWFnZU5hbWUsdC5pY29uc0luVGV4dD10Lmljb25zSW5UZXh0fHwhMCxTPWUucGFkZGVkUmVjdDtjb25zdCByPWUuZGlzcGxheVNpemU7Zz1nKlJoL2gsdj17d2lkdGg6clswXSxoZWlnaHQ6clsxXSxsZWZ0OkFwLHRvcDotd3AsYWR2YW5jZTpUP3JbMV06clswXSxsb2NhbEdseXBoOiExfSxNPW0/LXYuaGVpZ2h0Kmc6TXAraSpSaC1yWzFdKmcsST12LmFkdmFuY2U7Y29uc3Qgcz0oVD9yWzBdOnJbMV0pKmctUmgqaTtzPjAmJnM+dyYmKHc9cyk7fWVsc2Uge2NvbnN0IHQ9cltvLmZvbnRTdGFja107aWYoIXQpY29udGludWU7dFt5XSYmKFM9dFt5XSk7Y29uc3Qgbj1lW28uZm9udFN0YWNrXTtpZighbiljb250aW51ZTtjb25zdCBzPW4uZ2x5cGhzW3ldO2lmKCFzKWNvbnRpbnVlO2lmKHY9cy5tZXRyaWNzLEk9ODIwMyE9PXk/Umg6MCxtKXtjb25zdCB0PXZvaWQgMCE9PW4uYXNjZW5kZXI/TWF0aC5hYnMobi5hc2NlbmRlcik6MCxlPXZvaWQgMCE9PW4uZGVzY2VuZGVyP01hdGguYWJzKG4uZGVzY2VuZGVyKTowLHI9KHQrZSkqZztfPHImJihfPXIsQT0odC1lKS8yKmcpLE09LXQqZzt9ZWxzZSBNPU1wKyhpLWcpKlJoO31UPyh0LnZlcnRpY2FsaXphYmxlPSEwLGIucHVzaCh7Z2x5cGg6eSxpbWFnZU5hbWU6ayx4OnAseTpkK00sdmVydGljYWw6VCxzY2FsZTpnLGxvY2FsR2x5cGg6di5sb2NhbEdseXBoLGZvbnRTdGFjazpvLmZvbnRTdGFjayxzZWN0aW9uSW5kZXg6ZixtZXRyaWNzOnYscmVjdDpTfSkscCs9SSpnK3UpOihiLnB1c2goe2dseXBoOnksaW1hZ2VOYW1lOmsseDpwLHk6ZCtNLHZlcnRpY2FsOlQsc2NhbGU6Zyxsb2NhbEdseXBoOnYubG9jYWxHbHlwaCxmb250U3RhY2s6by5mb250U3RhY2ssc2VjdGlvbkluZGV4OmYsbWV0cmljczp2LHJlY3Q6U30pLHArPXYuYWR2YW5jZSpnK3UpO30wIT09Yi5sZW5ndGgmJihmPU1hdGgubWF4KHAtdSxmKSxtP1VwKGIseSx3LEEscyppLzIpOlVwKGIseSx3LDAscy8yKSkscD0wO2NvbnN0IFM9cyppK3c7di5saW5lT2Zmc2V0PU1hdGgubWF4KHcsbyksZCs9UywrK2c7fXZhciB4O2NvbnN0IHY9ZCx7aG9yaXpvbnRhbEFsaWduOmIsdmVydGljYWxBbGlnbjp3fT1ScChhKTsoKGZ1bmN0aW9uKHQsZSxyLG4saSxzKXtjb25zdCBhPShlLXIpKmksbz0tcypuO2Zvcihjb25zdCBlIG9mIHQpZm9yKGNvbnN0IHQgb2YgZS5wb3NpdGlvbmVkR2x5cGhzKXQueCs9YSx0LnkrPW87fSkpKHQucG9zaXRpb25lZExpbmVzLHksYix3LGYsdiksdC50b3ArPS13KnYsdC5ib3R0b209dC50b3Ardix0LmxlZnQrPS1iKmYsdC5yaWdodD10LmxlZnQrZix0Lmhhc0Jhc2VsaW5lPW07fSh3LGUscixuLG0sYSxvLGwsaCx1LHAsZiksIWZ1bmN0aW9uKHQpe2Zvcihjb25zdCBlIG9mIHQpaWYoMCE9PWUucG9zaXRpb25lZEdseXBocy5sZW5ndGgpcmV0dXJuICExO3JldHVybiAhMH0oYikmJnd9Y29uc3QgRXA9ezk6ITAsMTA6ITAsMTE6ITAsMTI6ITAsMTM6ITAsMzI6ITB9LENwPXsxMDohMCwzMjohMCwzODohMCw0MDohMCw0MTohMCw0MzohMCw0NTohMCw0NzohMCwxNzM6ITAsMTgzOiEwLDgyMDM6ITAsODIwODohMCw4MjExOiEwLDgyMzE6ITB9O2Z1bmN0aW9uIFBwKHQsZSxyLG4saSxzKXtpZihlLmltYWdlTmFtZSl7Y29uc3QgdD1uW2UuaW1hZ2VOYW1lXTtyZXR1cm4gdD90LmRpc3BsYXlTaXplWzBdKmUuc2NhbGUqUmgvcytpOjB9e2NvbnN0IG49cltlLmZvbnRTdGFja10scz1uJiZuLmdseXBoc1t0XTtyZXR1cm4gcz9zLm1ldHJpY3MuYWR2YW5jZSplLnNjYWxlK2k6MH19ZnVuY3Rpb24gRHAodCxlLHIsbil7Y29uc3QgaT1NYXRoLnBvdyh0LWUsMik7cmV0dXJuIG4/dDxlP2kvMjoyKmk6aStNYXRoLmFicyhyKSpyfWZ1bmN0aW9uIFZwKHQsZSxyKXtsZXQgbj0wO3JldHVybiAxMD09PXQmJihuLT0xZTQpLHImJihuKz0xNTApLDQwIT09dCYmNjUyODghPT10fHwobis9NTApLDQxIT09ZSYmNjUyODkhPT1lfHwobis9NTApLG59ZnVuY3Rpb24gTHAodCxlLHIsbixpLHMpe2xldCBhPW51bGwsbz1EcChlLHIsaSxzKTtmb3IoY29uc3QgdCBvZiBuKXtjb25zdCBuPURwKGUtdC54LHIsaSxzKSt0LmJhZG5lc3M7bjw9byYmKGE9dCxvPW4pO31yZXR1cm4ge2luZGV4OnQseDplLHByaW9yQnJlYWs6YSxiYWRuZXNzOm99fWZ1bmN0aW9uIEZwKHQpe3JldHVybiB0P0ZwKHQucHJpb3JCcmVhaykuY29uY2F0KHQuaW5kZXgpOltdfWZ1bmN0aW9uIFJwKHQpe2xldCBlPS41LHI9LjU7c3dpdGNoKHQpe2Nhc2VcInJpZ2h0XCI6Y2FzZVwidG9wLXJpZ2h0XCI6Y2FzZVwiYm90dG9tLXJpZ2h0XCI6ZT0xO2JyZWFrO2Nhc2VcImxlZnRcIjpjYXNlXCJ0b3AtbGVmdFwiOmNhc2VcImJvdHRvbS1sZWZ0XCI6ZT0wO31zd2l0Y2godCl7Y2FzZVwiYm90dG9tXCI6Y2FzZVwiYm90dG9tLXJpZ2h0XCI6Y2FzZVwiYm90dG9tLWxlZnRcIjpyPTE7YnJlYWs7Y2FzZVwidG9wXCI6Y2FzZVwidG9wLXJpZ2h0XCI6Y2FzZVwidG9wLWxlZnRcIjpyPTA7fXJldHVybiB7aG9yaXpvbnRhbEFsaWduOmUsdmVydGljYWxBbGlnbjpyfX1mdW5jdGlvbiBVcCh0LGUscixuLGkpe2lmKCEoZXx8cnx8bnx8aSkpcmV0dXJuO2NvbnN0IHM9dC5sZW5ndGgtMSxhPXRbc10sbz0oYS54K2EubWV0cmljcy5hZHZhbmNlKmEuc2NhbGUpKmU7Zm9yKGxldCBlPTA7ZTw9cztlKyspdFtlXS54LT1vLHRbZV0ueSs9cituK2k7fWZ1bmN0aW9uICRwKHQsZSxyKXtjb25zdHtob3Jpem9udGFsQWxpZ246bix2ZXJ0aWNhbEFsaWduOml9PVJwKHIpLHM9ZVswXS10LmRpc3BsYXlTaXplWzBdKm4sYT1lWzFdLXQuZGlzcGxheVNpemVbMV0qaTtyZXR1cm4ge2ltYWdlOnQsdG9wOmEsYm90dG9tOmErdC5kaXNwbGF5U2l6ZVsxXSxsZWZ0OnMscmlnaHQ6cyt0LmRpc3BsYXlTaXplWzBdfX1mdW5jdGlvbiBqcCh0LGUscixuLGkscyl7Y29uc3QgYT10LmltYWdlO2xldCBvO2lmKGEuY29udGVudCl7Y29uc3QgdD1hLmNvbnRlbnQsZT1hLnBpeGVsUmF0aW98fDE7bz1bdFswXS9lLHRbMV0vZSxhLmRpc3BsYXlTaXplWzBdLXRbMl0vZSxhLmRpc3BsYXlTaXplWzFdLXRbM10vZV07fWNvbnN0IGw9ZS5sZWZ0KnMsdT1lLnJpZ2h0KnM7bGV0IGMsaCxwLGQ7XCJ3aWR0aFwiPT09cnx8XCJib3RoXCI9PT1yPyhkPWlbMF0rbC1uWzNdLGg9aVswXSt1K25bMV0pOihkPWlbMF0rKGwrdS1hLmRpc3BsYXlTaXplWzBdKS8yLGg9ZCthLmRpc3BsYXlTaXplWzBdKTtjb25zdCBmPWUudG9wKnMseT1lLmJvdHRvbSpzO3JldHVybiBcImhlaWdodFwiPT09cnx8XCJib3RoXCI9PT1yPyhjPWlbMV0rZi1uWzBdLHA9aVsxXSt5K25bMl0pOihjPWlbMV0rKGYreS1hLmRpc3BsYXlTaXplWzFdKS8yLHA9YythLmRpc3BsYXlTaXplWzFdKSx7aW1hZ2U6YSx0b3A6YyxyaWdodDpoLGJvdHRvbTpwLGxlZnQ6ZCxjb2xsaXNpb25QYWRkaW5nOm99fWNsYXNzIE9wIGV4dGVuZHMgeHtjb25zdHJ1Y3Rvcih0LGUscixuLGkpe3N1cGVyKHQsZSksdGhpcy5hbmdsZT1uLHRoaXMuej1yLHZvaWQgMCE9PWkmJih0aGlzLnNlZ21lbnQ9aSk7fWNsb25lKCl7cmV0dXJuIG5ldyBPcCh0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLmFuZ2xlLHRoaXMuc2VnbWVudCl9fWZ1bmN0aW9uIHFwKHQsZSxyLG4saSl7aWYodm9pZCAwPT09ZS5zZWdtZW50KXJldHVybiAhMDtsZXQgcz1lLGE9ZS5zZWdtZW50KzEsbz0wO2Zvcig7bz4tci8yOyl7aWYoYS0tLGE8MClyZXR1cm4gITE7by09dFthXS5kaXN0KHMpLHM9dFthXTt9bys9dFthXS5kaXN0KHRbYSsxXSksYSsrO2NvbnN0IGw9W107bGV0IHU9MDtmb3IoO288ci8yOyl7Y29uc3QgZT10W2FdLHI9dFthKzFdO2lmKCFyKXJldHVybiAhMTtsZXQgcz10W2EtMV0uYW5nbGVUbyhlKS1lLmFuZ2xlVG8ocik7Zm9yKHM9TWF0aC5hYnMoKHMrMypNYXRoLlBJKSUoMipNYXRoLlBJKS1NYXRoLlBJKSxsLnB1c2goe2Rpc3RhbmNlOm8sYW5nbGVEZWx0YTpzfSksdSs9cztvLWxbMF0uZGlzdGFuY2U+bjspdS09bC5zaGlmdCgpLmFuZ2xlRGVsdGE7aWYodT5pKXJldHVybiAhMTthKyssbys9ZS5kaXN0KHIpO31yZXR1cm4gITB9ZnVuY3Rpb24gTnAodCl7bGV0IGU9MDtmb3IobGV0IHI9MDtyPHQubGVuZ3RoLTE7cisrKWUrPXRbcl0uZGlzdCh0W3IrMV0pO3JldHVybiBlfWZ1bmN0aW9uIEdwKHQsZSxyKXtyZXR1cm4gdD8uNiplKnI6MH1mdW5jdGlvbiBacCh0LGUpe3JldHVybiBNYXRoLm1heCh0P3QucmlnaHQtdC5sZWZ0OjAsZT9lLnJpZ2h0LWUubGVmdDowKX1mdW5jdGlvbiBLcCh0LGUscixuLGkscyl7Y29uc3QgYT1HcChyLGkscyksbz1acChyLG4pKnM7bGV0IGw9MDtjb25zdCB1PU5wKHQpLzI7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aC0xO3IrKyl7Y29uc3Qgbj10W3JdLGk9dFtyKzFdLHM9bi5kaXN0KGkpO2lmKGwrcz51KXtjb25zdCBjPSh1LWwpL3MsaD1FcihuLngsaS54LGMpLHA9RXIobi55LGkueSxjKSxkPW5ldyBPcChoLHAsMCxpLmFuZ2xlVG8obikscik7cmV0dXJuICFhfHxxcCh0LGQsbyxhLGUpP2Q6dm9pZCAwfWwrPXM7fX1mdW5jdGlvbiBYcCh0LGUscixuLGkscyxhLG8sbCl7Y29uc3QgdT1HcChuLHMsYSksYz1acChuLGkpLGg9YyphLHA9MD09PXRbMF0ueHx8dFswXS54PT09bHx8MD09PXRbMF0ueXx8dFswXS55PT09bDtyZXR1cm4gZS1oPGUvNCYmKGU9aCtlLzQpLEpwKHQscD9lLzIqbyVlOihjLzIrMipzKSphKm8lZSxlLHUscixoLHAsITEsbCl9ZnVuY3Rpb24gSnAodCxlLHIsbixpLHMsYSxvLGwpe2NvbnN0IHU9cy8yLGM9TnAodCk7bGV0IGg9MCxwPWUtcixkPVtdO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGgtMTtlKyspe2NvbnN0IGE9dFtlXSxvPXRbZSsxXSxmPWEuZGlzdChvKSx5PW8uYW5nbGVUbyhhKTtmb3IoO3ArcjxoK2Y7KXtwKz1yO2NvbnN0IG09KHAtaCkvZixnPUVyKGEueCxvLngsbSkseD1FcihhLnksby55LG0pO2lmKGc+PTAmJmc8bCYmeD49MCYmeDxsJiZwLXU+PTAmJnArdTw9Yyl7Y29uc3Qgcj1uZXcgT3AoZyx4LDAseSxlKTtyLl9yb3VuZCgpLG4mJiFxcCh0LHIscyxuLGkpfHxkLnB1c2gocik7fX1oKz1mO31yZXR1cm4gb3x8ZC5sZW5ndGh8fGF8fChkPUpwKHQsaC8yLHIsbixpLHMsYSwhMCxsKSksZH1mdW5jdGlvbiBIcCh0LGUscixuLGkpe2NvbnN0IHM9W107Zm9yKGxldCBhPTA7YTx0Lmxlbmd0aDthKyspe2NvbnN0IG89dFthXTtsZXQgbDtmb3IobGV0IHQ9MDt0PG8ubGVuZ3RoLTE7dCsrKXtsZXQgYT1vW3RdLHU9b1t0KzFdO2EueDxlJiZ1Lng8ZXx8KGEueDxlP2E9bmV3IHgoZSxhLnkrKGUtYS54KS8odS54LWEueCkqKHUueS1hLnkpKS5fcm91bmQoKTp1Lng8ZSYmKHU9bmV3IHgoZSxhLnkrKGUtYS54KS8odS54LWEueCkqKHUueS1hLnkpKS5fcm91bmQoKSksYS55PHImJnUueTxyfHwoYS55PHI/YT1uZXcgeChhLngrKHItYS55KS8odS55LWEueSkqKHUueC1hLngpLHIpLl9yb3VuZCgpOnUueTxyJiYodT1uZXcgeChhLngrKHItYS55KS8odS55LWEueSkqKHUueC1hLngpLHIpLl9yb3VuZCgpKSxhLng+PW4mJnUueD49bnx8KGEueD49bj9hPW5ldyB4KG4sYS55KyhuLWEueCkvKHUueC1hLngpKih1LnktYS55KSkuX3JvdW5kKCk6dS54Pj1uJiYodT1uZXcgeChuLGEueSsobi1hLngpLyh1LngtYS54KSoodS55LWEueSkpLl9yb3VuZCgpKSxhLnk+PWkmJnUueT49aXx8KGEueT49aT9hPW5ldyB4KGEueCsoaS1hLnkpLyh1LnktYS55KSoodS54LWEueCksaSkuX3JvdW5kKCk6dS55Pj1pJiYodT1uZXcgeChhLngrKGktYS55KS8odS55LWEueSkqKHUueC1hLngpLGkpLl9yb3VuZCgpKSxsJiZhLmVxdWFscyhsW2wubGVuZ3RoLTFdKXx8KGw9W2FdLHMucHVzaChsKSksbC5wdXNoKHUpKSkpKTt9fXJldHVybiBzfUppKE9wLFwiQW5jaG9yXCIpO2NvbnN0IFlwPTFlMjA7ZnVuY3Rpb24gV3AodCxlLHIsbixpLHMsYSxvLGwpe2ZvcihsZXQgdT1lO3U8ZStuO3UrKylRcCh0LHIqcyt1LHMsaSxhLG8sbCk7Zm9yKGxldCB1PXI7dTxyK2k7dSsrKVFwKHQsdSpzK2UsMSxuLGEsbyxsKTt9ZnVuY3Rpb24gUXAodCxlLHIsbixpLHMsYSl7c1swXT0wLGFbMF09LVlwLGFbMV09WXAsaVswXT10W2VdO2ZvcihsZXQgbz0xLGw9MCx1PTA7bzxuO28rKyl7aVtvXT10W2UrbypyXTtjb25zdCBuPW8qbztkb3tjb25zdCB0PXNbbF07dT0oaVtvXS1pW3RdK24tdCp0KS8oby10KS8yO313aGlsZSh1PD1hW2xdJiYtLWw+LTEpO2wrKyxzW2xdPW8sYVtsXT11LGFbbCsxXT1ZcDt9Zm9yKGxldCBvPTAsbD0wO288bjtvKyspe2Zvcig7YVtsKzFdPG87KWwrKztjb25zdCBuPXNbbF0sdT1vLW47dFtlK28qcl09aVtuXSt1KnU7fX1jb25zdCB0ZD0yLGVkPXtub25lOjAsaWRlb2dyYXBoczoxLGFsbDoyfTtjbGFzcyByZHtjb25zdHJ1Y3Rvcih0LGUscil7dGhpcy5yZXF1ZXN0TWFuYWdlcj10LHRoaXMubG9jYWxHbHlwaE1vZGU9ZSx0aGlzLmxvY2FsRm9udEZhbWlseT1yLHRoaXMuZW50cmllcz17fSx0aGlzLmxvY2FsR2x5cGhzPXsyMDA6e30sNDAwOnt9LDUwMDp7fSw5MDA6e319O31zZXRVUkwodCl7dGhpcy51cmw9dDt9Z2V0R2x5cGhzKHQsZSl7Y29uc3Qgcj1bXTtmb3IoY29uc3QgZSBpbiB0KWZvcihjb25zdCBuIG9mIHRbZV0pci5wdXNoKHtzdGFjazplLGlkOm59KTtCKHIsKCh7c3RhY2s6dCxpZDplfSxyKT0+e2xldCBuPXRoaXMuZW50cmllc1t0XTtufHwobj10aGlzLmVudHJpZXNbdF09e2dseXBoczp7fSxyZXF1ZXN0czp7fSxyYW5nZXM6e30sYXNjZW5kZXI6dm9pZCAwLGRlc2NlbmRlcjp2b2lkIDB9KTtsZXQgaT1uLmdseXBoc1tlXTtpZih2b2lkIDAhPT1pKXJldHVybiB2b2lkIHIobnVsbCx7c3RhY2s6dCxpZDplLGdseXBoOml9KTtpZihpPXRoaXMuX3RpbnlTREYobix0LGUpLGkpcmV0dXJuIG4uZ2x5cGhzW2VdPWksdm9pZCByKG51bGwse3N0YWNrOnQsaWQ6ZSxnbHlwaDppfSk7Y29uc3Qgcz1NYXRoLmZsb29yKGUvMjU2KTtpZigyNTYqcz42NTUzNSlyZXR1cm4gdm9pZCByKG5ldyBFcnJvcihcImdseXBocyA+IDY1NTM1IG5vdCBzdXBwb3J0ZWRcIikpO2lmKG4ucmFuZ2VzW3NdKXJldHVybiB2b2lkIHIobnVsbCx7c3RhY2s6dCxpZDplLGdseXBoOml9KTtsZXQgYT1uLnJlcXVlc3RzW3NdO2F8fChhPW4ucmVxdWVzdHNbc109W10scmQubG9hZEdseXBoUmFuZ2UodCxzLHRoaXMudXJsLHRoaXMucmVxdWVzdE1hbmFnZXIsKCh0LGUpPT57aWYoZSl7bi5hc2NlbmRlcj1lLmFzY2VuZGVyLG4uZGVzY2VuZGVyPWUuZGVzY2VuZGVyO2Zvcihjb25zdCB0IGluIGUuZ2x5cGhzKXRoaXMuX2RvZXNDaGFyU3VwcG9ydExvY2FsR2x5cGgoK3QpfHwobi5nbHlwaHNbK3RdPWUuZ2x5cGhzWyt0XSk7bi5yYW5nZXNbc109ITA7fWZvcihjb25zdCByIG9mIGEpcih0LGUpO2RlbGV0ZSBuLnJlcXVlc3RzW3NdO30pKSksYS5wdXNoKCgobixpKT0+e24/cihuKTppJiZyKG51bGwse3N0YWNrOnQsaWQ6ZSxnbHlwaDppLmdseXBoc1tlXXx8bnVsbH0pO30pKTt9KSwoKHQscik9PntpZih0KWUodCk7ZWxzZSBpZihyKXtjb25zdCB0PXt9O2Zvcihjb25zdHtzdGFjazplLGlkOm4sZ2x5cGg6aX1vZiByKXZvaWQgMD09PXRbZV0mJih0W2VdPXt9KSx2b2lkIDA9PT10W2VdLmdseXBocyYmKHRbZV0uZ2x5cGhzPXt9KSx0W2VdLmdseXBoc1tuXT1pJiZ7aWQ6aS5pZCxiaXRtYXA6aS5iaXRtYXAuY2xvbmUoKSxtZXRyaWNzOmkubWV0cmljc30sdFtlXS5hc2NlbmRlcj10aGlzLmVudHJpZXNbZV0uYXNjZW5kZXIsdFtlXS5kZXNjZW5kZXI9dGhpcy5lbnRyaWVzW2VdLmRlc2NlbmRlcjtlKG51bGwsdCk7fX0pKTt9X2RvZXNDaGFyU3VwcG9ydExvY2FsR2x5cGgodCl7cmV0dXJuIHRoaXMubG9jYWxHbHlwaE1vZGUhPT1lZC5ub25lJiYodGhpcy5sb2NhbEdseXBoTW9kZT09PWVkLmFsbD8hIXRoaXMubG9jYWxGb250RmFtaWx5OiEhdGhpcy5sb2NhbEZvbnRGYW1pbHkmJih0c1tcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHNcIl0odCl8fHRzW1wiSGFuZ3VsIFN5bGxhYmxlc1wiXSh0KXx8dHMuSGlyYWdhbmEodCl8fHRzLkthdGFrYW5hKHQpfHx0c1tcIkNKSyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvblwiXSh0KSkpfV90aW55U0RGKHQsZSxyKXtjb25zdCBuPXRoaXMubG9jYWxGb250RmFtaWx5O2lmKCFufHwhdGhpcy5fZG9lc0NoYXJTdXBwb3J0TG9jYWxHbHlwaChyKSlyZXR1cm47bGV0IGk9dC50aW55U0RGO2lmKCFpKXtsZXQgcj1cIjQwMFwiOy9ib2xkL2kudGVzdChlKT9yPVwiOTAwXCI6L21lZGl1bS9pLnRlc3QoZSk/cj1cIjUwMFwiOi9saWdodC9pLnRlc3QoZSkmJihyPVwiMjAwXCIpLGk9dC50aW55U0RGPW5ldyByZC5UaW55U0RGKHtmb250RmFtaWx5Om4sZm9udFdlaWdodDpyLGZvbnRTaXplOjI0KnRkLGJ1ZmZlcjozKnRkLHJhZGl1czo4KnRkfSksaS5mb250V2VpZ2h0PXI7fWlmKHRoaXMubG9jYWxHbHlwaHNbaS5mb250V2VpZ2h0XVtyXSlyZXR1cm4gdGhpcy5sb2NhbEdseXBoc1tpLmZvbnRXZWlnaHRdW3JdO2NvbnN0IHM9U3RyaW5nLmZyb21DaGFyQ29kZShyKSx7ZGF0YTphLHdpZHRoOm8saGVpZ2h0OmwsZ2x5cGhXaWR0aDp1LGdseXBoSGVpZ2h0OmMsZ2x5cGhMZWZ0OmgsZ2x5cGhUb3A6cCxnbHlwaEFkdmFuY2U6ZH09aS5kcmF3KHMpO3JldHVybiB0aGlzLmxvY2FsR2x5cGhzW2kuZm9udFdlaWdodF1bcl09e2lkOnIsYml0bWFwOm5ldyBSdSh7d2lkdGg6byxoZWlnaHQ6bH0sYSksbWV0cmljczp7d2lkdGg6dS90ZCxoZWlnaHQ6Yy90ZCxsZWZ0OmgvdGQsdG9wOnAvdGQtMjcsYWR2YW5jZTpkL3RkLGxvY2FsR2x5cGg6ITB9fX19cmQubG9hZEdseXBoUmFuZ2U9ZnVuY3Rpb24odCxlLHIsbixpKXtjb25zdCBzPTI1NiplLGE9cysyNTUsbz1uLnRyYW5zZm9ybVJlcXVlc3Qobi5ub3JtYWxpemVHbHlwaHNVUkwocikucmVwbGFjZShcIntmb250c3RhY2t9XCIsdCkucmVwbGFjZShcIntyYW5nZX1cIixgJHtzfS0ke2F9YCksbHQuR2x5cGhzKTtwdChvLCgodCxlKT0+e2lmKHQpaSh0KTtlbHNlIGlmKGUpe2NvbnN0IHQ9e30scj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG1wKHQpLnJlYWRGaWVsZHMoeHAse30pfShlKTtmb3IoY29uc3QgZSBvZiByLmdseXBocyl0W2UuaWRdPWU7aShudWxsLHtnbHlwaHM6dCxhc2NlbmRlcjpyLmFzY2VuZGVyLGRlc2NlbmRlcjpyLmRlc2NlbmRlcn0pO319KSk7fSxyZC5UaW55U0RGPWNsYXNze2NvbnN0cnVjdG9yKHtmb250U2l6ZTp0PTI0LGJ1ZmZlcjplPTMscmFkaXVzOnI9OCxjdXRvZmY6bj0uMjUsZm9udEZhbWlseTppPVwic2Fucy1zZXJpZlwiLGZvbnRXZWlnaHQ6cz1cIm5vcm1hbFwiLGZvbnRTdHlsZTphPVwibm9ybWFsXCJ9PXt9KXt0aGlzLmJ1ZmZlcj1lLHRoaXMuY3V0b2ZmPW4sdGhpcy5yYWRpdXM9cjtjb25zdCBvPXRoaXMuc2l6ZT10KzQqZSxsPXRoaXMuX2NyZWF0ZUNhbnZhcyhvKSx1PXRoaXMuY3R4PWwuZ2V0Q29udGV4dChcIjJkXCIse3dpbGxSZWFkRnJlcXVlbnRseTohMH0pO3UuZm9udD1gJHthfSAke3N9ICR7dH1weCAke2l9YCx1LnRleHRCYXNlbGluZT1cImFscGhhYmV0aWNcIix1LnRleHRBbGlnbj1cImxlZnRcIix1LmZpbGxTdHlsZT1cImJsYWNrXCIsdGhpcy5ncmlkT3V0ZXI9bmV3IEZsb2F0NjRBcnJheShvKm8pLHRoaXMuZ3JpZElubmVyPW5ldyBGbG9hdDY0QXJyYXkobypvKSx0aGlzLmY9bmV3IEZsb2F0NjRBcnJheShvKSx0aGlzLno9bmV3IEZsb2F0NjRBcnJheShvKzEpLHRoaXMudj1uZXcgVWludDE2QXJyYXkobyk7fV9jcmVhdGVDYW52YXModCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3JldHVybiBlLndpZHRoPWUuaGVpZ2h0PXQsZX1kcmF3KHQpe2NvbnN0e3dpZHRoOmUsYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQ6cixhY3R1YWxCb3VuZGluZ0JveERlc2NlbnQ6bixhY3R1YWxCb3VuZGluZ0JveExlZnQ6aSxhY3R1YWxCb3VuZGluZ0JveFJpZ2h0OnN9PXRoaXMuY3R4Lm1lYXN1cmVUZXh0KHQpLGE9TWF0aC5jZWlsKHIpLG89TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLnNpemUtdGhpcy5idWZmZXIsTWF0aC5jZWlsKHMtaSkpKSxsPU1hdGgubWluKHRoaXMuc2l6ZS10aGlzLmJ1ZmZlcixhK01hdGguY2VpbChuKSksdT1vKzIqdGhpcy5idWZmZXIsYz1sKzIqdGhpcy5idWZmZXIsaD1NYXRoLm1heCh1KmMsMCkscD1uZXcgVWludDhDbGFtcGVkQXJyYXkoaCksZD17ZGF0YTpwLHdpZHRoOnUsaGVpZ2h0OmMsZ2x5cGhXaWR0aDpvLGdseXBoSGVpZ2h0OmwsZ2x5cGhUb3A6YSxnbHlwaExlZnQ6MCxnbHlwaEFkdmFuY2U6ZX07aWYoMD09PW98fDA9PT1sKXJldHVybiBkO2NvbnN0e2N0eDpmLGJ1ZmZlcjp5LGdyaWRJbm5lcjptLGdyaWRPdXRlcjpnfT10aGlzO2YuY2xlYXJSZWN0KHkseSxvLGwpLGYuZmlsbFRleHQodCx5LHkrYSk7Y29uc3QgeD1mLmdldEltYWdlRGF0YSh5LHksbyxsKTtnLmZpbGwoWXAsMCxoKSxtLmZpbGwoMCwwLGgpO2ZvcihsZXQgdD0wO3Q8bDt0KyspZm9yKGxldCBlPTA7ZTxvO2UrKyl7Y29uc3Qgcj14LmRhdGFbNCoodCpvK2UpKzNdLzI1NTtpZigwPT09ciljb250aW51ZTtjb25zdCBuPSh0K3kpKnUrZSt5O2lmKDE9PT1yKWdbbl09MCxtW25dPVlwO2Vsc2Uge2NvbnN0IHQ9LjUtcjtnW25dPXQ+MD90KnQ6MCxtW25dPXQ8MD90KnQ6MDt9fVdwKGcsMCwwLHUsYyx1LHRoaXMuZix0aGlzLnYsdGhpcy56KSxXcChtLHkseSxvLGwsdSx0aGlzLmYsdGhpcy52LHRoaXMueik7Zm9yKGxldCB0PTA7dDxoO3QrKyl7Y29uc3QgZT1NYXRoLnNxcnQoZ1t0XSktTWF0aC5zcXJ0KG1bdF0pO3BbdF09TWF0aC5yb3VuZCgyNTUtMjU1KihlL3RoaXMucmFkaXVzK3RoaXMuY3V0b2ZmKSk7fXJldHVybiBkfX07Y29uc3QgbmQ9QXA7ZnVuY3Rpb24gaWQodCxlLHIsbil7Y29uc3QgaT1bXSxzPXQuaW1hZ2UsYT1zLnBpeGVsUmF0aW8sbz1zLnBhZGRlZFJlY3Qudy0yKm5kLGw9cy5wYWRkZWRSZWN0LmgtMipuZCx1PXQucmlnaHQtdC5sZWZ0LGM9dC5ib3R0b20tdC50b3AsaD1zLnN0cmV0Y2hYfHxbWzAsb11dLHA9cy5zdHJldGNoWXx8W1swLGxdXSxkPSh0LGUpPT50K2VbMV0tZVswXSxmPWgucmVkdWNlKGQsMCkseT1wLnJlZHVjZShkLDApLG09by1mLGc9bC15O2xldCB2PTAsYj1mLHc9MCxfPXksQT0wLFM9bSxrPTAsST1nO2lmKHMuY29udGVudCYmbil7Y29uc3QgdD1zLmNvbnRlbnQ7dj1zZChoLDAsdFswXSksdz1zZChwLDAsdFsxXSksYj1zZChoLHRbMF0sdFsyXSksXz1zZChwLHRbMV0sdFszXSksQT10WzBdLXYsaz10WzFdLXcsUz10WzJdLXRbMF0tYixJPXRbM10tdFsxXS1fO31jb25zdCBNPShuLGksbyxsKT0+e2NvbnN0IGg9b2Qobi5zdHJldGNoLXYsYix1LHQubGVmdCkscD1sZChuLmZpeGVkLUEsUyxuLnN0cmV0Y2gsZiksZD1vZChpLnN0cmV0Y2gtdyxfLGMsdC50b3ApLG09bGQoaS5maXhlZC1rLEksaS5zdHJldGNoLHkpLGc9b2Qoby5zdHJldGNoLXYsYix1LHQubGVmdCksTT1sZChvLmZpeGVkLUEsUyxvLnN0cmV0Y2gsZiksVD1vZChsLnN0cmV0Y2gtdyxfLGMsdC50b3ApLHo9bGQobC5maXhlZC1rLEksbC5zdHJldGNoLHkpLEI9bmV3IHgoaCxkKSxFPW5ldyB4KGcsZCksQz1uZXcgeChnLFQpLFA9bmV3IHgoaCxUKSxEPW5ldyB4KHAvYSxtL2EpLFY9bmV3IHgoTS9hLHovYSksTD1lKk1hdGguUEkvMTgwO2lmKEwpe2NvbnN0IHQ9TWF0aC5zaW4oTCksZT1NYXRoLmNvcyhMKSxyPVtlLC10LHQsZV07Qi5fbWF0TXVsdChyKSxFLl9tYXRNdWx0KHIpLFAuX21hdE11bHQociksQy5fbWF0TXVsdChyKTt9Y29uc3QgRj1uLnN0cmV0Y2grbi5maXhlZCxSPWkuc3RyZXRjaCtpLmZpeGVkO3JldHVybiB7dGw6Qix0cjpFLGJsOlAsYnI6Qyx0ZXg6e3g6cy5wYWRkZWRSZWN0LngrbmQrRix5OnMucGFkZGVkUmVjdC55K25kK1IsdzpvLnN0cmV0Y2grby5maXhlZC1GLGg6bC5zdHJldGNoK2wuZml4ZWQtUn0sd3JpdGluZ01vZGU6dm9pZCAwLGdseXBoT2Zmc2V0OlswLDBdLHNlY3Rpb25JbmRleDowLHBpeGVsT2Zmc2V0VEw6RCxwaXhlbE9mZnNldEJSOlYsbWluRm9udFNjYWxlWDpTL2EvdSxtaW5Gb250U2NhbGVZOkkvYS9jLGlzU0RGOnJ9fTtpZihuJiYocy5zdHJldGNoWHx8cy5zdHJldGNoWSkpe2NvbnN0IHQ9YWQoaCxtLGYpLGU9YWQocCxnLHkpO2ZvcihsZXQgcj0wO3I8dC5sZW5ndGgtMTtyKyspe2NvbnN0IG49dFtyXSxzPXRbcisxXTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoLTE7dCsrKWkucHVzaChNKG4sZVt0XSxzLGVbdCsxXSkpO319ZWxzZSBpLnB1c2goTSh7Zml4ZWQ6MCxzdHJldGNoOi0xfSx7Zml4ZWQ6MCxzdHJldGNoOi0xfSx7Zml4ZWQ6MCxzdHJldGNoOm8rMX0se2ZpeGVkOjAsc3RyZXRjaDpsKzF9KSk7cmV0dXJuIGl9ZnVuY3Rpb24gc2QodCxlLHIpe2xldCBuPTA7Zm9yKGNvbnN0IGkgb2YgdCluKz1NYXRoLm1heChlLE1hdGgubWluKHIsaVsxXSkpLU1hdGgubWF4KGUsTWF0aC5taW4ocixpWzBdKSk7cmV0dXJuIG59ZnVuY3Rpb24gYWQodCxlLHIpe2NvbnN0IG49W3tmaXhlZDotbmQsc3RyZXRjaDowfV07Zm9yKGNvbnN0W2Uscl1vZiB0KXtjb25zdCB0PW5bbi5sZW5ndGgtMV07bi5wdXNoKHtmaXhlZDplLXQuc3RyZXRjaCxzdHJldGNoOnQuc3RyZXRjaH0pLG4ucHVzaCh7Zml4ZWQ6ZS10LnN0cmV0Y2gsc3RyZXRjaDp0LnN0cmV0Y2grKHItZSl9KTt9cmV0dXJuIG4ucHVzaCh7Zml4ZWQ6ZStuZCxzdHJldGNoOnJ9KSxufWZ1bmN0aW9uIG9kKHQsZSxyLG4pe3JldHVybiB0L2UqcitufWZ1bmN0aW9uIGxkKHQsZSxyLG4pe3JldHVybiB0LWUqci9ufWZ1bmN0aW9uIHVkKHQsZSxyLG4pe2NvbnN0IGk9ZSt0LnBvc2l0aW9uZWRMaW5lc1tuXS5saW5lT2Zmc2V0O3JldHVybiAwPT09bj9yK2kvMjpyKyhpKyhlK3QucG9zaXRpb25lZExpbmVzW24tMV0ubGluZU9mZnNldCkpLzJ9Y2xhc3MgY2R7Y29uc3RydWN0b3IodD1bXSxlPWhkKXtpZih0aGlzLmRhdGE9dCx0aGlzLmxlbmd0aD10aGlzLmRhdGEubGVuZ3RoLHRoaXMuY29tcGFyZT1lLHRoaXMubGVuZ3RoPjApZm9yKGxldCB0PSh0aGlzLmxlbmd0aD4+MSktMTt0Pj0wO3QtLSl0aGlzLl9kb3duKHQpO31wdXNoKHQpe3RoaXMuZGF0YS5wdXNoKHQpLHRoaXMubGVuZ3RoKyssdGhpcy5fdXAodGhpcy5sZW5ndGgtMSk7fXBvcCgpe2lmKDA9PT10aGlzLmxlbmd0aClyZXR1cm47Y29uc3QgdD10aGlzLmRhdGFbMF0sZT10aGlzLmRhdGEucG9wKCk7cmV0dXJuIHRoaXMubGVuZ3RoLS0sdGhpcy5sZW5ndGg+MCYmKHRoaXMuZGF0YVswXT1lLHRoaXMuX2Rvd24oMCkpLHR9cGVlaygpe3JldHVybiB0aGlzLmRhdGFbMF19X3VwKHQpe2NvbnN0e2RhdGE6ZSxjb21wYXJlOnJ9PXRoaXMsbj1lW3RdO2Zvcig7dD4wOyl7Y29uc3QgaT10LTE+PjEscz1lW2ldO2lmKHIobixzKT49MClicmVhaztlW3RdPXMsdD1pO31lW3RdPW47fV9kb3duKHQpe2NvbnN0e2RhdGE6ZSxjb21wYXJlOnJ9PXRoaXMsbj10aGlzLmxlbmd0aD4+MSxpPWVbdF07Zm9yKDt0PG47KXtsZXQgbj0xKyh0PDwxKSxzPWVbbl07Y29uc3QgYT1uKzE7aWYoYTx0aGlzLmxlbmd0aCYmcihlW2FdLHMpPDAmJihuPWEscz1lW2FdKSxyKHMsaSk+PTApYnJlYWs7ZVt0XT1zLHQ9bjt9ZVt0XT1pO319ZnVuY3Rpb24gaGQodCxlKXtyZXR1cm4gdDxlPy0xOnQ+ZT8xOjB9ZnVuY3Rpb24gcGQodCxlPTEscj0hMSl7bGV0IG49MS8wLGk9MS8wLHM9LTEvMCxhPS0xLzA7Y29uc3Qgbz10WzBdO2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKXtjb25zdCBlPW9bdF07KCF0fHxlLng8bikmJihuPWUueCksKCF0fHxlLnk8aSkmJihpPWUueSksKCF0fHxlLng+cykmJihzPWUueCksKCF0fHxlLnk+YSkmJihhPWUueSk7fWNvbnN0IGw9TWF0aC5taW4ocy1uLGEtaSk7bGV0IHU9bC8yO2NvbnN0IGM9bmV3IGNkKFtdLGRkKTtpZigwPT09bClyZXR1cm4gbmV3IHgobixpKTtmb3IobGV0IGU9bjtlPHM7ZSs9bClmb3IobGV0IHI9aTtyPGE7cis9bCljLnB1c2gobmV3IGZkKGUrdSxyK3UsdSx0KSk7bGV0IGg9ZnVuY3Rpb24odCl7bGV0IGU9MCxyPTAsbj0wO2NvbnN0IGk9dFswXTtmb3IobGV0IHQ9MCxzPWkubGVuZ3RoLGE9cy0xO3Q8czthPXQrKyl7Y29uc3Qgcz1pW3RdLG89aVthXSxsPXMueCpvLnktby54KnMueTtyKz0ocy54K28ueCkqbCxuKz0ocy55K28ueSkqbCxlKz0zKmw7fXJldHVybiBuZXcgZmQoci9lLG4vZSwwLHQpfSh0KSxwPWMubGVuZ3RoO2Zvcig7Yy5sZW5ndGg7KXtjb25zdCBuPWMucG9wKCk7KG4uZD5oLmR8fCFoLmQpJiYoaD1uLHImJmNvbnNvbGUubG9nKFwiZm91bmQgYmVzdCAlZCBhZnRlciAlZCBwcm9iZXNcIixNYXRoLnJvdW5kKDFlNCpuLmQpLzFlNCxwKSksbi5tYXgtaC5kPD1lfHwodT1uLmgvMixjLnB1c2gobmV3IGZkKG4ucC54LXUsbi5wLnktdSx1LHQpKSxjLnB1c2gobmV3IGZkKG4ucC54K3Usbi5wLnktdSx1LHQpKSxjLnB1c2gobmV3IGZkKG4ucC54LXUsbi5wLnkrdSx1LHQpKSxjLnB1c2gobmV3IGZkKG4ucC54K3Usbi5wLnkrdSx1LHQpKSxwKz00KTt9cmV0dXJuIHImJihjb25zb2xlLmxvZyhgbnVtIHByb2JlczogJHtwfWApLGNvbnNvbGUubG9nKGBiZXN0IGRpc3RhbmNlOiAke2guZH1gKSksaC5wfWZ1bmN0aW9uIGRkKHQsZSl7cmV0dXJuIGUubWF4LXQubWF4fWNsYXNzIGZke2NvbnN0cnVjdG9yKHQsZSxyLG4pe3RoaXMucD1uZXcgeCh0LGUpLHRoaXMuaD1yLHRoaXMuZD1mdW5jdGlvbih0LGUpe2xldCByPSExLG49MS8wO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSsrKXtjb25zdCBzPWVbaV07Zm9yKGxldCBlPTAsaT1zLmxlbmd0aCxhPWktMTtlPGk7YT1lKyspe2NvbnN0IGk9c1tlXSxvPXNbYV07aS55PnQueSE9by55PnQueSYmdC54PChvLngtaS54KSoodC55LWkueSkvKG8ueS1pLnkpK2kueCYmKHI9IXIpLG49TWF0aC5taW4obix4dSh0LGksbykpO319cmV0dXJuIChyPzE6LTEpKk1hdGguc3FydChuKX0odGhpcy5wLG4pLHRoaXMubWF4PXRoaXMuZCt0aGlzLmgqTWF0aC5TUVJUMjt9fWNvbnN0IHlkPTcsbWQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGdkPU1hdGguc3FydCgyKTtmdW5jdGlvbiB4ZCh0LFtlLHJdKXtsZXQgbj0wLGk9MDtpZihyPT09bWQpe2U8MCYmKGU9MCk7Y29uc3Qgcj1lL2dkO3N3aXRjaCh0KXtjYXNlXCJ0b3AtcmlnaHRcIjpjYXNlXCJ0b3AtbGVmdFwiOmk9ci15ZDticmVhaztjYXNlXCJib3R0b20tcmlnaHRcIjpjYXNlXCJib3R0b20tbGVmdFwiOmk9LXIreWQ7YnJlYWs7Y2FzZVwiYm90dG9tXCI6aT0tZSt5ZDticmVhaztjYXNlXCJ0b3BcIjppPWUteWQ7fXN3aXRjaCh0KXtjYXNlXCJ0b3AtcmlnaHRcIjpjYXNlXCJib3R0b20tcmlnaHRcIjpuPS1yO2JyZWFrO2Nhc2VcInRvcC1sZWZ0XCI6Y2FzZVwiYm90dG9tLWxlZnRcIjpuPXI7YnJlYWs7Y2FzZVwibGVmdFwiOm49ZTticmVhaztjYXNlXCJyaWdodFwiOm49LWU7fX1lbHNlIHtzd2l0Y2goZT1NYXRoLmFicyhlKSxyPU1hdGguYWJzKHIpLHQpe2Nhc2VcInRvcC1yaWdodFwiOmNhc2VcInRvcC1sZWZ0XCI6Y2FzZVwidG9wXCI6aT1yLXlkO2JyZWFrO2Nhc2VcImJvdHRvbS1yaWdodFwiOmNhc2VcImJvdHRvbS1sZWZ0XCI6Y2FzZVwiYm90dG9tXCI6aT0tcit5ZDt9c3dpdGNoKHQpe2Nhc2VcInRvcC1yaWdodFwiOmNhc2VcImJvdHRvbS1yaWdodFwiOmNhc2VcInJpZ2h0XCI6bj0tZTticmVhaztjYXNlXCJ0b3AtbGVmdFwiOmNhc2VcImJvdHRvbS1sZWZ0XCI6Y2FzZVwibGVmdFwiOm49ZTt9fXJldHVybiBbbixpXX1mdW5jdGlvbiB2ZCh0LGUscixuLGkscyxhLG8sbCx1KXt0LmNyZWF0ZUFycmF5cygpLHQudGlsZVBpeGVsUmF0aW89YW8vKDUxMip0Lm92ZXJzY2FsaW5nKSx0LmNvbXBhcmVUZXh0PXt9LHQuaWNvbnNOZWVkTGluZWFyPSExO2NvbnN0IGM9dC5sYXllcnNbMF0ubGF5b3V0LGg9dC5sYXllcnNbMF0uX3VuZXZhbHVhdGVkTGF5b3V0Ll92YWx1ZXMscD17fTtpZihcImNvbXBvc2l0ZVwiPT09dC50ZXh0U2l6ZURhdGEua2luZCl7Y29uc3R7bWluWm9vbTplLG1heFpvb206cn09dC50ZXh0U2l6ZURhdGE7cC5jb21wb3NpdGVUZXh0U2l6ZXM9W2hbXCJ0ZXh0LXNpemVcIl0ucG9zc2libHlFdmFsdWF0ZShuZXcgd3MoZSksbyksaFtcInRleHQtc2l6ZVwiXS5wb3NzaWJseUV2YWx1YXRlKG5ldyB3cyhyKSxvKV07fWlmKFwiY29tcG9zaXRlXCI9PT10Lmljb25TaXplRGF0YS5raW5kKXtjb25zdHttaW5ab29tOmUsbWF4Wm9vbTpyfT10Lmljb25TaXplRGF0YTtwLmNvbXBvc2l0ZUljb25TaXplcz1baFtcImljb24tc2l6ZVwiXS5wb3NzaWJseUV2YWx1YXRlKG5ldyB3cyhlKSxvKSxoW1wiaWNvbi1zaXplXCJdLnBvc3NpYmx5RXZhbHVhdGUobmV3IHdzKHIpLG8pXTt9cC5sYXlvdXRUZXh0U2l6ZT1oW1widGV4dC1zaXplXCJdLnBvc3NpYmx5RXZhbHVhdGUobmV3IHdzKGwrMSksbykscC5sYXlvdXRJY29uU2l6ZT1oW1wiaWNvbi1zaXplXCJdLnBvc3NpYmx5RXZhbHVhdGUobmV3IHdzKGwrMSksbykscC50ZXh0TWF4U2l6ZT1oW1widGV4dC1zaXplXCJdLnBvc3NpYmx5RXZhbHVhdGUobmV3IHdzKDE4KSxvKTtjb25zdCBkPVwibWFwXCI9PT1jLmdldChcInRleHQtcm90YXRpb24tYWxpZ25tZW50XCIpJiZcInBvaW50XCIhPT1jLmdldChcInN5bWJvbC1wbGFjZW1lbnRcIiksZj1jLmdldChcInRleHQtc2l6ZVwiKTtmb3IoY29uc3QgcyBvZiB0LmZlYXR1cmVzKXtjb25zdCBsPWMuZ2V0KFwidGV4dC1mb250XCIpLmV2YWx1YXRlKHMse30sbykuam9pbihcIixcIiksaD1mLmV2YWx1YXRlKHMse30sbykseT1wLmxheW91dFRleHRTaXplLmV2YWx1YXRlKHMse30sbyksbT0ocC5sYXlvdXRJY29uU2l6ZS5ldmFsdWF0ZShzLHt9LG8pLHtob3Jpem9udGFsOnt9LHZlcnRpY2FsOnZvaWQgMH0pLGc9cy50ZXh0O2xldCB4LHY9WzAsMF07aWYoZyl7Y29uc3Qgbj1nLnRvU3RyaW5nKCksYT1jLmdldChcInRleHQtbGV0dGVyLXNwYWNpbmdcIikuZXZhbHVhdGUocyx7fSxvKSpSaCx1PWMuZ2V0KFwidGV4dC1saW5lLWhlaWdodFwiKS5ldmFsdWF0ZShzLHt9LG8pKlJoLHA9cnMobik/YTowLGY9Yy5nZXQoXCJ0ZXh0LWFuY2hvclwiKS5ldmFsdWF0ZShzLHt9LG8pLHg9Yy5nZXQoXCJ0ZXh0LXZhcmlhYmxlLWFuY2hvclwiKTtpZigheCl7Y29uc3QgdD1jLmdldChcInRleHQtcmFkaWFsLW9mZnNldFwiKS5ldmFsdWF0ZShzLHt9LG8pO3Y9dD94ZChmLFt0KlJoLG1kXSk6Yy5nZXQoXCJ0ZXh0LW9mZnNldFwiKS5ldmFsdWF0ZShzLHt9LG8pLm1hcCgodD0+dCpSaCkpO31sZXQgYj1kP1wiY2VudGVyXCI6Yy5nZXQoXCJ0ZXh0LWp1c3RpZnlcIikuZXZhbHVhdGUocyx7fSxvKTtjb25zdCB3PVwicG9pbnRcIj09PWMuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKSxfPXc/Yy5nZXQoXCJ0ZXh0LW1heC13aWR0aFwiKS5ldmFsdWF0ZShzLHt9LG8pKlJoOjEvMCxBPXM9Pnt0LmFsbG93VmVydGljYWxQbGFjZW1lbnQmJmVzKG4pJiYobS52ZXJ0aWNhbD1CcChnLGUscixpLGwsXyx1LGYscyxwLHYsSXAudmVydGljYWwsITAseSxoKSk7fTtpZighZCYmeCl7Y29uc3QgdD1cImF1dG9cIj09PWI/eC5tYXAoKHQ9PmJkKHQpKSk6W2JdO2xldCBuPSExO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGg7cysrKXtjb25zdCBhPXRbc107aWYoIW0uaG9yaXpvbnRhbFthXSlpZihuKW0uaG9yaXpvbnRhbFthXT1tLmhvcml6b250YWxbMF07ZWxzZSB7Y29uc3QgdD1CcChnLGUscixpLGwsXyx1LFwiY2VudGVyXCIsYSxwLHYsSXAuaG9yaXpvbnRhbCwhMSx5LGgpO3QmJihtLmhvcml6b250YWxbYV09dCxuPTE9PT10LnBvc2l0aW9uZWRMaW5lcy5sZW5ndGgpO319QShcImxlZnRcIik7fWVsc2Uge2lmKFwiYXV0b1wiPT09YiYmKGI9YmQoZikpLHd8fGMuZ2V0KFwidGV4dC13cml0aW5nLW1vZGVcIikuaW5kZXhPZihcImhvcml6b250YWxcIik+PTB8fCFlcyhuKSl7Y29uc3QgdD1CcChnLGUscixpLGwsXyx1LGYsYixwLHYsSXAuaG9yaXpvbnRhbCwhMSx5LGgpO3QmJihtLmhvcml6b250YWxbYl09dCk7fUEodz9cImxlZnRcIjpiKTt9fWxldCBiPSExO2lmKHMuaWNvbiYmcy5pY29uLm5hbWUpe2NvbnN0IGU9bltzLmljb24ubmFtZV07ZSYmKHg9JHAoaVtzLmljb24ubmFtZV0sYy5nZXQoXCJpY29uLW9mZnNldFwiKS5ldmFsdWF0ZShzLHt9LG8pLGMuZ2V0KFwiaWNvbi1hbmNob3JcIikuZXZhbHVhdGUocyx7fSxvKSksYj1lLnNkZix2b2lkIDA9PT10LnNkZkljb25zP3Quc2RmSWNvbnM9ZS5zZGY6dC5zZGZJY29ucyE9PWUuc2RmJiZOKFwiU3R5bGUgc2hlZXQgd2FybmluZzogQ2Fubm90IG1peCBTREYgYW5kIG5vbi1TREYgaWNvbnMgaW4gb25lIGJ1ZmZlclwiKSwoZS5waXhlbFJhdGlvIT09dC5waXhlbFJhdGlvfHwwIT09Yy5nZXQoXCJpY29uLXJvdGF0ZVwiKS5jb25zdGFudE9yKDEpKSYmKHQuaWNvbnNOZWVkTGluZWFyPSEwKSk7fWNvbnN0IHc9a2QobS5ob3Jpem9udGFsKXx8bS52ZXJ0aWNhbDt0Lmljb25zSW5UZXh0fHwodC5pY29uc0luVGV4dD0hIXcmJncuaWNvbnNJblRleHQpLCh3fHx4KSYmd2QodCxzLG0seCxuLHAseSwwLHYsYixhLG8sdSk7fXMmJnQuZ2VuZXJhdGVDb2xsaXNpb25EZWJ1Z0J1ZmZlcnMobCx0LmNvbGxpc2lvbkJveEFycmF5KTt9ZnVuY3Rpb24gYmQodCl7c3dpdGNoKHQpe2Nhc2VcInJpZ2h0XCI6Y2FzZVwidG9wLXJpZ2h0XCI6Y2FzZVwiYm90dG9tLXJpZ2h0XCI6cmV0dXJuIFwicmlnaHRcIjtjYXNlXCJsZWZ0XCI6Y2FzZVwidG9wLWxlZnRcIjpjYXNlXCJib3R0b20tbGVmdFwiOnJldHVybiBcImxlZnRcIn1yZXR1cm4gXCJjZW50ZXJcIn1mdW5jdGlvbiB3ZCh0LGUscixuLGkscyxhLG8sbCx1LGMsaCxwKXtsZXQgZD1zLnRleHRNYXhTaXplLmV2YWx1YXRlKGUse30saCk7dm9pZCAwPT09ZCYmKGQ9YSk7Y29uc3QgZj10LmxheWVyc1swXS5sYXlvdXQseT1mLmdldChcImljb24tb2Zmc2V0XCIpLmV2YWx1YXRlKGUse30saCksbT1rZChyLmhvcml6b250YWwpfHxyLnZlcnRpY2FsLGc9XCJnbG9iZVwiPT09cC5uYW1lLHg9Umgsdj1hL3gsYj10LnRpbGVQaXhlbFJhdGlvKmQveCxfPShCPXQub3ZlcnNjYWxpbmcsdC56b29tPjE4JiZCPjImJihCPj49MSksTWF0aC5tYXgoYW8vKDUxMipCKSwxKSpmLmdldChcInN5bWJvbC1zcGFjaW5nXCIpKSxBPWYuZ2V0KFwidGV4dC1wYWRkaW5nXCIpKnQudGlsZVBpeGVsUmF0aW8sUz1mLmdldChcImljb24tcGFkZGluZ1wiKSp0LnRpbGVQaXhlbFJhdGlvLGs9dyhmLmdldChcInRleHQtbWF4LWFuZ2xlXCIpKSxJPVwibWFwXCI9PT1mLmdldChcInRleHQtcm90YXRpb24tYWxpZ25tZW50XCIpJiZcInBvaW50XCIhPT1mLmdldChcInN5bWJvbC1wbGFjZW1lbnRcIiksTT1cIm1hcFwiPT09Zi5nZXQoXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiKSYmXCJwb2ludFwiIT09Zi5nZXQoXCJzeW1ib2wtcGxhY2VtZW50XCIpLFQ9Zi5nZXQoXCJzeW1ib2wtcGxhY2VtZW50XCIpLHo9Xy8yO3ZhciBCO2NvbnN0IEU9Zi5nZXQoXCJpY29uLXRleHQtZml0XCIpO2xldCBDO24mJlwibm9uZVwiIT09RSYmKHQuYWxsb3dWZXJ0aWNhbFBsYWNlbWVudCYmci52ZXJ0aWNhbCYmKEM9anAobixyLnZlcnRpY2FsLEUsZi5nZXQoXCJpY29uLXRleHQtZml0LXBhZGRpbmdcIikseSx2KSksbSYmKG49anAobixtLEUsZi5nZXQoXCJpY29uLXRleHQtZml0LXBhZGRpbmdcIikseSx2KSkpO2NvbnN0IFA9KGEsbyxkKT0+e2lmKG8ueDwwfHxvLng+PWFvfHxvLnk8MHx8by55Pj1hbylyZXR1cm47bGV0IGY9bnVsbDtpZihnKXtjb25zdHt4OnQseTplLHo6cn09cC5wcm9qZWN0VGlsZVBvaW50KG8ueCxvLnksZCk7Zj17YW5jaG9yOm5ldyBPcCh0LGUsciwwLHZvaWQgMCksdXA6cC51cFZlY3RvcihkLG8ueCxvLnkpfTt9IWZ1bmN0aW9uKHQsZSxyLG4saSxzLGEsbyxsLHUsYyxoLHAsZCxmLHksbSxnLHgsdixiLHcsXyxBLFMpe2NvbnN0IGs9dC5hZGRUb0xpbmVWZXJ0ZXhBcnJheShlLG4pO2xldCBJLE0sVCx6LEIsRSxDLFA9MCxEPTAsVj0wLEw9MCxGPS0xLFI9LTE7Y29uc3QgVT17fTtsZXQgJD1CYShcIlwiKTtjb25zdCBqPXI/ci5hbmNob3I6ZTtsZXQgTz0wLHE9MDtpZih2b2lkIDA9PT1sLl91bmV2YWx1YXRlZExheW91dC5nZXRWYWx1ZShcInRleHQtcmFkaWFsLW9mZnNldFwiKT9bTyxxXT1sLmxheW91dC5nZXQoXCJ0ZXh0LW9mZnNldFwiKS5ldmFsdWF0ZShiLHt9LFMpLm1hcCgodD0+dCpSaCkpOihPPWwubGF5b3V0LmdldChcInRleHQtcmFkaWFsLW9mZnNldFwiKS5ldmFsdWF0ZShiLHt9LFMpKlJoLHE9bWQpLHQuYWxsb3dWZXJ0aWNhbFBsYWNlbWVudCYmaS52ZXJ0aWNhbCl7Y29uc3QgdD1pLnZlcnRpY2FsO2lmKGYpRT1NZCh0KSxvJiYoQz1NZChvKSk7ZWxzZSB7Y29uc3Qgcj1sLmxheW91dC5nZXQoXCJ0ZXh0LXJvdGF0ZVwiKS5ldmFsdWF0ZShiLHt9LFMpKzkwO1Q9SWQodSxqLGUsYyxoLHAsdCxkLHIseSksbyYmKHo9SWQodSxqLGUsYyxoLHAsbyxnLHIpKTt9fWlmKHMpe2NvbnN0IG49bC5sYXlvdXQuZ2V0KFwiaWNvbi1yb3RhdGVcIikuZXZhbHVhdGUoYix7fSxTKSxpPVwibm9uZVwiIT09bC5sYXlvdXQuZ2V0KFwiaWNvbi10ZXh0LWZpdFwiKSxhPWlkKHMsbixfLGkpLGQ9bz9pZChvLG4sXyxpKTp2b2lkIDA7TT1JZCh1LGosZSxjLGgscCxzLGcsbiksUD00KmEubGVuZ3RoO2NvbnN0IGY9dC5pY29uU2l6ZURhdGE7bGV0IHk9bnVsbDtcInNvdXJjZVwiPT09Zi5raW5kPyh5PVtVaCpsLmxheW91dC5nZXQoXCJpY29uLXNpemVcIikuZXZhbHVhdGUoYix7fSxTKV0seVswXT5BZCYmTihgJHt0LmxheWVySWRzWzBdfTogVmFsdWUgZm9yIFwiaWNvbi1zaXplXCIgaXMgPj0gJHtfZH0uIFJlZHVjZSB5b3VyIFwiaWNvbi1zaXplXCIuYCkpOlwiY29tcG9zaXRlXCI9PT1mLmtpbmQmJih5PVtVaCp3LmNvbXBvc2l0ZUljb25TaXplc1swXS5ldmFsdWF0ZShiLHt9LFMpLFVoKncuY29tcG9zaXRlSWNvblNpemVzWzFdLmV2YWx1YXRlKGIse30sUyldLCh5WzBdPkFkfHx5WzFdPkFkKSYmTihgJHt0LmxheWVySWRzWzBdfTogVmFsdWUgZm9yIFwiaWNvbi1zaXplXCIgaXMgPj0gJHtfZH0uIFJlZHVjZSB5b3VyIFwiaWNvbi1zaXplXCIuYCkpLHQuYWRkU3ltYm9scyh0Lmljb24sYSx5LHYseCxiLCExLHIsZSxrLmxpbmVTdGFydEluZGV4LGsubGluZUxlbmd0aCwtMSxBLFMpLEY9dC5pY29uLnBsYWNlZFN5bWJvbEFycmF5Lmxlbmd0aC0xLGQmJihEPTQqZC5sZW5ndGgsdC5hZGRTeW1ib2xzKHQuaWNvbixkLHksdix4LGIsSXAudmVydGljYWwscixlLGsubGluZVN0YXJ0SW5kZXgsay5saW5lTGVuZ3RoLC0xLEEsUyksUj10Lmljb24ucGxhY2VkU3ltYm9sQXJyYXkubGVuZ3RoLTEpO31mb3IoY29uc3QgbiBpbiBpLmhvcml6b250YWwpe2NvbnN0IHM9aS5ob3Jpem9udGFsW25dO0l8fCgkPUJhKHMudGV4dCksZj9CPU1kKHMpOkk9SWQodSxqLGUsYyxoLHAscyxkLGwubGF5b3V0LmdldChcInRleHQtcm90YXRlXCIpLmV2YWx1YXRlKGIse30sUykseSkpO2NvbnN0IG89MT09PXMucG9zaXRpb25lZExpbmVzLmxlbmd0aDtpZihWKz1TZCh0LHIsZSxzLGEsbCxmLGIseSxrLGkudmVydGljYWw/SXAuaG9yaXpvbnRhbDpJcC5ob3Jpem9udGFsT25seSxvP09iamVjdC5rZXlzKGkuaG9yaXpvbnRhbCk6W25dLFUsRix3LEEsUyksbylicmVha31pLnZlcnRpY2FsJiYoTCs9U2QodCxyLGUsaS52ZXJ0aWNhbCxhLGwsZixiLHksayxJcC52ZXJ0aWNhbCxbXCJ2ZXJ0aWNhbFwiXSxVLFIsdyxBLFMpKTtsZXQgRz0tMTtjb25zdCBaPSh0LGUpPT50P01hdGgubWF4KHQsZSk6ZTtHPVooQixHKSxHPVooRSxHKSxHPVooQyxHKTtjb25zdCBLPUc+LTE/MTowO3QuZ2x5cGhPZmZzZXRBcnJheS5sZW5ndGg+PW9mLk1BWF9HTFlQSFMmJk4oXCJUb28gbWFueSBnbHlwaHMgYmVpbmcgcmVuZGVyZWQgaW4gYSB0aWxlLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvaXNzdWVzLzI5MDdcIiksdm9pZCAwIT09Yi5zb3J0S2V5JiZ0LmFkZFRvU29ydEtleVJhbmdlcyh0LnN5bWJvbEluc3RhbmNlcy5sZW5ndGgsYi5zb3J0S2V5KSx0LnN5bWJvbEluc3RhbmNlcy5lbXBsYWNlQmFjayhqLngsai55LGoueixlLngsZS55LFUucmlnaHQ+PTA/VS5yaWdodDotMSxVLmNlbnRlcj49MD9VLmNlbnRlcjotMSxVLmxlZnQ+PTA/VS5sZWZ0Oi0xLFUudmVydGljYWw+PTA/VS52ZXJ0aWNhbDotMSxGLFIsJCx2b2lkIDAhPT1JP0k6dC5jb2xsaXNpb25Cb3hBcnJheS5sZW5ndGgsdm9pZCAwIT09ST9JKzE6dC5jb2xsaXNpb25Cb3hBcnJheS5sZW5ndGgsdm9pZCAwIT09VD9UOnQuY29sbGlzaW9uQm94QXJyYXkubGVuZ3RoLHZvaWQgMCE9PVQ/VCsxOnQuY29sbGlzaW9uQm94QXJyYXkubGVuZ3RoLHZvaWQgMCE9PU0/TTp0LmNvbGxpc2lvbkJveEFycmF5Lmxlbmd0aCx2b2lkIDAhPT1NP00rMTp0LmNvbGxpc2lvbkJveEFycmF5Lmxlbmd0aCx6fHx0LmNvbGxpc2lvbkJveEFycmF5Lmxlbmd0aCx6P3orMTp0LmNvbGxpc2lvbkJveEFycmF5Lmxlbmd0aCxjLFYsTCxQLEQsSywwLE8scSxHKTt9KHQsbyxmLGEscixuLGksQyx0LmxheWVyc1swXSx0LmNvbGxpc2lvbkJveEFycmF5LGUuaW5kZXgsZS5zb3VyY2VMYXllckluZGV4LHQuaW5kZXgsQSxJLGwsMCxTLE0seSxlLHMsdSxjLGgpO307aWYoXCJsaW5lXCI9PT1UKWZvcihjb25zdCBpIG9mIEhwKGUuZ2VvbWV0cnksMCwwLGFvLGFvKSl7Y29uc3QgZT1YcChpLF8sayxyLnZlcnRpY2FsfHxtLG4seCxiLHQub3ZlcnNjYWxpbmcsYW8pO2Zvcihjb25zdCByIG9mIGUpbSYmVGQodCxtLnRleHQseixyKXx8UChpLHIsaCk7fWVsc2UgaWYoXCJsaW5lLWNlbnRlclwiPT09VCl7Zm9yKGNvbnN0IHQgb2YgZS5nZW9tZXRyeSlpZih0Lmxlbmd0aD4xKXtjb25zdCBlPUtwKHQsayxyLnZlcnRpY2FsfHxtLG4seCxiKTtlJiZQKHQsZSxoKTt9fWVsc2UgaWYoXCJQb2x5Z29uXCI9PT1lLnR5cGUpZm9yKGNvbnN0IHQgb2YgQWMoZS5nZW9tZXRyeSwwKSl7Y29uc3QgZT1wZCh0LDE2KTtQKHRbMF0sbmV3IE9wKGUueCxlLnksMCwwLHZvaWQgMCksaCk7fWVsc2UgaWYoXCJMaW5lU3RyaW5nXCI9PT1lLnR5cGUpZm9yKGNvbnN0IHQgb2YgZS5nZW9tZXRyeSlQKHQsbmV3IE9wKHRbMF0ueCx0WzBdLnksMCwwLHZvaWQgMCksaCk7ZWxzZSBpZihcIlBvaW50XCI9PT1lLnR5cGUpZm9yKGNvbnN0IHQgb2YgZS5nZW9tZXRyeSlmb3IoY29uc3QgZSBvZiB0KVAoW2VdLG5ldyBPcChlLngsZS55LDAsMCx2b2lkIDApLGgpO31jb25zdCBfZD0yNTUsQWQ9X2QqVWg7ZnVuY3Rpb24gU2QodCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCxkLGYseSxtKXtjb25zdCBnPWZ1bmN0aW9uKHQsZSxyLG4saSxzLGEsbyl7Y29uc3QgbD1bXTtpZigwPT09ZS5wb3NpdGlvbmVkTGluZXMubGVuZ3RoKXJldHVybiBsO2NvbnN0IHU9bi5sYXlvdXQuZ2V0KFwidGV4dC1yb3RhdGVcIikuZXZhbHVhdGUocyx7fSkqTWF0aC5QSS8xODAsYz1mdW5jdGlvbih0KXtjb25zdCBlPXRbMF0scj10WzFdLG49ZSpyO3JldHVybiBuPjA/W2UsLXJdOm48MD9bLWUscl06MD09PWU/W3IsZV06W3IsLWVdfShyKTtsZXQgaD1NYXRoLmFicyhlLnRvcC1lLmJvdHRvbSk7Zm9yKGNvbnN0IHQgb2YgZS5wb3NpdGlvbmVkTGluZXMpaC09dC5saW5lT2Zmc2V0O2NvbnN0IHA9ZS5wb3NpdGlvbmVkTGluZXMubGVuZ3RoLGQ9aC9wO2xldCBmPWUudG9wLXJbMV07Zm9yKGxldCB0PTA7dDxwOysrdCl7Y29uc3Qgbj1lLnBvc2l0aW9uZWRMaW5lc1t0XTtmPXVkKGUsZCxmLHQpO2Zvcihjb25zdCB0IG9mIG4ucG9zaXRpb25lZEdseXBocyl7aWYoIXQucmVjdCljb250aW51ZTtjb25zdCBuPXQucmVjdHx8e307bGV0IHM9d3ArMSxoPSEwLHA9MSxkPTA7aWYodC5pbWFnZU5hbWUpe2NvbnN0IGU9YVt0LmltYWdlTmFtZV07aWYoIWUpY29udGludWU7aWYoZS5zZGYpe04oXCJTREYgaW1hZ2VzIGFyZSBub3Qgc3VwcG9ydGVkIGluIGZvcm1hdHRlZCB0ZXh0IGFuZCB3aWxsIGJlIGlnbm9yZWQuXCIpO2NvbnRpbnVlfWg9ITEscD1lLnBpeGVsUmF0aW8scz1BcC9wO31jb25zdCB5PShpfHxvKSYmdC52ZXJ0aWNhbCxtPXQubWV0cmljcy5hZHZhbmNlKnQuc2NhbGUvMixnPXQubWV0cmljcyx2PXQucmVjdDtpZihudWxsPT09diljb250aW51ZTtvJiZlLnZlcnRpY2FsaXphYmxlJiYoZD10LmltYWdlTmFtZT9tLXQubWV0cmljcy53aWR0aCp0LnNjYWxlLzI6MCk7Y29uc3QgYj1pP1t0LngrbSx0LnldOlswLDBdO2xldCB3PVswLDBdLF89WzAsMF0sQT0hMTtpfHwoeT8oXz1bdC54K20rY1swXSx0LnkrY1sxXS1kXSxBPSEwKTp3PVt0LngrbStyWzBdLHQueStyWzFdLWRdKTtjb25zdCBTPXYudyp0LnNjYWxlLyhwKih0LmxvY2FsR2x5cGg/dGQ6MSkpLGs9di5oKnQuc2NhbGUvKHAqKHQubG9jYWxHbHlwaD90ZDoxKSk7bGV0IEksTSxULHo7aWYoeSl7Y29uc3QgZT10LnktZixyPW5ldyB4KC1tLG0tZSksbj0tTWF0aC5QSS8yLGk9bmV3IHgoLi4uXyk7ST1uZXcgeCgtbSt3WzBdLHdbMV0pLEkuX3JvdGF0ZUFyb3VuZChuLHIpLl9hZGQoaSksSS54Kz0tZSttLEkueS09KGcubGVmdC1zKSp0LnNjYWxlO2NvbnN0IGE9dC5pbWFnZU5hbWU/Zy5hZHZhbmNlKnQuc2NhbGU6UmgqdC5zY2FsZSxvPVN0cmluZy5mcm9tQ2hhckNvZGUodC5nbHlwaCk7Wmgobyk/SS54Kz0oMS1zKSp0LnNjYWxlOktoKG8pP0kueCs9YS1nLmhlaWdodCp0LnNjYWxlKygtcy0xKSp0LnNjYWxlOkkueCs9dC5pbWFnZU5hbWV8fGcud2lkdGgrMipzPT09di53JiZnLmhlaWdodCsyKnM9PT12Lmg/KGEtaykvMjooYS0oZy5oZWlnaHQrMipzKSp0LnNjYWxlKS8yLE09bmV3IHgoSS54LEkueS1TKSxUPW5ldyB4KEkueCtrLEkueSksej1uZXcgeChJLngrayxJLnktUyk7fWVsc2Uge2NvbnN0IGU9KGcubGVmdC1zKSp0LnNjYWxlLW0rd1swXSxyPSgtZy50b3AtcykqdC5zY2FsZSt3WzFdLG49ZStTLGk9citrO0k9bmV3IHgoZSxyKSxNPW5ldyB4KG4sciksVD1uZXcgeChlLGkpLHo9bmV3IHgobixpKTt9aWYodSl7bGV0IHQ7dD1pP25ldyB4KDAsMCk6QT9uZXcgeChjWzBdLGNbMV0pOm5ldyB4KHJbMF0sclsxXSksSS5fcm90YXRlQXJvdW5kKHUsdCksTS5fcm90YXRlQXJvdW5kKHUsdCksVC5fcm90YXRlQXJvdW5kKHUsdCksei5fcm90YXRlQXJvdW5kKHUsdCk7fWNvbnN0IEI9bmV3IHgoMCwwKSxFPW5ldyB4KDAsMCk7bC5wdXNoKHt0bDpJLHRyOk0sYmw6VCxicjp6LHRleDpuLHdyaXRpbmdNb2RlOmUud3JpdGluZ01vZGUsZ2x5cGhPZmZzZXQ6YixzZWN0aW9uSW5kZXg6dC5zZWN0aW9uSW5kZXgsaXNTREY6aCxwaXhlbE9mZnNldFRMOkIscGl4ZWxPZmZzZXRCUjpFLG1pbkZvbnRTY2FsZVg6MCxtaW5Gb250U2NhbGVZOjB9KTt9fXJldHVybiBsfSgwLG4sbCxzLGEsbyxpLHQuYWxsb3dWZXJ0aWNhbFBsYWNlbWVudCksdj10LnRleHRTaXplRGF0YTtsZXQgYj1udWxsO1wic291cmNlXCI9PT12LmtpbmQ/KGI9W1VoKnMubGF5b3V0LmdldChcInRleHQtc2l6ZVwiKS5ldmFsdWF0ZShvLHt9LG0pXSxiWzBdPkFkJiZOKGAke3QubGF5ZXJJZHNbMF19OiBWYWx1ZSBmb3IgXCJ0ZXh0LXNpemVcIiBpcyA+PSAke19kfS4gUmVkdWNlIHlvdXIgXCJ0ZXh0LXNpemVcIi5gKSk6XCJjb21wb3NpdGVcIj09PXYua2luZCYmKGI9W1VoKmYuY29tcG9zaXRlVGV4dFNpemVzWzBdLmV2YWx1YXRlKG8se30sbSksVWgqZi5jb21wb3NpdGVUZXh0U2l6ZXNbMV0uZXZhbHVhdGUobyx7fSxtKV0sKGJbMF0+QWR8fGJbMV0+QWQpJiZOKGAke3QubGF5ZXJJZHNbMF19OiBWYWx1ZSBmb3IgXCJ0ZXh0LXNpemVcIiBpcyA+PSAke19kfS4gUmVkdWNlIHlvdXIgXCJ0ZXh0LXNpemVcIi5gKSksdC5hZGRTeW1ib2xzKHQudGV4dCxnLGIsbCxhLG8sYyxlLHIsdS5saW5lU3RhcnRJbmRleCx1LmxpbmVMZW5ndGgsZCx5LG0pO2Zvcihjb25zdCBlIG9mIGgpcFtlXT10LnRleHQucGxhY2VkU3ltYm9sQXJyYXkubGVuZ3RoLTE7cmV0dXJuIDQqZy5sZW5ndGh9ZnVuY3Rpb24ga2QodCl7Zm9yKGNvbnN0IGUgaW4gdClyZXR1cm4gdFtlXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBJZCh0LGUscixuLGkscyxhLG8sbCx1KXtsZXQgYz1hLnRvcCxoPWEuYm90dG9tLHA9YS5sZWZ0LGQ9YS5yaWdodDtjb25zdCBmPWEuY29sbGlzaW9uUGFkZGluZztpZihmJiYocC09ZlswXSxjLT1mWzFdLGQrPWZbMl0saCs9ZlszXSksbCl7Y29uc3QgdD1uZXcgeChwLGMpLGU9bmV3IHgoZCxjKSxyPW5ldyB4KHAsaCksbj1uZXcgeChkLGgpLGk9dyhsKTtsZXQgcz1uZXcgeCgwLDApO3UmJihzPW5ldyB4KHVbMF0sdVsxXSkpLHQuX3JvdGF0ZUFyb3VuZChpLHMpLGUuX3JvdGF0ZUFyb3VuZChpLHMpLHIuX3JvdGF0ZUFyb3VuZChpLHMpLG4uX3JvdGF0ZUFyb3VuZChpLHMpLHA9TWF0aC5taW4odC54LGUueCxyLngsbi54KSxkPU1hdGgubWF4KHQueCxlLngsci54LG4ueCksYz1NYXRoLm1pbih0LnksZS55LHIueSxuLnkpLGg9TWF0aC5tYXgodC55LGUueSxyLnksbi55KTt9cmV0dXJuIHQuZW1wbGFjZUJhY2soZS54LGUueSxlLnosci54LHIueSxwLGMsZCxoLG8sbixpLHMpLHQubGVuZ3RoLTF9ZnVuY3Rpb24gTWQodCl7dC5jb2xsaXNpb25QYWRkaW5nJiYodC50b3AtPXQuY29sbGlzaW9uUGFkZGluZ1sxXSx0LmJvdHRvbSs9dC5jb2xsaXNpb25QYWRkaW5nWzNdKTtjb25zdCBlPXQuYm90dG9tLXQudG9wO3JldHVybiBlPjA/TWF0aC5tYXgoMTAsZSk6bnVsbH1mdW5jdGlvbiBUZCh0LGUscixuKXtjb25zdCBpPXQuY29tcGFyZVRleHQ7aWYoZSBpbiBpKXtjb25zdCB0PWlbZV07Zm9yKGxldCBlPXQubGVuZ3RoLTE7ZT49MDtlLS0paWYobi5kaXN0KHRbZV0pPHIpcmV0dXJuICEwfWVsc2UgaVtlXT1bXTtyZXR1cm4gaVtlXS5wdXNoKG4pLCExfWZ1bmN0aW9uIHpkKHQsZSl7Y29uc3Qgcj10LmZvdkFib3ZlQ2VudGVyLG49dC5lbGV2YXRpb24/dC5lbGV2YXRpb24uZ2V0TWluRWxldmF0aW9uQmVsb3dNU0woKSplOjAsaT0odC5fY2FtZXJhLnBvc2l0aW9uWzJdKnQud29ybGRTaXplLW4pL01hdGguY29zKHQuX3BpdGNoKSxzPU1hdGguc2luKHIpKmkvTWF0aC5zaW4oTWF0aC5tYXgoTWF0aC5QSS8yLXQuX3BpdGNoLXIsLjAxKSksYT1NYXRoLnNpbih0Ll9waXRjaCkqcytpO3JldHVybiBNYXRoLm1pbigxLjAxKmEsaSooMS90Ll9ob3Jpem9uU2hpZnQpKX1mdW5jdGlvbiBCZCh0LGUpe2lmKCFlLmlzUmVwcm9qZWN0ZWRJblRpbGVTcGFjZSlyZXR1cm4ge3NjYWxlOjE8PHQueix4OnQueCx5OnQueSx4Mjp0LngrMSx5Mjp0LnkrMSxwcm9qZWN0aW9uOmV9O2NvbnN0IHI9TWF0aC5wb3coMiwtdC56KSxuPXQueCpyLGk9KHQueCsxKSpyLHM9dC55KnIsYT0odC55KzEpKnIsbz1LbChuKSxsPUtsKGkpLHU9WGwocyksYz1YbChhKSxoPWUucHJvamVjdChvLHUpLHA9ZS5wcm9qZWN0KGwsdSksZD1lLnByb2plY3QobCxjKSxmPWUucHJvamVjdChvLGMpO2xldCB5PU1hdGgubWluKGgueCxwLngsZC54LGYueCksbT1NYXRoLm1pbihoLnkscC55LGQueSxmLnkpLGc9TWF0aC5tYXgoaC54LHAueCxkLngsZi54KSx4PU1hdGgubWF4KGgueSxwLnksZC55LGYueSk7Y29uc3Qgdj1yLzE2O2Z1bmN0aW9uIGIodCxyLG4saSxzLGEpe2NvbnN0IG89KG4rcykvMixsPShpK2EpLzIsdT1lLnByb2plY3QoS2wobyksWGwobCkpLGM9TWF0aC5tYXgoMCx5LXUueCxtLXUueSx1LngtZyx1LnkteCk7eT1NYXRoLm1pbih5LHUueCksZz1NYXRoLm1heChnLHUueCksbT1NYXRoLm1pbihtLHUueSkseD1NYXRoLm1heCh4LHUueSksYz52JiYoYih0LHUsbixpLG8sbCksYih1LHIsbyxsLHMsYSkpO31iKGgscCxuLHMsaSxzKSxiKHAsZCxpLHMsaSxhKSxiKGQsZixpLGEsbixhKSxiKGYsaCxuLGEsbixzKSx5LT12LG0tPXYsZys9dix4Kz12O2NvbnN0IHc9MS9NYXRoLm1heChnLXkseC1tKTtyZXR1cm4ge3NjYWxlOncseDp5KncseTptKncseDI6Zyp3LHkyOngqdyxwcm9qZWN0aW9uOmV9fWNvbnN0IEVkPXBvKG5ldyBGbG9hdDMyQXJyYXkoMTYpKTtjbGFzcyBDZHtjb25zdHJ1Y3Rvcih0KXt0aGlzLnNwZWM9dCx0aGlzLm5hbWU9dC5uYW1lLHRoaXMud3JhcD0hMSx0aGlzLnJlcXVpcmVzRHJhcGluZz0hMSx0aGlzLnN1cHBvcnRzV29ybGRDb3BpZXM9ITEsdGhpcy5zdXBwb3J0c1RlcnJhaW49ITEsdGhpcy5zdXBwb3J0c0ZvZz0hMSx0aGlzLnN1cHBvcnRzRnJlZUNhbWVyYT0hMSx0aGlzLnpBeGlzVW5pdD1cIm1ldGVyc1wiLHRoaXMuaXNSZXByb2plY3RlZEluVGlsZVNwYWNlPSEwLHRoaXMudW5zdXBwb3J0ZWRMYXllcnM9W1wiY3VzdG9tXCJdLHRoaXMuY2VudGVyPVswLDBdLHRoaXMucmFuZ2U9WzMuNSw3XTt9cHJvamVjdCh0LGUpe3JldHVybiB7eDowLHk6MCx6OjB9fXVucHJvamVjdCh0LGUpe3JldHVybiBuZXcgT2woMCwwKX1wcm9qZWN0VGlsZVBvaW50KHQsZSxyKXtyZXR1cm4ge3g6dCx5OmUsejowfX1sb2NhdGlvblBvaW50KHQsZSxyPSEwKXtyZXR1cm4gdC5fY29vcmRpbmF0ZVBvaW50KHQubG9jYXRpb25Db29yZGluYXRlKGUpLHIpfXBpeGVsc1Blck1ldGVyKHQsZSl7cmV0dXJuIFpsKDEsdCkqZX1waXhlbFNwYWNlQ29udmVyc2lvbih0LGUscil7cmV0dXJuIDF9ZmFydGhlc3RQaXhlbERpc3RhbmNlKHQpe3JldHVybiB6ZCh0LHQucGl4ZWxzUGVyTWV0ZXIpfXBvaW50Q29vcmRpbmF0ZSh0LGUscixuKXtjb25zdCBpPXQuaG9yaXpvbkxpbmVGcm9tVG9wKCExKSxzPW5ldyB4KGUsTWF0aC5tYXgoaSxyKSk7cmV0dXJuIHQucmF5SW50ZXJzZWN0aW9uQ29vcmRpbmF0ZSh0LnBvaW50UmF5SW50ZXJzZWN0aW9uKHMsbikpfXBvaW50Q29vcmRpbmF0ZTNEKHQsZSxyKXtjb25zdCBuPW5ldyB4KGUscik7aWYodC5lbGV2YXRpb24pcmV0dXJuIHQuZWxldmF0aW9uLnBvaW50Q29vcmRpbmF0ZShuKTt7Y29uc3QgZT10aGlzLnBvaW50Q29vcmRpbmF0ZSh0LG4ueCxuLnksMCk7cmV0dXJuIFtlLngsZS55LGUuel19fWlzUG9pbnRBYm92ZUhvcml6b24odCxlKXtpZih0LmVsZXZhdGlvbilyZXR1cm4gIXRoaXMucG9pbnRDb29yZGluYXRlM0QodCxlLngsZS55KTtjb25zdCByPXQuaG9yaXpvbkxpbmVGcm9tVG9wKCk7cmV0dXJuIGUueTxyfWNyZWF0ZUludmVyc2lvbk1hdHJpeCh0LGUpe3JldHVybiBFZH1jcmVhdGVUaWxlTWF0cml4KHQsZSxyKXtsZXQgbixpLHM7Y29uc3QgYT1yLmNhbm9uaWNhbCxvPXBvKG5ldyBGbG9hdDY0QXJyYXkoMTYpKTtpZih0aGlzLmlzUmVwcm9qZWN0ZWRJblRpbGVTcGFjZSl7Y29uc3QgbD1CZChhLHRoaXMpO249MSxpPWwueCtyLndyYXAqbC5zY2FsZSxzPWwueSxnbyhvLG8sW24vbC5zY2FsZSxuL2wuc2NhbGUsdC5waXhlbHNQZXJNZXRlci9lXSk7fWVsc2Ugbj1lL3Quem9vbVNjYWxlKGEueiksaT0oYS54K01hdGgucG93KDIsYS56KSpyLndyYXApKm4scz1hLnkqbjtyZXR1cm4gbW8obyxvLFtpLHMsMF0pLGdvKG8sbyxbbi9hbyxuL2FvLDFdKSxvfXVwVmVjdG9yKHQsZSxyKXtyZXR1cm4gWzAsMCwxXX11cFZlY3RvclNjYWxlKHQsZSxyKXtyZXR1cm4ge21ldGVyc1RvVGlsZToxfX19Y2xhc3MgUGQgZXh0ZW5kcyBDZHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLnJhbmdlPVs0LDddLHRoaXMuY2VudGVyPXQuY2VudGVyfHxbLTk2LDM3LjVdO2NvbnN0W2Uscl09dGhpcy5wYXJhbGxlbHM9dC5wYXJhbGxlbHN8fFsyOS41LDQ1LjVdLG49TWF0aC5zaW4odyhlKSk7dGhpcy5uPShuK01hdGguc2luKHcocikpKS8yLHRoaXMuYz0xK24qKDIqdGhpcy5uLW4pLHRoaXMucjA9TWF0aC5zcXJ0KHRoaXMuYykvdGhpcy5uO31wcm9qZWN0KHQsZSl7Y29uc3R7bjpyLGM6bixyMDppfT10aGlzLHM9dyh0LXRoaXMuY2VudGVyWzBdKSxhPXcoZSksbz1NYXRoLnNxcnQobi0yKnIqTWF0aC5zaW4oYSkpL3I7cmV0dXJuIHt4Om8qTWF0aC5zaW4ocypyKSx5Om8qTWF0aC5jb3MocypyKS1pLHo6MH19dW5wcm9qZWN0KHQsZSl7Y29uc3R7bjpyLGM6bixyMDppfT10aGlzLHM9aStlO2xldCBhPU1hdGguYXRhbjIodCxNYXRoLmFicyhzKSkqTWF0aC5zaWduKHMpO3MqcjwwJiYoYS09TWF0aC5QSSpNYXRoLnNpZ24odCkqTWF0aC5zaWduKHMpKTtjb25zdCBvPXcodGhpcy5jZW50ZXJbMF0pKnI7YT16KGEsLU1hdGguUEktbyxNYXRoLlBJLW8pO2NvbnN0IGw9TShfKGEvcikrdGhpcy5jZW50ZXJbMF0sLTE4MCwxODApLHU9TWF0aC5hc2luKE0oKG4tKHQqdCtzKnMpKnIqcikvKDIqciksLTEsMSkpLGM9TShfKHUpLC1IbCxIbCk7cmV0dXJuIG5ldyBPbChsLGMpfX1jb25zdCBEZD0xLjM0MDI2NCxWZD0tLjA4MTEwNixMZD04OTNlLTYsRmQ9LjAwMzc5NixSZD1NYXRoLnNxcnQoMykvMjtjbGFzcyBVZCBleHRlbmRzIENke3Byb2plY3QodCxlKXtlPWUvMTgwKk1hdGguUEksdD10LzE4MCpNYXRoLlBJO2NvbnN0IHI9TWF0aC5hc2luKFJkKk1hdGguc2luKGUpKSxuPXIqcixpPW4qbipuO3JldHVybiB7eDouNSoodCpNYXRoLmNvcyhyKS8oUmQqKERkKzMqVmQqbitpKig3KkxkKzkqRmQqbikpKS9NYXRoLlBJKy41KSx5OjEtLjUqKHIqKERkK1ZkKm4raSooTGQrRmQqbikpL01hdGguUEkrMSksejowfX11bnByb2plY3QodCxlKXt0PSgyKnQtLjUpKk1hdGguUEk7bGV0IHI9ZT0oMiooMS1lKS0xKSpNYXRoLlBJLG49cipyLGk9bipuKm47Zm9yKGxldCB0LHMsYSxvPTA7bzwxMiYmKHM9ciooRGQrVmQqbitpKihMZCtGZCpuKSktZSxhPURkKzMqVmQqbitpKig3KkxkKzkqRmQqbiksdD1zL2Escj1NKHItdCwtTWF0aC5QSS8zLE1hdGguUEkvMyksbj1yKnIsaT1uKm4qbiwhKE1hdGguYWJzKHQpPDFlLTEyKSk7KytvKTtjb25zdCBzPVJkKnQqKERkKzMqVmQqbitpKig3KkxkKzkqRmQqbikpL01hdGguY29zKHIpLGE9TWF0aC5hc2luKE1hdGguc2luKHIpL1JkKSxvPU0oMTgwKnMvTWF0aC5QSSwtMTgwLDE4MCksbD1NKDE4MCphL01hdGguUEksLUhsLEhsKTtyZXR1cm4gbmV3IE9sKG8sbCl9fWNsYXNzICRkIGV4dGVuZHMgQ2R7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy53cmFwPSEwLHRoaXMuc3VwcG9ydHNXb3JsZENvcGllcz0hMDt9cHJvamVjdCh0LGUpe3JldHVybiB7eDouNSt0LzM2MCx5Oi41LWUvMzYwLHo6MH19dW5wcm9qZWN0KHQsZSl7Y29uc3Qgcj0zNjAqKHQtLjUpLG49TSgzNjAqKC41LWUpLC1IbCxIbCk7cmV0dXJuIG5ldyBPbChyLG4pfX1jb25zdCBqZD1NYXRoLlBJLzI7ZnVuY3Rpb24gT2QodCl7cmV0dXJuIE1hdGgudGFuKChqZCt0KS8yKX1jbGFzcyBxZCBleHRlbmRzIENke2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuY2VudGVyPXQuY2VudGVyfHxbMCwzMF07Y29uc3RbZSxyXT10aGlzLnBhcmFsbGVscz10LnBhcmFsbGVsc3x8WzMwLDMwXTtsZXQgbj13KGUpLGk9dyhyKTt0aGlzLnNvdXRoZXJuQ2VudGVyPW4raTwwLHRoaXMuc291dGhlcm5DZW50ZXImJihuPS1uLGk9LWkpO2NvbnN0IHM9TWF0aC5jb3MobiksYT1PZChuKTt0aGlzLm49bj09PWk/TWF0aC5zaW4obik6TWF0aC5sb2cocy9NYXRoLmNvcyhpKSkvTWF0aC5sb2coT2QoaSkvYSksdGhpcy5mPXMqTWF0aC5wb3coT2QobiksdGhpcy5uKS90aGlzLm47fXByb2plY3QodCxlKXtlPXcoZSksdGhpcy5zb3V0aGVybkNlbnRlciYmKGU9LWUpLHQ9dyh0LXRoaXMuY2VudGVyWzBdKTtjb25zdCByPTFlLTYse246bixmOml9PXRoaXM7aT4wP2U8LWpkK3ImJihlPS1qZCtyKTplPmpkLXImJihlPWpkLXIpO2NvbnN0IHM9aS9NYXRoLnBvdyhPZChlKSxuKTtsZXQgYT1zKk1hdGguc2luKG4qdCksbz1pLXMqTWF0aC5jb3Mobip0KTtyZXR1cm4gYT0uNSooYS9NYXRoLlBJKy41KSxvPS41KihvL01hdGguUEkrLjUpLHt4OmEseTp0aGlzLnNvdXRoZXJuQ2VudGVyP286MS1vLHo6MH19dW5wcm9qZWN0KHQsZSl7dD0oMip0LS41KSpNYXRoLlBJLHRoaXMuc291dGhlcm5DZW50ZXImJihlPTEtZSksZT0oMiooMS1lKS0uNSkqTWF0aC5QSTtjb25zdHtuOnIsZjpufT10aGlzLGk9bi1lLHM9TWF0aC5zaWduKGkpLGE9TWF0aC5zaWduKHIpKk1hdGguc3FydCh0KnQraSppKTtsZXQgbz1NYXRoLmF0YW4yKHQsTWF0aC5hYnMoaSkpKnM7aSpyPDAmJihvLT1NYXRoLlBJKk1hdGguc2lnbih0KSpzKTtjb25zdCBsPU0oXyhvL3IpK3RoaXMuY2VudGVyWzBdLC0xODAsMTgwKSx1PU0oXygyKk1hdGguYXRhbihNYXRoLnBvdyhuL2EsMS9yKSktamQpLC1IbCxIbCk7cmV0dXJuIG5ldyBPbChsLHRoaXMuc291dGhlcm5DZW50ZXI/LXU6dSl9fWNsYXNzIE5kIGV4dGVuZHMgQ2R7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy53cmFwPSEwLHRoaXMuc3VwcG9ydHNXb3JsZENvcGllcz0hMCx0aGlzLnN1cHBvcnRzVGVycmFpbj0hMCx0aGlzLnN1cHBvcnRzRm9nPSEwLHRoaXMuc3VwcG9ydHNGcmVlQ2FtZXJhPSEwLHRoaXMuaXNSZXByb2plY3RlZEluVGlsZVNwYWNlPSExLHRoaXMudW5zdXBwb3J0ZWRMYXllcnM9W10sdGhpcy5yYW5nZT1udWxsO31wcm9qZWN0KHQsZSl7cmV0dXJuIHt4Ok5sKHQpLHk6R2woZSksejowfX11bnByb2plY3QodCxlKXtjb25zdCByPUtsKHQpLG49WGwoZSk7cmV0dXJuIG5ldyBPbChyLG4pfX1jb25zdCBHZD13KEhsKTtjbGFzcyBaZCBleHRlbmRzIENke3Byb2plY3QodCxlKXtjb25zdCByPShlPXcoZSkpKmUsbj1yKnI7cmV0dXJuIHt4Oi41KigodD13KHQpKSooLjg3MDctLjEzMTk3OSpyK24qKG4qKC4wMDM5NzEqci0uMDAxNTI5Km4pLS4wMTM3OTEpKS9NYXRoLlBJKy41KSx5OjEtLjUqKGUqKDEuMDA3MjI2K3IqKC4wMTUwODUrbiooLjAyODg3NCpyLS4wNDQ0NzUtLjAwNTkxNipuKSkpL01hdGguUEkrMSksejowfX11bnByb2plY3QodCxlKXt0PSgyKnQtLjUpKk1hdGguUEk7bGV0IHI9ZT0oMiooMS1lKS0xKSpNYXRoLlBJLG49MjUsaT0wLHM9cipyO2Rve3M9cipyO2NvbnN0IHQ9cypzO2k9KHIqKDEuMDA3MjI2K3MqKC4wMTUwODUrdCooLjAyODg3NCpzLS4wNDQ0NzUtLjAwNTkxNip0KSkpLWUpLygxLjAwNzIyNitzKiguMDQ1MjU1K3QqKC4yNTk4NjYqcy0uMzExMzI1LS4wMDU5MTYqMTEqdCkpKSxyPU0oci1pLC1HZCxHZCk7fXdoaWxlKE1hdGguYWJzKGkpPjFlLTYmJi0tbj4wKTtzPXIqcjtjb25zdCBhPU0oXyh0LyguODcwNytzKihzKihzKnMqcyooLjAwMzk3MS0uMDAxNTI5KnMpLS4wMTM3OTEpLS4xMzE5NzkpKSksLTE4MCwxODApLG89XyhyKTtyZXR1cm4gbmV3IE9sKGEsbyl9fWNvbnN0IEtkPXcoSGwpO2NsYXNzIFhkIGV4dGVuZHMgQ2R7cHJvamVjdCh0LGUpe2U9dyhlKSx0PXcodCk7Y29uc3Qgcj1NYXRoLmNvcyhlKSxuPTIvTWF0aC5QSSxpPU1hdGguYWNvcyhyKk1hdGguY29zKHQvMikpLHM9TWF0aC5zaW4oaSkvaSxhPS41Kih0Km4rMipyKk1hdGguc2luKHQvMikvcyl8fDAsbz0uNSooZStNYXRoLnNpbihlKS9zKXx8MDtyZXR1cm4ge3g6LjUqKGEvTWF0aC5QSSsuNSkseToxLS41KihvL01hdGguUEkrMSksejowfX11bnByb2plY3QodCxlKXtsZXQgcj10PSgyKnQtLjUpKk1hdGguUEksbj1lPSgyKigxLWUpLTEpKk1hdGguUEksaT0yNTtjb25zdCBzPTFlLTY7bGV0IGE9MCxvPTA7ZG97Y29uc3QgaT1NYXRoLmNvcyhuKSxzPU1hdGguc2luKG4pLGw9MipzKmksdT1zKnMsYz1pKmksaD1NYXRoLmNvcyhyLzIpLHA9TWF0aC5zaW4oci8yKSxkPTIqaCpwLGY9cCpwLHk9MS1jKmgqaCxtPXk/MS95OjAsZz15P01hdGguYWNvcyhpKmgpKk1hdGguc3FydCgxL3kpOjAseD0uNSooMipnKmkqcCsyKnIvTWF0aC5QSSktdCx2PS41KihnKnMrbiktZSxiPS41Km0qKGMqZitnKmkqaCp1KSsxL01hdGguUEksdz1tKihkKmwvNC1nKnMqcCksXz0uMTI1Km0qKGwqcC1nKnMqYypkKSxBPS41Km0qKHUqaCtnKmYqaSkrLjUsUz13Kl8tQSpiO2E9KHYqdy14KkEpL1Msbz0oeCpfLXYqYikvUyxyPU0oci1hLC1NYXRoLlBJLE1hdGguUEkpLG49TShuLW8sLUtkLEtkKTt9d2hpbGUoKE1hdGguYWJzKGEpPnN8fE1hdGguYWJzKG8pPnMpJiYtLWk+MCk7cmV0dXJuIG5ldyBPbChfKHIpLF8obikpfX1jbGFzcyBKZCBleHRlbmRzIENke2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuY2VudGVyPXQuY2VudGVyfHxbMCwwXSx0aGlzLnBhcmFsbGVscz10LnBhcmFsbGVsc3x8WzAsMF0sdGhpcy5jb3NQaGk9TWF0aC5tYXgoLjAxLE1hdGguY29zKHcodGhpcy5wYXJhbGxlbHNbMF0pKSksdGhpcy5zY2FsZT0xLygyKk1hdGgubWF4KE1hdGguUEkqdGhpcy5jb3NQaGksMS90aGlzLmNvc1BoaSkpLHRoaXMud3JhcD0hMCx0aGlzLnN1cHBvcnRzV29ybGRDb3BpZXM9ITA7fXByb2plY3QodCxlKXtjb25zdHtzY2FsZTpyLGNvc1BoaTpufT10aGlzO3JldHVybiB7eDp3KHQpKm4qcisuNSx5Oi1NYXRoLnNpbih3KGUpKS9uKnIrLjUsejowfX11bnByb2plY3QodCxlKXtjb25zdHtzY2FsZTpyLGNvc1BoaTpufT10aGlzLGk9LShlLS41KS9yLHM9TShfKCh0LS41KS9yKS9uLC0xODAsMTgwKSxhPU1hdGguYXNpbihNKGkqbiwtMSwxKSksbz1NKF8oYSksLUhsLEhsKTtyZXR1cm4gbmV3IE9sKHMsbyl9fWNsYXNzIEhkIGV4dGVuZHMgTmR7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5yZXF1aXJlc0RyYXBpbmc9ITAsdGhpcy5zdXBwb3J0c1dvcmxkQ29waWVzPSExLHRoaXMuc3VwcG9ydHNGb2c9ITAsdGhpcy56QXhpc1VuaXQ9XCJwaXhlbHNcIix0aGlzLnVuc3VwcG9ydGVkTGF5ZXJzPVtcImRlYnVnXCJdLHRoaXMucmFuZ2U9WzMsNV07fXByb2plY3RUaWxlUG9pbnQodCxlLHIpe2NvbnN0IG49TWwodCxlLHIpO3JldHVybiBGbyhuLG4sQmwoeGwocikpKSx7eDpuWzBdLHk6blsxXSx6Om5bMl19fWxvY2F0aW9uUG9pbnQodCxlKXtjb25zdCByPUlsKGUubGF0LGUubG5nKSxuPURvKFtdLHIpLGk9dC5lbGV2YXRpb24/dC5lbGV2YXRpb24uZ2V0QXRQb2ludE9yWmVybyh0LmxvY2F0aW9uQ29vcmRpbmF0ZShlKSx0Ll9jZW50ZXJBbHRpdHVkZSk6dC5fY2VudGVyQWx0aXR1ZGU7UG8ocixyLG4sWmwoMSwwKSphbyppKTtjb25zdCBzPXBvKG5ldyBGbG9hdDY0QXJyYXkoMTYpKTtyZXR1cm4geW8ocyx0LnBpeGVsTWF0cml4LHQuZ2xvYmVNYXRyaXgpLEZvKHIscixzKSxuZXcgeChyWzBdLHJbMV0pfXBpeGVsc1Blck1ldGVyKHQsZSl7cmV0dXJuIFpsKDEsMCkqZX1waXhlbFNwYWNlQ29udmVyc2lvbih0LGUscil7Y29uc3Qgbj1abCgxLHQpKmUsaT1FcihabCgxLDQ1KSplLG4scik7cmV0dXJuIHRoaXMucGl4ZWxzUGVyTWV0ZXIodCxlKS9pfWNyZWF0ZVRpbGVNYXRyaXgodCxlLHIpe2NvbnN0IG49RWwoeGwoci5jYW5vbmljYWwpKTtyZXR1cm4geW8obmV3IEZsb2F0NjRBcnJheSgxNiksdC5nbG9iZU1hdHJpeCxuKX1jcmVhdGVJbnZlcnNpb25NYXRyaXgodCxlKXtjb25zdHtjZW50ZXI6cn09dCxuPUJsKHhsKGUpKTtyZXR1cm4gdm8obixuLHcoci5sbmcpKSx4byhuLG4sdyhyLmxhdCkpLGdvKG4sbixbdC5fcGl4ZWxzUGVyTWVyY2F0b3JQaXhlbCx0Ll9waXhlbHNQZXJNZXJjYXRvclBpeGVsLDFdKSxGbG9hdDMyQXJyYXkuZnJvbShuKX1wb2ludENvb3JkaW5hdGUodCxlLHIsbil7cmV0dXJuIHlsKHQsZSxyLCEwKXx8bmV3IFdsKDAsMCl9cG9pbnRDb29yZGluYXRlM0QodCxlLHIpe2NvbnN0IG49dGhpcy5wb2ludENvb3JkaW5hdGUodCxlLHIsMCk7cmV0dXJuIFtuLngsbi55LG4uel19aXNQb2ludEFib3ZlSG9yaXpvbih0LGUpe3JldHVybiAheWwodCxlLngsZS55LCExKX1mYXJ0aGVzdFBpeGVsRGlzdGFuY2UodCl7Y29uc3QgZT1mdW5jdGlvbih0LGUpe2NvbnN0IHI9dC5jYW1lcmFUb0NlbnRlckRpc3RhbmNlLG49dC5fY2VudGVyQWx0aXR1ZGUqZSxpPXQuX2NhbWVyYSxzPXQuX2NhbWVyYS5mb3J3YXJkKCksYT1NbyhbXSxDbyhbXSxzLC1yKSxbMCwwLG5dKSxvPXQud29ybGRTaXplLygyKk1hdGguUEkpLGw9WzAsMCwtb10sdT10LndpZHRoL3QuaGVpZ2h0LGM9TWF0aC50YW4odC5mb3ZBYm92ZUNlbnRlciksaD1DbyhbXSxpLnVwKCksYykscD1DbyhbXSxpLnJpZ2h0KCksYyp1KSxkPURvKFtdLE1vKFtdLE1vKFtdLHMsaCkscCkpLGY9W107bGV0IHk7aWYobmV3IGVsKGEsZCkuY2xvc2VzdFBvaW50T25TcGhlcmUobCxvLGYpKXtjb25zdCBlPU1vKFtdLGYsbCkscj0kbyhbXSxlLGEpO3k9TWF0aC5jb3ModC5mb3ZBYm92ZUNlbnRlcikqa28ocik7fWVsc2Uge2NvbnN0IHQ9JG8oW10sYSxsKSxlPSRvKFtdLGwsYSk7RG8oZSxlKTtjb25zdCByPWtvKHQpLW87eT1NYXRoLnNxcnQocioocisyKm8pKTtjb25zdCBuPU1hdGguYWNvcyh5LyhvK3IpKS1NYXRoLmFjb3MoVm8ocyxlKSk7eSo9TWF0aC5jb3Mobik7fXJldHVybiAxLjAxKnl9KHQsdGhpcy5waXhlbHNQZXJNZXRlcih0LmNlbnRlci5sYXQsdC53b3JsZFNpemUpKSxyPVBsKHQuem9vbSk7aWYocj4wKXtjb25zdCBuPXpkKHQsWmwoMSx0LmNlbnRlci5sYXQpKnQud29ybGRTaXplKSxpPXQud29ybGRTaXplLygyKk1hdGguUEkpLHM9TWF0aC5tYXgodC53aWR0aCx0LmhlaWdodCkvdC53b3JsZFNpemUqTWF0aC5QSTtyZXR1cm4gRXIoZSxuK2kqKDEtTWF0aC5jb3MocykpLE1hdGgucG93KHIsMTApKX1yZXR1cm4gZX11cFZlY3Rvcih0LGUscil7cmV0dXJuIE1sKGUscix0LDEpfXVwVmVjdG9yU2NhbGUodCl7cmV0dXJuIHttZXRlcnNUb1RpbGU6ZmwoVGwoeGwodCkpKX19fWZ1bmN0aW9uIFlkKHQpe2NvbnN0IGU9dC5wYXJhbGxlbHMscj0hIWUmJk1hdGguYWJzKGVbMF0rZVsxXSk8LjAxO3N3aXRjaCh0Lm5hbWUpe2Nhc2VcIm1lcmNhdG9yXCI6cmV0dXJuIG5ldyBOZCh0KTtjYXNlXCJlcXVpcmVjdGFuZ3VsYXJcIjpyZXR1cm4gbmV3ICRkKHQpO2Nhc2VcIm5hdHVyYWxFYXJ0aFwiOnJldHVybiBuZXcgWmQodCk7Y2FzZVwiZXF1YWxFYXJ0aFwiOnJldHVybiBuZXcgVWQodCk7Y2FzZVwid2lua2VsVHJpcGVsXCI6cmV0dXJuIG5ldyBYZCh0KTtjYXNlXCJhbGJlcnNcIjpyZXR1cm4gcj9uZXcgSmQodCk6bmV3IFBkKHQpO2Nhc2VcImxhbWJlcnRDb25mb3JtYWxDb25pY1wiOnJldHVybiByP25ldyBKZCh0KTpuZXcgcWQodCk7Y2FzZVwiZ2xvYmVcIjpyZXR1cm4gbmV3IEhkKHQpfXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwcm9qZWN0aW9uIG5hbWU6ICR7dC5uYW1lfWApfWNvbnN0IFdkPUtjLnR5cGVzLFFkPVt7bmFtZTpcImFfZmFkZV9vcGFjaXR5XCIsY29tcG9uZW50czoxLHR5cGU6XCJVaW50OFwiLG9mZnNldDowfV07ZnVuY3Rpb24gdGYodCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCl7Y29uc3QgZD1vP01hdGgubWluKEFkLE1hdGgucm91bmQob1swXSkpOjAsZj1vP01hdGgubWluKEFkLE1hdGgucm91bmQob1sxXSkpOjA7dC5lbXBsYWNlQmFjayhlLHIsTWF0aC5yb3VuZCgzMipuKSxNYXRoLnJvdW5kKDMyKmkpLHMsYSwoZDw8MSkrKGw/MTowKSxmLDE2KnUsMTYqYywyNTYqaCwyNTYqcCk7fWZ1bmN0aW9uIGVmKHQsZSxyLG4saSxzLGEpe3QuZW1wbGFjZUJhY2soZSxyLG4saSxzLGEpO31mdW5jdGlvbiByZih0LGUscixuLGkpe3QuZW1wbGFjZUJhY2soZSxyLG4saSksdC5lbXBsYWNlQmFjayhlLHIsbixpKSx0LmVtcGxhY2VCYWNrKGUscixuLGkpLHQuZW1wbGFjZUJhY2soZSxyLG4saSk7fWZ1bmN0aW9uIG5mKHQpe2Zvcihjb25zdCBlIG9mIHQuc2VjdGlvbnMpaWYobHMoZS50ZXh0KSlyZXR1cm4gITA7cmV0dXJuICExfWNsYXNzIHNme2NvbnN0cnVjdG9yKHQpe3RoaXMubGF5b3V0VmVydGV4QXJyYXk9bmV3IFhzLHRoaXMuaW5kZXhBcnJheT1uZXcgcmEsdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnM9dCx0aGlzLnNlZ21lbnRzPW5ldyBzbyx0aGlzLmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheT1uZXcgTnMsdGhpcy5vcGFjaXR5VmVydGV4QXJyYXk9bmV3IEhzLHRoaXMucGxhY2VkU3ltYm9sQXJyYXk9bmV3IGZhLHRoaXMuZ2xvYmVFeHRWZXJ0ZXhBcnJheT1uZXcgSnM7fWlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMubGF5b3V0VmVydGV4QXJyYXkubGVuZ3RoJiYwPT09dGhpcy5pbmRleEFycmF5Lmxlbmd0aCYmMD09PXRoaXMuZHluYW1pY0xheW91dFZlcnRleEFycmF5Lmxlbmd0aCYmMD09PXRoaXMub3BhY2l0eVZlcnRleEFycmF5Lmxlbmd0aH11cGxvYWQodCxlLHIsbil7dGhpcy5pc0VtcHR5KCl8fChyJiYodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSxFaC5tZW1iZXJzKSx0aGlzLmluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIodGhpcy5pbmRleEFycmF5LGUpLHRoaXMuZHluYW1pY0xheW91dFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheSxQaC5tZW1iZXJzLCEwKSx0aGlzLm9wYWNpdHlWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5vcGFjaXR5VmVydGV4QXJyYXksUWQsITApLHRoaXMuZ2xvYmVFeHRWZXJ0ZXhBcnJheS5sZW5ndGg+MCYmKHRoaXMuZ2xvYmVFeHRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5nbG9iZUV4dFZlcnRleEFycmF5LENoLm1lbWJlcnMsITApKSx0aGlzLm9wYWNpdHlWZXJ0ZXhCdWZmZXIuaXRlbVNpemU9MSksKHJ8fG4pJiZ0aGlzLnByb2dyYW1Db25maWd1cmF0aW9ucy51cGxvYWQodCkpO31kZXN0cm95KCl7dGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXImJih0aGlzLmxheW91dFZlcnRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5pbmRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5wcm9ncmFtQ29uZmlndXJhdGlvbnMuZGVzdHJveSgpLHRoaXMuc2VnbWVudHMuZGVzdHJveSgpLHRoaXMuZHluYW1pY0xheW91dFZlcnRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5vcGFjaXR5VmVydGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLmdsb2JlRXh0VmVydGV4QnVmZmVyJiZ0aGlzLmdsb2JlRXh0VmVydGV4QnVmZmVyLmRlc3Ryb3koKSk7fX1KaShzZixcIlN5bWJvbEJ1ZmZlcnNcIik7Y2xhc3MgYWZ7Y29uc3RydWN0b3IodCxlLHIpe3RoaXMubGF5b3V0VmVydGV4QXJyYXk9bmV3IHQsdGhpcy5sYXlvdXRBdHRyaWJ1dGVzPWUsdGhpcy5pbmRleEFycmF5PW5ldyByLHRoaXMuc2VnbWVudHM9bmV3IHNvLHRoaXMuY29sbGlzaW9uVmVydGV4QXJyYXk9bmV3IHRhLHRoaXMuY29sbGlzaW9uVmVydGV4QXJyYXlFeHQ9bmV3IGVhO311cGxvYWQodCl7dGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5sYXlvdXRWZXJ0ZXhBcnJheSx0aGlzLmxheW91dEF0dHJpYnV0ZXMpLHRoaXMuaW5kZXhCdWZmZXI9dC5jcmVhdGVJbmRleEJ1ZmZlcih0aGlzLmluZGV4QXJyYXkpLHRoaXMuY29sbGlzaW9uVmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHRoaXMuY29sbGlzaW9uVmVydGV4QXJyYXksRGgubWVtYmVycywhMCksdGhpcy5jb2xsaXNpb25WZXJ0ZXhCdWZmZXJFeHQ9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIodGhpcy5jb2xsaXNpb25WZXJ0ZXhBcnJheUV4dCxWaC5tZW1iZXJzLCEwKTt9ZGVzdHJveSgpe3RoaXMubGF5b3V0VmVydGV4QnVmZmVyJiYodGhpcy5sYXlvdXRWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuc2VnbWVudHMuZGVzdHJveSgpLHRoaXMuY29sbGlzaW9uVmVydGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLmNvbGxpc2lvblZlcnRleEJ1ZmZlckV4dC5kZXN0cm95KCkpO319SmkoYWYsXCJDb2xsaXNpb25CdWZmZXJzXCIpO2NsYXNzIG9me2NvbnN0cnVjdG9yKHQpe3RoaXMuY29sbGlzaW9uQm94QXJyYXk9dC5jb2xsaXNpb25Cb3hBcnJheSx0aGlzLnpvb209dC56b29tLHRoaXMub3ZlcnNjYWxpbmc9dC5vdmVyc2NhbGluZyx0aGlzLmxheWVycz10LmxheWVycyx0aGlzLmxheWVySWRzPXRoaXMubGF5ZXJzLm1hcCgodD0+dC5pZCkpLHRoaXMuaW5kZXg9dC5pbmRleCx0aGlzLnBpeGVsUmF0aW89dC5waXhlbFJhdGlvLHRoaXMuc291cmNlTGF5ZXJJbmRleD10LnNvdXJjZUxheWVySW5kZXgsdGhpcy5oYXNQYXR0ZXJuPSExLHRoaXMuaGFzUlRMVGV4dD0hMSx0aGlzLmZ1bGx5Q2xpcHBlZD0hMSx0aGlzLnNvcnRLZXlSYW5nZXM9W10sdGhpcy5jb2xsaXNpb25DaXJjbGVBcnJheT1bXSx0aGlzLnBsYWNlbWVudEludlByb2pNYXRyaXg9cG8oW10pLHRoaXMucGxhY2VtZW50Vmlld3BvcnRNYXRyaXg9cG8oW10pO2NvbnN0IGU9dGhpcy5sYXllcnNbMF0uX3VuZXZhbHVhdGVkTGF5b3V0Ll92YWx1ZXM7dGhpcy50ZXh0U2l6ZURhdGE9JGgodGhpcy56b29tLGVbXCJ0ZXh0LXNpemVcIl0pLHRoaXMuaWNvblNpemVEYXRhPSRoKHRoaXMuem9vbSxlW1wiaWNvbi1zaXplXCJdKTtjb25zdCByPXRoaXMubGF5ZXJzWzBdLmxheW91dCxuPXIuZ2V0KFwic3ltYm9sLXNvcnQta2V5XCIpLGk9ci5nZXQoXCJzeW1ib2wtei1vcmRlclwiKTt0aGlzLmNhbk92ZXJsYXA9ci5nZXQoXCJ0ZXh0LWFsbG93LW92ZXJsYXBcIil8fHIuZ2V0KFwiaWNvbi1hbGxvdy1vdmVybGFwXCIpfHxyLmdldChcInRleHQtaWdub3JlLXBsYWNlbWVudFwiKXx8ci5nZXQoXCJpY29uLWlnbm9yZS1wbGFjZW1lbnRcIiksdGhpcy5zb3J0RmVhdHVyZXNCeUtleT1cInZpZXdwb3J0LXlcIiE9PWkmJnZvaWQgMCE9PW4uY29uc3RhbnRPcigxKSx0aGlzLnNvcnRGZWF0dXJlc0J5WT0oXCJ2aWV3cG9ydC15XCI9PT1pfHxcImF1dG9cIj09PWkmJiF0aGlzLnNvcnRGZWF0dXJlc0J5S2V5KSYmdGhpcy5jYW5PdmVybGFwLHRoaXMud3JpdGluZ01vZGVzPXIuZ2V0KFwidGV4dC13cml0aW5nLW1vZGVcIikubWFwKCh0PT5JcFt0XSkpLHRoaXMuc3RhdGVEZXBlbmRlbnRMYXllcklkcz10aGlzLmxheWVycy5maWx0ZXIoKHQ9PnQuaXNTdGF0ZURlcGVuZGVudCgpKSkubWFwKCh0PT50LmlkKSksdGhpcy5zb3VyY2VJRD10LnNvdXJjZUlELHRoaXMucHJvamVjdGlvbj10LnByb2plY3Rpb247fWNyZWF0ZUFycmF5cygpe3RoaXMudGV4dD1uZXcgc2YobmV3IEphKHRoaXMubGF5ZXJzLHRoaXMuem9vbSwodD0+L150ZXh0Ly50ZXN0KHQpKSkpLHRoaXMuaWNvbj1uZXcgc2YobmV3IEphKHRoaXMubGF5ZXJzLHRoaXMuem9vbSwodD0+L15pY29uLy50ZXN0KHQpKSkpLHRoaXMuZ2x5cGhPZmZzZXRBcnJheT1uZXcgZ2EsdGhpcy5saW5lVmVydGV4QXJyYXk9bmV3IHhhLHRoaXMuc3ltYm9sSW5zdGFuY2VzPW5ldyBtYTt9Y2FsY3VsYXRlR2x5cGhEZXBlbmRlbmNpZXModCxlLHIsbixpKXtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKylpZihlW3QuY2hhckNvZGVBdChyKV09ITAsbiYmaSl7Y29uc3Qgbj1HaFt0LmNoYXJBdChyKV07biYmKGVbbi5jaGFyQ29kZUF0KDApXT0hMCk7fX1wb3B1bGF0ZSh0LGUscixuKXtjb25zdCBpPXRoaXMubGF5ZXJzWzBdLHM9aS5sYXlvdXQsYT1cImdsb2JlXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZSxvPXMuZ2V0KFwidGV4dC1mb250XCIpLGw9cy5nZXQoXCJ0ZXh0LWZpZWxkXCIpLHU9cy5nZXQoXCJpY29uLWltYWdlXCIpLGM9KFwiY29uc3RhbnRcIiE9PWwudmFsdWUua2luZHx8bC52YWx1ZS52YWx1ZSBpbnN0YW5jZW9mIERlJiYhbC52YWx1ZS52YWx1ZS5pc0VtcHR5KCl8fGwudmFsdWUudmFsdWUudG9TdHJpbmcoKS5sZW5ndGg+MCkmJihcImNvbnN0YW50XCIhPT1vLnZhbHVlLmtpbmR8fG8udmFsdWUudmFsdWUubGVuZ3RoPjApLGg9XCJjb25zdGFudFwiIT09dS52YWx1ZS5raW5kfHwhIXUudmFsdWUudmFsdWV8fE9iamVjdC5rZXlzKHUucGFyYW1ldGVycykubGVuZ3RoPjAscD1zLmdldChcInN5bWJvbC1zb3J0LWtleVwiKTtpZih0aGlzLmZlYXR1cmVzPVtdLCFjJiYhaClyZXR1cm47Y29uc3QgZD1lLmljb25EZXBlbmRlbmNpZXMsZj1lLmdseXBoRGVwZW5kZW5jaWVzLHk9ZS5hdmFpbGFibGVJbWFnZXMsbT1uZXcgd3ModGhpcy56b29tKTtmb3IoY29uc3R7ZmVhdHVyZTplLGlkOmwsaW5kZXg6dSxzb3VyY2VMYXllckluZGV4Omd9b2YgdCl7Y29uc3QgdD1pLl9mZWF0dXJlRmlsdGVyLm5lZWRHZW9tZXRyeSx4PW91KGUsdCk7aWYoIWkuX2ZlYXR1cmVGaWx0ZXIuZmlsdGVyKG0seCxyKSljb250aW51ZTtpZih0fHwoeC5nZW9tZXRyeT1hdShlLHIsbikpLGEmJjEhPT1lLnR5cGUmJnIuejw9NSl7Y29uc3QgdD14Lmdlb21ldHJ5LGU9Ljk4MDc4NTI4MDU2LG49KHQsbik9PlZvKE1sKHQueCx0LnksciwxKSxNbChuLngsbi55LHIsMSkpPGU7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXT1ydSh0W2VdLG4pO31sZXQgdixiO2lmKGMpe2NvbnN0IHQ9aS5nZXRWYWx1ZUFuZFJlc29sdmVUb2tlbnMoXCJ0ZXh0LWZpZWxkXCIseCxyLHkpLGU9RGUuZmFjdG9yeSh0KTtuZihlKSYmKHRoaXMuaGFzUlRMVGV4dD0hMCksKCF0aGlzLmhhc1JUTFRleHR8fFwidW5hdmFpbGFibGVcIj09PXhzKCl8fHRoaXMuaGFzUlRMVGV4dCYmYnMuaXNQYXJzZWQoKSkmJih2PU5oKGUsaSx4KSk7fWlmKGgpe2NvbnN0IHQ9aS5nZXRWYWx1ZUFuZFJlc29sdmVUb2tlbnMoXCJpY29uLWltYWdlXCIseCxyLHkpO2I9dCBpbnN0YW5jZW9mIFZlP3Q6VmUuZnJvbVN0cmluZyh0KTt9aWYoIXYmJiFiKWNvbnRpbnVlO2NvbnN0IHc9dGhpcy5zb3J0RmVhdHVyZXNCeUtleT9wLmV2YWx1YXRlKHgse30scik6dm9pZCAwO2lmKHRoaXMuZmVhdHVyZXMucHVzaCh7aWQ6bCx0ZXh0OnYsaWNvbjpiLGluZGV4OnUsc291cmNlTGF5ZXJJbmRleDpnLGdlb21ldHJ5OnguZ2VvbWV0cnkscHJvcGVydGllczplLnByb3BlcnRpZXMsdHlwZTpXZFtlLnR5cGVdLHNvcnRLZXk6d30pLGImJihkW2IubmFtZV09ITApLHYpe2NvbnN0IHQ9by5ldmFsdWF0ZSh4LHt9LHIpLmpvaW4oXCIsXCIpLGU9XCJtYXBcIj09PXMuZ2V0KFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIikmJlwicG9pbnRcIiE9PXMuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKTt0aGlzLmFsbG93VmVydGljYWxQbGFjZW1lbnQ9dGhpcy53cml0aW5nTW9kZXMmJnRoaXMud3JpdGluZ01vZGVzLmluZGV4T2YoSXAudmVydGljYWwpPj0wO2Zvcihjb25zdCByIG9mIHYuc2VjdGlvbnMpaWYoci5pbWFnZSlkW3IuaW1hZ2UubmFtZV09ITA7ZWxzZSB7Y29uc3Qgbj1lcyh2LnRvU3RyaW5nKCkpLGk9ci5mb250U3RhY2t8fHQscz1mW2ldPWZbaV18fHt9O3RoaXMuY2FsY3VsYXRlR2x5cGhEZXBlbmRlbmNpZXMoci50ZXh0LHMsZSx0aGlzLmFsbG93VmVydGljYWxQbGFjZW1lbnQsbik7fX19XCJsaW5lXCI9PT1zLmdldChcInN5bWJvbC1wbGFjZW1lbnRcIikmJih0aGlzLmZlYXR1cmVzPWZ1bmN0aW9uKHQpe2NvbnN0IGU9e30scj17fSxuPVtdO2xldCBpPTA7ZnVuY3Rpb24gcyhlKXtuLnB1c2godFtlXSksaSsrO31mdW5jdGlvbiBhKHQsZSxpKXtjb25zdCBzPXJbdF07cmV0dXJuIGRlbGV0ZSByW3RdLHJbZV09cyxuW3NdLmdlb21ldHJ5WzBdLnBvcCgpLG5bc10uZ2VvbWV0cnlbMF09bltzXS5nZW9tZXRyeVswXS5jb25jYXQoaVswXSksc31mdW5jdGlvbiBvKHQscixpKXtjb25zdCBzPWVbcl07cmV0dXJuIGRlbGV0ZSBlW3JdLGVbdF09cyxuW3NdLmdlb21ldHJ5WzBdLnNoaWZ0KCksbltzXS5nZW9tZXRyeVswXT1pWzBdLmNvbmNhdChuW3NdLmdlb21ldHJ5WzBdKSxzfWZ1bmN0aW9uIGwodCxlLHIpe2NvbnN0IG49cj9lWzBdW2VbMF0ubGVuZ3RoLTFdOmVbMF1bMF07cmV0dXJuIGAke3R9OiR7bi54fToke24ueX1gfWZvcihsZXQgdT0wO3U8dC5sZW5ndGg7dSsrKXtjb25zdCBjPXRbdV0saD1jLmdlb21ldHJ5LHA9Yy50ZXh0P2MudGV4dC50b1N0cmluZygpOm51bGw7aWYoIXApe3ModSk7Y29udGludWV9Y29uc3QgZD1sKHAsaCksZj1sKHAsaCwhMCk7aWYoZCBpbiByJiZmIGluIGUmJnJbZF0hPT1lW2ZdKXtjb25zdCB0PW8oZCxmLGgpLGk9YShkLGYsblt0XS5nZW9tZXRyeSk7ZGVsZXRlIGVbZF0sZGVsZXRlIHJbZl0scltsKHAsbltpXS5nZW9tZXRyeSwhMCldPWksblt0XS5nZW9tZXRyeT1udWxsO31lbHNlIGQgaW4gcj9hKGQsZixoKTpmIGluIGU/byhkLGYsaCk6KHModSksZVtkXT1pLTEscltmXT1pLTEpO31yZXR1cm4gbi5maWx0ZXIoKHQ9PnQuZ2VvbWV0cnkpKX0odGhpcy5mZWF0dXJlcykpLHRoaXMuc29ydEZlYXR1cmVzQnlLZXkmJnRoaXMuZmVhdHVyZXMuc29ydCgoKHQsZSk9PnQuc29ydEtleS1lLnNvcnRLZXkpKTt9dXBkYXRlKHQsZSxyLG4pe3RoaXMuc3RhdGVEZXBlbmRlbnRMYXllcnMubGVuZ3RoJiYodGhpcy50ZXh0LnByb2dyYW1Db25maWd1cmF0aW9ucy51cGRhdGVQYWludEFycmF5cyh0LGUsdGhpcy5sYXllcnMscixuKSx0aGlzLmljb24ucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLnVwZGF0ZVBhaW50QXJyYXlzKHQsZSx0aGlzLmxheWVycyxyLG4pKTt9aXNFbXB0eSgpe3JldHVybiAwPT09dGhpcy5zeW1ib2xJbnN0YW5jZXMubGVuZ3RoJiYhdGhpcy5oYXNSVExUZXh0fXVwbG9hZFBlbmRpbmcoKXtyZXR1cm4gIXRoaXMudXBsb2FkZWR8fHRoaXMudGV4dC5wcm9ncmFtQ29uZmlndXJhdGlvbnMubmVlZHNVcGxvYWR8fHRoaXMuaWNvbi5wcm9ncmFtQ29uZmlndXJhdGlvbnMubmVlZHNVcGxvYWR9dXBsb2FkKHQpeyF0aGlzLnVwbG9hZGVkJiZ0aGlzLmhhc0RlYnVnRGF0YSgpJiYodGhpcy50ZXh0Q29sbGlzaW9uQm94LnVwbG9hZCh0KSx0aGlzLmljb25Db2xsaXNpb25Cb3gudXBsb2FkKHQpKSx0aGlzLnRleHQudXBsb2FkKHQsdGhpcy5zb3J0RmVhdHVyZXNCeVksIXRoaXMudXBsb2FkZWQsdGhpcy50ZXh0LnByb2dyYW1Db25maWd1cmF0aW9ucy5uZWVkc1VwbG9hZCksdGhpcy5pY29uLnVwbG9hZCh0LHRoaXMuc29ydEZlYXR1cmVzQnlZLCF0aGlzLnVwbG9hZGVkLHRoaXMuaWNvbi5wcm9ncmFtQ29uZmlndXJhdGlvbnMubmVlZHNVcGxvYWQpLHRoaXMudXBsb2FkZWQ9ITA7fWRlc3Ryb3lEZWJ1Z0RhdGEoKXt0aGlzLnRleHRDb2xsaXNpb25Cb3guZGVzdHJveSgpLHRoaXMuaWNvbkNvbGxpc2lvbkJveC5kZXN0cm95KCk7fWdldFByb2plY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9qZWN0aW9uSW5zdGFuY2V8fCh0aGlzLnByb2plY3Rpb25JbnN0YW5jZT1ZZCh0aGlzLnByb2plY3Rpb24pKSx0aGlzLnByb2plY3Rpb25JbnN0YW5jZX1kZXN0cm95KCl7dGhpcy50ZXh0LmRlc3Ryb3koKSx0aGlzLmljb24uZGVzdHJveSgpLHRoaXMuaGFzRGVidWdEYXRhKCkmJnRoaXMuZGVzdHJveURlYnVnRGF0YSgpO31hZGRUb0xpbmVWZXJ0ZXhBcnJheSh0LGUpe2NvbnN0IHI9dGhpcy5saW5lVmVydGV4QXJyYXkubGVuZ3RoO2lmKHZvaWQgMCE9PXQuc2VnbWVudClmb3IoY29uc3R7eDp0LHk6cn1vZiBlKXRoaXMubGluZVZlcnRleEFycmF5LmVtcGxhY2VCYWNrKHQscik7cmV0dXJuIHtsaW5lU3RhcnRJbmRleDpyLGxpbmVMZW5ndGg6dGhpcy5saW5lVmVydGV4QXJyYXkubGVuZ3RoLXJ9fWFkZFN5bWJvbHModCxlLHIsbixpLHMsYSxvLGwsdSxjLGgscCxkKXtjb25zdCBmPXQuaW5kZXhBcnJheSx5PXQubGF5b3V0VmVydGV4QXJyYXksbT10Lmdsb2JlRXh0VmVydGV4QXJyYXksZz10LnNlZ21lbnRzLnByZXBhcmVTZWdtZW50KDQqZS5sZW5ndGgseSxmLHRoaXMuY2FuT3ZlcmxhcD9zLnNvcnRLZXk6dm9pZCAwKSx4PXRoaXMuZ2x5cGhPZmZzZXRBcnJheS5sZW5ndGgsdj1nLnZlcnRleExlbmd0aCxiPXRoaXMuYWxsb3dWZXJ0aWNhbFBsYWNlbWVudCYmYT09PUlwLnZlcnRpY2FsP01hdGguUEkvMjowLHc9cy50ZXh0JiZzLnRleHQuc2VjdGlvbnM7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspe2NvbnN0e3RsOmksdHI6YSxibDp1LGJyOmMsdGV4OmgscGl4ZWxPZmZzZXRUTDp4LHBpeGVsT2Zmc2V0QlI6dixtaW5Gb250U2NhbGVYOl8sbWluRm9udFNjYWxlWTpBLGdseXBoT2Zmc2V0OlMsaXNTREY6ayxzZWN0aW9uSW5kZXg6SX09ZVtuXSxNPWcudmVydGV4TGVuZ3RoLFQ9U1sxXTtpZih0Zih5LGwueCxsLnksaS54LFQraS55LGgueCxoLnkscixrLHgueCx4LnksXyxBKSx0Zih5LGwueCxsLnksYS54LFQrYS55LGgueCtoLncsaC55LHIsayx2LngseC55LF8sQSksdGYoeSxsLngsbC55LHUueCxUK3UueSxoLngsaC55K2guaCxyLGsseC54LHYueSxfLEEpLHRmKHksbC54LGwueSxjLngsVCtjLnksaC54K2gudyxoLnkraC5oLHIsayx2Lngsdi55LF8sQSksbyl7Y29uc3R7eDplLHk6cix6Om59PW8uYW5jaG9yLFtpLHMsYV09by51cDtlZihtLGUscixuLGkscyxhKSxlZihtLGUscixuLGkscyxhKSxlZihtLGUscixuLGkscyxhKSxlZihtLGUscixuLGkscyxhKSxyZih0LmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheSxlLHIsbixiKTt9ZWxzZSByZih0LmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheSxsLngsbC55LGwueixiKTtmLmVtcGxhY2VCYWNrKE0sTSsxLE0rMiksZi5lbXBsYWNlQmFjayhNKzEsTSsyLE0rMyksZy52ZXJ0ZXhMZW5ndGgrPTQsZy5wcmltaXRpdmVMZW5ndGgrPTIsdGhpcy5nbHlwaE9mZnNldEFycmF5LmVtcGxhY2VCYWNrKFNbMF0pLG4hPT1lLmxlbmd0aC0xJiZJPT09ZVtuKzFdLnNlY3Rpb25JbmRleHx8dC5wcm9ncmFtQ29uZmlndXJhdGlvbnMucG9wdWxhdGVQYWludEFycmF5cyh5Lmxlbmd0aCxzLHMuaW5kZXgse30scCxkLHcmJndbSV0pO31jb25zdCBfPW8/by5hbmNob3I6bDt0LnBsYWNlZFN5bWJvbEFycmF5LmVtcGxhY2VCYWNrKF8ueCxfLnksXy56LGwueCxsLnkseCx0aGlzLmdseXBoT2Zmc2V0QXJyYXkubGVuZ3RoLXgsdix1LGMsbC5zZWdtZW50LHI/clswXTowLHI/clsxXTowLG5bMF0sblsxXSxhLDAsITEsMCxoLDApO31fY29tbWl0TGF5b3V0VmVydGV4KHQsZSxyLG4saSxzLGEpe3QuZW1wbGFjZUJhY2soZSxyLG4saSxzLE1hdGgucm91bmQoYS54KSxNYXRoLnJvdW5kKGEueSkpO31fYWRkQ29sbGlzaW9uRGVidWdWZXJ0aWNlcyh0LGUscixuLGkscyxhKXtjb25zdCBvPXIuc2VnbWVudHMucHJlcGFyZVNlZ21lbnQoNCxyLmxheW91dFZlcnRleEFycmF5LHIuaW5kZXhBcnJheSksbD1vLnZlcnRleExlbmd0aCx1PWEudGlsZUFuY2hvclgsYz1hLnRpbGVBbmNob3JZO2ZvcihsZXQgdD0wO3Q8NDt0Kyspci5jb2xsaXNpb25WZXJ0ZXhBcnJheS5lbXBsYWNlQmFjaygwLDAsMCwwKTtyLmNvbGxpc2lvblZlcnRleEFycmF5RXh0LmVtcGxhY2VCYWNrKGUsLXQucGFkZGluZywtdC5wYWRkaW5nKSxyLmNvbGxpc2lvblZlcnRleEFycmF5RXh0LmVtcGxhY2VCYWNrKGUsdC5wYWRkaW5nLC10LnBhZGRpbmcpLHIuY29sbGlzaW9uVmVydGV4QXJyYXlFeHQuZW1wbGFjZUJhY2soZSx0LnBhZGRpbmcsdC5wYWRkaW5nKSxyLmNvbGxpc2lvblZlcnRleEFycmF5RXh0LmVtcGxhY2VCYWNrKGUsLXQucGFkZGluZyx0LnBhZGRpbmcpLHRoaXMuX2NvbW1pdExheW91dFZlcnRleChyLmxheW91dFZlcnRleEFycmF5LG4saSxzLHUsYyxuZXcgeCh0LngxLHQueTEpKSx0aGlzLl9jb21taXRMYXlvdXRWZXJ0ZXgoci5sYXlvdXRWZXJ0ZXhBcnJheSxuLGkscyx1LGMsbmV3IHgodC54Mix0LnkxKSksdGhpcy5fY29tbWl0TGF5b3V0VmVydGV4KHIubGF5b3V0VmVydGV4QXJyYXksbixpLHMsdSxjLG5ldyB4KHQueDIsdC55MikpLHRoaXMuX2NvbW1pdExheW91dFZlcnRleChyLmxheW91dFZlcnRleEFycmF5LG4saSxzLHUsYyxuZXcgeCh0LngxLHQueTIpKSxvLnZlcnRleExlbmd0aCs9NDtjb25zdCBoPXIuaW5kZXhBcnJheTtoLmVtcGxhY2VCYWNrKGwsbCsxKSxoLmVtcGxhY2VCYWNrKGwrMSxsKzIpLGguZW1wbGFjZUJhY2sobCsyLGwrMyksaC5lbXBsYWNlQmFjayhsKzMsbCksby5wcmltaXRpdmVMZW5ndGgrPTQ7fV9hZGRUZXh0RGVidWdDb2xsaXNpb25Cb3hlcyh0LGUscixuLGkscyl7Zm9yKGxldCBhPW47YTxpO2ErKyl7Y29uc3Qgbj1yLmdldChhKSxpPXRoaXMuZ2V0U3ltYm9sSW5zdGFuY2VUZXh0U2l6ZSh0LHMsZSxhKTt0aGlzLl9hZGRDb2xsaXNpb25EZWJ1Z1ZlcnRpY2VzKG4saSx0aGlzLnRleHRDb2xsaXNpb25Cb3gsbi5wcm9qZWN0ZWRBbmNob3JYLG4ucHJvamVjdGVkQW5jaG9yWSxuLnByb2plY3RlZEFuY2hvcloscyk7fX1fYWRkSWNvbkRlYnVnQ29sbGlzaW9uQm94ZXModCxlLHIsbixpLHMpe2ZvcihsZXQgYT1uO2E8aTthKyspe2NvbnN0IG49ci5nZXQoYSksaT10aGlzLmdldFN5bWJvbEluc3RhbmNlSWNvblNpemUodCxlLHMucGxhY2VkSWNvblN5bWJvbEluZGV4KTt0aGlzLl9hZGRDb2xsaXNpb25EZWJ1Z1ZlcnRpY2VzKG4saSx0aGlzLmljb25Db2xsaXNpb25Cb3gsbi5wcm9qZWN0ZWRBbmNob3JYLG4ucHJvamVjdGVkQW5jaG9yWSxuLnByb2plY3RlZEFuY2hvcloscyk7fX1nZW5lcmF0ZUNvbGxpc2lvbkRlYnVnQnVmZmVycyh0LGUpe3RoaXMuaGFzRGVidWdEYXRhKCkmJnRoaXMuZGVzdHJveURlYnVnRGF0YSgpLHRoaXMudGV4dENvbGxpc2lvbkJveD1uZXcgYWYoV3MsTGgubWVtYmVycyxsYSksdGhpcy5pY29uQ29sbGlzaW9uQm94PW5ldyBhZihXcyxMaC5tZW1iZXJzLGxhKTtjb25zdCByPU9oKHRoaXMuaWNvblNpemVEYXRhLHQpLG49T2godGhpcy50ZXh0U2l6ZURhdGEsdCk7Zm9yKGxldCBpPTA7aTx0aGlzLnN5bWJvbEluc3RhbmNlcy5sZW5ndGg7aSsrKXtjb25zdCBzPXRoaXMuc3ltYm9sSW5zdGFuY2VzLmdldChpKTt0aGlzLl9hZGRUZXh0RGVidWdDb2xsaXNpb25Cb3hlcyhuLHQsZSxzLnRleHRCb3hTdGFydEluZGV4LHMudGV4dEJveEVuZEluZGV4LHMpLHRoaXMuX2FkZFRleHREZWJ1Z0NvbGxpc2lvbkJveGVzKG4sdCxlLHMudmVydGljYWxUZXh0Qm94U3RhcnRJbmRleCxzLnZlcnRpY2FsVGV4dEJveEVuZEluZGV4LHMpLHRoaXMuX2FkZEljb25EZWJ1Z0NvbGxpc2lvbkJveGVzKHIsdCxlLHMuaWNvbkJveFN0YXJ0SW5kZXgscy5pY29uQm94RW5kSW5kZXgscyksdGhpcy5fYWRkSWNvbkRlYnVnQ29sbGlzaW9uQm94ZXMocix0LGUscy52ZXJ0aWNhbEljb25Cb3hTdGFydEluZGV4LHMudmVydGljYWxJY29uQm94RW5kSW5kZXgscyk7fX1nZXRTeW1ib2xJbnN0YW5jZVRleHRTaXplKHQsZSxyLG4pe2NvbnN0IGk9dGhpcy50ZXh0LnBsYWNlZFN5bWJvbEFycmF5LmdldChlLnJpZ2h0SnVzdGlmaWVkVGV4dFN5bWJvbEluZGV4Pj0wP2UucmlnaHRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6ZS5jZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg+PTA/ZS5jZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6ZS5sZWZ0SnVzdGlmaWVkVGV4dFN5bWJvbEluZGV4Pj0wP2UubGVmdEp1c3RpZmllZFRleHRTeW1ib2xJbmRleDplLnZlcnRpY2FsUGxhY2VkVGV4dFN5bWJvbEluZGV4Pj0wP2UudmVydGljYWxQbGFjZWRUZXh0U3ltYm9sSW5kZXg6bikscz1qaCh0aGlzLnRleHRTaXplRGF0YSx0LGkpL1JoO3JldHVybiB0aGlzLnRpbGVQaXhlbFJhdGlvKnN9Z2V0U3ltYm9sSW5zdGFuY2VJY29uU2l6ZSh0LGUscil7Y29uc3Qgbj10aGlzLmljb24ucGxhY2VkU3ltYm9sQXJyYXkuZ2V0KHIpLGk9amgodGhpcy5pY29uU2l6ZURhdGEsdCxuKTtyZXR1cm4gdGhpcy50aWxlUGl4ZWxSYXRpbyppfV9jb21taXREZWJ1Z0NvbGxpc2lvblZlcnRleFVwZGF0ZSh0LGUscil7dC5lbXBsYWNlQmFjayhlLC1yLC1yKSx0LmVtcGxhY2VCYWNrKGUsciwtciksdC5lbXBsYWNlQmFjayhlLHIsciksdC5lbXBsYWNlQmFjayhlLC1yLHIpO31fdXBkYXRlVGV4dERlYnVnQ29sbGlzaW9uQm94ZXModCxlLHIsbixpLHMpe2ZvcihsZXQgYT1uO2E8aTthKyspe2NvbnN0IG49ci5nZXQoYSksaT10aGlzLmdldFN5bWJvbEluc3RhbmNlVGV4dFNpemUodCxzLGUsYSk7dGhpcy5fY29tbWl0RGVidWdDb2xsaXNpb25WZXJ0ZXhVcGRhdGUodGhpcy50ZXh0Q29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5RXh0LGksbi5wYWRkaW5nKTt9fV91cGRhdGVJY29uRGVidWdDb2xsaXNpb25Cb3hlcyh0LGUscixuLGkscyl7Zm9yKGxldCBhPW47YTxpO2ErKyl7Y29uc3Qgbj1yLmdldChhKSxpPXRoaXMuZ2V0U3ltYm9sSW5zdGFuY2VJY29uU2l6ZSh0LGUscyk7dGhpcy5fY29tbWl0RGVidWdDb2xsaXNpb25WZXJ0ZXhVcGRhdGUodGhpcy5pY29uQ29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5RXh0LGksbi5wYWRkaW5nKTt9fXVwZGF0ZUNvbGxpc2lvbkRlYnVnQnVmZmVycyh0LGUpe2lmKCF0aGlzLmhhc0RlYnVnRGF0YSgpKXJldHVybjt0aGlzLmhhc1RleHRDb2xsaXNpb25Cb3hEYXRhKCkmJnRoaXMudGV4dENvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhBcnJheUV4dC5jbGVhcigpLHRoaXMuaGFzSWNvbkNvbGxpc2lvbkJveERhdGEoKSYmdGhpcy5pY29uQ29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5RXh0LmNsZWFyKCk7Y29uc3Qgcj1PaCh0aGlzLmljb25TaXplRGF0YSx0KSxuPU9oKHRoaXMudGV4dFNpemVEYXRhLHQpO2ZvcihsZXQgaT0wO2k8dGhpcy5zeW1ib2xJbnN0YW5jZXMubGVuZ3RoO2krKyl7Y29uc3Qgcz10aGlzLnN5bWJvbEluc3RhbmNlcy5nZXQoaSk7dGhpcy5fdXBkYXRlVGV4dERlYnVnQ29sbGlzaW9uQm94ZXMobix0LGUscy50ZXh0Qm94U3RhcnRJbmRleCxzLnRleHRCb3hFbmRJbmRleCxzKSx0aGlzLl91cGRhdGVUZXh0RGVidWdDb2xsaXNpb25Cb3hlcyhuLHQsZSxzLnZlcnRpY2FsVGV4dEJveFN0YXJ0SW5kZXgscy52ZXJ0aWNhbFRleHRCb3hFbmRJbmRleCxzKSx0aGlzLl91cGRhdGVJY29uRGVidWdDb2xsaXNpb25Cb3hlcyhyLHQsZSxzLmljb25Cb3hTdGFydEluZGV4LHMuaWNvbkJveEVuZEluZGV4LHMucGxhY2VkSWNvblN5bWJvbEluZGV4KSx0aGlzLl91cGRhdGVJY29uRGVidWdDb2xsaXNpb25Cb3hlcyhyLHQsZSxzLnZlcnRpY2FsSWNvbkJveFN0YXJ0SW5kZXgscy52ZXJ0aWNhbEljb25Cb3hFbmRJbmRleCxzLnBsYWNlZEljb25TeW1ib2xJbmRleCk7fXRoaXMuaGFzVGV4dENvbGxpc2lvbkJveERhdGEoKSYmdGhpcy50ZXh0Q29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEJ1ZmZlckV4dCYmdGhpcy50ZXh0Q29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEJ1ZmZlckV4dC51cGRhdGVEYXRhKHRoaXMudGV4dENvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhBcnJheUV4dCksdGhpcy5oYXNJY29uQ29sbGlzaW9uQm94RGF0YSgpJiZ0aGlzLmljb25Db2xsaXNpb25Cb3guY29sbGlzaW9uVmVydGV4QnVmZmVyRXh0JiZ0aGlzLmljb25Db2xsaXNpb25Cb3guY29sbGlzaW9uVmVydGV4QnVmZmVyRXh0LnVwZGF0ZURhdGEodGhpcy5pY29uQ29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5RXh0KTt9X2Rlc2VyaWFsaXplQ29sbGlzaW9uQm94ZXNGb3JTeW1ib2wodCxlLHIsbixpLHMsYSxvLGwpe2NvbnN0IHU9e307aWYoZTxyKXtjb25zdHt4MTpyLHkxOm4seDI6aSx5MjpzLHBhZGRpbmc6YSxwcm9qZWN0ZWRBbmNob3JYOm8scHJvamVjdGVkQW5jaG9yWTpsLHByb2plY3RlZEFuY2hvclo6Yyx0aWxlQW5jaG9yWDpoLHRpbGVBbmNob3JZOnAsZmVhdHVyZUluZGV4OmR9PXQuZ2V0KGUpO3UudGV4dEJveD17eDE6cix5MTpuLHgyOmkseTI6cyxwYWRkaW5nOmEscHJvamVjdGVkQW5jaG9yWDpvLHByb2plY3RlZEFuY2hvclk6bCxwcm9qZWN0ZWRBbmNob3JaOmMsdGlsZUFuY2hvclg6aCx0aWxlQW5jaG9yWTpwfSx1LnRleHRGZWF0dXJlSW5kZXg9ZDt9aWYobjxpKXtjb25zdHt4MTplLHkxOnIseDI6aSx5MjpzLHBhZGRpbmc6YSxwcm9qZWN0ZWRBbmNob3JYOm8scHJvamVjdGVkQW5jaG9yWTpsLHByb2plY3RlZEFuY2hvclo6Yyx0aWxlQW5jaG9yWDpoLHRpbGVBbmNob3JZOnAsZmVhdHVyZUluZGV4OmR9PXQuZ2V0KG4pO3UudmVydGljYWxUZXh0Qm94PXt4MTplLHkxOnIseDI6aSx5MjpzLHBhZGRpbmc6YSxwcm9qZWN0ZWRBbmNob3JYOm8scHJvamVjdGVkQW5jaG9yWTpsLHByb2plY3RlZEFuY2hvclo6Yyx0aWxlQW5jaG9yWDpoLHRpbGVBbmNob3JZOnB9LHUudmVydGljYWxUZXh0RmVhdHVyZUluZGV4PWQ7fWlmKHM8YSl7Y29uc3R7eDE6ZSx5MTpyLHgyOm4seTI6aSxwYWRkaW5nOmEscHJvamVjdGVkQW5jaG9yWDpvLHByb2plY3RlZEFuY2hvclk6bCxwcm9qZWN0ZWRBbmNob3JaOmMsdGlsZUFuY2hvclg6aCx0aWxlQW5jaG9yWTpwLGZlYXR1cmVJbmRleDpkfT10LmdldChzKTt1Lmljb25Cb3g9e3gxOmUseTE6cix4MjpuLHkyOmkscGFkZGluZzphLHByb2plY3RlZEFuY2hvclg6byxwcm9qZWN0ZWRBbmNob3JZOmwscHJvamVjdGVkQW5jaG9yWjpjLHRpbGVBbmNob3JYOmgsdGlsZUFuY2hvclk6cH0sdS5pY29uRmVhdHVyZUluZGV4PWQ7fWlmKG88bCl7Y29uc3R7eDE6ZSx5MTpyLHgyOm4seTI6aSxwYWRkaW5nOnMscHJvamVjdGVkQW5jaG9yWDphLHByb2plY3RlZEFuY2hvclk6bCxwcm9qZWN0ZWRBbmNob3JaOmMsdGlsZUFuY2hvclg6aCx0aWxlQW5jaG9yWTpwLGZlYXR1cmVJbmRleDpkfT10LmdldChvKTt1LnZlcnRpY2FsSWNvbkJveD17eDE6ZSx5MTpyLHgyOm4seTI6aSxwYWRkaW5nOnMscHJvamVjdGVkQW5jaG9yWDphLHByb2plY3RlZEFuY2hvclk6bCxwcm9qZWN0ZWRBbmNob3JaOmMsdGlsZUFuY2hvclg6aCx0aWxlQW5jaG9yWTpwfSx1LnZlcnRpY2FsSWNvbkZlYXR1cmVJbmRleD1kO31yZXR1cm4gdX1kZXNlcmlhbGl6ZUNvbGxpc2lvbkJveGVzKHQpe3RoaXMuY29sbGlzaW9uQXJyYXlzPVtdO2ZvcihsZXQgZT0wO2U8dGhpcy5zeW1ib2xJbnN0YW5jZXMubGVuZ3RoO2UrKyl7Y29uc3Qgcj10aGlzLnN5bWJvbEluc3RhbmNlcy5nZXQoZSk7dGhpcy5jb2xsaXNpb25BcnJheXMucHVzaCh0aGlzLl9kZXNlcmlhbGl6ZUNvbGxpc2lvbkJveGVzRm9yU3ltYm9sKHQsci50ZXh0Qm94U3RhcnRJbmRleCxyLnRleHRCb3hFbmRJbmRleCxyLnZlcnRpY2FsVGV4dEJveFN0YXJ0SW5kZXgsci52ZXJ0aWNhbFRleHRCb3hFbmRJbmRleCxyLmljb25Cb3hTdGFydEluZGV4LHIuaWNvbkJveEVuZEluZGV4LHIudmVydGljYWxJY29uQm94U3RhcnRJbmRleCxyLnZlcnRpY2FsSWNvbkJveEVuZEluZGV4KSk7fX1oYXNUZXh0RGF0YSgpe3JldHVybiB0aGlzLnRleHQuc2VnbWVudHMuZ2V0KCkubGVuZ3RoPjB9aGFzSWNvbkRhdGEoKXtyZXR1cm4gdGhpcy5pY29uLnNlZ21lbnRzLmdldCgpLmxlbmd0aD4wfWhhc0RlYnVnRGF0YSgpe3JldHVybiB0aGlzLnRleHRDb2xsaXNpb25Cb3gmJnRoaXMuaWNvbkNvbGxpc2lvbkJveH1oYXNUZXh0Q29sbGlzaW9uQm94RGF0YSgpe3JldHVybiB0aGlzLmhhc0RlYnVnRGF0YSgpJiZ0aGlzLnRleHRDb2xsaXNpb25Cb3guc2VnbWVudHMuZ2V0KCkubGVuZ3RoPjB9aGFzSWNvbkNvbGxpc2lvbkJveERhdGEoKXtyZXR1cm4gdGhpcy5oYXNEZWJ1Z0RhdGEoKSYmdGhpcy5pY29uQ29sbGlzaW9uQm94LnNlZ21lbnRzLmdldCgpLmxlbmd0aD4wfWFkZEluZGljZXNGb3JQbGFjZWRTeW1ib2wodCxlKXtjb25zdCByPXQucGxhY2VkU3ltYm9sQXJyYXkuZ2V0KGUpLG49ci52ZXJ0ZXhTdGFydEluZGV4KzQqci5udW1HbHlwaHM7Zm9yKGxldCBlPXIudmVydGV4U3RhcnRJbmRleDtlPG47ZSs9NCl0LmluZGV4QXJyYXkuZW1wbGFjZUJhY2soZSxlKzEsZSsyKSx0LmluZGV4QXJyYXkuZW1wbGFjZUJhY2soZSsxLGUrMixlKzMpO31nZXRTb3J0ZWRTeW1ib2xJbmRleGVzKHQpe2lmKHRoaXMuc29ydGVkQW5nbGU9PT10JiZ2b2lkIDAhPT10aGlzLnN5bWJvbEluc3RhbmNlSW5kZXhlcylyZXR1cm4gdGhpcy5zeW1ib2xJbnN0YW5jZUluZGV4ZXM7Y29uc3QgZT1NYXRoLnNpbih0KSxyPU1hdGguY29zKHQpLG49W10saT1bXSxzPVtdO2ZvcihsZXQgdD0wO3Q8dGhpcy5zeW1ib2xJbnN0YW5jZXMubGVuZ3RoOysrdCl7cy5wdXNoKHQpO2NvbnN0IGE9dGhpcy5zeW1ib2xJbnN0YW5jZXMuZ2V0KHQpO24ucHVzaCgwfE1hdGgucm91bmQoZSphLnRpbGVBbmNob3JYK3IqYS50aWxlQW5jaG9yWSkpLGkucHVzaChhLmZlYXR1cmVJbmRleCk7fXJldHVybiBzLnNvcnQoKCh0LGUpPT5uW3RdLW5bZV18fGlbZV0taVt0XSkpLHN9YWRkVG9Tb3J0S2V5UmFuZ2VzKHQsZSl7Y29uc3Qgcj10aGlzLnNvcnRLZXlSYW5nZXNbdGhpcy5zb3J0S2V5UmFuZ2VzLmxlbmd0aC0xXTtyJiZyLnNvcnRLZXk9PT1lP3Iuc3ltYm9sSW5zdGFuY2VFbmQ9dCsxOnRoaXMuc29ydEtleVJhbmdlcy5wdXNoKHtzb3J0S2V5OmUsc3ltYm9sSW5zdGFuY2VTdGFydDp0LHN5bWJvbEluc3RhbmNlRW5kOnQrMX0pO31zb3J0RmVhdHVyZXModCl7aWYodGhpcy5zb3J0RmVhdHVyZXNCeVkmJnRoaXMuc29ydGVkQW5nbGUhPT10JiYhKHRoaXMudGV4dC5zZWdtZW50cy5nZXQoKS5sZW5ndGg+MXx8dGhpcy5pY29uLnNlZ21lbnRzLmdldCgpLmxlbmd0aD4xKSl7dGhpcy5zeW1ib2xJbnN0YW5jZUluZGV4ZXM9dGhpcy5nZXRTb3J0ZWRTeW1ib2xJbmRleGVzKHQpLHRoaXMuc29ydGVkQW5nbGU9dCx0aGlzLnRleHQuaW5kZXhBcnJheS5jbGVhcigpLHRoaXMuaWNvbi5pbmRleEFycmF5LmNsZWFyKCksdGhpcy5mZWF0dXJlU29ydE9yZGVyPVtdO2Zvcihjb25zdCB0IG9mIHRoaXMuc3ltYm9sSW5zdGFuY2VJbmRleGVzKXtjb25zdCBlPXRoaXMuc3ltYm9sSW5zdGFuY2VzLmdldCh0KTt0aGlzLmZlYXR1cmVTb3J0T3JkZXIucHVzaChlLmZlYXR1cmVJbmRleCk7Y29uc3R7cmlnaHRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6cixjZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6bixsZWZ0SnVzdGlmaWVkVGV4dFN5bWJvbEluZGV4OmksdmVydGljYWxQbGFjZWRUZXh0U3ltYm9sSW5kZXg6cyxwbGFjZWRJY29uU3ltYm9sSW5kZXg6YSx2ZXJ0aWNhbFBsYWNlZEljb25TeW1ib2xJbmRleDpvfT1lO3I+PTAmJnRoaXMuYWRkSW5kaWNlc0ZvclBsYWNlZFN5bWJvbCh0aGlzLnRleHQsciksbj49MCYmbiE9PXImJnRoaXMuYWRkSW5kaWNlc0ZvclBsYWNlZFN5bWJvbCh0aGlzLnRleHQsbiksaT49MCYmaSE9PW4mJmkhPT1yJiZ0aGlzLmFkZEluZGljZXNGb3JQbGFjZWRTeW1ib2wodGhpcy50ZXh0LGkpLHM+PTAmJnRoaXMuYWRkSW5kaWNlc0ZvclBsYWNlZFN5bWJvbCh0aGlzLnRleHQscyksYT49MCYmdGhpcy5hZGRJbmRpY2VzRm9yUGxhY2VkU3ltYm9sKHRoaXMuaWNvbixhKSxvPj0wJiZ0aGlzLmFkZEluZGljZXNGb3JQbGFjZWRTeW1ib2wodGhpcy5pY29uLG8pO310aGlzLnRleHQuaW5kZXhCdWZmZXImJnRoaXMudGV4dC5pbmRleEJ1ZmZlci51cGRhdGVEYXRhKHRoaXMudGV4dC5pbmRleEFycmF5KSx0aGlzLmljb24uaW5kZXhCdWZmZXImJnRoaXMuaWNvbi5pbmRleEJ1ZmZlci51cGRhdGVEYXRhKHRoaXMuaWNvbi5pbmRleEFycmF5KTt9fX1KaShvZixcIlN5bWJvbEJ1Y2tldFwiLHtvbWl0OltcImxheWVyc1wiLFwiY29sbGlzaW9uQm94QXJyYXlcIixcImZlYXR1cmVzXCIsXCJjb21wYXJlVGV4dFwiXX0pLG9mLk1BWF9HTFlQSFM9NjU1MzUsb2YuYWRkRHluYW1pY0F0dHJpYnV0ZXM9cmY7Y29uc3QgbGY9bmV3IFBzKHtcInN5bWJvbC1wbGFjZW1lbnRcIjpuZXcgQnModGUubGF5b3V0X3N5bWJvbFtcInN5bWJvbC1wbGFjZW1lbnRcIl0pLFwic3ltYm9sLXNwYWNpbmdcIjpuZXcgQnModGUubGF5b3V0X3N5bWJvbFtcInN5bWJvbC1zcGFjaW5nXCJdKSxcInN5bWJvbC1hdm9pZC1lZGdlc1wiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1wic3ltYm9sLWF2b2lkLWVkZ2VzXCJdKSxcInN5bWJvbC1zb3J0LWtleVwiOm5ldyBFcyh0ZS5sYXlvdXRfc3ltYm9sW1wic3ltYm9sLXNvcnQta2V5XCJdKSxcInN5bWJvbC16LW9yZGVyXCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJzeW1ib2wtei1vcmRlclwiXSksXCJpY29uLWFsbG93LW92ZXJsYXBcIjpuZXcgQnModGUubGF5b3V0X3N5bWJvbFtcImljb24tYWxsb3ctb3ZlcmxhcFwiXSksXCJpY29uLWlnbm9yZS1wbGFjZW1lbnRcIjpuZXcgQnModGUubGF5b3V0X3N5bWJvbFtcImljb24taWdub3JlLXBsYWNlbWVudFwiXSksXCJpY29uLW9wdGlvbmFsXCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJpY29uLW9wdGlvbmFsXCJdKSxcImljb24tcm90YXRpb24tYWxpZ25tZW50XCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiXSksXCJpY29uLXNpemVcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcImljb24tc2l6ZVwiXSksXCJpY29uLXRleHQtZml0XCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJpY29uLXRleHQtZml0XCJdKSxcImljb24tdGV4dC1maXQtcGFkZGluZ1wiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1wiaWNvbi10ZXh0LWZpdC1wYWRkaW5nXCJdKSxcImljb24taW1hZ2VcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcImljb24taW1hZ2VcIl0pLFwiaWNvbi1yb3RhdGVcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcImljb24tcm90YXRlXCJdKSxcImljb24tcGFkZGluZ1wiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1wiaWNvbi1wYWRkaW5nXCJdKSxcImljb24ta2VlcC11cHJpZ2h0XCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJpY29uLWtlZXAtdXByaWdodFwiXSksXCJpY29uLW9mZnNldFwiOm5ldyBFcyh0ZS5sYXlvdXRfc3ltYm9sW1wiaWNvbi1vZmZzZXRcIl0pLFwiaWNvbi1hbmNob3JcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcImljb24tYW5jaG9yXCJdKSxcImljb24tcGl0Y2gtYWxpZ25tZW50XCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJpY29uLXBpdGNoLWFsaWdubWVudFwiXSksXCJ0ZXh0LXBpdGNoLWFsaWdubWVudFwiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC1waXRjaC1hbGlnbm1lbnRcIl0pLFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIjpuZXcgQnModGUubGF5b3V0X3N5bWJvbFtcInRleHQtcm90YXRpb24tYWxpZ25tZW50XCJdKSxcInRleHQtZmllbGRcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtZmllbGRcIl0pLFwidGV4dC1mb250XCI6bmV3IEVzKHRlLmxheW91dF9zeW1ib2xbXCJ0ZXh0LWZvbnRcIl0pLFwidGV4dC1zaXplXCI6bmV3IEVzKHRlLmxheW91dF9zeW1ib2xbXCJ0ZXh0LXNpemVcIl0pLFwidGV4dC1tYXgtd2lkdGhcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtbWF4LXdpZHRoXCJdKSxcInRleHQtbGluZS1oZWlnaHRcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtbGluZS1oZWlnaHRcIl0pLFwidGV4dC1sZXR0ZXItc3BhY2luZ1wiOm5ldyBFcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC1sZXR0ZXItc3BhY2luZ1wiXSksXCJ0ZXh0LWp1c3RpZnlcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtanVzdGlmeVwiXSksXCJ0ZXh0LXJhZGlhbC1vZmZzZXRcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtcmFkaWFsLW9mZnNldFwiXSksXCJ0ZXh0LXZhcmlhYmxlLWFuY2hvclwiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC12YXJpYWJsZS1hbmNob3JcIl0pLFwidGV4dC1hbmNob3JcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtYW5jaG9yXCJdKSxcInRleHQtbWF4LWFuZ2xlXCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJ0ZXh0LW1heC1hbmdsZVwiXSksXCJ0ZXh0LXdyaXRpbmctbW9kZVwiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC13cml0aW5nLW1vZGVcIl0pLFwidGV4dC1yb3RhdGVcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtcm90YXRlXCJdKSxcInRleHQtcGFkZGluZ1wiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC1wYWRkaW5nXCJdKSxcInRleHQta2VlcC11cHJpZ2h0XCI6bmV3IEJzKHRlLmxheW91dF9zeW1ib2xbXCJ0ZXh0LWtlZXAtdXByaWdodFwiXSksXCJ0ZXh0LXRyYW5zZm9ybVwiOm5ldyBFcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC10cmFuc2Zvcm1cIl0pLFwidGV4dC1vZmZzZXRcIjpuZXcgRXModGUubGF5b3V0X3N5bWJvbFtcInRleHQtb2Zmc2V0XCJdKSxcInRleHQtYWxsb3ctb3ZlcmxhcFwiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC1hbGxvdy1vdmVybGFwXCJdKSxcInRleHQtaWdub3JlLXBsYWNlbWVudFwiOm5ldyBCcyh0ZS5sYXlvdXRfc3ltYm9sW1widGV4dC1pZ25vcmUtcGxhY2VtZW50XCJdKSxcInRleHQtb3B0aW9uYWxcIjpuZXcgQnModGUubGF5b3V0X3N5bWJvbFtcInRleHQtb3B0aW9uYWxcIl0pfSk7dmFyIHVmPXtwYWludDpuZXcgUHMoe1wiaWNvbi1vcGFjaXR5XCI6bmV3IEVzKHRlLnBhaW50X3N5bWJvbFtcImljb24tb3BhY2l0eVwiXSksXCJpY29uLWNvbG9yXCI6bmV3IEVzKHRlLnBhaW50X3N5bWJvbFtcImljb24tY29sb3JcIl0pLFwiaWNvbi1oYWxvLWNvbG9yXCI6bmV3IEVzKHRlLnBhaW50X3N5bWJvbFtcImljb24taGFsby1jb2xvclwiXSksXCJpY29uLWhhbG8td2lkdGhcIjpuZXcgRXModGUucGFpbnRfc3ltYm9sW1wiaWNvbi1oYWxvLXdpZHRoXCJdKSxcImljb24taGFsby1ibHVyXCI6bmV3IEVzKHRlLnBhaW50X3N5bWJvbFtcImljb24taGFsby1ibHVyXCJdKSxcImljb24tdHJhbnNsYXRlXCI6bmV3IEJzKHRlLnBhaW50X3N5bWJvbFtcImljb24tdHJhbnNsYXRlXCJdKSxcImljb24tdHJhbnNsYXRlLWFuY2hvclwiOm5ldyBCcyh0ZS5wYWludF9zeW1ib2xbXCJpY29uLXRyYW5zbGF0ZS1hbmNob3JcIl0pLFwidGV4dC1vcGFjaXR5XCI6bmV3IEVzKHRlLnBhaW50X3N5bWJvbFtcInRleHQtb3BhY2l0eVwiXSksXCJ0ZXh0LWNvbG9yXCI6bmV3IEVzKHRlLnBhaW50X3N5bWJvbFtcInRleHQtY29sb3JcIl0se3J1bnRpbWVUeXBlOnBlLGdldE92ZXJyaWRlOnQ9PnQudGV4dENvbG9yLGhhc092ZXJyaWRlOnQ9PiEhdC50ZXh0Q29sb3J9KSxcInRleHQtaGFsby1jb2xvclwiOm5ldyBFcyh0ZS5wYWludF9zeW1ib2xbXCJ0ZXh0LWhhbG8tY29sb3JcIl0pLFwidGV4dC1oYWxvLXdpZHRoXCI6bmV3IEVzKHRlLnBhaW50X3N5bWJvbFtcInRleHQtaGFsby13aWR0aFwiXSksXCJ0ZXh0LWhhbG8tYmx1clwiOm5ldyBFcyh0ZS5wYWludF9zeW1ib2xbXCJ0ZXh0LWhhbG8tYmx1clwiXSksXCJ0ZXh0LXRyYW5zbGF0ZVwiOm5ldyBCcyh0ZS5wYWludF9zeW1ib2xbXCJ0ZXh0LXRyYW5zbGF0ZVwiXSksXCJ0ZXh0LXRyYW5zbGF0ZS1hbmNob3JcIjpuZXcgQnModGUucGFpbnRfc3ltYm9sW1widGV4dC10cmFuc2xhdGUtYW5jaG9yXCJdKX0pLGxheW91dDpsZn07Y2xhc3MgY2Z7Y29uc3RydWN0b3IodCl7dGhpcy50eXBlPXQucHJvcGVydHkub3ZlcnJpZGVzP3QucHJvcGVydHkub3ZlcnJpZGVzLnJ1bnRpbWVUeXBlOmxlLHRoaXMuZGVmYXVsdFZhbHVlPXQ7fWV2YWx1YXRlKHQpe2lmKHQuZm9ybWF0dGVkU2VjdGlvbil7Y29uc3QgZT10aGlzLmRlZmF1bHRWYWx1ZS5wcm9wZXJ0eS5vdmVycmlkZXM7aWYoZSYmZS5oYXNPdmVycmlkZSh0LmZvcm1hdHRlZFNlY3Rpb24pKXJldHVybiBlLmdldE92ZXJyaWRlKHQuZm9ybWF0dGVkU2VjdGlvbil9cmV0dXJuIHQuZmVhdHVyZSYmdC5mZWF0dXJlU3RhdGU/dGhpcy5kZWZhdWx0VmFsdWUuZXZhbHVhdGUodC5mZWF0dXJlLHQuZmVhdHVyZVN0YXRlKTp0aGlzLmRlZmF1bHRWYWx1ZS5wcm9wZXJ0eS5zcGVjaWZpY2F0aW9uLmRlZmF1bHR9ZWFjaENoaWxkKHQpe3RoaXMuZGVmYXVsdFZhbHVlLmlzQ29uc3RhbnQoKXx8dCh0aGlzLmRlZmF1bHRWYWx1ZS52YWx1ZS5fc3R5bGVFeHByZXNzaW9uLmV4cHJlc3Npb24pO31vdXRwdXREZWZpbmVkKCl7cmV0dXJuICExfXNlcmlhbGl6ZSgpe3JldHVybiBudWxsfX1KaShjZixcIkZvcm1hdFNlY3Rpb25PdmVycmlkZVwiLHtvbWl0OltcImRlZmF1bHRWYWx1ZVwiXX0pO2NsYXNzIGhmIGV4dGVuZHMgcm97Y29uc3RydWN0b3IodCl7c3VwZXIodCx1Zik7fXJlY2FsY3VsYXRlKHQsZSl7c3VwZXIucmVjYWxjdWxhdGUodCxlKSxcImF1dG9cIj09PXRoaXMubGF5b3V0LmdldChcImljb24tcm90YXRpb24tYWxpZ25tZW50XCIpJiYodGhpcy5sYXlvdXQuX3ZhbHVlc1tcImljb24tcm90YXRpb24tYWxpZ25tZW50XCJdPVwicG9pbnRcIiE9PXRoaXMubGF5b3V0LmdldChcInN5bWJvbC1wbGFjZW1lbnRcIik/XCJtYXBcIjpcInZpZXdwb3J0XCIpLFwiYXV0b1wiPT09dGhpcy5sYXlvdXQuZ2V0KFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIikmJih0aGlzLmxheW91dC5fdmFsdWVzW1widGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIl09XCJwb2ludFwiIT09dGhpcy5sYXlvdXQuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKT9cIm1hcFwiOlwidmlld3BvcnRcIiksXCJhdXRvXCI9PT10aGlzLmxheW91dC5nZXQoXCJ0ZXh0LXBpdGNoLWFsaWdubWVudFwiKSYmKHRoaXMubGF5b3V0Ll92YWx1ZXNbXCJ0ZXh0LXBpdGNoLWFsaWdubWVudFwiXT10aGlzLmxheW91dC5nZXQoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiKSksXCJhdXRvXCI9PT10aGlzLmxheW91dC5nZXQoXCJpY29uLXBpdGNoLWFsaWdubWVudFwiKSYmKHRoaXMubGF5b3V0Ll92YWx1ZXNbXCJpY29uLXBpdGNoLWFsaWdubWVudFwiXT10aGlzLmxheW91dC5nZXQoXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiKSk7Y29uc3Qgcj10aGlzLmxheW91dC5nZXQoXCJ0ZXh0LXdyaXRpbmctbW9kZVwiKTtpZihyKXtjb25zdCB0PVtdO2Zvcihjb25zdCBlIG9mIHIpdC5pbmRleE9mKGUpPDAmJnQucHVzaChlKTt0aGlzLmxheW91dC5fdmFsdWVzW1widGV4dC13cml0aW5nLW1vZGVcIl09dDt9ZWxzZSB0aGlzLmxheW91dC5fdmFsdWVzW1widGV4dC13cml0aW5nLW1vZGVcIl09XCJwb2ludFwiPT09dGhpcy5sYXlvdXQuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKT9bXCJob3Jpem9udGFsXCJdOltcImhvcml6b250YWxcIixcInZlcnRpY2FsXCJdO3RoaXMuX3NldFBhaW50T3ZlcnJpZGVzKCk7fWdldFZhbHVlQW5kUmVzb2x2ZVRva2Vucyh0LGUscixuKXtjb25zdCBpPXRoaXMubGF5b3V0LmdldCh0KS5ldmFsdWF0ZShlLHt9LHIsbikscz10aGlzLl91bmV2YWx1YXRlZExheW91dC5fdmFsdWVzW3RdO3JldHVybiBzLmlzRGF0YURyaXZlbigpfHxKbihzLnZhbHVlKXx8IWk/aTpmdW5jdGlvbih0LGUpe3JldHVybiBlLnJlcGxhY2UoL3soW157fV0rKX0vZywoKGUscik9PnIgaW4gdD9TdHJpbmcodFtyXSk6XCJcIikpfShlLnByb3BlcnRpZXMsaSl9Y3JlYXRlQnVja2V0KHQpe3JldHVybiBuZXcgb2YodCl9cXVlcnlSYWRpdXMoKXtyZXR1cm4gMH1xdWVyeUludGVyc2VjdHNGZWF0dXJlKCl7cmV0dXJuICExfV9zZXRQYWludE92ZXJyaWRlcygpe2Zvcihjb25zdCB0IG9mIHVmLnBhaW50Lm92ZXJyaWRhYmxlUHJvcGVydGllcyl7aWYoIWhmLmhhc1BhaW50T3ZlcnJpZGUodGhpcy5sYXlvdXQsdCkpY29udGludWU7Y29uc3QgZT10aGlzLnBhaW50LmdldCh0KSxyPW5ldyBjZihlKSxuPW5ldyBYbihyLGUucHJvcGVydHkuc3BlY2lmaWNhdGlvbik7bGV0IGk9bnVsbDtpPVwiY29uc3RhbnRcIj09PWUudmFsdWUua2luZHx8XCJzb3VyY2VcIj09PWUudmFsdWUua2luZD9uZXcgWW4oXCJzb3VyY2VcIixuKTpuZXcgV24oXCJjb21wb3NpdGVcIixuLGUudmFsdWUuem9vbVN0b3BzLGUudmFsdWUuX2ludGVycG9sYXRpb25UeXBlKSx0aGlzLnBhaW50Ll92YWx1ZXNbdF09bmV3IFRzKGUucHJvcGVydHksaSxlLnBhcmFtZXRlcnMpO319X2hhbmRsZU92ZXJyaWRhYmxlUGFpbnRQcm9wZXJ0eVVwZGF0ZSh0LGUscil7cmV0dXJuICEoIXRoaXMubGF5b3V0fHxlLmlzRGF0YURyaXZlbigpfHxyLmlzRGF0YURyaXZlbigpKSYmaGYuaGFzUGFpbnRPdmVycmlkZSh0aGlzLmxheW91dCx0KX1zdGF0aWMgaGFzUGFpbnRPdmVycmlkZSh0LGUpe2NvbnN0IHI9dC5nZXQoXCJ0ZXh0LWZpZWxkXCIpLG49dWYucGFpbnQucHJvcGVydGllc1tlXTtsZXQgaT0hMTtjb25zdCBzPXQ9Pntmb3IoY29uc3QgZSBvZiB0KWlmKG4ub3ZlcnJpZGVzJiZuLm92ZXJyaWRlcy5oYXNPdmVycmlkZShlKSlyZXR1cm4gdm9pZChpPSEwKX07aWYoXCJjb25zdGFudFwiPT09ci52YWx1ZS5raW5kJiZyLnZhbHVlLnZhbHVlIGluc3RhbmNlb2YgRGUpcyhyLnZhbHVlLnZhbHVlLnNlY3Rpb25zKTtlbHNlIGlmKFwic291cmNlXCI9PT1yLnZhbHVlLmtpbmQpe2NvbnN0IHQ9ZT0+e2l8fChlIGluc3RhbmNlb2YgamUmJlJlKGUudmFsdWUpPT09bWU/cyhlLnZhbHVlLnNlY3Rpb25zKTplIGluc3RhbmNlb2YgWmU/cyhlLnNlY3Rpb25zKTplLmVhY2hDaGlsZCh0KSk7fSxlPXIudmFsdWU7ZS5fc3R5bGVFeHByZXNzaW9uJiZ0KGUuX3N0eWxlRXhwcmVzc2lvbi5leHByZXNzaW9uKTt9cmV0dXJuIGl9Z2V0UHJvZ3JhbUNvbmZpZ3VyYXRpb24odCl7cmV0dXJuIG5ldyBYYSh0aGlzLHQpfX12YXIgcGY9e3BhaW50Om5ldyBQcyh7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6bmV3IEJzKHRlLnBhaW50X2JhY2tncm91bmRbXCJiYWNrZ3JvdW5kLWNvbG9yXCJdKSxcImJhY2tncm91bmQtcGF0dGVyblwiOm5ldyBCcyh0ZS5wYWludF9iYWNrZ3JvdW5kW1wiYmFja2dyb3VuZC1wYXR0ZXJuXCJdKSxcImJhY2tncm91bmQtb3BhY2l0eVwiOm5ldyBCcyh0ZS5wYWludF9iYWNrZ3JvdW5kW1wiYmFja2dyb3VuZC1vcGFjaXR5XCJdKX0pfSxkZj17cGFpbnQ6bmV3IFBzKHtcInJhc3Rlci1vcGFjaXR5XCI6bmV3IEJzKHRlLnBhaW50X3Jhc3RlcltcInJhc3Rlci1vcGFjaXR5XCJdKSxcInJhc3Rlci1odWUtcm90YXRlXCI6bmV3IEJzKHRlLnBhaW50X3Jhc3RlcltcInJhc3Rlci1odWUtcm90YXRlXCJdKSxcInJhc3Rlci1icmlnaHRuZXNzLW1pblwiOm5ldyBCcyh0ZS5wYWludF9yYXN0ZXJbXCJyYXN0ZXItYnJpZ2h0bmVzcy1taW5cIl0pLFwicmFzdGVyLWJyaWdodG5lc3MtbWF4XCI6bmV3IEJzKHRlLnBhaW50X3Jhc3RlcltcInJhc3Rlci1icmlnaHRuZXNzLW1heFwiXSksXCJyYXN0ZXItc2F0dXJhdGlvblwiOm5ldyBCcyh0ZS5wYWludF9yYXN0ZXJbXCJyYXN0ZXItc2F0dXJhdGlvblwiXSksXCJyYXN0ZXItY29udHJhc3RcIjpuZXcgQnModGUucGFpbnRfcmFzdGVyW1wicmFzdGVyLWNvbnRyYXN0XCJdKSxcInJhc3Rlci1yZXNhbXBsaW5nXCI6bmV3IEJzKHRlLnBhaW50X3Jhc3RlcltcInJhc3Rlci1yZXNhbXBsaW5nXCJdKSxcInJhc3Rlci1mYWRlLWR1cmF0aW9uXCI6bmV3IEJzKHRlLnBhaW50X3Jhc3RlcltcInJhc3Rlci1mYWRlLWR1cmF0aW9uXCJdKX0pfTtjbGFzcyBmZiBleHRlbmRzIHJve2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQse30pLHRoaXMuaW1wbGVtZW50YXRpb249dDt9aXMzRCgpe3JldHVybiBcIjNkXCI9PT10aGlzLmltcGxlbWVudGF0aW9uLnJlbmRlcmluZ01vZGV9aGFzT2Zmc2NyZWVuUGFzcygpe3JldHVybiB2b2lkIDAhPT10aGlzLmltcGxlbWVudGF0aW9uLnByZXJlbmRlcn1pc0xheWVyRHJhcGVkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuaW1wbGVtZW50YXRpb24ucmVuZGVyVG9UaWxlfXNob3VsZFJlZHJhcGUoKXtyZXR1cm4gISF0aGlzLmltcGxlbWVudGF0aW9uLnNob3VsZFJlcmVuZGVyVGlsZXMmJnRoaXMuaW1wbGVtZW50YXRpb24uc2hvdWxkUmVyZW5kZXJUaWxlcygpfXJlY2FsY3VsYXRlKCl7fXVwZGF0ZVRyYW5zaXRpb25zKCl7fWhhc1RyYW5zaXRpb24oKXtyZXR1cm4gITF9c2VyaWFsaXplKCl7fW9uQWRkKHQpe3RoaXMuaW1wbGVtZW50YXRpb24ub25BZGQmJnRoaXMuaW1wbGVtZW50YXRpb24ub25BZGQodCx0LnBhaW50ZXIuY29udGV4dC5nbCk7fW9uUmVtb3ZlKHQpe3RoaXMuaW1wbGVtZW50YXRpb24ub25SZW1vdmUmJnRoaXMuaW1wbGVtZW50YXRpb24ub25SZW1vdmUodCx0LnBhaW50ZXIuY29udGV4dC5nbCk7fX12YXIgeWY9e3BhaW50Om5ldyBQcyh7XCJza3ktdHlwZVwiOm5ldyBCcyh0ZS5wYWludF9za3lbXCJza3ktdHlwZVwiXSksXCJza3ktYXRtb3NwaGVyZS1zdW5cIjpuZXcgQnModGUucGFpbnRfc2t5W1wic2t5LWF0bW9zcGhlcmUtc3VuXCJdKSxcInNreS1hdG1vc3BoZXJlLXN1bi1pbnRlbnNpdHlcIjpuZXcgQnModGUucGFpbnRfc2t5W1wic2t5LWF0bW9zcGhlcmUtc3VuLWludGVuc2l0eVwiXSksXCJza3ktZ3JhZGllbnQtY2VudGVyXCI6bmV3IEJzKHRlLnBhaW50X3NreVtcInNreS1ncmFkaWVudC1jZW50ZXJcIl0pLFwic2t5LWdyYWRpZW50LXJhZGl1c1wiOm5ldyBCcyh0ZS5wYWludF9za3lbXCJza3ktZ3JhZGllbnQtcmFkaXVzXCJdKSxcInNreS1ncmFkaWVudFwiOm5ldyBDcyh0ZS5wYWludF9za3lbXCJza3ktZ3JhZGllbnRcIl0pLFwic2t5LWF0bW9zcGhlcmUtaGFsby1jb2xvclwiOm5ldyBCcyh0ZS5wYWludF9za3lbXCJza3ktYXRtb3NwaGVyZS1oYWxvLWNvbG9yXCJdKSxcInNreS1hdG1vc3BoZXJlLWNvbG9yXCI6bmV3IEJzKHRlLnBhaW50X3NreVtcInNreS1hdG1vc3BoZXJlLWNvbG9yXCJdKSxcInNreS1vcGFjaXR5XCI6bmV3IEJzKHRlLnBhaW50X3NreVtcInNreS1vcGFjaXR5XCJdKX0pfTtmdW5jdGlvbiBtZih0LGUscil7Y29uc3Qgbj1bMCwwLDFdLGk9S28oW10pO3JldHVybiBKbyhpLGkscj8tdyh0KStNYXRoLlBJOncodCkpLFhvKGksaSwtdyhlKSksUm8obixuLGkpLERvKG4sbil9Y29uc3QgZ2Y9e2NpcmNsZTpjbGFzcyBleHRlbmRzIHJve2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsVHUpO31jcmVhdGVCdWNrZXQodCl7cmV0dXJuIG5ldyBjdSh0KX1xdWVyeVJhZGl1cyh0KXtjb25zdCBlPXQ7cmV0dXJuIEF1KFwiY2lyY2xlLXJhZGl1c1wiLHRoaXMsZSkrQXUoXCJjaXJjbGUtc3Ryb2tlLXdpZHRoXCIsdGhpcyxlKStTdSh0aGlzLnBhaW50LmdldChcImNpcmNsZS10cmFuc2xhdGVcIikpfXF1ZXJ5SW50ZXJzZWN0c0ZlYXR1cmUodCxlLHIsbixpLHMsYSxvKXtjb25zdCBsPUl1KHRoaXMucGFpbnQuZ2V0KFwiY2lyY2xlLXRyYW5zbGF0ZVwiKSx0aGlzLnBhaW50LmdldChcImNpcmNsZS10cmFuc2xhdGUtYW5jaG9yXCIpLHMuYW5nbGUsdC5waXhlbFRvVGlsZVVuaXRzRmFjdG9yKSx1PXRoaXMucGFpbnQuZ2V0KFwiY2lyY2xlLXJhZGl1c1wiKS5ldmFsdWF0ZShlLHIpK3RoaXMucGFpbnQuZ2V0KFwiY2lyY2xlLXN0cm9rZS13aWR0aFwiKS5ldmFsdWF0ZShlLHIpO3JldHVybiB6dSh0LG4scyxhLG8sXCJtYXBcIj09PXRoaXMucGFpbnQuZ2V0KFwiY2lyY2xlLXBpdGNoLWFsaWdubWVudFwiKSxcIm1hcFwiPT09dGhpcy5wYWludC5nZXQoXCJjaXJjbGUtcGl0Y2gtc2NhbGVcIiksbCx1KX1nZXRQcm9ncmFtSWRzKCl7cmV0dXJuIFtcImNpcmNsZVwiXX1nZXRQcm9ncmFtQ29uZmlndXJhdGlvbih0KXtyZXR1cm4gbmV3IFhhKHRoaXMsdCl9fSxoZWF0bWFwOmNsYXNzIGV4dGVuZHMgcm97Y3JlYXRlQnVja2V0KHQpe3JldHVybiBuZXcgRHUodCl9Y29uc3RydWN0b3IodCl7c3VwZXIodCwkdSksdGhpcy5fdXBkYXRlQ29sb3JSYW1wKCk7fV9oYW5kbGVTcGVjaWFsUGFpbnRQcm9wZXJ0eVVwZGF0ZSh0KXtcImhlYXRtYXAtY29sb3JcIj09PXQmJnRoaXMuX3VwZGF0ZUNvbG9yUmFtcCgpO31fdXBkYXRlQ29sb3JSYW1wKCl7dGhpcy5jb2xvclJhbXA9anUoe2V4cHJlc3Npb246dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC5fdmFsdWVzW1wiaGVhdG1hcC1jb2xvclwiXS52YWx1ZS5leHByZXNzaW9uLGV2YWx1YXRpb25LZXk6XCJoZWF0bWFwRGVuc2l0eVwiLGltYWdlOnRoaXMuY29sb3JSYW1wfSksdGhpcy5jb2xvclJhbXBUZXh0dXJlPW51bGw7fXJlc2l6ZSgpe3RoaXMuaGVhdG1hcEZibyYmKHRoaXMuaGVhdG1hcEZiby5kZXN0cm95KCksdGhpcy5oZWF0bWFwRmJvPW51bGwpO31xdWVyeVJhZGl1cyh0KXtyZXR1cm4gQXUoXCJoZWF0bWFwLXJhZGl1c1wiLHRoaXMsdCl9cXVlcnlJbnRlcnNlY3RzRmVhdHVyZSh0LGUscixuLGkscyxhLG8pe2NvbnN0IGw9dGhpcy5wYWludC5nZXQoXCJoZWF0bWFwLXJhZGl1c1wiKS5ldmFsdWF0ZShlLHIpO3JldHVybiB6dSh0LG4scyxhLG8sITAsITAsbmV3IHgoMCwwKSxsKX1oYXNPZmZzY3JlZW5QYXNzKCl7cmV0dXJuIDAhPT10aGlzLnBhaW50LmdldChcImhlYXRtYXAtb3BhY2l0eVwiKSYmXCJub25lXCIhPT10aGlzLnZpc2liaWxpdHl9Z2V0UHJvZ3JhbUlkcygpe3JldHVybiBbXCJoZWF0bWFwXCIsXCJoZWF0bWFwVGV4dHVyZVwiXX1nZXRQcm9ncmFtQ29uZmlndXJhdGlvbih0KXtyZXR1cm4gbmV3IFhhKHRoaXMsdCl9fSxoaWxsc2hhZGU6Y2xhc3MgZXh0ZW5kcyByb3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LE91KTt9aGFzT2Zmc2NyZWVuUGFzcygpe3JldHVybiAwIT09dGhpcy5wYWludC5nZXQoXCJoaWxsc2hhZGUtZXhhZ2dlcmF0aW9uXCIpJiZcIm5vbmVcIiE9PXRoaXMudmlzaWJpbGl0eX1nZXRQcm9ncmFtSWRzKCl7cmV0dXJuIFtcImhpbGxzaGFkZVwiLFwiaGlsbHNoYWRlUHJlcGFyZVwiXX19LGZpbGw6Y2xhc3MgZXh0ZW5kcyByb3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHpjKTt9Z2V0UHJvZ3JhbUlkcygpe2NvbnN0IHQ9dGhpcy5wYWludC5nZXQoXCJmaWxsLXBhdHRlcm5cIiksZT10JiZ0LmNvbnN0YW50T3IoMSkscj1bZT9cImZpbGxQYXR0ZXJuXCI6XCJmaWxsXCJdO3JldHVybiB0aGlzLnBhaW50LmdldChcImZpbGwtYW50aWFsaWFzXCIpJiZyLnB1c2goZSYmIXRoaXMuZ2V0UGFpbnRQcm9wZXJ0eShcImZpbGwtb3V0bGluZS1jb2xvclwiKT9cImZpbGxPdXRsaW5lUGF0dGVyblwiOlwiZmlsbE91dGxpbmVcIikscn1nZXRQcm9ncmFtQ29uZmlndXJhdGlvbih0KXtyZXR1cm4gbmV3IFhhKHRoaXMsdCl9cmVjYWxjdWxhdGUodCxlKXtzdXBlci5yZWNhbGN1bGF0ZSh0LGUpO2NvbnN0IHI9dGhpcy5wYWludC5fdmFsdWVzW1wiZmlsbC1vdXRsaW5lLWNvbG9yXCJdO1wiY29uc3RhbnRcIj09PXIudmFsdWUua2luZCYmdm9pZCAwPT09ci52YWx1ZS52YWx1ZSYmKHRoaXMucGFpbnQuX3ZhbHVlc1tcImZpbGwtb3V0bGluZS1jb2xvclwiXT10aGlzLnBhaW50Ll92YWx1ZXNbXCJmaWxsLWNvbG9yXCJdKTt9Y3JlYXRlQnVja2V0KHQpe3JldHVybiBuZXcgTWModCl9cXVlcnlSYWRpdXMoKXtyZXR1cm4gU3UodGhpcy5wYWludC5nZXQoXCJmaWxsLXRyYW5zbGF0ZVwiKSl9cXVlcnlJbnRlcnNlY3RzRmVhdHVyZSh0LGUscixuLGkscyl7cmV0dXJuICF0LnF1ZXJ5R2VvbWV0cnkuaXNBYm92ZUhvcml6b24mJmR1KGt1KHQudGlsZXNwYWNlR2VvbWV0cnksdGhpcy5wYWludC5nZXQoXCJmaWxsLXRyYW5zbGF0ZVwiKSx0aGlzLnBhaW50LmdldChcImZpbGwtdHJhbnNsYXRlLWFuY2hvclwiKSxzLmFuZ2xlLHQucGl4ZWxUb1RpbGVVbml0c0ZhY3Rvciksbil9aXNUaWxlQ2xpcHBlZCgpe3JldHVybiAhMH19LFwiZmlsbC1leHRydXNpb25cIjpjbGFzcyBleHRlbmRzIHJve2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsY2gpO31jcmVhdGVCdWNrZXQodCl7cmV0dXJuIG5ldyB0aCh0KX1xdWVyeVJhZGl1cygpe3JldHVybiBTdSh0aGlzLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZVwiKSl9aXMzRCgpe3JldHVybiAhMH1nZXRQcm9ncmFtSWRzKCl7cmV0dXJuIFt0aGlzLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLXBhdHRlcm5cIikuY29uc3RhbnRPcigxKT9cImZpbGxFeHRydXNpb25QYXR0ZXJuXCI6XCJmaWxsRXh0cnVzaW9uXCJdfWdldFByb2dyYW1Db25maWd1cmF0aW9uKHQpe3JldHVybiBuZXcgWGEodGhpcyx0KX1xdWVyeUludGVyc2VjdHNGZWF0dXJlKHQsZSxyLG4saSxzLGEsbyxsKXtjb25zdCB1PUl1KHRoaXMucGFpbnQuZ2V0KFwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlXCIpLHRoaXMucGFpbnQuZ2V0KFwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlLWFuY2hvclwiKSxzLmFuZ2xlLHQucGl4ZWxUb1RpbGVVbml0c0ZhY3RvciksYz10aGlzLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLWhlaWdodFwiKS5ldmFsdWF0ZShlLHIpLGg9dGhpcy5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi1iYXNlXCIpLmV2YWx1YXRlKGUscikscD1bMCwwXSxkPW8mJnMuZWxldmF0aW9uLGY9cy5lbGV2YXRpb24/cy5lbGV2YXRpb24uZXhhZ2dlcmF0aW9uKCk6MSx5PXQudGlsZS5nZXRCdWNrZXQodGhpcyk7aWYoZCYmeSBpbnN0YW5jZW9mIHRoKXtjb25zdCB0PXkuY2VudHJvaWRWZXJ0ZXhBcnJheSxlPWwrMTtlPHQubGVuZ3RoJiYocFswXT10LmdldGFfY2VudHJvaWRfcG9zMChlKSxwWzFdPXQuZ2V0YV9jZW50cm9pZF9wb3MxKGUpKTt9aWYoMD09PXBbMF0mJjE9PT1wWzFdKXJldHVybiAhMTtcImdsb2JlXCI9PT1zLnByb2plY3Rpb24ubmFtZSYmKG49bGgoW25dLFtuZXcgeCgwLDApLG5ldyB4KGFvLGFvKV0sdC50aWxlSUQuY2Fub25pY2FsKS5tYXAoKHQ9PnQucG9seWdvbikpLmZsYXQoKSk7Y29uc3QgbT1kP286bnVsbCxbZyx2XT1mdW5jdGlvbih0LGUscixuLGkscyxhLG8sbCx1LGMpe3JldHVybiBcImdsb2JlXCI9PT10LnByb2plY3Rpb24ubmFtZT9mdW5jdGlvbih0LGUscixuLGkscyxhLG8sbCx1LGMpe2NvbnN0IGg9W10scD1bXSxkPXQucHJvamVjdGlvbi51cFZlY3RvclNjYWxlKGMsdC5jZW50ZXIubGF0LHQud29ybGRTaXplKS5tZXRlcnNUb1RpbGUsZj1bMCwwLDAsMV0seT1bMCwwLDAsMV0sbT0odCxlLHIsbik9Pnt0WzBdPWUsdFsxXT1yLHRbMl09bix0WzNdPTE7fSxnPW9oKCk7cj4wJiYocis9Zyksbis9Zztmb3IoY29uc3QgZyBvZiBlKXtjb25zdCBlPVtdLHg9W107Zm9yKGNvbnN0IGggb2YgZyl7Y29uc3QgcD1oLngraS54LGc9aC55K2kueSx2PXQucHJvamVjdGlvbi5wcm9qZWN0VGlsZVBvaW50KHAsZyxjKSxiPXQucHJvamVjdGlvbi51cFZlY3RvcihjLGgueCxoLnkpO2xldCB3PXIsXz1uO2lmKGEpe2NvbnN0IHQ9dmgocCxnLHIsbixhLG8sbCx1KTt3Kz10LmJhc2UsXys9dC50b3A7fTAhPT1yP20oZix2LngrYlswXSpkKncsdi55K2JbMV0qZCp3LHYueitiWzJdKmQqdyk6bShmLHYueCx2Lnksdi56KSxtKHksdi54K2JbMF0qZCpfLHYueStiWzFdKmQqXyx2LnorYlsyXSpkKl8pLEZvKGYsZixzKSxGbyh5LHkscyksZS5wdXNoKG5ldyBtaChmWzBdLGZbMV0sZlsyXSkpLHgucHVzaChuZXcgbWgoeVswXSx5WzFdLHlbMl0pKTt9aC5wdXNoKGUpLHAucHVzaCh4KTt9cmV0dXJuIFtoLHBdfSh0LGUscixuLGkscyxhLG8sbCx1LGMpOmE/ZnVuY3Rpb24odCxlLHIsbixpLHMsYSxvLGwpe2NvbnN0IHU9W10sYz1bXSxoPVswLDAsMCwxXTtmb3IoY29uc3QgcCBvZiB0KXtjb25zdCB0PVtdLGQ9W107Zm9yKGNvbnN0IHUgb2YgcCl7Y29uc3QgYz11Lngrbi54LHA9dS55K24ueSxmPXZoKGMscCxlLHIscyxhLG8sbCk7aFswXT1jLGhbMV09cCxoWzJdPWYuYmFzZSxoWzNdPTEsR28oaCxoLGkpLGhbM109TWF0aC5tYXgoaFszXSwxZS01KTtjb25zdCB5PW5ldyBtaChoWzBdL2hbM10saFsxXS9oWzNdLGhbMl0vaFszXSk7aFswXT1jLGhbMV09cCxoWzJdPWYudG9wLGhbM109MSxHbyhoLGgsaSksaFszXT1NYXRoLm1heChoWzNdLDFlLTUpO2NvbnN0IG09bmV3IG1oKGhbMF0vaFszXSxoWzFdL2hbM10saFsyXS9oWzNdKTt0LnB1c2goeSksZC5wdXNoKG0pO311LnB1c2godCksYy5wdXNoKGQpO31yZXR1cm4gW3UsY119KGUscixuLGkscyxhLG8sbCx1KTpmdW5jdGlvbih0LGUscixuLGkpe2NvbnN0IHM9W10sYT1bXSxvPWlbOF0qZSxsPWlbOV0qZSx1PWlbMTBdKmUsYz1pWzExXSplLGg9aVs4XSpyLHA9aVs5XSpyLGQ9aVsxMF0qcixmPWlbMTFdKnI7Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD1bXSxyPVtdO2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0IGU9cy54K24ueCxhPXMueStuLnkseT1pWzBdKmUraVs0XSphK2lbMTJdLG09aVsxXSplK2lbNV0qYStpWzEzXSxnPWlbMl0qZStpWzZdKmEraVsxNF0seD1pWzNdKmUraVs3XSphK2lbMTVdLHY9eStvLGI9bStsLHc9Zyt1LF89TWF0aC5tYXgoeCtjLDFlLTUpLEE9eStoLFM9bStwLGs9ZytkLEk9TWF0aC5tYXgoeCtmLDFlLTUpO3QucHVzaChuZXcgbWgodi9fLGIvXyx3L18pKSxyLnB1c2gobmV3IG1oKEEvSSxTL0ksay9JKSk7fXMucHVzaCh0KSxhLnB1c2gocik7fXJldHVybiBbcyxhXX0oZSxyLG4saSxzKX0ocyxuLGgsYyx1LGEsbSxwLGYscy5jZW50ZXIubGF0LHQudGlsZUlELmNhbm9uaWNhbCksYj10LnF1ZXJ5R2VvbWV0cnk7cmV0dXJuIGZ1bmN0aW9uKHQsZSxyKXtsZXQgbj0xLzA7ZHUocixlKSYmKG49eGgocixlWzBdKSk7Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspe2NvbnN0IHM9ZVtpXSxhPXRbaV07Zm9yKGxldCB0PTA7dDxzLmxlbmd0aC0xO3QrKyl7Y29uc3QgZT1zW3RdLGk9W2Usc1t0KzFdLGFbdCsxXSxhW3RdLGVdO2h1KHIsaSkmJihuPU1hdGgubWluKG4seGgocixpKSkpO319cmV0dXJuIG4hPT0xLzAmJm59KGcsdixiLmlzUG9pbnRRdWVyeSgpP2Iuc2NyZWVuQm91bmRzOmIuc2NyZWVuR2VvbWV0cnkpfX0sbGluZTpjbGFzcyBleHRlbmRzIHJve2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsVGgpLHRoaXMuZ3JhZGllbnRWZXJzaW9uPTA7fV9oYW5kbGVTcGVjaWFsUGFpbnRQcm9wZXJ0eVVwZGF0ZSh0KXtpZihcImxpbmUtZ3JhZGllbnRcIj09PXQpe2NvbnN0IHQ9dGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC5fdmFsdWVzW1wibGluZS1ncmFkaWVudFwiXS52YWx1ZS5leHByZXNzaW9uO3RoaXMuc3RlcEludGVycG9sYW50PXQuX3N0eWxlRXhwcmVzc2lvbiYmdC5fc3R5bGVFeHByZXNzaW9uLmV4cHJlc3Npb24gaW5zdGFuY2VvZiBCcix0aGlzLmdyYWRpZW50VmVyc2lvbj0odGhpcy5ncmFkaWVudFZlcnNpb24rMSklTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7fX1ncmFkaWVudEV4cHJlc3Npb24oKXtyZXR1cm4gdGhpcy5fdHJhbnNpdGlvbmFibGVQYWludC5fdmFsdWVzW1wibGluZS1ncmFkaWVudFwiXS52YWx1ZS5leHByZXNzaW9ufXdpZHRoRXhwcmVzc2lvbigpe3JldHVybiB0aGlzLl90cmFuc2l0aW9uYWJsZVBhaW50Ll92YWx1ZXNbXCJsaW5lLXdpZHRoXCJdLnZhbHVlLmV4cHJlc3Npb259cmVjYWxjdWxhdGUodCxlKXtzdXBlci5yZWNhbGN1bGF0ZSh0LGUpLHRoaXMucGFpbnQuX3ZhbHVlc1tcImxpbmUtZmxvb3J3aWR0aFwiXT16aC5wb3NzaWJseUV2YWx1YXRlKHRoaXMuX3RyYW5zaXRpb25pbmdQYWludC5fdmFsdWVzW1wibGluZS13aWR0aFwiXS52YWx1ZSx0KTt9Y3JlYXRlQnVja2V0KHQpe3JldHVybiBuZXcgSWgodCl9Z2V0UHJvZ3JhbUlkcygpe3JldHVybiBbdGhpcy5wYWludC5nZXQoXCJsaW5lLXBhdHRlcm5cIikuY29uc3RhbnRPcigxKT9cImxpbmVQYXR0ZXJuXCI6XCJsaW5lXCJdfWdldFByb2dyYW1Db25maWd1cmF0aW9uKHQpe3JldHVybiBuZXcgWGEodGhpcyx0KX1xdWVyeVJhZGl1cyh0KXtjb25zdCBlPXQscj1CaChBdShcImxpbmUtd2lkdGhcIix0aGlzLGUpLEF1KFwibGluZS1nYXAtd2lkdGhcIix0aGlzLGUpKSxuPUF1KFwibGluZS1vZmZzZXRcIix0aGlzLGUpO3JldHVybiByLzIrTWF0aC5hYnMobikrU3UodGhpcy5wYWludC5nZXQoXCJsaW5lLXRyYW5zbGF0ZVwiKSl9cXVlcnlJbnRlcnNlY3RzRmVhdHVyZSh0LGUscixuLGkscyl7aWYodC5xdWVyeUdlb21ldHJ5LmlzQWJvdmVIb3Jpem9uKXJldHVybiAhMTtjb25zdCBhPWt1KHQudGlsZXNwYWNlR2VvbWV0cnksdGhpcy5wYWludC5nZXQoXCJsaW5lLXRyYW5zbGF0ZVwiKSx0aGlzLnBhaW50LmdldChcImxpbmUtdHJhbnNsYXRlLWFuY2hvclwiKSxzLmFuZ2xlLHQucGl4ZWxUb1RpbGVVbml0c0ZhY3Rvciksbz10LnBpeGVsVG9UaWxlVW5pdHNGYWN0b3IvMipCaCh0aGlzLnBhaW50LmdldChcImxpbmUtd2lkdGhcIikuZXZhbHVhdGUoZSxyKSx0aGlzLnBhaW50LmdldChcImxpbmUtZ2FwLXdpZHRoXCIpLmV2YWx1YXRlKGUscikpLGw9dGhpcy5wYWludC5nZXQoXCJsaW5lLW9mZnNldFwiKS5ldmFsdWF0ZShlLHIpO3JldHVybiBsJiYobj1mdW5jdGlvbih0LGUpe2NvbnN0IHI9W10sbj1uZXcgeCgwLDApO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKXtjb25zdCBzPXRbaV0sYT1bXTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrKyl7Y29uc3Qgcj1zW3RdLGk9c1t0KzFdLG89MD09PXQ/bjpyLnN1YihzW3QtMV0pLl91bml0KCkuX3BlcnAoKSxsPXQ9PT1zLmxlbmd0aC0xP246aS5zdWIocikuX3VuaXQoKS5fcGVycCgpLHU9by5fYWRkKGwpLl91bml0KCk7dS5fbXVsdCgxLyh1LngqbC54K3UueSpsLnkpKSxhLnB1c2godS5fbXVsdChlKS5fYWRkKHIpKTt9ci5wdXNoKGEpO31yZXR1cm4gcn0obixsKnQucGl4ZWxUb1RpbGVVbml0c0ZhY3RvcikpLGZ1bmN0aW9uKHQsZSxyKXtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKyl7Y29uc3QgaT1lW25dO2lmKHQubGVuZ3RoPj0zKWZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSsrKWlmKGJ1KHQsaVtlXSkpcmV0dXJuICEwO2lmKGZ1KHQsaSxyKSlyZXR1cm4gITB9cmV0dXJuICExfShhLG4sbyl9aXNUaWxlQ2xpcHBlZCgpe3JldHVybiAhMH19LHN5bWJvbDpoZixiYWNrZ3JvdW5kOmNsYXNzIGV4dGVuZHMgcm97Y29uc3RydWN0b3IodCl7c3VwZXIodCxwZik7fWdldFByb2dyYW1JZHMoKXtyZXR1cm4gW3RoaXMucGFpbnQuZ2V0KFwiYmFja2dyb3VuZC1wYXR0ZXJuXCIpP1wiYmFja2dyb3VuZFBhdHRlcm5cIjpcImJhY2tncm91bmRcIl19fSxyYXN0ZXI6Y2xhc3MgZXh0ZW5kcyByb3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LGRmKTt9Z2V0UHJvZ3JhbUlkcygpe3JldHVybiBbXCJyYXN0ZXJcIl19fSxza3k6Y2xhc3MgZXh0ZW5kcyByb3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHlmKSx0aGlzLl91cGRhdGVDb2xvclJhbXAoKTt9X2hhbmRsZVNwZWNpYWxQYWludFByb3BlcnR5VXBkYXRlKHQpe1wic2t5LWdyYWRpZW50XCI9PT10P3RoaXMuX3VwZGF0ZUNvbG9yUmFtcCgpOlwic2t5LWF0bW9zcGhlcmUtc3VuXCIhPT10JiZcInNreS1hdG1vc3BoZXJlLWhhbG8tY29sb3JcIiE9PXQmJlwic2t5LWF0bW9zcGhlcmUtY29sb3JcIiE9PXQmJlwic2t5LWF0bW9zcGhlcmUtc3VuLWludGVuc2l0eVwiIT09dHx8KHRoaXMuX3NreWJveEludmFsaWRhdGVkPSEwKTt9X3VwZGF0ZUNvbG9yUmFtcCgpe3RoaXMuY29sb3JSYW1wPWp1KHtleHByZXNzaW9uOnRoaXMuX3RyYW5zaXRpb25hYmxlUGFpbnQuX3ZhbHVlc1tcInNreS1ncmFkaWVudFwiXS52YWx1ZS5leHByZXNzaW9uLGV2YWx1YXRpb25LZXk6XCJza3lSYWRpYWxQcm9ncmVzc1wifSksdGhpcy5jb2xvclJhbXBUZXh0dXJlJiYodGhpcy5jb2xvclJhbXBUZXh0dXJlLmRlc3Ryb3koKSx0aGlzLmNvbG9yUmFtcFRleHR1cmU9bnVsbCk7fW5lZWRzU2t5Ym94Q2FwdHVyZSh0KXtpZih0aGlzLl9za3lib3hJbnZhbGlkYXRlZHx8IXRoaXMuc2t5Ym94VGV4dHVyZXx8IXRoaXMuc2t5Ym94R2VvbWV0cnkpcmV0dXJuICEwO2lmKCF0aGlzLnBhaW50LmdldChcInNreS1hdG1vc3BoZXJlLXN1blwiKSl7Y29uc3QgZT10LnN0eWxlLmxpZ2h0LnByb3BlcnRpZXMuZ2V0KFwicG9zaXRpb25cIik7cmV0dXJuIHRoaXMuX2xpZ2h0UG9zaXRpb24uYXppbXV0aGFsIT09ZS5hemltdXRoYWx8fHRoaXMuX2xpZ2h0UG9zaXRpb24ucG9sYXIhPT1lLnBvbGFyfXJldHVybiAhMX1nZXRDZW50ZXIodCxlKXtpZihcImF0bW9zcGhlcmVcIj09PXRoaXMucGFpbnQuZ2V0KFwic2t5LXR5cGVcIikpe2NvbnN0IHI9dGhpcy5wYWludC5nZXQoXCJza3ktYXRtb3NwaGVyZS1zdW5cIiksbj0hcixpPXQuc3R5bGUubGlnaHQscz1pLnByb3BlcnRpZXMuZ2V0KFwicG9zaXRpb25cIik7cmV0dXJuIG4mJlwidmlld3BvcnRcIj09PWkucHJvcGVydGllcy5nZXQoXCJhbmNob3JcIikmJk4oXCJUaGUgc3VuIGRpcmVjdGlvbiBpcyBhdHRhY2hlZCB0byBhIGxpZ2h0IHdpdGggdmlld3BvcnQgYW5jaG9yLCBsaWdodGluZyBtYXkgYmVoYXZlIHVuZXhwZWN0ZWRseS5cIiksbj9tZihzLmF6aW11dGhhbCw5MC1zLnBvbGFyLGUpOm1mKHJbMF0sOTAtclsxXSxlKX1jb25zdCByPXRoaXMucGFpbnQuZ2V0KFwic2t5LWdyYWRpZW50LWNlbnRlclwiKTtyZXR1cm4gbWYoclswXSw5MC1yWzFdLGUpfWlzM0QoKXtyZXR1cm4gITF9aXNTa3koKXtyZXR1cm4gITB9bWFya1NreWJveFZhbGlkKHQpe3RoaXMuX3NreWJveEludmFsaWRhdGVkPSExLHRoaXMuX2xpZ2h0UG9zaXRpb249dC5zdHlsZS5saWdodC5wcm9wZXJ0aWVzLmdldChcInBvc2l0aW9uXCIpO31oYXNPZmZzY3JlZW5QYXNzKCl7cmV0dXJuICEwfWdldFByb2dyYW1JZHMoKXtjb25zdCB0PXRoaXMucGFpbnQuZ2V0KFwic2t5LXR5cGVcIik7cmV0dXJuIFwiYXRtb3NwaGVyZVwiPT09dD9bXCJza3lib3hDYXB0dXJlXCIsXCJza3lib3hcIl06XCJncmFkaWVudFwiPT09dD9bXCJza3lib3hHcmFkaWVudFwiXTpudWxsfX19O2NsYXNzIHhme2NvbnN0cnVjdG9yKHQsZSxyLG4pe3RoaXMuY29udGV4dD10LHRoaXMuZm9ybWF0PXIsdGhpcy50ZXh0dXJlPXQuZ2wuY3JlYXRlVGV4dHVyZSgpLHRoaXMudXBkYXRlKGUsbik7fXVwZGF0ZSh0LHIsbil7Y29uc3R7d2lkdGg6aSxoZWlnaHQ6c309dCx7Y29udGV4dDphfT10aGlzLHtnbDpvfT1hLHtIVE1MSW1hZ2VFbGVtZW50OmwsSFRNTENhbnZhc0VsZW1lbnQ6dSxIVE1MVmlkZW9FbGVtZW50OmMsSW1hZ2VEYXRhOmgsSW1hZ2VCaXRtYXA6cH09ZTtpZihvLmJpbmRUZXh0dXJlKG8uVEVYVFVSRV8yRCx0aGlzLnRleHR1cmUpLGEucGl4ZWxTdG9yZVVucGFja0ZsaXBZLnNldCghMSksYS5waXhlbFN0b3JlVW5wYWNrLnNldCgxKSxhLnBpeGVsU3RvcmVVbnBhY2tQcmVtdWx0aXBseUFscGhhLnNldCh0aGlzLmZvcm1hdD09PW8uUkdCQSYmKCFyfHwhMSE9PXIucHJlbXVsdGlwbHkpKSxufHx0aGlzLnNpemUmJnRoaXMuc2l6ZVswXT09PWkmJnRoaXMuc2l6ZVsxXT09PXMpe2NvbnN0e3g6ZSx5OnJ9PW58fHt4OjAseTowfTt0IGluc3RhbmNlb2YgbHx8dCBpbnN0YW5jZW9mIHV8fHQgaW5zdGFuY2VvZiBjfHx0IGluc3RhbmNlb2YgaHx8cCYmdCBpbnN0YW5jZW9mIHA/by50ZXhTdWJJbWFnZTJEKG8uVEVYVFVSRV8yRCwwLGUscixvLlJHQkEsby5VTlNJR05FRF9CWVRFLHQpOm8udGV4U3ViSW1hZ2UyRChvLlRFWFRVUkVfMkQsMCxlLHIsaSxzLG8uUkdCQSxvLlVOU0lHTkVEX0JZVEUsdC5kYXRhKTt9ZWxzZSB0aGlzLnNpemU9W2ksc10sdCBpbnN0YW5jZW9mIGx8fHQgaW5zdGFuY2VvZiB1fHx0IGluc3RhbmNlb2YgY3x8dCBpbnN0YW5jZW9mIGh8fHAmJnQgaW5zdGFuY2VvZiBwP28udGV4SW1hZ2UyRChvLlRFWFRVUkVfMkQsMCx0aGlzLmZvcm1hdCx0aGlzLmZvcm1hdCxvLlVOU0lHTkVEX0JZVEUsdCk6by50ZXhJbWFnZTJEKG8uVEVYVFVSRV8yRCwwLHRoaXMuZm9ybWF0LGkscywwLHRoaXMuZm9ybWF0LG8uVU5TSUdORURfQllURSx0LmRhdGEpO3RoaXMudXNlTWlwbWFwPUJvb2xlYW4ociYmci51c2VNaXBtYXAmJnRoaXMuaXNTaXplUG93ZXJPZlR3bygpKSx0aGlzLnVzZU1pcG1hcCYmby5nZW5lcmF0ZU1pcG1hcChvLlRFWFRVUkVfMkQpO31iaW5kKHQsZSl7Y29uc3R7Y29udGV4dDpyfT10aGlzLHtnbDpufT1yO24uYmluZFRleHR1cmUobi5URVhUVVJFXzJELHRoaXMudGV4dHVyZSksdCE9PXRoaXMuZmlsdGVyJiYobi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfTUFHX0ZJTFRFUix0KSxuLnRleFBhcmFtZXRlcmkobi5URVhUVVJFXzJELG4uVEVYVFVSRV9NSU5fRklMVEVSLHRoaXMudXNlTWlwbWFwP3Q9PT1uLk5FQVJFU1Q/bi5ORUFSRVNUX01JUE1BUF9ORUFSRVNUOm4uTElORUFSX01JUE1BUF9ORUFSRVNUOnQpLHRoaXMuZmlsdGVyPXQpLGUhPT10aGlzLndyYXAmJihuLnRleFBhcmFtZXRlcmkobi5URVhUVVJFXzJELG4uVEVYVFVSRV9XUkFQX1MsZSksbi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9ULGUpLHRoaXMud3JhcD1lKTt9aXNTaXplUG93ZXJPZlR3bygpe3JldHVybiB0aGlzLnNpemVbMF09PT10aGlzLnNpemVbMV0mJk1hdGgubG9nKHRoaXMuc2l6ZVswXSkvTWF0aC5MTjIlMT09MH1kZXN0cm95KCl7Y29uc3R7Z2w6dH09dGhpcy5jb250ZXh0O3QuZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmUpLHRoaXMudGV4dHVyZT1udWxsO319Y2xhc3MgdmZ7Y29uc3RydWN0b3IodCl7dGhpcy5fY2FsbGJhY2s9dCx0aGlzLl90cmlnZ2VyZWQ9ITEsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1lc3NhZ2VDaGFubmVsJiYodGhpcy5fY2hhbm5lbD1uZXcgTWVzc2FnZUNoYW5uZWwsdGhpcy5fY2hhbm5lbC5wb3J0Mi5vbm1lc3NhZ2U9KCk9Pnt0aGlzLl90cmlnZ2VyZWQ9ITEsdGhpcy5fY2FsbGJhY2soKTt9KTt9dHJpZ2dlcigpe3RoaXMuX3RyaWdnZXJlZHx8KHRoaXMuX3RyaWdnZXJlZD0hMCx0aGlzLl9jaGFubmVsP3RoaXMuX2NoYW5uZWwucG9ydDEucG9zdE1lc3NhZ2UoITApOnNldFRpbWVvdXQoKCgpPT57dGhpcy5fdHJpZ2dlcmVkPSExLHRoaXMuX2NhbGxiYWNrKCk7fSksMCkpO31yZW1vdmUoKXt0aGlzLl9jaGFubmVsPXZvaWQgMCx0aGlzLl9jYWxsYmFjaz0oKT0+e307fX1jbGFzcyBiZntjb25zdHJ1Y3Rvcigpe3RoaXMudGFza3M9e30sdGhpcy50YXNrUXVldWU9W10sUihbXCJwcm9jZXNzXCJdLHRoaXMpLHRoaXMuaW52b2tlcj1uZXcgdmYodGhpcy5wcm9jZXNzKSx0aGlzLm5leHRJZD0wO31hZGQodCxlKXtjb25zdCByPXRoaXMubmV4dElkKyssbj1mdW5jdGlvbih7dHlwZTp0LGlzU3ltYm9sVGlsZTplLHpvb206cn0pe3JldHVybiByPXJ8fDAsXCJtZXNzYWdlXCI9PT10PzA6XCJtYXliZVByZXBhcmVcIiE9PXR8fGU/XCJwYXJzZVRpbGVcIiE9PXR8fGU/XCJwYXJzZVRpbGVcIj09PXQmJmU/MzAwLXI6XCJtYXliZVByZXBhcmVcIj09PXQmJmU/NDAwLXI6NTAwOjIwMC1yOjEwMC1yfShlKTtpZigwPT09bil7SygpO3RyeXt0KCk7fWZpbmFsbHl7fXJldHVybiB7Y2FuY2VsOigpPT57fX19cmV0dXJuIHRoaXMudGFza3Nbcl09e2ZuOnQsbWV0YWRhdGE6ZSxwcmlvcml0eTpuLGlkOnJ9LHRoaXMudGFza1F1ZXVlLnB1c2gociksdGhpcy5pbnZva2VyLnRyaWdnZXIoKSx7Y2FuY2VsOigpPT57ZGVsZXRlIHRoaXMudGFza3Nbcl07fX19cHJvY2Vzcygpe0soKTt0cnl7aWYodGhpcy50YXNrUXVldWU9dGhpcy50YXNrUXVldWUuZmlsdGVyKCh0PT4hIXRoaXMudGFza3NbdF0pKSwhdGhpcy50YXNrUXVldWUubGVuZ3RoKXJldHVybjtjb25zdCB0PXRoaXMucGljaygpO2lmKG51bGw9PT10KXJldHVybjtjb25zdCBlPXRoaXMudGFza3NbdF07aWYoZGVsZXRlIHRoaXMudGFza3NbdF0sdGhpcy50YXNrUXVldWUubGVuZ3RoJiZ0aGlzLmludm9rZXIudHJpZ2dlcigpLCFlKXJldHVybjtlLmZuKCk7fWZpbmFsbHl7fX1waWNrKCl7bGV0IHQ9bnVsbCxlPTEvMDtmb3IobGV0IHI9MDtyPHRoaXMudGFza1F1ZXVlLmxlbmd0aDtyKyspe2NvbnN0IG49dGhpcy50YXNrc1t0aGlzLnRhc2tRdWV1ZVtyXV07bi5wcmlvcml0eTxlJiYoZT1uLnByaW9yaXR5LHQ9cik7fWlmKG51bGw9PT10KXJldHVybiBudWxsO2NvbnN0IHI9dGhpcy50YXNrUXVldWVbdF07cmV0dXJuIHRoaXMudGFza1F1ZXVlLnNwbGljZSh0LDEpLHJ9cmVtb3ZlKCl7dGhpcy5pbnZva2VyLnJlbW92ZSgpO319Y2xhc3Mgd2Z7Y29uc3RydWN0b3IodCl7dGhpcy5fc3RyaW5nVG9OdW1iZXI9e30sdGhpcy5fbnVtYmVyVG9TdHJpbmc9W107Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IHI9dFtlXTt0aGlzLl9zdHJpbmdUb051bWJlcltyXT1lLHRoaXMuX251bWJlclRvU3RyaW5nW2VdPXI7fX1lbmNvZGUodCl7cmV0dXJuIHRoaXMuX3N0cmluZ1RvTnVtYmVyW3RdfWRlY29kZSh0KXtyZXR1cm4gdGhpcy5fbnVtYmVyVG9TdHJpbmdbdF19fWNvbnN0IF9mPVtcInRpbGVcIixcImxheWVyXCIsXCJzb3VyY2VcIixcInNvdXJjZUxheWVyXCIsXCJzdGF0ZVwiXTtjbGFzcyBBZntjb25zdHJ1Y3Rvcih0LGUscixuLGkpe3RoaXMudHlwZT1cIkZlYXR1cmVcIix0aGlzLl92ZWN0b3JUaWxlRmVhdHVyZT10LHRoaXMuX3o9ZSx0aGlzLl94PXIsdGhpcy5feT1uLHRoaXMucHJvcGVydGllcz10LnByb3BlcnRpZXMsdGhpcy5pZD1pO31nZXQgZ2VvbWV0cnkoKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZ2VvbWV0cnkmJih0aGlzLl9nZW9tZXRyeT10aGlzLl92ZWN0b3JUaWxlRmVhdHVyZS50b0dlb0pTT04odGhpcy5feCx0aGlzLl95LHRoaXMuX3opLmdlb21ldHJ5KSx0aGlzLl9nZW9tZXRyeX1zZXQgZ2VvbWV0cnkodCl7dGhpcy5fZ2VvbWV0cnk9dDt9dG9KU09OKCl7Y29uc3QgdD17dHlwZTpcIkZlYXR1cmVcIixzdGF0ZTp2b2lkIDAsZ2VvbWV0cnk6dGhpcy5nZW9tZXRyeSxwcm9wZXJ0aWVzOnRoaXMucHJvcGVydGllc307dm9pZCAwIT09dGhpcy5pZCYmKHQuaWQ9dGhpcy5pZCk7Zm9yKGNvbnN0IGUgb2YgX2Ypdm9pZCAwIT09dGhpc1tlXSYmKHRbZV09dGhpc1tlXSk7cmV0dXJuIHR9fWNvbnN0IFNmPTMyLGtmPTMzLElmPW5ldyBVaW50MTZBcnJheSg4MTg0KTtmb3IobGV0IHQ9MDt0PDIwNDY7dCsrKXtsZXQgZT10KzIscj0wLG49MCxpPTAscz0wLGE9MCxvPTA7Zm9yKDEmZT9pPXM9YT1TZjpyPW49bz1TZjsoZT4+PTEpPjE7KXtjb25zdCB0PXIraT4+MSxsPW4rcz4+MTsxJmU/KGk9cixzPW4scj1hLG49byk6KHI9aSxuPXMsaT1hLHM9byksYT10LG89bDt9Y29uc3QgbD00KnQ7SWZbbCswXT1yLElmW2wrMV09bixJZltsKzJdPWksSWZbbCszXT1zO31jb25zdCBNZj1uZXcgVWludDE2QXJyYXkoMjE3OCksVGY9bmV3IFVpbnQ4QXJyYXkoMTA4OSksemY9bmV3IFVpbnQxNkFycmF5KDEwODkpO2Z1bmN0aW9uIEJmKHQpe3JldHVybiAwPT09dD8tLjAzMTI1OjMyPT09dD8uMDMxMjU6MH12YXIgRWY9UnMoW3tuYW1lOlwiYV9wb3NcIix0eXBlOlwiSW50MTZcIixjb21wb25lbnRzOjJ9LHtuYW1lOlwiYV90ZXh0dXJlX3Bvc1wiLHR5cGU6XCJJbnQxNlwiLGNvbXBvbmVudHM6Mn1dKTtjb25zdCBDZj17dHlwZToyLGV4dGVudDphbyxsb2FkR2VvbWV0cnk6KCk9PltbbmV3IHgoMCwwKSxuZXcgeChhbysxLDApLG5ldyB4KGFvKzEsYW8rMSksbmV3IHgoMCxhbysxKSxuZXcgeCgwLDApXV19O2NsYXNzIFBme2NvbnN0cnVjdG9yKHQsZSxyLG4saSl7dGhpcy50aWxlSUQ9dCx0aGlzLnVpZD1EKCksdGhpcy51c2VzPTAsdGhpcy50aWxlU2l6ZT1lLHRoaXMudGlsZVpvb209cix0aGlzLmJ1Y2tldHM9e30sdGhpcy5leHBpcmF0aW9uVGltZT1udWxsLHRoaXMucXVlcnlQYWRkaW5nPTAsdGhpcy5oYXNTeW1ib2xCdWNrZXRzPSExLHRoaXMuaGFzUlRMVGV4dD0hMSx0aGlzLmRlcGVuZGVuY2llcz17fSx0aGlzLmlzUmFzdGVyPWksdGhpcy5leHBpcmVkUmVxdWVzdENvdW50PTAsdGhpcy5zdGF0ZT1cImxvYWRpbmdcIixuJiZuLnRyYW5zZm9ybSYmKHRoaXMucHJvamVjdGlvbj1uLnRyYW5zZm9ybS5wcm9qZWN0aW9uKTt9cmVnaXN0ZXJGYWRlRHVyYXRpb24odCl7Y29uc3QgZT10K3RoaXMudGltZUFkZGVkO2U8WHQubm93KCl8fHRoaXMuZmFkZUVuZFRpbWUmJmU8dGhpcy5mYWRlRW5kVGltZXx8KHRoaXMuZmFkZUVuZFRpbWU9ZSk7fXdhc1JlcXVlc3RlZCgpe3JldHVybiBcImVycm9yZWRcIj09PXRoaXMuc3RhdGV8fFwibG9hZGVkXCI9PT10aGlzLnN0YXRlfHxcInJlbG9hZGluZ1wiPT09dGhpcy5zdGF0ZX1nZXQgdGlsZVRyYW5zZm9ybSgpe3JldHVybiB0aGlzLl90aWxlVHJhbnNmb3JtfHwodGhpcy5fdGlsZVRyYW5zZm9ybT1CZCh0aGlzLnRpbGVJRC5jYW5vbmljYWwsdGhpcy5wcm9qZWN0aW9uKSksdGhpcy5fdGlsZVRyYW5zZm9ybX1sb2FkVmVjdG9yRGF0YSh0LGUscil7aWYodGhpcy51bmxvYWRWZWN0b3JEYXRhKCksdGhpcy5zdGF0ZT1cImxvYWRlZFwiLHQpe3QuZmVhdHVyZUluZGV4JiYodGhpcy5sYXRlc3RGZWF0dXJlSW5kZXg9dC5mZWF0dXJlSW5kZXgsdC5yYXdUaWxlRGF0YT8odGhpcy5sYXRlc3RSYXdUaWxlRGF0YT10LnJhd1RpbGVEYXRhLHRoaXMubGF0ZXN0RmVhdHVyZUluZGV4LnJhd1RpbGVEYXRhPXQucmF3VGlsZURhdGEpOnRoaXMubGF0ZXN0UmF3VGlsZURhdGEmJih0aGlzLmxhdGVzdEZlYXR1cmVJbmRleC5yYXdUaWxlRGF0YT10aGlzLmxhdGVzdFJhd1RpbGVEYXRhKSksdGhpcy5jb2xsaXNpb25Cb3hBcnJheT10LmNvbGxpc2lvbkJveEFycmF5LHRoaXMuYnVja2V0cz1mdW5jdGlvbih0LGUpe2NvbnN0IHI9e307aWYoIWUpcmV0dXJuIHI7Zm9yKGNvbnN0IG4gb2YgdCl7Y29uc3QgdD1uLmxheWVySWRzLm1hcCgodD0+ZS5nZXRMYXllcih0KSkpLmZpbHRlcihCb29sZWFuKTtpZigwIT09dC5sZW5ndGgpe24ubGF5ZXJzPXQsbi5zdGF0ZURlcGVuZGVudExheWVySWRzJiYobi5zdGF0ZURlcGVuZGVudExheWVycz1uLnN0YXRlRGVwZW5kZW50TGF5ZXJJZHMubWFwKChlPT50LmZpbHRlcigodD0+dC5pZD09PWUpKVswXSkpKTtmb3IoY29uc3QgZSBvZiB0KXJbZS5pZF09bjt9fXJldHVybiByfSh0LmJ1Y2tldHMsZS5zdHlsZSksdGhpcy5oYXNTeW1ib2xCdWNrZXRzPSExO2Zvcihjb25zdCB0IGluIHRoaXMuYnVja2V0cyl7Y29uc3QgZT10aGlzLmJ1Y2tldHNbdF07aWYoZSBpbnN0YW5jZW9mIG9mKXtpZih0aGlzLmhhc1N5bWJvbEJ1Y2tldHM9ITAsIXIpYnJlYWs7ZS5qdXN0UmVsb2FkZWQ9ITA7fX1pZih0aGlzLmhhc1JUTFRleHQ9ITEsdGhpcy5oYXNTeW1ib2xCdWNrZXRzKWZvcihjb25zdCB0IGluIHRoaXMuYnVja2V0cyl7Y29uc3QgZT10aGlzLmJ1Y2tldHNbdF07aWYoZSBpbnN0YW5jZW9mIG9mJiZlLmhhc1JUTFRleHQpe3RoaXMuaGFzUlRMVGV4dD0hMCxicy5pc0xvYWRpbmcoKXx8YnMuaXNMb2FkZWQoKXx8XCJkZWZlcnJlZFwiIT09eHMoKXx8dnMoKTticmVha319dGhpcy5xdWVyeVBhZGRpbmc9MDtmb3IoY29uc3QgdCBpbiB0aGlzLmJ1Y2tldHMpe2NvbnN0IHI9dGhpcy5idWNrZXRzW3RdO3RoaXMucXVlcnlQYWRkaW5nPU1hdGgubWF4KHRoaXMucXVlcnlQYWRkaW5nLGUuc3R5bGUuZ2V0TGF5ZXIodCkucXVlcnlSYWRpdXMocikpO310LmltYWdlQXRsYXMmJih0aGlzLmltYWdlQXRsYXM9dC5pbWFnZUF0bGFzKSx0LmdseXBoQXRsYXNJbWFnZSYmKHRoaXMuZ2x5cGhBdGxhc0ltYWdlPXQuZ2x5cGhBdGxhc0ltYWdlKSx0LmxpbmVBdGxhcyYmKHRoaXMubGluZUF0bGFzPXQubGluZUF0bGFzKTt9ZWxzZSB0aGlzLmNvbGxpc2lvbkJveEFycmF5PW5ldyBwYTt9dW5sb2FkVmVjdG9yRGF0YSgpe2lmKHRoaXMuaGFzRGF0YSgpKXtmb3IoY29uc3QgdCBpbiB0aGlzLmJ1Y2tldHMpdGhpcy5idWNrZXRzW3RdLmRlc3Ryb3koKTt0aGlzLmJ1Y2tldHM9e30sdGhpcy5pbWFnZUF0bGFzJiYodGhpcy5pbWFnZUF0bGFzPW51bGwpLHRoaXMubGluZUF0bGFzJiYodGhpcy5saW5lQXRsYXM9bnVsbCksdGhpcy5pbWFnZUF0bGFzVGV4dHVyZSYmdGhpcy5pbWFnZUF0bGFzVGV4dHVyZS5kZXN0cm95KCksdGhpcy5nbHlwaEF0bGFzVGV4dHVyZSYmdGhpcy5nbHlwaEF0bGFzVGV4dHVyZS5kZXN0cm95KCksdGhpcy5saW5lQXRsYXNUZXh0dXJlJiZ0aGlzLmxpbmVBdGxhc1RleHR1cmUuZGVzdHJveSgpLHRoaXMuX3RpbGVCb3VuZHNCdWZmZXImJih0aGlzLl90aWxlQm91bmRzQnVmZmVyLmRlc3Ryb3koKSx0aGlzLl90aWxlQm91bmRzSW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuX3RpbGVCb3VuZHNTZWdtZW50cy5kZXN0cm95KCksdGhpcy5fdGlsZUJvdW5kc0J1ZmZlcj1udWxsKSx0aGlzLl90aWxlRGVidWdCdWZmZXImJih0aGlzLl90aWxlRGVidWdCdWZmZXIuZGVzdHJveSgpLHRoaXMuX3RpbGVEZWJ1Z1NlZ21lbnRzLmRlc3Ryb3koKSx0aGlzLl90aWxlRGVidWdCdWZmZXI9bnVsbCksdGhpcy5fdGlsZURlYnVnSW5kZXhCdWZmZXImJih0aGlzLl90aWxlRGVidWdJbmRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5fdGlsZURlYnVnSW5kZXhCdWZmZXI9bnVsbCksdGhpcy5fZ2xvYmVUaWxlRGVidWdCb3JkZXJCdWZmZXImJih0aGlzLl9nbG9iZVRpbGVEZWJ1Z0JvcmRlckJ1ZmZlci5kZXN0cm95KCksdGhpcy5fZ2xvYmVUaWxlRGVidWdCb3JkZXJCdWZmZXI9bnVsbCksdGhpcy5fdGlsZURlYnVnVGV4dEJ1ZmZlciYmKHRoaXMuX3RpbGVEZWJ1Z1RleHRCdWZmZXIuZGVzdHJveSgpLHRoaXMuX3RpbGVEZWJ1Z1RleHRTZWdtZW50cy5kZXN0cm95KCksdGhpcy5fdGlsZURlYnVnVGV4dEluZGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLl90aWxlRGVidWdUZXh0QnVmZmVyPW51bGwpLHRoaXMuX2dsb2JlVGlsZURlYnVnVGV4dEJ1ZmZlciYmKHRoaXMuX2dsb2JlVGlsZURlYnVnVGV4dEJ1ZmZlci5kZXN0cm95KCksdGhpcy5fZ2xvYmVUaWxlRGVidWdUZXh0QnVmZmVyPW51bGwpLHRoaXMubGF0ZXN0RmVhdHVyZUluZGV4PW51bGwsdGhpcy5zdGF0ZT1cInVubG9hZGVkXCI7fX1nZXRCdWNrZXQodCl7cmV0dXJuIHRoaXMuYnVja2V0c1t0LmlkXX11cGxvYWQodCl7Zm9yKGNvbnN0IGUgaW4gdGhpcy5idWNrZXRzKXtjb25zdCByPXRoaXMuYnVja2V0c1tlXTtyLnVwbG9hZFBlbmRpbmcoKSYmci51cGxvYWQodCk7fWNvbnN0IGU9dC5nbDt0aGlzLmltYWdlQXRsYXMmJiF0aGlzLmltYWdlQXRsYXMudXBsb2FkZWQmJih0aGlzLmltYWdlQXRsYXNUZXh0dXJlPW5ldyB4Zih0LHRoaXMuaW1hZ2VBdGxhcy5pbWFnZSxlLlJHQkEpLHRoaXMuaW1hZ2VBdGxhcy51cGxvYWRlZD0hMCksdGhpcy5nbHlwaEF0bGFzSW1hZ2UmJih0aGlzLmdseXBoQXRsYXNUZXh0dXJlPW5ldyB4Zih0LHRoaXMuZ2x5cGhBdGxhc0ltYWdlLGUuQUxQSEEpLHRoaXMuZ2x5cGhBdGxhc0ltYWdlPW51bGwpLHRoaXMubGluZUF0bGFzJiYhdGhpcy5saW5lQXRsYXMudXBsb2FkZWQmJih0aGlzLmxpbmVBdGxhc1RleHR1cmU9bmV3IHhmKHQsdGhpcy5saW5lQXRsYXMuaW1hZ2UsZS5BTFBIQSksdGhpcy5saW5lQXRsYXMudXBsb2FkZWQ9ITApO31wcmVwYXJlKHQpe3RoaXMuaW1hZ2VBdGxhcyYmdGhpcy5pbWFnZUF0bGFzLnBhdGNoVXBkYXRlZEltYWdlcyh0LHRoaXMuaW1hZ2VBdGxhc1RleHR1cmUpO31xdWVyeVJlbmRlcmVkRmVhdHVyZXModCxlLHIsbixpLHMsYSxvKXtyZXR1cm4gdGhpcy5sYXRlc3RGZWF0dXJlSW5kZXgmJnRoaXMubGF0ZXN0RmVhdHVyZUluZGV4LnJhd1RpbGVEYXRhP3RoaXMubGF0ZXN0RmVhdHVyZUluZGV4LnF1ZXJ5KHt0aWxlUmVzdWx0Om4scGl4ZWxQb3NNYXRyaXg6YSx0cmFuc2Zvcm06cyxwYXJhbXM6aSx0aWxlVHJhbnNmb3JtOnRoaXMudGlsZVRyYW5zZm9ybX0sdCxlLHIpOnt9fXF1ZXJ5U291cmNlRmVhdHVyZXModCxlKXtjb25zdCByPXRoaXMubGF0ZXN0RmVhdHVyZUluZGV4O2lmKCFyfHwhci5yYXdUaWxlRGF0YSlyZXR1cm47Y29uc3Qgbj1yLmxvYWRWVExheWVycygpLGk9ZT9lLnNvdXJjZUxheWVyOlwiXCIscz1uLl9nZW9qc29uVGlsZUxheWVyfHxuW2ldO2lmKCFzKXJldHVybjtjb25zdCBhPWhpKGUmJmUuZmlsdGVyKSx7ejpvLHg6bCx5OnV9PXRoaXMudGlsZUlELmNhbm9uaWNhbCxjPXt6Om8seDpsLHk6dX07Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aDtlKyspe2NvbnN0IG49cy5mZWF0dXJlKGUpO2lmKGEubmVlZEdlb21ldHJ5KXtjb25zdCB0PW91KG4sITApO2lmKCFhLmZpbHRlcihuZXcgd3ModGhpcy50aWxlSUQub3ZlcnNjYWxlZFopLHQsdGhpcy50aWxlSUQuY2Fub25pY2FsKSljb250aW51ZX1lbHNlIGlmKCFhLmZpbHRlcihuZXcgd3ModGhpcy50aWxlSUQub3ZlcnNjYWxlZFopLG4pKWNvbnRpbnVlO2NvbnN0IGg9ci5nZXRJZChuLGkpLHA9bmV3IEFmKG4sbyxsLHUsaCk7cC50aWxlPWMsdC5wdXNoKHApO319aGFzRGF0YSgpe3JldHVybiBcImxvYWRlZFwiPT09dGhpcy5zdGF0ZXx8XCJyZWxvYWRpbmdcIj09PXRoaXMuc3RhdGV8fFwiZXhwaXJlZFwiPT09dGhpcy5zdGF0ZX1wYXR0ZXJuc0xvYWRlZCgpe3JldHVybiAhIXRoaXMuaW1hZ2VBdGxhcyYmISFPYmplY3Qua2V5cyh0aGlzLmltYWdlQXRsYXMucGF0dGVyblBvc2l0aW9ucykubGVuZ3RofXNldEV4cGlyeURhdGEodCl7Y29uc3QgZT10aGlzLmV4cGlyYXRpb25UaW1lO2lmKHQuY2FjaGVDb250cm9sKXtjb25zdCBlPVgodC5jYWNoZUNvbnRyb2wpO2VbXCJtYXgtYWdlXCJdJiYodGhpcy5leHBpcmF0aW9uVGltZT1EYXRlLm5vdygpKzFlMyplW1wibWF4LWFnZVwiXSk7fWVsc2UgdC5leHBpcmVzJiYodGhpcy5leHBpcmF0aW9uVGltZT1uZXcgRGF0ZSh0LmV4cGlyZXMpLmdldFRpbWUoKSk7aWYodGhpcy5leHBpcmF0aW9uVGltZSl7Y29uc3QgdD1EYXRlLm5vdygpO2xldCByPSExO2lmKHRoaXMuZXhwaXJhdGlvblRpbWU+dClyPSExO2Vsc2UgaWYoZSlpZih0aGlzLmV4cGlyYXRpb25UaW1lPGUpcj0hMDtlbHNlIHtjb25zdCBuPXRoaXMuZXhwaXJhdGlvblRpbWUtZTtuP3RoaXMuZXhwaXJhdGlvblRpbWU9dCtNYXRoLm1heChuLDNlNCk6cj0hMDt9ZWxzZSByPSEwO3I/KHRoaXMuZXhwaXJlZFJlcXVlc3RDb3VudCsrLHRoaXMuc3RhdGU9XCJleHBpcmVkXCIpOnRoaXMuZXhwaXJlZFJlcXVlc3RDb3VudD0wO319Z2V0RXhwaXJ5VGltZW91dCgpe2lmKHRoaXMuZXhwaXJhdGlvblRpbWUpcmV0dXJuIHRoaXMuZXhwaXJlZFJlcXVlc3RDb3VudD8xZTMqKDE8PE1hdGgubWluKHRoaXMuZXhwaXJlZFJlcXVlc3RDb3VudC0xLDMxKSk6TWF0aC5taW4odGhpcy5leHBpcmF0aW9uVGltZS0obmV3IERhdGUpLmdldFRpbWUoKSxNYXRoLnBvdygyLDMxKS0xKX1zZXRGZWF0dXJlU3RhdGUodCxlKXtpZighdGhpcy5sYXRlc3RGZWF0dXJlSW5kZXh8fCF0aGlzLmxhdGVzdEZlYXR1cmVJbmRleC5yYXdUaWxlRGF0YXx8MD09PU9iamVjdC5rZXlzKHQpLmxlbmd0aHx8IWUpcmV0dXJuO2NvbnN0IHI9dGhpcy5sYXRlc3RGZWF0dXJlSW5kZXgubG9hZFZUTGF5ZXJzKCksbj1lLnN0eWxlLmxpc3RJbWFnZXMoKTtmb3IoY29uc3QgaSBpbiB0aGlzLmJ1Y2tldHMpe2lmKCFlLnN0eWxlLmhhc0xheWVyKGkpKWNvbnRpbnVlO2NvbnN0IHM9dGhpcy5idWNrZXRzW2ldLGE9cy5sYXllcnNbMF0uc291cmNlTGF5ZXJ8fFwiX2dlb2pzb25UaWxlTGF5ZXJcIixvPXJbYV0sbD10W2FdO2lmKCFvfHwhbHx8MD09PU9iamVjdC5rZXlzKGwpLmxlbmd0aCljb250aW51ZTtpZihzLnVwZGF0ZShsLG8sbix0aGlzLmltYWdlQXRsYXMmJnRoaXMuaW1hZ2VBdGxhcy5wYXR0ZXJuUG9zaXRpb25zfHx7fSkscyBpbnN0YW5jZW9mIElofHxzIGluc3RhbmNlb2YgTWMpe2NvbnN0IHQ9ZS5zdHlsZS5fZ2V0U291cmNlQ2FjaGUocy5sYXllcnNbMF0uc291cmNlKTtlLl90ZXJyYWluJiZlLl90ZXJyYWluLmVuYWJsZWQmJnQmJnMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLm5lZWRzVXBsb2FkJiZlLl90ZXJyYWluLl9jbGVhclJlbmRlckNhY2hlRm9yVGlsZSh0LmlkLHRoaXMudGlsZUlEKTt9Y29uc3QgdT1lJiZlLnN0eWxlJiZlLnN0eWxlLmdldExheWVyKGkpO3UmJih0aGlzLnF1ZXJ5UGFkZGluZz1NYXRoLm1heCh0aGlzLnF1ZXJ5UGFkZGluZyx1LnF1ZXJ5UmFkaXVzKHMpKSk7fX1ob2xkaW5nRm9yRmFkZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnN5bWJvbEZhZGVIb2xkVW50aWx9c3ltYm9sRmFkZUZpbmlzaGVkKCl7cmV0dXJuICF0aGlzLnN5bWJvbEZhZGVIb2xkVW50aWx8fHRoaXMuc3ltYm9sRmFkZUhvbGRVbnRpbDxYdC5ub3coKX1jbGVhckZhZGVIb2xkKCl7dGhpcy5zeW1ib2xGYWRlSG9sZFVudGlsPXZvaWQgMDt9c2V0SG9sZER1cmF0aW9uKHQpe3RoaXMuc3ltYm9sRmFkZUhvbGRVbnRpbD1YdC5ub3coKSt0O31zZXRUZXh0dXJlKHQsZSl7Y29uc3Qgcj1lLmNvbnRleHQsbj1yLmdsO3RoaXMudGV4dHVyZT10aGlzLnRleHR1cmV8fGUuZ2V0VGlsZVRleHR1cmUodC53aWR0aCksdGhpcy50ZXh0dXJlP3RoaXMudGV4dHVyZS51cGRhdGUodCx7dXNlTWlwbWFwOiEwfSk6KHRoaXMudGV4dHVyZT1uZXcgeGYocix0LG4uUkdCQSx7dXNlTWlwbWFwOiEwfSksdGhpcy50ZXh0dXJlLmJpbmQobi5MSU5FQVIsbi5DTEFNUF9UT19FREdFKSk7fXNldERlcGVuZGVuY2llcyh0LGUpe2NvbnN0IHI9e307Zm9yKGNvbnN0IHQgb2YgZSlyW3RdPSEwO3RoaXMuZGVwZW5kZW5jaWVzW3RdPXI7fWhhc0RlcGVuZGVuY3kodCxlKXtmb3IoY29uc3QgciBvZiB0KXtjb25zdCB0PXRoaXMuZGVwZW5kZW5jaWVzW3JdO2lmKHQpZm9yKGNvbnN0IHIgb2YgZSlpZih0W3JdKXJldHVybiAhMH1yZXR1cm4gITF9Y2xlYXJRdWVyeURlYnVnVml6KCl7fV9tYWtlRGVidWdUaWxlQm91bmRzQnVmZmVycyh0LGUpe2lmKCFlfHxcIm1lcmNhdG9yXCI9PT1lLm5hbWV8fHRoaXMuX3RpbGVEZWJ1Z0J1ZmZlcilyZXR1cm47Y29uc3Qgcj1hdShDZix0aGlzLnRpbGVJRC5jYW5vbmljYWwsdGhpcy50aWxlVHJhbnNmb3JtKVswXSxuPW5ldyAkcyxpPW5ldyB1YTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3R7eDplLHk6c309clt0XTtuLmVtcGxhY2VCYWNrKGUscyksaS5lbXBsYWNlQmFjayh0KTt9aS5lbXBsYWNlQmFjaygwKSx0aGlzLl90aWxlRGVidWdJbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKGkpLHRoaXMuX3RpbGVEZWJ1Z0J1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcihuLHRsLm1lbWJlcnMpLHRoaXMuX3RpbGVEZWJ1Z1NlZ21lbnRzPXNvLnNpbXBsZVNlZ21lbnQoMCwwLG4ubGVuZ3RoLGkubGVuZ3RoKTt9X21ha2VUaWxlQm91bmRzQnVmZmVycyh0LGUpe2lmKHRoaXMuX3RpbGVCb3VuZHNCdWZmZXJ8fCFlfHxcIm1lcmNhdG9yXCI9PT1lLm5hbWUpcmV0dXJuO2NvbnN0IHI9YXUoQ2YsdGhpcy50aWxlSUQuY2Fub25pY2FsLHRoaXMudGlsZVRyYW5zZm9ybSlbMF07bGV0IG4saTtpZih0aGlzLmlzUmFzdGVyKXtjb25zdCB0PWZ1bmN0aW9uKHQsZSl7Y29uc3Qgcj1CZCh0LGUpLG49TWF0aC5wb3coMix0LnopO2ZvcihsZXQgaT0wO2k8a2Y7aSsrKWZvcihsZXQgcz0wO3M8a2Y7cysrKXtjb25zdCBhPUtsKCh0LngrKHMrQmYocykpL1NmKS9uKSxvPVhsKCh0LnkrKGkrQmYoaSkpL1NmKS9uKSxsPWUucHJvamVjdChhLG8pLHU9aSprZitzO01mWzIqdSswXT1NYXRoLnJvdW5kKChsLngqci5zY2FsZS1yLngpKmFvKSxNZlsyKnUrMV09TWF0aC5yb3VuZCgobC55KnIuc2NhbGUtci55KSphbyk7fVRmLmZpbGwoMCksemYuZmlsbCgwKTtmb3IobGV0IHQ9MjA0NTt0Pj0wO3QtLSl7Y29uc3QgZT00KnQscj1JZltlKzBdLG49SWZbZSsxXSxpPUlmW2UrMl0scz1JZltlKzNdLGE9citpPj4xLG89bitzPj4xLGw9YStvLW4sdT1vK3ItYSxjPW4qa2YrcixoPXMqa2YraSxwPW8qa2YrYSxkPU1hdGguaHlwb3QoKE1mWzIqYyswXStNZlsyKmgrMF0pLzItTWZbMipwKzBdLChNZlsyKmMrMV0rTWZbMipoKzFdKS8yLU1mWzIqcCsxXSk+PTE2O1RmW3BdPVRmW3BdfHwoZD8xOjApLHQ8MTAyMiYmKFRmW3BdPVRmW3BdfHxUZlsobit1Pj4xKSprZisocitsPj4xKV18fFRmWyhzK3U+PjEpKmtmKyhpK2w+PjEpXSk7fWNvbnN0IGk9bmV3IE9zLHM9bmV3IHJhO2xldCBhPTA7ZnVuY3Rpb24gbyh0LGUpe2NvbnN0IHI9ZSprZit0O3JldHVybiAwPT09emZbcl0mJihpLmVtcGxhY2VCYWNrKE1mWzIqciswXSxNZlsyKnIrMV0sdCphby9TZixlKmFvL1NmKSx6ZltyXT0rK2EpLHpmW3JdLTF9ZnVuY3Rpb24gbCh0LGUscixuLGksYSl7Y29uc3QgdT10K3I+PjEsYz1lK24+PjE7aWYoTWF0aC5hYnModC1pKStNYXRoLmFicyhlLWEpPjEmJlRmW2Mqa2YrdV0pbChpLGEsdCxlLHUsYyksbChyLG4saSxhLHUsYyk7ZWxzZSB7Y29uc3QgbD1vKHQsZSksdT1vKHIsbiksYz1vKGksYSk7cy5lbXBsYWNlQmFjayhsLHUsYyk7fX1yZXR1cm4gbCgwLDAsU2YsU2YsU2YsMCksbChTZixTZiwwLDAsMCxTZikse3ZlcnRpY2VzOmksaW5kaWNlczpzfX0odGhpcy50aWxlSUQuY2Fub25pY2FsLGUpO249dC52ZXJ0aWNlcyxpPXQuaW5kaWNlczt9ZWxzZSB7bj1uZXcgT3MsaT1uZXcgcmE7Zm9yKGNvbnN0e3g6dCx5OmV9b2YgciluLmVtcGxhY2VCYWNrKHQsZSwwLDApO2NvbnN0IHQ9eGMobi5pbnQxNix2b2lkIDAsNCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKz0zKWkuZW1wbGFjZUJhY2sodFtlXSx0W2UrMV0sdFtlKzJdKTt9dGhpcy5fdGlsZUJvdW5kc0J1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcihuLEVmLm1lbWJlcnMpLHRoaXMuX3RpbGVCb3VuZHNJbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKGkpLHRoaXMuX3RpbGVCb3VuZHNTZWdtZW50cz1zby5zaW1wbGVTZWdtZW50KDAsMCxuLmxlbmd0aCxpLmxlbmd0aCk7fV9tYWtlR2xvYmVUaWxlRGVidWdCdWZmZXJzKHQsZSl7Y29uc3Qgcj1lLnByb2plY3Rpb247aWYoIXJ8fFwiZ2xvYmVcIiE9PXIubmFtZXx8ZS5mcmVlemVUaWxlQ292ZXJhZ2UpcmV0dXJuO2NvbnN0IG49dGhpcy50aWxlSUQuY2Fub25pY2FsLGk9QmwoYmwobixlKSkscz1QbChlLnpvb20pO2xldCBhO3M+MCYmKGE9Zm8obmV3IEZsb2F0NjRBcnJheSgxNiksZS5nbG9iZU1hdHJpeCkpLHRoaXMuX21ha2VHbG9iZVRpbGVEZWJ1Z0JvcmRlckJ1ZmZlcih0LG4sZSxpLGEscyksdGhpcy5fbWFrZUdsb2JlVGlsZURlYnVnVGV4dEJ1ZmZlcih0LG4sZSxpLGEscyk7fV9nbG9iZVBvaW50KHQsZSxyLG4saSxzLGEpe2xldCBvPU1sKHQsZSxyKTtpZihzKXtjb25zdCBpPTE8PHIueixsPU5sKG4uY2VudGVyLmxuZyksdT1HbChuLmNlbnRlci5sYXQpLGM9KHIueCsuNSkvaS1sO2xldCBoPTA7Yz4uNT9oPS0xOmM8LS41JiYoaD0xKTtsZXQgcD0odC9hbytyLngpL2kraCxkPShlL2FvK3IueSkvaTtwPShwLWwpKm4uX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWwrbCxkPShkLXUpKm4uX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWwrdTtjb25zdCBmPVtwKm4ud29ybGRTaXplLGQqbi53b3JsZFNpemUsMF07Rm8oZixmLHMpLG89dmwobyxmLGEpO31yZXR1cm4gRm8obyxvLGkpfV9tYWtlR2xvYmVUaWxlRGVidWdCb3JkZXJCdWZmZXIodCxlLHIsbixpLHMpe2NvbnN0IGE9bmV3ICRzLG89bmV3IHVhLGw9bmV3IGpzLHU9KHQsdSxjLGgscCk9Pntjb25zdCBkPShjLXQpLyhwLTEpLGY9KGgtdSkvKHAtMSkseT1hLmxlbmd0aDtmb3IobGV0IGM9MDtjPHA7YysrKXtjb25zdCBoPXQrYypkLHA9dStjKmY7YS5lbXBsYWNlQmFjayhoLHApO2NvbnN0IG09dGhpcy5fZ2xvYmVQb2ludChoLHAsZSxyLG4saSxzKTtsLmVtcGxhY2VCYWNrKG1bMF0sbVsxXSxtWzJdKSxvLmVtcGxhY2VCYWNrKHkrYyk7fX0sYz1hbzt1KDAsMCxjLDAsMTYpLHUoYywwLGMsYywxNiksdShjLGMsMCxjLDE2KSx1KDAsYywwLDAsMTYpLHRoaXMuX3RpbGVEZWJ1Z0luZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIobyksdGhpcy5fdGlsZURlYnVnQnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKGEsdGwubWVtYmVycyksdGhpcy5fZ2xvYmVUaWxlRGVidWdCb3JkZXJCdWZmZXI9dC5jcmVhdGVWZXJ0ZXhCdWZmZXIobCxRby5tZW1iZXJzKSx0aGlzLl90aWxlRGVidWdTZWdtZW50cz1zby5zaW1wbGVTZWdtZW50KDAsMCxhLmxlbmd0aCxvLmxlbmd0aCk7fV9tYWtlR2xvYmVUaWxlRGVidWdUZXh0QnVmZmVyKHQsZSxyLG4saSxzKXtjb25zdCBhPWFvLzQsbz1uZXcgJHMsbD1uZXcgcmEsdT1uZXcganMsYz0yNTtsLnJlc2VydmUoMzIpLG8ucmVzZXJ2ZShjKSx1LnJlc2VydmUoYyk7Y29uc3QgaD0odCxlKT0+Yyp0K2U7Zm9yKGxldCB0PTA7dDxjO3QrKyl7Y29uc3QgbD10KmE7Zm9yKGxldCB0PTA7dDxjO3QrKyl7Y29uc3QgYz10KmE7by5lbXBsYWNlQmFjayhjLGwpO2NvbnN0IGg9dGhpcy5fZ2xvYmVQb2ludChjLGwsZSxyLG4saSxzKTt1LmVtcGxhY2VCYWNrKGhbMF0saFsxXSxoWzJdKTt9fWZvcihsZXQgdD0wO3Q8NDt0KyspZm9yKGxldCBlPTA7ZTw0O2UrKyl7Y29uc3Qgcj1oKHQsZSksbj1oKHQsZSsxKSxpPWgodCsxLGUpLHM9aCh0KzEsZSsxKTtsLmVtcGxhY2VCYWNrKHIsbixpKSxsLmVtcGxhY2VCYWNrKGksbixzKTt9dGhpcy5fdGlsZURlYnVnVGV4dEluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIobCksdGhpcy5fdGlsZURlYnVnVGV4dEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcihvLHRsLm1lbWJlcnMpLHRoaXMuX2dsb2JlVGlsZURlYnVnVGV4dEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih1LFFvLm1lbWJlcnMpLHRoaXMuX3RpbGVEZWJ1Z1RleHRTZWdtZW50cz1zby5zaW1wbGVTZWdtZW50KDAsMCxjLDMyKTt9fWNsYXNzIERme2NvbnN0cnVjdG9yKCl7dGhpcy5zdGF0ZT17fSx0aGlzLnN0YXRlQ2hhbmdlcz17fSx0aGlzLmRlbGV0ZWRTdGF0ZXM9e307fXVwZGF0ZVN0YXRlKHQsZSxyKXtjb25zdCBuPVN0cmluZyhlKTtpZih0aGlzLnN0YXRlQ2hhbmdlc1t0XT10aGlzLnN0YXRlQ2hhbmdlc1t0XXx8e30sdGhpcy5zdGF0ZUNoYW5nZXNbdF1bbl09dGhpcy5zdGF0ZUNoYW5nZXNbdF1bbl18fHt9LEModGhpcy5zdGF0ZUNoYW5nZXNbdF1bbl0sciksbnVsbD09PXRoaXMuZGVsZXRlZFN0YXRlc1t0XSl7dGhpcy5kZWxldGVkU3RhdGVzW3RdPXt9O2Zvcihjb25zdCBlIGluIHRoaXMuc3RhdGVbdF0pZSE9PW4mJih0aGlzLmRlbGV0ZWRTdGF0ZXNbdF1bZV09bnVsbCk7fWVsc2UgaWYodGhpcy5kZWxldGVkU3RhdGVzW3RdJiZudWxsPT09dGhpcy5kZWxldGVkU3RhdGVzW3RdW25dKXt0aGlzLmRlbGV0ZWRTdGF0ZXNbdF1bbl09e307Zm9yKGNvbnN0IGUgaW4gdGhpcy5zdGF0ZVt0XVtuXSlyW2VdfHwodGhpcy5kZWxldGVkU3RhdGVzW3RdW25dW2VdPW51bGwpO31lbHNlIGZvcihjb25zdCBlIGluIHIpdGhpcy5kZWxldGVkU3RhdGVzW3RdJiZ0aGlzLmRlbGV0ZWRTdGF0ZXNbdF1bbl0mJm51bGw9PT10aGlzLmRlbGV0ZWRTdGF0ZXNbdF1bbl1bZV0mJmRlbGV0ZSB0aGlzLmRlbGV0ZWRTdGF0ZXNbdF1bbl1bZV07fXJlbW92ZUZlYXR1cmVTdGF0ZSh0LGUscil7aWYobnVsbD09PXRoaXMuZGVsZXRlZFN0YXRlc1t0XSlyZXR1cm47Y29uc3Qgbj1TdHJpbmcoZSk7aWYodGhpcy5kZWxldGVkU3RhdGVzW3RdPXRoaXMuZGVsZXRlZFN0YXRlc1t0XXx8e30sciYmdm9pZCAwIT09ZSludWxsIT09dGhpcy5kZWxldGVkU3RhdGVzW3RdW25dJiYodGhpcy5kZWxldGVkU3RhdGVzW3RdW25dPXRoaXMuZGVsZXRlZFN0YXRlc1t0XVtuXXx8e30sdGhpcy5kZWxldGVkU3RhdGVzW3RdW25dW3JdPW51bGwpO2Vsc2UgaWYodm9pZCAwIT09ZSlpZih0aGlzLnN0YXRlQ2hhbmdlc1t0XSYmdGhpcy5zdGF0ZUNoYW5nZXNbdF1bbl0pZm9yKHIgaW4gdGhpcy5kZWxldGVkU3RhdGVzW3RdW25dPXt9LHRoaXMuc3RhdGVDaGFuZ2VzW3RdW25dKXRoaXMuZGVsZXRlZFN0YXRlc1t0XVtuXVtyXT1udWxsO2Vsc2UgdGhpcy5kZWxldGVkU3RhdGVzW3RdW25dPW51bGw7ZWxzZSB0aGlzLmRlbGV0ZWRTdGF0ZXNbdF09bnVsbDt9Z2V0U3RhdGUodCxlKXtjb25zdCByPVN0cmluZyhlKSxuPUMoe30sKHRoaXMuc3RhdGVbdF18fHt9KVtyXSwodGhpcy5zdGF0ZUNoYW5nZXNbdF18fHt9KVtyXSk7aWYobnVsbD09PXRoaXMuZGVsZXRlZFN0YXRlc1t0XSlyZXR1cm4ge307aWYodGhpcy5kZWxldGVkU3RhdGVzW3RdKXtjb25zdCByPXRoaXMuZGVsZXRlZFN0YXRlc1t0XVtlXTtpZihudWxsPT09cilyZXR1cm4ge307Zm9yKGNvbnN0IHQgaW4gcilkZWxldGUgblt0XTt9cmV0dXJuIG59aW5pdGlhbGl6ZVRpbGVTdGF0ZSh0LGUpe3Quc2V0RmVhdHVyZVN0YXRlKHRoaXMuc3RhdGUsZSk7fWNvYWxlc2NlQ2hhbmdlcyh0LGUpe2NvbnN0IHI9e307Zm9yKGNvbnN0IHQgaW4gdGhpcy5zdGF0ZUNoYW5nZXMpe3RoaXMuc3RhdGVbdF09dGhpcy5zdGF0ZVt0XXx8e307Y29uc3QgZT17fTtmb3IoY29uc3QgciBpbiB0aGlzLnN0YXRlQ2hhbmdlc1t0XSl0aGlzLnN0YXRlW3RdW3JdfHwodGhpcy5zdGF0ZVt0XVtyXT17fSksQyh0aGlzLnN0YXRlW3RdW3JdLHRoaXMuc3RhdGVDaGFuZ2VzW3RdW3JdKSxlW3JdPXRoaXMuc3RhdGVbdF1bcl07clt0XT1lO31mb3IoY29uc3QgdCBpbiB0aGlzLmRlbGV0ZWRTdGF0ZXMpe3RoaXMuc3RhdGVbdF09dGhpcy5zdGF0ZVt0XXx8e307Y29uc3QgZT17fTtpZihudWxsPT09dGhpcy5kZWxldGVkU3RhdGVzW3RdKWZvcihjb25zdCByIGluIHRoaXMuc3RhdGVbdF0pZVtyXT17fSx0aGlzLnN0YXRlW3RdW3JdPXt9O2Vsc2UgZm9yKGNvbnN0IHIgaW4gdGhpcy5kZWxldGVkU3RhdGVzW3RdKXtpZihudWxsPT09dGhpcy5kZWxldGVkU3RhdGVzW3RdW3JdKXRoaXMuc3RhdGVbdF1bcl09e307ZWxzZSBpZih0aGlzLnN0YXRlW3RdW3JdKWZvcihjb25zdCBlIG9mIE9iamVjdC5rZXlzKHRoaXMuZGVsZXRlZFN0YXRlc1t0XVtyXSkpZGVsZXRlIHRoaXMuc3RhdGVbdF1bcl1bZV07ZVtyXT10aGlzLnN0YXRlW3RdW3JdO31yW3RdPXJbdF18fHt9LEMoclt0XSxlKTt9aWYodGhpcy5zdGF0ZUNoYW5nZXM9e30sdGhpcy5kZWxldGVkU3RhdGVzPXt9LDAhPT1PYmplY3Qua2V5cyhyKS5sZW5ndGgpZm9yKGNvbnN0IG4gaW4gdCl0W25dLnNldEZlYXR1cmVTdGF0ZShyLGUpO319Y2xhc3MgVmZ7Y29uc3RydWN0b3IodCl7dGhpcy5zaXplPXQsdGhpcy5taW5pbXVtcz1bXSx0aGlzLm1heGltdW1zPVtdLHRoaXMubGVhdmVzPVtdO31nZXRFbGV2YXRpb24odCxlKXtjb25zdCByPXRoaXMudG9JZHgodCxlKTtyZXR1cm4ge21pbjp0aGlzLm1pbmltdW1zW3JdLG1heDp0aGlzLm1heGltdW1zW3JdfX1pc0xlYWYodCxlKXtyZXR1cm4gdGhpcy5sZWF2ZXNbdGhpcy50b0lkeCh0LGUpXX10b0lkeCh0LGUpe3JldHVybiBlKnRoaXMuc2l6ZSt0fX1mdW5jdGlvbiBMZih0LGUscixuKXtsZXQgaT0wLHM9TnVtYmVyLk1BWF9WQUxVRTtmb3IobGV0IGE9MDthPDM7YSsrKWlmKE1hdGguYWJzKG5bYV0pPDFlLTE1KXtpZihyW2FdPHRbYV18fHJbYV0+ZVthXSlyZXR1cm4gbnVsbH1lbHNlIHtjb25zdCBvPTEvblthXTtsZXQgbD0odFthXS1yW2FdKSpvLHU9KGVbYV0tclthXSkqbztpZihsPnUpe2NvbnN0IHQ9bDtsPXUsdT10O31pZihsPmkmJihpPWwpLHU8cyYmKHM9dSksaT5zKXJldHVybiBudWxsfXJldHVybiBpfWZ1bmN0aW9uIEZmKHQsZSxyLG4saSxzLGEsbyxsLHUsYyl7Y29uc3QgaD1uLXQscD1pLWUsZD1zLXIsZj1hLXQseT1vLWUsbT1sLXIsZz1jWzFdKm0tY1syXSp5LHg9Y1syXSpmLWNbMF0qbSx2PWNbMF0qeS1jWzFdKmYsYj1oKmcrcCp4K2QqdjtpZihNYXRoLmFicyhiKTwxZS0xNSlyZXR1cm4gbnVsbDtjb25zdCB3PTEvYixfPXVbMF0tdCxBPXVbMV0tZSxTPXVbMl0tcixrPShfKmcrQSp4K1MqdikqdztpZihrPDB8fGs+MSlyZXR1cm4gbnVsbDtjb25zdCBJPUEqZC1TKnAsTT1TKmgtXypkLFQ9XypwLUEqaCx6PShjWzBdKkkrY1sxXSpNK2NbMl0qVCkqdztyZXR1cm4gejwwfHxrK3o+MT9udWxsOihmKkkreSpNK20qVCkqd31mdW5jdGlvbiBSZih0LGUscil7cmV0dXJuICh0LWUpLyhyLWUpfWZ1bmN0aW9uIFVmKHQsZSxyLG4saSxzLGEsbyxsKXtjb25zdCB1PTE8PHIsYz1zLW4saD1hLWkscD0odCsxKS91KmMrbixkPShlKzApL3UqaCtpLGY9KGUrMSkvdSpoK2k7b1swXT0odCswKS91KmMrbixvWzFdPWQsbFswXT1wLGxbMV09Zjt9Y2xhc3MgJGZ7Y29uc3RydWN0b3IodCl7aWYodGhpcy5tYXhpbXVtcz1bXSx0aGlzLm1pbmltdW1zPVtdLHRoaXMubGVhdmVzPVtdLHRoaXMuY2hpbGRPZmZzZXRzPVtdLHRoaXMubm9kZUNvdW50PTAsdGhpcy5kZW09dCx0aGlzLl9zaWJsaW5nT2Zmc2V0PVtbMCwwXSxbMSwwXSxbMCwxXSxbMSwxXV0sIXRoaXMuZGVtKXJldHVybjtjb25zdCBlPWZ1bmN0aW9uKHQpe2NvbnN0IGU9TWF0aC5jZWlsKE1hdGgubG9nMih0LmRpbS84KSkscj1bXTtsZXQgbj1NYXRoLmNlaWwoTWF0aC5wb3coMixlKSk7Y29uc3QgaT0xL24scz0odCxlLHIsbixpKT0+e2NvbnN0IHM9bj8xOjAsYT0odCsxKSpyLXMsbz1lKnIsbD0oZSsxKSpyLXM7aVswXT10KnIsaVsxXT1vLGlbMl09YSxpWzNdPWw7fTtsZXQgYT1uZXcgVmYobik7Y29uc3Qgbz1bXTtmb3IobGV0IGU9MDtlPG4qbjtlKyspe3MoZSVuLE1hdGguZmxvb3IoZS9uKSxpLCExLG8pO2NvbnN0IHI9T2Yob1swXSxvWzFdLHQpLGw9T2Yob1syXSxvWzFdLHQpLHU9T2Yob1syXSxvWzNdLHQpLGM9T2Yob1swXSxvWzNdLHQpO2EubWluaW11bXMucHVzaChNYXRoLm1pbihyLGwsdSxjKSksYS5tYXhpbXVtcy5wdXNoKE1hdGgubWF4KHIsbCx1LGMpKSxhLmxlYXZlcy5wdXNoKDEpO31mb3Ioci5wdXNoKGEpLG4vPTI7bj49MTtuLz0yKXtjb25zdCB0PXJbci5sZW5ndGgtMV07YT1uZXcgVmYobik7Zm9yKGxldCBlPTA7ZTxuKm47ZSsrKXtzKGUlbixNYXRoLmZsb29yKGUvbiksMiwhMCxvKTtjb25zdCByPXQuZ2V0RWxldmF0aW9uKG9bMF0sb1sxXSksaT10LmdldEVsZXZhdGlvbihvWzJdLG9bMV0pLGw9dC5nZXRFbGV2YXRpb24ob1syXSxvWzNdKSx1PXQuZ2V0RWxldmF0aW9uKG9bMF0sb1szXSksYz10LmlzTGVhZihvWzBdLG9bMV0pLGg9dC5pc0xlYWYob1syXSxvWzFdKSxwPXQuaXNMZWFmKG9bMl0sb1szXSksZD10LmlzTGVhZihvWzBdLG9bM10pLGY9TWF0aC5taW4oci5taW4saS5taW4sbC5taW4sdS5taW4pLHk9TWF0aC5tYXgoci5tYXgsaS5tYXgsbC5tYXgsdS5tYXgpLG09YyYmaCYmcCYmZDthLm1heGltdW1zLnB1c2goeSksYS5taW5pbXVtcy5wdXNoKGYpLGEubGVhdmVzLnB1c2goeS1mPD01JiZtPzE6MCk7fXIucHVzaChhKTt9cmV0dXJuIHJ9KHRoaXMuZGVtKSxyPWUubGVuZ3RoLTEsbj1lW3JdO3RoaXMuX2FkZE5vZGUobi5taW5pbXVtc1swXSxuLm1heGltdW1zWzBdLG4ubGVhdmVzWzBdKSx0aGlzLl9jb25zdHJ1Y3QoZSwwLDAsciwwKTt9cmF5Y2FzdFJvb3QodCxlLHIsbixpLHMsYT0xKXtyZXR1cm4gTGYoW3QsZSwtMTAwXSxbcixuLHRoaXMubWF4aW11bXNbMF0qYV0saSxzKX1yYXljYXN0KHQsZSxyLG4saSxzLGE9MSl7aWYoIXRoaXMubm9kZUNvdW50KXJldHVybiBudWxsO2NvbnN0IG89dGhpcy5yYXljYXN0Um9vdCh0LGUscixuLGkscyxhKTtpZihudWxsPT1vKXJldHVybiBudWxsO2NvbnN0IGw9W10sdT1bXSxjPVtdLGg9W10scD1be2lkeDowLHQ6byxub2RleDowLG5vZGV5OjAsZGVwdGg6MH1dO2Zvcig7cC5sZW5ndGg+MDspe2NvbnN0e2lkeDpvLHQ6ZCxub2RleDpmLG5vZGV5OnksZGVwdGg6bX09cC5wb3AoKTtpZih0aGlzLmxlYXZlc1tvXSl7VWYoZix5LG0sdCxlLHIsbixjLGgpO2NvbnN0IG89MTw8bSxsPShmKzApL28sdT0oZisxKS9vLHA9KHkrMCkvbyxnPSh5KzEpL28seD1PZihsLHAsdGhpcy5kZW0pKmEsdj1PZih1LHAsdGhpcy5kZW0pKmEsYj1PZih1LGcsdGhpcy5kZW0pKmEsdz1PZihsLGcsdGhpcy5kZW0pKmEsXz1GZihjWzBdLGNbMV0seCxoWzBdLGNbMV0sdixoWzBdLGhbMV0sYixpLHMpLEE9RmYoaFswXSxoWzFdLGIsY1swXSxoWzFdLHcsY1swXSxjWzFdLHgsaSxzKSxTPU1hdGgubWluKG51bGwhPT1fP186TnVtYmVyLk1BWF9WQUxVRSxudWxsIT09QT9BOk51bWJlci5NQVhfVkFMVUUpO2lmKFMhPT1OdW1iZXIuTUFYX1ZBTFVFKXJldHVybiBTO3tjb25zdCB0PVBvKFtdLGkscyxkKTtpZihqZih4LHYsdyxiLFJmKHRbMF0sY1swXSxoWzBdKSxSZih0WzFdLGNbMV0saFsxXSkpPj10WzJdKXJldHVybiBkfWNvbnRpbnVlfWxldCBnPTA7Zm9yKGxldCBwPTA7cDx0aGlzLl9zaWJsaW5nT2Zmc2V0Lmxlbmd0aDtwKyspe1VmKChmPDwxKSt0aGlzLl9zaWJsaW5nT2Zmc2V0W3BdWzBdLCh5PDwxKSt0aGlzLl9zaWJsaW5nT2Zmc2V0W3BdWzFdLG0rMSx0LGUscixuLGMsaCksY1syXT0tMTAwLGhbMl09dGhpcy5tYXhpbXVtc1t0aGlzLmNoaWxkT2Zmc2V0c1tvXStwXSphO2NvbnN0IGQ9TGYoYyxoLGkscyk7aWYobnVsbCE9ZCl7Y29uc3QgdD1kO2xbcF09dDtsZXQgZT0hMTtmb3IobGV0IHI9MDtyPGcmJiFlO3IrKyl0Pj1sW3Vbcl1dJiYodS5zcGxpY2UociwwLHApLGU9ITApO2V8fCh1W2ddPXApLGcrKzt9fWZvcihsZXQgdD0wO3Q8Zzt0Kyspe2NvbnN0IGU9dVt0XTtwLnB1c2goe2lkeDp0aGlzLmNoaWxkT2Zmc2V0c1tvXStlLHQ6bFtlXSxub2RleDooZjw8MSkrdGhpcy5fc2libGluZ09mZnNldFtlXVswXSxub2RleTooeTw8MSkrdGhpcy5fc2libGluZ09mZnNldFtlXVsxXSxkZXB0aDptKzF9KTt9fXJldHVybiBudWxsfV9hZGROb2RlKHQsZSxyKXtyZXR1cm4gdGhpcy5taW5pbXVtcy5wdXNoKHQpLHRoaXMubWF4aW11bXMucHVzaChlKSx0aGlzLmxlYXZlcy5wdXNoKHIpLHRoaXMuY2hpbGRPZmZzZXRzLnB1c2goMCksdGhpcy5ub2RlQ291bnQrK31fY29uc3RydWN0KHQsZSxyLG4saSl7aWYoMT09PXRbbl0uaXNMZWFmKGUscikpcmV0dXJuO3RoaXMuY2hpbGRPZmZzZXRzW2ldfHwodGhpcy5jaGlsZE9mZnNldHNbaV09dGhpcy5ub2RlQ291bnQpO2NvbnN0IHM9bi0xLGE9dFtzXTtsZXQgbz0wLGw9MDtmb3IobGV0IHQ9MDt0PHRoaXMuX3NpYmxpbmdPZmZzZXQubGVuZ3RoO3QrKyl7Y29uc3Qgbj0yKmUrdGhpcy5fc2libGluZ09mZnNldFt0XVswXSxpPTIqcit0aGlzLl9zaWJsaW5nT2Zmc2V0W3RdWzFdLHM9YS5nZXRFbGV2YXRpb24obixpKSx1PWEuaXNMZWFmKG4saSksYz10aGlzLl9hZGROb2RlKHMubWluLHMubWF4LHUpO3UmJihvfD0xPDx0KSxsfHwobD1jKTt9Zm9yKGxldCBuPTA7bjx0aGlzLl9zaWJsaW5nT2Zmc2V0Lmxlbmd0aDtuKyspbyYxPDxufHx0aGlzLl9jb25zdHJ1Y3QodCwyKmUrdGhpcy5fc2libGluZ09mZnNldFtuXVswXSwyKnIrdGhpcy5fc2libGluZ09mZnNldFtuXVsxXSxzLGwrbik7fX1mdW5jdGlvbiBqZih0LGUscixuLGkscyl7cmV0dXJuIEVyKEVyKHQscixzKSxFcihlLG4scyksaSl9ZnVuY3Rpb24gT2YodCxlLHIpe2NvbnN0IG49ci5kaW0saT1NKHQqbi0uNSwwLG4tMSkscz1NKGUqbi0uNSwwLG4tMSksYT1NYXRoLmZsb29yKGkpLG89TWF0aC5mbG9vcihzKSxsPU1hdGgubWluKGErMSxuLTEpLHU9TWF0aC5taW4obysxLG4tMSk7cmV0dXJuIGpmKHIuZ2V0KGEsbyksci5nZXQobCxvKSxyLmdldChhLHUpLHIuZ2V0KGwsdSksaS1hLHMtbyl9Y29uc3QgcWY9e21hcGJveDpbNjU1My42LDI1LjYsLjEsMWU0XSx0ZXJyYXJpdW06WzI1NiwxLDEvMjU2LDMyNzY4XX07ZnVuY3Rpb24gTmYodCxlLHIpe3JldHVybiAoMjU2KnQqMjU2KzI1NiplK3IpLzEwLTFlNH1mdW5jdGlvbiBHZih0LGUscil7cmV0dXJuIDI1Nip0K2Urci8yNTYtMzI3Njh9Y2xhc3MgWmZ7Z2V0IHRyZWUoKXtyZXR1cm4gdGhpcy5fdHJlZXx8dGhpcy5fYnVpbGRRdWFkVHJlZSgpLHRoaXMuX3RyZWV9Y29uc3RydWN0b3IodCxlLHIsbj0hMSxpPSExKXtpZih0aGlzLnVpZD10LGUuaGVpZ2h0IT09ZS53aWR0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkRFTSB0aWxlcyBtdXN0IGJlIHNxdWFyZVwiKTtpZihyJiZcIm1hcGJveFwiIT09ciYmXCJ0ZXJyYXJpdW1cIiE9PXIpcmV0dXJuIE4oYFwiJHtyfVwiIGlzIG5vdCBhIHZhbGlkIGVuY29kaW5nIHR5cGUuIFZhbGlkIHR5cGVzIGluY2x1ZGUgXCJtYXBib3hcIiBhbmQgXCJ0ZXJyYXJpdW1cIi5gKTt0aGlzLnN0cmlkZT1lLmhlaWdodDtjb25zdCBzPXRoaXMuZGltPWUuaGVpZ2h0LTIsYT1uZXcgVWludDMyQXJyYXkoZS5kYXRhLmJ1ZmZlcik7aWYodGhpcy5waXhlbHM9bmV3IFVpbnQ4QXJyYXkoZS5kYXRhLmJ1ZmZlciksdGhpcy5lbmNvZGluZz1yfHxcIm1hcGJveFwiLHRoaXMuYm9yZGVyUmVhZHk9biwhbil7Zm9yKGxldCB0PTA7dDxzO3QrKylhW3RoaXMuX2lkeCgtMSx0KV09YVt0aGlzLl9pZHgoMCx0KV0sYVt0aGlzLl9pZHgocyx0KV09YVt0aGlzLl9pZHgocy0xLHQpXSxhW3RoaXMuX2lkeCh0LC0xKV09YVt0aGlzLl9pZHgodCwwKV0sYVt0aGlzLl9pZHgodCxzKV09YVt0aGlzLl9pZHgodCxzLTEpXTthW3RoaXMuX2lkeCgtMSwtMSldPWFbdGhpcy5faWR4KDAsMCldLGFbdGhpcy5faWR4KHMsLTEpXT1hW3RoaXMuX2lkeChzLTEsMCldLGFbdGhpcy5faWR4KC0xLHMpXT1hW3RoaXMuX2lkeCgwLHMtMSldLGFbdGhpcy5faWR4KHMscyldPWFbdGhpcy5faWR4KHMtMSxzLTEpXSxpJiZ0aGlzLl9idWlsZFF1YWRUcmVlKCk7fX1fYnVpbGRRdWFkVHJlZSgpe3RoaXMuX3RyZWU9bmV3ICRmKHRoaXMpO31nZXQodCxlLHI9ITEpe3ImJih0PU0odCwtMSx0aGlzLmRpbSksZT1NKGUsLTEsdGhpcy5kaW0pKTtjb25zdCBuPTQqdGhpcy5faWR4KHQsZSk7cmV0dXJuIChcInRlcnJhcml1bVwiPT09dGhpcy5lbmNvZGluZz9HZjpOZikodGhpcy5waXhlbHNbbl0sdGhpcy5waXhlbHNbbisxXSx0aGlzLnBpeGVsc1tuKzJdKX1zdGF0aWMgZ2V0VW5wYWNrVmVjdG9yKHQpe3JldHVybiBxZlt0XX1nZXQgdW5wYWNrVmVjdG9yKCl7cmV0dXJuIHFmW3RoaXMuZW5jb2RpbmddfV9pZHgodCxlKXtpZih0PC0xfHx0Pj10aGlzLmRpbSsxfHxlPC0xfHxlPj10aGlzLmRpbSsxKXRocm93IG5ldyBSYW5nZUVycm9yKFwib3V0IG9mIHJhbmdlIHNvdXJjZSBjb29yZGluYXRlcyBmb3IgREVNIGRhdGFcIik7cmV0dXJuIChlKzEpKnRoaXMuc3RyaWRlKyh0KzEpfXN0YXRpYyBwYWNrKHQsZSl7Y29uc3Qgcj1bMCwwLDAsMF0sbj1aZi5nZXRVbnBhY2tWZWN0b3IoZSk7bGV0IGk9TWF0aC5mbG9vcigodCtuWzNdKS9uWzJdKTtyZXR1cm4gclsyXT1pJTI1NixpPU1hdGguZmxvb3IoaS8yNTYpLHJbMV09aSUyNTYsaT1NYXRoLmZsb29yKGkvMjU2KSxyWzBdPWkscn1nZXRQaXhlbHMoKXtyZXR1cm4gbmV3IFV1KHt3aWR0aDp0aGlzLnN0cmlkZSxoZWlnaHQ6dGhpcy5zdHJpZGV9LHRoaXMucGl4ZWxzKX1iYWNrZmlsbEJvcmRlcih0LGUscil7aWYodGhpcy5kaW0hPT10LmRpbSl0aHJvdyBuZXcgRXJyb3IoXCJkZW0gZGltZW5zaW9uIG1pc21hdGNoXCIpO2xldCBuPWUqdGhpcy5kaW0saT1lKnRoaXMuZGltK3RoaXMuZGltLHM9cip0aGlzLmRpbSxhPXIqdGhpcy5kaW0rdGhpcy5kaW07c3dpdGNoKGUpe2Nhc2UtMTpuPWktMTticmVhaztjYXNlIDE6aT1uKzE7fXN3aXRjaChyKXtjYXNlLTE6cz1hLTE7YnJlYWs7Y2FzZSAxOmE9cysxO31jb25zdCBvPS1lKnRoaXMuZGltLGw9LXIqdGhpcy5kaW07Zm9yKGxldCBlPXM7ZTxhO2UrKylmb3IobGV0IHI9bjtyPGk7cisrKXtjb25zdCBuPTQqdGhpcy5faWR4KHIsZSksaT00KnRoaXMuX2lkeChyK28sZStsKTt0aGlzLnBpeGVsc1tuKzBdPXQucGl4ZWxzW2krMF0sdGhpcy5waXhlbHNbbisxXT10LnBpeGVsc1tpKzFdLHRoaXMucGl4ZWxzW24rMl09dC5waXhlbHNbaSsyXSx0aGlzLnBpeGVsc1tuKzNdPXQucGl4ZWxzW2krM107fX1vbkRlc2VyaWFsaXplKCl7dGhpcy5fdHJlZSYmKHRoaXMuX3RyZWUuZGVtPXRoaXMpO319SmkoWmYsXCJERU1EYXRhXCIpLEppKCRmLFwiRGVtTWluTWF4UXVhZFRyZWVcIix7b21pdDpbXCJkZW1cIl19KTtjbGFzcyBLZntjb25zdHJ1Y3Rvcih0LGUpe3RoaXMubWF4PXQsdGhpcy5vblJlbW92ZT1lLHRoaXMucmVzZXQoKTt9cmVzZXQoKXtmb3IoY29uc3QgdCBpbiB0aGlzLmRhdGEpZm9yKGNvbnN0IGUgb2YgdGhpcy5kYXRhW3RdKWUudGltZW91dCYmY2xlYXJUaW1lb3V0KGUudGltZW91dCksdGhpcy5vblJlbW92ZShlLnZhbHVlKTtyZXR1cm4gdGhpcy5kYXRhPXt9LHRoaXMub3JkZXI9W10sdGhpc31hZGQodCxlLHIpe2NvbnN0IG49dC53cmFwcGVkKCkua2V5O3ZvaWQgMD09PXRoaXMuZGF0YVtuXSYmKHRoaXMuZGF0YVtuXT1bXSk7Y29uc3QgaT17dmFsdWU6ZSx0aW1lb3V0OnZvaWQgMH07aWYodm9pZCAwIT09ciYmKGkudGltZW91dD1zZXRUaW1lb3V0KCgoKT0+e3RoaXMucmVtb3ZlKHQsaSk7fSkscikpLHRoaXMuZGF0YVtuXS5wdXNoKGkpLHRoaXMub3JkZXIucHVzaChuKSx0aGlzLm9yZGVyLmxlbmd0aD50aGlzLm1heCl7Y29uc3QgdD10aGlzLl9nZXRBbmRSZW1vdmVCeUtleSh0aGlzLm9yZGVyWzBdKTt0JiZ0aGlzLm9uUmVtb3ZlKHQpO31yZXR1cm4gdGhpc31oYXModCl7cmV0dXJuIHQud3JhcHBlZCgpLmtleSBpbiB0aGlzLmRhdGF9Z2V0QW5kUmVtb3ZlKHQpe3JldHVybiB0aGlzLmhhcyh0KT90aGlzLl9nZXRBbmRSZW1vdmVCeUtleSh0LndyYXBwZWQoKS5rZXkpOm51bGx9X2dldEFuZFJlbW92ZUJ5S2V5KHQpe2NvbnN0IGU9dGhpcy5kYXRhW3RdLnNoaWZ0KCk7cmV0dXJuIGUudGltZW91dCYmY2xlYXJUaW1lb3V0KGUudGltZW91dCksMD09PXRoaXMuZGF0YVt0XS5sZW5ndGgmJmRlbGV0ZSB0aGlzLmRhdGFbdF0sdGhpcy5vcmRlci5zcGxpY2UodGhpcy5vcmRlci5pbmRleE9mKHQpLDEpLGUudmFsdWV9Z2V0QnlLZXkodCl7Y29uc3QgZT10aGlzLmRhdGFbdF07cmV0dXJuIGU/ZVswXS52YWx1ZTpudWxsfWdldCh0KXtyZXR1cm4gdGhpcy5oYXModCk/dGhpcy5kYXRhW3Qud3JhcHBlZCgpLmtleV1bMF0udmFsdWU6bnVsbH1yZW1vdmUodCxlKXtpZighdGhpcy5oYXModCkpcmV0dXJuIHRoaXM7Y29uc3Qgcj10LndyYXBwZWQoKS5rZXksbj12b2lkIDA9PT1lPzA6dGhpcy5kYXRhW3JdLmluZGV4T2YoZSksaT10aGlzLmRhdGFbcl1bbl07cmV0dXJuIHRoaXMuZGF0YVtyXS5zcGxpY2UobiwxKSxpLnRpbWVvdXQmJmNsZWFyVGltZW91dChpLnRpbWVvdXQpLDA9PT10aGlzLmRhdGFbcl0ubGVuZ3RoJiZkZWxldGUgdGhpcy5kYXRhW3JdLHRoaXMub25SZW1vdmUoaS52YWx1ZSksdGhpcy5vcmRlci5zcGxpY2UodGhpcy5vcmRlci5pbmRleE9mKHIpLDEpLHRoaXN9c2V0TWF4U2l6ZSh0KXtmb3IodGhpcy5tYXg9dDt0aGlzLm9yZGVyLmxlbmd0aD50aGlzLm1heDspe2NvbnN0IHQ9dGhpcy5fZ2V0QW5kUmVtb3ZlQnlLZXkodGhpcy5vcmRlclswXSk7dCYmdGhpcy5vblJlbW92ZSh0KTt9cmV0dXJuIHRoaXN9ZmlsdGVyKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHIgaW4gdGhpcy5kYXRhKWZvcihjb25zdCBuIG9mIHRoaXMuZGF0YVtyXSl0KG4udmFsdWUpfHxlLnB1c2gobik7Zm9yKGNvbnN0IHQgb2YgZSl0aGlzLnJlbW92ZSh0LnZhbHVlLnRpbGVJRCx0KTt9fWNsYXNzIFhme2NvbnN0cnVjdG9yKHQsZSxyKXt0aGlzLmZ1bmM9dCx0aGlzLm1hc2s9ZSx0aGlzLnJhbmdlPXI7fX1YZi5SZWFkT25seT0hMSxYZi5SZWFkV3JpdGU9ITAsWGYuZGlzYWJsZWQ9bmV3IFhmKDUxOSxYZi5SZWFkT25seSxbMCwxXSk7Y29uc3QgSmY9NzY4MDtjbGFzcyBIZntjb25zdHJ1Y3Rvcih0LGUscixuLGkscyl7dGhpcy50ZXN0PXQsdGhpcy5yZWY9ZSx0aGlzLm1hc2s9cix0aGlzLmZhaWw9bix0aGlzLmRlcHRoRmFpbD1pLHRoaXMucGFzcz1zO319SGYuZGlzYWJsZWQ9bmV3IEhmKHtmdW5jOjUxOSxtYXNrOjB9LDAsMCxKZixKZixKZik7Y2xhc3MgWWZ7Y29uc3RydWN0b3IodCxlLHIpe3RoaXMuYmxlbmRGdW5jdGlvbj10LHRoaXMuYmxlbmRDb2xvcj1lLHRoaXMubWFzaz1yO319WWYuUmVwbGFjZT1bMSwwXSxZZi5kaXNhYmxlZD1uZXcgWWYoWWYuUmVwbGFjZSxFZS50cmFuc3BhcmVudCxbITEsITEsITEsITFdKSxZZi51bmJsZW5kZWQ9bmV3IFlmKFlmLlJlcGxhY2UsRWUudHJhbnNwYXJlbnQsWyEwLCEwLCEwLCEwXSksWWYuYWxwaGFCbGVuZGVkPW5ldyBZZihbMSw3NzFdLEVlLnRyYW5zcGFyZW50LFshMCwhMCwhMCwhMF0pO2NvbnN0IFdmPTEwMjksUWY9MjMwNTtjbGFzcyB0eXtjb25zdHJ1Y3Rvcih0LGUscil7dGhpcy5lbmFibGU9dCx0aGlzLm1vZGU9ZSx0aGlzLmZyb250RmFjZT1yO319dHkuZGlzYWJsZWQ9bmV3IHR5KCExLFdmLFFmKSx0eS5iYWNrQ0NXPW5ldyB0eSghMCxXZixRZiksdHkuYmFja0NXPW5ldyB0eSghMCxXZiwyMzA0KSx0eS5mcm9udENXPW5ldyB0eSghMCwxMDI4LDIzMDQpLHR5LmZyb250Q0NXPW5ldyB0eSghMCwxMDI4LFFmKTtjbGFzcyBleSBleHRlbmRzIFF0e2NvbnN0cnVjdG9yKHQsZSxyKXtzdXBlcigpLHRoaXMuaWQ9dCx0aGlzLl9vbmx5U3ltYm9scz1yLGUub24oXCJkYXRhXCIsKHQ9PntcInNvdXJjZVwiPT09dC5kYXRhVHlwZSYmXCJtZXRhZGF0YVwiPT09dC5zb3VyY2VEYXRhVHlwZSYmKHRoaXMuX3NvdXJjZUxvYWRlZD0hMCksdGhpcy5fc291cmNlTG9hZGVkJiYhdGhpcy5fcGF1c2VkJiZcInNvdXJjZVwiPT09dC5kYXRhVHlwZSYmXCJjb250ZW50XCI9PT10LnNvdXJjZURhdGFUeXBlJiYodGhpcy5yZWxvYWQoKSx0aGlzLnRyYW5zZm9ybSYmdGhpcy51cGRhdGUodGhpcy50cmFuc2Zvcm0pKTt9KSksZS5vbihcImVycm9yXCIsKCgpPT57dGhpcy5fc291cmNlRXJyb3JlZD0hMDt9KSksdGhpcy5fc291cmNlPWUsdGhpcy5fdGlsZXM9e30sdGhpcy5fY2FjaGU9bmV3IEtmKDAsdGhpcy5fdW5sb2FkVGlsZS5iaW5kKHRoaXMpKSx0aGlzLl90aW1lcnM9e30sdGhpcy5fY2FjaGVUaW1lcnM9e30sdGhpcy5fbWluVGlsZUNhY2hlU2l6ZT1lLm1pblRpbGVDYWNoZVNpemUsdGhpcy5fbWF4VGlsZUNhY2hlU2l6ZT1lLm1heFRpbGVDYWNoZVNpemUsdGhpcy5fbG9hZGVkUGFyZW50VGlsZXM9e30sdGhpcy5fY292ZXJlZFRpbGVzPXt9LHRoaXMuX3N0YXRlPW5ldyBEZix0aGlzLl9pc1Jhc3Rlcj1cInJhc3RlclwiPT09dGhpcy5fc291cmNlLnR5cGV8fFwicmFzdGVyLWRlbVwiPT09dGhpcy5fc291cmNlLnR5cGV8fFwiY3VzdG9tXCI9PT10aGlzLl9zb3VyY2UudHlwZSYmXCJyYXN0ZXJcIj09PXRoaXMuX3NvdXJjZS5fZGF0YVR5cGU7fW9uQWRkKHQpe3RoaXMubWFwPXQsdGhpcy5fbWluVGlsZUNhY2hlU2l6ZT12b2lkIDA9PT10aGlzLl9taW5UaWxlQ2FjaGVTaXplJiZ0P3QuX21pblRpbGVDYWNoZVNpemU6dGhpcy5fbWluVGlsZUNhY2hlU2l6ZSx0aGlzLl9tYXhUaWxlQ2FjaGVTaXplPXZvaWQgMD09PXRoaXMuX21heFRpbGVDYWNoZVNpemUmJnQ/dC5fbWF4VGlsZUNhY2hlU2l6ZTp0aGlzLl9tYXhUaWxlQ2FjaGVTaXplO31sb2FkZWQoKXtpZih0aGlzLl9zb3VyY2VFcnJvcmVkKXJldHVybiAhMDtpZighdGhpcy5fc291cmNlTG9hZGVkKXJldHVybiAhMTtpZighdGhpcy5fc291cmNlLmxvYWRlZCgpKXJldHVybiAhMTtmb3IoY29uc3QgdCBpbiB0aGlzLl90aWxlcyl7Y29uc3QgZT10aGlzLl90aWxlc1t0XTtpZihcImxvYWRlZFwiIT09ZS5zdGF0ZSYmXCJlcnJvcmVkXCIhPT1lLnN0YXRlKXJldHVybiAhMX1yZXR1cm4gITB9Z2V0U291cmNlKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX1wYXVzZSgpe3RoaXMuX3BhdXNlZD0hMDt9cmVzdW1lKCl7aWYoIXRoaXMuX3BhdXNlZClyZXR1cm47Y29uc3QgdD10aGlzLl9zaG91bGRSZWxvYWRPblJlc3VtZTt0aGlzLl9wYXVzZWQ9ITEsdGhpcy5fc2hvdWxkUmVsb2FkT25SZXN1bWU9ITEsdCYmdGhpcy5yZWxvYWQoKSx0aGlzLnRyYW5zZm9ybSYmdGhpcy51cGRhdGUodGhpcy50cmFuc2Zvcm0pO31fbG9hZFRpbGUodCxlKXtyZXR1cm4gdC5pc1N5bWJvbFRpbGU9dGhpcy5fb25seVN5bWJvbHMsdGhpcy5fc291cmNlLmxvYWRUaWxlKHQsZSl9X3VubG9hZFRpbGUodCl7aWYodGhpcy5fc291cmNlLnVubG9hZFRpbGUpcmV0dXJuIHRoaXMuX3NvdXJjZS51bmxvYWRUaWxlKHQsKCgpPT57fSkpfV9hYm9ydFRpbGUodCl7aWYodGhpcy5fc291cmNlLmFib3J0VGlsZSlyZXR1cm4gdGhpcy5fc291cmNlLmFib3J0VGlsZSh0LCgoKT0+e30pKX1zZXJpYWxpemUoKXtyZXR1cm4gdGhpcy5fc291cmNlLnNlcmlhbGl6ZSgpfXByZXBhcmUodCl7dGhpcy5fc291cmNlLnByZXBhcmUmJnRoaXMuX3NvdXJjZS5wcmVwYXJlKCksdGhpcy5fc3RhdGUuY29hbGVzY2VDaGFuZ2VzKHRoaXMuX3RpbGVzLHRoaXMubWFwP3RoaXMubWFwLnBhaW50ZXI6bnVsbCk7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fdGlsZXMpe2NvbnN0IHI9dGhpcy5fdGlsZXNbZV07ci51cGxvYWQodCksci5wcmVwYXJlKHRoaXMubWFwLnN0eWxlLmltYWdlTWFuYWdlcik7fX1nZXRJZHMoKXtyZXR1cm4gRSh0aGlzLl90aWxlcykubWFwKCh0PT50LnRpbGVJRCkpLnNvcnQocnkpLm1hcCgodD0+dC5rZXkpKX1nZXRSZW5kZXJhYmxlSWRzKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHIgaW4gdGhpcy5fdGlsZXMpdGhpcy5faXNJZFJlbmRlcmFibGUoK3IsdCkmJmUucHVzaCh0aGlzLl90aWxlc1tyXSk7cmV0dXJuIHQ/ZS5zb3J0KCgodCxlKT0+e2NvbnN0IHI9dC50aWxlSUQsbj1lLnRpbGVJRCxpPW5ldyB4KHIuY2Fub25pY2FsLngsci5jYW5vbmljYWwueSkuX3JvdGF0ZSh0aGlzLnRyYW5zZm9ybS5hbmdsZSkscz1uZXcgeChuLmNhbm9uaWNhbC54LG4uY2Fub25pY2FsLnkpLl9yb3RhdGUodGhpcy50cmFuc2Zvcm0uYW5nbGUpO3JldHVybiByLm92ZXJzY2FsZWRaLW4ub3ZlcnNjYWxlZFp8fHMueS1pLnl8fHMueC1pLnh9KSkubWFwKCh0PT50LnRpbGVJRC5rZXkpKTplLm1hcCgodD0+dC50aWxlSUQpKS5zb3J0KHJ5KS5tYXAoKHQ9PnQua2V5KSl9aGFzUmVuZGVyYWJsZVBhcmVudCh0KXtjb25zdCBlPXRoaXMuZmluZExvYWRlZFBhcmVudCh0LDApO3JldHVybiAhIWUmJnRoaXMuX2lzSWRSZW5kZXJhYmxlKGUudGlsZUlELmtleSl9X2lzSWRSZW5kZXJhYmxlKHQsZSl7cmV0dXJuIHRoaXMuX3RpbGVzW3RdJiZ0aGlzLl90aWxlc1t0XS5oYXNEYXRhKCkmJiF0aGlzLl9jb3ZlcmVkVGlsZXNbdF0mJihlfHwhdGhpcy5fdGlsZXNbdF0uaG9sZGluZ0ZvckZhZGUoKSl9cmVsb2FkKCl7aWYodGhpcy5fcGF1c2VkKXRoaXMuX3Nob3VsZFJlbG9hZE9uUmVzdW1lPSEwO2Vsc2Uge3RoaXMuX2NhY2hlLnJlc2V0KCk7Zm9yKGNvbnN0IHQgaW4gdGhpcy5fdGlsZXMpXCJlcnJvcmVkXCIhPT10aGlzLl90aWxlc1t0XS5zdGF0ZSYmdGhpcy5fcmVsb2FkVGlsZSgrdCxcInJlbG9hZGluZ1wiKTt9fV9yZWxvYWRUaWxlKHQsZSl7Y29uc3Qgcj10aGlzLl90aWxlc1t0XTtyJiYoXCJsb2FkaW5nXCIhPT1yLnN0YXRlJiYoci5zdGF0ZT1lKSx0aGlzLl9sb2FkVGlsZShyLHRoaXMuX3RpbGVMb2FkZWQuYmluZCh0aGlzLHIsdCxlKSkpO31fdGlsZUxvYWRlZCh0LGUscixuKXtpZihuKWlmKHQuc3RhdGU9XCJlcnJvcmVkXCIsNDA0IT09bi5zdGF0dXMpdGhpcy5fc291cmNlLmZpcmUobmV3IFd0KG4se3RpbGU6dH0pKTtlbHNlIGlmKFwicmFzdGVyLWRlbVwiPT09dGhpcy5fc291cmNlLnR5cGUmJnRoaXMudXNlZEZvclRlcnJhaW4mJnRoaXMubWFwLnBhaW50ZXIudGVycmFpbil7Y29uc3QgdD10aGlzLm1hcC5wYWludGVyLnRlcnJhaW47dGhpcy51cGRhdGUodGhpcy50cmFuc2Zvcm0sdC5nZXRTY2FsZWREZW1UaWxlU2l6ZSgpLCEwKSx0LnJlc2V0VGlsZUxvb2t1cENhY2hlKHRoaXMuaWQpO31lbHNlIHRoaXMudXBkYXRlKHRoaXMudHJhbnNmb3JtKTtlbHNlIHQudGltZUFkZGVkPVh0Lm5vdygpLFwiZXhwaXJlZFwiPT09ciYmKHQucmVmcmVzaGVkVXBvbkV4cGlyYXRpb249ITApLHRoaXMuX3NldFRpbGVSZWxvYWRUaW1lcihlLHQpLFwicmFzdGVyLWRlbVwiPT09dGhpcy5fc291cmNlLnR5cGUmJnQuZGVtJiZ0aGlzLl9iYWNrZmlsbERFTSh0KSx0aGlzLl9zdGF0ZS5pbml0aWFsaXplVGlsZVN0YXRlKHQsdGhpcy5tYXA/dGhpcy5tYXAucGFpbnRlcjpudWxsKSx0aGlzLl9zb3VyY2UuZmlyZShuZXcgWXQoXCJkYXRhXCIse2RhdGFUeXBlOlwic291cmNlXCIsdGlsZTp0LGNvb3JkOnQudGlsZUlELHNvdXJjZUNhY2hlSWQ6dGhpcy5pZH0pKTt9X2JhY2tmaWxsREVNKHQpe2NvbnN0IGU9dGhpcy5nZXRSZW5kZXJhYmxlSWRzKCk7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspe2NvbnN0IGk9ZVtuXTtpZih0Lm5laWdoYm9yaW5nVGlsZXMmJnQubmVpZ2hib3JpbmdUaWxlc1tpXSl7Y29uc3QgZT10aGlzLmdldFRpbGVCeUlEKGkpO3IodCxlKSxyKGUsdCk7fX1mdW5jdGlvbiByKHQsZSl7aWYoIXQuZGVtfHx0LmRlbS5ib3JkZXJSZWFkeSlyZXR1cm47dC5uZWVkc0hpbGxzaGFkZVByZXBhcmU9ITAsdC5uZWVkc0RFTVRleHR1cmVVcGxvYWQ9ITA7bGV0IHI9ZS50aWxlSUQuY2Fub25pY2FsLngtdC50aWxlSUQuY2Fub25pY2FsLng7Y29uc3Qgbj1lLnRpbGVJRC5jYW5vbmljYWwueS10LnRpbGVJRC5jYW5vbmljYWwueSxpPU1hdGgucG93KDIsdC50aWxlSUQuY2Fub25pY2FsLnopLHM9ZS50aWxlSUQua2V5OzA9PT1yJiYwPT09bnx8TWF0aC5hYnMobik+MXx8KE1hdGguYWJzKHIpPjEmJigxPT09TWF0aC5hYnMocitpKT9yKz1pOjE9PT1NYXRoLmFicyhyLWkpJiYoci09aSkpLGUuZGVtJiZ0LmRlbSYmKHQuZGVtLmJhY2tmaWxsQm9yZGVyKGUuZGVtLHIsbiksdC5uZWlnaGJvcmluZ1RpbGVzJiZ0Lm5laWdoYm9yaW5nVGlsZXNbc10mJih0Lm5laWdoYm9yaW5nVGlsZXNbc10uYmFja2ZpbGxlZD0hMCkpKTt9fWdldFRpbGUodCl7cmV0dXJuIHRoaXMuZ2V0VGlsZUJ5SUQodC5rZXkpfWdldFRpbGVCeUlEKHQpe3JldHVybiB0aGlzLl90aWxlc1t0XX1fcmV0YWluTG9hZGVkQ2hpbGRyZW4odCxlLHIsbil7Zm9yKGNvbnN0IGkgaW4gdGhpcy5fdGlsZXMpe2xldCBzPXRoaXMuX3RpbGVzW2ldO2lmKG5baV18fCFzLmhhc0RhdGEoKXx8cy50aWxlSUQub3ZlcnNjYWxlZFo8PWV8fHMudGlsZUlELm92ZXJzY2FsZWRaPnIpY29udGludWU7bGV0IGE9cy50aWxlSUQ7Zm9yKDtzJiZzLnRpbGVJRC5vdmVyc2NhbGVkWj5lKzE7KXtjb25zdCB0PXMudGlsZUlELnNjYWxlZFRvKHMudGlsZUlELm92ZXJzY2FsZWRaLTEpO3M9dGhpcy5fdGlsZXNbdC5rZXldLHMmJnMuaGFzRGF0YSgpJiYoYT10KTt9bGV0IG89YTtmb3IoO28ub3ZlcnNjYWxlZFo+ZTspaWYobz1vLnNjYWxlZFRvKG8ub3ZlcnNjYWxlZFotMSksdFtvLmtleV0pe25bYS5rZXldPWE7YnJlYWt9fX1maW5kTG9hZGVkUGFyZW50KHQsZSl7aWYodC5rZXkgaW4gdGhpcy5fbG9hZGVkUGFyZW50VGlsZXMpe2NvbnN0IHI9dGhpcy5fbG9hZGVkUGFyZW50VGlsZXNbdC5rZXldO3JldHVybiByJiZyLnRpbGVJRC5vdmVyc2NhbGVkWj49ZT9yOm51bGx9Zm9yKGxldCByPXQub3ZlcnNjYWxlZFotMTtyPj1lO3ItLSl7Y29uc3QgZT10LnNjYWxlZFRvKHIpLG49dGhpcy5fZ2V0TG9hZGVkVGlsZShlKTtpZihuKXJldHVybiBufX1fZ2V0TG9hZGVkVGlsZSh0KXtjb25zdCBlPXRoaXMuX3RpbGVzW3Qua2V5XTtyZXR1cm4gZSYmZS5oYXNEYXRhKCk/ZTp0aGlzLl9jYWNoZS5nZXRCeUtleSh0aGlzLl9zb3VyY2UucmVwYXJzZU92ZXJzY2FsZWQ/dC53cmFwcGVkKCkua2V5OnQuY2Fub25pY2FsLmtleSl9dXBkYXRlQ2FjaGVTaXplKHQsZSl7ZT1lfHx0aGlzLl9zb3VyY2UudGlsZVNpemU7Y29uc3Qgcj1NYXRoLmNlaWwodC53aWR0aC9lKSsxLG49TWF0aC5jZWlsKHQuaGVpZ2h0L2UpKzEsaT1NYXRoLmZsb29yKHIqbio1KSxzPVwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLl9taW5UaWxlQ2FjaGVTaXplP01hdGgubWF4KHRoaXMuX21pblRpbGVDYWNoZVNpemUsaSk6aSxhPVwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLl9tYXhUaWxlQ2FjaGVTaXplP01hdGgubWluKHRoaXMuX21heFRpbGVDYWNoZVNpemUscyk6czt0aGlzLl9jYWNoZS5zZXRNYXhTaXplKGEpO31oYW5kbGVXcmFwSnVtcCh0KXtjb25zdCBlPU1hdGgucm91bmQoKHQtKHZvaWQgMD09PXRoaXMuX3ByZXZMbmc/dDp0aGlzLl9wcmV2TG5nKSkvMzYwKTtpZih0aGlzLl9wcmV2TG5nPXQsZSl7Y29uc3QgdD17fTtmb3IoY29uc3QgciBpbiB0aGlzLl90aWxlcyl7Y29uc3Qgbj10aGlzLl90aWxlc1tyXTtuLnRpbGVJRD1uLnRpbGVJRC51bndyYXBUbyhuLnRpbGVJRC53cmFwK2UpLHRbbi50aWxlSUQua2V5XT1uO310aGlzLl90aWxlcz10O2Zvcihjb25zdCB0IGluIHRoaXMuX3RpbWVycyljbGVhclRpbWVvdXQodGhpcy5fdGltZXJzW3RdKSxkZWxldGUgdGhpcy5fdGltZXJzW3RdO2Zvcihjb25zdCB0IGluIHRoaXMuX3RpbGVzKXRoaXMuX3NldFRpbGVSZWxvYWRUaW1lcigrdCx0aGlzLl90aWxlc1t0XSk7fX11cGRhdGUodCxlLHIpe2lmKHRoaXMudHJhbnNmb3JtPXQsIXRoaXMuX3NvdXJjZUxvYWRlZHx8dGhpcy5fcGF1c2VkfHx0aGlzLnRyYW5zZm9ybS5mcmVlemVUaWxlQ292ZXJhZ2UpcmV0dXJuO2lmKHRoaXMudXNlZEZvclRlcnJhaW4mJiFyKXJldHVybjtsZXQgbjt0aGlzLnVwZGF0ZUNhY2hlU2l6ZSh0LGUpLFwiZ2xvYmVcIiE9PXRoaXMudHJhbnNmb3JtLnByb2plY3Rpb24ubmFtZSYmdGhpcy5oYW5kbGVXcmFwSnVtcCh0aGlzLnRyYW5zZm9ybS5jZW50ZXIubG5nKSx0aGlzLl9jb3ZlcmVkVGlsZXM9e30sdGhpcy51c2VkfHx0aGlzLnVzZWRGb3JUZXJyYWluP3RoaXMuX3NvdXJjZS50aWxlSUQ/bj10LmdldFZpc2libGVVbndyYXBwZWRDb29yZGluYXRlcyh0aGlzLl9zb3VyY2UudGlsZUlEKS5tYXAoKHQ9Pm5ldyBmaCh0LmNhbm9uaWNhbC56LHQud3JhcCx0LmNhbm9uaWNhbC56LHQuY2Fub25pY2FsLngsdC5jYW5vbmljYWwueSkpKToobj10LmNvdmVyaW5nVGlsZXMoe3RpbGVTaXplOmV8fHRoaXMuX3NvdXJjZS50aWxlU2l6ZSxtaW56b29tOnRoaXMuX3NvdXJjZS5taW56b29tLG1heHpvb206dGhpcy5fc291cmNlLm1heHpvb20scm91bmRab29tOnRoaXMuX3NvdXJjZS5yb3VuZFpvb20mJiFyLHJlcGFyc2VPdmVyc2NhbGVkOnRoaXMuX3NvdXJjZS5yZXBhcnNlT3ZlcnNjYWxlZCxpc1RlcnJhaW5ERU06dGhpcy51c2VkRm9yVGVycmFpbn0pLHRoaXMuX3NvdXJjZS5oYXNUaWxlJiYobj1uLmZpbHRlcigodD0+dGhpcy5fc291cmNlLmhhc1RpbGUodCkpKSkpOm49W107Y29uc3QgaT10aGlzLl91cGRhdGVSZXRhaW5lZFRpbGVzKG4pO2lmKG55KHRoaXMuX3NvdXJjZS50eXBlKSYmMCE9PW4ubGVuZ3RoKXtjb25zdCB0PXt9LGU9e30scj1PYmplY3Qua2V5cyhpKTtmb3IoY29uc3QgbiBvZiByKXtjb25zdCByPWlbbl0scz10aGlzLl90aWxlc1tuXTtpZighc3x8cy5mYWRlRW5kVGltZSYmcy5mYWRlRW5kVGltZTw9WHQubm93KCkpY29udGludWU7Y29uc3QgYT10aGlzLmZpbmRMb2FkZWRQYXJlbnQocixNYXRoLm1heChyLm92ZXJzY2FsZWRaLWV5Lm1heE92ZXJ6b29taW5nLHRoaXMuX3NvdXJjZS5taW56b29tKSk7YSYmKHRoaXMuX2FkZFRpbGUoYS50aWxlSUQpLHRbYS50aWxlSUQua2V5XT1hLnRpbGVJRCksZVtuXT1yO31jb25zdCBzPW5bbi5sZW5ndGgtMV0ub3ZlcnNjYWxlZFo7Zm9yKGNvbnN0IHQgaW4gdGhpcy5fdGlsZXMpe2NvbnN0IHI9dGhpcy5fdGlsZXNbdF07aWYoaVt0XXx8IXIuaGFzRGF0YSgpKWNvbnRpbnVlO2xldCBuPXIudGlsZUlEO2Zvcig7bi5vdmVyc2NhbGVkWj5zOyl7bj1uLnNjYWxlZFRvKG4ub3ZlcnNjYWxlZFotMSk7Y29uc3Qgcz10aGlzLl90aWxlc1tuLmtleV07aWYocyYmcy5oYXNEYXRhKCkmJmVbbi5rZXldKXtpW3RdPXIudGlsZUlEO2JyZWFrfX19Zm9yKGNvbnN0IGUgaW4gdClpW2VdfHwodGhpcy5fY292ZXJlZFRpbGVzW2VdPSEwLGlbZV09dFtlXSk7fWZvcihjb25zdCB0IGluIGkpdGhpcy5fdGlsZXNbdF0uY2xlYXJGYWRlSG9sZCgpO2NvbnN0IHM9ZnVuY3Rpb24odCxlKXtjb25zdCByPVtdO2Zvcihjb25zdCBuIGluIHQpbiBpbiBlfHxyLnB1c2gobik7cmV0dXJuIHJ9KHRoaXMuX3RpbGVzLGkpO2Zvcihjb25zdCB0IG9mIHMpe2NvbnN0IGU9dGhpcy5fdGlsZXNbdF07ZS5oYXNTeW1ib2xCdWNrZXRzJiYhZS5ob2xkaW5nRm9yRmFkZSgpP2Uuc2V0SG9sZER1cmF0aW9uKHRoaXMubWFwLl9mYWRlRHVyYXRpb24pOmUuaGFzU3ltYm9sQnVja2V0cyYmIWUuc3ltYm9sRmFkZUZpbmlzaGVkKCl8fHRoaXMuX3JlbW92ZVRpbGUoK3QpO310aGlzLl91cGRhdGVMb2FkZWRQYXJlbnRUaWxlQ2FjaGUoKSx0aGlzLl9vbmx5U3ltYm9scyYmdGhpcy5fc291cmNlLmFmdGVyVXBkYXRlJiZ0aGlzLl9zb3VyY2UuYWZ0ZXJVcGRhdGUoKTt9cmVsZWFzZVN5bWJvbEZhZGVUaWxlcygpe2Zvcihjb25zdCB0IGluIHRoaXMuX3RpbGVzKXRoaXMuX3RpbGVzW3RdLmhvbGRpbmdGb3JGYWRlKCkmJnRoaXMuX3JlbW92ZVRpbGUoK3QpO31fdXBkYXRlUmV0YWluZWRUaWxlcyh0KXtjb25zdCBlPXt9O2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gZTtjb25zdCByPXt9LG49dC5yZWR1Y2UoKCh0LGUpPT5NYXRoLm1pbih0LGUub3ZlcnNjYWxlZFopKSwxLzApLGk9dFswXS5vdmVyc2NhbGVkWixzPU1hdGgubWF4KGktZXkubWF4T3Zlcnpvb21pbmcsdGhpcy5fc291cmNlLm1pbnpvb20pLGE9TWF0aC5tYXgoaStleS5tYXhVbmRlcnpvb21pbmcsdGhpcy5fc291cmNlLm1pbnpvb20pLG89e307Zm9yKGNvbnN0IHIgb2YgdCl7Y29uc3QgdD10aGlzLl9hZGRUaWxlKHIpO2Vbci5rZXldPXIsdC5oYXNEYXRhKCl8fG48dGhpcy5fc291cmNlLm1heHpvb20mJihvW3Iua2V5XT1yKTt9dGhpcy5fcmV0YWluTG9hZGVkQ2hpbGRyZW4obyxuLGEsZSk7Zm9yKGNvbnN0IG4gb2YgdCl7bGV0IHQ9dGhpcy5fdGlsZXNbbi5rZXldO2lmKHQuaGFzRGF0YSgpKWNvbnRpbnVlO2lmKG4uY2Fub25pY2FsLno+PXRoaXMuX3NvdXJjZS5tYXh6b29tKXtjb25zdCB0PW4uY2hpbGRyZW4odGhpcy5fc291cmNlLm1heHpvb20pWzBdLHI9dGhpcy5nZXRUaWxlKHQpO2lmKHImJnIuaGFzRGF0YSgpKXtlW3Qua2V5XT10O2NvbnRpbnVlfX1lbHNlIHtjb25zdCB0PW4uY2hpbGRyZW4odGhpcy5fc291cmNlLm1heHpvb20pO2lmKGVbdFswXS5rZXldJiZlW3RbMV0ua2V5XSYmZVt0WzJdLmtleV0mJmVbdFszXS5rZXldKWNvbnRpbnVlfWxldCBpPXQud2FzUmVxdWVzdGVkKCk7Zm9yKGxldCBhPW4ub3ZlcnNjYWxlZFotMTthPj1zOy0tYSl7Y29uc3Qgcz1uLnNjYWxlZFRvKGEpO2lmKHJbcy5rZXldKWJyZWFrO2lmKHJbcy5rZXldPSEwLHQ9dGhpcy5nZXRUaWxlKHMpLCF0JiZpJiYodD10aGlzLl9hZGRUaWxlKHMpKSx0JiYoZVtzLmtleV09cyxpPXQud2FzUmVxdWVzdGVkKCksdC5oYXNEYXRhKCkpKWJyZWFrfX1yZXR1cm4gZX1fdXBkYXRlTG9hZGVkUGFyZW50VGlsZUNhY2hlKCl7dGhpcy5fbG9hZGVkUGFyZW50VGlsZXM9e307Zm9yKGNvbnN0IHQgaW4gdGhpcy5fdGlsZXMpe2NvbnN0IGU9W107bGV0IHIsbj10aGlzLl90aWxlc1t0XS50aWxlSUQ7Zm9yKDtuLm92ZXJzY2FsZWRaPjA7KXtpZihuLmtleSBpbiB0aGlzLl9sb2FkZWRQYXJlbnRUaWxlcyl7cj10aGlzLl9sb2FkZWRQYXJlbnRUaWxlc1tuLmtleV07YnJlYWt9ZS5wdXNoKG4ua2V5KTtjb25zdCB0PW4uc2NhbGVkVG8obi5vdmVyc2NhbGVkWi0xKTtpZihyPXRoaXMuX2dldExvYWRlZFRpbGUodCkscilicmVhaztuPXQ7fWZvcihjb25zdCB0IG9mIGUpdGhpcy5fbG9hZGVkUGFyZW50VGlsZXNbdF09cjt9fV9hZGRUaWxlKHQpe2xldCBlPXRoaXMuX3RpbGVzW3Qua2V5XTtpZihlKXJldHVybiBlO2U9dGhpcy5fY2FjaGUuZ2V0QW5kUmVtb3ZlKHQpLGUmJih0aGlzLl9zZXRUaWxlUmVsb2FkVGltZXIodC5rZXksZSksZS50aWxlSUQ9dCx0aGlzLl9zdGF0ZS5pbml0aWFsaXplVGlsZVN0YXRlKGUsdGhpcy5tYXA/dGhpcy5tYXAucGFpbnRlcjpudWxsKSx0aGlzLl9jYWNoZVRpbWVyc1t0LmtleV0mJihjbGVhclRpbWVvdXQodGhpcy5fY2FjaGVUaW1lcnNbdC5rZXldKSxkZWxldGUgdGhpcy5fY2FjaGVUaW1lcnNbdC5rZXldLHRoaXMuX3NldFRpbGVSZWxvYWRUaW1lcih0LmtleSxlKSkpO2NvbnN0IHI9Qm9vbGVhbihlKTtpZighcil7Y29uc3Qgcj10aGlzLm1hcD90aGlzLm1hcC5wYWludGVyOm51bGw7ZT1uZXcgUGYodCx0aGlzLl9zb3VyY2UudGlsZVNpemUqdC5vdmVyc2NhbGVGYWN0b3IoKSx0aGlzLnRyYW5zZm9ybS50aWxlWm9vbSxyLHRoaXMuX2lzUmFzdGVyKSx0aGlzLl9sb2FkVGlsZShlLHRoaXMuX3RpbGVMb2FkZWQuYmluZCh0aGlzLGUsdC5rZXksZS5zdGF0ZSkpO31yZXR1cm4gZT8oZS51c2VzKyssdGhpcy5fdGlsZXNbdC5rZXldPWUscnx8dGhpcy5fc291cmNlLmZpcmUobmV3IFl0KFwiZGF0YWxvYWRpbmdcIix7dGlsZTplLGNvb3JkOmUudGlsZUlELGRhdGFUeXBlOlwic291cmNlXCJ9KSksZSk6bnVsbH1fc2V0VGlsZVJlbG9hZFRpbWVyKHQsZSl7dCBpbiB0aGlzLl90aW1lcnMmJihjbGVhclRpbWVvdXQodGhpcy5fdGltZXJzW3RdKSxkZWxldGUgdGhpcy5fdGltZXJzW3RdKTtjb25zdCByPWUuZ2V0RXhwaXJ5VGltZW91dCgpO3ImJih0aGlzLl90aW1lcnNbdF09c2V0VGltZW91dCgoKCk9Pnt0aGlzLl9yZWxvYWRUaWxlKHQsXCJleHBpcmVkXCIpLGRlbGV0ZSB0aGlzLl90aW1lcnNbdF07fSkscikpO31fcmVtb3ZlVGlsZSh0KXtjb25zdCBlPXRoaXMuX3RpbGVzW3RdO2UmJihlLnVzZXMtLSxkZWxldGUgdGhpcy5fdGlsZXNbdF0sdGhpcy5fdGltZXJzW3RdJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyc1t0XSksZGVsZXRlIHRoaXMuX3RpbWVyc1t0XSksZS51c2VzPjB8fChlLmhhc0RhdGEoKSYmXCJyZWxvYWRpbmdcIiE9PWUuc3RhdGU/dGhpcy5fY2FjaGUuYWRkKGUudGlsZUlELGUsZS5nZXRFeHBpcnlUaW1lb3V0KCkpOihlLmFib3J0ZWQ9ITAsdGhpcy5fYWJvcnRUaWxlKGUpLHRoaXMuX3VubG9hZFRpbGUoZSkpKSk7fWNsZWFyVGlsZXMoKXt0aGlzLl9zaG91bGRSZWxvYWRPblJlc3VtZT0hMSx0aGlzLl9wYXVzZWQ9ITE7Zm9yKGNvbnN0IHQgaW4gdGhpcy5fdGlsZXMpdGhpcy5fcmVtb3ZlVGlsZSgrdCk7dGhpcy5fc291cmNlLl9jbGVhciYmdGhpcy5fc291cmNlLl9jbGVhcigpLHRoaXMuX2NhY2hlLnJlc2V0KCksdGhpcy5tYXAmJnRoaXMudXNlZEZvclRlcnJhaW4mJnRoaXMubWFwLnBhaW50ZXIudGVycmFpbiYmdGhpcy5tYXAucGFpbnRlci50ZXJyYWluLnJlc2V0VGlsZUxvb2t1cENhY2hlKHRoaXMuaWQpO310aWxlc0luKHQsZSxyKXtjb25zdCBuPVtdLGk9dGhpcy50cmFuc2Zvcm07aWYoIWkpcmV0dXJuIG47Y29uc3Qgcz1cImdsb2JlXCI9PT1pLnByb2plY3Rpb24ubmFtZSxhPU5sKGkuY2VudGVyLmxuZyk7Zm9yKGNvbnN0IG8gaW4gdGhpcy5fdGlsZXMpe2NvbnN0IGw9dGhpcy5fdGlsZXNbb107aWYociYmbC5jbGVhclF1ZXJ5RGVidWdWaXooKSxsLmhvbGRpbmdGb3JGYWRlKCkpY29udGludWU7bGV0IHU7aWYocyl7Y29uc3QgdD1sLnRpbGVJRC5jYW5vbmljYWw7aWYoMD09PXQueil7Y29uc3QgZT1bTWF0aC5hYnMoTShhLC4uLml5KHQsLTEpKS1hKSxNYXRoLmFicyhNKGEsLi4uaXkodCwxKSktYSldO3U9WzAsMiplLmluZGV4T2YoTWF0aC5taW4oLi4uZSkpLTFdO31lbHNlIHtjb25zdCBlPVtNYXRoLmFicyhNKGEsLi4uaXkodCwtMSkpLWEpLE1hdGguYWJzKE0oYSwuLi5peSh0LDApKS1hKSxNYXRoLmFicyhNKGEsLi4uaXkodCwxKSktYSldO3U9W2UuaW5kZXhPZihNYXRoLm1pbiguLi5lKSktMV07fX1lbHNlIHU9WzBdO2Zvcihjb25zdCByIG9mIHUpe2NvbnN0IHM9dC5jb250YWluc1RpbGUobCxpLGUscik7cyYmbi5wdXNoKHMpO319cmV0dXJuIG59Z2V0VmlzaWJsZUNvb3JkaW5hdGVzKHQpe2NvbnN0IGU9dGhpcy5nZXRSZW5kZXJhYmxlSWRzKHQpLm1hcCgodD0+dGhpcy5fdGlsZXNbdF0udGlsZUlEKSk7Zm9yKGNvbnN0IHQgb2YgZSl0LnByb2pNYXRyaXg9dGhpcy50cmFuc2Zvcm0uY2FsY3VsYXRlUHJvak1hdHJpeCh0LnRvVW53cmFwcGVkKCkpO3JldHVybiBlfWhhc1RyYW5zaXRpb24oKXtpZih0aGlzLl9zb3VyY2UuaGFzVHJhbnNpdGlvbigpKXJldHVybiAhMDtpZihueSh0aGlzLl9zb3VyY2UudHlwZSkpZm9yKGNvbnN0IHQgaW4gdGhpcy5fdGlsZXMpe2NvbnN0IGU9dGhpcy5fdGlsZXNbdF07aWYodm9pZCAwIT09ZS5mYWRlRW5kVGltZSYmZS5mYWRlRW5kVGltZT49WHQubm93KCkpcmV0dXJuICEwfXJldHVybiAhMX1zZXRGZWF0dXJlU3RhdGUodCxlLHIpe3RoaXMuX3N0YXRlLnVwZGF0ZVN0YXRlKHQ9dHx8XCJfZ2VvanNvblRpbGVMYXllclwiLGUscik7fXJlbW92ZUZlYXR1cmVTdGF0ZSh0LGUscil7dGhpcy5fc3RhdGUucmVtb3ZlRmVhdHVyZVN0YXRlKHQ9dHx8XCJfZ2VvanNvblRpbGVMYXllclwiLGUscik7fWdldEZlYXR1cmVTdGF0ZSh0LGUpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRTdGF0ZSh0PXR8fFwiX2dlb2pzb25UaWxlTGF5ZXJcIixlKX1zZXREZXBlbmRlbmNpZXModCxlLHIpe2NvbnN0IG49dGhpcy5fdGlsZXNbdF07biYmbi5zZXREZXBlbmRlbmNpZXMoZSxyKTt9cmVsb2FkVGlsZXNGb3JEZXBlbmRlbmNpZXModCxlKXtmb3IoY29uc3QgciBpbiB0aGlzLl90aWxlcyl0aGlzLl90aWxlc1tyXS5oYXNEZXBlbmRlbmN5KHQsZSkmJnRoaXMuX3JlbG9hZFRpbGUoK3IsXCJyZWxvYWRpbmdcIik7dGhpcy5fY2FjaGUuZmlsdGVyKChyPT4hci5oYXNEZXBlbmRlbmN5KHQsZSkpKTt9X3ByZWxvYWRUaWxlcyh0LGUpe2lmKCF0aGlzLl9zb3VyY2VMb2FkZWQpe2NvbnN0IHI9KCk9Pnt0aGlzLl9zb3VyY2VMb2FkZWQmJih0aGlzLl9zb3VyY2Uub2ZmKFwiZGF0YVwiLHIpLHRoaXMuX3ByZWxvYWRUaWxlcyh0LGUpKTt9O3JldHVybiB2b2lkIHRoaXMuX3NvdXJjZS5vbihcImRhdGFcIixyKX1jb25zdCByPW5ldyBNYXAsbj1BcnJheS5pc0FycmF5KHQpP3Q6W3RdLGk9dGhpcy5tYXAucGFpbnRlci50ZXJyYWluLHM9dGhpcy51c2VkRm9yVGVycmFpbiYmaT9pLmdldFNjYWxlZERlbVRpbGVTaXplKCk6dGhpcy5fc291cmNlLnRpbGVTaXplO2Zvcihjb25zdCB0IG9mIG4pe2NvbnN0IGU9dC5jb3ZlcmluZ1RpbGVzKHt0aWxlU2l6ZTpzLG1pbnpvb206dGhpcy5fc291cmNlLm1pbnpvb20sbWF4em9vbTp0aGlzLl9zb3VyY2UubWF4em9vbSxyb3VuZFpvb206dGhpcy5fc291cmNlLnJvdW5kWm9vbSYmIXRoaXMudXNlZEZvclRlcnJhaW4scmVwYXJzZU92ZXJzY2FsZWQ6dGhpcy5fc291cmNlLnJlcGFyc2VPdmVyc2NhbGVkLGlzVGVycmFpbkRFTTp0aGlzLnVzZWRGb3JUZXJyYWlufSk7Zm9yKGNvbnN0IHQgb2YgZSlyLnNldCh0LmtleSx0KTt0aGlzLnVzZWRGb3JUZXJyYWluJiZ0LnVwZGF0ZUVsZXZhdGlvbighMSk7fUIoQXJyYXkuZnJvbShyLnZhbHVlcygpKSwoKHQsZSk9Pntjb25zdCByPW5ldyBQZih0LHRoaXMuX3NvdXJjZS50aWxlU2l6ZSp0Lm92ZXJzY2FsZUZhY3RvcigpLHRoaXMudHJhbnNmb3JtLnRpbGVab29tLHRoaXMubWFwLnBhaW50ZXIsdGhpcy5faXNSYXN0ZXIpO3RoaXMuX2xvYWRUaWxlKHIsKHQ9PntcInJhc3Rlci1kZW1cIj09PXRoaXMuX3NvdXJjZS50eXBlJiZyLmRlbSYmdGhpcy5fYmFja2ZpbGxERU0ociksZSh0LHIpO30pKTt9KSxlKTt9fWZ1bmN0aW9uIHJ5KHQsZSl7Y29uc3Qgcj1NYXRoLmFicygyKnQud3JhcCktKyh0LndyYXA8MCksbj1NYXRoLmFicygyKmUud3JhcCktKyhlLndyYXA8MCk7cmV0dXJuIHQub3ZlcnNjYWxlZFotZS5vdmVyc2NhbGVkWnx8bi1yfHxlLmNhbm9uaWNhbC55LXQuY2Fub25pY2FsLnl8fGUuY2Fub25pY2FsLngtdC5jYW5vbmljYWwueH1mdW5jdGlvbiBueSh0KXtyZXR1cm4gXCJyYXN0ZXJcIj09PXR8fFwiaW1hZ2VcIj09PXR8fFwidmlkZW9cIj09PXR8fFwiY3VzdG9tXCI9PT10fWZ1bmN0aW9uIGl5KHQsZSl7Y29uc3Qgcj0xPDx0Lno7cmV0dXJuIFt0LngvcitlLCh0LngrMSkvcitlXX1leS5tYXhPdmVyem9vbWluZz0xMCxleS5tYXhVbmRlcnpvb21pbmc9MztjbGFzcyBzeXtjb25zdHJ1Y3Rvcih0LGUscil7dGhpcy5fZGVtVGlsZT10LHRoaXMuX2RlbT10aGlzLl9kZW1UaWxlLmRlbSx0aGlzLl9zY2FsZT1lLHRoaXMuX29mZnNldD1yO31zdGF0aWMgY3JlYXRlKHQsZSxyKXtjb25zdCBuPXJ8fHQuZmluZERFTVRpbGVGb3IoZSk7aWYoIW58fCFuLmRlbSlyZXR1cm47Y29uc3QgaT1uLmRlbSxzPW4udGlsZUlELGE9MTw8ZS5jYW5vbmljYWwuei1zLmNhbm9uaWNhbC56O3JldHVybiBuZXcgc3kobixuLnRpbGVTaXplL2FvL2EsWyhlLmNhbm9uaWNhbC54L2Etcy5jYW5vbmljYWwueCkqaS5kaW0sKGUuY2Fub25pY2FsLnkvYS1zLmNhbm9uaWNhbC55KSppLmRpbV0pfXRpbGVDb29yZFRvUGl4ZWwodCxlKXtjb25zdCByPWUqdGhpcy5fc2NhbGUrdGhpcy5fb2Zmc2V0WzFdLG49TWF0aC5mbG9vcih0KnRoaXMuX3NjYWxlK3RoaXMuX29mZnNldFswXSksaT1NYXRoLmZsb29yKHIpO3JldHVybiBuZXcgeChuLGkpfWdldEVsZXZhdGlvbkF0KHQsZSxyLG4pe2NvbnN0IGk9dCp0aGlzLl9zY2FsZSt0aGlzLl9vZmZzZXRbMF0scz1lKnRoaXMuX3NjYWxlK3RoaXMuX29mZnNldFsxXSxhPU1hdGguZmxvb3IoaSksbz1NYXRoLmZsb29yKHMpLGw9dGhpcy5fZGVtO3JldHVybiBuPSEhbixyP0VyKEVyKGwuZ2V0KGEsbyxuKSxsLmdldChhLG8rMSxuKSxzLW8pLEVyKGwuZ2V0KGErMSxvLG4pLGwuZ2V0KGErMSxvKzEsbikscy1vKSxpLWEpOmwuZ2V0KGEsbyxuKX1nZXRFbGV2YXRpb25BdFBpeGVsKHQsZSxyKXtyZXR1cm4gdGhpcy5fZGVtLmdldCh0LGUsISFyKX1nZXRNZXRlclRvREVNKHQpe3JldHVybiAoMTw8dGhpcy5fZGVtVGlsZS50aWxlSUQuY2Fub25pY2FsLnopKlpsKDEsdCkqdGhpcy5fZGVtLnN0cmlkZX19Y2xhc3MgYXl7Y29uc3RydWN0b3IodCxlKXt0aGlzLnRpbGVJRD10LHRoaXMueD10LmNhbm9uaWNhbC54LHRoaXMueT10LmNhbm9uaWNhbC55LHRoaXMuej10LmNhbm9uaWNhbC56LHRoaXMuZ3JpZD1uZXcgS2koYW8sMTYsMCksdGhpcy5mZWF0dXJlSW5kZXhBcnJheT1uZXcgYmEsdGhpcy5wcm9tb3RlSWQ9ZTt9aW5zZXJ0KHQsZSxyLG4saSxzPTApe2NvbnN0IGE9dGhpcy5mZWF0dXJlSW5kZXhBcnJheS5sZW5ndGg7dGhpcy5mZWF0dXJlSW5kZXhBcnJheS5lbXBsYWNlQmFjayhyLG4saSxzKTtjb25zdCBvPXRoaXMuZ3JpZDtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgcj1lW3RdLG49WzEvMCwxLzAsLTEvMCwtMS8wXTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3QgZT1yW3RdO25bMF09TWF0aC5taW4oblswXSxlLngpLG5bMV09TWF0aC5taW4oblsxXSxlLnkpLG5bMl09TWF0aC5tYXgoblsyXSxlLngpLG5bM109TWF0aC5tYXgoblszXSxlLnkpO31uWzBdPGFvJiZuWzFdPGFvJiZuWzJdPj0wJiZuWzNdPj0wJiZvLmluc2VydChhLG5bMF0sblsxXSxuWzJdLG5bM10pO319bG9hZFZUTGF5ZXJzKCl7aWYoIXRoaXMudnRMYXllcnMpe3RoaXMudnRMYXllcnM9bmV3IFpjKG5ldyBtcCh0aGlzLnJhd1RpbGVEYXRhKSkubGF5ZXJzLHRoaXMuc291cmNlTGF5ZXJDb2Rlcj1uZXcgd2YodGhpcy52dExheWVycz9PYmplY3Qua2V5cyh0aGlzLnZ0TGF5ZXJzKS5zb3J0KCk6W1wiX2dlb2pzb25UaWxlTGF5ZXJcIl0pLHRoaXMudnRGZWF0dXJlcz17fTtmb3IoY29uc3QgdCBpbiB0aGlzLnZ0TGF5ZXJzKXRoaXMudnRGZWF0dXJlc1t0XT1bXTt9cmV0dXJuIHRoaXMudnRMYXllcnN9cXVlcnkodCxlLHIsbil7dGhpcy5sb2FkVlRMYXllcnMoKTtjb25zdCBpPXQucGFyYW1zfHx7fSxzPWhpKGkuZmlsdGVyKSxhPXQudGlsZVJlc3VsdCxvPXQudHJhbnNmb3JtLGw9YS5idWZmZXJlZFRpbGVzcGFjZUJvdW5kcyx1PXRoaXMuZ3JpZC5xdWVyeShsLm1pbi54LGwubWluLnksbC5tYXgueCxsLm1heC55LCgodCxlLHIsbik9Pnd1KGEuYnVmZmVyZWRUaWxlc3BhY2VHZW9tZXRyeSx0LGUscixuKSkpO3Uuc29ydChseSk7bGV0IGM9bnVsbDtvLmVsZXZhdGlvbiYmdS5sZW5ndGg+MCYmKGM9c3kuY3JlYXRlKG8uZWxldmF0aW9uLHRoaXMudGlsZUlEKSk7Y29uc3QgaD17fTtsZXQgcDtmb3IobGV0IG89MDtvPHUubGVuZ3RoO28rKyl7Y29uc3QgbD11W29dO2lmKGw9PT1wKWNvbnRpbnVlO3A9bDtjb25zdCBkPXRoaXMuZmVhdHVyZUluZGV4QXJyYXkuZ2V0KGwpO2xldCBmPW51bGw7dGhpcy5sb2FkTWF0Y2hpbmdGZWF0dXJlKGgsZCxzLGkubGF5ZXJzLGkuYXZhaWxhYmxlSW1hZ2VzLGUscixuLCgoZSxyLG4saT0wKT0+KGZ8fChmPWF1KGUsdGhpcy50aWxlSUQuY2Fub25pY2FsLHQudGlsZVRyYW5zZm9ybSkpLHIucXVlcnlJbnRlcnNlY3RzRmVhdHVyZShhLGUsbixmLHRoaXMueix0LnRyYW5zZm9ybSx0LnBpeGVsUG9zTWF0cml4LGMsaSkpKSk7fXJldHVybiBofWxvYWRNYXRjaGluZ0ZlYXR1cmUodCxlLHIsbixpLHMsYSxvLGwpe2NvbnN0e2ZlYXR1cmVJbmRleDp1LGJ1Y2tldEluZGV4OmMsc291cmNlTGF5ZXJJbmRleDpoLGxheW91dFZlcnRleEFycmF5T2Zmc2V0OnB9PWUsZD10aGlzLmJ1Y2tldExheWVySURzW2NdO2lmKG4mJiFmdW5jdGlvbih0LGUpe2ZvcihsZXQgcj0wO3I8dC5sZW5ndGg7cisrKWlmKGUuaW5kZXhPZih0W3JdKT49MClyZXR1cm4gITA7cmV0dXJuICExfShuLGQpKXJldHVybjtjb25zdCBmPXRoaXMuc291cmNlTGF5ZXJDb2Rlci5kZWNvZGUoaCkseT10aGlzLnZ0TGF5ZXJzW2ZdLmZlYXR1cmUodSk7aWYoci5uZWVkR2VvbWV0cnkpe2NvbnN0IHQ9b3UoeSwhMCk7aWYoIXIuZmlsdGVyKG5ldyB3cyh0aGlzLnRpbGVJRC5vdmVyc2NhbGVkWiksdCx0aGlzLnRpbGVJRC5jYW5vbmljYWwpKXJldHVybn1lbHNlIGlmKCFyLmZpbHRlcihuZXcgd3ModGhpcy50aWxlSUQub3ZlcnNjYWxlZFopLHkpKXJldHVybjtjb25zdCBtPXRoaXMuZ2V0SWQoeSxmKTtmb3IobGV0IGU9MDtlPGQubGVuZ3RoO2UrKyl7Y29uc3Qgcj1kW2VdO2lmKG4mJm4uaW5kZXhPZihyKTwwKWNvbnRpbnVlO2NvbnN0IGM9c1tyXTtpZighYyljb250aW51ZTtsZXQgaD17fTt2b2lkIDAhPT1tJiZvJiYoaD1vLmdldFN0YXRlKGMuc291cmNlTGF5ZXJ8fFwiX2dlb2pzb25UaWxlTGF5ZXJcIixtKSk7Y29uc3QgZj1DKHt9LGFbcl0pO2YucGFpbnQ9b3koZi5wYWludCxjLnBhaW50LHksaCxpKSxmLmxheW91dD1veShmLmxheW91dCxjLmxheW91dCx5LGgsaSk7Y29uc3QgZz0hbHx8bCh5LGMsaCxwKTtpZighZyljb250aW51ZTtjb25zdCB4PW5ldyBBZih5LHRoaXMueix0aGlzLngsdGhpcy55LG0pO3gubGF5ZXI9ZjtsZXQgdj10W3JdO3ZvaWQgMD09PXYmJih2PXRbcl09W10pLHYucHVzaCh7ZmVhdHVyZUluZGV4OnUsZmVhdHVyZTp4LGludGVyc2VjdGlvblo6Z30pO319bG9va3VwU3ltYm9sRmVhdHVyZXModCxlLHIsbixpLHMsYSxvKXtjb25zdCBsPXt9O3RoaXMubG9hZFZUTGF5ZXJzKCk7Y29uc3QgdT1oaShpKTtmb3IoY29uc3QgaSBvZiB0KXRoaXMubG9hZE1hdGNoaW5nRmVhdHVyZShsLHtidWNrZXRJbmRleDpyLHNvdXJjZUxheWVySW5kZXg6bixmZWF0dXJlSW5kZXg6aSxsYXlvdXRWZXJ0ZXhBcnJheU9mZnNldDowfSx1LHMsYSxvLGUpO3JldHVybiBsfWxvYWRGZWF0dXJlKHQpe2NvbnN0e2ZlYXR1cmVJbmRleDplLHNvdXJjZUxheWVySW5kZXg6cn09dDt0aGlzLmxvYWRWVExheWVycygpO2NvbnN0IG49dGhpcy5zb3VyY2VMYXllckNvZGVyLmRlY29kZShyKSxpPXRoaXMudnRGZWF0dXJlc1tuXTtpZihpW2VdKXJldHVybiBpW2VdO2NvbnN0IHM9dGhpcy52dExheWVyc1tuXS5mZWF0dXJlKGUpO3JldHVybiBpW2VdPXMsc31oYXNMYXllcih0KXtmb3IoY29uc3QgZSBvZiB0aGlzLmJ1Y2tldExheWVySURzKWZvcihjb25zdCByIG9mIGUpaWYodD09PXIpcmV0dXJuICEwO3JldHVybiAhMX1nZXRJZCh0LGUpe2xldCByPXQuaWQ7aWYodGhpcy5wcm9tb3RlSWQpe2NvbnN0IG49XCJzdHJpbmdcIj09dHlwZW9mIHRoaXMucHJvbW90ZUlkP3RoaXMucHJvbW90ZUlkOnRoaXMucHJvbW90ZUlkW2VdO251bGwhPW4mJihyPXQucHJvcGVydGllc1tuXSksXCJib29sZWFuXCI9PXR5cGVvZiByJiYocj1OdW1iZXIocikpO31yZXR1cm4gcn19ZnVuY3Rpb24gb3kodCxlLHIsbixpKXtyZXR1cm4gJCh0LCgodCxzKT0+e2NvbnN0IGE9ZSBpbnN0YW5jZW9mIHpzP2UuZ2V0KHMpOm51bGw7cmV0dXJuIGEmJmEuZXZhbHVhdGU/YS5ldmFsdWF0ZShyLG4saSk6YX0pKX1mdW5jdGlvbiBseSh0LGUpe3JldHVybiBlLXR9SmkoYXksXCJGZWF0dXJlSW5kZXhcIix7b21pdDpbXCJyYXdUaWxlRGF0YVwiLFwic291cmNlTGF5ZXJDb2RlclwiXX0pO2NsYXNzIHV5e2NvbnN0cnVjdG9yKHQsZSl7dGhpcy53aWR0aD10LHRoaXMuaGVpZ2h0PWUsdGhpcy5uZXh0Um93PTAsdGhpcy5pbWFnZT1uZXcgUnUoe3dpZHRoOnQsaGVpZ2h0OmV9KSx0aGlzLnBvc2l0aW9ucz17fSx0aGlzLnVwbG9hZGVkPSExO31nZXREYXNoKHQsZSl7Y29uc3Qgcj10aGlzLmdldEtleSh0LGUpO3JldHVybiB0aGlzLnBvc2l0aW9uc1tyXX10cmltKCl7Y29uc3QgdD10aGlzLndpZHRoLGU9dGhpcy5oZWlnaHQ9TCh0aGlzLm5leHRSb3cpO3RoaXMuaW1hZ2UucmVzaXplKHt3aWR0aDp0LGhlaWdodDplfSk7fWdldEtleSh0LGUpe3JldHVybiB0LmpvaW4oXCIsXCIpK2V9Z2V0RGFzaFJhbmdlcyh0LGUscil7Y29uc3Qgbj1bXTtsZXQgaT10Lmxlbmd0aCUyPT0xPy10W3QubGVuZ3RoLTFdKnI6MCxzPXRbMF0qcixhPSEwO24ucHVzaCh7bGVmdDppLHJpZ2h0OnMsaXNEYXNoOmEsemVyb0xlbmd0aDowPT09dFswXX0pO2xldCBvPXRbMF07Zm9yKGxldCBlPTE7ZTx0Lmxlbmd0aDtlKyspe2E9IWE7Y29uc3QgbD10W2VdO2k9bypyLG8rPWwscz1vKnIsbi5wdXNoKHtsZWZ0OmkscmlnaHQ6cyxpc0Rhc2g6YSx6ZXJvTGVuZ3RoOjA9PT1sfSk7fXJldHVybiBufWFkZFJvdW5kRGFzaCh0LGUscil7Y29uc3Qgbj1lLzI7Zm9yKGxldCBlPS1yO2U8PXI7ZSsrKXtjb25zdCBpPXRoaXMud2lkdGgqKHRoaXMubmV4dFJvdytyK2UpO2xldCBzPTAsYT10W3NdO2ZvcihsZXQgbz0wO288dGhpcy53aWR0aDtvKyspe28vYS5yaWdodD4xJiYoYT10Wysrc10pO2NvbnN0IGw9TWF0aC5hYnMoby1hLmxlZnQpLHU9TWF0aC5hYnMoby1hLnJpZ2h0KSxjPU1hdGgubWluKGwsdSk7bGV0IGg7Y29uc3QgcD1lL3IqKG4rMSk7aWYoYS5pc0Rhc2gpe2NvbnN0IHQ9bi1NYXRoLmFicyhwKTtoPU1hdGguc3FydChjKmMrdCp0KTt9ZWxzZSBoPW4tTWF0aC5zcXJ0KGMqYytwKnApO3RoaXMuaW1hZ2UuZGF0YVtpK29dPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGgrMTI4KSk7fX19YWRkUmVndWxhckRhc2godCxlKXtmb3IobGV0IGU9dC5sZW5ndGgtMTtlPj0wOy0tZSl7Y29uc3Qgcj10W2VdLG49dFtlKzFdO3IuemVyb0xlbmd0aD90LnNwbGljZShlLDEpOm4mJm4uaXNEYXNoPT09ci5pc0Rhc2gmJihuLmxlZnQ9ci5sZWZ0LHQuc3BsaWNlKGUsMSkpO31jb25zdCByPXRbMF0sbj10W3QubGVuZ3RoLTFdO3IuaXNEYXNoPT09bi5pc0Rhc2gmJihyLmxlZnQ9bi5sZWZ0LXRoaXMud2lkdGgsbi5yaWdodD1yLnJpZ2h0K3RoaXMud2lkdGgpO2NvbnN0IGk9dGhpcy53aWR0aCp0aGlzLm5leHRSb3c7bGV0IHM9MCxhPXRbc107Zm9yKGxldCByPTA7cjx0aGlzLndpZHRoO3IrKyl7ci9hLnJpZ2h0PjEmJihhPXRbKytzXSk7Y29uc3Qgbj1NYXRoLmFicyhyLWEubGVmdCksbz1NYXRoLmFicyhyLWEucmlnaHQpLGw9TWF0aC5taW4obixvKTt0aGlzLmltYWdlLmRhdGFbaStyXT1NYXRoLm1heCgwLE1hdGgubWluKDI1NSwoYS5pc0Rhc2g/bDotbCkrZSsxMjgpKTt9fWFkZERhc2godCxlKXtjb25zdCByPXRoaXMuZ2V0S2V5KHQsZSk7aWYodGhpcy5wb3NpdGlvbnNbcl0pcmV0dXJuIHRoaXMucG9zaXRpb25zW3JdO2NvbnN0IG49XCJyb3VuZFwiPT09ZSxpPW4/NzowLHM9MippKzE7aWYodGhpcy5uZXh0Um93K3M+dGhpcy5oZWlnaHQpcmV0dXJuIE4oXCJMaW5lQXRsYXMgb3V0IG9mIHNwYWNlXCIpLG51bGw7MD09PXQubGVuZ3RoJiZ0LnB1c2goMSk7bGV0IGE9MDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyl0W2VdPDAmJihOKFwiTmVnYXRpdmUgdmFsdWUgaXMgZm91bmQgaW4gbGluZSBkYXNoYXJyYXksIHJlcGxhY2luZyB2YWx1ZXMgd2l0aCAwXCIpLHRbZV09MCksYSs9dFtlXTtpZigwIT09YSl7Y29uc3Qgcj10aGlzLndpZHRoL2Escz10aGlzLmdldERhc2hSYW5nZXModCx0aGlzLndpZHRoLHIpO24/dGhpcy5hZGRSb3VuZERhc2gocyxyLGkpOnRoaXMuYWRkUmVndWxhckRhc2gocyxcInNxdWFyZVwiPT09ZT8uNSpyOjApO31jb25zdCBvPXRoaXMubmV4dFJvdytpO3RoaXMubmV4dFJvdys9cztjb25zdCBsPXt0bDpbbyxpXSxicjpbYSwwXX07cmV0dXJuIHRoaXMucG9zaXRpb25zW3JdPWwsbH19SmkodXksXCJMaW5lQXRsYXNcIik7Y29uc3QgY3k9MSp0ZDtjbGFzcyBoeXtjb25zdHJ1Y3Rvcih0KXtjb25zdCBlPXt9LHI9W107Zm9yKGNvbnN0IG4gaW4gdCl7Y29uc3QgaT10W25dLHM9ZVtuXT17fTtmb3IoY29uc3QgdCBpbiBpLmdseXBocyl7Y29uc3QgZT1pLmdseXBoc1srdF07aWYoIWV8fDA9PT1lLmJpdG1hcC53aWR0aHx8MD09PWUuYml0bWFwLmhlaWdodCljb250aW51ZTtjb25zdCBuPWUubWV0cmljcy5sb2NhbEdseXBoP2N5OjEsYT17eDowLHk6MCx3OmUuYml0bWFwLndpZHRoKzIqbixoOmUuYml0bWFwLmhlaWdodCsyKm59O3IucHVzaChhKSxzW3RdPWE7fX1jb25zdHt3Om4saDppfT1fcChyKSxzPW5ldyBSdSh7d2lkdGg6bnx8MSxoZWlnaHQ6aXx8MX0pO2Zvcihjb25zdCByIGluIHQpe2NvbnN0IG49dFtyXTtmb3IoY29uc3QgdCBpbiBuLmdseXBocyl7Y29uc3QgaT1uLmdseXBoc1srdF07aWYoIWl8fDA9PT1pLmJpdG1hcC53aWR0aHx8MD09PWkuYml0bWFwLmhlaWdodCljb250aW51ZTtjb25zdCBhPWVbcl1bdF0sbz1pLm1ldHJpY3MubG9jYWxHbHlwaD9jeToxO1J1LmNvcHkoaS5iaXRtYXAscyx7eDowLHk6MH0se3g6YS54K28seTphLnkrb30saS5iaXRtYXApO319dGhpcy5pbWFnZT1zLHRoaXMucG9zaXRpb25zPWU7fX1KaShoeSxcIkdseXBoQXRsYXNcIik7Y2xhc3MgcHl7Y29uc3RydWN0b3IodCl7dGhpcy50aWxlSUQ9bmV3IGZoKHQudGlsZUlELm92ZXJzY2FsZWRaLHQudGlsZUlELndyYXAsdC50aWxlSUQuY2Fub25pY2FsLnosdC50aWxlSUQuY2Fub25pY2FsLngsdC50aWxlSUQuY2Fub25pY2FsLnkpLHRoaXMudGlsZVpvb209dC50aWxlWm9vbSx0aGlzLnVpZD10LnVpZCx0aGlzLnpvb209dC56b29tLHRoaXMuY2Fub25pY2FsPXQudGlsZUlELmNhbm9uaWNhbCx0aGlzLnBpeGVsUmF0aW89dC5waXhlbFJhdGlvLHRoaXMudGlsZVNpemU9dC50aWxlU2l6ZSx0aGlzLnNvdXJjZT10LnNvdXJjZSx0aGlzLm92ZXJzY2FsaW5nPXRoaXMudGlsZUlELm92ZXJzY2FsZUZhY3RvcigpLHRoaXMuc2hvd0NvbGxpc2lvbkJveGVzPXQuc2hvd0NvbGxpc2lvbkJveGVzLHRoaXMuY29sbGVjdFJlc291cmNlVGltaW5nPSEhdC5jb2xsZWN0UmVzb3VyY2VUaW1pbmcsdGhpcy5yZXR1cm5EZXBlbmRlbmNpZXM9ISF0LnJldHVybkRlcGVuZGVuY2llcyx0aGlzLnByb21vdGVJZD10LnByb21vdGVJZCx0aGlzLmVuYWJsZVRlcnJhaW49ISF0LmVuYWJsZVRlcnJhaW4sdGhpcy5pc1N5bWJvbFRpbGU9dC5pc1N5bWJvbFRpbGUsdGhpcy50aWxlVHJhbnNmb3JtPUJkKHQudGlsZUlELmNhbm9uaWNhbCx0LnByb2plY3Rpb24pLHRoaXMucHJvamVjdGlvbj10LnByb2plY3Rpb247fXBhcnNlKHQsZSxyLG4saSl7dGhpcy5zdGF0dXM9XCJwYXJzaW5nXCIsdGhpcy5kYXRhPXQsdGhpcy5jb2xsaXNpb25Cb3hBcnJheT1uZXcgcGE7Y29uc3Qgcz1uZXcgd2YoT2JqZWN0LmtleXModC5sYXllcnMpLnNvcnQoKSksYT1uZXcgYXkodGhpcy50aWxlSUQsdGhpcy5wcm9tb3RlSWQpO2EuYnVja2V0TGF5ZXJJRHM9W107Y29uc3Qgbz17fSxsPW5ldyB1eSgyNTYsMjU2KSx1PXtmZWF0dXJlSW5kZXg6YSxpY29uRGVwZW5kZW5jaWVzOnt9LHBhdHRlcm5EZXBlbmRlbmNpZXM6e30sZ2x5cGhEZXBlbmRlbmNpZXM6e30sbGluZUF0bGFzOmwsYXZhaWxhYmxlSW1hZ2VzOnJ9LGM9ZS5mYW1pbGllc0J5U291cmNlW3RoaXMuc291cmNlXTtmb3IoY29uc3QgZSBpbiBjKXtjb25zdCBuPXQubGF5ZXJzW2VdO2lmKCFuKWNvbnRpbnVlO2xldCBpPSExLGw9ITE7Zm9yKGNvbnN0IHQgb2YgY1tlXSlcInN5bWJvbFwiPT09dFswXS50eXBlP2k9ITA6bD0hMDtpZighMD09PXRoaXMuaXNTeW1ib2xUaWxlJiYhaSljb250aW51ZTtpZighMT09PXRoaXMuaXNTeW1ib2xUaWxlJiYhbCljb250aW51ZTsxPT09bi52ZXJzaW9uJiZOKGBWZWN0b3IgdGlsZSBzb3VyY2UgXCIke3RoaXMuc291cmNlfVwiIGxheWVyIFwiJHtlfVwiIGRvZXMgbm90IHVzZSB2ZWN0b3IgdGlsZSBzcGVjIHYyIGFuZCB0aGVyZWZvcmUgbWF5IGhhdmUgc29tZSByZW5kZXJpbmcgZXJyb3JzLmApO2NvbnN0IGg9cy5lbmNvZGUoZSkscD1bXTtmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKyl7Y29uc3Qgcj1uLmZlYXR1cmUodCksaT1hLmdldElkKHIsZSk7cC5wdXNoKHtmZWF0dXJlOnIsaWQ6aSxpbmRleDp0LHNvdXJjZUxheWVySW5kZXg6aH0pO31mb3IoY29uc3QgdCBvZiBjW2VdKXtjb25zdCBlPXRbMF07dm9pZCAwIT09dGhpcy5pc1N5bWJvbFRpbGUmJlwic3ltYm9sXCI9PT1lLnR5cGUhPT10aGlzLmlzU3ltYm9sVGlsZXx8ZS5taW56b29tJiZ0aGlzLnpvb208TWF0aC5mbG9vcihlLm1pbnpvb20pfHxlLm1heHpvb20mJnRoaXMuem9vbT49ZS5tYXh6b29tfHxcIm5vbmVcIiE9PWUudmlzaWJpbGl0eSYmKGR5KHQsdGhpcy56b29tLHIpLChvW2UuaWRdPWUuY3JlYXRlQnVja2V0KHtpbmRleDphLmJ1Y2tldExheWVySURzLmxlbmd0aCxsYXllcnM6dCx6b29tOnRoaXMuem9vbSxjYW5vbmljYWw6dGhpcy5jYW5vbmljYWwscGl4ZWxSYXRpbzp0aGlzLnBpeGVsUmF0aW8sb3ZlcnNjYWxpbmc6dGhpcy5vdmVyc2NhbGluZyxjb2xsaXNpb25Cb3hBcnJheTp0aGlzLmNvbGxpc2lvbkJveEFycmF5LHNvdXJjZUxheWVySW5kZXg6aCxzb3VyY2VJRDp0aGlzLnNvdXJjZSxlbmFibGVUZXJyYWluOnRoaXMuZW5hYmxlVGVycmFpbixwcm9qZWN0aW9uOnRoaXMucHJvamVjdGlvbi5zcGVjLGF2YWlsYWJsZUltYWdlczpyfSkpLnBvcHVsYXRlKHAsdSx0aGlzLnRpbGVJRC5jYW5vbmljYWwsdGhpcy50aWxlVHJhbnNmb3JtKSxhLmJ1Y2tldExheWVySURzLnB1c2godC5tYXAoKHQ9PnQuaWQpKSkpO319bGV0IGgscCxkLGY7bC50cmltKCk7Y29uc3QgeT17dHlwZTpcIm1heWJlUHJlcGFyZVwiLGlzU3ltYm9sVGlsZTp0aGlzLmlzU3ltYm9sVGlsZSx6b29tOnRoaXMuem9vbX0sbT0oKT0+e2lmKGgpcmV0dXJuIGkoaCk7aWYocCYmZCYmZil7Y29uc3QgdD1uZXcgaHkocCksZT1uZXcga3AoZCxmKTtmb3IoY29uc3QgbiBpbiBvKXtjb25zdCBpPW9bbl07aSBpbnN0YW5jZW9mIG9mPyhkeShpLmxheWVycyx0aGlzLnpvb20sciksdmQoaSxwLHQucG9zaXRpb25zLGQsZS5pY29uUG9zaXRpb25zLHRoaXMuc2hvd0NvbGxpc2lvbkJveGVzLHIsdGhpcy50aWxlSUQuY2Fub25pY2FsLHRoaXMudGlsZVpvb20sdGhpcy5wcm9qZWN0aW9uKSk6aS5oYXNQYXR0ZXJuJiYoaSBpbnN0YW5jZW9mIElofHxpIGluc3RhbmNlb2YgTWN8fGkgaW5zdGFuY2VvZiB0aCkmJihkeShpLmxheWVycyx0aGlzLnpvb20sciksaS5hZGRGZWF0dXJlcyh1LHRoaXMudGlsZUlELmNhbm9uaWNhbCxlLnBhdHRlcm5Qb3NpdGlvbnMscix0aGlzLnRpbGVUcmFuc2Zvcm0pKTt9dGhpcy5zdGF0dXM9XCJkb25lXCIsaShudWxsLHtidWNrZXRzOkUobykuZmlsdGVyKCh0PT4hdC5pc0VtcHR5KCkpKSxmZWF0dXJlSW5kZXg6YSxjb2xsaXNpb25Cb3hBcnJheTp0aGlzLmNvbGxpc2lvbkJveEFycmF5LGdseXBoQXRsYXNJbWFnZTp0LmltYWdlLGxpbmVBdGxhczpsLGltYWdlQXRsYXM6ZSxnbHlwaE1hcDp0aGlzLnJldHVybkRlcGVuZGVuY2llcz9wOm51bGwsaWNvbk1hcDp0aGlzLnJldHVybkRlcGVuZGVuY2llcz9kOm51bGwsZ2x5cGhQb3NpdGlvbnM6dGhpcy5yZXR1cm5EZXBlbmRlbmNpZXM/dC5wb3NpdGlvbnM6bnVsbH0pO319LGc9JCh1LmdseXBoRGVwZW5kZW5jaWVzLCh0PT5PYmplY3Qua2V5cyh0KS5tYXAoTnVtYmVyKSkpO09iamVjdC5rZXlzKGcpLmxlbmd0aD9uLnNlbmQoXCJnZXRHbHlwaHNcIix7dWlkOnRoaXMudWlkLHN0YWNrczpnfSwoKHQsZSk9PntofHwoaD10LHA9ZSxtKCkpO30pLHZvaWQgMCwhMSx5KTpwPXt9O2NvbnN0IHg9T2JqZWN0LmtleXModS5pY29uRGVwZW5kZW5jaWVzKTt4Lmxlbmd0aD9uLnNlbmQoXCJnZXRJbWFnZXNcIix7aWNvbnM6eCxzb3VyY2U6dGhpcy5zb3VyY2UsdGlsZUlEOnRoaXMudGlsZUlELHR5cGU6XCJpY29uc1wifSwoKHQsZSk9PntofHwoaD10LGQ9ZSxtKCkpO30pLHZvaWQgMCwhMSx5KTpkPXt9O2NvbnN0IHY9T2JqZWN0LmtleXModS5wYXR0ZXJuRGVwZW5kZW5jaWVzKTt2Lmxlbmd0aD9uLnNlbmQoXCJnZXRJbWFnZXNcIix7aWNvbnM6dixzb3VyY2U6dGhpcy5zb3VyY2UsdGlsZUlEOnRoaXMudGlsZUlELHR5cGU6XCJwYXR0ZXJuc1wifSwoKHQsZSk9PntofHwoaD10LGY9ZSxtKCkpO30pLHZvaWQgMCwhMSx5KTpmPXt9LG0oKTt9fWZ1bmN0aW9uIGR5KHQsZSxyKXtjb25zdCBuPW5ldyB3cyhlKTtmb3IoY29uc3QgZSBvZiB0KWUucmVjYWxjdWxhdGUobixyKTt9Y2xhc3MgZnl7Y29uc3RydWN0b3IodCl7dGhpcy5lbnRyaWVzPXt9LHRoaXMuc2NoZWR1bGVyPXQ7fXJlcXVlc3QodCxlLHIsbil7Y29uc3QgaT10aGlzLmVudHJpZXNbdF09dGhpcy5lbnRyaWVzW3RdfHx7Y2FsbGJhY2tzOltdfTtpZihpLnJlc3VsdCl7Y29uc3RbdCxyXT1pLnJlc3VsdDtyZXR1cm4gdGhpcy5zY2hlZHVsZXI/dGhpcy5zY2hlZHVsZXIuYWRkKCgoKT0+e24odCxyKTt9KSxlKTpuKHQsciksKCk9Pnt9fXJldHVybiBpLmNhbGxiYWNrcy5wdXNoKG4pLGkuY2FuY2VsfHwoaS5jYW5jZWw9cigoKHIsbik9PntpLnJlc3VsdD1bcixuXTtmb3IoY29uc3QgdCBvZiBpLmNhbGxiYWNrcyl0aGlzLnNjaGVkdWxlcj90aGlzLnNjaGVkdWxlci5hZGQoKCgpPT57dChyLG4pO30pLGUpOnQocixuKTtzZXRUaW1lb3V0KCgoKT0+ZGVsZXRlIHRoaXMuZW50cmllc1t0XSksM2UzKTt9KSkpLCgpPT57aS5yZXN1bHR8fChpLmNhbGxiYWNrcz1pLmNhbGxiYWNrcy5maWx0ZXIoKHQ9PnQhPT1uKSksaS5jYWxsYmFja3MubGVuZ3RofHwoaS5jYW5jZWwoKSxkZWxldGUgdGhpcy5lbnRyaWVzW3RdKSk7fX19ZnVuY3Rpb24geXkodCxlLHIpe2NvbnN0IG49SlNPTi5zdHJpbmdpZnkodC5yZXF1ZXN0KTtyZXR1cm4gdC5kYXRhJiYodGhpcy5kZWR1cGVkLmVudHJpZXNbbl09e3Jlc3VsdDpbbnVsbCx0LmRhdGFdfSksdGhpcy5kZWR1cGVkLnJlcXVlc3Qobix7dHlwZTpcInBhcnNlVGlsZVwiLGlzU3ltYm9sVGlsZTp0LmlzU3ltYm9sVGlsZSx6b29tOnQudGlsZVpvb219LChlPT57Y29uc3Qgbj1wdCh0LnJlcXVlc3QsKCh0LG4saSxzKT0+e3Q/ZSh0KTpuJiZlKG51bGwse3ZlY3RvclRpbGU6cj92b2lkIDA6bmV3IFpjKG5ldyBtcChuKSkscmF3RGF0YTpuLGNhY2hlQ29udHJvbDppLGV4cGlyZXM6c30pO30pKTtyZXR1cm4gKCk9PntuLmNhbmNlbCgpLGUoKTt9fSksZSl9Y29uc3QgbXk9W0ludDhBcnJheSxVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5LEludDE2QXJyYXksVWludDE2QXJyYXksSW50MzJBcnJheSxVaW50MzJBcnJheSxGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5XTtjbGFzcyBneXtzdGF0aWMgZnJvbSh0KXtpZighKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpdGhyb3cgbmV3IEVycm9yKFwiRGF0YSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEFycmF5QnVmZmVyLlwiKTtjb25zdFtlLHJdPW5ldyBVaW50OEFycmF5KHQsMCwyKTtpZigyMTkhPT1lKXRocm93IG5ldyBFcnJvcihcIkRhdGEgZG9lcyBub3QgYXBwZWFyIHRvIGJlIGluIGEgS0RCdXNoIGZvcm1hdC5cIik7Y29uc3Qgbj1yPj40O2lmKDEhPT1uKXRocm93IG5ldyBFcnJvcihgR290IHYke259IGRhdGEgd2hlbiBleHBlY3RlZCB2MS5gKTtjb25zdCBpPW15WzE1JnJdO2lmKCFpKXRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBhcnJheSB0eXBlLlwiKTtjb25zdFtzXT1uZXcgVWludDE2QXJyYXkodCwyLDEpLFthXT1uZXcgVWludDMyQXJyYXkodCw0LDEpO3JldHVybiBuZXcgZ3koYSxzLGksdCl9Y29uc3RydWN0b3IodCxlPTY0LHI9RmxvYXQ2NEFycmF5LG4pe2lmKGlzTmFOKHQpfHx0PDApdGhyb3cgbmV3IEVycm9yKGBVbnBleHBlY3RlZCBudW1JdGVtcyB2YWx1ZTogJHt0fS5gKTt0aGlzLm51bUl0ZW1zPSt0LHRoaXMubm9kZVNpemU9TWF0aC5taW4oTWF0aC5tYXgoK2UsMiksNjU1MzUpLHRoaXMuQXJyYXlUeXBlPXIsdGhpcy5JbmRleEFycmF5VHlwZT10PDY1NTM2P1VpbnQxNkFycmF5OlVpbnQzMkFycmF5O2NvbnN0IGk9bXkuaW5kZXhPZih0aGlzLkFycmF5VHlwZSkscz0yKnQqdGhpcy5BcnJheVR5cGUuQllURVNfUEVSX0VMRU1FTlQsYT10KnRoaXMuSW5kZXhBcnJheVR5cGUuQllURVNfUEVSX0VMRU1FTlQsbz0oOC1hJTgpJTg7aWYoaTwwKXRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB0eXBlZCBhcnJheSBjbGFzczogJHtyfS5gKTtuJiZuIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/KHRoaXMuZGF0YT1uLHRoaXMuaWRzPW5ldyB0aGlzLkluZGV4QXJyYXlUeXBlKHRoaXMuZGF0YSw4LHQpLHRoaXMuY29vcmRzPW5ldyB0aGlzLkFycmF5VHlwZSh0aGlzLmRhdGEsOCthK28sMip0KSx0aGlzLl9wb3M9Mip0LHRoaXMuX2ZpbmlzaGVkPSEwKToodGhpcy5kYXRhPW5ldyBBcnJheUJ1ZmZlcig4K3MrYStvKSx0aGlzLmlkcz1uZXcgdGhpcy5JbmRleEFycmF5VHlwZSh0aGlzLmRhdGEsOCx0KSx0aGlzLmNvb3Jkcz1uZXcgdGhpcy5BcnJheVR5cGUodGhpcy5kYXRhLDgrYStvLDIqdCksdGhpcy5fcG9zPTAsdGhpcy5fZmluaXNoZWQ9ITEsbmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhLDAsMikuc2V0KFsyMTksMTYraV0pLG5ldyBVaW50MTZBcnJheSh0aGlzLmRhdGEsMiwxKVswXT1lLG5ldyBVaW50MzJBcnJheSh0aGlzLmRhdGEsNCwxKVswXT10KTt9YWRkKHQsZSl7Y29uc3Qgcj10aGlzLl9wb3M+PjE7cmV0dXJuIHRoaXMuaWRzW3JdPXIsdGhpcy5jb29yZHNbdGhpcy5fcG9zKytdPXQsdGhpcy5jb29yZHNbdGhpcy5fcG9zKytdPWUscn1maW5pc2goKXtjb25zdCB0PXRoaXMuX3Bvcz4+MTtpZih0IT09dGhpcy5udW1JdGVtcyl0aHJvdyBuZXcgRXJyb3IoYEFkZGVkICR7dH0gaXRlbXMgd2hlbiBleHBlY3RlZCAke3RoaXMubnVtSXRlbXN9LmApO3JldHVybiB4eSh0aGlzLmlkcyx0aGlzLmNvb3Jkcyx0aGlzLm5vZGVTaXplLDAsdGhpcy5udW1JdGVtcy0xLDApLHRoaXMuX2ZpbmlzaGVkPSEwLHRoaXN9cmFuZ2UodCxlLHIsbil7aWYoIXRoaXMuX2ZpbmlzaGVkKXRocm93IG5ldyBFcnJvcihcIkRhdGEgbm90IHlldCBpbmRleGVkIC0gY2FsbCBpbmRleC5maW5pc2goKS5cIik7Y29uc3R7aWRzOmksY29vcmRzOnMsbm9kZVNpemU6YX09dGhpcyxvPVswLGkubGVuZ3RoLTEsMF0sbD1bXTtmb3IoO28ubGVuZ3RoOyl7Y29uc3QgdT1vLnBvcCgpfHwwLGM9by5wb3AoKXx8MCxoPW8ucG9wKCl8fDA7aWYoYy1oPD1hKXtmb3IobGV0IGE9aDthPD1jO2ErKyl7Y29uc3Qgbz1zWzIqYV0sdT1zWzIqYSsxXTtvPj10JiZvPD1yJiZ1Pj1lJiZ1PD1uJiZsLnB1c2goaVthXSk7fWNvbnRpbnVlfWNvbnN0IHA9aCtjPj4xLGQ9c1syKnBdLGY9c1syKnArMV07ZD49dCYmZDw9ciYmZj49ZSYmZjw9biYmbC5wdXNoKGlbcF0pLCgwPT09dT90PD1kOmU8PWYpJiYoby5wdXNoKGgpLG8ucHVzaChwLTEpLG8ucHVzaCgxLXUpKSwoMD09PXU/cj49ZDpuPj1mKSYmKG8ucHVzaChwKzEpLG8ucHVzaChjKSxvLnB1c2goMS11KSk7fXJldHVybiBsfXdpdGhpbih0LGUscil7aWYoIXRoaXMuX2ZpbmlzaGVkKXRocm93IG5ldyBFcnJvcihcIkRhdGEgbm90IHlldCBpbmRleGVkIC0gY2FsbCBpbmRleC5maW5pc2goKS5cIik7Y29uc3R7aWRzOm4sY29vcmRzOmksbm9kZVNpemU6c309dGhpcyxhPVswLG4ubGVuZ3RoLTEsMF0sbz1bXSxsPXIqcjtmb3IoO2EubGVuZ3RoOyl7Y29uc3QgdT1hLnBvcCgpfHwwLGM9YS5wb3AoKXx8MCxoPWEucG9wKCl8fDA7aWYoYy1oPD1zKXtmb3IobGV0IHI9aDtyPD1jO3IrKylfeShpWzIqcl0saVsyKnIrMV0sdCxlKTw9bCYmby5wdXNoKG5bcl0pO2NvbnRpbnVlfWNvbnN0IHA9aCtjPj4xLGQ9aVsyKnBdLGY9aVsyKnArMV07X3koZCxmLHQsZSk8PWwmJm8ucHVzaChuW3BdKSwoMD09PXU/dC1yPD1kOmUtcjw9ZikmJihhLnB1c2goaCksYS5wdXNoKHAtMSksYS5wdXNoKDEtdSkpLCgwPT09dT90K3I+PWQ6ZStyPj1mKSYmKGEucHVzaChwKzEpLGEucHVzaChjKSxhLnB1c2goMS11KSk7fXJldHVybiBvfX1mdW5jdGlvbiB4eSh0LGUscixuLGkscyl7aWYoaS1uPD1yKXJldHVybjtjb25zdCBhPW4raT4+MTt2eSh0LGUsYSxuLGkscykseHkodCxlLHIsbixhLTEsMS1zKSx4eSh0LGUscixhKzEsaSwxLXMpO31mdW5jdGlvbiB2eSh0LGUscixuLGkscyl7Zm9yKDtpPm47KXtpZihpLW4+NjAwKXtjb25zdCBhPWktbisxLG89ci1uKzEsbD1NYXRoLmxvZyhhKSx1PS41Kk1hdGguZXhwKDIqbC8zKSxjPS41Kk1hdGguc3FydChsKnUqKGEtdSkvYSkqKG8tYS8yPDA/LTE6MSk7dnkodCxlLHIsTWF0aC5tYXgobixNYXRoLmZsb29yKHItbyp1L2ErYykpLE1hdGgubWluKGksTWF0aC5mbG9vcihyKyhhLW8pKnUvYStjKSkscyk7fWNvbnN0IGE9ZVsyKnIrc107bGV0IG89bixsPWk7Zm9yKGJ5KHQsZSxuLHIpLGVbMippK3NdPmEmJmJ5KHQsZSxuLGkpO288bDspe2ZvcihieSh0LGUsbyxsKSxvKyssbC0tO2VbMipvK3NdPGE7KW8rKztmb3IoO2VbMipsK3NdPmE7KWwtLTt9ZVsyKm4rc109PT1hP2J5KHQsZSxuLGwpOihsKyssYnkodCxlLGwsaSkpLGw8PXImJihuPWwrMSkscjw9bCYmKGk9bC0xKTt9fWZ1bmN0aW9uIGJ5KHQsZSxyLG4pe3d5KHQscixuKSx3eShlLDIqciwyKm4pLHd5KGUsMipyKzEsMipuKzEpO31mdW5jdGlvbiB3eSh0LGUscil7Y29uc3Qgbj10W2VdO3RbZV09dFtyXSx0W3JdPW47fWZ1bmN0aW9uIF95KHQsZSxyLG4pe2NvbnN0IGk9dC1yLHM9ZS1uO3JldHVybiBpKmkrcypzfXQuQVJSQVlfVFlQRT11byx0LkFVVEhfRVJSX01TRz14dCx0LkFhYmI9aWwsdC5BY3Rvcj1jbGFzc3tjb25zdHJ1Y3Rvcih0LHIsbil7dGhpcy50YXJnZXQ9dCx0aGlzLnBhcmVudD1yLHRoaXMubWFwSWQ9bix0aGlzLmNhbGxiYWNrcz17fSx0aGlzLmNhbmNlbENhbGxiYWNrcz17fSxSKFtcInJlY2VpdmVcIl0sdGhpcyksdGhpcy50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLnJlY2VpdmUsITEpLHRoaXMuZ2xvYmFsU2NvcGU9SygpP3Q6ZSx0aGlzLnNjaGVkdWxlcj1uZXcgYmY7fXNlbmQodCxlLHIsbixpPSExLHMpe2NvbnN0IGE9TWF0aC5yb3VuZCgxZTE4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMCwxMCk7ciYmKHIubWV0YWRhdGE9cyx0aGlzLmNhbGxiYWNrc1thXT1yKTtjb25zdCBvPUgodGhpcy5nbG9iYWxTY29wZSk/dm9pZCAwOltdO3JldHVybiB0aGlzLnRhcmdldC5wb3N0TWVzc2FnZSh7aWQ6YSx0eXBlOnQsaGFzQ2FsbGJhY2s6ISFyLHRhcmdldE1hcElkOm4sbXVzdFF1ZXVlOmksc291cmNlTWFwSWQ6dGhpcy5tYXBJZCxkYXRhOldpKGUsbyl9LG8pLHtjYW5jZWw6KCk9PntyJiZkZWxldGUgdGhpcy5jYWxsYmFja3NbYV0sdGhpcy50YXJnZXQucG9zdE1lc3NhZ2Uoe2lkOmEsdHlwZTpcIjxjYW5jZWw+XCIsdGFyZ2V0TWFwSWQ6bixzb3VyY2VNYXBJZDp0aGlzLm1hcElkfSk7fX19cmVjZWl2ZSh0KXtjb25zdCBlPXQuZGF0YSxyPWUuaWQ7aWYociYmKCFlLnRhcmdldE1hcElkfHx0aGlzLm1hcElkPT09ZS50YXJnZXRNYXBJZCkpaWYoXCI8Y2FuY2VsPlwiPT09ZS50eXBlKXtjb25zdCB0PXRoaXMuY2FuY2VsQ2FsbGJhY2tzW3JdO2RlbGV0ZSB0aGlzLmNhbmNlbENhbGxiYWNrc1tyXSx0JiZ0LmNhbmNlbCgpO31lbHNlIGlmKGUubXVzdFF1ZXVlfHxLKCkpe2NvbnN0IHQ9dGhpcy5jYWxsYmFja3Nbcl07dGhpcy5jYW5jZWxDYWxsYmFja3Nbcl09dGhpcy5zY2hlZHVsZXIuYWRkKCgoKT0+dGhpcy5wcm9jZXNzVGFzayhyLGUpKSx0JiZ0Lm1ldGFkYXRhfHx7dHlwZTpcIm1lc3NhZ2VcIn0pO31lbHNlIHRoaXMucHJvY2Vzc1Rhc2socixlKTt9cHJvY2Vzc1Rhc2sodCxlKXtpZihcIjxyZXNwb25zZT5cIj09PWUudHlwZSl7Y29uc3Qgcj10aGlzLmNhbGxiYWNrc1t0XTtkZWxldGUgdGhpcy5jYWxsYmFja3NbdF0sciYmKGUuZXJyb3I/cihRaShlLmVycm9yKSk6cihudWxsLFFpKGUuZGF0YSkpKTt9ZWxzZSB7Y29uc3Qgcj1IKHRoaXMuZ2xvYmFsU2NvcGUpP3ZvaWQgMDpbXSxuPWUuaGFzQ2FsbGJhY2s/KGUsbik9PntkZWxldGUgdGhpcy5jYW5jZWxDYWxsYmFja3NbdF0sdGhpcy50YXJnZXQucG9zdE1lc3NhZ2Uoe2lkOnQsdHlwZTpcIjxyZXNwb25zZT5cIixzb3VyY2VNYXBJZDp0aGlzLm1hcElkLGVycm9yOmU/V2koZSk6bnVsbCxkYXRhOldpKG4scil9LHIpO306dD0+e30saT1RaShlLmRhdGEpO2lmKHRoaXMucGFyZW50W2UudHlwZV0pdGhpcy5wYXJlbnRbZS50eXBlXShlLnNvdXJjZU1hcElkLGksbik7ZWxzZSBpZih0aGlzLnBhcmVudC5nZXRXb3JrZXJTb3VyY2Upe2NvbnN0IHQ9ZS50eXBlLnNwbGl0KFwiLlwiKTt0aGlzLnBhcmVudC5nZXRXb3JrZXJTb3VyY2UoZS5zb3VyY2VNYXBJZCx0WzBdLGkuc291cmNlKVt0WzFdXShpLG4pO31lbHNlIG4obmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBmdW5jdGlvbiAke2UudHlwZX1gKSk7fX1yZW1vdmUoKXt0aGlzLnNjaGVkdWxlci5yZW1vdmUoKSx0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMucmVjZWl2ZSwhMSk7fX0sdC5DYW5vbmljYWxUaWxlSUQ9cGgsdC5Db2xvcj1FZSx0LkNvbG9yTW9kZT1ZZix0LkN1bGxGYWNlTW9kZT10eSx0LkRFTURhdGE9WmYsdC5EYXRhQ29uc3RhbnRQcm9wZXJ0eT1Ccyx0LkRlZHVwZWRSZXF1ZXN0PWZ5LHQuRGVwdGhNb2RlPVhmLHQuRVhURU5UPWFvLHQuRWxldmF0aW9uPWNsYXNze2lzRGF0YUF2YWlsYWJsZUF0UG9pbnQodCl7Y29uc3QgZT10aGlzLl9zb3VyY2UoKTtpZih0aGlzLmlzVXNpbmdNb2NrU291cmNlKCl8fCFlfHx0Lnk8MHx8dC55PjEpcmV0dXJuICExO2NvbnN0IHI9ZS5nZXRTb3VyY2UoKS5tYXh6b29tLG49MTw8cixpPU1hdGguZmxvb3IodC54KSxzPU1hdGguZmxvb3IoKHQueC1pKSpuKSxhPU1hdGguZmxvb3IodC55Km4pLG89dGhpcy5maW5kREVNVGlsZUZvcihuZXcgZmgocixpLHIscyxhKSk7cmV0dXJuICEoIW98fCFvLmRlbSl9Z2V0QXRQb2ludE9yWmVybyh0LGU9MCl7cmV0dXJuIHRoaXMuZ2V0QXRQb2ludCh0LGUpfHwwfWdldEF0UG9pbnQodCxlLHI9ITApe2lmKHRoaXMuaXNVc2luZ01vY2tTb3VyY2UoKSlyZXR1cm4gbnVsbDtudWxsPT1lJiYoZT1udWxsKTtjb25zdCBuPXRoaXMuX3NvdXJjZSgpO2lmKCFuKXJldHVybiBlO2lmKHQueTwwfHx0Lnk+MSlyZXR1cm4gZTtjb25zdCBpPW4uZ2V0U291cmNlKCkubWF4em9vbSxzPTE8PGksYT1NYXRoLmZsb29yKHQueCksbz10LngtYSxsPW5ldyBmaChpLGEsaSxNYXRoLmZsb29yKG8qcyksTWF0aC5mbG9vcih0LnkqcykpLHU9dGhpcy5maW5kREVNVGlsZUZvcihsKTtpZighdXx8IXUuZGVtKXJldHVybiBlO2NvbnN0IGM9dS5kZW0saD0xPDx1LnRpbGVJRC5jYW5vbmljYWwueixwPShvKmgtdS50aWxlSUQuY2Fub25pY2FsLngpKmMuZGltLGQ9KHQueSpoLXUudGlsZUlELmNhbm9uaWNhbC55KSpjLmRpbSxmPU1hdGguZmxvb3IocCkseT1NYXRoLmZsb29yKGQpO3JldHVybiAocj90aGlzLmV4YWdnZXJhdGlvbigpOjEpKkVyKEVyKGMuZ2V0KGYseSksYy5nZXQoZix5KzEpLGQteSksRXIoYy5nZXQoZisxLHkpLGMuZ2V0KGYrMSx5KzEpLGQteSkscC1mKX1nZXRBdFRpbGVPZmZzZXQodCxlLHIpe2NvbnN0IG49MTw8dC5jYW5vbmljYWwuejtyZXR1cm4gdGhpcy5nZXRBdFBvaW50T3JaZXJvKG5ldyBXbCh0LndyYXArKHQuY2Fub25pY2FsLngrZS9hbykvbiwodC5jYW5vbmljYWwueStyL2FvKS9uKSl9Z2V0QXRUaWxlT2Zmc2V0RnVuYyh0LGUscixuKXtyZXR1cm4gaT0+e2NvbnN0IHM9dGhpcy5nZXRBdFRpbGVPZmZzZXQodCxpLngsaS55KSxhPW4udXBWZWN0b3IodC5jYW5vbmljYWwsaS54LGkueSk7cmV0dXJuIENvKGEsYSxzKm4udXBWZWN0b3JTY2FsZSh0LmNhbm9uaWNhbCxlLHIpLm1ldGVyc1RvVGlsZSksYX19Z2V0Rm9yVGlsZVBvaW50cyh0LGUscixuKXtpZih0aGlzLmlzVXNpbmdNb2NrU291cmNlKCkpcmV0dXJuICExO2NvbnN0IGk9c3kuY3JlYXRlKHRoaXMsdCxuKTtyZXR1cm4gISFpJiYoZS5mb3JFYWNoKCh0PT57dFsyXT10aGlzLmV4YWdnZXJhdGlvbigpKmkuZ2V0RWxldmF0aW9uQXQodFswXSx0WzFdLHIpO30pKSwhMCl9Z2V0TWluTWF4Rm9yVGlsZSh0KXtpZih0aGlzLmlzVXNpbmdNb2NrU291cmNlKCkpcmV0dXJuIG51bGw7Y29uc3QgZT10aGlzLmZpbmRERU1UaWxlRm9yKHQpO2lmKCFlfHwhZS5kZW0pcmV0dXJuIG51bGw7Y29uc3Qgcj1lLmRlbS50cmVlLG49ZS50aWxlSUQsaT0xPDx0LmNhbm9uaWNhbC56LW4uY2Fub25pY2FsLno7bGV0IHM9dC5jYW5vbmljYWwueC9pLW4uY2Fub25pY2FsLngsYT10LmNhbm9uaWNhbC55L2ktbi5jYW5vbmljYWwueSxvPTA7Zm9yKGxldCBlPTA7ZTx0LmNhbm9uaWNhbC56LW4uY2Fub25pY2FsLnomJiFyLmxlYXZlc1tvXTtlKyspe3MqPTIsYSo9Mjtjb25zdCB0PTIqTWF0aC5mbG9vcihhKStNYXRoLmZsb29yKHMpO289ci5jaGlsZE9mZnNldHNbb10rdCxzJT0xLGElPTE7fXJldHVybiB7bWluOnRoaXMuZXhhZ2dlcmF0aW9uKCkqci5taW5pbXVtc1tvXSxtYXg6dGhpcy5leGFnZ2VyYXRpb24oKSpyLm1heGltdW1zW29dfX1nZXRNaW5FbGV2YXRpb25CZWxvd01TTCgpe3Rocm93IG5ldyBFcnJvcihcIlB1cmUgdmlydHVhbCBtZXRob2QgY2FsbGVkLlwiKX1yYXljYXN0KHQsZSxyKXt0aHJvdyBuZXcgRXJyb3IoXCJQdXJlIHZpcnR1YWwgbWV0aG9kIGNhbGxlZC5cIil9cG9pbnRDb29yZGluYXRlKHQpe3Rocm93IG5ldyBFcnJvcihcIlB1cmUgdmlydHVhbCBtZXRob2QgY2FsbGVkLlwiKX1fc291cmNlKCl7dGhyb3cgbmV3IEVycm9yKFwiUHVyZSB2aXJ0dWFsIG1ldGhvZCBjYWxsZWQuXCIpfWlzVXNpbmdNb2NrU291cmNlKCl7dGhyb3cgbmV3IEVycm9yKFwiUHVyZSB2aXJ0dWFsIG1ldGhvZCBjYWxsZWQuXCIpfWV4YWdnZXJhdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIlB1cmUgdmlydHVhbCBtZXRob2QgY2FsbGVkLlwiKX1maW5kREVNVGlsZUZvcih0KXt0aHJvdyBuZXcgRXJyb3IoXCJQdXJlIHZpcnR1YWwgbWV0aG9kIGNhbGxlZC5cIil9Z2V0IHZpc2libGVEZW1UaWxlcygpe3Rocm93IG5ldyBFcnJvcihcIkdldHRlciBtdXN0IGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzLlwiKX19LHQuRXJyb3JFdmVudD1XdCx0LkV2YWx1YXRpb25QYXJhbWV0ZXJzPXdzLHQuRXZlbnQ9WXQsdC5FdmVudGVkPVF0LHQuRmlsbEV4dHJ1c2lvbkJ1Y2tldD10aCx0LkZydXN0dW09bmwsdC5GcnVzdHVtQ29ybmVycz1ybCx0LkdMT0JFX1JBRElVUz1vbCx0LkdMT0JFX1NDQUxFX01BVENIX0xBVElUVURFPTQ1LHQuR0xPQkVfWk9PTV9USFJFU0hPTERfTUFYPWFsLHQuR0xPQkVfWk9PTV9USFJFU0hPTERfTUlOPXNsLHQuR2xvYmVTaGFyZWRCdWZmZXJzPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX2NyZWF0ZUdyaWQodCksdGhpcy5fY3JlYXRlUG9sZXModCk7fWRlc3Ryb3koKXt0aGlzLl9wb2xlSW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuX2dyaWRCdWZmZXIuZGVzdHJveSgpLHRoaXMuX2dyaWRJbmRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5fcG9sZU5vcnRoVmVydGV4QnVmZmVyLmRlc3Ryb3koKSx0aGlzLl9wb2xlU291dGhWZXJ0ZXhCdWZmZXIuZGVzdHJveSgpO2Zvcihjb25zdCB0IG9mIHRoaXMuX3BvbGVTZWdtZW50cyl0LmRlc3Ryb3koKTtmb3IoY29uc3QgdCBvZiB0aGlzLl9ncmlkU2VnbWVudHMpdC53aXRoU2tpcnRzLmRlc3Ryb3koKSx0LndpdGhvdXRTa2lydHMuZGVzdHJveSgpO2lmKHRoaXMuX3dpcmVmcmFtZUluZGV4QnVmZmVyKXt0aGlzLl93aXJlZnJhbWVJbmRleEJ1ZmZlci5kZXN0cm95KCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fd2lyZWZyYW1lU2VnbWVudHMpdC5kZXN0cm95KCk7fX1fZmlsbEdyaWRNZXNoV2l0aExvZHModCxlKXtjb25zdCByPW5ldyAkcyxuPW5ldyByYSxpPVtdLHM9dCsxKzIsYT1lWzBdKzEsbz1lWzBdKzErKDErZS5sZW5ndGgpLGw9KHQsZSxyKT0+e2xldCBuPXQ9PT1zLTE/dC0yOjA9PT10P3Q6dC0xO3JldHVybiBuKz1yPzI0NTc1OjAsW24sZV19O2ZvcihsZXQgdD0wO3Q8czsrK3Qpci5lbXBsYWNlQmFjayguLi5sKHQsMCwhMCkpO2ZvcihsZXQgdD0wO3Q8YTsrK3QpZm9yKGxldCBlPTA7ZTxzOysrZSlyLmVtcGxhY2VCYWNrKC4uLmwoZSx0LCgwPT09ZXx8ZT09PXMtMSkmJiEwKSk7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDsrK3Qpe2NvbnN0IG49ZVt0XTtmb3IobGV0IHQ9MDt0PHM7Kyt0KXIuZW1wbGFjZUJhY2soLi4ubCh0LG4sITApKTt9Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDsrK3Qpe2NvbnN0IGE9bi5sZW5ndGgsbD1lW3RdKzErMix1PW5ldyByYTtmb3IobGV0IHI9MDtyPGwtMTtyKyspe2NvbnN0IGk9cj09PWwtMixhPWk/cyooby1lLmxlbmd0aCt0LXIpOnM7Zm9yKGxldCB0PTA7dDxzLTE7dCsrKXtjb25zdCBlPXIqcyt0OzA9PT1yfHxpfHwwPT09dHx8dD09PXMtMj8odS5lbXBsYWNlQmFjayhlKzEsZSxlK2EpLHUuZW1wbGFjZUJhY2soZSthLGUrYSsxLGUrMSkpOihuLmVtcGxhY2VCYWNrKGUrMSxlLGUrYSksbi5lbXBsYWNlQmFjayhlK2EsZSthKzEsZSsxKSk7fX1jb25zdCBjPXNvLnNpbXBsZVNlZ21lbnQoMCxhLHIubGVuZ3RoLG4ubGVuZ3RoLWEpO2ZvcihsZXQgdD0wO3Q8dS51aW50MTYubGVuZ3RoO3QrPTMpbi5lbXBsYWNlQmFjayh1LnVpbnQxNlt0XSx1LnVpbnQxNlt0KzFdLHUudWludDE2W3QrMl0pO2NvbnN0IGg9c28uc2ltcGxlU2VnbWVudCgwLGEsci5sZW5ndGgsbi5sZW5ndGgtYSk7aS5wdXNoKHt3aXRob3V0U2tpcnRzOmMsd2l0aFNraXJ0czpofSk7fXJldHVybiB7dmVydGljZXM6cixpbmRpY2VzOm4sc2VnbWVudHM6aX19X2NyZWF0ZUdyaWQodCl7Y29uc3QgZT10aGlzLl9maWxsR3JpZE1lc2hXaXRoTG9kcyh1bCxjbCk7dGhpcy5fZ3JpZFNlZ21lbnRzPWUuc2VnbWVudHMsdGhpcy5fZ3JpZEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcihlLnZlcnRpY2VzLHRsLm1lbWJlcnMpLHRoaXMuX2dyaWRJbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKGUuaW5kaWNlcywhMCk7fV9jcmVhdGVQb2xlcyh0KXtjb25zdCBlPW5ldyByYTtmb3IobGV0IHQ9MDt0PD11bDt0KyspZS5lbXBsYWNlQmFjaygwLHQrMSx0KzIpO3RoaXMuX3BvbGVJbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKGUsITApO2NvbnN0IHI9bmV3IGFhLG49bmV3IGFhO3RoaXMuX3BvbGVTZWdtZW50cz1bXTtmb3IobGV0IHQ9MCxlPTA7dDxzbDt0Kyspe2NvbnN0IGk9MzYwLygxPDx0KTtyLmVtcGxhY2VCYWNrKDAsLW9sLDAsLjUsMCksbi5lbXBsYWNlQmFjaygwLC1vbCwwLC41LDEpO2ZvcihsZXQgdD0wO3Q8PXVsO3QrKyl7Y29uc3QgZT10L3VsLHM9RXIoMCxpLGUpLFthLG8sbF09a2woRmwsUmwscyxvbCk7ci5lbXBsYWNlQmFjayhhLG8sbCxlLDApLG4uZW1wbGFjZUJhY2soYSxvLGwsZSwxKTt9dGhpcy5fcG9sZVNlZ21lbnRzLnB1c2goc28uc2ltcGxlU2VnbWVudChlLDAsNjYsNjQpKSxlKz02Njt9dGhpcy5fcG9sZU5vcnRoVmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKHIsV28sITEpLHRoaXMuX3BvbGVTb3V0aFZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcihuLFdvLCExKTt9Z2V0R3JpZEJ1ZmZlcnModCxlKXtyZXR1cm4gW3RoaXMuX2dyaWRCdWZmZXIsdGhpcy5fZ3JpZEluZGV4QnVmZmVyLGU/dGhpcy5fZ3JpZFNlZ21lbnRzW3RdLndpdGhTa2lydHM6dGhpcy5fZ3JpZFNlZ21lbnRzW3RdLndpdGhvdXRTa2lydHNdfWdldFBvbGVCdWZmZXJzKHQpe3JldHVybiBbdGhpcy5fcG9sZU5vcnRoVmVydGV4QnVmZmVyLHRoaXMuX3BvbGVTb3V0aFZlcnRleEJ1ZmZlcix0aGlzLl9wb2xlSW5kZXhCdWZmZXIsdGhpcy5fcG9sZVNlZ21lbnRzW3RdXX1nZXRXaXJlZmFtZUJ1ZmZlcnModCxlKXtpZighdGhpcy5fd2lyZWZyYW1lU2VnbWVudHMpe2NvbnN0IGU9bmV3IGxhLHI9dWwsbj1yKzErMixpPTE7dGhpcy5fd2lyZWZyYW1lU2VnbWVudHM9W107Zm9yKGxldCB0PTAscz0wO3Q8Y2wubGVuZ3RoO3QrKyl7Y29uc3QgYT1jbFt0XTtmb3IobGV0IHQ9aTt0PGEraTt0KyspZm9yKGxldCBzPWk7czxyK2k7cysrKXtjb25zdCByPXQqbitzO2UuZW1wbGFjZUJhY2socixyKzEpLGUuZW1wbGFjZUJhY2socixyK24pLGUuZW1wbGFjZUJhY2socixyK24rMSk7fWNvbnN0IG89YSpyKjM7dGhpcy5fd2lyZWZyYW1lU2VnbWVudHMucHVzaChzby5zaW1wbGVTZWdtZW50KDAscywoYSsxKSpuLG8pKSxzKz1vO310aGlzLl93aXJlZnJhbWVJbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKGUpO31yZXR1cm4gW3RoaXMuX2dyaWRCdWZmZXIsdGhpcy5fd2lyZWZyYW1lSW5kZXhCdWZmZXIsdGhpcy5fd2lyZWZyYW1lU2VnbWVudHNbZV1dfX0sdC5HbHlwaE1hbmFnZXI9cmQsdC5JbWFnZVBvc2l0aW9uPVNwLHQuS0RCdXNoPWd5LHQuTGl2ZVBlcmZvcm1hbmNlVXRpbHM9JHQsdC5MbmdMYXQ9T2wsdC5MbmdMYXRCb3VuZHM9b28sdC5Mb2NhbEdseXBoTW9kZT1lZCx0Lk1BWF9NRVJDQVRPUl9MQVRJVFVERT1IbCx0Lk1lcmNhdG9yQ29vcmRpbmF0ZT1XbCx0Lk9ORV9FTT1SaCx0Lk92ZXJzY2FsZWRUaWxlSUQ9ZmgsdC5QZXJmb3JtYW5jZU1hcmtlcnM9VXQsdC5Qb2ludD14LHQuUHJvcGVydGllcz1Qcyx0LlJHQkFJbWFnZT1VdSx0LlJheT1lbCx0LlJlcXVlc3RNYW5hZ2VyPWNsYXNze2NvbnN0cnVjdG9yKHQsZSxyKXt0aGlzLl90cmFuc2Zvcm1SZXF1ZXN0Rm49dCx0aGlzLl9jdXN0b21BY2Nlc3NUb2tlbj1lLHRoaXMuX3NpbGVuY2VBdXRoRXJyb3JzPSEhcix0aGlzLl9jcmVhdGVTa3VUb2tlbigpO31fY3JlYXRlU2t1VG9rZW4oKXtjb25zdCB0PWZ1bmN0aW9uKCl7bGV0IHQ9XCJcIjtmb3IobGV0IGU9MDtlPDEwO2UrKyl0Kz1cIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCJbTWF0aC5mbG9vcig2MipNYXRoLnJhbmRvbSgpKV07cmV0dXJuIHt0b2tlbjpbXCIxXCIsaCx0XS5qb2luKFwiXCIpLHRva2VuRXhwaXJlc0F0OkRhdGUubm93KCkrNDMyZTV9fSgpO3RoaXMuX3NrdVRva2VuPXQudG9rZW4sdGhpcy5fc2t1VG9rZW5FeHBpcmVzQXQ9dC50b2tlbkV4cGlyZXNBdDt9X2lzU2t1VG9rZW5FeHBpcmVkKCl7cmV0dXJuIERhdGUubm93KCk+dGhpcy5fc2t1VG9rZW5FeHBpcmVzQXR9dHJhbnNmb3JtUmVxdWVzdCh0LGUpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1SZXF1ZXN0Rm4mJnRoaXMuX3RyYW5zZm9ybVJlcXVlc3RGbih0LGUpfHx7dXJsOnR9fW5vcm1hbGl6ZVN0eWxlVVJMKHQsZSl7aWYoIXZ0KHQpKXJldHVybiB0O2NvbnN0IHI9a3QodCk7cmV0dXJuIHIucGF0aD1gL3N0eWxlcy92MSR7ci5wYXRofWAsdGhpcy5fbWFrZUFQSVVSTChyLHRoaXMuX2N1c3RvbUFjY2Vzc1Rva2VufHxlKX1ub3JtYWxpemVHbHlwaHNVUkwodCxlKXtpZighdnQodCkpcmV0dXJuIHQ7Y29uc3Qgcj1rdCh0KTtyZXR1cm4gci5wYXRoPWAvZm9udHMvdjEke3IucGF0aH1gLHRoaXMuX21ha2VBUElVUkwocix0aGlzLl9jdXN0b21BY2Nlc3NUb2tlbnx8ZSl9bm9ybWFsaXplU291cmNlVVJMKHQsZSxyLG4pe2lmKCF2dCh0KSlyZXR1cm4gdDtjb25zdCBpPWt0KHQpO3JldHVybiBpLnBhdGg9YC92NC8ke2kuYXV0aG9yaXR5fS5qc29uYCxpLnBhcmFtcy5wdXNoKFwic2VjdXJlXCIpLHImJmkucGFyYW1zLnB1c2goYGxhbmd1YWdlPSR7cn1gKSxuJiZpLnBhcmFtcy5wdXNoKGB3b3JsZHZpZXc9JHtufWApLHRoaXMuX21ha2VBUElVUkwoaSx0aGlzLl9jdXN0b21BY2Nlc3NUb2tlbnx8ZSl9bm9ybWFsaXplU3ByaXRlVVJMKHQsZSxyLG4pe2NvbnN0IGk9a3QodCk7cmV0dXJuIHZ0KHQpPyhpLnBhdGg9YC9zdHlsZXMvdjEke2kucGF0aH0vc3ByaXRlJHtlfSR7cn1gLHRoaXMuX21ha2VBUElVUkwoaSx0aGlzLl9jdXN0b21BY2Nlc3NUb2tlbnx8bikpOihpLnBhdGgrPWAke2V9JHtyfWAsSXQoaSkpfW5vcm1hbGl6ZVRpbGVVUkwodCxlLHIpe2lmKHRoaXMuX2lzU2t1VG9rZW5FeHBpcmVkKCkmJnRoaXMuX2NyZWF0ZVNrdVRva2VuKCksdCYmIXZ0KHQpKXJldHVybiB0O2NvbnN0IG49a3QodCk7bi5wYXRoPW4ucGF0aC5yZXBsYWNlKC8oXFwuKHBuZ3xqcGcpXFxkKikoPz0kKS8sYCR7ZXx8ciYmXCJyYXN0ZXJcIiE9PW4uYXV0aG9yaXR5JiY1MTI9PT1yP1wiQDJ4XCI6XCJcIn0ke3Muc3VwcG9ydGVkP1wiLndlYnBcIjpcIiQxXCJ9YCksXCJyYXN0ZXJcIj09PW4uYXV0aG9yaXR5P24ucGF0aD1gLyR7aS5SQVNURVJfVVJMX1BSRUZJWH0ke24ucGF0aH1gOihuLnBhdGg9bi5wYXRoLnJlcGxhY2UoL14uK1xcL3Y0XFwvLyxcIi9cIiksbi5wYXRoPWAvJHtpLlRJTEVfVVJMX1ZFUlNJT059JHtuLnBhdGh9YCk7Y29uc3QgYT10aGlzLl9jdXN0b21BY2Nlc3NUb2tlbnx8ZnVuY3Rpb24odCl7Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD1lLm1hdGNoKC9eYWNjZXNzX3Rva2VuPSguKikkLyk7aWYodClyZXR1cm4gdFsxXX1yZXR1cm4gbnVsbH0obi5wYXJhbXMpfHxpLkFDQ0VTU19UT0tFTjtyZXR1cm4gaS5SRVFVSVJFX0FDQ0VTU19UT0tFTiYmYSYmdGhpcy5fc2t1VG9rZW4mJm4ucGFyYW1zLnB1c2goYHNrdT0ke3RoaXMuX3NrdVRva2VufWApLHRoaXMuX21ha2VBUElVUkwobixhKX1jYW5vbmljYWxpemVUaWxlVVJMKHQsZSl7Y29uc3Qgcj1rdCh0KTtpZighci5wYXRoLm1hdGNoKC9eKFxcL3Y0XFwvfFxcL3Jhc3RlclxcL3YxXFwvKS8pfHwhci5wYXRoLm1hdGNoKC9cXC5bXFx3XSskLykpcmV0dXJuIHQ7bGV0IG49XCJtYXBib3g6Ly9cIjtyLnBhdGgubWF0Y2goL15cXC9yYXN0ZXJcXC92MVxcLy8pP24rPWByYXN0ZXIvJHtyLnBhdGgucmVwbGFjZShgLyR7aS5SQVNURVJfVVJMX1BSRUZJWH0vYCxcIlwiKX1gOm4rPWB0aWxlcy8ke3IucGF0aC5yZXBsYWNlKGAvJHtpLlRJTEVfVVJMX1ZFUlNJT059L2AsXCJcIil9YDtsZXQgcz1yLnBhcmFtcztyZXR1cm4gZSYmKHM9cy5maWx0ZXIoKHQ9PiF0Lm1hdGNoKC9eYWNjZXNzX3Rva2VuPS8pKSkpLHMubGVuZ3RoJiYobis9YD8ke3Muam9pbihcIiZcIil9YCksbn1jYW5vbmljYWxpemVUaWxlc2V0KHQsZSl7Y29uc3Qgcj0hIWUmJnZ0KGUpLG49W107Zm9yKGNvbnN0IGUgb2YgdC50aWxlc3x8W10pYnQoZSk/bi5wdXNoKHRoaXMuY2Fub25pY2FsaXplVGlsZVVSTChlLHIpKTpuLnB1c2goZSk7cmV0dXJuIG59X21ha2VBUElVUkwodCxlKXtjb25zdCByPVwiU2VlIGh0dHBzOi8vZG9jcy5tYXBib3guY29tL2FwaS9vdmVydmlldy8jYWNjZXNzLXRva2Vucy1hbmQtdG9rZW4tc2NvcGVzXCIsbj1rdChpLkFQSV9VUkwpO2lmKHQucHJvdG9jb2w9bi5wcm90b2NvbCx0LmF1dGhvcml0eT1uLmF1dGhvcml0eSxcImh0dHBcIj09PXQucHJvdG9jb2wpe2NvbnN0IGU9dC5wYXJhbXMuaW5kZXhPZihcInNlY3VyZVwiKTtlPj0wJiZ0LnBhcmFtcy5zcGxpY2UoZSwxKTt9aWYoXCIvXCIhPT1uLnBhdGgmJih0LnBhdGg9YCR7bi5wYXRofSR7dC5wYXRofWApLCFpLlJFUVVJUkVfQUNDRVNTX1RPS0VOKXJldHVybiBJdCh0KTtpZihlPWV8fGkuQUNDRVNTX1RPS0VOLCF0aGlzLl9zaWxlbmNlQXV0aEVycm9ycyl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKGBBbiBBUEkgYWNjZXNzIHRva2VuIGlzIHJlcXVpcmVkIHRvIHVzZSBNYXBib3ggR0wuICR7cn1gKTtpZihcInNcIj09PWVbMF0pdGhyb3cgbmV3IEVycm9yKGBVc2UgYSBwdWJsaWMgYWNjZXNzIHRva2VuIChway4qKSB3aXRoIE1hcGJveCBHTCwgbm90IGEgc2VjcmV0IGFjY2VzcyB0b2tlbiAoc2suKikuICR7cn1gKX1yZXR1cm4gdC5wYXJhbXM9dC5wYXJhbXMuZmlsdGVyKCh0PT4tMT09PXQuaW5kZXhPZihcImFjY2Vzc190b2tlblwiKSkpLHQucGFyYW1zLnB1c2goYGFjY2Vzc190b2tlbj0ke2V8fFwiXCJ9YCksSXQodCl9fSx0LlJlc291cmNlVHlwZT1sdCx0LlNlZ21lbnRWZWN0b3I9c28sdC5Tb3VyY2VDYWNoZT1leSx0LlN0ZW5jaWxNb2RlPUhmLHQuU3RydWN0QXJyYXlMYXlvdXQxdWkyPXVhLHQuU3RydWN0QXJyYXlMYXlvdXQyZjFmMmkxNj1Rcyx0LlN0cnVjdEFycmF5TGF5b3V0Mmk0PSRzLHQuU3RydWN0QXJyYXlMYXlvdXQydWk0PWxhLHQuU3RydWN0QXJyYXlMYXlvdXQzZjEyPWVhLHQuU3RydWN0QXJyYXlMYXlvdXQzdWk2PXJhLHQuU3RydWN0QXJyYXlMYXlvdXQ0aTg9T3MsdC5TdHJ1Y3RBcnJheUxheW91dDVmMjA9YWEsdC5UZXh0dXJlPXhmLHQuVGlsZT1QZix0LlRyYW5zaXRpb25hYmxlPVNzLHQuVW5pZm9ybTFmPUxhLHQuVW5pZm9ybTFpPWNsYXNzIGV4dGVuZHMgVmF7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5jdXJyZW50PTA7fXNldCh0LGUscil7dGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpJiZ0aGlzLmN1cnJlbnQhPT1yJiYodGhpcy5jdXJyZW50PXIsdGhpcy5nbC51bmlmb3JtMWkodGhpcy5sb2NhdGlvbixyKSk7fX0sdC5Vbmlmb3JtMmY9Y2xhc3MgZXh0ZW5kcyBWYXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmN1cnJlbnQ9WzAsMF07fXNldCh0LGUscil7dGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpJiYoclswXT09PXRoaXMuY3VycmVudFswXSYmclsxXT09PXRoaXMuY3VycmVudFsxXXx8KHRoaXMuY3VycmVudD1yLHRoaXMuZ2wudW5pZm9ybTJmKHRoaXMubG9jYXRpb24sclswXSxyWzFdKSkpO319LHQuVW5pZm9ybTNmPWNsYXNzIGV4dGVuZHMgVmF7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5jdXJyZW50PVswLDAsMF07fXNldCh0LGUscil7dGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpJiYoclswXT09PXRoaXMuY3VycmVudFswXSYmclsxXT09PXRoaXMuY3VycmVudFsxXSYmclsyXT09PXRoaXMuY3VycmVudFsyXXx8KHRoaXMuY3VycmVudD1yLHRoaXMuZ2wudW5pZm9ybTNmKHRoaXMubG9jYXRpb24sclswXSxyWzFdLHJbMl0pKSk7fX0sdC5Vbmlmb3JtNGY9RmEsdC5Vbmlmb3JtQ29sb3I9UmEsdC5Vbmlmb3JtTWF0cml4MmY9Y2xhc3MgZXh0ZW5kcyBWYXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmN1cnJlbnQ9amE7fXNldCh0LGUscil7aWYodGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpKWZvcihsZXQgdD0wO3Q8NDt0KyspaWYoclt0XSE9PXRoaXMuY3VycmVudFt0XSl7dGhpcy5jdXJyZW50PXIsdGhpcy5nbC51bmlmb3JtTWF0cml4MmZ2KHRoaXMubG9jYXRpb24sITEscik7YnJlYWt9fX0sdC5Vbmlmb3JtTWF0cml4M2Y9Y2xhc3MgZXh0ZW5kcyBWYXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmN1cnJlbnQ9JGE7fXNldCh0LGUscil7aWYodGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpKWZvcihsZXQgdD0wO3Q8OTt0KyspaWYoclt0XSE9PXRoaXMuY3VycmVudFt0XSl7dGhpcy5jdXJyZW50PXIsdGhpcy5nbC51bmlmb3JtTWF0cml4M2Z2KHRoaXMubG9jYXRpb24sITEscik7YnJlYWt9fX0sdC5Vbmlmb3JtTWF0cml4NGY9Y2xhc3MgZXh0ZW5kcyBWYXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmN1cnJlbnQ9VWE7fXNldCh0LGUscil7aWYodGhpcy5mZXRjaFVuaWZvcm1Mb2NhdGlvbih0LGUpKXtpZihyWzEyXSE9PXRoaXMuY3VycmVudFsxMl18fHJbMF0hPT10aGlzLmN1cnJlbnRbMF0pcmV0dXJuIHRoaXMuY3VycmVudD1yLHZvaWQgdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMubG9jYXRpb24sITEscik7Zm9yKGxldCB0PTE7dDwxNjt0KyspaWYoclt0XSE9PXRoaXMuY3VycmVudFt0XSl7dGhpcy5jdXJyZW50PXIsdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMubG9jYXRpb24sITEscik7YnJlYWt9fX19LHQuVW53cmFwcGVkVGlsZUlEPWRoLHQuVmFsaWRhdGlvbkVycm9yPXJpLHQuVmVjdG9yVGlsZUZlYXR1cmU9S2MsdC5WZWN0b3JUaWxlV29ya2VyU291cmNlPWNsYXNzIGV4dGVuZHMgUXR7Y29uc3RydWN0b3IodCxlLHIsbixpKXtzdXBlcigpLHRoaXMuYWN0b3I9dCx0aGlzLmxheWVySW5kZXg9ZSx0aGlzLmF2YWlsYWJsZUltYWdlcz1yLHRoaXMubG9hZFZlY3RvckRhdGE9aXx8eXksdGhpcy5sb2FkaW5nPXt9LHRoaXMubG9hZGVkPXt9LHRoaXMuZGVkdXBlZD1uZXcgZnkodC5zY2hlZHVsZXIpLHRoaXMuaXNTcHJpdGVMb2FkZWQ9bix0aGlzLnNjaGVkdWxlcj10LnNjaGVkdWxlcjt9bG9hZFRpbGUodCxlKXtjb25zdCByPXQudWlkLG49dCYmdC5yZXF1ZXN0LGk9biYmbi5jb2xsZWN0UmVzb3VyY2VUaW1pbmcscz10aGlzLmxvYWRpbmdbcl09bmV3IHB5KHQpO3MuYWJvcnQ9dGhpcy5sb2FkVmVjdG9yRGF0YSh0LCgoYSxvKT0+e2NvbnN0IGw9IXRoaXMubG9hZGluZ1tyXTtpZihkZWxldGUgdGhpcy5sb2FkaW5nW3JdLGx8fGF8fCFvKXJldHVybiBzLnN0YXR1cz1cImRvbmVcIixsfHwodGhpcy5sb2FkZWRbcl09cyksZShhKTtjb25zdCB1PW8ucmF3RGF0YSxjPXt9O28uZXhwaXJlcyYmKGMuZXhwaXJlcz1vLmV4cGlyZXMpLG8uY2FjaGVDb250cm9sJiYoYy5jYWNoZUNvbnRyb2w9by5jYWNoZUNvbnRyb2wpLHMudmVjdG9yVGlsZT1vLnZlY3RvclRpbGV8fG5ldyBaYyhuZXcgbXAodSkpO2NvbnN0IGg9KCk9PntzLnBhcnNlKHMudmVjdG9yVGlsZSx0aGlzLmxheWVySW5kZXgsdGhpcy5hdmFpbGFibGVJbWFnZXMsdGhpcy5hY3RvciwoKHQscik9PntpZih0fHwhcilyZXR1cm4gZSh0KTtjb25zdCBzPXt9O2lmKGkpe2NvbnN0IHQ9cXQobik7dC5sZW5ndGg+MCYmKHMucmVzb3VyY2VUaW1pbmc9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSkpO31lKG51bGwsQyh7cmF3VGlsZURhdGE6dS5zbGljZSgwKX0scixjLHMpKTt9KSk7fTt0aGlzLmlzU3ByaXRlTG9hZGVkP2goKTp0aGlzLm9uY2UoXCJpc1Nwcml0ZUxvYWRlZFwiLCgoKT0+e3RoaXMuc2NoZWR1bGVyP3RoaXMuc2NoZWR1bGVyLmFkZChoLHt0eXBlOlwicGFyc2VUaWxlXCIsaXNTeW1ib2xUaWxlOnQuaXNTeW1ib2xUaWxlLHpvb206dC50aWxlWm9vbX0pOmgoKTt9KSksdGhpcy5sb2FkZWQ9dGhpcy5sb2FkZWR8fHt9LHRoaXMubG9hZGVkW3JdPXM7fSkpO31yZWxvYWRUaWxlKHQsZSl7Y29uc3Qgcj10aGlzLmxvYWRlZCxuPXQudWlkLGk9dGhpcztpZihyJiZyW25dKXtjb25zdCBzPXJbbl07cy5zaG93Q29sbGlzaW9uQm94ZXM9dC5zaG93Q29sbGlzaW9uQm94ZXMscy5lbmFibGVUZXJyYWluPSEhdC5lbmFibGVUZXJyYWluLHMucHJvamVjdGlvbj10LnByb2plY3Rpb24scy50aWxlVHJhbnNmb3JtPUJkKHQudGlsZUlELmNhbm9uaWNhbCx0LnByb2plY3Rpb24pO2NvbnN0IGE9KHQscik9Pntjb25zdCBuPXMucmVsb2FkQ2FsbGJhY2s7biYmKGRlbGV0ZSBzLnJlbG9hZENhbGxiYWNrLHMucGFyc2Uocy52ZWN0b3JUaWxlLGkubGF5ZXJJbmRleCx0aGlzLmF2YWlsYWJsZUltYWdlcyxpLmFjdG9yLG4pKSxlKHQscik7fTtcInBhcnNpbmdcIj09PXMuc3RhdHVzP3MucmVsb2FkQ2FsbGJhY2s9YTpcImRvbmVcIj09PXMuc3RhdHVzJiYocy52ZWN0b3JUaWxlP3MucGFyc2Uocy52ZWN0b3JUaWxlLHRoaXMubGF5ZXJJbmRleCx0aGlzLmF2YWlsYWJsZUltYWdlcyx0aGlzLmFjdG9yLGEpOmEoKSk7fX1hYm9ydFRpbGUodCxlKXtjb25zdCByPXQudWlkLG49dGhpcy5sb2FkaW5nW3JdO24mJihuLmFib3J0JiZuLmFib3J0KCksZGVsZXRlIHRoaXMubG9hZGluZ1tyXSksZSgpO31yZW1vdmVUaWxlKHQsZSl7Y29uc3Qgcj10aGlzLmxvYWRlZCxuPXQudWlkO3ImJnJbbl0mJmRlbGV0ZSByW25dLGUoKTt9fSx0LldyaXRpbmdNb2RlPUlwLHQuWm9vbURlcGVuZGVudEV4cHJlc3Npb249V24sdC5hZGQ9TW8sdC5hZGREeW5hbWljQXR0cmlidXRlcz1yZix0LmFkam9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXSxpPWVbMl0scz1lWzNdLGE9ZVs0XSxvPWVbNV0sbD1lWzZdLHU9ZVs3XSxjPWVbOF07cmV0dXJuIHRbMF09YSpjLW8qdSx0WzFdPWkqdS1uKmMsdFsyXT1uKm8taSphLHRbM109bypsLXMqYyx0WzRdPXIqYy1pKmwsdFs1XT1pKnMtcipvLHRbNl09cyp1LWEqbCx0WzddPW4qbC1yKnUsdFs4XT1yKmEtbipzLHR9LHQuYXN5bmNBbGw9Qix0LmJlemllcj1rLHQuYmluZEFsbD1SLHQuYm91bmRzQXR0cmlidXRlcz1FZix0LmJ1ZmZlckNvbnZleFBvbHlnb249ZnVuY3Rpb24odCxlKXtjb25zdCByPVtdO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCBpPXoobi0xLC0xLHQubGVuZ3RoLTEpLHM9eihuKzEsLTEsdC5sZW5ndGgtMSksYT10W25dLG89dFtzXSxsPXRbaV0uc3ViKGEpLnVuaXQoKSx1PW8uc3ViKGEpLnVuaXQoKSxjPXUuYW5nbGVXaXRoU2VwKGwueCxsLnkpLGg9bC5hZGQodSkudW5pdCgpLm11bHQoLTEqZS9NYXRoLnNpbihjLzIpKTtyLnB1c2goYS5hZGQoaCkpO31yZXR1cm4gcn0sdC5jYWNoZUVudHJ5UG9zc2libHlBZGRlZD1mdW5jdGlvbih0KXtvdCsrLG90PmV0JiYodC5nZXRBY3RvcigpLnNlbmQoXCJlbmZvcmNlQ2FjaGVTaXplTGltaXRcIix0dCksb3Q9MCk7fSx0LmNhbGN1bGF0ZUdsb2JlTGFiZWxNYXRyaXg9ZnVuY3Rpb24odCxlKXtjb25zdHt4OnIseTpufT10LnBvaW50LGk9Q2wocixuLHQud29ybGRTaXplL3QuX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWwsMCwwKTtyZXR1cm4geW8oaSxpLEVsKHhsKGUpKSl9LHQuY2FsY3VsYXRlR2xvYmVNYXRyaXg9ZnVuY3Rpb24odCl7Y29uc3R7eDplLHk6cn09dC5wb2ludCx7bG5nOm4sbGF0Oml9PXQuX2NlbnRlcjtyZXR1cm4gQ2woZSxyLHQud29ybGRTaXplLG4saSl9LHQuY2FsY3VsYXRlR2xvYmVNZXJjYXRvck1hdHJpeD1mdW5jdGlvbih0KXtjb25zdCBlPXQucGl4ZWxzUGVyTWV0ZXIscj1lL1psKDEsdC5jZW50ZXIubGF0KSxuPXBvKG5ldyBGbG9hdDY0QXJyYXkoMTYpKTtyZXR1cm4gbW8obixuLFt0LnBvaW50LngsdC5wb2ludC55LDBdKSxnbyhuLG4sW3IscixlXSksRmxvYXQzMkFycmF5LmZyb20obil9LHQuY2lyY3VtZmVyZW5jZUF0TGF0aXR1ZGU9cWwsdC5jbGFtcD1NLHQuY2xlYXJUaWxlQ2FjaGU9ZnVuY3Rpb24odCl7aWYoIWl0KCkpcmV0dXJuO2NvbnN0IHI9ZS5jYWNoZXMuZGVsZXRlKFEpO3QmJnIuY2F0Y2godCkudGhlbigoKCk9PnQoKSkpO30sdC5jbGlwTGluZT1IcCx0LmNsb25lPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB1bygxNik7cmV0dXJuIGVbMF09dFswXSxlWzFdPXRbMV0sZVsyXT10WzJdLGVbM109dFszXSxlWzRdPXRbNF0sZVs1XT10WzVdLGVbNl09dFs2XSxlWzddPXRbN10sZVs4XT10WzhdLGVbOV09dFs5XSxlWzEwXT10WzEwXSxlWzExXT10WzExXSxlWzEyXT10WzEyXSxlWzEzXT10WzEzXSxlWzE0XT10WzE0XSxlWzE1XT10WzE1XSxlfSx0LmNsb25lJDE9Tyx0LmNvbGxpc2lvbkNpcmNsZUxheW91dD1GaCx0LmNvbmZpZz1pLHQuY29uanVnYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbMF09LWVbMF0sdFsxXT0tZVsxXSx0WzJdPS1lWzJdLHRbM109ZVszXSx0fSx0LmNyZWF0ZT1mdW5jdGlvbigpe3ZhciB0PW5ldyB1bygxNik7cmV0dXJuIHVvIT1GbG9hdDMyQXJyYXkmJih0WzFdPTAsdFsyXT0wLHRbM109MCx0WzRdPTAsdFs2XT0wLHRbN109MCx0WzhdPTAsdFs5XT0wLHRbMTFdPTAsdFsxMl09MCx0WzEzXT0wLHRbMTRdPTApLHRbMF09MSx0WzVdPTEsdFsxMF09MSx0WzE1XT0xLHR9LHQuY3JlYXRlJDE9Y28sdC5jcmVhdGVFeHByZXNzaW9uPUhuLHQuY3JlYXRlTGF5b3V0PVJzLHQuY3JlYXRlU3R5bGVMYXllcj1mdW5jdGlvbih0KXtyZXR1cm4gXCJjdXN0b21cIj09PXQudHlwZT9uZXcgZmYodCk6bmV3IGdmW3QudHlwZV0odCl9LHQuY3Jvc3M9TG8sdC5kZWdUb1JhZD13LHQuZGlzdGFuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5oeXBvdChlWzBdLXRbMF0sZVsxXS10WzFdLGVbMl0tdFsyXSl9LHQuZGl2PWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFswXT1lWzBdL3JbMF0sdFsxXT1lWzFdL3JbMV0sdFsyXT1lWzJdL3JbMl0sdH0sdC5kb3Q9Vm8sdC5lYXJ0aFJhZGl1cz1VbCx0LmVhc2U9SSx0LmVhc2VDdWJpY0luT3V0PVMsdC5lY2VmVG9MYXRMbmc9ZnVuY3Rpb24oW3QsZSxyXSl7Y29uc3Qgbj1NYXRoLmh5cG90KHQsZSxyKSxpPU1hdGguYXRhbjIodCxyKSxzPS41Kk1hdGguUEktTWF0aC5hY29zKC1lL24pO3JldHVybiBuZXcgT2woXyhpKSxfKHMpKX0sdC5lbWl0VmFsaWRhdGlvbkVycm9ycz1xaSx0LmVuZHNXaXRoPVUsdC5lbmZvcmNlQ2FjaGVTaXplTGltaXQ9ZnVuY3Rpb24odCl7c3QoKSxydCYmcnQudGhlbigoZT0+e2Uua2V5cygpLnRoZW4oKHI9Pntmb3IobGV0IG49MDtuPHIubGVuZ3RoLXQ7bisrKWUuZGVsZXRlKHJbbl0pO30pKTt9KSk7fSx0LmV2YWx1YXRlU2l6ZUZvckZlYXR1cmU9amgsdC5ldmFsdWF0ZVNpemVGb3Jab29tPU9oLHQuZXZhbHVhdGVWYXJpYWJsZU9mZnNldD14ZCx0LmV2ZW50ZWQ9Z3MsdC5leGFjdEVxdWFscz1mdW5jdGlvbih0LGUpe3JldHVybiB0WzBdPT09ZVswXSYmdFsxXT09PWVbMV0mJnRbMl09PT1lWzJdJiZ0WzNdPT09ZVszXX0sdC5leGFjdEVxdWFscyQxPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbMF09PT1lWzBdJiZ0WzFdPT09ZVsxXSYmdFsyXT09PWVbMl19LHQuZXhwb3J0ZWQ9WHQsdC5leHBvcnRlZCQxPXMsdC5leHRlbmQ9Qyx0LmV4dGVuZCQxPWVlLHQuZmlsbEV4dHJ1c2lvbkhlaWdodExpZnQ9b2gsdC5maWx0ZXJPYmplY3Q9aix0LmZyb21NYXQ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbMF09ZVswXSx0WzFdPWVbMV0sdFsyXT1lWzJdLHRbM109ZVs0XSx0WzRdPWVbNV0sdFs1XT1lWzZdLHRbNl09ZVs4XSx0WzddPWVbOV0sdFs4XT1lWzEwXSx0fSx0LmZyb21RdWF0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9ZVswXSxuPWVbMV0saT1lWzJdLHM9ZVszXSxhPXIrcixvPW4rbixsPWkraSx1PXIqYSxjPW4qYSxoPW4qbyxwPWkqYSxkPWkqbyxmPWkqbCx5PXMqYSxtPXMqbyxnPXMqbDtyZXR1cm4gdFswXT0xLWgtZix0WzFdPWMrZyx0WzJdPXAtbSx0WzNdPTAsdFs0XT1jLWcsdFs1XT0xLXUtZix0WzZdPWQreSx0WzddPTAsdFs4XT1wK20sdFs5XT1kLXksdFsxMF09MS11LWgsdFsxMV09MCx0WzEyXT0wLHRbMTNdPTAsdFsxNF09MCx0WzE1XT0xLHR9LHQuZnJvbVJvdGF0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIHI9TWF0aC5zaW4oZSksbj1NYXRoLmNvcyhlKTtyZXR1cm4gdFswXT1uLHRbMV09cix0WzJdPTAsdFszXT0tcix0WzRdPW4sdFs1XT0wLHRbNl09MCx0WzddPTAsdFs4XT0xLHR9LHQuZnJvbVNjYWxpbmc9Ym8sdC5mdXJ0aGVzdFRpbGVDb3JuZXI9ZnVuY3Rpb24odCl7Y29uc3QgZT1NYXRoLnJvdW5kKCh0KzQ1KzM2MCklMzYwLzkwKSU0O3JldHVybiBBW2VdfSx0LmdldEFBQkJQb2ludFNxdWFyZURpc3Q9ZnVuY3Rpb24odCxlLHIpe2xldCBuPTA7Zm9yKGxldCBpPTA7aTwyOysraSl7Y29uc3Qgcz1yP3JbaV06MDt0W2ldPnMmJihuKz0odFtpXS1zKSoodFtpXS1zKSksZVtpXTxzJiYobis9KHMtZVtpXSkqKHMtZVtpXSkpO31yZXR1cm4gbn0sdC5nZXRBbmNob3JBbGlnbm1lbnQ9UnAsdC5nZXRBbmNob3JKdXN0aWZpY2F0aW9uPWJkLHQuZ2V0Qm91bmRzPWZ1bmN0aW9uKHQpe2xldCBlPTEvMCxyPTEvMCxuPS0xLzAsaT0tMS8wO2Zvcihjb25zdCBzIG9mIHQpZT1NYXRoLm1pbihlLHMueCkscj1NYXRoLm1pbihyLHMueSksbj1NYXRoLm1heChuLHMueCksaT1NYXRoLm1heChpLHMueSk7cmV0dXJuIHttaW46bmV3IHgoZSxyKSxtYXg6bmV3IHgobixpKX19LHQuZ2V0Q29sdW1uPVcsdC5nZXREZWZhdWx0RXhwb3J0RnJvbUNqcz1wLHQuZ2V0R3JpZE1hdHJpeD1mdW5jdGlvbih0LGUscixuKXtjb25zdCBpPWUuZ2V0Tm9ydGgoKSxzPWUuZ2V0U291dGgoKSxhPWUuZ2V0V2VzdCgpLG89ZS5nZXRFYXN0KCksbD0xPDx0LnosdT1vLWEsYz1pLXMsaD11L3VsLHA9LWMvY2xbcl0sZD1bMCxoLDAscCwwLDAsaSxhLDBdO2lmKHQuej4wKXtjb25zdCB0PTE4MC9uO2hvKGQsZCxbdC91KzEsMCwwLDAsdC9jKzEsMCwtLjUqdC9oLC41KnQvcCwxXSk7fXJldHVybiBkWzJdPWwsZFs1XT10LngsZFs4XT10LnksZH0sdC5nZXRJbWFnZT1ndCx0LmdldEpTT049ZnVuY3Rpb24odCxlKXtyZXR1cm4gaHQoQyh0LHt0eXBlOlwianNvblwifSksZSl9LHQuZ2V0TGF0aXR1ZGluYWxMb2Q9ZnVuY3Rpb24odCl7Y29uc3QgZT1IbC01O3Q9TSh0LC1lLGUpL2UqOTA7Y29uc3Qgcj1NYXRoLnBvdyhNYXRoLmFicyhNYXRoLnNpbih3KHQpKSksMyk7cmV0dXJuIE1hdGgucm91bmQociooY2wubGVuZ3RoLTEpKX0sdC5nZXRNYXBTZXNzaW9uQVBJPUZ0LHQuZ2V0UGVyZm9ybWFuY2VNZWFzdXJlbWVudD1xdCx0LmdldFByb2plY3Rpb249WWQsdC5nZXRSVExUZXh0UGx1Z2luU3RhdHVzPXhzLHQuZ2V0UmVmZXJyZXI9Y3QsdC5nZXRUaWxlUG9pbnQ9ZnVuY3Rpb24odCx7eDplLHk6cn0sbj0wKXtyZXR1cm4gbmV3IHgoKChlLW4pKnQuc2NhbGUtdC54KSphbywocip0LnNjYWxlLXQueSkqYW8pfSx0LmdldFRpbGVWZWMzPWZ1bmN0aW9uKHQsZSxyPTApe3JldHVybiBJbygoKGUueC1yKSp0LnNjYWxlLXQueCkqYW8sKGUueSp0LnNjYWxlLXQueSkqYW8sSmwoZS56LGUueSkpfSx0LmdldFZpZGVvPWZ1bmN0aW9uKHQscil7Y29uc3Qgbj1lLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtuLm11dGVkPSEwLG4ub25sb2Fkc3RhcnQ9ZnVuY3Rpb24oKXtyKG51bGwsbik7fTtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl7Y29uc3QgaT1lLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7ZHQodFtyXSl8fChuLmNyb3NzT3JpZ2luPVwiQW5vbnltb3VzXCIpLGkuc3JjPXRbcl0sbi5hcHBlbmRDaGlsZChpKTt9cmV0dXJuIHtjYW5jZWw6KCk9Pnt9fX0sdC5nbG9iZUNlbnRlclRvU2NyZWVuUG9pbnQ9ZnVuY3Rpb24odCl7Y29uc3QgZT1bMCwwLDBdLHI9cG8obmV3IEZsb2F0NjRBcnJheSgxNikpO3JldHVybiB5byhyLHQucGl4ZWxNYXRyaXgsdC5nbG9iZU1hdHJpeCksRm8oZSxlLHIpLG5ldyB4KGVbMF0sZVsxXSl9LHQuZ2xvYmVEZW5vcm1hbGl6ZUVDRUY9RWwsdC5nbG9iZUVDRUZPcmlnaW49ZnVuY3Rpb24odCxlKXtjb25zdCByPVswLDAsMF07cmV0dXJuIEZvKHIscixCbCh4bChlLmNhbm9uaWNhbCkpKSxGbyhyLHIsdCkscn0sdC5nbG9iZU1ldGVyc1RvRWNlZj1mbCx0Lmdsb2JlTm9ybWFsaXplRUNFRj1CbCx0Lmdsb2JlUGl4ZWxzVG9UaWxlVW5pdHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYW8vKDUxMipNYXRoLnBvdygyLHQpKSpUbCh4bChlKSl9LHQuZ2xvYmVQb2xlTWF0cml4Rm9yVGlsZT1mdW5jdGlvbih0LGUscil7Y29uc3Qgbj1wbyhuZXcgRmxvYXQ2NEFycmF5KDE2KSksaT0oZS8oMTw8dCktLjUpKk1hdGguUEkqMjtyZXR1cm4gdm8obixyLmdsb2JlTWF0cml4LGkpLEZsb2F0MzJBcnJheS5mcm9tKG4pfSx0Lmdsb2JlVGlsZUJvdW5kcz14bCx0Lmdsb2JlVGlsdEF0TG5nTGF0PURsLHQuZ2xvYmVUb01lcmNhdG9yVHJhbnNpdGlvbj1QbCx0Lmdsb2JlVXNlQ3VzdG9tQW50aUFsaWFzaW5nPWZ1bmN0aW9uKHQsZSxyKXtjb25zdCBuPVBsKHIuem9vbSksaT10LnN0eWxlLm1hcC5fYW50aWFsaWFzLHM9ISFlLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXMsYT1lLmV4dFN0YW5kYXJkRGVyaXZhdGl2ZXNGb3JjZU9mZnx8dC50ZXJyYWluJiZ0LnRlcnJhaW4uZXhhZ2dlcmF0aW9uKCk+MDtyZXR1cm4gMD09PW4mJiFpJiYhYSYmc30sdC5pZGVudGl0eT1wbyx0LmlkZW50aXR5JDE9S28sdC5pbnZlcnQ9Zm8sdC5pc0Z1bGxzY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4gISFlLmRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50fHwhIWUuZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnR9LHQuaXNMbmdMYXRCZWhpbmRHbG9iZT1WbCx0LmlzTWFwQXV0aGVudGljYXRlZD1mdW5jdGlvbih0KXtyZXR1cm4gUnQuaGFzKHQpfSx0LmlzTWFwYm94VVJMPXZ0LHQuaXNTYWZhcmlXaXRoQW50aWFsaWFzaW5nQnVnPWZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5uYXZpZ2F0b3I/dC5uYXZpZ2F0b3IudXNlckFnZW50Om51bGw7cmV0dXJuICEhSCh0KSYmZSYmKGUubWF0Y2goXCJWZXJzaW9uLzE1LjRcIil8fGUubWF0Y2goXCJWZXJzaW9uLzE1LjVcIil8fGUubWF0Y2goL0NQVSAoT1N8aVBob25lIE9TKSAoMTVfNHwxNV81KSBsaWtlIE1hYyBPUyBYLykpfSx0LmxhdEZyb21NZXJjYXRvclk9WGwsdC5sYXRMbmdUb0VDRUY9SWwsdC5sZW49T28sdC5sZW5ndGg9a28sdC5sZW5ndGgkMT1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5oeXBvdCh0WzBdLHRbMV0sdFsyXSx0WzNdKX0sdC5sbmdGcm9tTWVyY2F0b3JYPUtsLHQubG9hZFZlY3RvclRpbGU9eXksdC5tYWtlUmVxdWVzdD1odCx0Lm1hcFZhbHVlPWZ1bmN0aW9uKHQsZSxyLG4saSl7cmV0dXJuIE0oKHQtZSkvKHItZSkqKGktbikrbixuLGkpfSx0Lm1lcmNhdG9yU2NhbGU9WWwsdC5tZXJjYXRvclhmcm9tTG5nPU5sLHQubWVyY2F0b3JZZnJvbUxhdD1HbCx0Lm1lcmNhdG9yWmZyb21BbHRpdHVkZT1abCx0Lm11bD1fbyx0Lm11bCQxPWpvLHQubXVsdGlwbHk9eW8sdC5tdWx0aXBseSQxPWhvLHQubXVsdGlwbHkkMj16byx0Lm5leHRQb3dlck9mVHdvPUwsdC5ub3JtYWxpemU9RG8sdC5ub3JtYWxpemUkMT1Ibyx0Lm5vcm1hbGl6ZSQyPU5vLHQubnVtYmVyPUVyLHQub3J0aG89ZnVuY3Rpb24odCxlLHIsbixpLHMsYSl7dmFyIG89MS8oZS1yKSxsPTEvKG4taSksdT0xLyhzLWEpO3JldHVybiB0WzBdPS0yKm8sdFsxXT0wLHRbMl09MCx0WzNdPTAsdFs0XT0wLHRbNV09LTIqbCx0WzZdPTAsdFs3XT0wLHRbOF09MCx0WzldPTAsdFsxMF09Mip1LHRbMTFdPTAsdFsxMl09KGUrcikqbyx0WzEzXT0oaStuKSpsLHRbMTRdPShhK3MpKnUsdFsxNV09MSx0fSx0LnBiZj1YaCx0LnBlcnNwZWN0aXZlPWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIHMsYT0xL01hdGgudGFuKGUvMik7cmV0dXJuIHRbMF09YS9yLHRbMV09MCx0WzJdPTAsdFszXT0wLHRbNF09MCx0WzVdPWEsdFs2XT0wLHRbN109MCx0WzhdPTAsdFs5XT0wLHRbMTFdPS0xLHRbMTJdPTAsdFsxM109MCx0WzE1XT0wLG51bGwhPWkmJmkhPT0xLzA/KHRbMTBdPShpK24pKihzPTEvKG4taSkpLHRbMTRdPTIqaSpuKnMpOih0WzEwXT0tMSx0WzE0XT0tMipuKSx0fSx0LnBpY2s9ZnVuY3Rpb24odCxlKXtjb25zdCByPXt9O2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXtjb25zdCBpPWVbbl07aSBpbiB0JiYocltpXT10W2ldKTt9cmV0dXJuIHJ9LHQucGx1Z2luPWJzLHQucG9pbnRHZW9tZXRyeT1tLHQucG9sZXNJblZpZXdwb3J0PWZ1bmN0aW9uKHQpe2NvbnN0IGU9cG8obmV3IEZsb2F0NjRBcnJheSgxNikpO3lvKGUsdC5waXhlbE1hdHJpeCx0Lmdsb2JlTWF0cml4KTtjb25zdCByPVswLGhsLDBdLG49WzAscGwsMF07cmV0dXJuIEZvKHIscixlKSxGbyhuLG4sZSksW3JbMF0+MCYmclswXTw9dC53aWR0aCYmclsxXT4wJiZyWzFdPD10LmhlaWdodCYmIVZsKHQsbmV3IE9sKHQuY2VudGVyLmxhdCw5MCkpLG5bMF0+MCYmblswXTw9dC53aWR0aCYmblsxXT4wJiZuWzFdPD10LmhlaWdodCYmIVZsKHQsbmV3IE9sKHQuY2VudGVyLmxhdCwtOTApKV19LHQucG9seWdvbkNvbnRhaW5zUG9pbnQ9YnUsdC5wb2x5Z29uSW50ZXJzZWN0c0JveD13dSx0LnBvbHlnb25JbnRlcnNlY3RzUG9seWdvbj1odSx0LnBvbHlnb25pemVCb3VuZHM9ZnVuY3Rpb24odCxlLHI9MCxuPSEwKXtjb25zdCBpPW5ldyB4KHIscikscz10LnN1YihpKSxhPWUuYWRkKGkpLG89W3MsbmV3IHgoYS54LHMueSksYSxuZXcgeChzLngsYS55KV07cmV0dXJuIG4mJm8ucHVzaChzLmNsb25lKCkpLG99LHQucG9zQXR0cmlidXRlcz10bCx0LnBvc3RNYXBMb2FkRXZlbnQ9UHQsdC5wb3N0UGVyZm9ybWFuY2VFdmVudD1WdCx0LnBvc3RUdXJuc3RpbGVFdmVudD1FdCx0LnBvdHBhY2s9X3AsdC5wcmV2UG93ZXJPZlR3bz1mdW5jdGlvbih0KXtyZXR1cm4gdDw9MT8xOk1hdGgucG93KDIsTWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMikpfSx0LnJhZFRvRGVnPV8sdC5yZWZQcm9wZXJ0aWVzPVtcInR5cGVcIixcInNvdXJjZVwiLFwic291cmNlLWxheWVyXCIsXCJtaW56b29tXCIsXCJtYXh6b29tXCIsXCJmaWx0ZXJcIixcImxheW91dFwiXSx0LnJlZ2lzdGVyRm9yUGx1Z2luU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQoe3BsdWdpblN0YXR1czpkcyxwbHVnaW5VUkw6ZnN9KSxncy5vbihcInBsdWdpblN0YXRlQ2hhbmdlXCIsdCksdH0sdC5yZW1vdmVBdXRoU3RhdGU9ZnVuY3Rpb24odCl7UnQuZGVsZXRlKHQpO30sdC5yZW5kZXJDb2xvclJhbXA9anUsdC5yZXNhbXBsZT10dSx0LnJvdGF0ZVg9eG8sdC5yb3RhdGVYJDE9WG8sdC5yb3RhdGVZPXZvLHQucm90YXRlWSQxPUpvLHQucm90YXRlWj1mdW5jdGlvbih0LGUscil7dmFyIG49TWF0aC5zaW4ociksaT1NYXRoLmNvcyhyKSxzPWVbMF0sYT1lWzFdLG89ZVsyXSxsPWVbM10sdT1lWzRdLGM9ZVs1XSxoPWVbNl0scD1lWzddO3JldHVybiBlIT09dCYmKHRbOF09ZVs4XSx0WzldPWVbOV0sdFsxMF09ZVsxMF0sdFsxMV09ZVsxMV0sdFsxMl09ZVsxMl0sdFsxM109ZVsxM10sdFsxNF09ZVsxNF0sdFsxNV09ZVsxNV0pLHRbMF09cyppK3Uqbix0WzFdPWEqaStjKm4sdFsyXT1vKmkraCpuLHRbM109bCppK3Aqbix0WzRdPXUqaS1zKm4sdFs1XT1jKmktYSpuLHRbNl09aCppLW8qbix0WzddPXAqaS1sKm4sdH0sdC5yb3RhdGVaJDE9ZnVuY3Rpb24odCxlLHIpe3IqPS41O3ZhciBuPWVbMF0saT1lWzFdLHM9ZVsyXSxhPWVbM10sbz1NYXRoLnNpbihyKSxsPU1hdGguY29zKHIpO3JldHVybiB0WzBdPW4qbCtpKm8sdFsxXT1pKmwtbipvLHRbMl09cypsK2Eqbyx0WzNdPWEqbC1zKm8sdH0sdC5zY2FsZT1nbyx0LnNjYWxlJDE9cW8sdC5zY2FsZSQyPUNvLHQuc2NhbGVBbmRBZGQ9UG8sdC5zZXQ9ZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIHRbMF09ZSx0WzFdPXIsdFsyXT1uLHR9LHQuc2V0Q2FjaGVMaW1pdHM9ZnVuY3Rpb24odCxlKXt0dD10LGV0PWU7fSx0LnNldENvbHVtbj1mdW5jdGlvbih0LGUscil7dFs0KmUrMF09clswXSx0WzQqZSsxXT1yWzFdLHRbNCplKzJdPXJbMl0sdFs0KmUrM109clszXTt9LHQuc2V0UlRMVGV4dFBsdWdpbj1mdW5jdGlvbih0LGUscj0hMSl7aWYoZHM9PT11c3x8ZHM9PT1jc3x8ZHM9PT1ocyl0aHJvdyBuZXcgRXJyb3IoXCJzZXRSVExUZXh0UGx1Z2luIGNhbm5vdCBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMuXCIpO2ZzPVh0LnJlc29sdmVVUkwodCksZHM9dXMscHM9ZSxtcygpLHJ8fHZzKCk7fSx0LnNtb290aHN0ZXA9VCx0LnNwZWM9dGUsdC5zcXVhcmVkTGVuZ3RoPWZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0scj10WzFdLG49dFsyXTtyZXR1cm4gZSplK3IqcituKm59LHQuc3RvcmVBdXRoU3RhdGU9ZnVuY3Rpb24odCxlKXtlP1J0LmFkZCh0KTpSdC5kZWxldGUodCk7fSx0LnN1Yj0kbyx0LnN1YnRyYWN0PVRvLHQuc3ltYm9sU2l6ZT1xaCx0LnRpbGVBQUJCPWZ1bmN0aW9uKHQsZSxyLG4saSxzLGEsbyxsKXtpZihcImdsb2JlXCI9PT1sLm5hbWUpcmV0dXJuIF9sKHQsZSxuZXcgcGgocixuLGkpKTtjb25zdCB1PUJkKHt6OnIseDpuLHk6aX0sbCk7cmV0dXJuIG5ldyBpbChbKHMrdS54L3Uuc2NhbGUpKmUsZSoodS55L3Uuc2NhbGUpLGFdLFsocyt1LngyL3Uuc2NhbGUpKmUsZSoodS55Mi91LnNjYWxlKSxvXSl9LHQudGlsZUNvcm5lcnNUb0JvdW5kcz1BbCx0LnRpbGVUcmFuc2Zvcm09QmQsdC50cmFuc2Zvcm1NYXQzPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1lWzBdLGk9ZVsxXSxzPWVbMl07cmV0dXJuIHRbMF09bipyWzBdK2kqclszXStzKnJbNl0sdFsxXT1uKnJbMV0raSpyWzRdK3Mqcls3XSx0WzJdPW4qclsyXStpKnJbNV0rcypyWzhdLHR9LHQudHJhbnNmb3JtTWF0ND1Gbyx0LnRyYW5zZm9ybU1hdDQkMT1Hbyx0LnRyYW5zZm9ybVF1YXQ9Um8sdC50cmFuc2l0aW9uVGlsZUFBQkJpbkVDRUY9YmwsdC50cmFuc2xhdGU9bW8sdC50cmFuc3Bvc2U9ZnVuY3Rpb24odCxlKXtpZih0PT09ZSl7dmFyIHI9ZVsxXSxuPWVbMl0saT1lWzVdO3RbMV09ZVszXSx0WzJdPWVbNl0sdFszXT1yLHRbNV09ZVs3XSx0WzZdPW4sdFs3XT1pO31lbHNlIHRbMF09ZVswXSx0WzFdPWVbM10sdFsyXT1lWzZdLHRbM109ZVsxXSx0WzRdPWVbNF0sdFs1XT1lWzddLHRbNl09ZVsyXSx0WzddPWVbNV0sdFs4XT1lWzhdO3JldHVybiB0fSx0LnRyaWdnZXJQbHVnaW5Db21wbGV0aW9uRXZlbnQ9eXMsdC51bmlxdWVJZD1ELHQudXBkYXRlR2xvYmVWZXJ0ZXhOb3JtYWw9ZnVuY3Rpb24odCxlLHIsbixpKXtjb25zdCBzPTUqZSsyO3QuZmxvYXQzMltzKzBdPXIsdC5mbG9hdDMyW3MrMV09bix0LmZsb2F0MzJbcysyXT1pO30sdC52YWxpZGF0ZUN1c3RvbVN0eWxlTGF5ZXI9ZnVuY3Rpb24odCl7Y29uc3QgZT1bXSxyPXQuaWQ7cmV0dXJuIHZvaWQgMD09PXImJmUucHVzaCh7bWVzc2FnZTpgbGF5ZXJzLiR7cn06IG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJpZFwiYH0pLHZvaWQgMD09PXQucmVuZGVyJiZlLnB1c2goe21lc3NhZ2U6YGxheWVycy4ke3J9OiBtaXNzaW5nIHJlcXVpcmVkIG1ldGhvZCBcInJlbmRlclwiYH0pLHQucmVuZGVyaW5nTW9kZSYmXCIyZFwiIT09dC5yZW5kZXJpbmdNb2RlJiZcIjNkXCIhPT10LnJlbmRlcmluZ01vZGUmJmUucHVzaCh7bWVzc2FnZTpgbGF5ZXJzLiR7cn06IHByb3BlcnR5IFwicmVuZGVyaW5nTW9kZVwiIG11c3QgYmUgZWl0aGVyIFwiMmRcIiBvciBcIjNkXCJgfSksZX0sdC52YWxpZGF0ZUZpbHRlcj10PT5PaShBaSh0KSksdC52YWxpZGF0ZUZvZz10PT5PaShWaSh0KSksdC52YWxpZGF0ZUxheWVyPXQ9Pk9pKFRpKHQpKSx0LnZhbGlkYXRlTGlnaHQ9dD0+T2koUGkodCkpLHQudmFsaWRhdGVTb3VyY2U9dD0+T2koRWkodCkpLHQudmFsaWRhdGVTdHlsZT1VaSx0LnZhbGlkYXRlVGVycmFpbj10PT5PaShEaSh0KSksdC52YWx1ZXM9RSx0LnZlY3RvclRpbGU9RGMsdC52ZXJzaW9uPXIsdC53YXJuT25jZT1OLHQud2luZG93PWUsdC53cmFwPXo7fSkpO1xuXG5kZWZpbmUoW1wiLi9zaGFyZWRcIl0sKGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGV8fFwiYm9vbGVhblwiPT10eXBlb2YgZXx8XCJzdHJpbmdcIj09dHlwZW9mIGV8fG51bGw9PWUpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpO2lmKEFycmF5LmlzQXJyYXkoZSkpe2xldCByPVwiW1wiO2Zvcihjb25zdCBvIG9mIGUpcis9YCR7dChvKX0sYDtyZXR1cm4gYCR7cn1dYH1sZXQgcj1cIntcIjtmb3IoY29uc3QgbyBvZiBPYmplY3Qua2V5cyhlKS5zb3J0KCkpcis9YCR7b306JHt0KGVbb10pfSxgO3JldHVybiBgJHtyfX1gfWZ1bmN0aW9uIHIocil7bGV0IG89XCJcIjtmb3IoY29uc3QgaSBvZiBlLnJlZlByb3BlcnRpZXMpbys9YC8ke3QocltpXSl9YDtyZXR1cm4gb31jbGFzcyBve2NvbnN0cnVjdG9yKGUpe3RoaXMua2V5Q2FjaGU9e30sZSYmdGhpcy5yZXBsYWNlKGUpO31yZXBsYWNlKGUpe3RoaXMuX2xheWVyQ29uZmlncz17fSx0aGlzLl9sYXllcnM9e30sdGhpcy51cGRhdGUoZSxbXSk7fXVwZGF0ZSh0LG8pe2Zvcihjb25zdCByIG9mIHQpdGhpcy5fbGF5ZXJDb25maWdzW3IuaWRdPXIsKHRoaXMuX2xheWVyc1tyLmlkXT1lLmNyZWF0ZVN0eWxlTGF5ZXIocikpLmNvbXBpbGVGaWx0ZXIoKSx0aGlzLmtleUNhY2hlW3IuaWRdJiZkZWxldGUgdGhpcy5rZXlDYWNoZVtyLmlkXTtmb3IoY29uc3QgZSBvZiBvKWRlbGV0ZSB0aGlzLmtleUNhY2hlW2VdLGRlbGV0ZSB0aGlzLl9sYXllckNvbmZpZ3NbZV0sZGVsZXRlIHRoaXMuX2xheWVyc1tlXTt0aGlzLmZhbWlsaWVzQnlTb3VyY2U9e307Y29uc3QgaT1mdW5jdGlvbihlLHQpe2NvbnN0IG89e307Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspe2NvbnN0IG49dCYmdFtlW2ldLmlkXXx8cihlW2ldKTt0JiYodFtlW2ldLmlkXT1uKTtsZXQgcz1vW25dO3N8fChzPW9bbl09W10pLHMucHVzaChlW2ldKTt9Y29uc3QgaT1bXTtmb3IoY29uc3QgZSBpbiBvKWkucHVzaChvW2VdKTtyZXR1cm4gaX0oZS52YWx1ZXModGhpcy5fbGF5ZXJDb25maWdzKSx0aGlzLmtleUNhY2hlKTtmb3IoY29uc3QgZSBvZiBpKXtjb25zdCB0PWUubWFwKChlPT50aGlzLl9sYXllcnNbZS5pZF0pKSxyPXRbMF07aWYoXCJub25lXCI9PT1yLnZpc2liaWxpdHkpY29udGludWU7Y29uc3Qgbz1yLnNvdXJjZXx8XCJcIjtsZXQgaT10aGlzLmZhbWlsaWVzQnlTb3VyY2Vbb107aXx8KGk9dGhpcy5mYW1pbGllc0J5U291cmNlW29dPXt9KTtjb25zdCBuPXIuc291cmNlTGF5ZXJ8fFwiX2dlb2pzb25UaWxlTGF5ZXJcIjtsZXQgcz1pW25dO3N8fChzPWlbbl09W10pLHMucHVzaCh0KTt9fX1jbGFzcyBpe2xvYWRUaWxlKHQscil7Y29uc3R7dWlkOm8sZW5jb2Rpbmc6aSxyYXdJbWFnZURhdGE6bixwYWRkaW5nOnMsYnVpbGRRdWFkVHJlZTphfT10LGw9ZS53aW5kb3cuSW1hZ2VCaXRtYXAmJm4gaW5zdGFuY2VvZiBlLndpbmRvdy5JbWFnZUJpdG1hcD90aGlzLmdldEltYWdlRGF0YShuLHMpOm47cihudWxsLG5ldyBlLkRFTURhdGEobyxsLGksczwxLGEpKTt9Z2V0SW1hZ2VEYXRhKGUsdCl7dGhpcy5vZmZzY3JlZW5DYW52YXMmJnRoaXMub2Zmc2NyZWVuQ2FudmFzQ29udGV4dHx8KHRoaXMub2Zmc2NyZWVuQ2FudmFzPW5ldyBPZmZzY3JlZW5DYW52YXMoZS53aWR0aCxlLmhlaWdodCksdGhpcy5vZmZzY3JlZW5DYW52YXNDb250ZXh0PXRoaXMub2Zmc2NyZWVuQ2FudmFzLmdldENvbnRleHQoXCIyZFwiLHt3aWxsUmVhZEZyZXF1ZW50bHk6ITB9KSksdGhpcy5vZmZzY3JlZW5DYW52YXMud2lkdGg9ZS53aWR0aCx0aGlzLm9mZnNjcmVlbkNhbnZhcy5oZWlnaHQ9ZS5oZWlnaHQsdGhpcy5vZmZzY3JlZW5DYW52YXNDb250ZXh0LmRyYXdJbWFnZShlLDAsMCxlLndpZHRoLGUuaGVpZ2h0KTtjb25zdCByPXRoaXMub2Zmc2NyZWVuQ2FudmFzQ29udGV4dC5nZXRJbWFnZURhdGEoLXQsLXQsZS53aWR0aCsyKnQsZS5oZWlnaHQrMip0KTtyZXR1cm4gdGhpcy5vZmZzY3JlZW5DYW52YXNDb250ZXh0LmNsZWFyUmVjdCgwLDAsdGhpcy5vZmZzY3JlZW5DYW52YXMud2lkdGgsdGhpcy5vZmZzY3JlZW5DYW52YXMuaGVpZ2h0KSxyfX1mdW5jdGlvbiBuKGUsdCl7aWYoMCE9PWUubGVuZ3RoKXtzKGVbMF0sdCk7Zm9yKHZhciByPTE7cjxlLmxlbmd0aDtyKyspcyhlW3JdLCF0KTt9fWZ1bmN0aW9uIHMoZSx0KXtmb3IodmFyIHI9MCxvPTAsaT0wLG49ZS5sZW5ndGgscz1uLTE7aTxuO3M9aSsrKXt2YXIgYT0oZVtpXVswXS1lW3NdWzBdKSooZVtzXVsxXStlW2ldWzFdKSxsPXIrYTtvKz1NYXRoLmFicyhyKT49TWF0aC5hYnMoYSk/ci1sK2E6YS1sK3Iscj1sO31yK28+PTAhPSEhdCYmZS5yZXZlcnNlKCk7fXZhciBhPWUuZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoKGZ1bmN0aW9uIGUodCxyKXt2YXIgbyxpPXQmJnQudHlwZTtpZihcIkZlYXR1cmVDb2xsZWN0aW9uXCI9PT1pKWZvcihvPTA7bzx0LmZlYXR1cmVzLmxlbmd0aDtvKyspZSh0LmZlYXR1cmVzW29dLHIpO2Vsc2UgaWYoXCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09PWkpZm9yKG89MDtvPHQuZ2VvbWV0cmllcy5sZW5ndGg7bysrKWUodC5nZW9tZXRyaWVzW29dLHIpO2Vsc2UgaWYoXCJGZWF0dXJlXCI9PT1pKWUodC5nZW9tZXRyeSxyKTtlbHNlIGlmKFwiUG9seWdvblwiPT09aSluKHQuY29vcmRpbmF0ZXMscik7ZWxzZSBpZihcIk11bHRpUG9seWdvblwiPT09aSlmb3Iobz0wO288dC5jb29yZGluYXRlcy5sZW5ndGg7bysrKW4odC5jb29yZGluYXRlc1tvXSxyKTtyZXR1cm4gdH0pKTtjb25zdCBsPWUuVmVjdG9yVGlsZUZlYXR1cmUucHJvdG90eXBlLnRvR2VvSlNPTjt2YXIgdT17ZXhwb3J0czp7fX0saD1lLnBvaW50R2VvbWV0cnksYz1lLnZlY3RvclRpbGUuVmVjdG9yVGlsZUZlYXR1cmUsZj1wO2Z1bmN0aW9uIHAoZSx0KXt0aGlzLm9wdGlvbnM9dHx8e30sdGhpcy5mZWF0dXJlcz1lLHRoaXMubGVuZ3RoPWUubGVuZ3RoO31mdW5jdGlvbiBnKGUsdCl7dGhpcy5pZD1cIm51bWJlclwiPT10eXBlb2YgZS5pZD9lLmlkOnZvaWQgMCx0aGlzLnR5cGU9ZS50eXBlLHRoaXMucmF3R2VvbWV0cnk9MT09PWUudHlwZT9bZS5nZW9tZXRyeV06ZS5nZW9tZXRyeSx0aGlzLnByb3BlcnRpZXM9ZS50YWdzLHRoaXMuZXh0ZW50PXR8fDQwOTY7fXAucHJvdG90eXBlLmZlYXR1cmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBnKHRoaXMuZmVhdHVyZXNbZV0sdGhpcy5vcHRpb25zLmV4dGVudCl9LGcucHJvdG90eXBlLmxvYWRHZW9tZXRyeT1mdW5jdGlvbigpe3ZhciBlPXRoaXMucmF3R2VvbWV0cnk7dGhpcy5nZW9tZXRyeT1bXTtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7Zm9yKHZhciByPWVbdF0sbz1bXSxpPTA7aTxyLmxlbmd0aDtpKyspby5wdXNoKG5ldyBoKHJbaV1bMF0scltpXVsxXSkpO3RoaXMuZ2VvbWV0cnkucHVzaChvKTt9cmV0dXJuIHRoaXMuZ2VvbWV0cnl9LGcucHJvdG90eXBlLmJib3g9ZnVuY3Rpb24oKXt0aGlzLmdlb21ldHJ5fHx0aGlzLmxvYWRHZW9tZXRyeSgpO2Zvcih2YXIgZT10aGlzLmdlb21ldHJ5LHQ9MS8wLHI9LTEvMCxvPTEvMCxpPS0xLzAsbj0wO248ZS5sZW5ndGg7bisrKWZvcih2YXIgcz1lW25dLGE9MDthPHMubGVuZ3RoO2ErKyl7dmFyIGw9c1thXTt0PU1hdGgubWluKHQsbC54KSxyPU1hdGgubWF4KHIsbC54KSxvPU1hdGgubWluKG8sbC55KSxpPU1hdGgubWF4KGksbC55KTt9cmV0dXJuIFt0LG8scixpXX0sZy5wcm90b3R5cGUudG9HZW9KU09OPWMucHJvdG90eXBlLnRvR2VvSlNPTjt2YXIgZD1lLnBiZixtPWY7ZnVuY3Rpb24geShlKXt2YXIgdD1uZXcgZDtyZXR1cm4gZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZS5sYXllcnMpdC53cml0ZU1lc3NhZ2UoMyx2LGUubGF5ZXJzW3JdKTt9KGUsdCksdC5maW5pc2goKX1mdW5jdGlvbiB2KGUsdCl7dmFyIHI7dC53cml0ZVZhcmludEZpZWxkKDE1LGUudmVyc2lvbnx8MSksdC53cml0ZVN0cmluZ0ZpZWxkKDEsZS5uYW1lfHxcIlwiKSx0LndyaXRlVmFyaW50RmllbGQoNSxlLmV4dGVudHx8NDA5Nik7dmFyIG89e2tleXM6W10sdmFsdWVzOltdLGtleWNhY2hlOnt9LHZhbHVlY2FjaGU6e319O2ZvcihyPTA7cjxlLmxlbmd0aDtyKyspby5mZWF0dXJlPWUuZmVhdHVyZShyKSx0LndyaXRlTWVzc2FnZSgyLHgsbyk7dmFyIGk9by5rZXlzO2ZvcihyPTA7cjxpLmxlbmd0aDtyKyspdC53cml0ZVN0cmluZ0ZpZWxkKDMsaVtyXSk7dmFyIG49by52YWx1ZXM7Zm9yKHI9MDtyPG4ubGVuZ3RoO3IrKyl0LndyaXRlTWVzc2FnZSg0LGIsbltyXSk7fWZ1bmN0aW9uIHgoZSx0KXt2YXIgcj1lLmZlYXR1cmU7dm9pZCAwIT09ci5pZCYmdC53cml0ZVZhcmludEZpZWxkKDEsci5pZCksdC53cml0ZU1lc3NhZ2UoMix3LGUpLHQud3JpdGVWYXJpbnRGaWVsZCgzLHIudHlwZSksdC53cml0ZU1lc3NhZ2UoNCxQLHIpO31mdW5jdGlvbiB3KGUsdCl7dmFyIHI9ZS5mZWF0dXJlLG89ZS5rZXlzLGk9ZS52YWx1ZXMsbj1lLmtleWNhY2hlLHM9ZS52YWx1ZWNhY2hlO2Zvcih2YXIgYSBpbiByLnByb3BlcnRpZXMpe3ZhciBsPXIucHJvcGVydGllc1thXSx1PW5bYV07aWYobnVsbCE9PWwpe3ZvaWQgMD09PXUmJihvLnB1c2goYSksblthXT11PW8ubGVuZ3RoLTEpLHQud3JpdGVWYXJpbnQodSk7dmFyIGg9dHlwZW9mIGw7XCJzdHJpbmdcIiE9PWgmJlwiYm9vbGVhblwiIT09aCYmXCJudW1iZXJcIiE9PWgmJihsPUpTT04uc3RyaW5naWZ5KGwpKTt2YXIgYz1oK1wiOlwiK2wsZj1zW2NdO3ZvaWQgMD09PWYmJihpLnB1c2gobCksc1tjXT1mPWkubGVuZ3RoLTEpLHQud3JpdGVWYXJpbnQoZik7fX19ZnVuY3Rpb24gUyhlLHQpe3JldHVybiAodDw8MykrKDcmZSl9ZnVuY3Rpb24gTShlKXtyZXR1cm4gZTw8MV5lPj4zMX1mdW5jdGlvbiBQKGUsdCl7Zm9yKHZhciByPWUubG9hZEdlb21ldHJ5KCksbz1lLnR5cGUsaT0wLG49MCxzPXIubGVuZ3RoLGE9MDthPHM7YSsrKXt2YXIgbD1yW2FdLHU9MTsxPT09byYmKHU9bC5sZW5ndGgpLHQud3JpdGVWYXJpbnQoUygxLHUpKTtmb3IodmFyIGg9Mz09PW8/bC5sZW5ndGgtMTpsLmxlbmd0aCxjPTA7YzxoO2MrKyl7MT09PWMmJjEhPT1vJiZ0LndyaXRlVmFyaW50KFMoMixoLTEpKTt2YXIgZj1sW2NdLngtaSxwPWxbY10ueS1uO3Qud3JpdGVWYXJpbnQoTShmKSksdC53cml0ZVZhcmludChNKHApKSxpKz1mLG4rPXA7fTM9PT1vJiZ0LndyaXRlVmFyaW50KFMoNywxKSk7fX1mdW5jdGlvbiBiKGUsdCl7dmFyIHI9dHlwZW9mIGU7XCJzdHJpbmdcIj09PXI/dC53cml0ZVN0cmluZ0ZpZWxkKDEsZSk6XCJib29sZWFuXCI9PT1yP3Qud3JpdGVCb29sZWFuRmllbGQoNyxlKTpcIm51bWJlclwiPT09ciYmKGUlMSE9MD90LndyaXRlRG91YmxlRmllbGQoMyxlKTplPDA/dC53cml0ZVNWYXJpbnRGaWVsZCg2LGUpOnQud3JpdGVWYXJpbnRGaWVsZCg1LGUpKTt9dS5leHBvcnRzPXksdS5leHBvcnRzLmZyb21WZWN0b3JUaWxlSnM9eSx1LmV4cG9ydHMuZnJvbUdlb2pzb25WdD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIHI9e307Zm9yKHZhciBvIGluIGUpcltvXT1uZXcgbShlW29dLmZlYXR1cmVzLHQpLHJbb10ubmFtZT1vLHJbb10udmVyc2lvbj10LnZlcnNpb24scltvXS5leHRlbnQ9dC5leHRlbnQ7cmV0dXJuIHkoe2xheWVyczpyfSl9LHUuZXhwb3J0cy5HZW9KU09OV3JhcHBlcj1tO3ZhciBUPWUuZ2V0RGVmYXVsdEV4cG9ydEZyb21DanModS5leHBvcnRzKTtjb25zdCBrPXttaW5ab29tOjAsbWF4Wm9vbToxNixtaW5Qb2ludHM6MixyYWRpdXM6NDAsZXh0ZW50OjUxMixub2RlU2l6ZTo2NCxsb2c6ITEsZ2VuZXJhdGVJZDohMSxyZWR1Y2U6bnVsbCxtYXA6ZT0+ZX0sST1NYXRoLmZyb3VuZHx8KF89bmV3IEZsb2F0MzJBcnJheSgxKSxlPT4oX1swXT0rZSxfWzBdKSk7dmFyIF87Y29uc3QgQz0zLEw9NSxPPTY7Y2xhc3MgRXtjb25zdHJ1Y3RvcihlKXt0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGspLGUpLHRoaXMudHJlZXM9bmV3IEFycmF5KHRoaXMub3B0aW9ucy5tYXhab29tKzEpLHRoaXMuc3RyaWRlPXRoaXMub3B0aW9ucy5yZWR1Y2U/Nzo2LHRoaXMuY2x1c3RlclByb3BzPVtdO31sb2FkKGUpe2NvbnN0e2xvZzp0LG1pblpvb206cixtYXhab29tOm99PXRoaXMub3B0aW9uczt0JiZjb25zb2xlLnRpbWUoXCJ0b3RhbCB0aW1lXCIpO2NvbnN0IGk9YHByZXBhcmUgJHtlLmxlbmd0aH0gcG9pbnRzYDt0JiZjb25zb2xlLnRpbWUoaSksdGhpcy5wb2ludHM9ZTtjb25zdCBuPVtdO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCByPWVbdF07aWYoIXIuZ2VvbWV0cnkpY29udGludWU7Y29uc3RbbyxpXT1yLmdlb21ldHJ5LmNvb3JkaW5hdGVzLHM9SShOKG8pKSxhPUkoWihpKSk7bi5wdXNoKHMsYSwxLzAsdCwtMSwxKSx0aGlzLm9wdGlvbnMucmVkdWNlJiZuLnB1c2goMCk7fWxldCBzPXRoaXMudHJlZXNbbysxXT10aGlzLl9jcmVhdGVUcmVlKG4pO3QmJmNvbnNvbGUudGltZUVuZChpKTtmb3IobGV0IGU9bztlPj1yO2UtLSl7Y29uc3Qgcj0rRGF0ZS5ub3coKTtzPXRoaXMudHJlZXNbZV09dGhpcy5fY3JlYXRlVHJlZSh0aGlzLl9jbHVzdGVyKHMsZSkpLHQmJmNvbnNvbGUubG9nKFwieiVkOiAlZCBjbHVzdGVycyBpbiAlZG1zXCIsZSxzLm51bUl0ZW1zLCtEYXRlLm5vdygpLXIpO31yZXR1cm4gdCYmY29uc29sZS50aW1lRW5kKFwidG90YWwgdGltZVwiKSx0aGlzfWdldENsdXN0ZXJzKGUsdCl7bGV0IHI9KChlWzBdKzE4MCklMzYwKzM2MCklMzYwLTE4MDtjb25zdCBvPU1hdGgubWF4KC05MCxNYXRoLm1pbig5MCxlWzFdKSk7bGV0IGk9MTgwPT09ZVsyXT8xODA6KChlWzJdKzE4MCklMzYwKzM2MCklMzYwLTE4MDtjb25zdCBuPU1hdGgubWF4KC05MCxNYXRoLm1pbig5MCxlWzNdKSk7aWYoZVsyXS1lWzBdPj0zNjApcj0tMTgwLGk9MTgwO2Vsc2UgaWYocj5pKXtjb25zdCBlPXRoaXMuZ2V0Q2x1c3RlcnMoW3IsbywxODAsbl0sdCkscz10aGlzLmdldENsdXN0ZXJzKFstMTgwLG8saSxuXSx0KTtyZXR1cm4gZS5jb25jYXQocyl9Y29uc3Qgcz10aGlzLnRyZWVzW3RoaXMuX2xpbWl0Wm9vbSh0KV0sYT1zLnJhbmdlKE4ociksWihuKSxOKGkpLFoobykpLGw9cy5kYXRhLHU9W107Zm9yKGNvbnN0IGUgb2YgYSl7Y29uc3QgdD10aGlzLnN0cmlkZSplO3UucHVzaChsW3QrTF0+MT9qKGwsdCx0aGlzLmNsdXN0ZXJQcm9wcyk6dGhpcy5wb2ludHNbbFt0K0NdXSk7fXJldHVybiB1fWdldENoaWxkcmVuKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0T3JpZ2luSWQoZSkscj10aGlzLl9nZXRPcmlnaW5ab29tKGUpLG89XCJObyBjbHVzdGVyIHdpdGggdGhlIHNwZWNpZmllZCBpZC5cIixpPXRoaXMudHJlZXNbcl07aWYoIWkpdGhyb3cgbmV3IEVycm9yKG8pO2NvbnN0IG49aS5kYXRhO2lmKHQqdGhpcy5zdHJpZGU+PW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihvKTtjb25zdCBzPXRoaXMub3B0aW9ucy5yYWRpdXMvKHRoaXMub3B0aW9ucy5leHRlbnQqTWF0aC5wb3coMixyLTEpKSxhPWkud2l0aGluKG5bdCp0aGlzLnN0cmlkZV0sblt0KnRoaXMuc3RyaWRlKzFdLHMpLGw9W107Zm9yKGNvbnN0IHQgb2YgYSl7Y29uc3Qgcj10KnRoaXMuc3RyaWRlO25bcis0XT09PWUmJmwucHVzaChuW3IrTF0+MT9qKG4scix0aGlzLmNsdXN0ZXJQcm9wcyk6dGhpcy5wb2ludHNbbltyK0NdXSk7fWlmKDA9PT1sLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3Iobyk7cmV0dXJuIGx9Z2V0TGVhdmVzKGUsdCxyKXtjb25zdCBvPVtdO3JldHVybiB0aGlzLl9hcHBlbmRMZWF2ZXMobyxlLHQ9dHx8MTAscj1yfHwwLDApLG99Z2V0VGlsZShlLHQscil7Y29uc3Qgbz10aGlzLnRyZWVzW3RoaXMuX2xpbWl0Wm9vbShlKV0saT1NYXRoLnBvdygyLGUpLHtleHRlbnQ6bixyYWRpdXM6c309dGhpcy5vcHRpb25zLGE9cy9uLGw9KHItYSkvaSx1PShyKzErYSkvaSxoPXtmZWF0dXJlczpbXX07cmV0dXJuIHRoaXMuX2FkZFRpbGVGZWF0dXJlcyhvLnJhbmdlKCh0LWEpL2ksbCwodCsxK2EpL2ksdSksby5kYXRhLHQscixpLGgpLDA9PT10JiZ0aGlzLl9hZGRUaWxlRmVhdHVyZXMoby5yYW5nZSgxLWEvaSxsLDEsdSksby5kYXRhLGkscixpLGgpLHQ9PT1pLTEmJnRoaXMuX2FkZFRpbGVGZWF0dXJlcyhvLnJhbmdlKDAsbCxhL2ksdSksby5kYXRhLC0xLHIsaSxoKSxoLmZlYXR1cmVzLmxlbmd0aD9oOm51bGx9Z2V0Q2x1c3RlckV4cGFuc2lvblpvb20oZSl7bGV0IHQ9dGhpcy5fZ2V0T3JpZ2luWm9vbShlKS0xO2Zvcig7dDw9dGhpcy5vcHRpb25zLm1heFpvb207KXtjb25zdCByPXRoaXMuZ2V0Q2hpbGRyZW4oZSk7aWYodCsrLDEhPT1yLmxlbmd0aClicmVhaztlPXJbMF0ucHJvcGVydGllcy5jbHVzdGVyX2lkO31yZXR1cm4gdH1fYXBwZW5kTGVhdmVzKGUsdCxyLG8saSl7Y29uc3Qgbj10aGlzLmdldENoaWxkcmVuKHQpO2Zvcihjb25zdCB0IG9mIG4pe2NvbnN0IG49dC5wcm9wZXJ0aWVzO2lmKG4mJm4uY2x1c3Rlcj9pK24ucG9pbnRfY291bnQ8PW8/aSs9bi5wb2ludF9jb3VudDppPXRoaXMuX2FwcGVuZExlYXZlcyhlLG4uY2x1c3Rlcl9pZCxyLG8saSk6aTxvP2krKzplLnB1c2godCksZS5sZW5ndGg9PT1yKWJyZWFrfXJldHVybiBpfV9jcmVhdGVUcmVlKHQpe2NvbnN0IHI9bmV3IGUuS0RCdXNoKHQubGVuZ3RoL3RoaXMuc3RyaWRlfDAsdGhpcy5vcHRpb25zLm5vZGVTaXplLEZsb2F0MzJBcnJheSk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKz10aGlzLnN0cmlkZSlyLmFkZCh0W2VdLHRbZSsxXSk7cmV0dXJuIHIuZmluaXNoKCksci5kYXRhPXQscn1fYWRkVGlsZUZlYXR1cmVzKGUsdCxyLG8saSxuKXtmb3IoY29uc3QgcyBvZiBlKXtjb25zdCBlPXMqdGhpcy5zdHJpZGUsYT10W2UrTF0+MTtsZXQgbCx1LGg7aWYoYSlsPUYodCxlLHRoaXMuY2x1c3RlclByb3BzKSx1PXRbZV0saD10W2UrMV07ZWxzZSB7Y29uc3Qgcj10aGlzLnBvaW50c1t0W2UrQ11dO2w9ci5wcm9wZXJ0aWVzO2NvbnN0W28saV09ci5nZW9tZXRyeS5jb29yZGluYXRlczt1PU4obyksaD1aKGkpO31jb25zdCBjPXt0eXBlOjEsZ2VvbWV0cnk6W1tNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5leHRlbnQqKHUqaS1yKSksTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMuZXh0ZW50KihoKmktbykpXV0sdGFnczpsfTtsZXQgZjtmPWF8fHRoaXMub3B0aW9ucy5nZW5lcmF0ZUlkP3RbZStDXTp0aGlzLnBvaW50c1t0W2UrQ11dLmlkLHZvaWQgMCE9PWYmJihjLmlkPWYpLG4uZmVhdHVyZXMucHVzaChjKTt9fV9saW1pdFpvb20oZSl7cmV0dXJuIE1hdGgubWF4KHRoaXMub3B0aW9ucy5taW5ab29tLE1hdGgubWluKE1hdGguZmxvb3IoK2UpLHRoaXMub3B0aW9ucy5tYXhab29tKzEpKX1fY2x1c3RlcihlLHQpe2NvbnN0e3JhZGl1czpyLGV4dGVudDpvLHJlZHVjZTppLG1pblBvaW50czpufT10aGlzLm9wdGlvbnMscz1yLyhvKk1hdGgucG93KDIsdCkpLGE9ZS5kYXRhLGw9W10sdT10aGlzLnN0cmlkZTtmb3IobGV0IHI9MDtyPGEubGVuZ3RoO3IrPXUpe2lmKGFbcisyXTw9dCljb250aW51ZTthW3IrMl09dDtjb25zdCBvPWFbcl0saD1hW3IrMV0sYz1lLndpdGhpbihhW3JdLGFbcisxXSxzKSxmPWFbcitMXTtsZXQgcD1mO2Zvcihjb25zdCBlIG9mIGMpe2NvbnN0IHI9ZSp1O2FbcisyXT50JiYocCs9YVtyK0xdKTt9aWYocD5mJiZwPj1uKXtsZXQgZSxuPW8qZixzPWgqZixnPS0xO2NvbnN0IGQ9KChyL3V8MCk8PDUpKyh0KzEpK3RoaXMucG9pbnRzLmxlbmd0aDtmb3IoY29uc3QgbyBvZiBjKXtjb25zdCBsPW8qdTtpZihhW2wrMl08PXQpY29udGludWU7YVtsKzJdPXQ7Y29uc3QgaD1hW2wrTF07bis9YVtsXSpoLHMrPWFbbCsxXSpoLGFbbCs0XT1kLGkmJihlfHwoZT10aGlzLl9tYXAoYSxyLCEwKSxnPXRoaXMuY2x1c3RlclByb3BzLmxlbmd0aCx0aGlzLmNsdXN0ZXJQcm9wcy5wdXNoKGUpKSxpKGUsdGhpcy5fbWFwKGEsbCkpKTt9YVtyKzRdPWQsbC5wdXNoKG4vcCxzL3AsMS8wLGQsLTEscCksaSYmbC5wdXNoKGcpO31lbHNlIHtmb3IobGV0IGU9MDtlPHU7ZSsrKWwucHVzaChhW3IrZV0pO2lmKHA+MSlmb3IoY29uc3QgZSBvZiBjKXtjb25zdCByPWUqdTtpZighKGFbcisyXTw9dCkpe2FbcisyXT10O2ZvcihsZXQgZT0wO2U8dTtlKyspbC5wdXNoKGFbcitlXSk7fX19fXJldHVybiBsfV9nZXRPcmlnaW5JZChlKXtyZXR1cm4gZS10aGlzLnBvaW50cy5sZW5ndGg+PjV9X2dldE9yaWdpblpvb20oZSl7cmV0dXJuIChlLXRoaXMucG9pbnRzLmxlbmd0aCklMzJ9X21hcChlLHQscil7aWYoZVt0K0xdPjEpe2NvbnN0IG89dGhpcy5jbHVzdGVyUHJvcHNbZVt0K09dXTtyZXR1cm4gcj9PYmplY3QuYXNzaWduKHt9LG8pOm99Y29uc3Qgbz10aGlzLnBvaW50c1tlW3QrQ11dLnByb3BlcnRpZXMsaT10aGlzLm9wdGlvbnMubWFwKG8pO3JldHVybiByJiZpPT09bz9PYmplY3QuYXNzaWduKHt9LGkpOml9fWZ1bmN0aW9uIGooZSx0LHIpe3JldHVybiB7dHlwZTpcIkZlYXR1cmVcIixpZDplW3QrQ10scHJvcGVydGllczpGKGUsdCxyKSxnZW9tZXRyeTp7dHlwZTpcIlBvaW50XCIsY29vcmRpbmF0ZXM6WyhvPWVbdF0sMzYwKihvLS41KSksSihlW3QrMV0pXX19O3ZhciBvO31mdW5jdGlvbiBGKGUsdCxyKXtjb25zdCBvPWVbdCtMXSxpPW8+PTFlND9gJHtNYXRoLnJvdW5kKG8vMWUzKX1rYDpvPj0xZTM/TWF0aC5yb3VuZChvLzEwMCkvMTArXCJrXCI6byxuPWVbdCtPXSxzPS0xPT09bj97fTpPYmplY3QuYXNzaWduKHt9LHJbbl0pO3JldHVybiBPYmplY3QuYXNzaWduKHMse2NsdXN0ZXI6ITAsY2x1c3Rlcl9pZDplW3QrQ10scG9pbnRfY291bnQ6byxwb2ludF9jb3VudF9hYmJyZXZpYXRlZDppfSl9ZnVuY3Rpb24gTihlKXtyZXR1cm4gZS8zNjArLjV9ZnVuY3Rpb24gWihlKXtjb25zdCB0PU1hdGguc2luKGUqTWF0aC5QSS8xODApLHI9LjUtLjI1Kk1hdGgubG9nKCgxK3QpLygxLXQpKS9NYXRoLlBJO3JldHVybiByPDA/MDpyPjE/MTpyfWZ1bmN0aW9uIEooZSl7Y29uc3QgdD0oMTgwLTM2MCplKSpNYXRoLlBJLzE4MDtyZXR1cm4gMzYwKk1hdGguYXRhbihNYXRoLmV4cCh0KSkvTWF0aC5QSS05MH1mdW5jdGlvbiB6KGUsdCxyLG8pe2Zvcih2YXIgaSxuPW8scz1yLXQ+PjEsYT1yLXQsbD1lW3RdLHU9ZVt0KzFdLGg9ZVtyXSxjPWVbcisxXSxmPXQrMztmPHI7Zis9Myl7dmFyIHA9RyhlW2ZdLGVbZisxXSxsLHUsaCxjKTtpZihwPm4paT1mLG49cDtlbHNlIGlmKHA9PT1uKXt2YXIgZz1NYXRoLmFicyhmLXMpO2c8YSYmKGk9ZixhPWcpO319bj5vJiYoaS10PjMmJnooZSx0LGksbyksZVtpKzJdPW4sci1pPjMmJnooZSxpLHIsbykpO31mdW5jdGlvbiBHKGUsdCxyLG8saSxuKXt2YXIgcz1pLXIsYT1uLW87aWYoMCE9PXN8fDAhPT1hKXt2YXIgbD0oKGUtcikqcysodC1vKSphKS8ocypzK2EqYSk7bD4xPyhyPWksbz1uKTpsPjAmJihyKz1zKmwsbys9YSpsKTt9cmV0dXJuIChzPWUtcikqcysoYT10LW8pKmF9ZnVuY3Rpb24gVyhlLHQscixvKXt2YXIgaT17aWQ6dm9pZCAwPT09ZT9udWxsOmUsdHlwZTp0LGdlb21ldHJ5OnIsdGFnczpvLG1pblg6MS8wLG1pblk6MS8wLG1heFg6LTEvMCxtYXhZOi0xLzB9O3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD1lLmdlb21ldHJ5LHI9ZS50eXBlO2lmKFwiUG9pbnRcIj09PXJ8fFwiTXVsdGlQb2ludFwiPT09cnx8XCJMaW5lU3RyaW5nXCI9PT1yKVkoZSx0KTtlbHNlIGlmKFwiUG9seWdvblwiPT09cnx8XCJNdWx0aUxpbmVTdHJpbmdcIj09PXIpZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKyspWShlLHRbb10pO2Vsc2UgaWYoXCJNdWx0aVBvbHlnb25cIj09PXIpZm9yKG89MDtvPHQubGVuZ3RoO28rKylmb3IodmFyIGk9MDtpPHRbb10ubGVuZ3RoO2krKylZKGUsdFtvXVtpXSk7fShpKSxpfWZ1bmN0aW9uIFkoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrPTMpZS5taW5YPU1hdGgubWluKGUubWluWCx0W3JdKSxlLm1pblk9TWF0aC5taW4oZS5taW5ZLHRbcisxXSksZS5tYXhYPU1hdGgubWF4KGUubWF4WCx0W3JdKSxlLm1heFk9TWF0aC5tYXgoZS5tYXhZLHRbcisxXSk7fWZ1bmN0aW9uIFgoZSx0LHIsbyl7aWYodC5nZW9tZXRyeSl7dmFyIGk9dC5nZW9tZXRyeS5jb29yZGluYXRlcyxuPXQuZ2VvbWV0cnkudHlwZSxzPU1hdGgucG93KHIudG9sZXJhbmNlLygoMTw8ci5tYXhab29tKSpyLmV4dGVudCksMiksYT1bXSxsPXQuaWQ7aWYoci5wcm9tb3RlSWQ/bD10LnByb3BlcnRpZXNbci5wcm9tb3RlSWRdOnIuZ2VuZXJhdGVJZCYmKGw9b3x8MCksXCJQb2ludFwiPT09bilWKGksYSk7ZWxzZSBpZihcIk11bHRpUG9pbnRcIj09PW4pZm9yKHZhciB1PTA7dTxpLmxlbmd0aDt1KyspVihpW3VdLGEpO2Vsc2UgaWYoXCJMaW5lU3RyaW5nXCI9PT1uKUQoaSxhLHMsITEpO2Vsc2UgaWYoXCJNdWx0aUxpbmVTdHJpbmdcIj09PW4pe2lmKHIubGluZU1ldHJpY3Mpe2Zvcih1PTA7dTxpLmxlbmd0aDt1KyspRChpW3VdLGE9W10scywhMSksZS5wdXNoKFcobCxcIkxpbmVTdHJpbmdcIixhLHQucHJvcGVydGllcykpO3JldHVybn0kKGksYSxzLCExKTt9ZWxzZSBpZihcIlBvbHlnb25cIj09PW4pJChpLGEscywhMCk7ZWxzZSB7aWYoXCJNdWx0aVBvbHlnb25cIiE9PW4pe2lmKFwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PT1uKXtmb3IodT0wO3U8dC5nZW9tZXRyeS5nZW9tZXRyaWVzLmxlbmd0aDt1KyspWChlLHtpZDpsLGdlb21ldHJ5OnQuZ2VvbWV0cnkuZ2VvbWV0cmllc1t1XSxwcm9wZXJ0aWVzOnQucHJvcGVydGllc30scixvKTtyZXR1cm59dGhyb3cgbmV3IEVycm9yKFwiSW5wdXQgZGF0YSBpcyBub3QgYSB2YWxpZCBHZW9KU09OIG9iamVjdC5cIil9Zm9yKHU9MDt1PGkubGVuZ3RoO3UrKyl7dmFyIGg9W107JChpW3VdLGgscywhMCksYS5wdXNoKGgpO319ZS5wdXNoKFcobCxuLGEsdC5wcm9wZXJ0aWVzKSk7fX1mdW5jdGlvbiBWKGUsdCl7dC5wdXNoKEEoZVswXSkpLHQucHVzaChCKGVbMV0pKSx0LnB1c2goMCk7fWZ1bmN0aW9uIEQoZSx0LHIsbyl7Zm9yKHZhciBpLG4scz0wLGE9MDthPGUubGVuZ3RoO2ErKyl7dmFyIGw9QShlW2FdWzBdKSx1PUIoZVthXVsxXSk7dC5wdXNoKGwpLHQucHVzaCh1KSx0LnB1c2goMCksYT4wJiYocys9bz8oaSp1LWwqbikvMjpNYXRoLnNxcnQoTWF0aC5wb3cobC1pLDIpK01hdGgucG93KHUtbiwyKSkpLGk9bCxuPXU7fXZhciBoPXQubGVuZ3RoLTM7dFsyXT0xLHoodCwwLGgsciksdFtoKzJdPTEsdC5zaXplPU1hdGguYWJzKHMpLHQuc3RhcnQ9MCx0LmVuZD10LnNpemU7fWZ1bmN0aW9uICQoZSx0LHIsbyl7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBuPVtdO0QoZVtpXSxuLHIsbyksdC5wdXNoKG4pO319ZnVuY3Rpb24gQShlKXtyZXR1cm4gZS8zNjArLjV9ZnVuY3Rpb24gQihlKXt2YXIgdD1NYXRoLnNpbihlKk1hdGguUEkvMTgwKSxyPS41LS4yNSpNYXRoLmxvZygoMSt0KS8oMS10KSkvTWF0aC5QSTtyZXR1cm4gcjwwPzA6cj4xPzE6cn1mdW5jdGlvbiBSKGUsdCxyLG8saSxuLHMsYSl7aWYoby89dCxuPj0oci89dCkmJnM8bylyZXR1cm4gZTtpZihzPHJ8fG4+PW8pcmV0dXJuIG51bGw7Zm9yKHZhciBsPVtdLHU9MDt1PGUubGVuZ3RoO3UrKyl7dmFyIGg9ZVt1XSxjPWguZ2VvbWV0cnksZj1oLnR5cGUscD0wPT09aT9oLm1pblg6aC5taW5ZLGc9MD09PWk/aC5tYXhYOmgubWF4WTtpZihwPj1yJiZnPG8pbC5wdXNoKGgpO2Vsc2UgaWYoIShnPHJ8fHA+PW8pKXt2YXIgZD1bXTtpZihcIlBvaW50XCI9PT1mfHxcIk11bHRpUG9pbnRcIj09PWYpcShjLGQscixvLGkpO2Vsc2UgaWYoXCJMaW5lU3RyaW5nXCI9PT1mKVEoYyxkLHIsbyxpLCExLGEubGluZU1ldHJpY3MpO2Vsc2UgaWYoXCJNdWx0aUxpbmVTdHJpbmdcIj09PWYpSyhjLGQscixvLGksITEpO2Vsc2UgaWYoXCJQb2x5Z29uXCI9PT1mKUsoYyxkLHIsbyxpLCEwKTtlbHNlIGlmKFwiTXVsdGlQb2x5Z29uXCI9PT1mKWZvcih2YXIgbT0wO208Yy5sZW5ndGg7bSsrKXt2YXIgeT1bXTtLKGNbbV0seSxyLG8saSwhMCkseS5sZW5ndGgmJmQucHVzaCh5KTt9aWYoZC5sZW5ndGgpe2lmKGEubGluZU1ldHJpY3MmJlwiTGluZVN0cmluZ1wiPT09Zil7Zm9yKG09MDttPGQubGVuZ3RoO20rKylsLnB1c2goVyhoLmlkLGYsZFttXSxoLnRhZ3MpKTtjb250aW51ZX1cIkxpbmVTdHJpbmdcIiE9PWYmJlwiTXVsdGlMaW5lU3RyaW5nXCIhPT1mfHwoMT09PWQubGVuZ3RoPyhmPVwiTGluZVN0cmluZ1wiLGQ9ZFswXSk6Zj1cIk11bHRpTGluZVN0cmluZ1wiKSxcIlBvaW50XCIhPT1mJiZcIk11bHRpUG9pbnRcIiE9PWZ8fChmPTM9PT1kLmxlbmd0aD9cIlBvaW50XCI6XCJNdWx0aVBvaW50XCIpLGwucHVzaChXKGguaWQsZixkLGgudGFncykpO319fXJldHVybiBsLmxlbmd0aD9sOm51bGx9ZnVuY3Rpb24gcShlLHQscixvLGkpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bis9Myl7dmFyIHM9ZVtuK2ldO3M+PXImJnM8PW8mJih0LnB1c2goZVtuXSksdC5wdXNoKGVbbisxXSksdC5wdXNoKGVbbisyXSkpO319ZnVuY3Rpb24gUShlLHQscixvLGksbixzKXtmb3IodmFyIGEsbCx1PVUoZSksaD0wPT09aT9lZTp0ZSxjPWUuc3RhcnQsZj0wO2Y8ZS5sZW5ndGgtMztmKz0zKXt2YXIgcD1lW2ZdLGc9ZVtmKzFdLGQ9ZVtmKzJdLG09ZVtmKzNdLHk9ZVtmKzRdLHY9MD09PWk/cDpnLHg9MD09PWk/bTp5LHc9ITE7cyYmKGE9TWF0aC5zcXJ0KE1hdGgucG93KHAtbSwyKStNYXRoLnBvdyhnLXksMikpKSx2PHI/eD5yJiYobD1oKHUscCxnLG0seSxyKSxzJiYodS5zdGFydD1jK2EqbCkpOnY+bz94PG8mJihsPWgodSxwLGcsbSx5LG8pLHMmJih1LnN0YXJ0PWMrYSpsKSk6SCh1LHAsZyxkKSx4PHImJnY+PXImJihsPWgodSxwLGcsbSx5LHIpLHc9ITApLHg+byYmdjw9byYmKGw9aCh1LHAsZyxtLHksbyksdz0hMCksIW4mJncmJihzJiYodS5lbmQ9YythKmwpLHQucHVzaCh1KSx1PVUoZSkpLHMmJihjKz1hKTt9dmFyIFM9ZS5sZW5ndGgtMztwPWVbU10sZz1lW1MrMV0sZD1lW1MrMl0sKHY9MD09PWk/cDpnKT49ciYmdjw9byYmSCh1LHAsZyxkKSxTPXUubGVuZ3RoLTMsbiYmUz49MyYmKHVbU10hPT11WzBdfHx1W1MrMV0hPT11WzFdKSYmSCh1LHVbMF0sdVsxXSx1WzJdKSx1Lmxlbmd0aCYmdC5wdXNoKHUpO31mdW5jdGlvbiBVKGUpe3ZhciB0PVtdO3JldHVybiB0LnNpemU9ZS5zaXplLHQuc3RhcnQ9ZS5zdGFydCx0LmVuZD1lLmVuZCx0fWZ1bmN0aW9uIEsoZSx0LHIsbyxpLG4pe2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKVEoZVtzXSx0LHIsbyxpLG4sITEpO31mdW5jdGlvbiBIKGUsdCxyLG8pe2UucHVzaCh0KSxlLnB1c2gociksZS5wdXNoKG8pO31mdW5jdGlvbiBlZShlLHQscixvLGksbil7dmFyIHM9KG4tdCkvKG8tdCk7cmV0dXJuIGUucHVzaChuKSxlLnB1c2gocisoaS1yKSpzKSxlLnB1c2goMSksc31mdW5jdGlvbiB0ZShlLHQscixvLGksbil7dmFyIHM9KG4tcikvKGktcik7cmV0dXJuIGUucHVzaCh0KyhvLXQpKnMpLGUucHVzaChuKSxlLnB1c2goMSksc31mdW5jdGlvbiByZShlLHQpe2Zvcih2YXIgcj1bXSxvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciBpLG49ZVtvXSxzPW4udHlwZTtpZihcIlBvaW50XCI9PT1zfHxcIk11bHRpUG9pbnRcIj09PXN8fFwiTGluZVN0cmluZ1wiPT09cylpPW9lKG4uZ2VvbWV0cnksdCk7ZWxzZSBpZihcIk11bHRpTGluZVN0cmluZ1wiPT09c3x8XCJQb2x5Z29uXCI9PT1zKXtpPVtdO2Zvcih2YXIgYT0wO2E8bi5nZW9tZXRyeS5sZW5ndGg7YSsrKWkucHVzaChvZShuLmdlb21ldHJ5W2FdLHQpKTt9ZWxzZSBpZihcIk11bHRpUG9seWdvblwiPT09cylmb3IoaT1bXSxhPTA7YTxuLmdlb21ldHJ5Lmxlbmd0aDthKyspe2Zvcih2YXIgbD1bXSx1PTA7dTxuLmdlb21ldHJ5W2FdLmxlbmd0aDt1KyspbC5wdXNoKG9lKG4uZ2VvbWV0cnlbYV1bdV0sdCkpO2kucHVzaChsKTt9ci5wdXNoKFcobi5pZCxzLGksbi50YWdzKSk7fXJldHVybiByfWZ1bmN0aW9uIG9lKGUsdCl7dmFyIHI9W107ci5zaXplPWUuc2l6ZSx2b2lkIDAhPT1lLnN0YXJ0JiYoci5zdGFydD1lLnN0YXJ0LHIuZW5kPWUuZW5kKTtmb3IodmFyIG89MDtvPGUubGVuZ3RoO28rPTMpci5wdXNoKGVbb10rdCxlW28rMV0sZVtvKzJdKTtyZXR1cm4gcn1mdW5jdGlvbiBpZShlLHQpe2lmKGUudHJhbnNmb3JtZWQpcmV0dXJuIGU7dmFyIHIsbyxpLG49MTw8ZS56LHM9ZS54LGE9ZS55O2ZvcihyPTA7cjxlLmZlYXR1cmVzLmxlbmd0aDtyKyspe3ZhciBsPWUuZmVhdHVyZXNbcl0sdT1sLmdlb21ldHJ5LGg9bC50eXBlO2lmKGwuZ2VvbWV0cnk9W10sMT09PWgpZm9yKG89MDtvPHUubGVuZ3RoO28rPTIpbC5nZW9tZXRyeS5wdXNoKG5lKHVbb10sdVtvKzFdLHQsbixzLGEpKTtlbHNlIGZvcihvPTA7bzx1Lmxlbmd0aDtvKyspe3ZhciBjPVtdO2ZvcihpPTA7aTx1W29dLmxlbmd0aDtpKz0yKWMucHVzaChuZSh1W29dW2ldLHVbb11baSsxXSx0LG4scyxhKSk7bC5nZW9tZXRyeS5wdXNoKGMpO319cmV0dXJuIGUudHJhbnNmb3JtZWQ9ITAsZX1mdW5jdGlvbiBuZShlLHQscixvLGksbil7cmV0dXJuIFtNYXRoLnJvdW5kKHIqKGUqby1pKSksTWF0aC5yb3VuZChyKih0Km8tbikpXX1mdW5jdGlvbiBzZShlLHQscixvLGkpe2Zvcih2YXIgbj10PT09aS5tYXhab29tPzA6aS50b2xlcmFuY2UvKCgxPDx0KSppLmV4dGVudCkscz17ZmVhdHVyZXM6W10sbnVtUG9pbnRzOjAsbnVtU2ltcGxpZmllZDowLG51bUZlYXR1cmVzOjAsc291cmNlOm51bGwseDpyLHk6byx6OnQsdHJhbnNmb3JtZWQ6ITEsbWluWDoyLG1pblk6MSxtYXhYOi0xLG1heFk6MH0sYT0wO2E8ZS5sZW5ndGg7YSsrKXtzLm51bUZlYXR1cmVzKyssYWUocyxlW2FdLG4saSk7dmFyIGw9ZVthXS5taW5YLHU9ZVthXS5taW5ZLGg9ZVthXS5tYXhYLGM9ZVthXS5tYXhZO2w8cy5taW5YJiYocy5taW5YPWwpLHU8cy5taW5ZJiYocy5taW5ZPXUpLGg+cy5tYXhYJiYocy5tYXhYPWgpLGM+cy5tYXhZJiYocy5tYXhZPWMpO31yZXR1cm4gc31mdW5jdGlvbiBhZShlLHQscixvKXt2YXIgaT10Lmdlb21ldHJ5LG49dC50eXBlLHM9W107aWYoXCJQb2ludFwiPT09bnx8XCJNdWx0aVBvaW50XCI9PT1uKWZvcih2YXIgYT0wO2E8aS5sZW5ndGg7YSs9MylzLnB1c2goaVthXSkscy5wdXNoKGlbYSsxXSksZS5udW1Qb2ludHMrKyxlLm51bVNpbXBsaWZpZWQrKztlbHNlIGlmKFwiTGluZVN0cmluZ1wiPT09bilsZShzLGksZSxyLCExLCExKTtlbHNlIGlmKFwiTXVsdGlMaW5lU3RyaW5nXCI9PT1ufHxcIlBvbHlnb25cIj09PW4pZm9yKGE9MDthPGkubGVuZ3RoO2ErKylsZShzLGlbYV0sZSxyLFwiUG9seWdvblwiPT09biwwPT09YSk7ZWxzZSBpZihcIk11bHRpUG9seWdvblwiPT09bilmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTtmb3IoYT0wO2E8dS5sZW5ndGg7YSsrKWxlKHMsdVthXSxlLHIsITAsMD09PWEpO31pZihzLmxlbmd0aCl7dmFyIGg9dC50YWdzfHxudWxsO2lmKFwiTGluZVN0cmluZ1wiPT09biYmby5saW5lTWV0cmljcyl7Zm9yKHZhciBjIGluIGg9e30sdC50YWdzKWhbY109dC50YWdzW2NdO2gubWFwYm94X2NsaXBfc3RhcnQ9aS5zdGFydC9pLnNpemUsaC5tYXBib3hfY2xpcF9lbmQ9aS5lbmQvaS5zaXplO312YXIgZj17Z2VvbWV0cnk6cyx0eXBlOlwiUG9seWdvblwiPT09bnx8XCJNdWx0aVBvbHlnb25cIj09PW4/MzpcIkxpbmVTdHJpbmdcIj09PW58fFwiTXVsdGlMaW5lU3RyaW5nXCI9PT1uPzI6MSx0YWdzOmh9O251bGwhPT10LmlkJiYoZi5pZD10LmlkKSxlLmZlYXR1cmVzLnB1c2goZik7fX1mdW5jdGlvbiBsZShlLHQscixvLGksbil7dmFyIHM9bypvO2lmKG8+MCYmdC5zaXplPChpP3M6bykpci5udW1Qb2ludHMrPXQubGVuZ3RoLzM7ZWxzZSB7Zm9yKHZhciBhPVtdLGw9MDtsPHQubGVuZ3RoO2wrPTMpKDA9PT1vfHx0W2wrMl0+cykmJihyLm51bVNpbXBsaWZpZWQrKyxhLnB1c2godFtsXSksYS5wdXNoKHRbbCsxXSkpLHIubnVtUG9pbnRzKys7aSYmZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxvPTAsaT1lLmxlbmd0aCxuPWktMjtvPGk7bj1vLG8rPTIpcis9KGVbb10tZVtuXSkqKGVbbysxXStlW24rMV0pO2lmKHI+MD09PXQpZm9yKG89MCxpPWUubGVuZ3RoO288aS8yO28rPTIpe3ZhciBzPWVbb10sYT1lW28rMV07ZVtvXT1lW2ktMi1vXSxlW28rMV09ZVtpLTEtb10sZVtpLTItb109cyxlW2ktMS1vXT1hO319KGEsbiksZS5wdXNoKGEpO319ZnVuY3Rpb24gdWUoZSx0KXt2YXIgcj0odD10aGlzLm9wdGlvbnM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCllW3JdPXRbcl07cmV0dXJuIGV9KE9iamVjdC5jcmVhdGUodGhpcy5vcHRpb25zKSx0KSkuZGVidWc7aWYociYmY29uc29sZS50aW1lKFwicHJlcHJvY2VzcyBkYXRhXCIpLHQubWF4Wm9vbTwwfHx0Lm1heFpvb20+MjQpdGhyb3cgbmV3IEVycm9yKFwibWF4Wm9vbSBzaG91bGQgYmUgaW4gdGhlIDAtMjQgcmFuZ2VcIik7aWYodC5wcm9tb3RlSWQmJnQuZ2VuZXJhdGVJZCl0aHJvdyBuZXcgRXJyb3IoXCJwcm9tb3RlSWQgYW5kIGdlbmVyYXRlSWQgY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuXCIpO3ZhciBvPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W107aWYoXCJGZWF0dXJlQ29sbGVjdGlvblwiPT09ZS50eXBlKWZvcih2YXIgbz0wO288ZS5mZWF0dXJlcy5sZW5ndGg7bysrKVgocixlLmZlYXR1cmVzW29dLHQsbyk7ZWxzZSBYKHIsXCJGZWF0dXJlXCI9PT1lLnR5cGU/ZTp7Z2VvbWV0cnk6ZX0sdCk7cmV0dXJuIHJ9KGUsdCk7dGhpcy50aWxlcz17fSx0aGlzLnRpbGVDb29yZHM9W10sciYmKGNvbnNvbGUudGltZUVuZChcInByZXByb2Nlc3MgZGF0YVwiKSxjb25zb2xlLmxvZyhcImluZGV4OiBtYXhab29tOiAlZCwgbWF4UG9pbnRzOiAlZFwiLHQuaW5kZXhNYXhab29tLHQuaW5kZXhNYXhQb2ludHMpLGNvbnNvbGUudGltZShcImdlbmVyYXRlIHRpbGVzXCIpLHRoaXMuc3RhdHM9e30sdGhpcy50b3RhbD0wKSxvPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5idWZmZXIvdC5leHRlbnQsbz1lLGk9UihlLDEsLTEtcixyLDAsLTEsMix0KSxuPVIoZSwxLDEtciwyK3IsMCwtMSwyLHQpO3JldHVybiAoaXx8bikmJihvPVIoZSwxLC1yLDErciwwLC0xLDIsdCl8fFtdLGkmJihvPXJlKGksMSkuY29uY2F0KG8pKSxuJiYobz1vLmNvbmNhdChyZShuLC0xKSkpKSxvfShvLHQpLG8ubGVuZ3RoJiZ0aGlzLnNwbGl0VGlsZShvLDAsMCwwKSxyJiYoby5sZW5ndGgmJmNvbnNvbGUubG9nKFwiZmVhdHVyZXM6ICVkLCBwb2ludHM6ICVkXCIsdGhpcy50aWxlc1swXS5udW1GZWF0dXJlcyx0aGlzLnRpbGVzWzBdLm51bVBvaW50cyksY29uc29sZS50aW1lRW5kKFwiZ2VuZXJhdGUgdGlsZXNcIiksY29uc29sZS5sb2coXCJ0aWxlcyBnZW5lcmF0ZWQ6XCIsdGhpcy50b3RhbCxKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRzKSkpO31mdW5jdGlvbiBoZShlLHQscil7cmV0dXJuIDMyKigoMTw8ZSkqcit0KStlfWZ1bmN0aW9uIGNlKHQscil7Y29uc3Qgbz10LnRpbGVJRC5jYW5vbmljYWw7aWYoIXRoaXMuX2dlb0pTT05JbmRleClyZXR1cm4gcihudWxsLG51bGwpO2NvbnN0IGk9dGhpcy5fZ2VvSlNPTkluZGV4LmdldFRpbGUoby56LG8ueCxvLnkpO2lmKCFpKXJldHVybiByKG51bGwsbnVsbCk7Y29uc3Qgbj1uZXcgY2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5sYXllcnM9e19nZW9qc29uVGlsZUxheWVyOnRoaXN9LHRoaXMubmFtZT1cIl9nZW9qc29uVGlsZUxheWVyXCIsdGhpcy5leHRlbnQ9ZS5FWFRFTlQsdGhpcy5sZW5ndGg9dC5sZW5ndGgsdGhpcy5fZmVhdHVyZXM9dDt9ZmVhdHVyZSh0KXtyZXR1cm4gbmV3IGNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX2ZlYXR1cmU9dCx0aGlzLmV4dGVudD1lLkVYVEVOVCx0aGlzLnR5cGU9dC50eXBlLHRoaXMucHJvcGVydGllcz10LnRhZ3MsXCJpZFwiaW4gdCYmIWlzTmFOKHQuaWQpJiYodGhpcy5pZD1wYXJzZUludCh0LmlkLDEwKSk7fWxvYWRHZW9tZXRyeSgpe2lmKDE9PT10aGlzLl9mZWF0dXJlLnR5cGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHIgb2YgdGhpcy5fZmVhdHVyZS5nZW9tZXRyeSl0LnB1c2goW25ldyBlLlBvaW50KHJbMF0sclsxXSldKTtyZXR1cm4gdH17Y29uc3QgdD1bXTtmb3IoY29uc3QgciBvZiB0aGlzLl9mZWF0dXJlLmdlb21ldHJ5KXtjb25zdCBvPVtdO2Zvcihjb25zdCB0IG9mIHIpby5wdXNoKG5ldyBlLlBvaW50KHRbMF0sdFsxXSkpO3QucHVzaChvKTt9cmV0dXJuIHR9fXRvR2VvSlNPTihlLHQscil7cmV0dXJuIGwuY2FsbCh0aGlzLGUsdCxyKX19KHRoaXMuX2ZlYXR1cmVzW3RdKX19KGkuZmVhdHVyZXMpO2xldCBzPVQobik7MD09PXMuYnl0ZU9mZnNldCYmcy5ieXRlTGVuZ3RoPT09cy5idWZmZXIuYnl0ZUxlbmd0aHx8KHM9bmV3IFVpbnQ4QXJyYXkocykpLHIobnVsbCx7dmVjdG9yVGlsZTpuLHJhd0RhdGE6cy5idWZmZXJ9KTt9dWUucHJvdG90eXBlLm9wdGlvbnM9e21heFpvb206MTQsaW5kZXhNYXhab29tOjUsaW5kZXhNYXhQb2ludHM6MWU1LHRvbGVyYW5jZTozLGV4dGVudDo0MDk2LGJ1ZmZlcjo2NCxsaW5lTWV0cmljczohMSxwcm9tb3RlSWQ6bnVsbCxnZW5lcmF0ZUlkOiExLGRlYnVnOjB9LHVlLnByb3RvdHlwZS5zcGxpdFRpbGU9ZnVuY3Rpb24oZSx0LHIsbyxpLG4scyl7Zm9yKHZhciBhPVtlLHQscixvXSxsPXRoaXMub3B0aW9ucyx1PWwuZGVidWc7YS5sZW5ndGg7KXtvPWEucG9wKCkscj1hLnBvcCgpLHQ9YS5wb3AoKSxlPWEucG9wKCk7dmFyIGg9MTw8dCxjPWhlKHQscixvKSxmPXRoaXMudGlsZXNbY107aWYoIWYmJih1PjEmJmNvbnNvbGUudGltZShcImNyZWF0aW9uXCIpLGY9dGhpcy50aWxlc1tjXT1zZShlLHQscixvLGwpLHRoaXMudGlsZUNvb3Jkcy5wdXNoKHt6OnQseDpyLHk6b30pLHUpKXt1PjEmJihjb25zb2xlLmxvZyhcInRpbGUgeiVkLSVkLSVkIChmZWF0dXJlczogJWQsIHBvaW50czogJWQsIHNpbXBsaWZpZWQ6ICVkKVwiLHQscixvLGYubnVtRmVhdHVyZXMsZi5udW1Qb2ludHMsZi5udW1TaW1wbGlmaWVkKSxjb25zb2xlLnRpbWVFbmQoXCJjcmVhdGlvblwiKSk7dmFyIHA9XCJ6XCIrdDt0aGlzLnN0YXRzW3BdPSh0aGlzLnN0YXRzW3BdfHwwKSsxLHRoaXMudG90YWwrKzt9aWYoZi5zb3VyY2U9ZSxpKXtpZih0PT09bC5tYXhab29tfHx0PT09aSljb250aW51ZTt2YXIgZz0xPDxpLXQ7aWYociE9PU1hdGguZmxvb3Iobi9nKXx8byE9PU1hdGguZmxvb3Iocy9nKSljb250aW51ZX1lbHNlIGlmKHQ9PT1sLmluZGV4TWF4Wm9vbXx8Zi5udW1Qb2ludHM8PWwuaW5kZXhNYXhQb2ludHMpY29udGludWU7aWYoZi5zb3VyY2U9bnVsbCwwIT09ZS5sZW5ndGgpe3U+MSYmY29uc29sZS50aW1lKFwiY2xpcHBpbmdcIik7dmFyIGQsbSx5LHYseCx3LFM9LjUqbC5idWZmZXIvbC5leHRlbnQsTT0uNS1TLFA9LjUrUyxiPTErUztkPW09eT12PW51bGwseD1SKGUsaCxyLVMscitQLDAsZi5taW5YLGYubWF4WCxsKSx3PVIoZSxoLHIrTSxyK2IsMCxmLm1pblgsZi5tYXhYLGwpLGU9bnVsbCx4JiYoZD1SKHgsaCxvLVMsbytQLDEsZi5taW5ZLGYubWF4WSxsKSxtPVIoeCxoLG8rTSxvK2IsMSxmLm1pblksZi5tYXhZLGwpLHg9bnVsbCksdyYmKHk9Uih3LGgsby1TLG8rUCwxLGYubWluWSxmLm1heFksbCksdj1SKHcsaCxvK00sbytiLDEsZi5taW5ZLGYubWF4WSxsKSx3PW51bGwpLHU+MSYmY29uc29sZS50aW1lRW5kKFwiY2xpcHBpbmdcIiksYS5wdXNoKGR8fFtdLHQrMSwyKnIsMipvKSxhLnB1c2gobXx8W10sdCsxLDIqciwyKm8rMSksYS5wdXNoKHl8fFtdLHQrMSwyKnIrMSwyKm8pLGEucHVzaCh2fHxbXSx0KzEsMipyKzEsMipvKzEpO319fSx1ZS5wcm90b3R5cGUuZ2V0VGlsZT1mdW5jdGlvbihlLHQscil7dmFyIG89dGhpcy5vcHRpb25zLGk9by5leHRlbnQsbj1vLmRlYnVnO2lmKGU8MHx8ZT4yNClyZXR1cm4gbnVsbDt2YXIgcz0xPDxlLGE9aGUoZSx0PSh0JXMrcyklcyxyKTtpZih0aGlzLnRpbGVzW2FdKXJldHVybiBpZSh0aGlzLnRpbGVzW2FdLGkpO24+MSYmY29uc29sZS5sb2coXCJkcmlsbGluZyBkb3duIHRvIHolZC0lZC0lZFwiLGUsdCxyKTtmb3IodmFyIGwsdT1lLGg9dCxjPXI7IWwmJnU+MDspdS0tLGg9TWF0aC5mbG9vcihoLzIpLGM9TWF0aC5mbG9vcihjLzIpLGw9dGhpcy50aWxlc1toZSh1LGgsYyldO3JldHVybiBsJiZsLnNvdXJjZT8obj4xJiZjb25zb2xlLmxvZyhcImZvdW5kIHBhcmVudCB0aWxlIHolZC0lZC0lZFwiLHUsaCxjKSxuPjEmJmNvbnNvbGUudGltZShcImRyaWxsaW5nIGRvd25cIiksdGhpcy5zcGxpdFRpbGUobC5zb3VyY2UsdSxoLGMsZSx0LHIpLG4+MSYmY29uc29sZS50aW1lRW5kKFwiZHJpbGxpbmcgZG93blwiKSx0aGlzLnRpbGVzW2FdP2llKHRoaXMudGlsZXNbYV0saSk6bnVsbCk6bnVsbH07Y2xhc3MgZmUgZXh0ZW5kcyBlLlZlY3RvclRpbGVXb3JrZXJTb3VyY2V7Y29uc3RydWN0b3IoZSx0LHIsbyxpKXtzdXBlcihlLHQscixvLGNlKSxpJiYodGhpcy5sb2FkR2VvSlNPTj1pKTt9bG9hZERhdGEodCxyKXtjb25zdCBvPXQmJnQucmVxdWVzdCxpPW8mJm8uY29sbGVjdFJlc291cmNlVGltaW5nO3RoaXMubG9hZEdlb0pTT04odCwoKG4scyk9PntpZihufHwhcylyZXR1cm4gcihuKTtpZihcIm9iamVjdFwiIT10eXBlb2YgcylyZXR1cm4gcihuZXcgRXJyb3IoYElucHV0IGRhdGEgZ2l2ZW4gdG8gJyR7dC5zb3VyY2V9JyBpcyBub3QgYSB2YWxpZCBHZW9KU09OIG9iamVjdC5gKSk7e2EocywhMCk7dHJ5e2lmKHQuZmlsdGVyKXtjb25zdCByPWUuY3JlYXRlRXhwcmVzc2lvbih0LmZpbHRlcix7dHlwZTpcImJvb2xlYW5cIixcInByb3BlcnR5LXR5cGVcIjpcImRhdGEtZHJpdmVuXCIsb3ZlcnJpZGFibGU6ITEsdHJhbnNpdGlvbjohMX0pO2lmKFwiZXJyb3JcIj09PXIucmVzdWx0KXRocm93IG5ldyBFcnJvcihyLnZhbHVlLm1hcCgoZT0+YCR7ZS5rZXl9OiAke2UubWVzc2FnZX1gKSkuam9pbihcIiwgXCIpKTtjb25zdCBvPXMuZmVhdHVyZXMuZmlsdGVyKChlPT5yLnZhbHVlLmV2YWx1YXRlKHt6b29tOjB9LGUpKSk7cz17dHlwZTpcIkZlYXR1cmVDb2xsZWN0aW9uXCIsZmVhdHVyZXM6b307fXRoaXMuX2dlb0pTT05JbmRleD10LmNsdXN0ZXI/bmV3IEUoZnVuY3Rpb24oe3N1cGVyY2x1c3Rlck9wdGlvbnM6dCxjbHVzdGVyUHJvcGVydGllczpyfSl7aWYoIXJ8fCF0KXJldHVybiB0O2NvbnN0IG89e30saT17fSxuPXthY2N1bXVsYXRlZDpudWxsLHpvb206MH0scz17cHJvcGVydGllczpudWxsfSxhPU9iamVjdC5rZXlzKHIpO2Zvcihjb25zdCB0IG9mIGEpe2NvbnN0W24sc109clt0XSxhPWUuY3JlYXRlRXhwcmVzc2lvbihzKSxsPWUuY3JlYXRlRXhwcmVzc2lvbihcInN0cmluZ1wiPT10eXBlb2Ygbj9bbixbXCJhY2N1bXVsYXRlZFwiXSxbXCJnZXRcIix0XV06bik7b1t0XT1hLnZhbHVlLGlbdF09bC52YWx1ZTt9cmV0dXJuIHQubWFwPWU9PntzLnByb3BlcnRpZXM9ZTtjb25zdCB0PXt9O2Zvcihjb25zdCBlIG9mIGEpdFtlXT1vW2VdLmV2YWx1YXRlKG4scyk7cmV0dXJuIHR9LHQucmVkdWNlPShlLHQpPT57cy5wcm9wZXJ0aWVzPXQ7Zm9yKGNvbnN0IHQgb2YgYSluLmFjY3VtdWxhdGVkPWVbdF0sZVt0XT1pW3RdLmV2YWx1YXRlKG4scyk7fSx0fSh0KSkubG9hZChzLmZlYXR1cmVzKTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgdWUoZSx0KX0ocyx0Lmdlb2pzb25WdE9wdGlvbnMpO31jYXRjaChuKXtyZXR1cm4gcihuKX10aGlzLmxvYWRlZD17fTtjb25zdCBsPXt9O2lmKGkpe2NvbnN0IHI9ZS5nZXRQZXJmb3JtYW5jZU1lYXN1cmVtZW50KG8pO3ImJihsLnJlc291cmNlVGltaW5nPXt9LGwucmVzb3VyY2VUaW1pbmdbdC5zb3VyY2VdPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocikpKTt9cihudWxsLGwpO319KSk7fXJlbG9hZFRpbGUoZSx0KXtjb25zdCByPXRoaXMubG9hZGVkO3JldHVybiByJiZyW2UudWlkXT9zdXBlci5yZWxvYWRUaWxlKGUsdCk6dGhpcy5sb2FkVGlsZShlLHQpfWxvYWRHZW9KU09OKHQscil7aWYodC5yZXF1ZXN0KWUuZ2V0SlNPTih0LnJlcXVlc3Qscik7ZWxzZSB7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQuZGF0YSlyZXR1cm4gcihuZXcgRXJyb3IoYElucHV0IGRhdGEgZ2l2ZW4gdG8gJyR7dC5zb3VyY2V9JyBpcyBub3QgYSB2YWxpZCBHZW9KU09OIG9iamVjdC5gKSk7dHJ5e3JldHVybiByKG51bGwsSlNPTi5wYXJzZSh0LmRhdGEpKX1jYXRjaChlKXtyZXR1cm4gcihuZXcgRXJyb3IoYElucHV0IGRhdGEgZ2l2ZW4gdG8gJyR7dC5zb3VyY2V9JyBpcyBub3QgYSB2YWxpZCBHZW9KU09OIG9iamVjdC5gKSl9fX1nZXRDbHVzdGVyRXhwYW5zaW9uWm9vbShlLHQpe3RyeXt0KG51bGwsdGhpcy5fZ2VvSlNPTkluZGV4LmdldENsdXN0ZXJFeHBhbnNpb25ab29tKGUuY2x1c3RlcklkKSk7fWNhdGNoKGUpe3QoZSk7fX1nZXRDbHVzdGVyQ2hpbGRyZW4oZSx0KXt0cnl7dChudWxsLHRoaXMuX2dlb0pTT05JbmRleC5nZXRDaGlsZHJlbihlLmNsdXN0ZXJJZCkpO31jYXRjaChlKXt0KGUpO319Z2V0Q2x1c3RlckxlYXZlcyhlLHQpe3RyeXt0KG51bGwsdGhpcy5fZ2VvSlNPTkluZGV4LmdldExlYXZlcyhlLmNsdXN0ZXJJZCxlLmxpbWl0LGUub2Zmc2V0KSk7fWNhdGNoKGUpe3QoZSk7fX19Y2xhc3MgcGV7Y29uc3RydWN0b3IodCl7dGhpcy5zZWxmPXQsdGhpcy5hY3Rvcj1uZXcgZS5BY3Rvcih0LHRoaXMpLHRoaXMubGF5ZXJJbmRleGVzPXt9LHRoaXMuYXZhaWxhYmxlSW1hZ2VzPXt9LHRoaXMuaXNTcHJpdGVMb2FkZWQ9e30sdGhpcy5wcm9qZWN0aW9ucz17fSx0aGlzLmRlZmF1bHRQcm9qZWN0aW9uPWUuZ2V0UHJvamVjdGlvbih7bmFtZTpcIm1lcmNhdG9yXCJ9KSx0aGlzLndvcmtlclNvdXJjZVR5cGVzPXt2ZWN0b3I6ZS5WZWN0b3JUaWxlV29ya2VyU291cmNlLGdlb2pzb246ZmV9LHRoaXMud29ya2VyU291cmNlcz17fSx0aGlzLmRlbVdvcmtlclNvdXJjZXM9e30sdGhpcy5zZWxmLnJlZ2lzdGVyV29ya2VyU291cmNlPShlLHQpPT57aWYodGhpcy53b3JrZXJTb3VyY2VUeXBlc1tlXSl0aHJvdyBuZXcgRXJyb3IoYFdvcmtlciBzb3VyY2Ugd2l0aCBuYW1lIFwiJHtlfVwiIGFscmVhZHkgcmVnaXN0ZXJlZC5gKTt0aGlzLndvcmtlclNvdXJjZVR5cGVzW2VdPXQ7fSx0aGlzLnNlbGYucmVnaXN0ZXJSVExUZXh0UGx1Z2luPXQ9PntpZihlLnBsdWdpbi5pc1BhcnNlZCgpKXRocm93IG5ldyBFcnJvcihcIlJUTCB0ZXh0IHBsdWdpbiBhbHJlYWR5IHJlZ2lzdGVyZWQuXCIpO2UucGx1Z2luLmFwcGx5QXJhYmljU2hhcGluZz10LmFwcGx5QXJhYmljU2hhcGluZyxlLnBsdWdpbi5wcm9jZXNzQmlkaXJlY3Rpb25hbFRleHQ9dC5wcm9jZXNzQmlkaXJlY3Rpb25hbFRleHQsZS5wbHVnaW4ucHJvY2Vzc1N0eWxlZEJpZGlyZWN0aW9uYWxUZXh0PXQucHJvY2Vzc1N0eWxlZEJpZGlyZWN0aW9uYWxUZXh0O307fWNsZWFyQ2FjaGVzKGUsdCxyKXtkZWxldGUgdGhpcy5sYXllckluZGV4ZXNbZV0sZGVsZXRlIHRoaXMuYXZhaWxhYmxlSW1hZ2VzW2VdLGRlbGV0ZSB0aGlzLndvcmtlclNvdXJjZXNbZV0sZGVsZXRlIHRoaXMuZGVtV29ya2VyU291cmNlc1tlXSxyKCk7fWNoZWNrSWZSZWFkeShlLHQscil7cigpO31zZXRSZWZlcnJlcihlLHQpe3RoaXMucmVmZXJyZXI9dDt9c3ByaXRlTG9hZGVkKHQscil7dGhpcy5pc1Nwcml0ZUxvYWRlZFt0XT1yO2Zvcihjb25zdCBvIGluIHRoaXMud29ya2VyU291cmNlc1t0XSl7Y29uc3QgaT10aGlzLndvcmtlclNvdXJjZXNbdF1bb107Zm9yKGNvbnN0IHQgaW4gaSlpW3RdaW5zdGFuY2VvZiBlLlZlY3RvclRpbGVXb3JrZXJTb3VyY2UmJihpW3RdLmlzU3ByaXRlTG9hZGVkPXIsaVt0XS5maXJlKG5ldyBlLkV2ZW50KFwiaXNTcHJpdGVMb2FkZWRcIikpKTt9fXNldEltYWdlcyhlLHQscil7dGhpcy5hdmFpbGFibGVJbWFnZXNbZV09dDtmb3IoY29uc3QgciBpbiB0aGlzLndvcmtlclNvdXJjZXNbZV0pe2NvbnN0IG89dGhpcy53b3JrZXJTb3VyY2VzW2VdW3JdO2Zvcihjb25zdCBlIGluIG8pb1tlXS5hdmFpbGFibGVJbWFnZXM9dDt9cigpO31lbmFibGVUZXJyYWluKGUsdCxyKXt0aGlzLnRlcnJhaW49dCxyKCk7fXNldFByb2plY3Rpb24odCxyKXt0aGlzLnByb2plY3Rpb25zW3RdPWUuZ2V0UHJvamVjdGlvbihyKTt9c2V0TGF5ZXJzKGUsdCxyKXt0aGlzLmdldExheWVySW5kZXgoZSkucmVwbGFjZSh0KSxyKCk7fXVwZGF0ZUxheWVycyhlLHQscil7dGhpcy5nZXRMYXllckluZGV4KGUpLnVwZGF0ZSh0LmxheWVycyx0LnJlbW92ZWRJZHMpLHIoKTt9bG9hZFRpbGUodCxyLG8pe2NvbnN0IGk9dGhpcy5lbmFibGVUZXJyYWluP2UuZXh0ZW5kKHtlbmFibGVUZXJyYWluOnRoaXMudGVycmFpbn0scik6cjtpLnByb2plY3Rpb249dGhpcy5wcm9qZWN0aW9uc1t0XXx8dGhpcy5kZWZhdWx0UHJvamVjdGlvbix0aGlzLmdldFdvcmtlclNvdXJjZSh0LHIudHlwZSxyLnNvdXJjZSkubG9hZFRpbGUoaSxvKTt9bG9hZERFTVRpbGUodCxyLG8pe2NvbnN0IGk9dGhpcy5lbmFibGVUZXJyYWluP2UuZXh0ZW5kKHtidWlsZFF1YWRUcmVlOnRoaXMudGVycmFpbn0scik6cjt0aGlzLmdldERFTVdvcmtlclNvdXJjZSh0LHIuc291cmNlKS5sb2FkVGlsZShpLG8pO31yZWxvYWRUaWxlKHQscixvKXtjb25zdCBpPXRoaXMuZW5hYmxlVGVycmFpbj9lLmV4dGVuZCh7ZW5hYmxlVGVycmFpbjp0aGlzLnRlcnJhaW59LHIpOnI7aS5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnNbdF18fHRoaXMuZGVmYXVsdFByb2plY3Rpb24sdGhpcy5nZXRXb3JrZXJTb3VyY2UodCxyLnR5cGUsci5zb3VyY2UpLnJlbG9hZFRpbGUoaSxvKTt9YWJvcnRUaWxlKGUsdCxyKXt0aGlzLmdldFdvcmtlclNvdXJjZShlLHQudHlwZSx0LnNvdXJjZSkuYWJvcnRUaWxlKHQscik7fXJlbW92ZVRpbGUoZSx0LHIpe3RoaXMuZ2V0V29ya2VyU291cmNlKGUsdC50eXBlLHQuc291cmNlKS5yZW1vdmVUaWxlKHQscik7fXJlbW92ZVNvdXJjZShlLHQscil7aWYoIXRoaXMud29ya2VyU291cmNlc1tlXXx8IXRoaXMud29ya2VyU291cmNlc1tlXVt0LnR5cGVdfHwhdGhpcy53b3JrZXJTb3VyY2VzW2VdW3QudHlwZV1bdC5zb3VyY2VdKXJldHVybjtjb25zdCBvPXRoaXMud29ya2VyU291cmNlc1tlXVt0LnR5cGVdW3Quc291cmNlXTtkZWxldGUgdGhpcy53b3JrZXJTb3VyY2VzW2VdW3QudHlwZV1bdC5zb3VyY2VdLHZvaWQgMCE9PW8ucmVtb3ZlU291cmNlP28ucmVtb3ZlU291cmNlKHQscik6cigpO31sb2FkV29ya2VyU291cmNlKGUsdCxyKXt0cnl7dGhpcy5zZWxmLmltcG9ydFNjcmlwdHModC51cmwpLHIoKTt9Y2F0Y2goZSl7cihlLnRvU3RyaW5nKCkpO319c3luY1JUTFBsdWdpblN0YXRlKHQscixvKXt0cnl7ZS5wbHVnaW4uc2V0U3RhdGUocik7Y29uc3QgdD1lLnBsdWdpbi5nZXRQbHVnaW5VUkwoKTtpZihlLnBsdWdpbi5pc0xvYWRlZCgpJiYhZS5wbHVnaW4uaXNQYXJzZWQoKSYmbnVsbCE9dCl7dGhpcy5zZWxmLmltcG9ydFNjcmlwdHModCk7Y29uc3Qgcj1lLnBsdWdpbi5pc1BhcnNlZCgpO28ocj92b2lkIDA6bmV3IEVycm9yKGBSVEwgVGV4dCBQbHVnaW4gZmFpbGVkIHRvIGltcG9ydCBzY3JpcHRzIGZyb20gJHt0fWApLHIpO319Y2F0Y2goZSl7byhlLnRvU3RyaW5nKCkpO319Z2V0QXZhaWxhYmxlSW1hZ2VzKGUpe2xldCB0PXRoaXMuYXZhaWxhYmxlSW1hZ2VzW2VdO3JldHVybiB0fHwodD1bXSksdH1nZXRMYXllckluZGV4KGUpe2xldCB0PXRoaXMubGF5ZXJJbmRleGVzW2VdO3JldHVybiB0fHwodD10aGlzLmxheWVySW5kZXhlc1tlXT1uZXcgbyksdH1nZXRXb3JrZXJTb3VyY2UoZSx0LHIpe2lmKHRoaXMud29ya2VyU291cmNlc1tlXXx8KHRoaXMud29ya2VyU291cmNlc1tlXT17fSksdGhpcy53b3JrZXJTb3VyY2VzW2VdW3RdfHwodGhpcy53b3JrZXJTb3VyY2VzW2VdW3RdPXt9KSwhdGhpcy53b3JrZXJTb3VyY2VzW2VdW3RdW3JdKXtjb25zdCBvPXtzZW5kOih0LHIsbyxpLG4scyk9Pnt0aGlzLmFjdG9yLnNlbmQodCxyLG8sZSxuLHMpO30sc2NoZWR1bGVyOnRoaXMuYWN0b3Iuc2NoZWR1bGVyfTt0aGlzLndvcmtlclNvdXJjZXNbZV1bdF1bcl09bmV3IHRoaXMud29ya2VyU291cmNlVHlwZXNbdF0obyx0aGlzLmdldExheWVySW5kZXgoZSksdGhpcy5nZXRBdmFpbGFibGVJbWFnZXMoZSksdGhpcy5pc1Nwcml0ZUxvYWRlZFtlXSk7fXJldHVybiB0aGlzLndvcmtlclNvdXJjZXNbZV1bdF1bcl19Z2V0REVNV29ya2VyU291cmNlKGUsdCl7cmV0dXJuIHRoaXMuZGVtV29ya2VyU291cmNlc1tlXXx8KHRoaXMuZGVtV29ya2VyU291cmNlc1tlXT17fSksdGhpcy5kZW1Xb3JrZXJTb3VyY2VzW2VdW3RdfHwodGhpcy5kZW1Xb3JrZXJTb3VyY2VzW2VdW3RdPW5ldyBpKSx0aGlzLmRlbVdvcmtlclNvdXJjZXNbZV1bdF19ZW5mb3JjZUNhY2hlU2l6ZUxpbWl0KHQscil7ZS5lbmZvcmNlQ2FjaGVTaXplTGltaXQocik7fWdldFdvcmtlclBlcmZvcm1hbmNlTWV0cmljcyhlLHQscil7cih2b2lkIDAsdm9pZCAwKTt9fXJldHVybiBcInVuZGVmaW5lZFwiIT10eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUmJihzZWxmLndvcmtlcj1uZXcgcGUoc2VsZikpLHBlfSkpO1xuXG5kZWZpbmUoW1wiLi9zaGFyZWRcIl0sKGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSxpKXtpZihBcnJheS5pc0FycmF5KGUpKXtpZighQXJyYXkuaXNBcnJheShpKXx8ZS5sZW5ndGghPT1pLmxlbmd0aClyZXR1cm4gITE7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspaWYoIXQoZVtvXSxpW29dKSlyZXR1cm4gITE7cmV0dXJuICEwfWlmKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmbnVsbCE9PWkpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBpKXJldHVybiAhMTtpZihPYmplY3Qua2V5cyhlKS5sZW5ndGghPT1PYmplY3Qua2V5cyhpKS5sZW5ndGgpcmV0dXJuICExO2Zvcihjb25zdCBvIGluIGUpaWYoIXQoZVtvXSxpW29dKSlyZXR1cm4gITE7cmV0dXJuICEwfXJldHVybiBlPT09aX12YXIgaT1vO2Z1bmN0aW9uIG8oZSl7cmV0dXJuICFmdW5jdGlvbihlKXtyZXR1cm4gXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvd3x8XCJ1bmRlZmluZWRcIj09dHlwZW9mIGRvY3VtZW50P1wibm90IGEgYnJvd3NlclwiOkFycmF5LnByb3RvdHlwZSYmQXJyYXkucHJvdG90eXBlLmV2ZXJ5JiZBcnJheS5wcm90b3R5cGUuZmlsdGVyJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaCYmQXJyYXkucHJvdG90eXBlLmluZGV4T2YmJkFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZiYmQXJyYXkucHJvdG90eXBlLm1hcCYmQXJyYXkucHJvdG90eXBlLnNvbWUmJkFycmF5LnByb3RvdHlwZS5yZWR1Y2UmJkFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodCYmQXJyYXkuaXNBcnJheT9GdW5jdGlvbi5wcm90b3R5cGUmJkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kP09iamVjdC5rZXlzJiZPYmplY3QuY3JlYXRlJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzJiZPYmplY3QuaXNTZWFsZWQmJk9iamVjdC5pc0Zyb3plbiYmT2JqZWN0LmlzRXh0ZW5zaWJsZSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciYmT2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyYmT2JqZWN0LnNlYWwmJk9iamVjdC5mcmVlemUmJk9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucz9cIkpTT05cImluIHdpbmRvdyYmXCJwYXJzZVwiaW4gSlNPTiYmXCJzdHJpbmdpZnlcImluIEpTT04/ZnVuY3Rpb24oKXtpZighKFwiV29ya2VyXCJpbiB3aW5kb3cmJlwiQmxvYlwiaW4gd2luZG93JiZcIlVSTFwiaW4gd2luZG93KSlyZXR1cm4gITE7dmFyIGUsdCxpPW5ldyBCbG9iKFtcIlwiXSx7dHlwZTpcInRleHQvamF2YXNjcmlwdFwifSksbz1VUkwuY3JlYXRlT2JqZWN0VVJMKGkpO3RyeXt0PW5ldyBXb3JrZXIobyksZT0hMDt9Y2F0Y2godCl7ZT0hMTt9cmV0dXJuIHQmJnQudGVybWluYXRlKCksVVJMLnJldm9rZU9iamVjdFVSTChvKSxlfSgpP1wiVWludDhDbGFtcGVkQXJyYXlcImluIHdpbmRvdz9BcnJheUJ1ZmZlci5pc1ZpZXc/ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2Uud2lkdGg9ZS5oZWlnaHQ9MTt2YXIgdD1lLmdldENvbnRleHQoXCIyZFwiKTtpZighdClyZXR1cm4gITE7dmFyIGk9dC5nZXRJbWFnZURhdGEoMCwwLDEsMSk7cmV0dXJuIGkmJmkud2lkdGg9PT1lLndpZHRofSgpPyh2b2lkIDA9PT1yW3Q9ZSYmZS5mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0XSYmKHJbdF09ZnVuY3Rpb24oZSl7dmFyIHQsaT1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGk9T2JqZWN0LmNyZWF0ZShvLndlYkdMQ29udGV4dEF0dHJpYnV0ZXMpO3JldHVybiBpLmZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ9ZSx0LmdldENvbnRleHQoXCJ3ZWJnbFwiLGkpfHx0LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIixpKX0oZSk7aWYoIWkpcmV0dXJuICExO3RyeXt0PWkuY3JlYXRlU2hhZGVyKGkuVkVSVEVYX1NIQURFUik7fWNhdGNoKGUpe3JldHVybiAhMX1yZXR1cm4gISghdHx8aS5pc0NvbnRleHRMb3N0KCkpJiYoaS5zaGFkZXJTb3VyY2UodCxcInZvaWQgbWFpbigpIHt9XCIpLGkuY29tcGlsZVNoYWRlcih0KSwhMD09PWkuZ2V0U2hhZGVyUGFyYW1ldGVyKHQsaS5DT01QSUxFX1NUQVRVUykpfSh0KSksclt0XT9kb2N1bWVudC5kb2N1bWVudE1vZGU/XCJpbnN1ZmZpY2llbnQgRUNNQVNjcmlwdCA2IHN1cHBvcnRcIjp2b2lkIDA6XCJpbnN1ZmZpY2llbnQgV2ViR0wgc3VwcG9ydFwiKTpcImluc3VmZmljaWVudCBDYW52YXMvZ2V0SW1hZ2VEYXRhIHN1cHBvcnRcIjpcImluc3VmZmljaWVudCBBcnJheUJ1ZmZlciBzdXBwb3J0XCI6XCJpbnN1ZmZpY2llbnQgVWludDhDbGFtcGVkQXJyYXkgc3VwcG9ydFwiOlwiaW5zdWZmaWNpZW50IHdvcmtlciBzdXBwb3J0XCI6XCJpbnN1ZmZpY2llbnQgSlNPTiBzdXBwb3J0XCI6XCJpbnN1ZmZpY2llbnQgT2JqZWN0IHN1cHBvcnRcIjpcImluc3VmZmljaWVudCBGdW5jdGlvbiBzdXBwb3J0XCI6XCJpbnN1ZmZpY2VudCBBcnJheSBzdXBwb3J0XCI7dmFyIHQ7fShlKX12YXIgcj17fTtmdW5jdGlvbiBuKHQsaSxvKXtjb25zdCByPWUud2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7cmV0dXJuIHZvaWQgMCE9PWkmJihyLmNsYXNzTmFtZT1pKSxvJiZvLmFwcGVuZENoaWxkKHIpLHJ9ZnVuY3Rpb24gcyh0LGksbyl7Y29uc3Qgcj1lLndpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLHQpO2Zvcihjb25zdCBlIG9mIE9iamVjdC5rZXlzKGkpKXIuc2V0QXR0cmlidXRlTlMobnVsbCxlLGlbZV0pO3JldHVybiBvJiZvLmFwcGVuZENoaWxkKHIpLHJ9by53ZWJHTENvbnRleHRBdHRyaWJ1dGVzPXthbnRpYWxpYXM6ITEsYWxwaGE6ITAsc3RlbmNpbDohMCxkZXB0aDohMH07Y29uc3QgYT1lLndpbmRvdy5kb2N1bWVudCYmZS53aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLGw9YSYmdm9pZCAwIT09YS51c2VyU2VsZWN0P1widXNlclNlbGVjdFwiOlwiV2Via2l0VXNlclNlbGVjdFwiO2xldCBjO2Z1bmN0aW9uIGgoKXthJiZsJiYoYz1hW2xdLGFbbF09XCJub25lXCIpO31mdW5jdGlvbiB1KCl7YSYmbCYmKGFbbF09Yyk7fWZ1bmN0aW9uIF8odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksZS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsXywhMCk7fWZ1bmN0aW9uIGQoKXtlLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixfLCEwKSxlLndpbmRvdy5zZXRUaW1lb3V0KCgoKT0+e2Uud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLF8sITApO30pLDApO31mdW5jdGlvbiBwKGUsdCl7Y29uc3QgaT1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiBnKGUsaSx0KX1mdW5jdGlvbiBtKGUsdCl7Y29uc3QgaT1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89W107Zm9yKGxldCByPTA7cjx0Lmxlbmd0aDtyKyspby5wdXNoKGcoZSxpLHRbcl0pKTtyZXR1cm4gb31mdW5jdGlvbiBmKHQpe3JldHVybiB2b2lkIDAhPT1lLndpbmRvdy5JbnN0YWxsVHJpZ2dlciYmMj09PXQuYnV0dG9uJiZ0LmN0cmxLZXkmJmUud2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoXCJNQUNcIik+PTA/MDp0LmJ1dHRvbn1mdW5jdGlvbiBnKHQsaSxvKXtjb25zdCByPXQub2Zmc2V0V2lkdGg9PT1pLndpZHRoPzE6dC5vZmZzZXRXaWR0aC9pLndpZHRoO3JldHVybiBuZXcgZS5Qb2ludCgoby5jbGllbnRYLWkubGVmdCkqciwoby5jbGllbnRZLWkudG9wKSpyKX1mdW5jdGlvbiB2KGUsdCl7dmFyIGk9dFswXSxvPXRbMV0scj10WzJdLG49dFszXSxzPWkqbi1yKm87cmV0dXJuIHM/KGVbMF09bioocz0xL3MpLGVbMV09LW8qcyxlWzJdPS1yKnMsZVszXT1pKnMsZSk6bnVsbH1mdW5jdGlvbiB4KGUpe2NvbnN0e3VzZXJJbWFnZTp0fT1lO3JldHVybiAhISh0JiZ0LnJlbmRlciYmdC5yZW5kZXIoKSkmJihlLmRhdGEucmVwbGFjZShuZXcgVWludDhBcnJheSh0LmRhdGEuYnVmZmVyKSksITApfWNsYXNzIHkgZXh0ZW5kcyBlLkV2ZW50ZWR7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuaW1hZ2VzPXt9LHRoaXMudXBkYXRlZEltYWdlcz17fSx0aGlzLmNhbGxiYWNrRGlzcGF0Y2hlZFRoaXNGcmFtZT17fSx0aGlzLmxvYWRlZD0hMSx0aGlzLnJlcXVlc3RvcnM9W10sdGhpcy5wYXR0ZXJucz17fSx0aGlzLmF0bGFzSW1hZ2U9bmV3IGUuUkdCQUltYWdlKHt3aWR0aDoxLGhlaWdodDoxfSksdGhpcy5kaXJ0eT0hMDt9aXNMb2FkZWQoKXtyZXR1cm4gdGhpcy5sb2FkZWR9c2V0TG9hZGVkKGUpe2lmKHRoaXMubG9hZGVkIT09ZSYmKHRoaXMubG9hZGVkPWUsZSkpe2Zvcihjb25zdHtpZHM6ZSxjYWxsYmFjazp0fW9mIHRoaXMucmVxdWVzdG9ycyl0aGlzLl9ub3RpZnkoZSx0KTt0aGlzLnJlcXVlc3RvcnM9W107fX1oYXNJbWFnZShlKXtyZXR1cm4gISF0aGlzLmdldEltYWdlKGUpfWdldEltYWdlKGUpe3JldHVybiB0aGlzLmltYWdlc1tlXX1hZGRJbWFnZShlLHQpe3RoaXMuX3ZhbGlkYXRlKGUsdCkmJih0aGlzLmltYWdlc1tlXT10KTt9X3ZhbGlkYXRlKHQsaSl7bGV0IG89ITA7cmV0dXJuIHRoaXMuX3ZhbGlkYXRlU3RyZXRjaChpLnN0cmV0Y2hYLGkuZGF0YSYmaS5kYXRhLndpZHRoKXx8KHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihgSW1hZ2UgXCIke3R9XCIgaGFzIGludmFsaWQgXCJzdHJldGNoWFwiIHZhbHVlYCkpKSxvPSExKSx0aGlzLl92YWxpZGF0ZVN0cmV0Y2goaS5zdHJldGNoWSxpLmRhdGEmJmkuZGF0YS5oZWlnaHQpfHwodGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBJbWFnZSBcIiR7dH1cIiBoYXMgaW52YWxpZCBcInN0cmV0Y2hZXCIgdmFsdWVgKSkpLG89ITEpLHRoaXMuX3ZhbGlkYXRlQ29udGVudChpLmNvbnRlbnQsaSl8fCh0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYEltYWdlIFwiJHt0fVwiIGhhcyBpbnZhbGlkIFwiY29udGVudFwiIHZhbHVlYCkpKSxvPSExKSxvfV92YWxpZGF0ZVN0cmV0Y2goZSx0KXtpZighZSlyZXR1cm4gITA7bGV0IGk9MDtmb3IoY29uc3QgbyBvZiBlKXtpZihvWzBdPGl8fG9bMV08b1swXXx8dDxvWzFdKXJldHVybiAhMTtpPW9bMV07fXJldHVybiAhMH1fdmFsaWRhdGVDb250ZW50KGUsdCl7cmV0dXJuICEoZSYmKDQhPT1lLmxlbmd0aHx8ZVswXTwwfHx0LmRhdGEud2lkdGg8ZVswXXx8ZVsxXTwwfHx0LmRhdGEuaGVpZ2h0PGVbMV18fGVbMl08MHx8dC5kYXRhLndpZHRoPGVbMl18fGVbM108MHx8dC5kYXRhLmhlaWdodDxlWzNdfHxlWzJdPGVbMF18fGVbM108ZVsxXSkpfXVwZGF0ZUltYWdlKGUsdCl7dC52ZXJzaW9uPXRoaXMuaW1hZ2VzW2VdLnZlcnNpb24rMSx0aGlzLmltYWdlc1tlXT10LHRoaXMudXBkYXRlZEltYWdlc1tlXT0hMDt9cmVtb3ZlSW1hZ2UoZSl7Y29uc3QgdD10aGlzLmltYWdlc1tlXTtkZWxldGUgdGhpcy5pbWFnZXNbZV0sZGVsZXRlIHRoaXMucGF0dGVybnNbZV0sdC51c2VySW1hZ2UmJnQudXNlckltYWdlLm9uUmVtb3ZlJiZ0LnVzZXJJbWFnZS5vblJlbW92ZSgpO31saXN0SW1hZ2VzKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuaW1hZ2VzKX1nZXRJbWFnZXMoZSx0KXtsZXQgaT0hMDtpZighdGhpcy5pc0xvYWRlZCgpKWZvcihjb25zdCB0IG9mIGUpdGhpcy5pbWFnZXNbdF18fChpPSExKTt0aGlzLmlzTG9hZGVkKCl8fGk/dGhpcy5fbm90aWZ5KGUsdCk6dGhpcy5yZXF1ZXN0b3JzLnB1c2goe2lkczplLGNhbGxiYWNrOnR9KTt9X25vdGlmeSh0LGkpe2NvbnN0IG89e307Zm9yKGNvbnN0IGkgb2YgdCl7dGhpcy5pbWFnZXNbaV18fHRoaXMuZmlyZShuZXcgZS5FdmVudChcInN0eWxlaW1hZ2VtaXNzaW5nXCIse2lkOml9KSk7Y29uc3QgdD10aGlzLmltYWdlc1tpXTt0P29baV09e2RhdGE6dC5kYXRhLmNsb25lKCkscGl4ZWxSYXRpbzp0LnBpeGVsUmF0aW8sc2RmOnQuc2RmLHZlcnNpb246dC52ZXJzaW9uLHN0cmV0Y2hYOnQuc3RyZXRjaFgsc3RyZXRjaFk6dC5zdHJldGNoWSxjb250ZW50OnQuY29udGVudCxoYXNSZW5kZXJDYWxsYmFjazpCb29sZWFuKHQudXNlckltYWdlJiZ0LnVzZXJJbWFnZS5yZW5kZXIpfTplLndhcm5PbmNlKGBJbWFnZSBcIiR7aX1cIiBjb3VsZCBub3QgYmUgbG9hZGVkLiBQbGVhc2UgbWFrZSBzdXJlIHlvdSBoYXZlIGFkZGVkIHRoZSBpbWFnZSB3aXRoIG1hcC5hZGRJbWFnZSgpIG9yIGEgXCJzcHJpdGVcIiBwcm9wZXJ0eSBpbiB5b3VyIHN0eWxlLiBZb3UgY2FuIHByb3ZpZGUgbWlzc2luZyBpbWFnZXMgYnkgbGlzdGVuaW5nIGZvciB0aGUgXCJzdHlsZWltYWdlbWlzc2luZ1wiIG1hcCBldmVudC5gKTt9aShudWxsLG8pO31nZXRQaXhlbFNpemUoKXtjb25zdHt3aWR0aDplLGhlaWdodDp0fT10aGlzLmF0bGFzSW1hZ2U7cmV0dXJuIHt3aWR0aDplLGhlaWdodDp0fX1nZXRQYXR0ZXJuKHQpe2NvbnN0IGk9dGhpcy5wYXR0ZXJuc1t0XSxvPXRoaXMuZ2V0SW1hZ2UodCk7aWYoIW8pcmV0dXJuIG51bGw7aWYoaSYmaS5wb3NpdGlvbi52ZXJzaW9uPT09by52ZXJzaW9uKXJldHVybiBpLnBvc2l0aW9uO2lmKGkpaS5wb3NpdGlvbi52ZXJzaW9uPW8udmVyc2lvbjtlbHNlIHtjb25zdCBpPXt3Om8uZGF0YS53aWR0aCsyLGg6by5kYXRhLmhlaWdodCsyLHg6MCx5OjB9LHI9bmV3IGUuSW1hZ2VQb3NpdGlvbihpLG8pO3RoaXMucGF0dGVybnNbdF09e2JpbjppLHBvc2l0aW9uOnJ9O31yZXR1cm4gdGhpcy5fdXBkYXRlUGF0dGVybkF0bGFzKCksdGhpcy5wYXR0ZXJuc1t0XS5wb3NpdGlvbn1iaW5kKHQpe2NvbnN0IGk9dC5nbDt0aGlzLmF0bGFzVGV4dHVyZT90aGlzLmRpcnR5JiYodGhpcy5hdGxhc1RleHR1cmUudXBkYXRlKHRoaXMuYXRsYXNJbWFnZSksdGhpcy5kaXJ0eT0hMSk6dGhpcy5hdGxhc1RleHR1cmU9bmV3IGUuVGV4dHVyZSh0LHRoaXMuYXRsYXNJbWFnZSxpLlJHQkEpLHRoaXMuYXRsYXNUZXh0dXJlJiZ0aGlzLmF0bGFzVGV4dHVyZS5iaW5kKGkuTElORUFSLGkuQ0xBTVBfVE9fRURHRSk7fV91cGRhdGVQYXR0ZXJuQXRsYXMoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBlIGluIHRoaXMucGF0dGVybnMpdC5wdXNoKHRoaXMucGF0dGVybnNbZV0uYmluKTtjb25zdHt3OmksaDpvfT1lLnBvdHBhY2sodCkscj10aGlzLmF0bGFzSW1hZ2U7ci5yZXNpemUoe3dpZHRoOml8fDEsaGVpZ2h0Om98fDF9KTtmb3IoY29uc3QgdCBpbiB0aGlzLnBhdHRlcm5zKXtjb25zdHtiaW46aX09dGhpcy5wYXR0ZXJuc1t0XSxvPWkueCsxLG49aS55KzEscz10aGlzLmltYWdlc1t0XS5kYXRhLGE9cy53aWR0aCxsPXMuaGVpZ2h0O2UuUkdCQUltYWdlLmNvcHkocyxyLHt4OjAseTowfSx7eDpvLHk6bn0se3dpZHRoOmEsaGVpZ2h0Omx9KSxlLlJHQkFJbWFnZS5jb3B5KHMscix7eDowLHk6bC0xfSx7eDpvLHk6bi0xfSx7d2lkdGg6YSxoZWlnaHQ6MX0pLGUuUkdCQUltYWdlLmNvcHkocyxyLHt4OjAseTowfSx7eDpvLHk6bitsfSx7d2lkdGg6YSxoZWlnaHQ6MX0pLGUuUkdCQUltYWdlLmNvcHkocyxyLHt4OmEtMSx5OjB9LHt4Om8tMSx5Om59LHt3aWR0aDoxLGhlaWdodDpsfSksZS5SR0JBSW1hZ2UuY29weShzLHIse3g6MCx5OjB9LHt4Om8rYSx5Om59LHt3aWR0aDoxLGhlaWdodDpsfSk7fXRoaXMuZGlydHk9ITA7fWJlZ2luRnJhbWUoKXt0aGlzLmNhbGxiYWNrRGlzcGF0Y2hlZFRoaXNGcmFtZT17fTt9ZGlzcGF0Y2hSZW5kZXJDYWxsYmFja3MoZSl7Zm9yKGNvbnN0IHQgb2YgZSl7aWYodGhpcy5jYWxsYmFja0Rpc3BhdGNoZWRUaGlzRnJhbWVbdF0pY29udGludWU7dGhpcy5jYWxsYmFja0Rpc3BhdGNoZWRUaGlzRnJhbWVbdF09ITA7Y29uc3QgZT10aGlzLmltYWdlc1t0XTt4KGUpJiZ0aGlzLnVwZGF0ZUltYWdlKHQsZSk7fX19Y29uc3QgYj1uZXcgZS5Qcm9wZXJ0aWVzKHthbmNob3I6bmV3IGUuRGF0YUNvbnN0YW50UHJvcGVydHkoZS5zcGVjLmxpZ2h0LmFuY2hvcikscG9zaXRpb246bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5zcGVjaWZpY2F0aW9uPWUuc3BlYy5saWdodC5wb3NpdGlvbjt9cG9zc2libHlFdmFsdWF0ZSh0LGkpe3JldHVybiBmdW5jdGlvbihbdCxpLG9dKXtjb25zdCByPWUuZGVnVG9SYWQoaSs5MCksbj1lLmRlZ1RvUmFkKG8pO3JldHVybiB7eDp0Kk1hdGguY29zKHIpKk1hdGguc2luKG4pLHk6dCpNYXRoLnNpbihyKSpNYXRoLnNpbihuKSx6OnQqTWF0aC5jb3MobiksYXppbXV0aGFsOmkscG9sYXI6b319KHQuZXhwcmVzc2lvbi5ldmFsdWF0ZShpKSl9aW50ZXJwb2xhdGUodCxpLG8pe3JldHVybiB7eDplLm51bWJlcih0LngsaS54LG8pLHk6ZS5udW1iZXIodC55LGkueSxvKSx6OmUubnVtYmVyKHQueixpLnosbyksYXppbXV0aGFsOmUubnVtYmVyKHQuYXppbXV0aGFsLGkuYXppbXV0aGFsLG8pLHBvbGFyOmUubnVtYmVyKHQucG9sYXIsaS5wb2xhcixvKX19fSxjb2xvcjpuZXcgZS5EYXRhQ29uc3RhbnRQcm9wZXJ0eShlLnNwZWMubGlnaHQuY29sb3IpLGludGVuc2l0eTpuZXcgZS5EYXRhQ29uc3RhbnRQcm9wZXJ0eShlLnNwZWMubGlnaHQuaW50ZW5zaXR5KX0pO2NsYXNzIHcgZXh0ZW5kcyBlLkV2ZW50ZWR7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLl90cmFuc2l0aW9uYWJsZT1uZXcgZS5UcmFuc2l0aW9uYWJsZShiKSx0aGlzLnNldExpZ2h0KHQpLHRoaXMuX3RyYW5zaXRpb25pbmc9dGhpcy5fdHJhbnNpdGlvbmFibGUudW50cmFuc2l0aW9uZWQoKTt9Z2V0TGlnaHQoKXtyZXR1cm4gdGhpcy5fdHJhbnNpdGlvbmFibGUuc2VyaWFsaXplKCl9c2V0TGlnaHQodCxpPXt9KXtpZighdGhpcy5fdmFsaWRhdGUoZS52YWxpZGF0ZUxpZ2h0LHQsaSkpZm9yKGNvbnN0IGkgaW4gdCl7Y29uc3Qgbz10W2ldO2UuZW5kc1dpdGgoaSxcIi10cmFuc2l0aW9uXCIpP3RoaXMuX3RyYW5zaXRpb25hYmxlLnNldFRyYW5zaXRpb24oaS5zbGljZSgwLC0xMSksbyk6dGhpcy5fdHJhbnNpdGlvbmFibGUuc2V0VmFsdWUoaSxvKTt9fXVwZGF0ZVRyYW5zaXRpb25zKGUpe3RoaXMuX3RyYW5zaXRpb25pbmc9dGhpcy5fdHJhbnNpdGlvbmFibGUudHJhbnNpdGlvbmVkKGUsdGhpcy5fdHJhbnNpdGlvbmluZyk7fWhhc1RyYW5zaXRpb24oKXtyZXR1cm4gdGhpcy5fdHJhbnNpdGlvbmluZy5oYXNUcmFuc2l0aW9uKCl9cmVjYWxjdWxhdGUoZSl7dGhpcy5wcm9wZXJ0aWVzPXRoaXMuX3RyYW5zaXRpb25pbmcucG9zc2libHlFdmFsdWF0ZShlKTt9X3ZhbGlkYXRlKHQsaSxvKXtyZXR1cm4gKCFvfHwhMSE9PW8udmFsaWRhdGUpJiZlLmVtaXRWYWxpZGF0aW9uRXJyb3JzKHRoaXMsdC5jYWxsKGUudmFsaWRhdGVTdHlsZSxlLmV4dGVuZCh7dmFsdWU6aSxzdHlsZTp7Z2x5cGhzOiEwLHNwcml0ZTohMH0sc3R5bGVTcGVjOmUuc3BlY30pKSl9fWNvbnN0IFQ9bmV3IGUuUHJvcGVydGllcyh7c291cmNlOm5ldyBlLkRhdGFDb25zdGFudFByb3BlcnR5KGUuc3BlYy50ZXJyYWluLnNvdXJjZSksZXhhZ2dlcmF0aW9uOm5ldyBlLkRhdGFDb25zdGFudFByb3BlcnR5KGUuc3BlYy50ZXJyYWluLmV4YWdnZXJhdGlvbil9KTtsZXQgRT1jbGFzcyBleHRlbmRzIGUuRXZlbnRlZHtjb25zdHJ1Y3Rvcih0LGkpe3N1cGVyKCksdGhpcy5fdHJhbnNpdGlvbmFibGU9bmV3IGUuVHJhbnNpdGlvbmFibGUoVCksdGhpcy5zZXQodCksdGhpcy5fdHJhbnNpdGlvbmluZz10aGlzLl90cmFuc2l0aW9uYWJsZS51bnRyYW5zaXRpb25lZCgpLHRoaXMuZHJhcGVSZW5kZXJNb2RlPWk7fWdldCgpe3JldHVybiB0aGlzLl90cmFuc2l0aW9uYWJsZS5zZXJpYWxpemUoKX1zZXQodCl7Zm9yKGNvbnN0IGkgaW4gdCl7Y29uc3Qgbz10W2ldO2UuZW5kc1dpdGgoaSxcIi10cmFuc2l0aW9uXCIpP3RoaXMuX3RyYW5zaXRpb25hYmxlLnNldFRyYW5zaXRpb24oaS5zbGljZSgwLC0xMSksbyk6dGhpcy5fdHJhbnNpdGlvbmFibGUuc2V0VmFsdWUoaSxvKTt9fXVwZGF0ZVRyYW5zaXRpb25zKGUpe3RoaXMuX3RyYW5zaXRpb25pbmc9dGhpcy5fdHJhbnNpdGlvbmFibGUudHJhbnNpdGlvbmVkKGUsdGhpcy5fdHJhbnNpdGlvbmluZyk7fWhhc1RyYW5zaXRpb24oKXtyZXR1cm4gdGhpcy5fdHJhbnNpdGlvbmluZy5oYXNUcmFuc2l0aW9uKCl9cmVjYWxjdWxhdGUoZSl7dGhpcy5wcm9wZXJ0aWVzPXRoaXMuX3RyYW5zaXRpb25pbmcucG9zc2libHlFdmFsdWF0ZShlKTt9fTtmdW5jdGlvbiBDKHQsaSxvLHIpe2NvbnN0IG49ZS5zbW9vdGhzdGVwKDQ1LDY1LG8pLFtzLGFdPU0odCxyKSxsPWUubGVuZ3RoKGkpO2xldCBjPTEtTWF0aC5taW4oMSxNYXRoLmV4cCgobC1zKS8oYS1zKSotNikpO3JldHVybiBjKj1jKmMsYz1NYXRoLm1pbigxLDEuMDA3NDcqYyksYypuKnQuYWxwaGF9ZnVuY3Rpb24gTShlLHQpe2NvbnN0IGk9LjUvTWF0aC50YW4oLjUqdCk7cmV0dXJuIFtlLnJhbmdlWzBdK2ksZS5yYW5nZVsxXStpXX1jb25zdCBJPW5ldyBlLlByb3BlcnRpZXMoe3JhbmdlOm5ldyBlLkRhdGFDb25zdGFudFByb3BlcnR5KGUuc3BlYy5mb2cucmFuZ2UpLGNvbG9yOm5ldyBlLkRhdGFDb25zdGFudFByb3BlcnR5KGUuc3BlYy5mb2cuY29sb3IpLFwiaGlnaC1jb2xvclwiOm5ldyBlLkRhdGFDb25zdGFudFByb3BlcnR5KGUuc3BlYy5mb2dbXCJoaWdoLWNvbG9yXCJdKSxcInNwYWNlLWNvbG9yXCI6bmV3IGUuRGF0YUNvbnN0YW50UHJvcGVydHkoZS5zcGVjLmZvZ1tcInNwYWNlLWNvbG9yXCJdKSxcImhvcml6b24tYmxlbmRcIjpuZXcgZS5EYXRhQ29uc3RhbnRQcm9wZXJ0eShlLnNwZWMuZm9nW1wiaG9yaXpvbi1ibGVuZFwiXSksXCJzdGFyLWludGVuc2l0eVwiOm5ldyBlLkRhdGFDb25zdGFudFByb3BlcnR5KGUuc3BlYy5mb2dbXCJzdGFyLWludGVuc2l0eVwiXSl9KTtjbGFzcyBQIGV4dGVuZHMgZS5FdmVudGVke2NvbnN0cnVjdG9yKHQsaSl7c3VwZXIoKSx0aGlzLl90cmFuc2l0aW9uYWJsZT1uZXcgZS5UcmFuc2l0aW9uYWJsZShJKSx0aGlzLnNldCh0KSx0aGlzLl90cmFuc2l0aW9uaW5nPXRoaXMuX3RyYW5zaXRpb25hYmxlLnVudHJhbnNpdGlvbmVkKCksdGhpcy5fdHJhbnNmb3JtPWk7fWdldCBzdGF0ZSgpe2NvbnN0IHQ9dGhpcy5fdHJhbnNmb3JtLGk9XCJnbG9iZVwiPT09dC5wcm9qZWN0aW9uLm5hbWUsbz1lLmdsb2JlVG9NZXJjYXRvclRyYW5zaXRpb24odC56b29tKSxyPXRoaXMucHJvcGVydGllcy5nZXQoXCJyYW5nZVwiKSxuPVsuNSwzXTtyZXR1cm4ge3JhbmdlOmk/W2UubnVtYmVyKG5bMF0sclswXSxvKSxlLm51bWJlcihuWzFdLHJbMV0sbyldOnIsaG9yaXpvbkJsZW5kOnRoaXMucHJvcGVydGllcy5nZXQoXCJob3Jpem9uLWJsZW5kXCIpLGFscGhhOnRoaXMucHJvcGVydGllcy5nZXQoXCJjb2xvclwiKS5hfX1nZXQoKXtyZXR1cm4gdGhpcy5fdHJhbnNpdGlvbmFibGUuc2VyaWFsaXplKCl9c2V0KHQsaT17fSl7aWYoIXRoaXMuX3ZhbGlkYXRlKGUudmFsaWRhdGVGb2csdCxpKSl7Zm9yKGNvbnN0IGkgb2YgT2JqZWN0LmtleXMoZS5zcGVjLmZvZykpdCYmdm9pZCAwPT09dFtpXSYmKHRbaV09ZS5zcGVjLmZvZ1tpXS5kZWZhdWx0KTtmb3IoY29uc3QgaSBpbiB0KXtjb25zdCBvPXRbaV07ZS5lbmRzV2l0aChpLFwiLXRyYW5zaXRpb25cIik/dGhpcy5fdHJhbnNpdGlvbmFibGUuc2V0VHJhbnNpdGlvbihpLnNsaWNlKDAsLTExKSxvKTp0aGlzLl90cmFuc2l0aW9uYWJsZS5zZXRWYWx1ZShpLG8pO319fWdldE9wYWNpdHkodCl7aWYoIXRoaXMuX3RyYW5zZm9ybS5wcm9qZWN0aW9uLnN1cHBvcnRzRm9nKXJldHVybiAwO2NvbnN0IGk9dGhpcy5wcm9wZXJ0aWVzJiZ0aGlzLnByb3BlcnRpZXMuZ2V0KFwiY29sb3JcIil8fDE7cmV0dXJuIChcImdsb2JlXCI9PT10aGlzLl90cmFuc2Zvcm0ucHJvamVjdGlvbi5uYW1lPzE6ZS5zbW9vdGhzdGVwKDQ1LDY1LHQpKSppLmF9Z2V0T3BhY2l0eUF0TGF0TG5nKHQsaSl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybS5wcm9qZWN0aW9uLnN1cHBvcnRzRm9nP2Z1bmN0aW9uKHQsaSxvKXtjb25zdCByPWUuTWVyY2F0b3JDb29yZGluYXRlLmZyb21MbmdMYXQoaSksbj1vLmVsZXZhdGlvbj9vLmVsZXZhdGlvbi5nZXRBdFBvaW50T3JaZXJvKHIpOjAscz1bci54LHIueSxuXTtyZXR1cm4gZS50cmFuc2Zvcm1NYXQ0KHMscyxvLm1lcmNhdG9yRm9nTWF0cml4KSxDKHQscyxvLnBpdGNoLG8uX2Zvdil9KHRoaXMuc3RhdGUsdCxpKTowfWdldEZvdkFkanVzdGVkUmFuZ2UoZSl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybS5wcm9qZWN0aW9uLnN1cHBvcnRzRm9nP00odGhpcy5zdGF0ZSxlKTpbMCwxXX11cGRhdGVUcmFuc2l0aW9ucyhlKXt0aGlzLl90cmFuc2l0aW9uaW5nPXRoaXMuX3RyYW5zaXRpb25hYmxlLnRyYW5zaXRpb25lZChlLHRoaXMuX3RyYW5zaXRpb25pbmcpO31oYXNUcmFuc2l0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zaXRpb25pbmcuaGFzVHJhbnNpdGlvbigpfXJlY2FsY3VsYXRlKGUpe3RoaXMucHJvcGVydGllcz10aGlzLl90cmFuc2l0aW9uaW5nLnBvc3NpYmx5RXZhbHVhdGUoZSk7fV92YWxpZGF0ZSh0LGksbyl7cmV0dXJuICghb3x8ITEhPT1vLnZhbGlkYXRlKSYmZS5lbWl0VmFsaWRhdGlvbkVycm9ycyh0aGlzLHQuY2FsbChlLnZhbGlkYXRlU3R5bGUsZS5leHRlbmQoe3ZhbHVlOmksc3R5bGU6e2dseXBoczohMCxzcHJpdGU6ITB9LHN0eWxlU3BlYzplLnNwZWN9KSkpfX1jbGFzcyBTe2NvbnN0cnVjdG9yKHQsaSl7dGhpcy53b3JrZXJQb29sPXQsdGhpcy5hY3RvcnM9W10sdGhpcy5jdXJyZW50QWN0b3I9MCx0aGlzLmlkPWUudW5pcXVlSWQoKTtjb25zdCBvPXRoaXMud29ya2VyUG9vbC5hY3F1aXJlKHRoaXMuaWQpO2ZvcihsZXQgZT0wO2U8by5sZW5ndGg7ZSsrKXtjb25zdCB0PW5ldyBTLkFjdG9yKG9bZV0saSx0aGlzLmlkKTt0Lm5hbWU9YFdvcmtlciAke2V9YCx0aGlzLmFjdG9ycy5wdXNoKHQpO310aGlzLnJlYWR5PSExLHRoaXMuYnJvYWRjYXN0KFwiY2hlY2tJZlJlYWR5XCIsbnVsbCwoKCk9Pnt0aGlzLnJlYWR5PSEwO30pKTt9YnJvYWRjYXN0KHQsaSxvKXtlLmFzeW5jQWxsKHRoaXMuYWN0b3JzLCgoZSxvKT0+e2Uuc2VuZCh0LGksbyk7fSksbz1vfHxmdW5jdGlvbigpe30pO31nZXRBY3Rvcigpe3JldHVybiB0aGlzLmN1cnJlbnRBY3Rvcj0odGhpcy5jdXJyZW50QWN0b3IrMSkldGhpcy5hY3RvcnMubGVuZ3RoLHRoaXMuYWN0b3JzW3RoaXMuY3VycmVudEFjdG9yXX1yZW1vdmUoKXt0aGlzLmFjdG9ycy5mb3JFYWNoKChlPT57ZS5yZW1vdmUoKTt9KSksdGhpcy5hY3RvcnM9W10sdGhpcy53b3JrZXJQb29sLnJlbGVhc2UodGhpcy5pZCk7fX1mdW5jdGlvbiBEKHQsaSxvKXtyZXR1cm4gaSooZS5FWFRFTlQvKHQudGlsZVNpemUqTWF0aC5wb3coMixvLXQudGlsZUlELm92ZXJzY2FsZWRaKSkpfVMuQWN0b3I9ZS5BY3RvcjtjbGFzcyBMe2NvbnN0cnVjdG9yKGUsdCxpLG8pe3RoaXMuc2NyZWVuQm91bmRzPWUsdGhpcy5jYW1lcmFQb2ludD10LHRoaXMuX3NjcmVlblJheWNhc3RDYWNoZT17fSx0aGlzLl9jYW1lcmFSYXljYXN0Q2FjaGU9e30sdGhpcy5pc0Fib3ZlSG9yaXpvbj1pLHRoaXMuc2NyZWVuR2VvbWV0cnk9dGhpcy5idWZmZXJlZFNjcmVlbkdlb21ldHJ5KDApLHRoaXMuc2NyZWVuR2VvbWV0cnlNZXJjYXRvcj10aGlzLl9idWZmZXJlZFNjcmVlbk1lcmNhdG9yKDAsbyk7fXN0YXRpYyBjcmVhdGVGcm9tU2NyZWVuUG9pbnRzKHQsaSl7bGV0IG8scjtpZih0IGluc3RhbmNlb2YgZS5Qb2ludHx8XCJudW1iZXJcIj09dHlwZW9mIHRbMF0pe2NvbnN0IG49ZS5Qb2ludC5jb252ZXJ0KHQpO289W25dLHI9aS5pc1BvaW50QWJvdmVIb3Jpem9uKG4pO31lbHNlIHtjb25zdCBuPWUuUG9pbnQuY29udmVydCh0WzBdKSxzPWUuUG9pbnQuY29udmVydCh0WzFdKTtvPVtuLHNdLHI9ZS5wb2x5Z29uaXplQm91bmRzKG4scykuZXZlcnkoKGU9PmkuaXNQb2ludEFib3ZlSG9yaXpvbihlKSkpO31yZXR1cm4gbmV3IEwobyxpLmdldENhbWVyYVBvaW50KCkscixpKX1pc1BvaW50UXVlcnkoKXtyZXR1cm4gMT09PXRoaXMuc2NyZWVuQm91bmRzLmxlbmd0aH1idWZmZXJlZFNjcmVlbkdlb21ldHJ5KHQpe3JldHVybiBlLnBvbHlnb25pemVCb3VuZHModGhpcy5zY3JlZW5Cb3VuZHNbMF0sMT09PXRoaXMuc2NyZWVuQm91bmRzLmxlbmd0aD90aGlzLnNjcmVlbkJvdW5kc1swXTp0aGlzLnNjcmVlbkJvdW5kc1sxXSx0KX1idWZmZXJlZENhbWVyYUdlb21ldHJ5KHQpe2NvbnN0IGk9dGhpcy5zY3JlZW5Cb3VuZHNbMF0sbz0xPT09dGhpcy5zY3JlZW5Cb3VuZHMubGVuZ3RoP3RoaXMuc2NyZWVuQm91bmRzWzBdLmFkZChuZXcgZS5Qb2ludCgxLDEpKTp0aGlzLnNjcmVlbkJvdW5kc1sxXSxyPWUucG9seWdvbml6ZUJvdW5kcyhpLG8sMCwhMSk7cmV0dXJuIHRoaXMuY2FtZXJhUG9pbnQueT5vLnkmJih0aGlzLmNhbWVyYVBvaW50Lng+aS54JiZ0aGlzLmNhbWVyYVBvaW50Lng8by54P3Iuc3BsaWNlKDMsMCx0aGlzLmNhbWVyYVBvaW50KTp0aGlzLmNhbWVyYVBvaW50Lng+PW8ueD9yWzJdPXRoaXMuY2FtZXJhUG9pbnQ6dGhpcy5jYW1lcmFQb2ludC54PD1pLngmJihyWzNdPXRoaXMuY2FtZXJhUG9pbnQpKSxlLmJ1ZmZlckNvbnZleFBvbHlnb24ocix0KX1idWZmZXJlZENhbWVyYUdlb21ldHJ5R2xvYmUodCl7Y29uc3QgaT10aGlzLnNjcmVlbkJvdW5kc1swXSxvPTE9PT10aGlzLnNjcmVlbkJvdW5kcy5sZW5ndGg/dGhpcy5zY3JlZW5Cb3VuZHNbMF0uYWRkKG5ldyBlLlBvaW50KDEsMSkpOnRoaXMuc2NyZWVuQm91bmRzWzFdLHI9ZS5wb2x5Z29uaXplQm91bmRzKGksbyx0KSxuPXRoaXMuY2FtZXJhUG9pbnQuY2xvbmUoKTtzd2l0Y2goMyooKG4ueT5pLnkpKyhuLnk+by55KSkrKChuLng+aS54KSsobi54Pm8ueCkpKXtjYXNlIDA6clswXT1uLHJbNF09bi5jbG9uZSgpO2JyZWFrO2Nhc2UgMTpyLnNwbGljZSgxLDAsbik7YnJlYWs7Y2FzZSAyOnJbMV09bjticmVhaztjYXNlIDM6ci5zcGxpY2UoNCwwLG4pO2JyZWFrO2Nhc2UgNTpyLnNwbGljZSgyLDAsbik7YnJlYWs7Y2FzZSA2OnJbM109bjticmVhaztjYXNlIDc6ci5zcGxpY2UoMywwLG4pO2JyZWFrO2Nhc2UgODpyWzJdPW47fXJldHVybiByfWNvbnRhaW5zVGlsZSh0LGksbyxyPTApe2NvbnN0IG49dC5xdWVyeVBhZGRpbmcvaS5fcGl4ZWxzUGVyTWVyY2F0b3JQaXhlbCsxLHM9bz90aGlzLl9idWZmZXJlZENhbWVyYU1lcmNhdG9yKG4saSk6dGhpcy5fYnVmZmVyZWRTY3JlZW5NZXJjYXRvcihuLGkpO2xldCBhPXQudGlsZUlELndyYXArKHMudW53cmFwcGVkP3I6MCk7Y29uc3QgbD1zLnBvbHlnb24ubWFwKChpPT5lLmdldFRpbGVQb2ludCh0LnRpbGVUcmFuc2Zvcm0saSxhKSkpO2lmKCFlLnBvbHlnb25JbnRlcnNlY3RzQm94KGwsMCwwLGUuRVhURU5ULGUuRVhURU5UKSlyZXR1cm47YT10LnRpbGVJRC53cmFwKyh0aGlzLnNjcmVlbkdlb21ldHJ5TWVyY2F0b3IudW53cmFwcGVkP3I6MCk7Y29uc3QgYz10aGlzLnNjcmVlbkdlb21ldHJ5TWVyY2F0b3IucG9seWdvbi5tYXAoKGk9PmUuZ2V0VGlsZVZlYzModC50aWxlVHJhbnNmb3JtLGksYSkpKSxoPWMubWFwKCh0PT5uZXcgZS5Qb2ludCh0WzBdLHRbMV0pKSksdT1pLmdldEZyZWVDYW1lcmFPcHRpb25zKCkucG9zaXRpb258fG5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSgwLDAsMCksXz1lLmdldFRpbGVWZWMzKHQudGlsZVRyYW5zZm9ybSx1LGEpLGQ9Yy5tYXAoKHQ9Pntjb25zdCBpPWUuc3ViKHQsdCxfKTtyZXR1cm4gZS5ub3JtYWxpemUoaSxpKSxuZXcgZS5SYXkoXyxpKX0pKSxwPUQodCwxLGkuem9vbSkqaS5fcGl4ZWxzUGVyTWVyY2F0b3JQaXhlbDtyZXR1cm4ge3F1ZXJ5R2VvbWV0cnk6dGhpcyx0aWxlc3BhY2VHZW9tZXRyeTpoLHRpbGVzcGFjZVJheXM6ZCxidWZmZXJlZFRpbGVzcGFjZUdlb21ldHJ5OmwsYnVmZmVyZWRUaWxlc3BhY2VCb3VuZHM6KG09ZS5nZXRCb3VuZHMobCksbS5taW4ueD1lLmNsYW1wKG0ubWluLngsMCxlLkVYVEVOVCksbS5taW4ueT1lLmNsYW1wKG0ubWluLnksMCxlLkVYVEVOVCksbS5tYXgueD1lLmNsYW1wKG0ubWF4LngsMCxlLkVYVEVOVCksbS5tYXgueT1lLmNsYW1wKG0ubWF4LnksMCxlLkVYVEVOVCksbSksdGlsZTp0LHRpbGVJRDp0LnRpbGVJRCxwaXhlbFRvVGlsZVVuaXRzRmFjdG9yOnB9O3ZhciBtO31fYnVmZmVyZWRTY3JlZW5NZXJjYXRvcihlLHQpe2NvbnN0IGk9UihlKTtpZih0aGlzLl9zY3JlZW5SYXljYXN0Q2FjaGVbaV0pcmV0dXJuIHRoaXMuX3NjcmVlblJheWNhc3RDYWNoZVtpXTt7bGV0IG87cmV0dXJuIG89XCJnbG9iZVwiPT09dC5wcm9qZWN0aW9uLm5hbWU/dGhpcy5fcHJvamVjdEFuZFJlc2FtcGxlKHRoaXMuYnVmZmVyZWRTY3JlZW5HZW9tZXRyeShlKSx0KTp7cG9seWdvbjp0aGlzLmJ1ZmZlcmVkU2NyZWVuR2VvbWV0cnkoZSkubWFwKChlPT50LnBvaW50Q29vcmRpbmF0ZTNEKGUpKSksdW53cmFwcGVkOiEwfSx0aGlzLl9zY3JlZW5SYXljYXN0Q2FjaGVbaV09byxvfX1fYnVmZmVyZWRDYW1lcmFNZXJjYXRvcihlLHQpe2NvbnN0IGk9UihlKTtpZih0aGlzLl9jYW1lcmFSYXljYXN0Q2FjaGVbaV0pcmV0dXJuIHRoaXMuX2NhbWVyYVJheWNhc3RDYWNoZVtpXTt7bGV0IG87cmV0dXJuIG89XCJnbG9iZVwiPT09dC5wcm9qZWN0aW9uLm5hbWU/dGhpcy5fcHJvamVjdEFuZFJlc2FtcGxlKHRoaXMuYnVmZmVyZWRDYW1lcmFHZW9tZXRyeUdsb2JlKGUpLHQpOntwb2x5Z29uOnRoaXMuYnVmZmVyZWRDYW1lcmFHZW9tZXRyeShlKS5tYXAoKGU9PnQucG9pbnRDb29yZGluYXRlM0QoZSkpKSx1bndyYXBwZWQ6ITB9LHRoaXMuX2NhbWVyYVJheWNhc3RDYWNoZVtpXT1vLG99fV9wcm9qZWN0QW5kUmVzYW1wbGUodCxpKXtjb25zdCBvPWZ1bmN0aW9uKHQsaSl7Y29uc3Qgbz1lLm11bHRpcGx5KFtdLGkucGl4ZWxNYXRyaXgsaS5nbG9iZU1hdHJpeCkscj1bMCwtZS5HTE9CRV9SQURJVVMsMCwxXSxuPVswLGUuR0xPQkVfUkFESVVTLDAsMV0scz1bMCwwLDAsMV07ZS50cmFuc2Zvcm1NYXQ0JDEocixyLG8pLGUudHJhbnNmb3JtTWF0NCQxKG4sbixvKSxlLnRyYW5zZm9ybU1hdDQkMShzLHMsbyk7Y29uc3QgYT1uZXcgZS5Qb2ludChyWzBdL3JbM10sclsxXS9yWzNdKSxsPW5ldyBlLlBvaW50KG5bMF0vblszXSxuWzFdL25bM10pLGM9ZS5wb2x5Z29uQ29udGFpbnNQb2ludCh0LGEpJiZyWzNdPHNbM10saD1lLnBvbHlnb25Db250YWluc1BvaW50KHQsbCkmJm5bM108c1szXTtpZighYyYmIWgpcmV0dXJuIG51bGw7Y29uc3QgdT1mdW5jdGlvbihlLHQsaSl7Zm9yKGxldCBvPTE7bzxlLmxlbmd0aDtvKyspe2NvbnN0IHI9eih0LnBvaW50Q29vcmRpbmF0ZTNEKGVbby0xXSkueCksbj16KHQucG9pbnRDb29yZGluYXRlM0QoZVtvXSkueCk7aWYoaTwwKXtpZihyPG4pcmV0dXJuIHtpZHg6byx0Oi1yLyhuLTEtcil9fWVsc2UgaWYobjxyKXJldHVybiB7aWR4Om8sdDooMS1yKS8obisxLXIpfX1yZXR1cm4gbnVsbH0odCxpLGM/LTE6MSk7aWYoIXUpcmV0dXJuIG51bGw7Y29uc3R7aWR4Ol8sdDpkfT11O2xldCBwPV8+MT9BKHQuc2xpY2UoMCxfKSxpKTpbXSxtPV88dC5sZW5ndGg/QSh0LnNsaWNlKF8pLGkpOltdO3A9cC5tYXAoKHQ9Pm5ldyBlLlBvaW50KHoodC54KSx0LnkpKSksbT1tLm1hcCgodD0+bmV3IGUuUG9pbnQoeih0LngpLHQueSkpKTtjb25zdCBmPVsuLi5wXTswPT09Zi5sZW5ndGgmJmYucHVzaChtW20ubGVuZ3RoLTFdKTtjb25zdCBnPWUubnVtYmVyKGZbZi5sZW5ndGgtMV0ueSwoMD09PW0ubGVuZ3RoP3BbMF06bVswXSkueSxkKTtsZXQgdjtyZXR1cm4gdj1jP1tuZXcgZS5Qb2ludCgwLGcpLG5ldyBlLlBvaW50KDAsMCksbmV3IGUuUG9pbnQoMSwwKSxuZXcgZS5Qb2ludCgxLGcpXTpbbmV3IGUuUG9pbnQoMSxnKSxuZXcgZS5Qb2ludCgxLDEpLG5ldyBlLlBvaW50KDAsMSksbmV3IGUuUG9pbnQoMCxnKV0sZi5wdXNoKC4uLnYpLDA9PT1tLmxlbmd0aD9mLnB1c2gocFswXSk6Zi5wdXNoKC4uLm0pLHtwb2x5Z29uOmYubWFwKCh0PT5uZXcgZS5NZXJjYXRvckNvb3JkaW5hdGUodC54LHQueSkpKSx1bndyYXBwZWQ6ITF9fSh0LGkpO2lmKG8pcmV0dXJuIG87Y29uc3Qgcj1mdW5jdGlvbih0LGkpe2xldCBvPSExLHI9LTEvMCxuPTA7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aC0xO2UrKyl0W2VdLng+ciYmKHI9dFtlXS54LG49ZSk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aC0xO2UrKyl7Y29uc3QgaT0obitlKSUodC5sZW5ndGgtMSkscj10W2ldLHM9dFtpKzFdO01hdGguYWJzKHIueC1zLngpPi41JiYoci54PHMueD8oci54Kz0xLDA9PT1pJiYodFt0Lmxlbmd0aC0xXS54Kz0xKSk6KHMueCs9MSxpKzE9PT10Lmxlbmd0aC0xJiYodFswXS54Kz0xKSksbz0hMCk7fWNvbnN0IHM9ZS5tZXJjYXRvclhmcm9tTG5nKGkuY2VudGVyLmxuZyk7cmV0dXJuIG8mJnM8TWF0aC5hYnMocy0xKSYmdC5mb3JFYWNoKChlPT57ZS54LT0xO30pKSx7cG9seWdvbjp0LHVud3JhcHBlZDpvfX0oQSh0LGkpLm1hcCgodD0+bmV3IGUuUG9pbnQoeih0LngpLHQueSkpKSxpKTtyZXR1cm4ge3BvbHlnb246ci5wb2x5Z29uLm1hcCgodD0+bmV3IGUuTWVyY2F0b3JDb29yZGluYXRlKHQueCx0LnkpKSksdW53cmFwcGVkOnIudW53cmFwcGVkfX19ZnVuY3Rpb24gQSh0LGkpe3JldHVybiBlLnJlc2FtcGxlKHQsKGU9Pntjb25zdCB0PWkucG9pbnRDb29yZGluYXRlM0QoZSk7ZS54PXQueCxlLnk9dC55O30pLDEvMjU2KX1mdW5jdGlvbiB6KGUpe3JldHVybiBlPDA/MStlJTE6ZSUxfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIDEwMCplfDB9ZnVuY3Rpb24gTyh0LGksbyxyLG4pe2NvbnN0IHM9ZnVuY3Rpb24obyxyKXtpZihvKXJldHVybiBuKG8pO2lmKHIpe3QudXJsJiZyLnRpbGVzJiZ0LnRpbGVzJiZkZWxldGUgdC50aWxlcztjb25zdCBvPWUucGljayhlLmV4dGVuZChyLHQpLFtcInRpbGVzXCIsXCJtaW56b29tXCIsXCJtYXh6b29tXCIsXCJhdHRyaWJ1dGlvblwiLFwibWFwYm94X2xvZ29cIixcImJvdW5kc1wiLFwic2NoZW1lXCIsXCJ0aWxlU2l6ZVwiLFwiZW5jb2RpbmdcIl0pO3IudmVjdG9yX2xheWVycyYmKG8udmVjdG9yTGF5ZXJzPXIudmVjdG9yX2xheWVycyxvLnZlY3RvckxheWVySWRzPW8udmVjdG9yTGF5ZXJzLm1hcCgoZT0+ZS5pZCkpKSxvLnRpbGVzPWkuY2Fub25pY2FsaXplVGlsZXNldChvLHQudXJsKSxuKG51bGwsbyk7fX07cmV0dXJuIHQudXJsP2UuZ2V0SlNPTihpLnRyYW5zZm9ybVJlcXVlc3QoaS5ub3JtYWxpemVTb3VyY2VVUkwodC51cmwsbnVsbCxvLHIpLGUuUmVzb3VyY2VUeXBlLlNvdXJjZSkscyk6ZS5leHBvcnRlZC5mcmFtZSgoKCk9PnMobnVsbCx0KSkpfWNsYXNzIEJ7Y29uc3RydWN0b3IodCxpLG8pe3RoaXMuYm91bmRzPWUuTG5nTGF0Qm91bmRzLmNvbnZlcnQodGhpcy52YWxpZGF0ZUJvdW5kcyh0KSksdGhpcy5taW56b29tPWl8fDAsdGhpcy5tYXh6b29tPW98fDI0O312YWxpZGF0ZUJvdW5kcyhlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKSYmND09PWUubGVuZ3RoP1tNYXRoLm1heCgtMTgwLGVbMF0pLE1hdGgubWF4KC05MCxlWzFdKSxNYXRoLm1pbigxODAsZVsyXSksTWF0aC5taW4oOTAsZVszXSldOlstMTgwLC05MCwxODAsOTBdfWNvbnRhaW5zKHQpe2NvbnN0IGk9TWF0aC5wb3coMix0LnopLG89TWF0aC5mbG9vcihlLm1lcmNhdG9yWGZyb21MbmcodGhpcy5ib3VuZHMuZ2V0V2VzdCgpKSppKSxyPU1hdGguZmxvb3IoZS5tZXJjYXRvcllmcm9tTGF0KHRoaXMuYm91bmRzLmdldE5vcnRoKCkpKmkpLG49TWF0aC5jZWlsKGUubWVyY2F0b3JYZnJvbUxuZyh0aGlzLmJvdW5kcy5nZXRFYXN0KCkpKmkpLHM9TWF0aC5jZWlsKGUubWVyY2F0b3JZZnJvbUxhdCh0aGlzLmJvdW5kcy5nZXRTb3V0aCgpKSppKTtyZXR1cm4gdC54Pj1vJiZ0Lng8biYmdC55Pj1yJiZ0Lnk8c319Y2xhc3Mga3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5jb250ZXh0PWU7Y29uc3Qgbz1lLmdsO3RoaXMuYnVmZmVyPW8uY3JlYXRlQnVmZmVyKCksdGhpcy5keW5hbWljRHJhdz1Cb29sZWFuKGkpLHRoaXMuY29udGV4dC51bmJpbmRWQU8oKSxlLmJpbmRFbGVtZW50QnVmZmVyLnNldCh0aGlzLmJ1ZmZlciksby5idWZmZXJEYXRhKG8uRUxFTUVOVF9BUlJBWV9CVUZGRVIsdC5hcnJheUJ1ZmZlcix0aGlzLmR5bmFtaWNEcmF3P28uRFlOQU1JQ19EUkFXOm8uU1RBVElDX0RSQVcpLHRoaXMuZHluYW1pY0RyYXd8fHQuZGVzdHJveSgpO31iaW5kKCl7dGhpcy5jb250ZXh0LmJpbmRFbGVtZW50QnVmZmVyLnNldCh0aGlzLmJ1ZmZlcik7fXVwZGF0ZURhdGEoZSl7Y29uc3QgdD10aGlzLmNvbnRleHQuZ2w7dGhpcy5jb250ZXh0LnVuYmluZFZBTygpLHRoaXMuYmluZCgpLHQuYnVmZmVyU3ViRGF0YSh0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLDAsZS5hcnJheUJ1ZmZlcik7fWRlc3Ryb3koKXt0aGlzLmJ1ZmZlciYmKHRoaXMuY29udGV4dC5nbC5kZWxldGVCdWZmZXIodGhpcy5idWZmZXIpLGRlbGV0ZSB0aGlzLmJ1ZmZlcik7fX1jb25zdCBGPXtJbnQ4OlwiQllURVwiLFVpbnQ4OlwiVU5TSUdORURfQllURVwiLEludDE2OlwiU0hPUlRcIixVaW50MTY6XCJVTlNJR05FRF9TSE9SVFwiLEludDMyOlwiSU5UXCIsVWludDMyOlwiVU5TSUdORURfSU5UXCIsRmxvYXQzMjpcIkZMT0FUXCJ9O2NsYXNzIFV7Y29uc3RydWN0b3IoZSx0LGksbyl7dGhpcy5sZW5ndGg9dC5sZW5ndGgsdGhpcy5hdHRyaWJ1dGVzPWksdGhpcy5pdGVtU2l6ZT10LmJ5dGVzUGVyRWxlbWVudCx0aGlzLmR5bmFtaWNEcmF3PW8sdGhpcy5jb250ZXh0PWU7Y29uc3Qgcj1lLmdsO3RoaXMuYnVmZmVyPXIuY3JlYXRlQnVmZmVyKCksZS5iaW5kVmVydGV4QnVmZmVyLnNldCh0aGlzLmJ1ZmZlciksci5idWZmZXJEYXRhKHIuQVJSQVlfQlVGRkVSLHQuYXJyYXlCdWZmZXIsdGhpcy5keW5hbWljRHJhdz9yLkRZTkFNSUNfRFJBVzpyLlNUQVRJQ19EUkFXKSx0aGlzLmR5bmFtaWNEcmF3fHx0LmRlc3Ryb3koKTt9YmluZCgpe3RoaXMuY29udGV4dC5iaW5kVmVydGV4QnVmZmVyLnNldCh0aGlzLmJ1ZmZlcik7fXVwZGF0ZURhdGEoZSl7Y29uc3QgdD10aGlzLmNvbnRleHQuZ2w7dGhpcy5iaW5kKCksdC5idWZmZXJTdWJEYXRhKHQuQVJSQVlfQlVGRkVSLDAsZS5hcnJheUJ1ZmZlcik7fWVuYWJsZUF0dHJpYnV0ZXMoZSx0KXtmb3IobGV0IGk9MDtpPHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7aSsrKXtjb25zdCBvPXQuYXR0cmlidXRlc1t0aGlzLmF0dHJpYnV0ZXNbaV0ubmFtZV07dm9pZCAwIT09byYmZS5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShvKTt9fXNldFZlcnRleEF0dHJpYlBvaW50ZXJzKGUsdCxpKXtmb3IobGV0IG89MDtvPHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7bysrKXtjb25zdCByPXRoaXMuYXR0cmlidXRlc1tvXSxuPXQuYXR0cmlidXRlc1tyLm5hbWVdO3ZvaWQgMCE9PW4mJmUudmVydGV4QXR0cmliUG9pbnRlcihuLHIuY29tcG9uZW50cyxlW0Zbci50eXBlXV0sITEsdGhpcy5pdGVtU2l6ZSxyLm9mZnNldCt0aGlzLml0ZW1TaXplKihpfHwwKSk7fX1kZXN0cm95KCl7dGhpcy5idWZmZXImJih0aGlzLmNvbnRleHQuZ2wuZGVsZXRlQnVmZmVyKHRoaXMuYnVmZmVyKSxkZWxldGUgdGhpcy5idWZmZXIpO319Y2xhc3MgTntjb25zdHJ1Y3RvcihlKXt0aGlzLmdsPWUuZ2wsdGhpcy5kZWZhdWx0PXRoaXMuZ2V0RGVmYXVsdCgpLHRoaXMuY3VycmVudD10aGlzLmRlZmF1bHQsdGhpcy5kaXJ0eT0hMTt9Z2V0KCl7cmV0dXJuIHRoaXMuY3VycmVudH1zZXQoZSl7fWdldERlZmF1bHQoKXtyZXR1cm4gdGhpcy5kZWZhdWx0fXNldERlZmF1bHQoKXt0aGlzLnNldCh0aGlzLmRlZmF1bHQpO319Y2xhc3MgaiBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiBlLkNvbG9yLnRyYW5zcGFyZW50fXNldChlKXtjb25zdCB0PXRoaXMuY3VycmVudDsoZS5yIT09dC5yfHxlLmchPT10Lmd8fGUuYiE9PXQuYnx8ZS5hIT09dC5hfHx0aGlzLmRpcnR5KSYmKHRoaXMuZ2wuY2xlYXJDb2xvcihlLnIsZS5nLGUuYixlLmEpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgRyBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiAxfXNldChlKXsoZSE9PXRoaXMuY3VycmVudHx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLmNsZWFyRGVwdGgoZSksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMSk7fX1jbGFzcyBaIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuIDB9c2V0KGUpeyhlIT09dGhpcy5jdXJyZW50fHx0aGlzLmRpcnR5KSYmKHRoaXMuZ2wuY2xlYXJTdGVuY2lsKGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgViBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiBbITAsITAsITAsITBdfXNldChlKXtjb25zdCB0PXRoaXMuY3VycmVudDsoZVswXSE9PXRbMF18fGVbMV0hPT10WzFdfHxlWzJdIT09dFsyXXx8ZVszXSE9PXRbM118fHRoaXMuZGlydHkpJiYodGhpcy5nbC5jb2xvck1hc2soZVswXSxlWzFdLGVbMl0sZVszXSksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMSk7fX1jbGFzcyBXIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuICEwfXNldChlKXsoZSE9PXRoaXMuY3VycmVudHx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLmRlcHRoTWFzayhlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExKTt9fWNsYXNzIFggZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gMjU1fXNldChlKXsoZSE9PXRoaXMuY3VycmVudHx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLnN0ZW5jaWxNYXNrKGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgcSBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiB7ZnVuYzp0aGlzLmdsLkFMV0FZUyxyZWY6MCxtYXNrOjI1NX19c2V0KGUpe2NvbnN0IHQ9dGhpcy5jdXJyZW50OyhlLmZ1bmMhPT10LmZ1bmN8fGUucmVmIT09dC5yZWZ8fGUubWFzayE9PXQubWFza3x8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLnN0ZW5jaWxGdW5jKGUuZnVuYyxlLnJlZixlLm1hc2spLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgJCBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe2NvbnN0IGU9dGhpcy5nbDtyZXR1cm4gW2UuS0VFUCxlLktFRVAsZS5LRUVQXX1zZXQoZSl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7KGVbMF0hPT10WzBdfHxlWzFdIT09dFsxXXx8ZVsyXSE9PXRbMl18fHRoaXMuZGlydHkpJiYodGhpcy5nbC5zdGVuY2lsT3AoZVswXSxlWzFdLGVbMl0pLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgSCBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiAhMX1zZXQoZSl7aWYoZT09PXRoaXMuY3VycmVudCYmIXRoaXMuZGlydHkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nbDtlP3QuZW5hYmxlKHQuU1RFTkNJTF9URVNUKTp0LmRpc2FibGUodC5TVEVOQ0lMX1RFU1QpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITE7fX1jbGFzcyBZIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuIFswLDFdfXNldChlKXtjb25zdCB0PXRoaXMuY3VycmVudDsoZVswXSE9PXRbMF18fGVbMV0hPT10WzFdfHx0aGlzLmRpcnR5KSYmKHRoaXMuZ2wuZGVwdGhSYW5nZShlWzBdLGVbMV0pLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgSyBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiAhMX1zZXQoZSl7aWYoZT09PXRoaXMuY3VycmVudCYmIXRoaXMuZGlydHkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nbDtlP3QuZW5hYmxlKHQuREVQVEhfVEVTVCk6dC5kaXNhYmxlKHQuREVQVEhfVEVTVCksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMTt9fWNsYXNzIEogZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gdGhpcy5nbC5MRVNTfXNldChlKXsoZSE9PXRoaXMuY3VycmVudHx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLmRlcHRoRnVuYyhlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExKTt9fWNsYXNzIFEgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gITF9c2V0KGUpe2lmKGU9PT10aGlzLmN1cnJlbnQmJiF0aGlzLmRpcnR5KXJldHVybjtjb25zdCB0PXRoaXMuZ2w7ZT90LmVuYWJsZSh0LkJMRU5EKTp0LmRpc2FibGUodC5CTEVORCksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMTt9fWNsYXNzIGVlIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7Y29uc3QgZT10aGlzLmdsO3JldHVybiBbZS5PTkUsZS5aRVJPXX1zZXQoZSl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7KGVbMF0hPT10WzBdfHxlWzFdIT09dFsxXXx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLmJsZW5kRnVuYyhlWzBdLGVbMV0pLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgdGUgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gZS5Db2xvci50cmFuc3BhcmVudH1zZXQoZSl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7KGUuciE9PXQucnx8ZS5nIT09dC5nfHxlLmIhPT10LmJ8fGUuYSE9PXQuYXx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLmJsZW5kQ29sb3IoZS5yLGUuZyxlLmIsZS5hKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExKTt9fWNsYXNzIGllIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuIHRoaXMuZ2wuRlVOQ19BRER9c2V0KGUpeyhlIT09dGhpcy5jdXJyZW50fHx0aGlzLmRpcnR5KSYmKHRoaXMuZ2wuYmxlbmRFcXVhdGlvbihlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExKTt9fWNsYXNzIG9lIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuICExfXNldChlKXtpZihlPT09dGhpcy5jdXJyZW50JiYhdGhpcy5kaXJ0eSlyZXR1cm47Y29uc3QgdD10aGlzLmdsO2U/dC5lbmFibGUodC5DVUxMX0ZBQ0UpOnQuZGlzYWJsZSh0LkNVTExfRkFDRSksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMTt9fWNsYXNzIHJlIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuIHRoaXMuZ2wuQkFDS31zZXQoZSl7KGUhPT10aGlzLmN1cnJlbnR8fHRoaXMuZGlydHkpJiYodGhpcy5nbC5jdWxsRmFjZShlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExKTt9fWNsYXNzIG5lIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuIHRoaXMuZ2wuQ0NXfXNldChlKXsoZSE9PXRoaXMuY3VycmVudHx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLmZyb250RmFjZShlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExKTt9fWxldCBzZSxhZT1jbGFzcyBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiBudWxsfXNldChlKXsoZSE9PXRoaXMuY3VycmVudHx8dGhpcy5kaXJ0eSkmJih0aGlzLmdsLnVzZVByb2dyYW0oZSksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMSk7fX07Y2xhc3MgbGUgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gdGhpcy5nbC5URVhUVVJFMH1zZXQoZSl7KGUhPT10aGlzLmN1cnJlbnR8fHRoaXMuZGlydHkpJiYodGhpcy5nbC5hY3RpdmVUZXh0dXJlKGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgY2UgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtjb25zdCBlPXRoaXMuZ2w7cmV0dXJuIFswLDAsZS5kcmF3aW5nQnVmZmVyV2lkdGgsZS5kcmF3aW5nQnVmZmVySGVpZ2h0XX1zZXQoZSl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7KGVbMF0hPT10WzBdfHxlWzFdIT09dFsxXXx8ZVsyXSE9PXRbMl18fGVbM10hPT10WzNdfHx0aGlzLmRpcnR5KSYmKHRoaXMuZ2wudmlld3BvcnQoZVswXSxlWzFdLGVbMl0sZVszXSksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMSk7fX1jbGFzcyBoZSBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiBudWxsfXNldChlKXtpZihlPT09dGhpcy5jdXJyZW50JiYhdGhpcy5kaXJ0eSlyZXR1cm47Y29uc3QgdD10aGlzLmdsO3QuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsZSksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMTt9fWNsYXNzIHVlIGV4dGVuZHMgTntnZXREZWZhdWx0KCl7cmV0dXJuIG51bGx9c2V0KGUpe2lmKGU9PT10aGlzLmN1cnJlbnQmJiF0aGlzLmRpcnR5KXJldHVybjtjb25zdCB0PXRoaXMuZ2w7dC5iaW5kUmVuZGVyYnVmZmVyKHQuUkVOREVSQlVGRkVSLGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITE7fX1jbGFzcyBfZSBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiBudWxsfXNldChlKXtpZihlPT09dGhpcy5jdXJyZW50JiYhdGhpcy5kaXJ0eSlyZXR1cm47Y29uc3QgdD10aGlzLmdsO3QuYmluZFRleHR1cmUodC5URVhUVVJFXzJELGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITE7fX1jbGFzcyBkZSBleHRlbmRzIE57Z2V0RGVmYXVsdCgpe3JldHVybiBudWxsfXNldChlKXtpZihlPT09dGhpcy5jdXJyZW50JiYhdGhpcy5kaXJ0eSlyZXR1cm47Y29uc3QgdD10aGlzLmdsO3QuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExO319Y2xhc3MgcGUgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gbnVsbH1zZXQoZSl7Y29uc3QgdD10aGlzLmdsO3QuYmluZEJ1ZmZlcih0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITE7fX1jbGFzcyBtZSBleHRlbmRzIE57Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy52YW89ZS5leHRWZXJ0ZXhBcnJheU9iamVjdDt9Z2V0RGVmYXVsdCgpe3JldHVybiBudWxsfXNldChlKXt0aGlzLnZhbyYmKGUhPT10aGlzLmN1cnJlbnR8fHRoaXMuZGlydHkpJiYodGhpcy52YW8uYmluZFZlcnRleEFycmF5T0VTKGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITEpO319Y2xhc3MgZmUgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gNH1zZXQoZSl7aWYoZT09PXRoaXMuY3VycmVudCYmIXRoaXMuZGlydHkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nbDt0LnBpeGVsU3RvcmVpKHQuVU5QQUNLX0FMSUdOTUVOVCxlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExO319Y2xhc3MgZ2UgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gITF9c2V0KGUpe2lmKGU9PT10aGlzLmN1cnJlbnQmJiF0aGlzLmRpcnR5KXJldHVybjtjb25zdCB0PXRoaXMuZ2w7dC5waXhlbFN0b3JlaSh0LlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCxlKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExO319Y2xhc3MgdmUgZXh0ZW5kcyBOe2dldERlZmF1bHQoKXtyZXR1cm4gITF9c2V0KGUpe2lmKGU9PT10aGlzLmN1cnJlbnQmJiF0aGlzLmRpcnR5KXJldHVybjtjb25zdCB0PXRoaXMuZ2w7dC5waXhlbFN0b3JlaSh0LlVOUEFDS19GTElQX1lfV0VCR0wsZSksdGhpcy5jdXJyZW50PWUsdGhpcy5kaXJ0eT0hMTt9fWNsYXNzIHhlIGV4dGVuZHMgTntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUpLHRoaXMuY29udGV4dD1lLHRoaXMucGFyZW50PXQ7fWdldERlZmF1bHQoKXtyZXR1cm4gbnVsbH19Y2xhc3MgeWUgZXh0ZW5kcyB4ZXtzZXREaXJ0eSgpe3RoaXMuZGlydHk9ITA7fXNldChlKXtpZihlPT09dGhpcy5jdXJyZW50JiYhdGhpcy5kaXJ0eSlyZXR1cm47dGhpcy5jb250ZXh0LmJpbmRGcmFtZWJ1ZmZlci5zZXQodGhpcy5wYXJlbnQpO2NvbnN0IHQ9dGhpcy5nbDt0LmZyYW1lYnVmZmVyVGV4dHVyZTJEKHQuRlJBTUVCVUZGRVIsdC5DT0xPUl9BVFRBQ0hNRU5UMCx0LlRFWFRVUkVfMkQsZSwwKSx0aGlzLmN1cnJlbnQ9ZSx0aGlzLmRpcnR5PSExO319Y2xhc3MgYmUgZXh0ZW5kcyB4ZXthdHRhY2htZW50KCl7cmV0dXJuIHRoaXMuZ2wuREVQVEhfQVRUQUNITUVOVH1zZXQoZSl7aWYoZT09PXRoaXMuY3VycmVudCYmIXRoaXMuZGlydHkpcmV0dXJuO3RoaXMuY29udGV4dC5iaW5kRnJhbWVidWZmZXIuc2V0KHRoaXMucGFyZW50KTtjb25zdCB0PXRoaXMuZ2w7dC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcih0LkZSQU1FQlVGRkVSLHRoaXMuYXR0YWNobWVudCgpLHQuUkVOREVSQlVGRkVSLGUpLHRoaXMuY3VycmVudD1lLHRoaXMuZGlydHk9ITE7fX1jbGFzcyB3ZSBleHRlbmRzIGJle2F0dGFjaG1lbnQoKXtyZXR1cm4gdGhpcy5nbC5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlR9fWNsYXNzIFRle2NvbnN0cnVjdG9yKGUsdCxpLG8pe3RoaXMuY29udGV4dD1lLHRoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1pO2NvbnN0IHI9dGhpcy5mcmFtZWJ1ZmZlcj1lLmdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7dGhpcy5jb2xvckF0dGFjaG1lbnQ9bmV3IHllKGUsciksbyYmKHRoaXMuZGVwdGhBdHRhY2htZW50PW5ldyBiZShlLHIpKTt9ZGVzdHJveSgpe2NvbnN0IGU9dGhpcy5jb250ZXh0LmdsLHQ9dGhpcy5jb2xvckF0dGFjaG1lbnQuZ2V0KCk7aWYodCYmZS5kZWxldGVUZXh0dXJlKHQpLHRoaXMuZGVwdGhBdHRhY2htZW50KXtjb25zdCB0PXRoaXMuZGVwdGhBdHRhY2htZW50LmdldCgpO3QmJmUuZGVsZXRlUmVuZGVyYnVmZmVyKHQpO31lLmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuZnJhbWVidWZmZXIpO319Y2xhc3MgRWV7Y29uc3RydWN0b3IoZSx0PSExKXtpZih0aGlzLmdsPWUsdGhpcy5pc1dlYkdMMj10LHRoaXMuZXh0VmVydGV4QXJyYXlPYmplY3Q9dGhpcy5nbC5nZXRFeHRlbnNpb24oXCJPRVNfdmVydGV4X2FycmF5X29iamVjdFwiKSx0KXtjb25zdCB0PWU7dGhpcy5leHRWZXJ0ZXhBcnJheU9iamVjdD17Y3JlYXRlVmVydGV4QXJyYXlPRVM6dC5jcmVhdGVWZXJ0ZXhBcnJheS5iaW5kKGUpLGRlbGV0ZVZlcnRleEFycmF5T0VTOnQuZGVsZXRlVmVydGV4QXJyYXkuYmluZChlKSxiaW5kVmVydGV4QXJyYXlPRVM6dC5iaW5kVmVydGV4QXJyYXkuYmluZChlKX07fXRoaXMuY2xlYXJDb2xvcj1uZXcgaih0aGlzKSx0aGlzLmNsZWFyRGVwdGg9bmV3IEcodGhpcyksdGhpcy5jbGVhclN0ZW5jaWw9bmV3IFoodGhpcyksdGhpcy5jb2xvck1hc2s9bmV3IFYodGhpcyksdGhpcy5kZXB0aE1hc2s9bmV3IFcodGhpcyksdGhpcy5zdGVuY2lsTWFzaz1uZXcgWCh0aGlzKSx0aGlzLnN0ZW5jaWxGdW5jPW5ldyBxKHRoaXMpLHRoaXMuc3RlbmNpbE9wPW5ldyAkKHRoaXMpLHRoaXMuc3RlbmNpbFRlc3Q9bmV3IEgodGhpcyksdGhpcy5kZXB0aFJhbmdlPW5ldyBZKHRoaXMpLHRoaXMuZGVwdGhUZXN0PW5ldyBLKHRoaXMpLHRoaXMuZGVwdGhGdW5jPW5ldyBKKHRoaXMpLHRoaXMuYmxlbmQ9bmV3IFEodGhpcyksdGhpcy5ibGVuZEZ1bmM9bmV3IGVlKHRoaXMpLHRoaXMuYmxlbmRDb2xvcj1uZXcgdGUodGhpcyksdGhpcy5ibGVuZEVxdWF0aW9uPW5ldyBpZSh0aGlzKSx0aGlzLmN1bGxGYWNlPW5ldyBvZSh0aGlzKSx0aGlzLmN1bGxGYWNlU2lkZT1uZXcgcmUodGhpcyksdGhpcy5mcm9udEZhY2U9bmV3IG5lKHRoaXMpLHRoaXMucHJvZ3JhbT1uZXcgYWUodGhpcyksdGhpcy5hY3RpdmVUZXh0dXJlPW5ldyBsZSh0aGlzKSx0aGlzLnZpZXdwb3J0PW5ldyBjZSh0aGlzKSx0aGlzLmJpbmRGcmFtZWJ1ZmZlcj1uZXcgaGUodGhpcyksdGhpcy5iaW5kUmVuZGVyYnVmZmVyPW5ldyB1ZSh0aGlzKSx0aGlzLmJpbmRUZXh0dXJlPW5ldyBfZSh0aGlzKSx0aGlzLmJpbmRWZXJ0ZXhCdWZmZXI9bmV3IGRlKHRoaXMpLHRoaXMuYmluZEVsZW1lbnRCdWZmZXI9bmV3IHBlKHRoaXMpLHRoaXMuYmluZFZlcnRleEFycmF5T0VTPXRoaXMuZXh0VmVydGV4QXJyYXlPYmplY3QmJm5ldyBtZSh0aGlzKSx0aGlzLnBpeGVsU3RvcmVVbnBhY2s9bmV3IGZlKHRoaXMpLHRoaXMucGl4ZWxTdG9yZVVucGFja1ByZW11bHRpcGx5QWxwaGE9bmV3IGdlKHRoaXMpLHRoaXMucGl4ZWxTdG9yZVVucGFja0ZsaXBZPW5ldyB2ZSh0aGlzKSx0aGlzLmV4dFRleHR1cmVGaWx0ZXJBbmlzb3Ryb3BpYz1lLmdldEV4dGVuc2lvbihcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8ZS5nZXRFeHRlbnNpb24oXCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHxlLmdldEV4dGVuc2lvbihcIldFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIiksdGhpcy5leHRUZXh0dXJlRmlsdGVyQW5pc290cm9waWMmJih0aGlzLmV4dFRleHR1cmVGaWx0ZXJBbmlzb3Ryb3BpY01heD1lLmdldFBhcmFtZXRlcih0aGlzLmV4dFRleHR1cmVGaWx0ZXJBbmlzb3Ryb3BpYy5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpKSx0aGlzLmV4dFRleHR1cmVGaWx0ZXJBbmlzb3Ryb3BpY0ZvcmNlT2ZmPSExLHRoaXMuZXh0U3RhbmRhcmREZXJpdmF0aXZlc0ZvcmNlT2ZmPSExLHRoaXMuZXh0RGVidWdSZW5kZXJlckluZm89ZS5nZXRFeHRlbnNpb24oXCJXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvXCIpLHRoaXMuZXh0RGVidWdSZW5kZXJlckluZm8mJih0aGlzLnJlbmRlcmVyPWUuZ2V0UGFyYW1ldGVyKHRoaXMuZXh0RGVidWdSZW5kZXJlckluZm8uVU5NQVNLRURfUkVOREVSRVJfV0VCR0wpLHRoaXMudmVuZG9yPWUuZ2V0UGFyYW1ldGVyKHRoaXMuZXh0RGVidWdSZW5kZXJlckluZm8uVU5NQVNLRURfVkVORE9SX1dFQkdMKSksdHx8KHRoaXMuZXh0VGV4dHVyZUhhbGZGbG9hdD1lLmdldEV4dGVuc2lvbihcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIikpLCh0fHx0aGlzLmV4dFRleHR1cmVIYWxmRmxvYXQmJmUuZ2V0RXh0ZW5zaW9uKFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIikpJiYodGhpcy5leHRSZW5kZXJUb1RleHR1cmVIYWxmRmxvYXQ9ZS5nZXRFeHRlbnNpb24oXCJFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXRcIikpLHRoaXMuZXh0U3RhbmRhcmREZXJpdmF0aXZlcz10fHxlLmdldEV4dGVuc2lvbihcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKSx0aGlzLmV4dFRpbWVyUXVlcnk9ZS5nZXRFeHRlbnNpb24oXCJFWFRfZGlzam9pbnRfdGltZXJfcXVlcnlcIiksdGhpcy5tYXhUZXh0dXJlU2l6ZT1lLmdldFBhcmFtZXRlcihlLk1BWF9URVhUVVJFX1NJWkUpO31zZXREZWZhdWx0KCl7dGhpcy51bmJpbmRWQU8oKSx0aGlzLmNsZWFyQ29sb3Iuc2V0RGVmYXVsdCgpLHRoaXMuY2xlYXJEZXB0aC5zZXREZWZhdWx0KCksdGhpcy5jbGVhclN0ZW5jaWwuc2V0RGVmYXVsdCgpLHRoaXMuY29sb3JNYXNrLnNldERlZmF1bHQoKSx0aGlzLmRlcHRoTWFzay5zZXREZWZhdWx0KCksdGhpcy5zdGVuY2lsTWFzay5zZXREZWZhdWx0KCksdGhpcy5zdGVuY2lsRnVuYy5zZXREZWZhdWx0KCksdGhpcy5zdGVuY2lsT3Auc2V0RGVmYXVsdCgpLHRoaXMuc3RlbmNpbFRlc3Quc2V0RGVmYXVsdCgpLHRoaXMuZGVwdGhSYW5nZS5zZXREZWZhdWx0KCksdGhpcy5kZXB0aFRlc3Quc2V0RGVmYXVsdCgpLHRoaXMuZGVwdGhGdW5jLnNldERlZmF1bHQoKSx0aGlzLmJsZW5kLnNldERlZmF1bHQoKSx0aGlzLmJsZW5kRnVuYy5zZXREZWZhdWx0KCksdGhpcy5ibGVuZENvbG9yLnNldERlZmF1bHQoKSx0aGlzLmJsZW5kRXF1YXRpb24uc2V0RGVmYXVsdCgpLHRoaXMuY3VsbEZhY2Uuc2V0RGVmYXVsdCgpLHRoaXMuY3VsbEZhY2VTaWRlLnNldERlZmF1bHQoKSx0aGlzLmZyb250RmFjZS5zZXREZWZhdWx0KCksdGhpcy5wcm9ncmFtLnNldERlZmF1bHQoKSx0aGlzLmFjdGl2ZVRleHR1cmUuc2V0RGVmYXVsdCgpLHRoaXMuYmluZEZyYW1lYnVmZmVyLnNldERlZmF1bHQoKSx0aGlzLnBpeGVsU3RvcmVVbnBhY2suc2V0RGVmYXVsdCgpLHRoaXMucGl4ZWxTdG9yZVVucGFja1ByZW11bHRpcGx5QWxwaGEuc2V0RGVmYXVsdCgpLHRoaXMucGl4ZWxTdG9yZVVucGFja0ZsaXBZLnNldERlZmF1bHQoKTt9c2V0RGlydHkoKXt0aGlzLmNsZWFyQ29sb3IuZGlydHk9ITAsdGhpcy5jbGVhckRlcHRoLmRpcnR5PSEwLHRoaXMuY2xlYXJTdGVuY2lsLmRpcnR5PSEwLHRoaXMuY29sb3JNYXNrLmRpcnR5PSEwLHRoaXMuZGVwdGhNYXNrLmRpcnR5PSEwLHRoaXMuc3RlbmNpbE1hc2suZGlydHk9ITAsdGhpcy5zdGVuY2lsRnVuYy5kaXJ0eT0hMCx0aGlzLnN0ZW5jaWxPcC5kaXJ0eT0hMCx0aGlzLnN0ZW5jaWxUZXN0LmRpcnR5PSEwLHRoaXMuZGVwdGhSYW5nZS5kaXJ0eT0hMCx0aGlzLmRlcHRoVGVzdC5kaXJ0eT0hMCx0aGlzLmRlcHRoRnVuYy5kaXJ0eT0hMCx0aGlzLmJsZW5kLmRpcnR5PSEwLHRoaXMuYmxlbmRGdW5jLmRpcnR5PSEwLHRoaXMuYmxlbmRDb2xvci5kaXJ0eT0hMCx0aGlzLmJsZW5kRXF1YXRpb24uZGlydHk9ITAsdGhpcy5jdWxsRmFjZS5kaXJ0eT0hMCx0aGlzLmN1bGxGYWNlU2lkZS5kaXJ0eT0hMCx0aGlzLmZyb250RmFjZS5kaXJ0eT0hMCx0aGlzLnByb2dyYW0uZGlydHk9ITAsdGhpcy5hY3RpdmVUZXh0dXJlLmRpcnR5PSEwLHRoaXMudmlld3BvcnQuZGlydHk9ITAsdGhpcy5iaW5kRnJhbWVidWZmZXIuZGlydHk9ITAsdGhpcy5iaW5kUmVuZGVyYnVmZmVyLmRpcnR5PSEwLHRoaXMuYmluZFRleHR1cmUuZGlydHk9ITAsdGhpcy5iaW5kVmVydGV4QnVmZmVyLmRpcnR5PSEwLHRoaXMuYmluZEVsZW1lbnRCdWZmZXIuZGlydHk9ITAsdGhpcy5leHRWZXJ0ZXhBcnJheU9iamVjdCYmKHRoaXMuYmluZFZlcnRleEFycmF5T0VTLmRpcnR5PSEwKSx0aGlzLnBpeGVsU3RvcmVVbnBhY2suZGlydHk9ITAsdGhpcy5waXhlbFN0b3JlVW5wYWNrUHJlbXVsdGlwbHlBbHBoYS5kaXJ0eT0hMCx0aGlzLnBpeGVsU3RvcmVVbnBhY2tGbGlwWS5kaXJ0eT0hMDt9Y3JlYXRlSW5kZXhCdWZmZXIoZSx0KXtyZXR1cm4gbmV3IGsodGhpcyxlLHQpfWNyZWF0ZVZlcnRleEJ1ZmZlcihlLHQsaSl7cmV0dXJuIG5ldyBVKHRoaXMsZSx0LGkpfWNyZWF0ZVJlbmRlcmJ1ZmZlcihlLHQsaSl7Y29uc3Qgbz10aGlzLmdsLHI9by5jcmVhdGVSZW5kZXJidWZmZXIoKTtyZXR1cm4gdGhpcy5iaW5kUmVuZGVyYnVmZmVyLnNldChyKSxvLnJlbmRlcmJ1ZmZlclN0b3JhZ2Uoby5SRU5ERVJCVUZGRVIsZSx0LGkpLHRoaXMuYmluZFJlbmRlcmJ1ZmZlci5zZXQobnVsbCkscn1jcmVhdGVGcmFtZWJ1ZmZlcihlLHQsaSl7cmV0dXJuIG5ldyBUZSh0aGlzLGUsdCxpKX1jbGVhcih7Y29sb3I6ZSxkZXB0aDp0LHN0ZW5jaWw6aX0pe2NvbnN0IG89dGhpcy5nbDtsZXQgcj0wO2UmJihyfD1vLkNPTE9SX0JVRkZFUl9CSVQsdGhpcy5jbGVhckNvbG9yLnNldChlKSx0aGlzLmNvbG9yTWFzay5zZXQoWyEwLCEwLCEwLCEwXSkpLHZvaWQgMCE9PXQmJihyfD1vLkRFUFRIX0JVRkZFUl9CSVQsdGhpcy5kZXB0aFJhbmdlLnNldChbMCwxXSksdGhpcy5jbGVhckRlcHRoLnNldCh0KSx0aGlzLmRlcHRoTWFzay5zZXQoITApKSx2b2lkIDAhPT1pJiYocnw9by5TVEVOQ0lMX0JVRkZFUl9CSVQsdGhpcy5jbGVhclN0ZW5jaWwuc2V0KGkpLHRoaXMuc3RlbmNpbE1hc2suc2V0KDI1NSkpLG8uY2xlYXIocik7fXNldEN1bGxGYWNlKGUpeyExPT09ZS5lbmFibGU/dGhpcy5jdWxsRmFjZS5zZXQoITEpOih0aGlzLmN1bGxGYWNlLnNldCghMCksdGhpcy5jdWxsRmFjZVNpZGUuc2V0KGUubW9kZSksdGhpcy5mcm9udEZhY2Uuc2V0KGUuZnJvbnRGYWNlKSk7fXNldERlcHRoTW9kZShlKXtlLmZ1bmMhPT10aGlzLmdsLkFMV0FZU3x8ZS5tYXNrPyh0aGlzLmRlcHRoVGVzdC5zZXQoITApLHRoaXMuZGVwdGhGdW5jLnNldChlLmZ1bmMpLHRoaXMuZGVwdGhNYXNrLnNldChlLm1hc2spLHRoaXMuZGVwdGhSYW5nZS5zZXQoZS5yYW5nZSkpOnRoaXMuZGVwdGhUZXN0LnNldCghMSk7fXNldFN0ZW5jaWxNb2RlKGUpe2UudGVzdC5mdW5jIT09dGhpcy5nbC5BTFdBWVN8fGUubWFzaz8odGhpcy5zdGVuY2lsVGVzdC5zZXQoITApLHRoaXMuc3RlbmNpbE1hc2suc2V0KGUubWFzayksdGhpcy5zdGVuY2lsT3Auc2V0KFtlLmZhaWwsZS5kZXB0aEZhaWwsZS5wYXNzXSksdGhpcy5zdGVuY2lsRnVuYy5zZXQoe2Z1bmM6ZS50ZXN0LmZ1bmMscmVmOmUucmVmLG1hc2s6ZS50ZXN0Lm1hc2t9KSk6dGhpcy5zdGVuY2lsVGVzdC5zZXQoITEpO31zZXRDb2xvck1vZGUoaSl7dChpLmJsZW5kRnVuY3Rpb24sZS5Db2xvck1vZGUuUmVwbGFjZSk/dGhpcy5ibGVuZC5zZXQoITEpOih0aGlzLmJsZW5kLnNldCghMCksdGhpcy5ibGVuZEZ1bmMuc2V0KGkuYmxlbmRGdW5jdGlvbiksdGhpcy5ibGVuZENvbG9yLnNldChpLmJsZW5kQ29sb3IpKSx0aGlzLmNvbG9yTWFzay5zZXQoaS5tYXNrKTt9dW5iaW5kVkFPKCl7dGhpcy5leHRWZXJ0ZXhBcnJheU9iamVjdCYmdGhpcy5iaW5kVmVydGV4QXJyYXlPRVMuc2V0KG51bGwpO319Y2xhc3MgQ2UgZXh0ZW5kcyBlLkV2ZW50ZWR7Y29uc3RydWN0b3IodCxpLG8scil7aWYoc3VwZXIoKSx0aGlzLmlkPXQsdGhpcy5kaXNwYXRjaGVyPW8sdGhpcy50eXBlPVwidmVjdG9yXCIsdGhpcy5taW56b29tPTAsdGhpcy5tYXh6b29tPTIyLHRoaXMuc2NoZW1lPVwieHl6XCIsdGhpcy50aWxlU2l6ZT01MTIsdGhpcy5yZXBhcnNlT3ZlcnNjYWxlZD0hMCx0aGlzLmlzVGlsZUNsaXBwZWQ9ITAsdGhpcy5fbG9hZGVkPSExLGUuZXh0ZW5kKHRoaXMsZS5waWNrKGksW1widXJsXCIsXCJzY2hlbWVcIixcInRpbGVTaXplXCIsXCJwcm9tb3RlSWRcIl0pKSx0aGlzLl9vcHRpb25zPWUuZXh0ZW5kKHt0eXBlOlwidmVjdG9yXCJ9LGkpLHRoaXMuX2NvbGxlY3RSZXNvdXJjZVRpbWluZz1pLmNvbGxlY3RSZXNvdXJjZVRpbWluZyw1MTIhPT10aGlzLnRpbGVTaXplKXRocm93IG5ldyBFcnJvcihcInZlY3RvciB0aWxlIHNvdXJjZXMgbXVzdCBoYXZlIGEgdGlsZVNpemUgb2YgNTEyXCIpO3RoaXMuc2V0RXZlbnRlZFBhcmVudChyKSx0aGlzLl90aWxlV29ya2Vycz17fSx0aGlzLl9kZWR1cGVkPW5ldyBlLkRlZHVwZWRSZXF1ZXN0O31sb2FkKHQpe3RoaXMuX2xvYWRlZD0hMSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhbG9hZGluZ1wiLHtkYXRhVHlwZTpcInNvdXJjZVwifSkpO2NvbnN0IGk9QXJyYXkuaXNBcnJheSh0aGlzLm1hcC5fbGFuZ3VhZ2UpP3RoaXMubWFwLl9sYW5ndWFnZS5qb2luKCk6dGhpcy5tYXAuX2xhbmd1YWdlLG89dGhpcy5tYXAuX3dvcmxkdmlldzt0aGlzLl90aWxlSlNPTlJlcXVlc3Q9Tyh0aGlzLl9vcHRpb25zLHRoaXMubWFwLl9yZXF1ZXN0TWFuYWdlcixpLG8sKChyLG4pPT57dGhpcy5fdGlsZUpTT05SZXF1ZXN0PW51bGwsdGhpcy5fbG9hZGVkPSEwLHI/KGkmJmNvbnNvbGUud2FybihgRW5zdXJlIHRoYXQgeW91ciByZXF1ZXN0ZWQgbGFuZ3VhZ2Ugc3RyaW5nIGlzIGEgdmFsaWQgQkNQLTQ3IGNvZGUgb3IgbGlzdCBvZiBjb2Rlcy4gRm91bmQ6ICR7aX1gKSxvJiYyIT09by5sZW5ndGgmJmNvbnNvbGUud2FybihgUmVxdWVzdGVkIHdvcmxkdmlldyBzdHJpbmdzIG11c3QgYmUgYSB2YWxpZCBJU08gYWxwaGEtMiBjb2RlLiBGb3VuZDogJHtvfWApLHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KHIpKSk6biYmKGUuZXh0ZW5kKHRoaXMsbiksbi5ib3VuZHMmJih0aGlzLnRpbGVCb3VuZHM9bmV3IEIobi5ib3VuZHMsdGhpcy5taW56b29tLHRoaXMubWF4em9vbSkpLGUucG9zdFR1cm5zdGlsZUV2ZW50KG4udGlsZXMsdGhpcy5tYXAuX3JlcXVlc3RNYW5hZ2VyLl9jdXN0b21BY2Nlc3NUb2tlbiksdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn0pKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic291cmNlXCIsc291cmNlRGF0YVR5cGU6XCJjb250ZW50XCJ9KSkpLHQmJnQocik7fSkpO31sb2FkZWQoKXtyZXR1cm4gdGhpcy5fbG9hZGVkfWhhc1RpbGUoZSl7cmV0dXJuICF0aGlzLnRpbGVCb3VuZHN8fHRoaXMudGlsZUJvdW5kcy5jb250YWlucyhlLmNhbm9uaWNhbCl9b25BZGQoZSl7dGhpcy5tYXA9ZSx0aGlzLmxvYWQoKTt9cmVsb2FkKCl7dGhpcy5jYW5jZWxUaWxlSlNPTlJlcXVlc3QoKSx0aGlzLmxvYWQoKCgpPT50aGlzLm1hcC5zdHlsZS5fY2xlYXJTb3VyY2UodGhpcy5pZCkpKTt9c2V0VGlsZXMoZSl7cmV0dXJuIHRoaXMuX29wdGlvbnMudGlsZXM9ZSx0aGlzLnJlbG9hZCgpLHRoaXN9c2V0VXJsKGUpe3JldHVybiB0aGlzLnVybD1lLHRoaXMuX29wdGlvbnMudXJsPWUsdGhpcy5yZWxvYWQoKSx0aGlzfW9uUmVtb3ZlKCl7dGhpcy5jYW5jZWxUaWxlSlNPTlJlcXVlc3QoKTt9c2VyaWFsaXplKCl7cmV0dXJuIGUuZXh0ZW5kKHt9LHRoaXMuX29wdGlvbnMpfWxvYWRUaWxlKHQsaSl7Y29uc3Qgbz10aGlzLm1hcC5fcmVxdWVzdE1hbmFnZXIubm9ybWFsaXplVGlsZVVSTCh0LnRpbGVJRC5jYW5vbmljYWwudXJsKHRoaXMudGlsZXMsdGhpcy5zY2hlbWUpKSxyPXtyZXF1ZXN0OnRoaXMubWFwLl9yZXF1ZXN0TWFuYWdlci50cmFuc2Zvcm1SZXF1ZXN0KG8sZS5SZXNvdXJjZVR5cGUuVGlsZSksZGF0YTp2b2lkIDAsdWlkOnQudWlkLHRpbGVJRDp0LnRpbGVJRCx0aWxlWm9vbTp0LnRpbGVab29tLHpvb206dC50aWxlSUQub3ZlcnNjYWxlZFosdGlsZVNpemU6dGhpcy50aWxlU2l6ZSp0LnRpbGVJRC5vdmVyc2NhbGVGYWN0b3IoKSx0eXBlOnRoaXMudHlwZSxzb3VyY2U6dGhpcy5pZCxwaXhlbFJhdGlvOmUuZXhwb3J0ZWQuZGV2aWNlUGl4ZWxSYXRpbyxzaG93Q29sbGlzaW9uQm94ZXM6dGhpcy5tYXAuc2hvd0NvbGxpc2lvbkJveGVzLHByb21vdGVJZDp0aGlzLnByb21vdGVJZCxpc1N5bWJvbFRpbGU6dC5pc1N5bWJvbFRpbGV9O2lmKHIucmVxdWVzdC5jb2xsZWN0UmVzb3VyY2VUaW1pbmc9dGhpcy5fY29sbGVjdFJlc291cmNlVGltaW5nLHQuYWN0b3ImJlwiZXhwaXJlZFwiIT09dC5zdGF0ZSlcImxvYWRpbmdcIj09PXQuc3RhdGU/dC5yZWxvYWRDYWxsYmFjaz1pOnQucmVxdWVzdD10LmFjdG9yLnNlbmQoXCJyZWxvYWRUaWxlXCIscixuLmJpbmQodGhpcykpO2Vsc2UgaWYodC5hY3Rvcj10aGlzLl90aWxlV29ya2Vyc1tvXT10aGlzLl90aWxlV29ya2Vyc1tvXXx8dGhpcy5kaXNwYXRjaGVyLmdldEFjdG9yKCksdGhpcy5kaXNwYXRjaGVyLnJlYWR5KXQucmVxdWVzdD10LmFjdG9yLnNlbmQoXCJsb2FkVGlsZVwiLHIsbi5iaW5kKHRoaXMpLHZvaWQgMCwhMCk7ZWxzZSB7Y29uc3QgaT1lLmxvYWRWZWN0b3JUaWxlLmNhbGwoe2RlZHVwZWQ6dGhpcy5fZGVkdXBlZH0sciwoKGUsaSk9PntlfHwhaT9uLmNhbGwodGhpcyxlKTooci5kYXRhPXtjYWNoZUNvbnRyb2w6aS5jYWNoZUNvbnRyb2wsZXhwaXJlczppLmV4cGlyZXMscmF3RGF0YTppLnJhd0RhdGEuc2xpY2UoMCl9LHQuYWN0b3ImJnQuYWN0b3Iuc2VuZChcImxvYWRUaWxlXCIscixuLmJpbmQodGhpcyksdm9pZCAwLCEwKSk7fSksITApO3QucmVxdWVzdD17Y2FuY2VsOml9O31mdW5jdGlvbiBuKG8scil7cmV0dXJuIGRlbGV0ZSB0LnJlcXVlc3QsdC5hYm9ydGVkP2kobnVsbCk6byYmNDA0IT09by5zdGF0dXM/aShvKToociYmci5yZXNvdXJjZVRpbWluZyYmKHQucmVzb3VyY2VUaW1pbmc9ci5yZXNvdXJjZVRpbWluZyksdGhpcy5tYXAuX3JlZnJlc2hFeHBpcmVkVGlsZXMmJnImJnQuc2V0RXhwaXJ5RGF0YShyKSx0LmxvYWRWZWN0b3JEYXRhKHIsdGhpcy5tYXAucGFpbnRlciksZS5jYWNoZUVudHJ5UG9zc2libHlBZGRlZCh0aGlzLmRpc3BhdGNoZXIpLGkobnVsbCksdm9pZCh0LnJlbG9hZENhbGxiYWNrJiYodGhpcy5sb2FkVGlsZSh0LHQucmVsb2FkQ2FsbGJhY2spLHQucmVsb2FkQ2FsbGJhY2s9bnVsbCkpKX19YWJvcnRUaWxlKGUpe2UucmVxdWVzdCYmKGUucmVxdWVzdC5jYW5jZWwoKSxkZWxldGUgZS5yZXF1ZXN0KSxlLmFjdG9yJiZlLmFjdG9yLnNlbmQoXCJhYm9ydFRpbGVcIix7dWlkOmUudWlkLHR5cGU6dGhpcy50eXBlLHNvdXJjZTp0aGlzLmlkfSk7fXVubG9hZFRpbGUoZSl7ZS51bmxvYWRWZWN0b3JEYXRhKCksZS5hY3RvciYmZS5hY3Rvci5zZW5kKFwicmVtb3ZlVGlsZVwiLHt1aWQ6ZS51aWQsdHlwZTp0aGlzLnR5cGUsc291cmNlOnRoaXMuaWR9KTt9aGFzVHJhbnNpdGlvbigpe3JldHVybiAhMX1hZnRlclVwZGF0ZSgpe3RoaXMuX3RpbGVXb3JrZXJzPXt9O31jYW5jZWxUaWxlSlNPTlJlcXVlc3QoKXt0aGlzLl90aWxlSlNPTlJlcXVlc3QmJih0aGlzLl90aWxlSlNPTlJlcXVlc3QuY2FuY2VsKCksdGhpcy5fdGlsZUpTT05SZXF1ZXN0PW51bGwpO319Y2xhc3MgTWUgZXh0ZW5kcyBlLkV2ZW50ZWR7Y29uc3RydWN0b3IodCxpLG8scil7c3VwZXIoKSx0aGlzLmlkPXQsdGhpcy5kaXNwYXRjaGVyPW8sdGhpcy5zZXRFdmVudGVkUGFyZW50KHIpLHRoaXMudHlwZT1cInJhc3RlclwiLHRoaXMubWluem9vbT0wLHRoaXMubWF4em9vbT0yMix0aGlzLnJvdW5kWm9vbT0hMCx0aGlzLnNjaGVtZT1cInh5elwiLHRoaXMudGlsZVNpemU9NTEyLHRoaXMuX2xvYWRlZD0hMSx0aGlzLl9vcHRpb25zPWUuZXh0ZW5kKHt0eXBlOlwicmFzdGVyXCJ9LGkpLGUuZXh0ZW5kKHRoaXMsZS5waWNrKGksW1widXJsXCIsXCJzY2hlbWVcIixcInRpbGVTaXplXCJdKSk7fWxvYWQodCl7dGhpcy5fbG9hZGVkPSExLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImRhdGFsb2FkaW5nXCIse2RhdGFUeXBlOlwic291cmNlXCJ9KSksdGhpcy5fdGlsZUpTT05SZXF1ZXN0PU8odGhpcy5fb3B0aW9ucyx0aGlzLm1hcC5fcmVxdWVzdE1hbmFnZXIsbnVsbCxudWxsLCgoaSxvKT0+e3RoaXMuX3RpbGVKU09OUmVxdWVzdD1udWxsLHRoaXMuX2xvYWRlZD0hMCxpP3RoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KGkpKTpvJiYoZS5leHRlbmQodGhpcyxvKSxvLmJvdW5kcyYmKHRoaXMudGlsZUJvdW5kcz1uZXcgQihvLmJvdW5kcyx0aGlzLm1pbnpvb20sdGhpcy5tYXh6b29tKSksZS5wb3N0VHVybnN0aWxlRXZlbnQoby50aWxlcyksdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn0pKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic291cmNlXCIsc291cmNlRGF0YVR5cGU6XCJjb250ZW50XCJ9KSkpLHQmJnQoaSk7fSkpO31sb2FkZWQoKXtyZXR1cm4gdGhpcy5fbG9hZGVkfW9uQWRkKGUpe3RoaXMubWFwPWUsdGhpcy5sb2FkKCk7fXJlbG9hZCgpe3RoaXMuY2FuY2VsVGlsZUpTT05SZXF1ZXN0KCksdGhpcy5sb2FkKCgoKT0+dGhpcy5tYXAuc3R5bGUuX2NsZWFyU291cmNlKHRoaXMuaWQpKSk7fXNldFRpbGVzKGUpe3JldHVybiB0aGlzLl9vcHRpb25zLnRpbGVzPWUsdGhpcy5yZWxvYWQoKSx0aGlzfXNldFVybChlKXtyZXR1cm4gdGhpcy51cmw9ZSx0aGlzLl9vcHRpb25zLnVybD1lLHRoaXMucmVsb2FkKCksdGhpc31vblJlbW92ZSgpe3RoaXMuY2FuY2VsVGlsZUpTT05SZXF1ZXN0KCk7fXNlcmlhbGl6ZSgpe3JldHVybiBlLmV4dGVuZCh7fSx0aGlzLl9vcHRpb25zKX1oYXNUaWxlKGUpe3JldHVybiAhdGhpcy50aWxlQm91bmRzfHx0aGlzLnRpbGVCb3VuZHMuY29udGFpbnMoZS5jYW5vbmljYWwpfWxvYWRUaWxlKHQsaSl7Y29uc3Qgbz1lLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8+PTIscj10aGlzLm1hcC5fcmVxdWVzdE1hbmFnZXIubm9ybWFsaXplVGlsZVVSTCh0LnRpbGVJRC5jYW5vbmljYWwudXJsKHRoaXMudGlsZXMsdGhpcy5zY2hlbWUpLG8sdGhpcy50aWxlU2l6ZSk7dC5yZXF1ZXN0PWUuZ2V0SW1hZ2UodGhpcy5tYXAuX3JlcXVlc3RNYW5hZ2VyLnRyYW5zZm9ybVJlcXVlc3QocixlLlJlc291cmNlVHlwZS5UaWxlKSwoKG8scixuLHMpPT4oZGVsZXRlIHQucmVxdWVzdCx0LmFib3J0ZWQ/KHQuc3RhdGU9XCJ1bmxvYWRlZFwiLGkobnVsbCkpOm8/KHQuc3RhdGU9XCJlcnJvcmVkXCIsaShvKSk6cj8odGhpcy5tYXAuX3JlZnJlc2hFeHBpcmVkVGlsZXMmJnQuc2V0RXhwaXJ5RGF0YSh7Y2FjaGVDb250cm9sOm4sZXhwaXJlczpzfSksdC5zZXRUZXh0dXJlKHIsdGhpcy5tYXAucGFpbnRlciksdC5zdGF0ZT1cImxvYWRlZFwiLGUuY2FjaGVFbnRyeVBvc3NpYmx5QWRkZWQodGhpcy5kaXNwYXRjaGVyKSx2b2lkIGkobnVsbCkpOmkobnVsbCkpKSk7fXN0YXRpYyBsb2FkVGlsZURhdGEoZSx0LGkpe2Uuc2V0VGV4dHVyZSh0LGkpO31zdGF0aWMgdW5sb2FkVGlsZURhdGEoZSx0KXtlLnRleHR1cmUmJnQuc2F2ZVRpbGVUZXh0dXJlKGUudGV4dHVyZSk7fWFib3J0VGlsZShlLHQpe2UucmVxdWVzdCYmKGUucmVxdWVzdC5jYW5jZWwoKSxkZWxldGUgZS5yZXF1ZXN0KSx0KCk7fXVubG9hZFRpbGUoZSx0KXtlLnRleHR1cmUmJnRoaXMubWFwLnBhaW50ZXIuc2F2ZVRpbGVUZXh0dXJlKGUudGV4dHVyZSksdCgpO31oYXNUcmFuc2l0aW9uKCl7cmV0dXJuICExfWNhbmNlbFRpbGVKU09OUmVxdWVzdCgpe3RoaXMuX3RpbGVKU09OUmVxdWVzdCYmKHRoaXMuX3RpbGVKU09OUmVxdWVzdC5jYW5jZWwoKSx0aGlzLl90aWxlSlNPTlJlcXVlc3Q9bnVsbCk7fX1mdW5jdGlvbiBJZSh0LGksbyxyLG4scyxhLGwpe2NvbnN0IGM9W3QsbyxuLGkscixzLDEsMSwxXSxoPVthLGwsMV0sdT1lLmFkam9pbnQoW10sYyksW18sZCxwXT1lLnRyYW5zZm9ybU1hdDMoaCxoLGUudHJhbnNwb3NlKHUsdSkpO3JldHVybiBlLm11bHRpcGx5JDEoYyxbXywwLDAsMCxkLDAsMCwwLHBdLGMpfWNsYXNzIFBlIGV4dGVuZHMgZS5FdmVudGVke2NvbnN0cnVjdG9yKGUsdCxpLG8pe3N1cGVyKCksdGhpcy5pZD1lLHRoaXMuZGlzcGF0Y2hlcj1pLHRoaXMuY29vcmRpbmF0ZXM9dC5jb29yZGluYXRlcyx0aGlzLnR5cGU9XCJpbWFnZVwiLHRoaXMubWluem9vbT0wLHRoaXMubWF4em9vbT0yMix0aGlzLnRpbGVTaXplPTUxMix0aGlzLnRpbGVzPXt9LHRoaXMuX2xvYWRlZD0hMSx0aGlzLnNldEV2ZW50ZWRQYXJlbnQobyksdGhpcy5vcHRpb25zPXQsdGhpcy5fZGlydHk9ITE7fWxvYWQodCxpKXt0aGlzLl9sb2FkZWQ9aXx8ITEsdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7ZGF0YVR5cGU6XCJzb3VyY2VcIn0pKSx0aGlzLnVybD10aGlzLm9wdGlvbnMudXJsLHRoaXMuX2ltYWdlUmVxdWVzdD1lLmdldEltYWdlKHRoaXMubWFwLl9yZXF1ZXN0TWFuYWdlci50cmFuc2Zvcm1SZXF1ZXN0KHRoaXMudXJsLGUuUmVzb3VyY2VUeXBlLkltYWdlKSwoKGksbyk9PntpZih0aGlzLl9pbWFnZVJlcXVlc3Q9bnVsbCx0aGlzLl9sb2FkZWQ9ITAsaSl0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChpKSk7ZWxzZSBpZihvKXtjb25zdHtIVE1MSW1hZ2VFbGVtZW50Oml9PWUud2luZG93O3RoaXMuaW1hZ2U9byBpbnN0YW5jZW9mIGk/ZS5leHBvcnRlZC5nZXRJbWFnZURhdGEobyk6byx0aGlzLl9kaXJ0eT0hMCx0aGlzLndpZHRoPXRoaXMuaW1hZ2Uud2lkdGgsdGhpcy5oZWlnaHQ9dGhpcy5pbWFnZS5oZWlnaHQsdCYmKHRoaXMuY29vcmRpbmF0ZXM9dCksdGhpcy5fZmluaXNoTG9hZGluZygpO319KSk7fWxvYWRlZCgpe3JldHVybiB0aGlzLl9sb2FkZWR9dXBkYXRlSW1hZ2UoZSl7cmV0dXJuIHRoaXMuaW1hZ2UmJmUudXJsPyh0aGlzLl9pbWFnZVJlcXVlc3QmJmUudXJsIT09dGhpcy5vcHRpb25zLnVybCYmKHRoaXMuX2ltYWdlUmVxdWVzdC5jYW5jZWwoKSx0aGlzLl9pbWFnZVJlcXVlc3Q9bnVsbCksdGhpcy5vcHRpb25zLnVybD1lLnVybCx0aGlzLmxvYWQoZS5jb29yZGluYXRlcyx0aGlzLl9sb2FkZWQpLHRoaXMpOnRoaXN9X2ZpbmlzaExvYWRpbmcoKXt0aGlzLm1hcCYmKHRoaXMuc2V0Q29vcmRpbmF0ZXModGhpcy5jb29yZGluYXRlcyksdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn0pKSk7fW9uQWRkKGUpe3RoaXMubWFwPWUsdGhpcy5sb2FkKCk7fW9uUmVtb3ZlKCl7dGhpcy5faW1hZ2VSZXF1ZXN0JiYodGhpcy5faW1hZ2VSZXF1ZXN0LmNhbmNlbCgpLHRoaXMuX2ltYWdlUmVxdWVzdD1udWxsKSx0aGlzLnRleHR1cmUmJnRoaXMudGV4dHVyZS5kZXN0cm95KCk7fXNldENvb3JkaW5hdGVzKHQpe3RoaXMuY29vcmRpbmF0ZXM9dCx0aGlzLl9ib3VuZHNBcnJheT12b2lkIDA7Y29uc3QgaT10Lm1hcChlLk1lcmNhdG9yQ29vcmRpbmF0ZS5mcm9tTG5nTGF0KTtyZXR1cm4gdGhpcy50aWxlSUQ9ZnVuY3Rpb24odCl7bGV0IGk9MS8wLG89MS8wLHI9LTEvMCxuPS0xLzA7Zm9yKGNvbnN0IGUgb2YgdClpPU1hdGgubWluKGksZS54KSxvPU1hdGgubWluKG8sZS55KSxyPU1hdGgubWF4KHIsZS54KSxuPU1hdGgubWF4KG4sZS55KTtjb25zdCBzPU1hdGgubWF4KHItaSxuLW8pLGE9TWF0aC5tYXgoMCxNYXRoLmZsb29yKC1NYXRoLmxvZyhzKS9NYXRoLkxOMikpLGw9TWF0aC5wb3coMixhKTtyZXR1cm4gbmV3IGUuQ2Fub25pY2FsVGlsZUlEKGEsTWF0aC5mbG9vcigoaStyKS8yKmwpLE1hdGguZmxvb3IoKG8rbikvMipsKSl9KGkpLHRoaXMubWluem9vbT10aGlzLm1heHpvb209dGhpcy50aWxlSUQueix0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic291cmNlXCIsc291cmNlRGF0YVR5cGU6XCJjb250ZW50XCJ9KSksdGhpc31fY2xlYXIoKXt0aGlzLl9ib3VuZHNBcnJheT12b2lkIDA7fV9wcmVwYXJlRGF0YSh0KXtmb3IoY29uc3QgZSBpbiB0aGlzLnRpbGVzKXtjb25zdCB0PXRoaXMudGlsZXNbZV07XCJsb2FkZWRcIiE9PXQuc3RhdGUmJih0LnN0YXRlPVwibG9hZGVkXCIsdC50ZXh0dXJlPXRoaXMudGV4dHVyZSk7fWlmKHRoaXMuX2JvdW5kc0FycmF5KXJldHVybjtjb25zdCBpPWUudGlsZVRyYW5zZm9ybSh0aGlzLnRpbGVJRCx0aGlzLm1hcC50cmFuc2Zvcm0ucHJvamVjdGlvbiksW28scixuLHNdPXRoaXMuY29vcmRpbmF0ZXMubWFwKCh0PT57Y29uc3Qgbz1pLnByb2plY3Rpb24ucHJvamVjdCh0WzBdLHRbMV0pO3JldHVybiBlLmdldFRpbGVQb2ludChpLG8pLl9yb3VuZCgpfSkpO3RoaXMucGVyc3BlY3RpdmVUcmFuc2Zvcm09ZnVuY3Rpb24odCxpLG8scixuLHMsYSxsLGMsaCl7Y29uc3QgdT1JZSgwLDAsdCwwLDAsaSx0LGkpLF89SWUobyxyLG4scyxhLGwsYyxoKTtyZXR1cm4gZS5tdWx0aXBseSQxKF8sZS5hZGpvaW50KHUsdSksXyksW19bNl0vX1s4XSp0L2UuRVhURU5ULF9bN10vX1s4XSppL2UuRVhURU5UXX0odGhpcy53aWR0aCx0aGlzLmhlaWdodCxvLngsby55LHIueCxyLnkscy54LHMueSxuLngsbi55KTtjb25zdCBhPXRoaXMuX2JvdW5kc0FycmF5PW5ldyBlLlN0cnVjdEFycmF5TGF5b3V0NGk4O2EuZW1wbGFjZUJhY2soby54LG8ueSwwLDApLGEuZW1wbGFjZUJhY2soci54LHIueSxlLkVYVEVOVCwwKSxhLmVtcGxhY2VCYWNrKHMueCxzLnksMCxlLkVYVEVOVCksYS5lbXBsYWNlQmFjayhuLngsbi55LGUuRVhURU5ULGUuRVhURU5UKSx0aGlzLmJvdW5kc0J1ZmZlciYmdGhpcy5ib3VuZHNCdWZmZXIuZGVzdHJveSgpLHRoaXMuYm91bmRzQnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKGEsZS5ib3VuZHNBdHRyaWJ1dGVzLm1lbWJlcnMpLHRoaXMuYm91bmRzU2VnbWVudHM9ZS5TZWdtZW50VmVjdG9yLnNpbXBsZVNlZ21lbnQoMCwwLDQsMik7fXByZXBhcmUoKXtpZigwPT09T2JqZWN0LmtleXModGhpcy50aWxlcykubGVuZ3RofHwhdGhpcy5pbWFnZSlyZXR1cm47Y29uc3QgdD10aGlzLm1hcC5wYWludGVyLmNvbnRleHQsaT10LmdsO3RoaXMuX2RpcnR5JiYodGhpcy50ZXh0dXJlP3RoaXMudGV4dHVyZS51cGRhdGUodGhpcy5pbWFnZSk6KHRoaXMudGV4dHVyZT1uZXcgZS5UZXh0dXJlKHQsdGhpcy5pbWFnZSxpLlJHQkEpLHRoaXMudGV4dHVyZS5iaW5kKGkuTElORUFSLGkuQ0xBTVBfVE9fRURHRSkpLHRoaXMuX2RpcnR5PSExKSx0aGlzLl9wcmVwYXJlRGF0YSh0KTt9bG9hZFRpbGUoZSx0KXt0aGlzLnRpbGVJRCYmdGhpcy50aWxlSUQuZXF1YWxzKGUudGlsZUlELmNhbm9uaWNhbCk/KHRoaXMudGlsZXNbU3RyaW5nKGUudGlsZUlELndyYXApXT1lLGUuYnVja2V0cz17fSx0KG51bGwpKTooZS5zdGF0ZT1cImVycm9yZWRcIix0KG51bGwpKTt9c2VyaWFsaXplKCl7cmV0dXJuIHt0eXBlOlwiaW1hZ2VcIix1cmw6dGhpcy5vcHRpb25zLnVybCxjb29yZGluYXRlczp0aGlzLmNvb3JkaW5hdGVzfX1oYXNUcmFuc2l0aW9uKCl7cmV0dXJuICExfX1jb25zdCBTZT17dmVjdG9yOkNlLHJhc3RlcjpNZSxcInJhc3Rlci1kZW1cIjpjbGFzcyBleHRlbmRzIE1le2NvbnN0cnVjdG9yKHQsaSxvLHIpe3N1cGVyKHQsaSxvLHIpLHRoaXMudHlwZT1cInJhc3Rlci1kZW1cIix0aGlzLm1heHpvb209MjIsdGhpcy5fb3B0aW9ucz1lLmV4dGVuZCh7dHlwZTpcInJhc3Rlci1kZW1cIn0saSksdGhpcy5lbmNvZGluZz1pLmVuY29kaW5nfHxcIm1hcGJveFwiO31sb2FkVGlsZSh0LGkpe2NvbnN0IG89dGhpcy5tYXAuX3JlcXVlc3RNYW5hZ2VyLm5vcm1hbGl6ZVRpbGVVUkwodC50aWxlSUQuY2Fub25pY2FsLnVybCh0aGlzLnRpbGVzLHRoaXMuc2NoZW1lKSwhMSx0aGlzLnRpbGVTaXplKTtmdW5jdGlvbiByKGUsbyl7ZSYmKHQuc3RhdGU9XCJlcnJvcmVkXCIsaShlKSksbyYmKHQuZGVtPW8sdC5kZW0ub25EZXNlcmlhbGl6ZSgpLHQubmVlZHNIaWxsc2hhZGVQcmVwYXJlPSEwLHQubmVlZHNERU1UZXh0dXJlVXBsb2FkPSEwLHQuc3RhdGU9XCJsb2FkZWRcIixpKG51bGwpKTt9dC5yZXF1ZXN0PWUuZ2V0SW1hZ2UodGhpcy5tYXAuX3JlcXVlc3RNYW5hZ2VyLnRyYW5zZm9ybVJlcXVlc3QobyxlLlJlc291cmNlVHlwZS5UaWxlKSxmdW5jdGlvbihvLG4scyxhKXtpZihkZWxldGUgdC5yZXF1ZXN0LHQuYWJvcnRlZCl0LnN0YXRlPVwidW5sb2FkZWRcIixpKG51bGwpO2Vsc2UgaWYobyl0LnN0YXRlPVwiZXJyb3JlZFwiLGkobyk7ZWxzZSBpZihuKXt0aGlzLm1hcC5fcmVmcmVzaEV4cGlyZWRUaWxlcyYmdC5zZXRFeHBpcnlEYXRhKHtjYWNoZUNvbnRyb2w6cyxleHBpcmVzOmF9KTtjb25zdCBpPWUud2luZG93LkltYWdlQml0bWFwJiZuIGluc3RhbmNlb2YgZS53aW5kb3cuSW1hZ2VCaXRtYXAmJihudWxsPT1zZSYmKHNlPWUud2luZG93Lk9mZnNjcmVlbkNhbnZhcyYmbmV3IGUud2luZG93Lk9mZnNjcmVlbkNhbnZhcygxLDEpLmdldENvbnRleHQoXCIyZFwiKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS53aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXApLHNlKSxvPTEtKG4ud2lkdGgtZS5wcmV2UG93ZXJPZlR3byhuLndpZHRoKSkvMjtvPDF8fHQubmVpZ2hib3JpbmdUaWxlc3x8KHQubmVpZ2hib3JpbmdUaWxlcz10aGlzLl9nZXROZWlnaGJvcmluZ1RpbGVzKHQudGlsZUlEKSk7Y29uc3QgbD1pP246ZS5leHBvcnRlZC5nZXRJbWFnZURhdGEobixvKSxjPXt1aWQ6dC51aWQsY29vcmQ6dC50aWxlSUQsc291cmNlOnRoaXMuaWQscmF3SW1hZ2VEYXRhOmwsZW5jb2Rpbmc6dGhpcy5lbmNvZGluZyxwYWRkaW5nOm99O3QuYWN0b3ImJlwiZXhwaXJlZFwiIT09dC5zdGF0ZXx8KHQuYWN0b3I9dGhpcy5kaXNwYXRjaGVyLmdldEFjdG9yKCksdC5hY3Rvci5zZW5kKFwibG9hZERFTVRpbGVcIixjLHIuYmluZCh0aGlzKSx2b2lkIDAsITApKTt9fS5iaW5kKHRoaXMpKTt9X2dldE5laWdoYm9yaW5nVGlsZXModCl7Y29uc3QgaT10LmNhbm9uaWNhbCxvPU1hdGgucG93KDIsaS56KSxyPShpLngtMStvKSVvLG49MD09PWkueD90LndyYXAtMTp0LndyYXAscz0oaS54KzErbyklbyxhPWkueCsxPT09bz90LndyYXArMTp0LndyYXAsbD17fTtyZXR1cm4gbFtuZXcgZS5PdmVyc2NhbGVkVGlsZUlEKHQub3ZlcnNjYWxlZFosbixpLnoscixpLnkpLmtleV09e2JhY2tmaWxsZWQ6ITF9LGxbbmV3IGUuT3ZlcnNjYWxlZFRpbGVJRCh0Lm92ZXJzY2FsZWRaLGEsaS56LHMsaS55KS5rZXldPXtiYWNrZmlsbGVkOiExfSxpLnk+MCYmKGxbbmV3IGUuT3ZlcnNjYWxlZFRpbGVJRCh0Lm92ZXJzY2FsZWRaLG4saS56LHIsaS55LTEpLmtleV09e2JhY2tmaWxsZWQ6ITF9LGxbbmV3IGUuT3ZlcnNjYWxlZFRpbGVJRCh0Lm92ZXJzY2FsZWRaLHQud3JhcCxpLnosaS54LGkueS0xKS5rZXldPXtiYWNrZmlsbGVkOiExfSxsW25ldyBlLk92ZXJzY2FsZWRUaWxlSUQodC5vdmVyc2NhbGVkWixhLGkueixzLGkueS0xKS5rZXldPXtiYWNrZmlsbGVkOiExfSksaS55KzE8byYmKGxbbmV3IGUuT3ZlcnNjYWxlZFRpbGVJRCh0Lm92ZXJzY2FsZWRaLG4saS56LHIsaS55KzEpLmtleV09e2JhY2tmaWxsZWQ6ITF9LGxbbmV3IGUuT3ZlcnNjYWxlZFRpbGVJRCh0Lm92ZXJzY2FsZWRaLHQud3JhcCxpLnosaS54LGkueSsxKS5rZXldPXtiYWNrZmlsbGVkOiExfSxsW25ldyBlLk92ZXJzY2FsZWRUaWxlSUQodC5vdmVyc2NhbGVkWixhLGkueixzLGkueSsxKS5rZXldPXtiYWNrZmlsbGVkOiExfSksbH11bmxvYWRUaWxlKGUpe2UuZGVtVGV4dHVyZSYmdGhpcy5tYXAucGFpbnRlci5zYXZlVGlsZVRleHR1cmUoZS5kZW1UZXh0dXJlKSxlLmZibyYmKGUuZmJvLmRlc3Ryb3koKSxkZWxldGUgZS5mYm8pLGUuZGVtJiZkZWxldGUgZS5kZW0sZGVsZXRlIGUubmVpZ2hib3JpbmdUaWxlcyxlLnN0YXRlPVwidW5sb2FkZWRcIjt9fSxnZW9qc29uOmNsYXNzIGV4dGVuZHMgZS5FdmVudGVke2NvbnN0cnVjdG9yKHQsaSxvLHIpe3N1cGVyKCksdGhpcy5pZD10LHRoaXMudHlwZT1cImdlb2pzb25cIix0aGlzLm1pbnpvb209MCx0aGlzLm1heHpvb209MTgsdGhpcy50aWxlU2l6ZT01MTIsdGhpcy5pc1RpbGVDbGlwcGVkPSEwLHRoaXMucmVwYXJzZU92ZXJzY2FsZWQ9ITAsdGhpcy5fbG9hZGVkPSExLHRoaXMuYWN0b3I9by5nZXRBY3RvcigpLHRoaXMuc2V0RXZlbnRlZFBhcmVudChyKSx0aGlzLl9kYXRhPWkuZGF0YSx0aGlzLl9vcHRpb25zPWUuZXh0ZW5kKHt9LGkpLHRoaXMuX2NvbGxlY3RSZXNvdXJjZVRpbWluZz1pLmNvbGxlY3RSZXNvdXJjZVRpbWluZyx2b2lkIDAhPT1pLm1heHpvb20mJih0aGlzLm1heHpvb209aS5tYXh6b29tKSxpLnR5cGUmJih0aGlzLnR5cGU9aS50eXBlKSxpLmF0dHJpYnV0aW9uJiYodGhpcy5hdHRyaWJ1dGlvbj1pLmF0dHJpYnV0aW9uKSx0aGlzLnByb21vdGVJZD1pLnByb21vdGVJZDtjb25zdCBuPWUuRVhURU5UL3RoaXMudGlsZVNpemU7dGhpcy53b3JrZXJPcHRpb25zPWUuZXh0ZW5kKHtzb3VyY2U6dGhpcy5pZCxjbHVzdGVyOmkuY2x1c3Rlcnx8ITEsZ2VvanNvblZ0T3B0aW9uczp7YnVmZmVyOih2b2lkIDAhPT1pLmJ1ZmZlcj9pLmJ1ZmZlcjoxMjgpKm4sdG9sZXJhbmNlOih2b2lkIDAhPT1pLnRvbGVyYW5jZT9pLnRvbGVyYW5jZTouMzc1KSpuLGV4dGVudDplLkVYVEVOVCxtYXhab29tOnRoaXMubWF4em9vbSxsaW5lTWV0cmljczppLmxpbmVNZXRyaWNzfHwhMSxnZW5lcmF0ZUlkOmkuZ2VuZXJhdGVJZHx8ITF9LHN1cGVyY2x1c3Rlck9wdGlvbnM6e21heFpvb206dm9pZCAwIT09aS5jbHVzdGVyTWF4Wm9vbT9pLmNsdXN0ZXJNYXhab29tOnRoaXMubWF4em9vbS0xLG1pblBvaW50czpNYXRoLm1heCgyLGkuY2x1c3Rlck1pblBvaW50c3x8MiksZXh0ZW50OmUuRVhURU5ULHJhZGl1czoodm9pZCAwIT09aS5jbHVzdGVyUmFkaXVzP2kuY2x1c3RlclJhZGl1czo1MCkqbixsb2c6ITEsZ2VuZXJhdGVJZDppLmdlbmVyYXRlSWR8fCExfSxjbHVzdGVyUHJvcGVydGllczppLmNsdXN0ZXJQcm9wZXJ0aWVzLGZpbHRlcjppLmZpbHRlcn0saS53b3JrZXJPcHRpb25zKTt9b25BZGQoZSl7dGhpcy5tYXA9ZSx0aGlzLnNldERhdGEodGhpcy5fZGF0YSk7fXNldERhdGEoZSl7cmV0dXJuIHRoaXMuX2RhdGE9ZSx0aGlzLl91cGRhdGVXb3JrZXJEYXRhKCksdGhpc31nZXRDbHVzdGVyRXhwYW5zaW9uWm9vbShlLHQpe3JldHVybiB0aGlzLmFjdG9yLnNlbmQoXCJnZW9qc29uLmdldENsdXN0ZXJFeHBhbnNpb25ab29tXCIse2NsdXN0ZXJJZDplLHNvdXJjZTp0aGlzLmlkfSx0KSx0aGlzfWdldENsdXN0ZXJDaGlsZHJlbihlLHQpe3JldHVybiB0aGlzLmFjdG9yLnNlbmQoXCJnZW9qc29uLmdldENsdXN0ZXJDaGlsZHJlblwiLHtjbHVzdGVySWQ6ZSxzb3VyY2U6dGhpcy5pZH0sdCksdGhpc31nZXRDbHVzdGVyTGVhdmVzKGUsdCxpLG8pe3JldHVybiB0aGlzLmFjdG9yLnNlbmQoXCJnZW9qc29uLmdldENsdXN0ZXJMZWF2ZXNcIix7c291cmNlOnRoaXMuaWQsY2x1c3RlcklkOmUsbGltaXQ6dCxvZmZzZXQ6aX0sbyksdGhpc31fdXBkYXRlV29ya2VyRGF0YSgpe2lmKHRoaXMuX3BlbmRpbmdMb2FkKXJldHVybiB2b2lkKHRoaXMuX2NvYWxlc2NlPSEwKTt0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhbG9hZGluZ1wiLHtkYXRhVHlwZTpcInNvdXJjZVwifSkpLHRoaXMuX2xvYWRlZD0hMTtjb25zdCB0PWUuZXh0ZW5kKHt9LHRoaXMud29ya2VyT3B0aW9ucyksaT10aGlzLl9kYXRhO1wic3RyaW5nXCI9PXR5cGVvZiBpPyh0LnJlcXVlc3Q9dGhpcy5tYXAuX3JlcXVlc3RNYW5hZ2VyLnRyYW5zZm9ybVJlcXVlc3QoZS5leHBvcnRlZC5yZXNvbHZlVVJMKGkpLGUuUmVzb3VyY2VUeXBlLlNvdXJjZSksdC5yZXF1ZXN0LmNvbGxlY3RSZXNvdXJjZVRpbWluZz10aGlzLl9jb2xsZWN0UmVzb3VyY2VUaW1pbmcpOnQuZGF0YT1KU09OLnN0cmluZ2lmeShpKSx0aGlzLl9wZW5kaW5nTG9hZD10aGlzLmFjdG9yLnNlbmQoYCR7dGhpcy50eXBlfS5sb2FkRGF0YWAsdCwoKHQsaSk9PntpZih0aGlzLl9sb2FkZWQ9ITAsdGhpcy5fcGVuZGluZ0xvYWQ9bnVsbCx0KXRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KHQpKTtlbHNlIHtjb25zdCB0PXtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOnRoaXMuX21ldGFkYXRhRmlyZWQ/XCJjb250ZW50XCI6XCJtZXRhZGF0YVwifTt0aGlzLl9jb2xsZWN0UmVzb3VyY2VUaW1pbmcmJmkmJmkucmVzb3VyY2VUaW1pbmcmJmkucmVzb3VyY2VUaW1pbmdbdGhpcy5pZF0mJih0LnJlc291cmNlVGltaW5nPWkucmVzb3VyY2VUaW1pbmdbdGhpcy5pZF0pLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImRhdGFcIix0KSksdGhpcy5fbWV0YWRhdGFGaXJlZD0hMDt9dGhpcy5fY29hbGVzY2UmJih0aGlzLl91cGRhdGVXb3JrZXJEYXRhKCksdGhpcy5fY29hbGVzY2U9ITEpO30pKTt9bG9hZGVkKCl7cmV0dXJuIHRoaXMuX2xvYWRlZH1sb2FkVGlsZSh0LGkpe2NvbnN0IG89dC5hY3Rvcj9cInJlbG9hZFRpbGVcIjpcImxvYWRUaWxlXCI7dC5hY3Rvcj10aGlzLmFjdG9yLHQucmVxdWVzdD10aGlzLmFjdG9yLnNlbmQobyx7dHlwZTp0aGlzLnR5cGUsdWlkOnQudWlkLHRpbGVJRDp0LnRpbGVJRCx0aWxlWm9vbTp0LnRpbGVab29tLHpvb206dC50aWxlSUQub3ZlcnNjYWxlZFosbWF4Wm9vbTp0aGlzLm1heHpvb20sdGlsZVNpemU6dGhpcy50aWxlU2l6ZSxzb3VyY2U6dGhpcy5pZCxwaXhlbFJhdGlvOmUuZXhwb3J0ZWQuZGV2aWNlUGl4ZWxSYXRpbyxzaG93Q29sbGlzaW9uQm94ZXM6dGhpcy5tYXAuc2hvd0NvbGxpc2lvbkJveGVzLHByb21vdGVJZDp0aGlzLnByb21vdGVJZH0sKChlLHIpPT4oZGVsZXRlIHQucmVxdWVzdCx0LnVubG9hZFZlY3RvckRhdGEoKSx0LmFib3J0ZWQ/aShudWxsKTplP2koZSk6KHQubG9hZFZlY3RvckRhdGEocix0aGlzLm1hcC5wYWludGVyLFwicmVsb2FkVGlsZVwiPT09byksaShudWxsKSkpKSx2b2lkIDAsXCJsb2FkVGlsZVwiPT09byk7fWFib3J0VGlsZShlKXtlLnJlcXVlc3QmJihlLnJlcXVlc3QuY2FuY2VsKCksZGVsZXRlIGUucmVxdWVzdCksZS5hYm9ydGVkPSEwO311bmxvYWRUaWxlKGUpe2UudW5sb2FkVmVjdG9yRGF0YSgpLHRoaXMuYWN0b3Iuc2VuZChcInJlbW92ZVRpbGVcIix7dWlkOmUudWlkLHR5cGU6dGhpcy50eXBlLHNvdXJjZTp0aGlzLmlkfSk7fW9uUmVtb3ZlKCl7dGhpcy5fcGVuZGluZ0xvYWQmJnRoaXMuX3BlbmRpbmdMb2FkLmNhbmNlbCgpO31zZXJpYWxpemUoKXtyZXR1cm4gZS5leHRlbmQoe30sdGhpcy5fb3B0aW9ucyx7dHlwZTp0aGlzLnR5cGUsZGF0YTp0aGlzLl9kYXRhfSl9aGFzVHJhbnNpdGlvbigpe3JldHVybiAhMX19LHZpZGVvOmNsYXNzIGV4dGVuZHMgUGV7Y29uc3RydWN0b3IoZSx0LGksbyl7c3VwZXIoZSx0LGksbyksdGhpcy5yb3VuZFpvb209ITAsdGhpcy50eXBlPVwidmlkZW9cIix0aGlzLm9wdGlvbnM9dDt9bG9hZCgpe3RoaXMuX2xvYWRlZD0hMTtjb25zdCB0PXRoaXMub3B0aW9uczt0aGlzLnVybHM9W107Zm9yKGNvbnN0IGkgb2YgdC51cmxzKXRoaXMudXJscy5wdXNoKHRoaXMubWFwLl9yZXF1ZXN0TWFuYWdlci50cmFuc2Zvcm1SZXF1ZXN0KGksZS5SZXNvdXJjZVR5cGUuU291cmNlKS51cmwpO2UuZ2V0VmlkZW8odGhpcy51cmxzLCgodCxpKT0+e3RoaXMuX2xvYWRlZD0hMCx0P3RoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KHQpKTppJiYodGhpcy52aWRlbz1pLHRoaXMudmlkZW8ubG9vcD0hMCx0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZShcInBsYXlzaW5saW5lXCIsXCJcIiksdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLCgoKT0+e3RoaXMubWFwLnRyaWdnZXJSZXBhaW50KCk7fSkpLHRoaXMubWFwJiZ0aGlzLnZpZGVvLnBsYXkoKSx0aGlzLl9maW5pc2hMb2FkaW5nKCkpO30pKTt9cGF1c2UoKXt0aGlzLnZpZGVvJiZ0aGlzLnZpZGVvLnBhdXNlKCk7fXBsYXkoKXt0aGlzLnZpZGVvJiZ0aGlzLnZpZGVvLnBsYXkoKTt9c2Vlayh0KXtpZih0aGlzLnZpZGVvKXtjb25zdCBpPXRoaXMudmlkZW8uc2Vla2FibGU7dDxpLnN0YXJ0KDApfHx0PmkuZW5kKDApP3RoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBlLlZhbGlkYXRpb25FcnJvcihgc291cmNlcy4ke3RoaXMuaWR9YCxudWxsLGBQbGF5YmFjayBmb3IgdGhpcyB2aWRlbyBjYW4gYmUgc2V0IG9ubHkgYmV0d2VlbiB0aGUgJHtpLnN0YXJ0KDApfSBhbmQgJHtpLmVuZCgwKX0tc2Vjb25kIG1hcmsuYCkpKTp0aGlzLnZpZGVvLmN1cnJlbnRUaW1lPXQ7fX1nZXRWaWRlbygpe3JldHVybiB0aGlzLnZpZGVvfW9uQWRkKGUpe3RoaXMubWFwfHwodGhpcy5tYXA9ZSx0aGlzLmxvYWQoKSx0aGlzLnZpZGVvJiYodGhpcy52aWRlby5wbGF5KCksdGhpcy5zZXRDb29yZGluYXRlcyh0aGlzLmNvb3JkaW5hdGVzKSkpO31wcmVwYXJlKCl7aWYoMD09PU9iamVjdC5rZXlzKHRoaXMudGlsZXMpLmxlbmd0aHx8dGhpcy52aWRlby5yZWFkeVN0YXRlPDIpcmV0dXJuO2NvbnN0IHQ9dGhpcy5tYXAucGFpbnRlci5jb250ZXh0LGk9dC5nbDt0aGlzLnRleHR1cmU/dGhpcy52aWRlby5wYXVzZWR8fCh0aGlzLnRleHR1cmUuYmluZChpLkxJTkVBUixpLkNMQU1QX1RPX0VER0UpLGkudGV4U3ViSW1hZ2UyRChpLlRFWFRVUkVfMkQsMCwwLDAsaS5SR0JBLGkuVU5TSUdORURfQllURSx0aGlzLnZpZGVvKSk6KHRoaXMudGV4dHVyZT1uZXcgZS5UZXh0dXJlKHQsdGhpcy52aWRlbyxpLlJHQkEpLHRoaXMudGV4dHVyZS5iaW5kKGkuTElORUFSLGkuQ0xBTVBfVE9fRURHRSksdGhpcy53aWR0aD10aGlzLnZpZGVvLnZpZGVvV2lkdGgsdGhpcy5oZWlnaHQ9dGhpcy52aWRlby52aWRlb0hlaWdodCksdGhpcy5fcHJlcGFyZURhdGEodCk7fXNlcmlhbGl6ZSgpe3JldHVybiB7dHlwZTpcInZpZGVvXCIsdXJsczp0aGlzLnVybHMsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319aGFzVHJhbnNpdGlvbigpe3JldHVybiB0aGlzLnZpZGVvJiYhdGhpcy52aWRlby5wYXVzZWR9fSxpbWFnZTpQZSxjYW52YXM6Y2xhc3MgZXh0ZW5kcyBQZXtjb25zdHJ1Y3Rvcih0LGksbyxyKXtzdXBlcih0LGksbyxyKSxpLmNvb3JkaW5hdGVzP0FycmF5LmlzQXJyYXkoaS5jb29yZGluYXRlcykmJjQ9PT1pLmNvb3JkaW5hdGVzLmxlbmd0aCYmIWkuY29vcmRpbmF0ZXMuc29tZSgoZT0+IUFycmF5LmlzQXJyYXkoZSl8fDIhPT1lLmxlbmd0aHx8ZS5zb21lKChlPT5cIm51bWJlclwiIT10eXBlb2YgZSkpKSl8fHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBlLlZhbGlkYXRpb25FcnJvcihgc291cmNlcy4ke3R9YCxudWxsLCdcImNvb3JkaW5hdGVzXCIgcHJvcGVydHkgbXVzdCBiZSBhbiBhcnJheSBvZiA0IGxvbmdpdHVkZS9sYXRpdHVkZSBhcnJheSBwYWlycycpKSk6dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IGUuVmFsaWRhdGlvbkVycm9yKGBzb3VyY2VzLiR7dH1gLG51bGwsJ21pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJjb29yZGluYXRlc1wiJykpKSxpLmFuaW1hdGUmJlwiYm9vbGVhblwiIT10eXBlb2YgaS5hbmltYXRlJiZ0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgZS5WYWxpZGF0aW9uRXJyb3IoYHNvdXJjZXMuJHt0fWAsbnVsbCwnb3B0aW9uYWwgXCJhbmltYXRlXCIgcHJvcGVydHkgbXVzdCBiZSBhIGJvb2xlYW4gdmFsdWUnKSkpLGkuY2FudmFzP1wic3RyaW5nXCI9PXR5cGVvZiBpLmNhbnZhc3x8aS5jYW52YXMgaW5zdGFuY2VvZiBlLndpbmRvdy5IVE1MQ2FudmFzRWxlbWVudHx8dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IGUuVmFsaWRhdGlvbkVycm9yKGBzb3VyY2VzLiR7dH1gLG51bGwsJ1wiY2FudmFzXCIgbXVzdCBiZSBlaXRoZXIgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBJRCBvZiB0aGUgY2FudmFzIGVsZW1lbnQgZnJvbSB3aGljaCB0byByZWFkLCBvciBhbiBIVE1MQ2FudmFzRWxlbWVudCBpbnN0YW5jZScpKSk6dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IGUuVmFsaWRhdGlvbkVycm9yKGBzb3VyY2VzLiR7dH1gLG51bGwsJ21pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJjYW52YXNcIicpKSksdGhpcy5vcHRpb25zPWksdGhpcy5hbmltYXRlPXZvaWQgMD09PWkuYW5pbWF0ZXx8aS5hbmltYXRlO31sb2FkKCl7dGhpcy5fbG9hZGVkPSEwLHRoaXMuY2FudmFzfHwodGhpcy5jYW52YXM9dGhpcy5vcHRpb25zLmNhbnZhcyBpbnN0YW5jZW9mIGUud2luZG93LkhUTUxDYW52YXNFbGVtZW50P3RoaXMub3B0aW9ucy5jYW52YXM6ZS53aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5vcHRpb25zLmNhbnZhcykpLHRoaXMud2lkdGg9dGhpcy5jYW52YXMud2lkdGgsdGhpcy5oZWlnaHQ9dGhpcy5jYW52YXMuaGVpZ2h0LHRoaXMuX2hhc0ludmFsaWREaW1lbnNpb25zKCk/dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKFwiQ2FudmFzIGRpbWVuc2lvbnMgY2Fubm90IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB6ZXJvLlwiKSkpOih0aGlzLnBsYXk9ZnVuY3Rpb24oKXt0aGlzLl9wbGF5aW5nPSEwLHRoaXMubWFwLnRyaWdnZXJSZXBhaW50KCk7fSx0aGlzLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5fcGxheWluZyYmKHRoaXMucHJlcGFyZSgpLHRoaXMuX3BsYXlpbmc9ITEpO30sdGhpcy5fZmluaXNoTG9hZGluZygpKTt9Z2V0Q2FudmFzKCl7cmV0dXJuIHRoaXMuY2FudmFzfW9uQWRkKGUpe3RoaXMubWFwPWUsdGhpcy5sb2FkKCksdGhpcy5jYW52YXMmJnRoaXMuYW5pbWF0ZSYmdGhpcy5wbGF5KCk7fW9uUmVtb3ZlKCl7dGhpcy5wYXVzZSgpO31wcmVwYXJlKCl7bGV0IHQ9ITE7aWYodGhpcy5jYW52YXMud2lkdGghPT10aGlzLndpZHRoJiYodGhpcy53aWR0aD10aGlzLmNhbnZhcy53aWR0aCx0PSEwKSx0aGlzLmNhbnZhcy5oZWlnaHQhPT10aGlzLmhlaWdodCYmKHRoaXMuaGVpZ2h0PXRoaXMuY2FudmFzLmhlaWdodCx0PSEwKSx0aGlzLl9oYXNJbnZhbGlkRGltZW5zaW9ucygpKXJldHVybjtpZigwPT09T2JqZWN0LmtleXModGhpcy50aWxlcykubGVuZ3RoKXJldHVybjtjb25zdCBpPXRoaXMubWFwLnBhaW50ZXIuY29udGV4dDt0aGlzLnRleHR1cmU/KHR8fHRoaXMuX3BsYXlpbmcpJiZ0aGlzLnRleHR1cmUudXBkYXRlKHRoaXMuY2FudmFzLHtwcmVtdWx0aXBseTohMH0pOnRoaXMudGV4dHVyZT1uZXcgZS5UZXh0dXJlKGksdGhpcy5jYW52YXMsaS5nbC5SR0JBLHtwcmVtdWx0aXBseTohMH0pLHRoaXMuX3ByZXBhcmVEYXRhKGkpO31zZXJpYWxpemUoKXtyZXR1cm4ge3R5cGU6XCJjYW52YXNcIixjb29yZGluYXRlczp0aGlzLmNvb3JkaW5hdGVzfX1oYXNUcmFuc2l0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXlpbmd9X2hhc0ludmFsaWREaW1lbnNpb25zKCl7Zm9yKGNvbnN0IGUgb2YgW3RoaXMuY2FudmFzLndpZHRoLHRoaXMuY2FudmFzLmhlaWdodF0paWYoaXNOYU4oZSl8fGU8PTApcmV0dXJuICEwO3JldHVybiAhMX19LGN1c3RvbTpjbGFzcyBleHRlbmRzIGUuRXZlbnRlZHtjb25zdHJ1Y3Rvcih0LGksbyxyKXtzdXBlcigpLHRoaXMuaWQ9dCx0aGlzLnR5cGU9XCJjdXN0b21cIix0aGlzLl9kYXRhVHlwZT1cInJhc3RlclwiLHRoaXMuX2Rpc3BhdGNoZXI9byx0aGlzLl9pbXBsZW1lbnRhdGlvbj1pLHRoaXMuc2V0RXZlbnRlZFBhcmVudChyKSx0aGlzLnNjaGVtZT1cInh5elwiLHRoaXMubWluem9vbT0wLHRoaXMubWF4em9vbT0yMix0aGlzLnRpbGVTaXplPTUxMix0aGlzLl9sb2FkZWQ9ITEsdGhpcy5yb3VuZFpvb209ITAsdGhpcy5faW1wbGVtZW50YXRpb258fHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihgTWlzc2luZyBpbXBsZW1lbnRhdGlvbiBmb3IgJHt0aGlzLmlkfSBjdXN0b20gc291cmNlYCkpKSx0aGlzLl9pbXBsZW1lbnRhdGlvbi5sb2FkVGlsZXx8dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBNaXNzaW5nIGxvYWRUaWxlIGltcGxlbWVudGF0aW9uIGZvciAke3RoaXMuaWR9IGN1c3RvbSBzb3VyY2VgKSkpLHRoaXMuX2ltcGxlbWVudGF0aW9uLmJvdW5kcyYmKHRoaXMudGlsZUJvdW5kcz1uZXcgQih0aGlzLl9pbXBsZW1lbnRhdGlvbi5ib3VuZHMsdGhpcy5taW56b29tLHRoaXMubWF4em9vbSkpLGkudXBkYXRlPXRoaXMuX3VwZGF0ZS5iaW5kKHRoaXMpLGkuY2xlYXJUaWxlcz10aGlzLl9jbGVhclRpbGVzLmJpbmQodGhpcyksaS5jb3ZlcmluZ1RpbGVzPXRoaXMuX2NvdmVyaW5nVGlsZXMuYmluZCh0aGlzKSxlLmV4dGVuZCh0aGlzLGUucGljayhpLFtcImRhdGFUeXBlXCIsXCJzY2hlbWVcIixcIm1pbnpvb21cIixcIm1heHpvb21cIixcInRpbGVTaXplXCIsXCJhdHRyaWJ1dGlvblwiLFwibWluVGlsZUNhY2hlU2l6ZVwiLFwibWF4VGlsZUNhY2hlU2l6ZVwiXSkpO31zZXJpYWxpemUoKXtyZXR1cm4gZS5waWNrKHRoaXMsW1widHlwZVwiLFwic2NoZW1lXCIsXCJtaW56b29tXCIsXCJtYXh6b29tXCIsXCJ0aWxlU2l6ZVwiLFwiYXR0cmlidXRpb25cIl0pfWxvYWQoKXt0aGlzLl9sb2FkZWQ9ITAsdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YVwiLHtkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZURhdGFUeXBlOlwibWV0YWRhdGFcIn0pKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic291cmNlXCIsc291cmNlRGF0YVR5cGU6XCJjb250ZW50XCJ9KSk7fWxvYWRlZCgpe3JldHVybiB0aGlzLl9sb2FkZWR9b25BZGQodCl7dGhpcy5fbWFwPXQsdGhpcy5fbG9hZGVkPSExLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImRhdGFsb2FkaW5nXCIse2RhdGFUeXBlOlwic291cmNlXCJ9KSksdGhpcy5faW1wbGVtZW50YXRpb24ub25BZGQmJnRoaXMuX2ltcGxlbWVudGF0aW9uLm9uQWRkKHQpLHRoaXMubG9hZCgpO31vblJlbW92ZShlKXt0aGlzLl9pbXBsZW1lbnRhdGlvbi5vblJlbW92ZSYmdGhpcy5faW1wbGVtZW50YXRpb24ub25SZW1vdmUoZSk7fWhhc1RpbGUoZSl7aWYodGhpcy5faW1wbGVtZW50YXRpb24uaGFzVGlsZSl7Y29uc3R7eDp0LHk6aSx6Om99PWUuY2Fub25pY2FsO3JldHVybiB0aGlzLl9pbXBsZW1lbnRhdGlvbi5oYXNUaWxlKHt4OnQseTppLHo6b30pfXJldHVybiAhdGhpcy50aWxlQm91bmRzfHx0aGlzLnRpbGVCb3VuZHMuY29udGFpbnMoZS5jYW5vbmljYWwpfWxvYWRUaWxlKHQsaSl7Y29uc3R7eDpvLHk6cix6Om59PXQudGlsZUlELmNhbm9uaWNhbCxzPW5ldyBlLndpbmRvdy5BYm9ydENvbnRyb2xsZXI7dC5yZXF1ZXN0PVByb21pc2UucmVzb2x2ZSh0aGlzLl9pbXBsZW1lbnRhdGlvbi5sb2FkVGlsZSh7eDpvLHk6cix6Om59LHtzaWduYWw6cy5zaWduYWx9KSkudGhlbihmdW5jdGlvbihvKXtyZXR1cm4gZGVsZXRlIHQucmVxdWVzdCx0LmFib3J0ZWQ/KHQuc3RhdGU9XCJ1bmxvYWRlZFwiLGkobnVsbCkpOnZvaWQgMD09PW8/KHQuc3RhdGU9XCJlcnJvcmVkXCIsaShudWxsKSk6bnVsbD09PW8/KHRoaXMubG9hZFRpbGVEYXRhKHQse3dpZHRoOnRoaXMudGlsZVNpemUsaGVpZ2h0OnRoaXMudGlsZVNpemUsZGF0YTpudWxsfSksdC5zdGF0ZT1cImxvYWRlZFwiLGkobnVsbCkpOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZS53aW5kb3cuSW1hZ2VEYXRhfHx0IGluc3RhbmNlb2YgZS53aW5kb3cuSFRNTENhbnZhc0VsZW1lbnR8fHQgaW5zdGFuY2VvZiBlLndpbmRvdy5JbWFnZUJpdG1hcHx8dCBpbnN0YW5jZW9mIGUud2luZG93LkhUTUxJbWFnZUVsZW1lbnR9KG8pPyh0aGlzLmxvYWRUaWxlRGF0YSh0LG8pLHQuc3RhdGU9XCJsb2FkZWRcIix2b2lkIGkobnVsbCkpOih0LnN0YXRlPVwiZXJyb3JlZFwiLGkobmV3IEVycm9yKGBDYW4ndCBpbmZlciBkYXRhIHR5cGUgZm9yICR7dGhpcy5pZH0sIG9ubHkgcmFzdGVyIGRhdGEgc3VwcG9ydGVkIGF0IHRoZSBtb21lbnRgKSkpfS5iaW5kKHRoaXMpKS5jYXRjaCgoZT0+ezIwIT09ZS5jb2RlJiYodC5zdGF0ZT1cImVycm9yZWRcIixpKGUpKTt9KSksdC5yZXF1ZXN0LmNhbmNlbD0oKT0+cy5hYm9ydCgpO31sb2FkVGlsZURhdGEoZSx0KXtNZS5sb2FkVGlsZURhdGEoZSx0LHRoaXMuX21hcC5wYWludGVyKTt9dW5sb2FkVGlsZURhdGEoZSl7TWUudW5sb2FkVGlsZURhdGEoZSx0aGlzLl9tYXAucGFpbnRlcik7fXVubG9hZFRpbGUoZSx0KXtpZih0aGlzLnVubG9hZFRpbGVEYXRhKGUpLHRoaXMuX2ltcGxlbWVudGF0aW9uLnVubG9hZFRpbGUpe2NvbnN0e3g6dCx5OmksejpvfT1lLnRpbGVJRC5jYW5vbmljYWw7dGhpcy5faW1wbGVtZW50YXRpb24udW5sb2FkVGlsZSh7eDp0LHk6aSx6Om99KTt9dCgpO31hYm9ydFRpbGUoZSx0KXtlLnJlcXVlc3QmJmUucmVxdWVzdC5jYW5jZWwmJihlLnJlcXVlc3QuY2FuY2VsKCksZGVsZXRlIGUucmVxdWVzdCksdCgpO31oYXNUcmFuc2l0aW9uKCl7cmV0dXJuICExfV9jb3ZlcmluZ1RpbGVzKCl7cmV0dXJuIHRoaXMuX21hcC50cmFuc2Zvcm0uY292ZXJpbmdUaWxlcyh7dGlsZVNpemU6dGhpcy50aWxlU2l6ZSxtaW56b29tOnRoaXMubWluem9vbSxtYXh6b29tOnRoaXMubWF4em9vbSxyb3VuZFpvb206dGhpcy5yb3VuZFpvb219KS5tYXAoKGU9Pih7eDplLmNhbm9uaWNhbC54LHk6ZS5jYW5vbmljYWwueSx6OmUuY2Fub25pY2FsLnp9KSkpfV9jbGVhclRpbGVzKCl7dGhpcy5fbWFwLnN0eWxlLl9jbGVhclNvdXJjZSh0aGlzLmlkKTt9X3VwZGF0ZSgpe3RoaXMuZmlyZShuZXcgZS5FdmVudChcImRhdGFcIix7ZGF0YVR5cGU6XCJzb3VyY2VcIixzb3VyY2VEYXRhVHlwZTpcImNvbnRlbnRcIn0pKTt9fX0sRGU9ZnVuY3Rpb24odCxpLG8scil7Y29uc3Qgbj1uZXcgU2VbaS50eXBlXSh0LGksbyxyKTtpZihuLmlkIT09dCl0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFNvdXJjZSBpZCB0byBiZSAke3R9IGluc3RlYWQgb2YgJHtuLmlkfWApO3JldHVybiBlLmJpbmRBbGwoW1wibG9hZFwiLFwiYWJvcnRcIixcInVubG9hZFwiLFwic2VyaWFsaXplXCIsXCJwcmVwYXJlXCJdLG4pLG59O2Z1bmN0aW9uIExlKHQsaSl7Y29uc3Qgbz1lLmlkZW50aXR5KFtdKTtyZXR1cm4gZS5zY2FsZShvLG8sWy41KnQud2lkdGgsLjUqLXQuaGVpZ2h0LDFdKSxlLnRyYW5zbGF0ZShvLG8sWzEsLTEsMF0pLGUubXVsdGlwbHkobyxvLHQuY2FsY3VsYXRlUHJvak1hdHJpeChpLnRvVW53cmFwcGVkKCkpKSxGbG9hdDMyQXJyYXkuZnJvbShvKX1mdW5jdGlvbiBBZShlLHQsaSxvLHIsbixzLGE9ITEpe2NvbnN0IGw9ZS50aWxlc0luKG8scyxhKTtsLnNvcnQoUmUpO2NvbnN0IGM9W107Zm9yKGNvbnN0IG8gb2YgbCljLnB1c2goe3dyYXBwZWRUaWxlSUQ6by50aWxlLnRpbGVJRC53cmFwcGVkKCkua2V5LHF1ZXJ5UmVzdWx0czpvLnRpbGUucXVlcnlSZW5kZXJlZEZlYXR1cmVzKHQsaSxlLl9zdGF0ZSxvLHIsbixMZShlLnRyYW5zZm9ybSxvLnRpbGUudGlsZUlEKSxhKX0pO2NvbnN0IGg9ZnVuY3Rpb24oZSl7Y29uc3QgdD17fSxpPXt9O2Zvcihjb25zdCBvIG9mIGUpe2NvbnN0IGU9by5xdWVyeVJlc3VsdHMscj1vLndyYXBwZWRUaWxlSUQsbj1pW3JdPWlbcl18fHt9O2Zvcihjb25zdCBpIGluIGUpe2NvbnN0IG89ZVtpXSxyPW5baV09bltpXXx8e30scz10W2ldPXRbaV18fFtdO2Zvcihjb25zdCBlIG9mIG8pcltlLmZlYXR1cmVJbmRleF18fChyW2UuZmVhdHVyZUluZGV4XT0hMCxzLnB1c2goZSkpO319cmV0dXJuIHR9KGMpO2Zvcihjb25zdCB0IGluIGgpaFt0XS5mb3JFYWNoKCh0PT57Y29uc3QgaT10LmZlYXR1cmUsbz1pLmxheWVyO28mJlwiYmFja2dyb3VuZFwiIT09by50eXBlJiZcInNreVwiIT09by50eXBlJiYoaS5zb3VyY2U9by5zb3VyY2Usb1tcInNvdXJjZS1sYXllclwiXSYmKGkuc291cmNlTGF5ZXI9b1tcInNvdXJjZS1sYXllclwiXSksaS5zdGF0ZT12b2lkIDAhPT1pLmlkP2UuZ2V0RmVhdHVyZVN0YXRlKG9bXCJzb3VyY2UtbGF5ZXJcIl0saS5pZCk6e30pO30pKTtyZXR1cm4gaH1mdW5jdGlvbiB6ZShlLHQpe2NvbnN0IGk9ZS5nZXRSZW5kZXJhYmxlSWRzKCkubWFwKCh0PT5lLmdldFRpbGVCeUlEKHQpKSksbz1bXSxyPXt9O2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSsrKXtjb25zdCBuPWlbZV0scz1uLnRpbGVJRC5jYW5vbmljYWwua2V5O3Jbc118fChyW3NdPSEwLG4ucXVlcnlTb3VyY2VGZWF0dXJlcyhvLHQpKTt9cmV0dXJuIG99ZnVuY3Rpb24gUmUoZSx0KXtjb25zdCBpPWUudGlsZUlELG89dC50aWxlSUQ7cmV0dXJuIGkub3ZlcnNjYWxlZFotby5vdmVyc2NhbGVkWnx8aS5jYW5vbmljYWwueS1vLmNhbm9uaWNhbC55fHxpLndyYXAtby53cmFwfHxpLmNhbm9uaWNhbC54LW8uY2Fub25pY2FsLnh9ZnVuY3Rpb24gT2UoKXtyZXR1cm4gbnVsbCE9ZG4ud29ya2VyQ2xhc3M/bmV3IGRuLndvcmtlckNsYXNzOm5ldyBlLndpbmRvdy5Xb3JrZXIoZG4ud29ya2VyVXJsKX1jb25zdCBCZT1cIm1hcGJveGdsX3ByZWxvYWRlZF93b3JrZXJfcG9vbFwiO2NsYXNzIGtle2NvbnN0cnVjdG9yKCl7dGhpcy5hY3RpdmU9e307fWFjcXVpcmUoZSl7aWYoIXRoaXMud29ya2Vycylmb3IodGhpcy53b3JrZXJzPVtdO3RoaXMud29ya2Vycy5sZW5ndGg8a2Uud29ya2VyQ291bnQ7KXRoaXMud29ya2Vycy5wdXNoKG5ldyBPZSk7cmV0dXJuIHRoaXMuYWN0aXZlW2VdPSEwLHRoaXMud29ya2Vycy5zbGljZSgpfXJlbGVhc2UoZSl7ZGVsZXRlIHRoaXMuYWN0aXZlW2VdLDA9PT10aGlzLm51bUFjdGl2ZSgpJiYodGhpcy53b3JrZXJzLmZvckVhY2goKGU9PntlLnRlcm1pbmF0ZSgpO30pKSx0aGlzLndvcmtlcnM9bnVsbCk7fWlzUHJlbG9hZGVkKCl7cmV0dXJuICEhdGhpcy5hY3RpdmVbQmVdfW51bUFjdGl2ZSgpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmFjdGl2ZSkubGVuZ3RofX1sZXQgRmU7ZnVuY3Rpb24gVWUoKXtyZXR1cm4gRmV8fChGZT1uZXcga2UpLEZlfWZ1bmN0aW9uIE5lKHQsaSl7Y29uc3Qgbz17fTtmb3IoY29uc3QgZSBpbiB0KVwicmVmXCIhPT1lJiYob1tlXT10W2VdKTtyZXR1cm4gZS5yZWZQcm9wZXJ0aWVzLmZvckVhY2goKGU9PntlIGluIGkmJihvW2VdPWlbZV0pO30pKSxvfWZ1bmN0aW9uIGplKGUpe2U9ZS5zbGljZSgpO2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKyl0W2VbaV0uaWRdPWVbaV07Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspXCJyZWZcImluIGVbaV0mJihlW2ldPU5lKGVbaV0sdFtlW2ldLnJlZl0pKTtyZXR1cm4gZX1rZS53b3JrZXJDb3VudD0yO2NvbnN0IEdlPXtzZXRTdHlsZTpcInNldFN0eWxlXCIsYWRkTGF5ZXI6XCJhZGRMYXllclwiLHJlbW92ZUxheWVyOlwicmVtb3ZlTGF5ZXJcIixzZXRQYWludFByb3BlcnR5Olwic2V0UGFpbnRQcm9wZXJ0eVwiLHNldExheW91dFByb3BlcnR5Olwic2V0TGF5b3V0UHJvcGVydHlcIixzZXRGaWx0ZXI6XCJzZXRGaWx0ZXJcIixhZGRTb3VyY2U6XCJhZGRTb3VyY2VcIixyZW1vdmVTb3VyY2U6XCJyZW1vdmVTb3VyY2VcIixzZXRHZW9KU09OU291cmNlRGF0YTpcInNldEdlb0pTT05Tb3VyY2VEYXRhXCIsc2V0TGF5ZXJab29tUmFuZ2U6XCJzZXRMYXllclpvb21SYW5nZVwiLHNldExheWVyUHJvcGVydHk6XCJzZXRMYXllclByb3BlcnR5XCIsc2V0Q2VudGVyOlwic2V0Q2VudGVyXCIsc2V0Wm9vbTpcInNldFpvb21cIixzZXRCZWFyaW5nOlwic2V0QmVhcmluZ1wiLHNldFBpdGNoOlwic2V0UGl0Y2hcIixzZXRTcHJpdGU6XCJzZXRTcHJpdGVcIixzZXRHbHlwaHM6XCJzZXRHbHlwaHNcIixzZXRUcmFuc2l0aW9uOlwic2V0VHJhbnNpdGlvblwiLHNldExpZ2h0Olwic2V0TGlnaHRcIixzZXRUZXJyYWluOlwic2V0VGVycmFpblwiLHNldEZvZzpcInNldEZvZ1wiLHNldFByb2plY3Rpb246XCJzZXRQcm9qZWN0aW9uXCJ9O2Z1bmN0aW9uIFplKGUsdCxpKXtpLnB1c2goe2NvbW1hbmQ6R2UuYWRkU291cmNlLGFyZ3M6W2UsdFtlXV19KTt9ZnVuY3Rpb24gVmUoZSx0LGkpe3QucHVzaCh7Y29tbWFuZDpHZS5yZW1vdmVTb3VyY2UsYXJnczpbZV19KSxpW2VdPSEwO31mdW5jdGlvbiBXZShlLHQsaSxvKXtWZShlLGksbyksWmUoZSx0LGkpO31mdW5jdGlvbiBYZShlLGksbyl7bGV0IHI7Zm9yKHIgaW4gZVtvXSlpZihlW29dLmhhc093blByb3BlcnR5KHIpJiZcImRhdGFcIiE9PXImJiF0KGVbb11bcl0saVtvXVtyXSkpcmV0dXJuICExO2ZvcihyIGluIGlbb10paWYoaVtvXS5oYXNPd25Qcm9wZXJ0eShyKSYmXCJkYXRhXCIhPT1yJiYhdChlW29dW3JdLGlbb11bcl0pKXJldHVybiAhMTtyZXR1cm4gITB9ZnVuY3Rpb24gcWUoZSxpLG8scixuLHMpe2xldCBhO2ZvcihhIGluIGk9aXx8e30sZT1lfHx7fSllLmhhc093blByb3BlcnR5KGEpJiYodChlW2FdLGlbYV0pfHxvLnB1c2goe2NvbW1hbmQ6cyxhcmdzOltyLGEsaVthXSxuXX0pKTtmb3IoYSBpbiBpKWkuaGFzT3duUHJvcGVydHkoYSkmJiFlLmhhc093blByb3BlcnR5KGEpJiYodChlW2FdLGlbYV0pfHxvLnB1c2goe2NvbW1hbmQ6cyxhcmdzOltyLGEsaVthXSxuXX0pKTt9ZnVuY3Rpb24gJGUoZSl7cmV0dXJuIGUuaWR9ZnVuY3Rpb24gSGUoZSx0KXtyZXR1cm4gZVt0LmlkXT10LGV9Y2xhc3MgWWV7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnJlc2V0KGUsdCk7fXJlc2V0KGUsdCl7dGhpcy5wb2ludHM9ZXx8W10sdGhpcy5fZGlzdGFuY2VzPVswXTtmb3IobGV0IGU9MTtlPHRoaXMucG9pbnRzLmxlbmd0aDtlKyspdGhpcy5fZGlzdGFuY2VzW2VdPXRoaXMuX2Rpc3RhbmNlc1tlLTFdK3RoaXMucG9pbnRzW2VdLmRpc3QodGhpcy5wb2ludHNbZS0xXSk7dGhpcy5sZW5ndGg9dGhpcy5fZGlzdGFuY2VzW3RoaXMuX2Rpc3RhbmNlcy5sZW5ndGgtMV0sdGhpcy5wYWRkaW5nPU1hdGgubWluKHR8fDAsLjUqdGhpcy5sZW5ndGgpLHRoaXMucGFkZGVkTGVuZ3RoPXRoaXMubGVuZ3RoLTIqdGhpcy5wYWRkaW5nO31sZXJwKHQpe2lmKDE9PT10aGlzLnBvaW50cy5sZW5ndGgpcmV0dXJuIHRoaXMucG9pbnRzWzBdO3Q9ZS5jbGFtcCh0LDAsMSk7bGV0IGk9MSxvPXRoaXMuX2Rpc3RhbmNlc1tpXTtjb25zdCByPXQqdGhpcy5wYWRkZWRMZW5ndGgrdGhpcy5wYWRkaW5nO2Zvcig7bzxyJiZpPHRoaXMuX2Rpc3RhbmNlcy5sZW5ndGg7KW89dGhpcy5fZGlzdGFuY2VzWysraV07Y29uc3Qgbj1pLTEscz10aGlzLl9kaXN0YW5jZXNbbl0sYT1vLXMsbD1hPjA/KHItcykvYTowO3JldHVybiB0aGlzLnBvaW50c1tuXS5tdWx0KDEtbCkuYWRkKHRoaXMucG9pbnRzW2ldLm11bHQobCkpfX1jbGFzcyBLZXtjb25zdHJ1Y3RvcihlLHQsaSl7Y29uc3Qgbz10aGlzLmJveENlbGxzPVtdLHI9dGhpcy5jaXJjbGVDZWxscz1bXTt0aGlzLnhDZWxsQ291bnQ9TWF0aC5jZWlsKGUvaSksdGhpcy55Q2VsbENvdW50PU1hdGguY2VpbCh0L2kpO2ZvcihsZXQgZT0wO2U8dGhpcy54Q2VsbENvdW50KnRoaXMueUNlbGxDb3VudDtlKyspby5wdXNoKFtdKSxyLnB1c2goW10pO3RoaXMuY2lyY2xlS2V5cz1bXSx0aGlzLmJveEtleXM9W10sdGhpcy5iYm94ZXM9W10sdGhpcy5jaXJjbGVzPVtdLHRoaXMud2lkdGg9ZSx0aGlzLmhlaWdodD10LHRoaXMueFNjYWxlPXRoaXMueENlbGxDb3VudC9lLHRoaXMueVNjYWxlPXRoaXMueUNlbGxDb3VudC90LHRoaXMuYm94VWlkPTAsdGhpcy5jaXJjbGVVaWQ9MDt9a2V5c0xlbmd0aCgpe3JldHVybiB0aGlzLmJveEtleXMubGVuZ3RoK3RoaXMuY2lyY2xlS2V5cy5sZW5ndGh9aW5zZXJ0KGUsdCxpLG8scil7dGhpcy5fZm9yRWFjaENlbGwodCxpLG8scix0aGlzLl9pbnNlcnRCb3hDZWxsLHRoaXMuYm94VWlkKyspLHRoaXMuYm94S2V5cy5wdXNoKGUpLHRoaXMuYmJveGVzLnB1c2godCksdGhpcy5iYm94ZXMucHVzaChpKSx0aGlzLmJib3hlcy5wdXNoKG8pLHRoaXMuYmJveGVzLnB1c2gocik7fWluc2VydENpcmNsZShlLHQsaSxvKXt0aGlzLl9mb3JFYWNoQ2VsbCh0LW8saS1vLHQrbyxpK28sdGhpcy5faW5zZXJ0Q2lyY2xlQ2VsbCx0aGlzLmNpcmNsZVVpZCsrKSx0aGlzLmNpcmNsZUtleXMucHVzaChlKSx0aGlzLmNpcmNsZXMucHVzaCh0KSx0aGlzLmNpcmNsZXMucHVzaChpKSx0aGlzLmNpcmNsZXMucHVzaChvKTt9X2luc2VydEJveENlbGwoZSx0LGksbyxyLG4pe3RoaXMuYm94Q2VsbHNbcl0ucHVzaChuKTt9X2luc2VydENpcmNsZUNlbGwoZSx0LGksbyxyLG4pe3RoaXMuY2lyY2xlQ2VsbHNbcl0ucHVzaChuKTt9X3F1ZXJ5KGUsdCxpLG8scixuKXtpZihpPDB8fGU+dGhpcy53aWR0aHx8bzwwfHx0PnRoaXMuaGVpZ2h0KXJldHVybiAhciYmW107Y29uc3Qgcz1bXTtpZihlPD0wJiZ0PD0wJiZ0aGlzLndpZHRoPD1pJiZ0aGlzLmhlaWdodDw9byl7aWYocilyZXR1cm4gITA7Zm9yKGxldCBlPTA7ZTx0aGlzLmJveEtleXMubGVuZ3RoO2UrKylzLnB1c2goe2tleTp0aGlzLmJveEtleXNbZV0seDE6dGhpcy5iYm94ZXNbNCplXSx5MTp0aGlzLmJib3hlc1s0KmUrMV0seDI6dGhpcy5iYm94ZXNbNCplKzJdLHkyOnRoaXMuYmJveGVzWzQqZSszXX0pO2ZvcihsZXQgZT0wO2U8dGhpcy5jaXJjbGVLZXlzLmxlbmd0aDtlKyspe2NvbnN0IHQ9dGhpcy5jaXJjbGVzWzMqZV0saT10aGlzLmNpcmNsZXNbMyplKzFdLG89dGhpcy5jaXJjbGVzWzMqZSsyXTtzLnB1c2goe2tleTp0aGlzLmNpcmNsZUtleXNbZV0seDE6dC1vLHkxOmktbyx4Mjp0K28seTI6aStvfSk7fXJldHVybiBuP3MuZmlsdGVyKG4pOnN9cmV0dXJuIHRoaXMuX2ZvckVhY2hDZWxsKGUsdCxpLG8sdGhpcy5fcXVlcnlDZWxsLHMse2hpdFRlc3Q6cixzZWVuVWlkczp7Ym94Ont9LGNpcmNsZTp7fX19LG4pLHI/cy5sZW5ndGg+MDpzfV9xdWVyeUNpcmNsZShlLHQsaSxvLHIpe2NvbnN0IG49ZS1pLHM9ZStpLGE9dC1pLGw9dCtpO2lmKHM8MHx8bj50aGlzLndpZHRofHxsPDB8fGE+dGhpcy5oZWlnaHQpcmV0dXJuICFvJiZbXTtjb25zdCBjPVtdO3JldHVybiB0aGlzLl9mb3JFYWNoQ2VsbChuLGEscyxsLHRoaXMuX3F1ZXJ5Q2VsbENpcmNsZSxjLHtoaXRUZXN0Om8sY2lyY2xlOnt4OmUseTp0LHJhZGl1czppfSxzZWVuVWlkczp7Ym94Ont9LGNpcmNsZTp7fX19LHIpLG8/Yy5sZW5ndGg+MDpjfXF1ZXJ5KGUsdCxpLG8scil7cmV0dXJuIHRoaXMuX3F1ZXJ5KGUsdCxpLG8sITEscil9aGl0VGVzdChlLHQsaSxvLHIpe3JldHVybiB0aGlzLl9xdWVyeShlLHQsaSxvLCEwLHIpfWhpdFRlc3RDaXJjbGUoZSx0LGksbyl7cmV0dXJuIHRoaXMuX3F1ZXJ5Q2lyY2xlKGUsdCxpLCEwLG8pfV9xdWVyeUNlbGwoZSx0LGksbyxyLG4scyxhKXtjb25zdCBsPXMuc2VlblVpZHMsYz10aGlzLmJveENlbGxzW3JdO2lmKG51bGwhPT1jKXtjb25zdCByPXRoaXMuYmJveGVzO2Zvcihjb25zdCBoIG9mIGMpaWYoIWwuYm94W2hdKXtsLmJveFtoXT0hMDtjb25zdCBjPTQqaDtpZihlPD1yW2MrMl0mJnQ8PXJbYyszXSYmaT49cltjKzBdJiZvPj1yW2MrMV0mJighYXx8YSh0aGlzLmJveEtleXNbaF0pKSl7aWYocy5oaXRUZXN0KXJldHVybiBuLnB1c2goITApLCEwO24ucHVzaCh7a2V5OnRoaXMuYm94S2V5c1toXSx4MTpyW2NdLHkxOnJbYysxXSx4MjpyW2MrMl0seTI6cltjKzNdfSk7fX19Y29uc3QgaD10aGlzLmNpcmNsZUNlbGxzW3JdO2lmKG51bGwhPT1oKXtjb25zdCByPXRoaXMuY2lyY2xlcztmb3IoY29uc3QgYyBvZiBoKWlmKCFsLmNpcmNsZVtjXSl7bC5jaXJjbGVbY109ITA7Y29uc3QgaD0zKmM7aWYodGhpcy5fY2lyY2xlQW5kUmVjdENvbGxpZGUocltoXSxyW2grMV0scltoKzJdLGUsdCxpLG8pJiYoIWF8fGEodGhpcy5jaXJjbGVLZXlzW2NdKSkpe2lmKHMuaGl0VGVzdClyZXR1cm4gbi5wdXNoKCEwKSwhMDt7Y29uc3QgZT1yW2hdLHQ9cltoKzFdLGk9cltoKzJdO24ucHVzaCh7a2V5OnRoaXMuY2lyY2xlS2V5c1tjXSx4MTplLWkseTE6dC1pLHgyOmUraSx5Mjp0K2l9KTt9fX19fV9xdWVyeUNlbGxDaXJjbGUoZSx0LGksbyxyLG4scyxhKXtjb25zdCBsPXMuY2lyY2xlLGM9cy5zZWVuVWlkcyxoPXRoaXMuYm94Q2VsbHNbcl07aWYobnVsbCE9PWgpe2NvbnN0IGU9dGhpcy5iYm94ZXM7Zm9yKGNvbnN0IHQgb2YgaClpZighYy5ib3hbdF0pe2MuYm94W3RdPSEwO2NvbnN0IGk9NCp0O2lmKHRoaXMuX2NpcmNsZUFuZFJlY3RDb2xsaWRlKGwueCxsLnksbC5yYWRpdXMsZVtpKzBdLGVbaSsxXSxlW2krMl0sZVtpKzNdKSYmKCFhfHxhKHRoaXMuYm94S2V5c1t0XSkpKXJldHVybiBuLnB1c2goITApLCEwfX1jb25zdCB1PXRoaXMuY2lyY2xlQ2VsbHNbcl07aWYobnVsbCE9PXUpe2NvbnN0IGU9dGhpcy5jaXJjbGVzO2Zvcihjb25zdCB0IG9mIHUpaWYoIWMuY2lyY2xlW3RdKXtjLmNpcmNsZVt0XT0hMDtjb25zdCBpPTMqdDtpZih0aGlzLl9jaXJjbGVzQ29sbGlkZShlW2ldLGVbaSsxXSxlW2krMl0sbC54LGwueSxsLnJhZGl1cykmJighYXx8YSh0aGlzLmNpcmNsZUtleXNbdF0pKSlyZXR1cm4gbi5wdXNoKCEwKSwhMH19fV9mb3JFYWNoQ2VsbChlLHQsaSxvLHIsbixzLGEpe2NvbnN0IGw9dGhpcy5fY29udmVydFRvWENlbGxDb29yZChlKSxjPXRoaXMuX2NvbnZlcnRUb1lDZWxsQ29vcmQodCksaD10aGlzLl9jb252ZXJ0VG9YQ2VsbENvb3JkKGkpLHU9dGhpcy5fY29udmVydFRvWUNlbGxDb29yZChvKTtmb3IobGV0IF89bDtfPD1oO18rKylmb3IobGV0IGw9YztsPD11O2wrKylpZihyLmNhbGwodGhpcyxlLHQsaSxvLHRoaXMueENlbGxDb3VudCpsK18sbixzLGEpKXJldHVybn1fY29udmVydFRvWENlbGxDb29yZChlKXtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLnhDZWxsQ291bnQtMSxNYXRoLmZsb29yKGUqdGhpcy54U2NhbGUpKSl9X2NvbnZlcnRUb1lDZWxsQ29vcmQoZSl7cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5taW4odGhpcy55Q2VsbENvdW50LTEsTWF0aC5mbG9vcihlKnRoaXMueVNjYWxlKSkpfV9jaXJjbGVzQ29sbGlkZShlLHQsaSxvLHIsbil7Y29uc3Qgcz1vLWUsYT1yLXQsbD1pK247cmV0dXJuIGwqbD5zKnMrYSphfV9jaXJjbGVBbmRSZWN0Q29sbGlkZShlLHQsaSxvLHIsbixzKXtjb25zdCBhPShuLW8pLzIsbD1NYXRoLmFicyhlLShvK2EpKTtpZihsPmEraSlyZXR1cm4gITE7Y29uc3QgYz0ocy1yKS8yLGg9TWF0aC5hYnModC0ocitjKSk7aWYoaD5jK2kpcmV0dXJuICExO2lmKGw8PWF8fGg8PWMpcmV0dXJuICEwO2NvbnN0IHU9bC1hLF89aC1jO3JldHVybiB1KnUrXypfPD1pKml9fWNvbnN0IEplPXt1bmtub3duOjAsZmxpcFJlcXVpcmVkOjEsZmxpcE5vdFJlcXVpcmVkOjJ9LFFlPU1hdGgudGFuKDg1Kk1hdGguUEkvMTgwKTtmdW5jdGlvbiBldCh0LGksbyxyLG4scyxhKXtjb25zdCBsPWUuY3JlYXRlKCk7aWYobylpZihcImdsb2JlXCI9PT1zLm5hbWUpe2NvbnN0IHQ9ZS5jYWxjdWxhdGVHbG9iZUxhYmVsTWF0cml4KG4saSk7ZS5tdWx0aXBseShsLGwsdCk7fWVsc2Uge2NvbnN0IHQ9dihbXSxhKTtsWzBdPXRbMF0sbFsxXT10WzFdLGxbNF09dFsyXSxsWzVdPXRbM10scnx8ZS5yb3RhdGVaKGwsbCxuLmFuZ2xlKTt9ZWxzZSBlLm11bHRpcGx5KGwsbi5sYWJlbFBsYW5lTWF0cml4LHQpO3JldHVybiBsfWZ1bmN0aW9uIHR0KGUsdCxpLG8scixuLHMpe2NvbnN0IGE9ZXQoZSx0LGksbyxyLG4scyk7cmV0dXJuIFwiZ2xvYmVcIj09PW4ubmFtZSYmaXx8KGFbMl09YVs2XT1hWzEwXT1hWzE0XT0wKSxhfWZ1bmN0aW9uIGl0KHQsaSxvLHIsbixzLGEpe2lmKG8pe2lmKFwiZ2xvYmVcIj09PXMubmFtZSl7Y29uc3QgbD1ldCh0LGksbyxyLG4scyxhKTtyZXR1cm4gZS5pbnZlcnQobCxsKSxlLm11bHRpcGx5KGwsdCxsKSxsfXtjb25zdCBpPWUuY2xvbmUodCksbz1lLmlkZW50aXR5KFtdKTtyZXR1cm4gb1swXT1hWzBdLG9bMV09YVsxXSxvWzRdPWFbMl0sb1s1XT1hWzNdLGUubXVsdGlwbHkoaSxpLG8pLHJ8fGUucm90YXRlWihpLGksLW4uYW5nbGUpLGl9fXJldHVybiBuLmdsQ29vcmRNYXRyaXh9ZnVuY3Rpb24gb3QodCxpLG8scil7Y29uc3Qgbj1bdCxpLG8sMV07bz9lLnRyYW5zZm9ybU1hdDQkMShuLG4scik6cHQobixuLHIpO2NvbnN0IHM9blszXTtyZXR1cm4gblswXS89cyxuWzFdLz1zLG5bMl0vPXMsbn1mdW5jdGlvbiBydChlLHQpe3JldHVybiBNYXRoLm1pbiguNStlL3QqLjUsMS41KX1mdW5jdGlvbiBudChlLHQpe2NvbnN0IGk9ZVswXS9lWzNdLG89ZVsxXS9lWzNdO3JldHVybiBpPj0tdFswXSYmaTw9dFswXSYmbz49LXRbMV0mJm88PXRbMV19ZnVuY3Rpb24gc3QodCxpLG8scixuLHMsYSxsLGMsaCl7Y29uc3QgdT1vLnRyYW5zZm9ybSxfPXI/dC50ZXh0U2l6ZURhdGE6dC5pY29uU2l6ZURhdGEsZD1lLmV2YWx1YXRlU2l6ZUZvclpvb20oXyxvLnRyYW5zZm9ybS56b29tKSxwPVwiZ2xvYmVcIj09PXUucHJvamVjdGlvbi5uYW1lLG09WzI1Ni9vLndpZHRoKjIrMSwyNTYvby5oZWlnaHQqMisxXSxmPXI/dC50ZXh0LmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheTp0Lmljb24uZHluYW1pY0xheW91dFZlcnRleEFycmF5O2YuY2xlYXIoKTtsZXQgZz1udWxsO3AmJihnPXI/dC50ZXh0Lmdsb2JlRXh0VmVydGV4QXJyYXk6dC5pY29uLmdsb2JlRXh0VmVydGV4QXJyYXkpO2NvbnN0IHY9dC5saW5lVmVydGV4QXJyYXkseD1yP3QudGV4dC5wbGFjZWRTeW1ib2xBcnJheTp0Lmljb24ucGxhY2VkU3ltYm9sQXJyYXkseT1vLnRyYW5zZm9ybS53aWR0aC9vLnRyYW5zZm9ybS5oZWlnaHQ7bGV0IGIsdz0hMTtmb3IobGV0IHI9MDtyPHgubGVuZ3RoO3IrKyl7Y29uc3QgcD14LmdldChyKSx7bnVtR2x5cGhzOlQsd3JpdGluZ01vZGU6RX09cDtpZihFIT09ZS5Xcml0aW5nTW9kZS52ZXJ0aWNhbHx8d3x8Yj09PWUuV3JpdGluZ01vZGUuaG9yaXpvbnRhbHx8KHc9ITApLGI9RSwocC5oaWRkZW58fEU9PT1lLldyaXRpbmdNb2RlLnZlcnRpY2FsKSYmIXcpe2R0KFQsZik7Y29udGludWV9dz0hMTtjb25zdCBDPW5ldyBlLlBvaW50KHAudGlsZUFuY2hvclgscC50aWxlQW5jaG9yWSk7bGV0e3g6TSx5OkksejpQfT11LnByb2plY3Rpb24ucHJvamVjdFRpbGVQb2ludChDLngsQy55LGguY2Fub25pY2FsKTtpZihjKXtjb25zdFtlLHQsaV09YyhDKTtNKz1lLEkrPXQsUCs9aTt9Y29uc3QgUz1bTSxJLFAsMV07aWYoZS50cmFuc2Zvcm1NYXQ0JDEoUyxTLGkpLCFudChTLG0pKXtkdChULGYpO2NvbnRpbnVlfWNvbnN0IEQ9cnQoby50cmFuc2Zvcm0uY2FtZXJhVG9DZW50ZXJEaXN0YW5jZSxTWzNdKSxMPWUuZXZhbHVhdGVTaXplRm9yRmVhdHVyZShfLGQscCksQT1hP0wvRDpMKkQsej1vdChNLEksUCxuKTtpZih6WzNdPD0wKXtkdChULGYpO2NvbnRpbnVlfWxldCBSPXt9O2NvbnN0IE89YT9udWxsOmMsQj1jdChwLEEsITEsbCxpLG4scyx0LmdseXBoT2Zmc2V0QXJyYXksdixmLGcseixDLFIseSxPLHUucHJvamVjdGlvbixoLGEpO3c9Qi51c2VWZXJ0aWNhbCxPJiZCLm5lZWRzRmxpcHBpbmcmJihSPXt9KSwoQi5ub3RFbm91Z2hSb29tfHx3fHxCLm5lZWRzRmxpcHBpbmcmJmN0KHAsQSwhMCxsLGksbixzLHQuZ2x5cGhPZmZzZXRBcnJheSx2LGYsZyx6LEMsUix5LE8sdS5wcm9qZWN0aW9uLGgsYSkubm90RW5vdWdoUm9vbSkmJmR0KFQsZik7fXI/KHQudGV4dC5keW5hbWljTGF5b3V0VmVydGV4QnVmZmVyLnVwZGF0ZURhdGEoZiksZyYmdC50ZXh0Lmdsb2JlRXh0VmVydGV4QnVmZmVyLnVwZGF0ZURhdGEoZykpOih0Lmljb24uZHluYW1pY0xheW91dFZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKGYpLGcmJnQuaWNvbi5nbG9iZUV4dFZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKGcpKTt9ZnVuY3Rpb24gYXQoZSx0LGksbyxyLG4scyxhLGwsYyxoLHUsXyxkLHAsbSl7Y29uc3R7bGluZVN0YXJ0SW5kZXg6ZixnbHlwaFN0YXJ0SW5kZXg6ZyxzZWdtZW50OnZ9PWEseD1nK2EubnVtR2x5cGhzLHk9ZithLmxpbmVMZW5ndGgsYj10LmdldG9mZnNldFgoZyksdz10LmdldG9mZnNldFgoeC0xKSxUPV90KGUqYixpLG8scixuLHMsdixmLHksbCxjLGgsdSxfLCEwLGQscCxtKTtpZighVClyZXR1cm4gbnVsbDtjb25zdCBFPV90KGUqdyxpLG8scixuLHMsdixmLHksbCxjLGgsdSxfLCEwLGQscCxtKTtyZXR1cm4gRT97Zmlyc3Q6VCxsYXN0OkV9Om51bGx9ZnVuY3Rpb24gbHQodCxpLG8scil7cmV0dXJuIHQ9PT1lLldyaXRpbmdNb2RlLmhvcml6b250YWwmJk1hdGguYWJzKHIpPk1hdGguYWJzKG8pP3t1c2VWZXJ0aWNhbDohMH06dD09PWUuV3JpdGluZ01vZGUudmVydGljYWw/cj4wP3tuZWVkc0ZsaXBwaW5nOiEwfTpudWxsOmkhPT1KZS51bmtub3duJiZmdW5jdGlvbihlLHQpe3JldHVybiAwPT09ZXx8TWF0aC5hYnModC9lKT5RZX0obyxyKT9pPT09SmUuZmxpcFJlcXVpcmVkP3tuZWVkc0ZsaXBwaW5nOiEwfTpudWxsOm88MD97bmVlZHNGbGlwcGluZzohMH06bnVsbH1mdW5jdGlvbiBjdCh0LGksbyxyLG4scyxhLGwsYyxoLHUsXyxkLHAsbSxmLGcsdix4KXtjb25zdCB5PWkvMjQsYj10LmxpbmVPZmZzZXRYKnksdz10LmxpbmVPZmZzZXRZKnkse2xpbmVTdGFydEluZGV4OlQsZ2x5cGhTdGFydEluZGV4OkUsbnVtR2x5cGhzOkMsc2VnbWVudDpNLHdyaXRpbmdNb2RlOkksZmxpcFN0YXRlOlB9PXQsUz1UK3QubGluZUxlbmd0aCxEPXQ9PntpZih1KXtjb25zdFtpLG8scl09dC51cCxuPWgubGVuZ3RoO2UudXBkYXRlR2xvYmVWZXJ0ZXhOb3JtYWwodSxuKzAsaSxvLHIpLGUudXBkYXRlR2xvYmVWZXJ0ZXhOb3JtYWwodSxuKzEsaSxvLHIpLGUudXBkYXRlR2xvYmVWZXJ0ZXhOb3JtYWwodSxuKzIsaSxvLHIpLGUudXBkYXRlR2xvYmVWZXJ0ZXhOb3JtYWwodSxuKzMsaSxvLHIpO31jb25zdFtpLG8scl09dC5wb2ludDtlLmFkZER5bmFtaWNBdHRyaWJ1dGVzKGgsaSxvLHIsdC5hbmdsZSk7fTtpZihDPjEpe2NvbnN0IGU9YXQoeSxsLGIsdyxvLF8sZCx0LGMscyxwLGYsITEsZyx2LHgpO2lmKCFlKXJldHVybiB7bm90RW5vdWdoUm9vbTohMH07aWYociYmIW8pe2xldFtpLG8scl09ZS5maXJzdC5wb2ludCxbbixzLGxdPWUubGFzdC5wb2ludDtbaSxvXT1vdChpLG8scixhKSxbbixzXT1vdChuLHMsbCxhKTtjb25zdCBjPWx0KEksUCwobi1pKSptLHMtbyk7aWYodC5mbGlwU3RhdGU9YyYmYy5uZWVkc0ZsaXBwaW5nP0plLmZsaXBSZXF1aXJlZDpKZS5mbGlwTm90UmVxdWlyZWQsYylyZXR1cm4gY31EKGUuZmlyc3QpO2ZvcihsZXQgZT1FKzE7ZTxFK0MtMTtlKyspe2NvbnN0IHQ9X3QoeSpsLmdldG9mZnNldFgoZSksYix3LG8sXyxkLE0sVCxTLGMscyxwLGYsITEsITEsZyx2LHgpO2lmKCF0KXJldHVybiBoLmxlbmd0aC09NCooZS1FKSx7bm90RW5vdWdoUm9vbTohMH07RCh0KTt9RChlLmxhc3QpO31lbHNlIHtpZihyJiYhbyl7Y29uc3QgaT1vdChkLngsZC55LDAsbiksbz1UK00rMSxyPW5ldyBlLlBvaW50KGMuZ2V0eChvKSxjLmdldHkobykpLHM9b3Qoci54LHIueSwwLG4pLGE9c1szXT4wP3M6dXQoZCxyLGksMSxuLHZvaWQgMCxnLHYuY2Fub25pY2FsKSxsPWx0KEksUCwoYVswXS1pWzBdKSptLGFbMV0taVsxXSk7aWYodC5mbGlwU3RhdGU9bCYmbC5uZWVkc0ZsaXBwaW5nP0plLmZsaXBSZXF1aXJlZDpKZS5mbGlwTm90UmVxdWlyZWQsbClyZXR1cm4gbH1jb25zdCBpPV90KHkqbC5nZXRvZmZzZXRYKEUpLGIsdyxvLF8sZCxNLFQsUyxjLHMscCxmLCExLCExLGcsdix4KTtpZighaSlyZXR1cm4ge25vdEVub3VnaFJvb206ITB9O0QoaSk7fXJldHVybiB7fX1mdW5jdGlvbiBodChlLHQsaSxvLHIpe2NvbnN0e3g6bix5OnMsejphfT1vLnByb2plY3RUaWxlUG9pbnQoZS54LGUueSx0KTtpZighcilyZXR1cm4gb3QobixzLGEsaSk7Y29uc3RbbCxjLGhdPXIoZSk7cmV0dXJuIG90KG4rbCxzK2MsYStoLGkpfWZ1bmN0aW9uIHV0KHQsaSxvLHIsbixzLGEsbCl7Y29uc3QgYz1odCh0LnN1YihpKS5fdW5pdCgpLl9hZGQodCksbCxuLGEscyk7cmV0dXJuIGUuc3ViKGMsbyxjKSxlLm5vcm1hbGl6ZShjLGMpLGUuc2NhbGVBbmRBZGQoYyxvLGMscil9ZnVuY3Rpb24gX3QodCxpLG8scixuLHMsYSxsLGMsaCx1LF8sZCxwLG0sZixnLHYpe2NvbnN0IHg9cj90LWk6dCtpO2xldCB5PXg+MD8xOi0xLGI9MDtyJiYoeSo9LTEsYj1NYXRoLlBJKSx5PDAmJihiKz1NYXRoLlBJKTtsZXQgdz1sK2ErKHk+MD8wOjEpfDAsVD1uLEU9bixDPTAsTT0wO2NvbnN0IEk9TWF0aC5hYnMoeCksUD1bXSxTPVtdO2xldCBEPXMsTD1EO2NvbnN0IEE9KCk9PnV0KEwsRCxFLEktQysxLHUsZCxmLGcuY2Fub25pY2FsKTtmb3IoO0MrTTw9STspe2lmKHcrPXksdzxsfHx3Pj1jKXJldHVybiBudWxsO2lmKEU9VCxMPUQsUC5wdXNoKEUpLHAmJlMucHVzaChMKSxEPW5ldyBlLlBvaW50KGguZ2V0eCh3KSxoLmdldHkodykpLFQ9X1t3XSwhVCl7Y29uc3QgZT1odChELGcuY2Fub25pY2FsLHUsZixkKTtUPWVbM10+MD9fW3ddPWU6QSgpO31DKz1NLE09ZS5kaXN0YW5jZShFLFQpO31tJiZkJiYoX1t3XSYmKFQ9QSgpLE09ZS5kaXN0YW5jZShFLFQpKSxfW3ddPVQpO2NvbnN0IHo9KEktQykvTSxSPUQuc3ViKEwpLl9tdWx0KHopLl9hZGQoTCksTz1lLnN1YihbXSxULEUpLEI9ZS5zY2FsZUFuZEFkZChbXSxFLE8seik7bGV0IGs9WzAsMCwxXSxGPU9bMF0sVT1PWzFdO2lmKHYmJihrPWYudXBWZWN0b3IoZy5jYW5vbmljYWwsUi54LFIueSksMCE9PWtbMF18fDAhPT1rWzFdfHwxIT09a1syXSkpe2NvbnN0IHQ9W2tbMl0sMCwta1swXV0saT1lLmNyb3NzKFtdLGssdCk7ZS5ub3JtYWxpemUodCx0KSxlLm5vcm1hbGl6ZShpLGkpLEY9ZS5kb3QoTyx0KSxVPWUuZG90KE8saSk7fWlmKG8pe2NvbnN0IHQ9ZS5jcm9zcyhbXSxrLE8pO2Uubm9ybWFsaXplKHQsdCksZS5zY2FsZUFuZEFkZChCLEIsdCxvKnkpO31jb25zdCBOPWIrTWF0aC5hdGFuMihVLEYpO3JldHVybiBQLnB1c2goQikscCYmUy5wdXNoKFIpLHtwb2ludDpCLGFuZ2xlOk4scGF0aDpQLHRpbGVQYXRoOlMsdXA6a319ZnVuY3Rpb24gZHQoZSx0KXtjb25zdCBpPXQubGVuZ3RoLG89aSs0KmU7dC5yZXNpemUobyksdC5mbG9hdDMyLmZpbGwoLTEvMCw0KmksNCpvKTt9ZnVuY3Rpb24gcHQoZSx0LGkpe2NvbnN0IG89dFswXSxyPXRbMV07cmV0dXJuIGVbMF09aVswXSpvK2lbNF0qcitpWzEyXSxlWzFdPWlbMV0qbytpWzVdKnIraVsxM10sZVszXT1pWzNdKm8raVs3XSpyK2lbMTVdLGV9Y29uc3QgbXQ9MTAwO2NsYXNzIGZ0e2NvbnN0cnVjdG9yKGUsdCxpPW5ldyBLZShlLndpZHRoKzIwMCxlLmhlaWdodCsyMDAsMjUpLG89bmV3IEtlKGUud2lkdGgrMjAwLGUuaGVpZ2h0KzIwMCwyNSkpe3RoaXMudHJhbnNmb3JtPWUsdGhpcy5ncmlkPWksdGhpcy5pZ25vcmVkR3JpZD1vLHRoaXMucGl0Y2hmYWN0b3I9TWF0aC5jb3MoZS5fcGl0Y2gpKmUuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZSx0aGlzLnNjcmVlblJpZ2h0Qm91bmRhcnk9ZS53aWR0aCttdCx0aGlzLnNjcmVlbkJvdHRvbUJvdW5kYXJ5PWUuaGVpZ2h0K210LHRoaXMuZ3JpZFJpZ2h0Qm91bmRhcnk9ZS53aWR0aCsyMDAsdGhpcy5ncmlkQm90dG9tQm91bmRhcnk9ZS5oZWlnaHQrMjAwLHRoaXMuZm9nU3RhdGU9dDt9cGxhY2VDb2xsaXNpb25Cb3goZSx0LGksbyxyLG4scyxhKXtsZXQgbD1pLnByb2plY3RlZEFuY2hvclgsYz1pLnByb2plY3RlZEFuY2hvclksaD1pLnByb2plY3RlZEFuY2hvclo7Y29uc3QgdT1pLmVsZXZhdGlvbixfPWkudGlsZUlELGQ9ZS5nZXRQcm9qZWN0aW9uKCk7aWYodSYmXyl7Y29uc3RbZSx0LG9dPWQudXBWZWN0b3IoXy5jYW5vbmljYWwsaS50aWxlQW5jaG9yWCxpLnRpbGVBbmNob3JZKSxyPWQudXBWZWN0b3JTY2FsZShfLmNhbm9uaWNhbCx0aGlzLnRyYW5zZm9ybS5jZW50ZXIubGF0LHRoaXMudHJhbnNmb3JtLndvcmxkU2l6ZSkubWV0ZXJzVG9UaWxlO2wrPWUqdSpyLGMrPXQqdSpyLGgrPW8qdSpyO31jb25zdCBwPXRoaXMucHJvamVjdEFuZEdldFBlcnNwZWN0aXZlUmF0aW8ocyxsLGMsaCxpLnRpbGVJRCxcImdsb2JlXCI9PT1kLm5hbWV8fCEhdXx8dGhpcy50cmFuc2Zvcm0ucGl0Y2g+MCxkKSxtPW4qcC5wZXJzcGVjdGl2ZVJhdGlvLGY9KGkueDEqdCtvLngtaS5wYWRkaW5nKSptK3AucG9pbnQueCxnPShpLnkxKnQrby55LWkucGFkZGluZykqbStwLnBvaW50Lnksdj0oaS54Mip0K28ueCtpLnBhZGRpbmcpKm0rcC5wb2ludC54LHg9KGkueTIqdCtvLnkraS5wYWRkaW5nKSptK3AucG9pbnQueSx5PXAucGVyc3BlY3RpdmVSYXRpbzw9LjU1fHxwLm9jY2x1ZGVkO3JldHVybiAhdGhpcy5pc0luc2lkZUdyaWQoZixnLHYseCl8fCFyJiZ0aGlzLmdyaWQuaGl0VGVzdChmLGcsdix4LGEpfHx5P3tib3g6W10sb2Zmc2NyZWVuOiExLG9jY2x1ZGVkOnAub2NjbHVkZWR9Ontib3g6W2YsZyx2LHhdLG9mZnNjcmVlbjp0aGlzLmlzT2Zmc2NyZWVuKGYsZyx2LHgpLG9jY2x1ZGVkOiExfX1wbGFjZUNvbGxpc2lvbkNpcmNsZXModCxpLG8scixuLHMsYSxsLGMsaCx1LF8sZCxwLG0pe2NvbnN0IGY9W10sZz10aGlzLnRyYW5zZm9ybS5lbGV2YXRpb24sdj10LmdldFByb2plY3Rpb24oKSx4PWc/Zy5nZXRBdFRpbGVPZmZzZXRGdW5jKG0sdGhpcy50cmFuc2Zvcm0uY2VudGVyLmxhdCx0aGlzLnRyYW5zZm9ybS53b3JsZFNpemUsdik6bnVsbCx5PW5ldyBlLlBvaW50KG8udGlsZUFuY2hvclgsby50aWxlQW5jaG9yWSk7bGV0e3g6Yix5OncsejpUfT12LnByb2plY3RUaWxlUG9pbnQoeS54LHkueSxtLmNhbm9uaWNhbCk7aWYoeCl7Y29uc3RbZSx0LGldPXgoeSk7Yis9ZSx3Kz10LFQrPWk7fWNvbnN0IEU9XCJnbG9iZVwiPT09di5uYW1lLEM9dGhpcy5wcm9qZWN0QW5kR2V0UGVyc3BlY3RpdmVSYXRpbyhhLGIsdyxULG0sRXx8ISFnfHx0aGlzLnRyYW5zZm9ybS5waXRjaD4wLHYpLHtwZXJzcGVjdGl2ZVJhdGlvOk19PUMsST0odT9zL006cypNKS9lLk9ORV9FTSxQPW90KGIsdyxULGwpLFM9Qy5zaWduZWREaXN0YW5jZUZyb21DYW1lcmE+MD9hdChJLG4sby5saW5lT2Zmc2V0WCpJLG8ubGluZU9mZnNldFkqSSwhMSxQLHksbyxyLGwse30sZyYmIXU/eDpudWxsLHUmJiEhZyx2LG0sdSk6bnVsbDtsZXQgRD0hMSxMPSExLEE9ITA7aWYoUyYmIUMub2NjbHVkZWQpe2NvbnN0IHQ9LjUqZCpNK3Asbz1uZXcgZS5Qb2ludCgtMTAwLC0xMDApLHI9bmV3IGUuUG9pbnQodGhpcy5zY3JlZW5SaWdodEJvdW5kYXJ5LHRoaXMuc2NyZWVuQm90dG9tQm91bmRhcnkpLG49bmV3IFllLHtmaXJzdDpzLGxhc3Q6YX09UyxsPXMucGF0aC5sZW5ndGg7bGV0IHU9W107Zm9yKGxldCBlPWwtMTtlPj0xO2UtLSl1LnB1c2gocy5wYXRoW2VdKTtmb3IobGV0IGU9MTtlPGEucGF0aC5sZW5ndGg7ZSsrKXUucHVzaChhLnBhdGhbZV0pO2NvbnN0IG09Mi41KnQ7YyYmKHU9dS5tYXAoKChbZSx0LGldLG8pPT4oeCYmIUUmJihpPXgobzxsLTE/cy50aWxlUGF0aFtsLTEtb106YS50aWxlUGF0aFtvLWwrMl0pWzJdKSxvdChlLHQsaSxjKSkpKSx1LnNvbWUoKGU9PmVbM108PTApKSYmKHU9W10pKTtsZXQgZz1bXTtpZih1Lmxlbmd0aD4wKXtsZXQgdD0xLzAsaT0tMS8wLG49MS8wLHM9LTEvMDtmb3IoY29uc3QgZSBvZiB1KXQ9TWF0aC5taW4odCxlWzBdKSxuPU1hdGgubWluKG4sZVsxXSksaT1NYXRoLm1heChpLGVbMF0pLHM9TWF0aC5tYXgocyxlWzFdKTtpPj1vLngmJnQ8PXIueCYmcz49by55JiZuPD1yLnkmJihnPVt1Lm1hcCgodD0+bmV3IGUuUG9pbnQodFswXSx0WzFdKSkpXSwodDxvLnh8fGk+ci54fHxuPG8ueXx8cz5yLnkpJiYoZz1lLmNsaXBMaW5lKGcsby54LG8ueSxyLngsci55KSkpO31mb3IoY29uc3QgZSBvZiBnKXtuLnJlc2V0KGUsLjI1KnQpO2xldCBvPTA7bz1uLmxlbmd0aDw9LjUqdD8xOk1hdGguY2VpbChuLnBhZGRlZExlbmd0aC9tKSsxO2ZvcihsZXQgZT0wO2U8bztlKyspe2NvbnN0IHI9ZS9NYXRoLm1heChvLTEsMSkscz1uLmxlcnAociksYT1zLngrbXQsbD1zLnkrbXQ7Zi5wdXNoKGEsbCx0LDApO2NvbnN0IGM9YS10LHU9bC10LGQ9YSt0LHA9bCt0O2lmKEE9QSYmdGhpcy5pc09mZnNjcmVlbihjLHUsZCxwKSxMPUx8fHRoaXMuaXNJbnNpZGVHcmlkKGMsdSxkLHApLCFpJiZ0aGlzLmdyaWQuaGl0VGVzdENpcmNsZShhLGwsdCxfKSYmKEQ9ITAsIWgpKXJldHVybiB7Y2lyY2xlczpbXSxvZmZzY3JlZW46ITEsY29sbGlzaW9uRGV0ZWN0ZWQ6RCxvY2NsdWRlZDohMX19fX1yZXR1cm4ge2NpcmNsZXM6IWgmJkR8fCFMP1tdOmYsb2Zmc2NyZWVuOkEsY29sbGlzaW9uRGV0ZWN0ZWQ6RCxvY2NsdWRlZDpDLm9jY2x1ZGVkfX1xdWVyeVJlbmRlcmVkU3ltYm9scyh0KXtpZigwPT09dC5sZW5ndGh8fDA9PT10aGlzLmdyaWQua2V5c0xlbmd0aCgpJiYwPT09dGhpcy5pZ25vcmVkR3JpZC5rZXlzTGVuZ3RoKCkpcmV0dXJuIHt9O2NvbnN0IGk9W107bGV0IG89MS8wLHI9MS8wLG49LTEvMCxzPS0xLzA7Zm9yKGNvbnN0IGEgb2YgdCl7Y29uc3QgdD1uZXcgZS5Qb2ludChhLngrbXQsYS55K210KTtvPU1hdGgubWluKG8sdC54KSxyPU1hdGgubWluKHIsdC55KSxuPU1hdGgubWF4KG4sdC54KSxzPU1hdGgubWF4KHMsdC55KSxpLnB1c2godCk7fWNvbnN0IGE9dGhpcy5ncmlkLnF1ZXJ5KG8scixuLHMpLmNvbmNhdCh0aGlzLmlnbm9yZWRHcmlkLnF1ZXJ5KG8scixuLHMpKSxsPXt9LGM9e307Zm9yKGNvbnN0IHQgb2YgYSl7Y29uc3Qgbz10LmtleTtpZih2b2lkIDA9PT1sW28uYnVja2V0SW5zdGFuY2VJZF0mJihsW28uYnVja2V0SW5zdGFuY2VJZF09e30pLGxbby5idWNrZXRJbnN0YW5jZUlkXVtvLmZlYXR1cmVJbmRleF0pY29udGludWU7Y29uc3Qgcj1bbmV3IGUuUG9pbnQodC54MSx0LnkxKSxuZXcgZS5Qb2ludCh0LngyLHQueTEpLG5ldyBlLlBvaW50KHQueDIsdC55MiksbmV3IGUuUG9pbnQodC54MSx0LnkyKV07ZS5wb2x5Z29uSW50ZXJzZWN0c1BvbHlnb24oaSxyKSYmKGxbby5idWNrZXRJbnN0YW5jZUlkXVtvLmZlYXR1cmVJbmRleF09ITAsdm9pZCAwPT09Y1tvLmJ1Y2tldEluc3RhbmNlSWRdJiYoY1tvLmJ1Y2tldEluc3RhbmNlSWRdPVtdKSxjW28uYnVja2V0SW5zdGFuY2VJZF0ucHVzaChvLmZlYXR1cmVJbmRleCkpO31yZXR1cm4gY31pbnNlcnRDb2xsaXNpb25Cb3goZSx0LGksbyxyKXsodD90aGlzLmlnbm9yZWRHcmlkOnRoaXMuZ3JpZCkuaW5zZXJ0KHtidWNrZXRJbnN0YW5jZUlkOmksZmVhdHVyZUluZGV4Om8sY29sbGlzaW9uR3JvdXBJRDpyfSxlWzBdLGVbMV0sZVsyXSxlWzNdKTt9aW5zZXJ0Q29sbGlzaW9uQ2lyY2xlcyhlLHQsaSxvLHIpe2NvbnN0IG49dD90aGlzLmlnbm9yZWRHcmlkOnRoaXMuZ3JpZCxzPXtidWNrZXRJbnN0YW5jZUlkOmksZmVhdHVyZUluZGV4Om8sY29sbGlzaW9uR3JvdXBJRDpyfTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrPTQpbi5pbnNlcnRDaXJjbGUocyxlW3RdLGVbdCsxXSxlW3QrMl0pO31wcm9qZWN0QW5kR2V0UGVyc3BlY3RpdmVSYXRpbyh0LGksbyxyLG4scyxhKXtjb25zdCBsPVtpLG8sciwxXTtsZXQgYz0hMTtpZihyfHx0aGlzLnRyYW5zZm9ybS5waXRjaD4wKXtpZihlLnRyYW5zZm9ybU1hdDQkMShsLGwsdCksdGhpcy5mb2dTdGF0ZSYmbiYmXCJnbG9iZVwiIT09YS5uYW1lKXtjb25zdCB0PWZ1bmN0aW9uKHQsaSxvLHIsbixzKXtjb25zdCBhPXMuY2FsY3VsYXRlRm9nVGlsZU1hdHJpeChuKSxsPVtpLG8scl07cmV0dXJuIGUudHJhbnNmb3JtTWF0NChsLGwsYSksQyh0LGwscy5waXRjaCxzLl9mb3YpfSh0aGlzLmZvZ1N0YXRlLGksbyxyLG4udG9VbndyYXBwZWQoKSx0aGlzLnRyYW5zZm9ybSk7Yz10Pi45O319ZWxzZSBwdChsLGwsdCk7Y29uc3QgaD1sWzNdO3JldHVybiB7cG9pbnQ6bmV3IGUuUG9pbnQoKGxbMF0vaCsxKS8yKnRoaXMudHJhbnNmb3JtLndpZHRoK210LCgtbFsxXS9oKzEpLzIqdGhpcy50cmFuc2Zvcm0uaGVpZ2h0K210KSxwZXJzcGVjdGl2ZVJhdGlvOk1hdGgubWluKC41K3RoaXMudHJhbnNmb3JtLmdldENhbWVyYVRvQ2VudGVyRGlzdGFuY2UoYSkvaCouNSwxLjUpLHNpZ25lZERpc3RhbmNlRnJvbUNhbWVyYTpoLG9jY2x1ZGVkOnMmJmxbMl0+aHx8Y319aXNPZmZzY3JlZW4oZSx0LGksbyl7cmV0dXJuIGk8bXR8fGU+PXRoaXMuc2NyZWVuUmlnaHRCb3VuZGFyeXx8bzxtdHx8dD50aGlzLnNjcmVlbkJvdHRvbUJvdW5kYXJ5fWlzSW5zaWRlR3JpZChlLHQsaSxvKXtyZXR1cm4gaT49MCYmZTx0aGlzLmdyaWRSaWdodEJvdW5kYXJ5JiZvPj0wJiZ0PHRoaXMuZ3JpZEJvdHRvbUJvdW5kYXJ5fWdldFZpZXdwb3J0TWF0cml4KCl7Y29uc3QgdD1lLmlkZW50aXR5KFtdKTtyZXR1cm4gZS50cmFuc2xhdGUodCx0LFstMTAwLC0xMDAsMF0pLHR9fWZ1bmN0aW9uIGd0KHQsaSxvKXtjb25zdCByPWkuY3JlYXRlVGlsZU1hdHJpeCh0LHQud29ybGRTaXplLG8udG9VbndyYXBwZWQoKSk7cmV0dXJuIGUubXVsdGlwbHkobmV3IEZsb2F0MzJBcnJheSgxNiksdC5wcm9qTWF0cml4LHIpfWZ1bmN0aW9uIHZ0KGUsdCxpKXtpZih0LnByb2plY3Rpb24ubmFtZT09PWkucHJvamVjdGlvbi5uYW1lKXJldHVybiBlLnByb2pNYXRyaXg7Y29uc3Qgbz1pLmNsb25lKCk7cmV0dXJuIG8uc2V0UHJvamVjdGlvbih0LnByb2plY3Rpb24pLGd0KG8sdC5nZXRQcm9qZWN0aW9uKCksZSl9ZnVuY3Rpb24geHQoZSx0LGkpe3JldHVybiB0Lm5hbWU9PT1pLnByb2plY3Rpb24ubmFtZT9lLnByb2pNYXRyaXg6Z3QoaSx0LGUpfWNsYXNzIHl0e2NvbnN0cnVjdG9yKGUsdCxpLG8pe3RoaXMub3BhY2l0eT1lP01hdGgubWF4KDAsTWF0aC5taW4oMSxlLm9wYWNpdHkrKGUucGxhY2VkP3Q6LXQpKSk6byYmaT8xOjAsdGhpcy5wbGFjZWQ9aTt9aXNIaWRkZW4oKXtyZXR1cm4gMD09PXRoaXMub3BhY2l0eSYmIXRoaXMucGxhY2VkfX1jbGFzcyBidHtjb25zdHJ1Y3RvcihlLHQsaSxvLHIsbj0hMSl7dGhpcy50ZXh0PW5ldyB5dChlP2UudGV4dDpudWxsLHQsaSxyKSx0aGlzLmljb249bmV3IHl0KGU/ZS5pY29uOm51bGwsdCxvLHIpLHRoaXMuY2xpcHBlZD1uO31pc0hpZGRlbigpe3JldHVybiB0aGlzLnRleHQuaXNIaWRkZW4oKSYmdGhpcy5pY29uLmlzSGlkZGVuKCl9fWNsYXNzIHd0e2NvbnN0cnVjdG9yKGUsdCxpLG89ITEpe3RoaXMudGV4dD1lLHRoaXMuaWNvbj10LHRoaXMuc2tpcEZhZGU9aSx0aGlzLmNsaXBwZWQ9bzt9fWNsYXNzIFR0e2NvbnN0cnVjdG9yKCl7dGhpcy5pbnZQcm9qTWF0cml4PWUuY3JlYXRlKCksdGhpcy52aWV3cG9ydE1hdHJpeD1lLmNyZWF0ZSgpLHRoaXMuY2lyY2xlcz1bXTt9fWNsYXNzIEV0e2NvbnN0cnVjdG9yKGUsdCxpLG8scil7dGhpcy5idWNrZXRJbnN0YW5jZUlkPWUsdGhpcy5mZWF0dXJlSW5kZXg9dCx0aGlzLnNvdXJjZUxheWVySW5kZXg9aSx0aGlzLmJ1Y2tldEluZGV4PW8sdGhpcy50aWxlSUQ9cjt9fWNsYXNzIEN0e2NvbnN0cnVjdG9yKGUpe3RoaXMuY3Jvc3NTb3VyY2VDb2xsaXNpb25zPWUsdGhpcy5tYXhHcm91cElEPTAsdGhpcy5jb2xsaXNpb25Hcm91cHM9e307fWdldChlKXtpZih0aGlzLmNyb3NzU291cmNlQ29sbGlzaW9ucylyZXR1cm4ge0lEOjAscHJlZGljYXRlOm51bGx9O2lmKCF0aGlzLmNvbGxpc2lvbkdyb3Vwc1tlXSl7Y29uc3QgdD0rK3RoaXMubWF4R3JvdXBJRDt0aGlzLmNvbGxpc2lvbkdyb3Vwc1tlXT17SUQ6dCxwcmVkaWNhdGU6ZT0+ZS5jb2xsaXNpb25Hcm91cElEPT09dH07fXJldHVybiB0aGlzLmNvbGxpc2lvbkdyb3Vwc1tlXX19ZnVuY3Rpb24gTXQodCxpLG8scixuKXtjb25zdHtob3Jpem9udGFsQWxpZ246cyx2ZXJ0aWNhbEFsaWduOmF9PWUuZ2V0QW5jaG9yQWxpZ25tZW50KHQpLGw9LShzLS41KSppLGM9LShhLS41KSpvLGg9ZS5ldmFsdWF0ZVZhcmlhYmxlT2Zmc2V0KHQscik7cmV0dXJuIG5ldyBlLlBvaW50KGwraFswXSpuLGMraFsxXSpuKX1mdW5jdGlvbiBJdCh0LGksbyxyLG4pe2NvbnN0IHM9bmV3IGUuUG9pbnQodCxpKTtyZXR1cm4gbyYmcy5fcm90YXRlKHI/bjotbiksc31jbGFzcyBQdHtjb25zdHJ1Y3RvcihlLHQsaSxvLHIpe3RoaXMudHJhbnNmb3JtPWUuY2xvbmUoKSx0aGlzLnByb2plY3Rpb249ZS5wcm9qZWN0aW9uLm5hbWUsdGhpcy5jb2xsaXNpb25JbmRleD1uZXcgZnQodGhpcy50cmFuc2Zvcm0sciksdGhpcy5wbGFjZW1lbnRzPXt9LHRoaXMub3BhY2l0aWVzPXt9LHRoaXMudmFyaWFibGVPZmZzZXRzPXt9LHRoaXMuc3RhbGU9ITEsdGhpcy5jb21taXRUaW1lPTAsdGhpcy5mYWRlRHVyYXRpb249dCx0aGlzLnJldGFpbmVkUXVlcnlEYXRhPXt9LHRoaXMuY29sbGlzaW9uR3JvdXBzPW5ldyBDdChpKSx0aGlzLmNvbGxpc2lvbkNpcmNsZUFycmF5cz17fSx0aGlzLnByZXZQbGFjZW1lbnQ9byxvJiYoby5wcmV2UGxhY2VtZW50PXZvaWQgMCksdGhpcy5wbGFjZWRPcmllbnRhdGlvbnM9e307fWdldEJ1Y2tldFBhcnRzKHQsaSxvLHIpe2NvbnN0IG49by5nZXRCdWNrZXQoaSkscz1vLmxhdGVzdEZlYXR1cmVJbmRleDtpZighbnx8IXN8fGkuaWQhPT1uLmxheWVySWRzWzBdKXJldHVybjtjb25zdCBhPW4ubGF5ZXJzWzBdLmxheW91dCxsPW8uY29sbGlzaW9uQm94QXJyYXksYz1NYXRoLnBvdygyLHRoaXMudHJhbnNmb3JtLnpvb20tby50aWxlSUQub3ZlcnNjYWxlZFopLGg9by50aWxlU2l6ZS9lLkVYVEVOVCx1PW8udGlsZUlELnRvVW53cmFwcGVkKCk7dGhpcy50cmFuc2Zvcm0uc2V0UHJvamVjdGlvbihuLnByb2plY3Rpb24pO2NvbnN0IF89KGQ9by50aWxlSUQscD1uLmdldFByb2plY3Rpb24oKSxtPXRoaXMudHJhbnNmb3JtLHAubmFtZT09PXRoaXMucHJvamVjdGlvbj9tLmNhbGN1bGF0ZVByb2pNYXRyaXgoZC50b1Vud3JhcHBlZCgpKTpndChtLHAsZCkpO3ZhciBkLHAsbTtjb25zdCBmPVwibWFwXCI9PT1hLmdldChcInRleHQtcGl0Y2gtYWxpZ25tZW50XCIpLGc9XCJtYXBcIj09PWEuZ2V0KFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIik7aS5jb21waWxlRmlsdGVyKCk7Y29uc3Qgdj1pLmR5bmFtaWNGaWx0ZXIoKSx4PWkuZHluYW1pY0ZpbHRlck5lZWRzRmVhdHVyZSgpLHk9dGhpcy50cmFuc2Zvcm0uY2FsY3VsYXRlUGl4ZWxzVG9UaWxlVW5pdHNNYXRyaXgobyksYj10dChfLG8udGlsZUlELmNhbm9uaWNhbCxmLGcsdGhpcy50cmFuc2Zvcm0sbi5nZXRQcm9qZWN0aW9uKCkseSk7bGV0IHc9bnVsbDtpZihmKXtjb25zdCB0PWl0KF8sby50aWxlSUQuY2Fub25pY2FsLGYsZyx0aGlzLnRyYW5zZm9ybSxuLmdldFByb2plY3Rpb24oKSx5KTt3PWUubXVsdGlwbHkoW10sdGhpcy50cmFuc2Zvcm0ubGFiZWxQbGFuZU1hdHJpeCx0KTt9bGV0IFQ9bnVsbDt2JiZvLmxhdGVzdEZlYXR1cmVJbmRleCYmKFQ9e3Vud3JhcHBlZFRpbGVJRDp1LGR5bmFtaWNGaWx0ZXI6dixkeW5hbWljRmlsdGVyTmVlZHNGZWF0dXJlOngsZmVhdHVyZUluZGV4Om8ubGF0ZXN0RmVhdHVyZUluZGV4fSksdGhpcy5yZXRhaW5lZFF1ZXJ5RGF0YVtuLmJ1Y2tldEluc3RhbmNlSWRdPW5ldyBFdChuLmJ1Y2tldEluc3RhbmNlSWQscyxuLnNvdXJjZUxheWVySW5kZXgsbi5pbmRleCxvLnRpbGVJRCk7Y29uc3QgRT17YnVja2V0Om4sbGF5b3V0OmEscG9zTWF0cml4Ol8sdGV4dExhYmVsUGxhbmVNYXRyaXg6YixsYWJlbFRvU2NyZWVuTWF0cml4OncsY2xpcHBpbmdEYXRhOlQsc2NhbGU6Yyx0ZXh0UGl4ZWxSYXRpbzpoLGhvbGRpbmdGb3JGYWRlOm8uaG9sZGluZ0ZvckZhZGUoKSxjb2xsaXNpb25Cb3hBcnJheTpsLHBhcnRpYWxseUV2YWx1YXRlZFRleHRTaXplOmUuZXZhbHVhdGVTaXplRm9yWm9vbShuLnRleHRTaXplRGF0YSx0aGlzLnRyYW5zZm9ybS56b29tKSxwYXJ0aWFsbHlFdmFsdWF0ZWRJY29uU2l6ZTplLmV2YWx1YXRlU2l6ZUZvclpvb20obi5pY29uU2l6ZURhdGEsdGhpcy50cmFuc2Zvcm0uem9vbSksY29sbGlzaW9uR3JvdXA6dGhpcy5jb2xsaXNpb25Hcm91cHMuZ2V0KG4uc291cmNlSUQpfTtpZihyKWZvcihjb25zdCBlIG9mIG4uc29ydEtleVJhbmdlcyl7Y29uc3R7c29ydEtleTppLHN5bWJvbEluc3RhbmNlU3RhcnQ6byxzeW1ib2xJbnN0YW5jZUVuZDpyfT1lO3QucHVzaCh7c29ydEtleTppLHN5bWJvbEluc3RhbmNlU3RhcnQ6byxzeW1ib2xJbnN0YW5jZUVuZDpyLHBhcmFtZXRlcnM6RX0pO31lbHNlIHQucHVzaCh7c3ltYm9sSW5zdGFuY2VTdGFydDowLHN5bWJvbEluc3RhbmNlRW5kOm4uc3ltYm9sSW5zdGFuY2VzLmxlbmd0aCxwYXJhbWV0ZXJzOkV9KTt9YXR0ZW1wdEFuY2hvclBsYWNlbWVudChlLHQsaSxvLHIsbixzLGEsbCxjLGgsdSxfLGQscCxtLGYsZyl7Y29uc3R7dGV4dE9mZnNldDA6dix0ZXh0T2Zmc2V0MTp4LGNyb3NzVGlsZUlEOnl9PXUsYj1bdix4XSx3PU10KGUsaSxvLGIsciksVD10aGlzLmNvbGxpc2lvbkluZGV4LnBsYWNlQ29sbGlzaW9uQm94KGQscix0LEl0KHcueCx3LnksbixzLHRoaXMudHJhbnNmb3JtLmFuZ2xlKSxoLGEsbCxjLnByZWRpY2F0ZSk7aWYobSl7Y29uc3QgZT1kLmdldFN5bWJvbEluc3RhbmNlSWNvblNpemUoZyx0aGlzLnRyYW5zZm9ybS56b29tLHUucGxhY2VkSWNvblN5bWJvbEluZGV4KTtpZigwPT09dGhpcy5jb2xsaXNpb25JbmRleC5wbGFjZUNvbGxpc2lvbkJveChkLGUsbSxJdCh3Lngsdy55LG4scyx0aGlzLnRyYW5zZm9ybS5hbmdsZSksaCxhLGwsYy5wcmVkaWNhdGUpLmJveC5sZW5ndGgpcmV0dXJufWlmKFQuYm94Lmxlbmd0aD4wKXtsZXQgdDtyZXR1cm4gdGhpcy5wcmV2UGxhY2VtZW50JiZ0aGlzLnByZXZQbGFjZW1lbnQudmFyaWFibGVPZmZzZXRzW3ldJiZ0aGlzLnByZXZQbGFjZW1lbnQucGxhY2VtZW50c1t5XSYmdGhpcy5wcmV2UGxhY2VtZW50LnBsYWNlbWVudHNbeV0udGV4dCYmKHQ9dGhpcy5wcmV2UGxhY2VtZW50LnZhcmlhYmxlT2Zmc2V0c1t5XS5hbmNob3IpLHRoaXMudmFyaWFibGVPZmZzZXRzW3ldPXt0ZXh0T2Zmc2V0OmIsd2lkdGg6aSxoZWlnaHQ6byxhbmNob3I6ZSx0ZXh0U2NhbGU6cixwcmV2QW5jaG9yOnR9LHRoaXMubWFya1VzZWRKdXN0aWZpY2F0aW9uKGQsZSx1LHApLGQuYWxsb3dWZXJ0aWNhbFBsYWNlbWVudCYmKHRoaXMubWFya1VzZWRPcmllbnRhdGlvbihkLHAsdSksdGhpcy5wbGFjZWRPcmllbnRhdGlvbnNbeV09cCkse3NoaWZ0OncscGxhY2VkR2x5cGhCb3hlczpUfX19cGxhY2VMYXllckJ1Y2tldFBhcnQodCxpLG8scil7Y29uc3R7YnVja2V0Om4sbGF5b3V0OnMscG9zTWF0cml4OmEsdGV4dExhYmVsUGxhbmVNYXRyaXg6bCxsYWJlbFRvU2NyZWVuTWF0cml4OmMsY2xpcHBpbmdEYXRhOmgsdGV4dFBpeGVsUmF0aW86dSxob2xkaW5nRm9yRmFkZTpfLGNvbGxpc2lvbkJveEFycmF5OmQscGFydGlhbGx5RXZhbHVhdGVkVGV4dFNpemU6cCxwYXJ0aWFsbHlFdmFsdWF0ZWRJY29uU2l6ZTptLGNvbGxpc2lvbkdyb3VwOmZ9PXQucGFyYW1ldGVycyxnPXMuZ2V0KFwidGV4dC1vcHRpb25hbFwiKSx2PXMuZ2V0KFwiaWNvbi1vcHRpb25hbFwiKSx4PXMuZ2V0KFwidGV4dC1hbGxvdy1vdmVybGFwXCIpLHk9cy5nZXQoXCJpY29uLWFsbG93LW92ZXJsYXBcIiksYj1cIm1hcFwiPT09cy5nZXQoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiKSx3PVwibWFwXCI9PT1zLmdldChcInRleHQtcGl0Y2gtYWxpZ25tZW50XCIpLFQ9XCJub25lXCIhPT1zLmdldChcImljb24tdGV4dC1maXRcIiksRT1cInZpZXdwb3J0LXlcIj09PXMuZ2V0KFwic3ltYm9sLXotb3JkZXJcIik7dGhpcy50cmFuc2Zvcm0uc2V0UHJvamVjdGlvbihuLnByb2plY3Rpb24pO2xldCBDPXgmJih5fHwhbi5oYXNJY29uRGF0YSgpfHx2KSxNPXkmJih4fHwhbi5oYXNUZXh0RGF0YSgpfHxnKTshbi5jb2xsaXNpb25BcnJheXMmJmQmJm4uZGVzZXJpYWxpemVDb2xsaXNpb25Cb3hlcyhkKSxvJiZyJiZuLnVwZGF0ZUNvbGxpc2lvbkRlYnVnQnVmZmVycyh0aGlzLnRyYW5zZm9ybS56b29tLGQpO2NvbnN0IEk9KHQscixkKT0+e2NvbnN0e2Nyb3NzVGlsZUlEOkUsbnVtVmVydGljYWxHbHlwaFZlcnRpY2VzOkl9PXQ7aWYoaCl7Y29uc3Qgbz17em9vbTp0aGlzLnRyYW5zZm9ybS56b29tLHBpdGNoOnRoaXMudHJhbnNmb3JtLnBpdGNofTtsZXQgcj1udWxsO2lmKGguZHluYW1pY0ZpbHRlck5lZWRzRmVhdHVyZSl7Y29uc3QgZT10aGlzLnJldGFpbmVkUXVlcnlEYXRhW24uYnVja2V0SW5zdGFuY2VJZF07cj1oLmZlYXR1cmVJbmRleC5sb2FkRmVhdHVyZSh7ZmVhdHVyZUluZGV4OnQuZmVhdHVyZUluZGV4LGJ1Y2tldEluZGV4OmUuYnVja2V0SW5kZXgsc291cmNlTGF5ZXJJbmRleDplLnNvdXJjZUxheWVySW5kZXgsbGF5b3V0VmVydGV4QXJyYXlPZmZzZXQ6MH0pO31pZighKDAsaC5keW5hbWljRmlsdGVyKShvLHIsdGhpcy5yZXRhaW5lZFF1ZXJ5RGF0YVtuLmJ1Y2tldEluc3RhbmNlSWRdLnRpbGVJRC5jYW5vbmljYWwsbmV3IGUuUG9pbnQodC50aWxlQW5jaG9yWCx0LnRpbGVBbmNob3JZKSx0aGlzLnRyYW5zZm9ybS5jYWxjdWxhdGVEaXN0YW5jZVRpbGVEYXRhKGgudW53cmFwcGVkVGlsZUlEKSkpcmV0dXJuIHRoaXMucGxhY2VtZW50c1tFXT1uZXcgd3QoITEsITEsITEsITApLHZvaWQgaS5hZGQoRSl9aWYoaS5oYXMoRSkpcmV0dXJuO2lmKF8pcmV0dXJuIHZvaWQodGhpcy5wbGFjZW1lbnRzW0VdPW5ldyB3dCghMSwhMSwhMSkpO2xldCBQPSExLFM9ITEsRD0hMCxMPSExLEE9ITEsej1udWxsLFI9e2JveDpudWxsLG9mZnNjcmVlbjpudWxsLG9jY2x1ZGVkOm51bGx9LE89e2JveDpudWxsLG9mZnNjcmVlbjpudWxsLG9jY2x1ZGVkOm51bGx9LEI9bnVsbCxrPW51bGwsRj1udWxsLFU9MCxOPTAsaj0wO2QudGV4dEZlYXR1cmVJbmRleD9VPWQudGV4dEZlYXR1cmVJbmRleDp0LnVzZVJ1bnRpbWVDb2xsaXNpb25DaXJjbGVzJiYoVT10LmZlYXR1cmVJbmRleCksZC52ZXJ0aWNhbFRleHRGZWF0dXJlSW5kZXgmJihOPWQudmVydGljYWxUZXh0RmVhdHVyZUluZGV4KTtjb25zdCBHPWU9PntlLnRpbGVJRD10aGlzLnJldGFpbmVkUXVlcnlEYXRhW24uYnVja2V0SW5zdGFuY2VJZF0udGlsZUlEO2NvbnN0IHQ9dGhpcy50cmFuc2Zvcm0uZWxldmF0aW9uOyh0fHxlLmVsZXZhdGlvbikmJihlLmVsZXZhdGlvbj10P3QuZ2V0QXRUaWxlT2Zmc2V0KGUudGlsZUlELGUudGlsZUFuY2hvclgsZS50aWxlQW5jaG9yWSk6MCk7fSxaPWQudGV4dEJveDtpZihaKXtHKFopO2NvbnN0IGk9aT0+e2xldCBvPWUuV3JpdGluZ01vZGUuaG9yaXpvbnRhbDtpZihuLmFsbG93VmVydGljYWxQbGFjZW1lbnQmJiFpJiZ0aGlzLnByZXZQbGFjZW1lbnQpe2NvbnN0IGU9dGhpcy5wcmV2UGxhY2VtZW50LnBsYWNlZE9yaWVudGF0aW9uc1tFXTtlJiYodGhpcy5wbGFjZWRPcmllbnRhdGlvbnNbRV09ZSxvPWUsdGhpcy5tYXJrVXNlZE9yaWVudGF0aW9uKG4sbyx0KSk7fXJldHVybiBvfSxvPSh0LGkpPT57aWYobi5hbGxvd1ZlcnRpY2FsUGxhY2VtZW50JiZJPjAmJmQudmVydGljYWxUZXh0Qm94KXtmb3IoY29uc3QgbyBvZiBuLndyaXRpbmdNb2RlcylpZihvPT09ZS5Xcml0aW5nTW9kZS52ZXJ0aWNhbD8oUj1pKCksTz1SKTpSPXQoKSxSJiZSLmJveCYmUi5ib3gubGVuZ3RoKWJyZWFrfWVsc2UgUj10KCk7fTtpZihzLmdldChcInRleHQtdmFyaWFibGUtYW5jaG9yXCIpKXtsZXQgbD1zLmdldChcInRleHQtdmFyaWFibGUtYW5jaG9yXCIpO2lmKHRoaXMucHJldlBsYWNlbWVudCYmdGhpcy5wcmV2UGxhY2VtZW50LnZhcmlhYmxlT2Zmc2V0c1tFXSl7Y29uc3QgZT10aGlzLnByZXZQbGFjZW1lbnQudmFyaWFibGVPZmZzZXRzW0VdO2wuaW5kZXhPZihlLmFuY2hvcik+MCYmKGw9bC5maWx0ZXIoKHQ9PnQhPT1lLmFuY2hvcikpLGwudW5zaGlmdChlLmFuY2hvcikpO31jb25zdCBjPShlLGksbyk9Pntjb25zdCBzPW4uZ2V0U3ltYm9sSW5zdGFuY2VUZXh0U2l6ZShwLHQsdGhpcy50cmFuc2Zvcm0uem9vbSxyKSxjPShlLngyLWUueDEpKnMrMiplLnBhZGRpbmcsaD0oZS55Mi1lLnkxKSpzKzIqZS5wYWRkaW5nLF89VCYmIXk/aTpudWxsO18mJkcoXyk7bGV0IGQ9e2JveDpbXSxvZmZzY3JlZW46ITEsb2NjbHVkZWQ6ITF9O2NvbnN0IGc9eD8yKmwubGVuZ3RoOmwubGVuZ3RoO2ZvcihsZXQgaT0wO2k8ZzsrK2kpe2NvbnN0IGc9dGhpcy5hdHRlbXB0QW5jaG9yUGxhY2VtZW50KGxbaSVsLmxlbmd0aF0sZSxjLGgscyxiLHcsdSxhLGYsaT49bC5sZW5ndGgsdCxyLG4sbyxfLHAsbSk7aWYoZyYmKGQ9Zy5wbGFjZWRHbHlwaEJveGVzLGQmJmQuYm94JiZkLmJveC5sZW5ndGgpKXtQPSEwLHo9Zy5zaGlmdDticmVha319cmV0dXJuIGR9O28oKCgpPT5jKFosZC5pY29uQm94LGUuV3JpdGluZ01vZGUuaG9yaXpvbnRhbCkpLCgoKT0+e2NvbnN0IHQ9ZC52ZXJ0aWNhbFRleHRCb3g7cmV0dXJuIHQmJkcodCksbi5hbGxvd1ZlcnRpY2FsUGxhY2VtZW50JiYhKFImJlIuYm94JiZSLmJveC5sZW5ndGgpJiZJPjAmJnQ/Yyh0LGQudmVydGljYWxJY29uQm94LGUuV3JpdGluZ01vZGUudmVydGljYWwpOntib3g6bnVsbCxvZmZzY3JlZW46bnVsbCxvY2NsdWRlZDpudWxsfX0pKSxSJiYoUD1SLmJveCxEPVIub2Zmc2NyZWVuLEw9Ui5vY2NsdWRlZCk7Y29uc3QgaD1pKCEoIVJ8fCFSLmJveCkpO2lmKCFQJiZ0aGlzLnByZXZQbGFjZW1lbnQpe2NvbnN0IGU9dGhpcy5wcmV2UGxhY2VtZW50LnZhcmlhYmxlT2Zmc2V0c1tFXTtlJiYodGhpcy52YXJpYWJsZU9mZnNldHNbRV09ZSx0aGlzLm1hcmtVc2VkSnVzdGlmaWNhdGlvbihuLGUuYW5jaG9yLHQsaCkpO319ZWxzZSB7Y29uc3Qgcz0oaSxvKT0+e2NvbnN0IHM9bi5nZXRTeW1ib2xJbnN0YW5jZVRleHRTaXplKHAsdCx0aGlzLnRyYW5zZm9ybS56b29tLHIpLGw9dGhpcy5jb2xsaXNpb25JbmRleC5wbGFjZUNvbGxpc2lvbkJveChuLHMsaSxuZXcgZS5Qb2ludCgwLDApLHgsdSxhLGYucHJlZGljYXRlKTtyZXR1cm4gbCYmbC5ib3gmJmwuYm94Lmxlbmd0aCYmKHRoaXMubWFya1VzZWRPcmllbnRhdGlvbihuLG8sdCksdGhpcy5wbGFjZWRPcmllbnRhdGlvbnNbRV09byksbH07bygoKCk9PnMoWixlLldyaXRpbmdNb2RlLmhvcml6b250YWwpKSwoKCk9Pntjb25zdCB0PWQudmVydGljYWxUZXh0Qm94O3JldHVybiBuLmFsbG93VmVydGljYWxQbGFjZW1lbnQmJkk+MCYmdD8oRyh0KSxzKHQsZS5Xcml0aW5nTW9kZS52ZXJ0aWNhbCkpOntib3g6bnVsbCxvZmZzY3JlZW46bnVsbCxvY2NsdWRlZDpudWxsfX0pKSxpKCEhKFImJlIuYm94JiZSLmJveC5sZW5ndGgpKTt9fWlmKEI9UixQPUImJkIuYm94JiZCLmJveC5sZW5ndGg+MCxEPUImJkIub2Zmc2NyZWVuLEw9QiYmQi5vY2NsdWRlZCx0LnVzZVJ1bnRpbWVDb2xsaXNpb25DaXJjbGVzKXtjb25zdCBpPW4udGV4dC5wbGFjZWRTeW1ib2xBcnJheS5nZXQodC5jZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg+PTA/dC5jZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6dC52ZXJ0aWNhbFBsYWNlZFRleHRTeW1ib2xJbmRleCkscj1lLmV2YWx1YXRlU2l6ZUZvckZlYXR1cmUobi50ZXh0U2l6ZURhdGEscCxpKSxoPXMuZ2V0KFwidGV4dC1wYWRkaW5nXCIpO2s9dGhpcy5jb2xsaXNpb25JbmRleC5wbGFjZUNvbGxpc2lvbkNpcmNsZXMobix4LGksbi5saW5lVmVydGV4QXJyYXksbi5nbHlwaE9mZnNldEFycmF5LHIsYSxsLGMsbyx3LGYucHJlZGljYXRlLHQuY29sbGlzaW9uQ2lyY2xlRGlhbWV0ZXIqci9lLk9ORV9FTSxoLHRoaXMucmV0YWluZWRRdWVyeURhdGFbbi5idWNrZXRJbnN0YW5jZUlkXS50aWxlSUQpLFA9eHx8ay5jaXJjbGVzLmxlbmd0aD4wJiYhay5jb2xsaXNpb25EZXRlY3RlZCxEPUQmJmsub2Zmc2NyZWVuLEw9ay5vY2NsdWRlZDt9aWYoZC5pY29uRmVhdHVyZUluZGV4JiYoaj1kLmljb25GZWF0dXJlSW5kZXgpLGQuaWNvbkJveCl7Y29uc3QgaT1pPT57RyhpKTtjb25zdCBvPVQmJno/SXQoei54LHoueSxiLHcsdGhpcy50cmFuc2Zvcm0uYW5nbGUpOm5ldyBlLlBvaW50KDAsMCkscj1uLmdldFN5bWJvbEluc3RhbmNlSWNvblNpemUobSx0aGlzLnRyYW5zZm9ybS56b29tLHQucGxhY2VkSWNvblN5bWJvbEluZGV4KTtyZXR1cm4gdGhpcy5jb2xsaXNpb25JbmRleC5wbGFjZUNvbGxpc2lvbkJveChuLHIsaSxvLHksdSxhLGYucHJlZGljYXRlKX07TyYmTy5ib3gmJk8uYm94Lmxlbmd0aCYmZC52ZXJ0aWNhbEljb25Cb3g/KEY9aShkLnZlcnRpY2FsSWNvbkJveCksUz1GLmJveC5sZW5ndGg+MCk6KEY9aShkLmljb25Cb3gpLFM9Ri5ib3gubGVuZ3RoPjApLEQ9RCYmRi5vZmZzY3JlZW4sQT1GLm9jY2x1ZGVkO31jb25zdCBWPWd8fDA9PT10Lm51bUhvcml6b250YWxHbHlwaFZlcnRpY2VzJiYwPT09SSxXPXZ8fDA9PT10Lm51bUljb25WZXJ0aWNlcztpZihWfHxXP1c/Vnx8KFM9UyYmUCk6UD1TJiZQOlM9UD1TJiZQLFAmJkImJkIuYm94JiZ0aGlzLmNvbGxpc2lvbkluZGV4Lmluc2VydENvbGxpc2lvbkJveChCLmJveCxzLmdldChcInRleHQtaWdub3JlLXBsYWNlbWVudFwiKSxuLmJ1Y2tldEluc3RhbmNlSWQsTyYmTy5ib3gmJk4/TjpVLGYuSUQpLFMmJkYmJnRoaXMuY29sbGlzaW9uSW5kZXguaW5zZXJ0Q29sbGlzaW9uQm94KEYuYm94LHMuZ2V0KFwiaWNvbi1pZ25vcmUtcGxhY2VtZW50XCIpLG4uYnVja2V0SW5zdGFuY2VJZCxqLGYuSUQpLGsmJihQJiZ0aGlzLmNvbGxpc2lvbkluZGV4Lmluc2VydENvbGxpc2lvbkNpcmNsZXMoay5jaXJjbGVzLHMuZ2V0KFwidGV4dC1pZ25vcmUtcGxhY2VtZW50XCIpLG4uYnVja2V0SW5zdGFuY2VJZCxVLGYuSUQpLG8pKXtjb25zdCBlPW4uYnVja2V0SW5zdGFuY2VJZDtsZXQgdD10aGlzLmNvbGxpc2lvbkNpcmNsZUFycmF5c1tlXTt2b2lkIDA9PT10JiYodD10aGlzLmNvbGxpc2lvbkNpcmNsZUFycmF5c1tlXT1uZXcgVHQpO2ZvcihsZXQgZT0wO2U8ay5jaXJjbGVzLmxlbmd0aDtlKz00KXQuY2lyY2xlcy5wdXNoKGsuY2lyY2xlc1tlKzBdKSx0LmNpcmNsZXMucHVzaChrLmNpcmNsZXNbZSsxXSksdC5jaXJjbGVzLnB1c2goay5jaXJjbGVzW2UrMl0pLHQuY2lyY2xlcy5wdXNoKGsuY29sbGlzaW9uRGV0ZWN0ZWQ/MTowKTt9Y29uc3QgWD1cImdsb2JlXCIhPT1uLnByb2plY3Rpb24ubmFtZTtDPUMmJihYfHwhTCksTT1NJiYoWHx8IUEpLHRoaXMucGxhY2VtZW50c1tFXT1uZXcgd3QoUHx8QyxTfHxNLER8fG4uanVzdFJlbG9hZGVkKSxpLmFkZChFKTt9O2lmKEUpe2NvbnN0IGU9bi5nZXRTb3J0ZWRTeW1ib2xJbmRleGVzKHRoaXMudHJhbnNmb3JtLmFuZ2xlKTtmb3IobGV0IHQ9ZS5sZW5ndGgtMTt0Pj0wOy0tdCl7Y29uc3QgaT1lW3RdO0kobi5zeW1ib2xJbnN0YW5jZXMuZ2V0KGkpLGksbi5jb2xsaXNpb25BcnJheXNbaV0pO319ZWxzZSBmb3IobGV0IGU9dC5zeW1ib2xJbnN0YW5jZVN0YXJ0O2U8dC5zeW1ib2xJbnN0YW5jZUVuZDtlKyspSShuLnN5bWJvbEluc3RhbmNlcy5nZXQoZSksZSxuLmNvbGxpc2lvbkFycmF5c1tlXSk7aWYobyYmbi5idWNrZXRJbnN0YW5jZUlkIGluIHRoaXMuY29sbGlzaW9uQ2lyY2xlQXJyYXlzKXtjb25zdCB0PXRoaXMuY29sbGlzaW9uQ2lyY2xlQXJyYXlzW24uYnVja2V0SW5zdGFuY2VJZF07ZS5pbnZlcnQodC5pbnZQcm9qTWF0cml4LGEpLHQudmlld3BvcnRNYXRyaXg9dGhpcy5jb2xsaXNpb25JbmRleC5nZXRWaWV3cG9ydE1hdHJpeCgpO31uLmp1c3RSZWxvYWRlZD0hMTt9bWFya1VzZWRKdXN0aWZpY2F0aW9uKHQsaSxvLHIpe2NvbnN0e2xlZnRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6bixjZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6cyxyaWdodEp1c3RpZmllZFRleHRTeW1ib2xJbmRleDphLHZlcnRpY2FsUGxhY2VkVGV4dFN5bWJvbEluZGV4OmwsY3Jvc3NUaWxlSUQ6Y309byxoPWUuZ2V0QW5jaG9ySnVzdGlmaWNhdGlvbihpKSx1PXI9PT1lLldyaXRpbmdNb2RlLnZlcnRpY2FsP2w6XCJsZWZ0XCI9PT1oP246XCJjZW50ZXJcIj09PWg/czpcInJpZ2h0XCI9PT1oP2E6LTE7bj49MCYmKHQudGV4dC5wbGFjZWRTeW1ib2xBcnJheS5nZXQobikuY3Jvc3NUaWxlSUQ9dT49MCYmbiE9PXU/MDpjKSxzPj0wJiYodC50ZXh0LnBsYWNlZFN5bWJvbEFycmF5LmdldChzKS5jcm9zc1RpbGVJRD11Pj0wJiZzIT09dT8wOmMpLGE+PTAmJih0LnRleHQucGxhY2VkU3ltYm9sQXJyYXkuZ2V0KGEpLmNyb3NzVGlsZUlEPXU+PTAmJmEhPT11PzA6YyksbD49MCYmKHQudGV4dC5wbGFjZWRTeW1ib2xBcnJheS5nZXQobCkuY3Jvc3NUaWxlSUQ9dT49MCYmbCE9PXU/MDpjKTt9bWFya1VzZWRPcmllbnRhdGlvbih0LGksbyl7Y29uc3Qgcj1pPT09ZS5Xcml0aW5nTW9kZS5ob3Jpem9udGFsfHxpPT09ZS5Xcml0aW5nTW9kZS5ob3Jpem9udGFsT25seT9pOjAsbj1pPT09ZS5Xcml0aW5nTW9kZS52ZXJ0aWNhbD9pOjAse2xlZnRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6cyxjZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6YSxyaWdodEp1c3RpZmllZFRleHRTeW1ib2xJbmRleDpsLHZlcnRpY2FsUGxhY2VkVGV4dFN5bWJvbEluZGV4OmN9PW8saD10LnRleHQucGxhY2VkU3ltYm9sQXJyYXk7cz49MCYmKGguZ2V0KHMpLnBsYWNlZE9yaWVudGF0aW9uPXIpLGE+PTAmJihoLmdldChhKS5wbGFjZWRPcmllbnRhdGlvbj1yKSxsPj0wJiYoaC5nZXQobCkucGxhY2VkT3JpZW50YXRpb249ciksYz49MCYmKGguZ2V0KGMpLnBsYWNlZE9yaWVudGF0aW9uPW4pO31jb21taXQoZSl7dGhpcy5jb21taXRUaW1lPWUsdGhpcy56b29tQXRMYXN0UmVjZW5jeUNoZWNrPXRoaXMudHJhbnNmb3JtLnpvb207Y29uc3QgdD10aGlzLnByZXZQbGFjZW1lbnQ7bGV0IGk9ITE7dGhpcy5wcmV2Wm9vbUFkanVzdG1lbnQ9dD90Lnpvb21BZGp1c3RtZW50KHRoaXMudHJhbnNmb3JtLnpvb20pOjA7Y29uc3Qgbz10P3Quc3ltYm9sRmFkZUNoYW5nZShlKToxLHI9dD90Lm9wYWNpdGllczp7fSxuPXQ/dC52YXJpYWJsZU9mZnNldHM6e30scz10P3QucGxhY2VkT3JpZW50YXRpb25zOnt9O2Zvcihjb25zdCBlIGluIHRoaXMucGxhY2VtZW50cyl7Y29uc3QgdD10aGlzLnBsYWNlbWVudHNbZV0sbj1yW2VdO24/KHRoaXMub3BhY2l0aWVzW2VdPW5ldyBidChuLG8sdC50ZXh0LHQuaWNvbixudWxsLHQuY2xpcHBlZCksaT1pfHx0LnRleHQhPT1uLnRleHQucGxhY2VkfHx0Lmljb24hPT1uLmljb24ucGxhY2VkKToodGhpcy5vcGFjaXRpZXNbZV09bmV3IGJ0KG51bGwsbyx0LnRleHQsdC5pY29uLHQuc2tpcEZhZGUsdC5jbGlwcGVkKSxpPWl8fHQudGV4dHx8dC5pY29uKTt9Zm9yKGNvbnN0IGUgaW4gcil7Y29uc3QgdD1yW2VdO2lmKCF0aGlzLm9wYWNpdGllc1tlXSl7Y29uc3Qgcj1uZXcgYnQodCxvLCExLCExKTtyLmlzSGlkZGVuKCl8fCh0aGlzLm9wYWNpdGllc1tlXT1yLGk9aXx8dC50ZXh0LnBsYWNlZHx8dC5pY29uLnBsYWNlZCk7fX1mb3IoY29uc3QgZSBpbiBuKXRoaXMudmFyaWFibGVPZmZzZXRzW2VdfHwhdGhpcy5vcGFjaXRpZXNbZV18fHRoaXMub3BhY2l0aWVzW2VdLmlzSGlkZGVuKCl8fCh0aGlzLnZhcmlhYmxlT2Zmc2V0c1tlXT1uW2VdKTtmb3IoY29uc3QgZSBpbiBzKXRoaXMucGxhY2VkT3JpZW50YXRpb25zW2VdfHwhdGhpcy5vcGFjaXRpZXNbZV18fHRoaXMub3BhY2l0aWVzW2VdLmlzSGlkZGVuKCl8fCh0aGlzLnBsYWNlZE9yaWVudGF0aW9uc1tlXT1zW2VdKTtpP3RoaXMubGFzdFBsYWNlbWVudENoYW5nZVRpbWU9ZTpcIm51bWJlclwiIT10eXBlb2YgdGhpcy5sYXN0UGxhY2VtZW50Q2hhbmdlVGltZSYmKHRoaXMubGFzdFBsYWNlbWVudENoYW5nZVRpbWU9dD90Lmxhc3RQbGFjZW1lbnRDaGFuZ2VUaW1lOmUpO311cGRhdGVMYXllck9wYWNpdGllcyhlLHQpe2NvbnN0IGk9bmV3IFNldDtmb3IoY29uc3QgbyBvZiB0KXtjb25zdCB0PW8uZ2V0QnVja2V0KGUpO3QmJm8ubGF0ZXN0RmVhdHVyZUluZGV4JiZlLmlkPT09dC5sYXllcklkc1swXSYmdGhpcy51cGRhdGVCdWNrZXRPcGFjaXRpZXModCxpLG8uY29sbGlzaW9uQm94QXJyYXkpO319dXBkYXRlQnVja2V0T3BhY2l0aWVzKHQsaSxvKXt0Lmhhc1RleHREYXRhKCkmJnQudGV4dC5vcGFjaXR5VmVydGV4QXJyYXkuY2xlYXIoKSx0Lmhhc0ljb25EYXRhKCkmJnQuaWNvbi5vcGFjaXR5VmVydGV4QXJyYXkuY2xlYXIoKSx0Lmhhc0ljb25Db2xsaXNpb25Cb3hEYXRhKCkmJnQuaWNvbkNvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhBcnJheS5jbGVhcigpLHQuaGFzVGV4dENvbGxpc2lvbkJveERhdGEoKSYmdC50ZXh0Q29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5LmNsZWFyKCk7Y29uc3Qgcj10LmxheWVyc1swXS5sYXlvdXQsbj0hIXQubGF5ZXJzWzBdLmR5bmFtaWNGaWx0ZXIoKSxzPW5ldyBidChudWxsLDAsITEsITEsITApLGE9ci5nZXQoXCJ0ZXh0LWFsbG93LW92ZXJsYXBcIiksbD1yLmdldChcImljb24tYWxsb3ctb3ZlcmxhcFwiKSxjPXIuZ2V0KFwidGV4dC12YXJpYWJsZS1hbmNob3JcIiksaD1cIm1hcFwiPT09ci5nZXQoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiKSx1PVwibWFwXCI9PT1yLmdldChcInRleHQtcGl0Y2gtYWxpZ25tZW50XCIpLF89XCJub25lXCIhPT1yLmdldChcImljb24tdGV4dC1maXRcIiksZD1uZXcgYnQobnVsbCwwLGEmJihsfHwhdC5oYXNJY29uRGF0YSgpfHxyLmdldChcImljb24tb3B0aW9uYWxcIikpLGwmJihhfHwhdC5oYXNUZXh0RGF0YSgpfHxyLmdldChcInRleHQtb3B0aW9uYWxcIikpLCEwKTshdC5jb2xsaXNpb25BcnJheXMmJm8mJih0Lmhhc0ljb25Db2xsaXNpb25Cb3hEYXRhKCl8fHQuaGFzVGV4dENvbGxpc2lvbkJveERhdGEoKSkmJnQuZGVzZXJpYWxpemVDb2xsaXNpb25Cb3hlcyhvKTtjb25zdCBwPShlLHQsaSk9Pntmb3IobGV0IG89MDtvPHQvNDtvKyspZS5vcGFjaXR5VmVydGV4QXJyYXkuZW1wbGFjZUJhY2soaSk7fTtsZXQgbT0wO2ZvcihsZXQgbz0wO288dC5zeW1ib2xJbnN0YW5jZXMubGVuZ3RoO28rKyl7Y29uc3Qgcj10LnN5bWJvbEluc3RhbmNlcy5nZXQobykse251bUhvcml6b250YWxHbHlwaFZlcnRpY2VzOmEsbnVtVmVydGljYWxHbHlwaFZlcnRpY2VzOmwsY3Jvc3NUaWxlSUQ6ZixudW1JY29uVmVydGljZXM6Z309cix2PWkuaGFzKGYpO2xldCB4PXRoaXMub3BhY2l0aWVzW2ZdO3Y/eD1zOnh8fCh4PWQsdGhpcy5vcGFjaXRpZXNbZl09eCksaS5hZGQoZik7Y29uc3QgeT1hPjB8fGw+MCxiPWc+MCx3PXRoaXMucGxhY2VkT3JpZW50YXRpb25zW2ZdLFQ9dz09PWUuV3JpdGluZ01vZGUudmVydGljYWwsRT13PT09ZS5Xcml0aW5nTW9kZS5ob3Jpem9udGFsfHx3PT09ZS5Xcml0aW5nTW9kZS5ob3Jpem9udGFsT25seTtpZigheSYmIWJ8fHguaXNIaWRkZW4oKXx8bSsrLHkpe2NvbnN0IGU9a3QoeC50ZXh0KTtwKHQudGV4dCxhLFQ/RnQ6ZSkscCh0LnRleHQsbCxFP0Z0OmUpO2NvbnN0IGk9eC50ZXh0LmlzSGlkZGVuKCkse2xlZnRKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6byxjZW50ZXJKdXN0aWZpZWRUZXh0U3ltYm9sSW5kZXg6bixyaWdodEp1c3RpZmllZFRleHRTeW1ib2xJbmRleDpzLHZlcnRpY2FsUGxhY2VkVGV4dFN5bWJvbEluZGV4OmN9PXIsaD10LnRleHQucGxhY2VkU3ltYm9sQXJyYXksdT1pfHxUPzE6MDtvPj0wJiYoaC5nZXQobykuaGlkZGVuPXUpLG4+PTAmJihoLmdldChuKS5oaWRkZW49dSkscz49MCYmKGguZ2V0KHMpLmhpZGRlbj11KSxjPj0wJiYoaC5nZXQoYykuaGlkZGVuPWl8fEU/MTowKTtjb25zdCBfPXRoaXMudmFyaWFibGVPZmZzZXRzW2ZdO18mJnRoaXMubWFya1VzZWRKdXN0aWZpY2F0aW9uKHQsXy5hbmNob3Iscix3KTtjb25zdCBkPXRoaXMucGxhY2VkT3JpZW50YXRpb25zW2ZdO2QmJih0aGlzLm1hcmtVc2VkSnVzdGlmaWNhdGlvbih0LFwibGVmdFwiLHIsZCksdGhpcy5tYXJrVXNlZE9yaWVudGF0aW9uKHQsZCxyKSk7fWlmKGIpe2NvbnN0IGU9a3QoeC5pY29uKSx7cGxhY2VkSWNvblN5bWJvbEluZGV4OmksdmVydGljYWxQbGFjZWRJY29uU3ltYm9sSW5kZXg6b309cixuPXQuaWNvbi5wbGFjZWRTeW1ib2xBcnJheSxzPXguaWNvbi5pc0hpZGRlbigpPzE6MDtpPj0wJiYocCh0Lmljb24sZyxUP0Z0OmUpLG4uZ2V0KGkpLmhpZGRlbj1zKSxvPj0wJiYocCh0Lmljb24sci5udW1WZXJ0aWNhbEljb25WZXJ0aWNlcyxFP0Z0OmUpLG4uZ2V0KG8pLmhpZGRlbj1zKTt9aWYodC5oYXNJY29uQ29sbGlzaW9uQm94RGF0YSgpfHx0Lmhhc1RleHRDb2xsaXNpb25Cb3hEYXRhKCkpe2NvbnN0IGk9dC5jb2xsaXNpb25BcnJheXNbb107aWYoaSl7bGV0IG89bmV3IGUuUG9pbnQoMCwwKSxyPSEwO2lmKGkudGV4dEJveHx8aS52ZXJ0aWNhbFRleHRCb3gpe2lmKGMpe2NvbnN0IGU9dGhpcy52YXJpYWJsZU9mZnNldHNbZl07ZT8obz1NdChlLmFuY2hvcixlLndpZHRoLGUuaGVpZ2h0LGUudGV4dE9mZnNldCxlLnRleHRTY2FsZSksaCYmby5fcm90YXRlKHU/dGhpcy50cmFuc2Zvcm0uYW5nbGU6LXRoaXMudHJhbnNmb3JtLmFuZ2xlKSk6cj0hMTt9biYmKHI9IXguY2xpcHBlZCksaS50ZXh0Qm94JiZTdCh0LnRleHRDb2xsaXNpb25Cb3guY29sbGlzaW9uVmVydGV4QXJyYXkseC50ZXh0LnBsYWNlZCwhcnx8VCxvLngsby55KSxpLnZlcnRpY2FsVGV4dEJveCYmU3QodC50ZXh0Q29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5LHgudGV4dC5wbGFjZWQsIXJ8fEUsby54LG8ueSk7fWNvbnN0IHM9ciYmQm9vbGVhbighRSYmaS52ZXJ0aWNhbEljb25Cb3gpO2kuaWNvbkJveCYmU3QodC5pY29uQ29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEFycmF5LHguaWNvbi5wbGFjZWQscyxfP28ueDowLF8/by55OjApLGkudmVydGljYWxJY29uQm94JiZTdCh0Lmljb25Db2xsaXNpb25Cb3guY29sbGlzaW9uVmVydGV4QXJyYXkseC5pY29uLnBsYWNlZCwhcyxfP28ueDowLF8/by55OjApO319fWlmKHQuZnVsbHlDbGlwcGVkPTA9PT1tLHQuc29ydEZlYXR1cmVzKHRoaXMudHJhbnNmb3JtLmFuZ2xlKSx0aGlzLnJldGFpbmVkUXVlcnlEYXRhW3QuYnVja2V0SW5zdGFuY2VJZF0mJih0aGlzLnJldGFpbmVkUXVlcnlEYXRhW3QuYnVja2V0SW5zdGFuY2VJZF0uZmVhdHVyZVNvcnRPcmRlcj10LmZlYXR1cmVTb3J0T3JkZXIpLHQuaGFzVGV4dERhdGEoKSYmdC50ZXh0Lm9wYWNpdHlWZXJ0ZXhCdWZmZXImJnQudGV4dC5vcGFjaXR5VmVydGV4QnVmZmVyLnVwZGF0ZURhdGEodC50ZXh0Lm9wYWNpdHlWZXJ0ZXhBcnJheSksdC5oYXNJY29uRGF0YSgpJiZ0Lmljb24ub3BhY2l0eVZlcnRleEJ1ZmZlciYmdC5pY29uLm9wYWNpdHlWZXJ0ZXhCdWZmZXIudXBkYXRlRGF0YSh0Lmljb24ub3BhY2l0eVZlcnRleEFycmF5KSx0Lmhhc0ljb25Db2xsaXNpb25Cb3hEYXRhKCkmJnQuaWNvbkNvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhCdWZmZXImJnQuaWNvbkNvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhCdWZmZXIudXBkYXRlRGF0YSh0Lmljb25Db2xsaXNpb25Cb3guY29sbGlzaW9uVmVydGV4QXJyYXkpLHQuaGFzVGV4dENvbGxpc2lvbkJveERhdGEoKSYmdC50ZXh0Q29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEJ1ZmZlciYmdC50ZXh0Q29sbGlzaW9uQm94LmNvbGxpc2lvblZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKHQudGV4dENvbGxpc2lvbkJveC5jb2xsaXNpb25WZXJ0ZXhBcnJheSksdC5idWNrZXRJbnN0YW5jZUlkIGluIHRoaXMuY29sbGlzaW9uQ2lyY2xlQXJyYXlzKXtjb25zdCBlPXRoaXMuY29sbGlzaW9uQ2lyY2xlQXJyYXlzW3QuYnVja2V0SW5zdGFuY2VJZF07dC5wbGFjZW1lbnRJbnZQcm9qTWF0cml4PWUuaW52UHJvak1hdHJpeCx0LnBsYWNlbWVudFZpZXdwb3J0TWF0cml4PWUudmlld3BvcnRNYXRyaXgsdC5jb2xsaXNpb25DaXJjbGVBcnJheT1lLmNpcmNsZXMsZGVsZXRlIHRoaXMuY29sbGlzaW9uQ2lyY2xlQXJyYXlzW3QuYnVja2V0SW5zdGFuY2VJZF07fX1zeW1ib2xGYWRlQ2hhbmdlKGUpe3JldHVybiAwPT09dGhpcy5mYWRlRHVyYXRpb24/MTooZS10aGlzLmNvbW1pdFRpbWUpL3RoaXMuZmFkZUR1cmF0aW9uK3RoaXMucHJldlpvb21BZGp1c3RtZW50fXpvb21BZGp1c3RtZW50KGUpe3JldHVybiBNYXRoLm1heCgwLCh0aGlzLnRyYW5zZm9ybS56b29tLWUpLzEuNSl9aGFzVHJhbnNpdGlvbnMoZSl7cmV0dXJuIHRoaXMuc3RhbGV8fGUtdGhpcy5sYXN0UGxhY2VtZW50Q2hhbmdlVGltZTx0aGlzLmZhZGVEdXJhdGlvbn1zdGlsbFJlY2VudChlLHQpe2NvbnN0IGk9dGhpcy56b29tQXRMYXN0UmVjZW5jeUNoZWNrPT09dD8xLXRoaXMuem9vbUFkanVzdG1lbnQodCk6MTtyZXR1cm4gdGhpcy56b29tQXRMYXN0UmVjZW5jeUNoZWNrPXQsdGhpcy5jb21taXRUaW1lK3RoaXMuZmFkZUR1cmF0aW9uKmk+ZX1zZXRTdGFsZSgpe3RoaXMuc3RhbGU9ITA7fX1mdW5jdGlvbiBTdChlLHQsaSxvLHIpe2UuZW1wbGFjZUJhY2sodD8xOjAsaT8xOjAsb3x8MCxyfHwwKSxlLmVtcGxhY2VCYWNrKHQ/MTowLGk/MTowLG98fDAscnx8MCksZS5lbXBsYWNlQmFjayh0PzE6MCxpPzE6MCxvfHwwLHJ8fDApLGUuZW1wbGFjZUJhY2sodD8xOjAsaT8xOjAsb3x8MCxyfHwwKTt9Y29uc3QgRHQ9TWF0aC5wb3coMiwyNSksTHQ9TWF0aC5wb3coMiwyNCksQXQ9TWF0aC5wb3coMiwxNyksenQ9TWF0aC5wb3coMiwxNiksUnQ9TWF0aC5wb3coMiw5KSxPdD1NYXRoLnBvdygyLDgpLEJ0PU1hdGgucG93KDIsMSk7ZnVuY3Rpb24ga3QoZSl7aWYoMD09PWUub3BhY2l0eSYmIWUucGxhY2VkKXJldHVybiAwO2lmKDE9PT1lLm9wYWNpdHkmJmUucGxhY2VkKXJldHVybiA0Mjk0OTY3Mjk1O2NvbnN0IHQ9ZS5wbGFjZWQ/MTowLGk9TWF0aC5mbG9vcigxMjcqZS5vcGFjaXR5KTtyZXR1cm4gaSpEdCt0Kkx0K2kqQXQrdCp6dCtpKlJ0K3QqT3QraSpCdCt0fWNvbnN0IEZ0PTA7Y2xhc3MgVXR7Y29uc3RydWN0b3IoZSl7dGhpcy5fc29ydEFjcm9zc1RpbGVzPVwidmlld3BvcnQteVwiIT09ZS5sYXlvdXQuZ2V0KFwic3ltYm9sLXotb3JkZXJcIikmJnZvaWQgMCE9PWUubGF5b3V0LmdldChcInN5bWJvbC1zb3J0LWtleVwiKS5jb25zdGFudE9yKDEpLHRoaXMuX2N1cnJlbnRUaWxlSW5kZXg9MCx0aGlzLl9jdXJyZW50UGFydEluZGV4PTAsdGhpcy5fc2VlbkNyb3NzVGlsZUlEcz1uZXcgU2V0LHRoaXMuX2J1Y2tldFBhcnRzPVtdO31jb250aW51ZVBsYWNlbWVudChlLHQsaSxvLHIpe2NvbnN0IG49dGhpcy5fYnVja2V0UGFydHM7Zm9yKDt0aGlzLl9jdXJyZW50VGlsZUluZGV4PGUubGVuZ3RoOylpZih0LmdldEJ1Y2tldFBhcnRzKG4sbyxlW3RoaXMuX2N1cnJlbnRUaWxlSW5kZXhdLHRoaXMuX3NvcnRBY3Jvc3NUaWxlcyksdGhpcy5fY3VycmVudFRpbGVJbmRleCsrLHIoKSlyZXR1cm4gITA7Zm9yKHRoaXMuX3NvcnRBY3Jvc3NUaWxlcyYmKHRoaXMuX3NvcnRBY3Jvc3NUaWxlcz0hMSxuLnNvcnQoKChlLHQpPT5lLnNvcnRLZXktdC5zb3J0S2V5KSkpO3RoaXMuX2N1cnJlbnRQYXJ0SW5kZXg8bi5sZW5ndGg7KXtjb25zdCBlPW5bdGhpcy5fY3VycmVudFBhcnRJbmRleF07aWYodC5wbGFjZUxheWVyQnVja2V0UGFydChlLHRoaXMuX3NlZW5Dcm9zc1RpbGVJRHMsaSwwPT09ZS5zeW1ib2xJbnN0YW5jZVN0YXJ0KSx0aGlzLl9jdXJyZW50UGFydEluZGV4KysscigpKXJldHVybiAhMH1yZXR1cm4gITF9fWNsYXNzIE50e2NvbnN0cnVjdG9yKGUsdCxpLG8scixuLHMsYSl7dGhpcy5wbGFjZW1lbnQ9bmV3IFB0KGUscixuLHMsYSksdGhpcy5fY3VycmVudFBsYWNlbWVudEluZGV4PXQubGVuZ3RoLTEsdGhpcy5fZm9yY2VGdWxsUGxhY2VtZW50PWksdGhpcy5fc2hvd0NvbGxpc2lvbkJveGVzPW8sdGhpcy5fZG9uZT0hMTt9aXNEb25lKCl7cmV0dXJuIHRoaXMuX2RvbmV9Y29udGludWVQbGFjZW1lbnQodCxpLG8pe2NvbnN0IHI9ZS5leHBvcnRlZC5ub3coKSxuPSgpPT57Y29uc3QgdD1lLmV4cG9ydGVkLm5vdygpLXI7cmV0dXJuICF0aGlzLl9mb3JjZUZ1bGxQbGFjZW1lbnQmJnQ+Mn07Zm9yKDt0aGlzLl9jdXJyZW50UGxhY2VtZW50SW5kZXg+PTA7KXtjb25zdCBlPWlbdFt0aGlzLl9jdXJyZW50UGxhY2VtZW50SW5kZXhdXSxyPXRoaXMucGxhY2VtZW50LmNvbGxpc2lvbkluZGV4LnRyYW5zZm9ybS56b29tO2lmKFwic3ltYm9sXCI9PT1lLnR5cGUmJighZS5taW56b29tfHxlLm1pbnpvb208PXIpJiYoIWUubWF4em9vbXx8ZS5tYXh6b29tPnIpKXtpZih0aGlzLl9pblByb2dyZXNzTGF5ZXJ8fCh0aGlzLl9pblByb2dyZXNzTGF5ZXI9bmV3IFV0KGUpKSx0aGlzLl9pblByb2dyZXNzTGF5ZXIuY29udGludWVQbGFjZW1lbnQob1tlLnNvdXJjZV0sdGhpcy5wbGFjZW1lbnQsdGhpcy5fc2hvd0NvbGxpc2lvbkJveGVzLGUsbikpcmV0dXJuO2RlbGV0ZSB0aGlzLl9pblByb2dyZXNzTGF5ZXI7fXRoaXMuX2N1cnJlbnRQbGFjZW1lbnRJbmRleC0tO310aGlzLl9kb25lPSEwO31jb21taXQoZSl7cmV0dXJuIHRoaXMucGxhY2VtZW50LmNvbW1pdChlKSx0aGlzLnBsYWNlbWVudH19Y29uc3QganQ9NTEyL2UuRVhURU5ULzI7Y2xhc3MgR3R7Y29uc3RydWN0b3IodCxpLG8pe3RoaXMudGlsZUlEPXQsdGhpcy5idWNrZXRJbnN0YW5jZUlkPW8sdGhpcy5pbmRleD1uZXcgZS5LREJ1c2goaS5sZW5ndGgsMTYsSW50MzJBcnJheSksdGhpcy5rZXlzPVtdLHRoaXMuY3Jvc3NUaWxlSURzPVtdO2NvbnN0IHI9dC5jYW5vbmljYWwueCplLkVYVEVOVCxuPXQuY2Fub25pY2FsLnkqZS5FWFRFTlQ7Zm9yKGxldCBlPTA7ZTxpLmxlbmd0aDtlKyspe2NvbnN0e2tleTp0LGNyb3NzVGlsZUlEOm8sdGlsZUFuY2hvclg6cyx0aWxlQW5jaG9yWTphfT1pLmdldChlKSxsPU1hdGguZmxvb3IoKHIrcykqanQpLGM9TWF0aC5mbG9vcigobithKSpqdCk7dGhpcy5pbmRleC5hZGQobCxjKSx0aGlzLmtleXMucHVzaCh0KSx0aGlzLmNyb3NzVGlsZUlEcy5wdXNoKG8pO310aGlzLmluZGV4LmZpbmlzaCgpO31maW5kTWF0Y2hlcyh0LGksbyl7Y29uc3Qgcj10aGlzLnRpbGVJRC5jYW5vbmljYWwuejxpLmNhbm9uaWNhbC56PzE6TWF0aC5wb3coMix0aGlzLnRpbGVJRC5jYW5vbmljYWwuei1pLmNhbm9uaWNhbC56KSxuPWp0L01hdGgucG93KDIsaS5jYW5vbmljYWwuei10aGlzLnRpbGVJRC5jYW5vbmljYWwueikscz1pLmNhbm9uaWNhbC54KmUuRVhURU5ULGE9aS5jYW5vbmljYWwueSplLkVYVEVOVDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyl7Y29uc3QgaT10LmdldChlKTtpZihpLmNyb3NzVGlsZUlEKWNvbnRpbnVlO2NvbnN0e2tleTpsLHRpbGVBbmNob3JYOmMsdGlsZUFuY2hvclk6aH09aSx1PU1hdGguZmxvb3IoKHMrYykqbiksXz1NYXRoLmZsb29yKChhK2gpKm4pLGQ9dGhpcy5pbmRleC5yYW5nZSh1LXIsXy1yLHUrcixfK3IpO2Zvcihjb25zdCBlIG9mIGQpe2NvbnN0IHQ9dGhpcy5jcm9zc1RpbGVJRHNbZV07aWYodGhpcy5rZXlzW2VdPT09bCYmIW8uaGFzKHQpKXtvLmFkZCh0KSxpLmNyb3NzVGlsZUlEPXQ7YnJlYWt9fX19fWNsYXNzIFp0e2NvbnN0cnVjdG9yKCl7dGhpcy5tYXhDcm9zc1RpbGVJRD0wO31nZW5lcmF0ZSgpe3JldHVybiArK3RoaXMubWF4Q3Jvc3NUaWxlSUR9fWNsYXNzIFZ0e2NvbnN0cnVjdG9yKCl7dGhpcy5pbmRleGVzPXt9LHRoaXMudXNlZENyb3NzVGlsZUlEcz17fSx0aGlzLmxuZz0wO31oYW5kbGVXcmFwSnVtcChlKXtjb25zdCB0PU1hdGgucm91bmQoKGUtdGhpcy5sbmcpLzM2MCk7aWYoMCE9PXQpZm9yKGNvbnN0IGUgaW4gdGhpcy5pbmRleGVzKXtjb25zdCBpPXRoaXMuaW5kZXhlc1tlXSxvPXt9O2Zvcihjb25zdCBlIGluIGkpe2NvbnN0IHI9aVtlXTtyLnRpbGVJRD1yLnRpbGVJRC51bndyYXBUbyhyLnRpbGVJRC53cmFwK3QpLG9bci50aWxlSUQua2V5XT1yO310aGlzLmluZGV4ZXNbZV09bzt9dGhpcy5sbmc9ZTt9YWRkQnVja2V0KGUsdCxpKXtpZih0aGlzLmluZGV4ZXNbZS5vdmVyc2NhbGVkWl0mJnRoaXMuaW5kZXhlc1tlLm92ZXJzY2FsZWRaXVtlLmtleV0pe2lmKHRoaXMuaW5kZXhlc1tlLm92ZXJzY2FsZWRaXVtlLmtleV0uYnVja2V0SW5zdGFuY2VJZD09PXQuYnVja2V0SW5zdGFuY2VJZClyZXR1cm4gITE7dGhpcy5yZW1vdmVCdWNrZXRDcm9zc1RpbGVJRHMoZS5vdmVyc2NhbGVkWix0aGlzLmluZGV4ZXNbZS5vdmVyc2NhbGVkWl1bZS5rZXldKTt9Zm9yKGxldCBlPTA7ZTx0LnN5bWJvbEluc3RhbmNlcy5sZW5ndGg7ZSsrKXQuc3ltYm9sSW5zdGFuY2VzLmdldChlKS5jcm9zc1RpbGVJRD0wO3RoaXMudXNlZENyb3NzVGlsZUlEc1tlLm92ZXJzY2FsZWRaXXx8KHRoaXMudXNlZENyb3NzVGlsZUlEc1tlLm92ZXJzY2FsZWRaXT1uZXcgU2V0KTtjb25zdCBvPXRoaXMudXNlZENyb3NzVGlsZUlEc1tlLm92ZXJzY2FsZWRaXTtmb3IoY29uc3QgaSBpbiB0aGlzLmluZGV4ZXMpe2NvbnN0IHI9dGhpcy5pbmRleGVzW2ldO2lmKE51bWJlcihpKT5lLm92ZXJzY2FsZWRaKWZvcihjb25zdCBpIGluIHIpe2NvbnN0IG49cltpXTtuLnRpbGVJRC5pc0NoaWxkT2YoZSkmJm4uZmluZE1hdGNoZXModC5zeW1ib2xJbnN0YW5jZXMsZSxvKTt9ZWxzZSB7Y29uc3Qgbj1yW2Uuc2NhbGVkVG8oTnVtYmVyKGkpKS5rZXldO24mJm4uZmluZE1hdGNoZXModC5zeW1ib2xJbnN0YW5jZXMsZSxvKTt9fWZvcihsZXQgZT0wO2U8dC5zeW1ib2xJbnN0YW5jZXMubGVuZ3RoO2UrKyl7Y29uc3Qgcj10LnN5bWJvbEluc3RhbmNlcy5nZXQoZSk7ci5jcm9zc1RpbGVJRHx8KHIuY3Jvc3NUaWxlSUQ9aS5nZW5lcmF0ZSgpLG8uYWRkKHIuY3Jvc3NUaWxlSUQpKTt9cmV0dXJuIHZvaWQgMD09PXRoaXMuaW5kZXhlc1tlLm92ZXJzY2FsZWRaXSYmKHRoaXMuaW5kZXhlc1tlLm92ZXJzY2FsZWRaXT17fSksdGhpcy5pbmRleGVzW2Uub3ZlcnNjYWxlZFpdW2Uua2V5XT1uZXcgR3QoZSx0LnN5bWJvbEluc3RhbmNlcyx0LmJ1Y2tldEluc3RhbmNlSWQpLCEwfXJlbW92ZUJ1Y2tldENyb3NzVGlsZUlEcyhlLHQpe2Zvcihjb25zdCBpIG9mIHQuY3Jvc3NUaWxlSURzKXRoaXMudXNlZENyb3NzVGlsZUlEc1tlXS5kZWxldGUoaSk7fXJlbW92ZVN0YWxlQnVja2V0cyhlKXtsZXQgdD0hMTtmb3IoY29uc3QgaSBpbiB0aGlzLmluZGV4ZXMpe2NvbnN0IG89dGhpcy5pbmRleGVzW2ldO2Zvcihjb25zdCByIGluIG8pZVtvW3JdLmJ1Y2tldEluc3RhbmNlSWRdfHwodGhpcy5yZW1vdmVCdWNrZXRDcm9zc1RpbGVJRHMoaSxvW3JdKSxkZWxldGUgb1tyXSx0PSEwKTt9cmV0dXJuIHR9fWNsYXNzIFd0e2NvbnN0cnVjdG9yKCl7dGhpcy5sYXllckluZGV4ZXM9e30sdGhpcy5jcm9zc1RpbGVJRHM9bmV3IFp0LHRoaXMubWF4QnVja2V0SW5zdGFuY2VJZD0wLHRoaXMuYnVja2V0c0luQ3VycmVudFBsYWNlbWVudD17fTt9YWRkTGF5ZXIoZSx0LGksbyl7bGV0IHI9dGhpcy5sYXllckluZGV4ZXNbZS5pZF07dm9pZCAwPT09ciYmKHI9dGhpcy5sYXllckluZGV4ZXNbZS5pZF09bmV3IFZ0KTtsZXQgbj0hMTtjb25zdCBzPXt9O1wiZ2xvYmVcIiE9PW8ubmFtZSYmci5oYW5kbGVXcmFwSnVtcChpKTtmb3IoY29uc3QgaSBvZiB0KXtjb25zdCB0PWkuZ2V0QnVja2V0KGUpO3QmJmUuaWQ9PT10LmxheWVySWRzWzBdJiYodC5idWNrZXRJbnN0YW5jZUlkfHwodC5idWNrZXRJbnN0YW5jZUlkPSsrdGhpcy5tYXhCdWNrZXRJbnN0YW5jZUlkKSxyLmFkZEJ1Y2tldChpLnRpbGVJRCx0LHRoaXMuY3Jvc3NUaWxlSURzKSYmKG49ITApLHNbdC5idWNrZXRJbnN0YW5jZUlkXT0hMCk7fXJldHVybiByLnJlbW92ZVN0YWxlQnVja2V0cyhzKSYmKG49ITApLG59cHJ1bmVVbnVzZWRMYXllcnMoZSl7Y29uc3QgdD17fTtlLmZvckVhY2goKGU9Pnt0W2VdPSEwO30pKTtmb3IoY29uc3QgZSBpbiB0aGlzLmxheWVySW5kZXhlcyl0W2VdfHxkZWxldGUgdGhpcy5sYXllckluZGV4ZXNbZV07fX1jb25zdCBYdD0odCxpKT0+ZS5lbWl0VmFsaWRhdGlvbkVycm9ycyh0LGkmJmkuZmlsdGVyKChlPT5cInNvdXJjZS5jYW52YXNcIiE9PWUuaWRlbnRpZmllcikpKSxxdD1lLnBpY2soR2UsW1wiYWRkTGF5ZXJcIixcInJlbW92ZUxheWVyXCIsXCJzZXRQYWludFByb3BlcnR5XCIsXCJzZXRMYXlvdXRQcm9wZXJ0eVwiLFwic2V0RmlsdGVyXCIsXCJhZGRTb3VyY2VcIixcInJlbW92ZVNvdXJjZVwiLFwic2V0TGF5ZXJab29tUmFuZ2VcIixcInNldExpZ2h0XCIsXCJzZXRUcmFuc2l0aW9uXCIsXCJzZXRHZW9KU09OU291cmNlRGF0YVwiLFwic2V0VGVycmFpblwiLFwic2V0Rm9nXCIsXCJzZXRQcm9qZWN0aW9uXCJdKSwkdD1lLnBpY2soR2UsW1wic2V0Q2VudGVyXCIsXCJzZXRab29tXCIsXCJzZXRCZWFyaW5nXCIsXCJzZXRQaXRjaFwiXSksSHQ9e3ZlcnNpb246OCxsYXllcnM6W10sc291cmNlczp7fX0sWXQ9e2ZpbGw6ITAsbGluZTohMCxiYWNrZ3JvdW5kOiEwLGhpbGxzaGFkZTohMCxyYXN0ZXI6ITB9O2NsYXNzIEt0IGV4dGVuZHMgZS5FdmVudGVke2NvbnN0cnVjdG9yKHQsaT17fSl7c3VwZXIoKSx0aGlzLm1hcD10LHRoaXMuZGlzcGF0Y2hlcj1uZXcgUyhVZSgpLHRoaXMpLHRoaXMuaW1hZ2VNYW5hZ2VyPW5ldyB5LHRoaXMuaW1hZ2VNYW5hZ2VyLnNldEV2ZW50ZWRQYXJlbnQodGhpcyksdGhpcy5nbHlwaE1hbmFnZXI9bmV3IGUuR2x5cGhNYW5hZ2VyKHQuX3JlcXVlc3RNYW5hZ2VyLGkubG9jYWxGb250RmFtaWx5P2UuTG9jYWxHbHlwaE1vZGUuYWxsOmkubG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5P2UuTG9jYWxHbHlwaE1vZGUuaWRlb2dyYXBoczplLkxvY2FsR2x5cGhNb2RlLm5vbmUsaS5sb2NhbEZvbnRGYW1pbHl8fGkubG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5KSx0aGlzLmNyb3NzVGlsZVN5bWJvbEluZGV4PW5ldyBXdCx0aGlzLl9sYXllcnM9e30sdGhpcy5fbnVtM0RMYXllcnM9MCx0aGlzLl9udW1TeW1ib2xMYXllcnM9MCx0aGlzLl9udW1DaXJjbGVMYXllcnM9MCx0aGlzLl9zZXJpYWxpemVkTGF5ZXJzPXt9LHRoaXMuX3NvdXJjZUNhY2hlcz17fSx0aGlzLl9vdGhlclNvdXJjZUNhY2hlcz17fSx0aGlzLl9zeW1ib2xTb3VyY2VDYWNoZXM9e30sdGhpcy5fbG9hZGVkPSExLHRoaXMuX2F2YWlsYWJsZUltYWdlcz1bXSx0aGlzLl9vcmRlcj1bXSx0aGlzLl9kcmFwZWRGaXJzdE9yZGVyPVtdLHRoaXMuX21hcmtlcnNOZWVkVXBkYXRlPSExLHRoaXMuX3Jlc2V0VXBkYXRlcygpLHRoaXMuZGlzcGF0Y2hlci5icm9hZGNhc3QoXCJzZXRSZWZlcnJlclwiLGUuZ2V0UmVmZXJyZXIoKSk7Y29uc3Qgbz10aGlzO3RoaXMuX3J0bFRleHRQbHVnaW5DYWxsYmFjaz1LdC5yZWdpc3RlckZvclBsdWdpblN0YXRlQ2hhbmdlKCh0PT57by5kaXNwYXRjaGVyLmJyb2FkY2FzdChcInN5bmNSVExQbHVnaW5TdGF0ZVwiLHtwbHVnaW5TdGF0dXM6dC5wbHVnaW5TdGF0dXMscGx1Z2luVVJMOnQucGx1Z2luVVJMfSwoKHQsaSk9PntpZihlLnRyaWdnZXJQbHVnaW5Db21wbGV0aW9uRXZlbnQodCksaSYmaS5ldmVyeSgoZT0+ZSkpKWZvcihjb25zdCBlIGluIG8uX3NvdXJjZUNhY2hlcyl7Y29uc3QgdD1vLl9zb3VyY2VDYWNoZXNbZV0saT10LmdldFNvdXJjZSgpLnR5cGU7XCJ2ZWN0b3JcIiE9PWkmJlwiZ2VvanNvblwiIT09aXx8dC5yZWxvYWQoKTt9fSkpO30pKSx0aGlzLm9uKFwiZGF0YVwiLChlPT57aWYoXCJzb3VyY2VcIiE9PWUuZGF0YVR5cGV8fFwibWV0YWRhdGFcIiE9PWUuc291cmNlRGF0YVR5cGUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nZXRTb3VyY2UoZS5zb3VyY2VJZCk7aWYodCYmdC52ZWN0b3JMYXllcklkcylmb3IoY29uc3QgZSBpbiB0aGlzLl9sYXllcnMpe2NvbnN0IGk9dGhpcy5fbGF5ZXJzW2VdO2kuc291cmNlPT09dC5pZCYmdGhpcy5fdmFsaWRhdGVMYXllcihpKTt9fSkpO31sb2FkVVJMKHQsaT17fSl7dGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpO2NvbnN0IG89XCJib29sZWFuXCI9PXR5cGVvZiBpLnZhbGlkYXRlP2kudmFsaWRhdGU6IWUuaXNNYXBib3hVUkwodCk7dD10aGlzLm1hcC5fcmVxdWVzdE1hbmFnZXIubm9ybWFsaXplU3R5bGVVUkwodCxpLmFjY2Vzc1Rva2VuKTtjb25zdCByPXRoaXMubWFwLl9yZXF1ZXN0TWFuYWdlci50cmFuc2Zvcm1SZXF1ZXN0KHQsZS5SZXNvdXJjZVR5cGUuU3R5bGUpO3RoaXMuX3JlcXVlc3Q9ZS5nZXRKU09OKHIsKCh0LGkpPT57dGhpcy5fcmVxdWVzdD1udWxsLHQ/dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQodCkpOmkmJnRoaXMuX2xvYWQoaSxvKTt9KSk7fWxvYWRKU09OKHQsaT17fSl7dGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YWxvYWRpbmdcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpLHRoaXMuX3JlcXVlc3Q9ZS5leHBvcnRlZC5mcmFtZSgoKCk9Pnt0aGlzLl9yZXF1ZXN0PW51bGwsdGhpcy5fbG9hZCh0LCExIT09aS52YWxpZGF0ZSk7fSkpO31sb2FkRW1wdHkoKXt0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhbG9hZGluZ1wiLHtkYXRhVHlwZTpcInN0eWxlXCJ9KSksdGhpcy5fbG9hZChIdCwhMSk7fV91cGRhdGVMYXllckNvdW50KGUsdCl7Y29uc3QgaT10PzE6LTE7ZS5pczNEKCkmJih0aGlzLl9udW0zRExheWVycys9aSksXCJjaXJjbGVcIj09PWUudHlwZSYmKHRoaXMuX251bUNpcmNsZUxheWVycys9aSksXCJzeW1ib2xcIj09PWUudHlwZSYmKHRoaXMuX251bVN5bWJvbExheWVycys9aSk7fV9sb2FkKHQsaSl7aWYoaSYmWHQodGhpcyxlLnZhbGlkYXRlU3R5bGUodCkpKXJldHVybjt0aGlzLl9sb2FkZWQ9ITAsdGhpcy5zdHlsZXNoZWV0PWUuY2xvbmUkMSh0KSx0aGlzLl91cGRhdGVNYXBQcm9qZWN0aW9uKCk7Zm9yKGNvbnN0IGUgaW4gdC5zb3VyY2VzKXRoaXMuYWRkU291cmNlKGUsdC5zb3VyY2VzW2VdLHt2YWxpZGF0ZTohMX0pO3RoaXMuX2NoYW5nZWQ9ITEsdC5zcHJpdGU/dGhpcy5fbG9hZFNwcml0ZSh0LnNwcml0ZSk6KHRoaXMuaW1hZ2VNYW5hZ2VyLnNldExvYWRlZCghMCksdGhpcy5kaXNwYXRjaGVyLmJyb2FkY2FzdChcInNwcml0ZUxvYWRlZFwiLCEwKSksdGhpcy5nbHlwaE1hbmFnZXIuc2V0VVJMKHQuZ2x5cGhzKTtjb25zdCBvPWplKHRoaXMuc3R5bGVzaGVldC5sYXllcnMpO3RoaXMuX29yZGVyPW8ubWFwKChlPT5lLmlkKSksdGhpcy5fbGF5ZXJzPXt9LHRoaXMuX3NlcmlhbGl6ZWRMYXllcnM9e307Zm9yKGNvbnN0IHQgb2Ygbyl7Y29uc3QgaT1lLmNyZWF0ZVN0eWxlTGF5ZXIodCk7aS5zZXRFdmVudGVkUGFyZW50KHRoaXMse2xheWVyOntpZDppLmlkfX0pLHRoaXMuX2xheWVyc1tpLmlkXT1pLHRoaXMuX3NlcmlhbGl6ZWRMYXllcnNbaS5pZF09aS5zZXJpYWxpemUoKSx0aGlzLl91cGRhdGVMYXllckNvdW50KGksITApO310aGlzLmRpc3BhdGNoZXIuYnJvYWRjYXN0KFwic2V0TGF5ZXJzXCIsdGhpcy5fc2VyaWFsaXplTGF5ZXJzKHRoaXMuX29yZGVyKSksdGhpcy5saWdodD1uZXcgdyh0aGlzLnN0eWxlc2hlZXQubGlnaHQpLHRoaXMuc3R5bGVzaGVldC50ZXJyYWluJiYhdGhpcy50ZXJyYWluU2V0Rm9yRHJhcGluZ09ubHkoKSYmdGhpcy5fY3JlYXRlVGVycmFpbih0aGlzLnN0eWxlc2hlZXQudGVycmFpbiwxKSx0aGlzLnN0eWxlc2hlZXQuZm9nJiZ0aGlzLl9jcmVhdGVGb2codGhpcy5zdHlsZXNoZWV0LmZvZyksdGhpcy5fdXBkYXRlRHJhcGVGaXJzdExheWVycygpLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImRhdGFcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpLHRoaXMuZmlyZShuZXcgZS5FdmVudChcInN0eWxlLmxvYWRcIikpO310ZXJyYWluU2V0Rm9yRHJhcGluZ09ubHkoKXtyZXR1cm4gISF0aGlzLnRlcnJhaW4mJjA9PT10aGlzLnRlcnJhaW4uZHJhcGVSZW5kZXJNb2RlfXNldFByb2plY3Rpb24oZSl7ZT90aGlzLnN0eWxlc2hlZXQucHJvamVjdGlvbj1lOmRlbGV0ZSB0aGlzLnN0eWxlc2hlZXQucHJvamVjdGlvbix0aGlzLl91cGRhdGVNYXBQcm9qZWN0aW9uKCk7fWFwcGx5UHJvamVjdGlvblVwZGF0ZSgpe3RoaXMuX2xvYWRlZCYmKHRoaXMuZGlzcGF0Y2hlci5icm9hZGNhc3QoXCJzZXRQcm9qZWN0aW9uXCIsdGhpcy5tYXAudHJhbnNmb3JtLnByb2plY3Rpb25PcHRpb25zKSx0aGlzLm1hcC50cmFuc2Zvcm0ucHJvamVjdGlvbi5yZXF1aXJlc0RyYXBpbmc/dGhpcy5nZXRUZXJyYWluKCl8fHRoaXMuc3R5bGVzaGVldC50ZXJyYWlufHx0aGlzLnNldFRlcnJhaW5Gb3JEcmFwaW5nKCk6dGhpcy50ZXJyYWluU2V0Rm9yRHJhcGluZ09ubHkoKSYmdGhpcy5zZXRUZXJyYWluKG51bGwpKTt9X3VwZGF0ZU1hcFByb2plY3Rpb24oKXt0aGlzLm1hcC5fdXNlRXhwbGljaXRQcm9qZWN0aW9uP3RoaXMuYXBwbHlQcm9qZWN0aW9uVXBkYXRlKCk6dGhpcy5tYXAuX3ByaW9yaXRpemVBbmRVcGRhdGVQcm9qZWN0aW9uKG51bGwsdGhpcy5zdHlsZXNoZWV0LnByb2plY3Rpb24pO31fbG9hZFNwcml0ZSh0KXt0aGlzLl9zcHJpdGVSZXF1ZXN0PWZ1bmN0aW9uKHQsaSxvKXtsZXQgcixuLHM7Y29uc3QgYT1lLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8+MT9cIkAyeFwiOlwiXCI7bGV0IGw9ZS5nZXRKU09OKGkudHJhbnNmb3JtUmVxdWVzdChpLm5vcm1hbGl6ZVNwcml0ZVVSTCh0LGEsXCIuanNvblwiKSxlLlJlc291cmNlVHlwZS5TcHJpdGVKU09OKSwoKGUsdCk9PntsPW51bGwsc3x8KHM9ZSxyPXQsaCgpKTt9KSksYz1lLmdldEltYWdlKGkudHJhbnNmb3JtUmVxdWVzdChpLm5vcm1hbGl6ZVNwcml0ZVVSTCh0LGEsXCIucG5nXCIpLGUuUmVzb3VyY2VUeXBlLlNwcml0ZUltYWdlKSwoKGUsdCk9PntjPW51bGwsc3x8KHM9ZSxuPXQsaCgpKTt9KSk7ZnVuY3Rpb24gaCgpe2lmKHMpbyhzKTtlbHNlIGlmKHImJm4pe2NvbnN0IHQ9ZS5leHBvcnRlZC5nZXRJbWFnZURhdGEobiksaT17fTtmb3IoY29uc3QgbyBpbiByKXtjb25zdHt3aWR0aDpuLGhlaWdodDpzLHg6YSx5Omwsc2RmOmMscGl4ZWxSYXRpbzpoLHN0cmV0Y2hYOnUsc3RyZXRjaFk6Xyxjb250ZW50OmR9PXJbb10scD1uZXcgZS5SR0JBSW1hZ2Uoe3dpZHRoOm4saGVpZ2h0OnN9KTtlLlJHQkFJbWFnZS5jb3B5KHQscCx7eDphLHk6bH0se3g6MCx5OjB9LHt3aWR0aDpuLGhlaWdodDpzfSksaVtvXT17ZGF0YTpwLHBpeGVsUmF0aW86aCxzZGY6YyxzdHJldGNoWDp1LHN0cmV0Y2hZOl8sY29udGVudDpkfTt9byhudWxsLGkpO319cmV0dXJuIHtjYW5jZWwoKXtsJiYobC5jYW5jZWwoKSxsPW51bGwpLGMmJihjLmNhbmNlbCgpLGM9bnVsbCk7fX19KHQsdGhpcy5tYXAuX3JlcXVlc3RNYW5hZ2VyLCgodCxpKT0+e2lmKHRoaXMuX3Nwcml0ZVJlcXVlc3Q9bnVsbCx0KXRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KHQpKTtlbHNlIGlmKGkpZm9yKGNvbnN0IGUgaW4gaSl0aGlzLmltYWdlTWFuYWdlci5hZGRJbWFnZShlLGlbZV0pO3RoaXMuaW1hZ2VNYW5hZ2VyLnNldExvYWRlZCghMCksdGhpcy5fYXZhaWxhYmxlSW1hZ2VzPXRoaXMuaW1hZ2VNYW5hZ2VyLmxpc3RJbWFnZXMoKSx0aGlzLmRpc3BhdGNoZXIuYnJvYWRjYXN0KFwic2V0SW1hZ2VzXCIsdGhpcy5fYXZhaWxhYmxlSW1hZ2VzKSx0aGlzLmRpc3BhdGNoZXIuYnJvYWRjYXN0KFwic3ByaXRlTG9hZGVkXCIsITApLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImRhdGFcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpO30pKTt9X3ZhbGlkYXRlTGF5ZXIodCl7Y29uc3QgaT10aGlzLmdldFNvdXJjZSh0LnNvdXJjZSk7aWYoIWkpcmV0dXJuO2NvbnN0IG89dC5zb3VyY2VMYXllcjtvJiYoXCJnZW9qc29uXCI9PT1pLnR5cGV8fGkudmVjdG9yTGF5ZXJJZHMmJi0xPT09aS52ZWN0b3JMYXllcklkcy5pbmRleE9mKG8pKSYmdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBTb3VyY2UgbGF5ZXIgXCIke299XCIgZG9lcyBub3QgZXhpc3Qgb24gc291cmNlIFwiJHtpLmlkfVwiIGFzIHNwZWNpZmllZCBieSBzdHlsZSBsYXllciBcIiR7dC5pZH1cImApKSk7fWxvYWRlZCgpe2lmKCF0aGlzLl9sb2FkZWQpcmV0dXJuICExO2lmKE9iamVjdC5rZXlzKHRoaXMuX3VwZGF0ZWRTb3VyY2VzKS5sZW5ndGgpcmV0dXJuICExO2Zvcihjb25zdCBlIGluIHRoaXMuX3NvdXJjZUNhY2hlcylpZighdGhpcy5fc291cmNlQ2FjaGVzW2VdLmxvYWRlZCgpKXJldHVybiAhMTtyZXR1cm4gISF0aGlzLmltYWdlTWFuYWdlci5pc0xvYWRlZCgpfV9zZXJpYWxpemVMYXllcnMoZSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgaSBvZiBlKXtjb25zdCBlPXRoaXMuX2xheWVyc1tpXTtcImN1c3RvbVwiIT09ZS50eXBlJiZ0LnB1c2goZS5zZXJpYWxpemUoKSk7fXJldHVybiB0fWhhc1RyYW5zaXRpb25zKCl7aWYodGhpcy5saWdodCYmdGhpcy5saWdodC5oYXNUcmFuc2l0aW9uKCkpcmV0dXJuICEwO2lmKHRoaXMuZm9nJiZ0aGlzLmZvZy5oYXNUcmFuc2l0aW9uKCkpcmV0dXJuICEwO2Zvcihjb25zdCBlIGluIHRoaXMuX3NvdXJjZUNhY2hlcylpZih0aGlzLl9zb3VyY2VDYWNoZXNbZV0uaGFzVHJhbnNpdGlvbigpKXJldHVybiAhMDtmb3IoY29uc3QgZSBpbiB0aGlzLl9sYXllcnMpaWYodGhpcy5fbGF5ZXJzW2VdLmhhc1RyYW5zaXRpb24oKSlyZXR1cm4gITA7cmV0dXJuICExfWdldCBvcmRlcigpe3JldHVybiB0aGlzLm1hcC5fb3B0aW1pemVGb3JUZXJyYWluJiZ0aGlzLnRlcnJhaW4/dGhpcy5fZHJhcGVkRmlyc3RPcmRlcjp0aGlzLl9vcmRlcn1pc0xheWVyRHJhcGVkKGUpe3JldHVybiAhIXRoaXMudGVycmFpbiYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUuaXNMYXllckRyYXBlZD9lLmlzTGF5ZXJEcmFwZWQoKTpZdFtlLnR5cGVdKX1fY2hlY2tMb2FkZWQoKXtpZighdGhpcy5fbG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlN0eWxlIGlzIG5vdCBkb25lIGxvYWRpbmdcIil9dXBkYXRlKHQpe2lmKCF0aGlzLl9sb2FkZWQpcmV0dXJuO2NvbnN0IGk9dGhpcy5fY2hhbmdlZDtpZih0aGlzLl9jaGFuZ2VkKXtjb25zdCBlPU9iamVjdC5rZXlzKHRoaXMuX3VwZGF0ZWRMYXllcnMpLGk9T2JqZWN0LmtleXModGhpcy5fcmVtb3ZlZExheWVycyk7KGUubGVuZ3RofHxpLmxlbmd0aCkmJnRoaXMuX3VwZGF0ZVdvcmtlckxheWVycyhlLGkpO2Zvcihjb25zdCBlIGluIHRoaXMuX3VwZGF0ZWRTb3VyY2VzKXtjb25zdCB0PXRoaXMuX3VwZGF0ZWRTb3VyY2VzW2VdO1wicmVsb2FkXCI9PT10P3RoaXMuX3JlbG9hZFNvdXJjZShlKTpcImNsZWFyXCI9PT10JiZ0aGlzLl9jbGVhclNvdXJjZShlKTt9dGhpcy5fdXBkYXRlVGlsZXNGb3JDaGFuZ2VkSW1hZ2VzKCk7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fdXBkYXRlZFBhaW50UHJvcHMpdGhpcy5fbGF5ZXJzW2VdLnVwZGF0ZVRyYW5zaXRpb25zKHQpO3RoaXMubGlnaHQudXBkYXRlVHJhbnNpdGlvbnModCksdGhpcy5mb2cmJnRoaXMuZm9nLnVwZGF0ZVRyYW5zaXRpb25zKHQpLHRoaXMuX3Jlc2V0VXBkYXRlcygpO31jb25zdCBvPXt9O2Zvcihjb25zdCBlIGluIHRoaXMuX3NvdXJjZUNhY2hlcyl7Y29uc3QgdD10aGlzLl9zb3VyY2VDYWNoZXNbZV07b1tlXT10LnVzZWQsdC51c2VkPSExO31mb3IoY29uc3QgZSBvZiB0aGlzLl9vcmRlcil7Y29uc3QgaT10aGlzLl9sYXllcnNbZV07aWYoaS5yZWNhbGN1bGF0ZSh0LHRoaXMuX2F2YWlsYWJsZUltYWdlcyksIWkuaXNIaWRkZW4odC56b29tKSl7Y29uc3QgZT10aGlzLl9nZXRMYXllclNvdXJjZUNhY2hlKGkpO2UmJihlLnVzZWQ9ITApO31jb25zdCBvPXRoaXMubWFwLnBhaW50ZXI7aWYobyl7Y29uc3QgZT1pLmdldFByb2dyYW1JZHMoKTtpZighZSljb250aW51ZTtjb25zdCByPWkuZ2V0UHJvZ3JhbUNvbmZpZ3VyYXRpb24odC56b29tKTtmb3IoY29uc3QgdCBvZiBlKW8udXNlUHJvZ3JhbSh0LHIpO319Zm9yKGNvbnN0IHQgaW4gbyl7Y29uc3QgaT10aGlzLl9zb3VyY2VDYWNoZXNbdF07b1t0XSE9PWkudXNlZCYmaS5nZXRTb3VyY2UoKS5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YVwiLHtzb3VyY2VEYXRhVHlwZTpcInZpc2liaWxpdHlcIixkYXRhVHlwZTpcInNvdXJjZVwiLHNvdXJjZUlkOmkuZ2V0U291cmNlKCkuaWR9KSk7fXRoaXMubGlnaHQucmVjYWxjdWxhdGUodCksdGhpcy50ZXJyYWluJiZ0aGlzLnRlcnJhaW4ucmVjYWxjdWxhdGUodCksdGhpcy5mb2cmJnRoaXMuZm9nLnJlY2FsY3VsYXRlKHQpLHRoaXMuej10Lnpvb20sdGhpcy5fbWFya2Vyc05lZWRVcGRhdGUmJih0aGlzLl91cGRhdGVNYXJrZXJzT3BhY2l0eSgpLHRoaXMuX21hcmtlcnNOZWVkVXBkYXRlPSExKSxpJiZ0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkYXRhXCIse2RhdGFUeXBlOlwic3R5bGVcIn0pKTt9X3VwZGF0ZVRpbGVzRm9yQ2hhbmdlZEltYWdlcygpe2NvbnN0IGU9T2JqZWN0LmtleXModGhpcy5fY2hhbmdlZEltYWdlcyk7aWYoZS5sZW5ndGgpe2Zvcihjb25zdCB0IGluIHRoaXMuX3NvdXJjZUNhY2hlcyl0aGlzLl9zb3VyY2VDYWNoZXNbdF0ucmVsb2FkVGlsZXNGb3JEZXBlbmRlbmNpZXMoW1wiaWNvbnNcIixcInBhdHRlcm5zXCJdLGUpO3RoaXMuX2NoYW5nZWRJbWFnZXM9e307fX1fdXBkYXRlV29ya2VyTGF5ZXJzKGUsdCl7dGhpcy5kaXNwYXRjaGVyLmJyb2FkY2FzdChcInVwZGF0ZUxheWVyc1wiLHtsYXllcnM6dGhpcy5fc2VyaWFsaXplTGF5ZXJzKGUpLHJlbW92ZWRJZHM6dH0pO31fcmVzZXRVcGRhdGVzKCl7dGhpcy5fY2hhbmdlZD0hMSx0aGlzLl91cGRhdGVkTGF5ZXJzPXt9LHRoaXMuX3JlbW92ZWRMYXllcnM9e30sdGhpcy5fdXBkYXRlZFNvdXJjZXM9e30sdGhpcy5fdXBkYXRlZFBhaW50UHJvcHM9e30sdGhpcy5fY2hhbmdlZEltYWdlcz17fTt9c2V0U3RhdGUoaSl7aWYodGhpcy5fY2hlY2tMb2FkZWQoKSxYdCh0aGlzLGUudmFsaWRhdGVTdHlsZShpKSkpcmV0dXJuICExOyhpPWUuY2xvbmUkMShpKSkubGF5ZXJzPWplKGkubGF5ZXJzKTtjb25zdCBvPWZ1bmN0aW9uKGUsaSl7aWYoIWUpcmV0dXJuIFt7Y29tbWFuZDpHZS5zZXRTdHlsZSxhcmdzOltpXX1dO2xldCBvPVtdO3RyeXtpZighdChlLnZlcnNpb24saS52ZXJzaW9uKSlyZXR1cm4gW3tjb21tYW5kOkdlLnNldFN0eWxlLGFyZ3M6W2ldfV07dChlLmNlbnRlcixpLmNlbnRlcil8fG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRDZW50ZXIsYXJnczpbaS5jZW50ZXJdfSksdChlLnpvb20saS56b29tKXx8by5wdXNoKHtjb21tYW5kOkdlLnNldFpvb20sYXJnczpbaS56b29tXX0pLHQoZS5iZWFyaW5nLGkuYmVhcmluZyl8fG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRCZWFyaW5nLGFyZ3M6W2kuYmVhcmluZ119KSx0KGUucGl0Y2gsaS5waXRjaCl8fG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRQaXRjaCxhcmdzOltpLnBpdGNoXX0pLHQoZS5zcHJpdGUsaS5zcHJpdGUpfHxvLnB1c2goe2NvbW1hbmQ6R2Uuc2V0U3ByaXRlLGFyZ3M6W2kuc3ByaXRlXX0pLHQoZS5nbHlwaHMsaS5nbHlwaHMpfHxvLnB1c2goe2NvbW1hbmQ6R2Uuc2V0R2x5cGhzLGFyZ3M6W2kuZ2x5cGhzXX0pLHQoZS50cmFuc2l0aW9uLGkudHJhbnNpdGlvbil8fG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRUcmFuc2l0aW9uLGFyZ3M6W2kudHJhbnNpdGlvbl19KSx0KGUubGlnaHQsaS5saWdodCl8fG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRMaWdodCxhcmdzOltpLmxpZ2h0XX0pLHQoZS5mb2csaS5mb2cpfHxvLnB1c2goe2NvbW1hbmQ6R2Uuc2V0Rm9nLGFyZ3M6W2kuZm9nXX0pLHQoZS5wcm9qZWN0aW9uLGkucHJvamVjdGlvbil8fG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRQcm9qZWN0aW9uLGFyZ3M6W2kucHJvamVjdGlvbl19KTtjb25zdCByPXt9LG49W107IWZ1bmN0aW9uKGUsaSxvLHIpe2xldCBuO2ZvcihuIGluIGk9aXx8e30sZT1lfHx7fSllLmhhc093blByb3BlcnR5KG4pJiYoaS5oYXNPd25Qcm9wZXJ0eShuKXx8VmUobixvLHIpKTtmb3IobiBpbiBpKXtpZighaS5oYXNPd25Qcm9wZXJ0eShuKSljb250aW51ZTtjb25zdCBzPWlbbl07ZS5oYXNPd25Qcm9wZXJ0eShuKT90KGVbbl0scyl8fChcImdlb2pzb25cIj09PWVbbl0udHlwZSYmXCJnZW9qc29uXCI9PT1zLnR5cGUmJlhlKGUsaSxuKT9vLnB1c2goe2NvbW1hbmQ6R2Uuc2V0R2VvSlNPTlNvdXJjZURhdGEsYXJnczpbbixzLmRhdGFdfSk6V2UobixpLG8scikpOlplKG4saSxvKTt9fShlLnNvdXJjZXMsaS5zb3VyY2VzLG4scik7Y29uc3Qgcz1bXTtlLmxheWVycyYmZS5sYXllcnMuZm9yRWFjaCgoZT0+e2Uuc291cmNlJiZyW2Uuc291cmNlXT9vLnB1c2goe2NvbW1hbmQ6R2UucmVtb3ZlTGF5ZXIsYXJnczpbZS5pZF19KTpzLnB1c2goZSk7fSkpO2xldCBhPWUudGVycmFpbjthJiZyW2Euc291cmNlXSYmKG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRUZXJyYWluLGFyZ3M6W3ZvaWQgMF19KSxhPXZvaWQgMCksbz1vLmNvbmNhdChuKSx0KGEsaS50ZXJyYWluKXx8by5wdXNoKHtjb21tYW5kOkdlLnNldFRlcnJhaW4sYXJnczpbaS50ZXJyYWluXX0pLGZ1bmN0aW9uKGUsaSxvKXtpPWl8fFtdO2NvbnN0IHI9KGU9ZXx8W10pLm1hcCgkZSksbj1pLm1hcCgkZSkscz1lLnJlZHVjZShIZSx7fSksYT1pLnJlZHVjZShIZSx7fSksbD1yLnNsaWNlKCksYz1PYmplY3QuY3JlYXRlKG51bGwpO2xldCBoLHUsXyxkLHAsbSxmO2ZvcihoPTAsdT0wO2g8ci5sZW5ndGg7aCsrKV89cltoXSxhLmhhc093blByb3BlcnR5KF8pP3UrKzooby5wdXNoKHtjb21tYW5kOkdlLnJlbW92ZUxheWVyLGFyZ3M6W19dfSksbC5zcGxpY2UobC5pbmRleE9mKF8sdSksMSkpO2ZvcihoPTAsdT0wO2g8bi5sZW5ndGg7aCsrKV89bltuLmxlbmd0aC0xLWhdLGxbbC5sZW5ndGgtMS1oXSE9PV8mJihzLmhhc093blByb3BlcnR5KF8pPyhvLnB1c2goe2NvbW1hbmQ6R2UucmVtb3ZlTGF5ZXIsYXJnczpbX119KSxsLnNwbGljZShsLmxhc3RJbmRleE9mKF8sbC5sZW5ndGgtdSksMSkpOnUrKyxtPWxbbC5sZW5ndGgtaF0sby5wdXNoKHtjb21tYW5kOkdlLmFkZExheWVyLGFyZ3M6W2FbX10sbV19KSxsLnNwbGljZShsLmxlbmd0aC1oLDAsXyksY1tfXT0hMCk7Zm9yKGg9MDtoPG4ubGVuZ3RoO2grKylpZihfPW5baF0sZD1zW19dLHA9YVtfXSwhY1tfXSYmIXQoZCxwKSlpZih0KGQuc291cmNlLHAuc291cmNlKSYmdChkW1wic291cmNlLWxheWVyXCJdLHBbXCJzb3VyY2UtbGF5ZXJcIl0pJiZ0KGQudHlwZSxwLnR5cGUpKXtmb3IoZiBpbiBxZShkLmxheW91dCxwLmxheW91dCxvLF8sbnVsbCxHZS5zZXRMYXlvdXRQcm9wZXJ0eSkscWUoZC5wYWludCxwLnBhaW50LG8sXyxudWxsLEdlLnNldFBhaW50UHJvcGVydHkpLHQoZC5maWx0ZXIscC5maWx0ZXIpfHxvLnB1c2goe2NvbW1hbmQ6R2Uuc2V0RmlsdGVyLGFyZ3M6W18scC5maWx0ZXJdfSksdChkLm1pbnpvb20scC5taW56b29tKSYmdChkLm1heHpvb20scC5tYXh6b29tKXx8by5wdXNoKHtjb21tYW5kOkdlLnNldExheWVyWm9vbVJhbmdlLGFyZ3M6W18scC5taW56b29tLHAubWF4em9vbV19KSxkKWQuaGFzT3duUHJvcGVydHkoZikmJlwibGF5b3V0XCIhPT1mJiZcInBhaW50XCIhPT1mJiZcImZpbHRlclwiIT09ZiYmXCJtZXRhZGF0YVwiIT09ZiYmXCJtaW56b29tXCIhPT1mJiZcIm1heHpvb21cIiE9PWYmJigwPT09Zi5pbmRleE9mKFwicGFpbnQuXCIpP3FlKGRbZl0scFtmXSxvLF8sZi5zbGljZSg2KSxHZS5zZXRQYWludFByb3BlcnR5KTp0KGRbZl0scFtmXSl8fG8ucHVzaCh7Y29tbWFuZDpHZS5zZXRMYXllclByb3BlcnR5LGFyZ3M6W18sZixwW2ZdXX0pKTtmb3IoZiBpbiBwKXAuaGFzT3duUHJvcGVydHkoZikmJiFkLmhhc093blByb3BlcnR5KGYpJiZcImxheW91dFwiIT09ZiYmXCJwYWludFwiIT09ZiYmXCJmaWx0ZXJcIiE9PWYmJlwibWV0YWRhdGFcIiE9PWYmJlwibWluem9vbVwiIT09ZiYmXCJtYXh6b29tXCIhPT1mJiYoMD09PWYuaW5kZXhPZihcInBhaW50LlwiKT9xZShkW2ZdLHBbZl0sbyxfLGYuc2xpY2UoNiksR2Uuc2V0UGFpbnRQcm9wZXJ0eSk6dChkW2ZdLHBbZl0pfHxvLnB1c2goe2NvbW1hbmQ6R2Uuc2V0TGF5ZXJQcm9wZXJ0eSxhcmdzOltfLGYscFtmXV19KSk7fWVsc2Ugby5wdXNoKHtjb21tYW5kOkdlLnJlbW92ZUxheWVyLGFyZ3M6W19dfSksbT1sW2wubGFzdEluZGV4T2YoXykrMV0sby5wdXNoKHtjb21tYW5kOkdlLmFkZExheWVyLGFyZ3M6W3AsbV19KTt9KHMsaS5sYXllcnMsbyk7fWNhdGNoKGUpe2NvbnNvbGUud2FybihcIlVuYWJsZSB0byBjb21wdXRlIHN0eWxlIGRpZmY6XCIsZSksbz1be2NvbW1hbmQ6R2Uuc2V0U3R5bGUsYXJnczpbaV19XTt9cmV0dXJuIG99KHRoaXMuc2VyaWFsaXplKCksaSkuZmlsdGVyKChlPT4hKGUuY29tbWFuZCBpbiAkdCkpKTtpZigwPT09by5sZW5ndGgpcmV0dXJuICExO2NvbnN0IHI9by5maWx0ZXIoKGU9PiEoZS5jb21tYW5kIGluIHF0KSkpO2lmKHIubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKGBVbmltcGxlbWVudGVkOiAke3IubWFwKChlPT5lLmNvbW1hbmQpKS5qb2luKFwiLCBcIil9LmApO3JldHVybiBvLmZvckVhY2goKGU9PntcInNldFRyYW5zaXRpb25cIiE9PWUuY29tbWFuZCYmXCJzZXRQcm9qZWN0aW9uXCIhPT1lLmNvbW1hbmQmJnRoaXNbZS5jb21tYW5kXS5hcHBseSh0aGlzLGUuYXJncyk7fSkpLHRoaXMuc3R5bGVzaGVldD1pLHRoaXMuX3VwZGF0ZU1hcFByb2plY3Rpb24oKSwhMH1hZGRJbWFnZSh0LGkpe3JldHVybiB0aGlzLmdldEltYWdlKHQpP3RoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIkFuIGltYWdlIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzLlwiKSkpOih0aGlzLmltYWdlTWFuYWdlci5hZGRJbWFnZSh0LGkpLHRoaXMuX2FmdGVySW1hZ2VVcGRhdGVkKHQpLHRoaXMpfXVwZGF0ZUltYWdlKGUsdCl7dGhpcy5pbWFnZU1hbmFnZXIudXBkYXRlSW1hZ2UoZSx0KTt9Z2V0SW1hZ2UoZSl7cmV0dXJuIHRoaXMuaW1hZ2VNYW5hZ2VyLmdldEltYWdlKGUpfXJlbW92ZUltYWdlKHQpe3JldHVybiB0aGlzLmdldEltYWdlKHQpPyh0aGlzLmltYWdlTWFuYWdlci5yZW1vdmVJbWFnZSh0KSx0aGlzLl9hZnRlckltYWdlVXBkYXRlZCh0KSx0aGlzKTp0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJObyBpbWFnZSB3aXRoIHRoaXMgbmFtZSBleGlzdHMuXCIpKSl9X2FmdGVySW1hZ2VVcGRhdGVkKHQpe3RoaXMuX2F2YWlsYWJsZUltYWdlcz10aGlzLmltYWdlTWFuYWdlci5saXN0SW1hZ2VzKCksdGhpcy5fY2hhbmdlZEltYWdlc1t0XT0hMCx0aGlzLl9jaGFuZ2VkPSEwLHRoaXMuZGlzcGF0Y2hlci5icm9hZGNhc3QoXCJzZXRJbWFnZXNcIix0aGlzLl9hdmFpbGFibGVJbWFnZXMpLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImRhdGFcIix7ZGF0YVR5cGU6XCJzdHlsZVwifSkpO31saXN0SW1hZ2VzKCl7cmV0dXJuIHRoaXMuX2NoZWNrTG9hZGVkKCksdGhpcy5fYXZhaWxhYmxlSW1hZ2VzLnNsaWNlKCl9YWRkU291cmNlKHQsaSxvPXt9KXtpZih0aGlzLl9jaGVja0xvYWRlZCgpLHZvaWQgMCE9PXRoaXMuZ2V0U291cmNlKHQpKXRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIGFscmVhZHkgYSBzb3VyY2Ugd2l0aCB0aGlzIElEXCIpO2lmKCFpLnR5cGUpdGhyb3cgbmV3IEVycm9yKGBUaGUgdHlwZSBwcm9wZXJ0eSBtdXN0IGJlIGRlZmluZWQsIGJ1dCBvbmx5IHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyB3ZXJlIGdpdmVuOiAke09iamVjdC5rZXlzKGkpLmpvaW4oXCIsIFwiKX0uYCk7aWYoW1widmVjdG9yXCIsXCJyYXN0ZXJcIixcImdlb2pzb25cIixcInZpZGVvXCIsXCJpbWFnZVwiXS5pbmRleE9mKGkudHlwZSk+PTAmJnRoaXMuX3ZhbGlkYXRlKGUudmFsaWRhdGVTb3VyY2UsYHNvdXJjZXMuJHt0fWAsaSxudWxsLG8pKXJldHVybjt0aGlzLm1hcCYmdGhpcy5tYXAuX2NvbGxlY3RSZXNvdXJjZVRpbWluZyYmKGkuY29sbGVjdFJlc291cmNlVGltaW5nPSEwKTtjb25zdCByPURlKHQsaSx0aGlzLmRpc3BhdGNoZXIsdGhpcyk7ci5zZXRFdmVudGVkUGFyZW50KHRoaXMsKCgpPT4oe2lzU291cmNlTG9hZGVkOnRoaXMuX2lzU291cmNlQ2FjaGVMb2FkZWQodCksc291cmNlOnIuc2VyaWFsaXplKCksc291cmNlSWQ6dH0pKSk7Y29uc3Qgbj1pPT57Y29uc3Qgbz0oaT9cInN5bWJvbDpcIjpcIm90aGVyOlwiKSt0LG49dGhpcy5fc291cmNlQ2FjaGVzW29dPW5ldyBlLlNvdXJjZUNhY2hlKG8scixpKTsoaT90aGlzLl9zeW1ib2xTb3VyY2VDYWNoZXM6dGhpcy5fb3RoZXJTb3VyY2VDYWNoZXMpW3RdPW4sbi5zdHlsZT10aGlzLG4ub25BZGQodGhpcy5tYXApO307bighMSksXCJ2ZWN0b3JcIiE9PWkudHlwZSYmXCJnZW9qc29uXCIhPT1pLnR5cGV8fG4oITApLHIub25BZGQmJnIub25BZGQodGhpcy5tYXApLHRoaXMuX2NoYW5nZWQ9ITA7fXJlbW92ZVNvdXJjZSh0KXt0aGlzLl9jaGVja0xvYWRlZCgpO2NvbnN0IGk9dGhpcy5nZXRTb3VyY2UodCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gc291cmNlIHdpdGggdGhpcyBJRFwiKTtmb3IoY29uc3QgaSBpbiB0aGlzLl9sYXllcnMpaWYodGhpcy5fbGF5ZXJzW2ldLnNvdXJjZT09PXQpcmV0dXJuIHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihgU291cmNlIFwiJHt0fVwiIGNhbm5vdCBiZSByZW1vdmVkIHdoaWxlIGxheWVyIFwiJHtpfVwiIGlzIHVzaW5nIGl0LmApKSk7aWYodGhpcy50ZXJyYWluJiZ0aGlzLnRlcnJhaW4uZ2V0KCkuc291cmNlPT09dClyZXR1cm4gdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBTb3VyY2UgXCIke3R9XCIgY2Fubm90IGJlIHJlbW92ZWQgd2hpbGUgdGVycmFpbiBpcyB1c2luZyBpdC5gKSkpO2NvbnN0IG89dGhpcy5fZ2V0U291cmNlQ2FjaGVzKHQpO2Zvcihjb25zdCB0IG9mIG8pZGVsZXRlIHRoaXMuX3NvdXJjZUNhY2hlc1t0LmlkXSxkZWxldGUgdGhpcy5fdXBkYXRlZFNvdXJjZXNbdC5pZF0sdC5maXJlKG5ldyBlLkV2ZW50KFwiZGF0YVwiLHtzb3VyY2VEYXRhVHlwZTpcIm1ldGFkYXRhXCIsZGF0YVR5cGU6XCJzb3VyY2VcIixzb3VyY2VJZDp0LmdldFNvdXJjZSgpLmlkfSkpLHQuc2V0RXZlbnRlZFBhcmVudChudWxsKSx0LmNsZWFyVGlsZXMoKTtyZXR1cm4gZGVsZXRlIHRoaXMuX290aGVyU291cmNlQ2FjaGVzW3RdLGRlbGV0ZSB0aGlzLl9zeW1ib2xTb3VyY2VDYWNoZXNbdF0saS5zZXRFdmVudGVkUGFyZW50KG51bGwpLGkub25SZW1vdmUmJmkub25SZW1vdmUodGhpcy5tYXApLHRoaXMuX2NoYW5nZWQ9ITAsdGhpc31zZXRHZW9KU09OU291cmNlRGF0YShlLHQpe3RoaXMuX2NoZWNrTG9hZGVkKCksdGhpcy5nZXRTb3VyY2UoZSkuc2V0RGF0YSh0KSx0aGlzLl9jaGFuZ2VkPSEwO31nZXRTb3VyY2UoZSl7Y29uc3QgdD10aGlzLl9nZXRTb3VyY2VDYWNoZShlKTtyZXR1cm4gdCYmdC5nZXRTb3VyY2UoKX1fZ2V0U291cmNlcygpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgaW4gdGhpcy5fb3RoZXJTb3VyY2VDYWNoZXMpe2NvbnN0IGk9dGhpcy5fZ2V0U291cmNlQ2FjaGUodCk7aSYmZS5wdXNoKGkuZ2V0U291cmNlKCkpO31yZXR1cm4gZX1hZGRMYXllcih0LGksbz17fSl7dGhpcy5fY2hlY2tMb2FkZWQoKTtjb25zdCByPXQuaWQ7aWYodGhpcy5nZXRMYXllcihyKSlyZXR1cm4gdm9pZCB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYExheWVyIHdpdGggaWQgXCIke3J9XCIgYWxyZWFkeSBleGlzdHMgb24gdGhpcyBtYXBgKSkpO2xldCBuO2lmKFwiY3VzdG9tXCI9PT10LnR5cGUpe2lmKFh0KHRoaXMsZS52YWxpZGF0ZUN1c3RvbVN0eWxlTGF5ZXIodCkpKXJldHVybjtuPWUuY3JlYXRlU3R5bGVMYXllcih0KTt9ZWxzZSB7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQuc291cmNlJiYodGhpcy5hZGRTb3VyY2Uocix0LnNvdXJjZSksdD1lLmNsb25lJDEodCksdD1lLmV4dGVuZCh0LHtzb3VyY2U6cn0pKSx0aGlzLl92YWxpZGF0ZShlLnZhbGlkYXRlTGF5ZXIsYGxheWVycy4ke3J9YCx0LHthcnJheUluZGV4Oi0xfSxvKSlyZXR1cm47bj1lLmNyZWF0ZVN0eWxlTGF5ZXIodCksdGhpcy5fdmFsaWRhdGVMYXllcihuKSxuLnNldEV2ZW50ZWRQYXJlbnQodGhpcyx7bGF5ZXI6e2lkOnJ9fSksdGhpcy5fc2VyaWFsaXplZExheWVyc1tuLmlkXT1uLnNlcmlhbGl6ZSgpLHRoaXMuX3VwZGF0ZUxheWVyQ291bnQobiwhMCk7fWNvbnN0IHM9aT90aGlzLl9vcmRlci5pbmRleE9mKGkpOnRoaXMuX29yZGVyLmxlbmd0aDtpZihpJiYtMT09PXMpcmV0dXJuIHZvaWQgdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBMYXllciB3aXRoIGlkIFwiJHtpfVwiIGRvZXMgbm90IGV4aXN0IG9uIHRoaXMgbWFwLmApKSk7dGhpcy5fb3JkZXIuc3BsaWNlKHMsMCxyKSx0aGlzLl9sYXllck9yZGVyQ2hhbmdlZD0hMCx0aGlzLl9sYXllcnNbcl09bjtjb25zdCBhPXRoaXMuX2dldExheWVyU291cmNlQ2FjaGUobik7aWYodGhpcy5fcmVtb3ZlZExheWVyc1tyXSYmbi5zb3VyY2UmJmEmJlwiY3VzdG9tXCIhPT1uLnR5cGUpe2NvbnN0IGU9dGhpcy5fcmVtb3ZlZExheWVyc1tyXTtkZWxldGUgdGhpcy5fcmVtb3ZlZExheWVyc1tyXSxlLnR5cGUhPT1uLnR5cGU/dGhpcy5fdXBkYXRlZFNvdXJjZXNbbi5zb3VyY2VdPVwiY2xlYXJcIjoodGhpcy5fdXBkYXRlZFNvdXJjZXNbbi5zb3VyY2VdPVwicmVsb2FkXCIsYS5wYXVzZSgpKTt9dGhpcy5fdXBkYXRlTGF5ZXIobiksbi5vbkFkZCYmbi5vbkFkZCh0aGlzLm1hcCksdGhpcy5fdXBkYXRlRHJhcGVGaXJzdExheWVycygpO31tb3ZlTGF5ZXIodCxpKXtpZih0aGlzLl9jaGVja0xvYWRlZCgpLHRoaXMuX2NoYW5nZWQ9ITAsIXRoaXMuX2xheWVyc1t0XSlyZXR1cm4gdm9pZCB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYFRoZSBsYXllciAnJHt0fScgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG1hcCdzIHN0eWxlIGFuZCBjYW5ub3QgYmUgbW92ZWQuYCkpKTtpZih0PT09aSlyZXR1cm47Y29uc3Qgbz10aGlzLl9vcmRlci5pbmRleE9mKHQpO3RoaXMuX29yZGVyLnNwbGljZShvLDEpO2NvbnN0IHI9aT90aGlzLl9vcmRlci5pbmRleE9mKGkpOnRoaXMuX29yZGVyLmxlbmd0aDtpJiYtMT09PXI/dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBMYXllciB3aXRoIGlkIFwiJHtpfVwiIGRvZXMgbm90IGV4aXN0IG9uIHRoaXMgbWFwLmApKSk6KHRoaXMuX29yZGVyLnNwbGljZShyLDAsdCksdGhpcy5fbGF5ZXJPcmRlckNoYW5nZWQ9ITAsdGhpcy5fdXBkYXRlRHJhcGVGaXJzdExheWVycygpKTt9cmVtb3ZlTGF5ZXIodCl7dGhpcy5fY2hlY2tMb2FkZWQoKTtjb25zdCBpPXRoaXMuX2xheWVyc1t0XTtpZighaSlyZXR1cm4gdm9pZCB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYFRoZSBsYXllciAnJHt0fScgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG1hcCdzIHN0eWxlIGFuZCBjYW5ub3QgYmUgcmVtb3ZlZC5gKSkpO2kuc2V0RXZlbnRlZFBhcmVudChudWxsKSx0aGlzLl91cGRhdGVMYXllckNvdW50KGksITEpO2NvbnN0IG89dGhpcy5fb3JkZXIuaW5kZXhPZih0KTt0aGlzLl9vcmRlci5zcGxpY2UobywxKSx0aGlzLl9sYXllck9yZGVyQ2hhbmdlZD0hMCx0aGlzLl9jaGFuZ2VkPSEwLHRoaXMuX3JlbW92ZWRMYXllcnNbdF09aSxkZWxldGUgdGhpcy5fbGF5ZXJzW3RdLGRlbGV0ZSB0aGlzLl9zZXJpYWxpemVkTGF5ZXJzW3RdLGRlbGV0ZSB0aGlzLl91cGRhdGVkTGF5ZXJzW3RdLGRlbGV0ZSB0aGlzLl91cGRhdGVkUGFpbnRQcm9wc1t0XSxpLm9uUmVtb3ZlJiZpLm9uUmVtb3ZlKHRoaXMubWFwKSx0aGlzLl91cGRhdGVEcmFwZUZpcnN0TGF5ZXJzKCk7fWdldExheWVyKGUpe3JldHVybiB0aGlzLl9sYXllcnNbZV19aGFzTGF5ZXIoZSl7cmV0dXJuIGUgaW4gdGhpcy5fbGF5ZXJzfWhhc0xheWVyVHlwZShlKXtmb3IoY29uc3QgdCBpbiB0aGlzLl9sYXllcnMpaWYodGhpcy5fbGF5ZXJzW3RdLnR5cGU9PT1lKXJldHVybiAhMDtyZXR1cm4gITF9c2V0TGF5ZXJab29tUmFuZ2UodCxpLG8pe3RoaXMuX2NoZWNrTG9hZGVkKCk7Y29uc3Qgcj10aGlzLmdldExheWVyKHQpO3I/ci5taW56b29tPT09aSYmci5tYXh6b29tPT09b3x8KG51bGwhPWkmJihyLm1pbnpvb209aSksbnVsbCE9byYmKHIubWF4em9vbT1vKSx0aGlzLl91cGRhdGVMYXllcihyKSk6dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBUaGUgbGF5ZXIgJyR7dH0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGhhdmUgem9vbSBleHRlbnQuYCkpKTt9c2V0RmlsdGVyKGksbyxyPXt9KXt0aGlzLl9jaGVja0xvYWRlZCgpO2NvbnN0IG49dGhpcy5nZXRMYXllcihpKTtpZihuKXtpZighdChuLmZpbHRlcixvKSlyZXR1cm4gbnVsbD09bz8obi5maWx0ZXI9dm9pZCAwLHZvaWQgdGhpcy5fdXBkYXRlTGF5ZXIobikpOnZvaWQodGhpcy5fdmFsaWRhdGUoZS52YWxpZGF0ZUZpbHRlcixgbGF5ZXJzLiR7bi5pZH0uZmlsdGVyYCxvLHtsYXllclR5cGU6bi50eXBlfSxyKXx8KG4uZmlsdGVyPWUuY2xvbmUkMShvKSx0aGlzLl91cGRhdGVMYXllcihuKSkpfWVsc2UgdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBUaGUgbGF5ZXIgJyR7aX0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGJlIGZpbHRlcmVkLmApKSk7fWdldEZpbHRlcih0KXtjb25zdCBpPXRoaXMuZ2V0TGF5ZXIodCk7cmV0dXJuIGkmJmUuY2xvbmUkMShpLmZpbHRlcil9c2V0TGF5b3V0UHJvcGVydHkoaSxvLHIsbj17fSl7dGhpcy5fY2hlY2tMb2FkZWQoKTtjb25zdCBzPXRoaXMuZ2V0TGF5ZXIoaSk7cz90KHMuZ2V0TGF5b3V0UHJvcGVydHkobykscil8fChzLnNldExheW91dFByb3BlcnR5KG8scixuKSx0aGlzLl91cGRhdGVMYXllcihzKSk6dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBUaGUgbGF5ZXIgJyR7aX0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGJlIHN0eWxlZC5gKSkpO31nZXRMYXlvdXRQcm9wZXJ0eSh0LGkpe2NvbnN0IG89dGhpcy5nZXRMYXllcih0KTtpZihvKXJldHVybiBvLmdldExheW91dFByb3BlcnR5KGkpO3RoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihgVGhlIGxheWVyICcke3R9JyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWFwJ3Mgc3R5bGUuYCkpKTt9c2V0UGFpbnRQcm9wZXJ0eShpLG8scixuPXt9KXt0aGlzLl9jaGVja0xvYWRlZCgpO2NvbnN0IHM9dGhpcy5nZXRMYXllcihpKTtzP3Qocy5nZXRQYWludFByb3BlcnR5KG8pLHIpfHwocy5zZXRQYWludFByb3BlcnR5KG8scixuKSYmdGhpcy5fdXBkYXRlTGF5ZXIocyksdGhpcy5fY2hhbmdlZD0hMCx0aGlzLl91cGRhdGVkUGFpbnRQcm9wc1tpXT0hMCk6dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBUaGUgbGF5ZXIgJyR7aX0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGJlIHN0eWxlZC5gKSkpO31nZXRQYWludFByb3BlcnR5KGUsdCl7Y29uc3QgaT10aGlzLmdldExheWVyKGUpO3JldHVybiBpJiZpLmdldFBhaW50UHJvcGVydHkodCl9c2V0RmVhdHVyZVN0YXRlKHQsaSl7dGhpcy5fY2hlY2tMb2FkZWQoKTtjb25zdCBvPXQuc291cmNlLHI9dC5zb3VyY2VMYXllcixuPXRoaXMuZ2V0U291cmNlKG8pO2lmKCFuKXJldHVybiB2b2lkIHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihgVGhlIHNvdXJjZSAnJHtvfScgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG1hcCdzIHN0eWxlLmApKSk7Y29uc3Qgcz1uLnR5cGU7aWYoXCJnZW9qc29uXCI9PT1zJiZyKXJldHVybiB2b2lkIHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIkdlb0pTT04gc291cmNlcyBjYW5ub3QgaGF2ZSBhIHNvdXJjZUxheWVyIHBhcmFtZXRlci5cIikpKTtpZihcInZlY3RvclwiPT09cyYmIXIpcmV0dXJuIHZvaWQgdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKFwiVGhlIHNvdXJjZUxheWVyIHBhcmFtZXRlciBtdXN0IGJlIHByb3ZpZGVkIGZvciB2ZWN0b3Igc291cmNlIHR5cGVzLlwiKSkpO3ZvaWQgMD09PXQuaWQmJnRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZSBmZWF0dXJlIGlkIHBhcmFtZXRlciBtdXN0IGJlIHByb3ZpZGVkLlwiKSkpO2NvbnN0IGE9dGhpcy5fZ2V0U291cmNlQ2FjaGVzKG8pO2Zvcihjb25zdCBlIG9mIGEpZS5zZXRGZWF0dXJlU3RhdGUocix0LmlkLGkpO31yZW1vdmVGZWF0dXJlU3RhdGUodCxpKXt0aGlzLl9jaGVja0xvYWRlZCgpO2NvbnN0IG89dC5zb3VyY2Uscj10aGlzLmdldFNvdXJjZShvKTtpZighcilyZXR1cm4gdm9pZCB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYFRoZSBzb3VyY2UgJyR7b30nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZS5gKSkpO2NvbnN0IG49ci50eXBlLHM9XCJ2ZWN0b3JcIj09PW4/dC5zb3VyY2VMYXllcjp2b2lkIDA7aWYoXCJ2ZWN0b3JcIj09PW4mJiFzKXJldHVybiB2b2lkIHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZSBzb3VyY2VMYXllciBwYXJhbWV0ZXIgbXVzdCBiZSBwcm92aWRlZCBmb3IgdmVjdG9yIHNvdXJjZSB0eXBlcy5cIikpKTtpZihpJiZcInN0cmluZ1wiIT10eXBlb2YgdC5pZCYmXCJudW1iZXJcIiE9dHlwZW9mIHQuaWQpcmV0dXJuIHZvaWQgdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKFwiQSBmZWF0dXJlIGlkIGlzIHJlcXVpcmVkIHRvIHJlbW92ZSBpdHMgc3BlY2lmaWMgc3RhdGUgcHJvcGVydHkuXCIpKSk7Y29uc3QgYT10aGlzLl9nZXRTb3VyY2VDYWNoZXMobyk7Zm9yKGNvbnN0IGUgb2YgYSllLnJlbW92ZUZlYXR1cmVTdGF0ZShzLHQuaWQsaSk7fWdldEZlYXR1cmVTdGF0ZSh0KXt0aGlzLl9jaGVja0xvYWRlZCgpO2NvbnN0IGk9dC5zb3VyY2Usbz10LnNvdXJjZUxheWVyLHI9dGhpcy5nZXRTb3VyY2UoaSk7aWYocil7aWYoXCJ2ZWN0b3JcIiE9PXIudHlwZXx8bylyZXR1cm4gdm9pZCAwPT09dC5pZCYmdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKFwiVGhlIGZlYXR1cmUgaWQgcGFyYW1ldGVyIG11c3QgYmUgcHJvdmlkZWQuXCIpKSksdGhpcy5fZ2V0U291cmNlQ2FjaGVzKGkpWzBdLmdldEZlYXR1cmVTdGF0ZShvLHQuaWQpO3RoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIlRoZSBzb3VyY2VMYXllciBwYXJhbWV0ZXIgbXVzdCBiZSBwcm92aWRlZCBmb3IgdmVjdG9yIHNvdXJjZSB0eXBlcy5cIikpKTt9ZWxzZSB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYFRoZSBzb3VyY2UgJyR7aX0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZS5gKSkpO31nZXRUcmFuc2l0aW9uKCl7cmV0dXJuIGUuZXh0ZW5kKHtkdXJhdGlvbjozMDAsZGVsYXk6MH0sdGhpcy5zdHlsZXNoZWV0JiZ0aGlzLnN0eWxlc2hlZXQudHJhbnNpdGlvbil9c2VyaWFsaXplKCl7Y29uc3QgdD17fTtmb3IoY29uc3QgZSBpbiB0aGlzLl9zb3VyY2VDYWNoZXMpe2NvbnN0IGk9dGhpcy5fc291cmNlQ2FjaGVzW2VdLmdldFNvdXJjZSgpO3RbaS5pZF18fCh0W2kuaWRdPWkuc2VyaWFsaXplKCkpO31yZXR1cm4gZS5maWx0ZXJPYmplY3Qoe3ZlcnNpb246dGhpcy5zdHlsZXNoZWV0LnZlcnNpb24sbmFtZTp0aGlzLnN0eWxlc2hlZXQubmFtZSxtZXRhZGF0YTp0aGlzLnN0eWxlc2hlZXQubWV0YWRhdGEsbGlnaHQ6dGhpcy5zdHlsZXNoZWV0LmxpZ2h0LHRlcnJhaW46dGhpcy5nZXRUZXJyYWluKCl8fHZvaWQgMCxmb2c6dGhpcy5zdHlsZXNoZWV0LmZvZyxjZW50ZXI6dGhpcy5zdHlsZXNoZWV0LmNlbnRlcix6b29tOnRoaXMuc3R5bGVzaGVldC56b29tLGJlYXJpbmc6dGhpcy5zdHlsZXNoZWV0LmJlYXJpbmcscGl0Y2g6dGhpcy5zdHlsZXNoZWV0LnBpdGNoLHNwcml0ZTp0aGlzLnN0eWxlc2hlZXQuc3ByaXRlLGdseXBoczp0aGlzLnN0eWxlc2hlZXQuZ2x5cGhzLHRyYW5zaXRpb246dGhpcy5zdHlsZXNoZWV0LnRyYW5zaXRpb24scHJvamVjdGlvbjp0aGlzLnN0eWxlc2hlZXQucHJvamVjdGlvbixzb3VyY2VzOnQsbGF5ZXJzOnRoaXMuX3NlcmlhbGl6ZUxheWVycyh0aGlzLl9vcmRlcil9LChlPT52b2lkIDAhPT1lKSl9X3VwZGF0ZUxheWVyKGUpe3RoaXMuX3VwZGF0ZWRMYXllcnNbZS5pZF09ITA7Y29uc3QgdD10aGlzLl9nZXRMYXllclNvdXJjZUNhY2hlKGUpO2Uuc291cmNlJiYhdGhpcy5fdXBkYXRlZFNvdXJjZXNbZS5zb3VyY2VdJiZ0JiZcInJhc3RlclwiIT09dC5nZXRTb3VyY2UoKS50eXBlJiYodGhpcy5fdXBkYXRlZFNvdXJjZXNbZS5zb3VyY2VdPVwicmVsb2FkXCIsdC5wYXVzZSgpKSx0aGlzLl9jaGFuZ2VkPSEwLGUuaW52YWxpZGF0ZUNvbXBpbGVkRmlsdGVyKCk7fV9mbGF0dGVuQW5kU29ydFJlbmRlcmVkRmVhdHVyZXMoZSl7Y29uc3QgdD1lPT5cImZpbGwtZXh0cnVzaW9uXCI9PT10aGlzLl9sYXllcnNbZV0udHlwZSxpPXt9LG89W107Zm9yKGxldCByPXRoaXMuX29yZGVyLmxlbmd0aC0xO3I+PTA7ci0tKXtjb25zdCBuPXRoaXMuX29yZGVyW3JdO2lmKHQobikpe2lbbl09cjtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPXRbbl07aWYoZSlmb3IoY29uc3QgdCBvZiBlKW8ucHVzaCh0KTt9fX1vLnNvcnQoKChlLHQpPT50LmludGVyc2VjdGlvblotZS5pbnRlcnNlY3Rpb25aKSk7Y29uc3Qgcj1bXTtmb3IobGV0IG49dGhpcy5fb3JkZXIubGVuZ3RoLTE7bj49MDtuLS0pe2NvbnN0IHM9dGhpcy5fb3JkZXJbbl07aWYodChzKSlmb3IobGV0IGU9by5sZW5ndGgtMTtlPj0wO2UtLSl7Y29uc3QgdD1vW2VdLmZlYXR1cmU7aWYoaVt0LmxheWVyLmlkXTxuKWJyZWFrO3IucHVzaCh0KSxvLnBvcCgpO31lbHNlIGZvcihjb25zdCB0IG9mIGUpe2NvbnN0IGU9dFtzXTtpZihlKWZvcihjb25zdCB0IG9mIGUpci5wdXNoKHQuZmVhdHVyZSk7fX1yZXR1cm4gcn1xdWVyeVJlbmRlcmVkRmVhdHVyZXModCxpLG8pe2kmJmkuZmlsdGVyJiZ0aGlzLl92YWxpZGF0ZShlLnZhbGlkYXRlRmlsdGVyLFwicXVlcnlSZW5kZXJlZEZlYXR1cmVzLmZpbHRlclwiLGkuZmlsdGVyLG51bGwsaSk7Y29uc3Qgcj17fTtpZihpJiZpLmxheWVycyl7aWYoIUFycmF5LmlzQXJyYXkoaS5sYXllcnMpKXJldHVybiB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJwYXJhbWV0ZXJzLmxheWVycyBtdXN0IGJlIGFuIEFycmF5LlwiKSkpLFtdO2Zvcihjb25zdCB0IG9mIGkubGF5ZXJzKXtjb25zdCBpPXRoaXMuX2xheWVyc1t0XTtpZighaSlyZXR1cm4gdGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQobmV3IEVycm9yKGBUaGUgbGF5ZXIgJyR7dH0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXAncyBzdHlsZSBhbmQgY2Fubm90IGJlIHF1ZXJpZWQgZm9yIGZlYXR1cmVzLmApKSksW107cltpLnNvdXJjZV09ITA7fX1jb25zdCBuPVtdO2kuYXZhaWxhYmxlSW1hZ2VzPXRoaXMuX2F2YWlsYWJsZUltYWdlcztjb25zdCBzPWkmJmkubGF5ZXJzP2kubGF5ZXJzLnNvbWUoKGU9Pntjb25zdCB0PXRoaXMuZ2V0TGF5ZXIoZSk7cmV0dXJuIHQmJnQuaXMzRCgpfSkpOnRoaXMuaGFzM0RMYXllcnMoKSxhPUwuY3JlYXRlRnJvbVNjcmVlblBvaW50cyh0LG8pO2Zvcihjb25zdCBlIGluIHRoaXMuX3NvdXJjZUNhY2hlcyl7Y29uc3QgdD10aGlzLl9zb3VyY2VDYWNoZXNbZV0uZ2V0U291cmNlKCkuaWQ7aS5sYXllcnMmJiFyW3RdfHxuLnB1c2goQWUodGhpcy5fc291cmNlQ2FjaGVzW2VdLHRoaXMuX2xheWVycyx0aGlzLl9zZXJpYWxpemVkTGF5ZXJzLGEsaSxvLHMsISF0aGlzLm1hcC5fc2hvd1F1ZXJ5R2VvbWV0cnkpKTt9cmV0dXJuIHRoaXMucGxhY2VtZW50JiZuLnB1c2goZnVuY3Rpb24oZSx0LGksbyxyLG4scyl7Y29uc3QgYT17fSxsPW4ucXVlcnlSZW5kZXJlZFN5bWJvbHMobyksYz1bXTtmb3IoY29uc3QgZSBvZiBPYmplY3Qua2V5cyhsKS5tYXAoTnVtYmVyKSljLnB1c2goc1tlXSk7Yy5zb3J0KFJlKTtmb3IoY29uc3QgaSBvZiBjKXtjb25zdCBvPWkuZmVhdHVyZUluZGV4Lmxvb2t1cFN5bWJvbEZlYXR1cmVzKGxbaS5idWNrZXRJbnN0YW5jZUlkXSx0LGkuYnVja2V0SW5kZXgsaS5zb3VyY2VMYXllckluZGV4LHIuZmlsdGVyLHIubGF5ZXJzLHIuYXZhaWxhYmxlSW1hZ2VzLGUpO2Zvcihjb25zdCBlIGluIG8pe2NvbnN0IHQ9YVtlXT1hW2VdfHxbXSxyPW9bZV07ci5zb3J0KCgoZSx0KT0+e2NvbnN0IG89aS5mZWF0dXJlU29ydE9yZGVyO2lmKG8pe2NvbnN0IGk9by5pbmRleE9mKGUuZmVhdHVyZUluZGV4KTtyZXR1cm4gby5pbmRleE9mKHQuZmVhdHVyZUluZGV4KS1pfXJldHVybiB0LmZlYXR1cmVJbmRleC1lLmZlYXR1cmVJbmRleH0pKTtmb3IoY29uc3QgZSBvZiByKXQucHVzaChlKTt9fWZvcihjb25zdCB0IGluIGEpYVt0XS5mb3JFYWNoKChvPT57Y29uc3Qgcj1vLmZlYXR1cmUsbj1pKGVbdF0pO2lmKCFuKXJldHVybjtjb25zdCBzPW4uZ2V0RmVhdHVyZVN0YXRlKHIubGF5ZXJbXCJzb3VyY2UtbGF5ZXJcIl0sci5pZCk7ci5zb3VyY2U9ci5sYXllci5zb3VyY2Usci5sYXllcltcInNvdXJjZS1sYXllclwiXSYmKHIuc291cmNlTGF5ZXI9ci5sYXllcltcInNvdXJjZS1sYXllclwiXSksci5zdGF0ZT1zO30pKTtyZXR1cm4gYX0odGhpcy5fbGF5ZXJzLHRoaXMuX3NlcmlhbGl6ZWRMYXllcnMsdGhpcy5fZ2V0TGF5ZXJTb3VyY2VDYWNoZS5iaW5kKHRoaXMpLGEuc2NyZWVuR2VvbWV0cnksaSx0aGlzLnBsYWNlbWVudC5jb2xsaXNpb25JbmRleCx0aGlzLnBsYWNlbWVudC5yZXRhaW5lZFF1ZXJ5RGF0YSkpLHRoaXMuX2ZsYXR0ZW5BbmRTb3J0UmVuZGVyZWRGZWF0dXJlcyhuKX1xdWVyeVNvdXJjZUZlYXR1cmVzKHQsaSl7aSYmaS5maWx0ZXImJnRoaXMuX3ZhbGlkYXRlKGUudmFsaWRhdGVGaWx0ZXIsXCJxdWVyeVNvdXJjZUZlYXR1cmVzLmZpbHRlclwiLGkuZmlsdGVyLG51bGwsaSk7Y29uc3Qgbz10aGlzLl9nZXRTb3VyY2VDYWNoZXModCk7bGV0IHI9W107Zm9yKGNvbnN0IGUgb2YgbylyPXIuY29uY2F0KHplKGUsaSkpO3JldHVybiByfWFkZFNvdXJjZVR5cGUoZSx0LGkpe3JldHVybiBLdC5nZXRTb3VyY2VUeXBlKGUpP2kobmV3IEVycm9yKGBBIHNvdXJjZSB0eXBlIGNhbGxlZCBcIiR7ZX1cIiBhbHJlYWR5IGV4aXN0cy5gKSk6KEt0LnNldFNvdXJjZVR5cGUoZSx0KSx0LndvcmtlclNvdXJjZVVSTD92b2lkIHRoaXMuZGlzcGF0Y2hlci5icm9hZGNhc3QoXCJsb2FkV29ya2VyU291cmNlXCIse25hbWU6ZSx1cmw6dC53b3JrZXJTb3VyY2VVUkx9LGkpOmkobnVsbCxudWxsKSl9Z2V0TGlnaHQoKXtyZXR1cm4gdGhpcy5saWdodC5nZXRMaWdodCgpfXNldExpZ2h0KGUsaT17fSl7dGhpcy5fY2hlY2tMb2FkZWQoKTtjb25zdCBvPXRoaXMubGlnaHQuZ2V0TGlnaHQoKTtsZXQgcj0hMTtmb3IoY29uc3QgaSBpbiBlKWlmKCF0KGVbaV0sb1tpXSkpe3I9ITA7YnJlYWt9aWYoIXIpcmV0dXJuO2NvbnN0IG49dGhpcy5fc2V0VHJhbnNpdGlvblBhcmFtZXRlcnMoe2R1cmF0aW9uOjMwMCxkZWxheTowfSk7dGhpcy5saWdodC5zZXRMaWdodChlLGkpLHRoaXMubGlnaHQudXBkYXRlVHJhbnNpdGlvbnMobik7fWdldFRlcnJhaW4oKXtyZXR1cm4gdGhpcy50ZXJyYWluJiYxPT09dGhpcy50ZXJyYWluLmRyYXBlUmVuZGVyTW9kZT90aGlzLnRlcnJhaW4uZ2V0KCk6bnVsbH1zZXRUZXJyYWluRm9yRHJhcGluZygpe3RoaXMuc2V0VGVycmFpbih7c291cmNlOlwiXCIsZXhhZ2dlcmF0aW9uOjB9LDApO31zZXRUZXJyYWluKGksbz0xKXtpZih0aGlzLl9jaGVja0xvYWRlZCgpLCFpKXJldHVybiBkZWxldGUgdGhpcy50ZXJyYWluLGRlbGV0ZSB0aGlzLnN0eWxlc2hlZXQudGVycmFpbix0aGlzLmRpc3BhdGNoZXIuYnJvYWRjYXN0KFwiZW5hYmxlVGVycmFpblwiLCExKSx0aGlzLl9mb3JjZTNETGF5ZXJVcGRhdGUoKSx2b2lkKHRoaXMuX21hcmtlcnNOZWVkVXBkYXRlPSEwKTtsZXQgcj1pO2lmKDE9PT1vKXtpZihcIm9iamVjdFwiPT10eXBlb2Ygci5zb3VyY2Upe2NvbnN0IHQ9XCJ0ZXJyYWluLWRlbS1zcmNcIjt0aGlzLmFkZFNvdXJjZSh0LHIuc291cmNlKSxyPWUuY2xvbmUkMShyKSxyPWUuZXh0ZW5kKHIse3NvdXJjZTp0fSk7fWlmKHRoaXMuX3ZhbGlkYXRlKGUudmFsaWRhdGVUZXJyYWluLFwidGVycmFpblwiLHIpKXJldHVybn1pZighdGhpcy50ZXJyYWlufHx0aGlzLnRlcnJhaW4mJm8hPT10aGlzLnRlcnJhaW4uZHJhcGVSZW5kZXJNb2RlKXtpZighcilyZXR1cm47dGhpcy5fY3JlYXRlVGVycmFpbihyLG8pO31lbHNlIHtjb25zdCBpPXRoaXMudGVycmFpbixvPWkuZ2V0KCk7Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LmtleXMoZS5zcGVjLnRlcnJhaW4pKSFyLmhhc093blByb3BlcnR5KHQpJiZlLnNwZWMudGVycmFpblt0XS5kZWZhdWx0JiYoclt0XT1lLnNwZWMudGVycmFpblt0XS5kZWZhdWx0KTtmb3IoY29uc3QgZSBpbiByKWlmKCF0KHJbZV0sb1tlXSkpe2kuc2V0KHIpLHRoaXMuc3R5bGVzaGVldC50ZXJyYWluPXI7Y29uc3QgZT10aGlzLl9zZXRUcmFuc2l0aW9uUGFyYW1ldGVycyh7ZHVyYXRpb246MH0pO2kudXBkYXRlVHJhbnNpdGlvbnMoZSk7YnJlYWt9fXRoaXMuX3VwZGF0ZURyYXBlRmlyc3RMYXllcnMoKSx0aGlzLl9tYXJrZXJzTmVlZFVwZGF0ZT0hMDt9X2NyZWF0ZUZvZyhlKXtjb25zdCB0PXRoaXMuZm9nPW5ldyBQKGUsdGhpcy5tYXAudHJhbnNmb3JtKTt0aGlzLnN0eWxlc2hlZXQuZm9nPWU7Y29uc3QgaT10aGlzLl9zZXRUcmFuc2l0aW9uUGFyYW1ldGVycyh7ZHVyYXRpb246MH0pO3QudXBkYXRlVHJhbnNpdGlvbnMoaSk7fV91cGRhdGVNYXJrZXJzT3BhY2l0eSgpezAhPT10aGlzLm1hcC5fbWFya2Vycy5sZW5ndGgmJnRoaXMubWFwLl9yZXF1ZXN0RG9tVGFzaygoKCk9Pntmb3IoY29uc3QgZSBvZiB0aGlzLm1hcC5fbWFya2VycyllLl9ldmFsdWF0ZU9wYWNpdHkoKTt9KSk7fWdldEZvZygpe3JldHVybiB0aGlzLmZvZz90aGlzLmZvZy5nZXQoKTpudWxsfXNldEZvZyhlKXtpZih0aGlzLl9jaGVja0xvYWRlZCgpLCFlKXJldHVybiBkZWxldGUgdGhpcy5mb2csZGVsZXRlIHRoaXMuc3R5bGVzaGVldC5mb2csdm9pZCh0aGlzLl9tYXJrZXJzTmVlZFVwZGF0ZT0hMCk7aWYodGhpcy5mb2cpe2NvbnN0IGk9dGhpcy5mb2csbz1pLmdldCgpOzA9PT1PYmplY3Qua2V5cyhlKS5sZW5ndGgmJmkuc2V0KGUpO2Zvcihjb25zdCByIGluIGUpaWYoIXQoZVtyXSxvW3JdKSl7aS5zZXQoZSksdGhpcy5zdHlsZXNoZWV0LmZvZz1lO2NvbnN0IHQ9dGhpcy5fc2V0VHJhbnNpdGlvblBhcmFtZXRlcnMoe2R1cmF0aW9uOjB9KTtpLnVwZGF0ZVRyYW5zaXRpb25zKHQpO2JyZWFrfX1lbHNlIHRoaXMuX2NyZWF0ZUZvZyhlKTt0aGlzLl9tYXJrZXJzTmVlZFVwZGF0ZT0hMDt9X3NldFRyYW5zaXRpb25QYXJhbWV0ZXJzKHQpe3JldHVybiB7bm93OmUuZXhwb3J0ZWQubm93KCksdHJhbnNpdGlvbjplLmV4dGVuZCh0LHRoaXMuc3R5bGVzaGVldC50cmFuc2l0aW9uKX19X3VwZGF0ZURyYXBlRmlyc3RMYXllcnMoKXtpZighdGhpcy5tYXAuX29wdGltaXplRm9yVGVycmFpbnx8IXRoaXMudGVycmFpbilyZXR1cm47Y29uc3QgZT10aGlzLl9vcmRlci5maWx0ZXIoKGU9PnRoaXMuaXNMYXllckRyYXBlZCh0aGlzLl9sYXllcnNbZV0pKSksdD10aGlzLl9vcmRlci5maWx0ZXIoKGU9PiF0aGlzLmlzTGF5ZXJEcmFwZWQodGhpcy5fbGF5ZXJzW2VdKSkpO3RoaXMuX2RyYXBlZEZpcnN0T3JkZXI9W10sdGhpcy5fZHJhcGVkRmlyc3RPcmRlci5wdXNoKC4uLmUpLHRoaXMuX2RyYXBlZEZpcnN0T3JkZXIucHVzaCguLi50KTt9X2NyZWF0ZVRlcnJhaW4oZSx0KXtjb25zdCBpPXRoaXMudGVycmFpbj1uZXcgRShlLHQpO3RoaXMuc3R5bGVzaGVldC50ZXJyYWluPWUsdGhpcy5kaXNwYXRjaGVyLmJyb2FkY2FzdChcImVuYWJsZVRlcnJhaW5cIiwhdGhpcy50ZXJyYWluU2V0Rm9yRHJhcGluZ09ubHkoKSksdGhpcy5fZm9yY2UzRExheWVyVXBkYXRlKCk7Y29uc3Qgbz10aGlzLl9zZXRUcmFuc2l0aW9uUGFyYW1ldGVycyh7ZHVyYXRpb246MH0pO2kudXBkYXRlVHJhbnNpdGlvbnMobyk7fV9mb3JjZTNETGF5ZXJVcGRhdGUoKXtmb3IoY29uc3QgZSBpbiB0aGlzLl9sYXllcnMpe2NvbnN0IHQ9dGhpcy5fbGF5ZXJzW2VdO1wiZmlsbC1leHRydXNpb25cIj09PXQudHlwZSYmdGhpcy5fdXBkYXRlTGF5ZXIodCk7fX1fZm9yY2VTeW1ib2xMYXllclVwZGF0ZSgpe2Zvcihjb25zdCBlIGluIHRoaXMuX2xheWVycyl7Y29uc3QgdD10aGlzLl9sYXllcnNbZV07XCJzeW1ib2xcIj09PXQudHlwZSYmdGhpcy5fdXBkYXRlTGF5ZXIodCk7fX1fdmFsaWRhdGUodCxpLG8scixuPXt9KXtyZXR1cm4gKCFufHwhMSE9PW4udmFsaWRhdGUpJiZYdCh0aGlzLHQuY2FsbChlLnZhbGlkYXRlU3R5bGUsZS5leHRlbmQoe2tleTppLHN0eWxlOnRoaXMuc2VyaWFsaXplKCksdmFsdWU6byxzdHlsZVNwZWM6ZS5zcGVjfSxyKSkpfV9yZW1vdmUoKXt0aGlzLl9yZXF1ZXN0JiYodGhpcy5fcmVxdWVzdC5jYW5jZWwoKSx0aGlzLl9yZXF1ZXN0PW51bGwpLHRoaXMuX3Nwcml0ZVJlcXVlc3QmJih0aGlzLl9zcHJpdGVSZXF1ZXN0LmNhbmNlbCgpLHRoaXMuX3Nwcml0ZVJlcXVlc3Q9bnVsbCksZS5ldmVudGVkLm9mZihcInBsdWdpblN0YXRlQ2hhbmdlXCIsdGhpcy5fcnRsVGV4dFBsdWdpbkNhbGxiYWNrKTtmb3IoY29uc3QgZSBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW2VdLnNldEV2ZW50ZWRQYXJlbnQobnVsbCk7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fc291cmNlQ2FjaGVzKXRoaXMuX3NvdXJjZUNhY2hlc1tlXS5jbGVhclRpbGVzKCksdGhpcy5fc291cmNlQ2FjaGVzW2VdLnNldEV2ZW50ZWRQYXJlbnQobnVsbCk7dGhpcy5pbWFnZU1hbmFnZXIuc2V0RXZlbnRlZFBhcmVudChudWxsKSx0aGlzLnNldEV2ZW50ZWRQYXJlbnQobnVsbCksdGhpcy5kaXNwYXRjaGVyLnJlbW92ZSgpO31fY2xlYXJTb3VyY2UoZSl7Y29uc3QgdD10aGlzLl9nZXRTb3VyY2VDYWNoZXMoZSk7Zm9yKGNvbnN0IGUgb2YgdCllLmNsZWFyVGlsZXMoKTt9X3JlbG9hZFNvdXJjZShlKXtjb25zdCB0PXRoaXMuX2dldFNvdXJjZUNhY2hlcyhlKTtmb3IoY29uc3QgZSBvZiB0KWUucmVzdW1lKCksZS5yZWxvYWQoKTt9X3JlbG9hZFNvdXJjZXMoKXtmb3IoY29uc3QgZSBvZiB0aGlzLl9nZXRTb3VyY2VzKCkpZS5yZWxvYWQmJmUucmVsb2FkKCk7fV91cGRhdGVTb3VyY2VzKGUpe2Zvcihjb25zdCB0IGluIHRoaXMuX3NvdXJjZUNhY2hlcyl0aGlzLl9zb3VyY2VDYWNoZXNbdF0udXBkYXRlKGUpO31fZ2VuZXJhdGVDb2xsaXNpb25Cb3hlcygpe2Zvcihjb25zdCBlIGluIHRoaXMuX3NvdXJjZUNhY2hlcyl7Y29uc3QgdD10aGlzLl9zb3VyY2VDYWNoZXNbZV07dC5yZXN1bWUoKSx0LnJlbG9hZCgpO319X3VwZGF0ZVBsYWNlbWVudCh0LGksbyxyLG49ITEpe2xldCBzPSExLGE9ITE7Y29uc3QgbD17fTtmb3IoY29uc3QgZSBvZiB0aGlzLl9vcmRlcil7Y29uc3QgaT10aGlzLl9sYXllcnNbZV07aWYoXCJzeW1ib2xcIiE9PWkudHlwZSljb250aW51ZTtpZighbFtpLnNvdXJjZV0pe2NvbnN0IGU9dGhpcy5fZ2V0TGF5ZXJTb3VyY2VDYWNoZShpKTtpZighZSljb250aW51ZTtsW2kuc291cmNlXT1lLmdldFJlbmRlcmFibGVJZHMoITApLm1hcCgodD0+ZS5nZXRUaWxlQnlJRCh0KSkpLnNvcnQoKChlLHQpPT50LnRpbGVJRC5vdmVyc2NhbGVkWi1lLnRpbGVJRC5vdmVyc2NhbGVkWnx8KGUudGlsZUlELmlzTGVzc1RoYW4odC50aWxlSUQpPy0xOjEpKSk7fWNvbnN0IG89dGhpcy5jcm9zc1RpbGVTeW1ib2xJbmRleC5hZGRMYXllcihpLGxbaS5zb3VyY2VdLHQuY2VudGVyLmxuZyx0LnByb2plY3Rpb24pO3M9c3x8bzt9aWYodGhpcy5jcm9zc1RpbGVTeW1ib2xJbmRleC5wcnVuZVVudXNlZExheWVycyh0aGlzLl9vcmRlciksbj1ufHx0aGlzLl9sYXllck9yZGVyQ2hhbmdlZHx8MD09PW8sdGhpcy5fbGF5ZXJPcmRlckNoYW5nZWQmJnRoaXMuZmlyZShuZXcgZS5FdmVudChcIm5ld29yZGVyXCIpKSwobnx8IXRoaXMucGF1c2VhYmxlUGxhY2VtZW50fHx0aGlzLnBhdXNlYWJsZVBsYWNlbWVudC5pc0RvbmUoKSYmIXRoaXMucGxhY2VtZW50LnN0aWxsUmVjZW50KGUuZXhwb3J0ZWQubm93KCksdC56b29tKSkmJih0aGlzLnBhdXNlYWJsZVBsYWNlbWVudD1uZXcgTnQodCx0aGlzLl9vcmRlcixuLGksbyxyLHRoaXMucGxhY2VtZW50LHRoaXMuZm9nJiZ0LnByb2plY3Rpb24uc3VwcG9ydHNGb2c/dGhpcy5mb2cuc3RhdGU6bnVsbCksdGhpcy5fbGF5ZXJPcmRlckNoYW5nZWQ9ITEpLHRoaXMucGF1c2VhYmxlUGxhY2VtZW50LmlzRG9uZSgpP3RoaXMucGxhY2VtZW50LnNldFN0YWxlKCk6KHRoaXMucGF1c2VhYmxlUGxhY2VtZW50LmNvbnRpbnVlUGxhY2VtZW50KHRoaXMuX29yZGVyLHRoaXMuX2xheWVycyxsKSx0aGlzLnBhdXNlYWJsZVBsYWNlbWVudC5pc0RvbmUoKSYmKHRoaXMucGxhY2VtZW50PXRoaXMucGF1c2VhYmxlUGxhY2VtZW50LmNvbW1pdChlLmV4cG9ydGVkLm5vdygpKSxhPSEwKSxzJiZ0aGlzLnBhdXNlYWJsZVBsYWNlbWVudC5wbGFjZW1lbnQuc2V0U3RhbGUoKSksYXx8cylmb3IoY29uc3QgZSBvZiB0aGlzLl9vcmRlcil7Y29uc3QgdD10aGlzLl9sYXllcnNbZV07XCJzeW1ib2xcIj09PXQudHlwZSYmdGhpcy5wbGFjZW1lbnQudXBkYXRlTGF5ZXJPcGFjaXRpZXModCxsW3Quc291cmNlXSk7fXJldHVybiAhdGhpcy5wYXVzZWFibGVQbGFjZW1lbnQuaXNEb25lKCl8fHRoaXMucGxhY2VtZW50Lmhhc1RyYW5zaXRpb25zKGUuZXhwb3J0ZWQubm93KCkpfV9yZWxlYXNlU3ltYm9sRmFkZVRpbGVzKCl7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fc291cmNlQ2FjaGVzKXRoaXMuX3NvdXJjZUNhY2hlc1tlXS5yZWxlYXNlU3ltYm9sRmFkZVRpbGVzKCk7fWdldEltYWdlcyhlLHQsaSl7dGhpcy5pbWFnZU1hbmFnZXIuZ2V0SW1hZ2VzKHQuaWNvbnMsaSksdGhpcy5fdXBkYXRlVGlsZXNGb3JDaGFuZ2VkSW1hZ2VzKCk7Y29uc3Qgbz1lPT57ZSYmZS5zZXREZXBlbmRlbmNpZXModC50aWxlSUQua2V5LHQudHlwZSx0Lmljb25zKTt9O28odGhpcy5fb3RoZXJTb3VyY2VDYWNoZXNbdC5zb3VyY2VdKSxvKHRoaXMuX3N5bWJvbFNvdXJjZUNhY2hlc1t0LnNvdXJjZV0pO31nZXRHbHlwaHMoZSx0LGkpe3RoaXMuZ2x5cGhNYW5hZ2VyLmdldEdseXBocyh0LnN0YWNrcyxpKTt9Z2V0UmVzb3VyY2UodCxpLG8pe3JldHVybiBlLm1ha2VSZXF1ZXN0KGksbyl9X2dldFNvdXJjZUNhY2hlKGUpe3JldHVybiB0aGlzLl9vdGhlclNvdXJjZUNhY2hlc1tlXX1fZ2V0TGF5ZXJTb3VyY2VDYWNoZShlKXtyZXR1cm4gXCJzeW1ib2xcIj09PWUudHlwZT90aGlzLl9zeW1ib2xTb3VyY2VDYWNoZXNbZS5zb3VyY2VdOnRoaXMuX290aGVyU291cmNlQ2FjaGVzW2Uuc291cmNlXX1fZ2V0U291cmNlQ2FjaGVzKGUpe2NvbnN0IHQ9W107cmV0dXJuIHRoaXMuX290aGVyU291cmNlQ2FjaGVzW2VdJiZ0LnB1c2godGhpcy5fb3RoZXJTb3VyY2VDYWNoZXNbZV0pLHRoaXMuX3N5bWJvbFNvdXJjZUNhY2hlc1tlXSYmdC5wdXNoKHRoaXMuX3N5bWJvbFNvdXJjZUNhY2hlc1tlXSksdH1faXNTb3VyY2VDYWNoZUxvYWRlZCh0KXtjb25zdCBpPXRoaXMuX2dldFNvdXJjZUNhY2hlcyh0KTtyZXR1cm4gMD09PWkubGVuZ3RoPyh0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIHNvdXJjZSB3aXRoIElEICcke3R9J2ApKSksITEpOmkuZXZlcnkoKGU9PmUubG9hZGVkKCkpKX1oYXMzRExheWVycygpe3JldHVybiB0aGlzLl9udW0zRExheWVycz4wfWhhc1N5bWJvbExheWVycygpe3JldHVybiB0aGlzLl9udW1TeW1ib2xMYXllcnM+MH1oYXNDaXJjbGVMYXllcnMoKXtyZXR1cm4gdGhpcy5fbnVtQ2lyY2xlTGF5ZXJzPjB9X2NsZWFyV29ya2VyQ2FjaGVzKCl7dGhpcy5kaXNwYXRjaGVyLmJyb2FkY2FzdChcImNsZWFyQ2FjaGVzXCIpO31kZXN0cm95KCl7dGhpcy5fY2xlYXJXb3JrZXJDYWNoZXMoKSx0aGlzLnRlcnJhaW5TZXRGb3JEcmFwaW5nT25seSgpJiYoZGVsZXRlIHRoaXMudGVycmFpbixkZWxldGUgdGhpcy5zdHlsZXNoZWV0LnRlcnJhaW4pO319S3QuZ2V0U291cmNlVHlwZT1mdW5jdGlvbihlKXtyZXR1cm4gU2VbZV19LEt0LnNldFNvdXJjZVR5cGU9ZnVuY3Rpb24oZSx0KXtTZVtlXT10O30sS3QucmVnaXN0ZXJGb3JQbHVnaW5TdGF0ZUNoYW5nZT1lLnJlZ2lzdGVyRm9yUGx1Z2luU3RhdGVDaGFuZ2U7dmFyIEp0PVwiXFxuI2RlZmluZSBFUFNJTE9OIDAuMDAwMDAwMVxcbiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1ODk3OTNcXG4jZGVmaW5lIEVYVEVOVCA4MTkyLjBcXG4jZGVmaW5lIEhBTEZfUEkgUEkvMi4wXFxuI2RlZmluZSBRVUFSVEVSX1BJIFBJLzQuMFxcbiNkZWZpbmUgUkFEX1RPX0RFRyAxODAuMC9QSVxcbiNkZWZpbmUgREVHX1RPX1JBRCBQSS8xODAuMFxcbiNkZWZpbmUgR0xPQkVfUkFESVVTIEVYVEVOVC9QSS8yLjBcIixRdD1cImF0dHJpYnV0ZSBoaWdocCB2ZWMzIGFfcG9zXzNmO3VuaWZvcm0gbG93cCBtYXQ0IHVfbWF0cml4O3ZhcnlpbmcgaGlnaHAgdmVjMyB2X3V2O3ZvaWQgbWFpbigpIHtjb25zdCBtYXQzIGhhbGZfbmVnX3BpX2Fyb3VuZF94PW1hdDMoMS4wLDAuMCwgMC4wLDAuMCwwLjAsLTEuMCwwLjAsMS4wLCAwLjApO3ZfdXY9aGFsZl9uZWdfcGlfYXJvdW5kX3gqYV9wb3NfM2Y7dmVjNCBwb3M9dV9tYXRyaXgqdmVjNChhX3Bvc18zZiwxLjApO2dsX1Bvc2l0aW9uPXBvcy54eXd3O31cIixlaT1cIlxcbiNkZWZpbmUgRUxFVkFUSU9OX1NDQUxFIDcuMFxcbiNkZWZpbmUgRUxFVkFUSU9OX09GRlNFVCA0NTAuMFxcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG51bmlmb3JtIHZlYzMgdV90aWxlX3RsX3VwO3VuaWZvcm0gdmVjMyB1X3RpbGVfdHJfdXA7dW5pZm9ybSB2ZWMzIHVfdGlsZV9icl91cDt1bmlmb3JtIHZlYzMgdV90aWxlX2JsX3VwO3VuaWZvcm0gZmxvYXQgdV90aWxlX3VwX3NjYWxlO3ZlYzMgZWxldmF0aW9uVmVjdG9yKHZlYzIgcG9zKSB7dmVjMiB1dj1wb3MvRVhURU5UO3ZlYzMgdXA9bm9ybWFsaXplKG1peChcXG5taXgodV90aWxlX3RsX3VwLHVfdGlsZV90cl91cCx1di54eHgpLG1peCh1X3RpbGVfYmxfdXAsdV90aWxlX2JyX3VwLHV2Lnh4eCksdXYueXl5KSk7cmV0dXJuIHVwKnVfdGlsZV91cF9zY2FsZTt9XFxuI2Vsc2VcXG52ZWMzIGVsZXZhdGlvblZlY3Rvcih2ZWMyIHBvcykgeyByZXR1cm4gdmVjMygwLDAsMSk7IH1cXG4jZW5kaWZcXG5jb25zdCBmbG9hdCBza2lydE9mZnNldD0yNDU3NS4wO3ZlYzMgZGVjb21wb3NlVG9Qb3NBbmRTa2lydCh2ZWMyIHBvc1dpdGhDb21wb3NlZFNraXJ0KVxcbntmbG9hdCBza2lydD1mbG9hdChwb3NXaXRoQ29tcG9zZWRTa2lydC54ID49c2tpcnRPZmZzZXQpO3ZlYzIgcG9zPXBvc1dpdGhDb21wb3NlZFNraXJ0LXZlYzIoc2tpcnQqc2tpcnRPZmZzZXQsMC4wKTtyZXR1cm4gdmVjMyhwb3Msc2tpcnQpO31cXG4jaWZkZWYgVEVSUkFJTlxcbiNpZmRlZiBURVJSQUlOX0RFTV9GTE9BVF9GT1JNQVRcXG51bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCB1X2RlbTt1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCB1X2RlbV9wcmV2O1xcbiNlbHNlXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9kZW07dW5pZm9ybSBzYW1wbGVyMkQgdV9kZW1fcHJldjtcXG4jZW5kaWZcXG51bmlmb3JtIHZlYzQgdV9kZW1fdW5wYWNrO3VuaWZvcm0gdmVjMiB1X2RlbV90bDt1bmlmb3JtIHZlYzIgdV9kZW1fdGxfcHJldjt1bmlmb3JtIGZsb2F0IHVfZGVtX3NjYWxlO3VuaWZvcm0gZmxvYXQgdV9kZW1fc2NhbGVfcHJldjt1bmlmb3JtIGZsb2F0IHVfZGVtX3NpemU7dW5pZm9ybSBmbG9hdCB1X2RlbV9sZXJwO3VuaWZvcm0gZmxvYXQgdV9leGFnZ2VyYXRpb247dW5pZm9ybSBmbG9hdCB1X21ldGVyX3RvX2RlbTt1bmlmb3JtIG1hdDQgdV9sYWJlbF9wbGFuZV9tYXRyaXhfaW52O3VuaWZvcm0gc2FtcGxlcjJEIHVfZGVwdGg7dW5pZm9ybSB2ZWMyIHVfZGVwdGhfc2l6ZV9pbnY7dmVjNCB0aWxlVXZUb0RlbVNhbXBsZSh2ZWMyIHV2LGZsb2F0IGRlbV9zaXplLGZsb2F0IGRlbV9zY2FsZSx2ZWMyIGRlbV90bCkge3ZlYzIgcG9zPWRlbV9zaXplKih1dipkZW1fc2NhbGUrZGVtX3RsKSsxLjA7dmVjMiBmPWZyYWN0KHBvcyk7cmV0dXJuIHZlYzQoKHBvcy1mKzAuNSkvKGRlbV9zaXplKzIuMCksZik7fWZsb2F0IGRlY29kZUVsZXZhdGlvbih2ZWM0IHYpIHtyZXR1cm4gZG90KHZlYzQodi54eXoqMjU1LjAsLTEuMCksdV9kZW1fdW5wYWNrKTt9ZmxvYXQgY3VycmVudEVsZXZhdGlvbih2ZWMyIGFwb3MpIHtcXG4jaWZkZWYgVEVSUkFJTl9ERU1fRkxPQVRfRk9STUFUXFxudmVjMiBwb3M9KHVfZGVtX3NpemUqKGFwb3MvODE5Mi4wKnVfZGVtX3NjYWxlK3VfZGVtX3RsKSsxLjUpLyh1X2RlbV9zaXplKzIuMCk7cmV0dXJuIHVfZXhhZ2dlcmF0aW9uKnRleHR1cmUyRCh1X2RlbSxwb3MpLmE7XFxuI2Vsc2VcXG5mbG9hdCBkZD0xLjAvKHVfZGVtX3NpemUrMi4wKTt2ZWM0IHI9dGlsZVV2VG9EZW1TYW1wbGUoYXBvcy84MTkyLjAsdV9kZW1fc2l6ZSx1X2RlbV9zY2FsZSx1X2RlbV90bCk7dmVjMiBwb3M9ci54eTt2ZWMyIGY9ci56dztmbG9hdCB0bD1kZWNvZGVFbGV2YXRpb24odGV4dHVyZTJEKHVfZGVtLHBvcykpO1xcbiNpZmRlZiBURVJSQUlOX0RFTV9ORUFSRVNUX0ZJTFRFUlxcbnJldHVybiB1X2V4YWdnZXJhdGlvbip0bDtcXG4jZW5kaWZcXG5mbG9hdCB0cj1kZWNvZGVFbGV2YXRpb24odGV4dHVyZTJEKHVfZGVtLHBvcyt2ZWMyKGRkLDAuMCkpKTtmbG9hdCBibD1kZWNvZGVFbGV2YXRpb24odGV4dHVyZTJEKHVfZGVtLHBvcyt2ZWMyKDAuMCxkZCkpKTtmbG9hdCBicj1kZWNvZGVFbGV2YXRpb24odGV4dHVyZTJEKHVfZGVtLHBvcyt2ZWMyKGRkLGRkKSkpO3JldHVybiB1X2V4YWdnZXJhdGlvbiptaXgobWl4KHRsLHRyLGYueCksbWl4KGJsLGJyLGYueCksZi55KTtcXG4jZW5kaWZcXG59ZmxvYXQgcHJldkVsZXZhdGlvbih2ZWMyIGFwb3MpIHtcXG4jaWZkZWYgVEVSUkFJTl9ERU1fRkxPQVRfRk9STUFUXFxudmVjMiBwb3M9KHVfZGVtX3NpemUqKGFwb3MvODE5Mi4wKnVfZGVtX3NjYWxlX3ByZXYrdV9kZW1fdGxfcHJldikrMS41KS8odV9kZW1fc2l6ZSsyLjApO3JldHVybiB1X2V4YWdnZXJhdGlvbip0ZXh0dXJlMkQodV9kZW1fcHJldixwb3MpLmE7XFxuI2Vsc2VcXG5mbG9hdCBkZD0xLjAvKHVfZGVtX3NpemUrMi4wKTt2ZWM0IHI9dGlsZVV2VG9EZW1TYW1wbGUoYXBvcy84MTkyLjAsdV9kZW1fc2l6ZSx1X2RlbV9zY2FsZV9wcmV2LHVfZGVtX3RsX3ByZXYpO3ZlYzIgcG9zPXIueHk7dmVjMiBmPXIuenc7ZmxvYXQgdGw9ZGVjb2RlRWxldmF0aW9uKHRleHR1cmUyRCh1X2RlbV9wcmV2LHBvcykpO2Zsb2F0IHRyPWRlY29kZUVsZXZhdGlvbih0ZXh0dXJlMkQodV9kZW1fcHJldixwb3MrdmVjMihkZCwwLjApKSk7ZmxvYXQgYmw9ZGVjb2RlRWxldmF0aW9uKHRleHR1cmUyRCh1X2RlbV9wcmV2LHBvcyt2ZWMyKDAuMCxkZCkpKTtmbG9hdCBicj1kZWNvZGVFbGV2YXRpb24odGV4dHVyZTJEKHVfZGVtX3ByZXYscG9zK3ZlYzIoZGQsZGQpKSk7cmV0dXJuIHVfZXhhZ2dlcmF0aW9uKm1peChtaXgodGwsdHIsZi54KSxtaXgoYmwsYnIsZi54KSxmLnkpO1xcbiNlbmRpZlxcbn1cXG4jaWZkZWYgVEVSUkFJTl9WRVJURVhfTU9SUEhJTkdcXG5mbG9hdCBlbGV2YXRpb24odmVjMiBhcG9zKSB7XFxuI2lmZGVmIFpFUk9fRVhBR0dFUkFUSU9OXFxucmV0dXJuIDAuMDtcXG4jZW5kaWZcXG5mbG9hdCBuZXh0RWxldmF0aW9uPWN1cnJlbnRFbGV2YXRpb24oYXBvcyk7ZmxvYXQgcHJldkVsZXZhdGlvbj1wcmV2RWxldmF0aW9uKGFwb3MpO3JldHVybiBtaXgocHJldkVsZXZhdGlvbixuZXh0RWxldmF0aW9uLHVfZGVtX2xlcnApO31cXG4jZWxzZVxcbmZsb2F0IGVsZXZhdGlvbih2ZWMyIGFwb3MpIHtcXG4jaWZkZWYgWkVST19FWEFHR0VSQVRJT05cXG5yZXR1cm4gMC4wO1xcbiNlbmRpZlxcbnJldHVybiBjdXJyZW50RWxldmF0aW9uKGFwb3MpO31cXG4jZW5kaWZcXG5oaWdocCBmbG9hdCB1bnBhY2tfZGVwdGgoaGlnaHAgdmVjNCByZ2JhX2RlcHRoKVxcbntjb25zdCBoaWdocCB2ZWM0IGJpdF9zaGlmdD12ZWM0KDEuMC8oMjU1LjAqMjU1LjAqMjU1LjApLDEuMC8oMjU1LjAqMjU1LjApLDEuMC8yNTUuMCwxLjApO3JldHVybiBkb3QocmdiYV9kZXB0aCxiaXRfc2hpZnQpKjIuMC0xLjA7fWJvb2wgaXNPY2NsdWRlZCh2ZWM0IGZyYWcpIHt2ZWMzIGNvb3JkPWZyYWcueHl6L2ZyYWcudztmbG9hdCBkZXB0aD11bnBhY2tfZGVwdGgodGV4dHVyZTJEKHVfZGVwdGgsKGNvb3JkLnh5KzEuMCkqMC41KSk7cmV0dXJuIGNvb3JkLnogPiBkZXB0aCswLjAwMDU7fWZsb2F0IG9jY2x1c2lvbkZhZGUodmVjNCBmcmFnKSB7dmVjMyBjb29yZD1mcmFnLnh5ei9mcmFnLnc7dmVjMyBkZj12ZWMzKDUuMCp1X2RlcHRoX3NpemVfaW52LDAuMCk7dmVjMiB1dj0wLjUqY29vcmQueHkrMC41O3ZlYzQgZGVwdGg9dmVjNChcXG51bnBhY2tfZGVwdGgodGV4dHVyZTJEKHVfZGVwdGgsdXYtZGYueHopKSx1bnBhY2tfZGVwdGgodGV4dHVyZTJEKHVfZGVwdGgsdXYrZGYueHopKSx1bnBhY2tfZGVwdGgodGV4dHVyZTJEKHVfZGVwdGgsdXYtZGYuenkpKSx1bnBhY2tfZGVwdGgodGV4dHVyZTJEKHVfZGVwdGgsdXYrZGYuenkpKVxcbik7cmV0dXJuIGRvdCh2ZWM0KDAuMjUpLHZlYzQoMS4wKS1jbGFtcCgzMDAuMCoodmVjNChjb29yZC56LTAuMDAxKS1kZXB0aCksMC4wLDEuMCkpO312ZWM0IGZvdXJTYW1wbGUodmVjMiBwb3MsdmVjMiBvZmYpIHtcXG4jaWZkZWYgVEVSUkFJTl9ERU1fRkxPQVRfRk9STUFUXFxuZmxvYXQgdGw9dGV4dHVyZTJEKHVfZGVtLHBvcykuYTtmbG9hdCB0cj10ZXh0dXJlMkQodV9kZW0scG9zK3ZlYzIob2ZmLngsMC4wKSkuYTtmbG9hdCBibD10ZXh0dXJlMkQodV9kZW0scG9zK3ZlYzIoMC4wLG9mZi55KSkuYTtmbG9hdCBicj10ZXh0dXJlMkQodV9kZW0scG9zK29mZikuYTtcXG4jZWxzZVxcbnZlYzQgZGVtdGw9dmVjNCh0ZXh0dXJlMkQodV9kZW0scG9zKS54eXoqMjU1LjAsLTEuMCk7ZmxvYXQgdGw9ZG90KGRlbXRsLHVfZGVtX3VucGFjayk7dmVjNCBkZW10cj12ZWM0KHRleHR1cmUyRCh1X2RlbSxwb3MrdmVjMihvZmYueCwwLjApKS54eXoqMjU1LjAsLTEuMCk7ZmxvYXQgdHI9ZG90KGRlbXRyLHVfZGVtX3VucGFjayk7dmVjNCBkZW1ibD12ZWM0KHRleHR1cmUyRCh1X2RlbSxwb3MrdmVjMigwLjAsb2ZmLnkpKS54eXoqMjU1LjAsLTEuMCk7ZmxvYXQgYmw9ZG90KGRlbWJsLHVfZGVtX3VucGFjayk7dmVjNCBkZW1icj12ZWM0KHRleHR1cmUyRCh1X2RlbSxwb3Mrb2ZmKS54eXoqMjU1LjAsLTEuMCk7ZmxvYXQgYnI9ZG90KGRlbWJyLHVfZGVtX3VucGFjayk7XFxuI2VuZGlmXFxucmV0dXJuIHZlYzQodGwsdHIsYmwsYnIpO31mbG9hdCBmbGF0RWxldmF0aW9uKHZlYzIgcGFjaykge3ZlYzIgYXBvcz1mbG9vcihwYWNrLzguMCk7dmVjMiBzcGFuPTEwLjAqKHBhY2stYXBvcyo4LjApO3ZlYzIgdXZUZXg9KGFwb3MtdmVjMigxLjAsMS4wKSkvODE5MC4wO2Zsb2F0IHNpemU9dV9kZW1fc2l6ZSsyLjA7ZmxvYXQgZGQ9MS4wL3NpemU7dmVjMiBwb3M9dV9kZW1fc2l6ZSoodXZUZXgqdV9kZW1fc2NhbGUrdV9kZW1fdGwpKzEuMDt2ZWMyIGY9ZnJhY3QocG9zKTtwb3M9KHBvcy1mKzAuNSkqZGQ7dmVjNCBoPWZvdXJTYW1wbGUocG9zLHZlYzIoZGQpKTtmbG9hdCB6PW1peChtaXgoaC54LGgueSxmLngpLG1peChoLnosaC53LGYueCksZi55KTt2ZWMyIHc9Zmxvb3IoMC41KihzcGFuKnVfbWV0ZXJfdG9fZGVtLTEuMCkpO3ZlYzIgZD1kZCp3O2g9Zm91clNhbXBsZShwb3MtZCwyLjAqZCt2ZWMyKGRkKSk7dmVjNCBkaWZmPWFicyhoLnh6eHktaC55d3p3KTt2ZWMyIHNsb3BlPW1pbih2ZWMyKDAuMjUpLHVfbWV0ZXJfdG9fZGVtKjAuNSooZGlmZi54eitkaWZmLnl3KS8oMi4wKncrdmVjMigxLjApKSk7dmVjMiBmaXg9c2xvcGUqc3BhbjtmbG9hdCBiYXNlPXorbWF4KGZpeC54LGZpeC55KTtyZXR1cm4gdV9leGFnZ2VyYXRpb24qYmFzZTt9ZmxvYXQgZWxldmF0aW9uRnJvbVVpbnQxNihmbG9hdCB3b3JkKSB7cmV0dXJuIHVfZXhhZ2dlcmF0aW9uKih3b3JkL0VMRVZBVElPTl9TQ0FMRS1FTEVWQVRJT05fT0ZGU0VUKTt9XFxuI2Vsc2VcXG5mbG9hdCBlbGV2YXRpb24odmVjMiBwb3MpIHsgcmV0dXJuIDAuMDsgfWJvb2wgaXNPY2NsdWRlZCh2ZWM0IGZyYWcpIHsgcmV0dXJuIGZhbHNlOyB9ZmxvYXQgb2NjbHVzaW9uRmFkZSh2ZWM0IGZyYWcpIHsgcmV0dXJuIDEuMDsgfVxcbiNlbmRpZlwiLHRpPVwiI2lmZGVmIEZPR1xcbnVuaWZvcm0gbWVkaXVtcCB2ZWM0IHVfZm9nX2NvbG9yO3VuaWZvcm0gbWVkaXVtcCB2ZWMyIHVfZm9nX3JhbmdlO3VuaWZvcm0gbWVkaXVtcCBmbG9hdCB1X2ZvZ19ob3Jpem9uX2JsZW5kO3VuaWZvcm0gbWVkaXVtcCBtYXQ0IHVfZm9nX21hdHJpeDt2YXJ5aW5nIHZlYzMgdl9mb2dfcG9zO2Zsb2F0IGZvZ19yYW5nZShmbG9hdCBkZXB0aCkge3JldHVybiAoZGVwdGgtdV9mb2dfcmFuZ2VbMF0pLyh1X2ZvZ19yYW5nZVsxXS11X2ZvZ19yYW5nZVswXSk7fWZsb2F0IGZvZ19ob3Jpem9uX2JsZW5kaW5nKHZlYzMgY2FtZXJhX2Rpcikge2Zsb2F0IHQ9bWF4KDAuMCxjYW1lcmFfZGlyLnovdV9mb2dfaG9yaXpvbl9ibGVuZCk7cmV0dXJuIHVfZm9nX2NvbG9yLmEqZXhwKC0zLjAqdCp0KTt9ZmxvYXQgZm9nX29wYWNpdHkoZmxvYXQgdCkge2NvbnN0IGZsb2F0IGRlY2F5PTYuMDtmbG9hdCBmYWxsb2ZmPTEuMC1taW4oMS4wLGV4cCgtZGVjYXkqdCkpO2ZhbGxvZmYqPWZhbGxvZmYqZmFsbG9mZjtyZXR1cm4gdV9mb2dfY29sb3IuYSptaW4oMS4wLDEuMDA3NDcqZmFsbG9mZik7fXZlYzMgZm9nX3Bvc2l0aW9uKHZlYzMgcG9zKSB7cmV0dXJuICh1X2ZvZ19tYXRyaXgqdmVjNChwb3MsMS4wKSkueHl6O312ZWMzIGZvZ19wb3NpdGlvbih2ZWMyIHBvcykge3JldHVybiBmb2dfcG9zaXRpb24odmVjMyhwb3MsMC4wKSk7fWZsb2F0IGZvZyh2ZWMzIHBvcykge2Zsb2F0IGRlcHRoPWxlbmd0aChwb3MpO2Zsb2F0IG9wYWNpdHk9Zm9nX29wYWNpdHkoZm9nX3JhbmdlKGRlcHRoKSk7cmV0dXJuIG9wYWNpdHkqZm9nX2hvcml6b25fYmxlbmRpbmcocG9zL2RlcHRoKTt9XFxuI2VuZGlmXCIsaWk9XCIjaWZkZWYgRk9HXFxudW5pZm9ybSBtZWRpdW1wIHZlYzQgdV9mb2dfY29sb3I7dW5pZm9ybSBtZWRpdW1wIHZlYzIgdV9mb2dfcmFuZ2U7dW5pZm9ybSBtZWRpdW1wIGZsb2F0IHVfZm9nX2hvcml6b25fYmxlbmQ7dW5pZm9ybSBtZWRpdW1wIGZsb2F0IHVfZm9nX3RlbXBvcmFsX29mZnNldDt2YXJ5aW5nIHZlYzMgdl9mb2dfcG9zO3VuaWZvcm0gaGlnaHAgdmVjMyB1X2ZydXN0dW1fdGw7dW5pZm9ybSBoaWdocCB2ZWMzIHVfZnJ1c3R1bV90cjt1bmlmb3JtIGhpZ2hwIHZlYzMgdV9mcnVzdHVtX2JyO3VuaWZvcm0gaGlnaHAgdmVjMyB1X2ZydXN0dW1fYmw7dW5pZm9ybSBoaWdocCB2ZWMzIHVfZ2xvYmVfcG9zO3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9nbG9iZV9yYWRpdXM7dW5pZm9ybSBoaWdocCB2ZWMyIHVfdmlld3BvcnQ7dW5pZm9ybSBmbG9hdCB1X2dsb2JlX3RyYW5zaXRpb247dW5pZm9ybSBpbnQgdV9pc19nbG9iZTtmbG9hdCBmb2dfcmFuZ2UoZmxvYXQgZGVwdGgpIHtyZXR1cm4gKGRlcHRoLXVfZm9nX3JhbmdlWzBdKS8odV9mb2dfcmFuZ2VbMV0tdV9mb2dfcmFuZ2VbMF0pO31mbG9hdCBmb2dfaG9yaXpvbl9ibGVuZGluZyh2ZWMzIGNhbWVyYV9kaXIpIHtmbG9hdCB0PW1heCgwLjAsY2FtZXJhX2Rpci56L3VfZm9nX2hvcml6b25fYmxlbmQpO3JldHVybiB1X2ZvZ19jb2xvci5hKmV4cCgtMy4wKnQqdCk7fWZsb2F0IGZvZ19vcGFjaXR5KGZsb2F0IHQpIHtjb25zdCBmbG9hdCBkZWNheT02LjA7ZmxvYXQgZmFsbG9mZj0xLjAtbWluKDEuMCxleHAoLWRlY2F5KnQpKTtmYWxsb2ZmKj1mYWxsb2ZmKmZhbGxvZmY7cmV0dXJuIHVfZm9nX2NvbG9yLmEqbWluKDEuMCwxLjAwNzQ3KmZhbGxvZmYpO31mbG9hdCBnbG9iZV9nbG93X3Byb2dyZXNzKCkge2hpZ2hwIHZlYzIgdXY9Z2xfRnJhZ0Nvb3JkLnh5L3Vfdmlld3BvcnQ7aGlnaHAgdmVjMyByYXlfZGlyPW1peChcXG5taXgodV9mcnVzdHVtX3RsLHVfZnJ1c3R1bV90cix1di54KSxtaXgodV9mcnVzdHVtX2JsLHVfZnJ1c3R1bV9icix1di54KSwxLjAtdXYueSk7aGlnaHAgdmVjMyBkaXI9bm9ybWFsaXplKHJheV9kaXIpO2hpZ2hwIHZlYzMgY2xvc2VzdF9wb2ludD1kb3QodV9nbG9iZV9wb3MsZGlyKSpkaXI7aGlnaHAgZmxvYXQgc2RmPWxlbmd0aChjbG9zZXN0X3BvaW50LXVfZ2xvYmVfcG9zKS91X2dsb2JlX3JhZGl1cztyZXR1cm4gc2RmK1BJKjAuNTt9ZmxvYXQgZm9nX29wYWNpdHkodmVjMyBwb3MpIHtmbG9hdCBkZXB0aD1sZW5ndGgocG9zKTtyZXR1cm4gZm9nX29wYWNpdHkoZm9nX3JhbmdlKGRlcHRoKSk7fXZlYzMgZm9nX2FwcGx5KHZlYzMgY29sb3IsdmVjMyBwb3MpIHtmbG9hdCBkZXB0aD1sZW5ndGgocG9zKTtmbG9hdCBvcGFjaXR5O2lmICh1X2lzX2dsb2JlPT0xKSB7ZmxvYXQgZ2xvd19wcm9ncmVzcz1nbG9iZV9nbG93X3Byb2dyZXNzKCk7ZmxvYXQgdD1taXgoZ2xvd19wcm9ncmVzcyxkZXB0aCx1X2dsb2JlX3RyYW5zaXRpb24pO29wYWNpdHk9Zm9nX29wYWNpdHkoZm9nX3JhbmdlKHQpKTt9IGVsc2Uge29wYWNpdHk9Zm9nX29wYWNpdHkoZm9nX3JhbmdlKGRlcHRoKSk7b3BhY2l0eSo9Zm9nX2hvcml6b25fYmxlbmRpbmcocG9zL2RlcHRoKTt9cmV0dXJuIG1peChjb2xvcix1X2ZvZ19jb2xvci5yZ2Isb3BhY2l0eSk7fXZlYzQgZm9nX2FwcGx5X2Zyb21fdmVydCh2ZWM0IGNvbG9yLGZsb2F0IGZvZ19vcGFjKSB7ZmxvYXQgYWxwaGE9RVBTSUxPTitjb2xvci5hO2NvbG9yLnJnYj1taXgoY29sb3IucmdiL2FscGhhLHVfZm9nX2NvbG9yLnJnYixmb2dfb3BhYykqYWxwaGE7cmV0dXJuIGNvbG9yO312ZWMzIGZvZ19hcHBseV9za3lfZ3JhZGllbnQodmVjMyBjYW1lcmFfcmF5LHZlYzMgc2t5X2NvbG9yKSB7ZmxvYXQgaG9yaXpvbl9ibGVuZD1mb2dfaG9yaXpvbl9ibGVuZGluZyhub3JtYWxpemUoY2FtZXJhX3JheSkpO3JldHVybiBtaXgoc2t5X2NvbG9yLHVfZm9nX2NvbG9yLnJnYixob3Jpem9uX2JsZW5kKTt9dmVjNCBmb2dfYXBwbHlfcHJlbXVsdGlwbGllZCh2ZWM0IGNvbG9yLHZlYzMgcG9zKSB7ZmxvYXQgYWxwaGE9RVBTSUxPTitjb2xvci5hO2NvbG9yLnJnYj1mb2dfYXBwbHkoY29sb3IucmdiL2FscGhhLHBvcykqYWxwaGE7cmV0dXJuIGNvbG9yO312ZWMzIGZvZ19kaXRoZXIodmVjMyBjb2xvcikge3ZlYzIgZGl0aGVyX3NlZWQ9Z2xfRnJhZ0Nvb3JkLnh5K3VfZm9nX3RlbXBvcmFsX29mZnNldDtyZXR1cm4gZGl0aGVyKGNvbG9yLGRpdGhlcl9zZWVkKTt9dmVjNCBmb2dfZGl0aGVyKHZlYzQgY29sb3IpIHtyZXR1cm4gdmVjNChmb2dfZGl0aGVyKGNvbG9yLnJnYiksY29sb3IuYSk7fVxcbiNlbmRpZlwiO2xldCBvaT17fSxyaT17fTtjb25zdCBuaT1bXTtoaShKdCxuaSksaGkoZWksbmkpLGhpKHRpLG5pKSxoaShpaSxuaSksb2k9dWkoXCJcIixlaSkscmk9dWkoaWksdGkpO2NvbnN0IHNpPXVpKFwiXFxuI2lmIF9fVkVSU0lPTl9fID49MzAwXFxuI2RlZmluZSB2YXJ5aW5nIGluXFxuI2RlZmluZSBnbF9GcmFnQ29sb3IgZ2xGcmFnQ29sb3JcXG4jZGVmaW5lIHRleHR1cmUyRCB0ZXh0dXJlXFxuI2RlZmluZSB0ZXh0dXJlQ3ViZSB0ZXh0dXJlXFxub3V0IHZlYzQgZ2xGcmFnQ29sb3I7XFxuI2VuZGlmXFxuaGlnaHAgdmVjMyBoYXNoKGhpZ2hwIHZlYzIgcCkge2hpZ2hwIHZlYzMgcDM9ZnJhY3QocC54eXgqdmVjMyg0NDMuODk3NSwzOTcuMjk3Myw0OTEuMTg3MSkpO3AzKz1kb3QocDMscDMueXh6KzE5LjE5KTtyZXR1cm4gZnJhY3QoKHAzLnh4eStwMy55enopKnAzLnp5eCk7fXZlYzMgZGl0aGVyKHZlYzMgY29sb3IsaGlnaHAgdmVjMiBzZWVkKSB7dmVjMyBybmQ9aGFzaChzZWVkKStoYXNoKHNlZWQrMC41OTM3NCktMC41O3JldHVybiBjb2xvcitybmQvMjU1LjA7fWhpZ2hwIGZsb2F0IHVucGFja19kZXB0aChoaWdocCB2ZWM0IHJnYmFfZGVwdGgpXFxue2NvbnN0IGhpZ2hwIHZlYzQgYml0X3NoaWZ0PXZlYzQoMS4wLygyNTUuMCoyNTUuMCoyNTUuMCksMS4wLygyNTUuMCoyNTUuMCksMS4wLzI1NS4wLDEuMCk7cmV0dXJuIGRvdChyZ2JhX2RlcHRoLGJpdF9zaGlmdCkqMi4wLTEuMDt9aGlnaHAgdmVjNCBwYWNrX2RlcHRoKGhpZ2hwIGZsb2F0IG5kY196KSB7aGlnaHAgZmxvYXQgZGVwdGg9bmRjX3oqMC41KzAuNTtjb25zdCBoaWdocCB2ZWM0IGJpdF9zaGlmdD12ZWM0KDI1NS4wKjI1NS4wKjI1NS4wLDI1NS4wKjI1NS4wLDI1NS4wLDEuMCk7Y29uc3QgaGlnaHAgdmVjNCBiaXRfbWFzayA9dmVjNCgwLjAsMS4wLzI1NS4wLDEuMC8yNTUuMCwxLjAvMjU1LjApO2hpZ2hwIHZlYzQgcmVzPWZyYWN0KGRlcHRoKmJpdF9zaGlmdCk7cmVzLT1yZXMueHh5eipiaXRfbWFzaztyZXR1cm4gcmVzO31cIixcIlxcbiNpZiBfX1ZFUlNJT05fXyA+PTMwMFxcbiNkZWZpbmUgYXR0cmlidXRlIGluXFxuI2RlZmluZSB2YXJ5aW5nIG91dFxcbiNkZWZpbmUgdGV4dHVyZTJEIHRleHR1cmVcXG4jZW5kaWZcXG5mbG9hdCB3cmFwKGZsb2F0IG4sZmxvYXQgbWluLGZsb2F0IG1heCkge2Zsb2F0IGQ9bWF4LW1pbjtmbG9hdCB3PW1vZChtb2Qobi1taW4sZCkrZCxkKSttaW47cmV0dXJuICh3PT1taW4pID8gbWF4IDogdzt9XFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbnZlYzMgbWVyY2F0b3JfdGlsZV9wb3NpdGlvbihtYXQ0IG1hdHJpeCx2ZWMyIHRpbGVfYW5jaG9yLHZlYzMgdGlsZV9pZCx2ZWMyIG1lcmNhdG9yX2NlbnRlcikge1xcbiNpZm5kZWYgUFJPSkVDVEVEX1BPU19PTl9WSUVXUE9SVFxcbmZsb2F0IHRpbGVzPXRpbGVfaWQuejt2ZWMyIG1lcmNhdG9yPSh0aWxlX2FuY2hvci9FWFRFTlQrdGlsZV9pZC54eSkvdGlsZXM7bWVyY2F0b3ItPW1lcmNhdG9yX2NlbnRlcjttZXJjYXRvci54PXdyYXAobWVyY2F0b3IueCwtMC41LDAuNSk7dmVjNCBtZXJjYXRvcl90aWxlPXZlYzQobWVyY2F0b3IueHkqRVhURU5ULEVYVEVOVC8oMi4wKlBJKSwxLjApO21lcmNhdG9yX3RpbGU9bWF0cml4Km1lcmNhdG9yX3RpbGU7cmV0dXJuIG1lcmNhdG9yX3RpbGUueHl6O1xcbiNlbHNlXFxucmV0dXJuIHZlYzMoMC4wKTtcXG4jZW5kaWZcXG59dmVjMyBtaXhfZ2xvYmVfbWVyY2F0b3IodmVjMyBnbG9iZSx2ZWMzIG1lcmNhdG9yLGZsb2F0IHQpIHtyZXR1cm4gbWl4KGdsb2JlLG1lcmNhdG9yLHQpO31tYXQzIGdsb2JlX21lcmNhdG9yX3N1cmZhY2VfdmVjdG9ycyh2ZWMzIHBvc19ub3JtYWwsdmVjMyB1cF9kaXIsZmxvYXQgem9vbV90cmFuc2l0aW9uKSB7dmVjMyBub3JtYWw9em9vbV90cmFuc2l0aW9uPT0wLjAgPyBwb3Nfbm9ybWFsIDogbm9ybWFsaXplKG1peChwb3Nfbm9ybWFsLHVwX2Rpcix6b29tX3RyYW5zaXRpb24pKTt2ZWMzIHhBeGlzPW5vcm1hbGl6ZSh2ZWMzKG5vcm1hbC56LDAuMCwtbm9ybWFsLngpKTt2ZWMzIHlBeGlzPW5vcm1hbGl6ZShjcm9zcyhub3JtYWwseEF4aXMpKTtyZXR1cm4gbWF0Myh4QXhpcyx5QXhpcyxub3JtYWwpO31cXG4jZW5kaWZcXG52ZWMyIHVucGFja19mbG9hdChjb25zdCBmbG9hdCBwYWNrZWRWYWx1ZSkge2ludCBwYWNrZWRJbnRWYWx1ZT1pbnQocGFja2VkVmFsdWUpO2ludCB2MD1wYWNrZWRJbnRWYWx1ZS8yNTY7cmV0dXJuIHZlYzIodjAscGFja2VkSW50VmFsdWUtdjAqMjU2KTt9dmVjMiB1bnBhY2tfb3BhY2l0eShjb25zdCBmbG9hdCBwYWNrZWRPcGFjaXR5KSB7aW50IGludE9wYWNpdHk9aW50KHBhY2tlZE9wYWNpdHkpLzI7cmV0dXJuIHZlYzIoZmxvYXQoaW50T3BhY2l0eSkvMTI3LjAsbW9kKHBhY2tlZE9wYWNpdHksMi4wKSk7fXZlYzQgZGVjb2RlX2NvbG9yKGNvbnN0IHZlYzIgZW5jb2RlZENvbG9yKSB7cmV0dXJuIHZlYzQoXFxudW5wYWNrX2Zsb2F0KGVuY29kZWRDb2xvclswXSkvMjU1LjAsdW5wYWNrX2Zsb2F0KGVuY29kZWRDb2xvclsxXSkvMjU1LjBcXG4pO31mbG9hdCB1bnBhY2tfbWl4X3ZlYzIoY29uc3QgdmVjMiBwYWNrZWRWYWx1ZSxjb25zdCBmbG9hdCB0KSB7cmV0dXJuIG1peChwYWNrZWRWYWx1ZVswXSxwYWNrZWRWYWx1ZVsxXSx0KTt9dmVjNCB1bnBhY2tfbWl4X2NvbG9yKGNvbnN0IHZlYzQgcGFja2VkQ29sb3JzLGNvbnN0IGZsb2F0IHQpIHt2ZWM0IG1pbkNvbG9yPWRlY29kZV9jb2xvcih2ZWMyKHBhY2tlZENvbG9yc1swXSxwYWNrZWRDb2xvcnNbMV0pKTt2ZWM0IG1heENvbG9yPWRlY29kZV9jb2xvcih2ZWMyKHBhY2tlZENvbG9yc1syXSxwYWNrZWRDb2xvcnNbM10pKTtyZXR1cm4gbWl4KG1pbkNvbG9yLG1heENvbG9yLHQpO312ZWMyIGdldF9wYXR0ZXJuX3Bvcyhjb25zdCB2ZWMyIHBpeGVsX2Nvb3JkX3VwcGVyLGNvbnN0IHZlYzIgcGl4ZWxfY29vcmRfbG93ZXIsY29uc3QgdmVjMiBwYXR0ZXJuX3NpemUsY29uc3QgZmxvYXQgdGlsZV91bml0c190b19waXhlbHMsY29uc3QgdmVjMiBwb3MpIHt2ZWMyIG9mZnNldD1tb2QobW9kKG1vZChwaXhlbF9jb29yZF91cHBlcixwYXR0ZXJuX3NpemUpKjI1Ni4wLHBhdHRlcm5fc2l6ZSkqMjU2LjArcGl4ZWxfY29vcmRfbG93ZXIscGF0dGVybl9zaXplKTtyZXR1cm4gKHRpbGVfdW5pdHNfdG9fcGl4ZWxzKnBvcytvZmZzZXQpL3BhdHRlcm5fc2l6ZTt9Y29uc3QgdmVjNCBBV0FZPXZlYzQoLTEwMDAuMCwtMTAwMC4wLC0xMDAwLjAsMSk7Ly9Ob3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIHRoYXQgaXMgbm90IHJlbmRlcmVkLlwiKSxhaT1KdCxsaT1cIlxcbiNpZmRlZiBHTF9FU1xcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbiNlbHNlXFxuXFxuI2lmICFkZWZpbmVkKGxvd3ApXFxuI2RlZmluZSBsb3dwXFxuI2VuZGlmXFxuXFxuI2lmICFkZWZpbmVkKG1lZGl1bXApXFxuI2RlZmluZSBtZWRpdW1wXFxuI2VuZGlmXFxuXFxuI2lmICFkZWZpbmVkKGhpZ2hwKVxcbiNkZWZpbmUgaGlnaHBcXG4jZW5kaWZcXG5cXG4jZW5kaWZcIjt2YXIgY2k9e2JhY2tncm91bmQ6dWkoXCJ1bmlmb3JtIHZlYzQgdV9jb2xvcjt1bmlmb3JtIGZsb2F0IHVfb3BhY2l0eTtcXG4jaWZkZWYgTElHSFRJTkdfM0RfTU9ERVxcbnZhcnlpbmcgdmVjNCB2X2NvbG9yO1xcbiNlbmRpZlxcbnZvaWQgbWFpbigpIHt2ZWM0IG91dF9jb2xvcjtcXG4jaWZkZWYgTElHSFRJTkdfM0RfTU9ERVxcbm91dF9jb2xvcj12X2NvbG9yO1xcbiNlbHNlXFxub3V0X2NvbG9yPXVfY29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbm91dF9jb2xvcj1mb2dfZGl0aGVyKGZvZ19hcHBseV9wcmVtdWx0aXBsaWVkKG91dF9jb2xvcix2X2ZvZ19wb3MpKTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9b3V0X2NvbG9yKnVfb3BhY2l0eTtcXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XCIsXCJhdHRyaWJ1dGUgdmVjMiBhX3Bvczt1bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxuI2lmZGVmIExJR0hUSU5HXzNEX01PREVcXG51bmlmb3JtIHZlYzQgdV9jb2xvcjt2YXJ5aW5nIHZlYzQgdl9jb2xvcjtcXG4jZW5kaWZcXG52b2lkIG1haW4oKSB7Z2xfUG9zaXRpb249dV9tYXRyaXgqdmVjNChhX3BvcywwLDEpO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxudl9jb2xvcj1hcHBseV9saWdodGluZyh1X2NvbG9yKTtcXG4jZW5kaWZcXG4jaWZkZWYgRk9HXFxudl9mb2dfcG9zPWZvZ19wb3NpdGlvbihhX3Bvcyk7XFxuI2VuZGlmXFxufVwiKSxiYWNrZ3JvdW5kUGF0dGVybjp1aShcInVuaWZvcm0gdmVjMiB1X3BhdHRlcm5fdGw7dW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9icjt1bmlmb3JtIHZlYzIgdV90ZXhzaXplO3VuaWZvcm0gZmxvYXQgdV9vcGFjaXR5O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dmFyeWluZyB2ZWMyIHZfcG9zO3ZvaWQgbWFpbigpIHt2ZWMyIGltYWdlY29vcmQ9bW9kKHZfcG9zLDEuMCk7dmVjMiBwb3M9bWl4KHVfcGF0dGVybl90bC91X3RleHNpemUsdV9wYXR0ZXJuX2JyL3VfdGV4c2l6ZSxpbWFnZWNvb3JkKTt2ZWM0IG91dF9jb2xvcj10ZXh0dXJlMkQodV9pbWFnZSxwb3MpO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxub3V0X2NvbG9yPWFwcGx5X2xpZ2h0aW5nKG91dF9jb2xvcik7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbm91dF9jb2xvcj1mb2dfZGl0aGVyKGZvZ19hcHBseV9wcmVtdWx0aXBsaWVkKG91dF9jb2xvcix2X2ZvZ19wb3MpKTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9b3V0X2NvbG9yKnVfb3BhY2l0eTtcXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XCIsXCJ1bmlmb3JtIG1hdDQgdV9tYXRyaXg7dW5pZm9ybSB2ZWMyIHVfcGF0dGVybl9zaXplO3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX3VwcGVyO3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX2xvd2VyO3VuaWZvcm0gZmxvYXQgdV90aWxlX3VuaXRzX3RvX3BpeGVsczthdHRyaWJ1dGUgdmVjMiBhX3Bvczt2YXJ5aW5nIHZlYzIgdl9wb3M7dm9pZCBtYWluKCkge2dsX1Bvc2l0aW9uPXVfbWF0cml4KnZlYzQoYV9wb3MsMCwxKTt2X3Bvcz1nZXRfcGF0dGVybl9wb3ModV9waXhlbF9jb29yZF91cHBlcix1X3BpeGVsX2Nvb3JkX2xvd2VyLHVfcGF0dGVybl9zaXplLHVfdGlsZV91bml0c190b19waXhlbHMsYV9wb3MpO1xcbiNpZmRlZiBGT0dcXG52X2ZvZ19wb3M9Zm9nX3Bvc2l0aW9uKGFfcG9zKTtcXG4jZW5kaWZcXG59XCIpLGNpcmNsZTp1aShcInZhcnlpbmcgdmVjMyB2X2RhdGE7dmFyeWluZyBmbG9hdCB2X3Zpc2liaWxpdHk7XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCB2ZWM0IGNvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBtZWRpdW1wIGZsb2F0IHJhZGl1c1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgc3Ryb2tlX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBtZWRpdW1wIGZsb2F0IHN0cm9rZV93aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBzdHJva2Vfb3BhY2l0eVxcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGNvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCByYWRpdXNcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IHN0cm9rZV9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgZmxvYXQgc3Ryb2tlX3dpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBzdHJva2Vfb3BhY2l0eVxcbnZlYzIgZXh0cnVkZT12X2RhdGEueHk7ZmxvYXQgZXh0cnVkZV9sZW5ndGg9bGVuZ3RoKGV4dHJ1ZGUpO2xvd3AgZmxvYXQgYW50aWFsaWFzYmx1cj12X2RhdGEuejtmbG9hdCBhbnRpYWxpYXNlZF9ibHVyPS1tYXgoYmx1cixhbnRpYWxpYXNibHVyKTtmbG9hdCBvcGFjaXR5X3Q9c21vb3Roc3RlcCgwLjAsYW50aWFsaWFzZWRfYmx1cixleHRydWRlX2xlbmd0aC0xLjApO2Zsb2F0IGNvbG9yX3Q9c3Ryb2tlX3dpZHRoIDwgMC4wMSA/IDAuMCA6IHNtb290aHN0ZXAoXFxuYW50aWFsaWFzZWRfYmx1ciwwLjAsZXh0cnVkZV9sZW5ndGgtcmFkaXVzLyhyYWRpdXMrc3Ryb2tlX3dpZHRoKVxcbik7dmVjNCBvdXRfY29sb3I9bWl4KGNvbG9yKm9wYWNpdHksc3Ryb2tlX2NvbG9yKnN0cm9rZV9vcGFjaXR5LGNvbG9yX3QpO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxub3V0X2NvbG9yPWFwcGx5X2xpZ2h0aW5nKG91dF9jb2xvcik7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbm91dF9jb2xvcj1mb2dfYXBwbHlfcHJlbXVsdGlwbGllZChvdXRfY29sb3Isdl9mb2dfcG9zKTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9b3V0X2NvbG9yKih2X3Zpc2liaWxpdHkqb3BhY2l0eV90KTtcXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XCIsXCIjZGVmaW5lIE5VTV9WSVNJQklMSVRZX1JJTkdTIDJcXG4jZGVmaW5lIElOVl9TUVJUMiAwLjcwNzEwNjc4XFxuI2RlZmluZSBFTEVWQVRJT05fQklBUyAwLjAwMDFcXG4jZGVmaW5lIE5VTV9TQU1QTEVTX1BFUl9SSU5HIDE2XFxudW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gbWF0MiB1X2V4dHJ1ZGVfc2NhbGU7dW5pZm9ybSBsb3dwIGZsb2F0IHVfZGV2aWNlX3BpeGVsX3JhdGlvO3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5hdHRyaWJ1dGUgdmVjMyBhX3Bvc18zO2F0dHJpYnV0ZSB2ZWMzIGFfcG9zX25vcm1hbF8zO3VuaWZvcm0gbWF0NCB1X2ludl9yb3RfbWF0cml4O3VuaWZvcm0gdmVjMiB1X21lcmNfY2VudGVyO3VuaWZvcm0gdmVjMyB1X3RpbGVfaWQ7dW5pZm9ybSBmbG9hdCB1X3pvb21fdHJhbnNpdGlvbjt1bmlmb3JtIHZlYzMgdV91cF9kaXI7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMzIHZfZGF0YTt2YXJ5aW5nIGZsb2F0IHZfdmlzaWJpbGl0eTtcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgcmFkaXVzXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBzdHJva2VfY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgc3Ryb2tlX3dpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IHN0cm9rZV9vcGFjaXR5XFxudmVjMiBjYWxjX29mZnNldCh2ZWMyIGV4dHJ1c2lvbixmbG9hdCByYWRpdXMsZmxvYXQgc3Ryb2tlX3dpZHRoLCBmbG9hdCB2aWV3X3NjYWxlKSB7cmV0dXJuIGV4dHJ1c2lvbioocmFkaXVzK3N0cm9rZV93aWR0aCkqdV9leHRydWRlX3NjYWxlKnZpZXdfc2NhbGU7fWZsb2F0IGNhbnRpbGV2ZXJlZF9lbGV2YXRpb24odmVjMiBwb3MsZmxvYXQgcmFkaXVzLGZsb2F0IHN0cm9rZV93aWR0aCxmbG9hdCB2aWV3X3NjYWxlKSB7dmVjMiBjMT1wb3MrY2FsY19vZmZzZXQodmVjMigtMSwtMSkscmFkaXVzLHN0cm9rZV93aWR0aCx2aWV3X3NjYWxlKTt2ZWMyIGMyPXBvcytjYWxjX29mZnNldCh2ZWMyKDEsLTEpLHJhZGl1cyxzdHJva2Vfd2lkdGgsdmlld19zY2FsZSk7dmVjMiBjMz1wb3MrY2FsY19vZmZzZXQodmVjMigxLDEpLHJhZGl1cyxzdHJva2Vfd2lkdGgsdmlld19zY2FsZSk7dmVjMiBjND1wb3MrY2FsY19vZmZzZXQodmVjMigtMSwxKSxyYWRpdXMsc3Ryb2tlX3dpZHRoLHZpZXdfc2NhbGUpO2Zsb2F0IGgxPWVsZXZhdGlvbihjMSkrRUxFVkFUSU9OX0JJQVM7ZmxvYXQgaDI9ZWxldmF0aW9uKGMyKStFTEVWQVRJT05fQklBUztmbG9hdCBoMz1lbGV2YXRpb24oYzMpK0VMRVZBVElPTl9CSUFTO2Zsb2F0IGg0PWVsZXZhdGlvbihjNCkrRUxFVkFUSU9OX0JJQVM7cmV0dXJuIG1heChoNCxtYXgoaDMsbWF4KGgxLGgyKSkpO31mbG9hdCBjaXJjbGVfZWxldmF0aW9uKHZlYzIgcG9zKSB7XFxuI2lmIGRlZmluZWQoVEVSUkFJTilcXG5yZXR1cm4gZWxldmF0aW9uKHBvcykrRUxFVkFUSU9OX0JJQVM7XFxuI2Vsc2VcXG5yZXR1cm4gMC4wO1xcbiNlbmRpZlxcbn12ZWM0IHByb2plY3RfdmVydGV4KHZlYzIgZXh0cnVzaW9uLHZlYzQgd29ybGRfY2VudGVyLHZlYzQgcHJvamVjdGVkX2NlbnRlcixmbG9hdCByYWRpdXMsZmxvYXQgc3Ryb2tlX3dpZHRoLCBmbG9hdCB2aWV3X3NjYWxlLG1hdDMgc3VyZmFjZV92ZWN0b3JzKSB7dmVjMiBzYW1wbGVfb2Zmc2V0PWNhbGNfb2Zmc2V0KGV4dHJ1c2lvbixyYWRpdXMsc3Ryb2tlX3dpZHRoLHZpZXdfc2NhbGUpO1xcbiNpZmRlZiBQSVRDSF9XSVRIX01BUFxcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5yZXR1cm4gdV9tYXRyaXgqKCB3b3JsZF9jZW50ZXIrdmVjNChzYW1wbGVfb2Zmc2V0Lngqc3VyZmFjZV92ZWN0b3JzWzBdK3NhbXBsZV9vZmZzZXQueSpzdXJmYWNlX3ZlY3RvcnNbMV0sMCkgKTtcXG4jZWxzZVxcbnJldHVybiB1X21hdHJpeCooIHdvcmxkX2NlbnRlcit2ZWM0KHNhbXBsZV9vZmZzZXQsMCwwKSApO1xcbiNlbmRpZlxcbiNlbHNlXFxucmV0dXJuIHByb2plY3RlZF9jZW50ZXIrdmVjNChzYW1wbGVfb2Zmc2V0LDAsMCk7XFxuI2VuZGlmXFxufWZsb2F0IGdldF9zYW1wbGVfc3RlcCgpIHtcXG4jaWZkZWYgUElUQ0hfV0lUSF9NQVBcXG5yZXR1cm4gMi4wKlBJL2Zsb2F0KE5VTV9TQU1QTEVTX1BFUl9SSU5HKTtcXG4jZWxzZVxcbnJldHVybiBQSS9mbG9hdChOVU1fU0FNUExFU19QRVJfUklORyk7XFxuI2VuZGlmXFxufXZvaWQgbWFpbih2b2lkKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgZmxvYXQgcmFkaXVzXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBzdHJva2VfY29sb3JcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIGZsb2F0IHN0cm9rZV93aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgc3Ryb2tlX29wYWNpdHlcXG52ZWMyIGV4dHJ1ZGU9dmVjMihtb2QoYV9wb3MsMi4wKSoyLjAtMS4wKTt2ZWMyIGNpcmNsZV9jZW50ZXI9Zmxvb3IoYV9wb3MqMC41KTt2ZWM0IHdvcmxkX2NlbnRlcjttYXQzIHN1cmZhY2VfdmVjdG9ycztcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxudmVjMyBwb3Nfbm9ybWFsXzM9YV9wb3Nfbm9ybWFsXzMvMTYzODQuMDtzdXJmYWNlX3ZlY3RvcnM9Z2xvYmVfbWVyY2F0b3Jfc3VyZmFjZV92ZWN0b3JzKHBvc19ub3JtYWxfMyx1X3VwX2Rpcix1X3pvb21fdHJhbnNpdGlvbik7dmVjMyBzdXJmYWNlX2V4dHJ1c2lvbj1leHRydWRlLngqc3VyZmFjZV92ZWN0b3JzWzBdK2V4dHJ1ZGUueSpzdXJmYWNlX3ZlY3RvcnNbMV07dmVjMyBnbG9iZV9lbGV2YXRpb249ZWxldmF0aW9uVmVjdG9yKGNpcmNsZV9jZW50ZXIpKmNpcmNsZV9lbGV2YXRpb24oY2lyY2xlX2NlbnRlcik7dmVjMyBnbG9iZV9wb3M9YV9wb3NfMytzdXJmYWNlX2V4dHJ1c2lvbitnbG9iZV9lbGV2YXRpb247dmVjMyBtZXJjYXRvcl9lbGV2YXRpb249dV91cF9kaXIqdV90aWxlX3VwX3NjYWxlKmNpcmNsZV9lbGV2YXRpb24oY2lyY2xlX2NlbnRlcik7dmVjMyBtZXJjX3Bvcz1tZXJjYXRvcl90aWxlX3Bvc2l0aW9uKHVfaW52X3JvdF9tYXRyaXgsY2lyY2xlX2NlbnRlcix1X3RpbGVfaWQsdV9tZXJjX2NlbnRlcikrc3VyZmFjZV9leHRydXNpb24rbWVyY2F0b3JfZWxldmF0aW9uO3ZlYzMgcG9zPW1peF9nbG9iZV9tZXJjYXRvcihnbG9iZV9wb3MsbWVyY19wb3MsdV96b29tX3RyYW5zaXRpb24pO3dvcmxkX2NlbnRlcj12ZWM0KHBvcywxKTtcXG4jZWxzZSBcXG5zdXJmYWNlX3ZlY3RvcnM9bWF0MygxLjApO2Zsb2F0IGhlaWdodD1jaXJjbGVfZWxldmF0aW9uKGNpcmNsZV9jZW50ZXIpO3dvcmxkX2NlbnRlcj12ZWM0KGNpcmNsZV9jZW50ZXIsaGVpZ2h0LDEpO1xcbiNlbmRpZlxcbnZlYzQgcHJvamVjdGVkX2NlbnRlcj11X21hdHJpeCp3b3JsZF9jZW50ZXI7ZmxvYXQgdmlld19zY2FsZT0wLjA7XFxuI2lmZGVmIFBJVENIX1dJVEhfTUFQXFxuI2lmZGVmIFNDQUxFX1dJVEhfTUFQXFxudmlld19zY2FsZT0xLjA7XFxuI2Vsc2VcXG52aWV3X3NjYWxlPXByb2plY3RlZF9jZW50ZXIudy91X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2U7XFxuI2VuZGlmXFxuI2Vsc2VcXG4jaWZkZWYgU0NBTEVfV0lUSF9NQVBcXG52aWV3X3NjYWxlPXVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZTtcXG4jZWxzZVxcbnZpZXdfc2NhbGU9cHJvamVjdGVkX2NlbnRlci53O1xcbiNlbmRpZlxcbiNlbmRpZlxcbmdsX1Bvc2l0aW9uPXByb2plY3RfdmVydGV4KGV4dHJ1ZGUsd29ybGRfY2VudGVyLHByb2plY3RlZF9jZW50ZXIscmFkaXVzLHN0cm9rZV93aWR0aCx2aWV3X3NjYWxlLHN1cmZhY2VfdmVjdG9ycyk7ZmxvYXQgdmlzaWJpbGl0eT0wLjA7XFxuI2lmZGVmIFRFUlJBSU5cXG5mbG9hdCBzdGVwPWdldF9zYW1wbGVfc3RlcCgpO3ZlYzQgb2NjbHVzaW9uX3dvcmxkX2NlbnRlcjt2ZWM0IG9jY2x1c2lvbl9wcm9qZWN0ZWRfY2VudGVyO1xcbiNpZmRlZiBQSVRDSF9XSVRIX01BUFxcbmZsb2F0IGNhbnRpbGV2ZXJlZF9oZWlnaHQ9Y2FudGlsZXZlcmVkX2VsZXZhdGlvbihjaXJjbGVfY2VudGVyLHJhZGl1cyxzdHJva2Vfd2lkdGgsdmlld19zY2FsZSk7b2NjbHVzaW9uX3dvcmxkX2NlbnRlcj12ZWM0KGNpcmNsZV9jZW50ZXIsY2FudGlsZXZlcmVkX2hlaWdodCwxKTtvY2NsdXNpb25fcHJvamVjdGVkX2NlbnRlcj11X21hdHJpeCpvY2NsdXNpb25fd29ybGRfY2VudGVyO1xcbiNlbHNlXFxub2NjbHVzaW9uX3dvcmxkX2NlbnRlcj13b3JsZF9jZW50ZXI7b2NjbHVzaW9uX3Byb2plY3RlZF9jZW50ZXI9cHJvamVjdGVkX2NlbnRlcjtcXG4jZW5kaWZcXG5mb3IoaW50IHJpbmc9MDsgcmluZyA8IE5VTV9WSVNJQklMSVRZX1JJTkdTOyByaW5nKyspIHtmbG9hdCBzY2FsZT0oZmxvYXQocmluZykrMS4wKS9mbG9hdChOVU1fVklTSUJJTElUWV9SSU5HUyk7Zm9yKGludCBpPTA7IGkgPCBOVU1fU0FNUExFU19QRVJfUklORzsgaSsrKSB7dmVjMiBleHRydXNpb249dmVjMihjb3Moc3RlcCpmbG9hdChpKSksLXNpbihzdGVwKmZsb2F0KGkpKSkqc2NhbGU7dmVjNCBmcmFnX3Bvcz1wcm9qZWN0X3ZlcnRleChleHRydXNpb24sb2NjbHVzaW9uX3dvcmxkX2NlbnRlcixvY2NsdXNpb25fcHJvamVjdGVkX2NlbnRlcixyYWRpdXMsc3Ryb2tlX3dpZHRoLHZpZXdfc2NhbGUsc3VyZmFjZV92ZWN0b3JzKTt2aXNpYmlsaXR5Kz1mbG9hdCghaXNPY2NsdWRlZChmcmFnX3BvcykpO319dmlzaWJpbGl0eS89ZmxvYXQoTlVNX1ZJU0lCSUxJVFlfUklOR1MpKmZsb2F0KE5VTV9TQU1QTEVTX1BFUl9SSU5HKTtcXG4jZWxzZVxcbnZpc2liaWxpdHk9MS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG52aXNpYmlsaXR5PTEuMDtcXG4jZW5kaWZcXG52X3Zpc2liaWxpdHk9dmlzaWJpbGl0eTtsb3dwIGZsb2F0IGFudGlhbGlhc2JsdXI9MS4wL3VfZGV2aWNlX3BpeGVsX3JhdGlvLyhyYWRpdXMrc3Ryb2tlX3dpZHRoKTt2X2RhdGE9dmVjMyhleHRydWRlLngsZXh0cnVkZS55LGFudGlhbGlhc2JsdXIpO1xcbiNpZmRlZiBGT0dcXG52X2ZvZ19wb3M9Zm9nX3Bvc2l0aW9uKHdvcmxkX2NlbnRlci54eXopO1xcbiNlbmRpZlxcbn1cIiksY2xpcHBpbmdNYXNrOnVpKFwidm9pZCBtYWluKCkge2dsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7fVwiLFwiYXR0cmlidXRlIHZlYzIgYV9wb3M7dW5pZm9ybSBtYXQ0IHVfbWF0cml4O3ZvaWQgbWFpbigpIHtnbF9Qb3NpdGlvbj11X21hdHJpeCp2ZWM0KGFfcG9zLDAsMSk7fVwiKSxoZWF0bWFwOnVpKFwidW5pZm9ybSBoaWdocCBmbG9hdCB1X2ludGVuc2l0eTt2YXJ5aW5nIHZlYzIgdl9leHRydWRlO1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgZmxvYXQgd2VpZ2h0XFxuI2RlZmluZSBHQVVTU19DT0VGIDAuMzk4OTQyMjgwNDAxNDMyN1xcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCBmbG9hdCB3ZWlnaHRcXG5mbG9hdCBkPS0wLjUqMy4wKjMuMCpkb3Qodl9leHRydWRlLHZfZXh0cnVkZSk7ZmxvYXQgdmFsPXdlaWdodCp1X2ludGVuc2l0eSpHQVVTU19DT0VGKmV4cChkKTtnbF9GcmFnQ29sb3I9dmVjNCh2YWwsMS4wLDEuMCwxLjApO1xcbiNpZmRlZiBGT0dcXG5pZiAodV9pc19nbG9iZT09MCkge2dsX0ZyYWdDb2xvci5yKj1wb3coMS4wLWZvZ19vcGFjaXR5KHZfZm9nX3BvcyksMi4wKTt9XFxuI2VuZGlmXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gZmxvYXQgdV9leHRydWRlX3NjYWxlO3VuaWZvcm0gZmxvYXQgdV9vcGFjaXR5O3VuaWZvcm0gZmxvYXQgdV9pbnRlbnNpdHk7YXR0cmlidXRlIHZlYzIgYV9wb3M7XFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbmF0dHJpYnV0ZSB2ZWMzIGFfcG9zXzM7YXR0cmlidXRlIHZlYzMgYV9wb3Nfbm9ybWFsXzM7dW5pZm9ybSBtYXQ0IHVfaW52X3JvdF9tYXRyaXg7dW5pZm9ybSB2ZWMyIHVfbWVyY19jZW50ZXI7dW5pZm9ybSB2ZWMzIHVfdGlsZV9pZDt1bmlmb3JtIGZsb2F0IHVfem9vbV90cmFuc2l0aW9uO3VuaWZvcm0gdmVjMyB1X3VwX2RpcjtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzIgdl9leHRydWRlO1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgZmxvYXQgd2VpZ2h0XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBtZWRpdW1wIGZsb2F0IHJhZGl1c1xcbmNvbnN0IGhpZ2hwIGZsb2F0IFpFUk89MS4wLzI1NS4wLzE2LjA7XFxuI2RlZmluZSBHQVVTU19DT0VGIDAuMzk4OTQyMjgwNDAxNDMyN1xcbnZvaWQgbWFpbih2b2lkKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgZmxvYXQgd2VpZ2h0XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCByYWRpdXNcXG52ZWMyIHVuc2NhbGVkX2V4dHJ1ZGU9dmVjMihtb2QoYV9wb3MsMi4wKSoyLjAtMS4wKTtmbG9hdCBTPXNxcnQoLTIuMCpsb2coWkVSTy93ZWlnaHQvdV9pbnRlbnNpdHkvR0FVU1NfQ09FRikpLzMuMDt2X2V4dHJ1ZGU9Uyp1bnNjYWxlZF9leHRydWRlO3ZlYzIgZXh0cnVkZT12X2V4dHJ1ZGUqcmFkaXVzKnVfZXh0cnVkZV9zY2FsZTt2ZWMyIHRpbGVQb3M9Zmxvb3IoYV9wb3MqMC41KTt2ZWMzIHBvcztcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxudmVjMyBwb3Nfbm9ybWFsXzM9YV9wb3Nfbm9ybWFsXzMvMTYzODQuMDttYXQzIHN1cmZhY2VfdmVjdG9ycz1nbG9iZV9tZXJjYXRvcl9zdXJmYWNlX3ZlY3RvcnMocG9zX25vcm1hbF8zLHVfdXBfZGlyLHVfem9vbV90cmFuc2l0aW9uKTt2ZWMzIHN1cmZhY2VfZXh0cnVzaW9uPWV4dHJ1ZGUueCpzdXJmYWNlX3ZlY3RvcnNbMF0rZXh0cnVkZS55KnN1cmZhY2VfdmVjdG9yc1sxXTt2ZWMzIGdsb2JlX2VsZXZhdGlvbj1lbGV2YXRpb25WZWN0b3IodGlsZVBvcykqZWxldmF0aW9uKHRpbGVQb3MpO3ZlYzMgZ2xvYmVfcG9zPWFfcG9zXzMrc3VyZmFjZV9leHRydXNpb24rZ2xvYmVfZWxldmF0aW9uO3ZlYzMgbWVyY2F0b3JfZWxldmF0aW9uPXVfdXBfZGlyKnVfdGlsZV91cF9zY2FsZSplbGV2YXRpb24odGlsZVBvcyk7dmVjMyBtZXJjX3Bvcz1tZXJjYXRvcl90aWxlX3Bvc2l0aW9uKHVfaW52X3JvdF9tYXRyaXgsdGlsZVBvcyx1X3RpbGVfaWQsdV9tZXJjX2NlbnRlcikrc3VyZmFjZV9leHRydXNpb24rbWVyY2F0b3JfZWxldmF0aW9uO3Bvcz1taXhfZ2xvYmVfbWVyY2F0b3IoZ2xvYmVfcG9zLG1lcmNfcG9zLHVfem9vbV90cmFuc2l0aW9uKTtcXG4jZWxzZVxcbnBvcz12ZWMzKHRpbGVQb3MrZXh0cnVkZSxlbGV2YXRpb24odGlsZVBvcykpO1xcbiNlbmRpZlxcbmdsX1Bvc2l0aW9uPXVfbWF0cml4KnZlYzQocG9zLDEpO1xcbiNpZmRlZiBGT0dcXG52X2ZvZ19wb3M9Zm9nX3Bvc2l0aW9uKHBvcyk7XFxuI2VuZGlmXFxufVwiKSxoZWF0bWFwVGV4dHVyZTp1aShcInVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dW5pZm9ybSBzYW1wbGVyMkQgdV9jb2xvcl9yYW1wO3VuaWZvcm0gZmxvYXQgdV9vcGFjaXR5O3ZhcnlpbmcgdmVjMiB2X3Bvczt2b2lkIG1haW4oKSB7ZmxvYXQgdD10ZXh0dXJlMkQodV9pbWFnZSx2X3Bvcykucjt2ZWM0IGNvbG9yPXRleHR1cmUyRCh1X2NvbG9yX3JhbXAsdmVjMih0LDAuNSkpO2dsX0ZyYWdDb2xvcj1jb2xvcip1X29wYWNpdHk7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDAuMCk7XFxuI2VuZGlmXFxufVwiLFwiYXR0cmlidXRlIHZlYzIgYV9wb3M7dmFyeWluZyB2ZWMyIHZfcG9zO3ZvaWQgbWFpbigpIHtnbF9Qb3NpdGlvbj12ZWM0KGFfcG9zLDAsMSk7dl9wb3M9YV9wb3MqMC41KzAuNTt9XCIpLGNvbGxpc2lvbkJveDp1aShcInZhcnlpbmcgZmxvYXQgdl9wbGFjZWQ7dmFyeWluZyBmbG9hdCB2X25vdFVzZWQ7dm9pZCBtYWluKCkge3ZlYzQgcmVkID12ZWM0KDEuMCwwLjAsMC4wLDEuMCk7dmVjNCBibHVlPXZlYzQoMC4wLDAuMCwxLjAsMC41KTtnbF9GcmFnQ29sb3IgPW1peChyZWQsYmx1ZSxzdGVwKDAuNSx2X3BsYWNlZCkpKjAuNTtnbF9GcmFnQ29sb3IqPW1peCgxLjAsMC4xLHN0ZXAoMC41LHZfbm90VXNlZCkpO31cIixcImF0dHJpYnV0ZSB2ZWMzIGFfcG9zO2F0dHJpYnV0ZSB2ZWMyIGFfYW5jaG9yX3BvczthdHRyaWJ1dGUgdmVjMiBhX2V4dHJ1ZGU7YXR0cmlidXRlIHZlYzIgYV9wbGFjZWQ7YXR0cmlidXRlIHZlYzIgYV9zaGlmdDthdHRyaWJ1dGUgZmxvYXQgYV9zaXplX3NjYWxlO2F0dHJpYnV0ZSB2ZWMyIGFfcGFkZGluZzt1bmlmb3JtIG1hdDQgdV9tYXRyaXg7dW5pZm9ybSB2ZWMyIHVfZXh0cnVkZV9zY2FsZTt1bmlmb3JtIGZsb2F0IHVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZTt2YXJ5aW5nIGZsb2F0IHZfcGxhY2VkO3ZhcnlpbmcgZmxvYXQgdl9ub3RVc2VkO3ZvaWQgbWFpbigpIHt2ZWM0IHByb2plY3RlZFBvaW50PXVfbWF0cml4KnZlYzQoYV9wb3MrZWxldmF0aW9uVmVjdG9yKGFfYW5jaG9yX3BvcykqZWxldmF0aW9uKGFfYW5jaG9yX3BvcyksMSk7aGlnaHAgZmxvYXQgY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZT1wcm9qZWN0ZWRQb2ludC53O2hpZ2hwIGZsb2F0IGNvbGxpc2lvbl9wZXJzcGVjdGl2ZV9yYXRpbz1jbGFtcChcXG4wLjUrMC41Kih1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2UvY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZSksMC4wLDEuNSk7Z2xfUG9zaXRpb249cHJvamVjdGVkUG9pbnQ7Z2xfUG9zaXRpb24ueHkrPShhX2V4dHJ1ZGUqYV9zaXplX3NjYWxlK2Ffc2hpZnQrYV9wYWRkaW5nKSp1X2V4dHJ1ZGVfc2NhbGUqZ2xfUG9zaXRpb24udypjb2xsaXNpb25fcGVyc3BlY3RpdmVfcmF0aW87dl9wbGFjZWQ9YV9wbGFjZWQueDt2X25vdFVzZWQ9YV9wbGFjZWQueTt9XCIpLGNvbGxpc2lvbkNpcmNsZTp1aShcInZhcnlpbmcgZmxvYXQgdl9yYWRpdXM7dmFyeWluZyB2ZWMyIHZfZXh0cnVkZTt2YXJ5aW5nIGZsb2F0IHZfcGVyc3BlY3RpdmVfcmF0aW87dmFyeWluZyBmbG9hdCB2X2NvbGxpc2lvbjt2b2lkIG1haW4oKSB7ZmxvYXQgYWxwaGE9MC41Km1pbih2X3BlcnNwZWN0aXZlX3JhdGlvLDEuMCk7ZmxvYXQgc3Ryb2tlX3JhZGl1cz0wLjkqbWF4KHZfcGVyc3BlY3RpdmVfcmF0aW8sMS4wKTtmbG9hdCBkaXN0YW5jZV90b19jZW50ZXI9bGVuZ3RoKHZfZXh0cnVkZSk7ZmxvYXQgZGlzdGFuY2VfdG9fZWRnZT1hYnMoZGlzdGFuY2VfdG9fY2VudGVyLXZfcmFkaXVzKTtmbG9hdCBvcGFjaXR5X3Q9c21vb3Roc3RlcCgtc3Ryb2tlX3JhZGl1cywwLjAsLWRpc3RhbmNlX3RvX2VkZ2UpO3ZlYzQgY29sb3I9bWl4KHZlYzQoMC4wLDAuMCwxLjAsMC41KSx2ZWM0KDEuMCwwLjAsMC4wLDEuMCksdl9jb2xsaXNpb24pO2dsX0ZyYWdDb2xvcj1jb2xvciphbHBoYSpvcGFjaXR5X3Q7fVwiLFwiYXR0cmlidXRlIHZlYzIgYV9wb3NfMmY7YXR0cmlidXRlIGZsb2F0IGFfcmFkaXVzO2F0dHJpYnV0ZSB2ZWMyIGFfZmxhZ3M7dW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gbWF0NCB1X2ludl9tYXRyaXg7dW5pZm9ybSB2ZWMyIHVfdmlld3BvcnRfc2l6ZTt1bmlmb3JtIGZsb2F0IHVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZTt2YXJ5aW5nIGZsb2F0IHZfcmFkaXVzO3ZhcnlpbmcgdmVjMiB2X2V4dHJ1ZGU7dmFyeWluZyBmbG9hdCB2X3BlcnNwZWN0aXZlX3JhdGlvO3ZhcnlpbmcgZmxvYXQgdl9jb2xsaXNpb247dmVjMyB0b1RpbGVQb3NpdGlvbih2ZWMyIHNjcmVlblBvcykge3ZlYzQgcmF5U3RhcnQ9dV9pbnZfbWF0cml4KnZlYzQoc2NyZWVuUG9zLC0xLjAsMS4wKTt2ZWM0IHJheUVuZCAgPXVfaW52X21hdHJpeCp2ZWM0KHNjcmVlblBvcywgMS4wLDEuMCk7cmF5U3RhcnQueHl6Lz1yYXlTdGFydC53O3JheUVuZC54eXogIC89cmF5RW5kLnc7aGlnaHAgZmxvYXQgdD0oMC4wLXJheVN0YXJ0LnopLyhyYXlFbmQuei1yYXlTdGFydC56KTtyZXR1cm4gbWl4KHJheVN0YXJ0Lnh5eixyYXlFbmQueHl6LHQpO312b2lkIG1haW4oKSB7dmVjMiBxdWFkQ2VudGVyUG9zPWFfcG9zXzJmO2Zsb2F0IHJhZGl1cz1hX3JhZGl1cztmbG9hdCBjb2xsaXNpb249YV9mbGFncy54O2Zsb2F0IHZlcnRleElkeD1hX2ZsYWdzLnk7dmVjMiBxdWFkVmVydGV4T2Zmc2V0PXZlYzIoXFxubWl4KC0xLjAsMS4wLGZsb2F0KHZlcnRleElkeCA+PTIuMCkpLG1peCgtMS4wLDEuMCxmbG9hdCh2ZXJ0ZXhJZHggPj0xLjAgJiYgdmVydGV4SWR4IDw9Mi4wKSkpO3ZlYzIgcXVhZFZlcnRleEV4dGVudD1xdWFkVmVydGV4T2Zmc2V0KnJhZGl1czt2ZWMzIHRpbGVQb3M9dG9UaWxlUG9zaXRpb24ocXVhZENlbnRlclBvcyk7dmVjNCBjbGlwUG9zPXVfbWF0cml4KnZlYzQodGlsZVBvcywxLjApO2hpZ2hwIGZsb2F0IGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2U9Y2xpcFBvcy53O2hpZ2hwIGZsb2F0IGNvbGxpc2lvbl9wZXJzcGVjdGl2ZV9yYXRpbz1jbGFtcChcXG4wLjUrMC41Kih1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2UvY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZSksMC4wLDQuMCk7ZmxvYXQgcGFkZGluZ19mYWN0b3I9MS4yO3ZfcmFkaXVzPXJhZGl1czt2X2V4dHJ1ZGU9cXVhZFZlcnRleEV4dGVudCpwYWRkaW5nX2ZhY3Rvcjt2X3BlcnNwZWN0aXZlX3JhdGlvPWNvbGxpc2lvbl9wZXJzcGVjdGl2ZV9yYXRpbzt2X2NvbGxpc2lvbj1jb2xsaXNpb247Z2xfUG9zaXRpb249dmVjNChjbGlwUG9zLnh5ei9jbGlwUG9zLncsMS4wKSt2ZWM0KHF1YWRWZXJ0ZXhFeHRlbnQqcGFkZGluZ19mYWN0b3IvdV92aWV3cG9ydF9zaXplKjIuMCwwLjAsMC4wKTt9XCIpLGRlYnVnOnVpKFwidW5pZm9ybSBoaWdocCB2ZWM0IHVfY29sb3I7dW5pZm9ybSBzYW1wbGVyMkQgdV9vdmVybGF5O3ZhcnlpbmcgdmVjMiB2X3V2O3ZvaWQgbWFpbigpIHt2ZWM0IG92ZXJsYXlfY29sb3I9dGV4dHVyZTJEKHVfb3ZlcmxheSx2X3V2KTtnbF9GcmFnQ29sb3I9bWl4KHVfY29sb3Isb3ZlcmxheV9jb2xvcixvdmVybGF5X2NvbG9yLmEpO31cIixcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5hdHRyaWJ1dGUgdmVjMyBhX3Bvc18zO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMiB2X3V2O3VuaWZvcm0gbWF0NCB1X21hdHJpeDt1bmlmb3JtIGZsb2F0IHVfb3ZlcmxheV9zY2FsZTt2b2lkIG1haW4oKSB7ZmxvYXQgaD1lbGV2YXRpb24oYV9wb3MpO3ZfdXY9YV9wb3MvODE5Mi4wO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5nbF9Qb3NpdGlvbj11X21hdHJpeCp2ZWM0KGFfcG9zXzMrZWxldmF0aW9uVmVjdG9yKGFfcG9zKSpoLDEpO1xcbiNlbHNlXFxuZ2xfUG9zaXRpb249dV9tYXRyaXgqdmVjNChhX3Bvcyp1X292ZXJsYXlfc2NhbGUsaCwxKTtcXG4jZW5kaWZcXG59XCIpLGZpbGw6dWkoXCIjcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGNvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxudmVjNCBvdXRfY29sb3I9Y29sb3I7XFxuI2lmZGVmIExJR0hUSU5HXzNEX01PREVcXG5vdXRfY29sb3I9YXBwbHlfbGlnaHRpbmcob3V0X2NvbG9yKTtcXG4jZW5kaWZcXG4jaWZkZWYgRk9HXFxub3V0X2NvbG9yPWZvZ19kaXRoZXIoZm9nX2FwcGx5X3ByZW11bHRpcGxpZWQob3V0X2NvbG9yLHZfZm9nX3BvcykpO1xcbiNlbmRpZlxcbmdsX0ZyYWdDb2xvcj1vdXRfY29sb3Iqb3BhY2l0eTtcXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XCIsXCJhdHRyaWJ1dGUgdmVjMiBhX3Bvczt1bmlmb3JtIG1hdDQgdV9tYXRyaXg7XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCB2ZWM0IGNvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG52b2lkIG1haW4oKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbmdsX1Bvc2l0aW9uPXVfbWF0cml4KnZlYzQoYV9wb3MsMCwxKTtcXG4jaWZkZWYgRk9HXFxudl9mb2dfcG9zPWZvZ19wb3NpdGlvbihhX3Bvcyk7XFxuI2VuZGlmXFxufVwiKSxmaWxsT3V0bGluZTp1aShcInZhcnlpbmcgdmVjMiB2X3BvcztcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgb3V0bGluZV9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgb3V0bGluZV9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbmZsb2F0IGRpc3Q9bGVuZ3RoKHZfcG9zLWdsX0ZyYWdDb29yZC54eSk7ZmxvYXQgYWxwaGE9MS4wLXNtb290aHN0ZXAoMC4wLDEuMCxkaXN0KTt2ZWM0IG91dF9jb2xvcj1vdXRsaW5lX2NvbG9yO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxub3V0X2NvbG9yPWFwcGx5X2xpZ2h0aW5nKG91dF9jb2xvcik7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbm91dF9jb2xvcj1mb2dfZGl0aGVyKGZvZ19hcHBseV9wcmVtdWx0aXBsaWVkKG91dF9jb2xvcix2X2ZvZ19wb3MpKTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9b3V0X2NvbG9yKihhbHBoYSpvcGFjaXR5KTtcXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XCIsXCJhdHRyaWJ1dGUgdmVjMiBhX3Bvczt1bmlmb3JtIG1hdDQgdV9tYXRyaXg7dW5pZm9ybSB2ZWMyIHVfd29ybGQ7dmFyeWluZyB2ZWMyIHZfcG9zO1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBvdXRsaW5lX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG52b2lkIG1haW4oKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBvdXRsaW5lX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuZ2xfUG9zaXRpb249dV9tYXRyaXgqdmVjNChhX3BvcywwLDEpO3ZfcG9zPShnbF9Qb3NpdGlvbi54eS9nbF9Qb3NpdGlvbi53KzEuMCkvMi4wKnVfd29ybGQ7XFxuI2lmZGVmIEZPR1xcbnZfZm9nX3Bvcz1mb2dfcG9zaXRpb24oYV9wb3MpO1xcbiNlbmRpZlxcbn1cIiksZmlsbE91dGxpbmVQYXR0ZXJuOnVpKFwidW5pZm9ybSB2ZWMyIHVfdGV4c2l6ZTt1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO3ZhcnlpbmcgdmVjMiB2X3Bvczt2YXJ5aW5nIHZlYzIgdl9wb3Nfd29ybGQ7XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgdmVjNCBwYXR0ZXJuXFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgdmVjNCBwYXR0ZXJuXFxudmVjMiBwYXR0ZXJuX3RsPXBhdHRlcm4ueHk7dmVjMiBwYXR0ZXJuX2JyPXBhdHRlcm4uenc7dmVjMiBpbWFnZWNvb3JkPW1vZCh2X3BvcywxLjApO3ZlYzIgcG9zPW1peChwYXR0ZXJuX3RsL3VfdGV4c2l6ZSxwYXR0ZXJuX2JyL3VfdGV4c2l6ZSxpbWFnZWNvb3JkKTtmbG9hdCBkaXN0PWxlbmd0aCh2X3Bvc193b3JsZC1nbF9GcmFnQ29vcmQueHkpO2Zsb2F0IGFscGhhPTEuMC1zbW9vdGhzdGVwKDAuMCwxLjAsZGlzdCk7dmVjNCBvdXRfY29sb3I9dGV4dHVyZTJEKHVfaW1hZ2UscG9zKTtcXG4jaWZkZWYgTElHSFRJTkdfM0RfTU9ERVxcbm91dF9jb2xvcj1hcHBseV9saWdodGluZyhvdXRfY29sb3IpO1xcbiNlbmRpZlxcbiNpZmRlZiBGT0dcXG5vdXRfY29sb3I9Zm9nX2RpdGhlcihmb2dfYXBwbHlfcHJlbXVsdGlwbGllZChvdXRfY29sb3Isdl9mb2dfcG9zKSk7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yPW91dF9jb2xvciooYWxwaGEqb3BhY2l0eSk7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gdmVjMiB1X3dvcmxkO3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX3VwcGVyO3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX2xvd2VyO3VuaWZvcm0gZmxvYXQgdV90aWxlX3VuaXRzX3RvX3BpeGVsczthdHRyaWJ1dGUgdmVjMiBhX3Bvczt2YXJ5aW5nIHZlYzIgdl9wb3M7dmFyeWluZyB2ZWMyIHZfcG9zX3dvcmxkO1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIHZlYzQgcGF0dGVyblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBwaXhlbF9yYXRpb1xcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIHZlYzQgcGF0dGVyblxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgcGl4ZWxfcmF0aW9cXG52ZWMyIHBhdHRlcm5fdGw9cGF0dGVybi54eTt2ZWMyIHBhdHRlcm5fYnI9cGF0dGVybi56dztnbF9Qb3NpdGlvbj11X21hdHJpeCp2ZWM0KGFfcG9zLDAsMSk7dmVjMiBkaXNwbGF5X3NpemU9KHBhdHRlcm5fYnItcGF0dGVybl90bCkvcGl4ZWxfcmF0aW87dl9wb3M9Z2V0X3BhdHRlcm5fcG9zKHVfcGl4ZWxfY29vcmRfdXBwZXIsdV9waXhlbF9jb29yZF9sb3dlcixkaXNwbGF5X3NpemUsdV90aWxlX3VuaXRzX3RvX3BpeGVscyxhX3Bvcyk7dl9wb3Nfd29ybGQ9KGdsX1Bvc2l0aW9uLnh5L2dsX1Bvc2l0aW9uLncrMS4wKS8yLjAqdV93b3JsZDtcXG4jaWZkZWYgRk9HXFxudl9mb2dfcG9zPWZvZ19wb3NpdGlvbihhX3Bvcyk7XFxuI2VuZGlmXFxufVwiKSxmaWxsUGF0dGVybjp1aShcInVuaWZvcm0gdmVjMiB1X3RleHNpemU7dW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTt2YXJ5aW5nIHZlYzIgdl9wb3M7XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgdmVjNCBwYXR0ZXJuXFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgdmVjNCBwYXR0ZXJuXFxudmVjMiBwYXR0ZXJuX3RsPXBhdHRlcm4ueHk7dmVjMiBwYXR0ZXJuX2JyPXBhdHRlcm4uenc7dmVjMiBpbWFnZWNvb3JkPW1vZCh2X3BvcywxLjApO3ZlYzIgcG9zPW1peChwYXR0ZXJuX3RsL3VfdGV4c2l6ZSxwYXR0ZXJuX2JyL3VfdGV4c2l6ZSxpbWFnZWNvb3JkKTt2ZWM0IG91dF9jb2xvcj10ZXh0dXJlMkQodV9pbWFnZSxwb3MpO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxub3V0X2NvbG9yPWFwcGx5X2xpZ2h0aW5nKG91dF9jb2xvcik7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbm91dF9jb2xvcj1mb2dfZGl0aGVyKGZvZ19hcHBseV9wcmVtdWx0aXBsaWVkKG91dF9jb2xvcix2X2ZvZ19wb3MpKTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9b3V0X2NvbG9yKm9wYWNpdHk7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX3VwcGVyO3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX2xvd2VyO3VuaWZvcm0gZmxvYXQgdV90aWxlX3VuaXRzX3RvX3BpeGVsczthdHRyaWJ1dGUgdmVjMiBhX3Bvczt2YXJ5aW5nIHZlYzIgdl9wb3M7XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgdmVjNCBwYXR0ZXJuXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IHBpeGVsX3JhdGlvXFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgdmVjNCBwYXR0ZXJuXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBwaXhlbF9yYXRpb1xcbnZlYzIgcGF0dGVybl90bD1wYXR0ZXJuLnh5O3ZlYzIgcGF0dGVybl9icj1wYXR0ZXJuLnp3O3ZlYzIgZGlzcGxheV9zaXplPShwYXR0ZXJuX2JyLXBhdHRlcm5fdGwpL3BpeGVsX3JhdGlvO2dsX1Bvc2l0aW9uPXVfbWF0cml4KnZlYzQoYV9wb3MsMCwxKTt2X3Bvcz1nZXRfcGF0dGVybl9wb3ModV9waXhlbF9jb29yZF91cHBlcix1X3BpeGVsX2Nvb3JkX2xvd2VyLGRpc3BsYXlfc2l6ZSx1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzLGFfcG9zKTtcXG4jaWZkZWYgRk9HXFxudl9mb2dfcG9zPWZvZ19wb3NpdGlvbihhX3Bvcyk7XFxuI2VuZGlmXFxufVwiKSxmaWxsRXh0cnVzaW9uOnVpKFwidmFyeWluZyB2ZWM0IHZfY29sb3I7XFxuI2lmZGVmIFJFTkRFUl9TSEFET1dTXFxudmFyeWluZyBoaWdocCB2ZWM0IHZfcG9zX2xpZ2h0X3ZpZXdfMDt2YXJ5aW5nIGhpZ2hwIHZlYzQgdl9wb3NfbGlnaHRfdmlld18xO3ZhcnlpbmcgZmxvYXQgdl9kZXB0aDtcXG4jZW5kaWZcXG4jaWZkZWYgRkFVWF9BT1xcbnVuaWZvcm0gbG93cCB2ZWMyIHVfYW87dmFyeWluZyB2ZWMzIHZfYW87XFxuI2VuZGlmXFxuI2lmZGVmIFpFUk9fUk9PRl9SQURJVVNcXG52YXJ5aW5nIHZlYzQgdl9yb29mX2NvbG9yO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKFpFUk9fUk9PRl9SQURJVVMpIHx8IGRlZmluZWQoUkVOREVSX1NIQURPV1MpXFxudmFyeWluZyBoaWdocCB2ZWMzIHZfbm9ybWFsO1xcbiNlbmRpZlxcbnZvaWQgbWFpbigpIHtcXG4jaWYgZGVmaW5lZChaRVJPX1JPT0ZfUkFESVVTKSB8fCBkZWZpbmVkKFJFTkRFUl9TSEFET1dTKVxcbnZlYzMgbm9ybWFsPXZfbm9ybWFsO1xcbiNlbmRpZlxcbmZsb2F0IHo7dmVjNCBjb2xvcjtcXG4jaWZkZWYgWkVST19ST09GX1JBRElVU1xcbno9ZmxvYXQobm9ybWFsLnogPiAwLjAwMDAxKTtjb2xvcj1taXgodl9jb2xvcix2X3Jvb2ZfY29sb3Iseik7XFxuI2Vsc2VcXG5jb2xvcj12X2NvbG9yO1xcbiNlbmRpZlxcbiNpZmRlZiBGQVVYX0FPXFxuZmxvYXQgaW50ZW5zaXR5PXVfYW9bMF07ZmxvYXQgaD1tYXgoMC4wLHZfYW8ueik7ZmxvYXQgaF9mbG9vcnM9aC91X2FvWzFdO2Zsb2F0IHlfc2hhZGU9MS4wLTAuOSppbnRlbnNpdHkqbWluKHZfYW8ueSwxLjApO2Zsb2F0IHNoYWRlPSgxLjAtMC4wOCppbnRlbnNpdHkpKih5X3NoYWRlKygxLjAteV9zaGFkZSkqKDEuMC1wb3coMS4wLW1pbihoX2Zsb29ycy8xNi4wLDEuMCksMTYuMCkpKSswLjA4KmludGVuc2l0eSptaW4oaF9mbG9vcnMvMTYwLjAsMS4wKTtmbG9hdCBjb25jYXZlPXZfYW8ueCp2X2FvLng7XFxuI2lmZGVmIFpFUk9fUk9PRl9SQURJVVNcXG5jb25jYXZlKj0oMS4wLXopO1xcbiNlbmRpZlxcbmZsb2F0IHhfc2hhZGU9bWl4KDEuMCxtaXgoMC42LDAuNzUsbWluKGhfZmxvb3JzLzMwLjAsMS4wKSksaW50ZW5zaXR5KSswLjEqaW50ZW5zaXR5Km1pbihoLDEuMCk7c2hhZGUqPW1peCgxLjAseF9zaGFkZSp4X3NoYWRlKnhfc2hhZGUsY29uY2F2ZSk7Y29sb3IucmdiPWNvbG9yLnJnYipzaGFkZTtcXG4jZW5kaWZcXG4jaWZkZWYgUkVOREVSX1NIQURPV1NcXG4jaWZkZWYgWkVST19ST09GX1JBRElVU1xcbm5vcm1hbD1taXgobm9ybWFsLHZlYzMoMC4wLDAuMCwxLjApLHopO1xcbiNlbmRpZlxcbmNvbG9yLnh5ej1zaGFkb3dlZF9jb2xvcl9ub3JtYWwoY29sb3IueHl6LG5vcm1hbGl6ZShub3JtYWwpLHZfcG9zX2xpZ2h0X3ZpZXdfMCx2X3Bvc19saWdodF92aWV3XzEsdl9kZXB0aCk7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbmNvbG9yPWZvZ19kaXRoZXIoZm9nX2FwcGx5X3ByZW11bHRpcGxpZWQoY29sb3Isdl9mb2dfcG9zKSk7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yPWNvbG9yO1xcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG5nbF9GcmFnQ29sb3I9dmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cIixcInVuaWZvcm0gbWF0NCB1X21hdHJpeDt1bmlmb3JtIHZlYzMgdV9saWdodGNvbG9yO3VuaWZvcm0gbG93cCB2ZWMzIHVfbGlnaHRwb3M7dW5pZm9ybSBsb3dwIGZsb2F0IHVfbGlnaHRpbnRlbnNpdHk7dW5pZm9ybSBmbG9hdCB1X3ZlcnRpY2FsX2dyYWRpZW50O3VuaWZvcm0gbG93cCBmbG9hdCB1X29wYWNpdHk7dW5pZm9ybSBmbG9hdCB1X2VkZ2VfcmFkaXVzO2F0dHJpYnV0ZSB2ZWM0IGFfcG9zX25vcm1hbF9lZDthdHRyaWJ1dGUgdmVjMiBhX2NlbnRyb2lkX3BvcztcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxuYXR0cmlidXRlIHZlYzMgYV9wb3NfMzthdHRyaWJ1dGUgdmVjMyBhX3Bvc19ub3JtYWxfMzt1bmlmb3JtIG1hdDQgdV9pbnZfcm90X21hdHJpeDt1bmlmb3JtIHZlYzIgdV9tZXJjX2NlbnRlcjt1bmlmb3JtIHZlYzMgdV90aWxlX2lkO3VuaWZvcm0gZmxvYXQgdV96b29tX3RyYW5zaXRpb247dW5pZm9ybSB2ZWMzIHVfdXBfZGlyO3VuaWZvcm0gZmxvYXQgdV9oZWlnaHRfbGlmdDtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzQgdl9jb2xvcjtcXG4jaWZkZWYgUkVOREVSX1NIQURPV1NcXG51bmlmb3JtIG1hdDQgdV9saWdodF9tYXRyaXhfMDt1bmlmb3JtIG1hdDQgdV9saWdodF9tYXRyaXhfMTt2YXJ5aW5nIGhpZ2hwIHZlYzQgdl9wb3NfbGlnaHRfdmlld18wO3ZhcnlpbmcgaGlnaHAgdmVjNCB2X3Bvc19saWdodF92aWV3XzE7dmFyeWluZyBmbG9hdCB2X2RlcHRoO1xcbiNlbmRpZlxcbiNpZmRlZiBaRVJPX1JPT0ZfUkFESVVTXFxudmFyeWluZyB2ZWM0IHZfcm9vZl9jb2xvcjtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZChaRVJPX1JPT0ZfUkFESVVTKSB8fCBkZWZpbmVkKFJFTkRFUl9TSEFET1dTKVxcbnZhcnlpbmcgaGlnaHAgdmVjMyB2X25vcm1hbDtcXG4jZW5kaWZcXG4jaWZkZWYgRkFVWF9BT1xcbnVuaWZvcm0gbG93cCB2ZWMyIHVfYW87dmFyeWluZyB2ZWMzIHZfYW87XFxuI2VuZGlmXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCBmbG9hdCBiYXNlXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCBmbG9hdCBoZWlnaHRcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgY29sb3JcXG52b2lkIG1haW4oKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgZmxvYXQgYmFzZVxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIGZsb2F0IGhlaWdodFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgY29sb3JcXG52ZWM0IHBvc19ueD1mbG9vcihhX3Bvc19ub3JtYWxfZWQqMC41KTt2ZWM0IHRvcF91cF9ueV9zdGFydD1hX3Bvc19ub3JtYWxfZWQtMi4wKnBvc19ueDt2ZWMzIHRvcF91cF9ueT10b3BfdXBfbnlfc3RhcnQueHl6O2Zsb2F0IHhfbm9ybWFsPXBvc19ueC56LzgxOTIuMDt2ZWMzIG5vcm1hbD10b3BfdXBfbnkueT09MS4wID8gdmVjMygwLjAsMC4wLDEuMCkgOiBub3JtYWxpemUodmVjMyh4X25vcm1hbCwoMi4wKnRvcF91cF9ueS56LTEuMCkqKDEuMC1hYnMoeF9ub3JtYWwpKSwwLjApKTtcXG4jaWYgZGVmaW5lZChaRVJPX1JPT0ZfUkFESVVTKSB8fCBkZWZpbmVkKFJFTkRFUl9TSEFET1dTKVxcbnZfbm9ybWFsPW5vcm1hbDtcXG4jZW5kaWZcXG5iYXNlPW1heCgwLjAsYmFzZSk7aGVpZ2h0PW1heCgwLjAsdG9wX3VwX255Lnk9PTAuMCAmJiB0b3BfdXBfbnkueD09MS4wID8gaGVpZ2h0LXVfZWRnZV9yYWRpdXMgOiBoZWlnaHQpO2Zsb2F0IHQ9dG9wX3VwX255Lng7dmVjMiBjZW50cm9pZF9wb3M9dmVjMigwLjApO1xcbiNpZiBkZWZpbmVkKEhBU19DRU5UUk9JRCkgfHwgZGVmaW5lZChURVJSQUlOKVxcbmNlbnRyb2lkX3Bvcz1hX2NlbnRyb2lkX3BvcztcXG4jZW5kaWZcXG5mbG9hdCBlbGU9MC4wO2Zsb2F0IGg9MC4wO2Zsb2F0IGNfZWxlO3ZlYzMgcG9zO1xcbiNpZmRlZiBURVJSQUlOXFxuYm9vbCBmbGF0X3Jvb2Y9Y2VudHJvaWRfcG9zLnggIT0wLjAgJiYgdCA+IDAuMDtlbGU9ZWxldmF0aW9uKHBvc19ueC54eSk7Y19lbGU9ZmxhdF9yb29mID8gY2VudHJvaWRfcG9zLnk9PTAuMCA/IGVsZXZhdGlvbkZyb21VaW50MTYoY2VudHJvaWRfcG9zLngpIDogZmxhdEVsZXZhdGlvbihjZW50cm9pZF9wb3MpIDogZWxlO2g9ZmxhdF9yb29mID8gbWF4KGNfZWxlK2hlaWdodCxlbGUrYmFzZSsyLjApIDogZWxlKyh0ID4gMC4wID8gaGVpZ2h0IDogYmFzZT09MC4wID8tNS4wIDogYmFzZSk7cG9zPXZlYzMocG9zX254Lnh5LGgpO1xcbiNlbHNlXFxuaD10ID4gMC4wID8gaGVpZ2h0IDogYmFzZTtwb3M9dmVjMyhwb3NfbngueHksaCk7XFxuI2VuZGlmXFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbmZsb2F0IGxpZnQ9ZmxvYXQoKHQrYmFzZSkgPiAwLjApKnVfaGVpZ2h0X2xpZnQ7aCs9bGlmdDt2ZWMzIGdsb2JlX25vcm1hbD1ub3JtYWxpemUobWl4KGFfcG9zX25vcm1hbF8zLzE2Mzg0LjAsdV91cF9kaXIsdV96b29tX3RyYW5zaXRpb24pKTt2ZWMzIGdsb2JlX3Bvcz1hX3Bvc18zK2dsb2JlX25vcm1hbCoodV90aWxlX3VwX3NjYWxlKmgpO3ZlYzMgbWVyY19wb3M9bWVyY2F0b3JfdGlsZV9wb3NpdGlvbih1X2ludl9yb3RfbWF0cml4LHBvcy54eSx1X3RpbGVfaWQsdV9tZXJjX2NlbnRlcikrdV91cF9kaXIqdV90aWxlX3VwX3NjYWxlKnBvcy56O3Bvcz1taXhfZ2xvYmVfbWVyY2F0b3IoZ2xvYmVfcG9zLG1lcmNfcG9zLHVfem9vbV90cmFuc2l0aW9uKTtcXG4jZW5kaWZcXG5mbG9hdCBoaWRkZW49ZmxvYXQoY2VudHJvaWRfcG9zLng9PTAuMCAmJiBjZW50cm9pZF9wb3MueT09MS4wKTtnbF9Qb3NpdGlvbj1taXgodV9tYXRyaXgqdmVjNChwb3MsMSksQVdBWSxoaWRkZW4pO1xcbiNpZmRlZiBSRU5ERVJfU0hBRE9XU1xcbnZfcG9zX2xpZ2h0X3ZpZXdfMD11X2xpZ2h0X21hdHJpeF8wKnZlYzQocG9zLDEpO3ZfcG9zX2xpZ2h0X3ZpZXdfMT11X2xpZ2h0X21hdHJpeF8xKnZlYzQocG9zLDEpO3ZfZGVwdGg9Z2xfUG9zaXRpb24udztcXG4jZW5kaWZcXG5mbG9hdCBOZG90TD0wLjA7ZmxvYXQgY29sb3J2YWx1ZT0wLjA7XFxuI2lmZGVmIExJR0hUSU5HXzNEX01PREVcXG5OZG90TD1jYWxjdWxhdGVfTmRvdEwobm9ybWFsKTtcXG4jZWxzZVxcbmNvbG9ydmFsdWU9Y29sb3IuciowLjIxMjYrY29sb3IuZyowLjcxNTIrY29sb3IuYiowLjA3MjI7dmVjNCBhbWJpZW50bGlnaHQ9dmVjNCgwLjAzLDAuMDMsMC4wMywxLjApO2NvbG9yKz1hbWJpZW50bGlnaHQ7TmRvdEw9Y2xhbXAoZG90KG5vcm1hbCx1X2xpZ2h0cG9zKSwwLjAsMS4wKTtOZG90TD1taXgoKDEuMC11X2xpZ2h0aW50ZW5zaXR5KSxtYXgoKDEuMC1jb2xvcnZhbHVlK3VfbGlnaHRpbnRlbnNpdHkpLDEuMCksTmRvdEwpO1xcbiNlbmRpZlxcbmlmIChub3JtYWwueSAhPTAuMCkge2Zsb2F0IHI9MC44NDtcXG4jaWZuZGVmIExJR0hUSU5HXzNEX01PREVcXG5yPW1peCgwLjcsMC45OCwxLjAtdV9saWdodGludGVuc2l0eSk7XFxuI2VuZGlmXFxuTmRvdEwqPShcXG4oMS4wLXVfdmVydGljYWxfZ3JhZGllbnQpKyh1X3ZlcnRpY2FsX2dyYWRpZW50KmNsYW1wKCh0K2Jhc2UpKnBvdyhoZWlnaHQvMTUwLjAsMC41KSxyLDEuMCkpKTt9dl9jb2xvcj12ZWM0KDAuMCwwLjAsMC4wLDEuMCk7XFxuI2lmZGVmIEZBVVhfQU9cXG5mbG9hdCBjb25jYXZlPXBvc19ueC53LWZsb29yKHBvc19ueC53KjAuNSkqMi4wO2Zsb2F0IHN0YXJ0PXRvcF91cF9ueV9zdGFydC53O2Zsb2F0IHlfZ3JvdW5kPTEuMC1jbGFtcCh0K2Jhc2UsMC4wLDEuMCk7ZmxvYXQgdG9wX2hlaWdodD1oZWlnaHQ7XFxuI2lmZGVmIFRFUlJBSU5cXG50b3BfaGVpZ2h0PW1peChtYXgoY19lbGUraGVpZ2h0LGVsZStiYXNlKzIuMCksZWxlK2hlaWdodCxmbG9hdChjZW50cm9pZF9wb3MueD09MC4wKSktZWxlO3lfZ3JvdW5kKz15X2dyb3VuZCo1LjAvbWF4KDMuMCx0b3BfaGVpZ2h0KTtcXG4jZW5kaWZcXG52X2FvPXZlYzMobWl4KGNvbmNhdmUsLWNvbmNhdmUsc3RhcnQpLHlfZ3JvdW5kLGgtZWxlKTtOZG90TCo9KDEuMCswLjA1KigxLjAtdG9wX3VwX255LnkpKnVfYW9bMF0pO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG50b3BfaGVpZ2h0Kz11X2hlaWdodF9saWZ0O1xcbiNlbmRpZlxcbmdsX1Bvc2l0aW9uLnotPSgwLjAwMDAwMDYqKG1pbih0b3BfaGVpZ2h0LDUwMC4pKzIuMCptaW4oYmFzZSw1MDAuMCkrNjAuMCpjb25jYXZlKzMuMCpzdGFydCkpKmdsX1Bvc2l0aW9uLnc7XFxuI2VuZGlmXFxuI2lmZGVmIExJR0hUSU5HXzNEX01PREVcXG52X2NvbG9yPWFwcGx5X2xpZ2h0aW5nKGNvbG9yLE5kb3RMKTtcXG4jZWxzZVxcbnZfY29sb3IucmdiKz1jbGFtcChjb2xvci5yZ2IqTmRvdEwqdV9saWdodGNvbG9yLG1peCh2ZWMzKDAuMCksdmVjMygwLjMpLDEuMC11X2xpZ2h0Y29sb3IpLHZlYzMoMS4wKSk7XFxuI2VuZGlmXFxudl9jb2xvcio9dV9vcGFjaXR5O1xcbiNpZmRlZiBaRVJPX1JPT0ZfUkFESVVTXFxudl9yb29mX2NvbG9yPXZlYzQoMC4wLDAuMCwwLjAsMS4wKTtcXG4jaWZkZWYgTElHSFRJTkdfM0RfTU9ERVxcbnZfcm9vZl9jb2xvcj1hcHBseV9saWdodGluZyhjb2xvcixjYWxjdWxhdGVfTmRvdEwodmVjMygwLjAsMC4wLDEuMCkpKTtcXG4jZWxzZVxcbmZsb2F0IHJvb2ZOZG90TD1jbGFtcCh1X2xpZ2h0cG9zLnosMC4wLDEuMCk7cm9vZk5kb3RMPW1peCgoMS4wLXVfbGlnaHRpbnRlbnNpdHkpLG1heCgoMS4wLWNvbG9ydmFsdWUrdV9saWdodGludGVuc2l0eSksMS4wKSxyb29mTmRvdEwpO3Zfcm9vZl9jb2xvci5yZ2IrPWNsYW1wKGNvbG9yLnJnYipyb29mTmRvdEwqdV9saWdodGNvbG9yLG1peCh2ZWMzKDAuMCksdmVjMygwLjMpLDEuMC11X2xpZ2h0Y29sb3IpLHZlYzMoMS4wKSk7XFxuI2VuZGlmXFxudl9yb29mX2NvbG9yKj11X29wYWNpdHk7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbnZfZm9nX3Bvcz1mb2dfcG9zaXRpb24ocG9zKTtcXG4jZW5kaWZcXG59XCIpLGZpbGxFeHRydXNpb25QYXR0ZXJuOnVpKFwidW5pZm9ybSB2ZWMyIHVfdGV4c2l6ZTt1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xcbiNpZmRlZiBGQVVYX0FPXFxudW5pZm9ybSBsb3dwIHZlYzIgdV9hbzt2YXJ5aW5nIHZlYzMgdl9hbztcXG4jZW5kaWZcXG4jaWZkZWYgTElHSFRJTkdfM0RfTU9ERVxcbnZhcnlpbmcgZmxvYXQgdl9OZG90TDtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzIgdl9wb3M7dmFyeWluZyB2ZWM0IHZfbGlnaHRpbmc7dW5pZm9ybSBsb3dwIGZsb2F0IHVfb3BhY2l0eTtcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmFzZVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoZWlnaHRcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgdmVjNCBwYXR0ZXJuXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IHBpeGVsX3JhdGlvXFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmFzZVxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgaGVpZ2h0XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCB2ZWM0IHBhdHRlcm5cXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IHBpeGVsX3JhdGlvXFxudmVjMiBwYXR0ZXJuX3RsPXBhdHRlcm4ueHk7dmVjMiBwYXR0ZXJuX2JyPXBhdHRlcm4uenc7dmVjMiBpbWFnZWNvb3JkPW1vZCh2X3BvcywxLjApO3ZlYzIgcG9zPW1peChwYXR0ZXJuX3RsL3VfdGV4c2l6ZSxwYXR0ZXJuX2JyL3VfdGV4c2l6ZSxpbWFnZWNvb3JkKTt2ZWM0IG91dF9jb2xvcj10ZXh0dXJlMkQodV9pbWFnZSxwb3MpO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxub3V0X2NvbG9yPWFwcGx5X2xpZ2h0aW5nKG91dF9jb2xvcix2X05kb3RMKSp1X29wYWNpdHk7XFxuI2Vsc2VcXG5vdXRfY29sb3I9b3V0X2NvbG9yKnZfbGlnaHRpbmc7XFxuI2VuZGlmXFxuI2lmZGVmIEZBVVhfQU9cXG5mbG9hdCBpbnRlbnNpdHk9dV9hb1swXTtmbG9hdCBoPW1heCgwLjAsdl9hby56KTtmbG9hdCBoX2Zsb29ycz1oL3VfYW9bMV07ZmxvYXQgeV9zaGFkZT0xLjAtMC45KmludGVuc2l0eSptaW4odl9hby55LDEuMCk7ZmxvYXQgc2hhZGU9KDEuMC0wLjA4KmludGVuc2l0eSkqKHlfc2hhZGUrKDEuMC15X3NoYWRlKSooMS4wLXBvdygxLjAtbWluKGhfZmxvb3JzLzE2LjAsMS4wKSwxNi4wKSkpKzAuMDgqaW50ZW5zaXR5Km1pbihoX2Zsb29ycy8xNjAuMCwxLjApO2Zsb2F0IGNvbmNhdmU9dl9hby54KnZfYW8ueDtmbG9hdCB4X3NoYWRlPW1peCgxLjAsbWl4KDAuNiwwLjc1LG1pbihoX2Zsb29ycy8zMC4wLDEuMCkpLGludGVuc2l0eSkrMC4xKmludGVuc2l0eSptaW4oaCwxLjApO3NoYWRlKj1taXgoMS4wLHhfc2hhZGUqeF9zaGFkZSp4X3NoYWRlLGNvbmNhdmUpO291dF9jb2xvci5yZ2I9b3V0X2NvbG9yLnJnYipzaGFkZTtcXG4jZW5kaWZcXG4jaWZkZWYgRk9HXFxub3V0X2NvbG9yPWZvZ19kaXRoZXIoZm9nX2FwcGx5X3ByZW11bHRpcGxpZWQob3V0X2NvbG9yLHZfZm9nX3BvcykpO1xcbiNlbmRpZlxcbmdsX0ZyYWdDb2xvcj1vdXRfY29sb3I7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX3VwcGVyO3VuaWZvcm0gdmVjMiB1X3BpeGVsX2Nvb3JkX2xvd2VyO3VuaWZvcm0gZmxvYXQgdV9oZWlnaHRfZmFjdG9yO3VuaWZvcm0gZmxvYXQgdV90aWxlX3VuaXRzX3RvX3BpeGVsczt1bmlmb3JtIGZsb2F0IHVfdmVydGljYWxfZ3JhZGllbnQ7dW5pZm9ybSBsb3dwIGZsb2F0IHVfb3BhY2l0eTt1bmlmb3JtIHZlYzMgdV9saWdodGNvbG9yO3VuaWZvcm0gbG93cCB2ZWMzIHVfbGlnaHRwb3M7dW5pZm9ybSBsb3dwIGZsb2F0IHVfbGlnaHRpbnRlbnNpdHk7YXR0cmlidXRlIHZlYzQgYV9wb3Nfbm9ybWFsX2VkO2F0dHJpYnV0ZSB2ZWMyIGFfY2VudHJvaWRfcG9zO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5hdHRyaWJ1dGUgdmVjMyBhX3Bvc18zO2F0dHJpYnV0ZSB2ZWMzIGFfcG9zX25vcm1hbF8zO3VuaWZvcm0gbWF0NCB1X2ludl9yb3RfbWF0cml4O3VuaWZvcm0gdmVjMiB1X21lcmNfY2VudGVyO3VuaWZvcm0gdmVjMyB1X3RpbGVfaWQ7dW5pZm9ybSBmbG9hdCB1X3pvb21fdHJhbnNpdGlvbjt1bmlmb3JtIHZlYzMgdV91cF9kaXI7dW5pZm9ybSBmbG9hdCB1X2hlaWdodF9saWZ0O1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMiB2X3Bvczt2YXJ5aW5nIHZlYzQgdl9saWdodGluZztcXG4jaWZkZWYgRkFVWF9BT1xcbnVuaWZvcm0gbG93cCB2ZWMyIHVfYW87dmFyeWluZyB2ZWMzIHZfYW87XFxuI2VuZGlmXFxuI2lmZGVmIExJR0hUSU5HXzNEX01PREVcXG52YXJ5aW5nIGZsb2F0IHZfTmRvdEw7XFxuI2VuZGlmXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGJhc2VcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgaGVpZ2h0XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIHZlYzQgcGF0dGVyblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBwaXhlbF9yYXRpb1xcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGJhc2VcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGhlaWdodFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgdmVjNCBwYXR0ZXJuXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBwaXhlbF9yYXRpb1xcbnZlYzIgcGF0dGVybl90bD1wYXR0ZXJuLnh5O3ZlYzIgcGF0dGVybl9icj1wYXR0ZXJuLnp3O3ZlYzQgcG9zX254PWZsb29yKGFfcG9zX25vcm1hbF9lZCowLjUpO21lZGl1bXAgdmVjNCB0b3BfdXBfbnlfc3RhcnQ9YV9wb3Nfbm9ybWFsX2VkLTIuMCpwb3Nfbng7bWVkaXVtcCB2ZWMzIHRvcF91cF9ueT10b3BfdXBfbnlfc3RhcnQueHl6O2Zsb2F0IHhfbm9ybWFsPXBvc19ueC56LzgxOTIuMDt2ZWMzIG5vcm1hbD10b3BfdXBfbnkueT09MS4wID8gdmVjMygwLjAsMC4wLDEuMCkgOiBub3JtYWxpemUodmVjMyh4X25vcm1hbCwoMi4wKnRvcF91cF9ueS56LTEuMCkqKDEuMC1hYnMoeF9ub3JtYWwpKSwwLjApKTtmbG9hdCBlZGdlZGlzdGFuY2U9YV9wb3Nfbm9ybWFsX2VkLnc7dmVjMiBkaXNwbGF5X3NpemU9KHBhdHRlcm5fYnItcGF0dGVybl90bCkvcGl4ZWxfcmF0aW87YmFzZT1tYXgoMC4wLGJhc2UpO2hlaWdodD1tYXgoMC4wLGhlaWdodCk7ZmxvYXQgdD10b3BfdXBfbnkueDtmbG9hdCB6PXQgPiAwLjAgPyBoZWlnaHQgOiBiYXNlO3ZlYzIgY2VudHJvaWRfcG9zPXZlYzIoMC4wKTtcXG4jaWYgZGVmaW5lZChIQVNfQ0VOVFJPSUQpIHx8IGRlZmluZWQoVEVSUkFJTilcXG5jZW50cm9pZF9wb3M9YV9jZW50cm9pZF9wb3M7XFxuI2VuZGlmXFxuZmxvYXQgZWxlPTAuMDtmbG9hdCBoPXo7dmVjMyBwO2Zsb2F0IGNfZWxlO1xcbiNpZmRlZiBURVJSQUlOXFxuYm9vbCBmbGF0X3Jvb2Y9Y2VudHJvaWRfcG9zLnggIT0wLjAgJiYgdCA+IDAuMDtlbGU9ZWxldmF0aW9uKHBvc19ueC54eSk7Y19lbGU9ZmxhdF9yb29mID8gY2VudHJvaWRfcG9zLnk9PTAuMCA/IGVsZXZhdGlvbkZyb21VaW50MTYoY2VudHJvaWRfcG9zLngpIDogZmxhdEVsZXZhdGlvbihjZW50cm9pZF9wb3MpIDogZWxlO2g9ZmxhdF9yb29mID8gbWF4KGNfZWxlK2hlaWdodCxlbGUrYmFzZSsyLjApIDogZWxlKyh0ID4gMC4wID8gaGVpZ2h0IDogYmFzZT09MC4wID8tNS4wIDogYmFzZSk7cD12ZWMzKHBvc19ueC54eSxoKTtcXG4jZWxzZVxcbnA9dmVjMyhwb3NfbngueHkseik7XFxuI2VuZGlmXFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbmZsb2F0IGxpZnQ9ZmxvYXQoKHQrYmFzZSkgPiAwLjApKnVfaGVpZ2h0X2xpZnQ7aCs9bGlmdDt2ZWMzIGdsb2JlX25vcm1hbD1ub3JtYWxpemUobWl4KGFfcG9zX25vcm1hbF8zLzE2Mzg0LjAsdV91cF9kaXIsdV96b29tX3RyYW5zaXRpb24pKTt2ZWMzIGdsb2JlX3Bvcz1hX3Bvc18zK2dsb2JlX25vcm1hbCoodV90aWxlX3VwX3NjYWxlKihwLnorbGlmdCkpO3ZlYzMgbWVyY19wb3M9bWVyY2F0b3JfdGlsZV9wb3NpdGlvbih1X2ludl9yb3RfbWF0cml4LHAueHksdV90aWxlX2lkLHVfbWVyY19jZW50ZXIpK3VfdXBfZGlyKnVfdGlsZV91cF9zY2FsZSpwLno7cD1taXhfZ2xvYmVfbWVyY2F0b3IoZ2xvYmVfcG9zLG1lcmNfcG9zLHVfem9vbV90cmFuc2l0aW9uKTtcXG4jZW5kaWZcXG5mbG9hdCBoaWRkZW49ZmxvYXQoY2VudHJvaWRfcG9zLng9PTAuMCAmJiBjZW50cm9pZF9wb3MueT09MS4wKTtnbF9Qb3NpdGlvbj1taXgodV9tYXRyaXgqdmVjNChwLDEpLEFXQVksaGlkZGVuKTt2ZWMyIHBvcz1ub3JtYWwuej09MS4wXFxuPyBwb3NfbngueHlcXG46IHZlYzIoZWRnZWRpc3RhbmNlLHoqdV9oZWlnaHRfZmFjdG9yKTt2X3Bvcz1nZXRfcGF0dGVybl9wb3ModV9waXhlbF9jb29yZF91cHBlcix1X3BpeGVsX2Nvb3JkX2xvd2VyLGRpc3BsYXlfc2l6ZSx1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzLHBvcyk7dl9saWdodGluZz12ZWM0KDAuMCwwLjAsMC4wLDEuMCk7ZmxvYXQgTmRvdEw9MC4wO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxuTmRvdEw9Y2FsY3VsYXRlX05kb3RMKG5vcm1hbCk7XFxuI2Vsc2VcXG5OZG90TD1jbGFtcChkb3Qobm9ybWFsLHVfbGlnaHRwb3MpLDAuMCwxLjApO05kb3RMPW1peCgoMS4wLXVfbGlnaHRpbnRlbnNpdHkpLG1heCgoMC41K3VfbGlnaHRpbnRlbnNpdHkpLDEuMCksTmRvdEwpO1xcbiNlbmRpZlxcbmlmIChub3JtYWwueSAhPTAuMCkge2Zsb2F0IHI9MC44NDtcXG4jaWZuZGVmIExJR0hUSU5HXzNEX01PREVcXG5yPW1peCgwLjcsMC45OCwxLjAtdV9saWdodGludGVuc2l0eSk7XFxuI2VuZGlmXFxuTmRvdEwqPShcXG4oMS4wLXVfdmVydGljYWxfZ3JhZGllbnQpKyh1X3ZlcnRpY2FsX2dyYWRpZW50KmNsYW1wKCh0K2Jhc2UpKnBvdyhoZWlnaHQvMTUwLjAsMC41KSxyLDEuMCkpKTt9XFxuI2lmZGVmIEZBVVhfQU9cXG5mbG9hdCBjb25jYXZlPXBvc19ueC53LWZsb29yKHBvc19ueC53KjAuNSkqMi4wO2Zsb2F0IHN0YXJ0PXRvcF91cF9ueV9zdGFydC53O2Zsb2F0IHlfZ3JvdW5kPTEuMC1jbGFtcCh0K2Jhc2UsMC4wLDEuMCk7ZmxvYXQgdG9wX2hlaWdodD1oZWlnaHQ7XFxuI2lmZGVmIFRFUlJBSU5cXG50b3BfaGVpZ2h0PW1peChtYXgoY19lbGUraGVpZ2h0LGVsZStiYXNlKzIuMCksZWxlK2hlaWdodCxmbG9hdChjZW50cm9pZF9wb3MueD09MC4wKSktZWxlO3lfZ3JvdW5kKz15X2dyb3VuZCo1LjAvbWF4KDMuMCx0b3BfaGVpZ2h0KTtcXG4jZW5kaWZcXG52X2FvPXZlYzMobWl4KGNvbmNhdmUsLWNvbmNhdmUsc3RhcnQpLHlfZ3JvdW5kLGgtZWxlKTtOZG90TCo9KDEuMCswLjA1KigxLjAtdG9wX3VwX255LnkpKnVfYW9bMF0pO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG50b3BfaGVpZ2h0Kz11X2hlaWdodF9saWZ0O1xcbiNlbmRpZlxcbmdsX1Bvc2l0aW9uLnotPSgwLjAwMDAwMDYqKG1pbih0b3BfaGVpZ2h0LDUwMC4pKzIuMCptaW4oYmFzZSw1MDAuMCkrNjAuMCpjb25jYXZlKzMuMCpzdGFydCkpKmdsX1Bvc2l0aW9uLnc7XFxuI2VuZGlmXFxuI2lmZGVmIExJR0hUSU5HXzNEX01PREVcXG52X05kb3RMPU5kb3RMO1xcbiNlbHNlXFxudl9saWdodGluZy5yZ2IrPWNsYW1wKE5kb3RMKnVfbGlnaHRjb2xvcixtaXgodmVjMygwLjApLHZlYzMoMC4zKSwxLjAtdV9saWdodGNvbG9yKSx2ZWMzKDEuMCkpO3ZfbGlnaHRpbmcqPXVfb3BhY2l0eTtcXG4jZW5kaWYgXFxuI2lmZGVmIEZPR1xcbnZfZm9nX3Bvcz1mb2dfcG9zaXRpb24ocCk7XFxuI2VuZGlmXFxufVwiKSxoaWxsc2hhZGVQcmVwYXJlOnVpKFwiI2lmZGVmIEdMX0VTXFxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbmRpZlxcbnVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dmFyeWluZyB2ZWMyIHZfcG9zO3VuaWZvcm0gdmVjMiB1X2RpbWVuc2lvbjt1bmlmb3JtIGZsb2F0IHVfem9vbTt1bmlmb3JtIHZlYzQgdV91bnBhY2s7ZmxvYXQgZ2V0RWxldmF0aW9uKHZlYzIgY29vcmQpIHtcXG4jaWZkZWYgVEVSUkFJTl9ERU1fRkxPQVRfRk9STUFUXFxucmV0dXJuIHRleHR1cmUyRCh1X2ltYWdlLGNvb3JkKS5hLzQuMDtcXG4jZWxzZVxcbnZlYzQgZGF0YT10ZXh0dXJlMkQodV9pbWFnZSxjb29yZCkqMjU1LjA7ZGF0YS5hPS0xLjA7cmV0dXJuIGRvdChkYXRhLHVfdW5wYWNrKS80LjA7XFxuI2VuZGlmXFxufXZvaWQgbWFpbigpIHt2ZWMyIGVwc2lsb249MS4wL3VfZGltZW5zaW9uO2Zsb2F0IGE9Z2V0RWxldmF0aW9uKHZfcG9zK3ZlYzIoLWVwc2lsb24ueCwtZXBzaWxvbi55KSk7ZmxvYXQgYj1nZXRFbGV2YXRpb24odl9wb3MrdmVjMigwLC1lcHNpbG9uLnkpKTtmbG9hdCBjPWdldEVsZXZhdGlvbih2X3Bvcyt2ZWMyKGVwc2lsb24ueCwtZXBzaWxvbi55KSk7ZmxvYXQgZD1nZXRFbGV2YXRpb24odl9wb3MrdmVjMigtZXBzaWxvbi54LDApKTtmbG9hdCBlPWdldEVsZXZhdGlvbih2X3Bvcyt2ZWMyKGVwc2lsb24ueCwwKSk7ZmxvYXQgZj1nZXRFbGV2YXRpb24odl9wb3MrdmVjMigtZXBzaWxvbi54LGVwc2lsb24ueSkpO2Zsb2F0IGc9Z2V0RWxldmF0aW9uKHZfcG9zK3ZlYzIoMCxlcHNpbG9uLnkpKTtmbG9hdCBoPWdldEVsZXZhdGlvbih2X3Bvcyt2ZWMyKGVwc2lsb24ueCxlcHNpbG9uLnkpKTtmbG9hdCBleGFnZ2VyYXRpb25GYWN0b3I9dV96b29tIDwgMi4wID8gMC40IDogdV96b29tIDwgNC41ID8gMC4zNSA6IDAuMztmbG9hdCBleGFnZ2VyYXRpb249dV96b29tIDwgMTUuMCA/ICh1X3pvb20tMTUuMCkqZXhhZ2dlcmF0aW9uRmFjdG9yIDogMC4wO3ZlYzIgZGVyaXY9dmVjMihcXG4oYytlK2UraCktKGErZCtkK2YpLChmK2crZytoKS0oYStiK2IrYylcXG4pL3BvdygyLjAsZXhhZ2dlcmF0aW9uKygxOS4yNTYyLXVfem9vbSkpO2dsX0ZyYWdDb2xvcj1jbGFtcCh2ZWM0KFxcbmRlcml2LngvMi4wKzAuNSxkZXJpdi55LzIuMCswLjUsMS4wLDEuMCksMC4wLDEuMCk7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gdmVjMiB1X2RpbWVuc2lvbjthdHRyaWJ1dGUgdmVjMiBhX3BvczthdHRyaWJ1dGUgdmVjMiBhX3RleHR1cmVfcG9zO3ZhcnlpbmcgdmVjMiB2X3Bvczt2b2lkIG1haW4oKSB7Z2xfUG9zaXRpb249dV9tYXRyaXgqdmVjNChhX3BvcywwLDEpO2hpZ2hwIHZlYzIgZXBzaWxvbj0xLjAvdV9kaW1lbnNpb247ZmxvYXQgc2NhbGU9KHVfZGltZW5zaW9uLngtMi4wKS91X2RpbWVuc2lvbi54O3ZfcG9zPShhX3RleHR1cmVfcG9zLzgxOTIuMCkqc2NhbGUrZXBzaWxvbjt9XCIpLGhpbGxzaGFkZTp1aShcInVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dmFyeWluZyB2ZWMyIHZfcG9zO3VuaWZvcm0gdmVjMiB1X2xhdHJhbmdlO3VuaWZvcm0gdmVjMiB1X2xpZ2h0O3VuaWZvcm0gdmVjNCB1X3NoYWRvdzt1bmlmb3JtIHZlYzQgdV9oaWdobGlnaHQ7dW5pZm9ybSB2ZWM0IHVfYWNjZW50O3ZvaWQgbWFpbigpIHt2ZWM0IHBpeGVsPXRleHR1cmUyRCh1X2ltYWdlLHZfcG9zKTt2ZWMyIGRlcml2PSgocGl4ZWwucmcqMi4wKS0xLjApO2Zsb2F0IHNjYWxlRmFjdG9yPWNvcyhyYWRpYW5zKCh1X2xhdHJhbmdlWzBdLXVfbGF0cmFuZ2VbMV0pKigxLjAtdl9wb3MueSkrdV9sYXRyYW5nZVsxXSkpO2Zsb2F0IHNsb3BlPWF0YW4oMS4yNSpsZW5ndGgoZGVyaXYpL3NjYWxlRmFjdG9yKTtmbG9hdCBhc3BlY3Q9ZGVyaXYueCAhPTAuMCA/IGF0YW4oZGVyaXYueSwtZGVyaXYueCkgOiBQSS8yLjAqKGRlcml2LnkgPiAwLjAgPyAxLjAgOi0xLjApO2Zsb2F0IGludGVuc2l0eT11X2xpZ2h0Lng7ZmxvYXQgYXppbXV0aD11X2xpZ2h0LnkrUEk7ZmxvYXQgYmFzZT0xLjg3NS1pbnRlbnNpdHkqMS43NTtmbG9hdCBtYXhWYWx1ZT0wLjUqUEk7ZmxvYXQgc2NhbGVkU2xvcGU9aW50ZW5zaXR5ICE9MC41ID8gKChwb3coYmFzZSxzbG9wZSktMS4wKS8ocG93KGJhc2UsbWF4VmFsdWUpLTEuMCkpKm1heFZhbHVlIDogc2xvcGU7ZmxvYXQgYWNjZW50PWNvcyhzY2FsZWRTbG9wZSk7dmVjNCBhY2NlbnRfY29sb3I9KDEuMC1hY2NlbnQpKnVfYWNjZW50KmNsYW1wKGludGVuc2l0eSoyLjAsMC4wLDEuMCk7ZmxvYXQgc2hhZGU9YWJzKG1vZCgoYXNwZWN0K2F6aW11dGgpL1BJKzAuNSwyLjApLTEuMCk7dmVjNCBzaGFkZV9jb2xvcj1taXgodV9zaGFkb3csdV9oaWdobGlnaHQsc2hhZGUpKnNpbihzY2FsZWRTbG9wZSkqY2xhbXAoaW50ZW5zaXR5KjIuMCwwLjAsMS4wKTtnbF9GcmFnQ29sb3I9YWNjZW50X2NvbG9yKigxLjAtc2hhZGVfY29sb3IuYSkrc2hhZGVfY29sb3I7XFxuI2lmZGVmIExJR0hUSU5HXzNEX01PREVcXG5nbF9GcmFnQ29sb3I9YXBwbHlfbGlnaHRpbmcoZ2xfRnJhZ0NvbG9yKTtcXG4jZW5kaWZcXG4jaWZkZWYgRk9HXFxuZ2xfRnJhZ0NvbG9yPWZvZ19kaXRoZXIoZm9nX2FwcGx5X3ByZW11bHRpcGxpZWQoZ2xfRnJhZ0NvbG9yLHZfZm9nX3BvcykpO1xcbiNlbmRpZlxcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG5nbF9GcmFnQ29sb3I9dmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cIixcInVuaWZvcm0gbWF0NCB1X21hdHJpeDthdHRyaWJ1dGUgdmVjMiBhX3BvczthdHRyaWJ1dGUgdmVjMiBhX3RleHR1cmVfcG9zO3ZhcnlpbmcgdmVjMiB2X3Bvczt2b2lkIG1haW4oKSB7Z2xfUG9zaXRpb249dV9tYXRyaXgqdmVjNChhX3BvcywwLDEpO3ZfcG9zPWFfdGV4dHVyZV9wb3MvODE5Mi4wO1xcbiNpZmRlZiBGT0dcXG52X2ZvZ19wb3M9Zm9nX3Bvc2l0aW9uKGFfcG9zKTtcXG4jZW5kaWZcXG59XCIpLGxpbmU6dWkoXCJ1bmlmb3JtIGxvd3AgZmxvYXQgdV9kZXZpY2VfcGl4ZWxfcmF0aW87dW5pZm9ybSBmbG9hdCB1X2FscGhhX2Rpc2NhcmRfdGhyZXNob2xkO3VuaWZvcm0gaGlnaHAgdmVjMiB1X3RyaW1fb2Zmc2V0O3ZhcnlpbmcgdmVjMiB2X3dpZHRoMjt2YXJ5aW5nIHZlYzIgdl9ub3JtYWw7dmFyeWluZyBmbG9hdCB2X2dhbW1hX3NjYWxlO3ZhcnlpbmcgaGlnaHAgdmVjNCB2X3V2O1xcbiNpZmRlZiBSRU5ERVJfTElORV9EQVNIXFxudW5pZm9ybSBzYW1wbGVyMkQgdV9kYXNoX2ltYWdlO3ZhcnlpbmcgdmVjMiB2X3RleDtcXG4jZW5kaWZcXG4jaWZkZWYgUkVOREVSX0xJTkVfR1JBRElFTlRcXG51bmlmb3JtIHNhbXBsZXIyRCB1X2dyYWRpZW50X2ltYWdlO1xcbiNlbmRpZlxcbnVuaWZvcm0gZmxvYXQgdV9ib3JkZXJfd2lkdGg7dW5pZm9ybSB2ZWM0IHVfYm9yZGVyX2NvbG9yO2Zsb2F0IGx1bWluYW5jZSh2ZWMzIGMpIHtyZXR1cm4gKGMucitjLnIrYy5iK2MuZytjLmcrYy5nKSowLjE2Njc7fVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBmbG9vcndpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIHZlYzQgZGFzaFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5mbG9hdCBsaW5lYXJzdGVwKGZsb2F0IGVkZ2UwLGZsb2F0IGVkZ2UxLGZsb2F0IHgpIHtyZXR1cm4gIGNsYW1wKCh4LWVkZ2UwKS8oZWRnZTEtZWRnZTApLDAuMCwxLjApO312b2lkIG1haW4oKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgZmxvb3J3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgdmVjNCBkYXNoXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuZmxvYXQgZGlzdD1sZW5ndGgodl9ub3JtYWwpKnZfd2lkdGgyLnM7ZmxvYXQgYmx1cjI9KGJsdXIrMS4wL3VfZGV2aWNlX3BpeGVsX3JhdGlvKSp2X2dhbW1hX3NjYWxlO2Zsb2F0IGFscGhhPWNsYW1wKG1pbihkaXN0LSh2X3dpZHRoMi50LWJsdXIyKSx2X3dpZHRoMi5zLWRpc3QpL2JsdXIyLDAuMCwxLjApO1xcbiNpZmRlZiBSRU5ERVJfTElORV9EQVNIXFxuZmxvYXQgc2RmZGlzdD10ZXh0dXJlMkQodV9kYXNoX2ltYWdlLHZfdGV4KS5hO2Zsb2F0IHNkZmdhbW1hPTEuMC8oMi4wKnVfZGV2aWNlX3BpeGVsX3JhdGlvKS9kYXNoLno7YWxwaGEqPWxpbmVhcnN0ZXAoMC41LXNkZmdhbW1hL2Zsb29yd2lkdGgsMC41K3NkZmdhbW1hL2Zsb29yd2lkdGgsc2RmZGlzdCk7XFxuI2VuZGlmXFxuaGlnaHAgdmVjNCBvdXRfY29sb3I7XFxuI2lmZGVmIFJFTkRFUl9MSU5FX0dSQURJRU5UXFxub3V0X2NvbG9yPXRleHR1cmUyRCh1X2dyYWRpZW50X2ltYWdlLHZfdXYueHkpO1xcbiNlbHNlXFxub3V0X2NvbG9yPWNvbG9yO1xcbiNlbmRpZlxcbmZsb2F0IHRyaW1tZWQ9MS4wO1xcbiNpZmRlZiBSRU5ERVJfTElORV9UUklNX09GRlNFVFxcbmhpZ2hwIGZsb2F0IHN0YXJ0PXZfdXZbMl07aGlnaHAgZmxvYXQgZW5kPXZfdXZbM107aGlnaHAgZmxvYXQgdHJpbV9zdGFydD11X3RyaW1fb2Zmc2V0WzBdO2hpZ2hwIGZsb2F0IHRyaW1fZW5kPXVfdHJpbV9vZmZzZXRbMV07aGlnaHAgZmxvYXQgbGluZV9wcm9ncmVzcz0oc3RhcnQrKHZfdXYueCkqKGVuZC1zdGFydCkpO2lmICh0cmltX2VuZCA+IHRyaW1fc3RhcnQpIHtpZiAobGluZV9wcm9ncmVzcyA8PXRyaW1fZW5kICYmIGxpbmVfcHJvZ3Jlc3MgPj10cmltX3N0YXJ0KSB7b3V0X2NvbG9yPXZlYzQoMCwwLDAsMCk7dHJpbW1lZD0wLjA7fX1cXG4jZW5kaWZcXG4jaWZkZWYgTElHSFRJTkdfM0RfTU9ERVxcbm91dF9jb2xvcj1hcHBseV9saWdodGluZyhvdXRfY29sb3IpO1xcbiNlbmRpZlxcbiNpZmRlZiBGT0dcXG5vdXRfY29sb3I9Zm9nX2RpdGhlcihmb2dfYXBwbHlfcHJlbXVsdGlwbGllZChvdXRfY29sb3Isdl9mb2dfcG9zKSk7XFxuI2VuZGlmXFxuI2lmZGVmIFJFTkRFUl9MSU5FX0FMUEhBX0RJU0NBUkRcXG5pZiAoYWxwaGEgPCB1X2FscGhhX2Rpc2NhcmRfdGhyZXNob2xkKSB7ZGlzY2FyZDt9XFxuI2VuZGlmXFxuI2lmZGVmIFJFTkRFUl9MSU5FX0JPUkRFUlxcbmZsb2F0IGVkZ2VCbHVyPSh1X2JvcmRlcl93aWR0aCsxLjAvdV9kZXZpY2VfcGl4ZWxfcmF0aW8pO2Zsb2F0IGFscGhhMj1jbGFtcChtaW4oZGlzdC0odl93aWR0aDIudC1lZGdlQmx1ciksdl93aWR0aDIucy1kaXN0KS9lZGdlQmx1ciwwLjAsMS4wKTtpZiAoYWxwaGEyIDwgMS4pIHtmbG9hdCBzbW9vdGhBbHBoYT1zbW9vdGhzdGVwKDAuNiwxLjAsYWxwaGEyKTtcXG4jaWZkZWYgUkVOREVSX0xJTkVfQk9SREVSX0FVVE9cXG5mbG9hdCBZPShvdXRfY29sb3IuYSA+IDAuMDEpID8gbHVtaW5hbmNlKG91dF9jb2xvci5yZ2Ivb3V0X2NvbG9yLmEpIDogMS47ZmxvYXQgYWRqdXN0bWVudD0oWSA+IDAuKSA/IDAuNS9ZIDogMC40NTtpZiAob3V0X2NvbG9yLmEgPiAwLjI1ICYmIFkgPCAwLjI1KSB7dmVjMyBib3JkZXJDb2xvcj0oWSA+IDAuKSA/IG91dF9jb2xvci5yZ2IgOiB2ZWMzKDEsMSwxKSpvdXRfY29sb3IuYTtvdXRfY29sb3IucmdiPW91dF9jb2xvci5yZ2IrYm9yZGVyQ29sb3IqKGFkanVzdG1lbnQqKDEuMC1zbW9vdGhBbHBoYSkpO30gZWxzZSB7b3V0X2NvbG9yLnJnYio9KDAuNiArMC40KnNtb290aEFscGhhKTt9XFxuI2Vsc2VcXG5vdXRfY29sb3IucmdiPW1peCh1X2JvcmRlcl9jb2xvci5yZ2IqdV9ib3JkZXJfY29sb3IuYSp0cmltbWVkLG91dF9jb2xvci5yZ2Isc21vb3RoQWxwaGEpO1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9b3V0X2NvbG9yKihhbHBoYSpvcGFjaXR5KTtcXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XCIsXCJcXG4jZGVmaW5lIEVYVFJVREVfU0NBTEUgMC4wMTU4NzMwMTZcXG5hdHRyaWJ1dGUgdmVjMiBhX3Bvc19ub3JtYWw7YXR0cmlidXRlIHZlYzQgYV9kYXRhO1xcbiNpZiBkZWZpbmVkKFJFTkRFUl9MSU5FX0dSQURJRU5UKSB8fCBkZWZpbmVkKFJFTkRFUl9MSU5FX1RSSU1fT0ZGU0VUKVxcbmF0dHJpYnV0ZSBoaWdocCB2ZWM0IGFfcGFja2VkO1xcbiNlbmRpZlxcbiNpZmRlZiBSRU5ERVJfTElORV9EQVNIXFxuYXR0cmlidXRlIGZsb2F0IGFfbGluZXNvZmFyO1xcbiNlbmRpZlxcbnVuaWZvcm0gbWF0NCB1X21hdHJpeDt1bmlmb3JtIG1hdDIgdV9waXhlbHNfdG9fdGlsZV91bml0czt1bmlmb3JtIHZlYzIgdV91bml0c190b19waXhlbHM7dW5pZm9ybSBsb3dwIGZsb2F0IHVfZGV2aWNlX3BpeGVsX3JhdGlvO3ZhcnlpbmcgdmVjMiB2X25vcm1hbDt2YXJ5aW5nIHZlYzIgdl93aWR0aDI7dmFyeWluZyBmbG9hdCB2X2dhbW1hX3NjYWxlO3ZhcnlpbmcgaGlnaHAgdmVjNCB2X3V2O1xcbiNpZmRlZiBSRU5ERVJfTElORV9EQVNIXFxudW5pZm9ybSB2ZWMyIHVfdGV4c2l6ZTt1bmlmb3JtIGZsb2F0IHVfdGlsZV91bml0c190b19waXhlbHM7dmFyeWluZyB2ZWMyIHZfdGV4O1xcbiNlbmRpZlxcbiNpZmRlZiBSRU5ERVJfTElORV9HUkFESUVOVFxcbnVuaWZvcm0gZmxvYXQgdV9pbWFnZV9oZWlnaHQ7XFxuI2VuZGlmXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCB2ZWM0IGNvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGZsb29yd2lkdGhcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgdmVjNCBkYXNoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvZmZzZXRcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIG1lZGl1bXAgZmxvYXQgd2lkdGhcXG52b2lkIG1haW4oKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBjb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgZmxvb3J3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgdmVjNCBkYXNoXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBibHVyXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb2Zmc2V0XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCBmbG9hdCB3aWR0aFxcbmZsb2F0IEFOVElBTElBU0lORz0xLjAvdV9kZXZpY2VfcGl4ZWxfcmF0aW8vMi4wO3ZlYzIgYV9leHRydWRlPWFfZGF0YS54eS0xMjguMDtmbG9hdCBhX2RpcmVjdGlvbj1tb2QoYV9kYXRhLnosNC4wKS0xLjA7dmVjMiBwb3M9Zmxvb3IoYV9wb3Nfbm9ybWFsKjAuNSk7bWVkaXVtcCB2ZWMyIG5vcm1hbD1hX3Bvc19ub3JtYWwtMi4wKnBvcztub3JtYWwueT1ub3JtYWwueSoyLjAtMS4wO3Zfbm9ybWFsPW5vcm1hbDtnYXB3aWR0aD1nYXB3aWR0aC8yLjA7ZmxvYXQgaGFsZndpZHRoPXdpZHRoLzIuMDtvZmZzZXQ9LTEuMCpvZmZzZXQ7ZmxvYXQgaW5zZXQ9Z2Fwd2lkdGgrKGdhcHdpZHRoID4gMC4wID8gQU5USUFMSUFTSU5HIDogMC4wKTtmbG9hdCBvdXRzZXQ9Z2Fwd2lkdGgraGFsZndpZHRoKihnYXB3aWR0aCA+IDAuMCA/IDIuMCA6IDEuMCkrKGhhbGZ3aWR0aD09MC4wID8gMC4wIDogQU5USUFMSUFTSU5HKTttZWRpdW1wIHZlYzIgZGlzdD1vdXRzZXQqYV9leHRydWRlKkVYVFJVREVfU0NBTEU7bWVkaXVtcCBmbG9hdCB1PTAuNSphX2RpcmVjdGlvbjttZWRpdW1wIGZsb2F0IHQ9MS4wLWFicyh1KTttZWRpdW1wIHZlYzIgb2Zmc2V0Mj1vZmZzZXQqYV9leHRydWRlKkVYVFJVREVfU0NBTEUqbm9ybWFsLnkqbWF0Mih0LC11LHUsdCk7dmVjNCBwcm9qZWN0ZWRfZXh0cnVkZT11X21hdHJpeCp2ZWM0KGRpc3QqdV9waXhlbHNfdG9fdGlsZV91bml0cywwLjAsMC4wKTtnbF9Qb3NpdGlvbj11X21hdHJpeCp2ZWM0KHBvcytvZmZzZXQyKnVfcGl4ZWxzX3RvX3RpbGVfdW5pdHMsMC4wLDEuMCkrcHJvamVjdGVkX2V4dHJ1ZGU7XFxuI2lmbmRlZiBSRU5ERVJfVE9fVEVYVFVSRVxcbmZsb2F0IGV4dHJ1ZGVfbGVuZ3RoX3dpdGhvdXRfcGVyc3BlY3RpdmU9bGVuZ3RoKGRpc3QpO2Zsb2F0IGV4dHJ1ZGVfbGVuZ3RoX3dpdGhfcGVyc3BlY3RpdmU9bGVuZ3RoKHByb2plY3RlZF9leHRydWRlLnh5L2dsX1Bvc2l0aW9uLncqdV91bml0c190b19waXhlbHMpO3ZfZ2FtbWFfc2NhbGU9ZXh0cnVkZV9sZW5ndGhfd2l0aG91dF9wZXJzcGVjdGl2ZS9leHRydWRlX2xlbmd0aF93aXRoX3BlcnNwZWN0aXZlO1xcbiNlbHNlXFxudl9nYW1tYV9zY2FsZT0xLjA7XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoUkVOREVSX0xJTkVfR1JBRElFTlQpIHx8IGRlZmluZWQoUkVOREVSX0xJTkVfVFJJTV9PRkZTRVQpXFxuZmxvYXQgYV91dl94PWFfcGFja2VkWzBdO2Zsb2F0IGFfc3BsaXRfaW5kZXg9YV9wYWNrZWRbMV07aGlnaHAgZmxvYXQgYV9jbGlwX3N0YXJ0PWFfcGFja2VkWzJdO2hpZ2hwIGZsb2F0IGFfY2xpcF9lbmQ9YV9wYWNrZWRbM107XFxuI2lmZGVmIFJFTkRFUl9MSU5FX0dSQURJRU5UXFxuaGlnaHAgZmxvYXQgdGV4ZWxfaGVpZ2h0PTEuMC91X2ltYWdlX2hlaWdodDtoaWdocCBmbG9hdCBoYWxmX3RleGVsX2hlaWdodD0wLjUqdGV4ZWxfaGVpZ2h0O3ZfdXY9dmVjNChhX3V2X3gsYV9zcGxpdF9pbmRleCp0ZXhlbF9oZWlnaHQtaGFsZl90ZXhlbF9oZWlnaHQsYV9jbGlwX3N0YXJ0LGFfY2xpcF9lbmQpO1xcbiNlbHNlXFxudl91dj12ZWM0KGFfdXZfeCwwLjAsYV9jbGlwX3N0YXJ0LGFfY2xpcF9lbmQpO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBSRU5ERVJfTElORV9EQVNIXFxuZmxvYXQgc2NhbGU9ZGFzaC56PT0wLjAgPyAwLjAgOiB1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzL2Rhc2guejtmbG9hdCBoZWlnaHQ9ZGFzaC55O3ZfdGV4PXZlYzIoYV9saW5lc29mYXIqc2NhbGUvZmxvb3J3aWR0aCwoLW5vcm1hbC55KmhlaWdodCtkYXNoLngrMC41KS91X3RleHNpemUueSk7XFxuI2VuZGlmXFxudl93aWR0aDI9dmVjMihvdXRzZXQsaW5zZXQpO1xcbiNpZmRlZiBGT0dcXG52X2ZvZ19wb3M9Zm9nX3Bvc2l0aW9uKHBvcyk7XFxuI2VuZGlmXFxufVwiKSxsaW5lUGF0dGVybjp1aShcInVuaWZvcm0gbG93cCBmbG9hdCB1X2RldmljZV9waXhlbF9yYXRpbzt1bmlmb3JtIHZlYzIgdV90ZXhzaXplO3VuaWZvcm0gZmxvYXQgdV90aWxlX3VuaXRzX3RvX3BpeGVsczt1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO3ZhcnlpbmcgdmVjMiB2X25vcm1hbDt2YXJ5aW5nIHZlYzIgdl93aWR0aDI7dmFyeWluZyBmbG9hdCB2X2xpbmVzb2Zhcjt2YXJ5aW5nIGZsb2F0IHZfZ2FtbWFfc2NhbGU7dmFyeWluZyBmbG9hdCB2X3dpZHRoO1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCB2ZWM0IHBhdHRlcm5cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgcGl4ZWxfcmF0aW9cXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmx1clxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgdmVjNCBwYXR0ZXJuXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBwaXhlbF9yYXRpb1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgYmx1clxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbnZlYzIgcGF0dGVybl90bD1wYXR0ZXJuLnh5O3ZlYzIgcGF0dGVybl9icj1wYXR0ZXJuLnp3O3ZlYzIgZGlzcGxheV9zaXplPShwYXR0ZXJuX2JyLXBhdHRlcm5fdGwpL3BpeGVsX3JhdGlvO3ZlYzIgcGF0dGVybl9zaXplPXZlYzIoZGlzcGxheV9zaXplLngvdV90aWxlX3VuaXRzX3RvX3BpeGVscyxkaXNwbGF5X3NpemUueSk7ZmxvYXQgYXNwZWN0PWRpc3BsYXlfc2l6ZS55L3Zfd2lkdGg7ZmxvYXQgZGlzdD1sZW5ndGgodl9ub3JtYWwpKnZfd2lkdGgyLnM7ZmxvYXQgYmx1cjI9KGJsdXIrMS4wL3VfZGV2aWNlX3BpeGVsX3JhdGlvKSp2X2dhbW1hX3NjYWxlO2Zsb2F0IGFscGhhPWNsYW1wKG1pbihkaXN0LSh2X3dpZHRoMi50LWJsdXIyKSx2X3dpZHRoMi5zLWRpc3QpL2JsdXIyLDAuMCwxLjApO2Zsb2F0IHg9bW9kKHZfbGluZXNvZmFyL3BhdHRlcm5fc2l6ZS54KmFzcGVjdCwxLjApO2Zsb2F0IHk9MC41KnZfbm9ybWFsLnkrMC41O3ZlYzIgdGV4ZWxfc2l6ZT0xLjAvdV90ZXhzaXplO3ZlYzIgcG9zPW1peChwYXR0ZXJuX3RsKnRleGVsX3NpemUtdGV4ZWxfc2l6ZSxwYXR0ZXJuX2JyKnRleGVsX3NpemUrdGV4ZWxfc2l6ZSx2ZWMyKHgseSkpO3ZlYzQgY29sb3I9dGV4dHVyZTJEKHVfaW1hZ2UscG9zKTtcXG4jaWZkZWYgTElHSFRJTkdfM0RfTU9ERVxcbmNvbG9yPWFwcGx5X2xpZ2h0aW5nKGNvbG9yKTtcXG4jZW5kaWZcXG4jaWZkZWYgRk9HXFxuY29sb3I9Zm9nX2RpdGhlcihmb2dfYXBwbHlfcHJlbXVsdGlwbGllZChjb2xvcix2X2ZvZ19wb3MpKTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9Y29sb3IqKGFscGhhKm9wYWNpdHkpO1xcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG5nbF9GcmFnQ29sb3I9dmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cIixcIlxcbiNkZWZpbmUgc2NhbGUgMC4wMTU4NzMwMTZcXG5hdHRyaWJ1dGUgdmVjMiBhX3Bvc19ub3JtYWw7YXR0cmlidXRlIHZlYzQgYV9kYXRhO2F0dHJpYnV0ZSBmbG9hdCBhX2xpbmVzb2Zhcjt1bmlmb3JtIG1hdDQgdV9tYXRyaXg7dW5pZm9ybSB2ZWMyIHVfdW5pdHNfdG9fcGl4ZWxzO3VuaWZvcm0gbWF0MiB1X3BpeGVsc190b190aWxlX3VuaXRzO3VuaWZvcm0gbG93cCBmbG9hdCB1X2RldmljZV9waXhlbF9yYXRpbzt2YXJ5aW5nIHZlYzIgdl9ub3JtYWw7dmFyeWluZyB2ZWMyIHZfd2lkdGgyO3ZhcnlpbmcgZmxvYXQgdl9saW5lc29mYXI7dmFyeWluZyBmbG9hdCB2X2dhbW1hX3NjYWxlO3ZhcnlpbmcgZmxvYXQgdl93aWR0aDtcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgYmx1clxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9mZnNldFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCBnYXB3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbWVkaXVtcCBmbG9hdCB3aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBmbG9vcndpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIHZlYzQgcGF0dGVyblxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBwaXhlbF9yYXRpb1xcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGJsdXJcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9mZnNldFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIG1lZGl1bXAgZmxvYXQgZ2Fwd2lkdGhcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBtZWRpdW1wIGZsb2F0IHdpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBmbG9vcndpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbWVkaXVtcCB2ZWM0IHBhdHRlcm5cXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IHBpeGVsX3JhdGlvXFxuZmxvYXQgQU5USUFMSUFTSU5HPTEuMC91X2RldmljZV9waXhlbF9yYXRpby8yLjA7dmVjMiBhX2V4dHJ1ZGU9YV9kYXRhLnh5LTEyOC4wO2Zsb2F0IGFfZGlyZWN0aW9uPW1vZChhX2RhdGEueiw0LjApLTEuMDt2ZWMyIHBvcz1mbG9vcihhX3Bvc19ub3JtYWwqMC41KTttZWRpdW1wIHZlYzIgbm9ybWFsPWFfcG9zX25vcm1hbC0yLjAqcG9zO25vcm1hbC55PW5vcm1hbC55KjIuMC0xLjA7dl9ub3JtYWw9bm9ybWFsO2dhcHdpZHRoPWdhcHdpZHRoLzIuMDtmbG9hdCBoYWxmd2lkdGg9d2lkdGgvMi4wO29mZnNldD0tMS4wKm9mZnNldDtmbG9hdCBpbnNldD1nYXB3aWR0aCsoZ2Fwd2lkdGggPiAwLjAgPyBBTlRJQUxJQVNJTkcgOiAwLjApO2Zsb2F0IG91dHNldD1nYXB3aWR0aCtoYWxmd2lkdGgqKGdhcHdpZHRoID4gMC4wID8gMi4wIDogMS4wKSsoaGFsZndpZHRoPT0wLjAgPyAwLjAgOiBBTlRJQUxJQVNJTkcpO21lZGl1bXAgdmVjMiBkaXN0PW91dHNldCphX2V4dHJ1ZGUqc2NhbGU7bWVkaXVtcCBmbG9hdCB1PTAuNSphX2RpcmVjdGlvbjttZWRpdW1wIGZsb2F0IHQ9MS4wLWFicyh1KTttZWRpdW1wIHZlYzIgb2Zmc2V0Mj1vZmZzZXQqYV9leHRydWRlKnNjYWxlKm5vcm1hbC55Km1hdDIodCwtdSx1LHQpO3ZlYzQgcHJvamVjdGVkX2V4dHJ1ZGU9dV9tYXRyaXgqdmVjNChkaXN0KnVfcGl4ZWxzX3RvX3RpbGVfdW5pdHMsMC4wLDAuMCk7Z2xfUG9zaXRpb249dV9tYXRyaXgqdmVjNChwb3Mrb2Zmc2V0Mip1X3BpeGVsc190b190aWxlX3VuaXRzLDAuMCwxLjApK3Byb2plY3RlZF9leHRydWRlO1xcbiNpZm5kZWYgUkVOREVSX1RPX1RFWFRVUkVcXG5mbG9hdCBleHRydWRlX2xlbmd0aF93aXRob3V0X3BlcnNwZWN0aXZlPWxlbmd0aChkaXN0KTtmbG9hdCBleHRydWRlX2xlbmd0aF93aXRoX3BlcnNwZWN0aXZlPWxlbmd0aChwcm9qZWN0ZWRfZXh0cnVkZS54eS9nbF9Qb3NpdGlvbi53KnVfdW5pdHNfdG9fcGl4ZWxzKTt2X2dhbW1hX3NjYWxlPWV4dHJ1ZGVfbGVuZ3RoX3dpdGhvdXRfcGVyc3BlY3RpdmUvZXh0cnVkZV9sZW5ndGhfd2l0aF9wZXJzcGVjdGl2ZTtcXG4jZWxzZVxcbnZfZ2FtbWFfc2NhbGU9MS4wO1xcbiNlbmRpZlxcbnZfbGluZXNvZmFyPWFfbGluZXNvZmFyO3Zfd2lkdGgyPXZlYzIob3V0c2V0LGluc2V0KTt2X3dpZHRoPWZsb29yd2lkdGg7XFxuI2lmZGVmIEZPR1xcbnZfZm9nX3Bvcz1mb2dfcG9zaXRpb24ocG9zKTtcXG4jZW5kaWZcXG59XCIpLHJhc3Rlcjp1aShcInVuaWZvcm0gZmxvYXQgdV9mYWRlX3Q7dW5pZm9ybSBmbG9hdCB1X29wYWNpdHk7dW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTA7dW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTE7dmFyeWluZyB2ZWMyIHZfcG9zMDt2YXJ5aW5nIHZlYzIgdl9wb3MxO3VuaWZvcm0gZmxvYXQgdV9icmlnaHRuZXNzX2xvdzt1bmlmb3JtIGZsb2F0IHVfYnJpZ2h0bmVzc19oaWdoO3VuaWZvcm0gZmxvYXQgdV9zYXR1cmF0aW9uX2ZhY3Rvcjt1bmlmb3JtIGZsb2F0IHVfY29udHJhc3RfZmFjdG9yO3VuaWZvcm0gdmVjMyB1X3NwaW5fd2VpZ2h0czt2b2lkIG1haW4oKSB7dmVjNCBjb2xvcjA9dGV4dHVyZTJEKHVfaW1hZ2UwLHZfcG9zMCk7dmVjNCBjb2xvcjE9dGV4dHVyZTJEKHVfaW1hZ2UxLHZfcG9zMSk7aWYgKGNvbG9yMC5hID4gMC4wKSB7Y29sb3IwLnJnYj1jb2xvcjAucmdiL2NvbG9yMC5hO31pZiAoY29sb3IxLmEgPiAwLjApIHtjb2xvcjEucmdiPWNvbG9yMS5yZ2IvY29sb3IxLmE7fXZlYzQgY29sb3I9bWl4KGNvbG9yMCxjb2xvcjEsdV9mYWRlX3QpO2NvbG9yLmEqPXVfb3BhY2l0eTt2ZWMzIHJnYj1jb2xvci5yZ2I7cmdiPXZlYzMoXFxuZG90KHJnYix1X3NwaW5fd2VpZ2h0cy54eXopLGRvdChyZ2IsdV9zcGluX3dlaWdodHMuenh5KSxkb3QocmdiLHVfc3Bpbl93ZWlnaHRzLnl6eCkpO2Zsb2F0IGF2ZXJhZ2U9KGNvbG9yLnIrY29sb3IuZytjb2xvci5iKS8zLjA7cmdiKz0oYXZlcmFnZS1yZ2IpKnVfc2F0dXJhdGlvbl9mYWN0b3I7cmdiPShyZ2ItMC41KSp1X2NvbnRyYXN0X2ZhY3RvciswLjU7dmVjMyB1X2hpZ2hfdmVjPXZlYzModV9icmlnaHRuZXNzX2xvdyx1X2JyaWdodG5lc3NfbG93LHVfYnJpZ2h0bmVzc19sb3cpO3ZlYzMgdV9sb3dfdmVjPXZlYzModV9icmlnaHRuZXNzX2hpZ2gsdV9icmlnaHRuZXNzX2hpZ2gsdV9icmlnaHRuZXNzX2hpZ2gpO3ZlYzMgb3V0X2NvbG9yPW1peCh1X2hpZ2hfdmVjLHVfbG93X3ZlYyxyZ2IpO1xcbiNpZmRlZiBMSUdIVElOR18zRF9NT0RFXFxub3V0X2NvbG9yPWFwcGx5X2xpZ2h0aW5nKG91dF9jb2xvcik7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbm91dF9jb2xvcj1mb2dfZGl0aGVyKGZvZ19hcHBseShvdXRfY29sb3Isdl9mb2dfcG9zKSk7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yPXZlYzQob3V0X2NvbG9yKmNvbG9yLmEsY29sb3IuYSk7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gdmVjMiB1X3RsX3BhcmVudDt1bmlmb3JtIGZsb2F0IHVfc2NhbGVfcGFyZW50O3VuaWZvcm0gdmVjMiB1X3BlcnNwZWN0aXZlX3RyYW5zZm9ybTthdHRyaWJ1dGUgdmVjMiBhX3BvczthdHRyaWJ1dGUgdmVjMiBhX3RleHR1cmVfcG9zO3ZhcnlpbmcgdmVjMiB2X3BvczA7dmFyeWluZyB2ZWMyIHZfcG9zMTt2b2lkIG1haW4oKSB7ZmxvYXQgdz0xLjArZG90KGFfdGV4dHVyZV9wb3MsdV9wZXJzcGVjdGl2ZV90cmFuc2Zvcm0pO2dsX1Bvc2l0aW9uPXVfbWF0cml4KnZlYzQoYV9wb3MqdywwLHcpO3ZfcG9zMD1hX3RleHR1cmVfcG9zLzgxOTIuMDt2X3BvczE9KHZfcG9zMCp1X3NjYWxlX3BhcmVudCkrdV90bF9wYXJlbnQ7XFxuI2lmZGVmIEZPR1xcbnZfZm9nX3Bvcz1mb2dfcG9zaXRpb24oYV9wb3MpO1xcbiNlbmRpZlxcbn1cIiksc3ltYm9sSWNvbjp1aShcInVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4dHVyZTt2YXJ5aW5nIHZlYzIgdl90ZXg7dmFyeWluZyBmbG9hdCB2X2ZhZGVfb3BhY2l0eTtcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG5sb3dwIGZsb2F0IGFscGhhPW9wYWNpdHkqdl9mYWRlX29wYWNpdHk7Z2xfRnJhZ0NvbG9yPXRleHR1cmUyRCh1X3RleHR1cmUsdl90ZXgpKmFscGhhO1xcbiNpZmRlZiBPVkVSRFJBV19JTlNQRUNUT1JcXG5nbF9GcmFnQ29sb3I9dmVjNCgxLjApO1xcbiNlbmRpZlxcbn1cIixcImF0dHJpYnV0ZSB2ZWM0IGFfcG9zX29mZnNldDthdHRyaWJ1dGUgdmVjNCBhX3RleF9zaXplO2F0dHJpYnV0ZSB2ZWM0IGFfcGl4ZWxvZmZzZXQ7YXR0cmlidXRlIHZlYzQgYV9wcm9qZWN0ZWRfcG9zO2F0dHJpYnV0ZSBmbG9hdCBhX2ZhZGVfb3BhY2l0eTtcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxuYXR0cmlidXRlIHZlYzMgYV9nbG9iZV9hbmNob3I7YXR0cmlidXRlIHZlYzMgYV9nbG9iZV9ub3JtYWw7XFxuI2VuZGlmXFxudW5pZm9ybSBib29sIHVfaXNfc2l6ZV96b29tX2NvbnN0YW50O3VuaWZvcm0gYm9vbCB1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudDt1bmlmb3JtIGhpZ2hwIGZsb2F0IHVfc2l6ZV90O3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9zaXplO3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlO3VuaWZvcm0gYm9vbCB1X3JvdGF0ZV9zeW1ib2w7dW5pZm9ybSBoaWdocCBmbG9hdCB1X2FzcGVjdF9yYXRpbzt1bmlmb3JtIGZsb2F0IHVfZmFkZV9jaGFuZ2U7dW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gbWF0NCB1X2xhYmVsX3BsYW5lX21hdHJpeDt1bmlmb3JtIG1hdDQgdV9jb29yZF9tYXRyaXg7dW5pZm9ybSBib29sIHVfaXNfdGV4dDt1bmlmb3JtIGJvb2wgdV9waXRjaF93aXRoX21hcDt1bmlmb3JtIHZlYzIgdV90ZXhzaXplO3VuaWZvcm0gdmVjMyB1X3VwX3ZlY3RvcjtcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxudW5pZm9ybSB2ZWMzIHVfdGlsZV9pZDt1bmlmb3JtIG1hdDQgdV9pbnZfcm90X21hdHJpeDt1bmlmb3JtIHZlYzIgdV9tZXJjX2NlbnRlcjt1bmlmb3JtIHZlYzMgdV9jYW1lcmFfZm9yd2FyZDt1bmlmb3JtIGZsb2F0IHVfem9vbV90cmFuc2l0aW9uO3VuaWZvcm0gdmVjMyB1X2VjZWZfb3JpZ2luO3VuaWZvcm0gbWF0NCB1X3RpbGVfbWF0cml4O1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMiB2X3RleDt2YXJ5aW5nIGZsb2F0IHZfZmFkZV9vcGFjaXR5O1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbnZlYzIgYV9wb3M9YV9wb3Nfb2Zmc2V0Lnh5O3ZlYzIgYV9vZmZzZXQ9YV9wb3Nfb2Zmc2V0Lnp3O3ZlYzIgYV90ZXg9YV90ZXhfc2l6ZS54eTt2ZWMyIGFfc2l6ZT1hX3RleF9zaXplLnp3O2Zsb2F0IGFfc2l6ZV9taW49Zmxvb3IoYV9zaXplWzBdKjAuNSk7dmVjMiBhX3B4b2Zmc2V0PWFfcGl4ZWxvZmZzZXQueHk7dmVjMiBhX21pbl9mb250X3NjYWxlPWFfcGl4ZWxvZmZzZXQuencvMjU2LjA7aGlnaHAgZmxvYXQgc2VnbWVudF9hbmdsZT0tYV9wcm9qZWN0ZWRfcG9zWzNdO2Zsb2F0IHNpemU7aWYgKCF1X2lzX3NpemVfem9vbV9jb25zdGFudCAmJiAhdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQpIHtzaXplPW1peChhX3NpemVfbWluLGFfc2l6ZVsxXSx1X3NpemVfdCkvMTI4LjA7fSBlbHNlIGlmICh1X2lzX3NpemVfem9vbV9jb25zdGFudCAmJiAhdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQpIHtzaXplPWFfc2l6ZV9taW4vMTI4LjA7fSBlbHNlIHtzaXplPXVfc2l6ZTt9dmVjMiB0aWxlX2FuY2hvcj1hX3Bvczt2ZWMzIGg9ZWxldmF0aW9uVmVjdG9yKHRpbGVfYW5jaG9yKSplbGV2YXRpb24odGlsZV9hbmNob3IpO2Zsb2F0IGdsb2JlX29jY2x1c2lvbl9mYWRlO3ZlYzMgd29ybGRfcG9zO3ZlYzMgbWVyY2F0b3JfcG9zO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5tZXJjYXRvcl9wb3M9bWVyY2F0b3JfdGlsZV9wb3NpdGlvbih1X2ludl9yb3RfbWF0cml4LHRpbGVfYW5jaG9yLHVfdGlsZV9pZCx1X21lcmNfY2VudGVyKTt3b3JsZF9wb3M9bWl4X2dsb2JlX21lcmNhdG9yKGFfZ2xvYmVfYW5jaG9yK2gsbWVyY2F0b3JfcG9zLHVfem9vbV90cmFuc2l0aW9uKTt2ZWM0IGVjZWZfcG9pbnQ9dV90aWxlX21hdHJpeCp2ZWM0KHdvcmxkX3BvcywxLjApO3ZlYzMgb3JpZ2luX3RvX3BvaW50PWVjZWZfcG9pbnQueHl6LXVfZWNlZl9vcmlnaW47Z2xvYmVfb2NjbHVzaW9uX2ZhZGU9ZG90KG9yaWdpbl90b19wb2ludCx1X2NhbWVyYV9mb3J3YXJkKSA+PTAuMCA/IDAuMCA6IDEuMDtcXG4jZWxzZVxcbndvcmxkX3Bvcz12ZWMzKHRpbGVfYW5jaG9yLDApK2g7Z2xvYmVfb2NjbHVzaW9uX2ZhZGU9MS4wO1xcbiNlbmRpZlxcbnZlYzQgcHJvamVjdGVkX3BvaW50PXVfbWF0cml4KnZlYzQod29ybGRfcG9zLDEpO2hpZ2hwIGZsb2F0IGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2U9cHJvamVjdGVkX3BvaW50Lnc7aGlnaHAgZmxvYXQgZGlzdGFuY2VfcmF0aW89dV9waXRjaF93aXRoX21hcCA/XFxuY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZS91X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2UgOlxcbnVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZS9jYW1lcmFfdG9fYW5jaG9yX2Rpc3RhbmNlO2hpZ2hwIGZsb2F0IHBlcnNwZWN0aXZlX3JhdGlvPWNsYW1wKFxcbjAuNSswLjUqZGlzdGFuY2VfcmF0aW8sMC4wLDEuNSk7c2l6ZSo9cGVyc3BlY3RpdmVfcmF0aW87ZmxvYXQgZm9udF9zY2FsZT11X2lzX3RleHQgPyBzaXplLzI0LjAgOiBzaXplO2hpZ2hwIGZsb2F0IHN5bWJvbF9yb3RhdGlvbj0wLjA7aWYgKHVfcm90YXRlX3N5bWJvbCkge3ZlYzQgb2Zmc2V0UHJvamVjdGVkX3BvaW50O1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG52ZWMzIGRpc3BsYWNlbWVudD12ZWMzKGFfZ2xvYmVfbm9ybWFsLnosMCwtYV9nbG9iZV9ub3JtYWwueCk7b2Zmc2V0UHJvamVjdGVkX3BvaW50PXVfbWF0cml4KnZlYzQoYV9nbG9iZV9hbmNob3IrZGlzcGxhY2VtZW50LDEpO1xcbiNlbHNlXFxub2Zmc2V0UHJvamVjdGVkX3BvaW50PXVfbWF0cml4KnZlYzQodGlsZV9hbmNob3IrdmVjMigxLDApLDAsMSk7XFxuI2VuZGlmXFxudmVjMiBhPXByb2plY3RlZF9wb2ludC54eS9wcm9qZWN0ZWRfcG9pbnQudzt2ZWMyIGI9b2Zmc2V0UHJvamVjdGVkX3BvaW50Lnh5L29mZnNldFByb2plY3RlZF9wb2ludC53O3N5bWJvbF9yb3RhdGlvbj1hdGFuKChiLnktYS55KS91X2FzcGVjdF9yYXRpbyxiLngtYS54KTt9dmVjNCBwcm9qZWN0ZWRfcG9zO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG52ZWMzIHByb2pfcG9zPW1peF9nbG9iZV9tZXJjYXRvcihhX3Byb2plY3RlZF9wb3MueHl6K2gsbWVyY2F0b3JfcG9zLHVfem9vbV90cmFuc2l0aW9uKTtwcm9qZWN0ZWRfcG9zPXVfbGFiZWxfcGxhbmVfbWF0cml4KnZlYzQocHJval9wb3MsMS4wKTtcXG4jZWxzZVxcbnByb2plY3RlZF9wb3M9dV9sYWJlbF9wbGFuZV9tYXRyaXgqdmVjNChhX3Byb2plY3RlZF9wb3MueHksaC56LDEuMCk7XFxuI2VuZGlmXFxuaGlnaHAgZmxvYXQgYW5nbGVfc2luPXNpbihzZWdtZW50X2FuZ2xlK3N5bWJvbF9yb3RhdGlvbik7aGlnaHAgZmxvYXQgYW5nbGVfY29zPWNvcyhzZWdtZW50X2FuZ2xlK3N5bWJvbF9yb3RhdGlvbik7bWF0MiByb3RhdGlvbl9tYXRyaXg9bWF0MihhbmdsZV9jb3MsLTEuMCphbmdsZV9zaW4sYW5nbGVfc2luLGFuZ2xlX2Nvcyk7ZmxvYXQgej0wLjA7dmVjMiBvZmZzZXQ9cm90YXRpb25fbWF0cml4KihhX29mZnNldC8zMi4wKm1heChhX21pbl9mb250X3NjYWxlLGZvbnRfc2NhbGUpK2FfcHhvZmZzZXQvMTYuMCk7XFxuI2lmZGVmIFRFUlJBSU5cXG4jaWZkZWYgUElUQ0hfV0lUSF9NQVBfVEVSUkFJTlxcbnZlYzQgdGlsZV9wb3M9dV9sYWJlbF9wbGFuZV9tYXRyaXhfaW52KnZlYzQoYV9wcm9qZWN0ZWRfcG9zLnh5K29mZnNldCwwLjAsMS4wKTt6PWVsZXZhdGlvbih0aWxlX3Bvcy54eSk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuZmxvYXQgb2NjbHVzaW9uX2ZhZGU9b2NjbHVzaW9uRmFkZShwcm9qZWN0ZWRfcG9pbnQpKmdsb2JlX29jY2x1c2lvbl9mYWRlO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG52ZWMzIHhBeGlzPXVfcGl0Y2hfd2l0aF9tYXAgPyBub3JtYWxpemUoY3Jvc3MoYV9nbG9iZV9ub3JtYWwsdV91cF92ZWN0b3IpKSA6IHZlYzMoMSwwLDApO3ZlYzMgeUF4aXM9dV9waXRjaF93aXRoX21hcCA/IG5vcm1hbGl6ZShjcm9zcyhhX2dsb2JlX25vcm1hbCx4QXhpcykpIDogdmVjMygwLDEsMCk7Z2xfUG9zaXRpb249bWl4KHVfY29vcmRfbWF0cml4KnZlYzQocHJvamVjdGVkX3Bvcy54eXovcHJvamVjdGVkX3Bvcy53K3hBeGlzKm9mZnNldC54K3lBeGlzKm9mZnNldC55LDEuMCksQVdBWSxmbG9hdChwcm9qZWN0ZWRfcG9pbnQudyA8PTAuMCB8fCBvY2NsdXNpb25fZmFkZT09MC4wKSk7XFxuI2Vsc2VcXG5nbF9Qb3NpdGlvbj1taXgodV9jb29yZF9tYXRyaXgqdmVjNChwcm9qZWN0ZWRfcG9zLnh5L3Byb2plY3RlZF9wb3MudytvZmZzZXQseiwxLjApLEFXQVksZmxvYXQocHJvamVjdGVkX3BvaW50LncgPD0wLjAgfHwgb2NjbHVzaW9uX2ZhZGU9PTAuMCkpO1xcbiNlbmRpZlxcbmZsb2F0IHByb2plY3Rpb25fdHJhbnNpdGlvbl9mYWRlPTEuMDtcXG4jaWYgZGVmaW5lZChQUk9KRUNURURfUE9TX09OX1ZJRVdQT1JUKSAmJiBkZWZpbmVkKFBST0pFQ1RJT05fR0xPQkVfVklFVylcXG5wcm9qZWN0aW9uX3RyYW5zaXRpb25fZmFkZT0xLjAtc3RlcChFUFNJTE9OLHVfem9vbV90cmFuc2l0aW9uKTtcXG4jZW5kaWZcXG52X3RleD1hX3RleC91X3RleHNpemU7dmVjMiBmYWRlX29wYWNpdHk9dW5wYWNrX29wYWNpdHkoYV9mYWRlX29wYWNpdHkpO2Zsb2F0IGZhZGVfY2hhbmdlPWZhZGVfb3BhY2l0eVsxXSA+IDAuNSA/IHVfZmFkZV9jaGFuZ2UgOi11X2ZhZGVfY2hhbmdlO3ZfZmFkZV9vcGFjaXR5PW1heCgwLjAsbWluKG9jY2x1c2lvbl9mYWRlLGZhZGVfb3BhY2l0eVswXStmYWRlX2NoYW5nZSkpKnByb2plY3Rpb25fdHJhbnNpdGlvbl9mYWRlO31cIiksc3ltYm9sU0RGOnVpKFwiI2RlZmluZSBTREZfUFggOC4wXFxudW5pZm9ybSBib29sIHVfaXNfaGFsbzt1bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7dW5pZm9ybSBoaWdocCBmbG9hdCB1X2dhbW1hX3NjYWxlO3VuaWZvcm0gbG93cCBmbG9hdCB1X2RldmljZV9waXhlbF9yYXRpbzt1bmlmb3JtIGJvb2wgdV9pc190ZXh0O3ZhcnlpbmcgdmVjMiB2X2RhdGEwO3ZhcnlpbmcgdmVjMyB2X2RhdGExO1xcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBmaWxsX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCB2ZWM0IGhhbG9fY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoYWxvX3dpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGhhbG9fYmx1clxcbnZvaWQgbWFpbigpIHtcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGZpbGxfY29sb3JcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBoaWdocCB2ZWM0IGhhbG9fY29sb3JcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGhhbG9fd2lkdGhcXG4jcHJhZ21hIG1hcGJveDogaW5pdGlhbGl6ZSBsb3dwIGZsb2F0IGhhbG9fYmx1clxcbmZsb2F0IEVER0VfR0FNTUE9MC4xMDUvdV9kZXZpY2VfcGl4ZWxfcmF0aW87dmVjMiB0ZXg9dl9kYXRhMC54eTtmbG9hdCBnYW1tYV9zY2FsZT12X2RhdGExLng7ZmxvYXQgc2l6ZT12X2RhdGExLnk7ZmxvYXQgZmFkZV9vcGFjaXR5PXZfZGF0YTFbMl07ZmxvYXQgZm9udFNjYWxlPXVfaXNfdGV4dCA/IHNpemUvMjQuMCA6IHNpemU7bG93cCB2ZWM0IGNvbG9yPWZpbGxfY29sb3I7aGlnaHAgZmxvYXQgZ2FtbWE9RURHRV9HQU1NQS8oZm9udFNjYWxlKnVfZ2FtbWFfc2NhbGUpO2xvd3AgZmxvYXQgYnVmZj0oMjU2LjAtNjQuMCkvMjU2LjA7aWYgKHVfaXNfaGFsbykge2NvbG9yPWhhbG9fY29sb3I7Z2FtbWE9KGhhbG9fYmx1cioxLjE5L1NERl9QWCtFREdFX0dBTU1BKS8oZm9udFNjYWxlKnVfZ2FtbWFfc2NhbGUpO2J1ZmY9KDYuMC1oYWxvX3dpZHRoL2ZvbnRTY2FsZSkvU0RGX1BYO31sb3dwIGZsb2F0IGRpc3Q9dGV4dHVyZTJEKHVfdGV4dHVyZSx0ZXgpLmE7aGlnaHAgZmxvYXQgZ2FtbWFfc2NhbGVkPWdhbW1hKmdhbW1hX3NjYWxlO2hpZ2hwIGZsb2F0IGFscGhhPXNtb290aHN0ZXAoYnVmZi1nYW1tYV9zY2FsZWQsYnVmZitnYW1tYV9zY2FsZWQsZGlzdCk7Z2xfRnJhZ0NvbG9yPWNvbG9yKihhbHBoYSpvcGFjaXR5KmZhZGVfb3BhY2l0eSk7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwiYXR0cmlidXRlIHZlYzQgYV9wb3Nfb2Zmc2V0O2F0dHJpYnV0ZSB2ZWM0IGFfdGV4X3NpemU7YXR0cmlidXRlIHZlYzQgYV9waXhlbG9mZnNldDthdHRyaWJ1dGUgdmVjNCBhX3Byb2plY3RlZF9wb3M7YXR0cmlidXRlIGZsb2F0IGFfZmFkZV9vcGFjaXR5O1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5hdHRyaWJ1dGUgdmVjMyBhX2dsb2JlX2FuY2hvcjthdHRyaWJ1dGUgdmVjMyBhX2dsb2JlX25vcm1hbDtcXG4jZW5kaWZcXG51bmlmb3JtIGJvb2wgdV9pc19zaXplX3pvb21fY29uc3RhbnQ7dW5pZm9ybSBib29sIHVfaXNfc2l6ZV9mZWF0dXJlX2NvbnN0YW50O3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9zaXplX3Q7dW5pZm9ybSBoaWdocCBmbG9hdCB1X3NpemU7dW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gbWF0NCB1X2xhYmVsX3BsYW5lX21hdHJpeDt1bmlmb3JtIG1hdDQgdV9jb29yZF9tYXRyaXg7dW5pZm9ybSBib29sIHVfaXNfdGV4dDt1bmlmb3JtIGJvb2wgdV9waXRjaF93aXRoX21hcDt1bmlmb3JtIGJvb2wgdV9yb3RhdGVfc3ltYm9sO3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9hc3BlY3RfcmF0aW87dW5pZm9ybSBoaWdocCBmbG9hdCB1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2U7dW5pZm9ybSBmbG9hdCB1X2ZhZGVfY2hhbmdlO3VuaWZvcm0gdmVjMiB1X3RleHNpemU7dW5pZm9ybSB2ZWMzIHVfdXBfdmVjdG9yO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG51bmlmb3JtIHZlYzMgdV90aWxlX2lkO3VuaWZvcm0gbWF0NCB1X2ludl9yb3RfbWF0cml4O3VuaWZvcm0gdmVjMiB1X21lcmNfY2VudGVyO3VuaWZvcm0gdmVjMyB1X2NhbWVyYV9mb3J3YXJkO3VuaWZvcm0gZmxvYXQgdV96b29tX3RyYW5zaXRpb247dW5pZm9ybSB2ZWMzIHVfZWNlZl9vcmlnaW47dW5pZm9ybSBtYXQ0IHVfdGlsZV9tYXRyaXg7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMyIHZfZGF0YTA7dmFyeWluZyB2ZWMzIHZfZGF0YTE7XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBoaWdocCB2ZWM0IGZpbGxfY29sb3JcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgaGFsb19jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IGhhbG9fd2lkdGhcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgaGFsb19ibHVyXFxudm9pZCBtYWluKCkge1xcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgZmlsbF9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGhpZ2hwIHZlYzQgaGFsb19jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgb3BhY2l0eVxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgaGFsb193aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBpbml0aWFsaXplIGxvd3AgZmxvYXQgaGFsb19ibHVyXFxudmVjMiBhX3Bvcz1hX3Bvc19vZmZzZXQueHk7dmVjMiBhX29mZnNldD1hX3Bvc19vZmZzZXQuenc7dmVjMiBhX3RleD1hX3RleF9zaXplLnh5O3ZlYzIgYV9zaXplPWFfdGV4X3NpemUuenc7ZmxvYXQgYV9zaXplX21pbj1mbG9vcihhX3NpemVbMF0qMC41KTt2ZWMyIGFfcHhvZmZzZXQ9YV9waXhlbG9mZnNldC54eTtoaWdocCBmbG9hdCBzZWdtZW50X2FuZ2xlPS1hX3Byb2plY3RlZF9wb3NbM107ZmxvYXQgc2l6ZTtpZiAoIXVfaXNfc2l6ZV96b29tX2NvbnN0YW50ICYmICF1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudCkge3NpemU9bWl4KGFfc2l6ZV9taW4sYV9zaXplWzFdLHVfc2l6ZV90KS8xMjguMDt9IGVsc2UgaWYgKHVfaXNfc2l6ZV96b29tX2NvbnN0YW50ICYmICF1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudCkge3NpemU9YV9zaXplX21pbi8xMjguMDt9IGVsc2Uge3NpemU9dV9zaXplO312ZWMyIHRpbGVfYW5jaG9yPWFfcG9zO3ZlYzMgaD1lbGV2YXRpb25WZWN0b3IodGlsZV9hbmNob3IpKmVsZXZhdGlvbih0aWxlX2FuY2hvcik7ZmxvYXQgZ2xvYmVfb2NjbHVzaW9uX2ZhZGU7dmVjMyB3b3JsZF9wb3M7dmVjMyBtZXJjYXRvcl9wb3M7XFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbm1lcmNhdG9yX3Bvcz1tZXJjYXRvcl90aWxlX3Bvc2l0aW9uKHVfaW52X3JvdF9tYXRyaXgsdGlsZV9hbmNob3IsdV90aWxlX2lkLHVfbWVyY19jZW50ZXIpO3dvcmxkX3Bvcz1taXhfZ2xvYmVfbWVyY2F0b3IoYV9nbG9iZV9hbmNob3IraCxtZXJjYXRvcl9wb3MsdV96b29tX3RyYW5zaXRpb24pO3ZlYzQgZWNlZl9wb2ludD11X3RpbGVfbWF0cml4KnZlYzQod29ybGRfcG9zLDEuMCk7dmVjMyBvcmlnaW5fdG9fcG9pbnQ9ZWNlZl9wb2ludC54eXotdV9lY2VmX29yaWdpbjtnbG9iZV9vY2NsdXNpb25fZmFkZT1kb3Qob3JpZ2luX3RvX3BvaW50LHVfY2FtZXJhX2ZvcndhcmQpID49MC4wID8gMC4wIDogMS4wO1xcbiNlbHNlXFxud29ybGRfcG9zPXZlYzModGlsZV9hbmNob3IsMCkraDtnbG9iZV9vY2NsdXNpb25fZmFkZT0xLjA7XFxuI2VuZGlmXFxudmVjNCBwcm9qZWN0ZWRfcG9pbnQ9dV9tYXRyaXgqdmVjNCh3b3JsZF9wb3MsMSk7aGlnaHAgZmxvYXQgY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZT1wcm9qZWN0ZWRfcG9pbnQudztoaWdocCBmbG9hdCBkaXN0YW5jZV9yYXRpbz11X3BpdGNoX3dpdGhfbWFwID9cXG5jYW1lcmFfdG9fYW5jaG9yX2Rpc3RhbmNlL3VfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZSA6XFxudV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlL2NhbWVyYV90b19hbmNob3JfZGlzdGFuY2U7aGlnaHAgZmxvYXQgcGVyc3BlY3RpdmVfcmF0aW89Y2xhbXAoXFxuMC41KzAuNSpkaXN0YW5jZV9yYXRpbywwLjAsMS41KTtzaXplKj1wZXJzcGVjdGl2ZV9yYXRpbztmbG9hdCBmb250U2NhbGU9dV9pc190ZXh0ID8gc2l6ZS8yNC4wIDogc2l6ZTtoaWdocCBmbG9hdCBzeW1ib2xfcm90YXRpb249MC4wO2lmICh1X3JvdGF0ZV9zeW1ib2wpIHt2ZWM0IG9mZnNldHByb2plY3RlZF9wb2ludDtcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxudmVjMyBkaXNwbGFjZW1lbnQ9dmVjMyhhX2dsb2JlX25vcm1hbC56LDAsLWFfZ2xvYmVfbm9ybWFsLngpO29mZnNldHByb2plY3RlZF9wb2ludD11X21hdHJpeCp2ZWM0KGFfZ2xvYmVfYW5jaG9yK2Rpc3BsYWNlbWVudCwxKTtcXG4jZWxzZVxcbm9mZnNldHByb2plY3RlZF9wb2ludD11X21hdHJpeCp2ZWM0KHRpbGVfYW5jaG9yK3ZlYzIoMSwwKSwwLDEpO1xcbiNlbmRpZlxcbnZlYzIgYT1wcm9qZWN0ZWRfcG9pbnQueHkvcHJvamVjdGVkX3BvaW50Lnc7dmVjMiBiPW9mZnNldHByb2plY3RlZF9wb2ludC54eS9vZmZzZXRwcm9qZWN0ZWRfcG9pbnQudztzeW1ib2xfcm90YXRpb249YXRhbigoYi55LWEueSkvdV9hc3BlY3RfcmF0aW8sYi54LWEueCk7fXZlYzQgcHJvamVjdGVkX3BvcztcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxudmVjMyBwcm9qX3Bvcz1taXhfZ2xvYmVfbWVyY2F0b3IoYV9wcm9qZWN0ZWRfcG9zLnh5eitoLG1lcmNhdG9yX3Bvcyx1X3pvb21fdHJhbnNpdGlvbik7cHJvamVjdGVkX3Bvcz11X2xhYmVsX3BsYW5lX21hdHJpeCp2ZWM0KHByb2pfcG9zLDEuMCk7XFxuI2Vsc2VcXG5wcm9qZWN0ZWRfcG9zPXVfbGFiZWxfcGxhbmVfbWF0cml4KnZlYzQoYV9wcm9qZWN0ZWRfcG9zLnh5LGgueiwxLjApO1xcbiNlbmRpZlxcbmhpZ2hwIGZsb2F0IGFuZ2xlX3Npbj1zaW4oc2VnbWVudF9hbmdsZStzeW1ib2xfcm90YXRpb24pO2hpZ2hwIGZsb2F0IGFuZ2xlX2Nvcz1jb3Moc2VnbWVudF9hbmdsZStzeW1ib2xfcm90YXRpb24pO21hdDIgcm90YXRpb25fbWF0cml4PW1hdDIoYW5nbGVfY29zLC0xLjAqYW5nbGVfc2luLGFuZ2xlX3NpbixhbmdsZV9jb3MpO2Zsb2F0IHo9MC4wO3ZlYzIgb2Zmc2V0PXJvdGF0aW9uX21hdHJpeCooYV9vZmZzZXQvMzIuMCpmb250U2NhbGUrYV9weG9mZnNldCk7XFxuI2lmZGVmIFRFUlJBSU5cXG4jaWZkZWYgUElUQ0hfV0lUSF9NQVBfVEVSUkFJTlxcbnZlYzQgdGlsZV9wb3M9dV9sYWJlbF9wbGFuZV9tYXRyaXhfaW52KnZlYzQoYV9wcm9qZWN0ZWRfcG9zLnh5K29mZnNldCwwLjAsMS4wKTt6PWVsZXZhdGlvbih0aWxlX3Bvcy54eSk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuZmxvYXQgb2NjbHVzaW9uX2ZhZGU9b2NjbHVzaW9uRmFkZShwcm9qZWN0ZWRfcG9pbnQpKmdsb2JlX29jY2x1c2lvbl9mYWRlO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG52ZWMzIHhBeGlzPXVfcGl0Y2hfd2l0aF9tYXAgPyBub3JtYWxpemUoY3Jvc3MoYV9nbG9iZV9ub3JtYWwsdV91cF92ZWN0b3IpKSA6IHZlYzMoMSwwLDApO3ZlYzMgeUF4aXM9dV9waXRjaF93aXRoX21hcCA/IG5vcm1hbGl6ZShjcm9zcyhhX2dsb2JlX25vcm1hbCx4QXhpcykpIDogdmVjMygwLDEsMCk7Z2xfUG9zaXRpb249bWl4KHVfY29vcmRfbWF0cml4KnZlYzQocHJvamVjdGVkX3Bvcy54eXovcHJvamVjdGVkX3Bvcy53K3hBeGlzKm9mZnNldC54K3lBeGlzKm9mZnNldC55LDEuMCksQVdBWSxmbG9hdChwcm9qZWN0ZWRfcG9pbnQudyA8PTAuMCB8fCBvY2NsdXNpb25fZmFkZT09MC4wKSk7XFxuI2Vsc2VcXG5nbF9Qb3NpdGlvbj1taXgodV9jb29yZF9tYXRyaXgqdmVjNChwcm9qZWN0ZWRfcG9zLnh5L3Byb2plY3RlZF9wb3MudytvZmZzZXQseiwxLjApLEFXQVksZmxvYXQocHJvamVjdGVkX3BvaW50LncgPD0wLjAgfHwgb2NjbHVzaW9uX2ZhZGU9PTAuMCkpO1xcbiNlbmRpZlxcbmZsb2F0IGdhbW1hX3NjYWxlPWdsX1Bvc2l0aW9uLnc7ZmxvYXQgcHJvamVjdGlvbl90cmFuc2l0aW9uX2ZhZGU9MS4wO1xcbiNpZiBkZWZpbmVkKFBST0pFQ1RFRF9QT1NfT05fVklFV1BPUlQpICYmIGRlZmluZWQoUFJPSkVDVElPTl9HTE9CRV9WSUVXKVxcbnByb2plY3Rpb25fdHJhbnNpdGlvbl9mYWRlPTEuMC1zdGVwKEVQU0lMT04sdV96b29tX3RyYW5zaXRpb24pO1xcbiNlbmRpZlxcbnZlYzIgZmFkZV9vcGFjaXR5PXVucGFja19vcGFjaXR5KGFfZmFkZV9vcGFjaXR5KTtmbG9hdCBmYWRlX2NoYW5nZT1mYWRlX29wYWNpdHlbMV0gPiAwLjUgPyB1X2ZhZGVfY2hhbmdlIDotdV9mYWRlX2NoYW5nZTtmbG9hdCBpbnRlcnBvbGF0ZWRfZmFkZV9vcGFjaXR5PW1heCgwLjAsbWluKG9jY2x1c2lvbl9mYWRlLGZhZGVfb3BhY2l0eVswXStmYWRlX2NoYW5nZSkpO3ZfZGF0YTA9YV90ZXgvdV90ZXhzaXplO3ZfZGF0YTE9dmVjMyhnYW1tYV9zY2FsZSxzaXplLGludGVycG9sYXRlZF9mYWRlX29wYWNpdHkqcHJvamVjdGlvbl90cmFuc2l0aW9uX2ZhZGUpO31cIiksc3ltYm9sVGV4dEFuZEljb246dWkoXCIjZGVmaW5lIFNERl9QWCA4LjBcXG4jZGVmaW5lIFNERiAxLjBcXG4jZGVmaW5lIElDT04gMC4wXFxudW5pZm9ybSBib29sIHVfaXNfaGFsbzt1bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7dW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0dXJlX2ljb247dW5pZm9ybSBoaWdocCBmbG9hdCB1X2dhbW1hX3NjYWxlO3VuaWZvcm0gbG93cCBmbG9hdCB1X2RldmljZV9waXhlbF9yYXRpbzt2YXJ5aW5nIHZlYzQgdl9kYXRhMDt2YXJ5aW5nIHZlYzQgdl9kYXRhMTtcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgZmlsbF9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgaGFsb193aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG52b2lkIG1haW4oKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBmaWxsX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBoYWxvX3dpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG5mbG9hdCBmYWRlX29wYWNpdHk9dl9kYXRhMVsyXTtpZiAodl9kYXRhMS53PT1JQ09OKSB7dmVjMiB0ZXhfaWNvbj12X2RhdGEwLnp3O2xvd3AgZmxvYXQgYWxwaGE9b3BhY2l0eSpmYWRlX29wYWNpdHk7Z2xfRnJhZ0NvbG9yPXRleHR1cmUyRCh1X3RleHR1cmVfaWNvbix0ZXhfaWNvbikqYWxwaGE7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxucmV0dXJuO312ZWMyIHRleD12X2RhdGEwLnh5O2Zsb2F0IEVER0VfR0FNTUE9MC4xMDUvdV9kZXZpY2VfcGl4ZWxfcmF0aW87ZmxvYXQgZ2FtbWFfc2NhbGU9dl9kYXRhMS54O2Zsb2F0IHNpemU9dl9kYXRhMS55O2Zsb2F0IGZvbnRTY2FsZT1zaXplLzI0LjA7bG93cCB2ZWM0IGNvbG9yPWZpbGxfY29sb3I7aGlnaHAgZmxvYXQgZ2FtbWE9RURHRV9HQU1NQS8oZm9udFNjYWxlKnVfZ2FtbWFfc2NhbGUpO2xvd3AgZmxvYXQgYnVmZj0oMjU2LjAtNjQuMCkvMjU2LjA7aWYgKHVfaXNfaGFsbykge2NvbG9yPWhhbG9fY29sb3I7Z2FtbWE9KGhhbG9fYmx1cioxLjE5L1NERl9QWCtFREdFX0dBTU1BKS8oZm9udFNjYWxlKnVfZ2FtbWFfc2NhbGUpO2J1ZmY9KDYuMC1oYWxvX3dpZHRoL2ZvbnRTY2FsZSkvU0RGX1BYO31sb3dwIGZsb2F0IGRpc3Q9dGV4dHVyZTJEKHVfdGV4dHVyZSx0ZXgpLmE7aGlnaHAgZmxvYXQgZ2FtbWFfc2NhbGVkPWdhbW1hKmdhbW1hX3NjYWxlO2hpZ2hwIGZsb2F0IGFscGhhPXNtb290aHN0ZXAoYnVmZi1nYW1tYV9zY2FsZWQsYnVmZitnYW1tYV9zY2FsZWQsZGlzdCk7Z2xfRnJhZ0NvbG9yPWNvbG9yKihhbHBoYSpvcGFjaXR5KmZhZGVfb3BhY2l0eSk7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwiYXR0cmlidXRlIHZlYzQgYV9wb3Nfb2Zmc2V0O2F0dHJpYnV0ZSB2ZWM0IGFfdGV4X3NpemU7YXR0cmlidXRlIHZlYzQgYV9wcm9qZWN0ZWRfcG9zO2F0dHJpYnV0ZSBmbG9hdCBhX2ZhZGVfb3BhY2l0eTtcXG4jaWZkZWYgUFJPSkVDVElPTl9HTE9CRV9WSUVXXFxuYXR0cmlidXRlIHZlYzMgYV9nbG9iZV9hbmNob3I7YXR0cmlidXRlIHZlYzMgYV9nbG9iZV9ub3JtYWw7XFxuI2VuZGlmXFxudW5pZm9ybSBib29sIHVfaXNfc2l6ZV96b29tX2NvbnN0YW50O3VuaWZvcm0gYm9vbCB1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudDt1bmlmb3JtIGhpZ2hwIGZsb2F0IHVfc2l6ZV90O3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9zaXplO3VuaWZvcm0gbWF0NCB1X21hdHJpeDt1bmlmb3JtIG1hdDQgdV9sYWJlbF9wbGFuZV9tYXRyaXg7dW5pZm9ybSBtYXQ0IHVfY29vcmRfbWF0cml4O3VuaWZvcm0gYm9vbCB1X2lzX3RleHQ7dW5pZm9ybSBib29sIHVfcGl0Y2hfd2l0aF9tYXA7dW5pZm9ybSBib29sIHVfcm90YXRlX3N5bWJvbDt1bmlmb3JtIGhpZ2hwIGZsb2F0IHVfYXNwZWN0X3JhdGlvO3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlO3VuaWZvcm0gZmxvYXQgdV9mYWRlX2NoYW5nZTt1bmlmb3JtIHZlYzIgdV90ZXhzaXplO3VuaWZvcm0gdmVjMyB1X3VwX3ZlY3Rvcjt1bmlmb3JtIHZlYzIgdV90ZXhzaXplX2ljb247XFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbnVuaWZvcm0gdmVjMyB1X3RpbGVfaWQ7dW5pZm9ybSBtYXQ0IHVfaW52X3JvdF9tYXRyaXg7dW5pZm9ybSB2ZWMyIHVfbWVyY19jZW50ZXI7dW5pZm9ybSB2ZWMzIHVfY2FtZXJhX2ZvcndhcmQ7dW5pZm9ybSBmbG9hdCB1X3pvb21fdHJhbnNpdGlvbjt1bmlmb3JtIHZlYzMgdV9lY2VmX29yaWdpbjt1bmlmb3JtIG1hdDQgdV90aWxlX21hdHJpeDtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzQgdl9kYXRhMDt2YXJ5aW5nIHZlYzQgdl9kYXRhMTtcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGhpZ2hwIHZlYzQgZmlsbF9jb2xvclxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGRlZmluZSBsb3dwIGZsb2F0IG9wYWNpdHlcXG4jcHJhZ21hIG1hcGJveDogZGVmaW5lIGxvd3AgZmxvYXQgaGFsb193aWR0aFxcbiNwcmFnbWEgbWFwYm94OiBkZWZpbmUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG52b2lkIG1haW4oKSB7XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBmaWxsX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgaGlnaHAgdmVjNCBoYWxvX2NvbG9yXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBvcGFjaXR5XFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBoYWxvX3dpZHRoXFxuI3ByYWdtYSBtYXBib3g6IGluaXRpYWxpemUgbG93cCBmbG9hdCBoYWxvX2JsdXJcXG52ZWMyIGFfcG9zPWFfcG9zX29mZnNldC54eTt2ZWMyIGFfb2Zmc2V0PWFfcG9zX29mZnNldC56dzt2ZWMyIGFfdGV4PWFfdGV4X3NpemUueHk7dmVjMiBhX3NpemU9YV90ZXhfc2l6ZS56dztmbG9hdCBhX3NpemVfbWluPWZsb29yKGFfc2l6ZVswXSowLjUpO2Zsb2F0IGlzX3NkZj1hX3NpemVbMF0tMi4wKmFfc2l6ZV9taW47aGlnaHAgZmxvYXQgc2VnbWVudF9hbmdsZT0tYV9wcm9qZWN0ZWRfcG9zWzNdO2Zsb2F0IHNpemU7aWYgKCF1X2lzX3NpemVfem9vbV9jb25zdGFudCAmJiAhdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQpIHtzaXplPW1peChhX3NpemVfbWluLGFfc2l6ZVsxXSx1X3NpemVfdCkvMTI4LjA7fSBlbHNlIGlmICh1X2lzX3NpemVfem9vbV9jb25zdGFudCAmJiAhdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQpIHtzaXplPWFfc2l6ZV9taW4vMTI4LjA7fSBlbHNlIHtzaXplPXVfc2l6ZTt9dmVjMiB0aWxlX2FuY2hvcj1hX3Bvczt2ZWMzIGg9ZWxldmF0aW9uVmVjdG9yKHRpbGVfYW5jaG9yKSplbGV2YXRpb24odGlsZV9hbmNob3IpO2Zsb2F0IGdsb2JlX29jY2x1c2lvbl9mYWRlO3ZlYzMgd29ybGRfcG9zO3ZlYzMgbWVyY2F0b3JfcG9zO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5tZXJjYXRvcl9wb3M9bWVyY2F0b3JfdGlsZV9wb3NpdGlvbih1X2ludl9yb3RfbWF0cml4LHRpbGVfYW5jaG9yLHVfdGlsZV9pZCx1X21lcmNfY2VudGVyKTt3b3JsZF9wb3M9bWl4X2dsb2JlX21lcmNhdG9yKGFfZ2xvYmVfYW5jaG9yK2gsbWVyY2F0b3JfcG9zLHVfem9vbV90cmFuc2l0aW9uKTt2ZWM0IGVjZWZfcG9pbnQ9dV90aWxlX21hdHJpeCp2ZWM0KHdvcmxkX3BvcywxLjApO3ZlYzMgb3JpZ2luX3RvX3BvaW50PWVjZWZfcG9pbnQueHl6LXVfZWNlZl9vcmlnaW47Z2xvYmVfb2NjbHVzaW9uX2ZhZGU9ZG90KG9yaWdpbl90b19wb2ludCx1X2NhbWVyYV9mb3J3YXJkKSA+PTAuMCA/IDAuMCA6IDEuMDtcXG4jZWxzZVxcbndvcmxkX3Bvcz12ZWMzKHRpbGVfYW5jaG9yLDApK2g7Z2xvYmVfb2NjbHVzaW9uX2ZhZGU9MS4wO1xcbiNlbmRpZlxcbnZlYzQgcHJvamVjdGVkX3BvaW50PXVfbWF0cml4KnZlYzQod29ybGRfcG9zLDEpO2hpZ2hwIGZsb2F0IGNhbWVyYV90b19hbmNob3JfZGlzdGFuY2U9cHJvamVjdGVkX3BvaW50Lnc7aGlnaHAgZmxvYXQgZGlzdGFuY2VfcmF0aW89dV9waXRjaF93aXRoX21hcCA/XFxuY2FtZXJhX3RvX2FuY2hvcl9kaXN0YW5jZS91X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2UgOlxcbnVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZS9jYW1lcmFfdG9fYW5jaG9yX2Rpc3RhbmNlO2hpZ2hwIGZsb2F0IHBlcnNwZWN0aXZlX3JhdGlvPWNsYW1wKFxcbjAuNSswLjUqZGlzdGFuY2VfcmF0aW8sMC4wLDEuNSk7c2l6ZSo9cGVyc3BlY3RpdmVfcmF0aW87ZmxvYXQgZm9udF9zY2FsZT1zaXplLzI0LjA7aGlnaHAgZmxvYXQgc3ltYm9sX3JvdGF0aW9uPTAuMDtpZiAodV9yb3RhdGVfc3ltYm9sKSB7dmVjNCBvZmZzZXRfcHJvamVjdGVkX3BvaW50PXVfbWF0cml4KnZlYzQoYV9wb3MrdmVjMigxLDApLDAsMSk7dmVjMiBhPXByb2plY3RlZF9wb2ludC54eS9wcm9qZWN0ZWRfcG9pbnQudzt2ZWMyIGI9b2Zmc2V0X3Byb2plY3RlZF9wb2ludC54eS9vZmZzZXRfcHJvamVjdGVkX3BvaW50Lnc7c3ltYm9sX3JvdGF0aW9uPWF0YW4oKGIueS1hLnkpL3VfYXNwZWN0X3JhdGlvLGIueC1hLngpO312ZWM0IHByb2plY3RlZF9wb3M7XFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbnZlYzMgcHJval9wb3M9bWl4X2dsb2JlX21lcmNhdG9yKGFfcHJvamVjdGVkX3Bvcy54eXoraCxtZXJjYXRvcl9wb3MsdV96b29tX3RyYW5zaXRpb24pO3Byb2plY3RlZF9wb3M9dV9sYWJlbF9wbGFuZV9tYXRyaXgqdmVjNChwcm9qX3BvcywxLjApO1xcbiNlbHNlXFxucHJvamVjdGVkX3Bvcz11X2xhYmVsX3BsYW5lX21hdHJpeCp2ZWM0KGFfcHJvamVjdGVkX3Bvcy54eSxoLnosMS4wKTtcXG4jZW5kaWZcXG5oaWdocCBmbG9hdCBhbmdsZV9zaW49c2luKHNlZ21lbnRfYW5nbGUrc3ltYm9sX3JvdGF0aW9uKTtoaWdocCBmbG9hdCBhbmdsZV9jb3M9Y29zKHNlZ21lbnRfYW5nbGUrc3ltYm9sX3JvdGF0aW9uKTttYXQyIHJvdGF0aW9uX21hdHJpeD1tYXQyKGFuZ2xlX2NvcywtMS4wKmFuZ2xlX3NpbixhbmdsZV9zaW4sYW5nbGVfY29zKTtmbG9hdCB6PTAuMDt2ZWMyIG9mZnNldD1yb3RhdGlvbl9tYXRyaXgqKGFfb2Zmc2V0LzMyLjAqZm9udF9zY2FsZSk7XFxuI2lmZGVmIFRFUlJBSU5cXG4jaWZkZWYgUElUQ0hfV0lUSF9NQVBfVEVSUkFJTlxcbnZlYzQgdGlsZV9wb3M9dV9sYWJlbF9wbGFuZV9tYXRyaXhfaW52KnZlYzQoYV9wcm9qZWN0ZWRfcG9zLnh5K29mZnNldCwwLjAsMS4wKTt6PWVsZXZhdGlvbih0aWxlX3Bvcy54eSk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuZmxvYXQgb2NjbHVzaW9uX2ZhZGU9b2NjbHVzaW9uRmFkZShwcm9qZWN0ZWRfcG9pbnQpKmdsb2JlX29jY2x1c2lvbl9mYWRlO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG52ZWMzIHhBeGlzPXVfcGl0Y2hfd2l0aF9tYXAgPyBub3JtYWxpemUoY3Jvc3MoYV9nbG9iZV9ub3JtYWwsdV91cF92ZWN0b3IpKSA6IHZlYzMoMSwwLDApO3ZlYzMgeUF4aXM9dV9waXRjaF93aXRoX21hcCA/IG5vcm1hbGl6ZShjcm9zcyhhX2dsb2JlX25vcm1hbCx4QXhpcykpIDogdmVjMygwLDEsMCk7Z2xfUG9zaXRpb249bWl4KHVfY29vcmRfbWF0cml4KnZlYzQocHJvamVjdGVkX3Bvcy54eXovcHJvamVjdGVkX3Bvcy53K3hBeGlzKm9mZnNldC54K3lBeGlzKm9mZnNldC55LDEuMCksQVdBWSxmbG9hdChwcm9qZWN0ZWRfcG9pbnQudyA8PTAuMCB8fCBvY2NsdXNpb25fZmFkZT09MC4wKSk7XFxuI2Vsc2VcXG5nbF9Qb3NpdGlvbj1taXgodV9jb29yZF9tYXRyaXgqdmVjNChwcm9qZWN0ZWRfcG9zLnh5L3Byb2plY3RlZF9wb3MudytvZmZzZXQseiwxLjApLEFXQVksZmxvYXQocHJvamVjdGVkX3BvaW50LncgPD0wLjAgfHwgb2NjbHVzaW9uX2ZhZGU9PTAuMCkpO1xcbiNlbmRpZlxcbmZsb2F0IGdhbW1hX3NjYWxlPWdsX1Bvc2l0aW9uLnc7dmVjMiBmYWRlX29wYWNpdHk9dW5wYWNrX29wYWNpdHkoYV9mYWRlX29wYWNpdHkpO2Zsb2F0IGZhZGVfY2hhbmdlPWZhZGVfb3BhY2l0eVsxXSA+IDAuNSA/IHVfZmFkZV9jaGFuZ2UgOi11X2ZhZGVfY2hhbmdlO2Zsb2F0IGludGVycG9sYXRlZF9mYWRlX29wYWNpdHk9bWF4KDAuMCxtaW4ob2NjbHVzaW9uX2ZhZGUsZmFkZV9vcGFjaXR5WzBdK2ZhZGVfY2hhbmdlKSk7ZmxvYXQgcHJvamVjdGlvbl90cmFuc2l0aW9uX2ZhZGU9MS4wO1xcbiNpZiBkZWZpbmVkKFBST0pFQ1RFRF9QT1NfT05fVklFV1BPUlQpICYmIGRlZmluZWQoUFJPSkVDVElPTl9HTE9CRV9WSUVXKVxcbnByb2plY3Rpb25fdHJhbnNpdGlvbl9mYWRlPTEuMC1zdGVwKEVQU0lMT04sdV96b29tX3RyYW5zaXRpb24pO1xcbiNlbmRpZlxcbnZfZGF0YTAueHk9YV90ZXgvdV90ZXhzaXplO3ZfZGF0YTAuenc9YV90ZXgvdV90ZXhzaXplX2ljb247dl9kYXRhMT12ZWM0KGdhbW1hX3NjYWxlLHNpemUsaW50ZXJwb2xhdGVkX2ZhZGVfb3BhY2l0eSpwcm9qZWN0aW9uX3RyYW5zaXRpb25fZmFkZSxpc19zZGYpO31cIiksdGVycmFpblJhc3Rlcjp1aShcInVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2UwO3ZhcnlpbmcgdmVjMiB2X3BvczA7XFxuI2lmZGVmIEZPR1xcbnZhcnlpbmcgZmxvYXQgdl9mb2dfb3BhY2l0eTtcXG4jZW5kaWZcXG4jaWZkZWYgUkVOREVSX1NIQURPV1NcXG52YXJ5aW5nIHZlYzQgdl9wb3NfbGlnaHRfdmlld18wO3ZhcnlpbmcgdmVjNCB2X3Bvc19saWdodF92aWV3XzE7dmFyeWluZyBmbG9hdCB2X2RlcHRoO1xcbiNlbmRpZlxcbnZvaWQgbWFpbigpIHt2ZWM0IGNvbG9yPXRleHR1cmUyRCh1X2ltYWdlMCx2X3BvczApO1xcbiNpZmRlZiBSRU5ERVJfU0hBRE9XU1xcbmNvbG9yLnh5ej1zaGFkb3dlZF9jb2xvcihjb2xvci54eXosdl9wb3NfbGlnaHRfdmlld18wLHZfcG9zX2xpZ2h0X3ZpZXdfMSx2X2RlcHRoKTtcXG4jZW5kaWZcXG4jaWZkZWYgRk9HXFxuI2lmZGVmIFpFUk9fRVhBR0dFUkFUSU9OXFxuY29sb3I9Zm9nX2RpdGhlcihmb2dfYXBwbHlfcHJlbXVsdGlwbGllZChjb2xvcix2X2ZvZ19wb3MpKTtcXG4jZWxzZVxcbmNvbG9yPWZvZ19kaXRoZXIoZm9nX2FwcGx5X2Zyb21fdmVydChjb2xvcix2X2ZvZ19vcGFjaXR5KSk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yPWNvbG9yO1xcbiNpZmRlZiBURVJSQUlOX1dJUkVGUkFNRVxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCwwLjAsMC4wLDAuOCk7XFxuI2VuZGlmXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfbWF0cml4O3VuaWZvcm0gZmxvYXQgdV9za2lydF9oZWlnaHQ7YXR0cmlidXRlIHZlYzIgYV9wb3M7dmFyeWluZyB2ZWMyIHZfcG9zMDtcXG4jaWZkZWYgRk9HXFxudmFyeWluZyBmbG9hdCB2X2ZvZ19vcGFjaXR5O1xcbiNlbmRpZlxcbiNpZmRlZiBSRU5ERVJfU0hBRE9XU1xcbnVuaWZvcm0gbWF0NCB1X2xpZ2h0X21hdHJpeF8wO3VuaWZvcm0gbWF0NCB1X2xpZ2h0X21hdHJpeF8xO3ZhcnlpbmcgdmVjNCB2X3Bvc19saWdodF92aWV3XzA7dmFyeWluZyB2ZWM0IHZfcG9zX2xpZ2h0X3ZpZXdfMTt2YXJ5aW5nIGZsb2F0IHZfZGVwdGg7XFxuI2VuZGlmXFxuY29uc3QgZmxvYXQgd2lyZWZyYW1lT2Zmc2V0PTAuMDAwMTU7dm9pZCBtYWluKCkge3ZlYzMgZGVjb21wb3NlZFBvc0FuZFNraXJ0PWRlY29tcG9zZVRvUG9zQW5kU2tpcnQoYV9wb3MpO2Zsb2F0IHNraXJ0PWRlY29tcG9zZWRQb3NBbmRTa2lydC56O3ZlYzIgZGVjb2RlZFBvcz1kZWNvbXBvc2VkUG9zQW5kU2tpcnQueHk7ZmxvYXQgZWxldmF0aW9uPWVsZXZhdGlvbihkZWNvZGVkUG9zKS1za2lydCp1X3NraXJ0X2hlaWdodDtcXG4jaWZkZWYgVEVSUkFJTl9XSVJFRlJBTUVcXG5lbGV2YXRpb24rPXdpcmVmcmFtZU9mZnNldDtcXG4jZW5kaWZcXG52X3BvczA9ZGVjb2RlZFBvcy84MTkyLjA7Z2xfUG9zaXRpb249dV9tYXRyaXgqdmVjNChkZWNvZGVkUG9zLGVsZXZhdGlvbiwxLjApO1xcbiNpZmRlZiBGT0dcXG4jaWZkZWYgWkVST19FWEFHR0VSQVRJT05cXG52X2ZvZ19wb3M9Zm9nX3Bvc2l0aW9uKGRlY29kZWRQb3MpO1xcbiNlbHNlXFxudl9mb2dfb3BhY2l0eT1mb2coZm9nX3Bvc2l0aW9uKHZlYzMoZGVjb2RlZFBvcyxlbGV2YXRpb24pKSk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIFJFTkRFUl9TSEFET1dTXFxudmVjMyBwb3M9dmVjMyhkZWNvZGVkUG9zLGVsZXZhdGlvbik7dl9wb3NfbGlnaHRfdmlld18wPXVfbGlnaHRfbWF0cml4XzAqdmVjNChwb3MsMS4pO3ZfcG9zX2xpZ2h0X3ZpZXdfMT11X2xpZ2h0X21hdHJpeF8xKnZlYzQocG9zLDEuKTt2X2RlcHRoPWdsX1Bvc2l0aW9uLnc7XFxuI2VuZGlmXFxufVwiKSx0ZXJyYWluRGVwdGg6dWkoXCIjaWZkZWYgR0xfRVNcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2VuZGlmXFxudmFyeWluZyBmbG9hdCB2X2RlcHRoO3ZvaWQgbWFpbigpIHtnbF9GcmFnQ29sb3I9cGFja19kZXB0aCh2X2RlcHRoKTt9XCIsXCJ1bmlmb3JtIG1hdDQgdV9tYXRyaXg7YXR0cmlidXRlIHZlYzIgYV9wb3M7dmFyeWluZyBmbG9hdCB2X2RlcHRoO3ZvaWQgbWFpbigpIHtmbG9hdCBlbGV2YXRpb249ZWxldmF0aW9uKGFfcG9zKTtnbF9Qb3NpdGlvbj11X21hdHJpeCp2ZWM0KGFfcG9zLGVsZXZhdGlvbiwxLjApO3ZfZGVwdGg9Z2xfUG9zaXRpb24uei9nbF9Qb3NpdGlvbi53O31cIiksc2t5Ym94OnVpKFwiXFxudmFyeWluZyBsb3dwIHZlYzMgdl91djt1bmlmb3JtIGxvd3Agc2FtcGxlckN1YmUgdV9jdWJlbWFwO3VuaWZvcm0gbG93cCBmbG9hdCB1X29wYWNpdHk7dW5pZm9ybSBoaWdocCBmbG9hdCB1X3RlbXBvcmFsX29mZnNldDt1bmlmb3JtIGhpZ2hwIHZlYzMgdV9zdW5fZGlyZWN0aW9uO2Zsb2F0IHN1bl9kaXNrKGhpZ2hwIHZlYzMgcmF5X2RpcmVjdGlvbixoaWdocCB2ZWMzIHN1bl9kaXJlY3Rpb24pIHtoaWdocCBmbG9hdCBjb3NfYW5nbGU9ZG90KG5vcm1hbGl6ZShyYXlfZGlyZWN0aW9uKSxzdW5fZGlyZWN0aW9uKTtjb25zdCBoaWdocCBmbG9hdCBjb3Nfc3VuX2FuZ3VsYXJfZGlhbWV0ZXI9MC45OTk5NjE5MjMwNjtjb25zdCBoaWdocCBmbG9hdCBzbW9vdGhzdGVwX2RlbHRhPTFlLTU7cmV0dXJuIHNtb290aHN0ZXAoXFxuY29zX3N1bl9hbmd1bGFyX2RpYW1ldGVyLXNtb290aHN0ZXBfZGVsdGEsY29zX3N1bl9hbmd1bGFyX2RpYW1ldGVyK3Ntb290aHN0ZXBfZGVsdGEsY29zX2FuZ2xlKTt9ZmxvYXQgbWFwKGZsb2F0IHZhbHVlLGZsb2F0IHN0YXJ0LGZsb2F0IGVuZCxmbG9hdCBuZXdfc3RhcnQsZmxvYXQgbmV3X2VuZCkge3JldHVybiAoKHZhbHVlLXN0YXJ0KSoobmV3X2VuZC1uZXdfc3RhcnQpKS8oZW5kLXN0YXJ0KStuZXdfc3RhcnQ7fXZvaWQgbWFpbigpIHt2ZWMzIHV2PXZfdXY7Y29uc3QgZmxvYXQgeV9iaWFzPTAuMDE1O3V2LnkrPXlfYmlhczt1di55PXBvdyhhYnModXYueSksMS4wLzUuMCk7dXYueT1tYXAodXYueSwwLjAsMS4wLC0xLjAsMS4wKTt2ZWMzIHNreV9jb2xvcj10ZXh0dXJlQ3ViZSh1X2N1YmVtYXAsdXYpLnJnYjtcXG4jaWZkZWYgRk9HXFxuc2t5X2NvbG9yPWZvZ19hcHBseV9za3lfZ3JhZGllbnQodl91di54enksc2t5X2NvbG9yKTtcXG4jZW5kaWZcXG5za3lfY29sb3IucmdiPWRpdGhlcihza3lfY29sb3IucmdiLGdsX0ZyYWdDb29yZC54eSt1X3RlbXBvcmFsX29mZnNldCk7c2t5X2NvbG9yKz0wLjEqc3VuX2Rpc2sodl91dix1X3N1bl9kaXJlY3Rpb24pO2dsX0ZyYWdDb2xvcj12ZWM0KHNreV9jb2xvcip1X29wYWNpdHksdV9vcGFjaXR5KTtcXG4jaWZkZWYgT1ZFUkRSQVdfSU5TUEVDVE9SXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoMS4wKTtcXG4jZW5kaWZcXG59XCIsUXQpLHNreWJveEdyYWRpZW50OnVpKFwidmFyeWluZyBoaWdocCB2ZWMzIHZfdXY7dW5pZm9ybSBsb3dwIHNhbXBsZXIyRCB1X2NvbG9yX3JhbXA7dW5pZm9ybSBoaWdocCB2ZWMzIHVfY2VudGVyX2RpcmVjdGlvbjt1bmlmb3JtIGxvd3AgZmxvYXQgdV9yYWRpdXM7dW5pZm9ybSBsb3dwIGZsb2F0IHVfb3BhY2l0eTt1bmlmb3JtIGhpZ2hwIGZsb2F0IHVfdGVtcG9yYWxfb2Zmc2V0O3ZvaWQgbWFpbigpIHtmbG9hdCBwcm9ncmVzcz1hY29zKGRvdChub3JtYWxpemUodl91diksdV9jZW50ZXJfZGlyZWN0aW9uKSkvdV9yYWRpdXM7dmVjNCBjb2xvcj10ZXh0dXJlMkQodV9jb2xvcl9yYW1wLHZlYzIocHJvZ3Jlc3MsMC41KSk7XFxuI2lmZGVmIEZPR1xcbmNvbG9yLnJnYj1mb2dfYXBwbHlfc2t5X2dyYWRpZW50KHZfdXYueHp5LGNvbG9yLnJnYi9jb2xvci5hKSpjb2xvci5hO1xcbiNlbmRpZlxcbmNvbG9yKj11X29wYWNpdHk7Y29sb3IucmdiPWRpdGhlcihjb2xvci5yZ2IsZ2xfRnJhZ0Nvb3JkLnh5K3VfdGVtcG9yYWxfb2Zmc2V0KTtnbF9GcmFnQ29sb3I9Y29sb3I7XFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFF0KSxza3lib3hDYXB0dXJlOnVpKFwiXFxudmFyeWluZyBoaWdocCB2ZWMzIHZfcG9zaXRpb247dW5pZm9ybSBoaWdocCBmbG9hdCB1X3N1bl9pbnRlbnNpdHk7dW5pZm9ybSBoaWdocCBmbG9hdCB1X2x1bWluYW5jZTt1bmlmb3JtIGxvd3AgdmVjMyB1X3N1bl9kaXJlY3Rpb247dW5pZm9ybSBoaWdocCB2ZWM0IHVfY29sb3JfdGludF9yO3VuaWZvcm0gaGlnaHAgdmVjNCB1X2NvbG9yX3RpbnRfbTtcXG4jaWZkZWYgR0xfRVNcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2VuZGlmXFxuI2RlZmluZSBCRVRBX1IgICAgICAgICAgICAgICAgICB2ZWMzKDUuNWUtNiwxMy4wZS02LDIyLjRlLTYpXFxuI2RlZmluZSBCRVRBX00gICAgICAgICAgICAgICAgICB2ZWMzKDIxZS02LDIxZS02LDIxZS02KVxcbiNkZWZpbmUgTUlFX0cgICAgICAgICAgICAgICAgICAgMC43NlxcbiNkZWZpbmUgREVOU0lUWV9IRUlHSFRfU0NBTEVfUiAgODAwMC4wXFxuI2RlZmluZSBERU5TSVRZX0hFSUdIVF9TQ0FMRV9NICAxMjAwLjBcXG4jZGVmaW5lIFBMQU5FVF9SQURJVVMgICAgICAgICAgIDYzNjBlM1xcbiNkZWZpbmUgQVRNT1NQSEVSRV9SQURJVVMgICAgICAgNjQyMGUzXFxuI2RlZmluZSBTQU1QTEVfU1RFUFMgICAgICAgICAgICAxMFxcbiNkZWZpbmUgREVOU0lUWV9TVEVQUyAgICAgICAgICAgNFxcbmZsb2F0IHJheV9zcGhlcmVfZXhpdCh2ZWMzIG9yaWcsdmVjMyBkaXIsZmxvYXQgcmFkaXVzKSB7ZmxvYXQgYT1kb3QoZGlyLGRpcik7ZmxvYXQgYj0yLjAqZG90KGRpcixvcmlnKTtmbG9hdCBjPWRvdChvcmlnLG9yaWcpLXJhZGl1cypyYWRpdXM7ZmxvYXQgZD1zcXJ0KGIqYi00LjAqYSpjKTtyZXR1cm4gKC1iK2QpLygyLjAqYSk7fXZlYzMgZXh0aW5jdGlvbih2ZWMyIGRlbnNpdHkpIHtyZXR1cm4gZXhwKC12ZWMzKEJFVEFfUip1X2NvbG9yX3RpbnRfci5hKmRlbnNpdHkueCtCRVRBX00qdV9jb2xvcl90aW50X20uYSpkZW5zaXR5LnkpKTt9dmVjMiBsb2NhbF9kZW5zaXR5KHZlYzMgcG9pbnQpIHtmbG9hdCBoZWlnaHQ9bWF4KGxlbmd0aChwb2ludCktUExBTkVUX1JBRElVUywwLjApO2Zsb2F0IGV4cF9yPWV4cCgtaGVpZ2h0L0RFTlNJVFlfSEVJR0hUX1NDQUxFX1IpO2Zsb2F0IGV4cF9tPWV4cCgtaGVpZ2h0L0RFTlNJVFlfSEVJR0hUX1NDQUxFX00pO3JldHVybiB2ZWMyKGV4cF9yLGV4cF9tKTt9ZmxvYXQgcGhhc2VfcmF5KGZsb2F0IGNvc19hbmdsZSkge3JldHVybiAoMy4wLygxNi4wKlBJKSkqKDEuMCtjb3NfYW5nbGUqY29zX2FuZ2xlKTt9ZmxvYXQgcGhhc2VfbWllKGZsb2F0IGNvc19hbmdsZSkge3JldHVybiAoMy4wLyg4LjAqUEkpKSooKDEuMC1NSUVfRypNSUVfRykqKDEuMCtjb3NfYW5nbGUqY29zX2FuZ2xlKSkvKCgyLjArTUlFX0cqTUlFX0cpKnBvdygxLjArTUlFX0cqTUlFX0ctMi4wKk1JRV9HKmNvc19hbmdsZSwxLjUpKTt9dmVjMiBkZW5zaXR5X3RvX2F0bW9zcGhlcmUodmVjMyBwb2ludCx2ZWMzIGxpZ2h0X2Rpcikge2Zsb2F0IHJheV9sZW49cmF5X3NwaGVyZV9leGl0KHBvaW50LGxpZ2h0X2RpcixBVE1PU1BIRVJFX1JBRElVUyk7ZmxvYXQgc3RlcF9sZW49cmF5X2xlbi9mbG9hdChERU5TSVRZX1NURVBTKTt2ZWMyIGRlbnNpdHlfcG9pbnRfdG9fYXRtb3NwaGVyZT12ZWMyKDAuMCk7Zm9yIChpbnQgaT0wOyBpIDwgREVOU0lUWV9TVEVQUzsrK2kpIHt2ZWMzIHBvaW50X29uX3JheT1wb2ludCtsaWdodF9kaXIqKChmbG9hdChpKSswLjUpKnN0ZXBfbGVuKTtkZW5zaXR5X3BvaW50X3RvX2F0bW9zcGhlcmUrPWxvY2FsX2RlbnNpdHkocG9pbnRfb25fcmF5KSpzdGVwX2xlbjs7fXJldHVybiBkZW5zaXR5X3BvaW50X3RvX2F0bW9zcGhlcmU7fXZlYzMgYXRtb3NwaGVyZSh2ZWMzIHJheV9kaXIsdmVjMyBzdW5fZGlyZWN0aW9uLGZsb2F0IHN1bl9pbnRlbnNpdHkpIHt2ZWMyIGRlbnNpdHlfb3JpZ190b19wb2ludD12ZWMyKDAuMCk7dmVjMyBzY2F0dGVyX3I9dmVjMygwLjApO3ZlYzMgc2NhdHRlcl9tPXZlYzMoMC4wKTt2ZWMzIG9yaWdpbj12ZWMzKDAuMCxQTEFORVRfUkFESVVTLDAuMCk7ZmxvYXQgcmF5X2xlbj1yYXlfc3BoZXJlX2V4aXQob3JpZ2luLHJheV9kaXIsQVRNT1NQSEVSRV9SQURJVVMpO2Zsb2F0IHN0ZXBfbGVuPXJheV9sZW4vZmxvYXQoU0FNUExFX1NURVBTKTtmb3IgKGludCBpPTA7IGkgPCBTQU1QTEVfU1RFUFM7KytpKSB7dmVjMyBwb2ludF9vbl9yYXk9b3JpZ2luK3JheV9kaXIqKChmbG9hdChpKSswLjUpKnN0ZXBfbGVuKTt2ZWMyIGRlbnNpdHk9bG9jYWxfZGVuc2l0eShwb2ludF9vbl9yYXkpKnN0ZXBfbGVuO2RlbnNpdHlfb3JpZ190b19wb2ludCs9ZGVuc2l0eTt2ZWMyIGRlbnNpdHlfcG9pbnRfdG9fYXRtb3NwaGVyZT1kZW5zaXR5X3RvX2F0bW9zcGhlcmUocG9pbnRfb25fcmF5LHN1bl9kaXJlY3Rpb24pO3ZlYzIgZGVuc2l0eV9vcmlnX3RvX2F0bW9zcGhlcmU9ZGVuc2l0eV9vcmlnX3RvX3BvaW50K2RlbnNpdHlfcG9pbnRfdG9fYXRtb3NwaGVyZTt2ZWMzIGV4dGluY3Rpb249ZXh0aW5jdGlvbihkZW5zaXR5X29yaWdfdG9fYXRtb3NwaGVyZSk7c2NhdHRlcl9yKz1kZW5zaXR5LngqZXh0aW5jdGlvbjtzY2F0dGVyX20rPWRlbnNpdHkueSpleHRpbmN0aW9uO31mbG9hdCBjb3NfYW5nbGU9ZG90KHJheV9kaXIsc3VuX2RpcmVjdGlvbik7ZmxvYXQgcGhhc2Vfcj1waGFzZV9yYXkoY29zX2FuZ2xlKTtmbG9hdCBwaGFzZV9tPXBoYXNlX21pZShjb3NfYW5nbGUpO3ZlYzMgYmV0YV9yPUJFVEFfUip1X2NvbG9yX3RpbnRfci5yZ2IqdV9jb2xvcl90aW50X3IuYTt2ZWMzIGJldGFfbT1CRVRBX00qdV9jb2xvcl90aW50X20ucmdiKnVfY29sb3JfdGludF9tLmE7cmV0dXJuIChzY2F0dGVyX3IqcGhhc2VfcipiZXRhX3Irc2NhdHRlcl9tKnBoYXNlX20qYmV0YV9tKSpzdW5faW50ZW5zaXR5O31jb25zdCBmbG9hdCBBPTAuMTU7Y29uc3QgZmxvYXQgQj0wLjUwO2NvbnN0IGZsb2F0IEM9MC4xMDtjb25zdCBmbG9hdCBEPTAuMjA7Y29uc3QgZmxvYXQgRT0wLjAyO2NvbnN0IGZsb2F0IEY9MC4zMDt2ZWMzIHVuY2hhcnRlZDJfdG9uZW1hcCh2ZWMzIHgpIHtyZXR1cm4gKCh4KihBKngrQypCKStEKkUpLyh4KihBKngrQikrRCpGKSktRS9GO312b2lkIG1haW4oKSB7dmVjMyByYXlfZGlyZWN0aW9uPXZfcG9zaXRpb247cmF5X2RpcmVjdGlvbi55PXBvdyhyYXlfZGlyZWN0aW9uLnksNS4wKTtjb25zdCBmbG9hdCB5X2JpYXM9MC4wMTU7cmF5X2RpcmVjdGlvbi55Kz15X2JpYXM7dmVjMyBjb2xvcj1hdG1vc3BoZXJlKG5vcm1hbGl6ZShyYXlfZGlyZWN0aW9uKSx1X3N1bl9kaXJlY3Rpb24sdV9zdW5faW50ZW5zaXR5KTtmbG9hdCB3aGl0ZV9zY2FsZT0xLjA3NDg3MjQ2NzU2MzM4NTQ7Y29sb3I9dW5jaGFydGVkMl90b25lbWFwKChsb2cyKDIuMC9wb3codV9sdW1pbmFuY2UsNC4wKSkpKmNvbG9yKSp3aGl0ZV9zY2FsZTtnbF9GcmFnQ29sb3I9dmVjNChjb2xvciwxLjApO31cIixcImF0dHJpYnV0ZSBoaWdocCB2ZWMzIGFfcG9zXzNmO3VuaWZvcm0gbWF0MyB1X21hdHJpeF8zZjt2YXJ5aW5nIGhpZ2hwIHZlYzMgdl9wb3NpdGlvbjtmbG9hdCBtYXAoZmxvYXQgdmFsdWUsZmxvYXQgc3RhcnQsZmxvYXQgZW5kLGZsb2F0IG5ld19zdGFydCxmbG9hdCBuZXdfZW5kKSB7cmV0dXJuICgodmFsdWUtc3RhcnQpKihuZXdfZW5kLW5ld19zdGFydCkpLyhlbmQtc3RhcnQpK25ld19zdGFydDt9dm9pZCBtYWluKCkge3ZlYzQgcG9zPXZlYzQodV9tYXRyaXhfM2YqYV9wb3NfM2YsMS4wKTt2X3Bvc2l0aW9uPXBvcy54eXo7dl9wb3NpdGlvbi55Kj0tMS4wO3ZfcG9zaXRpb24ueT1tYXAodl9wb3NpdGlvbi55LC0xLjAsMS4wLDAuMCwxLjApO2dsX1Bvc2l0aW9uPXZlYzQoYV9wb3NfM2YueHksMC4wLDEuMCk7fVwiKSxnbG9iZVJhc3Rlcjp1aShcInVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2UwO3ZhcnlpbmcgdmVjMiB2X3BvczA7XFxuI2lmbmRlZiBGT0dcXG51bmlmb3JtIGhpZ2hwIHZlYzMgdV9mcnVzdHVtX3RsO3VuaWZvcm0gaGlnaHAgdmVjMyB1X2ZydXN0dW1fdHI7dW5pZm9ybSBoaWdocCB2ZWMzIHVfZnJ1c3R1bV9icjt1bmlmb3JtIGhpZ2hwIHZlYzMgdV9mcnVzdHVtX2JsO3VuaWZvcm0gaGlnaHAgdmVjMyB1X2dsb2JlX3Bvczt1bmlmb3JtIGhpZ2hwIGZsb2F0IHVfZ2xvYmVfcmFkaXVzO3VuaWZvcm0gdmVjMiB1X3ZpZXdwb3J0O1xcbiNlbmRpZlxcbnZvaWQgbWFpbigpIHt2ZWM0IGNvbG9yO1xcbiNpZmRlZiBDVVNUT01fQU5USUFMSUFTSU5HXFxudmVjMiB1dj1nbF9GcmFnQ29vcmQueHkvdV92aWV3cG9ydDtoaWdocCB2ZWMzIHJheV9kaXI9bWl4KFxcbm1peCh1X2ZydXN0dW1fdGwsdV9mcnVzdHVtX3RyLHV2LngpLG1peCh1X2ZydXN0dW1fYmwsdV9mcnVzdHVtX2JyLHV2LngpLDEuMC11di55KTt2ZWMzIGRpcj1ub3JtYWxpemUocmF5X2Rpcik7dmVjMyBjbG9zZXN0X3BvaW50PWRvdCh1X2dsb2JlX3BvcyxkaXIpKmRpcjtmbG9hdCBub3JtX2Rpc3RfZnJvbV9jZW50ZXI9MS4wLWxlbmd0aChjbG9zZXN0X3BvaW50LXVfZ2xvYmVfcG9zKS91X2dsb2JlX3JhZGl1cztjb25zdCBmbG9hdCBhbnRpYWxpYXNfcGl4ZWw9Mi4wO2Zsb2F0IGFudGlhbGlhc19mYWN0b3I9YW50aWFsaWFzX3BpeGVsKmZ3aWR0aChub3JtX2Rpc3RfZnJvbV9jZW50ZXIpO2Zsb2F0IGFudGlhbGlhcz1zbW9vdGhzdGVwKDAuMCxhbnRpYWxpYXNfZmFjdG9yLG5vcm1fZGlzdF9mcm9tX2NlbnRlcik7dmVjNCByYXN0ZXI9dGV4dHVyZTJEKHVfaW1hZ2UwLHZfcG9zMCk7Y29sb3I9dmVjNChyYXN0ZXIucmdiKmFudGlhbGlhcyxyYXN0ZXIuYSphbnRpYWxpYXMpO1xcbiNlbHNlXFxuY29sb3I9dGV4dHVyZTJEKHVfaW1hZ2UwLHZfcG9zMCk7XFxuI2VuZGlmXFxuI2lmZGVmIEZPR1xcbmNvbG9yPWZvZ19kaXRoZXIoZm9nX2FwcGx5X3ByZW11bHRpcGxpZWQoY29sb3Isdl9mb2dfcG9zKSk7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yPWNvbG9yO1xcbiNpZmRlZiBURVJSQUlOX1dJUkVGUkFNRVxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCwwLjAsMC4wLDAuOCk7XFxuI2VuZGlmXFxuI2lmZGVmIE9WRVJEUkFXX0lOU1BFQ1RPUlxcbmdsX0ZyYWdDb2xvcj12ZWM0KDEuMCk7XFxuI2VuZGlmXFxufVwiLFwidW5pZm9ybSBtYXQ0IHVfcHJval9tYXRyaXg7dW5pZm9ybSBtYXQ0IHVfbm9ybWFsaXplX21hdHJpeDt1bmlmb3JtIG1hdDQgdV9nbG9iZV9tYXRyaXg7dW5pZm9ybSBtYXQ0IHVfbWVyY19tYXRyaXg7dW5pZm9ybSBmbG9hdCB1X3pvb21fdHJhbnNpdGlvbjt1bmlmb3JtIHZlYzIgdV9tZXJjX2NlbnRlcjt1bmlmb3JtIG1hdDMgdV9ncmlkX21hdHJpeDt1bmlmb3JtIGZsb2F0IHVfc2tpcnRfaGVpZ2h0O1xcbiNpZmRlZiBHTE9CRV9QT0xFU1xcbmF0dHJpYnV0ZSB2ZWMzIGFfZ2xvYmVfcG9zO2F0dHJpYnV0ZSB2ZWMyIGFfdXY7XFxuI2Vsc2VcXG5hdHRyaWJ1dGUgdmVjMiBhX3BvcztcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzIgdl9wb3MwO2NvbnN0IGZsb2F0IHdpcmVmcmFtZU9mZnNldD0xZTM7ZmxvYXQgbWVyY2F0b3JYZnJvbUxuZyhmbG9hdCBsbmcpIHtyZXR1cm4gKDE4MC4wK2xuZykvMzYwLjA7fWZsb2F0IG1lcmNhdG9yWWZyb21MYXQoZmxvYXQgbGF0KSB7cmV0dXJuICgxODAuMC0oUkFEX1RPX0RFRypsb2codGFuKFFVQVJURVJfUEkrbGF0LzIuMCpERUdfVE9fUkFEKSkpKS8zNjAuMDt9dmVjMyBsYXRMbmdUb0VDRUYodmVjMiBsYXRMbmcpIHtsYXRMbmc9REVHX1RPX1JBRCpsYXRMbmc7ZmxvYXQgY29zTGF0PWNvcyhsYXRMbmdbMF0pO2Zsb2F0IHNpbkxhdD1zaW4obGF0TG5nWzBdKTtmbG9hdCBjb3NMbmc9Y29zKGxhdExuZ1sxXSk7ZmxvYXQgc2luTG5nPXNpbihsYXRMbmdbMV0pO2Zsb2F0IHN4PWNvc0xhdCpzaW5MbmcqR0xPQkVfUkFESVVTO2Zsb2F0IHN5PS1zaW5MYXQqR0xPQkVfUkFESVVTO2Zsb2F0IHN6PWNvc0xhdCpjb3NMbmcqR0xPQkVfUkFESVVTO3JldHVybiB2ZWMzKHN4LHN5LHN6KTt9dm9pZCBtYWluKCkge1xcbiNpZmRlZiBHTE9CRV9QT0xFU1xcbnZlYzMgZ2xvYmVfcG9zPWFfZ2xvYmVfcG9zO3ZlYzIgdXY9YV91djtcXG4jZWxzZVxcbmZsb2F0IHRpbGVzPXVfZ3JpZF9tYXRyaXhbMF1bMl07ZmxvYXQgaWR4PXVfZ3JpZF9tYXRyaXhbMV1bMl07ZmxvYXQgaWR5PXVfZ3JpZF9tYXRyaXhbMl1bMl07dmVjMyBkZWNvbXBvc2VkX3Bvc19hbmRfc2tpcnQ9ZGVjb21wb3NlVG9Qb3NBbmRTa2lydChhX3Bvcyk7dmVjMyBsYXRMbmc9dV9ncmlkX21hdHJpeCp2ZWMzKGRlY29tcG9zZWRfcG9zX2FuZF9za2lydC54eSwxLjApO2Zsb2F0IG1lcmNhdG9yWT1tZXJjYXRvcllmcm9tTGF0KGxhdExuZ1swXSk7ZmxvYXQgdXZZPW1lcmNhdG9yWSp0aWxlcy1pZHk7ZmxvYXQgbWVyY2F0b3JYPW1lcmNhdG9yWGZyb21MbmcobGF0TG5nWzFdKTtmbG9hdCB1dlg9bWVyY2F0b3JYKnRpbGVzLWlkeDt2ZWMzIGdsb2JlX3Bvcz1sYXRMbmdUb0VDRUYobGF0TG5nLnh5KTt2ZWMyIG1lcmNfcG9zPXZlYzIobWVyY2F0b3JYLG1lcmNhdG9yWSk7dmVjMiB1dj12ZWMyKHV2WCx1dlkpO1xcbiNlbmRpZlxcbnZfcG9zMD11djt2ZWMyIHRpbGVfcG9zPXV2KkVYVEVOVDt2ZWMzIGdsb2JlX2Rlcml2ZWRfdXBfdmVjdG9yPW5vcm1hbGl6ZShnbG9iZV9wb3MpKnVfdGlsZV91cF9zY2FsZTtcXG4jaWZkZWYgR0xPQkVfUE9MRVNcXG52ZWMzIHVwX3ZlY3Rvcj1nbG9iZV9kZXJpdmVkX3VwX3ZlY3RvcjtcXG4jZWxzZVxcbnZlYzMgdXBfdmVjdG9yPWVsZXZhdGlvblZlY3Rvcih0aWxlX3Bvcyk7XFxuI2VuZGlmXFxuZmxvYXQgaGVpZ2h0PWVsZXZhdGlvbih0aWxlX3Bvcyk7XFxuI2lmZGVmIFRFUlJBSU5fV0lSRUZSQU1FXFxuaGVpZ2h0Kz13aXJlZnJhbWVPZmZzZXQ7XFxuI2VuZGlmXFxuZ2xvYmVfcG9zKz11cF92ZWN0b3IqaGVpZ2h0O1xcbiNpZm5kZWYgR0xPQkVfUE9MRVNcXG5nbG9iZV9wb3MtPWdsb2JlX2Rlcml2ZWRfdXBfdmVjdG9yKnVfc2tpcnRfaGVpZ2h0KmRlY29tcG9zZWRfcG9zX2FuZF9za2lydC56O1xcbiNlbmRpZlxcbiNpZmRlZiBHTE9CRV9QT0xFU1xcbnZlYzQgaW50ZXJwb2xhdGVkX3Bvcz11X2dsb2JlX21hdHJpeCp2ZWM0KGdsb2JlX3BvcywxLjApO1xcbiNlbHNlXFxudmVjNCBnbG9iZV93b3JsZF9wb3M9dV9nbG9iZV9tYXRyaXgqdmVjNChnbG9iZV9wb3MsMS4wKTt2ZWM0IG1lcmNfd29ybGRfcG9zPXZlYzQoMC4wKTtpZiAodV96b29tX3RyYW5zaXRpb24gPiAwLjApIHttZXJjX3dvcmxkX3Bvcz12ZWM0KG1lcmNfcG9zLGhlaWdodC11X3NraXJ0X2hlaWdodCpkZWNvbXBvc2VkX3Bvc19hbmRfc2tpcnQueiwxLjApO21lcmNfd29ybGRfcG9zLnh5LT11X21lcmNfY2VudGVyO21lcmNfd29ybGRfcG9zLng9d3JhcChtZXJjX3dvcmxkX3Bvcy54LC0wLjUsMC41KTttZXJjX3dvcmxkX3Bvcz11X21lcmNfbWF0cml4Km1lcmNfd29ybGRfcG9zO312ZWM0IGludGVycG9sYXRlZF9wb3M9dmVjNChtaXgoZ2xvYmVfd29ybGRfcG9zLnh5eixtZXJjX3dvcmxkX3Bvcy54eXosdV96b29tX3RyYW5zaXRpb24pLDEuMCk7XFxuI2VuZGlmXFxuZ2xfUG9zaXRpb249dV9wcm9qX21hdHJpeCppbnRlcnBvbGF0ZWRfcG9zO1xcbiNpZmRlZiBGT0dcXG52X2ZvZ19wb3M9Zm9nX3Bvc2l0aW9uKCh1X25vcm1hbGl6ZV9tYXRyaXgqdmVjNChnbG9iZV9wb3MsMS4wKSkueHl6KTtcXG4jZW5kaWZcXG59XCIpLGdsb2JlQXRtb3NwaGVyZTp1aShcInVuaWZvcm0gZmxvYXQgdV90cmFuc2l0aW9uO3VuaWZvcm0gaGlnaHAgZmxvYXQgdV9mYWRlb3V0X3JhbmdlO3VuaWZvcm0gaGlnaHAgZmxvYXQgdV90ZW1wb3JhbF9vZmZzZXQ7dW5pZm9ybSB2ZWMzIHVfc3RhcnRfY29sb3I7dW5pZm9ybSB2ZWM0IHVfY29sb3I7dW5pZm9ybSB2ZWM0IHVfc3BhY2VfY29sb3I7dW5pZm9ybSB2ZWM0IHVfaGlnaF9jb2xvcjt1bmlmb3JtIGZsb2F0IHVfc3Rhcl9pbnRlbnNpdHk7dW5pZm9ybSBmbG9hdCB1X3N0YXJfc2l6ZTt1bmlmb3JtIGZsb2F0IHVfc3Rhcl9kZW5zaXR5O3VuaWZvcm0gZmxvYXQgdV9ob3Jpem9uX2FuZ2xlO3VuaWZvcm0gbWF0NCB1X3JvdGF0aW9uX21hdHJpeDt2YXJ5aW5nIGhpZ2hwIHZlYzMgdl9yYXlfZGlyO3ZhcnlpbmcgaGlnaHAgdmVjMyB2X2hvcml6b25fZGlyO2hpZ2hwIGZsb2F0IHJhbmRvbShoaWdocCB2ZWMzIHApIHtwPWZyYWN0KHAqdmVjMygyMy4yMzQyLDk3LjEyMzEsOTEuMjM0MikpO3ArPWRvdChwLnp4eSxwLnl4eisxMjMuMTIzNCk7cmV0dXJuIGZyYWN0KHAueCpwLnkpO31mbG9hdCBzdGFycyh2ZWMzIHAsZmxvYXQgc2NhbGUsdmVjMiBvZmZzZXQpIHt2ZWMyIHV2X3NjYWxlPSh1X3ZpZXdwb3J0L3Vfc3Rhcl9zaXplKSpzY2FsZTt2ZWMzIHBvc2l0aW9uPXZlYzMocC54eSp1dl9zY2FsZStvZmZzZXQqdV92aWV3cG9ydCxwLnopO3ZlYzMgcT1mcmFjdChwb3NpdGlvbiktMC41O3ZlYzMgaWQ9Zmxvb3IocG9zaXRpb24pO2Zsb2F0IHJhbmRvbV92aXNpYmlsaXR5PXN0ZXAocmFuZG9tKGlkKSx1X3N0YXJfZGVuc2l0eSk7ZmxvYXQgY2lyY2xlPXNtb290aHN0ZXAoMC41K3Vfc3Rhcl9pbnRlbnNpdHksMC41LGxlbmd0aChxKSk7cmV0dXJuIGNpcmNsZSpyYW5kb21fdmlzaWJpbGl0eTt9dm9pZCBtYWluKCkge2hpZ2hwIHZlYzMgZGlyPW5vcm1hbGl6ZSh2X3JheV9kaXIpO2Zsb2F0IGdsb2JlX3Bvc19kb3RfZGlyO1xcbiNpZmRlZiBQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcXG5nbG9iZV9wb3NfZG90X2Rpcj1kb3QodV9nbG9iZV9wb3MsZGlyKTtoaWdocCB2ZWMzIGNsb3Nlc3RfcG9pbnRfZm9yd2FyZD1hYnMoZ2xvYmVfcG9zX2RvdF9kaXIpKmRpcjtmbG9hdCBub3JtX2Rpc3RfZnJvbV9jZW50ZXI9bGVuZ3RoKGNsb3Nlc3RfcG9pbnRfZm9yd2FyZC11X2dsb2JlX3BvcykvdV9nbG9iZV9yYWRpdXM7aWYgKG5vcm1fZGlzdF9mcm9tX2NlbnRlciA8IDAuOTgpIHtkaXNjYXJkO3JldHVybjt9XFxuI2VuZGlmXFxuaGlnaHAgdmVjMyBob3Jpem9uX2Rpcj1ub3JtYWxpemUodl9ob3Jpem9uX2Rpcik7ZmxvYXQgaG9yaXpvbl9hbmdsZV9tZXJjYXRvcj1kaXIueSA8IGhvcml6b25fZGlyLnkgP1xcbjAuMCA6IG1heChhY29zKGRvdChkaXIsaG9yaXpvbl9kaXIpKSwwLjApO2Zsb2F0IGhvcml6b25fYW5nbGU7XFxuI2lmZGVmIFBST0pFQ1RJT05fR0xPQkVfVklFV1xcbmhpZ2hwIHZlYzMgY2xvc2VzdF9wb2ludD1nbG9iZV9wb3NfZG90X2RpcipkaXI7ZmxvYXQgY2xvc2VzdF9wb2ludF90b19jZW50ZXI9bGVuZ3RoKGNsb3Nlc3RfcG9pbnQtdV9nbG9iZV9wb3MpO2Zsb2F0IHRoZXRhPWFzaW4oY2xhbXAoY2xvc2VzdF9wb2ludF90b19jZW50ZXIvbGVuZ3RoKHVfZ2xvYmVfcG9zKSwtMS4wLDEuMCkpO2hvcml6b25fYW5nbGU9Z2xvYmVfcG9zX2RvdF9kaXIgPCAwLjAgP1xcblBJLXRoZXRhLXVfaG9yaXpvbl9hbmdsZSA6IHRoZXRhLXVfaG9yaXpvbl9hbmdsZTtmbG9hdCBhbmdsZV90PXBvdyh1X3RyYW5zaXRpb24sMTAuMCk7aG9yaXpvbl9hbmdsZT1taXgoaG9yaXpvbl9hbmdsZSxob3Jpem9uX2FuZ2xlX21lcmNhdG9yLGFuZ2xlX3QpO1xcbiNlbHNlXFxuaG9yaXpvbl9hbmdsZT1ob3Jpem9uX2FuZ2xlX21lcmNhdG9yO1xcbiNlbmRpZlxcbmhvcml6b25fYW5nbGUvPVBJO2Zsb2F0IHQ9ZXhwKC1ob3Jpem9uX2FuZ2xlL3VfZmFkZW91dF9yYW5nZSk7ZmxvYXQgYWxwaGFfMD11X2NvbG9yLmE7ZmxvYXQgYWxwaGFfMT11X2hpZ2hfY29sb3IuYTtmbG9hdCBhbHBoYV8yPXVfc3BhY2VfY29sb3IuYTt2ZWMzIGNvbG9yX3N0b3BfMD11X2NvbG9yLnJnYjt2ZWMzIGNvbG9yX3N0b3BfMT11X2hpZ2hfY29sb3IucmdiO3ZlYzMgY29sb3Jfc3RvcF8yPXVfc3BhY2VfY29sb3IucmdiO3ZlYzMgYzA9bWl4KGNvbG9yX3N0b3BfMixjb2xvcl9zdG9wXzEsYWxwaGFfMSk7dmVjMyBjMT1taXgoYzAsY29sb3Jfc3RvcF8wLGFscGhhXzApO3ZlYzMgYzI9bWl4KGMwLGMxLHQpO3ZlYzMgYyA9bWl4KGNvbG9yX3N0b3BfMixjMix0KTtmbG9hdCBhMD1taXgoYWxwaGFfMiwxLjAsYWxwaGFfMSk7ZmxvYXQgYTE9bWl4KGEwLDEuMCxhbHBoYV8wKTtmbG9hdCBhMj1taXgoYTAsYTEsdCk7ZmxvYXQgYSA9bWl4KGFscGhhXzIsYTIsdCk7dmVjMiB1dj1nbF9GcmFnQ29vcmQueHkvdV92aWV3cG9ydC0wLjU7ZmxvYXQgYXNwZWN0X3JhdGlvPXVfdmlld3BvcnQueC91X3ZpZXdwb3J0Lnk7dmVjNCB1dl9kaXI9dmVjNChub3JtYWxpemUodmVjMyh1di54KmFzcGVjdF9yYXRpbyx1di55LDEuMCkpLDEuMCk7dXZfZGlyPXVfcm90YXRpb25fbWF0cml4KnV2X2Rpcjt2ZWMzIG49YWJzKHV2X2Rpci54eXopO3ZlYzIgdXZfcmVtYXA9KG4ueCA+IG4ueSAmJiBuLnggPiBuLnopID8gdXZfZGlyLnl6L3V2X2Rpci54OlxcbihuLnkgPiBuLnggJiYgbi55ID4gbi56KSA/IHV2X2Rpci56eC91dl9kaXIueTpcXG51dl9kaXIueHkvdXZfZGlyLno7dXZfcmVtYXAueC89YXNwZWN0X3JhdGlvO3ZlYzMgRD12ZWMzKHV2X3JlbWFwLDEuMCk7aGlnaHAgZmxvYXQgc3Rhcl9maWVsZD0wLjA7aWYgKHVfc3Rhcl9pbnRlbnNpdHkgPiAwLjApIHtzdGFyX2ZpZWxkKz1zdGFycyhELDEuMix2ZWMyKDAuMCwwLjApKTtzdGFyX2ZpZWxkKz1zdGFycyhELDEuMCx2ZWMyKDEuMCwwLjApKTtzdGFyX2ZpZWxkKz1zdGFycyhELDAuOCx2ZWMyKDAuMCwxLjApKTtzdGFyX2ZpZWxkKz1zdGFycyhELDAuNix2ZWMyKDEuMCwxLjApKTtzdGFyX2ZpZWxkKj0oMS4wLXBvdyh0LDAuMjUrKDEuMC11X2hpZ2hfY29sb3IuYSkqMC43NSkpO2MrPXN0YXJfZmllbGQqYWxwaGFfMjt9Yz1kaXRoZXIoYyxnbF9GcmFnQ29vcmQueHkrdV90ZW1wb3JhbF9vZmZzZXQpO2dsX0ZyYWdDb2xvcj12ZWM0KGMsYSk7fVwiLFwiYXR0cmlidXRlIHZlYzMgYV9wb3M7YXR0cmlidXRlIHZlYzIgYV91djt1bmlmb3JtIHZlYzMgdV9mcnVzdHVtX3RsO3VuaWZvcm0gdmVjMyB1X2ZydXN0dW1fdHI7dW5pZm9ybSB2ZWMzIHVfZnJ1c3R1bV9icjt1bmlmb3JtIHZlYzMgdV9mcnVzdHVtX2JsO3VuaWZvcm0gZmxvYXQgdV9ob3Jpem9uO3ZhcnlpbmcgaGlnaHAgdmVjMyB2X3JheV9kaXI7dmFyeWluZyBoaWdocCB2ZWMzIHZfaG9yaXpvbl9kaXI7dm9pZCBtYWluKCkge3ZfcmF5X2Rpcj1taXgoXFxubWl4KHVfZnJ1c3R1bV90bCx1X2ZydXN0dW1fdHIsYV91di54KSxtaXgodV9mcnVzdHVtX2JsLHVfZnJ1c3R1bV9icixhX3V2LngpLGFfdXYueSk7dl9ob3Jpem9uX2Rpcj1taXgoXFxubWl4KHVfZnJ1c3R1bV90bCx1X2ZydXN0dW1fYmwsdV9ob3Jpem9uKSxtaXgodV9mcnVzdHVtX3RyLHVfZnJ1c3R1bV9icix1X2hvcml6b24pLGFfdXYueCk7Z2xfUG9zaXRpb249dmVjNChhX3BvcywxLjApO31cIil9O2Z1bmN0aW9uIGhpKGUsdCl7Y29uc3QgaT1lLnJlcGxhY2UoL1xccypcXC9cXC9bXlxcbl0qXFxuL2csXCJcXG5cIikuc3BsaXQoXCJcXG5cIik7Zm9yKGxldCBlIG9mIGkpaWYoZT1lLnRyaW0oKSxcIiNcIj09PWVbMF0mJmUuaW5jbHVkZXMoXCJpZlwiKSYmIWUuaW5jbHVkZXMoXCJlbmRpZlwiKSl7ZT1lLnJlcGxhY2UoXCIjXCIsXCJcIikucmVwbGFjZSgvaWZkZWZ8aWZuZGVmfGVsaWZ8aWYvZyxcIlwiKS5yZXBsYWNlKC8hfGRlZmluZWR8XFwofFxcKXxcXHxcXHx8JiYvZyxcIlwiKS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpLnRyaW0oKTtjb25zdCBpPWUuc3BsaXQoXCIgXCIpO2Zvcihjb25zdCBlIG9mIGkpdC5pbmNsdWRlcyhlKXx8dC5wdXNoKGUpO319ZnVuY3Rpb24gdWkoZSx0KXtjb25zdCBpPS8jcHJhZ21hIG1hcGJveDogKFtcXHddKykgKFtcXHddKykgKFtcXHddKykgKFtcXHddKykvZyxvPXQubWF0Y2goL2F0dHJpYnV0ZSAoaGlnaHAgfG1lZGl1bXAgfGxvd3AgKT8oW1xcd10rKSAoW1xcd10rKS9nKSxyPXt9LG49Wy4uLm5pXTtyZXR1cm4gaGkoZSxuKSxoaSh0LG4pLHtmcmFnbWVudFNvdXJjZTplPWUucmVwbGFjZShpLCgoZSx0LGksbyxuKT0+KHJbbl09ITAsXCJkZWZpbmVcIj09PXQ/YFxcbiNpZm5kZWYgSEFTX1VOSUZPUk1fdV8ke259XFxudmFyeWluZyAke2l9ICR7b30gJHtufTtcXG4jZWxzZVxcbnVuaWZvcm0gJHtpfSAke299IHVfJHtufTtcXG4jZW5kaWZcXG5gOmBcXG4jaWZkZWYgSEFTX1VOSUZPUk1fdV8ke259XFxuICAgICR7aX0gJHtvfSAke259ID0gdV8ke259O1xcbiNlbmRpZlxcbmApKSksdmVydGV4U291cmNlOnQ9dC5yZXBsYWNlKGksKChlLHQsaSxvLG4pPT57Y29uc3Qgcz1cImZsb2F0XCI9PT1vP1widmVjMlwiOlwidmVjNFwiLGE9bi5tYXRjaCgvY29sb3IvKT9cImNvbG9yXCI6cztyZXR1cm4gcltuXT9cImRlZmluZVwiPT09dD9gXFxuI2lmbmRlZiBIQVNfVU5JRk9STV91XyR7bn1cXG51bmlmb3JtIGxvd3AgZmxvYXQgdV8ke259X3Q7XFxuYXR0cmlidXRlICR7aX0gJHtzfSBhXyR7bn07XFxudmFyeWluZyAke2l9ICR7b30gJHtufTtcXG4jZWxzZVxcbnVuaWZvcm0gJHtpfSAke299IHVfJHtufTtcXG4jZW5kaWZcXG5gOlwidmVjNFwiPT09YT9gXFxuI2lmbmRlZiBIQVNfVU5JRk9STV91XyR7bn1cXG4gICAgJHtufSA9IGFfJHtufTtcXG4jZWxzZVxcbiAgICAke2l9ICR7b30gJHtufSA9IHVfJHtufTtcXG4jZW5kaWZcXG5gOmBcXG4jaWZuZGVmIEhBU19VTklGT1JNX3VfJHtufVxcbiAgICAke259ID0gdW5wYWNrX21peF8ke2F9KGFfJHtufSwgdV8ke259X3QpO1xcbiNlbHNlXFxuICAgICR7aX0gJHtvfSAke259ID0gdV8ke259O1xcbiNlbmRpZlxcbmA6XCJkZWZpbmVcIj09PXQ/YFxcbiNpZm5kZWYgSEFTX1VOSUZPUk1fdV8ke259XFxudW5pZm9ybSBsb3dwIGZsb2F0IHVfJHtufV90O1xcbmF0dHJpYnV0ZSAke2l9ICR7c30gYV8ke259O1xcbiNlbHNlXFxudW5pZm9ybSAke2l9ICR7b30gdV8ke259O1xcbiNlbmRpZlxcbmA6XCJ2ZWM0XCI9PT1hP2BcXG4jaWZuZGVmIEhBU19VTklGT1JNX3VfJHtufVxcbiAgICAke2l9ICR7b30gJHtufSA9IGFfJHtufTtcXG4jZWxzZVxcbiAgICAke2l9ICR7b30gJHtufSA9IHVfJHtufTtcXG4jZW5kaWZcXG5gOmBcXG4jaWZuZGVmIEhBU19VTklGT1JNX3VfJHtufVxcbiAgICAke2l9ICR7b30gJHtufSA9IHVucGFja19taXhfJHthfShhXyR7bn0sIHVfJHtufV90KTtcXG4jZWxzZVxcbiAgICAke2l9ICR7b30gJHtufSA9IHVfJHtufTtcXG4jZW5kaWZcXG5gfSkpLHN0YXRpY0F0dHJpYnV0ZXM6byx1c2VkRGVmaW5lczpufX1jbGFzcyBfaXtjb25zdHJ1Y3Rvcigpe3RoaXMuYm91bmRQcm9ncmFtPW51bGwsdGhpcy5ib3VuZExheW91dFZlcnRleEJ1ZmZlcj1udWxsLHRoaXMuYm91bmRQYWludFZlcnRleEJ1ZmZlcnM9W10sdGhpcy5ib3VuZEluZGV4QnVmZmVyPW51bGwsdGhpcy5ib3VuZFZlcnRleE9mZnNldD1udWxsLHRoaXMuYm91bmREeW5hbWljVmVydGV4QnVmZmVycz1bXSx0aGlzLnZhbz1udWxsO31iaW5kKGUsdCxpLG8scixuLHMpe3RoaXMuY29udGV4dD1lO2xldCBhPXRoaXMuYm91bmRQYWludFZlcnRleEJ1ZmZlcnMubGVuZ3RoIT09by5sZW5ndGg7Zm9yKGxldCBlPTA7IWEmJmU8by5sZW5ndGg7ZSsrKXRoaXMuYm91bmRQYWludFZlcnRleEJ1ZmZlcnNbZV0hPT1vW2VdJiYoYT0hMCk7bGV0IGw9dGhpcy5ib3VuZER5bmFtaWNWZXJ0ZXhCdWZmZXJzLmxlbmd0aCE9PXMubGVuZ3RoO2ZvcihsZXQgZT0wOyFsJiZlPHMubGVuZ3RoO2UrKyl0aGlzLmJvdW5kRHluYW1pY1ZlcnRleEJ1ZmZlcnNbZV0hPT1zW2VdJiYobD0hMCk7aWYoIWUuZXh0VmVydGV4QXJyYXlPYmplY3R8fCF0aGlzLnZhb3x8dGhpcy5ib3VuZFByb2dyYW0hPT10fHx0aGlzLmJvdW5kTGF5b3V0VmVydGV4QnVmZmVyIT09aXx8YXx8bHx8dGhpcy5ib3VuZEluZGV4QnVmZmVyIT09cnx8dGhpcy5ib3VuZFZlcnRleE9mZnNldCE9PW4pdGhpcy5mcmVzaEJpbmQodCxpLG8scixuLHMpO2Vsc2Uge2UuYmluZFZlcnRleEFycmF5T0VTLnNldCh0aGlzLnZhbyk7Zm9yKGNvbnN0IGUgb2YgcyllJiZlLmJpbmQoKTtyJiZyLmR5bmFtaWNEcmF3JiZyLmJpbmQoKTt9fWZyZXNoQmluZChlLHQsaSxvLHIsbil7bGV0IHM7Y29uc3QgYT1lLm51bUF0dHJpYnV0ZXMsbD10aGlzLmNvbnRleHQsYz1sLmdsO2lmKGwuZXh0VmVydGV4QXJyYXlPYmplY3QpdGhpcy52YW8mJnRoaXMuZGVzdHJveSgpLHRoaXMudmFvPWwuZXh0VmVydGV4QXJyYXlPYmplY3QuY3JlYXRlVmVydGV4QXJyYXlPRVMoKSxsLmJpbmRWZXJ0ZXhBcnJheU9FUy5zZXQodGhpcy52YW8pLHM9MCx0aGlzLmJvdW5kUHJvZ3JhbT1lLHRoaXMuYm91bmRMYXlvdXRWZXJ0ZXhCdWZmZXI9dCx0aGlzLmJvdW5kUGFpbnRWZXJ0ZXhCdWZmZXJzPWksdGhpcy5ib3VuZEluZGV4QnVmZmVyPW8sdGhpcy5ib3VuZFZlcnRleE9mZnNldD1yLHRoaXMuYm91bmREeW5hbWljVmVydGV4QnVmZmVycz1uO2Vsc2Uge3M9bC5jdXJyZW50TnVtQXR0cmlidXRlc3x8MDtmb3IobGV0IGU9YTtlPHM7ZSsrKWMuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpO310LmVuYWJsZUF0dHJpYnV0ZXMoYyxlKSx0LmJpbmQoKSx0LnNldFZlcnRleEF0dHJpYlBvaW50ZXJzKGMsZSxyKTtmb3IoY29uc3QgdCBvZiBpKXQuZW5hYmxlQXR0cmlidXRlcyhjLGUpLHQuYmluZCgpLHQuc2V0VmVydGV4QXR0cmliUG9pbnRlcnMoYyxlLHIpO2Zvcihjb25zdCB0IG9mIG4pdCYmKHQuZW5hYmxlQXR0cmlidXRlcyhjLGUpLHQuYmluZCgpLHQuc2V0VmVydGV4QXR0cmliUG9pbnRlcnMoYyxlLHIpKTtvJiZvLmJpbmQoKSxsLmN1cnJlbnROdW1BdHRyaWJ1dGVzPWE7fWRlc3Ryb3koKXt0aGlzLnZhbyYmKHRoaXMuY29udGV4dC5leHRWZXJ0ZXhBcnJheU9iamVjdC5kZWxldGVWZXJ0ZXhBcnJheU9FUyh0aGlzLnZhbyksdGhpcy52YW89bnVsbCk7fX1mdW5jdGlvbiBkaSh0LGkpe2NvbnN0IG89TWF0aC5wb3coMixpLmNhbm9uaWNhbC56KSxyPWkuY2Fub25pY2FsLnk7cmV0dXJuIFtuZXcgZS5NZXJjYXRvckNvb3JkaW5hdGUoMCxyL28pLnRvTG5nTGF0KCkubGF0LG5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSgwLChyKzEpL28pLnRvTG5nTGF0KCkubGF0XX1mdW5jdGlvbiBwaSh0LGksbyxyLG4scyxhKXtjb25zdCBsPXQuY29udGV4dCxjPWwuZ2wsaD1vLmZibztpZighaClyZXR1cm47dC5wcmVwYXJlRHJhd1RpbGUoKTtjb25zdCB1PXQudXNlUHJvZ3JhbShcImhpbGxzaGFkZVwiKTtsLmFjdGl2ZVRleHR1cmUuc2V0KGMuVEVYVFVSRTApLGMuYmluZFRleHR1cmUoYy5URVhUVVJFXzJELGguY29sb3JBdHRhY2htZW50LmdldCgpKTtjb25zdCBfPSgoZSx0LGksbyk9Pntjb25zdCByPWkucGFpbnQuZ2V0KFwiaGlsbHNoYWRlLXNoYWRvdy1jb2xvclwiKSxuPWkucGFpbnQuZ2V0KFwiaGlsbHNoYWRlLWhpZ2hsaWdodC1jb2xvclwiKSxzPWkucGFpbnQuZ2V0KFwiaGlsbHNoYWRlLWFjY2VudC1jb2xvclwiKTtsZXQgYT1pLnBhaW50LmdldChcImhpbGxzaGFkZS1pbGx1bWluYXRpb24tZGlyZWN0aW9uXCIpKihNYXRoLlBJLzE4MCk7XCJ2aWV3cG9ydFwiPT09aS5wYWludC5nZXQoXCJoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWFuY2hvclwiKSYmKGEtPWUudHJhbnNmb3JtLmFuZ2xlKTtjb25zdCBsPSFlLm9wdGlvbnMubW92aW5nO3JldHVybiB7dV9tYXRyaXg6b3x8ZS50cmFuc2Zvcm0uY2FsY3VsYXRlUHJvak1hdHJpeCh0LnRpbGVJRC50b1Vud3JhcHBlZCgpLGwpLHVfaW1hZ2U6MCx1X2xhdHJhbmdlOmRpKDAsdC50aWxlSUQpLHVfbGlnaHQ6W2kucGFpbnQuZ2V0KFwiaGlsbHNoYWRlLWV4YWdnZXJhdGlvblwiKSxhXSx1X3NoYWRvdzpyLHVfaGlnaGxpZ2h0Om4sdV9hY2NlbnQ6c319KSh0LG8scix0LnRlcnJhaW4/aS5wcm9qTWF0cml4Om51bGwpO3QucHJlcGFyZURyYXdQcm9ncmFtKGwsdSxpLnRvVW53cmFwcGVkKCkpO2NvbnN0e3RpbGVCb3VuZHNCdWZmZXI6ZCx0aWxlQm91bmRzSW5kZXhCdWZmZXI6cCx0aWxlQm91bmRzU2VnbWVudHM6bX09dC5nZXRUaWxlQm91bmRzQnVmZmVycyhvKTt1LmRyYXcobCxjLlRSSUFOR0xFUyxuLHMsYSxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCxfLHIuaWQsZCxwLG0pO31mdW5jdGlvbiBtaSh0LGksbyl7aWYoIWkubmVlZHNERU1UZXh0dXJlVXBsb2FkKXJldHVybjtjb25zdCByPXQuY29udGV4dCxuPXIuZ2w7ci5waXhlbFN0b3JlVW5wYWNrUHJlbXVsdGlwbHlBbHBoYS5zZXQoITEpLGkuZGVtVGV4dHVyZT1pLmRlbVRleHR1cmV8fHQuZ2V0VGlsZVRleHR1cmUoby5zdHJpZGUpO2NvbnN0IHM9by5nZXRQaXhlbHMoKTtpLmRlbVRleHR1cmU/aS5kZW1UZXh0dXJlLnVwZGF0ZShzLHtwcmVtdWx0aXBseTohMX0pOmkuZGVtVGV4dHVyZT1uZXcgZS5UZXh0dXJlKHIscyxuLlJHQkEse3ByZW11bHRpcGx5OiExfSksaS5uZWVkc0RFTVRleHR1cmVVcGxvYWQ9ITE7fWZ1bmN0aW9uIGZpKHQsaSxvLHIsbixzKXtjb25zdCBhPXQuY29udGV4dCxsPWEuZ2w7aWYoIWkuZGVtKXJldHVybjtjb25zdCBjPWkuZGVtO2lmKGEuYWN0aXZlVGV4dHVyZS5zZXQobC5URVhUVVJFMSksbWkodCxpLGMpLCFpLmRlbVRleHR1cmUpcmV0dXJuO2kuZGVtVGV4dHVyZS5iaW5kKGwuTkVBUkVTVCxsLkNMQU1QX1RPX0VER0UpO2NvbnN0IGg9Yy5kaW07YS5hY3RpdmVUZXh0dXJlLnNldChsLlRFWFRVUkUwKTtsZXQgdT1pLmZibztpZighdSl7Y29uc3QgdD1uZXcgZS5UZXh0dXJlKGEse3dpZHRoOmgsaGVpZ2h0OmgsZGF0YTpudWxsfSxsLlJHQkEpO3QuYmluZChsLkxJTkVBUixsLkNMQU1QX1RPX0VER0UpLHU9aS5mYm89YS5jcmVhdGVGcmFtZWJ1ZmZlcihoLGgsITApLHUuY29sb3JBdHRhY2htZW50LnNldCh0LnRleHR1cmUpO31hLmJpbmRGcmFtZWJ1ZmZlci5zZXQodS5mcmFtZWJ1ZmZlciksYS52aWV3cG9ydC5zZXQoWzAsMCxoLGhdKTtjb25zdHt0aWxlQm91bmRzQnVmZmVyOl8sdGlsZUJvdW5kc0luZGV4QnVmZmVyOmQsdGlsZUJvdW5kc1NlZ21lbnRzOnB9PXQuZ2V0TWVyY2F0b3JUaWxlQm91bmRzQnVmZmVycygpO3QudXNlUHJvZ3JhbShcImhpbGxzaGFkZVByZXBhcmVcIikuZHJhdyhhLGwuVFJJQU5HTEVTLHIsbixzLGUuQ3VsbEZhY2VNb2RlLmRpc2FibGVkLCgodCxpKT0+e2NvbnN0IG89aS5zdHJpZGUscj1lLmNyZWF0ZSgpO3JldHVybiBlLm9ydGhvKHIsMCxlLkVYVEVOVCwtZS5FWFRFTlQsMCwwLDEpLGUudHJhbnNsYXRlKHIscixbMCwtZS5FWFRFTlQsMF0pLHt1X21hdHJpeDpyLHVfaW1hZ2U6MSx1X2RpbWVuc2lvbjpbbyxvXSx1X3pvb206dC5vdmVyc2NhbGVkWix1X3VucGFjazppLnVucGFja1ZlY3Rvcn19KShpLnRpbGVJRCxjKSxvLmlkLF8sZCxwKSxpLm5lZWRzSGlsbHNoYWRlUHJlcGFyZT0hMTt9Y29uc3QgZ2k9dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9pbWFnZTA6bmV3IGUuVW5pZm9ybTFpKHQpLHVfc2tpcnRfaGVpZ2h0Om5ldyBlLlVuaWZvcm0xZih0KX0pLHZpPShlLHQpPT4oe3VfbWF0cml4OmUsdV9pbWFnZTA6MCx1X3NraXJ0X2hlaWdodDp0fSkseGk9KGUsdCxpLG8scixuLHMsYSxsLGMsaCx1LF8sZCxwKT0+KHt1X3Byb2pfbWF0cml4OkZsb2F0MzJBcnJheS5mcm9tKGUpLHVfZ2xvYmVfbWF0cml4OnQsdV9ub3JtYWxpemVfbWF0cml4OkZsb2F0MzJBcnJheS5mcm9tKG8pLHVfbWVyY19tYXRyaXg6aSx1X3pvb21fdHJhbnNpdGlvbjpyLHVfbWVyY19jZW50ZXI6bix1X2ltYWdlMDowLHVfZnJ1c3R1bV90bDpzLHVfZnJ1c3R1bV90cjphLHVfZnJ1c3R1bV9icjpsLHVfZnJ1c3R1bV9ibDpjLHVfZ2xvYmVfcG9zOmgsdV9nbG9iZV9yYWRpdXM6dSx1X3ZpZXdwb3J0Ol8sdV9ncmlkX21hdHJpeDpwP0Zsb2F0MzJBcnJheS5mcm9tKHApOm5ldyBGbG9hdDMyQXJyYXkoOSksdV9za2lydF9oZWlnaHQ6ZH0pO2Z1bmN0aW9uIHlpKGUsdCl7cmV0dXJuIG51bGwhPWUmJm51bGwhPXQmJiEoIWUuaGFzRGF0YSgpfHwhdC5oYXNEYXRhKCkpJiZudWxsIT1lLmRlbVRleHR1cmUmJm51bGwhPXQuZGVtVGV4dHVyZSYmZS50aWxlSUQua2V5IT09dC50aWxlSUQua2V5fWNvbnN0IGJpPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMub3BlcmF0aW9ucz17fTt9bmV3TW9ycGhpbmcoZSx0LGksbyxyKXtpZihlIGluIHRoaXMub3BlcmF0aW9ucyl7Y29uc3QgdD10aGlzLm9wZXJhdGlvbnNbZV07dC50by50aWxlSUQua2V5IT09aS50aWxlSUQua2V5JiYodC5xdWV1ZWQ9aSk7fWVsc2UgdGhpcy5vcGVyYXRpb25zW2VdPXtzdGFydFRpbWU6byxwaGFzZTowLGR1cmF0aW9uOnIsZnJvbTp0LHRvOmkscXVldWVkOm51bGx9O31nZXRNb3JwaFZhbHVlc0ZvclByb3h5KGUpe2lmKCEoZSBpbiB0aGlzLm9wZXJhdGlvbnMpKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5vcGVyYXRpb25zW2VdO3JldHVybiB7ZnJvbTp0LmZyb20sdG86dC50byxwaGFzZTp0LnBoYXNlfX11cGRhdGUoZSl7Zm9yKGNvbnN0IHQgaW4gdGhpcy5vcGVyYXRpb25zKXtjb25zdCBpPXRoaXMub3BlcmF0aW9uc1t0XTtmb3IoaS5waGFzZT0oZS1pLnN0YXJ0VGltZSkvaS5kdXJhdGlvbjtpLnBoYXNlPj0xfHwhdGhpcy5fdmFsaWRPcChpKTspaWYoIXRoaXMuX25leHRPcChpLGUpKXtkZWxldGUgdGhpcy5vcGVyYXRpb25zW3RdO2JyZWFrfX19X25leHRPcChlLHQpe3JldHVybiAhIWUucXVldWVkJiYoZS5mcm9tPWUudG8sZS50bz1lLnF1ZXVlZCxlLnF1ZXVlZD1udWxsLGUucGhhc2U9MCxlLnN0YXJ0VGltZT10LCEwKX1fdmFsaWRPcChlKXtyZXR1cm4gZS5mcm9tLmhhc0RhdGEoKSYmZS50by5oYXNEYXRhKCl9fSx3aT17MDpudWxsLDE6XCJURVJSQUlOX1ZFUlRFWF9NT1JQSElOR1wiLDI6XCJURVJSQUlOX1dJUkVGUkFNRVwifTtmdW5jdGlvbiBUaShlKXtyZXR1cm4gNipNYXRoLnBvdygxLjUsMjItZSl9ZnVuY3Rpb24gRWkoZSx0KXtjb25zdCBpPTE8PGUuejtyZXR1cm4gIXQmJigwPT09ZS54fHxlLng9PT1pLTEpfHwwPT09ZS55fHxlLnk9PT1pLTF9Y29uc3QgQ2k9ZT0+KHt1X21hdHJpeDplfSk7ZnVuY3Rpb24gTWkodCxpLG8scixuKXtpZihuPjApe2NvbnN0IHM9ZS5leHBvcnRlZC5ub3coKSxhPShzLXQudGltZUFkZGVkKS9uLGw9aT8ocy1pLnRpbWVBZGRlZCkvbjotMSxjPW8uZ2V0U291cmNlKCksaD1yLmNvdmVyaW5nWm9vbUxldmVsKHt0aWxlU2l6ZTpjLnRpbGVTaXplLHJvdW5kWm9vbTpjLnJvdW5kWm9vbX0pLHU9IWl8fE1hdGguYWJzKGkudGlsZUlELm92ZXJzY2FsZWRaLWgpPk1hdGguYWJzKHQudGlsZUlELm92ZXJzY2FsZWRaLWgpLF89dSYmdC5yZWZyZXNoZWRVcG9uRXhwaXJhdGlvbj8xOmUuY2xhbXAodT9hOjEtbCwwLDEpO3JldHVybiB0LnJlZnJlc2hlZFVwb25FeHBpcmF0aW9uJiZhPj0xJiYodC5yZWZyZXNoZWRVcG9uRXhwaXJhdGlvbj0hMSksaT97b3BhY2l0eToxLG1peDoxLV99OntvcGFjaXR5Ol8sbWl4OjB9fXJldHVybiB7b3BhY2l0eToxLG1peDowfX1jbGFzcyBJaSBleHRlbmRzIGUuU291cmNlQ2FjaGV7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD17dHlwZTpcInJhc3Rlci1kZW1cIixtYXh6b29tOmUudHJhbnNmb3JtLm1heFpvb219LGk9bmV3IFMoVWUoKSxudWxsKSxvPURlKFwibW9jay1kZW1cIix0LGksZS5zdHlsZSk7c3VwZXIoXCJtb2NrLWRlbVwiLG8sITEpLG8uc2V0RXZlbnRlZFBhcmVudCh0aGlzKSx0aGlzLl9zb3VyY2VMb2FkZWQ9ITA7fV9sb2FkVGlsZShlLHQpe2Uuc3RhdGU9XCJsb2FkZWRcIix0KG51bGwpO319Y2xhc3MgUGkgZXh0ZW5kcyBlLlNvdXJjZUNhY2hle2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9RGUoXCJwcm94eVwiLHt0eXBlOlwiZ2VvanNvblwiLG1heHpvb206ZS50cmFuc2Zvcm0ubWF4Wm9vbX0sbmV3IFMoVWUoKSxudWxsKSxlLnN0eWxlKTtzdXBlcihcInByb3h5XCIsdCwhMSksdC5zZXRFdmVudGVkUGFyZW50KHRoaXMpLHRoaXMubWFwPXRoaXMuZ2V0U291cmNlKCkubWFwPWUsdGhpcy51c2VkPXRoaXMuX3NvdXJjZUxvYWRlZD0hMCx0aGlzLnJlbmRlckNhY2hlPVtdLHRoaXMucmVuZGVyQ2FjaGVQb29sPVtdLHRoaXMucHJveHlDYWNoZWRGQk89e307fXVwZGF0ZSh0LGksbyl7aWYodC5mcmVlemVUaWxlQ292ZXJhZ2UpcmV0dXJuO3RoaXMudHJhbnNmb3JtPXQ7Y29uc3Qgcj10LmNvdmVyaW5nVGlsZXMoe3RpbGVTaXplOnRoaXMuX3NvdXJjZS50aWxlU2l6ZSxtaW56b29tOnRoaXMuX3NvdXJjZS5taW56b29tLG1heHpvb206dGhpcy5fc291cmNlLm1heHpvb20scm91bmRab29tOnRoaXMuX3NvdXJjZS5yb3VuZFpvb20scmVwYXJzZU92ZXJzY2FsZWQ6dGhpcy5fc291cmNlLnJlcGFyc2VPdmVyc2NhbGVkfSkucmVkdWNlKCgoaSxvKT0+e2lmKGlbby5rZXldPVwiXCIsIXRoaXMuX3RpbGVzW28ua2V5XSl7Y29uc3QgaT1uZXcgZS5UaWxlKG8sdGhpcy5fc291cmNlLnRpbGVTaXplKm8ub3ZlcnNjYWxlRmFjdG9yKCksdC50aWxlWm9vbSk7aS5zdGF0ZT1cImxvYWRlZFwiLHRoaXMuX3RpbGVzW28ua2V5XT1pO31yZXR1cm4gaX0pLHt9KTtmb3IoY29uc3QgZSBpbiB0aGlzLl90aWxlcyllIGluIHJ8fCh0aGlzLmZyZWVGQk8oZSksdGhpcy5fdGlsZXNbZV0udW5sb2FkVmVjdG9yRGF0YSgpLGRlbGV0ZSB0aGlzLl90aWxlc1tlXSk7fWZyZWVGQk8oZSl7Y29uc3QgdD10aGlzLnByb3h5Q2FjaGVkRkJPW2VdO2lmKHZvaWQgMCE9PXQpe2NvbnN0IGk9T2JqZWN0LnZhbHVlcyh0KTt0aGlzLnJlbmRlckNhY2hlUG9vbC5wdXNoKC4uLmkpLGRlbGV0ZSB0aGlzLnByb3h5Q2FjaGVkRkJPW2VdO319ZGVhbGxvY1JlbmRlckNhY2hlKCl7dGhpcy5yZW5kZXJDYWNoZS5mb3JFYWNoKChlPT5lLmZiLmRlc3Ryb3koKSkpLHRoaXMucmVuZGVyQ2FjaGU9W10sdGhpcy5yZW5kZXJDYWNoZVBvb2w9W10sdGhpcy5wcm94eUNhY2hlZEZCTz17fTt9fWNsYXNzIFNpIGV4dGVuZHMgZS5PdmVyc2NhbGVkVGlsZUlEe2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLm92ZXJzY2FsZWRaLGUud3JhcCxlLmNhbm9uaWNhbC56LGUuY2Fub25pY2FsLngsZS5jYW5vbmljYWwueSksdGhpcy5wcm94eVRpbGVLZXk9dCx0aGlzLnByb2pNYXRyaXg9aTt9fWNsYXNzIERpIGV4dGVuZHMgZS5FbGV2YXRpb257Y29uc3RydWN0b3IodCxpKXtzdXBlcigpLHRoaXMucGFpbnRlcj10LHRoaXMudGVycmFpblRpbGVGb3JUaWxlPXt9LHRoaXMucHJldlRlcnJhaW5UaWxlRm9yVGlsZT17fTtjb25zdFtvLHIsbl09ZnVuY3Rpb24odCl7Y29uc3QgaT1uZXcgZS5TdHJ1Y3RBcnJheUxheW91dDJpNCxvPW5ldyBlLlN0cnVjdEFycmF5TGF5b3V0M3VpNixyPTEzMTtpLnJlc2VydmUoMTcxNjEpLG8ucmVzZXJ2ZSgzMzgwMCk7Y29uc3Qgbj1lLkVYVEVOVC8xMjgscz1lLkVYVEVOVCtuLzIsYT1zK247Zm9yKGxldCB0PS1uO3Q8YTt0Kz1uKWZvcihsZXQgbz0tbjtvPGE7bys9bil7Y29uc3Qgcj1vPDB8fG8+c3x8dDwwfHx0PnM/MjQ1NzU6MCxuPWUuY2xhbXAoTWF0aC5yb3VuZChvKSwwLGUuRVhURU5UKSxhPWUuY2xhbXAoTWF0aC5yb3VuZCh0KSwwLGUuRVhURU5UKTtpLmVtcGxhY2VCYWNrKG4rcixhKTt9Y29uc3QgbD0oZSx0KT0+e2NvbnN0IGk9dCpyK2U7by5lbXBsYWNlQmFjayhpKzEsaSxpK3IpLG8uZW1wbGFjZUJhY2soaStyLGkrcisxLGkrMSk7fTtmb3IobGV0IGU9MTtlPDEyOTtlKyspZm9yKGxldCB0PTE7dDwxMjk7dCsrKWwodCxlKTtyZXR1cm4gWzAsMTI5XS5mb3JFYWNoKChlPT57Zm9yKGxldCB0PTA7dDwxMzA7dCsrKWwodCxlKSxsKGUsdCk7fSkpLFtpLG8sMzI3NjhdfSgpLHM9dC5jb250ZXh0O3RoaXMuZ3JpZEJ1ZmZlcj1zLmNyZWF0ZVZlcnRleEJ1ZmZlcihvLGUucG9zQXR0cmlidXRlcy5tZW1iZXJzKSx0aGlzLmdyaWRJbmRleEJ1ZmZlcj1zLmNyZWF0ZUluZGV4QnVmZmVyKHIpLHRoaXMuZ3JpZFNlZ21lbnRzPWUuU2VnbWVudFZlY3Rvci5zaW1wbGVTZWdtZW50KDAsMCxvLmxlbmd0aCxyLmxlbmd0aCksdGhpcy5ncmlkTm9Ta2lydFNlZ21lbnRzPWUuU2VnbWVudFZlY3Rvci5zaW1wbGVTZWdtZW50KDAsMCxvLmxlbmd0aCxuKSx0aGlzLnByb3h5Q29vcmRzPVtdLHRoaXMucHJveGllZENvb3Jkcz17fSx0aGlzLl92aXNpYmxlRGVtVGlsZXM9W10sdGhpcy5fZHJhcGVkUmVuZGVyQmF0Y2hlcz1bXSx0aGlzLl9zb3VyY2VUaWxlc092ZXJsYXA9e30sdGhpcy5wcm94eVNvdXJjZUNhY2hlPW5ldyBQaShpLm1hcCksdGhpcy5vcnRob01hdHJpeD1lLmNyZWF0ZSgpLGUub3J0aG8odGhpcy5vcnRob01hdHJpeCxcImdsb2JlXCI9PT10aGlzLnBhaW50ZXIudHJhbnNmb3JtLnByb2plY3Rpb24ubmFtZT8uMDE1OjAsZS5FWFRFTlQsMCxlLkVYVEVOVCwwLDEpO2NvbnN0IGE9cy5nbDt0aGlzLl9vdmVybGFwU3RlbmNpbE1vZGU9bmV3IGUuU3RlbmNpbE1vZGUoe2Z1bmM6YS5HRVFVQUwsbWFzazoyNTV9LDAsMjU1LGEuS0VFUCxhLktFRVAsYS5SRVBMQUNFKSx0aGlzLl9wcmV2aW91c1pvb209dC50cmFuc2Zvcm0uem9vbSx0aGlzLnBvb2w9W10sdGhpcy5fZmluZENvdmVyaW5nVGlsZUNhY2hlPXt9LHRoaXMuX3RpbGVzRGlydHk9e30sdGhpcy5zdHlsZT1pLHRoaXMuX3VzZVZlcnRleE1vcnBoaW5nPSEwLHRoaXMuX2V4YWdnZXJhdGlvbj0xLHRoaXMuX21vY2tTb3VyY2VDYWNoZT1uZXcgSWkoaS5tYXApO31zZXQgc3R5bGUoZSl7ZS5vbihcImRhdGFcIix0aGlzLl9vblN0eWxlRGF0YUV2ZW50LmJpbmQodGhpcykpLGUub24oXCJuZXdvcmRlclwiLHRoaXMuX2NoZWNrUmVuZGVyQ2FjaGVFZmZpY2llbmN5LmJpbmQodGhpcykpLHRoaXMuX3N0eWxlPWUsdGhpcy5fY2hlY2tSZW5kZXJDYWNoZUVmZmljaWVuY3koKSx0aGlzLl9zdHlsZS5tYXAub24oXCJtb3ZlZW5kXCIsKCgpPT57dGhpcy5fY2xlYXJMaW5lTGF5ZXJzRnJvbVJlbmRlckNhY2hlKCk7fSkpO311cGRhdGUodCxpLG8pe2lmKHQmJnQudGVycmFpbil7dGhpcy5fc3R5bGUhPT10JiYodGhpcy5zdHlsZT10KSx0aGlzLmVuYWJsZWQ9ITA7Y29uc3Qgcj10LnRlcnJhaW4ucHJvcGVydGllczt0aGlzLnNvdXJjZUNhY2hlPTA9PT10LnRlcnJhaW4uZHJhcGVSZW5kZXJNb2RlP3RoaXMuX21vY2tTb3VyY2VDYWNoZTp0Ll9nZXRTb3VyY2VDYWNoZShyLmdldChcInNvdXJjZVwiKSksdGhpcy5fZXhhZ2dlcmF0aW9uPXIuZ2V0KFwiZXhhZ2dlcmF0aW9uXCIpO2NvbnN0IG49KCk9Pnt0aGlzLnNvdXJjZUNhY2hlLnVzZWQmJmUud2Fybk9uY2UoYFJhc3RlciBERU0gc291cmNlICcke3RoaXMuc291cmNlQ2FjaGUuaWR9JyBpcyB1c2VkIGJvdGggZm9yIHRlcnJhaW4gYW5kIGFzIGxheWVyIHNvdXJjZS5cXG5UaGlzIGxlYWRzIHRvIGxvd2VyIHJlc29sdXRpb24gb2YgaGlsbHNoYWRlLiBGb3IgZnVsbCBoaWxsc2hhZGUgcmVzb2x1dGlvbiBidXQgaGlnaGVyIG1lbW9yeSBjb25zdW1wdGlvbiwgZGVmaW5lIGFub3RoZXIgcmFzdGVyIERFTSBzb3VyY2UuYCk7Y29uc3QgdD10aGlzLmdldFNjYWxlZERlbVRpbGVTaXplKCk7dGhpcy5zb3VyY2VDYWNoZS51cGRhdGUoaSx0LCEwKSx0aGlzLnJlc2V0VGlsZUxvb2t1cENhY2hlKHRoaXMuc291cmNlQ2FjaGUuaWQpO307dGhpcy5zb3VyY2VDYWNoZS51c2VkRm9yVGVycmFpbnx8KHRoaXMucmVzZXRUaWxlTG9va3VwQ2FjaGUodGhpcy5zb3VyY2VDYWNoZS5pZCksdGhpcy5zb3VyY2VDYWNoZS51c2VkRm9yVGVycmFpbj0hMCxuKCksdGhpcy5faW5pdGlhbGl6aW5nPSEwKSxuKCksaS51cGRhdGVFbGV2YXRpb24oITAsbyksdGhpcy5yZXNldFRpbGVMb29rdXBDYWNoZSh0aGlzLnByb3h5U291cmNlQ2FjaGUuaWQpLHRoaXMucHJveHlTb3VyY2VDYWNoZS51cGRhdGUoaSksdGhpcy5fZW1wdHlERU1UZXh0dXJlRGlydHk9ITA7fWVsc2UgdGhpcy5fZGlzYWJsZSgpO31yZXNldFRpbGVMb29rdXBDYWNoZShlKXt0aGlzLl9maW5kQ292ZXJpbmdUaWxlQ2FjaGVbZV09e307fWdldFNjYWxlZERlbVRpbGVTaXplKCl7cmV0dXJuIHRoaXMuc291cmNlQ2FjaGUuZ2V0U291cmNlKCkudGlsZVNpemUvMTI4KnRoaXMucHJveHlTb3VyY2VDYWNoZS5nZXRTb3VyY2UoKS50aWxlU2l6ZX1fY2hlY2tSZW5kZXJDYWNoZUVmZmljaWVuY3koKXtjb25zdCB0PXRoaXMucmVuZGVyQ2FjaGVFZmZpY2llbmN5KHRoaXMuX3N0eWxlKTt0aGlzLl9zdHlsZS5tYXAuX29wdGltaXplRm9yVGVycmFpbnx8MTAwIT09dC5lZmZpY2llbmN5JiZlLndhcm5PbmNlKGBUZXJyYWluIHJlbmRlciBjYWNoZSBlZmZpY2llbmN5IGlzIG5vdCBvcHRpbWFsICgke3QuZWZmaWNpZW5jeX0lKSBhbmQgcGVyZm9ybWFuY2VcXG4gICAgICAgICAgICAgICAgbWF5IGJlIGFmZmVjdGVkIG5lZ2F0aXZlbHksIGNvbnNpZGVyIHBsYWNpbmcgYWxsIGJhY2tncm91bmQsIGZpbGwgYW5kIGxpbmUgbGF5ZXJzIGJlZm9yZSBsYXllclxcbiAgICAgICAgICAgICAgICB3aXRoIGlkICcke3QuZmlyc3RVbmRyYXBlZExheWVyfScgb3IgY3JlYXRlIGEgbWFwIHVzaW5nIG9wdGltaXplRm9yVGVycmFpbjogdHJ1ZSBvcHRpb24uYCk7fV9vblN0eWxlRGF0YUV2ZW50KGUpe2UuY29vcmQmJlwic291cmNlXCI9PT1lLmRhdGFUeXBlP3RoaXMuX2NsZWFyUmVuZGVyQ2FjaGVGb3JUaWxlKGUuc291cmNlQ2FjaGVJZCxlLmNvb3JkKTpcInN0eWxlXCI9PT1lLmRhdGFUeXBlJiYodGhpcy5faW52YWxpZGF0ZVJlbmRlckNhY2hlPSEwKTt9X2Rpc2FibGUoKXtpZih0aGlzLmVuYWJsZWQmJih0aGlzLmVuYWJsZWQ9ITEsdGhpcy5fc2hhcmVkRGVwdGhTdGVuY2lsPXZvaWQgMCx0aGlzLnByb3h5U291cmNlQ2FjaGUuZGVhbGxvY1JlbmRlckNhY2hlKCksdGhpcy5fc3R5bGUpKWZvcihjb25zdCBlIGluIHRoaXMuX3N0eWxlLl9zb3VyY2VDYWNoZXMpdGhpcy5fc3R5bGUuX3NvdXJjZUNhY2hlc1tlXS51c2VkRm9yVGVycmFpbj0hMTt9ZGVzdHJveSgpe3RoaXMuX2Rpc2FibGUoKSx0aGlzLl9lbXB0eURFTVRleHR1cmUmJnRoaXMuX2VtcHR5REVNVGV4dHVyZS5kZXN0cm95KCksdGhpcy5fZW1wdHlEZXB0aEJ1ZmZlclRleHR1cmUmJnRoaXMuX2VtcHR5RGVwdGhCdWZmZXJUZXh0dXJlLmRlc3Ryb3koKSx0aGlzLnBvb2wuZm9yRWFjaCgoZT0+ZS5mYi5kZXN0cm95KCkpKSx0aGlzLnBvb2w9W10sdGhpcy5fZGVwdGhGQk8mJih0aGlzLl9kZXB0aEZCTy5kZXN0cm95KCksdGhpcy5fZGVwdGhGQk89dm9pZCAwLHRoaXMuX2RlcHRoVGV4dHVyZT12b2lkIDApO31fc291cmNlKCl7cmV0dXJuIHRoaXMuZW5hYmxlZD90aGlzLnNvdXJjZUNhY2hlOm51bGx9aXNVc2luZ01vY2tTb3VyY2UoKXtyZXR1cm4gdGhpcy5zb3VyY2VDYWNoZT09PXRoaXMuX21vY2tTb3VyY2VDYWNoZX1leGFnZ2VyYXRpb24oKXtyZXR1cm4gdGhpcy5fZXhhZ2dlcmF0aW9ufWdldCB2aXNpYmxlRGVtVGlsZXMoKXtyZXR1cm4gdGhpcy5fdmlzaWJsZURlbVRpbGVzfWdldCBkcmFwZUJ1ZmZlclNpemUoKXtjb25zdCBlPTIqdGhpcy5wcm94eVNvdXJjZUNhY2hlLmdldFNvdXJjZSgpLnRpbGVTaXplO3JldHVybiBbZSxlXX1zZXQgdXNlVmVydGV4TW9ycGhpbmcoZSl7dGhpcy5fdXNlVmVydGV4TW9ycGhpbmc9ZTt9dXBkYXRlVGlsZUJpbmRpbmcodCl7aWYoIXRoaXMuZW5hYmxlZClyZXR1cm47dGhpcy5wcmV2VGVycmFpblRpbGVGb3JUaWxlPXRoaXMudGVycmFpblRpbGVGb3JUaWxlO2NvbnN0IGk9dGhpcy5wcm94eVNvdXJjZUNhY2hlLG89dGhpcy5wYWludGVyLnRyYW5zZm9ybTt0aGlzLl9pbml0aWFsaXppbmcmJih0aGlzLl9pbml0aWFsaXppbmc9MD09PW8uX2NlbnRlckFsdGl0dWRlJiYtMT09PXRoaXMuZ2V0QXRQb2ludE9yWmVybyhlLk1lcmNhdG9yQ29vcmRpbmF0ZS5mcm9tTG5nTGF0KG8uY2VudGVyKSwtMSksdGhpcy5fZW1wdHlERU1UZXh0dXJlRGlydHk9IXRoaXMuX2luaXRpYWxpemluZyk7Y29uc3Qgcj10aGlzLnByb3h5Q29vcmRzPWkuZ2V0SWRzKCkubWFwKChlPT57Y29uc3QgdD1pLmdldFRpbGVCeUlEKGUpLnRpbGVJRDtyZXR1cm4gdC5wcm9qTWF0cml4PW8uY2FsY3VsYXRlUHJvak1hdHJpeCh0LnRvVW53cmFwcGVkKCkpLHR9KSk7IWZ1bmN0aW9uKHQsaSl7Y29uc3Qgbz1pLnRyYW5zZm9ybS5wb2ludENvb3JkaW5hdGUoaS50cmFuc2Zvcm0uZ2V0Q2FtZXJhUG9pbnQoKSkscj1uZXcgZS5Qb2ludChvLngsby55KTt0LnNvcnQoKCh0LGkpPT57aWYoaS5vdmVyc2NhbGVkWi10Lm92ZXJzY2FsZWRaKXJldHVybiBpLm92ZXJzY2FsZWRaLXQub3ZlcnNjYWxlZFo7Y29uc3Qgbz1uZXcgZS5Qb2ludCh0LmNhbm9uaWNhbC54KygxPDx0LmNhbm9uaWNhbC56KSp0LndyYXAsdC5jYW5vbmljYWwueSksbj1uZXcgZS5Qb2ludChpLmNhbm9uaWNhbC54KygxPDxpLmNhbm9uaWNhbC56KSppLndyYXAsaS5jYW5vbmljYWwueSkscz1yLm11bHQoMTw8dC5jYW5vbmljYWwueik7cmV0dXJuIHMueC09LjUscy55LT0uNSxzLmRpc3RTcXIobyktcy5kaXN0U3FyKG4pfSkpO30ocix0aGlzLnBhaW50ZXIpLHRoaXMuX3ByZXZpb3VzWm9vbT1vLnpvb207Y29uc3Qgbj10aGlzLnByb3h5VG9Tb3VyY2V8fHt9O3RoaXMucHJveHlUb1NvdXJjZT17fSxyLmZvckVhY2goKGU9Pnt0aGlzLnByb3h5VG9Tb3VyY2VbZS5rZXldPXt9O30pKSx0aGlzLnRlcnJhaW5UaWxlRm9yVGlsZT17fTtjb25zdCBzPXRoaXMuX3N0eWxlLl9zb3VyY2VDYWNoZXM7Zm9yKGNvbnN0IGUgaW4gcyl7Y29uc3QgaT1zW2VdO2lmKCFpLnVzZWQpY29udGludWU7aWYoaSE9PXRoaXMuc291cmNlQ2FjaGUmJnRoaXMucmVzZXRUaWxlTG9va3VwQ2FjaGUoaS5pZCksdGhpcy5fc2V0dXBQcm94aWVkQ29vcmRzRm9yT3J0aG8oaSx0W2VdLG4pLGkudXNlZEZvclRlcnJhaW4pY29udGludWU7Y29uc3Qgbz10W2VdO2kuZ2V0U291cmNlKCkucmVwYXJzZU92ZXJzY2FsZWQmJnRoaXMuX2Fzc2lnblRlcnJhaW5UaWxlcyhvKTt9dGhpcy5wcm94aWVkQ29vcmRzW2kuaWRdPXIubWFwKChlPT5uZXcgU2koZSxlLmtleSx0aGlzLm9ydGhvTWF0cml4KSkpLHRoaXMuX2Fzc2lnblRlcnJhaW5UaWxlcyhyKSx0aGlzLl9wcmVwYXJlREVNVGV4dHVyZXMoKSx0aGlzLl9zZXR1cERyYXBlZFJlbmRlckJhdGNoZXMoKSx0aGlzLl9pbml0RkJPUG9vbCgpLHRoaXMuX3NldHVwUmVuZGVyQ2FjaGUobiksdGhpcy5yZW5kZXJpbmdUb1RleHR1cmU9ITEsdGhpcy5fdXBkYXRlVGltZXN0YW1wPWUuZXhwb3J0ZWQubm93KCk7Y29uc3QgYT17fTt0aGlzLl92aXNpYmxlRGVtVGlsZXM9W107Zm9yKGNvbnN0IGUgb2YgdGhpcy5wcm94eUNvb3Jkcyl7Y29uc3QgdD10aGlzLnRlcnJhaW5UaWxlRm9yVGlsZVtlLmtleV07aWYoIXQpY29udGludWU7Y29uc3QgaT10LnRpbGVJRC5rZXk7aSBpbiBhfHwodGhpcy5fdmlzaWJsZURlbVRpbGVzLnB1c2godCksYVtpXT1pKTt9fV9hc3NpZ25UZXJyYWluVGlsZXMoZSl7dGhpcy5faW5pdGlhbGl6aW5nfHxlLmZvckVhY2goKGU9PntpZih0aGlzLnRlcnJhaW5UaWxlRm9yVGlsZVtlLmtleV0pcmV0dXJuO2NvbnN0IHQ9dGhpcy5fZmluZFRpbGVDb3ZlcmluZ1RpbGVJRChlLHRoaXMuc291cmNlQ2FjaGUpO3QmJih0aGlzLnRlcnJhaW5UaWxlRm9yVGlsZVtlLmtleV09dCk7fSkpO31fcHJlcGFyZURFTVRleHR1cmVzKCl7Y29uc3QgZT10aGlzLnBhaW50ZXIuY29udGV4dCx0PWUuZ2w7Zm9yKGNvbnN0IGkgaW4gdGhpcy50ZXJyYWluVGlsZUZvclRpbGUpe2NvbnN0IG89dGhpcy50ZXJyYWluVGlsZUZvclRpbGVbaV0scj1vLmRlbTshcnx8by5kZW1UZXh0dXJlJiYhby5uZWVkc0RFTVRleHR1cmVVcGxvYWR8fChlLmFjdGl2ZVRleHR1cmUuc2V0KHQuVEVYVFVSRTEpLG1pKHRoaXMucGFpbnRlcixvLHIpKTt9fV9wcmVwYXJlRGVtVGlsZVVuaWZvcm1zKGUsdCxpLG8pe2lmKCF0fHxudWxsPT10LmRlbVRleHR1cmUpcmV0dXJuICExO2NvbnN0IHI9ZS50aWxlSUQuY2Fub25pY2FsLG49TWF0aC5wb3coMix0LnRpbGVJRC5jYW5vbmljYWwuei1yLnopLHM9b3x8XCJcIjtyZXR1cm4gaVtgdV9kZW1fdGwke3N9YF09W3IueCpuJTEsci55Km4lMV0saVtgdV9kZW1fc2NhbGUke3N9YF09biwhMH1nZXQgZW1wdHlERU1UZXh0dXJlKCl7cmV0dXJuICF0aGlzLl9lbXB0eURFTVRleHR1cmVEaXJ0eSYmdGhpcy5fZW1wdHlERU1UZXh0dXJlP3RoaXMuX2VtcHR5REVNVGV4dHVyZTp0aGlzLl91cGRhdGVFbXB0eURFTVRleHR1cmUoKX1nZXQgZW1wdHlEZXB0aEJ1ZmZlclRleHR1cmUoKXtjb25zdCB0PXRoaXMucGFpbnRlci5jb250ZXh0LGk9dC5nbDtpZighdGhpcy5fZW1wdHlEZXB0aEJ1ZmZlclRleHR1cmUpe2NvbnN0IG89bmV3IGUuUkdCQUltYWdlKHt3aWR0aDoxLGhlaWdodDoxfSxVaW50OEFycmF5Lm9mKDI1NSwyNTUsMjU1LDI1NSkpO3RoaXMuX2VtcHR5RGVwdGhCdWZmZXJUZXh0dXJlPW5ldyBlLlRleHR1cmUodCxvLGkuUkdCQSx7cHJlbXVsdGlwbHk6ITF9KTt9cmV0dXJuIHRoaXMuX2VtcHR5RGVwdGhCdWZmZXJUZXh0dXJlfV9nZXRMb2FkZWRBcmVhTWluaW11bSgpe2xldCBlPTA7Y29uc3QgdD10aGlzLl92aXNpYmxlRGVtVGlsZXMucmVkdWNlKCgodCxpKT0+e2lmKCFpLmRlbSlyZXR1cm4gdDtjb25zdCBvPWkuZGVtLnRyZWUubWluaW11bXNbMF07cmV0dXJuIG8+MCYmZSsrLHQrb30pLDApO3JldHVybiBlP3QvZTowfV91cGRhdGVFbXB0eURFTVRleHR1cmUoKXtjb25zdCB0PXRoaXMucGFpbnRlci5jb250ZXh0LGk9dC5nbDt0LmFjdGl2ZVRleHR1cmUuc2V0KGkuVEVYVFVSRTIpO2NvbnN0IG89dGhpcy5fZ2V0TG9hZGVkQXJlYU1pbmltdW0oKSxyPW5ldyBlLlJHQkFJbWFnZSh7d2lkdGg6MSxoZWlnaHQ6MX0sbmV3IFVpbnQ4QXJyYXkoZS5ERU1EYXRhLnBhY2sobyx0aGlzLnNvdXJjZUNhY2hlLmdldFNvdXJjZSgpLmVuY29kaW5nKSkpO3RoaXMuX2VtcHR5REVNVGV4dHVyZURpcnR5PSExO2xldCBuPXRoaXMuX2VtcHR5REVNVGV4dHVyZTtyZXR1cm4gbj9uLnVwZGF0ZShyLHtwcmVtdWx0aXBseTohMX0pOm49dGhpcy5fZW1wdHlERU1UZXh0dXJlPW5ldyBlLlRleHR1cmUodCxyLGkuUkdCQSx7cHJlbXVsdGlwbHk6ITF9KSxufXNldHVwRWxldmF0aW9uRHJhdyh0LGksbyl7Y29uc3Qgcj10aGlzLnBhaW50ZXIuY29udGV4dCxuPXIuZ2wscz0oYT10aGlzLnNvdXJjZUNhY2hlLmdldFNvdXJjZSgpLmVuY29kaW5nLHt1X2RlbToyLHVfZGVtX3ByZXY6NCx1X2RlbV91bnBhY2s6ZS5ERU1EYXRhLmdldFVucGFja1ZlY3RvcihhKSx1X2RlbV90bDpbMCwwXSx1X2RlbV90bF9wcmV2OlswLDBdLHVfZGVtX3NjYWxlOjAsdV9kZW1fc2NhbGVfcHJldjowLHVfZGVtX3NpemU6MCx1X2RlbV9sZXJwOjEsdV9kZXB0aDozLHVfZGVwdGhfc2l6ZV9pbnY6WzAsMF0sdV9leGFnZ2VyYXRpb246MH0pO3ZhciBhO3MudV9kZW1fc2l6ZT10aGlzLnNvdXJjZUNhY2hlLmdldFNvdXJjZSgpLnRpbGVTaXplLHMudV9leGFnZ2VyYXRpb249dGhpcy5leGFnZ2VyYXRpb24oKTtsZXQgbD1udWxsLGM9bnVsbCxoPTE7aWYobyYmby5tb3JwaGluZyYmdGhpcy5fdXNlVmVydGV4TW9ycGhpbmcpe2NvbnN0IGU9by5tb3JwaGluZy5zcmNEZW1UaWxlLGk9by5tb3JwaGluZy5kc3REZW1UaWxlO2g9by5tb3JwaGluZy5waGFzZSxlJiZpJiYodGhpcy5fcHJlcGFyZURlbVRpbGVVbmlmb3Jtcyh0LGUscyxcIl9wcmV2XCIpJiYoYz1lKSx0aGlzLl9wcmVwYXJlRGVtVGlsZVVuaWZvcm1zKHQsaSxzKSYmKGw9aSkpO31pZihjJiZsPyhyLmFjdGl2ZVRleHR1cmUuc2V0KG4uVEVYVFVSRTIpLGwuZGVtVGV4dHVyZS5iaW5kKG4uTkVBUkVTVCxuLkNMQU1QX1RPX0VER0Usbi5ORUFSRVNUKSxyLmFjdGl2ZVRleHR1cmUuc2V0KG4uVEVYVFVSRTQpLGMuZGVtVGV4dHVyZS5iaW5kKG4uTkVBUkVTVCxuLkNMQU1QX1RPX0VER0Usbi5ORUFSRVNUKSxzLnVfZGVtX2xlcnA9aCk6KGw9dGhpcy50ZXJyYWluVGlsZUZvclRpbGVbdC50aWxlSUQua2V5XSxyLmFjdGl2ZVRleHR1cmUuc2V0KG4uVEVYVFVSRTIpLCh0aGlzLl9wcmVwYXJlRGVtVGlsZVVuaWZvcm1zKHQsbCxzKT9sLmRlbVRleHR1cmU6dGhpcy5lbXB0eURFTVRleHR1cmUpLmJpbmQobi5ORUFSRVNULG4uQ0xBTVBfVE9fRURHRSkpLHIuYWN0aXZlVGV4dHVyZS5zZXQobi5URVhUVVJFMyksbyYmby51c2VEZXB0aEZvck9jY2x1c2lvbj8odGhpcy5fZGVwdGhUZXh0dXJlJiZ0aGlzLl9kZXB0aFRleHR1cmUuYmluZChuLk5FQVJFU1Qsbi5DTEFNUF9UT19FREdFKSx0aGlzLl9kZXB0aEZCTyYmKHMudV9kZXB0aF9zaXplX2ludj1bMS90aGlzLl9kZXB0aEZCTy53aWR0aCwxL3RoaXMuX2RlcHRoRkJPLmhlaWdodF0pKToodGhpcy5lbXB0eURlcHRoQnVmZmVyVGV4dHVyZS5iaW5kKG4uTkVBUkVTVCxuLkNMQU1QX1RPX0VER0UpLHMudV9kZXB0aF9zaXplX2ludj1bMSwxXSksbyYmby51c2VNZXRlclRvRGVtJiZsKXtjb25zdCB0PSgxPDxsLnRpbGVJRC5jYW5vbmljYWwueikqZS5tZXJjYXRvclpmcm9tQWx0aXR1ZGUoMSx0aGlzLnBhaW50ZXIudHJhbnNmb3JtLmNlbnRlci5sYXQpKnRoaXMuc291cmNlQ2FjaGUuZ2V0U291cmNlKCkudGlsZVNpemU7cy51X21ldGVyX3RvX2RlbT10O31pZihvJiZvLmxhYmVsUGxhbmVNYXRyaXhJbnYmJihzLnVfbGFiZWxfcGxhbmVfbWF0cml4X2ludj1vLmxhYmVsUGxhbmVNYXRyaXhJbnYpLGkuc2V0VGVycmFpblVuaWZvcm1WYWx1ZXMocixzKSxcImdsb2JlXCI9PT10aGlzLnBhaW50ZXIudHJhbnNmb3JtLnByb2plY3Rpb24ubmFtZSl7Y29uc3QgZT10aGlzLmdsb2JlVW5pZm9ybVZhbHVlcyh0aGlzLnBhaW50ZXIudHJhbnNmb3JtLHQudGlsZUlELmNhbm9uaWNhbCxvJiZvLnVzZURlbm9ybWFsaXplZFVwVmVjdG9yU2NhbGUpO2kuc2V0R2xvYmVVbmlmb3JtVmFsdWVzKHIsZSk7fX1nbG9iZVVuaWZvcm1WYWx1ZXModCxpLG8pe2NvbnN0IHI9dC5wcm9qZWN0aW9uO3JldHVybiB7dV90aWxlX3RsX3VwOnIudXBWZWN0b3IoaSwwLDApLHVfdGlsZV90cl91cDpyLnVwVmVjdG9yKGksZS5FWFRFTlQsMCksdV90aWxlX2JyX3VwOnIudXBWZWN0b3IoaSxlLkVYVEVOVCxlLkVYVEVOVCksdV90aWxlX2JsX3VwOnIudXBWZWN0b3IoaSwwLGUuRVhURU5UKSx1X3RpbGVfdXBfc2NhbGU6bz9lLmdsb2JlTWV0ZXJzVG9FY2VmKDEpOnIudXBWZWN0b3JTY2FsZShpLHQuY2VudGVyLmxhdCx0LndvcmxkU2l6ZSkubWV0ZXJzVG9UaWxlfX1yZW5kZXJUb0JhY2tCdWZmZXIodCl7Y29uc3QgaT10aGlzLnBhaW50ZXIsbz10aGlzLnBhaW50ZXIuY29udGV4dDswIT09dC5sZW5ndGgmJihvLmJpbmRGcmFtZWJ1ZmZlci5zZXQobnVsbCksby52aWV3cG9ydC5zZXQoWzAsMCxpLndpZHRoLGkuaGVpZ2h0XSksaS5ncHVUaW1pbmdEZWZlcnJlZFJlbmRlclN0YXJ0KCksdGhpcy5yZW5kZXJpbmdUb1RleHR1cmU9ITEsZnVuY3Rpb24odCxpLG8scixuKXtpZihcImdsb2JlXCI9PT10LnRyYW5zZm9ybS5wcm9qZWN0aW9uLm5hbWUpIWZ1bmN0aW9uKHQsaSxvLHIsbil7Y29uc3Qgcz10LmNvbnRleHQsYT1zLmdsO2xldCBsLGM7Y29uc3QgaD10Lm9wdGlvbnMuc2hvd1RlcnJhaW5XaXJlZnJhbWU/MjowLHU9dC50cmFuc2Zvcm0sXz1lLmdsb2JlVXNlQ3VzdG9tQW50aUFsaWFzaW5nKHQscyx1KSxkPShlLGkpPT57aWYoYz09PWUpcmV0dXJuO2NvbnN0IG89W3dpW2VdLFwiUFJPSkVDVElPTl9HTE9CRV9WSUVXXCJdO18mJm8ucHVzaChcIkNVU1RPTV9BTlRJQUxJQVNJTkdcIiksaSYmby5wdXNoKHdpW2hdKSxsPXQudXNlUHJvZ3JhbShcImdsb2JlUmFzdGVyXCIsbnVsbCxvKSxjPWU7fSxwPXQuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpLG09bmV3IGUuRGVwdGhNb2RlKGEuTEVRVUFMLGUuRGVwdGhNb2RlLlJlYWRXcml0ZSx0LmRlcHRoUmFuZ2VGb3IzRCk7YmkudXBkYXRlKG4pO2NvbnN0IGY9ZS5jYWxjdWxhdGVHbG9iZU1lcmNhdG9yTWF0cml4KHUpLGc9W2UubWVyY2F0b3JYZnJvbUxuZyh1LmNlbnRlci5sbmcpLGUubWVyY2F0b3JZZnJvbUxhdCh1LmNlbnRlci5sYXQpXSx2PWg/WyExLCEwXTpbITFdLHg9dC5nbG9iZVNoYXJlZEJ1ZmZlcnMseT1bdS53aWR0aCplLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8sdS5oZWlnaHQqZS5leHBvcnRlZC5kZXZpY2VQaXhlbFJhdGlvXSxiPUZsb2F0MzJBcnJheS5mcm9tKHUuZ2xvYmVNYXRyaXgpLHc9e3VzZURlbm9ybWFsaXplZFVwVmVjdG9yU2NhbGU6ITB9O2lmKHYuZm9yRWFjaCgoaD0+e2NvbnN0IHU9dC50cmFuc2Zvcm0sXz1UaSh1Lnpvb20pKmkuZXhhZ2dlcmF0aW9uKCk7Yz0tMTtjb25zdCB2PWg/YS5MSU5FUzphLlRSSUFOR0xFUztmb3IoY29uc3QgYyBvZiByKXtjb25zdCByPW8uZ2V0VGlsZShjKSxUPWUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsRT1pLnByZXZUZXJyYWluVGlsZUZvclRpbGVbYy5rZXldLEM9aS50ZXJyYWluVGlsZUZvclRpbGVbYy5rZXldO3lpKEUsQykmJmJpLm5ld01vcnBoaW5nKGMua2V5LEUsQyxuLDI1MCkscy5hY3RpdmVUZXh0dXJlLnNldChhLlRFWFRVUkUwKSxyLnRleHR1cmUuYmluZChhLkxJTkVBUixhLkNMQU1QX1RPX0VER0UpO2NvbnN0IE09YmkuZ2V0TW9ycGhWYWx1ZXNGb3JQcm94eShjLmtleSksST1NPzE6MDtNJiZlLmV4dGVuZCQxKHcse21vcnBoaW5nOntzcmNEZW1UaWxlOk0uZnJvbSxkc3REZW1UaWxlOk0udG8scGhhc2U6ZS5lYXNlQ3ViaWNJbk91dChNLnBoYXNlKX19KTtjb25zdCBQPWUudGlsZUNvcm5lcnNUb0JvdW5kcyhjLmNhbm9uaWNhbCksUz1lLmdldExhdGl0dWRpbmFsTG9kKFAuZ2V0Q2VudGVyKCkubGF0KSxEPWUuZ2V0R3JpZE1hdHJpeChjLmNhbm9uaWNhbCxQLFMsdS53b3JsZFNpemUvdS5fcGl4ZWxzUGVyTWVyY2F0b3JQaXhlbCksTD1lLmdsb2JlTm9ybWFsaXplRUNFRihlLmdsb2JlVGlsZUJvdW5kcyhjLmNhbm9uaWNhbCkpLEE9eGkodS5wcm9qTWF0cml4LGIsZixMLGUuZ2xvYmVUb01lcmNhdG9yVHJhbnNpdGlvbih1Lnpvb20pLGcsdS5mcnVzdHVtQ29ybmVycy5UTCx1LmZydXN0dW1Db3JuZXJzLlRSLHUuZnJ1c3R1bUNvcm5lcnMuQlIsdS5mcnVzdHVtQ29ybmVycy5CTCx1Lmdsb2JlQ2VudGVySW5WaWV3U3BhY2UsdS5nbG9iZVJhZGl1cyx5LF8sRCk7aWYoZChJLGgpLGkuc2V0dXBFbGV2YXRpb25EcmF3KHIsbCx3KSx0LnByZXBhcmVEcmF3UHJvZ3JhbShzLGwsYy50b1Vud3JhcHBlZCgpKSx4KXtjb25zdFtpLG8scl09aD94LmdldFdpcmVmYW1lQnVmZmVycyh0LmNvbnRleHQsUyk6eC5nZXRHcmlkQnVmZmVycyhTLDAhPT1fKTtsLmRyYXcocyx2LG0sVCxwLGUuQ3VsbEZhY2VNb2RlLmJhY2tDQ1csQSxcImdsb2JlX3Jhc3RlclwiLGksbyxyKTt9fX0pKSx4KXtjb25zdCBuPVtcIkdMT0JFX1BPTEVTXCIsXCJQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcIl07XyYmbi5wdXNoKFwiQ1VTVE9NX0FOVElBTElBU0lOR1wiKSxsPXQudXNlUHJvZ3JhbShcImdsb2JlUmFzdGVyXCIsbnVsbCxuKTtmb3IoY29uc3QgbiBvZiByKXtjb25zdHt4OnIseTpjLHo6aH09bi5jYW5vbmljYWwsXz0wPT09YyxkPWM9PT0oMTw8aCktMSxbZix2LGIsVF09eC5nZXRQb2xlQnVmZmVycyhoKTtpZihUJiYoX3x8ZCkpe2NvbnN0IGM9by5nZXRUaWxlKG4pO3MuYWN0aXZlVGV4dHVyZS5zZXQoYS5URVhUVVJFMCksYy50ZXh0dXJlLmJpbmQoYS5MSU5FQVIsYS5DTEFNUF9UT19FREdFKTtsZXQgeD1lLmdsb2JlUG9sZU1hdHJpeEZvclRpbGUoaCxyLHUpO2NvbnN0IEU9ZS5nbG9iZU5vcm1hbGl6ZUVDRUYoZS5nbG9iZVRpbGVCb3VuZHMobi5jYW5vbmljYWwpKSxDPSh0LGkpPT50LmRyYXcocyxhLlRSSUFOR0xFUyxtLGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQscCxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCx4aSh1LnByb2pNYXRyaXgseCx4LEUsMCxnLHUuZnJ1c3R1bUNvcm5lcnMuVEwsdS5mcnVzdHVtQ29ybmVycy5UUix1LmZydXN0dW1Db3JuZXJzLkJSLHUuZnJ1c3R1bUNvcm5lcnMuQkwsdS5nbG9iZUNlbnRlckluVmlld1NwYWNlLHUuZ2xvYmVSYWRpdXMseSwwKSxcImdsb2JlX3BvbGVfcmFzdGVyXCIsaSxiLFQpO2kuc2V0dXBFbGV2YXRpb25EcmF3KGMsbCx3KSx0LnByZXBhcmVEcmF3UHJvZ3JhbShzLGwsbi50b1Vud3JhcHBlZCgpKSxfJiZDKGwsZiksZCYmKHg9ZS5zY2FsZShlLmNyZWF0ZSgpLHgsWzEsLTEsMV0pLEMobCx2KSk7fX19fSh0LGksbyxyLG4pO2Vsc2Uge2NvbnN0IHM9dC5jb250ZXh0LGE9cy5nbDtsZXQgbCxjO2NvbnN0IGg9dC5vcHRpb25zLnNob3dUZXJyYWluV2lyZWZyYW1lPzI6MCx1PShlLGkpPT57aWYoYz09PWUpcmV0dXJuO2NvbnN0IG89W3dpW2VdXTtpJiZvLnB1c2god2lbaF0pLGw9dC51c2VQcm9ncmFtKFwidGVycmFpblJhc3RlclwiLG51bGwsbyksYz1lO30sXz10LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSxkPW5ldyBlLkRlcHRoTW9kZShhLkxFUVVBTCxlLkRlcHRoTW9kZS5SZWFkV3JpdGUsdC5kZXB0aFJhbmdlRm9yM0QpO2JpLnVwZGF0ZShuKTtjb25zdCBwPXQudHJhbnNmb3JtLG09VGkocC56b29tKSppLmV4YWdnZXJhdGlvbigpOyhoP1shMSwhMF06WyExXSkuZm9yRWFjaCgoaD0+e2M9LTE7Y29uc3QgZj1oP2EuTElORVM6YS5UUklBTkdMRVMsW2csdl09aD9pLmdldFdpcmVmYW1lQnVmZmVyKCk6W2kuZ3JpZEluZGV4QnVmZmVyLGkuZ3JpZFNlZ21lbnRzXTtmb3IoY29uc3QgYyBvZiByKXtjb25zdCByPW8uZ2V0VGlsZShjKSx4PWUuU3RlbmNpbE1vZGUuZGlzYWJsZWQseT1pLnByZXZUZXJyYWluVGlsZUZvclRpbGVbYy5rZXldLGI9aS50ZXJyYWluVGlsZUZvclRpbGVbYy5rZXldO3lpKHksYikmJmJpLm5ld01vcnBoaW5nKGMua2V5LHksYixuLDI1MCkscy5hY3RpdmVUZXh0dXJlLnNldChhLlRFWFRVUkUwKSxyLnRleHR1cmUuYmluZChhLkxJTkVBUixhLkNMQU1QX1RPX0VER0UsYS5MSU5FQVJfTUlQTUFQX05FQVJFU1QpO2NvbnN0IHc9YmkuZ2V0TW9ycGhWYWx1ZXNGb3JQcm94eShjLmtleSksVD13PzE6MDtsZXQgRTt3JiYoRT17bW9ycGhpbmc6e3NyY0RlbVRpbGU6dy5mcm9tLGRzdERlbVRpbGU6dy50byxwaGFzZTplLmVhc2VDdWJpY0luT3V0KHcucGhhc2UpfX0pO2NvbnN0IEM9dmkoYy5wcm9qTWF0cml4LEVpKGMuY2Fub25pY2FsLHAucmVuZGVyV29ybGRDb3BpZXMpP20vMTA6bSk7dShULGgpLGkuc2V0dXBFbGV2YXRpb25EcmF3KHIsbCxFKSx0LnByZXBhcmVEcmF3UHJvZ3JhbShzLGwsYy50b1Vud3JhcHBlZCgpKSxsLmRyYXcocyxmLGQseCxfLGUuQ3VsbEZhY2VNb2RlLmJhY2tDQ1csQyxcInRlcnJhaW5fcmFzdGVyXCIsaS5ncmlkQnVmZmVyLGcsdik7fX0pKTt9fShpLHRoaXMsdGhpcy5wcm94eVNvdXJjZUNhY2hlLHQsdGhpcy5fdXBkYXRlVGltZXN0YW1wKSx0aGlzLnJlbmRlcmluZ1RvVGV4dHVyZT0hMCxpLmdwdVRpbWluZ0RlZmVycmVkUmVuZGVyRW5kKCksdC5zcGxpY2UoMCx0Lmxlbmd0aCkpO31yZW5kZXJCYXRjaCh0KXtpZigwPT09dGhpcy5fZHJhcGVkUmVuZGVyQmF0Y2hlcy5sZW5ndGgpcmV0dXJuIHQrMTt0aGlzLnJlbmRlcmluZ1RvVGV4dHVyZT0hMDtjb25zdCBpPXRoaXMucGFpbnRlcixvPXRoaXMucGFpbnRlci5jb250ZXh0LHI9dGhpcy5wcm94eVNvdXJjZUNhY2hlLG49dGhpcy5wcm94aWVkQ29vcmRzW3IuaWRdLHM9dGhpcy5fZHJhcGVkUmVuZGVyQmF0Y2hlcy5zaGlmdCgpLGE9W10sbD1pLnN0eWxlLm9yZGVyO2xldCBjPTA7Zm9yKGNvbnN0IGggb2Ygbil7Y29uc3Qgbj1yLmdldFRpbGVCeUlEKGgucHJveHlUaWxlS2V5KSx1PXIucHJveHlDYWNoZWRGQk9baC5rZXldP3IucHJveHlDYWNoZWRGQk9baC5rZXldW3RdOnZvaWQgMCxfPXZvaWQgMCE9PXU/ci5yZW5kZXJDYWNoZVt1XTp0aGlzLnBvb2xbYysrXSxkPXZvaWQgMCE9PXU7aWYobi50ZXh0dXJlPV8udGV4LGQmJiFfLmRpcnR5KXthLnB1c2gobi50aWxlSUQpO2NvbnRpbnVlfWxldCBwO28uYmluZEZyYW1lYnVmZmVyLnNldChfLmZiLmZyYW1lYnVmZmVyKSx0aGlzLnJlbmRlcmVkVG9UaWxlPSExLF8uZGlydHkmJihvLmNsZWFyKHtjb2xvcjplLkNvbG9yLnRyYW5zcGFyZW50LHN0ZW5jaWw6MH0pLF8uZGlydHk9ITEpO2ZvcihsZXQgZT1zLnN0YXJ0O2U8PXMuZW5kOysrZSl7Y29uc3QgdD1pLnN0eWxlLl9sYXllcnNbbFtlXV07aWYodC5pc0hpZGRlbihpLnRyYW5zZm9ybS56b29tKSljb250aW51ZTtjb25zdCByPWkuc3R5bGUuX2dldExheWVyU291cmNlQ2FjaGUodCksbj1yP3RoaXMucHJveHlUb1NvdXJjZVtoLmtleV1bci5pZF06W2hdO2lmKCFuKWNvbnRpbnVlO2NvbnN0IHM9bjtvLnZpZXdwb3J0LnNldChbMCwwLF8uZmIud2lkdGgsXy5mYi5oZWlnaHRdKSxwIT09KHI/ci5pZDpudWxsKSYmKHRoaXMuX3NldHVwU3RlbmNpbChfLG4sdCxyKSxwPXI/ci5pZDpudWxsKSxpLnJlbmRlckxheWVyKGkscix0LHMpO310aGlzLnJlbmRlcmVkVG9UaWxlPyhfLmRpcnR5PSEwLGEucHVzaChuLnRpbGVJRCkpOmR8fC0tYyw1PT09YyYmKGM9MCx0aGlzLnJlbmRlclRvQmFja0J1ZmZlcihhKSk7fXJldHVybiB0aGlzLnJlbmRlclRvQmFja0J1ZmZlcihhKSx0aGlzLnJlbmRlcmluZ1RvVGV4dHVyZT0hMSxvLmJpbmRGcmFtZWJ1ZmZlci5zZXQobnVsbCksby52aWV3cG9ydC5zZXQoWzAsMCxpLndpZHRoLGkuaGVpZ2h0XSkscy5lbmQrMX1wb3N0UmVuZGVyKCl7fXJlbmRlckNhY2hlRWZmaWNpZW5jeShlKXtjb25zdCB0PWUub3JkZXIubGVuZ3RoO2lmKDA9PT10KXJldHVybiB7ZWZmaWNpZW5jeToxMDB9O2xldCBpLG89MCxyPTAsbj0hMTtmb3IobGV0IHM9MDtzPHQ7KytzKXtjb25zdCB0PWUuX2xheWVyc1tlLm9yZGVyW3NdXTt0aGlzLl9zdHlsZS5pc0xheWVyRHJhcGVkKHQpPyhuJiYrK28sKytyKTpufHwobj0hMCxpPXQuaWQpO31yZXR1cm4gMD09PXI/e2VmZmljaWVuY3k6MTAwfTp7ZWZmaWNpZW5jeToxMDAqKDEtby9yKSxmaXJzdFVuZHJhcGVkTGF5ZXI6aX19Z2V0TWluRWxldmF0aW9uQmVsb3dNU0woKXtsZXQgZT0wO3JldHVybiB0aGlzLl92aXNpYmxlRGVtVGlsZXMuZmlsdGVyKChlPT5lLmRlbSkpLmZvckVhY2goKHQ9PntlPU1hdGgubWluKGUsdC5kZW0udHJlZS5taW5pbXVtc1swXSk7fSkpLDA9PT1lP2U6KGUtMzApKnRoaXMuX2V4YWdnZXJhdGlvbn1yYXljYXN0KGUsdCxpKXtpZighdGhpcy5fdmlzaWJsZURlbVRpbGVzKXJldHVybiBudWxsO2NvbnN0IG89dGhpcy5fdmlzaWJsZURlbVRpbGVzLmZpbHRlcigoZT0+ZS5kZW0pKS5tYXAoKG89Pntjb25zdCByPW8udGlsZUlELG49MTw8ci5vdmVyc2NhbGVkWix7eDpzLHk6YX09ci5jYW5vbmljYWwsbD1zL24sYz0ocysxKS9uLGg9YS9uLHU9KGErMSkvbjtyZXR1cm4ge21pbng6bCxtaW55OmgsbWF4eDpjLG1heHk6dSx0Om8uZGVtLnRyZWUucmF5Y2FzdFJvb3QobCxoLGMsdSxlLHQsaSksdGlsZTpvfX0pKTtvLnNvcnQoKChlLHQpPT4obnVsbCE9PWUudD9lLnQ6TnVtYmVyLk1BWF9WQUxVRSktKG51bGwhPT10LnQ/dC50Ok51bWJlci5NQVhfVkFMVUUpKSk7Zm9yKGNvbnN0IHIgb2Ygbyl7aWYobnVsbD09ci50KXJldHVybiBudWxsO2NvbnN0IG89ci50aWxlLmRlbS50cmVlLnJheWNhc3Qoci5taW54LHIubWlueSxyLm1heHgsci5tYXh5LGUsdCxpKTtpZihudWxsIT1vKXJldHVybiBvfXJldHVybiBudWxsfV9jcmVhdGVGQk8oKXtjb25zdCB0PXRoaXMucGFpbnRlci5jb250ZXh0LGk9dC5nbCxvPXRoaXMuZHJhcGVCdWZmZXJTaXplO3QuYWN0aXZlVGV4dHVyZS5zZXQoaS5URVhUVVJFMCk7Y29uc3Qgcj1uZXcgZS5UZXh0dXJlKHQse3dpZHRoOm9bMF0saGVpZ2h0Om9bMV0sZGF0YTpudWxsfSxpLlJHQkEpO3IuYmluZChpLkxJTkVBUixpLkNMQU1QX1RPX0VER0UpO2NvbnN0IG49dC5jcmVhdGVGcmFtZWJ1ZmZlcihvWzBdLG9bMV0sITEpO3JldHVybiBuLmNvbG9yQXR0YWNobWVudC5zZXQoci50ZXh0dXJlKSxuLmRlcHRoQXR0YWNobWVudD1uZXcgd2UodCxuLmZyYW1lYnVmZmVyKSx2b2lkIDA9PT10aGlzLl9zaGFyZWREZXB0aFN0ZW5jaWw/KHRoaXMuX3NoYXJlZERlcHRoU3RlbmNpbD10LmNyZWF0ZVJlbmRlcmJ1ZmZlcih0LmdsLkRFUFRIX1NURU5DSUwsb1swXSxvWzFdKSx0aGlzLl9zdGVuY2lsUmVmPTAsbi5kZXB0aEF0dGFjaG1lbnQuc2V0KHRoaXMuX3NoYXJlZERlcHRoU3RlbmNpbCksdC5jbGVhcih7c3RlbmNpbDowfSkpOm4uZGVwdGhBdHRhY2htZW50LnNldCh0aGlzLl9zaGFyZWREZXB0aFN0ZW5jaWwpLHQuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljJiYhdC5leHRUZXh0dXJlRmlsdGVyQW5pc290cm9waWNGb3JjZU9mZiYmaS50ZXhQYXJhbWV0ZXJmKGkuVEVYVFVSRV8yRCx0LmV4dFRleHR1cmVGaWx0ZXJBbmlzb3Ryb3BpYy5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCx0LmV4dFRleHR1cmVGaWx0ZXJBbmlzb3Ryb3BpY01heCkse2ZiOm4sdGV4OnIsZGlydHk6ITF9fV9pbml0RkJPUG9vbCgpe2Zvcig7dGhpcy5wb29sLmxlbmd0aDxNYXRoLm1pbig1LHRoaXMucHJveHlDb29yZHMubGVuZ3RoKTspdGhpcy5wb29sLnB1c2godGhpcy5fY3JlYXRlRkJPKCkpO31fc2hvdWxkRGlzYWJsZVJlbmRlckNhY2hlKCl7aWYodGhpcy5fc3R5bGUubGlnaHQmJnRoaXMuX3N0eWxlLmxpZ2h0Lmhhc1RyYW5zaXRpb24oKSlyZXR1cm4gITA7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fc3R5bGUuX3NvdXJjZUNhY2hlcylpZih0aGlzLl9zdHlsZS5fc291cmNlQ2FjaGVzW2VdLmhhc1RyYW5zaXRpb24oKSlyZXR1cm4gITA7cmV0dXJuIHRoaXMuX3N0eWxlLm9yZGVyLnNvbWUoKGU9Pntjb25zdCB0PXRoaXMuX3N0eWxlLl9sYXllcnNbZV0saT10LmlzSGlkZGVuKHRoaXMucGFpbnRlci50cmFuc2Zvcm0uem9vbSk7cmV0dXJuIFwiY3VzdG9tXCI9PT10LnR5cGU/IWkmJnQuc2hvdWxkUmVkcmFwZSgpOiFpJiZ0Lmhhc1RyYW5zaXRpb24oKX0pKX1fY2xlYXJMaW5lTGF5ZXJzRnJvbVJlbmRlckNhY2hlKCl7bGV0IHQ9ITE7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fc3R5bGUuX2dldFNvdXJjZXMoKSlpZihlIGluc3RhbmNlb2YgQ2Upe3Q9ITA7YnJlYWt9aWYoIXQpcmV0dXJuO2NvbnN0IGk9e307Zm9yKGxldCB0PTA7dDx0aGlzLl9zdHlsZS5vcmRlci5sZW5ndGg7Kyt0KXtjb25zdCBvPXRoaXMuX3N0eWxlLl9sYXllcnNbdGhpcy5fc3R5bGUub3JkZXJbdF1dLHI9dGhpcy5fc3R5bGUuX2dldExheWVyU291cmNlQ2FjaGUobyk7aWYociYmIWlbci5pZF0mJiFvLmlzSGlkZGVuKHRoaXMucGFpbnRlci50cmFuc2Zvcm0uem9vbSkmJlwibGluZVwiPT09by50eXBlJiZvLndpZHRoRXhwcmVzc2lvbigpaW5zdGFuY2VvZiBlLlpvb21EZXBlbmRlbnRFeHByZXNzaW9uKXtpW3IuaWRdPSEwO2Zvcihjb25zdCBlIG9mIHRoaXMucHJveHlDb29yZHMpe2NvbnN0IHQ9dGhpcy5wcm94eVRvU291cmNlW2Uua2V5XVtyLmlkXTtpZih0KWZvcihjb25zdCBlIG9mIHQpdGhpcy5fY2xlYXJSZW5kZXJDYWNoZUZvclRpbGUoci5pZCxlKTt9fX19X2NsZWFyUmFzdGVyTGF5ZXJzRnJvbVJlbmRlckNhY2hlKCl7bGV0IGU9ITE7Zm9yKGNvbnN0IHQgaW4gdGhpcy5fc3R5bGUuX3NvdXJjZUNhY2hlcylpZih0aGlzLl9zdHlsZS5fc291cmNlQ2FjaGVzW3RdLl9zb3VyY2UgaW5zdGFuY2VvZiBNZSl7ZT0hMDticmVha31pZighZSlyZXR1cm47Y29uc3QgdD17fTtmb3IobGV0IGU9MDtlPHRoaXMuX3N0eWxlLm9yZGVyLmxlbmd0aDsrK2Upe2NvbnN0IGk9dGhpcy5fc3R5bGUuX2xheWVyc1t0aGlzLl9zdHlsZS5vcmRlcltlXV0sbz10aGlzLl9zdHlsZS5fZ2V0TGF5ZXJTb3VyY2VDYWNoZShpKTtpZighb3x8dFtvLmlkXSljb250aW51ZTtpZihpLmlzSGlkZGVuKHRoaXMucGFpbnRlci50cmFuc2Zvcm0uem9vbSl8fFwicmFzdGVyXCIhPT1pLnR5cGUpY29udGludWU7Y29uc3Qgcj1pLnBhaW50LmdldChcInJhc3Rlci1mYWRlLWR1cmF0aW9uXCIpO2Zvcihjb25zdCBlIG9mIHRoaXMucHJveHlDb29yZHMpe2NvbnN0IHQ9dGhpcy5wcm94eVRvU291cmNlW2Uua2V5XVtvLmlkXTtpZih0KWZvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9TWkoby5nZXRUaWxlKGUpLG8uZmluZExvYWRlZFBhcmVudChlLDApLG8sdGhpcy5wYWludGVyLnRyYW5zZm9ybSxyKTsoMSE9PXQub3BhY2l0eXx8MCE9PXQubWl4KSYmdGhpcy5fY2xlYXJSZW5kZXJDYWNoZUZvclRpbGUoby5pZCxlKTt9fX19X3NldHVwRHJhcGVkUmVuZGVyQmF0Y2hlcygpe2NvbnN0IGU9dGhpcy5fc3R5bGUub3JkZXIsdD1lLmxlbmd0aDtpZigwPT09dClyZXR1cm47Y29uc3QgaT1bXTtsZXQgbyxyPTAsbj10aGlzLl9zdHlsZS5fbGF5ZXJzW2Vbcl1dO2Zvcig7IXRoaXMuX3N0eWxlLmlzTGF5ZXJEcmFwZWQobikmJm4uaXNIaWRkZW4odGhpcy5wYWludGVyLnRyYW5zZm9ybS56b29tKSYmKytyPHQ7KW49dGhpcy5fc3R5bGUuX2xheWVyc1tlW3JdXTtmb3IoO3I8dDsrK3Ipe2NvbnN0IHQ9dGhpcy5fc3R5bGUuX2xheWVyc1tlW3JdXTt0LmlzSGlkZGVuKHRoaXMucGFpbnRlci50cmFuc2Zvcm0uem9vbSl8fCh0aGlzLl9zdHlsZS5pc0xheWVyRHJhcGVkKHQpP3ZvaWQgMD09PW8mJihvPXIpOnZvaWQgMCE9PW8mJihpLnB1c2goe3N0YXJ0Om8sZW5kOnItMX0pLG89dm9pZCAwKSk7fXZvaWQgMCE9PW8mJmkucHVzaCh7c3RhcnQ6byxlbmQ6ci0xfSksdGhpcy5fZHJhcGVkUmVuZGVyQmF0Y2hlcz1pO31fc2V0dXBSZW5kZXJDYWNoZShlKXtjb25zdCB0PXRoaXMucHJveHlTb3VyY2VDYWNoZTtpZih0aGlzLl9zaG91bGREaXNhYmxlUmVuZGVyQ2FjaGUoKXx8dGhpcy5faW52YWxpZGF0ZVJlbmRlckNhY2hlKXtpZih0aGlzLl9pbnZhbGlkYXRlUmVuZGVyQ2FjaGU9ITEsdC5yZW5kZXJDYWNoZS5sZW5ndGg+dC5yZW5kZXJDYWNoZVBvb2wubGVuZ3RoKXtjb25zdCBlPU9iamVjdC52YWx1ZXModC5wcm94eUNhY2hlZEZCTyk7dC5wcm94eUNhY2hlZEZCTz17fTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoOysraSl7Y29uc3Qgbz1PYmplY3QudmFsdWVzKGVbaV0pO3QucmVuZGVyQ2FjaGVQb29sLnB1c2goLi4ubyk7fX1yZXR1cm59dGhpcy5fY2xlYXJSYXN0ZXJMYXllcnNGcm9tUmVuZGVyQ2FjaGUoKTtjb25zdCBpPXRoaXMucHJveHlDb29yZHMsbz10aGlzLl90aWxlc0RpcnR5O2ZvcihsZXQgcj1pLmxlbmd0aC0xO3I+PTA7ci0tKXtjb25zdCBuPWlbcl07aWYodC5nZXRUaWxlQnlJRChuLmtleSksdm9pZCAwIT09dC5wcm94eUNhY2hlZEZCT1tuLmtleV0pe2NvbnN0IGk9ZVtuLmtleV0scj10aGlzLnByb3h5VG9Tb3VyY2Vbbi5rZXldO2xldCBzPTA7Zm9yKGNvbnN0IGUgaW4gcil7Y29uc3QgdD1yW2VdLG49aVtlXTtpZighbnx8bi5sZW5ndGghPT10Lmxlbmd0aHx8dC5zb21lKCgodCxpKT0+dCE9PW5baV18fG9bZV0mJm9bZV0uaGFzT3duUHJvcGVydHkodC5rZXkpKSkpe3M9LTE7YnJlYWt9KytzO31mb3IoY29uc3QgZSBpbiB0LnByb3h5Q2FjaGVkRkJPW24ua2V5XSl0LnJlbmRlckNhY2hlW3QucHJveHlDYWNoZWRGQk9bbi5rZXldW2VdXS5kaXJ0eT1zPDB8fHMhPT1PYmplY3QudmFsdWVzKGkpLmxlbmd0aDt9fWNvbnN0IHI9Wy4uLnRoaXMuX2RyYXBlZFJlbmRlckJhdGNoZXNdO3Iuc29ydCgoKGUsdCk9PnQuZW5kLXQuc3RhcnQtKGUuZW5kLWUuc3RhcnQpKSk7Zm9yKGNvbnN0IGUgb2Ygcilmb3IoY29uc3QgbyBvZiBpKXtpZih0LnByb3h5Q2FjaGVkRkJPW28ua2V5XSljb250aW51ZTtsZXQgaT10LnJlbmRlckNhY2hlUG9vbC5wb3AoKTt2b2lkIDA9PT1pJiZ0LnJlbmRlckNhY2hlLmxlbmd0aDw1MCYmKGk9dC5yZW5kZXJDYWNoZS5sZW5ndGgsdC5yZW5kZXJDYWNoZS5wdXNoKHRoaXMuX2NyZWF0ZUZCTygpKSksdm9pZCAwIT09aSYmKHQucHJveHlDYWNoZWRGQk9bby5rZXldPXt9LHQucHJveHlDYWNoZWRGQk9bby5rZXldW2Uuc3RhcnRdPWksdC5yZW5kZXJDYWNoZVtpXS5kaXJ0eT0hMCk7fXRoaXMuX3RpbGVzRGlydHk9e307fV9zZXR1cFN0ZW5jaWwoZSx0LGksbyl7aWYoIW98fCF0aGlzLl9zb3VyY2VUaWxlc092ZXJsYXBbby5pZF0pcmV0dXJuIHZvaWQodGhpcy5fb3ZlcmxhcFN0ZW5jaWxUeXBlJiYodGhpcy5fb3ZlcmxhcFN0ZW5jaWxUeXBlPSExKSk7Y29uc3Qgcj10aGlzLnBhaW50ZXIuY29udGV4dCxuPXIuZ2w7aWYodC5sZW5ndGg8PTEpcmV0dXJuIHZvaWQodGhpcy5fb3ZlcmxhcFN0ZW5jaWxUeXBlPSExKTtsZXQgcztpZihpLmlzVGlsZUNsaXBwZWQoKSlzPXQubGVuZ3RoLHRoaXMuX292ZXJsYXBTdGVuY2lsTW9kZS50ZXN0PXtmdW5jOm4uRVFVQUwsbWFzazoyNTV9LHRoaXMuX292ZXJsYXBTdGVuY2lsVHlwZT1cIkNsaXBcIjtlbHNlIHtpZighKHRbMF0ub3ZlcnNjYWxlZFo+dFt0Lmxlbmd0aC0xXS5vdmVyc2NhbGVkWikpcmV0dXJuIHZvaWQodGhpcy5fb3ZlcmxhcFN0ZW5jaWxUeXBlPSExKTtzPTEsdGhpcy5fb3ZlcmxhcFN0ZW5jaWxNb2RlLnRlc3Q9e2Z1bmM6bi5HUkVBVEVSLG1hc2s6MjU1fSx0aGlzLl9vdmVybGFwU3RlbmNpbFR5cGU9XCJNYXNrXCI7fXRoaXMuX3N0ZW5jaWxSZWYrcz4yNTUmJihyLmNsZWFyKHtzdGVuY2lsOjB9KSx0aGlzLl9zdGVuY2lsUmVmPTApLHRoaXMuX3N0ZW5jaWxSZWYrPXMsdGhpcy5fb3ZlcmxhcFN0ZW5jaWxNb2RlLnJlZj10aGlzLl9zdGVuY2lsUmVmLGkuaXNUaWxlQ2xpcHBlZCgpJiZ0aGlzLl9yZW5kZXJUaWxlQ2xpcHBpbmdNYXNrcyh0LHRoaXMuX292ZXJsYXBTdGVuY2lsTW9kZS5yZWYpO31jbGlwT3JNYXNrT3ZlcmxhcFN0ZW5jaWxUeXBlKCl7cmV0dXJuIFwiQ2xpcFwiPT09dGhpcy5fb3ZlcmxhcFN0ZW5jaWxUeXBlfHxcIk1hc2tcIj09PXRoaXMuX292ZXJsYXBTdGVuY2lsVHlwZX1zdGVuY2lsTW9kZUZvclJUVE92ZXJsYXAodCl7cmV0dXJuIHRoaXMucmVuZGVyaW5nVG9UZXh0dXJlJiZ0aGlzLl9vdmVybGFwU3RlbmNpbFR5cGU/KFwiQ2xpcFwiPT09dGhpcy5fb3ZlcmxhcFN0ZW5jaWxUeXBlJiYodGhpcy5fb3ZlcmxhcFN0ZW5jaWxNb2RlLnJlZj10aGlzLnBhaW50ZXIuX3RpbGVDbGlwcGluZ01hc2tJRHNbdC5rZXldKSx0aGlzLl9vdmVybGFwU3RlbmNpbE1vZGUpOmUuU3RlbmNpbE1vZGUuZGlzYWJsZWR9X3JlbmRlclRpbGVDbGlwcGluZ01hc2tzKHQsaSl7Y29uc3Qgbz10aGlzLnBhaW50ZXIscj10aGlzLnBhaW50ZXIuY29udGV4dCxuPXIuZ2w7by5fdGlsZUNsaXBwaW5nTWFza0lEcz17fSxyLnNldENvbG9yTW9kZShlLkNvbG9yTW9kZS5kaXNhYmxlZCksci5zZXREZXB0aE1vZGUoZS5EZXB0aE1vZGUuZGlzYWJsZWQpO2NvbnN0IHM9by51c2VQcm9ncmFtKFwiY2xpcHBpbmdNYXNrXCIpO2Zvcihjb25zdCBhIG9mIHQpe2NvbnN0IHQ9by5fdGlsZUNsaXBwaW5nTWFza0lEc1thLmtleV09LS1pO3MuZHJhdyhyLG4uVFJJQU5HTEVTLGUuRGVwdGhNb2RlLmRpc2FibGVkLG5ldyBlLlN0ZW5jaWxNb2RlKHtmdW5jOm4uQUxXQVlTLG1hc2s6MH0sdCwyNTUsbi5LRUVQLG4uS0VFUCxuLlJFUExBQ0UpLGUuQ29sb3JNb2RlLmRpc2FibGVkLGUuQ3VsbEZhY2VNb2RlLmRpc2FibGVkLENpKGEucHJvak1hdHJpeCksXCIkY2xpcHBpbmdcIixvLnRpbGVFeHRlbnRCdWZmZXIsby5xdWFkVHJpYW5nbGVJbmRleEJ1ZmZlcixvLnRpbGVFeHRlbnRTZWdtZW50cyk7fX1wb2ludENvb3JkaW5hdGUodCl7Y29uc3QgaT10aGlzLnBhaW50ZXIudHJhbnNmb3JtO2lmKHQueDwwfHx0Lng+aS53aWR0aHx8dC55PDB8fHQueT5pLmhlaWdodClyZXR1cm4gbnVsbDtjb25zdCBvPVt0LngsdC55LDEsMV07ZS50cmFuc2Zvcm1NYXQ0JDEobyxvLGkucGl4ZWxNYXRyaXhJbnZlcnNlKSxlLnNjYWxlJDEobyxvLDEvb1szXSksb1swXS89aS53b3JsZFNpemUsb1sxXS89aS53b3JsZFNpemU7Y29uc3Qgcj1pLl9jYW1lcmEucG9zaXRpb24sbj1lLm1lcmNhdG9yWmZyb21BbHRpdHVkZSgxLGkuY2VudGVyLmxhdCkscz1bclswXSxyWzFdLHJbMl0vbiwwXSxhPWUuc3VidHJhY3QoW10sby5zbGljZSgwLDMpLHMpO2Uubm9ybWFsaXplKGEsYSk7Y29uc3QgbD10aGlzLnJheWNhc3QocyxhLHRoaXMuX2V4YWdnZXJhdGlvbik7cmV0dXJuIG51bGwhPT1sJiZsPyhlLnNjYWxlQW5kQWRkKHMscyxhLGwpLHNbM109c1syXSxzWzJdKj1uLHMpOm51bGx9ZHJhd0RlcHRoKCl7Y29uc3QgdD10aGlzLnBhaW50ZXIsaT10LmNvbnRleHQsbz10aGlzLnByb3h5U291cmNlQ2FjaGUscj1NYXRoLmNlaWwodC53aWR0aCksbj1NYXRoLmNlaWwodC5oZWlnaHQpO2lmKCF0aGlzLl9kZXB0aEZCT3x8dGhpcy5fZGVwdGhGQk8ud2lkdGg9PT1yJiZ0aGlzLl9kZXB0aEZCTy5oZWlnaHQ9PT1ufHwodGhpcy5fZGVwdGhGQk8uZGVzdHJveSgpLHRoaXMuX2RlcHRoRkJPPXZvaWQgMCx0aGlzLl9kZXB0aFRleHR1cmU9dm9pZCAwKSwhdGhpcy5fZGVwdGhGQk8pe2NvbnN0IHQ9aS5nbCxvPWkuY3JlYXRlRnJhbWVidWZmZXIocixuLCEwKTtpLmFjdGl2ZVRleHR1cmUuc2V0KHQuVEVYVFVSRTApO2NvbnN0IHM9bmV3IGUuVGV4dHVyZShpLHt3aWR0aDpyLGhlaWdodDpuLGRhdGE6bnVsbH0sdC5SR0JBKTtzLmJpbmQodC5ORUFSRVNULHQuQ0xBTVBfVE9fRURHRSksby5jb2xvckF0dGFjaG1lbnQuc2V0KHMudGV4dHVyZSk7Y29uc3QgYT1pLmNyZWF0ZVJlbmRlcmJ1ZmZlcihpLmdsLkRFUFRIX0NPTVBPTkVOVDE2LHIsbik7by5kZXB0aEF0dGFjaG1lbnQuc2V0KGEpLHRoaXMuX2RlcHRoRkJPPW8sdGhpcy5fZGVwdGhUZXh0dXJlPXM7fWkuYmluZEZyYW1lYnVmZmVyLnNldCh0aGlzLl9kZXB0aEZCTy5mcmFtZWJ1ZmZlciksaS52aWV3cG9ydC5zZXQoWzAsMCxyLG5dKSxmdW5jdGlvbih0LGksbyxyKXtpZihcImdsb2JlXCI9PT10LnRyYW5zZm9ybS5wcm9qZWN0aW9uLm5hbWUpcmV0dXJuO2NvbnN0IG49dC5jb250ZXh0LHM9bi5nbDtuLmNsZWFyKHtkZXB0aDoxfSk7Y29uc3QgYT10LnVzZVByb2dyYW0oXCJ0ZXJyYWluRGVwdGhcIiksbD1uZXcgZS5EZXB0aE1vZGUocy5MRVNTLGUuRGVwdGhNb2RlLlJlYWRXcml0ZSx0LmRlcHRoUmFuZ2VGb3IzRCk7Zm9yKGNvbnN0IHQgb2Ygcil7Y29uc3Qgcj1vLmdldFRpbGUodCksYz12aSh0LnByb2pNYXRyaXgsMCk7aS5zZXR1cEVsZXZhdGlvbkRyYXcocixhKSxhLmRyYXcobixzLlRSSUFOR0xFUyxsLGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsZS5Db2xvck1vZGUudW5ibGVuZGVkLGUuQ3VsbEZhY2VNb2RlLmJhY2tDQ1csYyxcInRlcnJhaW5fZGVwdGhcIixpLmdyaWRCdWZmZXIsaS5ncmlkSW5kZXhCdWZmZXIsaS5ncmlkTm9Ta2lydFNlZ21lbnRzKTt9fSh0LHRoaXMsbyx0aGlzLnByb3h5Q29vcmRzKTt9X3NldHVwUHJveGllZENvb3Jkc0Zvck9ydGhvKGUsdCxpKXtpZihlLmdldFNvdXJjZSgpaW5zdGFuY2VvZiBQZSlyZXR1cm4gdGhpcy5fc2V0dXBQcm94aWVkQ29vcmRzRm9ySW1hZ2VTb3VyY2UoZSx0LGkpO3RoaXMuX2ZpbmRDb3ZlcmluZ1RpbGVDYWNoZVtlLmlkXT10aGlzLl9maW5kQ292ZXJpbmdUaWxlQ2FjaGVbZS5pZF18fHt9O2NvbnN0IG89dGhpcy5wcm94aWVkQ29vcmRzW2UuaWRdPVtdLHI9dGhpcy5wcm94eUNvb3Jkcztmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3Qgbj1yW3RdLHM9dGhpcy5fZmluZFRpbGVDb3ZlcmluZ1RpbGVJRChuLGUpO2lmKHMpe2NvbnN0IHQ9dGhpcy5fY3JlYXRlUHJveGllZElkKG4scyxpW24ua2V5XSYmaVtuLmtleV1bZS5pZF0pO28ucHVzaCh0KSx0aGlzLnByb3h5VG9Tb3VyY2Vbbi5rZXldW2UuaWRdPVt0XTt9fWxldCBuPSExO2ZvcihsZXQgcj0wO3I8dC5sZW5ndGg7cisrKXtjb25zdCBzPWUuZ2V0VGlsZSh0W3JdKTtpZighc3x8IXMuaGFzRGF0YSgpKWNvbnRpbnVlO2NvbnN0IGE9dGhpcy5fZmluZFRpbGVDb3ZlcmluZ1RpbGVJRChzLnRpbGVJRCx0aGlzLnByb3h5U291cmNlQ2FjaGUpO2lmKGEmJmEudGlsZUlELmNhbm9uaWNhbC56IT09cy50aWxlSUQuY2Fub25pY2FsLnope2NvbnN0IHQ9dGhpcy5wcm94eVRvU291cmNlW2EudGlsZUlELmtleV1bZS5pZF0scj10aGlzLl9jcmVhdGVQcm94aWVkSWQoYS50aWxlSUQscyxpW2EudGlsZUlELmtleV0mJmlbYS50aWxlSUQua2V5XVtlLmlkXSk7dD90LnNwbGljZSh0Lmxlbmd0aC0xLDAscik6dGhpcy5wcm94eVRvU291cmNlW2EudGlsZUlELmtleV1bZS5pZF09W3JdLG8ucHVzaChyKSxuPSEwO319dGhpcy5fc291cmNlVGlsZXNPdmVybGFwW2UuaWRdPW47fV9zZXR1cFByb3hpZWRDb29yZHNGb3JJbWFnZVNvdXJjZSh0LGksbyl7aWYoIXQuZ2V0U291cmNlKCkubG9hZGVkKCkpcmV0dXJuO2NvbnN0IHI9dGhpcy5wcm94aWVkQ29vcmRzW3QuaWRdPVtdLG49dGhpcy5wcm94eUNvb3JkcyxzPXQuZ2V0U291cmNlKCksYT1uZXcgZS5Qb2ludChzLnRpbGVJRC54LHMudGlsZUlELnkpLl9kaXYoMTw8cy50aWxlSUQueiksbD1zLmNvb3JkaW5hdGVzLm1hcChlLk1lcmNhdG9yQ29vcmRpbmF0ZS5mcm9tTG5nTGF0KS5yZWR1Y2UoKChlLHQpPT4oZS5taW4ueD1NYXRoLm1pbihlLm1pbi54LHQueC1hLngpLGUubWluLnk9TWF0aC5taW4oZS5taW4ueSx0LnktYS55KSxlLm1heC54PU1hdGgubWF4KGUubWF4LngsdC54LWEueCksZS5tYXgueT1NYXRoLm1heChlLm1heC55LHQueS1hLnkpLGUpKSx7bWluOm5ldyBlLlBvaW50KE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSksbWF4Om5ldyBlLlBvaW50KC1OdW1iZXIuTUFYX1ZBTFVFLC1OdW1iZXIuTUFYX1ZBTFVFKX0pLGM9KHQsaSk9Pntjb25zdCBvPXQud3JhcCt0LmNhbm9uaWNhbC54LygxPDx0LmNhbm9uaWNhbC56KSxyPXQuY2Fub25pY2FsLnkvKDE8PHQuY2Fub25pY2FsLnopLG49ZS5FWFRFTlQvKDE8PHQuY2Fub25pY2FsLnopLHM9aS53cmFwK2kuY2Fub25pY2FsLngvKDE8PGkuY2Fub25pY2FsLnopLGE9aS5jYW5vbmljYWwueS8oMTw8aS5jYW5vbmljYWwueik7cmV0dXJuIG8rbjxzK2wubWluLnh8fG8+cytsLm1heC54fHxyK248YStsLm1pbi55fHxyPmErbC5tYXgueX07Zm9yKGxldCBlPTA7ZTxuLmxlbmd0aDtlKyspe2NvbnN0IHM9bltlXTtmb3IobGV0IGU9MDtlPGkubGVuZ3RoO2UrKyl7Y29uc3Qgbj10LmdldFRpbGUoaVtlXSk7aWYoIW58fCFuLmhhc0RhdGEoKSljb250aW51ZTtpZihjKHMsbi50aWxlSUQpKWNvbnRpbnVlO2NvbnN0IGE9dGhpcy5fY3JlYXRlUHJveGllZElkKHMsbixvW3Mua2V5XSYmb1tzLmtleV1bdC5pZF0pLGw9dGhpcy5wcm94eVRvU291cmNlW3Mua2V5XVt0LmlkXTtsP2wucHVzaChhKTp0aGlzLnByb3h5VG9Tb3VyY2Vbcy5rZXldW3QuaWRdPVthXSxyLnB1c2goYSk7fX19X2NyZWF0ZVByb3hpZWRJZCh0LGksbyl7bGV0IHI9dGhpcy5vcnRob01hdHJpeDtpZihvKXtjb25zdCBlPW8uZmluZCgoZT0+ZS5rZXk9PT1pLnRpbGVJRC5rZXkpKTtpZihlKXJldHVybiBlfWlmKGkudGlsZUlELmtleSE9PXQua2V5KXtjb25zdCBvPXQuY2Fub25pY2FsLnotaS50aWxlSUQuY2Fub25pY2FsLno7bGV0IG4scyxhO3I9ZS5jcmVhdGUoKTtjb25zdCBsPWkudGlsZUlELndyYXAtdC53cmFwPDx0Lm92ZXJzY2FsZWRaO28+MD8obj1lLkVYVEVOVD4+byxzPW4qKChpLnRpbGVJRC5jYW5vbmljYWwueDw8byktdC5jYW5vbmljYWwueCtsKSxhPW4qKChpLnRpbGVJRC5jYW5vbmljYWwueTw8byktdC5jYW5vbmljYWwueSkpOihuPWUuRVhURU5UPDwtbyxzPWUuRVhURU5UKihpLnRpbGVJRC5jYW5vbmljYWwueC0odC5jYW5vbmljYWwueCtsPDwtbykpLGE9ZS5FWFRFTlQqKGkudGlsZUlELmNhbm9uaWNhbC55LSh0LmNhbm9uaWNhbC55PDwtbykpKSxlLm9ydGhvKHIsMCxuLDAsbiwwLDEpLGUudHJhbnNsYXRlKHIscixbcyxhLDBdKTt9cmV0dXJuIG5ldyBTaShpLnRpbGVJRCx0LmtleSxyKX1fZmluZFRpbGVDb3ZlcmluZ1RpbGVJRCh0LGkpe2xldCBvPWkuZ2V0VGlsZSh0KTtpZihvJiZvLmhhc0RhdGEoKSlyZXR1cm4gbztjb25zdCByPXRoaXMuX2ZpbmRDb3ZlcmluZ1RpbGVDYWNoZVtpLmlkXSxuPXJbdC5rZXldO2lmKG89bj9pLmdldFRpbGVCeUlEKG4pOm51bGwsbyYmby5oYXNEYXRhKCl8fG51bGw9PT1uKXJldHVybiBvO2xldCBzPW8/by50aWxlSUQ6dCxhPXMub3ZlcnNjYWxlZFo7Y29uc3QgbD1pLmdldFNvdXJjZSgpLm1pbnpvb20sYz1bXTtpZighbil7Y29uc3Qgcj1pLmdldFNvdXJjZSgpLm1heHpvb207aWYodC5jYW5vbmljYWwuej49cil7Y29uc3Qgbz10LmNhbm9uaWNhbC56LXI7aS5nZXRTb3VyY2UoKS5yZXBhcnNlT3ZlcnNjYWxlZD8oYT1NYXRoLm1heCh0LmNhbm9uaWNhbC56KzIsaS50cmFuc2Zvcm0udGlsZVpvb20pLHM9bmV3IGUuT3ZlcnNjYWxlZFRpbGVJRChhLHQud3JhcCxyLHQuY2Fub25pY2FsLng+Pm8sdC5jYW5vbmljYWwueT4+bykpOjAhPT1vJiYoYT1yLHM9bmV3IGUuT3ZlcnNjYWxlZFRpbGVJRChhLHQud3JhcCxyLHQuY2Fub25pY2FsLng+Pm8sdC5jYW5vbmljYWwueT4+bykpO31zLmtleSE9PXQua2V5JiYoYy5wdXNoKHMua2V5KSxvPWkuZ2V0VGlsZShzKSk7fWNvbnN0IGg9ZT0+e2MuZm9yRWFjaCgodD0+e3JbdF09ZTt9KSksYy5sZW5ndGg9MDt9O2ZvcihhLT0xO2E+PWwmJighb3x8IW8uaGFzRGF0YSgpKTthLS0pe28mJmgoby50aWxlSUQua2V5KTtjb25zdCBlPXMuY2FsY3VsYXRlU2NhbGVkS2V5KGEpO2lmKG89aS5nZXRUaWxlQnlJRChlKSxvJiZvLmhhc0RhdGEoKSlicmVhaztjb25zdCB0PXJbZV07aWYobnVsbD09PXQpYnJlYWs7dm9pZCAwPT09dD9jLnB1c2goZSk6bz1pLmdldFRpbGVCeUlEKHQpO31yZXR1cm4gaChvP28udGlsZUlELmtleTpudWxsKSxvJiZvLmhhc0RhdGEoKT9vOm51bGx9ZmluZERFTVRpbGVGb3IoZSl7cmV0dXJuIHRoaXMuZW5hYmxlZD90aGlzLl9maW5kVGlsZUNvdmVyaW5nVGlsZUlEKGUsdGhpcy5zb3VyY2VDYWNoZSk6bnVsbH1wcmVwYXJlRHJhd1RpbGUoKXt0aGlzLnJlbmRlcmVkVG9UaWxlPSEwO31fY2xlYXJSZW5kZXJDYWNoZUZvclRpbGUoZSx0KXtsZXQgaT10aGlzLl90aWxlc0RpcnR5W2VdO2l8fChpPXRoaXMuX3RpbGVzRGlydHlbZV09e30pLGlbdC5rZXldPSEwO31nZXRXaXJlZmFtZUJ1ZmZlcigpe2lmKCF0aGlzLndpcmVmcmFtZVNlZ21lbnRzKXtjb25zdCB0PWZ1bmN0aW9uKHQpe2xldCBpPTA7Y29uc3Qgbz1uZXcgZS5TdHJ1Y3RBcnJheUxheW91dDJ1aTQscj0xMzE7Zm9yKGxldCBlPTE7ZTwxMjk7ZSsrKXtmb3IobGV0IHQ9MTt0PDEyOTt0KyspaT1lKnIrdCxvLmVtcGxhY2VCYWNrKGksaSsxKSxvLmVtcGxhY2VCYWNrKGksaStyKSxvLmVtcGxhY2VCYWNrKGkrMSxpK3IpLDEyOD09PWUmJm8uZW1wbGFjZUJhY2soaStyLGkrcisxKTtvLmVtcGxhY2VCYWNrKGkrMSxpKzErcik7fXJldHVybiBvfSgpO3RoaXMud2lyZWZyYW1lSW5kZXhCdWZmZXI9dGhpcy5wYWludGVyLmNvbnRleHQuY3JlYXRlSW5kZXhCdWZmZXIodCksdGhpcy53aXJlZnJhbWVTZWdtZW50cz1lLlNlZ21lbnRWZWN0b3Iuc2ltcGxlU2VnbWVudCgwLDAsdGhpcy5ncmlkQnVmZmVyLmxlbmd0aCx0Lmxlbmd0aCk7fXJldHVybiBbdGhpcy53aXJlZnJhbWVJbmRleEJ1ZmZlcix0aGlzLndpcmVmcmFtZVNlZ21lbnRzXX19Y2xhc3MgTGl7c3RhdGljIGNhY2hlS2V5KGUsdCxpLG8pe2xldCByPWAke3R9JHtvP28uY2FjaGVLZXk6XCJcIn1gO2Zvcihjb25zdCB0IG9mIGkpZS51c2VkRGVmaW5lcy5pbmNsdWRlcyh0KSYmKHIrPWAvJHt0fWApO3JldHVybiByfWNvbnN0cnVjdG9yKHQsaSxvLHIsbixzKXtjb25zdCBhPXQuZ2w7dGhpcy5wcm9ncmFtPWEuY3JlYXRlUHJvZ3JhbSgpO2NvbnN0IGw9ZnVuY3Rpb24oZSl7Y29uc3QgdD1bXTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKyl7aWYobnVsbD09PWVbaV0pY29udGludWU7Y29uc3Qgbz1lW2ldLnNwbGl0KFwiIFwiKTt0LnB1c2goby5wb3AoKSk7fXJldHVybiB0fShvLnN0YXRpY0F0dHJpYnV0ZXMpLGM9cj9yLmdldEJpbmRlckF0dHJpYnV0ZXMoKTpbXSxoPWwuY29uY2F0KGMpO2xldCB1PXI/ci5kZWZpbmVzKCk6W107dT11LmNvbmNhdChzLm1hcCgoZT0+YCNkZWZpbmUgJHtlfWApKSk7Y29uc3QgXz10LmlzV2ViR0wyP1wiI3ZlcnNpb24gMzAwIGVzXFxuXCI6XCJcIixkPV8rdS5jb25jYXQodC5leHRTdGFuZGFyZERlcml2YXRpdmVzJiYwPT09Xy5sZW5ndGg/XCIjZXh0ZW5zaW9uIEdMX09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyA6IGVuYWJsZVxcblwiLmNvbmNhdChsaSk6bGksbGksYWksc2kuZnJhZ21lbnRTb3VyY2UscmkuZnJhZ21lbnRTb3VyY2Usby5mcmFnbWVudFNvdXJjZSkuam9pbihcIlxcblwiKSxwPV8rdS5jb25jYXQoXCJcXG4jaWZkZWYgR0xfRVNcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2Vsc2VcXG5cXG4jaWYgIWRlZmluZWQobG93cClcXG4jZGVmaW5lIGxvd3BcXG4jZW5kaWZcXG5cXG4jaWYgIWRlZmluZWQobWVkaXVtcClcXG4jZGVmaW5lIG1lZGl1bXBcXG4jZW5kaWZcXG5cXG4jaWYgIWRlZmluZWQoaGlnaHApXFxuI2RlZmluZSBoaWdocFxcbiNlbmRpZlxcblxcbiNlbmRpZlwiLGFpLHNpLnZlcnRleFNvdXJjZSxyaS52ZXJ0ZXhTb3VyY2Usb2kudmVydGV4U291cmNlLG8udmVydGV4U291cmNlKS5qb2luKFwiXFxuXCIpLG09YS5jcmVhdGVTaGFkZXIoYS5GUkFHTUVOVF9TSEFERVIpO2lmKGEuaXNDb250ZXh0TG9zdCgpKXJldHVybiB2b2lkKHRoaXMuZmFpbGVkVG9DcmVhdGU9ITApO2Euc2hhZGVyU291cmNlKG0sZCksYS5jb21waWxlU2hhZGVyKG0pLGEuYXR0YWNoU2hhZGVyKHRoaXMucHJvZ3JhbSxtKTtjb25zdCBmPWEuY3JlYXRlU2hhZGVyKGEuVkVSVEVYX1NIQURFUik7aWYoYS5pc0NvbnRleHRMb3N0KCkpdGhpcy5mYWlsZWRUb0NyZWF0ZT0hMDtlbHNlIHthLnNoYWRlclNvdXJjZShmLHApLGEuY29tcGlsZVNoYWRlcihmKSxhLmF0dGFjaFNoYWRlcih0aGlzLnByb2dyYW0sZiksdGhpcy5hdHRyaWJ1dGVzPXt9LHRoaXMubnVtQXR0cmlidXRlcz1oLmxlbmd0aDtmb3IobGV0IGU9MDtlPHRoaXMubnVtQXR0cmlidXRlcztlKyspaFtlXSYmKGEuYmluZEF0dHJpYkxvY2F0aW9uKHRoaXMucHJvZ3JhbSxlLGhbZV0pLHRoaXMuYXR0cmlidXRlc1toW2VdXT1lKTthLmxpbmtQcm9ncmFtKHRoaXMucHJvZ3JhbSksYS5kZWxldGVTaGFkZXIoZiksYS5kZWxldGVTaGFkZXIobSksdGhpcy5maXhlZFVuaWZvcm1zPW4odCksdGhpcy5iaW5kZXJVbmlmb3Jtcz1yP3IuZ2V0VW5pZm9ybXModCk6W10scy5pbmNsdWRlcyhcIlRFUlJBSU5cIikmJih0aGlzLnRlcnJhaW5Vbmlmb3Jtcz0odD0+KHt1X2RlbTpuZXcgZS5Vbmlmb3JtMWkodCksdV9kZW1fcHJldjpuZXcgZS5Vbmlmb3JtMWkodCksdV9kZW1fdW5wYWNrOm5ldyBlLlVuaWZvcm00Zih0KSx1X2RlbV90bDpuZXcgZS5Vbmlmb3JtMmYodCksdV9kZW1fc2NhbGU6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZGVtX3RsX3ByZXY6bmV3IGUuVW5pZm9ybTJmKHQpLHVfZGVtX3NjYWxlX3ByZXY6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZGVtX3NpemU6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZGVtX2xlcnA6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZXhhZ2dlcmF0aW9uOm5ldyBlLlVuaWZvcm0xZih0KSx1X2RlcHRoOm5ldyBlLlVuaWZvcm0xaSh0KSx1X2RlcHRoX3NpemVfaW52Om5ldyBlLlVuaWZvcm0yZih0KSx1X21ldGVyX3RvX2RlbTpuZXcgZS5Vbmlmb3JtMWYodCksdV9sYWJlbF9wbGFuZV9tYXRyaXhfaW52Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KX0pKSh0KSkscy5pbmNsdWRlcyhcIkdMT0JFXCIpJiYodGhpcy5nbG9iZVVuaWZvcm1zPSh0PT4oe3VfdGlsZV90bF91cDpuZXcgZS5Vbmlmb3JtM2YodCksdV90aWxlX3RyX3VwOm5ldyBlLlVuaWZvcm0zZih0KSx1X3RpbGVfYnJfdXA6bmV3IGUuVW5pZm9ybTNmKHQpLHVfdGlsZV9ibF91cDpuZXcgZS5Vbmlmb3JtM2YodCksdV90aWxlX3VwX3NjYWxlOm5ldyBlLlVuaWZvcm0xZih0KX0pKSh0KSkscy5pbmNsdWRlcyhcIkZPR1wiKSYmKHRoaXMuZm9nVW5pZm9ybXM9KHQ9Pih7dV9mb2dfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X2ZvZ19yYW5nZTpuZXcgZS5Vbmlmb3JtMmYodCksdV9mb2dfY29sb3I6bmV3IGUuVW5pZm9ybTRmKHQpLHVfZm9nX2hvcml6b25fYmxlbmQ6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZm9nX3RlbXBvcmFsX29mZnNldDpuZXcgZS5Vbmlmb3JtMWYodCksdV9mcnVzdHVtX3RsOm5ldyBlLlVuaWZvcm0zZih0KSx1X2ZydXN0dW1fdHI6bmV3IGUuVW5pZm9ybTNmKHQpLHVfZnJ1c3R1bV9icjpuZXcgZS5Vbmlmb3JtM2YodCksdV9mcnVzdHVtX2JsOm5ldyBlLlVuaWZvcm0zZih0KSx1X2dsb2JlX3BvczpuZXcgZS5Vbmlmb3JtM2YodCksdV9nbG9iZV9yYWRpdXM6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZ2xvYmVfdHJhbnNpdGlvbjpuZXcgZS5Vbmlmb3JtMWYodCksdV9pc19nbG9iZTpuZXcgZS5Vbmlmb3JtMWkodCksdV92aWV3cG9ydDpuZXcgZS5Vbmlmb3JtMmYodCl9KSkodCkpO319c2V0VGVycmFpblVuaWZvcm1WYWx1ZXMoZSx0KXtpZighdGhpcy50ZXJyYWluVW5pZm9ybXMpcmV0dXJuO2NvbnN0IGk9dGhpcy50ZXJyYWluVW5pZm9ybXM7aWYoIXRoaXMuZmFpbGVkVG9DcmVhdGUpe2UucHJvZ3JhbS5zZXQodGhpcy5wcm9ncmFtKTtmb3IoY29uc3QgZSBpbiB0KWlbZV0mJmlbZV0uc2V0KHRoaXMucHJvZ3JhbSxlLHRbZV0pO319c2V0R2xvYmVVbmlmb3JtVmFsdWVzKGUsdCl7aWYoIXRoaXMuZ2xvYmVVbmlmb3JtcylyZXR1cm47Y29uc3QgaT10aGlzLmdsb2JlVW5pZm9ybXM7aWYoIXRoaXMuZmFpbGVkVG9DcmVhdGUpe2UucHJvZ3JhbS5zZXQodGhpcy5wcm9ncmFtKTtmb3IoY29uc3QgZSBpbiB0KWlbZV0mJmlbZV0uc2V0KHRoaXMucHJvZ3JhbSxlLHRbZV0pO319c2V0Rm9nVW5pZm9ybVZhbHVlcyhlLHQpe2lmKCF0aGlzLmZvZ1VuaWZvcm1zKXJldHVybjtjb25zdCBpPXRoaXMuZm9nVW5pZm9ybXM7aWYoIXRoaXMuZmFpbGVkVG9DcmVhdGUpe2UucHJvZ3JhbS5zZXQodGhpcy5wcm9ncmFtKTtmb3IoY29uc3QgZSBpbiB0KWlbZV0uc2V0KHRoaXMucHJvZ3JhbSxlLHRbZV0pO319ZHJhdyhlLHQsaSxvLHIsbixzLGEsbCxjLGgsdSxfLGQscCl7Y29uc3QgbT1lLmdsO2lmKHRoaXMuZmFpbGVkVG9DcmVhdGUpcmV0dXJuO2UucHJvZ3JhbS5zZXQodGhpcy5wcm9ncmFtKSxlLnNldERlcHRoTW9kZShpKSxlLnNldFN0ZW5jaWxNb2RlKG8pLGUuc2V0Q29sb3JNb2RlKHIpLGUuc2V0Q3VsbEZhY2Uobik7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXModGhpcy5maXhlZFVuaWZvcm1zKSl0aGlzLmZpeGVkVW5pZm9ybXNbZV0uc2V0KHRoaXMucHJvZ3JhbSxlLHNbZV0pO2QmJmQuc2V0VW5pZm9ybXModGhpcy5wcm9ncmFtLGUsdGhpcy5iaW5kZXJVbmlmb3Jtcyx1LHt6b29tOl99KTtjb25zdCBmPXtbbS5MSU5FU106MixbbS5UUklBTkdMRVNdOjMsW20uTElORV9TVFJJUF06MX1bdF07Zm9yKGNvbnN0IGkgb2YgaC5nZXQoKSl7Y29uc3Qgbz1pLnZhb3N8fChpLnZhb3M9e30pOyhvW2FdfHwob1thXT1uZXcgX2kpKS5iaW5kKGUsdGhpcyxsLGQ/ZC5nZXRQYWludFZlcnRleEJ1ZmZlcnMoKTpbXSxjLGkudmVydGV4T2Zmc2V0LHB8fFtdKSxtLmRyYXdFbGVtZW50cyh0LGkucHJpbWl0aXZlTGVuZ3RoKmYsbS5VTlNJR05FRF9TSE9SVCxpLnByaW1pdGl2ZU9mZnNldCpmKjIpO319fWZ1bmN0aW9uIEFpKGUsdCl7Y29uc3QgaT1NYXRoLnBvdygyLHQudGlsZUlELm92ZXJzY2FsZWRaKSxvPXQudGlsZVNpemUqTWF0aC5wb3coMixlLnRyYW5zZm9ybS50aWxlWm9vbSkvaSxyPW8qKHQudGlsZUlELmNhbm9uaWNhbC54K3QudGlsZUlELndyYXAqaSksbj1vKnQudGlsZUlELmNhbm9uaWNhbC55O3JldHVybiB7dV9pbWFnZTowLHVfdGV4c2l6ZTp0LmltYWdlQXRsYXNUZXh0dXJlLnNpemUsdV90aWxlX3VuaXRzX3RvX3BpeGVsczoxL0QodCwxLGUudHJhbnNmb3JtLnRpbGVab29tKSx1X3BpeGVsX2Nvb3JkX3VwcGVyOltyPj4xNixuPj4xNl0sdV9waXhlbF9jb29yZF9sb3dlcjpbNjU1MzUmciw2NTUzNSZuXX19Y29uc3Qgemk9ZS5jcmVhdGUoKSxSaT0odCxpLG8scixuLHMsYSxsLGMsaCx1KT0+e2NvbnN0IF89aS5zdHlsZS5saWdodCxkPV8ucHJvcGVydGllcy5nZXQoXCJwb3NpdGlvblwiKSxwPVtkLngsZC55LGQuel0sbT1lLmNyZWF0ZSQxKCk7XCJ2aWV3cG9ydFwiPT09Xy5wcm9wZXJ0aWVzLmdldChcImFuY2hvclwiKSYmKGUuZnJvbVJvdGF0aW9uKG0sLWkudHJhbnNmb3JtLmFuZ2xlKSxlLnRyYW5zZm9ybU1hdDMocCxwLG0pKTtjb25zdCBmPV8ucHJvcGVydGllcy5nZXQoXCJjb2xvclwiKSxnPWkudHJhbnNmb3JtLHY9e3VfbWF0cml4OnQsdV9saWdodHBvczpwLHVfbGlnaHRpbnRlbnNpdHk6Xy5wcm9wZXJ0aWVzLmdldChcImludGVuc2l0eVwiKSx1X2xpZ2h0Y29sb3I6W2YucixmLmcsZi5iXSx1X3ZlcnRpY2FsX2dyYWRpZW50OitvLHVfb3BhY2l0eTpyLHVfdGlsZV9pZDpbMCwwLDBdLHVfem9vbV90cmFuc2l0aW9uOjAsdV9pbnZfcm90X21hdHJpeDp6aSx1X21lcmNfY2VudGVyOlswLDBdLHVfdXBfZGlyOlswLDAsMF0sdV9oZWlnaHRfbGlmdDowLHVfYW86bix1X2VkZ2VfcmFkaXVzOnN9O3JldHVybiBcImdsb2JlXCI9PT1nLnByb2plY3Rpb24ubmFtZSYmKHYudV90aWxlX2lkPVthLmNhbm9uaWNhbC54LGEuY2Fub25pY2FsLnksMTw8YS5jYW5vbmljYWwuel0sdi51X3pvb21fdHJhbnNpdGlvbj1jLHYudV9pbnZfcm90X21hdHJpeD11LHYudV9tZXJjX2NlbnRlcj1oLHYudV91cF9kaXI9Zy5wcm9qZWN0aW9uLnVwVmVjdG9yKG5ldyBlLkNhbm9uaWNhbFRpbGVJRCgwLDAsMCksaFswXSplLkVYVEVOVCxoWzFdKmUuRVhURU5UKSx2LnVfaGVpZ2h0X2xpZnQ9bCksdn0sT2k9KHQsaSxvLHIsbixzLGEsbCxjLGgsdSxfKT0+e2NvbnN0IGQ9UmkodCxpLG8scixuLHMsYSxjLGgsdSxfKSxwPXt1X2hlaWdodF9mYWN0b3I6LU1hdGgucG93KDIsYS5vdmVyc2NhbGVkWikvbC50aWxlU2l6ZS84fTtyZXR1cm4gZS5leHRlbmQoZCxBaShpLGwpLHApfSxCaT1lPT4oe3VfbWF0cml4OmV9KSxraT0odCxpLG8pPT5lLmV4dGVuZChCaSh0KSxBaShpLG8pKSxGaT0oZSx0KT0+KHt1X21hdHJpeDplLHVfd29ybGQ6dH0pLFVpPSh0LGksbyxyKT0+ZS5leHRlbmQoa2kodCxpLG8pLHt1X3dvcmxkOnJ9KSxOaT1lLmNyZWF0ZSgpLGppPSh0LGksbyxyLG4scyk9Pntjb25zdCBhPXQudHJhbnNmb3JtLGw9XCJnbG9iZVwiPT09YS5wcm9qZWN0aW9uLm5hbWU7bGV0IGM7aWYoXCJtYXBcIj09PXMucGFpbnQuZ2V0KFwiY2lyY2xlLXBpdGNoLWFsaWdubWVudFwiKSlpZihsKXtjb25zdCB0PWUuZ2xvYmVQaXhlbHNUb1RpbGVVbml0cyhhLnpvb20saS5jYW5vbmljYWwpKmEuX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWw7Yz1GbG9hdDMyQXJyYXkuZnJvbShbdCwwLDAsdF0pO31lbHNlIGM9YS5jYWxjdWxhdGVQaXhlbHNUb1RpbGVVbml0c01hdHJpeChvKTtlbHNlIGM9bmV3IEZsb2F0MzJBcnJheShbYS5waXhlbHNUb0dMVW5pdHNbMF0sMCwwLGEucGl4ZWxzVG9HTFVuaXRzWzFdXSk7Y29uc3QgaD17dV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlOmEuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZSx1X21hdHJpeDp0LnRyYW5zbGF0ZVBvc01hdHJpeChpLnByb2pNYXRyaXgsbyxzLnBhaW50LmdldChcImNpcmNsZS10cmFuc2xhdGVcIikscy5wYWludC5nZXQoXCJjaXJjbGUtdHJhbnNsYXRlLWFuY2hvclwiKSksdV9kZXZpY2VfcGl4ZWxfcmF0aW86ZS5leHBvcnRlZC5kZXZpY2VQaXhlbFJhdGlvLHVfZXh0cnVkZV9zY2FsZTpjLHVfaW52X3JvdF9tYXRyaXg6TmksdV9tZXJjX2NlbnRlcjpbMCwwXSx1X3RpbGVfaWQ6WzAsMCwwXSx1X3pvb21fdHJhbnNpdGlvbjowLHVfdXBfZGlyOlswLDAsMF19O2lmKGwpe2gudV9pbnZfcm90X21hdHJpeD1yLGgudV9tZXJjX2NlbnRlcj1uLGgudV90aWxlX2lkPVtpLmNhbm9uaWNhbC54LGkuY2Fub25pY2FsLnksMTw8aS5jYW5vbmljYWwuel0saC51X3pvb21fdHJhbnNpdGlvbj1lLmdsb2JlVG9NZXJjYXRvclRyYW5zaXRpb24oYS56b29tKTtjb25zdCB0PW5bMF0qZS5FWFRFTlQsbz1uWzFdKmUuRVhURU5UO2gudV91cF9kaXI9YS5wcm9qZWN0aW9uLnVwVmVjdG9yKG5ldyBlLkNhbm9uaWNhbFRpbGVJRCgwLDAsMCksdCxvKTt9cmV0dXJuIGh9LEdpPWU9Pntjb25zdCB0PVtdO3JldHVybiBcIm1hcFwiPT09ZS5wYWludC5nZXQoXCJjaXJjbGUtcGl0Y2gtYWxpZ25tZW50XCIpJiZ0LnB1c2goXCJQSVRDSF9XSVRIX01BUFwiKSxcIm1hcFwiPT09ZS5wYWludC5nZXQoXCJjaXJjbGUtcGl0Y2gtc2NhbGVcIikmJnQucHVzaChcIlNDQUxFX1dJVEhfTUFQXCIpLHR9LFppPSh0LGksbyxyKT0+e2NvbnN0IG49ZS5FWFRFTlQvby50aWxlU2l6ZTtyZXR1cm4ge3VfbWF0cml4OnQsdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlOmkuZ2V0Q2FtZXJhVG9DZW50ZXJEaXN0YW5jZShyKSx1X2V4dHJ1ZGVfc2NhbGU6W2kucGl4ZWxzVG9HTFVuaXRzWzBdL24saS5waXhlbHNUb0dMVW5pdHNbMV0vbl19fSxWaT0oZSx0LGk9MSk9Pih7dV9tYXRyaXg6ZSx1X2NvbG9yOnQsdV9vdmVybGF5OjAsdV9vdmVybGF5X3NjYWxlOml9KSxXaT1lLmNyZWF0ZSgpLFhpPSh0LGksbyxyLG4scyxhKT0+e2NvbnN0IGw9dC50cmFuc2Zvcm0sYz1cImdsb2JlXCI9PT1sLnByb2plY3Rpb24ubmFtZSxoPWM/ZS5nbG9iZVBpeGVsc1RvVGlsZVVuaXRzKGwuem9vbSxpLmNhbm9uaWNhbCkqbC5fcGl4ZWxzUGVyTWVyY2F0b3JQaXhlbDpEKG8sMSxzKSx1PXt1X21hdHJpeDppLnByb2pNYXRyaXgsdV9leHRydWRlX3NjYWxlOmgsdV9pbnRlbnNpdHk6YSx1X2ludl9yb3RfbWF0cml4OldpLHVfbWVyY19jZW50ZXI6WzAsMF0sdV90aWxlX2lkOlswLDAsMF0sdV96b29tX3RyYW5zaXRpb246MCx1X3VwX2RpcjpbMCwwLDBdfTtpZihjKXt1LnVfaW52X3JvdF9tYXRyaXg9cix1LnVfbWVyY19jZW50ZXI9bix1LnVfdGlsZV9pZD1baS5jYW5vbmljYWwueCxpLmNhbm9uaWNhbC55LDE8PGkuY2Fub25pY2FsLnpdLHUudV96b29tX3RyYW5zaXRpb249ZS5nbG9iZVRvTWVyY2F0b3JUcmFuc2l0aW9uKGwuem9vbSk7Y29uc3QgdD1uWzBdKmUuRVhURU5ULG89blsxXSplLkVYVEVOVDt1LnVfdXBfZGlyPWwucHJvamVjdGlvbi51cFZlY3RvcihuZXcgZS5DYW5vbmljYWxUaWxlSUQoMCwwLDApLHQsbyk7fXJldHVybiB1fSxxaT0oZSx0LGksbyxyLG4scyk9Pntjb25zdCBhPWUudHJhbnNmb3JtLGw9YS5jYWxjdWxhdGVQaXhlbHNUb1RpbGVVbml0c01hdHJpeCh0KTtyZXR1cm4ge3VfbWF0cml4OllpKGUsdCxpLG8pLHVfcGl4ZWxzX3RvX3RpbGVfdW5pdHM6bCx1X2RldmljZV9waXhlbF9yYXRpbzpuLHVfdW5pdHNfdG9fcGl4ZWxzOlsxL2EucGl4ZWxzVG9HTFVuaXRzWzBdLDEvYS5waXhlbHNUb0dMVW5pdHNbMV1dLHVfZGFzaF9pbWFnZTowLHVfZ3JhZGllbnRfaW1hZ2U6MSx1X2ltYWdlX2hlaWdodDpyLHVfdGV4c2l6ZTpLaShpKT90LmxpbmVBdGxhc1RleHR1cmUuc2l6ZTpbMCwwXSx1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzOkhpKHQsZS50cmFuc2Zvcm0pLHVfYWxwaGFfZGlzY2FyZF90aHJlc2hvbGQ6MCx1X3RyaW1fb2Zmc2V0OnN9fSwkaT0oZSx0LGksbyxyKT0+e2NvbnN0IG49ZS50cmFuc2Zvcm07cmV0dXJuIHt1X21hdHJpeDpZaShlLHQsaSxvKSx1X3RleHNpemU6dC5pbWFnZUF0bGFzVGV4dHVyZS5zaXplLHVfcGl4ZWxzX3RvX3RpbGVfdW5pdHM6bi5jYWxjdWxhdGVQaXhlbHNUb1RpbGVVbml0c01hdHJpeCh0KSx1X2RldmljZV9waXhlbF9yYXRpbzpyLHVfaW1hZ2U6MCx1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzOkhpKHQsbiksdV91bml0c190b19waXhlbHM6WzEvbi5waXhlbHNUb0dMVW5pdHNbMF0sMS9uLnBpeGVsc1RvR0xVbml0c1sxXV0sdV9hbHBoYV9kaXNjYXJkX3RocmVzaG9sZDowfX07ZnVuY3Rpb24gSGkoZSx0KXtyZXR1cm4gMS9EKGUsMSx0LnRpbGVab29tKX1mdW5jdGlvbiBZaShlLHQsaSxvKXtyZXR1cm4gZS50cmFuc2xhdGVQb3NNYXRyaXgob3x8dC50aWxlSUQucHJvak1hdHJpeCx0LGkucGFpbnQuZ2V0KFwibGluZS10cmFuc2xhdGVcIiksaS5wYWludC5nZXQoXCJsaW5lLXRyYW5zbGF0ZS1hbmNob3JcIikpfWZ1bmN0aW9uIEtpKGUpe2NvbnN0IHQ9ZS5wYWludC5nZXQoXCJsaW5lLWRhc2hhcnJheVwiKS52YWx1ZTtyZXR1cm4gdC52YWx1ZXx8XCJjb25zdGFudFwiIT09dC5raW5kfWNvbnN0IEppPShlLHQsaSxvLHIsbik9PntyZXR1cm4ge3VfbWF0cml4OmUsdV90bF9wYXJlbnQ6dCx1X3NjYWxlX3BhcmVudDppLHVfZmFkZV90Om8ubWl4LHVfb3BhY2l0eTpvLm9wYWNpdHkqci5wYWludC5nZXQoXCJyYXN0ZXItb3BhY2l0eVwiKSx1X2ltYWdlMDowLHVfaW1hZ2UxOjEsdV9icmlnaHRuZXNzX2xvdzpyLnBhaW50LmdldChcInJhc3Rlci1icmlnaHRuZXNzLW1pblwiKSx1X2JyaWdodG5lc3NfaGlnaDpyLnBhaW50LmdldChcInJhc3Rlci1icmlnaHRuZXNzLW1heFwiKSx1X3NhdHVyYXRpb25fZmFjdG9yOihhPXIucGFpbnQuZ2V0KFwicmFzdGVyLXNhdHVyYXRpb25cIiksYT4wPzEtMS8oMS4wMDEtYSk6LWEpLHVfY29udHJhc3RfZmFjdG9yOihzPXIucGFpbnQuZ2V0KFwicmFzdGVyLWNvbnRyYXN0XCIpLHM+MD8xLygxLXMpOjErcyksdV9zcGluX3dlaWdodHM6UWkoci5wYWludC5nZXQoXCJyYXN0ZXItaHVlLXJvdGF0ZVwiKSksdV9wZXJzcGVjdGl2ZV90cmFuc2Zvcm06bn07dmFyIHMsYTt9O2Z1bmN0aW9uIFFpKGUpe2UqPU1hdGguUEkvMTgwO2NvbnN0IHQ9TWF0aC5zaW4oZSksaT1NYXRoLmNvcyhlKTtyZXR1cm4gWygyKmkrMSkvMywoLU1hdGguc3FydCgzKSp0LWkrMSkvMywoTWF0aC5zcXJ0KDMpKnQtaSsxKS8zXX1jb25zdCBlbz1lLmNyZWF0ZSgpLHRvPSh0LGksbyxyLG4scyxhLGwsYyxoLHUsXyxkLHAsbSxmKT0+e2NvbnN0IGc9bi50cmFuc2Zvcm0sdj17dV9pc19zaXplX3pvb21fY29uc3RhbnQ6KyhcImNvbnN0YW50XCI9PT10fHxcInNvdXJjZVwiPT09dCksdV9pc19zaXplX2ZlYXR1cmVfY29uc3RhbnQ6KyhcImNvbnN0YW50XCI9PT10fHxcImNhbWVyYVwiPT09dCksdV9zaXplX3Q6aT9pLnVTaXplVDowLHVfc2l6ZTppP2kudVNpemU6MCx1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2U6Zy5jYW1lcmFUb0NlbnRlckRpc3RhbmNlLHVfcm90YXRlX3N5bWJvbDorbyx1X2FzcGVjdF9yYXRpbzpnLndpZHRoL2cuaGVpZ2h0LHVfZmFkZV9jaGFuZ2U6bi5vcHRpb25zLmZhZGVEdXJhdGlvbj9uLnN5bWJvbEZhZGVDaGFuZ2U6MSx1X21hdHJpeDpzLHVfbGFiZWxfcGxhbmVfbWF0cml4OmEsdV9jb29yZF9tYXRyaXg6bCx1X2lzX3RleHQ6K2MsdV9waXRjaF93aXRoX21hcDorcix1X3RleHNpemU6aCx1X3RleHR1cmU6MCx1X3RpbGVfaWQ6WzAsMCwwXSx1X3pvb21fdHJhbnNpdGlvbjowLHVfaW52X3JvdF9tYXRyaXg6ZW8sdV9tZXJjX2NlbnRlcjpbMCwwXSx1X2NhbWVyYV9mb3J3YXJkOlswLDAsMF0sdV9lY2VmX29yaWdpbjpbMCwwLDBdLHVfdGlsZV9tYXRyaXg6ZW8sdV91cF92ZWN0b3I6WzAsLTEsMF19O3JldHVybiBcImdsb2JlXCI9PT1mLm5hbWUmJih2LnVfdGlsZV9pZD1bdS5jYW5vbmljYWwueCx1LmNhbm9uaWNhbC55LDE8PHUuY2Fub25pY2FsLnpdLHYudV96b29tX3RyYW5zaXRpb249Xyx2LnVfaW52X3JvdF9tYXRyaXg9cCx2LnVfbWVyY19jZW50ZXI9ZCx2LnVfY2FtZXJhX2ZvcndhcmQ9Zy5fY2FtZXJhLmZvcndhcmQoKSx2LnVfZWNlZl9vcmlnaW49ZS5nbG9iZUVDRUZPcmlnaW4oZy5nbG9iZU1hdHJpeCx1LnRvVW53cmFwcGVkKCkpLHYudV90aWxlX21hdHJpeD1GbG9hdDMyQXJyYXkuZnJvbShnLmdsb2JlTWF0cml4KSx2LnVfdXBfdmVjdG9yPW0pLHZ9LGlvPSh0LGksbyxyLG4scyxhLGwsYyxoLHUsXyxkLHAsbSxmLGcpPT5lLmV4dGVuZCh0byh0LGksbyxyLG4scyxhLGwsYyxoLF8sZCxwLG0sZixnKSx7dV9nYW1tYV9zY2FsZTpyP24udHJhbnNmb3JtLmNhbWVyYVRvQ2VudGVyRGlzdGFuY2UqTWF0aC5jb3Mobi50ZXJyYWluPzA6bi50cmFuc2Zvcm0uX3BpdGNoKToxLHVfZGV2aWNlX3BpeGVsX3JhdGlvOmUuZXhwb3J0ZWQuZGV2aWNlUGl4ZWxSYXRpbyx1X2lzX2hhbG86K3V9KSxvbz0odCxpLG8scixuLHMsYSxsLGMsaCx1LF8sZCxwLG0sZik9PmUuZXh0ZW5kKGlvKHQsaSxvLHIsbixzLGEsbCwhMCxjLCEwLHUsXyxkLHAsbSxmKSx7dV90ZXhzaXplX2ljb246aCx1X3RleHR1cmVfaWNvbjoxfSkscm89KGUsdCxpKT0+KHt1X21hdHJpeDplLHVfb3BhY2l0eTp0LHVfY29sb3I6aX0pLG5vPSh0LGksbyxyLG4pPT5lLmV4dGVuZChmdW5jdGlvbihlLHQsaSl7Y29uc3Qgbz10LmltYWdlTWFuYWdlci5nZXRQYXR0ZXJuKGUudG9TdHJpbmcoKSkse3dpZHRoOnIsaGVpZ2h0Om59PXQuaW1hZ2VNYW5hZ2VyLmdldFBpeGVsU2l6ZSgpLHM9TWF0aC5wb3coMixpLnRpbGVJRC5vdmVyc2NhbGVkWiksYT1pLnRpbGVTaXplKk1hdGgucG93KDIsdC50cmFuc2Zvcm0udGlsZVpvb20pL3MsbD1hKihpLnRpbGVJRC5jYW5vbmljYWwueCtpLnRpbGVJRC53cmFwKnMpLGM9YSppLnRpbGVJRC5jYW5vbmljYWwueTtyZXR1cm4ge3VfaW1hZ2U6MCx1X3BhdHRlcm5fdGw6by50bCx1X3BhdHRlcm5fYnI6by5icix1X3RleHNpemU6W3Isbl0sdV9wYXR0ZXJuX3NpemU6by5kaXNwbGF5U2l6ZSx1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzOjEvRChpLDEsdC50cmFuc2Zvcm0udGlsZVpvb20pLHVfcGl4ZWxfY29vcmRfdXBwZXI6W2w+PjE2LGM+PjE2XSx1X3BpeGVsX2Nvb3JkX2xvd2VyOls2NTUzNSZsLDY1NTM1JmNdfX0ocixvLG4pLHt1X21hdHJpeDp0LHVfb3BhY2l0eTppfSksc289e2ZpbGxFeHRydXNpb246dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9saWdodHBvczpuZXcgZS5Vbmlmb3JtM2YodCksdV9saWdodGludGVuc2l0eTpuZXcgZS5Vbmlmb3JtMWYodCksdV9saWdodGNvbG9yOm5ldyBlLlVuaWZvcm0zZih0KSx1X3ZlcnRpY2FsX2dyYWRpZW50Om5ldyBlLlVuaWZvcm0xZih0KSx1X29wYWNpdHk6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZWRnZV9yYWRpdXM6bmV3IGUuVW5pZm9ybTFmKHQpLHVfYW86bmV3IGUuVW5pZm9ybTJmKHQpLHVfdGlsZV9pZDpuZXcgZS5Vbmlmb3JtM2YodCksdV96b29tX3RyYW5zaXRpb246bmV3IGUuVW5pZm9ybTFmKHQpLHVfaW52X3JvdF9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfbWVyY19jZW50ZXI6bmV3IGUuVW5pZm9ybTJmKHQpLHVfdXBfZGlyOm5ldyBlLlVuaWZvcm0zZih0KSx1X2hlaWdodF9saWZ0Om5ldyBlLlVuaWZvcm0xZih0KX0pLGZpbGxFeHRydXNpb25QYXR0ZXJuOnQ9Pih7dV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfbGlnaHRwb3M6bmV3IGUuVW5pZm9ybTNmKHQpLHVfbGlnaHRpbnRlbnNpdHk6bmV3IGUuVW5pZm9ybTFmKHQpLHVfbGlnaHRjb2xvcjpuZXcgZS5Vbmlmb3JtM2YodCksdV92ZXJ0aWNhbF9ncmFkaWVudDpuZXcgZS5Vbmlmb3JtMWYodCksdV9oZWlnaHRfZmFjdG9yOm5ldyBlLlVuaWZvcm0xZih0KSx1X2VkZ2VfcmFkaXVzOm5ldyBlLlVuaWZvcm0xZih0KSx1X2FvOm5ldyBlLlVuaWZvcm0yZih0KSx1X3RpbGVfaWQ6bmV3IGUuVW5pZm9ybTNmKHQpLHVfem9vbV90cmFuc2l0aW9uOm5ldyBlLlVuaWZvcm0xZih0KSx1X2ludl9yb3RfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X21lcmNfY2VudGVyOm5ldyBlLlVuaWZvcm0yZih0KSx1X3VwX2RpcjpuZXcgZS5Vbmlmb3JtM2YodCksdV9oZWlnaHRfbGlmdDpuZXcgZS5Vbmlmb3JtMWYodCksdV9pbWFnZTpuZXcgZS5Vbmlmb3JtMWkodCksdV90ZXhzaXplOm5ldyBlLlVuaWZvcm0yZih0KSx1X3BpeGVsX2Nvb3JkX3VwcGVyOm5ldyBlLlVuaWZvcm0yZih0KSx1X3BpeGVsX2Nvb3JkX2xvd2VyOm5ldyBlLlVuaWZvcm0yZih0KSx1X3RpbGVfdW5pdHNfdG9fcGl4ZWxzOm5ldyBlLlVuaWZvcm0xZih0KSx1X29wYWNpdHk6bmV3IGUuVW5pZm9ybTFmKHQpfSksZmlsbDp0PT4oe3VfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KX0pLGZpbGxQYXR0ZXJuOnQ9Pih7dV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfaW1hZ2U6bmV3IGUuVW5pZm9ybTFpKHQpLHVfdGV4c2l6ZTpuZXcgZS5Vbmlmb3JtMmYodCksdV9waXhlbF9jb29yZF91cHBlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV9waXhlbF9jb29yZF9sb3dlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV90aWxlX3VuaXRzX3RvX3BpeGVsczpuZXcgZS5Vbmlmb3JtMWYodCl9KSxmaWxsT3V0bGluZTp0PT4oe3VfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X3dvcmxkOm5ldyBlLlVuaWZvcm0yZih0KX0pLGZpbGxPdXRsaW5lUGF0dGVybjp0PT4oe3VfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X3dvcmxkOm5ldyBlLlVuaWZvcm0yZih0KSx1X2ltYWdlOm5ldyBlLlVuaWZvcm0xaSh0KSx1X3RleHNpemU6bmV3IGUuVW5pZm9ybTJmKHQpLHVfcGl4ZWxfY29vcmRfdXBwZXI6bmV3IGUuVW5pZm9ybTJmKHQpLHVfcGl4ZWxfY29vcmRfbG93ZXI6bmV3IGUuVW5pZm9ybTJmKHQpLHVfdGlsZV91bml0c190b19waXhlbHM6bmV3IGUuVW5pZm9ybTFmKHQpfSksY2lyY2xlOnQ9Pih7dV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlOm5ldyBlLlVuaWZvcm0xZih0KSx1X2V4dHJ1ZGVfc2NhbGU6bmV3IGUuVW5pZm9ybU1hdHJpeDJmKHQpLHVfZGV2aWNlX3BpeGVsX3JhdGlvOm5ldyBlLlVuaWZvcm0xZih0KSx1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9pbnZfcm90X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9tZXJjX2NlbnRlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV90aWxlX2lkOm5ldyBlLlVuaWZvcm0zZih0KSx1X3pvb21fdHJhbnNpdGlvbjpuZXcgZS5Vbmlmb3JtMWYodCksdV91cF9kaXI6bmV3IGUuVW5pZm9ybTNmKHQpfSksY29sbGlzaW9uQm94OnQ9Pih7dV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZTpuZXcgZS5Vbmlmb3JtMWYodCksdV9leHRydWRlX3NjYWxlOm5ldyBlLlVuaWZvcm0yZih0KX0pLGNvbGxpc2lvbkNpcmNsZTp0PT4oe3VfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X2ludl9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfY2FtZXJhX3RvX2NlbnRlcl9kaXN0YW5jZTpuZXcgZS5Vbmlmb3JtMWYodCksdV92aWV3cG9ydF9zaXplOm5ldyBlLlVuaWZvcm0yZih0KX0pLGRlYnVnOnQ9Pih7dV9jb2xvcjpuZXcgZS5Vbmlmb3JtQ29sb3IodCksdV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfb3ZlcmxheTpuZXcgZS5Vbmlmb3JtMWkodCksdV9vdmVybGF5X3NjYWxlOm5ldyBlLlVuaWZvcm0xZih0KX0pLGNsaXBwaW5nTWFzazp0PT4oe3VfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KX0pLGhlYXRtYXA6dD0+KHt1X2V4dHJ1ZGVfc2NhbGU6bmV3IGUuVW5pZm9ybTFmKHQpLHVfaW50ZW5zaXR5Om5ldyBlLlVuaWZvcm0xZih0KSx1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9pbnZfcm90X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9tZXJjX2NlbnRlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV90aWxlX2lkOm5ldyBlLlVuaWZvcm0zZih0KSx1X3pvb21fdHJhbnNpdGlvbjpuZXcgZS5Vbmlmb3JtMWYodCksdV91cF9kaXI6bmV3IGUuVW5pZm9ybTNmKHQpfSksaGVhdG1hcFRleHR1cmU6dD0+KHt1X2ltYWdlOm5ldyBlLlVuaWZvcm0xaSh0KSx1X2NvbG9yX3JhbXA6bmV3IGUuVW5pZm9ybTFpKHQpLHVfb3BhY2l0eTpuZXcgZS5Vbmlmb3JtMWYodCl9KSxoaWxsc2hhZGU6dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9pbWFnZTpuZXcgZS5Vbmlmb3JtMWkodCksdV9sYXRyYW5nZTpuZXcgZS5Vbmlmb3JtMmYodCksdV9saWdodDpuZXcgZS5Vbmlmb3JtMmYodCksdV9zaGFkb3c6bmV3IGUuVW5pZm9ybUNvbG9yKHQpLHVfaGlnaGxpZ2h0Om5ldyBlLlVuaWZvcm1Db2xvcih0KSx1X2FjY2VudDpuZXcgZS5Vbmlmb3JtQ29sb3IodCl9KSxoaWxsc2hhZGVQcmVwYXJlOnQ9Pih7dV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfaW1hZ2U6bmV3IGUuVW5pZm9ybTFpKHQpLHVfZGltZW5zaW9uOm5ldyBlLlVuaWZvcm0yZih0KSx1X3pvb206bmV3IGUuVW5pZm9ybTFmKHQpLHVfdW5wYWNrOm5ldyBlLlVuaWZvcm00Zih0KX0pLGxpbmU6dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9waXhlbHNfdG9fdGlsZV91bml0czpuZXcgZS5Vbmlmb3JtTWF0cml4MmYodCksdV9kZXZpY2VfcGl4ZWxfcmF0aW86bmV3IGUuVW5pZm9ybTFmKHQpLHVfdW5pdHNfdG9fcGl4ZWxzOm5ldyBlLlVuaWZvcm0yZih0KSx1X2Rhc2hfaW1hZ2U6bmV3IGUuVW5pZm9ybTFpKHQpLHVfZ3JhZGllbnRfaW1hZ2U6bmV3IGUuVW5pZm9ybTFpKHQpLHVfaW1hZ2VfaGVpZ2h0Om5ldyBlLlVuaWZvcm0xZih0KSx1X3RleHNpemU6bmV3IGUuVW5pZm9ybTJmKHQpLHVfdGlsZV91bml0c190b19waXhlbHM6bmV3IGUuVW5pZm9ybTFmKHQpLHVfYWxwaGFfZGlzY2FyZF90aHJlc2hvbGQ6bmV3IGUuVW5pZm9ybTFmKHQpLHVfdHJpbV9vZmZzZXQ6bmV3IGUuVW5pZm9ybTJmKHQpfSksbGluZVBhdHRlcm46dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV90ZXhzaXplOm5ldyBlLlVuaWZvcm0yZih0KSx1X3BpeGVsc190b190aWxlX3VuaXRzOm5ldyBlLlVuaWZvcm1NYXRyaXgyZih0KSx1X2RldmljZV9waXhlbF9yYXRpbzpuZXcgZS5Vbmlmb3JtMWYodCksdV9pbWFnZTpuZXcgZS5Vbmlmb3JtMWkodCksdV91bml0c190b19waXhlbHM6bmV3IGUuVW5pZm9ybTJmKHQpLHVfdGlsZV91bml0c190b19waXhlbHM6bmV3IGUuVW5pZm9ybTFmKHQpLHVfYWxwaGFfZGlzY2FyZF90aHJlc2hvbGQ6bmV3IGUuVW5pZm9ybTFmKHQpfSkscmFzdGVyOnQ9Pih7dV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfdGxfcGFyZW50Om5ldyBlLlVuaWZvcm0yZih0KSx1X3NjYWxlX3BhcmVudDpuZXcgZS5Vbmlmb3JtMWYodCksdV9mYWRlX3Q6bmV3IGUuVW5pZm9ybTFmKHQpLHVfb3BhY2l0eTpuZXcgZS5Vbmlmb3JtMWYodCksdV9pbWFnZTA6bmV3IGUuVW5pZm9ybTFpKHQpLHVfaW1hZ2UxOm5ldyBlLlVuaWZvcm0xaSh0KSx1X2JyaWdodG5lc3NfbG93Om5ldyBlLlVuaWZvcm0xZih0KSx1X2JyaWdodG5lc3NfaGlnaDpuZXcgZS5Vbmlmb3JtMWYodCksdV9zYXR1cmF0aW9uX2ZhY3RvcjpuZXcgZS5Vbmlmb3JtMWYodCksdV9jb250cmFzdF9mYWN0b3I6bmV3IGUuVW5pZm9ybTFmKHQpLHVfc3Bpbl93ZWlnaHRzOm5ldyBlLlVuaWZvcm0zZih0KSx1X3BlcnNwZWN0aXZlX3RyYW5zZm9ybTpuZXcgZS5Vbmlmb3JtMmYodCl9KSxzeW1ib2xJY29uOnQ9Pih7dV9pc19zaXplX3pvb21fY29uc3RhbnQ6bmV3IGUuVW5pZm9ybTFpKHQpLHVfaXNfc2l6ZV9mZWF0dXJlX2NvbnN0YW50Om5ldyBlLlVuaWZvcm0xaSh0KSx1X3NpemVfdDpuZXcgZS5Vbmlmb3JtMWYodCksdV9zaXplOm5ldyBlLlVuaWZvcm0xZih0KSx1X2NhbWVyYV90b19jZW50ZXJfZGlzdGFuY2U6bmV3IGUuVW5pZm9ybTFmKHQpLHVfcm90YXRlX3N5bWJvbDpuZXcgZS5Vbmlmb3JtMWkodCksdV9hc3BlY3RfcmF0aW86bmV3IGUuVW5pZm9ybTFmKHQpLHVfZmFkZV9jaGFuZ2U6bmV3IGUuVW5pZm9ybTFmKHQpLHVfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X2xhYmVsX3BsYW5lX21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9jb29yZF9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfaXNfdGV4dDpuZXcgZS5Vbmlmb3JtMWkodCksdV9waXRjaF93aXRoX21hcDpuZXcgZS5Vbmlmb3JtMWkodCksdV90ZXhzaXplOm5ldyBlLlVuaWZvcm0yZih0KSx1X3RpbGVfaWQ6bmV3IGUuVW5pZm9ybTNmKHQpLHVfem9vbV90cmFuc2l0aW9uOm5ldyBlLlVuaWZvcm0xZih0KSx1X2ludl9yb3RfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X21lcmNfY2VudGVyOm5ldyBlLlVuaWZvcm0yZih0KSx1X2NhbWVyYV9mb3J3YXJkOm5ldyBlLlVuaWZvcm0zZih0KSx1X3RpbGVfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X3VwX3ZlY3RvcjpuZXcgZS5Vbmlmb3JtM2YodCksdV9lY2VmX29yaWdpbjpuZXcgZS5Vbmlmb3JtM2YodCksdV90ZXh0dXJlOm5ldyBlLlVuaWZvcm0xaSh0KX0pLHN5bWJvbFNERjp0PT4oe3VfaXNfc2l6ZV96b29tX2NvbnN0YW50Om5ldyBlLlVuaWZvcm0xaSh0KSx1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudDpuZXcgZS5Vbmlmb3JtMWkodCksdV9zaXplX3Q6bmV3IGUuVW5pZm9ybTFmKHQpLHVfc2l6ZTpuZXcgZS5Vbmlmb3JtMWYodCksdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlOm5ldyBlLlVuaWZvcm0xZih0KSx1X3JvdGF0ZV9zeW1ib2w6bmV3IGUuVW5pZm9ybTFpKHQpLHVfYXNwZWN0X3JhdGlvOm5ldyBlLlVuaWZvcm0xZih0KSx1X2ZhZGVfY2hhbmdlOm5ldyBlLlVuaWZvcm0xZih0KSx1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9sYWJlbF9wbGFuZV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfY29vcmRfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X2lzX3RleHQ6bmV3IGUuVW5pZm9ybTFpKHQpLHVfcGl0Y2hfd2l0aF9tYXA6bmV3IGUuVW5pZm9ybTFpKHQpLHVfdGV4c2l6ZTpuZXcgZS5Vbmlmb3JtMmYodCksdV90ZXh0dXJlOm5ldyBlLlVuaWZvcm0xaSh0KSx1X2dhbW1hX3NjYWxlOm5ldyBlLlVuaWZvcm0xZih0KSx1X2RldmljZV9waXhlbF9yYXRpbzpuZXcgZS5Vbmlmb3JtMWYodCksdV90aWxlX2lkOm5ldyBlLlVuaWZvcm0zZih0KSx1X3pvb21fdHJhbnNpdGlvbjpuZXcgZS5Vbmlmb3JtMWYodCksdV9pbnZfcm90X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9tZXJjX2NlbnRlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV9jYW1lcmFfZm9yd2FyZDpuZXcgZS5Vbmlmb3JtM2YodCksdV90aWxlX21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV91cF92ZWN0b3I6bmV3IGUuVW5pZm9ybTNmKHQpLHVfZWNlZl9vcmlnaW46bmV3IGUuVW5pZm9ybTNmKHQpLHVfaXNfaGFsbzpuZXcgZS5Vbmlmb3JtMWkodCl9KSxzeW1ib2xUZXh0QW5kSWNvbjp0PT4oe3VfaXNfc2l6ZV96b29tX2NvbnN0YW50Om5ldyBlLlVuaWZvcm0xaSh0KSx1X2lzX3NpemVfZmVhdHVyZV9jb25zdGFudDpuZXcgZS5Vbmlmb3JtMWkodCksdV9zaXplX3Q6bmV3IGUuVW5pZm9ybTFmKHQpLHVfc2l6ZTpuZXcgZS5Vbmlmb3JtMWYodCksdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlOm5ldyBlLlVuaWZvcm0xZih0KSx1X3JvdGF0ZV9zeW1ib2w6bmV3IGUuVW5pZm9ybTFpKHQpLHVfYXNwZWN0X3JhdGlvOm5ldyBlLlVuaWZvcm0xZih0KSx1X2ZhZGVfY2hhbmdlOm5ldyBlLlVuaWZvcm0xZih0KSx1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9sYWJlbF9wbGFuZV9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDRmKHQpLHVfY29vcmRfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X2lzX3RleHQ6bmV3IGUuVW5pZm9ybTFpKHQpLHVfcGl0Y2hfd2l0aF9tYXA6bmV3IGUuVW5pZm9ybTFpKHQpLHVfdGV4c2l6ZTpuZXcgZS5Vbmlmb3JtMmYodCksdV90ZXhzaXplX2ljb246bmV3IGUuVW5pZm9ybTJmKHQpLHVfdGV4dHVyZTpuZXcgZS5Vbmlmb3JtMWkodCksdV90ZXh0dXJlX2ljb246bmV3IGUuVW5pZm9ybTFpKHQpLHVfZ2FtbWFfc2NhbGU6bmV3IGUuVW5pZm9ybTFmKHQpLHVfZGV2aWNlX3BpeGVsX3JhdGlvOm5ldyBlLlVuaWZvcm0xZih0KSx1X2lzX2hhbG86bmV3IGUuVW5pZm9ybTFpKHQpfSksYmFja2dyb3VuZDp0PT4oe3VfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X29wYWNpdHk6bmV3IGUuVW5pZm9ybTFmKHQpLHVfY29sb3I6bmV3IGUuVW5pZm9ybUNvbG9yKHQpfSksYmFja2dyb3VuZFBhdHRlcm46dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9vcGFjaXR5Om5ldyBlLlVuaWZvcm0xZih0KSx1X2ltYWdlOm5ldyBlLlVuaWZvcm0xaSh0KSx1X3BhdHRlcm5fdGw6bmV3IGUuVW5pZm9ybTJmKHQpLHVfcGF0dGVybl9icjpuZXcgZS5Vbmlmb3JtMmYodCksdV90ZXhzaXplOm5ldyBlLlVuaWZvcm0yZih0KSx1X3BhdHRlcm5fc2l6ZTpuZXcgZS5Vbmlmb3JtMmYodCksdV9waXhlbF9jb29yZF91cHBlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV9waXhlbF9jb29yZF9sb3dlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV90aWxlX3VuaXRzX3RvX3BpeGVsczpuZXcgZS5Vbmlmb3JtMWYodCl9KSx0ZXJyYWluUmFzdGVyOmdpLHRlcnJhaW5EZXB0aDpnaSxza3lib3g6dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9zdW5fZGlyZWN0aW9uOm5ldyBlLlVuaWZvcm0zZih0KSx1X2N1YmVtYXA6bmV3IGUuVW5pZm9ybTFpKHQpLHVfb3BhY2l0eTpuZXcgZS5Vbmlmb3JtMWYodCksdV90ZW1wb3JhbF9vZmZzZXQ6bmV3IGUuVW5pZm9ybTFmKHQpfSksc2t5Ym94R3JhZGllbnQ6dD0+KHt1X21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9jb2xvcl9yYW1wOm5ldyBlLlVuaWZvcm0xaSh0KSx1X2NlbnRlcl9kaXJlY3Rpb246bmV3IGUuVW5pZm9ybTNmKHQpLHVfcmFkaXVzOm5ldyBlLlVuaWZvcm0xZih0KSx1X29wYWNpdHk6bmV3IGUuVW5pZm9ybTFmKHQpLHVfdGVtcG9yYWxfb2Zmc2V0Om5ldyBlLlVuaWZvcm0xZih0KX0pLHNreWJveENhcHR1cmU6dD0+KHt1X21hdHJpeF8zZjpuZXcgZS5Vbmlmb3JtTWF0cml4M2YodCksdV9zdW5fZGlyZWN0aW9uOm5ldyBlLlVuaWZvcm0zZih0KSx1X3N1bl9pbnRlbnNpdHk6bmV3IGUuVW5pZm9ybTFmKHQpLHVfY29sb3JfdGludF9yOm5ldyBlLlVuaWZvcm00Zih0KSx1X2NvbG9yX3RpbnRfbTpuZXcgZS5Vbmlmb3JtNGYodCksdV9sdW1pbmFuY2U6bmV3IGUuVW5pZm9ybTFmKHQpfSksZ2xvYmVSYXN0ZXI6dD0+KHt1X3Byb2pfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X2dsb2JlX21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCksdV9ub3JtYWxpemVfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X21lcmNfbWF0cml4Om5ldyBlLlVuaWZvcm1NYXRyaXg0Zih0KSx1X3pvb21fdHJhbnNpdGlvbjpuZXcgZS5Vbmlmb3JtMWYodCksdV9tZXJjX2NlbnRlcjpuZXcgZS5Vbmlmb3JtMmYodCksdV9pbWFnZTA6bmV3IGUuVW5pZm9ybTFpKHQpLHVfZ3JpZF9tYXRyaXg6bmV3IGUuVW5pZm9ybU1hdHJpeDNmKHQpLHVfc2tpcnRfaGVpZ2h0Om5ldyBlLlVuaWZvcm0xZih0KSx1X2ZydXN0dW1fdGw6bmV3IGUuVW5pZm9ybTNmKHQpLHVfZnJ1c3R1bV90cjpuZXcgZS5Vbmlmb3JtM2YodCksdV9mcnVzdHVtX2JyOm5ldyBlLlVuaWZvcm0zZih0KSx1X2ZydXN0dW1fYmw6bmV3IGUuVW5pZm9ybTNmKHQpLHVfZ2xvYmVfcG9zOm5ldyBlLlVuaWZvcm0zZih0KSx1X2dsb2JlX3JhZGl1czpuZXcgZS5Vbmlmb3JtMWYodCksdV92aWV3cG9ydDpuZXcgZS5Vbmlmb3JtMmYodCl9KSxnbG9iZUF0bW9zcGhlcmU6dD0+KHt1X2ZydXN0dW1fdGw6bmV3IGUuVW5pZm9ybTNmKHQpLHVfZnJ1c3R1bV90cjpuZXcgZS5Vbmlmb3JtM2YodCksdV9mcnVzdHVtX2JyOm5ldyBlLlVuaWZvcm0zZih0KSx1X2ZydXN0dW1fYmw6bmV3IGUuVW5pZm9ybTNmKHQpLHVfaG9yaXpvbjpuZXcgZS5Vbmlmb3JtMWYodCksdV90cmFuc2l0aW9uOm5ldyBlLlVuaWZvcm0xZih0KSx1X2ZhZGVvdXRfcmFuZ2U6bmV3IGUuVW5pZm9ybTFmKHQpLHVfY29sb3I6bmV3IGUuVW5pZm9ybTRmKHQpLHVfaGlnaF9jb2xvcjpuZXcgZS5Vbmlmb3JtNGYodCksdV9zcGFjZV9jb2xvcjpuZXcgZS5Vbmlmb3JtNGYodCksdV9zdGFyX2ludGVuc2l0eTpuZXcgZS5Vbmlmb3JtMWYodCksdV9zdGFyX2RlbnNpdHk6bmV3IGUuVW5pZm9ybTFmKHQpLHVfc3Rhcl9zaXplOm5ldyBlLlVuaWZvcm0xZih0KSx1X3RlbXBvcmFsX29mZnNldDpuZXcgZS5Vbmlmb3JtMWYodCksdV9ob3Jpem9uX2FuZ2xlOm5ldyBlLlVuaWZvcm0xZih0KSx1X3JvdGF0aW9uX21hdHJpeDpuZXcgZS5Vbmlmb3JtTWF0cml4NGYodCl9KX07bGV0IGFvO2Z1bmN0aW9uIGxvKHQsaSxvLHIsbixzLGEpe2NvbnN0IGw9dC5jb250ZXh0LGM9bC5nbCxoPXQudHJhbnNmb3JtLHU9dC51c2VQcm9ncmFtKFwiY29sbGlzaW9uQm94XCIpLF89W107bGV0IGQ9MCxwPTA7Zm9yKGxldCBtPTA7bTxyLmxlbmd0aDttKyspe2NvbnN0IGY9clttXSxnPWkuZ2V0VGlsZShmKSx2PWcuZ2V0QnVja2V0KG8pO2lmKCF2KWNvbnRpbnVlO2NvbnN0IHg9dnQoZix2LGgpO2xldCB5PXg7MD09PW5bMF0mJjA9PT1uWzFdfHwoeT10LnRyYW5zbGF0ZVBvc01hdHJpeCh4LGcsbixzKSk7Y29uc3QgYj1hP3YudGV4dENvbGxpc2lvbkJveDp2Lmljb25Db2xsaXNpb25Cb3gsdz12LmNvbGxpc2lvbkNpcmNsZUFycmF5O2lmKHcubGVuZ3RoPjApe2NvbnN0IHQ9ZS5jcmVhdGUoKSxpPXk7ZS5tdWwodCx2LnBsYWNlbWVudEludlByb2pNYXRyaXgsaC5nbENvb3JkTWF0cml4KSxlLm11bCh0LHQsdi5wbGFjZW1lbnRWaWV3cG9ydE1hdHJpeCksXy5wdXNoKHtjaXJjbGVBcnJheTp3LGNpcmNsZU9mZnNldDpwLHRyYW5zZm9ybTppLGludlRyYW5zZm9ybTp0LHByb2plY3Rpb246di5nZXRQcm9qZWN0aW9uKCl9KSxkKz13Lmxlbmd0aC80LHA9ZDt9YiYmKHQudGVycmFpbiYmdC50ZXJyYWluLnNldHVwRWxldmF0aW9uRHJhdyhnLHUpLHUuZHJhdyhsLGMuTElORVMsZS5EZXB0aE1vZGUuZGlzYWJsZWQsZS5TdGVuY2lsTW9kZS5kaXNhYmxlZCx0LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCxaaSh5LGgsZyx2LmdldFByb2plY3Rpb24oKSksby5pZCxiLmxheW91dFZlcnRleEJ1ZmZlcixiLmluZGV4QnVmZmVyLGIuc2VnbWVudHMsbnVsbCxoLnpvb20sbnVsbCxbYi5jb2xsaXNpb25WZXJ0ZXhCdWZmZXIsYi5jb2xsaXNpb25WZXJ0ZXhCdWZmZXJFeHRdKSk7fWlmKCFhfHwhXy5sZW5ndGgpcmV0dXJuO2NvbnN0IG09dC51c2VQcm9ncmFtKFwiY29sbGlzaW9uQ2lyY2xlXCIpLGY9bmV3IGUuU3RydWN0QXJyYXlMYXlvdXQyZjFmMmkxNjtmLnJlc2l6ZSg0KmQpLGYuX3RyaW0oKTtsZXQgZz0wO2Zvcihjb25zdCBlIG9mIF8pZm9yKGxldCB0PTA7dDxlLmNpcmNsZUFycmF5Lmxlbmd0aC80O3QrKyl7Y29uc3QgaT00KnQsbz1lLmNpcmNsZUFycmF5W2krMF0scj1lLmNpcmNsZUFycmF5W2krMV0sbj1lLmNpcmNsZUFycmF5W2krMl0scz1lLmNpcmNsZUFycmF5W2krM107Zi5lbXBsYWNlKGcrKyxvLHIsbixzLDApLGYuZW1wbGFjZShnKyssbyxyLG4scywxKSxmLmVtcGxhY2UoZysrLG8scixuLHMsMiksZi5lbXBsYWNlKGcrKyxvLHIsbixzLDMpO30oIWFvfHxhby5sZW5ndGg8MipkKSYmKGFvPWZ1bmN0aW9uKHQpe2NvbnN0IGk9Mip0LG89bmV3IGUuU3RydWN0QXJyYXlMYXlvdXQzdWk2O28ucmVzaXplKGkpLG8uX3RyaW0oKTtmb3IobGV0IGU9MDtlPGk7ZSsrKXtjb25zdCB0PTYqZTtvLnVpbnQxNlt0KzBdPTQqZSswLG8udWludDE2W3QrMV09NCplKzEsby51aW50MTZbdCsyXT00KmUrMixvLnVpbnQxNlt0KzNdPTQqZSsyLG8udWludDE2W3QrNF09NCplKzMsby51aW50MTZbdCs1XT00KmUrMDt9cmV0dXJuIG99KGQpKTtjb25zdCB2PWwuY3JlYXRlSW5kZXhCdWZmZXIoYW8sITApLHg9bC5jcmVhdGVWZXJ0ZXhCdWZmZXIoZixlLmNvbGxpc2lvbkNpcmNsZUxheW91dC5tZW1iZXJzLCEwKTtmb3IoY29uc3QgaSBvZiBfKXtjb25zdCByPXt1X21hdHJpeDppLnRyYW5zZm9ybSx1X2ludl9tYXRyaXg6aS5pbnZUcmFuc2Zvcm0sdV9jYW1lcmFfdG9fY2VudGVyX2Rpc3RhbmNlOih5PWgpLmdldENhbWVyYVRvQ2VudGVyRGlzdGFuY2UoaS5wcm9qZWN0aW9uKSx1X3ZpZXdwb3J0X3NpemU6W3kud2lkdGgseS5oZWlnaHRdfTttLmRyYXcobCxjLlRSSUFOR0xFUyxlLkRlcHRoTW9kZS5kaXNhYmxlZCxlLlN0ZW5jaWxNb2RlLmRpc2FibGVkLHQuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpLGUuQ3VsbEZhY2VNb2RlLmRpc2FibGVkLHIsby5pZCx4LHYsZS5TZWdtZW50VmVjdG9yLnNpbXBsZVNlZ21lbnQoMCwyKmkuY2lyY2xlT2Zmc2V0LGkuY2lyY2xlQXJyYXkubGVuZ3RoLGkuY2lyY2xlQXJyYXkubGVuZ3RoLzIpLG51bGwsaC56b29tKTt9dmFyIHk7eC5kZXN0cm95KCksdi5kZXN0cm95KCk7fWNvbnN0IGNvPWUuY3JlYXRlKCk7ZnVuY3Rpb24gaG8oe3dpZHRoOnQsaGVpZ2h0OmksYW5jaG9yOm8sdGV4dE9mZnNldDpyLHRleHRTY2FsZTpufSxzKXtjb25zdHtob3Jpem9udGFsQWxpZ246YSx2ZXJ0aWNhbEFsaWduOmx9PWUuZ2V0QW5jaG9yQWxpZ25tZW50KG8pLGM9LShhLS41KSp0LGg9LShsLS41KSppLHU9ZS5ldmFsdWF0ZVZhcmlhYmxlT2Zmc2V0KG8scik7cmV0dXJuIG5ldyBlLlBvaW50KChjL24rdVswXSkqcywoaC9uK3VbMV0pKnMpfWZ1bmN0aW9uIHVvKHQsaSxvLHIsbixzLGEsbCxjLGgsdSl7Y29uc3QgXz10LnRleHQucGxhY2VkU3ltYm9sQXJyYXksZD10LnRleHQuZHluYW1pY0xheW91dFZlcnRleEFycmF5LHA9dC5pY29uLmR5bmFtaWNMYXlvdXRWZXJ0ZXhBcnJheSxtPXt9LGY9dC5nZXRQcm9qZWN0aW9uKCksZz14dChsLGYscyksdj1zLmVsZXZhdGlvbix4PWYudXBWZWN0b3JTY2FsZShsLmNhbm9uaWNhbCxzLmNlbnRlci5sYXQscy53b3JsZFNpemUpLm1ldGVyc1RvVGlsZTtkLmNsZWFyKCk7Zm9yKGxldCBwPTA7cDxfLmxlbmd0aDtwKyspe2NvbnN0IHk9Xy5nZXQocCkse3RpbGVBbmNob3JYOmIsdGlsZUFuY2hvclk6dyxudW1HbHlwaHM6VH09eSxFPXkuaGlkZGVufHwheS5jcm9zc1RpbGVJRHx8dC5hbGxvd1ZlcnRpY2FsUGxhY2VtZW50JiYheS5wbGFjZWRPcmllbnRhdGlvbj9udWxsOnJbeS5jcm9zc1RpbGVJRF07aWYoRSl7bGV0IHI9MCxfPTAscD0wO2lmKHYpe2NvbnN0IGU9dj92LmdldEF0VGlsZU9mZnNldChsLGIsdyk6MCxbdCxpLG9dPWYudXBWZWN0b3IobC5jYW5vbmljYWwsYix3KTtyPWUqdCp4LF89ZSppKngscD1lKm8qeDt9bGV0W0MsTSxJLFBdPW90KHkucHJvamVjdGVkQW5jaG9yWCtyLHkucHJvamVjdGVkQW5jaG9yWStfLHkucHJvamVjdGVkQW5jaG9yWitwLG8/ZzphKTtjb25zdCBTPXJ0KHMuZ2V0Q2FtZXJhVG9DZW50ZXJEaXN0YW5jZShmKSxQKTtsZXQgRD1uLmV2YWx1YXRlU2l6ZUZvckZlYXR1cmUodC50ZXh0U2l6ZURhdGEsaCx5KSpTL2UuT05FX0VNO28mJihEKj10LnRpbGVQaXhlbFJhdGlvL2MpO2NvbnN0IEw9aG8oRSxEKTtvPygoe3g6Qyx5Ok0sejpJfT1mLnByb2plY3RUaWxlUG9pbnQoYitMLngsdytMLnksbC5jYW5vbmljYWwpKSxbQyxNLEldPW90KEMrcixNK18sSStwLGEpKTooaSYmTC5fcm90YXRlKC1zLmFuZ2xlKSxDKz1MLngsTSs9TC55LEk9MCk7Y29uc3QgQT10LmFsbG93VmVydGljYWxQbGFjZW1lbnQmJnkucGxhY2VkT3JpZW50YXRpb249PT1lLldyaXRpbmdNb2RlLnZlcnRpY2FsP01hdGguUEkvMjowO2ZvcihsZXQgdD0wO3Q8VDt0KyspZS5hZGREeW5hbWljQXR0cmlidXRlcyhkLEMsTSxJLEEpO3UmJnkuYXNzb2NpYXRlZEljb25JbmRleD49MCYmKG1beS5hc3NvY2lhdGVkSWNvbkluZGV4XT17eDpDLHk6TSx6OkksYW5nbGU6QX0pO31lbHNlIGR0KFQsZCk7fWlmKHUpe3AuY2xlYXIoKTtjb25zdCBpPXQuaWNvbi5wbGFjZWRTeW1ib2xBcnJheTtmb3IobGV0IHQ9MDt0PGkubGVuZ3RoO3QrKyl7Y29uc3Qgbz1pLmdldCh0KSx7bnVtR2x5cGhzOnJ9PW8sbj1tW3RdO2lmKG8uaGlkZGVufHwhbilkdChyLHApO2Vsc2Uge2NvbnN0e3g6dCx5OmksejpvLGFuZ2xlOnN9PW47Zm9yKGxldCBuPTA7bjxyO24rKyllLmFkZER5bmFtaWNBdHRyaWJ1dGVzKHAsdCxpLG8scyk7fX10Lmljb24uZHluYW1pY0xheW91dFZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKHApO310LnRleHQuZHluYW1pY0xheW91dFZlcnRleEJ1ZmZlci51cGRhdGVEYXRhKGQpO31mdW5jdGlvbiBfbyhlLHQsaSl7cmV0dXJuIGkuaWNvbnNJblRleHQmJnQ/XCJzeW1ib2xUZXh0QW5kSWNvblwiOmU/XCJzeW1ib2xTREZcIjpcInN5bWJvbEljb25cIn1mdW5jdGlvbiBwbyh0LGksbyxyLG4scyxhLGwsYyxoLHUsXyl7Y29uc3QgZD10LmNvbnRleHQscD1kLmdsLG09dC50cmFuc2Zvcm0sZj1cIm1hcFwiPT09bCxnPVwibWFwXCI9PT1jLHY9ZiYmXCJwb2ludFwiIT09by5sYXlvdXQuZ2V0KFwic3ltYm9sLXBsYWNlbWVudFwiKSx4PWYmJiFnJiYhdix5PXZvaWQgMCE9PW8ubGF5b3V0LmdldChcInN5bWJvbC1zb3J0LWtleVwiKS5jb25zdGFudE9yKDEpO2xldCBiPSExO2NvbnN0IHc9dC5kZXB0aE1vZGVGb3JTdWJsYXllcigwLGUuRGVwdGhNb2RlLlJlYWRPbmx5KSxUPVtlLm1lcmNhdG9yWGZyb21MbmcobS5jZW50ZXIubG5nKSxlLm1lcmNhdG9yWWZyb21MYXQobS5jZW50ZXIubGF0KV0sRT1vLmxheW91dC5nZXQoXCJ0ZXh0LXZhcmlhYmxlLWFuY2hvclwiKSxDPVwiZ2xvYmVcIj09PW0ucHJvamVjdGlvbi5uYW1lLE09W10sST1bMCwtMSwwXTtsZXQgUD1JOyFDJiYhbS5tZXJjYXRvckZyb21UcmFuc2l0aW9ufHxmfHwoUD1mdW5jdGlvbih0KXtjb25zdCBpPXQuX2NhbWVyYS5nZXRXb3JsZFRvQ2FtZXJhKHQud29ybGRTaXplLDEpLG89ZS5tdWx0aXBseShbXSxpLHQuZ2xvYmVNYXRyaXgpO2UuaW52ZXJ0KG8sbyk7Y29uc3Qgcj1bMCwwLDBdLG49WzAsMSwwLDBdO3JldHVybiBlLnRyYW5zZm9ybU1hdDQkMShuLG4sbyksclswXT1uWzBdLHJbMV09blsxXSxyWzJdPW5bMl0sZS5ub3JtYWxpemUocixyKSxyfShtKSk7Zm9yKGNvbnN0IGwgb2Ygcil7Y29uc3Qgcj1pLmdldFRpbGUobCksYz1yLmdldEJ1Y2tldChvKTtpZighYyljb250aW51ZTtpZihcIm1lcmNhdG9yXCI9PT1jLnByb2plY3Rpb24ubmFtZSYmQyljb250aW51ZTtjb25zdCB1PW4/Yy50ZXh0OmMuaWNvbjtpZighdXx8Yy5mdWxseUNsaXBwZWR8fCF1LnNlZ21lbnRzLmdldCgpLmxlbmd0aCljb250aW51ZTtjb25zdCBfPXUucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmdldChvLmlkKSxkPW58fGMuc2RmSWNvbnMsdz1uP2MudGV4dFNpemVEYXRhOmMuaWNvblNpemVEYXRhLFM9Z3x8MCE9PW0ucGl0Y2gsRD1lLmV2YWx1YXRlU2l6ZUZvclpvb20odyxtLnpvb20pO2xldCBMLEEseixSLE89WzAsMF0sQj1udWxsO2lmKG4pQT1yLmdseXBoQXRsYXNUZXh0dXJlLHo9cC5MSU5FQVIsTD1yLmdseXBoQXRsYXNUZXh0dXJlLnNpemUsYy5pY29uc0luVGV4dCYmKE89ci5pbWFnZUF0bGFzVGV4dHVyZS5zaXplLEI9ci5pbWFnZUF0bGFzVGV4dHVyZSxSPVN8fHQub3B0aW9ucy5yb3RhdGluZ3x8dC5vcHRpb25zLnpvb21pbmd8fFwiY29tcG9zaXRlXCI9PT13LmtpbmR8fFwiY2FtZXJhXCI9PT13LmtpbmQ/cC5MSU5FQVI6cC5ORUFSRVNUKTtlbHNlIHtjb25zdCBlPTEhPT1vLmxheW91dC5nZXQoXCJpY29uLXNpemVcIikuY29uc3RhbnRPcigwKXx8Yy5pY29uc05lZWRMaW5lYXI7QT1yLmltYWdlQXRsYXNUZXh0dXJlLHo9ZHx8dC5vcHRpb25zLnJvdGF0aW5nfHx0Lm9wdGlvbnMuem9vbWluZ3x8ZXx8Uz9wLkxJTkVBUjpwLk5FQVJFU1QsTD1yLmltYWdlQXRsYXNUZXh0dXJlLnNpemU7fWNvbnN0IGs9XCJnbG9iZVwiPT09Yy5wcm9qZWN0aW9uLm5hbWUsRj1rP1A6SSxVPWs/ZS5nbG9iZVRvTWVyY2F0b3JUcmFuc2l0aW9uKG0uem9vbSk6MCxOPXh0KGwsYy5nZXRQcm9qZWN0aW9uKCksbSksaj1tLmNhbGN1bGF0ZVBpeGVsc1RvVGlsZVVuaXRzTWF0cml4KHIpLEc9ZXQoTixyLnRpbGVJRC5jYW5vbmljYWwsZyxmLG0sYy5nZXRQcm9qZWN0aW9uKCksaiksWj10LnRlcnJhaW4mJmcmJnY/ZS5pbnZlcnQoZS5jcmVhdGUoKSxHKTpjbyxWPWl0KE4sci50aWxlSUQuY2Fub25pY2FsLGcsZixtLGMuZ2V0UHJvamVjdGlvbigpLGopLFc9RSYmYy5oYXNUZXh0RGF0YSgpLFg9XCJub25lXCIhPT1vLmxheW91dC5nZXQoXCJpY29uLXRleHQtZml0XCIpJiZXJiZjLmhhc0ljb25EYXRhKCk7aWYodil7Y29uc3QgZT1tLmVsZXZhdGlvbixpPWU/ZS5nZXRBdFRpbGVPZmZzZXRGdW5jKGwsbS5jZW50ZXIubGF0LG0ud29ybGRTaXplLGMuZ2V0UHJvamVjdGlvbigpKTpudWxsLG89dHQoTixyLnRpbGVJRC5jYW5vbmljYWwsZyxmLG0sYy5nZXRQcm9qZWN0aW9uKCksaik7c3QoYyxOLHQsbixvLFYsZyxoLGksbCk7fWNvbnN0IHE9dnx8biYmRXx8WCwkPXQudHJhbnNsYXRlUG9zTWF0cml4KE4scixzLGEpLEg9cT9jbzpHLFk9dC50cmFuc2xhdGVQb3NNYXRyaXgoVixyLHMsYSwhMCksSz1jLmdldFByb2plY3Rpb24oKS5jcmVhdGVJbnZlcnNpb25NYXRyaXgobSxsLmNhbm9uaWNhbCksSj1bXTt0LnRlcnJhaW5SZW5kZXJNb2RlRWxldmF0ZWQoKSYmZyYmSi5wdXNoKFwiUElUQ0hfV0lUSF9NQVBfVEVSUkFJTlwiKSxrJiZKLnB1c2goXCJQUk9KRUNUSU9OX0dMT0JFX1ZJRVdcIikscSYmSi5wdXNoKFwiUFJPSkVDVEVEX1BPU19PTl9WSUVXUE9SVFwiKTtjb25zdCBRPWQmJjAhPT1vLnBhaW50LmdldChuP1widGV4dC1oYWxvLXdpZHRoXCI6XCJpY29uLWhhbG8td2lkdGhcIikuY29uc3RhbnRPcigxKTtsZXQgZWU7ZWU9ZD9jLmljb25zSW5UZXh0P29vKHcua2luZCxELHgsZyx0LCQsSCxZLEwsTyxsLFUsVCxLLEYsYy5nZXRQcm9qZWN0aW9uKCkpOmlvKHcua2luZCxELHgsZyx0LCQsSCxZLG4sTCwhMCxsLFUsVCxLLEYsYy5nZXRQcm9qZWN0aW9uKCkpOnRvKHcua2luZCxELHgsZyx0LCQsSCxZLG4sTCxsLFUsVCxLLEYsYy5nZXRQcm9qZWN0aW9uKCkpO2NvbnN0IHRlPXtwcm9ncmFtOnQudXNlUHJvZ3JhbShfbyhkLG4sYyksXyxKKSxidWZmZXJzOnUsdW5pZm9ybVZhbHVlczplZSxhdGxhc1RleHR1cmU6QSxhdGxhc1RleHR1cmVJY29uOkIsYXRsYXNJbnRlcnBvbGF0aW9uOnosYXRsYXNJbnRlcnBvbGF0aW9uSWNvbjpSLGlzU0RGOmQsaGFzSGFsbzpRLHRpbGU6cixsYWJlbFBsYW5lTWF0cml4SW52Olp9O2lmKHkmJmMuY2FuT3ZlcmxhcCl7Yj0hMDtjb25zdCB0PXUuc2VnbWVudHMuZ2V0KCk7Zm9yKGNvbnN0IGkgb2YgdClNLnB1c2goe3NlZ21lbnRzOm5ldyBlLlNlZ21lbnRWZWN0b3IoW2ldKSxzb3J0S2V5Omkuc29ydEtleSxzdGF0ZTp0ZX0pO31lbHNlIE0ucHVzaCh7c2VnbWVudHM6dS5zZWdtZW50cyxzb3J0S2V5OjAsc3RhdGU6dGV9KTt9YiYmTS5zb3J0KCgoZSx0KT0+ZS5zb3J0S2V5LXQuc29ydEtleSkpO2Zvcihjb25zdCBlIG9mIE0pe2NvbnN0IGk9ZS5zdGF0ZTtpZih0LnRlcnJhaW4mJnQudGVycmFpbi5zZXR1cEVsZXZhdGlvbkRyYXcoaS50aWxlLGkucHJvZ3JhbSx7dXNlRGVwdGhGb3JPY2NsdXNpb246IUMsbGFiZWxQbGFuZU1hdHJpeEludjppLmxhYmVsUGxhbmVNYXRyaXhJbnZ9KSxkLmFjdGl2ZVRleHR1cmUuc2V0KHAuVEVYVFVSRTApLGkuYXRsYXNUZXh0dXJlLmJpbmQoaS5hdGxhc0ludGVycG9sYXRpb24scC5DTEFNUF9UT19FREdFKSxpLmF0bGFzVGV4dHVyZUljb24mJihkLmFjdGl2ZVRleHR1cmUuc2V0KHAuVEVYVFVSRTEpLGkuYXRsYXNUZXh0dXJlSWNvbiYmaS5hdGxhc1RleHR1cmVJY29uLmJpbmQoaS5hdGxhc0ludGVycG9sYXRpb25JY29uLHAuQ0xBTVBfVE9fRURHRSkpLGkuaXNTREYpe2NvbnN0IHI9aS51bmlmb3JtVmFsdWVzO2kuaGFzSGFsbyYmKHIudV9pc19oYWxvPTEsbW8oaS5idWZmZXJzLGUuc2VnbWVudHMsbyx0LGkucHJvZ3JhbSx3LHUsXyxyKSksci51X2lzX2hhbG89MDt9bW8oaS5idWZmZXJzLGUuc2VnbWVudHMsbyx0LGkucHJvZ3JhbSx3LHUsXyxpLnVuaWZvcm1WYWx1ZXMpO319ZnVuY3Rpb24gbW8odCxpLG8scixuLHMsYSxsLGMpe2NvbnN0IGg9ci5jb250ZXh0LHU9W3QuZHluYW1pY0xheW91dFZlcnRleEJ1ZmZlcix0Lm9wYWNpdHlWZXJ0ZXhCdWZmZXIsdC5nbG9iZUV4dFZlcnRleEJ1ZmZlcl07bi5kcmF3KGgsaC5nbC5UUklBTkdMRVMscyxhLGwsZS5DdWxsRmFjZU1vZGUuZGlzYWJsZWQsYyxvLmlkLHQubGF5b3V0VmVydGV4QnVmZmVyLHQuaW5kZXhCdWZmZXIsaSxvLnBhaW50LHIudHJhbnNmb3JtLnpvb20sdC5wcm9ncmFtQ29uZmlndXJhdGlvbnMuZ2V0KG8uaWQpLHUpO31mdW5jdGlvbiBmbyh0LGksbyxyLG4scyxhKXtjb25zdCBsPXQuY29udGV4dC5nbCxjPW8ucGFpbnQuZ2V0KFwiZmlsbC1wYXR0ZXJuXCIpLGg9YyYmYy5jb25zdGFudE9yKDEpO2xldCB1LF8sZCxwLG07YT8oXz1oJiYhby5nZXRQYWludFByb3BlcnR5KFwiZmlsbC1vdXRsaW5lLWNvbG9yXCIpP1wiZmlsbE91dGxpbmVQYXR0ZXJuXCI6XCJmaWxsT3V0bGluZVwiLHU9bC5MSU5FUyk6KF89aD9cImZpbGxQYXR0ZXJuXCI6XCJmaWxsXCIsdT1sLlRSSUFOR0xFUyk7Zm9yKGNvbnN0IGYgb2Ygcil7Y29uc3Qgcj1pLmdldFRpbGUoZik7aWYoaCYmIXIucGF0dGVybnNMb2FkZWQoKSljb250aW51ZTtjb25zdCBnPXIuZ2V0QnVja2V0KG8pO2lmKCFnKWNvbnRpbnVlO3QucHJlcGFyZURyYXdUaWxlKCk7Y29uc3Qgdj1nLnByb2dyYW1Db25maWd1cmF0aW9ucy5nZXQoby5pZCkseD10LnVzZVByb2dyYW0oXyx2KTtoJiYodC5jb250ZXh0LmFjdGl2ZVRleHR1cmUuc2V0KGwuVEVYVFVSRTApLHIuaW1hZ2VBdGxhc1RleHR1cmUuYmluZChsLkxJTkVBUixsLkNMQU1QX1RPX0VER0UpLHYudXBkYXRlUGFpbnRCdWZmZXJzKCkpO2NvbnN0IHk9Yy5jb25zdGFudE9yKG51bGwpO2lmKHkmJnIuaW1hZ2VBdGxhcyl7Y29uc3QgZT1yLmltYWdlQXRsYXMucGF0dGVyblBvc2l0aW9uc1t5LnRvU3RyaW5nKCldO2UmJnYuc2V0Q29uc3RhbnRQYXR0ZXJuUG9zaXRpb25zKGUpO31jb25zdCBiPXQudHJhbnNsYXRlUG9zTWF0cml4KGYucHJvak1hdHJpeCxyLG8ucGFpbnQuZ2V0KFwiZmlsbC10cmFuc2xhdGVcIiksby5wYWludC5nZXQoXCJmaWxsLXRyYW5zbGF0ZS1hbmNob3JcIikpO2lmKGEpe3A9Zy5pbmRleEJ1ZmZlcjIsbT1nLnNlZ21lbnRzMjtjb25zdCBlPXQudGVycmFpbiYmdC50ZXJyYWluLnJlbmRlcmluZ1RvVGV4dHVyZT90LnRlcnJhaW4uZHJhcGVCdWZmZXJTaXplOltsLmRyYXdpbmdCdWZmZXJXaWR0aCxsLmRyYXdpbmdCdWZmZXJIZWlnaHRdO2Q9XCJmaWxsT3V0bGluZVBhdHRlcm5cIj09PV8mJmg/VWkoYix0LHIsZSk6RmkoYixlKTt9ZWxzZSBwPWcuaW5kZXhCdWZmZXIsbT1nLnNlZ21lbnRzLGQ9aD9raShiLHQscik6QmkoYik7dC5wcmVwYXJlRHJhd1Byb2dyYW0odC5jb250ZXh0LHgsZi50b1Vud3JhcHBlZCgpKSx4LmRyYXcodC5jb250ZXh0LHUsbix0LnN0ZW5jaWxNb2RlRm9yQ2xpcHBpbmcoZikscyxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCxkLG8uaWQsZy5sYXlvdXRWZXJ0ZXhCdWZmZXIscCxtLG8ucGFpbnQsdC50cmFuc2Zvcm0uem9vbSx2KTt9fWZ1bmN0aW9uIGdvKHQsaSxvLHIsbixzLGEpe2NvbnN0IGw9dC5jb250ZXh0LGM9bC5nbCxoPXQudHJhbnNmb3JtLHU9by5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuXCIpLF89dS5jb25zdGFudE9yKDEpLGQ9by5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5XCIpLHA9W28ucGFpbnQuZ2V0KFwiZmlsbC1leHRydXNpb24tYW1iaWVudC1vY2NsdXNpb24taW50ZW5zaXR5XCIpLG8ucGFpbnQuZ2V0KFwiZmlsbC1leHRydXNpb24tYW1iaWVudC1vY2NsdXNpb24tcmFkaXVzXCIpXSxtPW8ubGF5b3V0LmdldChcImZpbGwtZXh0cnVzaW9uLWVkZ2UtcmFkaXVzXCIpLGY9bT4wJiYhby5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi1yb3VuZGVkLXJvb2ZcIiksZz1mPzA6bSx2PVwiZ2xvYmVcIj09PWgucHJvamVjdGlvbi5uYW1lP2UuZmlsbEV4dHJ1c2lvbkhlaWdodExpZnQoKTowLHg9XCJnbG9iZVwiPT09aC5wcm9qZWN0aW9uLm5hbWUseT14P2UuZ2xvYmVUb01lcmNhdG9yVHJhbnNpdGlvbihoLnpvb20pOjAsYj1bZS5tZXJjYXRvclhmcm9tTG5nKGguY2VudGVyLmxuZyksZS5tZXJjYXRvcllmcm9tTGF0KGguY2VudGVyLmxhdCldLHc9W107eCYmdy5wdXNoKFwiUFJPSkVDVElPTl9HTE9CRV9WSUVXXCIpLHBbMF0+MCYmdy5wdXNoKFwiRkFVWF9BT1wiKSxmJiZ3LnB1c2goXCJaRVJPX1JPT0ZfUkFESVVTXCIpO2Zvcihjb25zdCBtIG9mIHIpe2NvbnN0IHI9aS5nZXRUaWxlKG0pLGY9ci5nZXRCdWNrZXQobyk7aWYoIWZ8fGYucHJvamVjdGlvbi5uYW1lIT09aC5wcm9qZWN0aW9uLm5hbWUpY29udGludWU7Y29uc3QgVD1mLnByb2dyYW1Db25maWd1cmF0aW9ucy5nZXQoby5pZCksRT10LnVzZVByb2dyYW0oXz9cImZpbGxFeHRydXNpb25QYXR0ZXJuXCI6XCJmaWxsRXh0cnVzaW9uXCIsVCx3KTtpZih0LnRlcnJhaW4pe2NvbnN0IGU9dC50ZXJyYWluO2lmKHQuc3R5bGUudGVycmFpblNldEZvckRyYXBpbmdPbmx5KCkpZS5zZXR1cEVsZXZhdGlvbkRyYXcocixFLHt1c2VNZXRlclRvRGVtOiEwfSk7ZWxzZSB7aWYoIWYuZW5hYmxlVGVycmFpbiljb250aW51ZTtpZihlLnNldHVwRWxldmF0aW9uRHJhdyhyLEUse3VzZU1ldGVyVG9EZW06ITB9KSx2byhsLGksbSxmLG8sZSksIWYuY2VudHJvaWRWZXJ0ZXhCdWZmZXIpe2NvbnN0IGU9RS5hdHRyaWJ1dGVzLmFfY2VudHJvaWRfcG9zO3ZvaWQgMCE9PWUmJmMudmVydGV4QXR0cmliMmYoZSwwLDApO319fV8mJih0LmNvbnRleHQuYWN0aXZlVGV4dHVyZS5zZXQoYy5URVhUVVJFMCksci5pbWFnZUF0bGFzVGV4dHVyZS5iaW5kKGMuTElORUFSLGMuQ0xBTVBfVE9fRURHRSksVC51cGRhdGVQYWludEJ1ZmZlcnMoKSk7Y29uc3QgQz11LmNvbnN0YW50T3IobnVsbCk7aWYoQyYmci5pbWFnZUF0bGFzKXtjb25zdCBlPXIuaW1hZ2VBdGxhcy5wYXR0ZXJuUG9zaXRpb25zW0MudG9TdHJpbmcoKV07ZSYmVC5zZXRDb25zdGFudFBhdHRlcm5Qb3NpdGlvbnMoZSk7fWNvbnN0IE09dC50cmFuc2xhdGVQb3NNYXRyaXgobS5wcm9qTWF0cml4LHIsby5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi10cmFuc2xhdGVcIiksby5wYWludC5nZXQoXCJmaWxsLWV4dHJ1c2lvbi10cmFuc2xhdGUtYW5jaG9yXCIpKSxJPWgucHJvamVjdGlvbi5jcmVhdGVJbnZlcnNpb25NYXRyaXgoaCxtLmNhbm9uaWNhbCksUD1vLnBhaW50LmdldChcImZpbGwtZXh0cnVzaW9uLXZlcnRpY2FsLWdyYWRpZW50XCIpLFM9Xz9PaShNLHQsUCxkLHAsZyxtLHIsdix5LGIsSSk6UmkoTSx0LFAsZCxwLGcsbSx2LHksYixJKTt0LnByZXBhcmVEcmF3UHJvZ3JhbShsLEUsbS50b1Vud3JhcHBlZCgpKTtjb25zdCBEPVtdO3QudGVycmFpbiYmRC5wdXNoKGYuY2VudHJvaWRWZXJ0ZXhCdWZmZXIpLHgmJkQucHVzaChmLmxheW91dFZlcnRleEV4dEJ1ZmZlciksRS5kcmF3KGwsbC5nbC5UUklBTkdMRVMsbixzLGEsZS5DdWxsRmFjZU1vZGUuYmFja0NDVyxTLG8uaWQsZi5sYXlvdXRWZXJ0ZXhCdWZmZXIsZi5pbmRleEJ1ZmZlcixmLnNlZ21lbnRzLG8ucGFpbnQsdC50cmFuc2Zvcm0uem9vbSxULEQpO319ZnVuY3Rpb24gdm8odCxpLG8scixuLHMpe2NvbnN0IGE9W3Q9PntsZXQgaT10LmNhbm9uaWNhbC54LTEsbz10LndyYXA7cmV0dXJuIGk8MCYmKGk9KDE8PHQuY2Fub25pY2FsLnopLTEsby0tKSxuZXcgZS5PdmVyc2NhbGVkVGlsZUlEKHQub3ZlcnNjYWxlZFosbyx0LmNhbm9uaWNhbC56LGksdC5jYW5vbmljYWwueSl9LHQ9PntsZXQgaT10LmNhbm9uaWNhbC54KzEsbz10LndyYXA7cmV0dXJuIGk9PT0xPDx0LmNhbm9uaWNhbC56JiYoaT0wLG8rKyksbmV3IGUuT3ZlcnNjYWxlZFRpbGVJRCh0Lm92ZXJzY2FsZWRaLG8sdC5jYW5vbmljYWwueixpLHQuY2Fub25pY2FsLnkpfSx0PT5uZXcgZS5PdmVyc2NhbGVkVGlsZUlEKHQub3ZlcnNjYWxlZFosdC53cmFwLHQuY2Fub25pY2FsLnosdC5jYW5vbmljYWwueCwoMD09PXQuY2Fub25pY2FsLnk/MTw8dC5jYW5vbmljYWwuejp0LmNhbm9uaWNhbC55KS0xKSx0PT5uZXcgZS5PdmVyc2NhbGVkVGlsZUlEKHQub3ZlcnNjYWxlZFosdC53cmFwLHQuY2Fub25pY2FsLnosdC5jYW5vbmljYWwueCx0LmNhbm9uaWNhbC55PT09KDE8PHQuY2Fub25pY2FsLnopLTE/MDp0LmNhbm9uaWNhbC55KzEpXSxsPWU9Pntjb25zdCB0PWkuZ2V0U291cmNlKCkubWluem9vbSxvPWU9Pntjb25zdCB0PWkuZ2V0VGlsZUJ5SUQoZSk7aWYodCYmdC5oYXNEYXRhKCkpcmV0dXJuIHQuZ2V0QnVja2V0KG4pfSxyPVswLC0xLDFdO2Zvcihjb25zdCBpIG9mIHIpe2lmKGUub3ZlcnNjYWxlZForaTx0KWNvbnRpbnVlO2NvbnN0IHI9byhlLmNhbGN1bGF0ZVNjYWxlZEtleShlLm92ZXJzY2FsZWRaK2kpKTtpZihyKXJldHVybiByfX0sYz1bMCwwLDBdLGg9KHQsaSk9PihjWzBdPU1hdGgubWluKHQubWluLnksaS5taW4ueSksY1sxXT1NYXRoLm1heCh0Lm1heC55LGkubWF4LnkpLGNbMl09ZS5FWFRFTlQtaS5taW4ueD50Lm1heC54P2kubWluLngtZS5FWFRFTlQ6dC5tYXgueCxjKSx1PSh0LGkpPT4oY1swXT1NYXRoLm1pbih0Lm1pbi54LGkubWluLngpLGNbMV09TWF0aC5tYXgodC5tYXgueCxpLm1heC54KSxjWzJdPWUuRVhURU5ULWkubWluLnk+dC5tYXgueT9pLm1pbi55LWUuRVhURU5UOnQubWF4LnksYyksXz1bKGUsdCk9PmgoZSx0KSwoZSx0KT0+aCh0LGUpLChlLHQpPT51KGUsdCksKGUsdCk9PnUodCxlKV0sZD1uZXcgZS5Qb2ludCgwLDApO2xldCBwLG0sZjtjb25zdCBnPSh0LGkscixuLGEpPT57Y29uc3QgbD1bW24/cjp0LG4/dDpyLDBdLFtuP3I6aSxuP2k6ciwwXV0sYz1hPDA/ZS5FWFRFTlQrYTphLGg9W24/YzoodCtpKS8yLG4/KHQraSkvMjpjLDBdO3JldHVybiAwPT09ciYmYTwwfHwwIT09ciYmYT4wP3MuZ2V0Rm9yVGlsZVBvaW50cyhmLFtoXSwhMCxtKTpsLnB1c2goaCkscy5nZXRGb3JUaWxlUG9pbnRzKG8sbCwhMCxwKSxNYXRoLm1heChsWzBdWzJdLGxbMV1bMl0saFsyXSkvcy5leGFnZ2VyYXRpb24oKX07Zm9yKGxldCB0PTA7dDw0O3QrKyl7Y29uc3QgaT0odDwyPzE6NSktdCxuPXIuYm9yZGVyc1t0XTtpZigwPT09bi5sZW5ndGgpY29udGludWU7Y29uc3QgYz1mPWFbdF0obyksaD1sKGMpO2lmKCEoaCYmaCBpbnN0YW5jZW9mIGUuRmlsbEV4dHJ1c2lvbkJ1Y2tldCYmaC5lbmFibGVUZXJyYWluKSljb250aW51ZTtpZihyLmJvcmRlckRvbmVXaXRoTmVpZ2hib3JaW3RdPT09aC5jYW5vbmljYWwueiYmaC5ib3JkZXJEb25lV2l0aE5laWdoYm9yWltpXT09PXIuY2Fub25pY2FsLnopY29udGludWU7aWYobT1zLmZpbmRERU1UaWxlRm9yKGMpLCFtfHwhbS5kZW0pY29udGludWU7aWYoIXApe2NvbnN0IGU9cy5maW5kREVNVGlsZUZvcihvKTtpZighZXx8IWUuZGVtKXJldHVybjtwPWU7fWNvbnN0IHU9aC5ib3JkZXJzW2ldO2xldCB2PTA7Y29uc3QgeD1oLmJvcmRlckRvbmVXaXRoTmVpZ2hib3JaW2ldIT09ci5jYW5vbmljYWwuejtpZihyLmNhbm9uaWNhbC56PT09aC5jYW5vbmljYWwueil7Zm9yKGxldCBvPTA7bzxuLmxlbmd0aDtvKyspe2NvbnN0IHM9ci5mZWF0dXJlc09uQm9yZGVyW25bb11dLGE9cy5ib3JkZXJzW3RdO2xldCBsO2Zvcig7djx1Lmxlbmd0aCYmKGw9aC5mZWF0dXJlc09uQm9yZGVyW3Vbdl1dLCEobC5ib3JkZXJzW2ldWzFdPmFbMF0rMykpOyl4JiZoLmVuY29kZUNlbnRyb2lkKHZvaWQgMCxsLCExKSx2Kys7aWYobCYmdjx1Lmxlbmd0aCl7Y29uc3Qgbz12O2xldCBuPTA7Zm9yKDshKGwuYm9yZGVyc1tpXVswXT5hWzFdLTMpJiYobisrLCsrdiE9PXUubGVuZ3RoKTspbD1oLmZlYXR1cmVzT25Cb3JkZXJbdVt2XV07aWYobD1oLmZlYXR1cmVzT25Cb3JkZXJbdVtvXV0scy5pbnRlcnNlY3RzQ291bnQoKT4xfHxsLmludGVyc2VjdHNDb3VudCgpPjF8fDEhPT1uKXsxIT09biYmKHY9byksci5lbmNvZGVDZW50cm9pZCh2b2lkIDAscywhMSkseCYmaC5lbmNvZGVDZW50cm9pZCh2b2lkIDAsbCwhMSk7Y29udGludWV9Y29uc3QgYz1fW3RdKHMsbCkscD10JTI/ZS5FWFRFTlQtMTowO2QueD1nKGNbMF0sTWF0aC5taW4oZS5FWFRFTlQtMSxjWzFdKSxwLHQ8MixjWzJdKSxkLnk9MCxyLmVuY29kZUNlbnRyb2lkKGQscywhMSkseCYmaC5lbmNvZGVDZW50cm9pZChkLGwsITEpO31lbHNlIHIuZW5jb2RlQ2VudHJvaWQodm9pZCAwLHMsITEpO31yLmJvcmRlckRvbmVXaXRoTmVpZ2hib3JaW3RdPWguY2Fub25pY2FsLnosci5uZWVkc0NlbnRyb2lkVXBkYXRlPSEwLHgmJihoLmJvcmRlckRvbmVXaXRoTmVpZ2hib3JaW2ldPXIuY2Fub25pY2FsLnosaC5uZWVkc0NlbnRyb2lkVXBkYXRlPSEwKTt9ZWxzZSB7Zm9yKGNvbnN0IGUgb2YgbilyLmVuY29kZUNlbnRyb2lkKHZvaWQgMCxyLmZlYXR1cmVzT25Cb3JkZXJbZV0sITEpO2lmKHgpe2Zvcihjb25zdCBlIG9mIHUpaC5lbmNvZGVDZW50cm9pZCh2b2lkIDAsaC5mZWF0dXJlc09uQm9yZGVyW2VdLCExKTtoLmJvcmRlckRvbmVXaXRoTmVpZ2hib3JaW2ldPXIuY2Fub25pY2FsLnosaC5uZWVkc0NlbnRyb2lkVXBkYXRlPSEwO31yLmJvcmRlckRvbmVXaXRoTmVpZ2hib3JaW3RdPWguY2Fub25pY2FsLnosci5uZWVkc0NlbnRyb2lkVXBkYXRlPSEwO319KHIubmVlZHNDZW50cm9pZFVwZGF0ZXx8IXIuY2VudHJvaWRWZXJ0ZXhCdWZmZXImJjAhPT1yLmNlbnRyb2lkVmVydGV4QXJyYXkubGVuZ3RoKSYmci51cGxvYWRDZW50cm9pZCh0KTt9Y29uc3QgeG89bmV3IGUuQ29sb3IoMSwwLDAsMSkseW89bmV3IGUuQ29sb3IoMCwxLDAsMSksYm89bmV3IGUuQ29sb3IoMCwwLDEsMSksd289bmV3IGUuQ29sb3IoMSwwLDEsMSksVG89bmV3IGUuQ29sb3IoMCwxLDEsMSk7ZnVuY3Rpb24gRW8odCxpLG8pe2NvbnN0IHI9dC5jb250ZXh0LG49dC50cmFuc2Zvcm0scz1yLmdsLGE9XCJnbG9iZVwiPT09bi5wcm9qZWN0aW9uLm5hbWUsbD1hP1tcIlBST0pFQ1RJT05fR0xPQkVfVklFV1wiXTpudWxsO2xldCBjPW8ucHJvak1hdHJpeDtpZihhJiZlLmdsb2JlVG9NZXJjYXRvclRyYW5zaXRpb24obi56b29tKT4wKXtjb25zdCB0PWUudHJhbnNpdGlvblRpbGVBQUJCaW5FQ0VGKG8uY2Fub25pY2FsLG4pLGk9ZS5nbG9iZURlbm9ybWFsaXplRUNFRih0KTtjPWUubXVsdGlwbHkobmV3IEZsb2F0MzJBcnJheSgxNiksbi5nbG9iZU1hdHJpeCxpKSxlLm11bHRpcGx5KGMsbi5wcm9qTWF0cml4LGMpO31jb25zdCBoPXQudXNlUHJvZ3JhbShcImRlYnVnXCIsbnVsbCxsKSx1PWkuZ2V0VGlsZUJ5SUQoby5rZXkpO3QudGVycmFpbiYmdC50ZXJyYWluLnNldHVwRWxldmF0aW9uRHJhdyh1LGgpO2NvbnN0IF89ZS5EZXB0aE1vZGUuZGlzYWJsZWQsZD1lLlN0ZW5jaWxNb2RlLmRpc2FibGVkLHA9dC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCksbT1cIiRkZWJ1Z1wiO3IuYWN0aXZlVGV4dHVyZS5zZXQocy5URVhUVVJFMCksdC5lbXB0eVRleHR1cmUuYmluZChzLkxJTkVBUixzLkNMQU1QX1RPX0VER0UpLGE/dS5fbWFrZUdsb2JlVGlsZURlYnVnQnVmZmVycyh0LmNvbnRleHQsbik6dS5fbWFrZURlYnVnVGlsZUJvdW5kc0J1ZmZlcnModC5jb250ZXh0LG4ucHJvamVjdGlvbik7Y29uc3QgZj11Ll90aWxlRGVidWdCdWZmZXJ8fHQuZGVidWdCdWZmZXIsZz11Ll90aWxlRGVidWdJbmRleEJ1ZmZlcnx8dC5kZWJ1Z0luZGV4QnVmZmVyLHY9dS5fdGlsZURlYnVnU2VnbWVudHN8fHQuZGVidWdTZWdtZW50cztoLmRyYXcocixzLkxJTkVfU1RSSVAsXyxkLHAsZS5DdWxsRmFjZU1vZGUuZGlzYWJsZWQsVmkoYyxlLkNvbG9yLnJlZCksbSxmLGcsdixudWxsLG51bGwsbnVsbCxbdS5fZ2xvYmVUaWxlRGVidWdCb3JkZXJCdWZmZXJdKTtjb25zdCB4PXUubGF0ZXN0UmF3VGlsZURhdGEseT1NYXRoLmZsb29yKCh4JiZ4LmJ5dGVMZW5ndGh8fDApLzEwMjQpLGI9aS5nZXRUaWxlKG8pLnRpbGVTaXplLHc9NTEyL01hdGgubWluKGIsNTEyKSooby5vdmVyc2NhbGVkWi9uLnpvb20pKi41O2xldCBUPW8uY2Fub25pY2FsLnRvU3RyaW5nKCk7by5vdmVyc2NhbGVkWiE9PW8uY2Fub25pY2FsLnomJihUKz1gID0+ICR7by5vdmVyc2NhbGVkWn1gKSxUKz1gICR7eX1rYmAsZnVuY3Rpb24oZSx0KXtlLmluaXREZWJ1Z092ZXJsYXlDYW52YXMoKTtjb25zdCBpPWUuZGVidWdPdmVybGF5Q2FudmFzLG89ZS5jb250ZXh0LmdsLHI9ZS5kZWJ1Z092ZXJsYXlDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO3IuY2xlYXJSZWN0KDAsMCxpLndpZHRoLGkuaGVpZ2h0KSxyLnNoYWRvd0NvbG9yPVwid2hpdGVcIixyLnNoYWRvd0JsdXI9MixyLmxpbmVXaWR0aD0xLjUsci5zdHJva2VTdHlsZT1cIndoaXRlXCIsci50ZXh0QmFzZWxpbmU9XCJ0b3BcIixyLmZvbnQ9XCJib2xkIDM2cHggT3BlbiBTYW5zLCBzYW5zLXNlcmlmXCIsci5maWxsVGV4dCh0LDUsNSksci5zdHJva2VUZXh0KHQsNSw1KSxlLmRlYnVnT3ZlcmxheVRleHR1cmUudXBkYXRlKGkpLGUuZGVidWdPdmVybGF5VGV4dHVyZS5iaW5kKG8uTElORUFSLG8uQ0xBTVBfVE9fRURHRSk7fSh0LFQpO2NvbnN0IEU9dS5fdGlsZURlYnVnVGV4dEJ1ZmZlcnx8dC5kZWJ1Z0J1ZmZlcixDPXUuX3RpbGVEZWJ1Z1RleHRJbmRleEJ1ZmZlcnx8dC5xdWFkVHJpYW5nbGVJbmRleEJ1ZmZlcixNPXUuX3RpbGVEZWJ1Z1RleHRTZWdtZW50c3x8dC5kZWJ1Z1NlZ21lbnRzO2guZHJhdyhyLHMuVFJJQU5HTEVTLF8sZCxlLkNvbG9yTW9kZS5hbHBoYUJsZW5kZWQsZS5DdWxsRmFjZU1vZGUuZGlzYWJsZWQsVmkoYyxlLkNvbG9yLnRyYW5zcGFyZW50LHcpLG0sRSxDLE0sbnVsbCxudWxsLG51bGwsW3UuX2dsb2JlVGlsZURlYnVnVGV4dEJ1ZmZlcl0pO31mdW5jdGlvbiBDbyhlLHQsaSxvKXtJbyhlLDAsdCtpLzIsZS50cmFuc2Zvcm0ud2lkdGgsaSxvKTt9ZnVuY3Rpb24gTW8oZSx0LGksbyl7SW8oZSx0LWkvMiwwLGksZS50cmFuc2Zvcm0uaGVpZ2h0LG8pO31mdW5jdGlvbiBJbyh0LGksbyxyLG4scyl7Y29uc3QgYT10LmNvbnRleHQsbD1hLmdsO2wuZW5hYmxlKGwuU0NJU1NPUl9URVNUKSxsLnNjaXNzb3IoaSplLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8sbyplLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8sciplLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8sbiplLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8pLGEuY2xlYXIoe2NvbG9yOnN9KSxsLmRpc2FibGUobC5TQ0lTU09SX1RFU1QpO31jb25zdCBQbz1lLmNyZWF0ZUxheW91dChbe25hbWU6XCJhX3Bvc18zZlwiLGNvbXBvbmVudHM6Myx0eXBlOlwiRmxvYXQzMlwifV0pLHttZW1iZXJzOlNvfT1QbztmdW5jdGlvbiBEbyhlLHQsaSxvKXtlLmVtcGxhY2VCYWNrKHQsaSxvKTt9Y2xhc3MgTG97Y29uc3RydWN0b3IodCl7dGhpcy52ZXJ0ZXhBcnJheT1uZXcgZS5TdHJ1Y3RBcnJheUxheW91dDNmMTIsdGhpcy5pbmRpY2VzPW5ldyBlLlN0cnVjdEFycmF5TGF5b3V0M3VpNixEbyh0aGlzLnZlcnRleEFycmF5LC0xLC0xLDEpLERvKHRoaXMudmVydGV4QXJyYXksMSwtMSwxKSxEbyh0aGlzLnZlcnRleEFycmF5LC0xLDEsMSksRG8odGhpcy52ZXJ0ZXhBcnJheSwxLDEsMSksRG8odGhpcy52ZXJ0ZXhBcnJheSwtMSwtMSwtMSksRG8odGhpcy52ZXJ0ZXhBcnJheSwxLC0xLC0xKSxEbyh0aGlzLnZlcnRleEFycmF5LC0xLDEsLTEpLERvKHRoaXMudmVydGV4QXJyYXksMSwxLC0xKSx0aGlzLmluZGljZXMuZW1wbGFjZUJhY2soNSwxLDMpLHRoaXMuaW5kaWNlcy5lbXBsYWNlQmFjaygzLDcsNSksdGhpcy5pbmRpY2VzLmVtcGxhY2VCYWNrKDYsMiwwKSx0aGlzLmluZGljZXMuZW1wbGFjZUJhY2soMCw0LDYpLHRoaXMuaW5kaWNlcy5lbXBsYWNlQmFjaygyLDYsNyksdGhpcy5pbmRpY2VzLmVtcGxhY2VCYWNrKDcsMywyKSx0aGlzLmluZGljZXMuZW1wbGFjZUJhY2soNSw0LDApLHRoaXMuaW5kaWNlcy5lbXBsYWNlQmFjaygwLDEsNSksdGhpcy5pbmRpY2VzLmVtcGxhY2VCYWNrKDAsMiwzKSx0aGlzLmluZGljZXMuZW1wbGFjZUJhY2soMywxLDApLHRoaXMuaW5kaWNlcy5lbXBsYWNlQmFjayg3LDYsNCksdGhpcy5pbmRpY2VzLmVtcGxhY2VCYWNrKDQsNSw3KSx0aGlzLnZlcnRleEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLnZlcnRleEFycmF5LFNvKSx0aGlzLmluZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIodGhpcy5pbmRpY2VzKSx0aGlzLnNlZ21lbnQ9ZS5TZWdtZW50VmVjdG9yLnNpbXBsZVNlZ21lbnQoMCwwLDM2LDEyKTt9fWZ1bmN0aW9uIEFvKHQsaSxvLHIsbixzKXtjb25zdCBhPXQuZ2wsbD1pLnBhaW50LmdldChcInNreS1hdG1vc3BoZXJlLWNvbG9yXCIpLGM9aS5wYWludC5nZXQoXCJza3ktYXRtb3NwaGVyZS1oYWxvLWNvbG9yXCIpLGg9aS5wYWludC5nZXQoXCJza3ktYXRtb3NwaGVyZS1zdW4taW50ZW5zaXR5XCIpLHU9KChlLHQsaSxvLHIpPT4oe3VfbWF0cml4XzNmOmUsdV9zdW5fZGlyZWN0aW9uOnQsdV9zdW5faW50ZW5zaXR5OmksdV9jb2xvcl90aW50X3I6W28ucixvLmcsby5iLG8uYV0sdV9jb2xvcl90aW50X206W3IucixyLmcsci5iLHIuYV0sdV9sdW1pbmFuY2U6NWUtNX0pKShlLmZyb21NYXQ0KGUuY3JlYXRlJDEoKSxyKSxuLGgsbCxjKTthLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsYS5DT0xPUl9BVFRBQ0hNRU5UMCxhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtzLGkuc2t5Ym94VGV4dHVyZSwwKSxvLmRyYXcodCxhLlRSSUFOR0xFUyxlLkRlcHRoTW9kZS5kaXNhYmxlZCxlLlN0ZW5jaWxNb2RlLmRpc2FibGVkLGUuQ29sb3JNb2RlLnVuYmxlbmRlZCxlLkN1bGxGYWNlTW9kZS5mcm9udENXLHUsXCJza3lib3hDYXB0dXJlXCIsaS5za3lib3hHZW9tZXRyeS52ZXJ0ZXhCdWZmZXIsaS5za3lib3hHZW9tZXRyeS5pbmRleEJ1ZmZlcixpLnNreWJveEdlb21ldHJ5LnNlZ21lbnQpO31jb25zdCB6bz1lLmNyZWF0ZUxheW91dChbe3R5cGU6XCJGbG9hdDMyXCIsbmFtZTpcImFfcG9zXCIsY29tcG9uZW50czozfSx7dHlwZTpcIkZsb2F0MzJcIixuYW1lOlwiYV91dlwiLGNvbXBvbmVudHM6Mn1dKTtjbGFzcyBSb3tjb25zdHJ1Y3Rvcih0KXtjb25zdCBpPW5ldyBlLlN0cnVjdEFycmF5TGF5b3V0NWYyMDtpLmVtcGxhY2VCYWNrKC0xLDEsMSwwLDApLGkuZW1wbGFjZUJhY2soMSwxLDEsMSwwKSxpLmVtcGxhY2VCYWNrKDEsLTEsMSwxLDEpLGkuZW1wbGFjZUJhY2soLTEsLTEsMSwwLDEpO2NvbnN0IG89bmV3IGUuU3RydWN0QXJyYXlMYXlvdXQzdWk2O28uZW1wbGFjZUJhY2soMCwxLDIpLG8uZW1wbGFjZUJhY2soMiwzLDApLHRoaXMudmVydGV4QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKGksem8ubWVtYmVycyksdGhpcy5pbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKG8pLHRoaXMuc2VnbWVudHM9ZS5TZWdtZW50VmVjdG9yLnNpbXBsZVNlZ21lbnQoMCwwLDQsMik7fWRlc3Ryb3koKXt0aGlzLnZlcnRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5pbmRleEJ1ZmZlci5kZXN0cm95KCksdGhpcy5zZWdtZW50cy5kZXN0cm95KCk7fX1jb25zdCBPbz17c3ltYm9sOmZ1bmN0aW9uKHQsaSxvLHIsbil7aWYoXCJ0cmFuc2x1Y2VudFwiIT09dC5yZW5kZXJQYXNzKXJldHVybjtjb25zdCBzPWUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsYT10LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKTtvLmxheW91dC5nZXQoXCJ0ZXh0LXZhcmlhYmxlLWFuY2hvclwiKSYmZnVuY3Rpb24odCxpLG8scixuLHMsYSl7Y29uc3QgbD1pLnRyYW5zZm9ybSxjPVwibWFwXCI9PT1uLGg9XCJtYXBcIj09PXM7Zm9yKGNvbnN0IGkgb2YgdCl7Y29uc3QgdD1yLmdldFRpbGUoaSksbj10LmdldEJ1Y2tldChvKTtpZighbnx8IW4udGV4dHx8IW4udGV4dC5zZWdtZW50cy5nZXQoKS5sZW5ndGgpY29udGludWU7Y29uc3Qgcz1lLmV2YWx1YXRlU2l6ZUZvclpvb20obi50ZXh0U2l6ZURhdGEsbC56b29tKSx1PXh0KGksbi5nZXRQcm9qZWN0aW9uKCksbCksXz1sLmNhbGN1bGF0ZVBpeGVsc1RvVGlsZVVuaXRzTWF0cml4KHQpLGQ9ZXQodSx0LnRpbGVJRC5jYW5vbmljYWwsaCxjLGwsbi5nZXRQcm9qZWN0aW9uKCksXykscD1cIm5vbmVcIiE9PW8ubGF5b3V0LmdldChcImljb24tdGV4dC1maXRcIikmJm4uaGFzSWNvbkRhdGEoKTtpZihzKXtjb25zdCBvPU1hdGgucG93KDIsbC56b29tLXQudGlsZUlELm92ZXJzY2FsZWRaKTt1byhuLGMsaCxhLGUuc3ltYm9sU2l6ZSxsLGQsaSxvLHMscCk7fX19KHIsdCxvLGksby5sYXlvdXQuZ2V0KFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIiksby5sYXlvdXQuZ2V0KFwidGV4dC1waXRjaC1hbGlnbm1lbnRcIiksbiksMCE9PW8ucGFpbnQuZ2V0KFwiaWNvbi1vcGFjaXR5XCIpLmNvbnN0YW50T3IoMSkmJnBvKHQsaSxvLHIsITEsby5wYWludC5nZXQoXCJpY29uLXRyYW5zbGF0ZVwiKSxvLnBhaW50LmdldChcImljb24tdHJhbnNsYXRlLWFuY2hvclwiKSxvLmxheW91dC5nZXQoXCJpY29uLXJvdGF0aW9uLWFsaWdubWVudFwiKSxvLmxheW91dC5nZXQoXCJpY29uLXBpdGNoLWFsaWdubWVudFwiKSxvLmxheW91dC5nZXQoXCJpY29uLWtlZXAtdXByaWdodFwiKSxzLGEpLDAhPT1vLnBhaW50LmdldChcInRleHQtb3BhY2l0eVwiKS5jb25zdGFudE9yKDEpJiZwbyh0LGksbyxyLCEwLG8ucGFpbnQuZ2V0KFwidGV4dC10cmFuc2xhdGVcIiksby5wYWludC5nZXQoXCJ0ZXh0LXRyYW5zbGF0ZS1hbmNob3JcIiksby5sYXlvdXQuZ2V0KFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIiksby5sYXlvdXQuZ2V0KFwidGV4dC1waXRjaC1hbGlnbm1lbnRcIiksby5sYXlvdXQuZ2V0KFwidGV4dC1rZWVwLXVwcmlnaHRcIikscyxhKSxpLm1hcC5zaG93Q29sbGlzaW9uQm94ZXMmJihsbyh0LGksbyxyLG8ucGFpbnQuZ2V0KFwidGV4dC10cmFuc2xhdGVcIiksby5wYWludC5nZXQoXCJ0ZXh0LXRyYW5zbGF0ZS1hbmNob3JcIiksITApLGxvKHQsaSxvLHIsby5wYWludC5nZXQoXCJpY29uLXRyYW5zbGF0ZVwiKSxvLnBhaW50LmdldChcImljb24tdHJhbnNsYXRlLWFuY2hvclwiKSwhMSkpO30sY2lyY2xlOmZ1bmN0aW9uKHQsaSxvLHIpe2lmKFwidHJhbnNsdWNlbnRcIiE9PXQucmVuZGVyUGFzcylyZXR1cm47Y29uc3Qgbj1vLnBhaW50LmdldChcImNpcmNsZS1vcGFjaXR5XCIpLHM9by5wYWludC5nZXQoXCJjaXJjbGUtc3Ryb2tlLXdpZHRoXCIpLGE9by5wYWludC5nZXQoXCJjaXJjbGUtc3Ryb2tlLW9wYWNpdHlcIiksbD12b2lkIDAhPT1vLmxheW91dC5nZXQoXCJjaXJjbGUtc29ydC1rZXlcIikuY29uc3RhbnRPcigxKTtpZigwPT09bi5jb25zdGFudE9yKDEpJiYoMD09PXMuY29uc3RhbnRPcigxKXx8MD09PWEuY29uc3RhbnRPcigxKSkpcmV0dXJuO2NvbnN0IGM9dC5jb250ZXh0LGg9Yy5nbCx1PXQudHJhbnNmb3JtLF89dC5kZXB0aE1vZGVGb3JTdWJsYXllcigwLGUuRGVwdGhNb2RlLlJlYWRPbmx5KSxkPWUuU3RlbmNpbE1vZGUuZGlzYWJsZWQscD10LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSxtPVwiZ2xvYmVcIj09PXUucHJvamVjdGlvbi5uYW1lLGY9W2UubWVyY2F0b3JYZnJvbUxuZyh1LmNlbnRlci5sbmcpLGUubWVyY2F0b3JZZnJvbUxhdCh1LmNlbnRlci5sYXQpXSxnPVtdO2ZvcihsZXQgbj0wO248ci5sZW5ndGg7bisrKXtjb25zdCBzPXJbbl0sYT1pLmdldFRpbGUocyksYz1hLmdldEJ1Y2tldChvKTtpZighY3x8Yy5wcm9qZWN0aW9uLm5hbWUhPT11LnByb2plY3Rpb24ubmFtZSljb250aW51ZTtjb25zdCBoPWMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmdldChvLmlkKSxfPUdpKG8pO20mJl8ucHVzaChcIlBST0pFQ1RJT05fR0xPQkVfVklFV1wiKTtjb25zdCBkPXQudXNlUHJvZ3JhbShcImNpcmNsZVwiLGgsXykscD1jLmxheW91dFZlcnRleEJ1ZmZlcix2PWMuZ2xvYmVFeHRWZXJ0ZXhCdWZmZXIseD1jLmluZGV4QnVmZmVyLHk9dS5wcm9qZWN0aW9uLmNyZWF0ZUludmVyc2lvbk1hdHJpeCh1LHMuY2Fub25pY2FsKSxiPXtwcm9ncmFtQ29uZmlndXJhdGlvbjpoLHByb2dyYW06ZCxsYXlvdXRWZXJ0ZXhCdWZmZXI6cCxnbG9iZUV4dFZlcnRleEJ1ZmZlcjp2LGluZGV4QnVmZmVyOngsdW5pZm9ybVZhbHVlczpqaSh0LHMsYSx5LGYsbyksdGlsZTphfTtpZihsKXtjb25zdCB0PWMuc2VnbWVudHMuZ2V0KCk7Zm9yKGNvbnN0IGkgb2YgdClnLnB1c2goe3NlZ21lbnRzOm5ldyBlLlNlZ21lbnRWZWN0b3IoW2ldKSxzb3J0S2V5Omkuc29ydEtleSxzdGF0ZTpifSk7fWVsc2UgZy5wdXNoKHtzZWdtZW50czpjLnNlZ21lbnRzLHNvcnRLZXk6MCxzdGF0ZTpifSk7fWwmJmcuc29ydCgoKGUsdCk9PmUuc29ydEtleS10LnNvcnRLZXkpKTtjb25zdCB2PXt1c2VEZXB0aEZvck9jY2x1c2lvbjohbX07Zm9yKGNvbnN0IGkgb2YgZyl7Y29uc3R7cHJvZ3JhbUNvbmZpZ3VyYXRpb246cixwcm9ncmFtOm4sbGF5b3V0VmVydGV4QnVmZmVyOnMsZ2xvYmVFeHRWZXJ0ZXhCdWZmZXI6YSxpbmRleEJ1ZmZlcjpsLHVuaWZvcm1WYWx1ZXM6bSx0aWxlOmZ9PWkuc3RhdGUsZz1pLnNlZ21lbnRzO3QudGVycmFpbiYmdC50ZXJyYWluLnNldHVwRWxldmF0aW9uRHJhdyhmLG4sdiksdC5wcmVwYXJlRHJhd1Byb2dyYW0oYyxuLGYudGlsZUlELnRvVW53cmFwcGVkKCkpLG4uZHJhdyhjLGguVFJJQU5HTEVTLF8sZCxwLGUuQ3VsbEZhY2VNb2RlLmRpc2FibGVkLG0sby5pZCxzLGwsZyxvLnBhaW50LHUuem9vbSxyLFthXSk7fX0saGVhdG1hcDpmdW5jdGlvbih0LGksbyxyKXtpZigwIT09by5wYWludC5nZXQoXCJoZWF0bWFwLW9wYWNpdHlcIikpaWYoXCJvZmZzY3JlZW5cIj09PXQucmVuZGVyUGFzcyl7Y29uc3Qgbj10LmNvbnRleHQscz1uLmdsLGE9ZS5TdGVuY2lsTW9kZS5kaXNhYmxlZCxsPW5ldyBlLkNvbG9yTW9kZShbcy5PTkUscy5PTkVdLGUuQ29sb3IudHJhbnNwYXJlbnQsWyEwLCEwLCEwLCEwXSk7IWZ1bmN0aW9uKGUsdCxpLG8pe2NvbnN0IHI9ZS5nbCxuPXQud2lkdGgqbyxzPXQuaGVpZ2h0Km87ZS5hY3RpdmVUZXh0dXJlLnNldChyLlRFWFRVUkUxKSxlLnZpZXdwb3J0LnNldChbMCwwLG4sc10pO2xldCBhPWkuaGVhdG1hcEZibztpZighYXx8YSYmKGEud2lkdGghPT1ufHxhLmhlaWdodCE9PXMpKXthJiZhLmRlc3Ryb3koKTtjb25zdCB0PXIuY3JlYXRlVGV4dHVyZSgpO3IuYmluZFRleHR1cmUoci5URVhUVVJFXzJELHQpLHIudGV4UGFyYW1ldGVyaShyLlRFWFRVUkVfMkQsci5URVhUVVJFX1dSQVBfUyxyLkNMQU1QX1RPX0VER0UpLHIudGV4UGFyYW1ldGVyaShyLlRFWFRVUkVfMkQsci5URVhUVVJFX1dSQVBfVCxyLkNMQU1QX1RPX0VER0UpLHIudGV4UGFyYW1ldGVyaShyLlRFWFRVUkVfMkQsci5URVhUVVJFX01JTl9GSUxURVIsci5MSU5FQVIpLHIudGV4UGFyYW1ldGVyaShyLlRFWFRVUkVfMkQsci5URVhUVVJFX01BR19GSUxURVIsci5MSU5FQVIpLGE9aS5oZWF0bWFwRmJvPWUuY3JlYXRlRnJhbWVidWZmZXIobixzLCExKSxmdW5jdGlvbihlLHQsaSxvLHIsbil7Y29uc3Qgcz1lLmdsO3MudGV4SW1hZ2UyRChzLlRFWFRVUkVfMkQsMCxlLmlzV2ViR0wyJiZlLmV4dFJlbmRlclRvVGV4dHVyZUhhbGZGbG9hdD9zLlJHQkExNkY6cy5SR0JBLHIsbiwwLHMuUkdCQSxlLmV4dFJlbmRlclRvVGV4dHVyZUhhbGZGbG9hdD9lLmlzV2ViR0wyP3MuSEFMRl9GTE9BVDplLmV4dFRleHR1cmVIYWxmRmxvYXQuSEFMRl9GTE9BVF9PRVM6cy5VTlNJR05FRF9CWVRFLG51bGwpLG8uY29sb3JBdHRhY2htZW50LnNldChpKTt9KGUsMCx0LGEsbixzKTt9ZWxzZSByLmJpbmRUZXh0dXJlKHIuVEVYVFVSRV8yRCxhLmNvbG9yQXR0YWNobWVudC5nZXQoKSksZS5iaW5kRnJhbWVidWZmZXIuc2V0KGEuZnJhbWVidWZmZXIpO30obix0LG8sXCJnbG9iZVwiPT09dC50cmFuc2Zvcm0ucHJvamVjdGlvbi5uYW1lPy41Oi4yNSksbi5jbGVhcih7Y29sb3I6ZS5Db2xvci50cmFuc3BhcmVudH0pO2NvbnN0IGM9dC50cmFuc2Zvcm0saD1cImdsb2JlXCI9PT1jLnByb2plY3Rpb24ubmFtZSx1PWg/W1wiUFJPSkVDVElPTl9HTE9CRV9WSUVXXCJdOm51bGwsXz1oP2UuQ3VsbEZhY2VNb2RlLmZyb250Q0NXOmUuQ3VsbEZhY2VNb2RlLmRpc2FibGVkLGQ9W2UubWVyY2F0b3JYZnJvbUxuZyhjLmNlbnRlci5sbmcpLGUubWVyY2F0b3JZZnJvbUxhdChjLmNlbnRlci5sYXQpXTtmb3IobGV0IHA9MDtwPHIubGVuZ3RoO3ArKyl7Y29uc3QgbT1yW3BdO2lmKGkuaGFzUmVuZGVyYWJsZVBhcmVudChtKSljb250aW51ZTtjb25zdCBmPWkuZ2V0VGlsZShtKSxnPWYuZ2V0QnVja2V0KG8pO2lmKCFnfHxnLnByb2plY3Rpb24ubmFtZSE9PWMucHJvamVjdGlvbi5uYW1lKWNvbnRpbnVlO2NvbnN0IHY9Zy5wcm9ncmFtQ29uZmlndXJhdGlvbnMuZ2V0KG8uaWQpLHg9dC51c2VQcm9ncmFtKFwiaGVhdG1hcFwiLHYsdSkse3pvb206eX09dC50cmFuc2Zvcm07dC50ZXJyYWluJiZ0LnRlcnJhaW4uc2V0dXBFbGV2YXRpb25EcmF3KGYseCksdC5wcmVwYXJlRHJhd1Byb2dyYW0obix4LG0udG9VbndyYXBwZWQoKSk7Y29uc3QgYj1jLnByb2plY3Rpb24uY3JlYXRlSW52ZXJzaW9uTWF0cml4KGMsbS5jYW5vbmljYWwpO3guZHJhdyhuLHMuVFJJQU5HTEVTLGUuRGVwdGhNb2RlLmRpc2FibGVkLGEsbCxfLFhpKHQsbSxmLGIsZCx5LG8ucGFpbnQuZ2V0KFwiaGVhdG1hcC1pbnRlbnNpdHlcIikpLG8uaWQsZy5sYXlvdXRWZXJ0ZXhCdWZmZXIsZy5pbmRleEJ1ZmZlcixnLnNlZ21lbnRzLG8ucGFpbnQsdC50cmFuc2Zvcm0uem9vbSx2LGg/W2cuZ2xvYmVFeHRWZXJ0ZXhCdWZmZXJdOm51bGwpO31uLnZpZXdwb3J0LnNldChbMCwwLHQud2lkdGgsdC5oZWlnaHRdKTt9ZWxzZSBcInRyYW5zbHVjZW50XCI9PT10LnJlbmRlclBhc3MmJih0LmNvbnRleHQuc2V0Q29sb3JNb2RlKHQuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpKSxmdW5jdGlvbih0LGkpe2NvbnN0IG89dC5jb250ZXh0LHI9by5nbCxuPWkuaGVhdG1hcEZibztpZighbilyZXR1cm47by5hY3RpdmVUZXh0dXJlLnNldChyLlRFWFRVUkUwKSxyLmJpbmRUZXh0dXJlKHIuVEVYVFVSRV8yRCxuLmNvbG9yQXR0YWNobWVudC5nZXQoKSksby5hY3RpdmVUZXh0dXJlLnNldChyLlRFWFRVUkUxKTtsZXQgcz1pLmNvbG9yUmFtcFRleHR1cmU7c3x8KHM9aS5jb2xvclJhbXBUZXh0dXJlPW5ldyBlLlRleHR1cmUobyxpLmNvbG9yUmFtcCxyLlJHQkEpKSxzLmJpbmQoci5MSU5FQVIsci5DTEFNUF9UT19FREdFKSx0LnVzZVByb2dyYW0oXCJoZWF0bWFwVGV4dHVyZVwiKS5kcmF3KG8sci5UUklBTkdMRVMsZS5EZXB0aE1vZGUuZGlzYWJsZWQsZS5TdGVuY2lsTW9kZS5kaXNhYmxlZCx0LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCwoKGUsdCxpLG8pPT4oe3VfaW1hZ2U6MCx1X2NvbG9yX3JhbXA6MSx1X29wYWNpdHk6dC5wYWludC5nZXQoXCJoZWF0bWFwLW9wYWNpdHlcIil9KSkoMCxpKSxpLmlkLHQudmlld3BvcnRCdWZmZXIsdC5xdWFkVHJpYW5nbGVJbmRleEJ1ZmZlcix0LnZpZXdwb3J0U2VnbWVudHMsaS5wYWludCx0LnRyYW5zZm9ybS56b29tKTt9KHQsbykpO30sbGluZTpmdW5jdGlvbih0LGksbyxyKXtpZihcInRyYW5zbHVjZW50XCIhPT10LnJlbmRlclBhc3MpcmV0dXJuO2NvbnN0IG49by5wYWludC5nZXQoXCJsaW5lLW9wYWNpdHlcIikscz1vLnBhaW50LmdldChcImxpbmUtd2lkdGhcIik7aWYoMD09PW4uY29uc3RhbnRPcigxKXx8MD09PXMuY29uc3RhbnRPcigxKSlyZXR1cm47Y29uc3QgYT10LmRlcHRoTW9kZUZvclN1YmxheWVyKDAsZS5EZXB0aE1vZGUuUmVhZE9ubHkpLGw9dC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCksYz10LnRlcnJhaW4mJnQudGVycmFpbi5yZW5kZXJpbmdUb1RleHR1cmU/MTplLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW8saD1vLnBhaW50LmdldChcImxpbmUtZGFzaGFycmF5XCIpLHU9aC5jb25zdGFudE9yKDEpLF89by5sYXlvdXQuZ2V0KFwibGluZS1jYXBcIiksZD1vLnBhaW50LmdldChcImxpbmUtcGF0dGVyblwiKSxwPWQuY29uc3RhbnRPcigxKSxtPW8ucGFpbnQuZ2V0KFwibGluZS1ncmFkaWVudFwiKSxmPXA/XCJsaW5lUGF0dGVyblwiOlwibGluZVwiLGc9dC5jb250ZXh0LHY9Zy5nbCx4PShlPT57Y29uc3QgdD1bXTtLaShlKSYmdC5wdXNoKFwiUkVOREVSX0xJTkVfREFTSFwiKSxlLnBhaW50LmdldChcImxpbmUtZ3JhZGllbnRcIikmJnQucHVzaChcIlJFTkRFUl9MSU5FX0dSQURJRU5UXCIpO2NvbnN0IGk9ZS5wYWludC5nZXQoXCJsaW5lLXRyaW0tb2Zmc2V0XCIpOzA9PT1pWzBdJiYwPT09aVsxXXx8dC5wdXNoKFwiUkVOREVSX0xJTkVfVFJJTV9PRkZTRVRcIik7Y29uc3Qgbz1lLnBhaW50LmdldChcImxpbmUtcGF0dGVyblwiKS5jb25zdGFudE9yKDEpLHI9MSE9PWUucGFpbnQuZ2V0KFwibGluZS1vcGFjaXR5XCIpLmNvbnN0YW50T3IoMSk7cmV0dXJuICFvJiZyJiZ0LnB1c2goXCJSRU5ERVJfTElORV9BTFBIQV9ESVNDQVJEXCIpLHR9KShvKTtsZXQgeT14LmluY2x1ZGVzKFwiUkVOREVSX0xJTkVfQUxQSEFfRElTQ0FSRFwiKTt0LnRlcnJhaW4mJnQudGVycmFpbi5jbGlwT3JNYXNrT3ZlcmxhcFN0ZW5jaWxUeXBlKCkmJih5PSExKTtmb3IoY29uc3QgbiBvZiByKXtjb25zdCByPWkuZ2V0VGlsZShuKTtpZihwJiYhci5wYXR0ZXJuc0xvYWRlZCgpKWNvbnRpbnVlO2NvbnN0IHM9ci5nZXRCdWNrZXQobyk7aWYoIXMpY29udGludWU7dC5wcmVwYXJlRHJhd1RpbGUoKTtjb25zdCBiPXMucHJvZ3JhbUNvbmZpZ3VyYXRpb25zLmdldChvLmlkKSx3PXQudXNlUHJvZ3JhbShmLGIseCksVD1kLmNvbnN0YW50T3IobnVsbCk7aWYoVCYmci5pbWFnZUF0bGFzKXtjb25zdCBlPXIuaW1hZ2VBdGxhcy5wYXR0ZXJuUG9zaXRpb25zW1QudG9TdHJpbmcoKV07ZSYmYi5zZXRDb25zdGFudFBhdHRlcm5Qb3NpdGlvbnMoZSk7fWNvbnN0IEU9aC5jb25zdGFudE9yKG51bGwpLEM9Xy5jb25zdGFudE9yKG51bGwpO2lmKCFwJiZFJiZDJiZyLmxpbmVBdGxhcyl7Y29uc3QgZT1yLmxpbmVBdGxhcy5nZXREYXNoKEUsQyk7ZSYmYi5zZXRDb25zdGFudFBhdHRlcm5Qb3NpdGlvbnMoZSk7fWxldFtNLEldPW8ucGFpbnQuZ2V0KFwibGluZS10cmltLW9mZnNldFwiKTtpZihcInJvdW5kXCI9PT1DfHxcInNxdWFyZVwiPT09Qyl7Y29uc3QgZT0xO00hPT1JJiYoMD09PU0mJihNLT1lKSwxPT09SSYmKEkrPWUpKTt9Y29uc3QgUD10LnRlcnJhaW4/bi5wcm9qTWF0cml4Om51bGwsUz1wPyRpKHQscixvLFAsYyk6cWkodCxyLG8sUCxzLmxpbmVDbGlwc0FycmF5Lmxlbmd0aCxjLFtNLEldKTtpZihtKXtjb25zdCByPXMuZ3JhZGllbnRzW28uaWRdO2xldCBhPXIudGV4dHVyZTtpZihvLmdyYWRpZW50VmVyc2lvbiE9PXIudmVyc2lvbil7bGV0IGw9MjU2O2lmKG8uc3RlcEludGVycG9sYW50KXtjb25zdCBvPWkuZ2V0U291cmNlKCkubWF4em9vbSxyPW4uY2Fub25pY2FsLno9PT1vP01hdGguY2VpbCgxPDx0LnRyYW5zZm9ybS5tYXhab29tLW4uY2Fub25pY2FsLnopOjE7bD1lLmNsYW1wKGUubmV4dFBvd2VyT2ZUd28ocy5tYXhMaW5lTGVuZ3RoL2UuRVhURU5UKjEwMjQqciksMjU2LGcubWF4VGV4dHVyZVNpemUpO31yLmdyYWRpZW50PWUucmVuZGVyQ29sb3JSYW1wKHtleHByZXNzaW9uOm8uZ3JhZGllbnRFeHByZXNzaW9uKCksZXZhbHVhdGlvbktleTpcImxpbmVQcm9ncmVzc1wiLHJlc29sdXRpb246bCxpbWFnZTpyLmdyYWRpZW50fHx2b2lkIDAsY2xpcHM6cy5saW5lQ2xpcHNBcnJheX0pLHIudGV4dHVyZT9yLnRleHR1cmUudXBkYXRlKHIuZ3JhZGllbnQpOnIudGV4dHVyZT1uZXcgZS5UZXh0dXJlKGcsci5ncmFkaWVudCx2LlJHQkEpLHIudmVyc2lvbj1vLmdyYWRpZW50VmVyc2lvbixhPXIudGV4dHVyZTt9Zy5hY3RpdmVUZXh0dXJlLnNldCh2LlRFWFRVUkUxKSxhLmJpbmQoby5zdGVwSW50ZXJwb2xhbnQ/di5ORUFSRVNUOnYuTElORUFSLHYuQ0xBTVBfVE9fRURHRSk7fXUmJihnLmFjdGl2ZVRleHR1cmUuc2V0KHYuVEVYVFVSRTApLHIubGluZUF0bGFzVGV4dHVyZS5iaW5kKHYuTElORUFSLHYuUkVQRUFUKSxiLnVwZGF0ZVBhaW50QnVmZmVycygpKSxwJiYoZy5hY3RpdmVUZXh0dXJlLnNldCh2LlRFWFRVUkUwKSxyLmltYWdlQXRsYXNUZXh0dXJlLmJpbmQodi5MSU5FQVIsdi5DTEFNUF9UT19FREdFKSxiLnVwZGF0ZVBhaW50QnVmZmVycygpKSx0LnByZXBhcmVEcmF3UHJvZ3JhbShnLHcsbi50b1Vud3JhcHBlZCgpKTtjb25zdCBEPWk9Pnt3LmRyYXcoZyx2LlRSSUFOR0xFUyxhLGksbCxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCxTLG8uaWQscy5sYXlvdXRWZXJ0ZXhCdWZmZXIscy5pbmRleEJ1ZmZlcixzLnNlZ21lbnRzLG8ucGFpbnQsdC50cmFuc2Zvcm0uem9vbSxiLFtzLmxheW91dFZlcnRleEJ1ZmZlcjJdKTt9O2lmKHkpe2NvbnN0IGk9dC5zdGVuY2lsTW9kZUZvckNsaXBwaW5nKG4pLnJlZjswPT09aSYmdC50ZXJyYWluJiZnLmNsZWFyKHtzdGVuY2lsOjB9KTtjb25zdCBvPXtmdW5jOnYuRVFVQUwsbWFzazoyNTV9O1MudV9hbHBoYV9kaXNjYXJkX3RocmVzaG9sZD0uOCxEKG5ldyBlLlN0ZW5jaWxNb2RlKG8saSwyNTUsdi5LRUVQLHYuS0VFUCx2LklOVkVSVCkpLFMudV9hbHBoYV9kaXNjYXJkX3RocmVzaG9sZD0wLEQobmV3IGUuU3RlbmNpbE1vZGUobyxpLDI1NSx2LktFRVAsdi5LRUVQLHYuS0VFUCkpO31lbHNlIEQodC5zdGVuY2lsTW9kZUZvckNsaXBwaW5nKG4pKTt9eSYmKHQucmVzZXRTdGVuY2lsQ2xpcHBpbmdNYXNrcygpLHQudGVycmFpbiYmZy5jbGVhcih7c3RlbmNpbDowfSkpO30sZmlsbDpmdW5jdGlvbih0LGksbyxyKXtjb25zdCBuPW8ucGFpbnQuZ2V0KFwiZmlsbC1jb2xvclwiKSxzPW8ucGFpbnQuZ2V0KFwiZmlsbC1vcGFjaXR5XCIpO2lmKDA9PT1zLmNvbnN0YW50T3IoMSkpcmV0dXJuO2NvbnN0IGE9dC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCksbD1vLnBhaW50LmdldChcImZpbGwtcGF0dGVyblwiKSxjPXQub3BhcXVlUGFzc0VuYWJsZWRGb3JMYXllcigpJiYhbC5jb25zdGFudE9yKDEpJiYxPT09bi5jb25zdGFudE9yKGUuQ29sb3IudHJhbnNwYXJlbnQpLmEmJjE9PT1zLmNvbnN0YW50T3IoMCk/XCJvcGFxdWVcIjpcInRyYW5zbHVjZW50XCI7aWYodC5yZW5kZXJQYXNzPT09Yyl7Y29uc3Qgbj10LmRlcHRoTW9kZUZvclN1YmxheWVyKDEsXCJvcGFxdWVcIj09PXQucmVuZGVyUGFzcz9lLkRlcHRoTW9kZS5SZWFkV3JpdGU6ZS5EZXB0aE1vZGUuUmVhZE9ubHkpO2ZvKHQsaSxvLHIsbixhLCExKTt9aWYoXCJ0cmFuc2x1Y2VudFwiPT09dC5yZW5kZXJQYXNzJiZvLnBhaW50LmdldChcImZpbGwtYW50aWFsaWFzXCIpKXtjb25zdCBuPXQuZGVwdGhNb2RlRm9yU3VibGF5ZXIoby5nZXRQYWludFByb3BlcnR5KFwiZmlsbC1vdXRsaW5lLWNvbG9yXCIpPzI6MCxlLkRlcHRoTW9kZS5SZWFkT25seSk7Zm8odCxpLG8scixuLGEsITApO319LFwiZmlsbC1leHRydXNpb25cIjpmdW5jdGlvbih0LGksbyxyKXtjb25zdCBuPW8ucGFpbnQuZ2V0KFwiZmlsbC1leHRydXNpb24tb3BhY2l0eVwiKTtpZigwIT09biYmXCJ0cmFuc2x1Y2VudFwiPT09dC5yZW5kZXJQYXNzKXtjb25zdCBzPW5ldyBlLkRlcHRoTW9kZSh0LmNvbnRleHQuZ2wuTEVRVUFMLGUuRGVwdGhNb2RlLlJlYWRXcml0ZSx0LmRlcHRoUmFuZ2VGb3IzRCk7aWYoMSE9PW58fG8ucGFpbnQuZ2V0KFwiZmlsbC1leHRydXNpb24tcGF0dGVyblwiKS5jb25zdGFudE9yKDEpKWdvKHQsaSxvLHIscyxlLlN0ZW5jaWxNb2RlLmRpc2FibGVkLGUuQ29sb3JNb2RlLmRpc2FibGVkKSxnbyh0LGksbyxyLHMsdC5zdGVuY2lsTW9kZUZvcjNEKCksdC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCkpLHQucmVzZXRTdGVuY2lsQ2xpcHBpbmdNYXNrcygpO2Vsc2Uge2NvbnN0IG49dC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCk7Z28odCxpLG8scixzLGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsbik7fX19LGhpbGxzaGFkZTpmdW5jdGlvbih0LGksbyxyKXtpZihcIm9mZnNjcmVlblwiIT09dC5yZW5kZXJQYXNzJiZcInRyYW5zbHVjZW50XCIhPT10LnJlbmRlclBhc3MpcmV0dXJuO2NvbnN0IG49dC5jb250ZXh0LHM9dC5kZXB0aE1vZGVGb3JTdWJsYXllcigwLGUuRGVwdGhNb2RlLlJlYWRPbmx5KSxhPXQuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpLGw9dC50ZXJyYWluJiZ0LnRlcnJhaW4ucmVuZGVyaW5nVG9UZXh0dXJlLFtjLGhdPVwidHJhbnNsdWNlbnRcIiE9PXQucmVuZGVyUGFzc3x8bD9be30scl06dC5zdGVuY2lsQ29uZmlnRm9yT3ZlcmxhcChyKTtmb3IoY29uc3QgciBvZiBoKXtjb25zdCBuPWkuZ2V0VGlsZShyKTtpZihuLm5lZWRzSGlsbHNoYWRlUHJlcGFyZSYmXCJvZmZzY3JlZW5cIj09PXQucmVuZGVyUGFzcylmaSh0LG4sbyxzLGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsYSk7ZWxzZSBpZihcInRyYW5zbHVjZW50XCI9PT10LnJlbmRlclBhc3Mpe2NvbnN0IGU9bCYmdC50ZXJyYWluP3QudGVycmFpbi5zdGVuY2lsTW9kZUZvclJUVE92ZXJsYXAocik6Y1tyLm92ZXJzY2FsZWRaXTtwaSh0LHIsbixvLHMsZSxhKTt9fW4udmlld3BvcnQuc2V0KFswLDAsdC53aWR0aCx0LmhlaWdodF0pLHQucmVzZXRTdGVuY2lsQ2xpcHBpbmdNYXNrcygpO30scmFzdGVyOmZ1bmN0aW9uKHQsaSxvLHIsbixzKXtpZihcInRyYW5zbHVjZW50XCIhPT10LnJlbmRlclBhc3MpcmV0dXJuO2lmKDA9PT1vLnBhaW50LmdldChcInJhc3Rlci1vcGFjaXR5XCIpKXJldHVybjtpZighci5sZW5ndGgpcmV0dXJuO2NvbnN0IGE9dC5jb250ZXh0LGw9YS5nbCxjPWkuZ2V0U291cmNlKCksaD10LnVzZVByb2dyYW0oXCJyYXN0ZXJcIiksdT10LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSxfPXQudGVycmFpbiYmdC50ZXJyYWluLnJlbmRlcmluZ1RvVGV4dHVyZSxbZCxwXT1jIGluc3RhbmNlb2YgUGV8fF8/W3t9LHJdOnQuc3RlbmNpbENvbmZpZ0Zvck92ZXJsYXAociksbT1wW3AubGVuZ3RoLTFdLm92ZXJzY2FsZWRaLGY9IXQub3B0aW9ucy5tb3Zpbmc7Zm9yKGNvbnN0IHIgb2YgcCl7Y29uc3Qgbj1fP2UuRGVwdGhNb2RlLmRpc2FibGVkOnQuZGVwdGhNb2RlRm9yU3VibGF5ZXIoci5vdmVyc2NhbGVkWi1tLDE9PT1vLnBhaW50LmdldChcInJhc3Rlci1vcGFjaXR5XCIpP2UuRGVwdGhNb2RlLlJlYWRXcml0ZTplLkRlcHRoTW9kZS5SZWFkT25seSxsLkxFU1MpLHA9ci50b1Vud3JhcHBlZCgpLGc9aS5nZXRUaWxlKHIpO2lmKF8mJighZ3x8IWcuaGFzRGF0YSgpKSljb250aW51ZTtjb25zdCB2PV8/ci5wcm9qTWF0cml4OnQudHJhbnNmb3JtLmNhbGN1bGF0ZVByb2pNYXRyaXgocCxmKSx4PXQudGVycmFpbiYmXz90LnRlcnJhaW4uc3RlbmNpbE1vZGVGb3JSVFRPdmVybGFwKHIpOmRbci5vdmVyc2NhbGVkWl0seT1zPzA6by5wYWludC5nZXQoXCJyYXN0ZXItZmFkZS1kdXJhdGlvblwiKTtnLnJlZ2lzdGVyRmFkZUR1cmF0aW9uKHkpO2NvbnN0IGI9aS5maW5kTG9hZGVkUGFyZW50KHIsMCksdz1NaShnLGIsaSx0LnRyYW5zZm9ybSx5KTtsZXQgVCxFO3QudGVycmFpbiYmdC50ZXJyYWluLnByZXBhcmVEcmF3VGlsZSgpO2NvbnN0IEM9XCJuZWFyZXN0XCI9PT1vLnBhaW50LmdldChcInJhc3Rlci1yZXNhbXBsaW5nXCIpP2wuTkVBUkVTVDpsLkxJTkVBUjthLmFjdGl2ZVRleHR1cmUuc2V0KGwuVEVYVFVSRTApLGcudGV4dHVyZS5iaW5kKEMsbC5DTEFNUF9UT19FREdFKSxhLmFjdGl2ZVRleHR1cmUuc2V0KGwuVEVYVFVSRTEpLGI/KGIudGV4dHVyZS5iaW5kKEMsbC5DTEFNUF9UT19FREdFKSxUPU1hdGgucG93KDIsYi50aWxlSUQub3ZlcnNjYWxlZFotZy50aWxlSUQub3ZlcnNjYWxlZFopLEU9W2cudGlsZUlELmNhbm9uaWNhbC54KlQlMSxnLnRpbGVJRC5jYW5vbmljYWwueSpUJTFdKTpnLnRleHR1cmUuYmluZChDLGwuQ0xBTVBfVE9fRURHRSksZy50ZXh0dXJlLnVzZU1pcG1hcCYmYS5leHRUZXh0dXJlRmlsdGVyQW5pc290cm9waWMmJnQudHJhbnNmb3JtLnBpdGNoPjIwJiZsLnRleFBhcmFtZXRlcmYobC5URVhUVVJFXzJELGEuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljLlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULGEuZXh0VGV4dHVyZUZpbHRlckFuaXNvdHJvcGljTWF4KTtjb25zdCBNPUppKHYsRXx8WzAsMF0sVHx8MSx3LG8sYyBpbnN0YW5jZW9mIFBlP2MucGVyc3BlY3RpdmVUcmFuc2Zvcm06WzAsMF0pO2lmKHQucHJlcGFyZURyYXdQcm9ncmFtKGEsaCxwKSxjIGluc3RhbmNlb2YgUGUpYy5ib3VuZHNCdWZmZXImJmMuYm91bmRzU2VnbWVudHMmJmguZHJhdyhhLGwuVFJJQU5HTEVTLG4sZS5TdGVuY2lsTW9kZS5kaXNhYmxlZCx1LGUuQ3VsbEZhY2VNb2RlLmRpc2FibGVkLE0sby5pZCxjLmJvdW5kc0J1ZmZlcix0LnF1YWRUcmlhbmdsZUluZGV4QnVmZmVyLGMuYm91bmRzU2VnbWVudHMpO2Vsc2Uge2NvbnN0e3RpbGVCb3VuZHNCdWZmZXI6aSx0aWxlQm91bmRzSW5kZXhCdWZmZXI6cix0aWxlQm91bmRzU2VnbWVudHM6c309dC5nZXRUaWxlQm91bmRzQnVmZmVycyhnKTtoLmRyYXcoYSxsLlRSSUFOR0xFUyxuLHgsdSxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCxNLG8uaWQsaSxyLHMpO319dC5yZXNldFN0ZW5jaWxDbGlwcGluZ01hc2tzKCk7fSxiYWNrZ3JvdW5kOmZ1bmN0aW9uKHQsaSxvLHIpe2NvbnN0IG49by5wYWludC5nZXQoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpLHM9by5wYWludC5nZXQoXCJiYWNrZ3JvdW5kLW9wYWNpdHlcIik7aWYoMD09PXMpcmV0dXJuO2NvbnN0IGE9dC5jb250ZXh0LGw9YS5nbCxjPXQudHJhbnNmb3JtLGg9Yy50aWxlU2l6ZSx1PW8ucGFpbnQuZ2V0KFwiYmFja2dyb3VuZC1wYXR0ZXJuXCIpO2lmKHQuaXNQYXR0ZXJuTWlzc2luZyh1KSlyZXR1cm47Y29uc3QgXz0hdSYmMT09PW4uYSYmMT09PXMmJnQub3BhcXVlUGFzc0VuYWJsZWRGb3JMYXllcigpP1wib3BhcXVlXCI6XCJ0cmFuc2x1Y2VudFwiO2lmKHQucmVuZGVyUGFzcyE9PV8pcmV0dXJuO2NvbnN0IGQ9ZS5TdGVuY2lsTW9kZS5kaXNhYmxlZCxwPXQuZGVwdGhNb2RlRm9yU3VibGF5ZXIoMCxcIm9wYXF1ZVwiPT09Xz9lLkRlcHRoTW9kZS5SZWFkV3JpdGU6ZS5EZXB0aE1vZGUuUmVhZE9ubHkpLG09dC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCksZj10LnVzZVByb2dyYW0odT9cImJhY2tncm91bmRQYXR0ZXJuXCI6XCJiYWNrZ3JvdW5kXCIpO2xldCBnLHY9cjt2fHwoZz10LmdldEJhY2tncm91bmRUaWxlcygpLHY9T2JqZWN0LnZhbHVlcyhnKS5tYXAoKGU9PmUudGlsZUlEKSkpLHUmJihhLmFjdGl2ZVRleHR1cmUuc2V0KGwuVEVYVFVSRTApLHQuaW1hZ2VNYW5hZ2VyLmJpbmQodC5jb250ZXh0KSk7Zm9yKGNvbnN0IF8gb2Ygdil7Y29uc3Qgdj1fLnRvVW53cmFwcGVkKCkseD1yP18ucHJvak1hdHJpeDp0LnRyYW5zZm9ybS5jYWxjdWxhdGVQcm9qTWF0cml4KHYpO3QucHJlcGFyZURyYXdUaWxlKCk7Y29uc3QgeT1pP2kuZ2V0VGlsZShfKTpnP2dbXy5rZXldOm5ldyBlLlRpbGUoXyxoLGMuem9vbSx0KSxiPXU/bm8oeCxzLHQsdSx7dGlsZUlEOl8sdGlsZVNpemU6aH0pOnJvKHgscyxuKTt0LnByZXBhcmVEcmF3UHJvZ3JhbShhLGYsdik7Y29uc3R7dGlsZUJvdW5kc0J1ZmZlcjp3LHRpbGVCb3VuZHNJbmRleEJ1ZmZlcjpULHRpbGVCb3VuZHNTZWdtZW50czpFfT10LmdldFRpbGVCb3VuZHNCdWZmZXJzKHkpO2YuZHJhdyhhLGwuVFJJQU5HTEVTLHAsZCxtLGUuQ3VsbEZhY2VNb2RlLmRpc2FibGVkLGIsby5pZCx3LFQsRSk7fX0sc2t5OmZ1bmN0aW9uKHQsaSxvKXtjb25zdCByPXQudHJhbnNmb3JtLG49XCJtZXJjYXRvclwiPT09ci5wcm9qZWN0aW9uLm5hbWV8fFwiZ2xvYmVcIj09PXIucHJvamVjdGlvbi5uYW1lPzE6ZS5zbW9vdGhzdGVwKDcsOCxyLnpvb20pLHM9by5wYWludC5nZXQoXCJza3ktb3BhY2l0eVwiKSpuO2lmKDA9PT1zKXJldHVybjtjb25zdCBhPXQuY29udGV4dCxsPW8ucGFpbnQuZ2V0KFwic2t5LXR5cGVcIiksYz1uZXcgZS5EZXB0aE1vZGUoYS5nbC5MRVFVQUwsZS5EZXB0aE1vZGUuUmVhZE9ubHksWzAsMV0pLGg9dC5mcmFtZUNvdW50ZXIvMWUzJTE7XCJhdG1vc3BoZXJlXCI9PT1sP1wib2Zmc2NyZWVuXCI9PT10LnJlbmRlclBhc3M/by5uZWVkc1NreWJveENhcHR1cmUodCkmJihmdW5jdGlvbih0LGksbyxyKXtjb25zdCBuPXQuY29udGV4dCxzPW4uZ2w7bGV0IGE9aS5za3lib3hGYm87aWYoIWEpe2E9aS5za3lib3hGYm89bi5jcmVhdGVGcmFtZWJ1ZmZlcigzMiwzMiwhMSksaS5za3lib3hHZW9tZXRyeT1uZXcgTG8obiksaS5za3lib3hUZXh0dXJlPW4uZ2wuY3JlYXRlVGV4dHVyZSgpLHMuYmluZFRleHR1cmUocy5URVhUVVJFX0NVQkVfTUFQLGkuc2t5Ym94VGV4dHVyZSkscy50ZXhQYXJhbWV0ZXJpKHMuVEVYVFVSRV9DVUJFX01BUCxzLlRFWFRVUkVfV1JBUF9TLHMuQ0xBTVBfVE9fRURHRSkscy50ZXhQYXJhbWV0ZXJpKHMuVEVYVFVSRV9DVUJFX01BUCxzLlRFWFRVUkVfV1JBUF9ULHMuQ0xBTVBfVE9fRURHRSkscy50ZXhQYXJhbWV0ZXJpKHMuVEVYVFVSRV9DVUJFX01BUCxzLlRFWFRVUkVfTUlOX0ZJTFRFUixzLkxJTkVBUikscy50ZXhQYXJhbWV0ZXJpKHMuVEVYVFVSRV9DVUJFX01BUCxzLlRFWFRVUkVfTUFHX0ZJTFRFUixzLkxJTkVBUik7Zm9yKGxldCBlPTA7ZTw2OysrZSlzLnRleEltYWdlMkQocy5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grZSwwLHMuUkdCQSwzMiwzMiwwLHMuUkdCQSxzLlVOU0lHTkVEX0JZVEUsbnVsbCk7fW4uYmluZEZyYW1lYnVmZmVyLnNldChhLmZyYW1lYnVmZmVyKSxuLnZpZXdwb3J0LnNldChbMCwwLDMyLDMyXSk7Y29uc3QgbD1pLmdldENlbnRlcih0LCEwKSxjPXQudXNlUHJvZ3JhbShcInNreWJveENhcHR1cmVcIiksaD1uZXcgRmxvYXQ2NEFycmF5KDE2KTtlLmlkZW50aXR5KGgpLGUucm90YXRlWShoLGgsLjUqLU1hdGguUEkpLEFvKG4saSxjLGgsbCwwKSxlLmlkZW50aXR5KGgpLGUucm90YXRlWShoLGgsLjUqTWF0aC5QSSksQW8obixpLGMsaCxsLDEpLGUuaWRlbnRpdHkoaCksZS5yb3RhdGVYKGgsaCwuNSotTWF0aC5QSSksQW8obixpLGMsaCxsLDIpLGUuaWRlbnRpdHkoaCksZS5yb3RhdGVYKGgsaCwuNSpNYXRoLlBJKSxBbyhuLGksYyxoLGwsMyksZS5pZGVudGl0eShoKSxBbyhuLGksYyxoLGwsNCksZS5pZGVudGl0eShoKSxlLnJvdGF0ZVkoaCxoLE1hdGguUEkpLEFvKG4saSxjLGgsbCw1KSxuLnZpZXdwb3J0LnNldChbMCwwLHQud2lkdGgsdC5oZWlnaHRdKTt9KHQsbyksby5tYXJrU2t5Ym94VmFsaWQodCkpOlwic2t5XCI9PT10LnJlbmRlclBhc3MmJmZ1bmN0aW9uKHQsaSxvLHIsbil7Y29uc3Qgcz10LmNvbnRleHQsYT1zLmdsLGw9dC50cmFuc2Zvcm0sYz10LnVzZVByb2dyYW0oXCJza3lib3hcIik7cy5hY3RpdmVUZXh0dXJlLnNldChhLlRFWFRVUkUwKSxhLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV9DVUJFX01BUCxpLnNreWJveFRleHR1cmUpO2NvbnN0IGg9KChlLHQsaSxvLHIpPT4oe3VfbWF0cml4OmUsdV9zdW5fZGlyZWN0aW9uOnQsdV9jdWJlbWFwOjAsdV9vcGFjaXR5Om8sdV90ZW1wb3JhbF9vZmZzZXQ6cn0pKShsLnNreWJveE1hdHJpeCxpLmdldENlbnRlcih0LCExKSwwLHIsbik7dC5wcmVwYXJlRHJhd1Byb2dyYW0ocyxjKSxjLmRyYXcocyxhLlRSSUFOR0xFUyxvLGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsdC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCksZS5DdWxsRmFjZU1vZGUuYmFja0NXLGgsXCJza3lib3hcIixpLnNreWJveEdlb21ldHJ5LnZlcnRleEJ1ZmZlcixpLnNreWJveEdlb21ldHJ5LmluZGV4QnVmZmVyLGkuc2t5Ym94R2VvbWV0cnkuc2VnbWVudCk7fSh0LG8sYyxzLGgpOlwiZ3JhZGllbnRcIj09PWwmJlwic2t5XCI9PT10LnJlbmRlclBhc3MmJmZ1bmN0aW9uKHQsaSxvLHIsbil7Y29uc3Qgcz10LmNvbnRleHQsYT1zLmdsLGw9dC50cmFuc2Zvcm0sYz10LnVzZVByb2dyYW0oXCJza3lib3hHcmFkaWVudFwiKTtpLnNreWJveEdlb21ldHJ5fHwoaS5za3lib3hHZW9tZXRyeT1uZXcgTG8ocykpLHMuYWN0aXZlVGV4dHVyZS5zZXQoYS5URVhUVVJFMCk7bGV0IGg9aS5jb2xvclJhbXBUZXh0dXJlO2h8fChoPWkuY29sb3JSYW1wVGV4dHVyZT1uZXcgZS5UZXh0dXJlKHMsaS5jb2xvclJhbXAsYS5SR0JBKSksaC5iaW5kKGEuTElORUFSLGEuQ0xBTVBfVE9fRURHRSk7Y29uc3QgdT0oKHQsaSxvLHIsbik9Pih7dV9tYXRyaXg6dCx1X2NvbG9yX3JhbXA6MCx1X2NlbnRlcl9kaXJlY3Rpb246aSx1X3JhZGl1czplLmRlZ1RvUmFkKG8pLHVfb3BhY2l0eTpyLHVfdGVtcG9yYWxfb2Zmc2V0Om59KSkobC5za3lib3hNYXRyaXgsaS5nZXRDZW50ZXIodCwhMSksaS5wYWludC5nZXQoXCJza3ktZ3JhZGllbnQtcmFkaXVzXCIpLHIsbik7dC5wcmVwYXJlRHJhd1Byb2dyYW0ocyxjKSxjLmRyYXcocyxhLlRSSUFOR0xFUyxvLGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsdC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCksZS5DdWxsRmFjZU1vZGUuYmFja0NXLHUsXCJza3lib3hHcmFkaWVudFwiLGkuc2t5Ym94R2VvbWV0cnkudmVydGV4QnVmZmVyLGkuc2t5Ym94R2VvbWV0cnkuaW5kZXhCdWZmZXIsaS5za3lib3hHZW9tZXRyeS5zZWdtZW50KTt9KHQsbyxjLHMsaCk7fSxkZWJ1ZzpmdW5jdGlvbihlLHQsaSl7Zm9yKGxldCBvPTA7bzxpLmxlbmd0aDtvKyspRW8oZSx0LGlbb10pO30sY3VzdG9tOmZ1bmN0aW9uKHQsaSxvLHIpe2NvbnN0IG49dC5jb250ZXh0LHM9by5pbXBsZW1lbnRhdGlvbjtpZighdC50cmFuc2Zvcm0ucHJvamVjdGlvbi51bnN1cHBvcnRlZExheWVyc3x8IXQudHJhbnNmb3JtLnByb2plY3Rpb24udW5zdXBwb3J0ZWRMYXllcnMuaW5jbHVkZXMoXCJjdXN0b21cIil8fHQudGVycmFpbiYmKHQudGVycmFpbi5yZW5kZXJpbmdUb1RleHR1cmV8fFwib2Zmc2NyZWVuXCI9PT10LnJlbmRlclBhc3MpJiZvLmlzTGF5ZXJEcmFwZWQoKSl7aWYoXCJvZmZzY3JlZW5cIj09PXQucmVuZGVyUGFzcyl7Y29uc3QgaT1zLnByZXJlbmRlcjtpZihpKXtpZih0LnNldEN1c3RvbUxheWVyRGVmYXVsdHMoKSxuLnNldENvbG9yTW9kZSh0LmNvbG9yTW9kZUZvclJlbmRlclBhc3MoKSksXCJnbG9iZVwiPT09dC50cmFuc2Zvcm0ucHJvamVjdGlvbi5uYW1lKXtjb25zdCBvPXQudHJhbnNmb3JtLnBvaW50TWVyYztpLmNhbGwocyxuLmdsLHQudHJhbnNmb3JtLmN1c3RvbUxheWVyTWF0cml4KCksdC50cmFuc2Zvcm0uZ2V0UHJvamVjdGlvbigpLHQudHJhbnNmb3JtLmdsb2JlVG9NZXJjYXRvck1hdHJpeCgpLGUuZ2xvYmVUb01lcmNhdG9yVHJhbnNpdGlvbih0LnRyYW5zZm9ybS56b29tKSxbby54LG8ueV0sdC50cmFuc2Zvcm0ucGl4ZWxzUGVyTWV0ZXJSYXRpbyk7fWVsc2UgaS5jYWxsKHMsbi5nbCx0LnRyYW5zZm9ybS5jdXN0b21MYXllck1hdHJpeCgpKTtuLnNldERpcnR5KCksdC5zZXRCYXNlU3RhdGUoKTt9fWVsc2UgaWYoXCJ0cmFuc2x1Y2VudFwiPT09dC5yZW5kZXJQYXNzKXtpZih0LnRlcnJhaW4mJnQudGVycmFpbi5yZW5kZXJpbmdUb1RleHR1cmUpe2NvbnN0IGk9cy5yZW5kZXJUb1RpbGU7aWYoaSl7Y29uc3Qgbz1yWzBdLmNhbm9uaWNhbCxhPW5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZShvLngrclswXS53cmFwKigxPDxvLnopLG8ueSxvLnopO24uc2V0RGVwdGhNb2RlKGUuRGVwdGhNb2RlLmRpc2FibGVkKSxuLnNldFN0ZW5jaWxNb2RlKGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQpLG4uc2V0Q29sb3JNb2RlKHQuY29sb3JNb2RlRm9yUmVuZGVyUGFzcygpKSx0LnNldEN1c3RvbUxheWVyRGVmYXVsdHMoKSxpLmNhbGwocyxuLmdsLGEpLG4uc2V0RGlydHkoKSx0LnNldEJhc2VTdGF0ZSgpO31yZXR1cm59dC5zZXRDdXN0b21MYXllckRlZmF1bHRzKCksbi5zZXRDb2xvck1vZGUodC5jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCkpLG4uc2V0U3RlbmNpbE1vZGUoZS5TdGVuY2lsTW9kZS5kaXNhYmxlZCk7Y29uc3QgaT1cIjNkXCI9PT1zLnJlbmRlcmluZ01vZGU/bmV3IGUuRGVwdGhNb2RlKHQuY29udGV4dC5nbC5MRVFVQUwsZS5EZXB0aE1vZGUuUmVhZFdyaXRlLHQuZGVwdGhSYW5nZUZvcjNEKTp0LmRlcHRoTW9kZUZvclN1YmxheWVyKDAsZS5EZXB0aE1vZGUuUmVhZE9ubHkpO2lmKG4uc2V0RGVwdGhNb2RlKGkpLFwiZ2xvYmVcIj09PXQudHJhbnNmb3JtLnByb2plY3Rpb24ubmFtZSl7Y29uc3QgaT10LnRyYW5zZm9ybS5wb2ludE1lcmM7cy5yZW5kZXIobi5nbCx0LnRyYW5zZm9ybS5jdXN0b21MYXllck1hdHJpeCgpLHQudHJhbnNmb3JtLmdldFByb2plY3Rpb24oKSx0LnRyYW5zZm9ybS5nbG9iZVRvTWVyY2F0b3JNYXRyaXgoKSxlLmdsb2JlVG9NZXJjYXRvclRyYW5zaXRpb24odC50cmFuc2Zvcm0uem9vbSksW2kueCxpLnldLHQudHJhbnNmb3JtLnBpeGVsc1Blck1ldGVyUmF0aW8pO31lbHNlIHMucmVuZGVyKG4uZ2wsdC50cmFuc2Zvcm0uY3VzdG9tTGF5ZXJNYXRyaXgoKSk7bi5zZXREaXJ0eSgpLHQuc2V0QmFzZVN0YXRlKCksbi5iaW5kRnJhbWVidWZmZXIuc2V0KG51bGwpO319ZWxzZSBlLndhcm5PbmNlKFwiQ3VzdG9tIGxheWVycyBhcmUgbm90IHlldCBzdXBwb3J0ZWQgd2l0aCB0aGlzIHByb2plY3Rpb24uIFVzZSBtZXJjYXRvciBvciBnbG9iZSB0byBlbmFibGUgdXNhZ2Ugb2YgY3VzdG9tIGxheWVycy5cIik7fX07Y2xhc3MgQm97Y29uc3RydWN0b3IodCxpLG89ITEpe3RoaXMuY29udGV4dD1uZXcgRWUodCxvKSx0aGlzLnRyYW5zZm9ybT1pLHRoaXMuX3RpbGVUZXh0dXJlcz17fSx0aGlzLmZyYW1lQ29waWVzPVtdLHRoaXMubG9hZFRpbWVTdGFtcHM9W10sdGhpcy5zZXR1cCgpLHRoaXMubnVtU3VibGF5ZXJzPWUuU291cmNlQ2FjaGUubWF4VW5kZXJ6b29taW5nK2UuU291cmNlQ2FjaGUubWF4T3Zlcnpvb21pbmcrMSx0aGlzLmRlcHRoRXBzaWxvbj0xL01hdGgucG93KDIsMTYpLHRoaXMuZGVmZXJyZWRSZW5kZXJHcHVUaW1lUXVlcmllcz1bXSx0aGlzLmdwdVRpbWVycz17fSx0aGlzLmZyYW1lQ291bnRlcj0wLHRoaXMuX2JhY2tncm91bmRUaWxlcz17fTt9dXBkYXRlVGVycmFpbihlLHQpe2NvbnN0IGk9ISFlJiYhIWUudGVycmFpbiYmdGhpcy50cmFuc2Zvcm0ucHJvamVjdGlvbi5zdXBwb3J0c1RlcnJhaW47aWYoIShpfHx0aGlzLl90ZXJyYWluJiZ0aGlzLl90ZXJyYWluLmVuYWJsZWQpKXJldHVybjt0aGlzLl90ZXJyYWlufHwodGhpcy5fdGVycmFpbj1uZXcgRGkodGhpcyxlKSk7Y29uc3Qgbz10aGlzLl90ZXJyYWluO3RoaXMudHJhbnNmb3JtLmVsZXZhdGlvbj1pP286bnVsbCxvLnVwZGF0ZShlLHRoaXMudHJhbnNmb3JtLHQpO31fdXBkYXRlRm9nKGUpe2NvbnN0IHQ9ZS5mb2c7aWYoIXR8fFwiZ2xvYmVcIj09PXRoaXMudHJhbnNmb3JtLnByb2plY3Rpb24ubmFtZXx8dC5nZXRPcGFjaXR5KHRoaXMudHJhbnNmb3JtLnBpdGNoKTwxfHx0LnByb3BlcnRpZXMuZ2V0KFwiaG9yaXpvbi1ibGVuZFwiKTwuMDMpcmV0dXJuIHZvaWQodGhpcy50cmFuc2Zvcm0uZm9nQ3VsbERpc3RTcT1udWxsKTtjb25zdFtpLG9dPXQuZ2V0Rm92QWRqdXN0ZWRSYW5nZSh0aGlzLnRyYW5zZm9ybS5fZm92KTtpZihpPm8pcmV0dXJuIHZvaWQodGhpcy50cmFuc2Zvcm0uZm9nQ3VsbERpc3RTcT1udWxsKTtjb25zdCByPWkrLjc4KihvLWkpO3RoaXMudHJhbnNmb3JtLmZvZ0N1bGxEaXN0U3E9cipyO31nZXQgdGVycmFpbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5fdGVycmFpbkVuYWJsZWQoKSYmdGhpcy5fdGVycmFpbiYmdGhpcy5fdGVycmFpbi5lbmFibGVkP3RoaXMuX3RlcnJhaW46bnVsbH1yZXNpemUodCxpKXtpZih0aGlzLndpZHRoPXQqZS5leHBvcnRlZC5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuaGVpZ2h0PWkqZS5leHBvcnRlZC5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuY29udGV4dC52aWV3cG9ydC5zZXQoWzAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0XSksdGhpcy5zdHlsZSlmb3IoY29uc3QgZSBvZiB0aGlzLnN0eWxlLm9yZGVyKXRoaXMuc3R5bGUuX2xheWVyc1tlXS5yZXNpemUoKTt9c2V0dXAoKXtjb25zdCB0PXRoaXMuY29udGV4dCxpPW5ldyBlLlN0cnVjdEFycmF5TGF5b3V0Mmk0O2kuZW1wbGFjZUJhY2soMCwwKSxpLmVtcGxhY2VCYWNrKGUuRVhURU5ULDApLGkuZW1wbGFjZUJhY2soMCxlLkVYVEVOVCksaS5lbXBsYWNlQmFjayhlLkVYVEVOVCxlLkVYVEVOVCksdGhpcy50aWxlRXh0ZW50QnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKGksZS5wb3NBdHRyaWJ1dGVzLm1lbWJlcnMpLHRoaXMudGlsZUV4dGVudFNlZ21lbnRzPWUuU2VnbWVudFZlY3Rvci5zaW1wbGVTZWdtZW50KDAsMCw0LDIpO2NvbnN0IG89bmV3IGUuU3RydWN0QXJyYXlMYXlvdXQyaTQ7by5lbXBsYWNlQmFjaygwLDApLG8uZW1wbGFjZUJhY2soZS5FWFRFTlQsMCksby5lbXBsYWNlQmFjaygwLGUuRVhURU5UKSxvLmVtcGxhY2VCYWNrKGUuRVhURU5ULGUuRVhURU5UKSx0aGlzLmRlYnVnQnVmZmVyPXQuY3JlYXRlVmVydGV4QnVmZmVyKG8sZS5wb3NBdHRyaWJ1dGVzLm1lbWJlcnMpLHRoaXMuZGVidWdTZWdtZW50cz1lLlNlZ21lbnRWZWN0b3Iuc2ltcGxlU2VnbWVudCgwLDAsNCw1KTtjb25zdCByPW5ldyBlLlN0cnVjdEFycmF5TGF5b3V0Mmk0O3IuZW1wbGFjZUJhY2soLTEsLTEpLHIuZW1wbGFjZUJhY2soMSwtMSksci5lbXBsYWNlQmFjaygtMSwxKSxyLmVtcGxhY2VCYWNrKDEsMSksdGhpcy52aWV3cG9ydEJ1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcihyLGUucG9zQXR0cmlidXRlcy5tZW1iZXJzKSx0aGlzLnZpZXdwb3J0U2VnbWVudHM9ZS5TZWdtZW50VmVjdG9yLnNpbXBsZVNlZ21lbnQoMCwwLDQsMik7Y29uc3Qgbj1uZXcgZS5TdHJ1Y3RBcnJheUxheW91dDRpODtuLmVtcGxhY2VCYWNrKDAsMCwwLDApLG4uZW1wbGFjZUJhY2soZS5FWFRFTlQsMCxlLkVYVEVOVCwwKSxuLmVtcGxhY2VCYWNrKDAsZS5FWFRFTlQsMCxlLkVYVEVOVCksbi5lbXBsYWNlQmFjayhlLkVYVEVOVCxlLkVYVEVOVCxlLkVYVEVOVCxlLkVYVEVOVCksdGhpcy5tZXJjYXRvckJvdW5kc0J1ZmZlcj10LmNyZWF0ZVZlcnRleEJ1ZmZlcihuLGUuYm91bmRzQXR0cmlidXRlcy5tZW1iZXJzKSx0aGlzLm1lcmNhdG9yQm91bmRzU2VnbWVudHM9ZS5TZWdtZW50VmVjdG9yLnNpbXBsZVNlZ21lbnQoMCwwLDQsMik7Y29uc3Qgcz1uZXcgZS5TdHJ1Y3RBcnJheUxheW91dDN1aTY7cy5lbXBsYWNlQmFjaygwLDEsMikscy5lbXBsYWNlQmFjaygyLDEsMyksdGhpcy5xdWFkVHJpYW5nbGVJbmRleEJ1ZmZlcj10LmNyZWF0ZUluZGV4QnVmZmVyKHMpO2NvbnN0IGE9bmV3IGUuU3RydWN0QXJyYXlMYXlvdXQxdWkyO2Zvcihjb25zdCBlIG9mIFswLDEsMywyLDBdKWEuZW1wbGFjZUJhY2soZSk7dGhpcy5kZWJ1Z0luZGV4QnVmZmVyPXQuY3JlYXRlSW5kZXhCdWZmZXIoYSksdGhpcy5lbXB0eVRleHR1cmU9bmV3IGUuVGV4dHVyZSh0LG5ldyBlLlJHQkFJbWFnZSh7d2lkdGg6MSxoZWlnaHQ6MX0sVWludDhBcnJheS5vZigwLDAsMCwwKSksdC5nbC5SR0JBKSx0aGlzLmlkZW50aXR5TWF0PWUuY3JlYXRlKCk7Y29uc3QgbD10aGlzLmNvbnRleHQuZ2w7dGhpcy5zdGVuY2lsQ2xlYXJNb2RlPW5ldyBlLlN0ZW5jaWxNb2RlKHtmdW5jOmwuQUxXQVlTLG1hc2s6MH0sMCwyNTUsbC5aRVJPLGwuWkVSTyxsLlpFUk8pLHRoaXMubG9hZFRpbWVTdGFtcHMucHVzaChlLndpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSksdGhpcy5hdG1vc3BoZXJlQnVmZmVyPW5ldyBSbyh0aGlzLmNvbnRleHQpO31nZXRNZXJjYXRvclRpbGVCb3VuZHNCdWZmZXJzKCl7cmV0dXJuIHt0aWxlQm91bmRzQnVmZmVyOnRoaXMubWVyY2F0b3JCb3VuZHNCdWZmZXIsdGlsZUJvdW5kc0luZGV4QnVmZmVyOnRoaXMucXVhZFRyaWFuZ2xlSW5kZXhCdWZmZXIsdGlsZUJvdW5kc1NlZ21lbnRzOnRoaXMubWVyY2F0b3JCb3VuZHNTZWdtZW50c319Z2V0VGlsZUJvdW5kc0J1ZmZlcnMoZSl7cmV0dXJuIGUuX21ha2VUaWxlQm91bmRzQnVmZmVycyh0aGlzLmNvbnRleHQsdGhpcy50cmFuc2Zvcm0ucHJvamVjdGlvbiksZS5fdGlsZUJvdW5kc0J1ZmZlcj97dGlsZUJvdW5kc0J1ZmZlcjplLl90aWxlQm91bmRzQnVmZmVyLHRpbGVCb3VuZHNJbmRleEJ1ZmZlcjplLl90aWxlQm91bmRzSW5kZXhCdWZmZXIsdGlsZUJvdW5kc1NlZ21lbnRzOmUuX3RpbGVCb3VuZHNTZWdtZW50c306dGhpcy5nZXRNZXJjYXRvclRpbGVCb3VuZHNCdWZmZXJzKCl9Y2xlYXJTdGVuY2lsKCl7Y29uc3QgdD10aGlzLmNvbnRleHQsaT10LmdsO3RoaXMubmV4dFN0ZW5jaWxJRD0xLHRoaXMuY3VycmVudFN0ZW5jaWxTb3VyY2U9dm9pZCAwLHRoaXMuX3RpbGVDbGlwcGluZ01hc2tJRHM9e30sdGhpcy51c2VQcm9ncmFtKFwiY2xpcHBpbmdNYXNrXCIpLmRyYXcodCxpLlRSSUFOR0xFUyxlLkRlcHRoTW9kZS5kaXNhYmxlZCx0aGlzLnN0ZW5jaWxDbGVhck1vZGUsZS5Db2xvck1vZGUuZGlzYWJsZWQsZS5DdWxsRmFjZU1vZGUuZGlzYWJsZWQsQ2kodGhpcy5pZGVudGl0eU1hdCksXCIkY2xpcHBpbmdcIix0aGlzLnZpZXdwb3J0QnVmZmVyLHRoaXMucXVhZFRyaWFuZ2xlSW5kZXhCdWZmZXIsdGhpcy52aWV3cG9ydFNlZ21lbnRzKTt9cmVzZXRTdGVuY2lsQ2xpcHBpbmdNYXNrcygpe3RoaXMudGVycmFpbnx8KHRoaXMuY3VycmVudFN0ZW5jaWxTb3VyY2U9dm9pZCAwLHRoaXMuX3RpbGVDbGlwcGluZ01hc2tJRHM9e30pO31fcmVuZGVyVGlsZUNsaXBwaW5nTWFza3ModCxpLG8pe2lmKCFpfHx0aGlzLmN1cnJlbnRTdGVuY2lsU291cmNlPT09aS5pZHx8IXQuaXNUaWxlQ2xpcHBlZCgpfHwhb3x8MD09PW8ubGVuZ3RoKXJldHVybjtpZih0aGlzLl90aWxlQ2xpcHBpbmdNYXNrSURzJiYhdGhpcy50ZXJyYWluKXtsZXQgZT0hMTtmb3IoY29uc3QgdCBvZiBvKWlmKHZvaWQgMD09PXRoaXMuX3RpbGVDbGlwcGluZ01hc2tJRHNbdC5rZXldKXtlPSEwO2JyZWFrfWlmKCFlKXJldHVybn10aGlzLmN1cnJlbnRTdGVuY2lsU291cmNlPWkuaWQ7Y29uc3Qgcj10aGlzLmNvbnRleHQsbj1yLmdsO3RoaXMubmV4dFN0ZW5jaWxJRCtvLmxlbmd0aD4yNTYmJnRoaXMuY2xlYXJTdGVuY2lsKCksci5zZXRDb2xvck1vZGUoZS5Db2xvck1vZGUuZGlzYWJsZWQpLHIuc2V0RGVwdGhNb2RlKGUuRGVwdGhNb2RlLmRpc2FibGVkKTtjb25zdCBzPXRoaXMudXNlUHJvZ3JhbShcImNsaXBwaW5nTWFza1wiKTt0aGlzLl90aWxlQ2xpcHBpbmdNYXNrSURzPXt9O2Zvcihjb25zdCB0IG9mIG8pe2NvbnN0IG89aS5nZXRUaWxlKHQpLGE9dGhpcy5fdGlsZUNsaXBwaW5nTWFza0lEc1t0LmtleV09dGhpcy5uZXh0U3RlbmNpbElEKysse3RpbGVCb3VuZHNCdWZmZXI6bCx0aWxlQm91bmRzSW5kZXhCdWZmZXI6Yyx0aWxlQm91bmRzU2VnbWVudHM6aH09dGhpcy5nZXRUaWxlQm91bmRzQnVmZmVycyhvKTtzLmRyYXcocixuLlRSSUFOR0xFUyxlLkRlcHRoTW9kZS5kaXNhYmxlZCxuZXcgZS5TdGVuY2lsTW9kZSh7ZnVuYzpuLkFMV0FZUyxtYXNrOjB9LGEsMjU1LG4uS0VFUCxuLktFRVAsbi5SRVBMQUNFKSxlLkNvbG9yTW9kZS5kaXNhYmxlZCxlLkN1bGxGYWNlTW9kZS5kaXNhYmxlZCxDaSh0LnByb2pNYXRyaXgpLFwiJGNsaXBwaW5nXCIsbCxjLGgpO319c3RlbmNpbE1vZGVGb3IzRCgpe3RoaXMuY3VycmVudFN0ZW5jaWxTb3VyY2U9dm9pZCAwLHRoaXMubmV4dFN0ZW5jaWxJRCsxPjI1NiYmdGhpcy5jbGVhclN0ZW5jaWwoKTtjb25zdCB0PXRoaXMubmV4dFN0ZW5jaWxJRCsrLGk9dGhpcy5jb250ZXh0LmdsO3JldHVybiBuZXcgZS5TdGVuY2lsTW9kZSh7ZnVuYzppLk5PVEVRVUFMLG1hc2s6MjU1fSx0LDI1NSxpLktFRVAsaS5LRUVQLGkuUkVQTEFDRSl9c3RlbmNpbE1vZGVGb3JDbGlwcGluZyh0KXtpZih0aGlzLnRlcnJhaW4pcmV0dXJuIHRoaXMudGVycmFpbi5zdGVuY2lsTW9kZUZvclJUVE92ZXJsYXAodCk7Y29uc3QgaT10aGlzLmNvbnRleHQuZ2w7cmV0dXJuIG5ldyBlLlN0ZW5jaWxNb2RlKHtmdW5jOmkuRVFVQUwsbWFzazoyNTV9LHRoaXMuX3RpbGVDbGlwcGluZ01hc2tJRHNbdC5rZXldLDAsaS5LRUVQLGkuS0VFUCxpLlJFUExBQ0UpfXN0ZW5jaWxDb25maWdGb3JPdmVybGFwKHQpe2NvbnN0IGk9dGhpcy5jb250ZXh0LmdsLG89dC5zb3J0KCgoZSx0KT0+dC5vdmVyc2NhbGVkWi1lLm92ZXJzY2FsZWRaKSkscj1vW28ubGVuZ3RoLTFdLm92ZXJzY2FsZWRaLG49b1swXS5vdmVyc2NhbGVkWi1yKzE7aWYobj4xKXt0aGlzLmN1cnJlbnRTdGVuY2lsU291cmNlPXZvaWQgMCx0aGlzLm5leHRTdGVuY2lsSUQrbj4yNTYmJnRoaXMuY2xlYXJTdGVuY2lsKCk7Y29uc3QgdD17fTtmb3IobGV0IG89MDtvPG47bysrKXRbbytyXT1uZXcgZS5TdGVuY2lsTW9kZSh7ZnVuYzppLkdFUVVBTCxtYXNrOjI1NX0sbyt0aGlzLm5leHRTdGVuY2lsSUQsMjU1LGkuS0VFUCxpLktFRVAsaS5SRVBMQUNFKTtyZXR1cm4gdGhpcy5uZXh0U3RlbmNpbElEKz1uLFt0LG9dfXJldHVybiBbe1tyXTplLlN0ZW5jaWxNb2RlLmRpc2FibGVkfSxvXX1jb2xvck1vZGVGb3JSZW5kZXJQYXNzKCl7Y29uc3QgdD10aGlzLmNvbnRleHQuZ2w7aWYodGhpcy5fc2hvd092ZXJkcmF3SW5zcGVjdG9yKXtjb25zdCBpPTEvODtyZXR1cm4gbmV3IGUuQ29sb3JNb2RlKFt0LkNPTlNUQU5UX0NPTE9SLHQuT05FXSxuZXcgZS5Db2xvcihpLGksaSwwKSxbITAsITAsITAsITBdKX1yZXR1cm4gXCJvcGFxdWVcIj09PXRoaXMucmVuZGVyUGFzcz9lLkNvbG9yTW9kZS51bmJsZW5kZWQ6ZS5Db2xvck1vZGUuYWxwaGFCbGVuZGVkfWRlcHRoTW9kZUZvclN1YmxheWVyKHQsaSxvKXtpZighdGhpcy5vcGFxdWVQYXNzRW5hYmxlZEZvckxheWVyKCkpcmV0dXJuIGUuRGVwdGhNb2RlLmRpc2FibGVkO2NvbnN0IHI9MS0oKDErdGhpcy5jdXJyZW50TGF5ZXIpKnRoaXMubnVtU3VibGF5ZXJzK3QpKnRoaXMuZGVwdGhFcHNpbG9uO3JldHVybiBuZXcgZS5EZXB0aE1vZGUob3x8dGhpcy5jb250ZXh0LmdsLkxFUVVBTCxpLFtyLHJdKX1vcGFxdWVQYXNzRW5hYmxlZEZvckxheWVyKCl7cmV0dXJuIHRoaXMuY3VycmVudExheWVyPHRoaXMub3BhcXVlUGFzc0N1dG9mZn1yZW5kZXIodCxpKXt0aGlzLnN0eWxlPXQsdGhpcy5vcHRpb25zPWksdGhpcy5pbWFnZU1hbmFnZXI9dC5pbWFnZU1hbmFnZXIsdGhpcy5nbHlwaE1hbmFnZXI9dC5nbHlwaE1hbmFnZXIsdGhpcy5zeW1ib2xGYWRlQ2hhbmdlPXQucGxhY2VtZW50LnN5bWJvbEZhZGVDaGFuZ2UoZS5leHBvcnRlZC5ub3coKSksdGhpcy5pbWFnZU1hbmFnZXIuYmVnaW5GcmFtZSgpO2NvbnN0IG89dGhpcy5zdHlsZS5vcmRlcixyPXRoaXMuc3R5bGUuX3NvdXJjZUNhY2hlcztmb3IoY29uc3QgZSBpbiByKXtjb25zdCB0PXJbZV07dC51c2VkJiZ0LnByZXBhcmUodGhpcy5jb250ZXh0KTt9Y29uc3Qgbj17fSxzPXt9LGE9e307Zm9yKGNvbnN0IGUgaW4gcil7Y29uc3QgdD1yW2VdO25bZV09dC5nZXRWaXNpYmxlQ29vcmRpbmF0ZXMoKSxzW2VdPW5bZV0uc2xpY2UoKS5yZXZlcnNlKCksYVtlXT10LmdldFZpc2libGVDb29yZGluYXRlcyghMCkucmV2ZXJzZSgpO310aGlzLm9wYXF1ZVBhc3NDdXRvZmY9MS8wO2ZvcihsZXQgZT0wO2U8by5sZW5ndGg7ZSsrKWlmKHRoaXMuc3R5bGUuX2xheWVyc1tvW2VdXS5pczNEKCkpe3RoaXMub3BhcXVlUGFzc0N1dG9mZj1lO2JyZWFrfWlmKHRoaXMudGVycmFpbiYmKHRoaXMudGVycmFpbi51cGRhdGVUaWxlQmluZGluZyhhKSx0aGlzLm9wYXF1ZVBhc3NDdXRvZmY9MCksXCJnbG9iZVwiIT09dGhpcy50cmFuc2Zvcm0ucHJvamVjdGlvbi5uYW1lfHx0aGlzLmdsb2JlU2hhcmVkQnVmZmVyc3x8KHRoaXMuZ2xvYmVTaGFyZWRCdWZmZXJzPW5ldyBlLkdsb2JlU2hhcmVkQnVmZmVycyh0aGlzLmNvbnRleHQpKSwhZS5pc01hcEF1dGhlbnRpY2F0ZWQodGhpcy5jb250ZXh0LmdsKSlyZXR1cm47dGhpcy5yZW5kZXJQYXNzPVwib2Zmc2NyZWVuXCI7Zm9yKGNvbnN0IGUgb2Ygbyl7Y29uc3QgaT10aGlzLnN0eWxlLl9sYXllcnNbZV0sbz10Ll9nZXRMYXllclNvdXJjZUNhY2hlKGkpO2lmKCFpLmhhc09mZnNjcmVlblBhc3MoKXx8aS5pc0hpZGRlbih0aGlzLnRyYW5zZm9ybS56b29tKSljb250aW51ZTtjb25zdCByPW8/c1tvLmlkXTp2b2lkIDA7KFwiY3VzdG9tXCI9PT1pLnR5cGV8fGkuaXNTa3koKXx8ciYmci5sZW5ndGgpJiZ0aGlzLnJlbmRlckxheWVyKHRoaXMsbyxpLHIpO310aGlzLmRlcHRoUmFuZ2VGb3IzRD1bMCwxLSh0Lm9yZGVyLmxlbmd0aCsyKSp0aGlzLm51bVN1YmxheWVycyp0aGlzLmRlcHRoRXBzaWxvbl07Y29uc3QgbD10aGlzLnRlcnJhaW47aWYobCYmKHRoaXMuc3R5bGUuaGFzU3ltYm9sTGF5ZXJzKCl8fHRoaXMuc3R5bGUuaGFzQ2lyY2xlTGF5ZXJzKCkpJiZsLmRyYXdEZXB0aCgpLHRoaXMuY29udGV4dC5iaW5kRnJhbWVidWZmZXIuc2V0KG51bGwpLHRoaXMuY29udGV4dC52aWV3cG9ydC5zZXQoWzAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0XSksdGhpcy5jb250ZXh0LmNsZWFyKHtjb2xvcjppLnNob3dPdmVyZHJhd0luc3BlY3Rvcj9lLkNvbG9yLmJsYWNrOmUuQ29sb3IudHJhbnNwYXJlbnQsZGVwdGg6MX0pLHRoaXMuY2xlYXJTdGVuY2lsKCksdGhpcy5fc2hvd092ZXJkcmF3SW5zcGVjdG9yPWkuc2hvd092ZXJkcmF3SW5zcGVjdG9yLHRoaXMucmVuZGVyUGFzcz1cIm9wYXF1ZVwiLCF0aGlzLnRlcnJhaW4pZm9yKHRoaXMuY3VycmVudExheWVyPW8ubGVuZ3RoLTE7dGhpcy5jdXJyZW50TGF5ZXI+PTA7dGhpcy5jdXJyZW50TGF5ZXItLSl7Y29uc3QgZT10aGlzLnN0eWxlLl9sYXllcnNbb1t0aGlzLmN1cnJlbnRMYXllcl1dLGk9dC5fZ2V0TGF5ZXJTb3VyY2VDYWNoZShlKTtpZihlLmlzU2t5KCkpY29udGludWU7Y29uc3Qgcj1pP3NbaS5pZF06dm9pZCAwO3RoaXMuX3JlbmRlclRpbGVDbGlwcGluZ01hc2tzKGUsaSxyKSx0aGlzLnJlbmRlckxheWVyKHRoaXMsaSxlLHIpO31pZih0aGlzLnN0eWxlLmZvZyYmdGhpcy50cmFuc2Zvcm0ucHJvamVjdGlvbi5zdXBwb3J0c0ZvZyYmZnVuY3Rpb24odCxpKXtjb25zdCBvPXQuY29udGV4dCxyPW8uZ2wsbj10LnRyYW5zZm9ybSxzPW5ldyBlLkRlcHRoTW9kZShyLkxFUVVBTCxlLkRlcHRoTW9kZS5SZWFkT25seSxbMCwxXSksYT10LnVzZVByb2dyYW0oXCJnbG9iZUF0bW9zcGhlcmVcIixudWxsLFwiZ2xvYmVcIj09PW4ucHJvamVjdGlvbi5uYW1lP1tcIlBST0pFQ1RJT05fR0xPQkVfVklFV1wiLFwiRk9HXCJdOltcIkZPR1wiXSksbD1lLmdsb2JlVG9NZXJjYXRvclRyYW5zaXRpb24obi56b29tKSxjPWkucHJvcGVydGllcy5nZXQoXCJjb2xvclwiKS50b0FycmF5MDEoKSxoPWkucHJvcGVydGllcy5nZXQoXCJoaWdoLWNvbG9yXCIpLnRvQXJyYXkwMSgpLHU9aS5wcm9wZXJ0aWVzLmdldChcInNwYWNlLWNvbG9yXCIpLnRvQXJyYXkwMVByZW11bHRpcGxpZWRBbHBoYSgpLF89ZS5pZGVudGl0eSQxKFtdKTtlLnJvdGF0ZVkkMShfLF8sLWUuZGVnVG9SYWQobi5fY2VudGVyLmxuZykpLGUucm90YXRlWCQxKF8sXyxlLmRlZ1RvUmFkKG4uX2NlbnRlci5sYXQpKSxlLnJvdGF0ZVokMShfLF8sbi5hbmdsZSksZS5yb3RhdGVYJDEoXyxfLC1uLl9waXRjaCk7Y29uc3QgZD1lLmZyb21RdWF0KG5ldyBGbG9hdDMyQXJyYXkoMTYpLF8pLHA9ZS5tYXBWYWx1ZShpLnByb3BlcnRpZXMuZ2V0KFwic3Rhci1pbnRlbnNpdHlcIiksMCwxLDAsLjI1KSxtPTVlLTQsZj1lLm1hcFZhbHVlKGkucHJvcGVydGllcy5nZXQoXCJob3Jpem9uLWJsZW5kXCIpLDAsMSxtLC4yNSksZz1lLmdsb2JlVXNlQ3VzdG9tQW50aUFsaWFzaW5nKHQsbyxuKSYmZj09PW0/bi53b3JsZFNpemUvKDIqTWF0aC5QSSoxLjAyNSktMTpuLmdsb2JlUmFkaXVzLHY9dC5mcmFtZUNvdW50ZXIvMWUzJTEseD1lLmxlbmd0aChuLmdsb2JlQ2VudGVySW5WaWV3U3BhY2UpLHk9TWF0aC5zcXJ0KE1hdGgucG93KHgsMiktTWF0aC5wb3coZywyKSksYj1NYXRoLmFjb3MoeS94KSx3PSgodCxpLG8scixuLHMsYSxsLGMsaCx1LF8sZCxwKT0+KHt1X2ZydXN0dW1fdGw6dCx1X2ZydXN0dW1fdHI6aSx1X2ZydXN0dW1fYnI6byx1X2ZydXN0dW1fYmw6cix1X2hvcml6b246bix1X3RyYW5zaXRpb246cyx1X2ZhZGVvdXRfcmFuZ2U6YSx1X2NvbG9yOmwsdV9oaWdoX2NvbG9yOmMsdV9zcGFjZV9jb2xvcjpoLHVfc3Rhcl9pbnRlbnNpdHk6dSx1X3N0YXJfc2l6ZTo1KmUuZXhwb3J0ZWQuZGV2aWNlUGl4ZWxSYXRpbyx1X3N0YXJfZGVuc2l0eTowLHVfdGVtcG9yYWxfb2Zmc2V0Ol8sdV9ob3Jpem9uX2FuZ2xlOmQsdV9yb3RhdGlvbl9tYXRyaXg6cH0pKShuLmZydXN0dW1Db3JuZXJzLlRMLG4uZnJ1c3R1bUNvcm5lcnMuVFIsbi5mcnVzdHVtQ29ybmVycy5CUixuLmZydXN0dW1Db3JuZXJzLkJMLG4uZnJ1c3R1bUNvcm5lcnMuaG9yaXpvbixsLGYsYyxoLHUscCx2LGIsZCk7dC5wcmVwYXJlRHJhd1Byb2dyYW0obyxhKTtjb25zdCBUPXQuYXRtb3NwaGVyZUJ1ZmZlcjtUJiZhLmRyYXcobyxyLlRSSUFOR0xFUyxzLGUuU3RlbmNpbE1vZGUuZGlzYWJsZWQsZS5Db2xvck1vZGUuYWxwaGFCbGVuZGVkLGUuQ3VsbEZhY2VNb2RlLmJhY2tDVyx3LFwic2t5Ym94XCIsVC52ZXJ0ZXhCdWZmZXIsVC5pbmRleEJ1ZmZlcixULnNlZ21lbnRzKTt9KHRoaXMsdGhpcy5zdHlsZS5mb2cpLHRoaXMucmVuZGVyUGFzcz1cInNreVwiLChlLmdsb2JlVG9NZXJjYXRvclRyYW5zaXRpb24odGhpcy50cmFuc2Zvcm0uem9vbSk+MHx8XCJnbG9iZVwiIT09dGhpcy50cmFuc2Zvcm0ucHJvamVjdGlvbi5uYW1lKSYmdGhpcy50cmFuc2Zvcm0uaXNIb3Jpem9uVmlzaWJsZSgpKWZvcih0aGlzLmN1cnJlbnRMYXllcj0wO3RoaXMuY3VycmVudExheWVyPG8ubGVuZ3RoO3RoaXMuY3VycmVudExheWVyKyspe2NvbnN0IGU9dGhpcy5zdHlsZS5fbGF5ZXJzW29bdGhpcy5jdXJyZW50TGF5ZXJdXSxpPXQuX2dldExheWVyU291cmNlQ2FjaGUoZSk7ZS5pc1NreSgpJiZ0aGlzLnJlbmRlckxheWVyKHRoaXMsaSxlLGk/c1tpLmlkXTp2b2lkIDApO31mb3IodGhpcy5yZW5kZXJQYXNzPVwidHJhbnNsdWNlbnRcIix0aGlzLmN1cnJlbnRMYXllcj0wO3RoaXMuY3VycmVudExheWVyPG8ubGVuZ3RoOyl7Y29uc3QgZT10aGlzLnN0eWxlLl9sYXllcnNbb1t0aGlzLmN1cnJlbnRMYXllcl1dLGk9dC5fZ2V0TGF5ZXJTb3VyY2VDYWNoZShlKTtpZihlLmlzU2t5KCkpeysrdGhpcy5jdXJyZW50TGF5ZXI7Y29udGludWV9aWYodGhpcy50ZXJyYWluJiZ0aGlzLnN0eWxlLmlzTGF5ZXJEcmFwZWQoZSkpe2lmKGUuaXNIaWRkZW4odGhpcy50cmFuc2Zvcm0uem9vbSkpeysrdGhpcy5jdXJyZW50TGF5ZXI7Y29udGludWV9dGhpcy5jdXJyZW50TGF5ZXI9dGhpcy50ZXJyYWluLnJlbmRlckJhdGNoKHRoaXMuY3VycmVudExheWVyKTtjb250aW51ZX1jb25zdCByPWk/KFwic3ltYm9sXCI9PT1lLnR5cGU/YTpzKVtpLmlkXTp2b2lkIDA7dGhpcy5fcmVuZGVyVGlsZUNsaXBwaW5nTWFza3MoZSxpLGk/bltpLmlkXTp2b2lkIDApLHRoaXMucmVuZGVyTGF5ZXIodGhpcyxpLGUsciksKyt0aGlzLmN1cnJlbnRMYXllcjt9aWYodGhpcy50ZXJyYWluJiZ0aGlzLnRlcnJhaW4ucG9zdFJlbmRlcigpLHRoaXMub3B0aW9ucy5zaG93VGlsZUJvdW5kYXJpZXN8fHRoaXMub3B0aW9ucy5zaG93UXVlcnlHZW9tZXRyeXx8dGhpcy5vcHRpb25zLnNob3dUaWxlQUFCQnMpe2xldCBpPW51bGw7ZS52YWx1ZXModGhpcy5zdHlsZS5fbGF5ZXJzKS5mb3JFYWNoKChlPT57Y29uc3Qgbz10Ll9nZXRMYXllclNvdXJjZUNhY2hlKGUpO28mJiFlLmlzSGlkZGVuKHRoaXMudHJhbnNmb3JtLnpvb20pJiYoIWl8fGkuZ2V0U291cmNlKCkubWF4em9vbTxvLmdldFNvdXJjZSgpLm1heHpvb20pJiYoaT1vKTt9KSksaSYmdGhpcy5vcHRpb25zLnNob3dUaWxlQm91bmRhcmllcyYmT28uZGVidWcodGhpcyxpLGkuZ2V0VmlzaWJsZUNvb3JkaW5hdGVzKCkpO310aGlzLm9wdGlvbnMuc2hvd1BhZGRpbmcmJmZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS50cmFuc2Zvcm0ucGFkZGluZztDbyhlLGUudHJhbnNmb3JtLmhlaWdodC0odC50b3B8fDApLDMseG8pLENvKGUsdC5ib3R0b218fDAsMyx5byksTW8oZSx0LmxlZnR8fDAsMyxibyksTW8oZSxlLnRyYW5zZm9ybS53aWR0aC0odC5yaWdodHx8MCksMyx3byk7Y29uc3QgaT1lLnRyYW5zZm9ybS5jZW50ZXJQb2ludDshZnVuY3Rpb24oZSx0LGksbyl7SW8oZSx0LTEsaS0xMCwyLDIwLG8pLElvKGUsdC0xMCxpLTEsMjAsMixvKTt9KGUsaS54LGUudHJhbnNmb3JtLmhlaWdodC1pLnksVG8pO30odGhpcyksdGhpcy5jb250ZXh0LnNldERlZmF1bHQoKSx0aGlzLmZyYW1lQ291bnRlcj0odGhpcy5mcmFtZUNvdW50ZXIrMSklTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsdGhpcy50aWxlTG9hZGVkJiZ0aGlzLm9wdGlvbnMuc3BlZWRJbmRleFRpbWluZyYmKHRoaXMubG9hZFRpbWVTdGFtcHMucHVzaChlLndpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSksdGhpcy5zYXZlQ2FudmFzQ29weSgpKTt9cmVuZGVyTGF5ZXIoZSx0LGksbyl7aS5pc0hpZGRlbih0aGlzLnRyYW5zZm9ybS56b29tKXx8KFwiYmFja2dyb3VuZFwiPT09aS50eXBlfHxcInNreVwiPT09aS50eXBlfHxcImN1c3RvbVwiPT09aS50eXBlfHxvJiZvLmxlbmd0aCkmJih0aGlzLmlkPWkuaWQsdGhpcy5ncHVUaW1pbmdTdGFydChpKSwoIWUudHJhbnNmb3JtLnByb2plY3Rpb24udW5zdXBwb3J0ZWRMYXllcnN8fCFlLnRyYW5zZm9ybS5wcm9qZWN0aW9uLnVuc3VwcG9ydGVkTGF5ZXJzLmluY2x1ZGVzKGkudHlwZSl8fGUudGVycmFpbiYmXCJjdXN0b21cIj09PWkudHlwZSkmJk9vW2kudHlwZV0oZSx0LGksbyx0aGlzLnN0eWxlLnBsYWNlbWVudC52YXJpYWJsZU9mZnNldHMsdGhpcy5vcHRpb25zLmlzSW5pdGlhbExvYWQpLHRoaXMuZ3B1VGltaW5nRW5kKCkpO31ncHVUaW1pbmdTdGFydChlKXtpZighdGhpcy5vcHRpb25zLmdwdVRpbWluZylyZXR1cm47Y29uc3QgdD10aGlzLmNvbnRleHQuZXh0VGltZXJRdWVyeTtsZXQgaT10aGlzLmdwdVRpbWVyc1tlLmlkXTtpfHwoaT10aGlzLmdwdVRpbWVyc1tlLmlkXT17Y2FsbHM6MCxjcHVUaW1lOjAscXVlcnk6dC5jcmVhdGVRdWVyeUVYVCgpfSksaS5jYWxscysrLHQuYmVnaW5RdWVyeUVYVCh0LlRJTUVfRUxBUFNFRF9FWFQsaS5xdWVyeSk7fWdwdVRpbWluZ0RlZmVycmVkUmVuZGVyU3RhcnQoKXtpZih0aGlzLm9wdGlvbnMuZ3B1VGltaW5nRGVmZXJyZWRSZW5kZXIpe2NvbnN0IGU9dGhpcy5jb250ZXh0LmV4dFRpbWVyUXVlcnksdD1lLmNyZWF0ZVF1ZXJ5RVhUKCk7dGhpcy5kZWZlcnJlZFJlbmRlckdwdVRpbWVRdWVyaWVzLnB1c2godCksZS5iZWdpblF1ZXJ5RVhUKGUuVElNRV9FTEFQU0VEX0VYVCx0KTt9fWdwdVRpbWluZ0RlZmVycmVkUmVuZGVyRW5kKCl7aWYoIXRoaXMub3B0aW9ucy5ncHVUaW1pbmdEZWZlcnJlZFJlbmRlcilyZXR1cm47Y29uc3QgZT10aGlzLmNvbnRleHQuZXh0VGltZXJRdWVyeTtlLmVuZFF1ZXJ5RVhUKGUuVElNRV9FTEFQU0VEX0VYVCk7fWdwdVRpbWluZ0VuZCgpe2lmKCF0aGlzLm9wdGlvbnMuZ3B1VGltaW5nKXJldHVybjtjb25zdCBlPXRoaXMuY29udGV4dC5leHRUaW1lclF1ZXJ5O2UuZW5kUXVlcnlFWFQoZS5USU1FX0VMQVBTRURfRVhUKTt9Y29sbGVjdEdwdVRpbWVycygpe2NvbnN0IGU9dGhpcy5ncHVUaW1lcnM7cmV0dXJuIHRoaXMuZ3B1VGltZXJzPXt9LGV9Y29sbGVjdERlZmVycmVkUmVuZGVyR3B1UXVlcmllcygpe2NvbnN0IGU9dGhpcy5kZWZlcnJlZFJlbmRlckdwdVRpbWVRdWVyaWVzO3JldHVybiB0aGlzLmRlZmVycmVkUmVuZGVyR3B1VGltZVF1ZXJpZXM9W10sZX1xdWVyeUdwdVRpbWVycyhlKXtjb25zdCB0PXt9O2Zvcihjb25zdCBpIGluIGUpe2NvbnN0IG89ZVtpXSxyPXRoaXMuY29udGV4dC5leHRUaW1lclF1ZXJ5LG49ci5nZXRRdWVyeU9iamVjdEVYVChvLnF1ZXJ5LHIuUVVFUllfUkVTVUxUX0VYVCkvMWU2O3IuZGVsZXRlUXVlcnlFWFQoby5xdWVyeSksdFtpXT1uO31yZXR1cm4gdH1xdWVyeUdwdVRpbWVEZWZlcnJlZFJlbmRlcihlKXtpZighdGhpcy5vcHRpb25zLmdwdVRpbWluZ0RlZmVycmVkUmVuZGVyKXJldHVybiAwO2NvbnN0IHQ9dGhpcy5jb250ZXh0LmV4dFRpbWVyUXVlcnk7bGV0IGk9MDtmb3IoY29uc3QgbyBvZiBlKWkrPXQuZ2V0UXVlcnlPYmplY3RFWFQobyx0LlFVRVJZX1JFU1VMVF9FWFQpLzFlNix0LmRlbGV0ZVF1ZXJ5RVhUKG8pO3JldHVybiBpfXRyYW5zbGF0ZVBvc01hdHJpeCh0LGksbyxyLG4pe2lmKCFvWzBdJiYhb1sxXSlyZXR1cm4gdDtjb25zdCBzPW4/XCJtYXBcIj09PXI/dGhpcy50cmFuc2Zvcm0uYW5nbGU6MDpcInZpZXdwb3J0XCI9PT1yPy10aGlzLnRyYW5zZm9ybS5hbmdsZTowO2lmKHMpe2NvbnN0IGU9TWF0aC5zaW4ocyksdD1NYXRoLmNvcyhzKTtvPVtvWzBdKnQtb1sxXSplLG9bMF0qZStvWzFdKnRdO31jb25zdCBhPVtuP29bMF06RChpLG9bMF0sdGhpcy50cmFuc2Zvcm0uem9vbSksbj9vWzFdOkQoaSxvWzFdLHRoaXMudHJhbnNmb3JtLnpvb20pLDBdLGw9bmV3IEZsb2F0MzJBcnJheSgxNik7cmV0dXJuIGUudHJhbnNsYXRlKGwsdCxhKSxsfXNhdmVUaWxlVGV4dHVyZShlKXtjb25zdCB0PXRoaXMuX3RpbGVUZXh0dXJlc1tlLnNpemVbMF1dO3Q/dC5wdXNoKGUpOnRoaXMuX3RpbGVUZXh0dXJlc1tlLnNpemVbMF1dPVtlXTt9Z2V0VGlsZVRleHR1cmUoZSl7Y29uc3QgdD10aGlzLl90aWxlVGV4dHVyZXNbZV07cmV0dXJuIHQmJnQubGVuZ3RoPjA/dC5wb3AoKTpudWxsfWlzUGF0dGVybk1pc3NpbmcoZSl7cmV0dXJuIG51bGw9PT1lfHx2b2lkIDAhPT1lJiYhdGhpcy5pbWFnZU1hbmFnZXIuZ2V0UGF0dGVybihlLnRvU3RyaW5nKCkpfXRlcnJhaW5SZW5kZXJNb2RlRWxldmF0ZWQoKXtyZXR1cm4gdGhpcy5zdHlsZSYmISF0aGlzLnN0eWxlLmdldFRlcnJhaW4oKSYmISF0aGlzLnRlcnJhaW4mJiF0aGlzLnRlcnJhaW4ucmVuZGVyaW5nVG9UZXh0dXJlfWN1cnJlbnRHbG9iYWxEZWZpbmVzKCl7Y29uc3QgZT10aGlzLnRlcnJhaW4mJnRoaXMudGVycmFpbi5yZW5kZXJpbmdUb1RleHR1cmUsdD10aGlzLnRlcnJhaW4mJjA9PT10aGlzLnRlcnJhaW4uZXhhZ2dlcmF0aW9uKCksaT10aGlzLnN0eWxlJiZ0aGlzLnN0eWxlLmZvZyxvPVtdO3JldHVybiB0aGlzLnRlcnJhaW5SZW5kZXJNb2RlRWxldmF0ZWQoKSYmby5wdXNoKFwiVEVSUkFJTlwiKSxcImdsb2JlXCI9PT10aGlzLnRyYW5zZm9ybS5wcm9qZWN0aW9uLm5hbWUmJm8ucHVzaChcIkdMT0JFXCIpLHQmJm8ucHVzaChcIlpFUk9fRVhBR0dFUkFUSU9OXCIpLGkmJiFlJiYwIT09aS5nZXRPcGFjaXR5KHRoaXMudHJhbnNmb3JtLnBpdGNoKSYmby5wdXNoKFwiRk9HXCIpLGUmJm8ucHVzaChcIlJFTkRFUl9UT19URVhUVVJFXCIpLHRoaXMuX3Nob3dPdmVyZHJhd0luc3BlY3RvciYmby5wdXNoKFwiT1ZFUkRSQVdfSU5TUEVDVE9SXCIpLG99dXNlUHJvZ3JhbShlLHQsaSl7dGhpcy5jYWNoZT10aGlzLmNhY2hlfHx7fTtjb25zdCBvPWl8fFtdLHI9dGhpcy5jdXJyZW50R2xvYmFsRGVmaW5lcygpLmNvbmNhdChvKSxuPUxpLmNhY2hlS2V5KGNpW2VdLGUscix0KTtyZXR1cm4gdGhpcy5jYWNoZVtuXXx8KHRoaXMuY2FjaGVbbl09bmV3IExpKHRoaXMuY29udGV4dCxlLGNpW2VdLHQsc29bZV0scikpLHRoaXMuY2FjaGVbbl19c2V0Q3VzdG9tTGF5ZXJEZWZhdWx0cygpe3RoaXMuY29udGV4dC51bmJpbmRWQU8oKSx0aGlzLmNvbnRleHQuY3VsbEZhY2Uuc2V0RGVmYXVsdCgpLHRoaXMuY29udGV4dC5mcm9udEZhY2Uuc2V0RGVmYXVsdCgpLHRoaXMuY29udGV4dC5jdWxsRmFjZVNpZGUuc2V0RGVmYXVsdCgpLHRoaXMuY29udGV4dC5hY3RpdmVUZXh0dXJlLnNldERlZmF1bHQoKSx0aGlzLmNvbnRleHQucGl4ZWxTdG9yZVVucGFjay5zZXREZWZhdWx0KCksdGhpcy5jb250ZXh0LnBpeGVsU3RvcmVVbnBhY2tQcmVtdWx0aXBseUFscGhhLnNldERlZmF1bHQoKSx0aGlzLmNvbnRleHQucGl4ZWxTdG9yZVVucGFja0ZsaXBZLnNldERlZmF1bHQoKTt9c2V0QmFzZVN0YXRlKCl7Y29uc3QgZT10aGlzLmNvbnRleHQuZ2w7dGhpcy5jb250ZXh0LmN1bGxGYWNlLnNldCghMSksdGhpcy5jb250ZXh0LnZpZXdwb3J0LnNldChbMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHRdKSx0aGlzLmNvbnRleHQuYmxlbmRFcXVhdGlvbi5zZXQoZS5GVU5DX0FERCk7fWluaXREZWJ1Z092ZXJsYXlDYW52YXMoKXtudWxsPT10aGlzLmRlYnVnT3ZlcmxheUNhbnZhcyYmKHRoaXMuZGVidWdPdmVybGF5Q2FudmFzPWUud2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5kZWJ1Z092ZXJsYXlDYW52YXMud2lkdGg9NTEyLHRoaXMuZGVidWdPdmVybGF5Q2FudmFzLmhlaWdodD01MTIsdGhpcy5kZWJ1Z092ZXJsYXlUZXh0dXJlPW5ldyBlLlRleHR1cmUodGhpcy5jb250ZXh0LHRoaXMuZGVidWdPdmVybGF5Q2FudmFzLHRoaXMuY29udGV4dC5nbC5SR0JBKSk7fWRlc3Ryb3koKXt0aGlzLl90ZXJyYWluJiZ0aGlzLl90ZXJyYWluLmRlc3Ryb3koKSx0aGlzLmdsb2JlU2hhcmVkQnVmZmVycyYmdGhpcy5nbG9iZVNoYXJlZEJ1ZmZlcnMuZGVzdHJveSgpLHRoaXMuZW1wdHlUZXh0dXJlLmRlc3Ryb3koKSx0aGlzLmRlYnVnT3ZlcmxheVRleHR1cmUmJnRoaXMuZGVidWdPdmVybGF5VGV4dHVyZS5kZXN0cm95KCksdGhpcy5hdG1vc3BoZXJlQnVmZmVyJiZ0aGlzLmF0bW9zcGhlcmVCdWZmZXIuZGVzdHJveSgpO31wcmVwYXJlRHJhd1RpbGUoKXt0aGlzLnRlcnJhaW4mJnRoaXMudGVycmFpbi5wcmVwYXJlRHJhd1RpbGUoKTt9cHJlcGFyZURyYXdQcm9ncmFtKHQsaSxvKXtpZih0aGlzLnRlcnJhaW4mJnRoaXMudGVycmFpbi5yZW5kZXJpbmdUb1RleHR1cmUpcmV0dXJuO2NvbnN0IHI9dGhpcy5zdHlsZS5mb2c7aWYocil7Y29uc3Qgbj1yLmdldE9wYWNpdHkodGhpcy50cmFuc2Zvcm0ucGl0Y2gpLHM9KCh0LGksbyxyLG4scyxhLGwsYyxoLHUpPT57Y29uc3QgXz10LnRyYW5zZm9ybSxkPWkucHJvcGVydGllcy5nZXQoXCJjb2xvclwiKS50b0FycmF5MDEoKTtkWzNdPXI7Y29uc3QgcD10LmZyYW1lQ291bnRlci8xZTMlMTtyZXR1cm4ge3VfZm9nX21hdHJpeDpvP18uY2FsY3VsYXRlRm9nVGlsZU1hdHJpeChvKTp0LmlkZW50aXR5TWF0LHVfZm9nX3JhbmdlOmkuZ2V0Rm92QWRqdXN0ZWRSYW5nZShfLl9mb3YpLHVfZm9nX2NvbG9yOmQsdV9mb2dfaG9yaXpvbl9ibGVuZDppLnByb3BlcnRpZXMuZ2V0KFwiaG9yaXpvbi1ibGVuZFwiKSx1X2ZvZ190ZW1wb3JhbF9vZmZzZXQ6cCx1X2ZydXN0dW1fdGw6bix1X2ZydXN0dW1fdHI6cyx1X2ZydXN0dW1fYnI6YSx1X2ZydXN0dW1fYmw6bCx1X2dsb2JlX3BvczpjLHVfZ2xvYmVfcmFkaXVzOmgsdV92aWV3cG9ydDp1LHVfZ2xvYmVfdHJhbnNpdGlvbjplLmdsb2JlVG9NZXJjYXRvclRyYW5zaXRpb24oXy56b29tKSx1X2lzX2dsb2JlOisoXCJnbG9iZVwiPT09Xy5wcm9qZWN0aW9uLm5hbWUpfX0pKHRoaXMscixvLG4sdGhpcy50cmFuc2Zvcm0uZnJ1c3R1bUNvcm5lcnMuVEwsdGhpcy50cmFuc2Zvcm0uZnJ1c3R1bUNvcm5lcnMuVFIsdGhpcy50cmFuc2Zvcm0uZnJ1c3R1bUNvcm5lcnMuQlIsdGhpcy50cmFuc2Zvcm0uZnJ1c3R1bUNvcm5lcnMuQkwsdGhpcy50cmFuc2Zvcm0uZ2xvYmVDZW50ZXJJblZpZXdTcGFjZSx0aGlzLnRyYW5zZm9ybS5nbG9iZVJhZGl1cyxbdGhpcy50cmFuc2Zvcm0ud2lkdGgqZS5leHBvcnRlZC5kZXZpY2VQaXhlbFJhdGlvLHRoaXMudHJhbnNmb3JtLmhlaWdodCplLmV4cG9ydGVkLmRldmljZVBpeGVsUmF0aW9dKTtpLnNldEZvZ1VuaWZvcm1WYWx1ZXModCxzKTt9fXNldFRpbGVMb2FkZWRGbGFnKGUpe3RoaXMudGlsZUxvYWRlZD1lO31zYXZlQ2FudmFzQ29weSgpe2NvbnN0IGU9dGhpcy5jYW52YXNDb3B5KCk7ZSYmKHRoaXMuZnJhbWVDb3BpZXMucHVzaChlKSx0aGlzLnRpbGVMb2FkZWQ9ITEpO31jYW52YXNDb3B5KCl7Y29uc3QgZT10aGlzLmNvbnRleHQuZ2wsdD1lLmNyZWF0ZVRleHR1cmUoKTtyZXR1cm4gZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsdCksZS5jb3B5VGV4SW1hZ2UyRChlLlRFWFRVUkVfMkQsMCxlLlJHQkEsMCwwLGUuZHJhd2luZ0J1ZmZlcldpZHRoLGUuZHJhd2luZ0J1ZmZlckhlaWdodCwwKSx0fWdldENhbnZhc0NvcGllc0FuZFRpbWVzdGFtcHMoKXtyZXR1cm4ge2NhbnZhc0NvcGllczp0aGlzLmZyYW1lQ29waWVzLHRpbWVTdGFtcHM6dGhpcy5sb2FkVGltZVN0YW1wc319YXZlcmFnZUVsZXZhdGlvbk5lZWRzRWFzaW5nKCl7aWYoIXRoaXMudHJhbnNmb3JtLl9lbGV2YXRpb24pcmV0dXJuICExO2NvbnN0IGU9dGhpcy5zdHlsZSYmdGhpcy5zdHlsZS5mb2c7cmV0dXJuICEhZSYmMCE9PWUuZ2V0T3BhY2l0eSh0aGlzLnRyYW5zZm9ybS5waXRjaCl9Z2V0QmFja2dyb3VuZFRpbGVzKCl7Y29uc3QgdD10aGlzLl9iYWNrZ3JvdW5kVGlsZXMsaT10aGlzLl9iYWNrZ3JvdW5kVGlsZXM9e30sbz10aGlzLnRyYW5zZm9ybS5jb3ZlcmluZ1RpbGVzKHt0aWxlU2l6ZTo1MTJ9KTtmb3IoY29uc3QgciBvZiBvKWlbci5rZXldPXRbci5rZXldfHxuZXcgZS5UaWxlKHIsNTEyLHRoaXMudHJhbnNmb3JtLnRpbGVab29tLHRoaXMpO3JldHVybiBpfWNsZWFyQmFja2dyb3VuZFRpbGVzKCl7dGhpcy5fYmFja2dyb3VuZFRpbGVzPXt9O319Y2xhc3Mga297Y29uc3RydWN0b3IoZT0wLHQ9MCxpPTAsbz0wKXtpZihpc05hTihlKXx8ZTwwfHxpc05hTih0KXx8dDwwfHxpc05hTihpKXx8aTwwfHxpc05hTihvKXx8bzwwKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIGVkZ2UtaW5zZXRzLCB0b3AsIGJvdHRvbSwgbGVmdCBhbmQgcmlnaHQgbXVzdCBhbGwgYmUgbnVtYmVyc1wiKTt0aGlzLnRvcD1lLHRoaXMuYm90dG9tPXQsdGhpcy5sZWZ0PWksdGhpcy5yaWdodD1vO31pbnRlcnBvbGF0ZSh0LGksbyl7cmV0dXJuIG51bGwhPWkudG9wJiZudWxsIT10LnRvcCYmKHRoaXMudG9wPWUubnVtYmVyKHQudG9wLGkudG9wLG8pKSxudWxsIT1pLmJvdHRvbSYmbnVsbCE9dC5ib3R0b20mJih0aGlzLmJvdHRvbT1lLm51bWJlcih0LmJvdHRvbSxpLmJvdHRvbSxvKSksbnVsbCE9aS5sZWZ0JiZudWxsIT10LmxlZnQmJih0aGlzLmxlZnQ9ZS5udW1iZXIodC5sZWZ0LGkubGVmdCxvKSksbnVsbCE9aS5yaWdodCYmbnVsbCE9dC5yaWdodCYmKHRoaXMucmlnaHQ9ZS5udW1iZXIodC5yaWdodCxpLnJpZ2h0LG8pKSx0aGlzfWdldENlbnRlcih0LGkpe2NvbnN0IG89ZS5jbGFtcCgodGhpcy5sZWZ0K3QtdGhpcy5yaWdodCkvMiwwLHQpLHI9ZS5jbGFtcCgodGhpcy50b3AraS10aGlzLmJvdHRvbSkvMiwwLGkpO3JldHVybiBuZXcgZS5Qb2ludChvLHIpfWVxdWFscyhlKXtyZXR1cm4gdGhpcy50b3A9PT1lLnRvcCYmdGhpcy5ib3R0b209PT1lLmJvdHRvbSYmdGhpcy5sZWZ0PT09ZS5sZWZ0JiZ0aGlzLnJpZ2h0PT09ZS5yaWdodH1jbG9uZSgpe3JldHVybiBuZXcga28odGhpcy50b3AsdGhpcy5ib3R0b20sdGhpcy5sZWZ0LHRoaXMucmlnaHQpfXRvSlNPTigpe3JldHVybiB7dG9wOnRoaXMudG9wLGJvdHRvbTp0aGlzLmJvdHRvbSxsZWZ0OnRoaXMubGVmdCxyaWdodDp0aGlzLnJpZ2h0fX19ZnVuY3Rpb24gRm8odCxpKXtjb25zdCBvPWUuZ2V0Q29sdW1uKHQsMyk7ZS5mcm9tUXVhdCh0LGkpLGUuc2V0Q29sdW1uKHQsMyxvKTt9ZnVuY3Rpb24gVW8odCxpKXtjb25zdCBvPWUuaWRlbnRpdHkkMShbXSk7cmV0dXJuIGUucm90YXRlWiQxKG8sbywtaSksZS5yb3RhdGVYJDEobyxvLC10KSxvfWZ1bmN0aW9uIE5vKHQsaSl7Y29uc3Qgbz1bdFswXSx0WzFdLDBdLHI9W2lbMF0saVsxXSwwXTtpZihlLmxlbmd0aChvKT49MWUtMTUpe2NvbnN0IHQ9ZS5ub3JtYWxpemUoW10sbyk7ZS5zY2FsZSQyKHIsdCxlLmRvdChyLHQpKSxpWzBdPXJbMF0saVsxXT1yWzFdO31jb25zdCBuPWUuY3Jvc3MoW10saSx0KTtpZihlLmxlbihuKTwxZS0xNSlyZXR1cm4gbnVsbDtjb25zdCBzPU1hdGguYXRhbjIoLW5bMV0sblswXSk7cmV0dXJuIFVvKE1hdGguYXRhbjIoTWF0aC5zcXJ0KHRbMF0qdFswXSt0WzFdKnRbMV0pLC10WzJdKSxzKX1jbGFzcyBqb3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMucG9zaXRpb249ZSx0aGlzLm9yaWVudGF0aW9uPXQ7fWdldCBwb3NpdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvbn1zZXQgcG9zaXRpb24odCl7aWYodCl7Y29uc3QgaT10IGluc3RhbmNlb2YgZS5NZXJjYXRvckNvb3JkaW5hdGU/dDpuZXcgZS5NZXJjYXRvckNvb3JkaW5hdGUodFswXSx0WzFdLHRbMl0pO3RoaXMuX3JlbmRlcldvcmxkQ29waWVzJiYoaS54PWUud3JhcChpLngsMCwxKSksdGhpcy5fcG9zaXRpb249aTt9ZWxzZSB0aGlzLl9wb3NpdGlvbj1udWxsO31sb29rQXRQb2ludCh0LGkpe2lmKHRoaXMub3JpZW50YXRpb249bnVsbCwhdGhpcy5wb3NpdGlvbilyZXR1cm47Y29uc3Qgbz10aGlzLnBvc2l0aW9uLHI9dGhpcy5fZWxldmF0aW9uP3RoaXMuX2VsZXZhdGlvbi5nZXRBdFBvaW50T3JaZXJvKGUuTWVyY2F0b3JDb29yZGluYXRlLmZyb21MbmdMYXQodCkpOjAsbj1lLk1lcmNhdG9yQ29vcmRpbmF0ZS5mcm9tTG5nTGF0KHQscikscz1bbi54LW8ueCxuLnktby55LG4uei1vLnpdO2l8fChpPVswLDAsMV0pLGlbMl09TWF0aC5hYnMoaVsyXSksdGhpcy5vcmllbnRhdGlvbj1ObyhzLGkpO31zZXRQaXRjaEJlYXJpbmcodCxpKXt0aGlzLm9yaWVudGF0aW9uPVVvKGUuZGVnVG9SYWQodCksZS5kZWdUb1JhZCgtaSkpO319Y2xhc3MgR297Y29uc3RydWN0b3IodCxpKXt0aGlzLl90cmFuc2Zvcm09ZS5pZGVudGl0eShbXSksdGhpcy5vcmllbnRhdGlvbj1pLHRoaXMucG9zaXRpb249dDt9Z2V0IG1lcmNhdG9yUG9zaXRpb24oKXtjb25zdCB0PXRoaXMucG9zaXRpb247cmV0dXJuIG5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSh0WzBdLHRbMV0sdFsyXSl9Z2V0IHBvc2l0aW9uKCl7Y29uc3QgdD1lLmdldENvbHVtbih0aGlzLl90cmFuc2Zvcm0sMyk7cmV0dXJuIFt0WzBdLHRbMV0sdFsyXV19c2V0IHBvc2l0aW9uKHQpe3ZhciBpO3QmJmUuc2V0Q29sdW1uKHRoaXMuX3RyYW5zZm9ybSwzLFsoaT10KVswXSxpWzFdLGlbMl0sMV0pO31nZXQgb3JpZW50YXRpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb259c2V0IG9yaWVudGF0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uPXR8fGUuaWRlbnRpdHkkMShbXSksdCYmRm8odGhpcy5fdHJhbnNmb3JtLHRoaXMuX29yaWVudGF0aW9uKTt9Z2V0UGl0Y2hCZWFyaW5nKCl7Y29uc3QgZT10aGlzLmZvcndhcmQoKSx0PXRoaXMucmlnaHQoKTtyZXR1cm4ge2JlYXJpbmc6TWF0aC5hdGFuMigtdFsxXSx0WzBdKSxwaXRjaDpNYXRoLmF0YW4yKE1hdGguc3FydChlWzBdKmVbMF0rZVsxXSplWzFdKSwtZVsyXSl9fXNldFBpdGNoQmVhcmluZyhlLHQpe3RoaXMuX29yaWVudGF0aW9uPVVvKGUsdCksRm8odGhpcy5fdHJhbnNmb3JtLHRoaXMuX29yaWVudGF0aW9uKTt9Zm9yd2FyZCgpe2NvbnN0IHQ9ZS5nZXRDb2x1bW4odGhpcy5fdHJhbnNmb3JtLDIpO3JldHVybiBbLXRbMF0sLXRbMV0sLXRbMl1dfXVwKCl7Y29uc3QgdD1lLmdldENvbHVtbih0aGlzLl90cmFuc2Zvcm0sMSk7cmV0dXJuIFstdFswXSwtdFsxXSwtdFsyXV19cmlnaHQoKXtjb25zdCB0PWUuZ2V0Q29sdW1uKHRoaXMuX3RyYW5zZm9ybSwwKTtyZXR1cm4gW3RbMF0sdFsxXSx0WzJdXX1nZXRDYW1lcmFUb1dvcmxkKHQsaSl7Y29uc3Qgbz1uZXcgRmxvYXQ2NEFycmF5KDE2KTtyZXR1cm4gZS5pbnZlcnQobyx0aGlzLmdldFdvcmxkVG9DYW1lcmEodCxpKSksb31nZXRXb3JsZFRvQ2FtZXJhUG9zaXRpb24odCxpLG8pe2NvbnN0IHI9dGhpcy5wb3NpdGlvbjtlLnNjYWxlJDIocixyLC10KTtjb25zdCBuPW5ldyBGbG9hdDY0QXJyYXkoMTYpO3JldHVybiBlLmZyb21TY2FsaW5nKG4sW28sbyxvXSksZS50cmFuc2xhdGUobixuLHIpLG5bMTBdKj1pLG59Z2V0V29ybGRUb0NhbWVyYSh0LGkpe2NvbnN0IG89bmV3IEZsb2F0NjRBcnJheSgxNikscj1uZXcgRmxvYXQ2NEFycmF5KDQpLG49dGhpcy5wb3NpdGlvbjtyZXR1cm4gZS5jb25qdWdhdGUocix0aGlzLl9vcmllbnRhdGlvbiksZS5zY2FsZSQyKG4sbiwtdCksZS5mcm9tUXVhdChvLHIpLGUudHJhbnNsYXRlKG8sbyxuKSxvWzFdKj0tMSxvWzVdKj0tMSxvWzldKj0tMSxvWzEzXSo9LTEsb1s4XSo9aSxvWzldKj1pLG9bMTBdKj1pLG9bMTFdKj1pLG99Z2V0Q2FtZXJhVG9DbGlwUGVyc3BlY3RpdmUodCxpLG8scil7Y29uc3Qgbj1uZXcgRmxvYXQ2NEFycmF5KDE2KTtyZXR1cm4gZS5wZXJzcGVjdGl2ZShuLHQsaSxvLHIpLG59Z2V0RGlzdGFuY2VUb0VsZXZhdGlvbih0LGk9ITEpe2NvbnN0IG89MD09PXQ/MDplLm1lcmNhdG9yWmZyb21BbHRpdHVkZSh0LGk/ZS5sYXRGcm9tTWVyY2F0b3JZKHRoaXMucG9zaXRpb25bMV0pOnRoaXMucG9zaXRpb25bMV0pLHI9dGhpcy5mb3J3YXJkKCk7cmV0dXJuIChvLXRoaXMucG9zaXRpb25bMl0pL3JbMl19Y2xvbmUoKXtyZXR1cm4gbmV3IEdvKFsuLi50aGlzLnBvc2l0aW9uXSxbLi4udGhpcy5vcmllbnRhdGlvbl0pfX1mdW5jdGlvbiBabyh0LGkpe2NvbnN0IG89V28odC5wcm9qZWN0aW9uLHQuem9vbSx0LndpZHRoLHQuaGVpZ2h0KSxyPWZ1bmN0aW9uKHQsaSxvLHIsbil7Y29uc3Qgcz1uZXcgZS5MbmdMYXQoby5sbmctMTgwKlhvLG8ubGF0KSxhPW5ldyBlLkxuZ0xhdChvLmxuZysxODAqWG8sby5sYXQpLGw9dC5wcm9qZWN0KHMubG5nLHMubGF0KSxjPXQucHJvamVjdChhLmxuZyxhLmxhdCksaD0tTWF0aC5hdGFuMihjLnktbC55LGMueC1sLngpLHU9ZS5NZXJjYXRvckNvb3JkaW5hdGUuZnJvbUxuZ0xhdChvKTt1Lnk9ZS5jbGFtcCh1LnksLTErWG8sMS1Ybyk7Y29uc3QgXz11LnRvTG5nTGF0KCksZD10LnByb2plY3QoXy5sbmcsXy5sYXQpLHA9ZS5NZXJjYXRvckNvb3JkaW5hdGUuZnJvbUxuZ0xhdChfKTtwLngrPVhvO2NvbnN0IG09cC50b0xuZ0xhdCgpLGY9dC5wcm9qZWN0KG0ubG5nLG0ubGF0KSxnPSRvKGYueC1kLngsZi55LWQueSxoKSx2PWUuTWVyY2F0b3JDb29yZGluYXRlLmZyb21MbmdMYXQoXyk7di55Kz1Ybztjb25zdCB4PXYudG9MbmdMYXQoKSx5PXQucHJvamVjdCh4LmxuZyx4LmxhdCksYj0kbyh5LngtZC54LHkueS1kLnksaCksdz1NYXRoLmFicyhnLngpL01hdGguYWJzKGIueSksVD1lLmlkZW50aXR5KFtdKTtlLnJvdGF0ZVooVCxULC1oKigxLShuPzA6cikpKTtjb25zdCBFPWUuaWRlbnRpdHkoW10pO3JldHVybiBlLnNjYWxlKEUsRSxbMSwxLSgxLXcpKnIsMV0pLEVbNF09LWIueC9iLnkqcixlLnJvdGF0ZVooRSxFLGgpLGUubXVsdGlwbHkoRSxULEUpLEV9KHQucHJvamVjdGlvbiwwLHQuY2VudGVyLG8saSksbj1Wbyh0KTtyZXR1cm4gZS5zY2FsZShyLHIsW24sbiwxXSkscn1mdW5jdGlvbiBWbyh0KXtjb25zdCBpPXQucHJvamVjdGlvbixvPVdvKHQucHJvamVjdGlvbix0Lnpvb20sdC53aWR0aCx0LmhlaWdodCkscj1xbyhpLHQuY2VudGVyKSxuPXFvKGksZS5MbmdMYXQuY29udmVydChpLmNlbnRlcikpO3JldHVybiBNYXRoLnBvdygyLHIqbysoMS1vKSpuKX1mdW5jdGlvbiBXbyh0LGksbyxyLG49MS8wKXtjb25zdCBzPXQucmFuZ2U7aWYoIXMpcmV0dXJuIDA7Y29uc3QgYT1NYXRoLm1pbihuLE1hdGgubWF4KG8scikpLGw9TWF0aC5sb2coYS8xMDI0KS9NYXRoLkxOMjtyZXR1cm4gZS5zbW9vdGhzdGVwKHNbMF0rbCxzWzFdK2wsaSl9Y29uc3QgWG89MS80ZTQ7ZnVuY3Rpb24gcW8odCxpKXtjb25zdCBvPWUuY2xhbXAoaS5sYXQsLWUuTUFYX01FUkNBVE9SX0xBVElUVURFLGUuTUFYX01FUkNBVE9SX0xBVElUVURFKSxyPW5ldyBlLkxuZ0xhdChpLmxuZy0xODAqWG8sbyksbj1uZXcgZS5MbmdMYXQoaS5sbmcrMTgwKlhvLG8pLHM9dC5wcm9qZWN0KHIubG5nLG8pLGE9dC5wcm9qZWN0KG4ubG5nLG8pLGw9ZS5NZXJjYXRvckNvb3JkaW5hdGUuZnJvbUxuZ0xhdChyKSxjPWUuTWVyY2F0b3JDb29yZGluYXRlLmZyb21MbmdMYXQobiksaD1hLngtcy54LHU9YS55LXMueSxfPWMueC1sLngsZD1jLnktbC55LHA9TWF0aC5zcXJ0KChfKl8rZCpkKS8oaCpoK3UqdSkpO3JldHVybiBNYXRoLmxvZyhwKS9NYXRoLkxOMn1mdW5jdGlvbiAkbyhlLHQsaSl7Y29uc3Qgbz1NYXRoLmNvcyhpKSxyPU1hdGguc2luKGkpO3JldHVybiB7eDplKm8tdCpyLHk6ZSpyK3Qqb319Y2xhc3MgSG97Y29uc3RydWN0b3IodCxpLG8scixuLHMsYSl7dGhpcy50aWxlU2l6ZT01MTIsdGhpcy5fcmVuZGVyV29ybGRDb3BpZXM9dm9pZCAwPT09bnx8bix0aGlzLl9taW5ab29tPXR8fDAsdGhpcy5fbWF4Wm9vbT1pfHwyMix0aGlzLl9taW5QaXRjaD1udWxsPT1vPzA6byx0aGlzLl9tYXhQaXRjaD1udWxsPT1yPzYwOnIsdGhpcy5zZXRQcm9qZWN0aW9uKHMpLHRoaXMuc2V0TWF4Qm91bmRzKGEpLHRoaXMud2lkdGg9MCx0aGlzLmhlaWdodD0wLHRoaXMuX2NlbnRlcj1uZXcgZS5MbmdMYXQoMCwwKSx0aGlzLnpvb209MCx0aGlzLmFuZ2xlPTAsdGhpcy5fZm92PS42NDM1MDExMDg3OTMyODQ0LHRoaXMuX3BpdGNoPTAsdGhpcy5fbmVhclo9MCx0aGlzLl9mYXJaPTAsdGhpcy5fdW5tb2RpZmllZD0hMCx0aGlzLl9lZGdlSW5zZXRzPW5ldyBrbyx0aGlzLl9wcm9qTWF0cml4Q2FjaGU9e30sdGhpcy5fYWxpZ25lZFByb2pNYXRyaXhDYWNoZT17fSx0aGlzLl9mb2dUaWxlTWF0cml4Q2FjaGU9e30sdGhpcy5fZGlzdGFuY2VUaWxlRGF0YUNhY2hlPXt9LHRoaXMuX2NhbWVyYT1uZXcgR28sdGhpcy5fY2VudGVyQWx0aXR1ZGU9MCx0aGlzLl9hdmVyYWdlRWxldmF0aW9uPTAsdGhpcy5jYW1lcmFFbGV2YXRpb25SZWZlcmVuY2U9XCJncm91bmRcIix0aGlzLl9waXhlbHNQZXJNZXJjYXRvclBpeGVsPTEsdGhpcy5nbG9iZVJhZGl1cz0wLHRoaXMuZ2xvYmVDZW50ZXJJblZpZXdTcGFjZT1bMCwwLDBdLHRoaXMuX2hvcml6b25TaGlmdD0uMTt9Y2xvbmUoKXtjb25zdCBlPW5ldyBIbyh0aGlzLl9taW5ab29tLHRoaXMuX21heFpvb20sdGhpcy5fbWluUGl0Y2gsdGhpcy5tYXhQaXRjaCx0aGlzLl9yZW5kZXJXb3JsZENvcGllcyx0aGlzLmdldFByb2plY3Rpb24oKSk7cmV0dXJuIGUuX2VsZXZhdGlvbj10aGlzLl9lbGV2YXRpb24sZS5fY2VudGVyQWx0aXR1ZGU9dGhpcy5fY2VudGVyQWx0aXR1ZGUsZS5fY2VudGVyQWx0aXR1ZGVWYWxpZEZvckV4YWdnZXJhdGlvbj10aGlzLl9jZW50ZXJBbHRpdHVkZVZhbGlkRm9yRXhhZ2dlcmF0aW9uLGUudGlsZVNpemU9dGhpcy50aWxlU2l6ZSxlLm1lcmNhdG9yRnJvbVRyYW5zaXRpb249dGhpcy5tZXJjYXRvckZyb21UcmFuc2l0aW9uLGUud2lkdGg9dGhpcy53aWR0aCxlLmhlaWdodD10aGlzLmhlaWdodCxlLmNhbWVyYUVsZXZhdGlvblJlZmVyZW5jZT10aGlzLmNhbWVyYUVsZXZhdGlvblJlZmVyZW5jZSxlLl9jZW50ZXI9dGhpcy5fY2VudGVyLGUuX3NldFpvb20odGhpcy56b29tKSxlLl9zZWFMZXZlbFpvb209dGhpcy5fc2VhTGV2ZWxab29tLGUuYW5nbGU9dGhpcy5hbmdsZSxlLl9mb3Y9dGhpcy5fZm92LGUuX3BpdGNoPXRoaXMuX3BpdGNoLGUuX25lYXJaPXRoaXMuX25lYXJaLGUuX2Zhclo9dGhpcy5fZmFyWixlLl9hdmVyYWdlRWxldmF0aW9uPXRoaXMuX2F2ZXJhZ2VFbGV2YXRpb24sZS5fdW5tb2RpZmllZD10aGlzLl91bm1vZGlmaWVkLGUuX2VkZ2VJbnNldHM9dGhpcy5fZWRnZUluc2V0cy5jbG9uZSgpLGUuX2NhbWVyYT10aGlzLl9jYW1lcmEuY2xvbmUoKSxlLl9jYWxjTWF0cmljZXMoKSxlLmZyZWV6ZVRpbGVDb3ZlcmFnZT10aGlzLmZyZWV6ZVRpbGVDb3ZlcmFnZSxlLmZydXN0dW1Db3JuZXJzPXRoaXMuZnJ1c3R1bUNvcm5lcnMsZX1nZXQgZWxldmF0aW9uKCl7cmV0dXJuIHRoaXMuX2VsZXZhdGlvbn1zZXQgZWxldmF0aW9uKGUpe3RoaXMuX2VsZXZhdGlvbiE9PWUmJih0aGlzLl9lbGV2YXRpb249ZSx0aGlzLl91cGRhdGVDYW1lcmFPblRlcnJhaW4oKSx0aGlzLl9jYWxjTWF0cmljZXMoKSk7fXVwZGF0ZUVsZXZhdGlvbihlLHQ9ITEpe2NvbnN0IGk9dGhpcy5fZWxldmF0aW9uJiZ0aGlzLl9lbGV2YXRpb24uZXhhZ2dlcmF0aW9uKCkhPT10aGlzLl9jZW50ZXJBbHRpdHVkZVZhbGlkRm9yRXhhZ2dlcmF0aW9uOyhudWxsPT10aGlzLl9zZWFMZXZlbFpvb218fGkpJiZ0aGlzLl91cGRhdGVDYW1lcmFPblRlcnJhaW4oKSwoZXx8aSkmJnRoaXMuX2NvbnN0cmFpbkNhbWVyYSh0KSx0aGlzLl9jYWxjTWF0cmljZXMoKTt9Z2V0UHJvamVjdGlvbigpe3JldHVybiBlLnBpY2sodGhpcy5wcm9qZWN0aW9uLFtcIm5hbWVcIixcImNlbnRlclwiLFwicGFyYWxsZWxzXCJdKX1zZXRQcm9qZWN0aW9uKGkpe3RoaXMucHJvamVjdGlvbk9wdGlvbnM9aXx8e25hbWU6XCJtZXJjYXRvclwifTtjb25zdCBvPXRoaXMucHJvamVjdGlvbj90aGlzLmdldFByb2plY3Rpb24oKTp2b2lkIDA7dGhpcy5wcm9qZWN0aW9uPWUuZ2V0UHJvamVjdGlvbih0aGlzLnByb2plY3Rpb25PcHRpb25zKTtjb25zdCByPSF0KG8sdGhpcy5nZXRQcm9qZWN0aW9uKCkpO3JldHVybiByJiZ0aGlzLl9jYWxjTWF0cmljZXMoKSx0aGlzLm1lcmNhdG9yRnJvbVRyYW5zaXRpb249ITEscn1zZXRNZXJjYXRvckZyb21UcmFuc2l0aW9uKCl7Y29uc3QgdD10aGlzLnByb2plY3Rpb24ubmFtZTt0aGlzLm1lcmNhdG9yRnJvbVRyYW5zaXRpb249ITAsdGhpcy5wcm9qZWN0aW9uT3B0aW9ucz17bmFtZTpcIm1lcmNhdG9yXCJ9LHRoaXMucHJvamVjdGlvbj1lLmdldFByb2plY3Rpb24oe25hbWU6XCJtZXJjYXRvclwifSk7Y29uc3QgaT10IT09dGhpcy5wcm9qZWN0aW9uLm5hbWU7cmV0dXJuIGkmJnRoaXMuX2NhbGNNYXRyaWNlcygpLGl9Z2V0IG1pblpvb20oKXtyZXR1cm4gdGhpcy5fbWluWm9vbX1zZXQgbWluWm9vbShlKXt0aGlzLl9taW5ab29tIT09ZSYmKHRoaXMuX21pblpvb209ZSx0aGlzLnpvb209TWF0aC5tYXgodGhpcy56b29tLGUpKTt9Z2V0IG1heFpvb20oKXtyZXR1cm4gdGhpcy5fbWF4Wm9vbX1zZXQgbWF4Wm9vbShlKXt0aGlzLl9tYXhab29tIT09ZSYmKHRoaXMuX21heFpvb209ZSx0aGlzLnpvb209TWF0aC5taW4odGhpcy56b29tLGUpKTt9Z2V0IG1pblBpdGNoKCl7cmV0dXJuIHRoaXMuX21pblBpdGNofXNldCBtaW5QaXRjaChlKXt0aGlzLl9taW5QaXRjaCE9PWUmJih0aGlzLl9taW5QaXRjaD1lLHRoaXMucGl0Y2g9TWF0aC5tYXgodGhpcy5waXRjaCxlKSk7fWdldCBtYXhQaXRjaCgpe3JldHVybiB0aGlzLl9tYXhQaXRjaH1zZXQgbWF4UGl0Y2goZSl7dGhpcy5fbWF4UGl0Y2ghPT1lJiYodGhpcy5fbWF4UGl0Y2g9ZSx0aGlzLnBpdGNoPU1hdGgubWluKHRoaXMucGl0Y2gsZSkpO31nZXQgcmVuZGVyV29ybGRDb3BpZXMoKXtyZXR1cm4gdGhpcy5fcmVuZGVyV29ybGRDb3BpZXMmJiEwPT09dGhpcy5wcm9qZWN0aW9uLnN1cHBvcnRzV29ybGRDb3BpZXN9c2V0IHJlbmRlcldvcmxkQ29waWVzKGUpe3ZvaWQgMD09PWU/ZT0hMDpudWxsPT09ZSYmKGU9ITEpLHRoaXMuX3JlbmRlcldvcmxkQ29waWVzPWU7fWdldCB3b3JsZFNpemUoKXtyZXR1cm4gdGhpcy50aWxlU2l6ZSp0aGlzLnNjYWxlfWdldCBjYW1lcmFXb3JsZFNpemVGb3JGb2coKXtjb25zdCBlPU1hdGgubWF4KHRoaXMuX2NhbWVyYS5nZXREaXN0YW5jZVRvRWxldmF0aW9uKHRoaXMuX2F2ZXJhZ2VFbGV2YXRpb24pLE51bWJlci5FUFNJTE9OKTtyZXR1cm4gdGhpcy5fd29ybGRTaXplRnJvbVpvb20odGhpcy5fem9vbUZyb21NZXJjYXRvclooZSkpfWdldCBjYW1lcmFXb3JsZFNpemUoKXtjb25zdCBlPU1hdGgubWF4KHRoaXMuX2NhbWVyYS5nZXREaXN0YW5jZVRvRWxldmF0aW9uKHRoaXMuX2F2ZXJhZ2VFbGV2YXRpb24sITApLE51bWJlci5FUFNJTE9OKTtyZXR1cm4gdGhpcy5fd29ybGRTaXplRnJvbVpvb20odGhpcy5fem9vbUZyb21NZXJjYXRvclooZSkpfWdldCBwaXhlbHNQZXJNZXRlcigpe3JldHVybiB0aGlzLnByb2plY3Rpb24ucGl4ZWxzUGVyTWV0ZXIodGhpcy5jZW50ZXIubGF0LHRoaXMud29ybGRTaXplKX1nZXQgY2FtZXJhUGl4ZWxzUGVyTWV0ZXIoKXtyZXR1cm4gZS5tZXJjYXRvclpmcm9tQWx0aXR1ZGUodGhpcy5jZW50ZXIubGF0LHRoaXMuY2FtZXJhV29ybGRTaXplRm9yRm9nKX1nZXQgY2VudGVyT2Zmc2V0KCl7cmV0dXJuIHRoaXMuY2VudGVyUG9pbnQuX3N1Yih0aGlzLnNpemUuX2RpdigyKSl9Z2V0IHNpemUoKXtyZXR1cm4gbmV3IGUuUG9pbnQodGhpcy53aWR0aCx0aGlzLmhlaWdodCl9Z2V0IGJlYXJpbmcoKXtyZXR1cm4gZS53cmFwKHRoaXMucm90YXRpb24sLTE4MCwxODApfXNldCBiZWFyaW5nKGUpe3RoaXMucm90YXRpb249ZTt9Z2V0IHJvdGF0aW9uKCl7cmV0dXJuIC10aGlzLmFuZ2xlL01hdGguUEkqMTgwfXNldCByb3RhdGlvbih0KXtjb25zdCBpPS10Kk1hdGguUEkvMTgwO3ZhciBvO3RoaXMuYW5nbGUhPT1pJiYodGhpcy5fdW5tb2RpZmllZD0hMSx0aGlzLmFuZ2xlPWksdGhpcy5fY2FsY01hdHJpY2VzKCksdGhpcy5yb3RhdGlvbk1hdHJpeD0obz1uZXcgZS5BUlJBWV9UWVBFKDQpLGUuQVJSQVlfVFlQRSE9RmxvYXQzMkFycmF5JiYob1sxXT0wLG9bMl09MCksb1swXT0xLG9bM109MSxvKSxmdW5jdGlvbihlLHQsaSl7dmFyIG89dFswXSxyPXRbMV0sbj10WzJdLHM9dFszXSxhPU1hdGguc2luKGkpLGw9TWF0aC5jb3MoaSk7ZVswXT1vKmwrbiphLGVbMV09cipsK3MqYSxlWzJdPW8qLWErbipsLGVbM109ciotYStzKmw7fSh0aGlzLnJvdGF0aW9uTWF0cml4LHRoaXMucm90YXRpb25NYXRyaXgsdGhpcy5hbmdsZSkpO31nZXQgcGl0Y2goKXtyZXR1cm4gdGhpcy5fcGl0Y2gvTWF0aC5QSSoxODB9c2V0IHBpdGNoKHQpe2NvbnN0IGk9ZS5jbGFtcCh0LHRoaXMubWluUGl0Y2gsdGhpcy5tYXhQaXRjaCkvMTgwKk1hdGguUEk7dGhpcy5fcGl0Y2ghPT1pJiYodGhpcy5fdW5tb2RpZmllZD0hMSx0aGlzLl9waXRjaD1pLHRoaXMuX2NhbGNNYXRyaWNlcygpKTt9Z2V0IGFzcGVjdCgpe3JldHVybiB0aGlzLndpZHRoL3RoaXMuaGVpZ2h0fWdldCBmb3YoKXtyZXR1cm4gdGhpcy5fZm92L01hdGguUEkqMTgwfWdldCBmb3ZYKCl7cmV0dXJuIHRoaXMuX2Zvdn1nZXQgZm92WSgpe2NvbnN0IGU9MS9NYXRoLnRhbiguNSp0aGlzLmZvdlgpO3JldHVybiAyKk1hdGguYXRhbigxL3RoaXMuYXNwZWN0L2UpfXNldCBmb3YodCl7dD1NYXRoLm1heCguMDEsTWF0aC5taW4oNjAsdCkpLHRoaXMuX2ZvdiE9PXQmJih0aGlzLl91bm1vZGlmaWVkPSExLHRoaXMuX2Zvdj1lLmRlZ1RvUmFkKHQpLHRoaXMuX2NhbGNNYXRyaWNlcygpKTt9Z2V0IGF2ZXJhZ2VFbGV2YXRpb24oKXtyZXR1cm4gdGhpcy5fYXZlcmFnZUVsZXZhdGlvbn1zZXQgYXZlcmFnZUVsZXZhdGlvbihlKXt0aGlzLl9hdmVyYWdlRWxldmF0aW9uPWUsdGhpcy5fY2FsY0ZvZ01hdHJpY2VzKCksdGhpcy5fZGlzdGFuY2VUaWxlRGF0YUNhY2hlPXt9O31nZXQgem9vbSgpe3JldHVybiB0aGlzLl96b29tfXNldCB6b29tKGUpe2NvbnN0IHQ9TWF0aC5taW4oTWF0aC5tYXgoZSx0aGlzLm1pblpvb20pLHRoaXMubWF4Wm9vbSk7dGhpcy5fem9vbSE9PXQmJih0aGlzLl91bm1vZGlmaWVkPSExLHRoaXMuX3NldFpvb20odCksdGhpcy5fdXBkYXRlU2VhTGV2ZWxab29tKCksdGhpcy5fY29uc3RyYWluKCksdGhpcy5fY2FsY01hdHJpY2VzKCkpO31fc2V0Wm9vbShlKXt0aGlzLl96b29tPWUsdGhpcy5zY2FsZT10aGlzLnpvb21TY2FsZShlKSx0aGlzLnRpbGVab29tPU1hdGguZmxvb3IoZSksdGhpcy56b29tRnJhY3Rpb249ZS10aGlzLnRpbGVab29tO31fdXBkYXRlQ2FtZXJhT25UZXJyYWluKCl7aWYoIXRoaXMuX2VsZXZhdGlvbnx8IXRoaXMuX2VsZXZhdGlvbi5pc0RhdGFBdmFpbGFibGVBdFBvaW50KHRoaXMubG9jYXRpb25Db29yZGluYXRlKHRoaXMuY2VudGVyKSkpcmV0dXJuIHRoaXMuX2NlbnRlckFsdGl0dWRlPTAsdGhpcy5fc2VhTGV2ZWxab29tPW51bGwsdm9pZCh0aGlzLl9jZW50ZXJBbHRpdHVkZVZhbGlkRm9yRXhhZ2dlcmF0aW9uPXZvaWQgMCk7Y29uc3QgZT10aGlzLl9lbGV2YXRpb247dGhpcy5fY2VudGVyQWx0aXR1ZGU9ZS5nZXRBdFBvaW50T3JaZXJvKHRoaXMubG9jYXRpb25Db29yZGluYXRlKHRoaXMuY2VudGVyKSksdGhpcy5fY2VudGVyQWx0aXR1ZGVWYWxpZEZvckV4YWdnZXJhdGlvbj1lLmV4YWdnZXJhdGlvbigpLHRoaXMuX3VwZGF0ZVNlYUxldmVsWm9vbSgpO31fdXBkYXRlU2VhTGV2ZWxab29tKCl7dm9pZCAwIT09dGhpcy5fY2VudGVyQWx0aXR1ZGVWYWxpZEZvckV4YWdnZXJhdGlvbiYmKHRoaXMuX3NlYUxldmVsWm9vbT10aGlzLl96b29tRnJvbU1lcmNhdG9yWigodGhpcy5waXhlbHNQZXJNZXRlcip0aGlzLl9jZW50ZXJBbHRpdHVkZSt0aGlzLmNhbWVyYVRvQ2VudGVyRGlzdGFuY2UpL3RoaXMud29ybGRTaXplKSk7fXNhbXBsZUF2ZXJhZ2VFbGV2YXRpb24oKXtpZighdGhpcy5fZWxldmF0aW9uKXJldHVybiAwO2NvbnN0IHQ9dGhpcy5fZWxldmF0aW9uLGk9W1suNSwuMl0sWy4zLC41XSxbLjUsLjVdLFsuNywuNV0sWy41LC44XV0sbz10aGlzLmhvcml6b25MaW5lRnJvbVRvcCgpO2xldCByPTAsbj0wO2ZvcihsZXQgcz0wO3M8aS5sZW5ndGg7cysrKXtjb25zdCBhPW5ldyBlLlBvaW50KGlbc11bMF0qdGhpcy53aWR0aCxvK2lbc11bMV0qKHRoaXMuaGVpZ2h0LW8pKSxsPXQucG9pbnRDb29yZGluYXRlKGEpO2lmKCFsKWNvbnRpbnVlO2NvbnN0IGM9MS9NYXRoLmh5cG90KGxbMF0tdGhpcy5fY2FtZXJhLnBvc2l0aW9uWzBdLGxbMV0tdGhpcy5fY2FtZXJhLnBvc2l0aW9uWzFdKTtyKz1sWzNdKmMsbis9Yzt9cmV0dXJuIDA9PT1uP05hTjpyL259Z2V0IGNlbnRlcigpe3JldHVybiB0aGlzLl9jZW50ZXJ9c2V0IGNlbnRlcihlKXtlLmxhdD09PXRoaXMuX2NlbnRlci5sYXQmJmUubG5nPT09dGhpcy5fY2VudGVyLmxuZ3x8KHRoaXMuX3VubW9kaWZpZWQ9ITEsdGhpcy5fY2VudGVyPWUsdGhpcy5fdGVycmFpbkVuYWJsZWQoKSYmKFwiZ3JvdW5kXCI9PT10aGlzLmNhbWVyYUVsZXZhdGlvblJlZmVyZW5jZT90aGlzLl91cGRhdGVDYW1lcmFPblRlcnJhaW4oKTp0aGlzLl91cGRhdGVab29tRnJvbUVsZXZhdGlvbigpKSx0aGlzLl9jb25zdHJhaW4oKSx0aGlzLl9jYWxjTWF0cmljZXMoKSk7fV91cGRhdGVab29tRnJvbUVsZXZhdGlvbigpe2lmKG51bGw9PXRoaXMuX3NlYUxldmVsWm9vbXx8IXRoaXMuX2VsZXZhdGlvbilyZXR1cm47Y29uc3QgZT10aGlzLl9zZWFMZXZlbFpvb20sdD10aGlzLl9lbGV2YXRpb24uZ2V0QXRQb2ludE9yWmVybyh0aGlzLmxvY2F0aW9uQ29vcmRpbmF0ZSh0aGlzLmNlbnRlcikpLGk9dGhpcy5waXhlbHNQZXJNZXRlci90aGlzLndvcmxkU2l6ZSp0LG89dGhpcy5fbWVyY2F0b3JaZnJvbVpvb20oZSkscj10aGlzLl9tZXJjYXRvclpmcm9tWm9vbSh0aGlzLl9tYXhab29tKSxuPU1hdGgubWF4KG8taSxyKTt0aGlzLl9zZXRab29tKHRoaXMuX3pvb21Gcm9tTWVyY2F0b3JaKG4pKTt9Z2V0IHBhZGRpbmcoKXtyZXR1cm4gdGhpcy5fZWRnZUluc2V0cy50b0pTT04oKX1zZXQgcGFkZGluZyhlKXt0aGlzLl9lZGdlSW5zZXRzLmVxdWFscyhlKXx8KHRoaXMuX3VubW9kaWZpZWQ9ITEsdGhpcy5fZWRnZUluc2V0cy5pbnRlcnBvbGF0ZSh0aGlzLl9lZGdlSW5zZXRzLGUsMSksdGhpcy5fY2FsY01hdHJpY2VzKCkpO31jb21wdXRlWm9vbVJlbGF0aXZlVG8odCl7Y29uc3QgaT10aGlzLnJheUludGVyc2VjdGlvbkNvb3JkaW5hdGUodGhpcy5wb2ludFJheUludGVyc2VjdGlvbih0aGlzLmNlbnRlclBvaW50LHQudG9BbHRpdHVkZSgpKSk7bGV0IG87bz10Lno8dGhpcy5fY2FtZXJhLnBvc2l0aW9uWzJdP1tpLngsaS55LGkuel06W3QueCx0LnksdC56XTtjb25zdCByPWUubGVuZ3RoKGUuc3ViKFtdLHRoaXMuX2NhbWVyYS5wb3NpdGlvbixvKSk7cmV0dXJuIGUuY2xhbXAodGhpcy5fem9vbUZyb21NZXJjYXRvcloociksdGhpcy5fbWluWm9vbSx0aGlzLl9tYXhab29tKX1zZXRGcmVlQ2FtZXJhT3B0aW9ucyh0KXtpZighdGhpcy5oZWlnaHQpcmV0dXJuO2lmKCF0LnBvc2l0aW9uJiYhdC5vcmllbnRhdGlvbilyZXR1cm47dGhpcy5fdXBkYXRlQ2FtZXJhU3RhdGUoKTtsZXQgaT0hMTtpZih0Lm9yaWVudGF0aW9uJiYhZS5leGFjdEVxdWFscyh0Lm9yaWVudGF0aW9uLHRoaXMuX2NhbWVyYS5vcmllbnRhdGlvbikmJihpPXRoaXMuX3NldENhbWVyYU9yaWVudGF0aW9uKHQub3JpZW50YXRpb24pKSx0LnBvc2l0aW9uKXtjb25zdCBvPVt0LnBvc2l0aW9uLngsdC5wb3NpdGlvbi55LHQucG9zaXRpb24uel07ZS5leGFjdEVxdWFscyQxKG8sdGhpcy5fY2FtZXJhLnBvc2l0aW9uKXx8KHRoaXMuX3NldENhbWVyYVBvc2l0aW9uKG8pLGk9ITApO31pJiYodGhpcy5fdXBkYXRlU3RhdGVGcm9tQ2FtZXJhKCksdGhpcy5yZWNlbnRlck9uVGVycmFpbigpKTt9Z2V0RnJlZUNhbWVyYU9wdGlvbnMoKXt0aGlzLl91cGRhdGVDYW1lcmFTdGF0ZSgpO2NvbnN0IHQ9dGhpcy5fY2FtZXJhLnBvc2l0aW9uLGk9bmV3IGpvO3JldHVybiBpLnBvc2l0aW9uPW5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSh0WzBdLHRbMV0sdFsyXSksaS5vcmllbnRhdGlvbj10aGlzLl9jYW1lcmEub3JpZW50YXRpb24saS5fZWxldmF0aW9uPXRoaXMuZWxldmF0aW9uLGkuX3JlbmRlcldvcmxkQ29waWVzPXRoaXMucmVuZGVyV29ybGRDb3BpZXMsaX1fc2V0Q2FtZXJhT3JpZW50YXRpb24odCl7aWYoIWUubGVuZ3RoJDEodCkpcmV0dXJuICExO2Uubm9ybWFsaXplJDEodCx0KTtjb25zdCBpPWUudHJhbnNmb3JtUXVhdChbXSxbMCwwLC0xXSx0KSxvPWUudHJhbnNmb3JtUXVhdChbXSxbMCwtMSwwXSx0KTtpZihvWzJdPDApcmV0dXJuICExO2NvbnN0IHI9Tm8oaSxvKTtyZXR1cm4gISFyJiYodGhpcy5fY2FtZXJhLm9yaWVudGF0aW9uPXIsITApfV9zZXRDYW1lcmFQb3NpdGlvbih0KXtjb25zdCBpPXRoaXMuem9vbVNjYWxlKHRoaXMubWluWm9vbSkqdGhpcy50aWxlU2l6ZSxvPXRoaXMuem9vbVNjYWxlKHRoaXMubWF4Wm9vbSkqdGhpcy50aWxlU2l6ZSxyPXRoaXMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZTt0WzJdPWUuY2xhbXAodFsyXSxyL28sci9pKSx0aGlzLl9jYW1lcmEucG9zaXRpb249dDt9Z2V0IGNlbnRlclBvaW50KCl7cmV0dXJuIHRoaXMuX2VkZ2VJbnNldHMuZ2V0Q2VudGVyKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfWdldCBmb3ZBYm92ZUNlbnRlcigpe3JldHVybiB0aGlzLl9mb3YqKC41K3RoaXMuY2VudGVyT2Zmc2V0LnkvdGhpcy5oZWlnaHQpfWlzUGFkZGluZ0VxdWFsKGUpe3JldHVybiB0aGlzLl9lZGdlSW5zZXRzLmVxdWFscyhlKX1pbnRlcnBvbGF0ZVBhZGRpbmcoZSx0LGkpe3RoaXMuX3VubW9kaWZpZWQ9ITEsdGhpcy5fZWRnZUluc2V0cy5pbnRlcnBvbGF0ZShlLHQsaSksdGhpcy5fY29uc3RyYWluKCksdGhpcy5fY2FsY01hdHJpY2VzKCk7fWNvdmVyaW5nWm9vbUxldmVsKGUpe2NvbnN0IHQ9KGUucm91bmRab29tP01hdGgucm91bmQ6TWF0aC5mbG9vcikodGhpcy56b29tK3RoaXMuc2NhbGVab29tKHRoaXMudGlsZVNpemUvZS50aWxlU2l6ZSkpO3JldHVybiBNYXRoLm1heCgwLHQpfWdldFZpc2libGVVbndyYXBwZWRDb29yZGluYXRlcyh0KXtjb25zdCBpPVtuZXcgZS5VbndyYXBwZWRUaWxlSUQoMCx0KV07aWYodGhpcy5yZW5kZXJXb3JsZENvcGllcyl7Y29uc3Qgbz10aGlzLnBvaW50Q29vcmRpbmF0ZShuZXcgZS5Qb2ludCgwLDApKSxyPXRoaXMucG9pbnRDb29yZGluYXRlKG5ldyBlLlBvaW50KHRoaXMud2lkdGgsMCkpLG49dGhpcy5wb2ludENvb3JkaW5hdGUobmV3IGUuUG9pbnQodGhpcy53aWR0aCx0aGlzLmhlaWdodCkpLHM9dGhpcy5wb2ludENvb3JkaW5hdGUobmV3IGUuUG9pbnQoMCx0aGlzLmhlaWdodCkpLGE9TWF0aC5mbG9vcihNYXRoLm1pbihvLngsci54LG4ueCxzLngpKSxsPU1hdGguZmxvb3IoTWF0aC5tYXgoby54LHIueCxuLngscy54KSksYz0xO2ZvcihsZXQgbz1hLWM7bzw9bCtjO28rKykwIT09byYmaS5wdXNoKG5ldyBlLlVud3JhcHBlZFRpbGVJRChvLHQpKTt9cmV0dXJuIGl9Y292ZXJpbmdUaWxlcyh0KXtsZXQgaT10aGlzLmNvdmVyaW5nWm9vbUxldmVsKHQpO2NvbnN0IG89aSxyPXRoaXMuZWxldmF0aW9uJiYhdC5pc1RlcnJhaW5ERU0sbj1cIm1lcmNhdG9yXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZTtpZih2b2lkIDAhPT10Lm1pbnpvb20mJmk8dC5taW56b29tKXJldHVybiBbXTt2b2lkIDAhPT10Lm1heHpvb20mJmk+dC5tYXh6b29tJiYoaT10Lm1heHpvb20pO2NvbnN0IHM9dGhpcy5sb2NhdGlvbkNvb3JkaW5hdGUodGhpcy5jZW50ZXIpLGE9dGhpcy5jZW50ZXIubGF0LGw9MTw8aSxjPVtsKnMueCxsKnMueSwwXSxoPVwiZ2xvYmVcIj09PXRoaXMucHJvamVjdGlvbi5uYW1lLHU9IWgsXz1lLkZydXN0dW0uZnJvbUludlByb2plY3Rpb25NYXRyaXgodGhpcy5pbnZQcm9qTWF0cml4LHRoaXMud29ybGRTaXplLGksdSksZD1oP3RoaXMuX2NhbWVyYS5tZXJjYXRvclBvc2l0aW9uOnRoaXMucG9pbnRDb29yZGluYXRlKHRoaXMuZ2V0Q2FtZXJhUG9pbnQoKSkscD1sKmUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKDEsdGhpcy5jZW50ZXIubGF0KSxtPXRoaXMuX2NhbWVyYS5wb3NpdGlvblsyXS9lLm1lcmNhdG9yWmZyb21BbHRpdHVkZSgxLHRoaXMuY2VudGVyLmxhdCksZj1bbCpkLngsbCpkLnksbSoodT8xOnApXSxnPXRoaXMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZS90LnRpbGVTaXplKih0LnJvdW5kWm9vbT8xOi41MDIpLHY9dGhpcy5waXRjaDw9NjAmJnRoaXMuX2VkZ2VJbnNldHMudG9wPD10aGlzLl9lZGdlSW5zZXRzLmJvdHRvbSYmIXRoaXMuX2VsZXZhdGlvbiYmIXRoaXMucHJvamVjdGlvbi5pc1JlcHJvamVjdGVkSW5UaWxlU3BhY2U/aTowLHg9dC5pc1RlcnJhaW5ERU0mJnRoaXMuX2VsZXZhdGlvbj8xZTQqdGhpcy5fZWxldmF0aW9uLmV4YWdnZXJhdGlvbigpOnRoaXMuX2NlbnRlckFsdGl0dWRlLHk9dC5pc1RlcnJhaW5ERU0/LXg6dGhpcy5fZWxldmF0aW9uP3RoaXMuX2VsZXZhdGlvbi5nZXRNaW5FbGV2YXRpb25CZWxvd01TTCgpOjAsYj10aGlzLnByb2plY3Rpb24uaXNSZXByb2plY3RlZEluVGlsZVNwYWNlP1ZvKHRoaXMpOjEsdz10PT57Y29uc3QgaT0xLzRlNCxvPW5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSh0LngraSx0LnksdC56KSxyPW5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSh0LngsdC55K2ksdC56KSxuPXQudG9MbmdMYXQoKSxzPW8udG9MbmdMYXQoKSxhPXIudG9MbmdMYXQoKSxsPXRoaXMubG9jYXRpb25Db29yZGluYXRlKG4pLGM9dGhpcy5sb2NhdGlvbkNvb3JkaW5hdGUocyksaD10aGlzLmxvY2F0aW9uQ29vcmRpbmF0ZShhKSx1PU1hdGguaHlwb3QoYy54LWwueCxjLnktbC55KSxfPU1hdGguaHlwb3QoaC54LWwueCxoLnktbC55KTtyZXR1cm4gTWF0aC5zcXJ0KHUqXykqYi9pfSxUPXQ9Pntjb25zdCBpPXgsbz15O3JldHVybiB7YWFiYjplLnRpbGVBQUJCKHRoaXMsbCwwLDAsMCx0LG8saSx0aGlzLnByb2plY3Rpb24pLHpvb206MCx4OjAseTowLG1pblo6byxtYXhaOmksd3JhcDp0LGZ1bGx5VmlzaWJsZTohMX19LEU9W107bGV0IEM9W107Y29uc3QgTT1pLEk9dC5yZXBhcnNlT3ZlcnNjYWxlZD9vOmksUD1lPT5lKmUsUz1QKChtLXRoaXMuX2NlbnRlckFsdGl0dWRlKSpwKSxEPWU9PntpZighdGhpcy5fZWxldmF0aW9ufHwhZS50aWxlSUR8fCFuKXJldHVybjtjb25zdCB0PXRoaXMuX2VsZXZhdGlvbi5nZXRNaW5NYXhGb3JUaWxlKGUudGlsZUlEKSxpPWUuYWFiYjt0PyhpLm1pblsyXT10Lm1pbixpLm1heFsyXT10Lm1heCxpLmNlbnRlclsyXT0oaS5taW5bMl0raS5tYXhbMl0pLzIpOihlLnNob3VsZFNwbGl0PUwoZSksZS5zaG91bGRTcGxpdHx8KGkubWluWzJdPWkubWF4WzJdPWkuY2VudGVyWzJdPXRoaXMuX2NlbnRlckFsdGl0dWRlKSk7fSxMPXQ9PntpZih0Lnpvb208dilyZXR1cm4gITA7aWYodC56b29tPT09TSlyZXR1cm4gITE7aWYobnVsbCE9dC5zaG91bGRTcGxpdClyZXR1cm4gdC5zaG91bGRTcGxpdDtjb25zdCBpPXQuYWFiYi5kaXN0YW5jZVgoZiksbj10LmFhYmIuZGlzdGFuY2VZKGYpO2xldCBzPVMsbD0xO2lmKGgpe3M9UCh0LmFhYmIuZGlzdGFuY2VaKGYpKTtjb25zdCBpPU1hdGgucG93KDIsdC56b29tKSxvPWUubGF0RnJvbU1lcmNhdG9yWSgodC55KzEpL2kpLHI9ZS5sYXRGcm9tTWVyY2F0b3JZKHQueS9pKSxuPU1hdGgubWluKE1hdGgubWF4KGEsbyksciksYz1lLmNpcmN1bWZlcmVuY2VBdExhdGl0dWRlKG4pL2UuY2lyY3VtZmVyZW5jZUF0TGF0aXR1ZGUoYSk7aWYobD1uPT09YT8xL01hdGgubWF4KDEsdGhpcy5fbWVyY2F0b3JTY2FsZVJhdGlvLS4zKTpNYXRoLm1pbigxLGMvdGhpcy5fbWVyY2F0b3JTY2FsZVJhdGlvKSx0aGlzLnpvb208PWUuR0xPQkVfWk9PTV9USFJFU0hPTERfTUlOJiZ0Lnpvb209PT1NLTEmJmM+PS45KXJldHVybiAhMH1lbHNlIGlmKHImJihzPVAodC5hYWJiLmRpc3RhbmNlWihmKSpwKSksdGhpcy5wcm9qZWN0aW9uLmlzUmVwcm9qZWN0ZWRJblRpbGVTcGFjZSYmbzw9NSl7Y29uc3QgaT1NYXRoLnBvdygyLHQuem9vbSksbz13KG5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSgodC54Ky41KS9pLCh0LnkrLjUpL2kpKTtsPW8+Ljg1PzE6bzt9Y29uc3QgYz1pKmkrbipuK3MsdT1QKCgxPDxNLXQuem9vbSkqZypsKigoZSx0KT0+e2lmKHQqUCguNzA3KTxlKXJldHVybiAxO2NvbnN0IGk9TWF0aC5zcXJ0KHQvZSk7cmV0dXJuIGkvKDEuNDE0NDI3MTU3MDAxNDE0NCsoTWF0aC5wb3coMS4xLGktMS40MTQ0MjcxNTcwMDE0MTQ0KzEpLTEpLygxLjEtMSktMSl9KShNYXRoLm1heChzLFMpLGMpKTtyZXR1cm4gYzx1fTtpZih0aGlzLnJlbmRlcldvcmxkQ29waWVzKWZvcihsZXQgZT0xO2U8PTM7ZSsrKUUucHVzaChUKC1lKSksRS5wdXNoKFQoZSkpO2ZvcihFLnB1c2goVCgwKSk7RS5sZW5ndGg+MDspe2NvbnN0IG89RS5wb3AoKSxzPW8ueCxhPW8ueTtsZXQgdT1vLmZ1bGx5VmlzaWJsZTtpZighdSl7Y29uc3QgZT1vLmFhYmIuaW50ZXJzZWN0cyhfKTtpZigwPT09ZSljb250aW51ZTt1PTI9PT1lO31pZihvLnpvb20hPT1NJiZMKG8pKWZvcihsZXQgdD0wO3Q8NDt0Kyspe2NvbnN0IGk9KHM8PDEpK3QlMixjPShhPDwxKSsodD4+MSksXz17YWFiYjpuP28uYWFiYi5xdWFkcmFudCh0KTplLnRpbGVBQUJCKHRoaXMsbCxvLnpvb20rMSxpLGMsby53cmFwLG8ubWluWixvLm1heFosdGhpcy5wcm9qZWN0aW9uKSx6b29tOm8uem9vbSsxLHg6aSx5OmMsd3JhcDpvLndyYXAsZnVsbHlWaXNpYmxlOnUsdGlsZUlEOnZvaWQgMCxzaG91bGRTcGxpdDp2b2lkIDAsbWluWjpvLm1pblosbWF4WjpvLm1heFp9O3ImJiFoJiYoXy50aWxlSUQ9bmV3IGUuT3ZlcnNjYWxlZFRpbGVJRChvLnpvb20rMT09PU0/STpvLnpvb20rMSxvLndyYXAsby56b29tKzEsaSxjKSxEKF8pKSxFLnB1c2goXyk7fWVsc2Uge2NvbnN0IHI9by56b29tPT09TT9JOm8uem9vbTtpZih0Lm1pbnpvb20mJnQubWluem9vbT5yKWNvbnRpbnVlO2NvbnN0IG49Y1swXS0oLjUrcysoby53cmFwPDxvLnpvb20pKSooMTw8aS1vLnpvb20pLGw9Y1sxXS0uNS1hLGg9by50aWxlSUQ/by50aWxlSUQ6bmV3IGUuT3ZlcnNjYWxlZFRpbGVJRChyLG8ud3JhcCxvLnpvb20scyxhKTtDLnB1c2goe3RpbGVJRDpoLGRpc3RhbmNlU3E6bipuK2wqbH0pO319aWYodGhpcy5mb2dDdWxsRGlzdFNxKXtjb25zdCBpPXRoaXMuZm9nQ3VsbERpc3RTcSxvPXRoaXMuaG9yaXpvbkxpbmVGcm9tVG9wKCk7Qz1DLmZpbHRlcigocj0+e2NvbnN0IG49WzAsMCwwLDFdLHM9W2UuRVhURU5ULGUuRVhURU5ULDAsMV0sYT10aGlzLmNhbGN1bGF0ZUZvZ1RpbGVNYXRyaXgoci50aWxlSUQudG9VbndyYXBwZWQoKSk7ZS50cmFuc2Zvcm1NYXQ0JDEobixuLGEpLGUudHJhbnNmb3JtTWF0NCQxKHMscyxhKTtjb25zdCBsPWUuZ2V0QUFCQlBvaW50U3F1YXJlRGlzdChuLHMpO2lmKDA9PT1sKXJldHVybiAhMDtsZXQgYz0hMTtjb25zdCBoPXRoaXMuX2VsZXZhdGlvbjtpZihoJiZsPmkmJjAhPT1vKXtjb25zdCBpPXRoaXMuY2FsY3VsYXRlUHJvak1hdHJpeChyLnRpbGVJRC50b1Vud3JhcHBlZCgpKTtsZXQgbjt0LmlzVGVycmFpbkRFTXx8KG49aC5nZXRNaW5NYXhGb3JUaWxlKHIudGlsZUlEKSksbnx8KG49e21pbjp5LG1heDp4fSk7Y29uc3Qgcz1lLmZ1cnRoZXN0VGlsZUNvcm5lcih0aGlzLnJvdGF0aW9uKSxhPVtzWzBdKmUuRVhURU5ULHNbMV0qZS5FWFRFTlQsbi5tYXhdO2UudHJhbnNmb3JtTWF0NChhLGEsaSksYz0oMS1hWzFdKSp0aGlzLmhlaWdodCouNTxvO31yZXR1cm4gbDxpfHxjfSkpO31yZXR1cm4gQy5zb3J0KCgoZSx0KT0+ZS5kaXN0YW5jZVNxLXQuZGlzdGFuY2VTcSkpLm1hcCgoZT0+ZS50aWxlSUQpKX1yZXNpemUoZSx0KXt0aGlzLndpZHRoPWUsdGhpcy5oZWlnaHQ9dCx0aGlzLnBpeGVsc1RvR0xVbml0cz1bMi9lLC0yL3RdLHRoaXMuX2NvbnN0cmFpbigpLHRoaXMuX2NhbGNNYXRyaWNlcygpO31nZXQgdW5tb2RpZmllZCgpe3JldHVybiB0aGlzLl91bm1vZGlmaWVkfXpvb21TY2FsZShlKXtyZXR1cm4gTWF0aC5wb3coMixlKX1zY2FsZVpvb20oZSl7cmV0dXJuIE1hdGgubG9nKGUpL01hdGguTE4yfXByb2plY3QodCl7Y29uc3QgaT1lLmNsYW1wKHQubGF0LC1lLk1BWF9NRVJDQVRPUl9MQVRJVFVERSxlLk1BWF9NRVJDQVRPUl9MQVRJVFVERSksbz10aGlzLnByb2plY3Rpb24ucHJvamVjdCh0LmxuZyxpKTtyZXR1cm4gbmV3IGUuUG9pbnQoby54KnRoaXMud29ybGRTaXplLG8ueSp0aGlzLndvcmxkU2l6ZSl9dW5wcm9qZWN0KGUpe3JldHVybiB0aGlzLnByb2plY3Rpb24udW5wcm9qZWN0KGUueC90aGlzLndvcmxkU2l6ZSxlLnkvdGhpcy53b3JsZFNpemUpfWdldCBwb2ludCgpe3JldHVybiB0aGlzLnByb2plY3QodGhpcy5jZW50ZXIpfWdldCBwb2ludE1lcmMoKXtyZXR1cm4gdGhpcy5wb2ludC5fZGl2KHRoaXMud29ybGRTaXplKX1nZXQgcGl4ZWxzUGVyTWV0ZXJSYXRpbygpe3JldHVybiB0aGlzLnBpeGVsc1Blck1ldGVyL2UubWVyY2F0b3JaZnJvbUFsdGl0dWRlKDEsdGhpcy5jZW50ZXIubGF0KS90aGlzLndvcmxkU2l6ZX1zZXRMb2NhdGlvbkF0UG9pbnQodCxpKXtsZXQgbyxyO2NvbnN0IG49dGhpcy5jZW50ZXJQb2ludDtpZihcImdsb2JlXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZSl7Y29uc3QgZT10aGlzLndvcmxkU2l6ZTtvPShpLngtbi54KS9lLHI9KGkueS1uLnkpL2U7fWVsc2Uge2NvbnN0IGU9dGhpcy5wb2ludENvb3JkaW5hdGUoaSksdD10aGlzLnBvaW50Q29vcmRpbmF0ZShuKTtvPWUueC10Lngscj1lLnktdC55O31jb25zdCBzPXRoaXMubG9jYXRpb25Db29yZGluYXRlKHQpO3RoaXMuc2V0TG9jYXRpb24obmV3IGUuTWVyY2F0b3JDb29yZGluYXRlKHMueC1vLHMueS1yKSk7fXNldExvY2F0aW9uKGUpe3RoaXMuY2VudGVyPXRoaXMuY29vcmRpbmF0ZUxvY2F0aW9uKGUpLHRoaXMucHJvamVjdGlvbi53cmFwJiYodGhpcy5jZW50ZXI9dGhpcy5jZW50ZXIud3JhcCgpKTt9bG9jYXRpb25Qb2ludChlKXtyZXR1cm4gdGhpcy5wcm9qZWN0aW9uLmxvY2F0aW9uUG9pbnQodGhpcyxlKX1sb2NhdGlvblBvaW50M0QoZSl7cmV0dXJuIHRoaXMucHJvamVjdGlvbi5sb2NhdGlvblBvaW50KHRoaXMsZSwhMCl9cG9pbnRMb2NhdGlvbihlKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlTG9jYXRpb24odGhpcy5wb2ludENvb3JkaW5hdGUoZSkpfXBvaW50TG9jYXRpb24zRChlKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlTG9jYXRpb24odGhpcy5wb2ludENvb3JkaW5hdGUzRChlKSl9bG9jYXRpb25Db29yZGluYXRlKHQsaSl7Y29uc3Qgbz1pP2UubWVyY2F0b3JaZnJvbUFsdGl0dWRlKGksdC5sYXQpOnZvaWQgMCxyPXRoaXMucHJvamVjdGlvbi5wcm9qZWN0KHQubG5nLHQubGF0KTtyZXR1cm4gbmV3IGUuTWVyY2F0b3JDb29yZGluYXRlKHIueCxyLnksbyl9Y29vcmRpbmF0ZUxvY2F0aW9uKGUpe3JldHVybiB0aGlzLnByb2plY3Rpb24udW5wcm9qZWN0KGUueCxlLnkpfXBvaW50UmF5SW50ZXJzZWN0aW9uKHQsaSl7Y29uc3Qgbz1udWxsIT1pP2k6dGhpcy5fY2VudGVyQWx0aXR1ZGUscj1bdC54LHQueSwwLDFdLG49W3QueCx0LnksMSwxXTtlLnRyYW5zZm9ybU1hdDQkMShyLHIsdGhpcy5waXhlbE1hdHJpeEludmVyc2UpLGUudHJhbnNmb3JtTWF0NCQxKG4sbix0aGlzLnBpeGVsTWF0cml4SW52ZXJzZSk7Y29uc3Qgcz1uWzNdO2Uuc2NhbGUkMShyLHIsMS9yWzNdKSxlLnNjYWxlJDEobixuLDEvcyk7Y29uc3QgYT1yWzJdLGw9blsyXTtyZXR1cm4ge3AwOnIscDE6bix0OmE9PT1sPzA6KG8tYSkvKGwtYSl9fXNjcmVlblBvaW50VG9NZXJjYXRvclJheSh0KXtjb25zdCBpPVt0LngsdC55LDAsMV0sbz1bdC54LHQueSwxLDFdO3JldHVybiBlLnRyYW5zZm9ybU1hdDQkMShpLGksdGhpcy5waXhlbE1hdHJpeEludmVyc2UpLGUudHJhbnNmb3JtTWF0NCQxKG8sbyx0aGlzLnBpeGVsTWF0cml4SW52ZXJzZSksZS5zY2FsZSQxKGksaSwxL2lbM10pLGUuc2NhbGUkMShvLG8sMS9vWzNdKSxpWzJdPWUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKGlbMl0sdGhpcy5fY2VudGVyLmxhdCkqdGhpcy53b3JsZFNpemUsb1syXT1lLm1lcmNhdG9yWmZyb21BbHRpdHVkZShvWzJdLHRoaXMuX2NlbnRlci5sYXQpKnRoaXMud29ybGRTaXplLGUuc2NhbGUkMShpLGksMS90aGlzLndvcmxkU2l6ZSksZS5zY2FsZSQxKG8sbywxL3RoaXMud29ybGRTaXplKSxuZXcgZS5SYXkoW2lbMF0saVsxXSxpWzJdXSxlLm5vcm1hbGl6ZShbXSxlLnN1YihbXSxvLGkpKSl9cmF5SW50ZXJzZWN0aW9uQ29vcmRpbmF0ZSh0KXtjb25zdHtwMDppLHAxOm8sdDpyfT10LG49ZS5tZXJjYXRvclpmcm9tQWx0aXR1ZGUoaVsyXSx0aGlzLl9jZW50ZXIubGF0KSxzPWUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKG9bMl0sdGhpcy5fY2VudGVyLmxhdCk7cmV0dXJuIG5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZShlLm51bWJlcihpWzBdLG9bMF0scikvdGhpcy53b3JsZFNpemUsZS5udW1iZXIoaVsxXSxvWzFdLHIpL3RoaXMud29ybGRTaXplLGUubnVtYmVyKG4scyxyKSl9cG9pbnRDb29yZGluYXRlKGUsdD10aGlzLl9jZW50ZXJBbHRpdHVkZSl7cmV0dXJuIHRoaXMucHJvamVjdGlvbi5wb2ludENvb3JkaW5hdGUodGhpcyxlLngsZS55LHQpfXBvaW50Q29vcmRpbmF0ZTNEKHQpe2lmKCF0aGlzLmVsZXZhdGlvbilyZXR1cm4gdGhpcy5wb2ludENvb3JkaW5hdGUodCk7bGV0IGk9dGhpcy5wcm9qZWN0aW9uLnBvaW50Q29vcmRpbmF0ZTNEKHRoaXMsdC54LHQueSk7aWYoaSlyZXR1cm4gbmV3IGUuTWVyY2F0b3JDb29yZGluYXRlKGlbMF0saVsxXSxpWzJdKTtsZXQgbz0wLHI9dGhpcy5ob3Jpem9uTGluZUZyb21Ub3AoKTtpZih0Lnk+cilyZXR1cm4gdGhpcy5wb2ludENvb3JkaW5hdGUodCk7Y29uc3Qgbj0uMDIqcixzPXQuY2xvbmUoKTtmb3IobGV0IHQ9MDt0PDEwJiZyLW8+bjt0Kyspe3MueT1lLm51bWJlcihvLHIsLjY2KTtjb25zdCB0PXRoaXMucHJvamVjdGlvbi5wb2ludENvb3JkaW5hdGUzRCh0aGlzLHMueCxzLnkpO3Q/KHI9cy55LGk9dCk6bz1zLnk7fXJldHVybiBpP25ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZShpWzBdLGlbMV0saVsyXSk6dGhpcy5wb2ludENvb3JkaW5hdGUodCl9aXNQb2ludEFib3ZlSG9yaXpvbihlKXtyZXR1cm4gdGhpcy5wcm9qZWN0aW9uLmlzUG9pbnRBYm92ZUhvcml6b24odGhpcyxlKX1pc1BvaW50T25TdXJmYWNlKHQpe2lmKHQueTwwfHx0Lnk+dGhpcy5oZWlnaHR8fHQueDwwfHx0Lng+dGhpcy53aWR0aClyZXR1cm4gITE7aWYodGhpcy5lbGV2YXRpb258fHRoaXMuem9vbT49ZS5HTE9CRV9aT09NX1RIUkVTSE9MRF9NQVgpcmV0dXJuICF0aGlzLmlzUG9pbnRBYm92ZUhvcml6b24odCk7Y29uc3QgaT10aGlzLnBvaW50Q29vcmRpbmF0ZSh0KTtyZXR1cm4gaS55Pj0wJiZpLnk8PTF9X2Nvb3JkaW5hdGVQb2ludCh0LGkpe2NvbnN0IG89aSYmdGhpcy5lbGV2YXRpb24/dGhpcy5lbGV2YXRpb24uZ2V0QXRQb2ludE9yWmVybyh0LHRoaXMuX2NlbnRlckFsdGl0dWRlKTp0aGlzLl9jZW50ZXJBbHRpdHVkZSxyPVt0LngqdGhpcy53b3JsZFNpemUsdC55KnRoaXMud29ybGRTaXplLG8rdC50b0FsdGl0dWRlKCksMV07cmV0dXJuIGUudHJhbnNmb3JtTWF0NCQxKHIscix0aGlzLnBpeGVsTWF0cml4KSxyWzNdPjA/bmV3IGUuUG9pbnQoclswXS9yWzNdLHJbMV0vclszXSk6bmV3IGUuUG9pbnQoTnVtYmVyLk1BWF9WQUxVRSxOdW1iZXIuTUFYX1ZBTFVFKX1fZ2V0Qm91bmRzTm9uUmVjdGFuZ3VsYXIoKXtjb25zdHt0b3A6dCxsZWZ0Oml9PXRoaXMuX2VkZ2VJbnNldHMsbz10aGlzLmhlaWdodC10aGlzLl9lZGdlSW5zZXRzLmJvdHRvbSxyPXRoaXMud2lkdGgtdGhpcy5fZWRnZUluc2V0cy5yaWdodCxuPXRoaXMucG9pbnRMb2NhdGlvbjNEKG5ldyBlLlBvaW50KGksdCkpLHM9dGhpcy5wb2ludExvY2F0aW9uM0QobmV3IGUuUG9pbnQocix0KSksYT10aGlzLnBvaW50TG9jYXRpb24zRChuZXcgZS5Qb2ludChyLG8pKSxsPXRoaXMucG9pbnRMb2NhdGlvbjNEKG5ldyBlLlBvaW50KGksbykpO2xldCBjPU1hdGgubWluKG4ubG5nLHMubG5nLGEubG5nLGwubG5nKSxoPU1hdGgubWF4KG4ubG5nLHMubG5nLGEubG5nLGwubG5nKSx1PU1hdGgubWluKG4ubGF0LHMubGF0LGEubGF0LGwubGF0KSxfPU1hdGgubWF4KG4ubGF0LHMubGF0LGEubGF0LGwubGF0KTtjb25zdCBkPU1hdGgucG93KDIsLXRoaXMuem9vbSkvMTYqMjcwLHA9XCJnbG9iZVwiPT09dGhpcy5wcm9qZWN0aW9uLm5hbWU/MTo0LG09KHQsaSxvLHIsbik9Pntjb25zdCBzPSh0K28pLzIsYT0oaStyKS8yLGw9bmV3IGUuUG9pbnQocyxhKSx7bG5nOmYsbGF0Omd9PXRoaXMucG9pbnRMb2NhdGlvbjNEKGwpLHY9TWF0aC5tYXgoMCxjLWYsdS1nLGYtaCxnLV8pO2M9TWF0aC5taW4oYyxmKSxoPU1hdGgubWF4KGgsZiksdT1NYXRoLm1pbih1LGcpLF89TWF0aC5tYXgoXyxnKSwobjxwfHx2PmQpJiYobSh0LGkscyxhLG4rMSksbShzLGEsbyxyLG4rMSkpO307aWYobShpLHQscix0LDEpLG0ocix0LHIsbywxKSxtKHIsbyxpLG8sMSksbShpLG8saSx0LDEpLFwiZ2xvYmVcIj09PXRoaXMucHJvamVjdGlvbi5uYW1lKXtjb25zdFt0LGldPWUucG9sZXNJblZpZXdwb3J0KHRoaXMpO3Q/KF89OTAsaD0xODAsYz0tMTgwKTppJiYodT0tOTAsaD0xODAsYz0tMTgwKTt9cmV0dXJuIG5ldyBlLkxuZ0xhdEJvdW5kcyhuZXcgZS5MbmdMYXQoYyx1KSxuZXcgZS5MbmdMYXQoaCxfKSl9X2dldEJvdW5kc1JlY3Rhbmd1bGFyKHQsaSl7Y29uc3R7dG9wOm8sbGVmdDpyfT10aGlzLl9lZGdlSW5zZXRzLG49dGhpcy5oZWlnaHQtdGhpcy5fZWRnZUluc2V0cy5ib3R0b20scz10aGlzLndpZHRoLXRoaXMuX2VkZ2VJbnNldHMucmlnaHQsYT1uZXcgZS5Qb2ludChyLG8pLGw9bmV3IGUuUG9pbnQocyxvKSxjPW5ldyBlLlBvaW50KHMsbiksaD1uZXcgZS5Qb2ludChyLG4pO2xldCB1PXRoaXMucG9pbnRDb29yZGluYXRlKGEsdCksXz10aGlzLnBvaW50Q29vcmRpbmF0ZShsLHQpO2NvbnN0IGQ9dGhpcy5wb2ludENvb3JkaW5hdGUoYyxpKSxwPXRoaXMucG9pbnRDb29yZGluYXRlKGgsaSksbT0oZSx0KT0+KHQueS1lLnkpLyh0LngtZS54KTtyZXR1cm4gdS55PjEmJl8ueT49MD91PW5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSgoMS1wLnkpL20ocCx1KStwLngsMSk6dS55PDAmJl8ueTw9MSYmKHU9bmV3IGUuTWVyY2F0b3JDb29yZGluYXRlKC1wLnkvbShwLHUpK3AueCwwKSksXy55PjEmJnUueT49MD9fPW5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSgoMS1kLnkpL20oZCxfKStkLngsMSk6Xy55PDAmJnUueTw9MSYmKF89bmV3IGUuTWVyY2F0b3JDb29yZGluYXRlKC1kLnkvbShkLF8pK2QueCwwKSksKG5ldyBlLkxuZ0xhdEJvdW5kcykuZXh0ZW5kKHRoaXMuY29vcmRpbmF0ZUxvY2F0aW9uKHUpKS5leHRlbmQodGhpcy5jb29yZGluYXRlTG9jYXRpb24oXykpLmV4dGVuZCh0aGlzLmNvb3JkaW5hdGVMb2NhdGlvbihwKSkuZXh0ZW5kKHRoaXMuY29vcmRpbmF0ZUxvY2F0aW9uKGQpKX1fZ2V0Qm91bmRzUmVjdGFuZ3VsYXJUZXJyYWluKCl7Y29uc3QgZT10aGlzLmVsZXZhdGlvbjtpZighZS52aXNpYmxlRGVtVGlsZXMubGVuZ3RofHxlLmlzVXNpbmdNb2NrU291cmNlKCkpcmV0dXJuIHRoaXMuX2dldEJvdW5kc1JlY3Rhbmd1bGFyKDAsMCk7Y29uc3QgdD1lLnZpc2libGVEZW1UaWxlcy5yZWR1Y2UoKChlLHQpPT57aWYodC5kZW0pe2NvbnN0IGk9dC5kZW0udHJlZTtlLm1pbj1NYXRoLm1pbihlLm1pbixpLm1pbmltdW1zWzBdKSxlLm1heD1NYXRoLm1heChlLm1heCxpLm1heGltdW1zWzBdKTt9cmV0dXJuIGV9KSx7bWluOk51bWJlci5NQVhfVkFMVUUsbWF4OjB9KTtyZXR1cm4gdGhpcy5fZ2V0Qm91bmRzUmVjdGFuZ3VsYXIodC5taW4qZS5leGFnZ2VyYXRpb24oKSx0Lm1heCplLmV4YWdnZXJhdGlvbigpKX1nZXRCb3VuZHMoKXtyZXR1cm4gXCJtZXJjYXRvclwiPT09dGhpcy5wcm9qZWN0aW9uLm5hbWV8fFwiZXF1aXJlY3Rhbmd1bGFyXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZT90aGlzLl90ZXJyYWluRW5hYmxlZCgpP3RoaXMuX2dldEJvdW5kc1JlY3Rhbmd1bGFyVGVycmFpbigpOnRoaXMuX2dldEJvdW5kc1JlY3Rhbmd1bGFyKDAsMCk6dGhpcy5fZ2V0Qm91bmRzTm9uUmVjdGFuZ3VsYXIoKX1ob3Jpem9uTGluZUZyb21Ub3AoZT0hMCl7Y29uc3QgdD10aGlzLmhlaWdodC8yL01hdGgudGFuKHRoaXMuX2Zvdi8yKS9NYXRoLnRhbihNYXRoLm1heCh0aGlzLl9waXRjaCwuMSkpK3RoaXMuY2VudGVyT2Zmc2V0LnksaT10aGlzLmhlaWdodC8yLXQqKDEtdGhpcy5faG9yaXpvblNoaWZ0KTtyZXR1cm4gZT9NYXRoLm1heCgwLGkpOml9Z2V0TWF4Qm91bmRzKCl7cmV0dXJuIHRoaXMubWF4Qm91bmRzfXNldE1heEJvdW5kcyh0KXt0aGlzLm1heEJvdW5kcz10LHRoaXMubWluTGF0PS1lLk1BWF9NRVJDQVRPUl9MQVRJVFVERSx0aGlzLm1heExhdD1lLk1BWF9NRVJDQVRPUl9MQVRJVFVERSx0aGlzLm1pbkxuZz0tMTgwLHRoaXMubWF4TG5nPTE4MCx0JiYodGhpcy5taW5MYXQ9dC5nZXRTb3V0aCgpLHRoaXMubWF4TGF0PXQuZ2V0Tm9ydGgoKSx0aGlzLm1pbkxuZz10LmdldFdlc3QoKSx0aGlzLm1heExuZz10LmdldEVhc3QoKSx0aGlzLm1heExuZzx0aGlzLm1pbkxuZyYmKHRoaXMubWF4TG5nKz0zNjApKSx0aGlzLndvcmxkTWluWD1lLm1lcmNhdG9yWGZyb21MbmcodGhpcy5taW5MbmcpKnRoaXMudGlsZVNpemUsdGhpcy53b3JsZE1heFg9ZS5tZXJjYXRvclhmcm9tTG5nKHRoaXMubWF4TG5nKSp0aGlzLnRpbGVTaXplLHRoaXMud29ybGRNaW5ZPWUubWVyY2F0b3JZZnJvbUxhdCh0aGlzLm1heExhdCkqdGhpcy50aWxlU2l6ZSx0aGlzLndvcmxkTWF4WT1lLm1lcmNhdG9yWWZyb21MYXQodGhpcy5taW5MYXQpKnRoaXMudGlsZVNpemUsdGhpcy5fY29uc3RyYWluKCk7fWNhbGN1bGF0ZVBvc01hdHJpeChlLHQpe3JldHVybiB0aGlzLnByb2plY3Rpb24uY3JlYXRlVGlsZU1hdHJpeCh0aGlzLHQsZSl9Y2FsY3VsYXRlRGlzdGFuY2VUaWxlRGF0YSh0KXtjb25zdCBpPXQua2V5LG89dGhpcy5fZGlzdGFuY2VUaWxlRGF0YUNhY2hlO2lmKG9baV0pcmV0dXJuIG9baV07Y29uc3Qgcj10LmNhbm9uaWNhbCxuPTEvdGhpcy5oZWlnaHQscz10aGlzLmNhbWVyYVdvcmxkU2l6ZSxhPXMvdGhpcy56b29tU2NhbGUoci56KSxsPShyLngrTWF0aC5wb3coMixyLnopKnQud3JhcCkqYSxjPXIueSphLGg9dGhpcy5wb2ludDtoLngqPXMvdGhpcy53b3JsZFNpemUsaC55Kj1zL3RoaXMud29ybGRTaXplO2NvbnN0IHU9dGhpcy5hbmdsZSxfPU1hdGguc2luKC11KSxkPS1NYXRoLmNvcygtdSk7cmV0dXJuIG9baV09e2JlYXJpbmc6W18sZF0sY2VudGVyOlsoaC54LWwpKm4sKGgueS1jKSpuXSxzY2FsZTphL2UuRVhURU5UKm59LG9baV19Y2FsY3VsYXRlRm9nVGlsZU1hdHJpeCh0KXtjb25zdCBpPXQua2V5LG89dGhpcy5fZm9nVGlsZU1hdHJpeENhY2hlO2lmKG9baV0pcmV0dXJuIG9baV07Y29uc3Qgcj10aGlzLnByb2plY3Rpb24uY3JlYXRlVGlsZU1hdHJpeCh0aGlzLHRoaXMuY2FtZXJhV29ybGRTaXplRm9yRm9nLHQpO3JldHVybiBlLm11bHRpcGx5KHIsdGhpcy53b3JsZFRvRm9nTWF0cml4LHIpLG9baV09bmV3IEZsb2F0MzJBcnJheShyKSxvW2ldfWNhbGN1bGF0ZVByb2pNYXRyaXgodCxpPSExKXtjb25zdCBvPXQua2V5LHI9aT90aGlzLl9hbGlnbmVkUHJvak1hdHJpeENhY2hlOnRoaXMuX3Byb2pNYXRyaXhDYWNoZTtpZihyW29dKXJldHVybiByW29dO2NvbnN0IG49dGhpcy5jYWxjdWxhdGVQb3NNYXRyaXgodCx0aGlzLndvcmxkU2l6ZSk7cmV0dXJuIGUubXVsdGlwbHkobix0aGlzLnByb2plY3Rpb24uaXNSZXByb2plY3RlZEluVGlsZVNwYWNlP3RoaXMubWVyY2F0b3JNYXRyaXg6aT90aGlzLmFsaWduZWRQcm9qTWF0cml4OnRoaXMucHJvak1hdHJpeCxuKSxyW29dPW5ldyBGbG9hdDMyQXJyYXkobikscltvXX1jYWxjdWxhdGVQaXhlbHNUb1RpbGVVbml0c01hdHJpeCh0KXtjb25zdCBpPXQudGlsZUlELmtleSxvPXRoaXMuX3BpeGVsc1RvVGlsZVVuaXRzQ2FjaGU7aWYob1tpXSlyZXR1cm4gb1tpXTtjb25zdCByPWZ1bmN0aW9uKHQsaSl7Y29uc3R7c2NhbGU6b309dC50aWxlVHJhbnNmb3JtLHI9byplLkVYVEVOVC8odC50aWxlU2l6ZSpNYXRoLnBvdygyLGkuem9vbS10LnRpbGVJRC5vdmVyc2NhbGVkWit0LnRpbGVJRC5jYW5vbmljYWwueikpO3JldHVybiBuPW5ldyBGbG9hdDMyQXJyYXkoNCksbD0ocz1pLmludmVyc2VBZGp1c3RtZW50TWF0cml4KVsxXSxjPXNbMl0saD1zWzNdLF89KGE9W3Iscl0pWzFdLG5bMF09c1swXSoodT1hWzBdKSxuWzFdPWwqdSxuWzJdPWMqXyxuWzNdPWgqXyxuO3ZhciBuLHMsYSxsLGMsaCx1LF87fSh0LHRoaXMpO3JldHVybiBvW2ldPXIsb1tpXX1jdXN0b21MYXllck1hdHJpeCgpe3JldHVybiB0aGlzLm1lcmNhdG9yTWF0cml4LnNsaWNlKCl9Z2xvYmVUb01lcmNhdG9yTWF0cml4KCl7aWYoXCJnbG9iZVwiPT09dGhpcy5wcm9qZWN0aW9uLm5hbWUpe2NvbnN0IHQ9MS90aGlzLndvcmxkU2l6ZSxpPWUuZnJvbVNjYWxpbmcoW10sW3QsdCx0XSk7cmV0dXJuIGUubXVsdGlwbHkoaSxpLHRoaXMuZ2xvYmVNYXRyaXgpLGl9fXJlY2VudGVyT25UZXJyYWluKCl7aWYoIXRoaXMuX2VsZXZhdGlvbnx8XCJnbG9iZVwiPT09dGhpcy5wcm9qZWN0aW9uLm5hbWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5fZWxldmF0aW9uO3RoaXMuX3VwZGF0ZUNhbWVyYVN0YXRlKCk7Y29uc3QgaT1lLm1lcmNhdG9yWmZyb21BbHRpdHVkZSgxLHRoaXMuX2NlbnRlci5sYXQpKnRoaXMud29ybGRTaXplLG89dGhpcy5fY29tcHV0ZUNhbWVyYVBvc2l0aW9uKGkpLHI9dGhpcy5fY2FtZXJhLmZvcndhcmQoKSxuPWUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKDEsdGhpcy5fY2VudGVyLmxhdCk7b1syXS89bixyWzJdLz1uLGUubm9ybWFsaXplKHIscik7Y29uc3Qgcz10LnJheWNhc3QobyxyLHQuZXhhZ2dlcmF0aW9uKCkpO2lmKHMpe2NvbnN0IHQ9ZS5zY2FsZUFuZEFkZChbXSxvLHIscyksaT1uZXcgZS5NZXJjYXRvckNvb3JkaW5hdGUodFswXSx0WzFdLGUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKHRbMl0sZS5sYXRGcm9tTWVyY2F0b3JZKHRbMV0pKSksYT0oaS56K2UubGVuZ3RoKFtpLngtb1swXSxpLnktb1sxXSxpLnotb1syXSpuXSkpKnRoaXMuX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWw7dGhpcy5fc2VhTGV2ZWxab29tPXRoaXMuX3pvb21Gcm9tTWVyY2F0b3JaKGEpLHRoaXMuX2NlbnRlckFsdGl0dWRlPWkudG9BbHRpdHVkZSgpLHRoaXMuX2NlbnRlcj10aGlzLmNvb3JkaW5hdGVMb2NhdGlvbihpKSx0aGlzLl91cGRhdGVab29tRnJvbUVsZXZhdGlvbigpLHRoaXMuX2NvbnN0cmFpbigpLHRoaXMuX2NhbGNNYXRyaWNlcygpO319X2NvbnN0cmFpbkNhbWVyYSh0PSExKXtpZighdGhpcy5fZWxldmF0aW9uKXJldHVybjtjb25zdCBpPXRoaXMuX2VsZXZhdGlvbixvPWUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKDEsdGhpcy5fY2VudGVyLmxhdCkqdGhpcy53b3JsZFNpemUscj10aGlzLl9jb21wdXRlQ2FtZXJhUG9zaXRpb24obyksbj1pLmdldEF0UG9pbnRPclplcm8obmV3IGUuTWVyY2F0b3JDb29yZGluYXRlKC4uLnIpKSxzPXRoaXMucGl4ZWxzUGVyTWV0ZXIvdGhpcy53b3JsZFNpemUqbixhPXRoaXMuX21pbmltdW1IZWlnaHRPdmVyVGVycmFpbigpLGw9clsyXS1zO2lmKGw8PWEpaWYobDwwfHx0KXtjb25zdCB0PXRoaXMubG9jYXRpb25Db29yZGluYXRlKHRoaXMuX2NlbnRlcix0aGlzLl9jZW50ZXJBbHRpdHVkZSksaT1bclswXSxyWzFdLHQuei1yWzJdXSxvPWUubGVuZ3RoKGkpO2lbMl0tPShhLWwpL3RoaXMuX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWw7Y29uc3Qgbj1lLmxlbmd0aChpKTtpZigwPT09bilyZXR1cm47ZS5zY2FsZSQyKGksaSxvL24qdGhpcy5fcGl4ZWxzUGVyTWVyY2F0b3JQaXhlbCksdGhpcy5fY2FtZXJhLnBvc2l0aW9uPVtyWzBdLHJbMV0sdC56KnRoaXMuX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWwtaVsyXV0sdGhpcy5fdXBkYXRlU3RhdGVGcm9tQ2FtZXJhKCk7fWVsc2UgdGhpcy5faXNDYW1lcmFDb25zdHJhaW5lZD0hMDt9X2NvbnN0cmFpbigpe2lmKCF0aGlzLmNlbnRlcnx8IXRoaXMud2lkdGh8fCF0aGlzLmhlaWdodHx8dGhpcy5fY29uc3RyYWluaW5nKXJldHVybjt0aGlzLl9jb25zdHJhaW5pbmc9ITA7Y29uc3QgdD1cImdsb2JlXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZXx8dGhpcy5tZXJjYXRvckZyb21UcmFuc2l0aW9uO2lmKHRoaXMucHJvamVjdGlvbi5pc1JlcHJvamVjdGVkSW5UaWxlU3BhY2V8fHQpe2NvbnN0IGk9dGhpcy5jZW50ZXI7cmV0dXJuIGkubGF0PWUuY2xhbXAoaS5sYXQsdGhpcy5taW5MYXQsdGhpcy5tYXhMYXQpLCh0aGlzLm1heEJvdW5kc3x8IXRoaXMucmVuZGVyV29ybGRDb3BpZXMmJiF0KSYmKGkubG5nPWUuY2xhbXAoaS5sbmcsdGhpcy5taW5MbmcsdGhpcy5tYXhMbmcpKSx0aGlzLmNlbnRlcj1pLHZvaWQodGhpcy5fY29uc3RyYWluaW5nPSExKX1jb25zdCBpPXRoaXMuX3VubW9kaWZpZWQse3g6byx5OnJ9PXRoaXMucG9pbnQ7bGV0IG49MCxzPW8sYT1yO2NvbnN0IGw9dGhpcy53aWR0aC8yLGM9dGhpcy5oZWlnaHQvMixoPXRoaXMud29ybGRNaW5ZKnRoaXMuc2NhbGUsdT10aGlzLndvcmxkTWF4WSp0aGlzLnNjYWxlO2lmKHItYzxoJiYoYT1oK2MpLHIrYz51JiYoYT11LWMpLHUtaDx0aGlzLmhlaWdodCYmKG49TWF0aC5tYXgobix0aGlzLmhlaWdodC8odS1oKSksYT0odStoKS8yKSx0aGlzLm1heEJvdW5kc3x8IXRoaXMuX3JlbmRlcldvcmxkQ29waWVzfHwhdGhpcy5wcm9qZWN0aW9uLndyYXApe2NvbnN0IGU9dGhpcy53b3JsZE1pblgqdGhpcy5zY2FsZSx0PXRoaXMud29ybGRNYXhYKnRoaXMuc2NhbGUsaT10aGlzLndvcmxkU2l6ZS8yLShlK3QpLzI7cz0obytpK3RoaXMud29ybGRTaXplKSV0aGlzLndvcmxkU2l6ZS1pLHMtbDxlJiYocz1lK2wpLHMrbD50JiYocz10LWwpLHQtZTx0aGlzLndpZHRoJiYobj1NYXRoLm1heChuLHRoaXMud2lkdGgvKHQtZSkpLHM9KHQrZSkvMik7fXM9PT1vJiZhPT09cnx8KHRoaXMuY2VudGVyPXRoaXMudW5wcm9qZWN0KG5ldyBlLlBvaW50KHMsYSkpKSxuJiYodGhpcy56b29tKz10aGlzLnNjYWxlWm9vbShuKSksdGhpcy5fY29uc3RyYWluQ2FtZXJhKCksdGhpcy5fdW5tb2RpZmllZD1pLHRoaXMuX2NvbnN0cmFpbmluZz0hMTt9X21pblpvb21Gb3JCb3VuZHMoKXtsZXQgZT1NYXRoLm1heCgwLHRoaXMuc2NhbGVab29tKHRoaXMuaGVpZ2h0Lyh0aGlzLndvcmxkTWF4WS10aGlzLndvcmxkTWluWSkpKTtyZXR1cm4gdGhpcy5tYXhCb3VuZHMmJihlPU1hdGgubWF4KGUsdGhpcy5zY2FsZVpvb20odGhpcy53aWR0aC8odGhpcy53b3JsZE1heFgtdGhpcy53b3JsZE1pblgpKSkpLGV9X21heENhbWVyYUJvdW5kc0Rpc3RhbmNlKCl7cmV0dXJuIHRoaXMuX21lcmNhdG9yWmZyb21ab29tKHRoaXMuX21pblpvb21Gb3JCb3VuZHMoKSl9X2NhbGNNYXRyaWNlcygpe2lmKCF0aGlzLmhlaWdodClyZXR1cm47Y29uc3QgdD10aGlzLmNlbnRlck9mZnNldCxpPXRoaXMucGl4ZWxzUGVyTWV0ZXI7XCJnbG9iZVwiPT09dGhpcy5wcm9qZWN0aW9uLm5hbWUmJih0aGlzLl9tZXJjYXRvclNjYWxlUmF0aW89ZS5tZXJjYXRvclpmcm9tQWx0aXR1ZGUoMSx0aGlzLmNlbnRlci5sYXQpL2UubWVyY2F0b3JaZnJvbUFsdGl0dWRlKDEsZS5HTE9CRV9TQ0FMRV9NQVRDSF9MQVRJVFVERSkpO2NvbnN0IG89V28odGhpcy5wcm9qZWN0aW9uLHRoaXMuem9vbSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LDEwMjQpO3RoaXMuX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWw9dGhpcy5wcm9qZWN0aW9uLnBpeGVsU3BhY2VDb252ZXJzaW9uKHRoaXMuY2VudGVyLmxhdCx0aGlzLndvcmxkU2l6ZSxvKSx0aGlzLmNhbWVyYVRvQ2VudGVyRGlzdGFuY2U9LjUvTWF0aC50YW4oLjUqdGhpcy5fZm92KSp0aGlzLmhlaWdodCp0aGlzLl9waXhlbHNQZXJNZXJjYXRvclBpeGVsLHRoaXMuX3VwZGF0ZUNhbWVyYVN0YXRlKCksdGhpcy5fZmFyWj10aGlzLnByb2plY3Rpb24uZmFydGhlc3RQaXhlbERpc3RhbmNlKHRoaXMpLHRoaXMuX25lYXJaPXRoaXMuaGVpZ2h0LzUwO2NvbnN0IHI9XCJtZXRlcnNcIj09PXRoaXMucHJvamVjdGlvbi56QXhpc1VuaXQ/aToxLG49dGhpcy5fY2FtZXJhLmdldFdvcmxkVG9DYW1lcmEodGhpcy53b3JsZFNpemUscikscz10aGlzLl9jYW1lcmEuZ2V0Q2FtZXJhVG9DbGlwUGVyc3BlY3RpdmUodGhpcy5fZm92LHRoaXMud2lkdGgvdGhpcy5oZWlnaHQsdGhpcy5fbmVhclosdGhpcy5fZmFyWik7c1s4XT0yKi10LngvdGhpcy53aWR0aCxzWzldPTIqdC55L3RoaXMuaGVpZ2h0O2xldCBhPWUubXVsKFtdLHMsbik7aWYodGhpcy5wcm9qZWN0aW9uLmlzUmVwcm9qZWN0ZWRJblRpbGVTcGFjZSl7Y29uc3QgdD10aGlzLmxvY2F0aW9uQ29vcmRpbmF0ZSh0aGlzLmNlbnRlciksaT1lLmlkZW50aXR5KFtdKTtlLnRyYW5zbGF0ZShpLGksW3QueCp0aGlzLndvcmxkU2l6ZSx0LnkqdGhpcy53b3JsZFNpemUsMF0pLGUubXVsdGlwbHkoaSxpLFpvKHRoaXMpKSxlLnRyYW5zbGF0ZShpLGksWy10LngqdGhpcy53b3JsZFNpemUsLXQueSp0aGlzLndvcmxkU2l6ZSwwXSksZS5tdWx0aXBseShhLGEsaSksdGhpcy5pbnZlcnNlQWRqdXN0bWVudE1hdHJpeD1mdW5jdGlvbihlKXtjb25zdCB0PVpvKGUsITApO3JldHVybiB2KFtdLFt0WzBdLHRbMV0sdFs0XSx0WzVdXSl9KHRoaXMpO31lbHNlIHRoaXMuaW52ZXJzZUFkanVzdG1lbnRNYXRyaXg9WzEsMCwwLDFdO3RoaXMubWVyY2F0b3JNYXRyaXg9ZS5zY2FsZShbXSxhLFt0aGlzLndvcmxkU2l6ZSx0aGlzLndvcmxkU2l6ZSx0aGlzLndvcmxkU2l6ZS9yLDFdKSx0aGlzLnByb2pNYXRyaXg9YSx0aGlzLmludlByb2pNYXRyaXg9ZS5pbnZlcnQobmV3IEZsb2F0NjRBcnJheSgxNiksdGhpcy5wcm9qTWF0cml4KTtjb25zdCBsPWUuaW52ZXJ0KFtdLHMpO3RoaXMuZnJ1c3R1bUNvcm5lcnM9ZS5GcnVzdHVtQ29ybmVycy5mcm9tSW52UHJvamVjdGlvbk1hdHJpeChsLHRoaXMuaG9yaXpvbkxpbmVGcm9tVG9wKCksdGhpcy5oZWlnaHQpO2NvbnN0IGM9bmV3IEZsb2F0MzJBcnJheSgxNik7ZS5pZGVudGl0eShjKSxlLnNjYWxlKGMsYyxbMSwtMSwxXSksZS5yb3RhdGVYKGMsYyx0aGlzLl9waXRjaCksZS5yb3RhdGVaKGMsYyx0aGlzLmFuZ2xlKTtjb25zdCBoPWUucGVyc3BlY3RpdmUobmV3IEZsb2F0MzJBcnJheSgxNiksdGhpcy5fZm92LHRoaXMud2lkdGgvdGhpcy5oZWlnaHQsdGhpcy5fbmVhclosdGhpcy5fZmFyWiksdT0oTWF0aC5QSS8yLXRoaXMuX3BpdGNoKSoodGhpcy5oZWlnaHQvdGhpcy5fZm92KSp0aGlzLl9ob3Jpem9uU2hpZnQ7aFs4XT0yKi10LngvdGhpcy53aWR0aCxoWzldPTIqKHQueSt1KS90aGlzLmhlaWdodCx0aGlzLnNreWJveE1hdHJpeD1lLm11bHRpcGx5KGMsaCxjKTtjb25zdCBfPXRoaXMucG9pbnQsZD1fLngscD1fLnksbT10aGlzLndpZHRoJTIvMixmPXRoaXMuaGVpZ2h0JTIvMixnPU1hdGguY29zKHRoaXMuYW5nbGUpLHg9TWF0aC5zaW4odGhpcy5hbmdsZSkseT1kLU1hdGgucm91bmQoZCkrZyptK3gqZixiPXAtTWF0aC5yb3VuZChwKStnKmYreCptLHc9bmV3IEZsb2F0NjRBcnJheShhKTtpZihlLnRyYW5zbGF0ZSh3LHcsW3k+LjU/eS0xOnksYj4uNT9iLTE6YiwwXSksdGhpcy5hbGlnbmVkUHJvak1hdHJpeD13LGE9ZS5jcmVhdGUoKSxlLnNjYWxlKGEsYSxbdGhpcy53aWR0aC8yLC10aGlzLmhlaWdodC8yLDFdKSxlLnRyYW5zbGF0ZShhLGEsWzEsLTEsMF0pLHRoaXMubGFiZWxQbGFuZU1hdHJpeD1hLGE9ZS5jcmVhdGUoKSxlLnNjYWxlKGEsYSxbMSwtMSwxXSksZS50cmFuc2xhdGUoYSxhLFstMSwtMSwwXSksZS5zY2FsZShhLGEsWzIvdGhpcy53aWR0aCwyL3RoaXMuaGVpZ2h0LDFdKSx0aGlzLmdsQ29vcmRNYXRyaXg9YSx0aGlzLnBpeGVsTWF0cml4PWUubXVsdGlwbHkobmV3IEZsb2F0NjRBcnJheSgxNiksdGhpcy5sYWJlbFBsYW5lTWF0cml4LHRoaXMucHJvak1hdHJpeCksdGhpcy5fY2FsY0ZvZ01hdHJpY2VzKCksdGhpcy5fZGlzdGFuY2VUaWxlRGF0YUNhY2hlPXt9LGE9ZS5pbnZlcnQobmV3IEZsb2F0NjRBcnJheSgxNiksdGhpcy5waXhlbE1hdHJpeCksIWEpdGhyb3cgbmV3IEVycm9yKFwiZmFpbGVkIHRvIGludmVydCBtYXRyaXhcIik7aWYodGhpcy5waXhlbE1hdHJpeEludmVyc2U9YSxcImdsb2JlXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZXx8dGhpcy5tZXJjYXRvckZyb21UcmFuc2l0aW9uKXt0aGlzLmdsb2JlTWF0cml4PWUuY2FsY3VsYXRlR2xvYmVNYXRyaXgodGhpcyk7Y29uc3QgdD1bdGhpcy5nbG9iZU1hdHJpeFsxMl0sdGhpcy5nbG9iZU1hdHJpeFsxM10sdGhpcy5nbG9iZU1hdHJpeFsxNF1dO3RoaXMuZ2xvYmVDZW50ZXJJblZpZXdTcGFjZT1lLnRyYW5zZm9ybU1hdDQodCx0LG4pLHRoaXMuZ2xvYmVSYWRpdXM9dGhpcy53b3JsZFNpemUvMi9NYXRoLlBJLTE7fWVsc2UgdGhpcy5nbG9iZU1hdHJpeD1hO3RoaXMuX3Byb2pNYXRyaXhDYWNoZT17fSx0aGlzLl9hbGlnbmVkUHJvak1hdHJpeENhY2hlPXt9LHRoaXMuX3BpeGVsc1RvVGlsZVVuaXRzQ2FjaGU9e307fV9jYWxjRm9nTWF0cmljZXMoKXt0aGlzLl9mb2dUaWxlTWF0cml4Q2FjaGU9e307Y29uc3QgdD10aGlzLmNhbWVyYVdvcmxkU2l6ZUZvckZvZyxpPXRoaXMuY2FtZXJhUGl4ZWxzUGVyTWV0ZXIsbz10aGlzLl9jYW1lcmEucG9zaXRpb24scj0xL3RoaXMuaGVpZ2h0L3RoaXMuX3BpeGVsc1Blck1lcmNhdG9yUGl4ZWwsbj1bdCx0LGldO2Uuc2NhbGUkMihuLG4sciksZS5zY2FsZSQyKG8sbywtMSksZS5tdWx0aXBseSQyKG8sbyxuKTtjb25zdCBzPWUuY3JlYXRlKCk7ZS50cmFuc2xhdGUocyxzLG8pLGUuc2NhbGUocyxzLG4pLHRoaXMubWVyY2F0b3JGb2dNYXRyaXg9cyx0aGlzLndvcmxkVG9Gb2dNYXRyaXg9dGhpcy5fY2FtZXJhLmdldFdvcmxkVG9DYW1lcmFQb3NpdGlvbih0LGkscik7fV9jb21wdXRlQ2FtZXJhUG9zaXRpb24oZSl7Y29uc3QgdD0oZT1lfHx0aGlzLnBpeGVsc1Blck1ldGVyKS90aGlzLnBpeGVsc1Blck1ldGVyLGk9dGhpcy5fY2FtZXJhLmZvcndhcmQoKSxvPXRoaXMucG9pbnQscj10aGlzLl9tZXJjYXRvclpmcm9tWm9vbSh0aGlzLl9zZWFMZXZlbFpvb20/dGhpcy5fc2VhTGV2ZWxab29tOnRoaXMuX3pvb20pKnQtZS90aGlzLndvcmxkU2l6ZSp0aGlzLl9jZW50ZXJBbHRpdHVkZTtyZXR1cm4gW28ueC90aGlzLndvcmxkU2l6ZS1pWzBdKnIsby55L3RoaXMud29ybGRTaXplLWlbMV0qcixlL3RoaXMud29ybGRTaXplKnRoaXMuX2NlbnRlckFsdGl0dWRlLWlbMl0qcl19X3VwZGF0ZUNhbWVyYVN0YXRlKCl7dGhpcy5oZWlnaHQmJih0aGlzLl9jYW1lcmEuc2V0UGl0Y2hCZWFyaW5nKHRoaXMuX3BpdGNoLHRoaXMuYW5nbGUpLHRoaXMuX2NhbWVyYS5wb3NpdGlvbj10aGlzLl9jb21wdXRlQ2FtZXJhUG9zaXRpb24oKSk7fV90cmFuc2xhdGVDYW1lcmFDb25zdHJhaW5lZCh0KXtjb25zdCBpPXRoaXMuX21heENhbWVyYUJvdW5kc0Rpc3RhbmNlKCkqTWF0aC5jb3ModGhpcy5fcGl0Y2gpLG89dGhpcy5fY2FtZXJhLnBvc2l0aW9uWzJdLHI9dFsyXTtsZXQgbj0xO3RoaXMucHJvamVjdGlvbi53cmFwJiYodGhpcy5jZW50ZXI9dGhpcy5jZW50ZXIud3JhcCgpKSxyPjAmJihuPU1hdGgubWluKChpLW8pL3IsMSkpLHRoaXMuX2NhbWVyYS5wb3NpdGlvbj1lLnNjYWxlQW5kQWRkKFtdLHRoaXMuX2NhbWVyYS5wb3NpdGlvbix0LG4pLHRoaXMuX3VwZGF0ZVN0YXRlRnJvbUNhbWVyYSgpO31fdXBkYXRlU3RhdGVGcm9tQ2FtZXJhKCl7Y29uc3QgdD10aGlzLl9jYW1lcmEucG9zaXRpb24saT10aGlzLl9jYW1lcmEuZm9yd2FyZCgpLHtwaXRjaDpvLGJlYXJpbmc6cn09dGhpcy5fY2FtZXJhLmdldFBpdGNoQmVhcmluZygpLG49ZS5tZXJjYXRvclpmcm9tQWx0aXR1ZGUodGhpcy5fY2VudGVyQWx0aXR1ZGUsdGhpcy5jZW50ZXIubGF0KSp0aGlzLl9waXhlbHNQZXJNZXJjYXRvclBpeGVsLHM9dGhpcy5fbWVyY2F0b3JaZnJvbVpvb20odGhpcy5fbWF4Wm9vbSkqTWF0aC5jb3MoZS5kZWdUb1JhZCh0aGlzLl9tYXhQaXRjaCkpLGE9TWF0aC5tYXgoKHRbMl0tbikvTWF0aC5jb3MobykscyksbD10aGlzLl96b29tRnJvbU1lcmNhdG9yWihhKTtlLnNjYWxlQW5kQWRkKHQsdCxpLGEpLHRoaXMuX3BpdGNoPWUuY2xhbXAobyxlLmRlZ1RvUmFkKHRoaXMubWluUGl0Y2gpLGUuZGVnVG9SYWQodGhpcy5tYXhQaXRjaCkpLHRoaXMuYW5nbGU9ZS53cmFwKHIsLU1hdGguUEksTWF0aC5QSSksdGhpcy5fc2V0Wm9vbShlLmNsYW1wKGwsdGhpcy5fbWluWm9vbSx0aGlzLl9tYXhab29tKSksdGhpcy5fdXBkYXRlU2VhTGV2ZWxab29tKCksdGhpcy5fY2VudGVyPXRoaXMuY29vcmRpbmF0ZUxvY2F0aW9uKG5ldyBlLk1lcmNhdG9yQ29vcmRpbmF0ZSh0WzBdLHRbMV0sdFsyXSkpLHRoaXMuX3VubW9kaWZpZWQ9ITEsdGhpcy5fY29uc3RyYWluKCksdGhpcy5fY2FsY01hdHJpY2VzKCk7fV93b3JsZFNpemVGcm9tWm9vbShlKXtyZXR1cm4gTWF0aC5wb3coMixlKSp0aGlzLnRpbGVTaXplfV9tZXJjYXRvclpmcm9tWm9vbShlKXtyZXR1cm4gdGhpcy5jYW1lcmFUb0NlbnRlckRpc3RhbmNlL3RoaXMuX3dvcmxkU2l6ZUZyb21ab29tKGUpfV9taW5pbXVtSGVpZ2h0T3ZlclRlcnJhaW4oKXtjb25zdCBlPU1hdGgubWluKChudWxsIT10aGlzLl9zZWFMZXZlbFpvb20/dGhpcy5fc2VhTGV2ZWxab29tOnRoaXMuX3pvb20pKzQsdGhpcy5fbWF4Wm9vbSk7cmV0dXJuIHRoaXMuX21lcmNhdG9yWmZyb21ab29tKGUpfV96b29tRnJvbU1lcmNhdG9yWihlKXtyZXR1cm4gdGhpcy5zY2FsZVpvb20odGhpcy5jYW1lcmFUb0NlbnRlckRpc3RhbmNlLyhlKnRoaXMudGlsZVNpemUpKX16b29tRnJvbU1lcmNhdG9yWkFkanVzdGVkKHQpe2xldCBpPTAsbz1lLkdMT0JFX1pPT01fVEhSRVNIT0xEX01BWCxyPTAsbj0xLzA7Zm9yKDtvLWk+MWUtNiYmbz5pOyl7Y29uc3QgZT1pKy41KihvLWkpLHM9dGhpcy50aWxlU2l6ZSpNYXRoLnBvdygyLGUpLGE9dGhpcy5nZXRDYW1lcmFUb0NlbnRlckRpc3RhbmNlKHRoaXMucHJvamVjdGlvbixlLHMpLGw9dGhpcy5zY2FsZVpvb20oYS8odCp0aGlzLnRpbGVTaXplKSksYz1NYXRoLmFicyhlLWwpO2M8biYmKG49YyxyPWUpLGU8bD9pPWU6bz1lO31yZXR1cm4gcn1fdGVycmFpbkVuYWJsZWQoKXtyZXR1cm4gISghdGhpcy5fZWxldmF0aW9ufHwhdGhpcy5wcm9qZWN0aW9uLnN1cHBvcnRzVGVycmFpbiYmKGUud2Fybk9uY2UoXCJUZXJyYWluIGlzIG5vdCB5ZXQgc3VwcG9ydGVkIHdpdGggYWx0ZXJuYXRlIHByb2plY3Rpb25zLiBVc2UgbWVyY2F0b3Igb3IgZ2xvYmUgdG8gZW5hYmxlIHRlcnJhaW4uXCIpLDEpKX1hbnlDb3JuZXJPZmZFZGdlKHQsaSl7Y29uc3Qgbz1NYXRoLm1pbih0LngsaS54KSxyPU1hdGgubWF4KHQueCxpLngpLG49TWF0aC5taW4odC55LGkueSkscz1NYXRoLm1heCh0LnksaS55KTtpZihuPHRoaXMuaG9yaXpvbkxpbmVGcm9tVG9wKCExKSlyZXR1cm4gITA7aWYoXCJtZXJjYXRvclwiIT09dGhpcy5wcm9qZWN0aW9uLm5hbWUpcmV0dXJuICExO2NvbnN0IGE9W25ldyBlLlBvaW50KG8sbiksbmV3IGUuUG9pbnQocixzKSxuZXcgZS5Qb2ludChvLHMpLG5ldyBlLlBvaW50KHIsbildLGw9dGhpcy5yZW5kZXJXb3JsZENvcGllcz8tMzowLGM9dGhpcy5yZW5kZXJXb3JsZENvcGllcz80OjE7Zm9yKGNvbnN0IGUgb2YgYSl7Y29uc3QgdD10aGlzLnBvaW50UmF5SW50ZXJzZWN0aW9uKGUpO2lmKHQudDwwKXJldHVybiAhMDtjb25zdCBpPXRoaXMucmF5SW50ZXJzZWN0aW9uQ29vcmRpbmF0ZSh0KTtpZihpLng8bHx8aS55PDB8fGkueD5jfHxpLnk+MSlyZXR1cm4gITB9cmV0dXJuICExfWlzSG9yaXpvblZpc2libGUoKXtyZXR1cm4gdGhpcy5waXRjaCtlLnJhZFRvRGVnKHRoaXMuZm92QWJvdmVDZW50ZXIpPjg4fHx0aGlzLmFueUNvcm5lck9mZkVkZ2UobmV3IGUuUG9pbnQoMCwwKSxuZXcgZS5Qb2ludCh0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSl9em9vbURlbHRhVG9Nb3ZlbWVudCh0LGkpe2NvbnN0IG89ZS5sZW5ndGgoZS5zdWIoW10sdGhpcy5fY2FtZXJhLnBvc2l0aW9uLHQpKSxyPXRoaXMuX3pvb21Gcm9tTWVyY2F0b3JaKG8pK2k7cmV0dXJuIG8tdGhpcy5fbWVyY2F0b3JaZnJvbVpvb20ocil9Z2V0Q2FtZXJhUG9pbnQoKXtpZihcImdsb2JlXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZSl7Y29uc3QgdD1mdW5jdGlvbihbdCxpLG9dLHIpe2NvbnN0IG49W3QsaSxvLDFdO2UudHJhbnNmb3JtTWF0NCQxKG4sbixyKTtjb25zdCBzPW5bM109TWF0aC5tYXgoblszXSwxZS02KTtyZXR1cm4gblswXS89cyxuWzFdLz1zLG5bMl0vPXMsbn0oW3RoaXMuZ2xvYmVNYXRyaXhbMTJdLHRoaXMuZ2xvYmVNYXRyaXhbMTNdLHRoaXMuZ2xvYmVNYXRyaXhbMTRdXSx0aGlzLnBpeGVsTWF0cml4KTtyZXR1cm4gbmV3IGUuUG9pbnQodFswXSx0WzFdKX17Y29uc3QgdD1NYXRoLnRhbih0aGlzLl9waXRjaCkqKHRoaXMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZXx8MSk7cmV0dXJuIHRoaXMuY2VudGVyUG9pbnQuYWRkKG5ldyBlLlBvaW50KDAsdCkpfX1nZXRDYW1lcmFUb0NlbnRlckRpc3RhbmNlKGUsdD10aGlzLnpvb20saT10aGlzLndvcmxkU2l6ZSl7Y29uc3Qgbz1XbyhlLHQsdGhpcy53aWR0aCx0aGlzLmhlaWdodCwxMDI0KSxyPWUucGl4ZWxTcGFjZUNvbnZlcnNpb24odGhpcy5jZW50ZXIubGF0LGksbyk7cmV0dXJuIC41L01hdGgudGFuKC41KnRoaXMuX2ZvdikqdGhpcy5oZWlnaHQqcn1nZXRXb3JsZFRvQ2FtZXJhTWF0cml4KCl7Y29uc3QgdD10aGlzLl9jYW1lcmEuZ2V0V29ybGRUb0NhbWVyYSh0aGlzLndvcmxkU2l6ZSxcIm1ldGVyc1wiPT09dGhpcy5wcm9qZWN0aW9uLnpBeGlzVW5pdD90aGlzLnBpeGVsc1Blck1ldGVyOjEpO3JldHVybiBcImdsb2JlXCI9PT10aGlzLnByb2plY3Rpb24ubmFtZSYmZS5tdWx0aXBseSh0LHQsdGhpcy5nbG9iZU1hdHJpeCksdH19ZnVuY3Rpb24gWW8oZSx0KXtsZXQgaT0hMSxvPW51bGw7Y29uc3Qgcj0oKT0+e289bnVsbCxpJiYoZSgpLG89c2V0VGltZW91dChyLHQpLGk9ITEpO307cmV0dXJuICgpPT4oaT0hMCxvfHxyKCksbyl9Y2xhc3MgS297Y29uc3RydWN0b3IodCl7dGhpcy5faGFzaE5hbWU9dCYmZW5jb2RlVVJJQ29tcG9uZW50KHQpLGUuYmluZEFsbChbXCJfZ2V0Q3VycmVudEhhc2hcIixcIl9vbkhhc2hDaGFuZ2VcIixcIl91cGRhdGVIYXNoXCJdLHRoaXMpLHRoaXMuX3VwZGF0ZUhhc2g9WW8odGhpcy5fdXBkYXRlSGFzaFVudGhyb3R0bGVkLmJpbmQodGhpcyksMzAwKTt9YWRkVG8odCl7cmV0dXJuIHRoaXMuX21hcD10LGUud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsdGhpcy5fb25IYXNoQ2hhbmdlLCExKSx0Lm9uKFwibW92ZWVuZFwiLHRoaXMuX3VwZGF0ZUhhc2gpLHRoaXN9cmVtb3ZlKCl7cmV0dXJuIHRoaXMuX21hcD8odGhpcy5fbWFwLm9mZihcIm1vdmVlbmRcIix0aGlzLl91cGRhdGVIYXNoKSxlLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLHRoaXMuX29uSGFzaENoYW5nZSwhMSksY2xlYXJUaW1lb3V0KHRoaXMuX3VwZGF0ZUhhc2goKSksdGhpcy5fbWFwPXZvaWQgMCx0aGlzKTp0aGlzfWdldEhhc2hTdHJpbmcoKXtjb25zdCB0PXRoaXMuX21hcDtpZighdClyZXR1cm4gXCJcIjtjb25zdCBpPUpvKHQpO2lmKHRoaXMuX2hhc2hOYW1lKXtjb25zdCB0PXRoaXMuX2hhc2hOYW1lO2xldCBvPSExO2NvbnN0IHI9ZS53aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKS5zcGxpdChcIiZcIikubWFwKChlPT57Y29uc3Qgcj1lLnNwbGl0KFwiPVwiKVswXTtyZXR1cm4gcj09PXQ/KG89ITAsYCR7cn09JHtpfWApOmV9KSkuZmlsdGVyKChlPT5lKSk7cmV0dXJuIG98fHIucHVzaChgJHt0fT0ke2l9YCksYCMke3Iuam9pbihcIiZcIil9YH1yZXR1cm4gYCMke2l9YH1fZ2V0Q3VycmVudEhhc2goKXtjb25zdCB0PWUud2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZShcIiNcIixcIlwiKTtpZih0aGlzLl9oYXNoTmFtZSl7bGV0IGU7cmV0dXJuIHQuc3BsaXQoXCImXCIpLm1hcCgoZT0+ZS5zcGxpdChcIj1cIikpKS5mb3JFYWNoKCh0PT57dFswXT09PXRoaXMuX2hhc2hOYW1lJiYoZT10KTt9KSksKGUmJmVbMV18fFwiXCIpLnNwbGl0KFwiL1wiKX1yZXR1cm4gdC5zcGxpdChcIi9cIil9X29uSGFzaENoYW5nZSgpe2NvbnN0IGU9dGhpcy5fbWFwO2lmKCFlKXJldHVybiAhMTtjb25zdCB0PXRoaXMuX2dldEN1cnJlbnRIYXNoKCk7aWYodC5sZW5ndGg+PTMmJiF0LnNvbWUoKGU9PmlzTmFOKGUpKSkpe2NvbnN0IGk9ZS5kcmFnUm90YXRlLmlzRW5hYmxlZCgpJiZlLnRvdWNoWm9vbVJvdGF0ZS5pc0VuYWJsZWQoKT8rKHRbM118fDApOmUuZ2V0QmVhcmluZygpO3JldHVybiBlLmp1bXBUbyh7Y2VudGVyOlsrdFsyXSwrdFsxXV0sem9vbTordFswXSxiZWFyaW5nOmkscGl0Y2g6Kyh0WzRdfHwwKX0pLCEwfXJldHVybiAhMX1fdXBkYXRlSGFzaFVudGhyb3R0bGVkKCl7Y29uc3QgdD1lLndpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLygjLispPyQvLHRoaXMuZ2V0SGFzaFN0cmluZygpKTtlLndpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShlLndpbmRvdy5oaXN0b3J5LnN0YXRlLG51bGwsdCk7fX1mdW5jdGlvbiBKbyhlLHQpe2NvbnN0IGk9ZS5nZXRDZW50ZXIoKSxvPU1hdGgucm91bmQoMTAwKmUuZ2V0Wm9vbSgpKS8xMDAscj1NYXRoLmNlaWwoKG8qTWF0aC5MTjIrTWF0aC5sb2coNTEyLzM2MC8uNSkpL01hdGguTE4xMCksbj1NYXRoLnBvdygxMCxyKSxzPU1hdGgucm91bmQoaS5sbmcqbikvbixhPU1hdGgucm91bmQoaS5sYXQqbikvbixsPWUuZ2V0QmVhcmluZygpLGM9ZS5nZXRQaXRjaCgpO2xldCBoPXQ/YC8ke3N9LyR7YX0vJHtvfWA6YCR7b30vJHthfS8ke3N9YDtyZXR1cm4gKGx8fGMpJiYoaCs9XCIvXCIrTWF0aC5yb3VuZCgxMCpsKS8xMCksYyYmKGgrPWAvJHtNYXRoLnJvdW5kKGMpfWApLGh9Y29uc3QgUW89e2xpbmVhcml0eTouMyxlYXNpbmc6ZS5iZXppZXIoMCwwLC4zLDEpfSxlcj1lLmV4dGVuZCh7ZGVjZWxlcmF0aW9uOjI1MDAsbWF4U3BlZWQ6MTQwMH0sUW8pLHRyPWUuZXh0ZW5kKHtkZWNlbGVyYXRpb246MjAsbWF4U3BlZWQ6MTQwMH0sUW8pLGlyPWUuZXh0ZW5kKHtkZWNlbGVyYXRpb246MWUzLG1heFNwZWVkOjM2MH0sUW8pLG9yPWUuZXh0ZW5kKHtkZWNlbGVyYXRpb246MWUzLG1heFNwZWVkOjkwfSxRbyk7Y2xhc3MgcnJ7Y29uc3RydWN0b3IoZSl7dGhpcy5fbWFwPWUsdGhpcy5jbGVhcigpO31jbGVhcigpe3RoaXMuX2luZXJ0aWFCdWZmZXI9W107fXJlY29yZCh0KXt0aGlzLl9kcmFpbkluZXJ0aWFCdWZmZXIoKSx0aGlzLl9pbmVydGlhQnVmZmVyLnB1c2goe3RpbWU6ZS5leHBvcnRlZC5ub3coKSxzZXR0aW5nczp0fSk7fV9kcmFpbkluZXJ0aWFCdWZmZXIoKXtjb25zdCB0PXRoaXMuX2luZXJ0aWFCdWZmZXIsaT1lLmV4cG9ydGVkLm5vdygpO2Zvcig7dC5sZW5ndGg+MCYmaS10WzBdLnRpbWU+MTYwOyl0LnNoaWZ0KCk7fV9vbk1vdmVFbmQodCl7aWYodGhpcy5fbWFwLl9wcmVmZXJzUmVkdWNlZE1vdGlvbigpKXJldHVybjtpZih0aGlzLl9kcmFpbkluZXJ0aWFCdWZmZXIoKSx0aGlzLl9pbmVydGlhQnVmZmVyLmxlbmd0aDwyKXJldHVybjtjb25zdCBpPXt6b29tOjAsYmVhcmluZzowLHBpdGNoOjAscGFuOm5ldyBlLlBvaW50KDAsMCkscGluY2hBcm91bmQ6dm9pZCAwLGFyb3VuZDp2b2lkIDB9O2Zvcihjb25zdHtzZXR0aW5nczplfW9mIHRoaXMuX2luZXJ0aWFCdWZmZXIpaS56b29tKz1lLnpvb21EZWx0YXx8MCxpLmJlYXJpbmcrPWUuYmVhcmluZ0RlbHRhfHwwLGkucGl0Y2grPWUucGl0Y2hEZWx0YXx8MCxlLnBhbkRlbHRhJiZpLnBhbi5fYWRkKGUucGFuRGVsdGEpLGUuYXJvdW5kJiYoaS5hcm91bmQ9ZS5hcm91bmQpLGUucGluY2hBcm91bmQmJihpLnBpbmNoQXJvdW5kPWUucGluY2hBcm91bmQpO2NvbnN0IG89dGhpcy5faW5lcnRpYUJ1ZmZlclt0aGlzLl9pbmVydGlhQnVmZmVyLmxlbmd0aC0xXS50aW1lLXRoaXMuX2luZXJ0aWFCdWZmZXJbMF0udGltZSxyPXt9O2lmKGkucGFuLm1hZygpKXtjb25zdCBuPXNyKGkucGFuLm1hZygpLG8sZS5leHRlbmQoe30sZXIsdHx8e30pKTtyLm9mZnNldD1pLnBhbi5tdWx0KG4uYW1vdW50L2kucGFuLm1hZygpKSxyLmNlbnRlcj10aGlzLl9tYXAudHJhbnNmb3JtLmNlbnRlcixucihyLG4pO31pZihpLnpvb20pe2NvbnN0IGU9c3IoaS56b29tLG8sdHIpO3Iuem9vbT10aGlzLl9tYXAudHJhbnNmb3JtLnpvb20rZS5hbW91bnQsbnIocixlKTt9aWYoaS5iZWFyaW5nKXtjb25zdCB0PXNyKGkuYmVhcmluZyxvLGlyKTtyLmJlYXJpbmc9dGhpcy5fbWFwLnRyYW5zZm9ybS5iZWFyaW5nK2UuY2xhbXAodC5hbW91bnQsLTE3OSwxNzkpLG5yKHIsdCk7fWlmKGkucGl0Y2gpe2NvbnN0IGU9c3IoaS5waXRjaCxvLG9yKTtyLnBpdGNoPXRoaXMuX21hcC50cmFuc2Zvcm0ucGl0Y2grZS5hbW91bnQsbnIocixlKTt9aWYoci56b29tfHxyLmJlYXJpbmcpe2NvbnN0IGU9dm9pZCAwPT09aS5waW5jaEFyb3VuZD9pLmFyb3VuZDppLnBpbmNoQXJvdW5kO3IuYXJvdW5kPWU/dGhpcy5fbWFwLnVucHJvamVjdChlKTp0aGlzLl9tYXAuZ2V0Q2VudGVyKCk7fXJldHVybiB0aGlzLmNsZWFyKCksci5ub01vdmVTdGFydD0hMCxyfX1mdW5jdGlvbiBucihlLHQpeyghZS5kdXJhdGlvbnx8ZS5kdXJhdGlvbjx0LmR1cmF0aW9uKSYmKGUuZHVyYXRpb249dC5kdXJhdGlvbixlLmVhc2luZz10LmVhc2luZyk7fWZ1bmN0aW9uIHNyKHQsaSxvKXtjb25zdHttYXhTcGVlZDpyLGxpbmVhcml0eTpuLGRlY2VsZXJhdGlvbjpzfT1vLGE9ZS5jbGFtcCh0Km4vKGkvMWUzKSwtcixyKSxsPU1hdGguYWJzKGEpLyhzKm4pO3JldHVybiB7ZWFzaW5nOm8uZWFzaW5nLGR1cmF0aW9uOjFlMypsLGFtb3VudDphKihsLzIpfX1jbGFzcyBhciBleHRlbmRzIGUuRXZlbnR7cHJldmVudERlZmF1bHQoKXt0aGlzLl9kZWZhdWx0UHJldmVudGVkPSEwO31nZXQgZGVmYXVsdFByZXZlbnRlZCgpe3JldHVybiB0aGlzLl9kZWZhdWx0UHJldmVudGVkfWNvbnN0cnVjdG9yKHQsaSxvLHI9e30pe2NvbnN0IG49cChpLmdldENhbnZhc0NvbnRhaW5lcigpLG8pLHM9aS51bnByb2plY3Qobik7c3VwZXIodCxlLmV4dGVuZCh7cG9pbnQ6bixsbmdMYXQ6cyxvcmlnaW5hbEV2ZW50Om99LHIpKSx0aGlzLl9kZWZhdWx0UHJldmVudGVkPSExLHRoaXMudGFyZ2V0PWk7fX1jbGFzcyBsciBleHRlbmRzIGUuRXZlbnR7cHJldmVudERlZmF1bHQoKXt0aGlzLl9kZWZhdWx0UHJldmVudGVkPSEwO31nZXQgZGVmYXVsdFByZXZlbnRlZCgpe3JldHVybiB0aGlzLl9kZWZhdWx0UHJldmVudGVkfWNvbnN0cnVjdG9yKHQsaSxvKXtjb25zdCByPVwidG91Y2hlbmRcIj09PXQ/by5jaGFuZ2VkVG91Y2hlczpvLnRvdWNoZXMsbj1tKGkuZ2V0Q2FudmFzQ29udGFpbmVyKCkscikscz1uLm1hcCgoZT0+aS51bnByb2plY3QoZSkpKSxhPW4ucmVkdWNlKCgoZSx0LGksbyk9PmUuYWRkKHQuZGl2KG8ubGVuZ3RoKSkpLG5ldyBlLlBvaW50KDAsMCkpO3N1cGVyKHQse3BvaW50czpuLHBvaW50OmEsbG5nTGF0czpzLGxuZ0xhdDppLnVucHJvamVjdChhKSxvcmlnaW5hbEV2ZW50Om99KSx0aGlzLl9kZWZhdWx0UHJldmVudGVkPSExO319Y2xhc3MgY3IgZXh0ZW5kcyBlLkV2ZW50e3ByZXZlbnREZWZhdWx0KCl7dGhpcy5fZGVmYXVsdFByZXZlbnRlZD0hMDt9Z2V0IGRlZmF1bHRQcmV2ZW50ZWQoKXtyZXR1cm4gdGhpcy5fZGVmYXVsdFByZXZlbnRlZH1jb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoZSx7b3JpZ2luYWxFdmVudDppfSksdGhpcy5fZGVmYXVsdFByZXZlbnRlZD0hMTt9fWNsYXNzIGhye2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fbWFwPWUsdGhpcy5fY2xpY2tUb2xlcmFuY2U9dC5jbGlja1RvbGVyYW5jZTt9cmVzZXQoKXt0aGlzLl9tb3VzZWRvd25Qb3M9dm9pZCAwO313aGVlbChlKXtyZXR1cm4gdGhpcy5fZmlyZVByZXZlbnRhYmxlKG5ldyBjcihlLnR5cGUsdGhpcy5fbWFwLGUpKX1tb3VzZWRvd24oZSx0KXtyZXR1cm4gdGhpcy5fbW91c2Vkb3duUG9zPXQsdGhpcy5fZmlyZVByZXZlbnRhYmxlKG5ldyBhcihlLnR5cGUsdGhpcy5fbWFwLGUpKX1tb3VzZXVwKGUpe3RoaXMuX21hcC5maXJlKG5ldyBhcihlLnR5cGUsdGhpcy5fbWFwLGUpKTt9cHJlY2xpY2sodCl7Y29uc3QgaT1lLmV4dGVuZCh7fSx0KTtpLnR5cGU9XCJwcmVjbGlja1wiLHRoaXMuX21hcC5maXJlKG5ldyBhcihpLnR5cGUsdGhpcy5fbWFwLGkpKTt9Y2xpY2soZSx0KXt0aGlzLl9tb3VzZWRvd25Qb3MmJnRoaXMuX21vdXNlZG93blBvcy5kaXN0KHQpPj10aGlzLl9jbGlja1RvbGVyYW5jZXx8KHRoaXMucHJlY2xpY2soZSksdGhpcy5fbWFwLmZpcmUobmV3IGFyKGUudHlwZSx0aGlzLl9tYXAsZSkpKTt9ZGJsY2xpY2soZSl7cmV0dXJuIHRoaXMuX2ZpcmVQcmV2ZW50YWJsZShuZXcgYXIoZS50eXBlLHRoaXMuX21hcCxlKSl9bW91c2VvdmVyKGUpe3RoaXMuX21hcC5maXJlKG5ldyBhcihlLnR5cGUsdGhpcy5fbWFwLGUpKTt9bW91c2VvdXQoZSl7dGhpcy5fbWFwLmZpcmUobmV3IGFyKGUudHlwZSx0aGlzLl9tYXAsZSkpO310b3VjaHN0YXJ0KGUpe3JldHVybiB0aGlzLl9maXJlUHJldmVudGFibGUobmV3IGxyKGUudHlwZSx0aGlzLl9tYXAsZSkpfXRvdWNobW92ZShlKXt0aGlzLl9tYXAuZmlyZShuZXcgbHIoZS50eXBlLHRoaXMuX21hcCxlKSk7fXRvdWNoZW5kKGUpe3RoaXMuX21hcC5maXJlKG5ldyBscihlLnR5cGUsdGhpcy5fbWFwLGUpKTt9dG91Y2hjYW5jZWwoZSl7dGhpcy5fbWFwLmZpcmUobmV3IGxyKGUudHlwZSx0aGlzLl9tYXAsZSkpO31fZmlyZVByZXZlbnRhYmxlKGUpe2lmKHRoaXMuX21hcC5maXJlKGUpLGUuZGVmYXVsdFByZXZlbnRlZClyZXR1cm4ge319aXNFbmFibGVkKCl7cmV0dXJuICEwfWlzQWN0aXZlKCl7cmV0dXJuICExfWVuYWJsZSgpe31kaXNhYmxlKCl7fX1jbGFzcyB1cntjb25zdHJ1Y3RvcihlKXt0aGlzLl9tYXA9ZTt9cmVzZXQoKXt0aGlzLl9kZWxheUNvbnRleHRNZW51PSExLHRoaXMuX2NvbnRleHRNZW51RXZlbnQ9dm9pZCAwO31tb3VzZW1vdmUoZSl7dGhpcy5fbWFwLmZpcmUobmV3IGFyKGUudHlwZSx0aGlzLl9tYXAsZSkpO31tb3VzZWRvd24oKXt0aGlzLl9kZWxheUNvbnRleHRNZW51PSEwO31tb3VzZXVwKCl7dGhpcy5fZGVsYXlDb250ZXh0TWVudT0hMSx0aGlzLl9jb250ZXh0TWVudUV2ZW50JiYodGhpcy5fbWFwLmZpcmUobmV3IGFyKFwiY29udGV4dG1lbnVcIix0aGlzLl9tYXAsdGhpcy5fY29udGV4dE1lbnVFdmVudCkpLGRlbGV0ZSB0aGlzLl9jb250ZXh0TWVudUV2ZW50KTt9Y29udGV4dG1lbnUoZSl7dGhpcy5fZGVsYXlDb250ZXh0TWVudT90aGlzLl9jb250ZXh0TWVudUV2ZW50PWU6dGhpcy5fbWFwLmZpcmUobmV3IGFyKGUudHlwZSx0aGlzLl9tYXAsZSkpLHRoaXMuX21hcC5saXN0ZW5zKFwiY29udGV4dG1lbnVcIikmJmUucHJldmVudERlZmF1bHQoKTt9aXNFbmFibGVkKCl7cmV0dXJuICEwfWlzQWN0aXZlKCl7cmV0dXJuICExfWVuYWJsZSgpe31kaXNhYmxlKCl7fX1jbGFzcyBfcntjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX21hcD1lLHRoaXMuX2VsPWUuZ2V0Q2FudmFzQ29udGFpbmVyKCksdGhpcy5fY29udGFpbmVyPWUuZ2V0Q29udGFpbmVyKCksdGhpcy5fY2xpY2tUb2xlcmFuY2U9dC5jbGlja1RvbGVyYW5jZXx8MTt9aXNFbmFibGVkKCl7cmV0dXJuICEhdGhpcy5fZW5hYmxlZH1pc0FjdGl2ZSgpe3JldHVybiAhIXRoaXMuX2FjdGl2ZX1lbmFibGUoKXt0aGlzLmlzRW5hYmxlZCgpfHwodGhpcy5fZW5hYmxlZD0hMCk7fWRpc2FibGUoKXt0aGlzLmlzRW5hYmxlZCgpJiYodGhpcy5fZW5hYmxlZD0hMSk7fW1vdXNlZG93bihlLHQpe3RoaXMuaXNFbmFibGVkKCkmJmUuc2hpZnRLZXkmJjA9PT1lLmJ1dHRvbiYmKGgoKSx0aGlzLl9zdGFydFBvcz10aGlzLl9sYXN0UG9zPXQsdGhpcy5fYWN0aXZlPSEwKTt9bW91c2Vtb3ZlV2luZG93KGUsdCl7aWYoIXRoaXMuX2FjdGl2ZSlyZXR1cm47Y29uc3QgaT10LG89dGhpcy5fc3RhcnRQb3Mscj10aGlzLl9sYXN0UG9zO2lmKCFvfHwhcnx8ci5lcXVhbHMoaSl8fCF0aGlzLl9ib3gmJmkuZGlzdChvKTx0aGlzLl9jbGlja1RvbGVyYW5jZSlyZXR1cm47dGhpcy5fbGFzdFBvcz1pLHRoaXMuX2JveHx8KHRoaXMuX2JveD1uKFwiZGl2XCIsXCJtYXBib3hnbC1ib3h6b29tXCIsdGhpcy5fY29udGFpbmVyKSx0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWNyb3NzaGFpclwiKSx0aGlzLl9maXJlRXZlbnQoXCJib3h6b29tc3RhcnRcIixlKSk7Y29uc3Qgcz1NYXRoLm1pbihvLngsaS54KSxhPU1hdGgubWF4KG8ueCxpLngpLGw9TWF0aC5taW4oby55LGkueSksYz1NYXRoLm1heChvLnksaS55KTt0aGlzLl9tYXAuX3JlcXVlc3REb21UYXNrKCgoKT0+e3RoaXMuX2JveCYmKHRoaXMuX2JveC5zdHlsZS50cmFuc2Zvcm09YHRyYW5zbGF0ZSgke3N9cHgsJHtsfXB4KWAsdGhpcy5fYm94LnN0eWxlLndpZHRoPWEtcytcInB4XCIsdGhpcy5fYm94LnN0eWxlLmhlaWdodD1jLWwrXCJweFwiKTt9KSk7fW1vdXNldXBXaW5kb3codCxpKXtpZighdGhpcy5fYWN0aXZlKXJldHVybjtjb25zdCBvPXRoaXMuX3N0YXJ0UG9zLHI9aTtpZihvJiYwPT09dC5idXR0b24pe2lmKHRoaXMucmVzZXQoKSxkKCksby54IT09ci54fHxvLnkhPT1yLnkpcmV0dXJuIHRoaXMuX21hcC5maXJlKG5ldyBlLkV2ZW50KFwiYm94em9vbWVuZFwiLHtvcmlnaW5hbEV2ZW50OnR9KSkse2NhbWVyYUFuaW1hdGlvbjplPT5lLmZpdFNjcmVlbkNvb3JkaW5hdGVzKG8scix0aGlzLl9tYXAuZ2V0QmVhcmluZygpLHtsaW5lYXI6ITF9KX07dGhpcy5fZmlyZUV2ZW50KFwiYm94em9vbWNhbmNlbFwiLHQpO319a2V5ZG93bihlKXt0aGlzLl9hY3RpdmUmJjI3PT09ZS5rZXlDb2RlJiYodGhpcy5yZXNldCgpLHRoaXMuX2ZpcmVFdmVudChcImJveHpvb21jYW5jZWxcIixlKSk7fWJsdXIoKXt0aGlzLnJlc2V0KCk7fXJlc2V0KCl7dGhpcy5fYWN0aXZlPSExLHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3Jvc3NoYWlyXCIpLHRoaXMuX2JveCYmKHRoaXMuX2JveC5yZW1vdmUoKSx0aGlzLl9ib3g9bnVsbCksdSgpLGRlbGV0ZSB0aGlzLl9zdGFydFBvcyxkZWxldGUgdGhpcy5fbGFzdFBvczt9X2ZpcmVFdmVudCh0LGkpe3JldHVybiB0aGlzLl9tYXAuZmlyZShuZXcgZS5FdmVudCh0LHtvcmlnaW5hbEV2ZW50Oml9KSl9fWZ1bmN0aW9uIGRyKGUsdCl7Y29uc3QgaT17fTtmb3IobGV0IG89MDtvPGUubGVuZ3RoO28rKylpW2Vbb10uaWRlbnRpZmllcl09dFtvXTtyZXR1cm4gaX1jbGFzcyBwcntjb25zdHJ1Y3RvcihlKXt0aGlzLnJlc2V0KCksdGhpcy5udW1Ub3VjaGVzPWUubnVtVG91Y2hlczt9cmVzZXQoKXt0aGlzLmNlbnRyb2lkPXZvaWQgMCx0aGlzLnN0YXJ0VGltZT0wLHRoaXMudG91Y2hlcz17fSx0aGlzLmFib3J0ZWQ9ITE7fXRvdWNoc3RhcnQodCxpLG8peyh0aGlzLmNlbnRyb2lkfHxvLmxlbmd0aD50aGlzLm51bVRvdWNoZXMpJiYodGhpcy5hYm9ydGVkPSEwKSx0aGlzLmFib3J0ZWR8fCgwPT09dGhpcy5zdGFydFRpbWUmJih0aGlzLnN0YXJ0VGltZT10LnRpbWVTdGFtcCksby5sZW5ndGg9PT10aGlzLm51bVRvdWNoZXMmJih0aGlzLmNlbnRyb2lkPWZ1bmN0aW9uKHQpe2NvbnN0IGk9bmV3IGUuUG9pbnQoMCwwKTtmb3IoY29uc3QgZSBvZiB0KWkuX2FkZChlKTtyZXR1cm4gaS5kaXYodC5sZW5ndGgpfShpKSx0aGlzLnRvdWNoZXM9ZHIobyxpKSkpO310b3VjaG1vdmUoZSx0LGkpe2lmKHRoaXMuYWJvcnRlZHx8IXRoaXMuY2VudHJvaWQpcmV0dXJuO2NvbnN0IG89ZHIoaSx0KTtmb3IoY29uc3QgZSBpbiB0aGlzLnRvdWNoZXMpe2NvbnN0IHQ9b1tlXTsoIXR8fHQuZGlzdCh0aGlzLnRvdWNoZXNbZV0pPjMwKSYmKHRoaXMuYWJvcnRlZD0hMCk7fX10b3VjaGVuZChlLHQsaSl7aWYoKCF0aGlzLmNlbnRyb2lkfHxlLnRpbWVTdGFtcC10aGlzLnN0YXJ0VGltZT41MDApJiYodGhpcy5hYm9ydGVkPSEwKSwwPT09aS5sZW5ndGgpe2NvbnN0IGU9IXRoaXMuYWJvcnRlZCYmdGhpcy5jZW50cm9pZDtpZih0aGlzLnJlc2V0KCksZSlyZXR1cm4gZX19fWNsYXNzIG1ye2NvbnN0cnVjdG9yKGUpe3RoaXMuc2luZ2xlVGFwPW5ldyBwcihlKSx0aGlzLm51bVRhcHM9ZS5udW1UYXBzLHRoaXMucmVzZXQoKTt9cmVzZXQoKXt0aGlzLmxhc3RUaW1lPTEvMCx0aGlzLmxhc3RUYXA9dm9pZCAwLHRoaXMuY291bnQ9MCx0aGlzLnNpbmdsZVRhcC5yZXNldCgpO310b3VjaHN0YXJ0KGUsdCxpKXt0aGlzLnNpbmdsZVRhcC50b3VjaHN0YXJ0KGUsdCxpKTt9dG91Y2htb3ZlKGUsdCxpKXt0aGlzLnNpbmdsZVRhcC50b3VjaG1vdmUoZSx0LGkpO310b3VjaGVuZChlLHQsaSl7Y29uc3Qgbz10aGlzLnNpbmdsZVRhcC50b3VjaGVuZChlLHQsaSk7aWYobyl7Y29uc3QgdD1lLnRpbWVTdGFtcC10aGlzLmxhc3RUaW1lPDUwMCxpPSF0aGlzLmxhc3RUYXB8fHRoaXMubGFzdFRhcC5kaXN0KG8pPDMwO2lmKHQmJml8fHRoaXMucmVzZXQoKSx0aGlzLmNvdW50KyssdGhpcy5sYXN0VGltZT1lLnRpbWVTdGFtcCx0aGlzLmxhc3RUYXA9byx0aGlzLmNvdW50PT09dGhpcy5udW1UYXBzKXJldHVybiB0aGlzLnJlc2V0KCksb319fWNsYXNzIGZye2NvbnN0cnVjdG9yKCl7dGhpcy5fem9vbUluPW5ldyBtcih7bnVtVG91Y2hlczoxLG51bVRhcHM6Mn0pLHRoaXMuX3pvb21PdXQ9bmV3IG1yKHtudW1Ub3VjaGVzOjIsbnVtVGFwczoxfSksdGhpcy5yZXNldCgpO31yZXNldCgpe3RoaXMuX2FjdGl2ZT0hMSx0aGlzLl96b29tSW4ucmVzZXQoKSx0aGlzLl96b29tT3V0LnJlc2V0KCk7fXRvdWNoc3RhcnQoZSx0LGkpe3RoaXMuX3pvb21Jbi50b3VjaHN0YXJ0KGUsdCxpKSx0aGlzLl96b29tT3V0LnRvdWNoc3RhcnQoZSx0LGkpO310b3VjaG1vdmUoZSx0LGkpe3RoaXMuX3pvb21Jbi50b3VjaG1vdmUoZSx0LGkpLHRoaXMuX3pvb21PdXQudG91Y2htb3ZlKGUsdCxpKTt9dG91Y2hlbmQoZSx0LGkpe2NvbnN0IG89dGhpcy5fem9vbUluLnRvdWNoZW5kKGUsdCxpKSxyPXRoaXMuX3pvb21PdXQudG91Y2hlbmQoZSx0LGkpO3JldHVybiBvPyh0aGlzLl9hY3RpdmU9ITAsZS5wcmV2ZW50RGVmYXVsdCgpLHNldFRpbWVvdXQoKCgpPT50aGlzLnJlc2V0KCkpLDApLHtjYW1lcmFBbmltYXRpb246dD0+dC5lYXNlVG8oe2R1cmF0aW9uOjMwMCx6b29tOnQuZ2V0Wm9vbSgpKzEsYXJvdW5kOnQudW5wcm9qZWN0KG8pfSx7b3JpZ2luYWxFdmVudDplfSl9KTpyPyh0aGlzLl9hY3RpdmU9ITAsZS5wcmV2ZW50RGVmYXVsdCgpLHNldFRpbWVvdXQoKCgpPT50aGlzLnJlc2V0KCkpLDApLHtjYW1lcmFBbmltYXRpb246dD0+dC5lYXNlVG8oe2R1cmF0aW9uOjMwMCx6b29tOnQuZ2V0Wm9vbSgpLTEsYXJvdW5kOnQudW5wcm9qZWN0KHIpfSx7b3JpZ2luYWxFdmVudDplfSl9KTp2b2lkIDB9dG91Y2hjYW5jZWwoKXt0aGlzLnJlc2V0KCk7fWVuYWJsZSgpe3RoaXMuX2VuYWJsZWQ9ITA7fWRpc2FibGUoKXt0aGlzLl9lbmFibGVkPSExLHRoaXMucmVzZXQoKTt9aXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWR9aXNBY3RpdmUoKXtyZXR1cm4gdGhpcy5fYWN0aXZlfX1jb25zdCBncj17MDoxLDI6Mn07Y2xhc3MgdnJ7Y29uc3RydWN0b3IoZSl7dGhpcy5yZXNldCgpLHRoaXMuX2NsaWNrVG9sZXJhbmNlPWUuY2xpY2tUb2xlcmFuY2V8fDE7fWJsdXIoKXt0aGlzLnJlc2V0KCk7fXJlc2V0KCl7dGhpcy5fYWN0aXZlPSExLHRoaXMuX21vdmVkPSExLHRoaXMuX2xhc3RQb2ludD12b2lkIDAsdGhpcy5fZXZlbnRCdXR0b249dm9pZCAwO31fY29ycmVjdEJ1dHRvbihlLHQpe3JldHVybiAhMX1fbW92ZShlLHQpe3JldHVybiB7fX1tb3VzZWRvd24oZSx0KXtpZih0aGlzLl9sYXN0UG9pbnQpcmV0dXJuO2NvbnN0IGk9ZihlKTt0aGlzLl9jb3JyZWN0QnV0dG9uKGUsaSkmJih0aGlzLl9sYXN0UG9pbnQ9dCx0aGlzLl9ldmVudEJ1dHRvbj1pKTt9bW91c2Vtb3ZlV2luZG93KGUsdCl7Y29uc3QgaT10aGlzLl9sYXN0UG9pbnQ7aWYoaSlpZihlLnByZXZlbnREZWZhdWx0KCksbnVsbCE9dGhpcy5fZXZlbnRCdXR0b24mJmZ1bmN0aW9uKGUsdCl7Y29uc3QgaT1nclt0XTtyZXR1cm4gdm9pZCAwPT09ZS5idXR0b25zfHwoZS5idXR0b25zJmkpIT09aX0oZSx0aGlzLl9ldmVudEJ1dHRvbikpdGhpcy5yZXNldCgpO2Vsc2UgaWYodGhpcy5fbW92ZWR8fCEodC5kaXN0KGkpPHRoaXMuX2NsaWNrVG9sZXJhbmNlKSlyZXR1cm4gdGhpcy5fbW92ZWQ9ITAsdGhpcy5fbGFzdFBvaW50PXQsdGhpcy5fbW92ZShpLHQpfW1vdXNldXBXaW5kb3coZSl7dGhpcy5fbGFzdFBvaW50JiZmKGUpPT09dGhpcy5fZXZlbnRCdXR0b24mJih0aGlzLl9tb3ZlZCYmZCgpLHRoaXMucmVzZXQoKSk7fWVuYWJsZSgpe3RoaXMuX2VuYWJsZWQ9ITA7fWRpc2FibGUoKXt0aGlzLl9lbmFibGVkPSExLHRoaXMucmVzZXQoKTt9aXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWR9aXNBY3RpdmUoKXtyZXR1cm4gdGhpcy5fYWN0aXZlfX1jbGFzcyB4ciBleHRlbmRzIHZye21vdXNlZG93bihlLHQpe3N1cGVyLm1vdXNlZG93bihlLHQpLHRoaXMuX2xhc3RQb2ludCYmKHRoaXMuX2FjdGl2ZT0hMCk7fV9jb3JyZWN0QnV0dG9uKGUsdCl7cmV0dXJuIDA9PT10JiYhZS5jdHJsS2V5fV9tb3ZlKGUsdCl7cmV0dXJuIHthcm91bmQ6dCxwYW5EZWx0YTp0LnN1YihlKX19fWNsYXNzIHlyIGV4dGVuZHMgdnJ7X2NvcnJlY3RCdXR0b24oZSx0KXtyZXR1cm4gMD09PXQmJmUuY3RybEtleXx8Mj09PXR9X21vdmUoZSx0KXtjb25zdCBpPS44Kih0LngtZS54KTtpZihpKXJldHVybiB0aGlzLl9hY3RpdmU9ITAse2JlYXJpbmdEZWx0YTppfX1jb250ZXh0bWVudShlKXtlLnByZXZlbnREZWZhdWx0KCk7fX1jbGFzcyBiciBleHRlbmRzIHZye19jb3JyZWN0QnV0dG9uKGUsdCl7cmV0dXJuIDA9PT10JiZlLmN0cmxLZXl8fDI9PT10fV9tb3ZlKGUsdCl7Y29uc3QgaT0tLjUqKHQueS1lLnkpO2lmKGkpcmV0dXJuIHRoaXMuX2FjdGl2ZT0hMCx7cGl0Y2hEZWx0YTppfX1jb250ZXh0bWVudShlKXtlLnByZXZlbnREZWZhdWx0KCk7fX1jbGFzcyB3cntjb25zdHJ1Y3Rvcih0LGkpe3RoaXMuX21hcD10LHRoaXMuX2VsPXQuZ2V0Q2FudmFzQ29udGFpbmVyKCksdGhpcy5fbWluVG91Y2hlcz0xLHRoaXMuX2NsaWNrVG9sZXJhbmNlPWkuY2xpY2tUb2xlcmFuY2V8fDEsdGhpcy5yZXNldCgpLGUuYmluZEFsbChbXCJfYWRkVG91Y2hQYW5CbG9ja2VyXCIsXCJfc2hvd1RvdWNoUGFuQmxvY2tlckFsZXJ0XCJdLHRoaXMpO31yZXNldCgpe3RoaXMuX2FjdGl2ZT0hMSx0aGlzLl90b3VjaGVzPXt9LHRoaXMuX3N1bT1uZXcgZS5Qb2ludCgwLDApO310b3VjaHN0YXJ0KGUsdCxpKXtyZXR1cm4gdGhpcy5fY2FsY3VsYXRlVHJhbnNmb3JtKGUsdCxpKX10b3VjaG1vdmUodCxpLG8pe2lmKHRoaXMuX2FjdGl2ZSYmIShvLmxlbmd0aDx0aGlzLl9taW5Ub3VjaGVzKSl7aWYodGhpcy5fbWFwLl9jb29wZXJhdGl2ZUdlc3R1cmVzJiYhdGhpcy5fbWFwLmlzTW92aW5nKCkpe2lmKDE9PT1vLmxlbmd0aCYmIWUuaXNGdWxsc2NyZWVuKCkpcmV0dXJuIHZvaWQgdGhpcy5fc2hvd1RvdWNoUGFuQmxvY2tlckFsZXJ0KCk7XCJoaWRkZW5cIiE9PXRoaXMuX2FsZXJ0Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkmJih0aGlzLl9hbGVydENvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsY2xlYXJUaW1lb3V0KHRoaXMuX2FsZXJ0VGltZXIpKTt9cmV0dXJuIHQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2NhbGN1bGF0ZVRyYW5zZm9ybSh0LGksbyl9fXRvdWNoZW5kKGUsdCxpKXt0aGlzLl9jYWxjdWxhdGVUcmFuc2Zvcm0oZSx0LGkpLHRoaXMuX2FjdGl2ZSYmaS5sZW5ndGg8dGhpcy5fbWluVG91Y2hlcyYmdGhpcy5yZXNldCgpO310b3VjaGNhbmNlbCgpe3RoaXMucmVzZXQoKTt9X2NhbGN1bGF0ZVRyYW5zZm9ybSh0LGksbyl7by5sZW5ndGg+MCYmKHRoaXMuX2FjdGl2ZT0hMCk7Y29uc3Qgcj1kcihvLGkpLG49bmV3IGUuUG9pbnQoMCwwKSxzPW5ldyBlLlBvaW50KDAsMCk7bGV0IGE9MDtmb3IoY29uc3QgZSBpbiByKXtjb25zdCB0PXJbZV0saT10aGlzLl90b3VjaGVzW2VdO2kmJihuLl9hZGQodCkscy5fYWRkKHQuc3ViKGkpKSxhKysscltlXT10KTt9aWYodGhpcy5fdG91Y2hlcz1yLGE8dGhpcy5fbWluVG91Y2hlc3x8IXMubWFnKCkpcmV0dXJuO2NvbnN0IGw9cy5kaXYoYSk7cmV0dXJuIHRoaXMuX3N1bS5fYWRkKGwpLHRoaXMuX3N1bS5tYWcoKTx0aGlzLl9jbGlja1RvbGVyYW5jZT92b2lkIDA6e2Fyb3VuZDpuLmRpdihhKSxwYW5EZWx0YTpsfX1lbmFibGUoKXt0aGlzLl9lbmFibGVkPSEwLHRoaXMuX21hcC5fY29vcGVyYXRpdmVHZXN0dXJlcyYmKHRoaXMuX2FkZFRvdWNoUGFuQmxvY2tlcigpLHRoaXMuX2VsLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC10b3VjaC1wYW4tYmxvY2tlci1vdmVycmlkZVwiLFwibWFwYm94Z2wtc2Nyb2xsYWJsZS1wYWdlXCIpKTt9ZGlzYWJsZSgpe3RoaXMuX2VuYWJsZWQ9ITEsdGhpcy5fbWFwLl9jb29wZXJhdGl2ZUdlc3R1cmVzJiYoY2xlYXJUaW1lb3V0KHRoaXMuX2FsZXJ0VGltZXIpLHRoaXMuX2FsZXJ0Q29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX2VsLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC10b3VjaC1wYW4tYmxvY2tlci1vdmVycmlkZVwiLFwibWFwYm94Z2wtc2Nyb2xsYWJsZS1wYWdlXCIpKSx0aGlzLnJlc2V0KCk7fWlzRW5hYmxlZCgpe3JldHVybiAhIXRoaXMuX2VuYWJsZWR9aXNBY3RpdmUoKXtyZXR1cm4gISF0aGlzLl9hY3RpdmV9X2FkZFRvdWNoUGFuQmxvY2tlcigpe3RoaXMuX21hcCYmIXRoaXMuX2FsZXJ0Q29udGFpbmVyJiYodGhpcy5fYWxlcnRDb250YWluZXI9bihcImRpdlwiLFwibWFwYm94Z2wtdG91Y2gtcGFuLWJsb2NrZXJcIix0aGlzLl9tYXAuX2NvbnRhaW5lciksdGhpcy5fYWxlcnRDb250YWluZXIudGV4dENvbnRlbnQ9dGhpcy5fbWFwLl9nZXRVSVN0cmluZyhcIlRvdWNoUGFuQmxvY2tlci5NZXNzYWdlXCIpLHRoaXMuX2FsZXJ0Q29udGFpbmVyLnN0eWxlLmZvbnRTaXplPWAke01hdGgubWF4KDEwLE1hdGgubWluKDI0LE1hdGguZmxvb3IoLjA1KnRoaXMuX2VsLmNsaWVudFdpZHRoKSkpfXB4YCk7fV9zaG93VG91Y2hQYW5CbG9ja2VyQWxlcnQoKXt0aGlzLl9hbGVydENvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5PVwidmlzaWJsZVwiLHRoaXMuX2FsZXJ0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC10b3VjaC1wYW4tYmxvY2tlci1zaG93XCIpLHRoaXMuX2FsZXJ0Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImFsZXJ0XCIpLGNsZWFyVGltZW91dCh0aGlzLl9hbGVydFRpbWVyKSx0aGlzLl9hbGVydFRpbWVyPXNldFRpbWVvdXQoKCgpPT57dGhpcy5fYWxlcnRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLXRvdWNoLXBhbi1ibG9ja2VyLXNob3dcIiksdGhpcy5fYWxlcnRDb250YWluZXIuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwibnVsbFwiKTt9KSw1MDApO319Y2xhc3MgVHJ7Y29uc3RydWN0b3IoKXt0aGlzLnJlc2V0KCk7fXJlc2V0KCl7dGhpcy5fYWN0aXZlPSExLHRoaXMuX2ZpcnN0VHdvVG91Y2hlcz12b2lkIDA7fV9zdGFydChlKXt9X21vdmUoZSx0LGkpe3JldHVybiB7fX10b3VjaHN0YXJ0KGUsdCxpKXt0aGlzLl9maXJzdFR3b1RvdWNoZXN8fGkubGVuZ3RoPDJ8fCh0aGlzLl9maXJzdFR3b1RvdWNoZXM9W2lbMF0uaWRlbnRpZmllcixpWzFdLmlkZW50aWZpZXJdLHRoaXMuX3N0YXJ0KFt0WzBdLHRbMV1dKSk7fXRvdWNobW92ZShlLHQsaSl7Y29uc3Qgbz10aGlzLl9maXJzdFR3b1RvdWNoZXM7aWYoIW8pcmV0dXJuO2UucHJldmVudERlZmF1bHQoKTtjb25zdFtyLG5dPW8scz1FcihpLHQsciksYT1FcihpLHQsbik7aWYoIXN8fCFhKXJldHVybjtjb25zdCBsPXRoaXMuX2Fyb3VuZENlbnRlcj9udWxsOnMuYWRkKGEpLmRpdigyKTtyZXR1cm4gdGhpcy5fbW92ZShbcyxhXSxsLGUpfXRvdWNoZW5kKGUsdCxpKXtpZighdGhpcy5fZmlyc3RUd29Ub3VjaGVzKXJldHVybjtjb25zdFtvLHJdPXRoaXMuX2ZpcnN0VHdvVG91Y2hlcyxuPUVyKGksdCxvKSxzPUVyKGksdCxyKTtuJiZzfHwodGhpcy5fYWN0aXZlJiZkKCksdGhpcy5yZXNldCgpKTt9dG91Y2hjYW5jZWwoKXt0aGlzLnJlc2V0KCk7fWVuYWJsZShlKXt0aGlzLl9lbmFibGVkPSEwLHRoaXMuX2Fyb3VuZENlbnRlcj0hIWUmJlwiY2VudGVyXCI9PT1lLmFyb3VuZDt9ZGlzYWJsZSgpe3RoaXMuX2VuYWJsZWQ9ITEsdGhpcy5yZXNldCgpO31pc0VuYWJsZWQoKXtyZXR1cm4gdGhpcy5fZW5hYmxlZH1pc0FjdGl2ZSgpe3JldHVybiB0aGlzLl9hY3RpdmV9fWZ1bmN0aW9uIEVyKGUsdCxpKXtmb3IobGV0IG89MDtvPGUubGVuZ3RoO28rKylpZihlW29dLmlkZW50aWZpZXI9PT1pKXJldHVybiB0W29dfWZ1bmN0aW9uIENyKGUsdCl7cmV0dXJuIE1hdGgubG9nKGUvdCkvTWF0aC5MTjJ9Y2xhc3MgTXIgZXh0ZW5kcyBUcntyZXNldCgpe3N1cGVyLnJlc2V0KCksdGhpcy5fZGlzdGFuY2U9MCx0aGlzLl9zdGFydERpc3RhbmNlPTA7fV9zdGFydChlKXt0aGlzLl9zdGFydERpc3RhbmNlPXRoaXMuX2Rpc3RhbmNlPWVbMF0uZGlzdChlWzFdKTt9X21vdmUoZSx0KXtjb25zdCBpPXRoaXMuX2Rpc3RhbmNlO2lmKHRoaXMuX2Rpc3RhbmNlPWVbMF0uZGlzdChlWzFdKSx0aGlzLl9hY3RpdmV8fCEoTWF0aC5hYnMoQ3IodGhpcy5fZGlzdGFuY2UsdGhpcy5fc3RhcnREaXN0YW5jZSkpPC4xKSlyZXR1cm4gdGhpcy5fYWN0aXZlPSEwLHt6b29tRGVsdGE6Q3IodGhpcy5fZGlzdGFuY2UsaSkscGluY2hBcm91bmQ6dH19fWZ1bmN0aW9uIElyKGUsdCl7cmV0dXJuIDE4MCplLmFuZ2xlV2l0aCh0KS9NYXRoLlBJfWNsYXNzIFByIGV4dGVuZHMgVHJ7cmVzZXQoKXtzdXBlci5yZXNldCgpLHRoaXMuX21pbkRpYW1ldGVyPTAsdGhpcy5fc3RhcnRWZWN0b3I9dm9pZCAwLHRoaXMuX3ZlY3Rvcj12b2lkIDA7fV9zdGFydChlKXt0aGlzLl9zdGFydFZlY3Rvcj10aGlzLl92ZWN0b3I9ZVswXS5zdWIoZVsxXSksdGhpcy5fbWluRGlhbWV0ZXI9ZVswXS5kaXN0KGVbMV0pO31fbW92ZShlLHQpe2NvbnN0IGk9dGhpcy5fdmVjdG9yO2lmKHRoaXMuX3ZlY3Rvcj1lWzBdLnN1YihlWzFdKSxpJiYodGhpcy5fYWN0aXZlfHwhdGhpcy5faXNCZWxvd1RocmVzaG9sZCh0aGlzLl92ZWN0b3IpKSlyZXR1cm4gdGhpcy5fYWN0aXZlPSEwLHtiZWFyaW5nRGVsdGE6SXIodGhpcy5fdmVjdG9yLGkpLHBpbmNoQXJvdW5kOnR9fV9pc0JlbG93VGhyZXNob2xkKGUpe3RoaXMuX21pbkRpYW1ldGVyPU1hdGgubWluKHRoaXMuX21pbkRpYW1ldGVyLGUubWFnKCkpO2NvbnN0IHQ9MjUvKE1hdGguUEkqdGhpcy5fbWluRGlhbWV0ZXIpKjM2MCxpPXRoaXMuX3N0YXJ0VmVjdG9yO2lmKCFpKXJldHVybiAhMTtjb25zdCBvPUlyKGUsaSk7cmV0dXJuIE1hdGguYWJzKG8pPHR9fWZ1bmN0aW9uIFNyKGUpe3JldHVybiBNYXRoLmFicyhlLnkpPk1hdGguYWJzKGUueCl9Y2xhc3MgRHIgZXh0ZW5kcyBUcntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuX21hcD1lO31yZXNldCgpe3N1cGVyLnJlc2V0KCksdGhpcy5fdmFsaWQ9dm9pZCAwLHRoaXMuX2ZpcnN0TW92ZT12b2lkIDAsdGhpcy5fbGFzdFBvaW50cz12b2lkIDA7fV9zdGFydChlKXt0aGlzLl9sYXN0UG9pbnRzPWUsU3IoZVswXS5zdWIoZVsxXSkpJiYodGhpcy5fdmFsaWQ9ITEpO31fbW92ZSh0LGksbyl7Y29uc3Qgcj10aGlzLl9sYXN0UG9pbnRzO2lmKCFyKXJldHVybjtjb25zdCBuPXRbMF0uc3ViKHJbMF0pLHM9dFsxXS5zdWIoclsxXSk7cmV0dXJuIHRoaXMuX21hcC5fY29vcGVyYXRpdmVHZXN0dXJlcyYmIWUuaXNGdWxsc2NyZWVuKCkmJm8udG91Y2hlcy5sZW5ndGg8M3x8KHRoaXMuX3ZhbGlkPXRoaXMuZ2VzdHVyZUJlZ2luc1ZlcnRpY2FsbHkobixzLG8udGltZVN0YW1wKSwhdGhpcy5fdmFsaWQpP3ZvaWQgMDoodGhpcy5fbGFzdFBvaW50cz10LHRoaXMuX2FjdGl2ZT0hMCx7cGl0Y2hEZWx0YToobi55K3MueSkvMiotLjV9KX1nZXN0dXJlQmVnaW5zVmVydGljYWxseShlLHQsaSl7aWYodm9pZCAwIT09dGhpcy5fdmFsaWQpcmV0dXJuIHRoaXMuX3ZhbGlkO2NvbnN0IG89ZS5tYWcoKT49MixyPXQubWFnKCk+PTI7aWYoIW8mJiFyKXJldHVybjtpZighb3x8IXIpcmV0dXJuIG51bGw9PXRoaXMuX2ZpcnN0TW92ZSYmKHRoaXMuX2ZpcnN0TW92ZT1pKSxpLXRoaXMuX2ZpcnN0TW92ZTwxMDAmJnZvaWQgMDtjb25zdCBuPWUueT4wPT10Lnk+MDtyZXR1cm4gU3IoZSkmJlNyKHQpJiZufX1jb25zdCBMcj17cGFuU3RlcDoxMDAsYmVhcmluZ1N0ZXA6MTUscGl0Y2hTdGVwOjEwfTtjbGFzcyBBcntjb25zdHJ1Y3Rvcigpe2NvbnN0IGU9THI7dGhpcy5fcGFuU3RlcD1lLnBhblN0ZXAsdGhpcy5fYmVhcmluZ1N0ZXA9ZS5iZWFyaW5nU3RlcCx0aGlzLl9waXRjaFN0ZXA9ZS5waXRjaFN0ZXAsdGhpcy5fcm90YXRpb25EaXNhYmxlZD0hMTt9Ymx1cigpe3RoaXMucmVzZXQoKTt9cmVzZXQoKXt0aGlzLl9hY3RpdmU9ITE7fWtleWRvd24oZSl7aWYoZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5tZXRhS2V5KXJldHVybjtsZXQgdD0wLGk9MCxvPTAscj0wLG49MDtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDYxOmNhc2UgMTA3OmNhc2UgMTcxOmNhc2UgMTg3OnQ9MTticmVhaztjYXNlIDE4OTpjYXNlIDEwOTpjYXNlIDE3Mzp0PS0xO2JyZWFrO2Nhc2UgMzc6ZS5zaGlmdEtleT9pPS0xOihlLnByZXZlbnREZWZhdWx0KCkscj0tMSk7YnJlYWs7Y2FzZSAzOTplLnNoaWZ0S2V5P2k9MTooZS5wcmV2ZW50RGVmYXVsdCgpLHI9MSk7YnJlYWs7Y2FzZSAzODplLnNoaWZ0S2V5P289MTooZS5wcmV2ZW50RGVmYXVsdCgpLG49LTEpO2JyZWFrO2Nhc2UgNDA6ZS5zaGlmdEtleT9vPS0xOihlLnByZXZlbnREZWZhdWx0KCksbj0xKTticmVhaztkZWZhdWx0OnJldHVybn1yZXR1cm4gdGhpcy5fcm90YXRpb25EaXNhYmxlZCYmKGk9MCxvPTApLHtjYW1lcmFBbmltYXRpb246cz0+e2NvbnN0IGE9cy5nZXRab29tKCk7cy5lYXNlVG8oe2R1cmF0aW9uOjMwMCxlYXNlSWQ6XCJrZXlib2FyZEhhbmRsZXJcIixlYXNpbmc6enIsem9vbTp0P01hdGgucm91bmQoYSkrdCooZS5zaGlmdEtleT8yOjEpOmEsYmVhcmluZzpzLmdldEJlYXJpbmcoKStpKnRoaXMuX2JlYXJpbmdTdGVwLHBpdGNoOnMuZ2V0UGl0Y2goKStvKnRoaXMuX3BpdGNoU3RlcCxvZmZzZXQ6Wy1yKnRoaXMuX3BhblN0ZXAsLW4qdGhpcy5fcGFuU3RlcF0sY2VudGVyOnMuZ2V0Q2VudGVyKCl9LHtvcmlnaW5hbEV2ZW50OmV9KTt9fX1lbmFibGUoKXt0aGlzLl9lbmFibGVkPSEwO31kaXNhYmxlKCl7dGhpcy5fZW5hYmxlZD0hMSx0aGlzLnJlc2V0KCk7fWlzRW5hYmxlZCgpe3JldHVybiB0aGlzLl9lbmFibGVkfWlzQWN0aXZlKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZX1kaXNhYmxlUm90YXRpb24oKXt0aGlzLl9yb3RhdGlvbkRpc2FibGVkPSEwO31lbmFibGVSb3RhdGlvbigpe3RoaXMuX3JvdGF0aW9uRGlzYWJsZWQ9ITE7fX1mdW5jdGlvbiB6cihlKXtyZXR1cm4gZSooMi1lKX1jb25zdCBScj00LjAwMDI0NDE0MDYyNTtjbGFzcyBPcntjb25zdHJ1Y3Rvcih0LGkpe3RoaXMuX21hcD10LHRoaXMuX2VsPXQuZ2V0Q2FudmFzQ29udGFpbmVyKCksdGhpcy5faGFuZGxlcj1pLHRoaXMuX2RlbHRhPTAsdGhpcy5fZGVmYXVsdFpvb21SYXRlPS4wMSx0aGlzLl93aGVlbFpvb21SYXRlPS4wMDIyMjIyMjIyMjIyMjIyMjIyLGUuYmluZEFsbChbXCJfb25UaW1lb3V0XCIsXCJfYWRkU2Nyb2xsWm9vbUJsb2NrZXJcIixcIl9zaG93QmxvY2tlckFsZXJ0XCJdLHRoaXMpO31zZXRab29tUmF0ZShlKXt0aGlzLl9kZWZhdWx0Wm9vbVJhdGU9ZTt9c2V0V2hlZWxab29tUmF0ZShlKXt0aGlzLl93aGVlbFpvb21SYXRlPWU7fWlzRW5hYmxlZCgpe3JldHVybiAhIXRoaXMuX2VuYWJsZWR9aXNBY3RpdmUoKXtyZXR1cm4gdGhpcy5fYWN0aXZlfHx2b2lkIDAhPT10aGlzLl9maW5pc2hUaW1lb3V0fWlzWm9vbWluZygpe3JldHVybiAhIXRoaXMuX3pvb21pbmd9ZW5hYmxlKGUpe3RoaXMuaXNFbmFibGVkKCl8fCh0aGlzLl9lbmFibGVkPSEwLHRoaXMuX2Fyb3VuZENlbnRlcj0hIWUmJlwiY2VudGVyXCI9PT1lLmFyb3VuZCx0aGlzLl9tYXAuX2Nvb3BlcmF0aXZlR2VzdHVyZXMmJnRoaXMuX2FkZFNjcm9sbFpvb21CbG9ja2VyKCkpO31kaXNhYmxlKCl7dGhpcy5pc0VuYWJsZWQoKSYmKHRoaXMuX2VuYWJsZWQ9ITEsdGhpcy5fbWFwLl9jb29wZXJhdGl2ZUdlc3R1cmVzJiYoY2xlYXJUaW1lb3V0KHRoaXMuX2FsZXJ0VGltZXIpLHRoaXMuX2FsZXJ0Q29udGFpbmVyLnJlbW92ZSgpKSk7fXdoZWVsKHQpe2lmKCF0aGlzLmlzRW5hYmxlZCgpKXJldHVybjtpZih0aGlzLl9tYXAuX2Nvb3BlcmF0aXZlR2VzdHVyZXMpe2lmKCEodC5jdHJsS2V5fHx0Lm1ldGFLZXl8fHRoaXMuaXNab29taW5nKCl8fGUuaXNGdWxsc2NyZWVuKCkpKXJldHVybiB2b2lkIHRoaXMuX3Nob3dCbG9ja2VyQWxlcnQoKTtcImhpZGRlblwiIT09dGhpcy5fYWxlcnRDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSYmKHRoaXMuX2FsZXJ0Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixjbGVhclRpbWVvdXQodGhpcy5fYWxlcnRUaW1lcikpO31sZXQgaT10LmRlbHRhTW9kZT09PWUud2luZG93LldoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkU/NDAqdC5kZWx0YVk6dC5kZWx0YVk7Y29uc3Qgbz1lLmV4cG9ydGVkLm5vdygpLHI9by0odGhpcy5fbGFzdFdoZWVsRXZlbnRUaW1lfHwwKTt0aGlzLl9sYXN0V2hlZWxFdmVudFRpbWU9bywwIT09aSYmaSVScj09MD90aGlzLl90eXBlPVwid2hlZWxcIjowIT09aSYmTWF0aC5hYnMoaSk8ND90aGlzLl90eXBlPVwidHJhY2twYWRcIjpyPjQwMD8odGhpcy5fdHlwZT1udWxsLHRoaXMuX2xhc3RWYWx1ZT1pLHRoaXMuX3RpbWVvdXQ9c2V0VGltZW91dCh0aGlzLl9vblRpbWVvdXQsNDAsdCkpOnRoaXMuX3R5cGV8fCh0aGlzLl90eXBlPU1hdGguYWJzKHIqaSk8MjAwP1widHJhY2twYWRcIjpcIndoZWVsXCIsdGhpcy5fdGltZW91dCYmKGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KSx0aGlzLl90aW1lb3V0PW51bGwsaSs9dGhpcy5fbGFzdFZhbHVlKSksdC5zaGlmdEtleSYmaSYmKGkvPTQpLHRoaXMuX3R5cGUmJih0aGlzLl9sYXN0V2hlZWxFdmVudD10LHRoaXMuX2RlbHRhLT1pLHRoaXMuX2FjdGl2ZXx8dGhpcy5fc3RhcnQodCkpLHQucHJldmVudERlZmF1bHQoKTt9X29uVGltZW91dChlKXt0aGlzLl90eXBlPVwid2hlZWxcIix0aGlzLl9kZWx0YS09dGhpcy5fbGFzdFZhbHVlLHRoaXMuX2FjdGl2ZXx8dGhpcy5fc3RhcnQoZSk7fV9zdGFydChlKXtpZighdGhpcy5fZGVsdGEpcmV0dXJuO3RoaXMuX2ZyYW1lSWQmJih0aGlzLl9mcmFtZUlkPW51bGwpLHRoaXMuX2FjdGl2ZT0hMCx0aGlzLmlzWm9vbWluZygpfHwodGhpcy5fem9vbWluZz0hMCksdGhpcy5fZmluaXNoVGltZW91dCYmKGNsZWFyVGltZW91dCh0aGlzLl9maW5pc2hUaW1lb3V0KSxkZWxldGUgdGhpcy5fZmluaXNoVGltZW91dCk7Y29uc3QgdD1wKHRoaXMuX2VsLGUpO3RoaXMuX2Fyb3VuZFBvaW50PXRoaXMuX2Fyb3VuZENlbnRlcj90aGlzLl9tYXAudHJhbnNmb3JtLmNlbnRlclBvaW50OnQsdGhpcy5fYXJvdW5kQ29vcmQ9dGhpcy5fbWFwLnRyYW5zZm9ybS5wb2ludENvb3JkaW5hdGUzRCh0aGlzLl9hcm91bmRQb2ludCksdGhpcy5fdGFyZ2V0Wm9vbT12b2lkIDAsdGhpcy5fZnJhbWVJZHx8KHRoaXMuX2ZyYW1lSWQ9ITAsdGhpcy5faGFuZGxlci5fdHJpZ2dlclJlbmRlckZyYW1lKCkpO31yZW5kZXJGcmFtZSgpe2lmKCF0aGlzLl9mcmFtZUlkKXJldHVybjtpZih0aGlzLl9mcmFtZUlkPW51bGwsIXRoaXMuaXNBY3RpdmUoKSlyZXR1cm47Y29uc3QgdD10aGlzLl9tYXAudHJhbnNmb3JtO1wid2hlZWxcIj09PXRoaXMuX3R5cGUmJnQucHJvamVjdGlvbi53cmFwJiYodC5fY2VudGVyLmxuZz49MTgwfHx0Ll9jZW50ZXIubG5nPD0tMTgwKSYmKHRoaXMuX3ByZXZFYXNlPW51bGwsdGhpcy5fZWFzaW5nPW51bGwsdGhpcy5fbGFzdFdoZWVsRXZlbnQ9bnVsbCx0aGlzLl9sYXN0V2hlZWxFdmVudFRpbWU9MCk7Y29uc3QgaT0oKT0+dC5fdGVycmFpbkVuYWJsZWQoKSYmdGhpcy5fYXJvdW5kQ29vcmQ/dC5jb21wdXRlWm9vbVJlbGF0aXZlVG8odGhpcy5fYXJvdW5kQ29vcmQpOnQuem9vbTtpZigwIT09dGhpcy5fZGVsdGEpe2NvbnN0IGU9XCJ3aGVlbFwiPT09dGhpcy5fdHlwZSYmTWF0aC5hYnModGhpcy5fZGVsdGEpPlJyP3RoaXMuX3doZWVsWm9vbVJhdGU6dGhpcy5fZGVmYXVsdFpvb21SYXRlO2xldCBvPTIvKDErTWF0aC5leHAoLU1hdGguYWJzKHRoaXMuX2RlbHRhKmUpKSk7dGhpcy5fZGVsdGE8MCYmMCE9PW8mJihvPTEvbyk7Y29uc3Qgcj1pKCksbj1NYXRoLnBvdygyLHIpLHM9XCJudW1iZXJcIj09dHlwZW9mIHRoaXMuX3RhcmdldFpvb20/dC56b29tU2NhbGUodGhpcy5fdGFyZ2V0Wm9vbSk6bjt0aGlzLl90YXJnZXRab29tPU1hdGgubWluKHQubWF4Wm9vbSxNYXRoLm1heCh0Lm1pblpvb20sdC5zY2FsZVpvb20ocypvKSkpLFwid2hlZWxcIj09PXRoaXMuX3R5cGUmJih0aGlzLl9zdGFydFpvb209cix0aGlzLl9lYXNpbmc9dGhpcy5fc21vb3RoT3V0RWFzaW5nKDIwMCkpLHRoaXMuX2RlbHRhPTA7fWNvbnN0IG89XCJudW1iZXJcIj09dHlwZW9mIHRoaXMuX3RhcmdldFpvb20/dGhpcy5fdGFyZ2V0Wm9vbTppKCkscj10aGlzLl9zdGFydFpvb20sbj10aGlzLl9lYXNpbmc7bGV0IHMsYT0hMTtpZihcIndoZWVsXCI9PT10aGlzLl90eXBlJiZyJiZuKXtjb25zdCB0PU1hdGgubWluKChlLmV4cG9ydGVkLm5vdygpLXRoaXMuX2xhc3RXaGVlbEV2ZW50VGltZSkvMjAwLDEpLGk9bih0KTtzPWUubnVtYmVyKHIsbyxpKSx0PDE/dGhpcy5fZnJhbWVJZHx8KHRoaXMuX2ZyYW1lSWQ9ITApOmE9ITA7fWVsc2Ugcz1vLGE9ITA7cmV0dXJuIHRoaXMuX2FjdGl2ZT0hMCxhJiYodGhpcy5fYWN0aXZlPSExLHRoaXMuX2ZpbmlzaFRpbWVvdXQ9c2V0VGltZW91dCgoKCk9Pnt0aGlzLl96b29taW5nPSExLHRoaXMuX2hhbmRsZXIuX3RyaWdnZXJSZW5kZXJGcmFtZSgpLGRlbGV0ZSB0aGlzLl90YXJnZXRab29tLGRlbGV0ZSB0aGlzLl9maW5pc2hUaW1lb3V0O30pLDIwMCkpLHtub0luZXJ0aWE6ITAsbmVlZHNSZW5kZXJGcmFtZTohYSx6b29tRGVsdGE6cy1pKCksYXJvdW5kOnRoaXMuX2Fyb3VuZFBvaW50LGFyb3VuZENvb3JkOnRoaXMuX2Fyb3VuZENvb3JkLG9yaWdpbmFsRXZlbnQ6dGhpcy5fbGFzdFdoZWVsRXZlbnR9fV9zbW9vdGhPdXRFYXNpbmcodCl7bGV0IGk9ZS5lYXNlO2lmKHRoaXMuX3ByZXZFYXNlKXtjb25zdCB0PXRoaXMuX3ByZXZFYXNlLG89KGUuZXhwb3J0ZWQubm93KCktdC5zdGFydCkvdC5kdXJhdGlvbixyPXQuZWFzaW5nKG8rLjAxKS10LmVhc2luZyhvKSxuPS4yNy9NYXRoLnNxcnQocipyKzFlLTQpKi4wMSxzPU1hdGguc3FydCguMDcyOS1uKm4pO2k9ZS5iZXppZXIobixzLC4yNSwxKTt9cmV0dXJuIHRoaXMuX3ByZXZFYXNlPXtzdGFydDplLmV4cG9ydGVkLm5vdygpLGR1cmF0aW9uOnQsZWFzaW5nOml9LGl9Ymx1cigpe3RoaXMucmVzZXQoKTt9cmVzZXQoKXt0aGlzLl9hY3RpdmU9ITE7fV9hZGRTY3JvbGxab29tQmxvY2tlcigpe3RoaXMuX21hcCYmIXRoaXMuX2FsZXJ0Q29udGFpbmVyJiYodGhpcy5fYWxlcnRDb250YWluZXI9bihcImRpdlwiLFwibWFwYm94Z2wtc2Nyb2xsLXpvb20tYmxvY2tlclwiLHRoaXMuX21hcC5fY29udGFpbmVyKSx0aGlzLl9hbGVydENvbnRhaW5lci50ZXh0Q29udGVudD0vKE1hY3xpUGFkKS9pLnRlc3QoZS53aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk/dGhpcy5fbWFwLl9nZXRVSVN0cmluZyhcIlNjcm9sbFpvb21CbG9ja2VyLkNtZE1lc3NhZ2VcIik6dGhpcy5fbWFwLl9nZXRVSVN0cmluZyhcIlNjcm9sbFpvb21CbG9ja2VyLkN0cmxNZXNzYWdlXCIpLHRoaXMuX2FsZXJ0Q29udGFpbmVyLnN0eWxlLmZvbnRTaXplPWAke01hdGgubWF4KDEwLE1hdGgubWluKDI0LE1hdGguZmxvb3IoLjA1KnRoaXMuX2VsLmNsaWVudFdpZHRoKSkpfXB4YCk7fV9zaG93QmxvY2tlckFsZXJ0KCl7dGhpcy5fYWxlcnRDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIix0aGlzLl9hbGVydENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtc2Nyb2xsLXpvb20tYmxvY2tlci1zaG93XCIpLHRoaXMuX2FsZXJ0Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImFsZXJ0XCIpLGNsZWFyVGltZW91dCh0aGlzLl9hbGVydFRpbWVyKSx0aGlzLl9hbGVydFRpbWVyPXNldFRpbWVvdXQoKCgpPT57dGhpcy5fYWxlcnRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLXNjcm9sbC16b29tLWJsb2NrZXItc2hvd1wiKSx0aGlzLl9hbGVydENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJudWxsXCIpO30pLDIwMCk7fX1jbGFzcyBCcntjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX2NsaWNrWm9vbT1lLHRoaXMuX3RhcFpvb209dDt9ZW5hYmxlKCl7dGhpcy5fY2xpY2tab29tLmVuYWJsZSgpLHRoaXMuX3RhcFpvb20uZW5hYmxlKCk7fWRpc2FibGUoKXt0aGlzLl9jbGlja1pvb20uZGlzYWJsZSgpLHRoaXMuX3RhcFpvb20uZGlzYWJsZSgpO31pc0VuYWJsZWQoKXtyZXR1cm4gdGhpcy5fY2xpY2tab29tLmlzRW5hYmxlZCgpJiZ0aGlzLl90YXBab29tLmlzRW5hYmxlZCgpfWlzQWN0aXZlKCl7cmV0dXJuIHRoaXMuX2NsaWNrWm9vbS5pc0FjdGl2ZSgpfHx0aGlzLl90YXBab29tLmlzQWN0aXZlKCl9fWNsYXNzIGtye2NvbnN0cnVjdG9yKCl7dGhpcy5yZXNldCgpO31yZXNldCgpe3RoaXMuX2FjdGl2ZT0hMTt9Ymx1cigpe3RoaXMucmVzZXQoKTt9ZGJsY2xpY2soZSx0KXtyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLHtjYW1lcmFBbmltYXRpb246aT0+e2kuZWFzZVRvKHtkdXJhdGlvbjozMDAsem9vbTppLmdldFpvb20oKSsoZS5zaGlmdEtleT8tMToxKSxhcm91bmQ6aS51bnByb2plY3QodCl9LHtvcmlnaW5hbEV2ZW50OmV9KTt9fX1lbmFibGUoKXt0aGlzLl9lbmFibGVkPSEwO31kaXNhYmxlKCl7dGhpcy5fZW5hYmxlZD0hMSx0aGlzLnJlc2V0KCk7fWlzRW5hYmxlZCgpe3JldHVybiB0aGlzLl9lbmFibGVkfWlzQWN0aXZlKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZX19Y2xhc3MgRnJ7Y29uc3RydWN0b3IoKXt0aGlzLl90YXA9bmV3IG1yKHtudW1Ub3VjaGVzOjEsbnVtVGFwczoxfSksdGhpcy5yZXNldCgpO31yZXNldCgpe3RoaXMuX2FjdGl2ZT0hMSx0aGlzLl9zd2lwZVBvaW50PXZvaWQgMCx0aGlzLl9zd2lwZVRvdWNoPTAsdGhpcy5fdGFwVGltZT0wLHRoaXMuX3RhcC5yZXNldCgpO310b3VjaHN0YXJ0KGUsdCxpKXt0aGlzLl9zd2lwZVBvaW50fHwodGhpcy5fdGFwVGltZSYmZS50aW1lU3RhbXAtdGhpcy5fdGFwVGltZT41MDAmJnRoaXMucmVzZXQoKSx0aGlzLl90YXBUaW1lP2kubGVuZ3RoPjAmJih0aGlzLl9zd2lwZVBvaW50PXRbMF0sdGhpcy5fc3dpcGVUb3VjaD1pWzBdLmlkZW50aWZpZXIpOnRoaXMuX3RhcC50b3VjaHN0YXJ0KGUsdCxpKSk7fXRvdWNobW92ZShlLHQsaSl7aWYodGhpcy5fdGFwVGltZSl7aWYodGhpcy5fc3dpcGVQb2ludCl7aWYoaVswXS5pZGVudGlmaWVyIT09dGhpcy5fc3dpcGVUb3VjaClyZXR1cm47Y29uc3Qgbz10WzBdLHI9by55LXRoaXMuX3N3aXBlUG9pbnQueTtyZXR1cm4gdGhpcy5fc3dpcGVQb2ludD1vLGUucHJldmVudERlZmF1bHQoKSx0aGlzLl9hY3RpdmU9ITAse3pvb21EZWx0YTpyLzEyOH19fWVsc2UgdGhpcy5fdGFwLnRvdWNobW92ZShlLHQsaSk7fXRvdWNoZW5kKGUsdCxpKXt0aGlzLl90YXBUaW1lP3RoaXMuX3N3aXBlUG9pbnQmJjA9PT1pLmxlbmd0aCYmdGhpcy5yZXNldCgpOnRoaXMuX3RhcC50b3VjaGVuZChlLHQsaSkmJih0aGlzLl90YXBUaW1lPWUudGltZVN0YW1wKTt9dG91Y2hjYW5jZWwoKXt0aGlzLnJlc2V0KCk7fWVuYWJsZSgpe3RoaXMuX2VuYWJsZWQ9ITA7fWRpc2FibGUoKXt0aGlzLl9lbmFibGVkPSExLHRoaXMucmVzZXQoKTt9aXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWR9aXNBY3RpdmUoKXtyZXR1cm4gdGhpcy5fYWN0aXZlfX1jbGFzcyBVcntjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5fZWw9ZSx0aGlzLl9tb3VzZVBhbj10LHRoaXMuX3RvdWNoUGFuPWk7fWVuYWJsZShlKXt0aGlzLl9pbmVydGlhT3B0aW9ucz1lfHx7fSx0aGlzLl9tb3VzZVBhbi5lbmFibGUoKSx0aGlzLl90b3VjaFBhbi5lbmFibGUoKSx0aGlzLl9lbC5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtdG91Y2gtZHJhZy1wYW5cIik7fWRpc2FibGUoKXt0aGlzLl9tb3VzZVBhbi5kaXNhYmxlKCksdGhpcy5fdG91Y2hQYW4uZGlzYWJsZSgpLHRoaXMuX2VsLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC10b3VjaC1kcmFnLXBhblwiKTt9aXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuX21vdXNlUGFuLmlzRW5hYmxlZCgpJiZ0aGlzLl90b3VjaFBhbi5pc0VuYWJsZWQoKX1pc0FjdGl2ZSgpe3JldHVybiB0aGlzLl9tb3VzZVBhbi5pc0FjdGl2ZSgpfHx0aGlzLl90b3VjaFBhbi5pc0FjdGl2ZSgpfX1jbGFzcyBOcntjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5fcGl0Y2hXaXRoUm90YXRlPWUucGl0Y2hXaXRoUm90YXRlLHRoaXMuX21vdXNlUm90YXRlPXQsdGhpcy5fbW91c2VQaXRjaD1pO31lbmFibGUoKXt0aGlzLl9tb3VzZVJvdGF0ZS5lbmFibGUoKSx0aGlzLl9waXRjaFdpdGhSb3RhdGUmJnRoaXMuX21vdXNlUGl0Y2guZW5hYmxlKCk7fWRpc2FibGUoKXt0aGlzLl9tb3VzZVJvdGF0ZS5kaXNhYmxlKCksdGhpcy5fbW91c2VQaXRjaC5kaXNhYmxlKCk7fWlzRW5hYmxlZCgpe3JldHVybiB0aGlzLl9tb3VzZVJvdGF0ZS5pc0VuYWJsZWQoKSYmKCF0aGlzLl9waXRjaFdpdGhSb3RhdGV8fHRoaXMuX21vdXNlUGl0Y2guaXNFbmFibGVkKCkpfWlzQWN0aXZlKCl7cmV0dXJuIHRoaXMuX21vdXNlUm90YXRlLmlzQWN0aXZlKCl8fHRoaXMuX21vdXNlUGl0Y2guaXNBY3RpdmUoKX19Y2xhc3MganJ7Y29uc3RydWN0b3IoZSx0LGksbyl7dGhpcy5fZWw9ZSx0aGlzLl90b3VjaFpvb209dCx0aGlzLl90b3VjaFJvdGF0ZT1pLHRoaXMuX3RhcERyYWdab29tPW8sdGhpcy5fcm90YXRpb25EaXNhYmxlZD0hMSx0aGlzLl9lbmFibGVkPSEwO31lbmFibGUoZSl7dGhpcy5fdG91Y2hab29tLmVuYWJsZShlKSx0aGlzLl9yb3RhdGlvbkRpc2FibGVkfHx0aGlzLl90b3VjaFJvdGF0ZS5lbmFibGUoZSksdGhpcy5fdGFwRHJhZ1pvb20uZW5hYmxlKCksdGhpcy5fZWwuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLXRvdWNoLXpvb20tcm90YXRlXCIpO31kaXNhYmxlKCl7dGhpcy5fdG91Y2hab29tLmRpc2FibGUoKSx0aGlzLl90b3VjaFJvdGF0ZS5kaXNhYmxlKCksdGhpcy5fdGFwRHJhZ1pvb20uZGlzYWJsZSgpLHRoaXMuX2VsLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC10b3VjaC16b29tLXJvdGF0ZVwiKTt9aXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuX3RvdWNoWm9vbS5pc0VuYWJsZWQoKSYmKHRoaXMuX3JvdGF0aW9uRGlzYWJsZWR8fHRoaXMuX3RvdWNoUm90YXRlLmlzRW5hYmxlZCgpKSYmdGhpcy5fdGFwRHJhZ1pvb20uaXNFbmFibGVkKCl9aXNBY3RpdmUoKXtyZXR1cm4gdGhpcy5fdG91Y2hab29tLmlzQWN0aXZlKCl8fHRoaXMuX3RvdWNoUm90YXRlLmlzQWN0aXZlKCl8fHRoaXMuX3RhcERyYWdab29tLmlzQWN0aXZlKCl9ZGlzYWJsZVJvdGF0aW9uKCl7dGhpcy5fcm90YXRpb25EaXNhYmxlZD0hMCx0aGlzLl90b3VjaFJvdGF0ZS5kaXNhYmxlKCk7fWVuYWJsZVJvdGF0aW9uKCl7dGhpcy5fcm90YXRpb25EaXNhYmxlZD0hMSx0aGlzLl90b3VjaFpvb20uaXNFbmFibGVkKCkmJnRoaXMuX3RvdWNoUm90YXRlLmVuYWJsZSgpO319Y29uc3QgR3I9ZT0+ZS56b29tfHxlLmRyYWd8fGUucGl0Y2h8fGUucm90YXRlO2NsYXNzIFpyIGV4dGVuZHMgZS5FdmVudHt9Y2xhc3MgVnJ7Y29uc3RydWN0b3IoKXt0aGlzLmNvbnN0YW50cz1bMSwxLC4wMV0sdGhpcy5yYWRpdXM9MDt9c2V0dXAodCxpKXtjb25zdCBvPWUuc3ViKFtdLGksdCk7dGhpcy5yYWRpdXM9ZS5sZW5ndGgob1syXTwwP2UuZGl2KFtdLG8sdGhpcy5jb25zdGFudHMpOltvWzBdLG9bMV0sMF0pO31wcm9qZWN0UmF5KHQpe2UuZGl2KHQsdCx0aGlzLmNvbnN0YW50cyksZS5ub3JtYWxpemUodCx0KSxlLm11bCQxKHQsdCx0aGlzLmNvbnN0YW50cyk7Y29uc3QgaT1lLnNjYWxlJDIoW10sdCx0aGlzLnJhZGl1cyk7aWYoaVsyXT4wKXtjb25zdCB0PWUuc2NhbGUkMihbXSxbMCwwLDFdLGUuZG90KGksWzAsMCwxXSkpLG89ZS5zY2FsZSQyKFtdLGUubm9ybWFsaXplKFtdLFtpWzBdLGlbMV0sMF0pLHRoaXMucmFkaXVzKSxyPWUuYWRkKFtdLGksZS5zY2FsZSQyKFtdLGUuc3ViKFtdLGUuYWRkKFtdLG8sdCksaSksMikpO2lbMF09clswXSxpWzFdPXJbMV07fXJldHVybiBpfX1mdW5jdGlvbiBXcihlKXtyZXR1cm4gZS5wYW5EZWx0YSYmZS5wYW5EZWx0YS5tYWcoKXx8ZS56b29tRGVsdGF8fGUuYmVhcmluZ0RlbHRhfHxlLnBpdGNoRGVsdGF9Y2xhc3MgWHJ7Y29uc3RydWN0b3IodCxpKXt0aGlzLl9tYXA9dCx0aGlzLl9lbD10aGlzLl9tYXAuZ2V0Q2FudmFzQ29udGFpbmVyKCksdGhpcy5faGFuZGxlcnM9W10sdGhpcy5faGFuZGxlcnNCeUlkPXt9LHRoaXMuX2NoYW5nZXM9W10sdGhpcy5faW5lcnRpYT1uZXcgcnIodCksdGhpcy5fYmVhcmluZ1NuYXA9aS5iZWFyaW5nU25hcCx0aGlzLl9wcmV2aW91c0FjdGl2ZUhhbmRsZXJzPXt9LHRoaXMuX3RyYWNraW5nRWxsaXBzb2lkPW5ldyBWcix0aGlzLl9kcmFnT3JpZ2luPW51bGwsdGhpcy5fZXZlbnRzSW5Qcm9ncmVzcz17fSx0aGlzLl9hZGREZWZhdWx0SGFuZGxlcnMoaSksZS5iaW5kQWxsKFtcImhhbmRsZUV2ZW50XCIsXCJoYW5kbGVXaW5kb3dFdmVudFwiXSx0aGlzKTtjb25zdCBvPXRoaXMuX2VsO3RoaXMuX2xpc3RlbmVycz1bW28sXCJ0b3VjaHN0YXJ0XCIse3Bhc3NpdmU6ITB9XSxbbyxcInRvdWNobW92ZVwiLHtwYXNzaXZlOiExfV0sW28sXCJ0b3VjaGVuZFwiLHZvaWQgMF0sW28sXCJ0b3VjaGNhbmNlbFwiLHZvaWQgMF0sW28sXCJtb3VzZWRvd25cIix2b2lkIDBdLFtvLFwibW91c2Vtb3ZlXCIsdm9pZCAwXSxbbyxcIm1vdXNldXBcIix2b2lkIDBdLFtlLndpbmRvdy5kb2N1bWVudCxcIm1vdXNlbW92ZVwiLHtjYXB0dXJlOiEwfV0sW2Uud2luZG93LmRvY3VtZW50LFwibW91c2V1cFwiLHZvaWQgMF0sW28sXCJtb3VzZW92ZXJcIix2b2lkIDBdLFtvLFwibW91c2VvdXRcIix2b2lkIDBdLFtvLFwiZGJsY2xpY2tcIix2b2lkIDBdLFtvLFwiY2xpY2tcIix2b2lkIDBdLFtvLFwia2V5ZG93blwiLHtjYXB0dXJlOiExfV0sW28sXCJrZXl1cFwiLHZvaWQgMF0sW28sXCJ3aGVlbFwiLHtwYXNzaXZlOiExfV0sW28sXCJjb250ZXh0bWVudVwiLHZvaWQgMF0sW2Uud2luZG93LFwiYmx1clwiLHZvaWQgMF1dO2Zvcihjb25zdFt0LGksb11vZiB0aGlzLl9saXN0ZW5lcnMpdC5hZGRFdmVudExpc3RlbmVyKGksdD09PWUud2luZG93LmRvY3VtZW50P3RoaXMuaGFuZGxlV2luZG93RXZlbnQ6dGhpcy5oYW5kbGVFdmVudCxvKTt9ZGVzdHJveSgpe2Zvcihjb25zdFt0LGksb11vZiB0aGlzLl9saXN0ZW5lcnMpdC5yZW1vdmVFdmVudExpc3RlbmVyKGksdD09PWUud2luZG93LmRvY3VtZW50P3RoaXMuaGFuZGxlV2luZG93RXZlbnQ6dGhpcy5oYW5kbGVFdmVudCxvKTt9X2FkZERlZmF1bHRIYW5kbGVycyhlKXtjb25zdCB0PXRoaXMuX21hcCxpPXQuZ2V0Q2FudmFzQ29udGFpbmVyKCk7dGhpcy5fYWRkKFwibWFwRXZlbnRcIixuZXcgaHIodCxlKSk7Y29uc3Qgbz10LmJveFpvb209bmV3IF9yKHQsZSk7dGhpcy5fYWRkKFwiYm94Wm9vbVwiLG8pO2NvbnN0IHI9bmV3IGZyLG49bmV3IGtyO3QuZG91YmxlQ2xpY2tab29tPW5ldyBCcihuLHIpLHRoaXMuX2FkZChcInRhcFpvb21cIixyKSx0aGlzLl9hZGQoXCJjbGlja1pvb21cIixuKTtjb25zdCBzPW5ldyBGcjt0aGlzLl9hZGQoXCJ0YXBEcmFnWm9vbVwiLHMpO2NvbnN0IGE9dC50b3VjaFBpdGNoPW5ldyBEcih0KTt0aGlzLl9hZGQoXCJ0b3VjaFBpdGNoXCIsYSk7Y29uc3QgbD1uZXcgeXIoZSksYz1uZXcgYnIoZSk7dC5kcmFnUm90YXRlPW5ldyBOcihlLGwsYyksdGhpcy5fYWRkKFwibW91c2VSb3RhdGVcIixsLFtcIm1vdXNlUGl0Y2hcIl0pLHRoaXMuX2FkZChcIm1vdXNlUGl0Y2hcIixjLFtcIm1vdXNlUm90YXRlXCJdKTtjb25zdCBoPW5ldyB4cihlKSx1PW5ldyB3cih0LGUpO3QuZHJhZ1Bhbj1uZXcgVXIoaSxoLHUpLHRoaXMuX2FkZChcIm1vdXNlUGFuXCIsaCksdGhpcy5fYWRkKFwidG91Y2hQYW5cIix1LFtcInRvdWNoWm9vbVwiLFwidG91Y2hSb3RhdGVcIl0pO2NvbnN0IF89bmV3IFByLGQ9bmV3IE1yO3QudG91Y2hab29tUm90YXRlPW5ldyBqcihpLGQsXyxzKSx0aGlzLl9hZGQoXCJ0b3VjaFJvdGF0ZVwiLF8sW1widG91Y2hQYW5cIixcInRvdWNoWm9vbVwiXSksdGhpcy5fYWRkKFwidG91Y2hab29tXCIsZCxbXCJ0b3VjaFBhblwiLFwidG91Y2hSb3RhdGVcIl0pLHRoaXMuX2FkZChcImJsb2NrYWJsZU1hcEV2ZW50XCIsbmV3IHVyKHQpKTtjb25zdCBwPXQuc2Nyb2xsWm9vbT1uZXcgT3IodCx0aGlzKTt0aGlzLl9hZGQoXCJzY3JvbGxab29tXCIscCxbXCJtb3VzZVBhblwiXSk7Y29uc3QgbT10LmtleWJvYXJkPW5ldyBBcjt0aGlzLl9hZGQoXCJrZXlib2FyZFwiLG0pO2Zvcihjb25zdCBpIG9mIFtcImJveFpvb21cIixcImRvdWJsZUNsaWNrWm9vbVwiLFwidGFwRHJhZ1pvb21cIixcInRvdWNoUGl0Y2hcIixcImRyYWdSb3RhdGVcIixcImRyYWdQYW5cIixcInRvdWNoWm9vbVJvdGF0ZVwiLFwic2Nyb2xsWm9vbVwiLFwia2V5Ym9hcmRcIl0pZS5pbnRlcmFjdGl2ZSYmZVtpXSYmdFtpXS5lbmFibGUoZVtpXSk7fV9hZGQoZSx0LGkpe3RoaXMuX2hhbmRsZXJzLnB1c2goe2hhbmRsZXJOYW1lOmUsaGFuZGxlcjp0LGFsbG93ZWQ6aX0pLHRoaXMuX2hhbmRsZXJzQnlJZFtlXT10O31zdG9wKGUpe2lmKCF0aGlzLl91cGRhdGluZ0NhbWVyYSl7Zm9yKGNvbnN0e2hhbmRsZXI6ZX1vZiB0aGlzLl9oYW5kbGVycyllLnJlc2V0KCk7dGhpcy5faW5lcnRpYS5jbGVhcigpLHRoaXMuX2ZpcmVFdmVudHMoe30se30sZSksdGhpcy5fY2hhbmdlcz1bXTt9fWlzQWN0aXZlKCl7Zm9yKGNvbnN0e2hhbmRsZXI6ZX1vZiB0aGlzLl9oYW5kbGVycylpZihlLmlzQWN0aXZlKCkpcmV0dXJuICEwO3JldHVybiAhMX1pc1pvb21pbmcoKXtyZXR1cm4gISF0aGlzLl9ldmVudHNJblByb2dyZXNzLnpvb218fHRoaXMuX21hcC5zY3JvbGxab29tLmlzWm9vbWluZygpfWlzUm90YXRpbmcoKXtyZXR1cm4gISF0aGlzLl9ldmVudHNJblByb2dyZXNzLnJvdGF0ZX1pc01vdmluZygpe3JldHVybiAhIUdyKHRoaXMuX2V2ZW50c0luUHJvZ3Jlc3MpfHx0aGlzLmlzWm9vbWluZygpfV9pc0RyYWdnaW5nKCl7cmV0dXJuICEhdGhpcy5fZXZlbnRzSW5Qcm9ncmVzcy5kcmFnfV9ibG9ja2VkQnlBY3RpdmUoZSx0LGkpe2Zvcihjb25zdCBvIGluIGUpaWYobyE9PWkmJighdHx8dC5pbmRleE9mKG8pPDApKXJldHVybiAhMDtyZXR1cm4gITF9aGFuZGxlV2luZG93RXZlbnQoZSl7dGhpcy5oYW5kbGVFdmVudChlLGAke2UudHlwZX1XaW5kb3dgKTt9X2dldE1hcFRvdWNoZXMoZSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgaSBvZiBlKXRoaXMuX2VsLmNvbnRhaW5zKGkudGFyZ2V0KSYmdC5wdXNoKGkpO3JldHVybiB0fWhhbmRsZUV2ZW50KGUsdCl7dGhpcy5fdXBkYXRpbmdDYW1lcmE9ITA7Y29uc3QgaT1cInJlbmRlckZyYW1lXCI9PT1lLnR5cGUsbz1pP3ZvaWQgMDplLHI9e25lZWRzUmVuZGVyRnJhbWU6ITF9LG49e30scz17fSxhPWUudG91Y2hlcz90aGlzLl9nZXRNYXBUb3VjaGVzKGUudG91Y2hlcyk6dm9pZCAwLGw9YT9tKHRoaXMuX2VsLGEpOmk/dm9pZCAwOnAodGhpcy5fZWwsZSk7Zm9yKGNvbnN0e2hhbmRsZXJOYW1lOmksaGFuZGxlcjpjLGFsbG93ZWQ6aH1vZiB0aGlzLl9oYW5kbGVycyl7aWYoIWMuaXNFbmFibGVkKCkpY29udGludWU7bGV0IHU7dGhpcy5fYmxvY2tlZEJ5QWN0aXZlKHMsaCxpKT9jLnJlc2V0KCk6Y1t0fHxlLnR5cGVdJiYodT1jW3R8fGUudHlwZV0oZSxsLGEpLHRoaXMubWVyZ2VIYW5kbGVyUmVzdWx0KHIsbix1LGksbyksdSYmdS5uZWVkc1JlbmRlckZyYW1lJiZ0aGlzLl90cmlnZ2VyUmVuZGVyRnJhbWUoKSksKHV8fGMuaXNBY3RpdmUoKSkmJihzW2ldPWMpO31jb25zdCBjPXt9O2Zvcihjb25zdCBlIGluIHRoaXMuX3ByZXZpb3VzQWN0aXZlSGFuZGxlcnMpc1tlXXx8KGNbZV09byk7dGhpcy5fcHJldmlvdXNBY3RpdmVIYW5kbGVycz1zLChPYmplY3Qua2V5cyhjKS5sZW5ndGh8fFdyKHIpKSYmKHRoaXMuX2NoYW5nZXMucHVzaChbcixuLGNdKSx0aGlzLl90cmlnZ2VyUmVuZGVyRnJhbWUoKSksKE9iamVjdC5rZXlzKHMpLmxlbmd0aHx8V3IocikpJiZ0aGlzLl9tYXAuX3N0b3AoITApLHRoaXMuX3VwZGF0aW5nQ2FtZXJhPSExO2NvbnN0e2NhbWVyYUFuaW1hdGlvbjpofT1yO2gmJih0aGlzLl9pbmVydGlhLmNsZWFyKCksdGhpcy5fZmlyZUV2ZW50cyh7fSx7fSwhMCksdGhpcy5fY2hhbmdlcz1bXSxoKHRoaXMuX21hcCkpO31tZXJnZUhhbmRsZXJSZXN1bHQodCxpLG8scixuKXtpZighbylyZXR1cm47ZS5leHRlbmQodCxvKTtjb25zdCBzPXtoYW5kbGVyTmFtZTpyLG9yaWdpbmFsRXZlbnQ6by5vcmlnaW5hbEV2ZW50fHxufTt2b2lkIDAhPT1vLnpvb21EZWx0YSYmKGkuem9vbT1zKSx2b2lkIDAhPT1vLnBhbkRlbHRhJiYoaS5kcmFnPXMpLHZvaWQgMCE9PW8ucGl0Y2hEZWx0YSYmKGkucGl0Y2g9cyksdm9pZCAwIT09by5iZWFyaW5nRGVsdGEmJihpLnJvdGF0ZT1zKTt9X2FwcGx5Q2hhbmdlcygpe2NvbnN0IHQ9e30saT17fSxvPXt9O2Zvcihjb25zdFtyLG4sc11vZiB0aGlzLl9jaGFuZ2VzKXIucGFuRGVsdGEmJih0LnBhbkRlbHRhPSh0LnBhbkRlbHRhfHxuZXcgZS5Qb2ludCgwLDApKS5fYWRkKHIucGFuRGVsdGEpKSxyLnpvb21EZWx0YSYmKHQuem9vbURlbHRhPSh0Lnpvb21EZWx0YXx8MCkrci56b29tRGVsdGEpLHIuYmVhcmluZ0RlbHRhJiYodC5iZWFyaW5nRGVsdGE9KHQuYmVhcmluZ0RlbHRhfHwwKStyLmJlYXJpbmdEZWx0YSksci5waXRjaERlbHRhJiYodC5waXRjaERlbHRhPSh0LnBpdGNoRGVsdGF8fDApK3IucGl0Y2hEZWx0YSksdm9pZCAwIT09ci5hcm91bmQmJih0LmFyb3VuZD1yLmFyb3VuZCksdm9pZCAwIT09ci5hcm91bmRDb29yZCYmKHQuYXJvdW5kQ29vcmQ9ci5hcm91bmRDb29yZCksdm9pZCAwIT09ci5waW5jaEFyb3VuZCYmKHQucGluY2hBcm91bmQ9ci5waW5jaEFyb3VuZCksci5ub0luZXJ0aWEmJih0Lm5vSW5lcnRpYT1yLm5vSW5lcnRpYSksZS5leHRlbmQoaSxuKSxlLmV4dGVuZChvLHMpO3RoaXMuX3VwZGF0ZU1hcFRyYW5zZm9ybSh0LGksbyksdGhpcy5fY2hhbmdlcz1bXTt9X3VwZGF0ZU1hcFRyYW5zZm9ybSh0LGksbyl7Y29uc3Qgcj10aGlzLl9tYXAsbj1yLnRyYW5zZm9ybSxzPWU9PltlLngsZS55LGUuel07aWYoKGU9Pntjb25zdCB0PXRoaXMuX2V2ZW50c0luUHJvZ3Jlc3MuZHJhZztyZXR1cm4gdCYmIXRoaXMuX2hhbmRsZXJzQnlJZFt0LmhhbmRsZXJOYW1lXS5pc0FjdGl2ZSgpfSkoKSYmIVdyKHQpKXtjb25zdCBlPW4uem9vbTtuLmNhbWVyYUVsZXZhdGlvblJlZmVyZW5jZT1cInNlYVwiLG4ucmVjZW50ZXJPblRlcnJhaW4oKSxuLmNhbWVyYUVsZXZhdGlvblJlZmVyZW5jZT1cImdyb3VuZFwiLGUhPT1uLnpvb20mJnRoaXMuX21hcC5fdXBkYXRlKCEwKTt9aWYobi5faXNDYW1lcmFDb25zdHJhaW5lZCYmci5fc3RvcCghMCksIVdyKHQpKXJldHVybiB2b2lkIHRoaXMuX2ZpcmVFdmVudHMoaSxvLCEwKTtsZXR7cGFuRGVsdGE6YSx6b29tRGVsdGE6bCxiZWFyaW5nRGVsdGE6YyxwaXRjaERlbHRhOmgsYXJvdW5kOnUsYXJvdW5kQ29vcmQ6XyxwaW5jaEFyb3VuZDpkfT10O24uX2lzQ2FtZXJhQ29uc3RyYWluZWQmJihsPjAmJihsPTApLG4uX2lzQ2FtZXJhQ29uc3RyYWluZWQ9ITEpLHZvaWQgMCE9PWQmJih1PWQpLChsfHwoZT0+aVtlXSYmIXRoaXMuX2V2ZW50c0luUHJvZ3Jlc3NbZV0pKFwiZHJhZ1wiKSkmJnUmJih0aGlzLl9kcmFnT3JpZ2luPXMobi5wb2ludENvb3JkaW5hdGUzRCh1KSksdGhpcy5fdHJhY2tpbmdFbGxpcHNvaWQuc2V0dXAobi5fY2FtZXJhLnBvc2l0aW9uLHRoaXMuX2RyYWdPcmlnaW4pKSxuLmNhbWVyYUVsZXZhdGlvblJlZmVyZW5jZT1cInNlYVwiLHIuX3N0b3AoITApLHU9dXx8ci50cmFuc2Zvcm0uY2VudGVyUG9pbnQsYyYmKG4uYmVhcmluZys9YyksaCYmKG4ucGl0Y2grPWgpLG4uX3VwZGF0ZUNhbWVyYVN0YXRlKCk7Y29uc3QgcD1bMCwwLDBdO2lmKGEpaWYoXCJtZXJjYXRvclwiPT09bi5wcm9qZWN0aW9uLm5hbWUpe2NvbnN0IGU9dGhpcy5fdHJhY2tpbmdFbGxpcHNvaWQucHJvamVjdFJheShuLnNjcmVlblBvaW50VG9NZXJjYXRvclJheSh1KS5kaXIpLHQ9dGhpcy5fdHJhY2tpbmdFbGxpcHNvaWQucHJvamVjdFJheShuLnNjcmVlblBvaW50VG9NZXJjYXRvclJheSh1LnN1YihhKSkuZGlyKTtwWzBdPXRbMF0tZVswXSxwWzFdPXRbMV0tZVsxXTt9ZWxzZSB7Y29uc3QgdD1uLnBvaW50Q29vcmRpbmF0ZSh1KTtpZihcImdsb2JlXCI9PT1uLnByb2plY3Rpb24ubmFtZSl7YT1hLnJvdGF0ZSgtbi5hbmdsZSk7Y29uc3QgaT1uLl9waXhlbHNQZXJNZXJjYXRvclBpeGVsL24ud29ybGRTaXplO3BbMF09LWEueCplLm1lcmNhdG9yU2NhbGUoZS5sYXRGcm9tTWVyY2F0b3JZKHQueSkpKmkscFsxXT0tYS55KmUubWVyY2F0b3JTY2FsZShuLmNlbnRlci5sYXQpKmk7fWVsc2Uge2NvbnN0IGU9bi5wb2ludENvb3JkaW5hdGUodS5zdWIoYSkpO3QmJmUmJihwWzBdPWUueC10LngscFsxXT1lLnktdC55KTt9fWNvbnN0IG09bi56b29tLGY9WzAsMCwwXTtpZihsKXtjb25zdCB0PXMoX3x8bi5wb2ludENvb3JkaW5hdGUzRCh1KSksaT17ZGlyOmUubm9ybWFsaXplKFtdLGUuc3ViKFtdLHQsbi5fY2FtZXJhLnBvc2l0aW9uKSl9O2lmKGkuZGlyWzJdPDApe2NvbnN0IG89bi56b29tRGVsdGFUb01vdmVtZW50KHQsbCk7ZS5zY2FsZSQyKGYsaS5kaXIsbyk7fX1jb25zdCBnPWUuYWRkKHAscCxmKTtuLl90cmFuc2xhdGVDYW1lcmFDb25zdHJhaW5lZChnKSxsJiZNYXRoLmFicyhuLnpvb20tbSk+MWUtNCYmbi5yZWNlbnRlck9uVGVycmFpbigpLG4uY2FtZXJhRWxldmF0aW9uUmVmZXJlbmNlPVwiZ3JvdW5kXCIsdGhpcy5fbWFwLl91cGRhdGUoKSx0Lm5vSW5lcnRpYXx8dGhpcy5faW5lcnRpYS5yZWNvcmQodCksdGhpcy5fZmlyZUV2ZW50cyhpLG8sITApO31fZmlyZUV2ZW50cyh0LGksbyl7Y29uc3Qgcj1Hcih0aGlzLl9ldmVudHNJblByb2dyZXNzKSxuPUdyKHQpLHM9e307Zm9yKGNvbnN0IGUgaW4gdCl7Y29uc3R7b3JpZ2luYWxFdmVudDppfT10W2VdO3RoaXMuX2V2ZW50c0luUHJvZ3Jlc3NbZV18fChzW2Ake2V9c3RhcnRgXT1pKSx0aGlzLl9ldmVudHNJblByb2dyZXNzW2VdPXRbZV07fSFyJiZuJiZ0aGlzLl9maXJlRXZlbnQoXCJtb3Zlc3RhcnRcIixuLm9yaWdpbmFsRXZlbnQpO2Zvcihjb25zdCBlIGluIHMpdGhpcy5fZmlyZUV2ZW50KGUsc1tlXSk7biYmdGhpcy5fZmlyZUV2ZW50KFwibW92ZVwiLG4ub3JpZ2luYWxFdmVudCk7Zm9yKGNvbnN0IGUgaW4gdCl7Y29uc3R7b3JpZ2luYWxFdmVudDppfT10W2VdO3RoaXMuX2ZpcmVFdmVudChlLGkpO31jb25zdCBhPXt9O2xldCBsO2Zvcihjb25zdCBlIGluIHRoaXMuX2V2ZW50c0luUHJvZ3Jlc3Mpe2NvbnN0e2hhbmRsZXJOYW1lOnQsb3JpZ2luYWxFdmVudDpvfT10aGlzLl9ldmVudHNJblByb2dyZXNzW2VdO3RoaXMuX2hhbmRsZXJzQnlJZFt0XS5pc0FjdGl2ZSgpfHwoZGVsZXRlIHRoaXMuX2V2ZW50c0luUHJvZ3Jlc3NbZV0sbD1pW3RdfHxvLGFbYCR7ZX1lbmRgXT1sKTt9Zm9yKGNvbnN0IGUgaW4gYSl0aGlzLl9maXJlRXZlbnQoZSxhW2VdKTtjb25zdCBjPUdyKHRoaXMuX2V2ZW50c0luUHJvZ3Jlc3MpO2lmKG8mJihyfHxuKSYmIWMpe3RoaXMuX3VwZGF0aW5nQ2FtZXJhPSEwO2NvbnN0IHQ9dGhpcy5faW5lcnRpYS5fb25Nb3ZlRW5kKHRoaXMuX21hcC5kcmFnUGFuLl9pbmVydGlhT3B0aW9ucyksaT1lPT4wIT09ZSYmLXRoaXMuX2JlYXJpbmdTbmFwPGUmJmU8dGhpcy5fYmVhcmluZ1NuYXA7dD8oaSh0LmJlYXJpbmd8fHRoaXMuX21hcC5nZXRCZWFyaW5nKCkpJiYodC5iZWFyaW5nPTApLHRoaXMuX21hcC5lYXNlVG8odCx7b3JpZ2luYWxFdmVudDpsfSkpOih0aGlzLl9tYXAuZmlyZShuZXcgZS5FdmVudChcIm1vdmVlbmRcIix7b3JpZ2luYWxFdmVudDpsfSkpLGkodGhpcy5fbWFwLmdldEJlYXJpbmcoKSkmJnRoaXMuX21hcC5yZXNldE5vcnRoKCkpLHRoaXMuX3VwZGF0aW5nQ2FtZXJhPSExO319X2ZpcmVFdmVudCh0LGkpe3RoaXMuX21hcC5maXJlKG5ldyBlLkV2ZW50KHQsaT97b3JpZ2luYWxFdmVudDppfTp7fSkpO31fcmVxdWVzdEZyYW1lKCl7cmV0dXJuIHRoaXMuX21hcC50cmlnZ2VyUmVwYWludCgpLHRoaXMuX21hcC5fcmVuZGVyVGFza1F1ZXVlLmFkZCgoZT0+e3RoaXMuX2ZyYW1lSWQ9dm9pZCAwLHRoaXMuaGFuZGxlRXZlbnQobmV3IFpyKFwicmVuZGVyRnJhbWVcIix7dGltZVN0YW1wOmV9KSksdGhpcy5fYXBwbHlDaGFuZ2VzKCk7fSkpfV90cmlnZ2VyUmVuZGVyRnJhbWUoKXt2b2lkIDA9PT10aGlzLl9mcmFtZUlkJiYodGhpcy5fZnJhbWVJZD10aGlzLl9yZXF1ZXN0RnJhbWUoKSk7fX1jb25zdCBxcj1cIm1hcC5zZXRGcmVlQ2FtZXJhT3B0aW9ucyguLi4pIGFuZCBtYXAuZ2V0RnJlZUNhbWVyYU9wdGlvbnMoKSBhcmUgbm90IHlldCBzdXBwb3J0ZWQgZm9yIG5vbi1tZXJjYXRvciBwcm9qZWN0aW9ucy5cIjtjbGFzcyAkciBleHRlbmRzIGUuRXZlbnRlZHtjb25zdHJ1Y3Rvcih0LGkpe3N1cGVyKCksdGhpcy5fbW92aW5nPSExLHRoaXMuX3pvb21pbmc9ITEsdGhpcy50cmFuc2Zvcm09dCx0aGlzLl9iZWFyaW5nU25hcD1pLmJlYXJpbmdTbmFwLHRoaXMuX3Jlc3BlY3RQcmVmZXJzUmVkdWNlZE1vdGlvbj0hMSE9PWkucmVzcGVjdFByZWZlcnNSZWR1Y2VkTW90aW9uLGUuYmluZEFsbChbXCJfcmVuZGVyRnJhbWVDYWxsYmFja1wiXSx0aGlzKTt9Z2V0Q2VudGVyKCl7cmV0dXJuIG5ldyBlLkxuZ0xhdCh0aGlzLnRyYW5zZm9ybS5jZW50ZXIubG5nLHRoaXMudHJhbnNmb3JtLmNlbnRlci5sYXQpfXNldENlbnRlcihlLHQpe3JldHVybiB0aGlzLmp1bXBUbyh7Y2VudGVyOmV9LHQpfXBhbkJ5KHQsaSxvKXtyZXR1cm4gdD1lLlBvaW50LmNvbnZlcnQodCkubXVsdCgtMSksdGhpcy5wYW5Ubyh0aGlzLnRyYW5zZm9ybS5jZW50ZXIsZS5leHRlbmQoe29mZnNldDp0fSxpKSxvKX1wYW5Ubyh0LGksbyl7cmV0dXJuIHRoaXMuZWFzZVRvKGUuZXh0ZW5kKHtjZW50ZXI6dH0saSksbyl9Z2V0Wm9vbSgpe3JldHVybiB0aGlzLnRyYW5zZm9ybS56b29tfXNldFpvb20oZSx0KXtyZXR1cm4gdGhpcy5qdW1wVG8oe3pvb206ZX0sdCksdGhpc316b29tVG8odCxpLG8pe3JldHVybiB0aGlzLmVhc2VUbyhlLmV4dGVuZCh7em9vbTp0fSxpKSxvKX16b29tSW4oZSx0KXtyZXR1cm4gdGhpcy56b29tVG8odGhpcy5nZXRab29tKCkrMSxlLHQpLHRoaXN9em9vbU91dChlLHQpe3JldHVybiB0aGlzLnpvb21Ubyh0aGlzLmdldFpvb20oKS0xLGUsdCksdGhpc31nZXRCZWFyaW5nKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLmJlYXJpbmd9c2V0QmVhcmluZyhlLHQpe3JldHVybiB0aGlzLmp1bXBUbyh7YmVhcmluZzplfSx0KSx0aGlzfWdldFBhZGRpbmcoKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0ucGFkZGluZ31zZXRQYWRkaW5nKGUsdCl7cmV0dXJuIHRoaXMuanVtcFRvKHtwYWRkaW5nOmV9LHQpLHRoaXN9cm90YXRlVG8odCxpLG8pe3JldHVybiB0aGlzLmVhc2VUbyhlLmV4dGVuZCh7YmVhcmluZzp0fSxpKSxvKX1yZXNldE5vcnRoKHQsaSl7cmV0dXJuIHRoaXMucm90YXRlVG8oMCxlLmV4dGVuZCh7ZHVyYXRpb246MWUzfSx0KSxpKSx0aGlzfXJlc2V0Tm9ydGhQaXRjaCh0LGkpe3JldHVybiB0aGlzLmVhc2VUbyhlLmV4dGVuZCh7YmVhcmluZzowLHBpdGNoOjAsZHVyYXRpb246MWUzfSx0KSxpKSx0aGlzfXNuYXBUb05vcnRoKGUsdCl7cmV0dXJuIE1hdGguYWJzKHRoaXMuZ2V0QmVhcmluZygpKTx0aGlzLl9iZWFyaW5nU25hcD90aGlzLnJlc2V0Tm9ydGgoZSx0KTp0aGlzfWdldFBpdGNoKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnBpdGNofXNldFBpdGNoKGUsdCl7cmV0dXJuIHRoaXMuanVtcFRvKHtwaXRjaDplfSx0KSx0aGlzfWNhbWVyYUZvckJvdW5kcyh0LGkpe3Q9ZS5MbmdMYXRCb3VuZHMuY29udmVydCh0KTtjb25zdCBvPWkmJmkuYmVhcmluZ3x8MCxyPWkmJmkucGl0Y2h8fDAsbj10LmdldE5vcnRoV2VzdCgpLHM9dC5nZXRTb3V0aEVhc3QoKTtyZXR1cm4gdGhpcy5fY2FtZXJhRm9yQm91bmRzKHRoaXMudHJhbnNmb3JtLG4scyxvLHIsaSl9X2V4dGVuZENhbWVyYU9wdGlvbnModCl7Y29uc3QgaT17dG9wOjAsYm90dG9tOjAscmlnaHQ6MCxsZWZ0OjB9O2lmKFwibnVtYmVyXCI9PXR5cGVvZih0PWUuZXh0ZW5kKHtwYWRkaW5nOmksb2Zmc2V0OlswLDBdLG1heFpvb206dGhpcy50cmFuc2Zvcm0ubWF4Wm9vbX0sdCkpLnBhZGRpbmcpe2NvbnN0IGU9dC5wYWRkaW5nO3QucGFkZGluZz17dG9wOmUsYm90dG9tOmUscmlnaHQ6ZSxsZWZ0OmV9O31yZXR1cm4gdC5wYWRkaW5nPWUuZXh0ZW5kKGksdC5wYWRkaW5nKSx0fV9taW5pbXVtQUFCQkZydXN0dW1EaXN0YW5jZShlLHQpe2NvbnN0IGk9dC5tYXhbMF0tdC5taW5bMF0sbz10Lm1heFsxXS10Lm1pblsxXTtyZXR1cm4gaS9vPmUuYXNwZWN0P2kvKDIqTWF0aC50YW4oLjUqZS5mb3ZYKSplLmFzcGVjdCk6by8oMipNYXRoLnRhbiguNSplLmZvdlkpKmUuYXNwZWN0KX1fY2FtZXJhRm9yQm91bmRzT25HbG9iZSh0LGksbyxyLG4scyl7Y29uc3QgYT10LmNsb25lKCksbD10aGlzLl9leHRlbmRDYW1lcmFPcHRpb25zKHMpO2EuYmVhcmluZz1yLGEucGl0Y2g9bjtjb25zdCBjPWUuTG5nTGF0LmNvbnZlcnQoaSksaD1lLkxuZ0xhdC5jb252ZXJ0KG8pLHU9LjUqKGMubGF0K2gubGF0KSxfPS41KihjLmxuZytoLmxuZyksZD1lLmxhdExuZ1RvRUNFRih1LF8pLHA9ZS5ub3JtYWxpemUoW10sZCksbT1lLm5vcm1hbGl6ZShbXSxlLmNyb3NzKFtdLHAsWzAsMSwwXSkpLGY9ZS5jcm9zcyhbXSxtLHApLGc9W21bMF0sbVsxXSxtWzJdLDAsZlswXSxmWzFdLGZbMl0sMCxwWzBdLHBbMV0scFsyXSwwLDAsMCwwLDFdLHY9W2QsZS5sYXRMbmdUb0VDRUYoYy5sYXQsYy5sbmcpLGUubGF0TG5nVG9FQ0VGKGgubGF0LGMubG5nKSxlLmxhdExuZ1RvRUNFRihoLmxhdCxoLmxuZyksZS5sYXRMbmdUb0VDRUYoYy5sYXQsaC5sbmcpLGUubGF0TG5nVG9FQ0VGKHUsYy5sbmcpLGUubGF0TG5nVG9FQ0VGKHUsaC5sbmcpLGUubGF0TG5nVG9FQ0VGKGMubGF0LF8pLGUubGF0TG5nVG9FQ0VGKGgubGF0LF8pXTtsZXQgeD1lLkFhYmIuZnJvbVBvaW50cyh2Lm1hcCgodD0+W2UuZG90KG0sdCksZS5kb3QoZix0KSxlLmRvdChwLHQpXSkpKTtjb25zdCB5PWUudHJhbnNmb3JtTWF0NChbXSx4LmNlbnRlcixnKTswPT09ZS5zcXVhcmVkTGVuZ3RoKHkpJiZlLnNldCh5LDAsMCwxKSxlLm5vcm1hbGl6ZSh5LHkpLGUuc2NhbGUkMih5LHksZS5HTE9CRV9SQURJVVMpLGEuY2VudGVyPWUuZWNlZlRvTGF0TG5nKHkpO2NvbnN0IGI9YS5nZXRXb3JsZFRvQ2FtZXJhTWF0cml4KCksdz1lLmludmVydChuZXcgRmxvYXQ2NEFycmF5KDE2KSxiKTt4PWUuQWFiYi5hcHBseVRyYW5zZm9ybSh4LGUubXVsdGlwbHkoW10sYixnKSksZS50cmFuc2Zvcm1NYXQ0KHkseSxiKTtjb25zdCBUPS41Kih4Lm1heFsyXS14Lm1pblsyXSksRT10aGlzLl9taW5pbXVtQUFCQkZydXN0dW1EaXN0YW5jZShhLHgpLEM9ZS5zY2FsZSQyKFtdLFswLDAsMV0sVCksTT1lLmFkZChDLHksQyksST1FKygwPT09YS5waXRjaD8wOmUuZGlzdGFuY2UoeSxNKSksUD1hLmdsb2JlQ2VudGVySW5WaWV3U3BhY2UsUz1lLnN1YihbXSx5LFtQWzBdLFBbMV0sUFsyXV0pO2Uubm9ybWFsaXplKFMsUyksZS5zY2FsZSQyKFMsUyxJKTtjb25zdCBEPWUuYWRkKFtdLHksUyk7ZS50cmFuc2Zvcm1NYXQ0KEQsRCx3KTtjb25zdCBMPWUuZWFydGhSYWRpdXMvZS5HTE9CRV9SQURJVVMsQT1lLmxlbmd0aChEKSx6PWUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKE1hdGgubWF4KEEqTC1lLmVhcnRoUmFkaXVzLE51bWJlci5FUFNJTE9OKSwwKSxSPU1hdGgubWluKGEuem9vbUZyb21NZXJjYXRvclpBZGp1c3RlZCh6KSxsLm1heFpvb20pO3JldHVybiBSPi41KihlLkdMT0JFX1pPT01fVEhSRVNIT0xEX01JTitlLkdMT0JFX1pPT01fVEhSRVNIT0xEX01BWCk/KGEuc2V0UHJvamVjdGlvbih7bmFtZTpcIm1lcmNhdG9yXCJ9KSxhLnpvb209Uix0aGlzLl9jYW1lcmFGb3JCb3VuZHMoYSxpLG8scixuLHMpKTp7Y2VudGVyOmEuY2VudGVyLHpvb206UixiZWFyaW5nOnIscGl0Y2g6bn19cXVlcnlUZXJyYWluRWxldmF0aW9uKHQsaSl7Y29uc3Qgbz10aGlzLnRyYW5zZm9ybS5lbGV2YXRpb247cmV0dXJuIG8/KGk9ZS5leHRlbmQoe30se2V4YWdnZXJhdGVkOiEwfSxpKSxvLmdldEF0UG9pbnQoZS5NZXJjYXRvckNvb3JkaW5hdGUuZnJvbUxuZ0xhdCh0KSxudWxsLGkuZXhhZ2dlcmF0ZWQpKTpudWxsfV9jYW1lcmFGb3JCb3VuZHModCxpLG8scixuLHMpe2lmKFwiZ2xvYmVcIj09PXQucHJvamVjdGlvbi5uYW1lKXJldHVybiB0aGlzLl9jYW1lcmFGb3JCb3VuZHNPbkdsb2JlKHQsaSxvLHIsbixzKTtjb25zdCBhPXQuY2xvbmUoKSxsPXRoaXMuX2V4dGVuZENhbWVyYU9wdGlvbnMocyksYz1hLnBhZGRpbmc7YS5iZWFyaW5nPXIsYS5waXRjaD1uO2NvbnN0IGg9ZS5MbmdMYXQuY29udmVydChpKSx1PWUuTG5nTGF0LmNvbnZlcnQobyksXz1uZXcgZS5MbmdMYXQoaC5sbmcsdS5sYXQpLGQ9bmV3IGUuTG5nTGF0KHUubG5nLGgubGF0KSxwPWEucHJvamVjdChoKSxtPWEucHJvamVjdCh1KSxmPXRoaXMucXVlcnlUZXJyYWluRWxldmF0aW9uKGgpLGc9dGhpcy5xdWVyeVRlcnJhaW5FbGV2YXRpb24odSksdj10aGlzLnF1ZXJ5VGVycmFpbkVsZXZhdGlvbihfKSx4PXRoaXMucXVlcnlUZXJyYWluRWxldmF0aW9uKGQpLHk9W1twLngscC55LE1hdGgubWluKGZ8fDAsZ3x8MCx2fHwwLHh8fDApXSxbbS54LG0ueSxNYXRoLm1heChmfHwwLGd8fDAsdnx8MCx4fHwwKV1dO2xldCBiPWUuQWFiYi5mcm9tUG9pbnRzKHkpO2NvbnN0IHc9YS5nZXRXb3JsZFRvQ2FtZXJhTWF0cml4KCksVD1lLmludmVydChuZXcgRmxvYXQ2NEFycmF5KDE2KSx3KTtiPWUuQWFiYi5hcHBseVRyYW5zZm9ybShiLHcpO2NvbnN0IEU9ZS5zdWIoW10sYi5tYXgsYi5taW4pLEM9Yy5sZWZ0fHwwLE09Yy5yaWdodHx8MCxJPWMuYm90dG9tfHwwLFA9Yy50b3B8fDAse2xlZnQ6UyxyaWdodDpELHRvcDpMLGJvdHRvbTpBfT1sLnBhZGRpbmcsej0uNSooQytNKSxSPS41KihQK0kpLE89TWF0aC5taW4oYS5zY2FsZVpvb20oYS5zY2FsZSpNYXRoLm1pbigoYS53aWR0aC0oQytNK1MrRCkpL0VbMF0sKGEuaGVpZ2h0LShJK1ArQStMKSkvRVsxXSkpLGwubWF4Wm9vbSksQj1hLnNjYWxlL2Euem9vbVNjYWxlKE8pO2I9bmV3IGUuQWFiYihbYi5taW5bMF0tKFMreikqQixiLm1pblsxXS0oQStSKSpCLGIubWluWzJdXSxbYi5tYXhbMF0rKEQreikqQixiLm1heFsxXSsoTCtSKSpCLGIubWF4WzJdXSk7Y29uc3Qgaz0uNSpFWzJdLEY9dGhpcy5fbWluaW11bUFBQkJGcnVzdHVtRGlzdGFuY2UoYSxiKSxVPVswLDAsMSwwXTtlLnRyYW5zZm9ybU1hdDQkMShVLFUsdyksZS5ub3JtYWxpemUkMihVLFUpO2NvbnN0IE49ZS5zY2FsZSQyKFtdLFUsRitrKSxqPWUuYWRkKFtdLGIuY2VudGVyLE4pLEc9KFwibnVtYmVyXCI9PXR5cGVvZiBsLm9mZnNldC54JiZcIm51bWJlclwiPT10eXBlb2YgbC5vZmZzZXQueT9uZXcgZS5Qb2ludChsLm9mZnNldC54LGwub2Zmc2V0LnkpOmUuUG9pbnQuY29udmVydChsLm9mZnNldCkpLnJvdGF0ZSgtZS5kZWdUb1JhZChyKSk7Yi5jZW50ZXJbMF0tPUcueCpCLGIuY2VudGVyWzFdKz1HLnkqQixlLnRyYW5zZm9ybU1hdDQoYi5jZW50ZXIsYi5jZW50ZXIsVCksZS50cmFuc2Zvcm1NYXQ0KGosaixUKTtjb25zdCBaPVtiLmNlbnRlclswXSxiLmNlbnRlclsxXSxqWzJdKmEucGl4ZWxzUGVyTWV0ZXJdO2Uuc2NhbGUkMihaLFosMS9hLndvcmxkU2l6ZSk7Y29uc3QgVj1lLmxuZ0Zyb21NZXJjYXRvclgoWlswXSksVz1lLmxhdEZyb21NZXJjYXRvclkoWlsxXSksWD1NYXRoLm1pbihhLl96b29tRnJvbU1lcmNhdG9yWihaWzJdKSxsLm1heFpvb20pLHE9bmV3IGUuTG5nTGF0KFYsVyk7cmV0dXJuIGEubWVyY2F0b3JGcm9tVHJhbnNpdGlvbiYmWDwuNSooZS5HTE9CRV9aT09NX1RIUkVTSE9MRF9NSU4rZS5HTE9CRV9aT09NX1RIUkVTSE9MRF9NQVgpPyhhLnNldFByb2plY3Rpb24oe25hbWU6XCJnbG9iZVwifSksYS56b29tPVgsdGhpcy5fY2FtZXJhRm9yQm91bmRzKGEsaSxvLHIsbixzKSk6e2NlbnRlcjpxLHpvb206WCxiZWFyaW5nOnIscGl0Y2g6bn19Zml0Qm91bmRzKGUsdCxpKXtjb25zdCBvPXRoaXMuY2FtZXJhRm9yQm91bmRzKGUsdCk7cmV0dXJuIHRoaXMuX2ZpdEludGVybmFsKG8sdCxpKX1maXRTY3JlZW5Db29yZGluYXRlcyh0LGksbyxyLG4pe2NvbnN0IHM9ZS5Qb2ludC5jb252ZXJ0KHQpLGE9ZS5Qb2ludC5jb252ZXJ0KGkpLGw9bmV3IGUuUG9pbnQoTWF0aC5taW4ocy54LGEueCksTWF0aC5taW4ocy55LGEueSkpLGM9bmV3IGUuUG9pbnQoTWF0aC5tYXgocy54LGEueCksTWF0aC5tYXgocy55LGEueSkpO2lmKFwibWVyY2F0b3JcIj09PXRoaXMudHJhbnNmb3JtLnByb2plY3Rpb24ubmFtZSYmdGhpcy50cmFuc2Zvcm0uYW55Q29ybmVyT2ZmRWRnZShzLGEpKXJldHVybiB0aGlzO2NvbnN0IGg9dGhpcy50cmFuc2Zvcm0ucG9pbnRMb2NhdGlvbjNEKGwpLHU9dGhpcy50cmFuc2Zvcm0ucG9pbnRMb2NhdGlvbjNEKGMpLF89dGhpcy50cmFuc2Zvcm0ucG9pbnRMb2NhdGlvbjNEKG5ldyBlLlBvaW50KGwueCxjLnkpKSxkPXRoaXMudHJhbnNmb3JtLnBvaW50TG9jYXRpb24zRChuZXcgZS5Qb2ludChjLngsbC55KSkscD1bTWF0aC5taW4oaC5sbmcsdS5sbmcsXy5sbmcsZC5sbmcpLE1hdGgubWluKGgubGF0LHUubGF0LF8ubGF0LGQubGF0KV0sbT1bTWF0aC5tYXgoaC5sbmcsdS5sbmcsXy5sbmcsZC5sbmcpLE1hdGgubWF4KGgubGF0LHUubGF0LF8ubGF0LGQubGF0KV0sZj1yJiZyLnBpdGNoP3IucGl0Y2g6dGhpcy5nZXRQaXRjaCgpLGc9dGhpcy5fY2FtZXJhRm9yQm91bmRzKHRoaXMudHJhbnNmb3JtLHAsbSxvLGYscik7cmV0dXJuIHRoaXMuX2ZpdEludGVybmFsKGcscixuKX1fZml0SW50ZXJuYWwodCxpLG8pe3JldHVybiB0PyhkZWxldGUoaT1lLmV4dGVuZCh0LGkpKS5wYWRkaW5nLGkubGluZWFyP3RoaXMuZWFzZVRvKGksbyk6dGhpcy5mbHlUbyhpLG8pKTp0aGlzfWp1bXBUbyh0LGkpe3RoaXMuc3RvcCgpO2NvbnN0IG89dC5wcmVsb2FkT25seT90aGlzLnRyYW5zZm9ybS5jbG9uZSgpOnRoaXMudHJhbnNmb3JtO2xldCByPSExLG49ITEscz0hMTtyZXR1cm4gXCJ6b29tXCJpbiB0JiZvLnpvb20hPT0rdC56b29tJiYocj0hMCxvLnpvb209K3Quem9vbSksdm9pZCAwIT09dC5jZW50ZXImJihvLmNlbnRlcj1lLkxuZ0xhdC5jb252ZXJ0KHQuY2VudGVyKSksXCJiZWFyaW5nXCJpbiB0JiZvLmJlYXJpbmchPT0rdC5iZWFyaW5nJiYobj0hMCxvLmJlYXJpbmc9K3QuYmVhcmluZyksXCJwaXRjaFwiaW4gdCYmby5waXRjaCE9PSt0LnBpdGNoJiYocz0hMCxvLnBpdGNoPSt0LnBpdGNoKSxudWxsPT10LnBhZGRpbmd8fG8uaXNQYWRkaW5nRXF1YWwodC5wYWRkaW5nKXx8KG8ucGFkZGluZz10LnBhZGRpbmcpLHQucHJlbG9hZE9ubHk/KHRoaXMuX3ByZWxvYWRUaWxlcyhvKSx0aGlzKToodGhpcy5maXJlKG5ldyBlLkV2ZW50KFwibW92ZXN0YXJ0XCIsaSkpLmZpcmUobmV3IGUuRXZlbnQoXCJtb3ZlXCIsaSkpLHImJnRoaXMuZmlyZShuZXcgZS5FdmVudChcInpvb21zdGFydFwiLGkpKS5maXJlKG5ldyBlLkV2ZW50KFwiem9vbVwiLGkpKS5maXJlKG5ldyBlLkV2ZW50KFwiem9vbWVuZFwiLGkpKSxuJiZ0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJyb3RhdGVzdGFydFwiLGkpKS5maXJlKG5ldyBlLkV2ZW50KFwicm90YXRlXCIsaSkpLmZpcmUobmV3IGUuRXZlbnQoXCJyb3RhdGVlbmRcIixpKSkscyYmdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwicGl0Y2hzdGFydFwiLGkpKS5maXJlKG5ldyBlLkV2ZW50KFwicGl0Y2hcIixpKSkuZmlyZShuZXcgZS5FdmVudChcInBpdGNoZW5kXCIsaSkpLHRoaXMuZmlyZShuZXcgZS5FdmVudChcIm1vdmVlbmRcIixpKSkpfWdldEZyZWVDYW1lcmFPcHRpb25zKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnByb2plY3Rpb24uc3VwcG9ydHNGcmVlQ2FtZXJhfHxlLndhcm5PbmNlKHFyKSx0aGlzLnRyYW5zZm9ybS5nZXRGcmVlQ2FtZXJhT3B0aW9ucygpfXNldEZyZWVDYW1lcmFPcHRpb25zKHQsaSl7Y29uc3Qgbz10aGlzLnRyYW5zZm9ybTtpZighby5wcm9qZWN0aW9uLnN1cHBvcnRzRnJlZUNhbWVyYSlyZXR1cm4gZS53YXJuT25jZShxciksdGhpczt0aGlzLnN0b3AoKTtjb25zdCByPW8uem9vbSxuPW8ucGl0Y2gscz1vLmJlYXJpbmc7by5zZXRGcmVlQ2FtZXJhT3B0aW9ucyh0KTtjb25zdCBhPXIhPT1vLnpvb20sbD1uIT09by5waXRjaCxjPXMhPT1vLmJlYXJpbmc7cmV0dXJuIHRoaXMuZmlyZShuZXcgZS5FdmVudChcIm1vdmVzdGFydFwiLGkpKS5maXJlKG5ldyBlLkV2ZW50KFwibW92ZVwiLGkpKSxhJiZ0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJ6b29tc3RhcnRcIixpKSkuZmlyZShuZXcgZS5FdmVudChcInpvb21cIixpKSkuZmlyZShuZXcgZS5FdmVudChcInpvb21lbmRcIixpKSksYyYmdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwicm90YXRlc3RhcnRcIixpKSkuZmlyZShuZXcgZS5FdmVudChcInJvdGF0ZVwiLGkpKS5maXJlKG5ldyBlLkV2ZW50KFwicm90YXRlZW5kXCIsaSkpLGwmJnRoaXMuZmlyZShuZXcgZS5FdmVudChcInBpdGNoc3RhcnRcIixpKSkuZmlyZShuZXcgZS5FdmVudChcInBpdGNoXCIsaSkpLmZpcmUobmV3IGUuRXZlbnQoXCJwaXRjaGVuZFwiLGkpKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJtb3ZlZW5kXCIsaSkpLHRoaXN9ZWFzZVRvKHQsaSl7dGhpcy5fc3RvcCghMSx0LmVhc2VJZCksKCExPT09KHQ9ZS5leHRlbmQoe29mZnNldDpbMCwwXSxkdXJhdGlvbjo1MDAsZWFzaW5nOmUuZWFzZX0sdCkpLmFuaW1hdGV8fHRoaXMuX3ByZWZlcnNSZWR1Y2VkTW90aW9uKHQpKSYmKHQuZHVyYXRpb249MCk7Y29uc3Qgbz10aGlzLnRyYW5zZm9ybSxyPXRoaXMuZ2V0Wm9vbSgpLG49dGhpcy5nZXRCZWFyaW5nKCkscz10aGlzLmdldFBpdGNoKCksYT10aGlzLmdldFBhZGRpbmcoKSxsPVwiem9vbVwiaW4gdD8rdC56b29tOnIsYz1cImJlYXJpbmdcImluIHQ/dGhpcy5fbm9ybWFsaXplQmVhcmluZyh0LmJlYXJpbmcsbik6bixoPVwicGl0Y2hcImluIHQ/K3QucGl0Y2g6cyx1PVwicGFkZGluZ1wiaW4gdD90LnBhZGRpbmc6by5wYWRkaW5nLF89ZS5Qb2ludC5jb252ZXJ0KHQub2Zmc2V0KTtsZXQgZCxwLG07aWYoXCJnbG9iZVwiPT09by5wcm9qZWN0aW9uLm5hbWUpe2NvbnN0IGk9ZS5NZXJjYXRvckNvb3JkaW5hdGUuZnJvbUxuZ0xhdChvLmNlbnRlcikscj1fLnJvdGF0ZSgtby5hbmdsZSk7aS54Kz1yLngvby53b3JsZFNpemUsaS55Kz1yLnkvby53b3JsZFNpemU7Y29uc3Qgbj1pLnRvTG5nTGF0KCkscz1lLkxuZ0xhdC5jb252ZXJ0KHQuY2VudGVyfHxuKTt0aGlzLl9ub3JtYWxpemVDZW50ZXIocyksZD1vLmNlbnRlclBvaW50LmFkZChyKSxwPW5ldyBlLlBvaW50KGkueCxpLnkpLm11bHQoby53b3JsZFNpemUpLG09bmV3IGUuUG9pbnQoZS5tZXJjYXRvclhmcm9tTG5nKHMubG5nKSxlLm1lcmNhdG9yWWZyb21MYXQocy5sYXQpKS5tdWx0KG8ud29ybGRTaXplKS5zdWIocCk7fWVsc2Uge2Q9by5jZW50ZXJQb2ludC5hZGQoXyk7Y29uc3QgaT1vLnBvaW50TG9jYXRpb24oZCkscj1lLkxuZ0xhdC5jb252ZXJ0KHQuY2VudGVyfHxpKTt0aGlzLl9ub3JtYWxpemVDZW50ZXIocikscD1vLnByb2plY3QoaSksbT1vLnByb2plY3Qocikuc3ViKHApO31jb25zdCBmPW8uem9vbVNjYWxlKGwtcik7bGV0IGcsdjt0LmFyb3VuZCYmKGc9ZS5MbmdMYXQuY29udmVydCh0LmFyb3VuZCksdj1vLmxvY2F0aW9uUG9pbnQoZykpO2NvbnN0IHg9dGhpcy5fem9vbWluZ3x8bCE9PXIseT10aGlzLl9yb3RhdGluZ3x8biE9PWMsYj10aGlzLl9waXRjaGluZ3x8aCE9PXMsdz0hby5pc1BhZGRpbmdFcXVhbCh1KSxUPW89PlQ9PntpZih4JiYoby56b29tPWUubnVtYmVyKHIsbCxUKSkseSYmKG8uYmVhcmluZz1lLm51bWJlcihuLGMsVCkpLGImJihvLnBpdGNoPWUubnVtYmVyKHMsaCxUKSksdyYmKG8uaW50ZXJwb2xhdGVQYWRkaW5nKGEsdSxUKSxkPW8uY2VudGVyUG9pbnQuYWRkKF8pKSxnKW8uc2V0TG9jYXRpb25BdFBvaW50KGcsdik7ZWxzZSB7Y29uc3QgZT1vLnpvb21TY2FsZShvLnpvb20tciksdD1sPnI/TWF0aC5taW4oMixmKTpNYXRoLm1heCguNSxmKSxpPU1hdGgucG93KHQsMS1UKSxuPW8udW5wcm9qZWN0KHAuYWRkKG0ubXVsdChUKmkpKS5tdWx0KGUpKTtvLnNldExvY2F0aW9uQXRQb2ludChvLnJlbmRlcldvcmxkQ29waWVzP24ud3JhcCgpOm4sZCk7fXJldHVybiB0LnByZWxvYWRPbmx5fHx0aGlzLl9maXJlTW92ZUV2ZW50cyhpKSxvfTtpZih0LnByZWxvYWRPbmx5KXtjb25zdCBlPXRoaXMuX2VtdWxhdGUoVCx0LmR1cmF0aW9uLG8pO3JldHVybiB0aGlzLl9wcmVsb2FkVGlsZXMoZSksdGhpc31jb25zdCBFPXttb3Zpbmc6dGhpcy5fbW92aW5nLHpvb21pbmc6dGhpcy5fem9vbWluZyxyb3RhdGluZzp0aGlzLl9yb3RhdGluZyxwaXRjaGluZzp0aGlzLl9waXRjaGluZ307cmV0dXJuIHRoaXMuX3pvb21pbmc9eCx0aGlzLl9yb3RhdGluZz15LHRoaXMuX3BpdGNoaW5nPWIsdGhpcy5fcGFkZGluZz13LHRoaXMuX2Vhc2VJZD10LmVhc2VJZCx0aGlzLl9wcmVwYXJlRWFzZShpLHQubm9Nb3ZlU3RhcnQsRSksdGhpcy5fZWFzZShUKG8pLChlPT57by5yZWNlbnRlck9uVGVycmFpbigpLHRoaXMuX2FmdGVyRWFzZShpLGUpO30pLHQpLHRoaXN9X3ByZXBhcmVFYXNlKHQsaSxvPXt9KXt0aGlzLl9tb3Zpbmc9ITAsdGhpcy50cmFuc2Zvcm0uY2FtZXJhRWxldmF0aW9uUmVmZXJlbmNlPVwic2VhXCIsaXx8by5tb3Zpbmd8fHRoaXMuZmlyZShuZXcgZS5FdmVudChcIm1vdmVzdGFydFwiLHQpKSx0aGlzLl96b29taW5nJiYhby56b29taW5nJiZ0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJ6b29tc3RhcnRcIix0KSksdGhpcy5fcm90YXRpbmcmJiFvLnJvdGF0aW5nJiZ0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJyb3RhdGVzdGFydFwiLHQpKSx0aGlzLl9waXRjaGluZyYmIW8ucGl0Y2hpbmcmJnRoaXMuZmlyZShuZXcgZS5FdmVudChcInBpdGNoc3RhcnRcIix0KSk7fV9maXJlTW92ZUV2ZW50cyh0KXt0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJtb3ZlXCIsdCkpLHRoaXMuX3pvb21pbmcmJnRoaXMuZmlyZShuZXcgZS5FdmVudChcInpvb21cIix0KSksdGhpcy5fcm90YXRpbmcmJnRoaXMuZmlyZShuZXcgZS5FdmVudChcInJvdGF0ZVwiLHQpKSx0aGlzLl9waXRjaGluZyYmdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwicGl0Y2hcIix0KSk7fV9hZnRlckVhc2UodCxpKXtpZih0aGlzLl9lYXNlSWQmJmkmJnRoaXMuX2Vhc2VJZD09PWkpcmV0dXJuO3RoaXMuX2Vhc2VJZD12b2lkIDAsdGhpcy50cmFuc2Zvcm0uY2FtZXJhRWxldmF0aW9uUmVmZXJlbmNlPVwiZ3JvdW5kXCI7Y29uc3Qgbz10aGlzLl96b29taW5nLHI9dGhpcy5fcm90YXRpbmcsbj10aGlzLl9waXRjaGluZzt0aGlzLl9tb3Zpbmc9ITEsdGhpcy5fem9vbWluZz0hMSx0aGlzLl9yb3RhdGluZz0hMSx0aGlzLl9waXRjaGluZz0hMSx0aGlzLl9wYWRkaW5nPSExLG8mJnRoaXMuZmlyZShuZXcgZS5FdmVudChcInpvb21lbmRcIix0KSksciYmdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwicm90YXRlZW5kXCIsdCkpLG4mJnRoaXMuZmlyZShuZXcgZS5FdmVudChcInBpdGNoZW5kXCIsdCkpLHRoaXMuZmlyZShuZXcgZS5FdmVudChcIm1vdmVlbmRcIix0KSk7fWZseVRvKHQsaSl7aWYodGhpcy5fcHJlZmVyc1JlZHVjZWRNb3Rpb24odCkpe2NvbnN0IG89ZS5waWNrKHQsW1wiY2VudGVyXCIsXCJ6b29tXCIsXCJiZWFyaW5nXCIsXCJwaXRjaFwiLFwiYXJvdW5kXCJdKTtyZXR1cm4gdGhpcy5qdW1wVG8obyxpKX10aGlzLnN0b3AoKSx0PWUuZXh0ZW5kKHtvZmZzZXQ6WzAsMF0sc3BlZWQ6MS4yLGN1cnZlOjEuNDIsZWFzaW5nOmUuZWFzZX0sdCk7Y29uc3Qgbz10aGlzLnRyYW5zZm9ybSxyPXRoaXMuZ2V0Wm9vbSgpLG49dGhpcy5nZXRCZWFyaW5nKCkscz10aGlzLmdldFBpdGNoKCksYT10aGlzLmdldFBhZGRpbmcoKSxsPVwiem9vbVwiaW4gdD9lLmNsYW1wKCt0Lnpvb20sby5taW5ab29tLG8ubWF4Wm9vbSk6cixjPVwiYmVhcmluZ1wiaW4gdD90aGlzLl9ub3JtYWxpemVCZWFyaW5nKHQuYmVhcmluZyxuKTpuLGg9XCJwaXRjaFwiaW4gdD8rdC5waXRjaDpzLHU9XCJwYWRkaW5nXCJpbiB0P3QucGFkZGluZzpvLnBhZGRpbmcsXz1vLnpvb21TY2FsZShsLXIpLGQ9ZS5Qb2ludC5jb252ZXJ0KHQub2Zmc2V0KTtsZXQgcD1vLmNlbnRlclBvaW50LmFkZChkKTtjb25zdCBtPW8ucG9pbnRMb2NhdGlvbihwKSxmPWUuTG5nTGF0LmNvbnZlcnQodC5jZW50ZXJ8fG0pO3RoaXMuX25vcm1hbGl6ZUNlbnRlcihmKTtjb25zdCBnPW8ucHJvamVjdChtKSx2PW8ucHJvamVjdChmKS5zdWIoZyk7bGV0IHg9dC5jdXJ2ZTtjb25zdCB5PU1hdGgubWF4KG8ud2lkdGgsby5oZWlnaHQpLGI9eS9fLHc9di5tYWcoKTtpZihcIm1pblpvb21cImluIHQpe2NvbnN0IGk9ZS5jbGFtcChNYXRoLm1pbih0Lm1pblpvb20scixsKSxvLm1pblpvb20sby5tYXhab29tKSxuPXkvby56b29tU2NhbGUoaS1yKTt4PU1hdGguc3FydChuL3cqMik7fWNvbnN0IFQ9eCp4O2Z1bmN0aW9uIEUoZSl7Y29uc3QgdD0oYipiLXkqeSsoZT8tMToxKSpUKlQqdyp3KS8oMiooZT9iOnkpKlQqdyk7cmV0dXJuIE1hdGgubG9nKE1hdGguc3FydCh0KnQrMSktdCl9ZnVuY3Rpb24gQyhlKXtyZXR1cm4gKE1hdGguZXhwKGUpLU1hdGguZXhwKC1lKSkvMn1mdW5jdGlvbiBNKGUpe3JldHVybiAoTWF0aC5leHAoZSkrTWF0aC5leHAoLWUpKS8yfWNvbnN0IEk9RSgwKTtsZXQgUD1mdW5jdGlvbihlKXtyZXR1cm4gTShJKS9NKEkreCplKX0sUz1mdW5jdGlvbihlKXtyZXR1cm4geSooKE0oSSkqKEModD1JK3gqZSkvTSh0KSktQyhJKSkvVCkvdzt2YXIgdDt9LEQ9KEUoMSktSSkveDtpZihNYXRoLmFicyh3KTwxZS02fHwhaXNGaW5pdGUoRCkpe2lmKE1hdGguYWJzKHktYik8MWUtNilyZXR1cm4gdGhpcy5lYXNlVG8odCxpKTtjb25zdCBlPWI8eT8tMToxO0Q9TWF0aC5hYnMoTWF0aC5sb2coYi95KSkveCxTPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LFA9ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguZXhwKGUqeCp0KX07fXQuZHVyYXRpb249XCJkdXJhdGlvblwiaW4gdD8rdC5kdXJhdGlvbjoxZTMqRC8oXCJzY3JlZW5TcGVlZFwiaW4gdD8rdC5zY3JlZW5TcGVlZC94Oit0LnNwZWVkKSx0Lm1heER1cmF0aW9uJiZ0LmR1cmF0aW9uPnQubWF4RHVyYXRpb24mJih0LmR1cmF0aW9uPTApO2NvbnN0IEw9biE9PWMsQT1oIT09cyx6PSFvLmlzUGFkZGluZ0VxdWFsKHUpLFI9bz0+Xz0+e2NvbnN0IG09XypELHg9MS9QKG0pO28uem9vbT0xPT09Xz9sOnIrby5zY2FsZVpvb20oeCksTCYmKG8uYmVhcmluZz1lLm51bWJlcihuLGMsXykpLEEmJihvLnBpdGNoPWUubnVtYmVyKHMsaCxfKSkseiYmKG8uaW50ZXJwb2xhdGVQYWRkaW5nKGEsdSxfKSxwPW8uY2VudGVyUG9pbnQuYWRkKGQpKTtjb25zdCB5PTE9PT1fP2Y6by51bnByb2plY3QoZy5hZGQodi5tdWx0KFMobSkpKS5tdWx0KHgpKTtyZXR1cm4gby5zZXRMb2NhdGlvbkF0UG9pbnQoby5yZW5kZXJXb3JsZENvcGllcz95LndyYXAoKTp5LHApLG8uX3VwZGF0ZUNhbWVyYU9uVGVycmFpbigpLHQucHJlbG9hZE9ubHl8fHRoaXMuX2ZpcmVNb3ZlRXZlbnRzKGkpLG99O2lmKHQucHJlbG9hZE9ubHkpe2NvbnN0IGU9dGhpcy5fZW11bGF0ZShSLHQuZHVyYXRpb24sbyk7cmV0dXJuIHRoaXMuX3ByZWxvYWRUaWxlcyhlKSx0aGlzfXJldHVybiB0aGlzLl96b29taW5nPSEwLHRoaXMuX3JvdGF0aW5nPUwsdGhpcy5fcGl0Y2hpbmc9QSx0aGlzLl9wYWRkaW5nPXosdGhpcy5fcHJlcGFyZUVhc2UoaSwhMSksdGhpcy5fZWFzZShSKG8pLCgoKT0+dGhpcy5fYWZ0ZXJFYXNlKGkpKSx0KSx0aGlzfWlzRWFzaW5nKCl7cmV0dXJuICEhdGhpcy5fZWFzZUZyYW1lSWR9c3RvcCgpe3JldHVybiB0aGlzLl9zdG9wKCl9X3N0b3AoZSx0KXtpZih0aGlzLl9lYXNlRnJhbWVJZCYmKHRoaXMuX2NhbmNlbFJlbmRlckZyYW1lKHRoaXMuX2Vhc2VGcmFtZUlkKSx0aGlzLl9lYXNlRnJhbWVJZD12b2lkIDAsdGhpcy5fb25FYXNlRnJhbWU9dm9pZCAwKSx0aGlzLl9vbkVhc2VFbmQpe2NvbnN0IGU9dGhpcy5fb25FYXNlRW5kO3RoaXMuX29uRWFzZUVuZD12b2lkIDAsZS5jYWxsKHRoaXMsdCk7fWlmKCFlKXtjb25zdCBlPXRoaXMuaGFuZGxlcnM7ZSYmZS5zdG9wKCExKTt9cmV0dXJuIHRoaXN9X2Vhc2UodCxpLG8peyExPT09by5hbmltYXRlfHwwPT09by5kdXJhdGlvbj8odCgxKSxpKCkpOih0aGlzLl9lYXNlU3RhcnQ9ZS5leHBvcnRlZC5ub3coKSx0aGlzLl9lYXNlT3B0aW9ucz1vLHRoaXMuX29uRWFzZUZyYW1lPXQsdGhpcy5fb25FYXNlRW5kPWksdGhpcy5fZWFzZUZyYW1lSWQ9dGhpcy5fcmVxdWVzdFJlbmRlckZyYW1lKHRoaXMuX3JlbmRlckZyYW1lQ2FsbGJhY2spKTt9X3JlbmRlckZyYW1lQ2FsbGJhY2soKXtjb25zdCB0PU1hdGgubWluKChlLmV4cG9ydGVkLm5vdygpLXRoaXMuX2Vhc2VTdGFydCkvdGhpcy5fZWFzZU9wdGlvbnMuZHVyYXRpb24sMSksaT10aGlzLl9vbkVhc2VGcmFtZTtpJiZpKHRoaXMuX2Vhc2VPcHRpb25zLmVhc2luZyh0KSksdDwxP3RoaXMuX2Vhc2VGcmFtZUlkPXRoaXMuX3JlcXVlc3RSZW5kZXJGcmFtZSh0aGlzLl9yZW5kZXJGcmFtZUNhbGxiYWNrKTp0aGlzLnN0b3AoKTt9X25vcm1hbGl6ZUJlYXJpbmcodCxpKXt0PWUud3JhcCh0LC0xODAsMTgwKTtjb25zdCBvPU1hdGguYWJzKHQtaSk7cmV0dXJuIE1hdGguYWJzKHQtMzYwLWkpPG8mJih0LT0zNjApLE1hdGguYWJzKHQrMzYwLWkpPG8mJih0Kz0zNjApLHR9X25vcm1hbGl6ZUNlbnRlcihlKXtjb25zdCB0PXRoaXMudHJhbnNmb3JtO2lmKCF0LnJlbmRlcldvcmxkQ29waWVzfHx0Lm1heEJvdW5kcylyZXR1cm47Y29uc3QgaT1lLmxuZy10LmNlbnRlci5sbmc7ZS5sbmcrPWk+MTgwPy0zNjA6aTwtMTgwPzM2MDowO31fcHJlZmVyc1JlZHVjZWRNb3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jlc3BlY3RQcmVmZXJzUmVkdWNlZE1vdGlvbiYmZS5leHBvcnRlZC5wcmVmZXJzUmVkdWNlZE1vdGlvbiYmISh0JiZ0LmVzc2VudGlhbCl9X2VtdWxhdGUoZSx0LGkpe2NvbnN0IG89TWF0aC5jZWlsKDE1KnQvMWUzKSxyPVtdLG49ZShpLmNsb25lKCkpO2ZvcihsZXQgZT0wO2U8PW87ZSsrKXtjb25zdCB0PW4oZS9vKTtyLnB1c2godC5jbG9uZSgpKTt9cmV0dXJuIHJ9fWNsYXNzIEhye2NvbnN0cnVjdG9yKHQ9e30pe3RoaXMub3B0aW9ucz10LGUuYmluZEFsbChbXCJfdG9nZ2xlQXR0cmlidXRpb25cIixcIl91cGRhdGVFZGl0TGlua1wiLFwiX3VwZGF0ZURhdGFcIixcIl91cGRhdGVDb21wYWN0XCJdLHRoaXMpO31nZXREZWZhdWx0UG9zaXRpb24oKXtyZXR1cm4gXCJib3R0b20tcmlnaHRcIn1vbkFkZChlKXtjb25zdCB0PXRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLmNvbXBhY3Q7cmV0dXJuIHRoaXMuX21hcD1lLHRoaXMuX2NvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1jdHJsIG1hcGJveGdsLWN0cmwtYXR0cmliXCIpLHRoaXMuX2NvbXBhY3RCdXR0b249bihcImJ1dHRvblwiLFwibWFwYm94Z2wtY3RybC1hdHRyaWItYnV0dG9uXCIsdGhpcy5fY29udGFpbmVyKSxuKFwic3BhblwiLFwibWFwYm94Z2wtY3RybC1pY29uXCIsdGhpcy5fY29tcGFjdEJ1dHRvbikuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIiksdGhpcy5fY29tcGFjdEJ1dHRvbi50eXBlPVwiYnV0dG9uXCIsdGhpcy5fY29tcGFjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl90b2dnbGVBdHRyaWJ1dGlvbiksdGhpcy5fc2V0RWxlbWVudFRpdGxlKHRoaXMuX2NvbXBhY3RCdXR0b24sXCJUb2dnbGVBdHRyaWJ1dGlvblwiKSx0aGlzLl9pbm5lckNvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1jdHJsLWF0dHJpYi1pbm5lclwiLHRoaXMuX2NvbnRhaW5lciksdGhpcy5faW5uZXJDb250YWluZXIuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwibGlzdFwiKSx0JiZ0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWNvbXBhY3RcIiksdGhpcy5fdXBkYXRlQXR0cmlidXRpb25zKCksdGhpcy5fdXBkYXRlRWRpdExpbmsoKSx0aGlzLl9tYXAub24oXCJzdHlsZWRhdGFcIix0aGlzLl91cGRhdGVEYXRhKSx0aGlzLl9tYXAub24oXCJzb3VyY2VkYXRhXCIsdGhpcy5fdXBkYXRlRGF0YSksdGhpcy5fbWFwLm9uKFwibW92ZWVuZFwiLHRoaXMuX3VwZGF0ZUVkaXRMaW5rKSx2b2lkIDA9PT10JiYodGhpcy5fbWFwLm9uKFwicmVzaXplXCIsdGhpcy5fdXBkYXRlQ29tcGFjdCksdGhpcy5fdXBkYXRlQ29tcGFjdCgpKSx0aGlzLl9jb250YWluZXJ9b25SZW1vdmUoKXt0aGlzLl9jb250YWluZXIucmVtb3ZlKCksdGhpcy5fbWFwLm9mZihcInN0eWxlZGF0YVwiLHRoaXMuX3VwZGF0ZURhdGEpLHRoaXMuX21hcC5vZmYoXCJzb3VyY2VkYXRhXCIsdGhpcy5fdXBkYXRlRGF0YSksdGhpcy5fbWFwLm9mZihcIm1vdmVlbmRcIix0aGlzLl91cGRhdGVFZGl0TGluayksdGhpcy5fbWFwLm9mZihcInJlc2l6ZVwiLHRoaXMuX3VwZGF0ZUNvbXBhY3QpLHRoaXMuX21hcD12b2lkIDAsdGhpcy5fYXR0cmliSFRNTD12b2lkIDA7fV9zZXRFbGVtZW50VGl0bGUoZSx0KXtjb25zdCBpPXRoaXMuX21hcC5fZ2V0VUlTdHJpbmcoYEF0dHJpYnV0aW9uQ29udHJvbC4ke3R9YCk7ZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsaSksZS5yZW1vdmVBdHRyaWJ1dGUoXCJ0aXRsZVwiKSxlLmZpcnN0RWxlbWVudENoaWxkJiZlLmZpcnN0RWxlbWVudENoaWxkLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsaSk7fV90b2dnbGVBdHRyaWJ1dGlvbigpe3RoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJtYXBib3hnbC1jb21wYWN0LXNob3dcIik/KHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY29tcGFjdC1zaG93XCIpLHRoaXMuX2NvbXBhY3RCdXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIikpOih0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWNvbXBhY3Qtc2hvd1wiKSx0aGlzLl9jb21wYWN0QnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIixcInRydWVcIikpO31fdXBkYXRlRWRpdExpbmsoKXtsZXQgdD10aGlzLl9lZGl0TGluazt0fHwodD10aGlzLl9lZGl0TGluaz10aGlzLl9jb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tYXBib3gtaW1wcm92ZS1tYXBcIikpO2NvbnN0IGk9W3trZXk6XCJvd25lclwiLHZhbHVlOnRoaXMuc3R5bGVPd25lcn0se2tleTpcImlkXCIsdmFsdWU6dGhpcy5zdHlsZUlkfSx7a2V5OlwiYWNjZXNzX3Rva2VuXCIsdmFsdWU6dGhpcy5fbWFwLl9yZXF1ZXN0TWFuYWdlci5fY3VzdG9tQWNjZXNzVG9rZW58fGUuY29uZmlnLkFDQ0VTU19UT0tFTn1dO2lmKHQpe2NvbnN0IG89aS5yZWR1Y2UoKChlLHQsbyk9Pih0LnZhbHVlJiYoZSs9YCR7dC5rZXl9PSR7dC52YWx1ZX0ke288aS5sZW5ndGgtMT9cIiZcIjpcIlwifWApLGUpKSxcIj9cIik7dC5ocmVmPWAke2UuY29uZmlnLkZFRURCQUNLX1VSTH0vJHtvfSMke0pvKHRoaXMuX21hcCwhMCl9YCx0LnJlbD1cIm5vb3BlbmVyIG5vZm9sbG93XCIsdGhpcy5fc2V0RWxlbWVudFRpdGxlKHQsXCJNYXBGZWVkYmFja1wiKTt9fV91cGRhdGVEYXRhKGUpeyFlfHxcIm1ldGFkYXRhXCIhPT1lLnNvdXJjZURhdGFUeXBlJiZcInZpc2liaWxpdHlcIiE9PWUuc291cmNlRGF0YVR5cGUmJlwic3R5bGVcIiE9PWUuZGF0YVR5cGV8fCh0aGlzLl91cGRhdGVBdHRyaWJ1dGlvbnMoKSx0aGlzLl91cGRhdGVFZGl0TGluaygpKTt9X3VwZGF0ZUF0dHJpYnV0aW9ucygpe2lmKCF0aGlzLl9tYXAuc3R5bGUpcmV0dXJuO2xldCBlPVtdO2lmKHRoaXMuX21hcC5zdHlsZS5zdHlsZXNoZWV0KXtjb25zdCBlPXRoaXMuX21hcC5zdHlsZS5zdHlsZXNoZWV0O3RoaXMuc3R5bGVPd25lcj1lLm93bmVyLHRoaXMuc3R5bGVJZD1lLmlkO31jb25zdCB0PXRoaXMuX21hcC5zdHlsZS5fc291cmNlQ2FjaGVzO2Zvcihjb25zdCBpIGluIHQpe2NvbnN0IG89dFtpXTtpZihvLnVzZWQpe2NvbnN0IHQ9by5nZXRTb3VyY2UoKTt0LmF0dHJpYnV0aW9uJiZlLmluZGV4T2YodC5hdHRyaWJ1dGlvbik8MCYmZS5wdXNoKHQuYXR0cmlidXRpb24pO319ZS5zb3J0KCgoZSx0KT0+ZS5sZW5ndGgtdC5sZW5ndGgpKSxlPWUuZmlsdGVyKCgodCxpKT0+e2ZvcihsZXQgbz1pKzE7bzxlLmxlbmd0aDtvKyspaWYoZVtvXS5pbmRleE9mKHQpPj0wKXJldHVybiAhMTtyZXR1cm4gITB9KSksdGhpcy5vcHRpb25zLmN1c3RvbUF0dHJpYnV0aW9uJiYoQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMuY3VzdG9tQXR0cmlidXRpb24pP2U9Wy4uLnRoaXMub3B0aW9ucy5jdXN0b21BdHRyaWJ1dGlvbiwuLi5lXTplLnVuc2hpZnQodGhpcy5vcHRpb25zLmN1c3RvbUF0dHJpYnV0aW9uKSk7Y29uc3QgaT1lLmpvaW4oXCIgfCBcIik7aSE9PXRoaXMuX2F0dHJpYkhUTUwmJih0aGlzLl9hdHRyaWJIVE1MPWksZS5sZW5ndGg/KHRoaXMuX2lubmVyQ29udGFpbmVyLmlubmVySFRNTD1pLHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtYXR0cmliLWVtcHR5XCIpKTp0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWF0dHJpYi1lbXB0eVwiKSx0aGlzLl9lZGl0TGluaz1udWxsKTt9X3VwZGF0ZUNvbXBhY3QoKXt0aGlzLl9tYXAuZ2V0Q2FudmFzQ29udGFpbmVyKCkub2Zmc2V0V2lkdGg8PTY0MD90aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWNvbXBhY3RcIik6dGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jb21wYWN0XCIsXCJtYXBib3hnbC1jb21wYWN0LXNob3dcIik7fX1jbGFzcyBZcntjb25zdHJ1Y3Rvcigpe2UuYmluZEFsbChbXCJfdXBkYXRlTG9nb1wiLFwiX3VwZGF0ZUNvbXBhY3RcIl0sdGhpcyk7fW9uQWRkKGUpe3RoaXMuX21hcD1lLHRoaXMuX2NvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1jdHJsXCIpO2NvbnN0IHQ9bihcImFcIixcIm1hcGJveGdsLWN0cmwtbG9nb1wiKTtyZXR1cm4gdC50YXJnZXQ9XCJfYmxhbmtcIix0LnJlbD1cIm5vb3BlbmVyIG5vZm9sbG93XCIsdC5ocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9cIix0LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIix0aGlzLl9tYXAuX2dldFVJU3RyaW5nKFwiTG9nb0NvbnRyb2wuVGl0bGVcIikpLHQuc2V0QXR0cmlidXRlKFwicmVsXCIsXCJub29wZW5lciBub2ZvbGxvd1wiKSx0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodCksdGhpcy5fY29udGFpbmVyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5fbWFwLm9uKFwic291cmNlZGF0YVwiLHRoaXMuX3VwZGF0ZUxvZ28pLHRoaXMuX3VwZGF0ZUxvZ28oKSx0aGlzLl9tYXAub24oXCJyZXNpemVcIix0aGlzLl91cGRhdGVDb21wYWN0KSx0aGlzLl91cGRhdGVDb21wYWN0KCksdGhpcy5fY29udGFpbmVyfW9uUmVtb3ZlKCl7dGhpcy5fY29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX21hcC5vZmYoXCJzb3VyY2VkYXRhXCIsdGhpcy5fdXBkYXRlTG9nbyksdGhpcy5fbWFwLm9mZihcInJlc2l6ZVwiLHRoaXMuX3VwZGF0ZUNvbXBhY3QpO31nZXREZWZhdWx0UG9zaXRpb24oKXtyZXR1cm4gXCJib3R0b20tbGVmdFwifV91cGRhdGVMb2dvKGUpe2UmJlwibWV0YWRhdGFcIiE9PWUuc291cmNlRGF0YVR5cGV8fCh0aGlzLl9jb250YWluZXIuc3R5bGUuZGlzcGxheT10aGlzLl9sb2dvUmVxdWlyZWQoKT9cImJsb2NrXCI6XCJub25lXCIpO31fbG9nb1JlcXVpcmVkKCl7aWYoIXRoaXMuX21hcC5zdHlsZSlyZXR1cm4gITA7Y29uc3QgZT10aGlzLl9tYXAuc3R5bGUuX3NvdXJjZUNhY2hlcztpZigwPT09T2JqZWN0LmVudHJpZXMoZSkubGVuZ3RoKXJldHVybiAhMDtmb3IoY29uc3QgdCBpbiBlKXtjb25zdCBpPWVbdF0uZ2V0U291cmNlKCk7aWYoaS5oYXNPd25Qcm9wZXJ0eShcIm1hcGJveF9sb2dvXCIpJiYhaS5tYXBib3hfbG9nbylyZXR1cm4gITF9cmV0dXJuICEwfV91cGRhdGVDb21wYWN0KCl7Y29uc3QgZT10aGlzLl9jb250YWluZXIuY2hpbGRyZW47aWYoZS5sZW5ndGgpe2NvbnN0IHQ9ZVswXTt0aGlzLl9tYXAuZ2V0Q2FudmFzQ29udGFpbmVyKCkub2Zmc2V0V2lkdGg8MjUwP3QuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWNvbXBhY3RcIik6dC5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY29tcGFjdFwiKTt9fX1jbGFzcyBLcntjb25zdHJ1Y3Rvcigpe3RoaXMuX3F1ZXVlPVtdLHRoaXMuX2lkPTAsdGhpcy5fY2xlYXJlZD0hMSx0aGlzLl9jdXJyZW50bHlSdW5uaW5nPSExO31hZGQoZSl7Y29uc3QgdD0rK3RoaXMuX2lkO3JldHVybiB0aGlzLl9xdWV1ZS5wdXNoKHtjYWxsYmFjazplLGlkOnQsY2FuY2VsbGVkOiExfSksdH1yZW1vdmUoZSl7Y29uc3QgdD10aGlzLl9jdXJyZW50bHlSdW5uaW5nLGk9dD90aGlzLl9xdWV1ZS5jb25jYXQodCk6dGhpcy5fcXVldWU7Zm9yKGNvbnN0IHQgb2YgaSlpZih0LmlkPT09ZSlyZXR1cm4gdm9pZCh0LmNhbmNlbGxlZD0hMCl9cnVuKGU9MCl7Y29uc3QgdD10aGlzLl9jdXJyZW50bHlSdW5uaW5nPXRoaXMuX3F1ZXVlO3RoaXMuX3F1ZXVlPVtdO2Zvcihjb25zdCBpIG9mIHQpaWYoIWkuY2FuY2VsbGVkJiYoaS5jYWxsYmFjayhlKSx0aGlzLl9jbGVhcmVkKSlicmVhazt0aGlzLl9jbGVhcmVkPSExLHRoaXMuX2N1cnJlbnRseVJ1bm5pbmc9ITE7fWNsZWFyKCl7dGhpcy5fY3VycmVudGx5UnVubmluZyYmKHRoaXMuX2NsZWFyZWQ9ITApLHRoaXMuX3F1ZXVlPVtdO319ZnVuY3Rpb24gSnIodCxpLG8pe2lmKHQ9bmV3IGUuTG5nTGF0KHQubG5nLHQubGF0KSxpKXtjb25zdCByPW5ldyBlLkxuZ0xhdCh0LmxuZy0zNjAsdC5sYXQpLG49bmV3IGUuTG5nTGF0KHQubG5nKzM2MCx0LmxhdCkscz0zNjAqTWF0aC5jZWlsKE1hdGguYWJzKHQubG5nLW8uY2VudGVyLmxuZykvMzYwKSxhPW8ubG9jYXRpb25Qb2ludCh0KS5kaXN0U3FyKGkpLGw9aS54PDB8fGkueTwwfHxpLng+by53aWR0aHx8aS55Pm8uaGVpZ2h0O28ubG9jYXRpb25Qb2ludChyKS5kaXN0U3FyKGkpPGEmJihsfHxNYXRoLmFicyhyLmxuZy1vLmNlbnRlci5sbmcpPHMpP3Q9cjpvLmxvY2F0aW9uUG9pbnQobikuZGlzdFNxcihpKTxhJiYobHx8TWF0aC5hYnMobi5sbmctby5jZW50ZXIubG5nKTxzKSYmKHQ9bik7fWZvcig7TWF0aC5hYnModC5sbmctby5jZW50ZXIubG5nKT4xODA7KXtjb25zdCBlPW8ubG9jYXRpb25Qb2ludCh0KTtpZihlLng+PTAmJmUueT49MCYmZS54PD1vLndpZHRoJiZlLnk8PW8uaGVpZ2h0KWJyZWFrO3QubG5nPm8uY2VudGVyLmxuZz90LmxuZy09MzYwOnQubG5nKz0zNjA7fXJldHVybiB0fWNvbnN0IFFyPXtjZW50ZXI6XCJ0cmFuc2xhdGUoLTUwJSwtNTAlKVwiLHRvcDpcInRyYW5zbGF0ZSgtNTAlLDApXCIsXCJ0b3AtbGVmdFwiOlwidHJhbnNsYXRlKDAsMClcIixcInRvcC1yaWdodFwiOlwidHJhbnNsYXRlKC0xMDAlLDApXCIsYm90dG9tOlwidHJhbnNsYXRlKC01MCUsLTEwMCUpXCIsXCJib3R0b20tbGVmdFwiOlwidHJhbnNsYXRlKDAsLTEwMCUpXCIsXCJib3R0b20tcmlnaHRcIjpcInRyYW5zbGF0ZSgtMTAwJSwtMTAwJSlcIixsZWZ0OlwidHJhbnNsYXRlKDAsLTUwJSlcIixyaWdodDpcInRyYW5zbGF0ZSgtMTAwJSwtNTAlKVwifTtjbGFzcyBlbiBleHRlbmRzIGUuRXZlbnRlZHtjb25zdHJ1Y3Rvcih0LGkpe2lmKHN1cGVyKCksKHQgaW5zdGFuY2VvZiBlLndpbmRvdy5IVE1MRWxlbWVudHx8aSkmJih0PWUuZXh0ZW5kKHtlbGVtZW50OnR9LGkpKSxlLmJpbmRBbGwoW1wiX3VwZGF0ZVwiLFwiX29uTW92ZVwiLFwiX29uVXBcIixcIl9hZGREcmFnSGFuZGxlclwiLFwiX29uTWFwQ2xpY2tcIixcIl9vbktleVByZXNzXCIsXCJfY2xlYXJGYWRlVGltZXJcIl0sdGhpcyksdGhpcy5fYW5jaG9yPXQmJnQuYW5jaG9yfHxcImNlbnRlclwiLHRoaXMuX2NvbG9yPXQmJnQuY29sb3J8fFwiIzNGQjFDRVwiLHRoaXMuX3NjYWxlPXQmJnQuc2NhbGV8fDEsdGhpcy5fZHJhZ2dhYmxlPXQmJnQuZHJhZ2dhYmxlfHwhMSx0aGlzLl9jbGlja1RvbGVyYW5jZT10JiZ0LmNsaWNrVG9sZXJhbmNlfHwwLHRoaXMuX2lzRHJhZ2dpbmc9ITEsdGhpcy5fc3RhdGU9XCJpbmFjdGl2ZVwiLHRoaXMuX3JvdGF0aW9uPXQmJnQucm90YXRpb258fDAsdGhpcy5fcm90YXRpb25BbGlnbm1lbnQ9dCYmdC5yb3RhdGlvbkFsaWdubWVudHx8XCJhdXRvXCIsdGhpcy5fcGl0Y2hBbGlnbm1lbnQ9dCYmdC5waXRjaEFsaWdubWVudCYmdC5waXRjaEFsaWdubWVudHx8XCJhdXRvXCIsdGhpcy5fdXBkYXRlTW92aW5nPSgpPT50aGlzLl91cGRhdGUoITApLHRoaXMuX29jY2x1ZGVkT3BhY2l0eT10JiZ0Lm9jY2x1ZGVkT3BhY2l0eXx8LjIsdCYmdC5lbGVtZW50KXRoaXMuX2VsZW1lbnQ9dC5lbGVtZW50LHRoaXMuX29mZnNldD1lLlBvaW50LmNvbnZlcnQodCYmdC5vZmZzZXR8fFswLDBdKTtlbHNlIHt0aGlzLl9kZWZhdWx0TWFya2VyPSEwLHRoaXMuX2VsZW1lbnQ9bihcImRpdlwiKTtjb25zdCBpPTQxLG89Mjcscj1zKFwic3ZnXCIse2Rpc3BsYXk6XCJibG9ja1wiLGhlaWdodDppKnRoaXMuX3NjYWxlK1wicHhcIix3aWR0aDpvKnRoaXMuX3NjYWxlK1wicHhcIix2aWV3Qm94OmAwIDAgJHtvfSAke2l9YH0sdGhpcy5fZWxlbWVudCksYT1zKFwicmFkaWFsR3JhZGllbnRcIix7aWQ6XCJzaGFkb3dHcmFkaWVudFwifSxzKFwiZGVmc1wiLHt9LHIpKTtzKFwic3RvcFwiLHtvZmZzZXQ6XCIxMCVcIixcInN0b3Atb3BhY2l0eVwiOi40fSxhKSxzKFwic3RvcFwiLHtvZmZzZXQ6XCIxMDAlXCIsXCJzdG9wLW9wYWNpdHlcIjouMDV9LGEpLHMoXCJlbGxpcHNlXCIse2N4OjEzLjUsY3k6MzQuOCxyeDoxMC41LHJ5OjUuMjUsZmlsbDpcInVybCgjc2hhZG93R3JhZGllbnQpXCJ9LHIpLHMoXCJwYXRoXCIse2ZpbGw6dGhpcy5fY29sb3IsZDpcIk0yNywxMy41QzI3LDE5LjA3IDIwLjI1LDI3IDE0Ljc1LDM0LjVDMTQuMDIsMzUuNSAxMi45OCwzNS41IDEyLjI1LDM0LjVDNi43NSwyNyAwLDE5LjIyIDAsMTMuNUMwLDYuMDQgNi4wNCwwIDEzLjUsMEMyMC45NiwwIDI3LDYuMDQgMjcsMTMuNVpcIn0scikscyhcInBhdGhcIix7b3BhY2l0eTouMjUsZDpcIk0xMy41LDBDNi4wNCwwIDAsNi4wNCAwLDEzLjVDMCwxOS4yMiA2Ljc1LDI3IDEyLjI1LDM0LjVDMTMsMzUuNTIgMTQuMDIsMzUuNSAxNC43NSwzNC41QzIwLjI1LDI3IDI3LDE5LjA3IDI3LDEzLjVDMjcsNi4wNCAyMC45NiwwIDEzLjUsMFpNMTMuNSwxQzIwLjQyLDEgMjYsNi41OCAyNiwxMy41QzI2LDE1LjkgMjQuNSwxOS4xOCAyMi4yMiwyMi43NEMxOS45NSwyNi4zIDE2LjcxLDMwLjE0IDEzLjk0LDMzLjkxQzEzLjc0LDM0LjE4IDEzLjYxLDM0LjMyIDEzLjUsMzQuNDRDMTMuMzksMzQuMzIgMTMuMjYsMzQuMTggMTMuMDYsMzMuOTFDMTAuMjgsMzAuMTMgNy40MSwyNi4zMSA1LjAyLDIyLjc3QzIuNjIsMTkuMjMgMSwxNS45NSAxLDEzLjVDMSw2LjU4IDYuNTgsMSAxMy41LDFaXCJ9LHIpLHMoXCJjaXJjbGVcIix7ZmlsbDpcIndoaXRlXCIsY3g6MTMuNSxjeToxMy41LHI6NS41fSxyKSx0aGlzLl9vZmZzZXQ9ZS5Qb2ludC5jb252ZXJ0KHQmJnQub2Zmc2V0fHxbMCwtMTRdKTt9dGhpcy5fZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpfHx0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixcIk1hcCBtYXJrZXJcIiksdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtbWFya2VyXCIpLHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLChlPT57ZS5wcmV2ZW50RGVmYXVsdCgpO30pKSx0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwoZT0+e2UucHJldmVudERlZmF1bHQoKTt9KSk7Y29uc3Qgbz10aGlzLl9lbGVtZW50LmNsYXNzTGlzdDtmb3IoY29uc3QgZSBpbiBRcilvLnJlbW92ZShgbWFwYm94Z2wtbWFya2VyLWFuY2hvci0ke2V9YCk7by5hZGQoYG1hcGJveGdsLW1hcmtlci1hbmNob3ItJHt0aGlzLl9hbmNob3J9YCksdGhpcy5fcG9wdXA9bnVsbDt9YWRkVG8oZSl7cmV0dXJuIGU9PT10aGlzLl9tYXB8fCh0aGlzLnJlbW92ZSgpLHRoaXMuX21hcD1lLGUuZ2V0Q2FudmFzQ29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodGhpcy5fZWxlbWVudCksZS5vbihcIm1vdmVcIix0aGlzLl91cGRhdGVNb3ZpbmcpLGUub24oXCJtb3ZlZW5kXCIsdGhpcy5fdXBkYXRlKSxlLm9uKFwicmVtb3ZlXCIsdGhpcy5fY2xlYXJGYWRlVGltZXIpLGUuX2FkZE1hcmtlcih0aGlzKSx0aGlzLnNldERyYWdnYWJsZSh0aGlzLl9kcmFnZ2FibGUpLHRoaXMuX3VwZGF0ZSgpLGUub24oXCJjbGlja1wiLHRoaXMuX29uTWFwQ2xpY2spKSx0aGlzfXJlbW92ZSgpe2NvbnN0IGU9dGhpcy5fbWFwO3JldHVybiBlJiYoZS5vZmYoXCJjbGlja1wiLHRoaXMuX29uTWFwQ2xpY2spLGUub2ZmKFwibW92ZVwiLHRoaXMuX3VwZGF0ZU1vdmluZyksZS5vZmYoXCJtb3ZlZW5kXCIsdGhpcy5fdXBkYXRlKSxlLm9mZihcIm1vdXNlZG93blwiLHRoaXMuX2FkZERyYWdIYW5kbGVyKSxlLm9mZihcInRvdWNoc3RhcnRcIix0aGlzLl9hZGREcmFnSGFuZGxlciksZS5vZmYoXCJtb3VzZXVwXCIsdGhpcy5fb25VcCksZS5vZmYoXCJ0b3VjaGVuZFwiLHRoaXMuX29uVXApLGUub2ZmKFwibW91c2Vtb3ZlXCIsdGhpcy5fb25Nb3ZlKSxlLm9mZihcInRvdWNobW92ZVwiLHRoaXMuX29uTW92ZSksZS5vZmYoXCJyZW1vdmVcIix0aGlzLl9jbGVhckZhZGVUaW1lciksZS5fcmVtb3ZlTWFya2VyKHRoaXMpLHRoaXMuX21hcD12b2lkIDApLHRoaXMuX2NsZWFyRmFkZVRpbWVyKCksdGhpcy5fZWxlbWVudC5yZW1vdmUoKSx0aGlzLl9wb3B1cCYmdGhpcy5fcG9wdXAucmVtb3ZlKCksdGhpc31nZXRMbmdMYXQoKXtyZXR1cm4gdGhpcy5fbG5nTGF0fXNldExuZ0xhdCh0KXtyZXR1cm4gdGhpcy5fbG5nTGF0PWUuTG5nTGF0LmNvbnZlcnQodCksdGhpcy5fcG9zPW51bGwsdGhpcy5fcG9wdXAmJnRoaXMuX3BvcHVwLnNldExuZ0xhdCh0aGlzLl9sbmdMYXQpLHRoaXMuX3VwZGF0ZSghMCksdGhpc31nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMuX2VsZW1lbnR9c2V0UG9wdXAoZSl7aWYodGhpcy5fcG9wdXAmJih0aGlzLl9wb3B1cC5yZW1vdmUoKSx0aGlzLl9wb3B1cD1udWxsLHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwicm9sZVwiKSx0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLHRoaXMuX29uS2V5UHJlc3MpLHRoaXMuX29yaWdpbmFsVGFiSW5kZXh8fHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpLGUpe2lmKCEoXCJvZmZzZXRcImluIGUub3B0aW9ucykpe2NvbnN0IHQ9MzguMSxpPTEzLjUsbz1NYXRoLnNxcnQoTWF0aC5wb3coaSwyKS8yKTtlLm9wdGlvbnMub2Zmc2V0PXRoaXMuX2RlZmF1bHRNYXJrZXI/e3RvcDpbMCwwXSxcInRvcC1sZWZ0XCI6WzAsMF0sXCJ0b3AtcmlnaHRcIjpbMCwwXSxib3R0b206WzAsLXRdLFwiYm90dG9tLWxlZnRcIjpbbywtMSoodC1pK28pXSxcImJvdHRvbS1yaWdodFwiOlstbywtMSoodC1pK28pXSxsZWZ0OltpLC0xKih0LWkpXSxyaWdodDpbLWksLTEqKHQtaSldfTp0aGlzLl9vZmZzZXQ7fXRoaXMuX3BvcHVwPWUsZS5fbWFya2VyPXRoaXMsdGhpcy5fbG5nTGF0JiZ0aGlzLl9wb3B1cC5zZXRMbmdMYXQodGhpcy5fbG5nTGF0KSx0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIixcImJ1dHRvblwiKSx0aGlzLl9vcmlnaW5hbFRhYkluZGV4PXRoaXMuX2VsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiksdGhpcy5fb3JpZ2luYWxUYWJJbmRleHx8dGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiMFwiKSx0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLHRoaXMuX29uS2V5UHJlc3MpLHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIik7fXJldHVybiB0aGlzfV9vbktleVByZXNzKGUpe2NvbnN0IHQ9ZS5jb2RlLGk9ZS5jaGFyQ29kZXx8ZS5rZXlDb2RlO1wiU3BhY2VcIiE9PXQmJlwiRW50ZXJcIiE9PXQmJjMyIT09aSYmMTMhPT1pfHx0aGlzLnRvZ2dsZVBvcHVwKCk7fV9vbk1hcENsaWNrKGUpe2NvbnN0IHQ9ZS5vcmlnaW5hbEV2ZW50LnRhcmdldCxpPXRoaXMuX2VsZW1lbnQ7dGhpcy5fcG9wdXAmJih0PT09aXx8aS5jb250YWlucyh0KSkmJnRoaXMudG9nZ2xlUG9wdXAoKTt9Z2V0UG9wdXAoKXtyZXR1cm4gdGhpcy5fcG9wdXB9dG9nZ2xlUG9wdXAoKXtjb25zdCBlPXRoaXMuX3BvcHVwO3JldHVybiBlPyhlLmlzT3BlbigpPyhlLnJlbW92ZSgpLHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIikpOnRoaXMuX21hcCYmKGUuYWRkVG8odGhpcy5fbWFwKSx0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIixcInRydWVcIikpLHRoaXMpOnRoaXN9X2JlaGluZFRlcnJhaW4oKXtjb25zdCBlPXRoaXMuX21hcCx0PXRoaXMuX3BvcztpZighZXx8IXQpcmV0dXJuICExO2NvbnN0IGk9ZS51bnByb2plY3QodCksbz1lLmdldEZyZWVDYW1lcmFPcHRpb25zKCk7aWYoIW8ucG9zaXRpb24pcmV0dXJuICExO2NvbnN0IHI9by5wb3NpdGlvbi50b0xuZ0xhdCgpO3JldHVybiByLmRpc3RhbmNlVG8oaSk8Ljkqci5kaXN0YW5jZVRvKHRoaXMuX2xuZ0xhdCl9X2V2YWx1YXRlT3BhY2l0eSgpe2NvbnN0IHQ9dGhpcy5fbWFwO2lmKCF0KXJldHVybjtjb25zdCBpPXRoaXMuX3BvcztpZighaXx8aS54PDB8fGkueD50LnRyYW5zZm9ybS53aWR0aHx8aS55PDB8fGkueT50LnRyYW5zZm9ybS5oZWlnaHQpcmV0dXJuIHZvaWQgdGhpcy5fY2xlYXJGYWRlVGltZXIoKTtjb25zdCBvPXQudW5wcm9qZWN0KGkpO2xldCByO3QuX3Nob3dpbmdHbG9iZSgpJiZlLmlzTG5nTGF0QmVoaW5kR2xvYmUodC50cmFuc2Zvcm0sdGhpcy5fbG5nTGF0KT9yPTA6KHI9MS10Ll9xdWVyeUZvZ09wYWNpdHkobyksdC50cmFuc2Zvcm0uX3RlcnJhaW5FbmFibGVkKCkmJnQuZ2V0VGVycmFpbigpJiZ0aGlzLl9iZWhpbmRUZXJyYWluKCkmJihyKj10aGlzLl9vY2NsdWRlZE9wYWNpdHkpKSx0aGlzLl9lbGVtZW50LnN0eWxlLm9wYWNpdHk9YCR7cn1gLHRoaXMuX2VsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cz1yPjA/XCJhdXRvXCI6XCJub25lXCIsdGhpcy5fcG9wdXAmJnRoaXMuX3BvcHVwLl9zZXRPcGFjaXR5KHIpLHRoaXMuX2ZhZGVUaW1lcj1udWxsO31fY2xlYXJGYWRlVGltZXIoKXt0aGlzLl9mYWRlVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5fZmFkZVRpbWVyKSx0aGlzLl9mYWRlVGltZXI9bnVsbCk7fV91cGRhdGVET00oKXtjb25zdCBlPXRoaXMuX3BvcztpZighZXx8IXRoaXMuX21hcClyZXR1cm47Y29uc3QgdD10aGlzLl9vZmZzZXQubXVsdCh0aGlzLl9zY2FsZSk7dGhpcy5fZWxlbWVudC5zdHlsZS50cmFuc2Zvcm09YFxcbiAgICAgICAgICAgIHRyYW5zbGF0ZSgke2UueH1weCwke2UueX1weClcXG4gICAgICAgICAgICAke1FyW3RoaXMuX2FuY2hvcl19XFxuICAgICAgICAgICAgJHt0aGlzLl9jYWxjdWxhdGVYWVRyYW5zZm9ybSgpfSAke3RoaXMuX2NhbGN1bGF0ZVpUcmFuc2Zvcm0oKX1cXG4gICAgICAgICAgICB0cmFuc2xhdGUoJHt0Lnh9cHgsJHt0Lnl9cHgpXFxuICAgICAgICBgO31fY2FsY3VsYXRlWFlUcmFuc2Zvcm0oKXtjb25zdCB0PXRoaXMuX3BvcyxpPXRoaXMuX21hcCxvPXRoaXMuZ2V0UGl0Y2hBbGlnbm1lbnQoKTtpZighaXx8IXR8fFwibWFwXCIhPT1vKXJldHVybiBcIlwiO2lmKCFpLl9zaG93aW5nR2xvYmUoKSl7Y29uc3QgZT1pLmdldFBpdGNoKCk7cmV0dXJuIGU/YHJvdGF0ZVgoJHtlfWRlZylgOlwiXCJ9Y29uc3Qgcj1lLnJhZFRvRGVnKGUuZ2xvYmVUaWx0QXRMbmdMYXQoaS50cmFuc2Zvcm0sdGhpcy5fbG5nTGF0KSksbj10LnN1YihlLmdsb2JlQ2VudGVyVG9TY3JlZW5Qb2ludChpLnRyYW5zZm9ybSkpLHM9TWF0aC5hYnMobi54KStNYXRoLmFicyhuLnkpO2lmKDA9PT1zKXJldHVybiBcIlwiO2NvbnN0IGE9ci9zO3JldHVybiBgcm90YXRlWCgkey1uLnkqYX1kZWcpIHJvdGF0ZVkoJHtuLngqYX1kZWcpYH1fY2FsY3VsYXRlWlRyYW5zZm9ybSgpe2NvbnN0IHQ9dGhpcy5fcG9zLGk9dGhpcy5fbWFwO2lmKCFpfHwhdClyZXR1cm4gXCJcIjtsZXQgbz0wO2NvbnN0IHI9dGhpcy5nZXRSb3RhdGlvbkFsaWdubWVudCgpO2lmKFwibWFwXCI9PT1yKWlmKGkuX3Nob3dpbmdHbG9iZSgpKXtjb25zdCB0PWkucHJvamVjdChuZXcgZS5MbmdMYXQodGhpcy5fbG5nTGF0LmxuZyx0aGlzLl9sbmdMYXQubGF0Ky4wMDEpKSxyPWkucHJvamVjdChuZXcgZS5MbmdMYXQodGhpcy5fbG5nTGF0LmxuZyx0aGlzLl9sbmdMYXQubGF0LS4wMDEpKS5zdWIodCk7bz1lLnJhZFRvRGVnKE1hdGguYXRhbjIoci55LHIueCkpLTkwO31lbHNlIG89LWkuZ2V0QmVhcmluZygpO2Vsc2UgaWYoXCJob3Jpem9uXCI9PT1yKXtjb25zdCByPWUuc21vb3Roc3RlcCg0LDYsaS5nZXRab29tKCkpLG49ZS5nbG9iZUNlbnRlclRvU2NyZWVuUG9pbnQoaS50cmFuc2Zvcm0pO24ueSs9cippLnRyYW5zZm9ybS5oZWlnaHQ7Y29uc3Qgcz10LnN1YihuKSxhPWUucmFkVG9EZWcoTWF0aC5hdGFuMihzLnkscy54KSk7bz0oYT45MD9hLTI3MDphKzkwKSooMS1yKTt9cmV0dXJuIG8rPXRoaXMuX3JvdGF0aW9uLG8/YHJvdGF0ZVooJHtvfWRlZylgOlwiXCJ9X3VwZGF0ZSh0KXtlLndpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl91cGRhdGVGcmFtZUlkKTtjb25zdCBpPXRoaXMuX21hcDtpJiYoaS50cmFuc2Zvcm0ucmVuZGVyV29ybGRDb3BpZXMmJih0aGlzLl9sbmdMYXQ9SnIodGhpcy5fbG5nTGF0LHRoaXMuX3BvcyxpLnRyYW5zZm9ybSkpLHRoaXMuX3Bvcz1pLnByb2plY3QodGhpcy5fbG5nTGF0KSwhMD09PXQ/dGhpcy5fdXBkYXRlRnJhbWVJZD1lLndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCgpPT57dGhpcy5fZWxlbWVudCYmdGhpcy5fcG9zJiZ0aGlzLl9hbmNob3ImJih0aGlzLl9wb3M9dGhpcy5fcG9zLnJvdW5kKCksdGhpcy5fdXBkYXRlRE9NKCkpO30pKTp0aGlzLl9wb3M9dGhpcy5fcG9zLnJvdW5kKCksaS5fcmVxdWVzdERvbVRhc2soKCgpPT57dGhpcy5fbWFwJiYodGhpcy5fZWxlbWVudCYmdGhpcy5fcG9zJiZ0aGlzLl9hbmNob3ImJnRoaXMuX3VwZGF0ZURPTSgpLChpLl9zaG93aW5nR2xvYmUoKXx8aS5nZXRUZXJyYWluKCl8fGkuZ2V0Rm9nKCkpJiYhdGhpcy5fZmFkZVRpbWVyJiYodGhpcy5fZmFkZVRpbWVyPXNldFRpbWVvdXQodGhpcy5fZXZhbHVhdGVPcGFjaXR5LmJpbmQodGhpcyksNjApKSk7fSkpKTt9Z2V0T2Zmc2V0KCl7cmV0dXJuIHRoaXMuX29mZnNldH1zZXRPZmZzZXQodCl7cmV0dXJuIHRoaXMuX29mZnNldD1lLlBvaW50LmNvbnZlcnQodCksdGhpcy5fdXBkYXRlKCksdGhpc31fb25Nb3ZlKHQpe2NvbnN0IGk9dGhpcy5fbWFwO2lmKCFpKXJldHVybjtjb25zdCBvPXRoaXMuX3BvaW50ZXJkb3duUG9zLHI9dGhpcy5fcG9zaXRpb25EZWx0YTtpZihvJiZyKXtpZighdGhpcy5faXNEcmFnZ2luZyl7Y29uc3QgZT10aGlzLl9jbGlja1RvbGVyYW5jZXx8aS5fY2xpY2tUb2xlcmFuY2U7aWYodC5wb2ludC5kaXN0KG8pPGUpcmV0dXJuO3RoaXMuX2lzRHJhZ2dpbmc9ITA7fXRoaXMuX3Bvcz10LnBvaW50LnN1YihyKSx0aGlzLl9sbmdMYXQ9aS51bnByb2plY3QodGhpcy5fcG9zKSx0aGlzLnNldExuZ0xhdCh0aGlzLl9sbmdMYXQpLHRoaXMuX2VsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cz1cIm5vbmVcIixcInBlbmRpbmdcIj09PXRoaXMuX3N0YXRlJiYodGhpcy5fc3RhdGU9XCJhY3RpdmVcIix0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkcmFnc3RhcnRcIikpKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJkcmFnXCIpKTt9fV9vblVwKCl7dGhpcy5fZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzPVwiYXV0b1wiLHRoaXMuX3Bvc2l0aW9uRGVsdGE9bnVsbCx0aGlzLl9wb2ludGVyZG93blBvcz1udWxsLHRoaXMuX2lzRHJhZ2dpbmc9ITE7Y29uc3QgdD10aGlzLl9tYXA7dCYmKHQub2ZmKFwibW91c2Vtb3ZlXCIsdGhpcy5fb25Nb3ZlKSx0Lm9mZihcInRvdWNobW92ZVwiLHRoaXMuX29uTW92ZSkpLFwiYWN0aXZlXCI9PT10aGlzLl9zdGF0ZSYmdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZHJhZ2VuZFwiKSksdGhpcy5fc3RhdGU9XCJpbmFjdGl2ZVwiO31fYWRkRHJhZ0hhbmRsZXIoZSl7Y29uc3QgdD10aGlzLl9tYXAsaT10aGlzLl9wb3M7dCYmaSYmdGhpcy5fZWxlbWVudC5jb250YWlucyhlLm9yaWdpbmFsRXZlbnQudGFyZ2V0KSYmKGUucHJldmVudERlZmF1bHQoKSx0aGlzLl9wb3NpdGlvbkRlbHRhPWUucG9pbnQuc3ViKGkpLHRoaXMuX3BvaW50ZXJkb3duUG9zPWUucG9pbnQsdGhpcy5fc3RhdGU9XCJwZW5kaW5nXCIsdC5vbihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW92ZSksdC5vbihcInRvdWNobW92ZVwiLHRoaXMuX29uTW92ZSksdC5vbmNlKFwibW91c2V1cFwiLHRoaXMuX29uVXApLHQub25jZShcInRvdWNoZW5kXCIsdGhpcy5fb25VcCkpO31zZXREcmFnZ2FibGUoZSl7dGhpcy5fZHJhZ2dhYmxlPSEhZTtjb25zdCB0PXRoaXMuX21hcDtyZXR1cm4gdCYmKGU/KHQub24oXCJtb3VzZWRvd25cIix0aGlzLl9hZGREcmFnSGFuZGxlciksdC5vbihcInRvdWNoc3RhcnRcIix0aGlzLl9hZGREcmFnSGFuZGxlcikpOih0Lm9mZihcIm1vdXNlZG93blwiLHRoaXMuX2FkZERyYWdIYW5kbGVyKSx0Lm9mZihcInRvdWNoc3RhcnRcIix0aGlzLl9hZGREcmFnSGFuZGxlcikpKSx0aGlzfWlzRHJhZ2dhYmxlKCl7cmV0dXJuIHRoaXMuX2RyYWdnYWJsZX1zZXRSb3RhdGlvbihlKXtyZXR1cm4gdGhpcy5fcm90YXRpb249ZXx8MCx0aGlzLl91cGRhdGUoKSx0aGlzfWdldFJvdGF0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdGF0aW9ufXNldFJvdGF0aW9uQWxpZ25tZW50KGUpe3JldHVybiB0aGlzLl9yb3RhdGlvbkFsaWdubWVudD1lfHxcImF1dG9cIix0aGlzLl91cGRhdGUoKSx0aGlzfWdldFJvdGF0aW9uQWxpZ25tZW50KCl7cmV0dXJuIFwiYXV0b1wiPT09dGhpcy5fcm90YXRpb25BbGlnbm1lbnR8fFwiaG9yaXpvblwiPT09dGhpcy5fcm90YXRpb25BbGlnbm1lbnQmJnRoaXMuX21hcCYmIXRoaXMuX21hcC5fc2hvd2luZ0dsb2JlKCk/XCJ2aWV3cG9ydFwiOnRoaXMuX3JvdGF0aW9uQWxpZ25tZW50fXNldFBpdGNoQWxpZ25tZW50KGUpe3JldHVybiB0aGlzLl9waXRjaEFsaWdubWVudD1lfHxcImF1dG9cIix0aGlzLl91cGRhdGUoKSx0aGlzfWdldFBpdGNoQWxpZ25tZW50KCl7cmV0dXJuIFwiYXV0b1wiPT09dGhpcy5fcGl0Y2hBbGlnbm1lbnQ/dGhpcy5nZXRSb3RhdGlvbkFsaWdubWVudCgpOnRoaXMuX3BpdGNoQWxpZ25tZW50fXNldE9jY2x1ZGVkT3BhY2l0eShlKXtyZXR1cm4gdGhpcy5fb2NjbHVkZWRPcGFjaXR5PWV8fC4yLHRoaXMuX3VwZGF0ZSgpLHRoaXN9Z2V0T2NjbHVkZWRPcGFjaXR5KCl7cmV0dXJuIHRoaXMuX29jY2x1ZGVkT3BhY2l0eX19Y29uc3QgdG49e2Nsb3NlQnV0dG9uOiEwLGNsb3NlT25DbGljazohMCxmb2N1c0FmdGVyT3BlbjohMCxjbGFzc05hbWU6XCJcIixtYXhXaWR0aDpcIjI0MHB4XCJ9LG9uPVtcImFbaHJlZl1cIixcIlt0YWJpbmRleF06bm90KFt0YWJpbmRleD0nLTEnXSlcIixcIltjb250ZW50ZWRpdGFibGVdOm5vdChbY29udGVudGVkaXRhYmxlPSdmYWxzZSddKVwiLFwiYnV0dG9uOm5vdChbZGlzYWJsZWRdKVwiLFwiaW5wdXQ6bm90KFtkaXNhYmxlZF0pXCIsXCJzZWxlY3Q6bm90KFtkaXNhYmxlZF0pXCIsXCJ0ZXh0YXJlYTpub3QoW2Rpc2FibGVkXSlcIl0uam9pbihcIiwgXCIpO2Z1bmN0aW9uIHJuKHQ9bmV3IGUuUG9pbnQoMCwwKSxpPVwiYm90dG9tXCIpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXtjb25zdCBvPU1hdGgucm91bmQoTWF0aC5zcXJ0KC41Kk1hdGgucG93KHQsMikpKTtzd2l0Y2goaSl7Y2FzZVwidG9wXCI6cmV0dXJuIG5ldyBlLlBvaW50KDAsdCk7Y2FzZVwidG9wLWxlZnRcIjpyZXR1cm4gbmV3IGUuUG9pbnQobyxvKTtjYXNlXCJ0b3AtcmlnaHRcIjpyZXR1cm4gbmV3IGUuUG9pbnQoLW8sbyk7Y2FzZVwiYm90dG9tXCI6cmV0dXJuIG5ldyBlLlBvaW50KDAsLXQpO2Nhc2VcImJvdHRvbS1sZWZ0XCI6cmV0dXJuIG5ldyBlLlBvaW50KG8sLW8pO2Nhc2VcImJvdHRvbS1yaWdodFwiOnJldHVybiBuZXcgZS5Qb2ludCgtbywtbyk7Y2FzZVwibGVmdFwiOnJldHVybiBuZXcgZS5Qb2ludCh0LDApO2Nhc2VcInJpZ2h0XCI6cmV0dXJuIG5ldyBlLlBvaW50KC10LDApfXJldHVybiBuZXcgZS5Qb2ludCgwLDApfXJldHVybiB0IGluc3RhbmNlb2YgZS5Qb2ludHx8QXJyYXkuaXNBcnJheSh0KT9lLlBvaW50LmNvbnZlcnQodCk6ZS5Qb2ludC5jb252ZXJ0KHRbaV18fFswLDBdKX1jbGFzcyBubntjb25zdHJ1Y3RvcihlKXt0aGlzLmp1bXBUbyhlKTt9Z2V0VmFsdWUodCl7aWYodDw9dGhpcy5fc3RhcnRUaW1lKXJldHVybiB0aGlzLl9zdGFydDtpZih0Pj10aGlzLl9lbmRUaW1lKXJldHVybiB0aGlzLl9lbmQ7Y29uc3QgaT1lLmVhc2VDdWJpY0luT3V0KCh0LXRoaXMuX3N0YXJ0VGltZSkvKHRoaXMuX2VuZFRpbWUtdGhpcy5fc3RhcnRUaW1lKSk7cmV0dXJuIHRoaXMuX3N0YXJ0KigxLWkpK3RoaXMuX2VuZCppfWlzRWFzaW5nKGUpe3JldHVybiBlPj10aGlzLl9zdGFydFRpbWUmJmU8PXRoaXMuX2VuZFRpbWV9anVtcFRvKGUpe3RoaXMuX3N0YXJ0VGltZT0tMS8wLHRoaXMuX2VuZFRpbWU9LTEvMCx0aGlzLl9zdGFydD1lLHRoaXMuX2VuZD1lO31lYXNlVG8oZSx0LGkpe3RoaXMuX3N0YXJ0PXRoaXMuZ2V0VmFsdWUodCksdGhpcy5fZW5kPWUsdGhpcy5fc3RhcnRUaW1lPXQsdGhpcy5fZW5kVGltZT10K2k7fX1jb25zdCBzbj17XCJBdHRyaWJ1dGlvbkNvbnRyb2wuVG9nZ2xlQXR0cmlidXRpb25cIjpcIlRvZ2dsZSBhdHRyaWJ1dGlvblwiLFwiQXR0cmlidXRpb25Db250cm9sLk1hcEZlZWRiYWNrXCI6XCJNYXAgZmVlZGJhY2tcIixcIkZ1bGxzY3JlZW5Db250cm9sLkVudGVyXCI6XCJFbnRlciBmdWxsc2NyZWVuXCIsXCJGdWxsc2NyZWVuQ29udHJvbC5FeGl0XCI6XCJFeGl0IGZ1bGxzY3JlZW5cIixcIkdlb2xvY2F0ZUNvbnRyb2wuRmluZE15TG9jYXRpb25cIjpcIkZpbmQgbXkgbG9jYXRpb25cIixcIkdlb2xvY2F0ZUNvbnRyb2wuTG9jYXRpb25Ob3RBdmFpbGFibGVcIjpcIkxvY2F0aW9uIG5vdCBhdmFpbGFibGVcIixcIkxvZ29Db250cm9sLlRpdGxlXCI6XCJNYXBib3ggbG9nb1wiLFwiTWFwLlRpdGxlXCI6XCJNYXBcIixcIk5hdmlnYXRpb25Db250cm9sLlJlc2V0QmVhcmluZ1wiOlwiUmVzZXQgYmVhcmluZyB0byBub3J0aFwiLFwiTmF2aWdhdGlvbkNvbnRyb2wuWm9vbUluXCI6XCJab29tIGluXCIsXCJOYXZpZ2F0aW9uQ29udHJvbC5ab29tT3V0XCI6XCJab29tIG91dFwiLFwiU2Nyb2xsWm9vbUJsb2NrZXIuQ3RybE1lc3NhZ2VcIjpcIlVzZSBjdHJsICsgc2Nyb2xsIHRvIHpvb20gdGhlIG1hcFwiLFwiU2Nyb2xsWm9vbUJsb2NrZXIuQ21kTWVzc2FnZVwiOlwiVXNlIOKMmCArIHNjcm9sbCB0byB6b29tIHRoZSBtYXBcIixcIlRvdWNoUGFuQmxvY2tlci5NZXNzYWdlXCI6XCJVc2UgdHdvIGZpbmdlcnMgdG8gbW92ZSB0aGUgbWFwXCJ9LGFuPXtjZW50ZXI6WzAsMF0sem9vbTowLGJlYXJpbmc6MCxwaXRjaDowLG1pblpvb206LTIsbWF4Wm9vbToyMixtaW5QaXRjaDowLG1heFBpdGNoOjg1LGludGVyYWN0aXZlOiEwLHNjcm9sbFpvb206ITAsYm94Wm9vbTohMCxkcmFnUm90YXRlOiEwLGRyYWdQYW46ITAsa2V5Ym9hcmQ6ITAsZG91YmxlQ2xpY2tab29tOiEwLHRvdWNoWm9vbVJvdGF0ZTohMCx0b3VjaFBpdGNoOiEwLGNvb3BlcmF0aXZlR2VzdHVyZXM6ITEscGVyZm9ybWFuY2VNZXRyaWNzQ29sbGVjdGlvbjohMCxiZWFyaW5nU25hcDo3LGNsaWNrVG9sZXJhbmNlOjMscGl0Y2hXaXRoUm90YXRlOiEwLGhhc2g6ITEsYXR0cmlidXRpb25Db250cm9sOiEwLGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6ITEscHJlc2VydmVEcmF3aW5nQnVmZmVyOiExLHRyYWNrUmVzaXplOiEwLG9wdGltaXplRm9yVGVycmFpbjohMCxyZW5kZXJXb3JsZENvcGllczohMCxyZWZyZXNoRXhwaXJlZFRpbGVzOiEwLG1pblRpbGVDYWNoZVNpemU6bnVsbCxtYXhUaWxlQ2FjaGVTaXplOm51bGwsbG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5Olwic2Fucy1zZXJpZlwiLGxvY2FsRm9udEZhbWlseTpudWxsLHRyYW5zZm9ybVJlcXVlc3Q6bnVsbCxhY2Nlc3NUb2tlbjpudWxsLGZhZGVEdXJhdGlvbjozMDAscmVzcGVjdFByZWZlcnNSZWR1Y2VkTW90aW9uOiEwLGNyb3NzU291cmNlQ29sbGlzaW9uczohMH0sbG49e3Nob3dDb21wYXNzOiEwLHNob3dab29tOiEwLHZpc3VhbGl6ZVBpdGNoOiExfTtjbGFzcyBjbntjb25zdHJ1Y3Rvcih0LGksbz0hMSl7dGhpcy5fY2xpY2tUb2xlcmFuY2U9MTAsdGhpcy5lbGVtZW50PWksdGhpcy5tb3VzZVJvdGF0ZT1uZXcgeXIoe2NsaWNrVG9sZXJhbmNlOnQuZHJhZ1JvdGF0ZS5fbW91c2VSb3RhdGUuX2NsaWNrVG9sZXJhbmNlfSksdGhpcy5tYXA9dCxvJiYodGhpcy5tb3VzZVBpdGNoPW5ldyBicih7Y2xpY2tUb2xlcmFuY2U6dC5kcmFnUm90YXRlLl9tb3VzZVBpdGNoLl9jbGlja1RvbGVyYW5jZX0pKSxlLmJpbmRBbGwoW1wibW91c2Vkb3duXCIsXCJtb3VzZW1vdmVcIixcIm1vdXNldXBcIixcInRvdWNoc3RhcnRcIixcInRvdWNobW92ZVwiLFwidG91Y2hlbmRcIixcInJlc2V0XCJdLHRoaXMpLGkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMubW91c2Vkb3duKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy50b3VjaHN0YXJ0LHtwYXNzaXZlOiExfSksaS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy50b3VjaG1vdmUpLGkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy50b3VjaGVuZCksaS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIix0aGlzLnJlc2V0KTt9ZG93bihlLHQpe3RoaXMubW91c2VSb3RhdGUubW91c2Vkb3duKGUsdCksdGhpcy5tb3VzZVBpdGNoJiZ0aGlzLm1vdXNlUGl0Y2gubW91c2Vkb3duKGUsdCksaCgpO31tb3ZlKGUsdCl7Y29uc3QgaT10aGlzLm1hcCxvPXRoaXMubW91c2VSb3RhdGUubW91c2Vtb3ZlV2luZG93KGUsdCkscj1vJiZvLmJlYXJpbmdEZWx0YTtpZihyJiZpLnNldEJlYXJpbmcoaS5nZXRCZWFyaW5nKCkrciksdGhpcy5tb3VzZVBpdGNoKXtjb25zdCBvPXRoaXMubW91c2VQaXRjaC5tb3VzZW1vdmVXaW5kb3coZSx0KSxyPW8mJm8ucGl0Y2hEZWx0YTtyJiZpLnNldFBpdGNoKGkuZ2V0UGl0Y2goKStyKTt9fW9mZigpe2NvbnN0IGU9dGhpcy5lbGVtZW50O2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMubW91c2Vkb3duKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy50b3VjaHN0YXJ0LHtwYXNzaXZlOiExfSksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy50b3VjaG1vdmUpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy50b3VjaGVuZCksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIix0aGlzLnJlc2V0KSx0aGlzLm9mZlRlbXAoKTt9b2ZmVGVtcCgpe3UoKSxlLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5tb3VzZW1vdmUpLGUud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5tb3VzZXVwKTt9bW91c2Vkb3duKHQpe3RoaXMuZG93bihlLmV4dGVuZCh7fSx0LHtjdHJsS2V5OiEwLHByZXZlbnREZWZhdWx0OigpPT50LnByZXZlbnREZWZhdWx0KCl9KSxwKHRoaXMuZWxlbWVudCx0KSksZS53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMubW91c2Vtb3ZlKSxlLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMubW91c2V1cCk7fW1vdXNlbW92ZShlKXt0aGlzLm1vdmUoZSxwKHRoaXMuZWxlbWVudCxlKSk7fW1vdXNldXAoZSl7dGhpcy5tb3VzZVJvdGF0ZS5tb3VzZXVwV2luZG93KGUpLHRoaXMubW91c2VQaXRjaCYmdGhpcy5tb3VzZVBpdGNoLm1vdXNldXBXaW5kb3coZSksdGhpcy5vZmZUZW1wKCk7fXRvdWNoc3RhcnQoZSl7MSE9PWUudGFyZ2V0VG91Y2hlcy5sZW5ndGg/dGhpcy5yZXNldCgpOih0aGlzLl9zdGFydFBvcz10aGlzLl9sYXN0UG9zPW0odGhpcy5lbGVtZW50LGUudGFyZ2V0VG91Y2hlcylbMF0sdGhpcy5kb3duKHt0eXBlOlwibW91c2Vkb3duXCIsYnV0dG9uOjAsY3RybEtleTohMCxwcmV2ZW50RGVmYXVsdDooKT0+ZS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzLl9zdGFydFBvcykpO310b3VjaG1vdmUoZSl7MSE9PWUudGFyZ2V0VG91Y2hlcy5sZW5ndGg/dGhpcy5yZXNldCgpOih0aGlzLl9sYXN0UG9zPW0odGhpcy5lbGVtZW50LGUudGFyZ2V0VG91Y2hlcylbMF0sdGhpcy5tb3ZlKHtwcmV2ZW50RGVmYXVsdDooKT0+ZS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzLl9sYXN0UG9zKSk7fXRvdWNoZW5kKGUpezA9PT1lLnRhcmdldFRvdWNoZXMubGVuZ3RoJiZ0aGlzLl9zdGFydFBvcyYmdGhpcy5fbGFzdFBvcyYmdGhpcy5fc3RhcnRQb3MuZGlzdCh0aGlzLl9sYXN0UG9zKTx0aGlzLl9jbGlja1RvbGVyYW5jZSYmdGhpcy5lbGVtZW50LmNsaWNrKCksdGhpcy5yZXNldCgpO31yZXNldCgpe3RoaXMubW91c2VSb3RhdGUucmVzZXQoKSx0aGlzLm1vdXNlUGl0Y2gmJnRoaXMubW91c2VQaXRjaC5yZXNldCgpLGRlbGV0ZSB0aGlzLl9zdGFydFBvcyxkZWxldGUgdGhpcy5fbGFzdFBvcyx0aGlzLm9mZlRlbXAoKTt9fWNvbnN0IGhuPXtwb3NpdGlvbk9wdGlvbnM6e2VuYWJsZUhpZ2hBY2N1cmFjeTohMSxtYXhpbXVtQWdlOjAsdGltZW91dDo2ZTN9LGZpdEJvdW5kc09wdGlvbnM6e21heFpvb206MTV9LHRyYWNrVXNlckxvY2F0aW9uOiExLHNob3dBY2N1cmFjeUNpcmNsZTohMCxzaG93VXNlckxvY2F0aW9uOiEwLHNob3dVc2VySGVhZGluZzohMX0sdW49e21heFdpZHRoOjEwMCx1bml0OlwibWV0cmljXCJ9LF9uPXtraWxvbWV0ZXI6XCJrbVwiLG1ldGVyOlwibVwiLG1pbGU6XCJtaVwiLGZvb3Q6XCJmdFwiLFwibmF1dGljYWwtbWlsZVwiOlwibm1cIn0sZG49e3ZlcnNpb246ZS52ZXJzaW9uLHN1cHBvcnRlZDppLHNldFJUTFRleHRQbHVnaW46ZS5zZXRSVExUZXh0UGx1Z2luLGdldFJUTFRleHRQbHVnaW5TdGF0dXM6ZS5nZXRSVExUZXh0UGx1Z2luU3RhdHVzLE1hcDpjbGFzcyBleHRlbmRzICRye2NvbnN0cnVjdG9yKHQpe2lmKGUuTGl2ZVBlcmZvcm1hbmNlVXRpbHMubWFyayhlLlBlcmZvcm1hbmNlTWFya2Vycy5jcmVhdGUpLG51bGwhPSh0PWUuZXh0ZW5kKHt9LGFuLHQpKS5taW5ab29tJiZudWxsIT10Lm1heFpvb20mJnQubWluWm9vbT50Lm1heFpvb20pdGhyb3cgbmV3IEVycm9yKFwibWF4Wm9vbSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBtaW5ab29tXCIpO2lmKG51bGwhPXQubWluUGl0Y2gmJm51bGwhPXQubWF4UGl0Y2gmJnQubWluUGl0Y2g+dC5tYXhQaXRjaCl0aHJvdyBuZXcgRXJyb3IoXCJtYXhQaXRjaCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBtaW5QaXRjaFwiKTtpZihudWxsIT10Lm1pblBpdGNoJiZ0Lm1pblBpdGNoPDApdGhyb3cgbmV3IEVycm9yKFwibWluUGl0Y2ggbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMFwiKTtpZihudWxsIT10Lm1heFBpdGNoJiZ0Lm1heFBpdGNoPjg1KXRocm93IG5ldyBFcnJvcihcIm1heFBpdGNoIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDg1XCIpO2lmKHQuYW50aWFsaWFzJiZlLmlzU2FmYXJpV2l0aEFudGlhbGlhc2luZ0J1ZyhlLndpbmRvdykmJih0LmFudGlhbGlhcz0hMSxlLndhcm5PbmNlKFwiQW50aWFsaWFzaW5nIGlzIGRpc2FibGVkIGZvciB0aGlzIFdlYkdMIGNvbnRleHQgdG8gYXZvaWQgYnJvd3NlciBidWc6IGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2lzc3Vlcy8xMTYwOVwiKSksc3VwZXIobmV3IEhvKHQubWluWm9vbSx0Lm1heFpvb20sdC5taW5QaXRjaCx0Lm1heFBpdGNoLHQucmVuZGVyV29ybGRDb3BpZXMpLHQpLHRoaXMuX2ludGVyYWN0aXZlPXQuaW50ZXJhY3RpdmUsdGhpcy5fbWluVGlsZUNhY2hlU2l6ZT10Lm1pblRpbGVDYWNoZVNpemUsdGhpcy5fbWF4VGlsZUNhY2hlU2l6ZT10Lm1heFRpbGVDYWNoZVNpemUsdGhpcy5fZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdD10LmZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQsdGhpcy5fcHJlc2VydmVEcmF3aW5nQnVmZmVyPXQucHJlc2VydmVEcmF3aW5nQnVmZmVyLHRoaXMuX2FudGlhbGlhcz10LmFudGlhbGlhcyx0aGlzLl91c2VXZWJHTDI9dC51c2VXZWJHTDIsdGhpcy5fdHJhY2tSZXNpemU9dC50cmFja1Jlc2l6ZSx0aGlzLl9iZWFyaW5nU25hcD10LmJlYXJpbmdTbmFwLHRoaXMuX3JlZnJlc2hFeHBpcmVkVGlsZXM9dC5yZWZyZXNoRXhwaXJlZFRpbGVzLHRoaXMuX2ZhZGVEdXJhdGlvbj10LmZhZGVEdXJhdGlvbix0aGlzLl9pc0luaXRpYWxMb2FkPSEwLHRoaXMuX2Nyb3NzU291cmNlQ29sbGlzaW9ucz10LmNyb3NzU291cmNlQ29sbGlzaW9ucyx0aGlzLl9jb2xsZWN0UmVzb3VyY2VUaW1pbmc9dC5jb2xsZWN0UmVzb3VyY2VUaW1pbmcsdGhpcy5fb3B0aW1pemVGb3JUZXJyYWluPXQub3B0aW1pemVGb3JUZXJyYWluLHRoaXMuX2xhbmd1YWdlPXRoaXMuX3BhcnNlTGFuZ3VhZ2UodC5sYW5ndWFnZSksdGhpcy5fd29ybGR2aWV3PXQud29ybGR2aWV3LHRoaXMuX3JlbmRlclRhc2tRdWV1ZT1uZXcgS3IsdGhpcy5fZG9tUmVuZGVyVGFza1F1ZXVlPW5ldyBLcix0aGlzLl9jb250cm9scz1bXSx0aGlzLl9tYXJrZXJzPVtdLHRoaXMuX3BvcHVwcz1bXSx0aGlzLl9tYXBJZD1lLnVuaXF1ZUlkKCksdGhpcy5fbG9jYWxlPWUuZXh0ZW5kKHt9LHNuLHQubG9jYWxlKSx0aGlzLl9jbGlja1RvbGVyYW5jZT10LmNsaWNrVG9sZXJhbmNlLHRoaXMuX2Nvb3BlcmF0aXZlR2VzdHVyZXM9dC5jb29wZXJhdGl2ZUdlc3R1cmVzLHRoaXMuX3BlcmZvcm1hbmNlTWV0cmljc0NvbGxlY3Rpb249dC5wZXJmb3JtYW5jZU1ldHJpY3NDb2xsZWN0aW9uLHRoaXMuX2NvbnRhaW5lcldpZHRoPTAsdGhpcy5fY29udGFpbmVySGVpZ2h0PTAsdGhpcy5fYXZlcmFnZUVsZXZhdGlvbkxhc3RTYW1wbGVkQXQ9LTEvMCx0aGlzLl9hdmVyYWdlRWxldmF0aW9uRXhhZ2dlcmF0aW9uPTAsdGhpcy5fYXZlcmFnZUVsZXZhdGlvbj1uZXcgbm4oMCksdGhpcy5faW50ZXJhY3Rpb25SYW5nZT1bMS8wLC0xLzBdLHRoaXMuX3Zpc2liaWxpdHlIaWRkZW49MCx0aGlzLl91c2VFeHBsaWNpdFByb2plY3Rpb249ITEsdGhpcy5fcmVxdWVzdE1hbmFnZXI9bmV3IGUuUmVxdWVzdE1hbmFnZXIodC50cmFuc2Zvcm1SZXF1ZXN0LHQuYWNjZXNzVG9rZW4sdC50ZXN0TW9kZSksdGhpcy5fc2lsZW5jZUF1dGhFcnJvcnM9ISF0LnRlc3RNb2RlLFwic3RyaW5nXCI9PXR5cGVvZiB0LmNvbnRhaW5lcil7aWYodGhpcy5fY29udGFpbmVyPWUud2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuY29udGFpbmVyKSwhdGhpcy5fY29udGFpbmVyKXRocm93IG5ldyBFcnJvcihgQ29udGFpbmVyICcke3QuY29udGFpbmVyfScgbm90IGZvdW5kLmApfWVsc2Uge2lmKCEodC5jb250YWluZXIgaW5zdGFuY2VvZiBlLndpbmRvdy5IVE1MRWxlbWVudCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0eXBlOiAnY29udGFpbmVyJyBtdXN0IGJlIGEgU3RyaW5nIG9yIEhUTUxFbGVtZW50LlwiKTt0aGlzLl9jb250YWluZXI9dC5jb250YWluZXI7fWlmKHRoaXMuX2NvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aD4wJiZlLndhcm5PbmNlKFwiVGhlIG1hcCBjb250YWluZXIgZWxlbWVudCBzaG91bGQgYmUgZW1wdHksIG90aGVyd2lzZSB0aGUgbWFwJ3MgaW50ZXJhY3Rpdml0eSB3aWxsIGJlIG5lZ2F0aXZlbHkgaW1wYWN0ZWQuIElmIHlvdSB3YW50IHRvIGRpc3BsYXkgYSBtZXNzYWdlIHdoZW4gV2ViR0wgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBNYXBib3ggR0wgU3VwcG9ydGVkIHBsdWdpbiBpbnN0ZWFkLlwiKSx0Lm1heEJvdW5kcyYmdGhpcy5zZXRNYXhCb3VuZHModC5tYXhCb3VuZHMpLGUuYmluZEFsbChbXCJfb25XaW5kb3dPbmxpbmVcIixcIl9vbldpbmRvd1Jlc2l6ZVwiLFwiX29uVmlzaWJpbGl0eUNoYW5nZVwiLFwiX29uTWFwU2Nyb2xsXCIsXCJfY29udGV4dExvc3RcIixcIl9jb250ZXh0UmVzdG9yZWRcIl0sdGhpcyksdGhpcy5fc2V0dXBDb250YWluZXIoKSx0aGlzLl9zZXR1cFBhaW50ZXIoKSx2b2lkIDA9PT10aGlzLnBhaW50ZXIpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgV2ViR0wuXCIpO3RoaXMub24oXCJtb3ZlXCIsKCgpPT50aGlzLl91cGRhdGUoITEpKSksdGhpcy5vbihcIm1vdmVlbmRcIiwoKCk9PnRoaXMuX3VwZGF0ZSghMSkpKSx0aGlzLm9uKFwiem9vbVwiLCgoKT0+dGhpcy5fdXBkYXRlKCEwKSkpLHZvaWQgMCE9PWUud2luZG93JiYoZS53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHRoaXMuX29uV2luZG93T25saW5lLCExKSxlLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fb25XaW5kb3dSZXNpemUsITEpLGUud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLHRoaXMuX29uV2luZG93UmVzaXplLCExKSxlLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZVwiLHRoaXMuX29uV2luZG93UmVzaXplLCExKSxlLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZSwhMSkpLHRoaXMuaGFuZGxlcnM9bmV3IFhyKHRoaXMsdCksdGhpcy5fbG9jYWxGb250RmFtaWx5PXQubG9jYWxGb250RmFtaWx5LHRoaXMuX2xvY2FsSWRlb2dyYXBoRm9udEZhbWlseT10LmxvY2FsSWRlb2dyYXBoRm9udEZhbWlseSx0LnN0eWxlJiZ0aGlzLnNldFN0eWxlKHQuc3R5bGUse2xvY2FsRm9udEZhbWlseTp0aGlzLl9sb2NhbEZvbnRGYW1pbHksbG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5OnRoaXMuX2xvY2FsSWRlb2dyYXBoRm9udEZhbWlseX0pLHQucHJvamVjdGlvbiYmdGhpcy5zZXRQcm9qZWN0aW9uKHQucHJvamVjdGlvbiksdGhpcy5faGFzaD10Lmhhc2gmJm5ldyBLbyhcInN0cmluZ1wiPT10eXBlb2YgdC5oYXNoJiZ0Lmhhc2h8fHZvaWQgMCkuYWRkVG8odGhpcyksdGhpcy5faGFzaCYmdGhpcy5faGFzaC5fb25IYXNoQ2hhbmdlKCl8fCh0aGlzLmp1bXBUbyh7Y2VudGVyOnQuY2VudGVyLHpvb206dC56b29tLGJlYXJpbmc6dC5iZWFyaW5nLHBpdGNoOnQucGl0Y2h9KSx0LmJvdW5kcyYmKHRoaXMucmVzaXplKCksdGhpcy5maXRCb3VuZHModC5ib3VuZHMsZS5leHRlbmQoe30sdC5maXRCb3VuZHNPcHRpb25zLHtkdXJhdGlvbjowfSkpKSksdGhpcy5yZXNpemUoKSx0LmF0dHJpYnV0aW9uQ29udHJvbCYmdGhpcy5hZGRDb250cm9sKG5ldyBIcih7Y3VzdG9tQXR0cmlidXRpb246dC5jdXN0b21BdHRyaWJ1dGlvbn0pKSx0aGlzLl9sb2dvQ29udHJvbD1uZXcgWXIsdGhpcy5hZGRDb250cm9sKHRoaXMuX2xvZ29Db250cm9sLHQubG9nb1Bvc2l0aW9uKSx0aGlzLm9uKFwic3R5bGUubG9hZFwiLCgoKT0+e3RoaXMudHJhbnNmb3JtLnVubW9kaWZpZWQmJnRoaXMuanVtcFRvKHRoaXMuc3R5bGUuc3R5bGVzaGVldCk7fSkpLHRoaXMub24oXCJkYXRhXCIsKHQ9Pnt0aGlzLl91cGRhdGUoXCJzdHlsZVwiPT09dC5kYXRhVHlwZSksdGhpcy5maXJlKG5ldyBlLkV2ZW50KGAke3QuZGF0YVR5cGV9ZGF0YWAsdCkpO30pKSx0aGlzLm9uKFwiZGF0YWxvYWRpbmdcIiwodD0+e3RoaXMuZmlyZShuZXcgZS5FdmVudChgJHt0LmRhdGFUeXBlfWRhdGFsb2FkaW5nYCx0KSk7fSkpO31fZ2V0TWFwSWQoKXtyZXR1cm4gdGhpcy5fbWFwSWR9YWRkQ29udHJvbCh0LGkpe2lmKHZvaWQgMD09PWkmJihpPXQuZ2V0RGVmYXVsdFBvc2l0aW9uP3QuZ2V0RGVmYXVsdFBvc2l0aW9uKCk6XCJ0b3AtcmlnaHRcIiksIXR8fCF0Lm9uQWRkKXJldHVybiB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHRvIG1hcC5hZGRDb250cm9sKCkuIEFyZ3VtZW50IG11c3QgYmUgYSBjb250cm9sIHdpdGggb25BZGQgYW5kIG9uUmVtb3ZlIG1ldGhvZHMuXCIpKSk7Y29uc3Qgbz10Lm9uQWRkKHRoaXMpO3RoaXMuX2NvbnRyb2xzLnB1c2godCk7Y29uc3Qgcj10aGlzLl9jb250cm9sUG9zaXRpb25zW2ldO3JldHVybiAtMSE9PWkuaW5kZXhPZihcImJvdHRvbVwiKT9yLmluc2VydEJlZm9yZShvLHIuZmlyc3RDaGlsZCk6ci5hcHBlbmRDaGlsZChvKSx0aGlzfXJlbW92ZUNvbnRyb2wodCl7aWYoIXR8fCF0Lm9uUmVtb3ZlKXJldHVybiB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHRvIG1hcC5yZW1vdmVDb250cm9sKCkuIEFyZ3VtZW50IG11c3QgYmUgYSBjb250cm9sIHdpdGggb25BZGQgYW5kIG9uUmVtb3ZlIG1ldGhvZHMuXCIpKSk7Y29uc3QgaT10aGlzLl9jb250cm9scy5pbmRleE9mKHQpO3JldHVybiBpPi0xJiZ0aGlzLl9jb250cm9scy5zcGxpY2UoaSwxKSx0Lm9uUmVtb3ZlKHRoaXMpLHRoaXN9aGFzQ29udHJvbChlKXtyZXR1cm4gdGhpcy5fY29udHJvbHMuaW5kZXhPZihlKT4tMX1nZXRDb250YWluZXIoKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyfWdldENhbnZhc0NvbnRhaW5lcigpe3JldHVybiB0aGlzLl9jYW52YXNDb250YWluZXJ9Z2V0Q2FudmFzKCl7cmV0dXJuIHRoaXMuX2NhbnZhc31yZXNpemUodCl7aWYodGhpcy5fdXBkYXRlQ29udGFpbmVyRGltZW5zaW9ucygpLHRoaXMuX2NvbnRhaW5lcldpZHRoPT09dGhpcy50cmFuc2Zvcm0ud2lkdGgmJnRoaXMuX2NvbnRhaW5lckhlaWdodD09PXRoaXMudHJhbnNmb3JtLmhlaWdodClyZXR1cm4gdGhpczt0aGlzLl9yZXNpemVDYW52YXModGhpcy5fY29udGFpbmVyV2lkdGgsdGhpcy5fY29udGFpbmVySGVpZ2h0KSx0aGlzLnRyYW5zZm9ybS5yZXNpemUodGhpcy5fY29udGFpbmVyV2lkdGgsdGhpcy5fY29udGFpbmVySGVpZ2h0KSx0aGlzLnBhaW50ZXIucmVzaXplKE1hdGguY2VpbCh0aGlzLl9jb250YWluZXJXaWR0aCksTWF0aC5jZWlsKHRoaXMuX2NvbnRhaW5lckhlaWdodCkpO2NvbnN0IGk9IXRoaXMuX21vdmluZztyZXR1cm4gaSYmdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwibW92ZXN0YXJ0XCIsdCkpLmZpcmUobmV3IGUuRXZlbnQoXCJtb3ZlXCIsdCkpLHRoaXMuZmlyZShuZXcgZS5FdmVudChcInJlc2l6ZVwiLHQpKSxpJiZ0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJtb3ZlZW5kXCIsdCkpLHRoaXN9Z2V0Qm91bmRzKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLmdldEJvdW5kcygpfWdldE1heEJvdW5kcygpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5nZXRNYXhCb3VuZHMoKXx8bnVsbH1zZXRNYXhCb3VuZHModCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnNldE1heEJvdW5kcyhlLkxuZ0xhdEJvdW5kcy5jb252ZXJ0KHQpKSx0aGlzLl91cGRhdGUoKX1zZXRNaW5ab29tKHQpe2lmKCh0PW51bGw9PXQ/LTI6dCk+PS0yJiZ0PD10aGlzLnRyYW5zZm9ybS5tYXhab29tKXJldHVybiB0aGlzLnRyYW5zZm9ybS5taW5ab29tPXQsdGhpcy5fdXBkYXRlKCksdGhpcy5nZXRab29tKCk8dD90aGlzLnNldFpvb20odCk6dGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiem9vbXN0YXJ0XCIpKS5maXJlKG5ldyBlLkV2ZW50KFwiem9vbVwiKSkuZmlyZShuZXcgZS5FdmVudChcInpvb21lbmRcIikpLHRoaXM7dGhyb3cgbmV3IEVycm9yKFwibWluWm9vbSBtdXN0IGJlIGJldHdlZW4gLTIgYW5kIHRoZSBjdXJyZW50IG1heFpvb20sIGluY2x1c2l2ZVwiKX1nZXRNaW5ab29tKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLm1pblpvb219c2V0TWF4Wm9vbSh0KXtpZigodD1udWxsPT10PzIyOnQpPj10aGlzLnRyYW5zZm9ybS5taW5ab29tKXJldHVybiB0aGlzLnRyYW5zZm9ybS5tYXhab29tPXQsdGhpcy5fdXBkYXRlKCksdGhpcy5nZXRab29tKCk+dD90aGlzLnNldFpvb20odCk6dGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiem9vbXN0YXJ0XCIpKS5maXJlKG5ldyBlLkV2ZW50KFwiem9vbVwiKSkuZmlyZShuZXcgZS5FdmVudChcInpvb21lbmRcIikpLHRoaXM7dGhyb3cgbmV3IEVycm9yKFwibWF4Wm9vbSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB0aGUgY3VycmVudCBtaW5ab29tXCIpfWdldE1heFpvb20oKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0ubWF4Wm9vbX1zZXRNaW5QaXRjaCh0KXtpZigodD1udWxsPT10PzA6dCk8MCl0aHJvdyBuZXcgRXJyb3IoXCJtaW5QaXRjaCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAwXCIpO2lmKHQ+PTAmJnQ8PXRoaXMudHJhbnNmb3JtLm1heFBpdGNoKXJldHVybiB0aGlzLnRyYW5zZm9ybS5taW5QaXRjaD10LHRoaXMuX3VwZGF0ZSgpLHRoaXMuZ2V0UGl0Y2goKTx0P3RoaXMuc2V0UGl0Y2godCk6dGhpcy5maXJlKG5ldyBlLkV2ZW50KFwicGl0Y2hzdGFydFwiKSkuZmlyZShuZXcgZS5FdmVudChcInBpdGNoXCIpKS5maXJlKG5ldyBlLkV2ZW50KFwicGl0Y2hlbmRcIikpLHRoaXM7dGhyb3cgbmV3IEVycm9yKFwibWluUGl0Y2ggbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIHRoZSBjdXJyZW50IG1heFBpdGNoLCBpbmNsdXNpdmVcIil9Z2V0TWluUGl0Y2goKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0ubWluUGl0Y2h9c2V0TWF4UGl0Y2godCl7aWYoKHQ9bnVsbD09dD84NTp0KT44NSl0aHJvdyBuZXcgRXJyb3IoXCJtYXhQaXRjaCBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byA4NVwiKTtpZih0Pj10aGlzLnRyYW5zZm9ybS5taW5QaXRjaClyZXR1cm4gdGhpcy50cmFuc2Zvcm0ubWF4UGl0Y2g9dCx0aGlzLl91cGRhdGUoKSx0aGlzLmdldFBpdGNoKCk+dD90aGlzLnNldFBpdGNoKHQpOnRoaXMuZmlyZShuZXcgZS5FdmVudChcInBpdGNoc3RhcnRcIikpLmZpcmUobmV3IGUuRXZlbnQoXCJwaXRjaFwiKSkuZmlyZShuZXcgZS5FdmVudChcInBpdGNoZW5kXCIpKSx0aGlzO3Rocm93IG5ldyBFcnJvcihcIm1heFBpdGNoIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIG1pblBpdGNoXCIpfWdldE1heFBpdGNoKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLm1heFBpdGNofWdldFJlbmRlcldvcmxkQ29waWVzKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnJlbmRlcldvcmxkQ29waWVzfXNldFJlbmRlcldvcmxkQ29waWVzKGUpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5yZW5kZXJXb3JsZENvcGllcz1lLHRoaXMudHJhbnNmb3JtLnJlbmRlcldvcmxkQ29waWVzfHx0aGlzLl9mb3JjZU1hcmtlckFuZFBvcHVwVXBkYXRlKCEwKSx0aGlzLl91cGRhdGUoKX1nZXRMYW5ndWFnZSgpe3JldHVybiB0aGlzLl9sYW5ndWFnZX1fcGFyc2VMYW5ndWFnZSh0KXtyZXR1cm4gXCJhdXRvXCI9PT10P2Uud2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZTpBcnJheS5pc0FycmF5KHQpPzA9PT10Lmxlbmd0aD92b2lkIDA6dC5tYXAoKHQ9PlwiYXV0b1wiPT09dD9lLndpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2U6dCkpOnR9c2V0TGFuZ3VhZ2UoZSl7Y29uc3QgdD10aGlzLl9wYXJzZUxhbmd1YWdlKGUpO2lmKCF0aGlzLnN0eWxlfHx0PT09dGhpcy5fbGFuZ3VhZ2UpcmV0dXJuIHRoaXM7dGhpcy5fbGFuZ3VhZ2U9dCx0aGlzLnN0eWxlLl9yZWxvYWRTb3VyY2VzKCk7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fY29udHJvbHMpZS5fc2V0TGFuZ3VhZ2UmJmUuX3NldExhbmd1YWdlKHRoaXMuX2xhbmd1YWdlKTtyZXR1cm4gdGhpc31nZXRXb3JsZHZpZXcoKXtyZXR1cm4gdGhpcy5fd29ybGR2aWV3fXNldFdvcmxkdmlldyhlKXtyZXR1cm4gdGhpcy5zdHlsZSYmZSE9PXRoaXMuX3dvcmxkdmlldz8odGhpcy5fd29ybGR2aWV3PWUsdGhpcy5zdHlsZS5fcmVsb2FkU291cmNlcygpLHRoaXMpOnRoaXN9Z2V0UHJvamVjdGlvbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5tZXJjYXRvckZyb21UcmFuc2l0aW9uP3tuYW1lOlwiZ2xvYmVcIixjZW50ZXI6WzAsMF19OnRoaXMudHJhbnNmb3JtLmdldFByb2plY3Rpb24oKX1fc2hvd2luZ0dsb2JlKCl7cmV0dXJuIFwiZ2xvYmVcIj09PXRoaXMudHJhbnNmb3JtLnByb2plY3Rpb24ubmFtZX1zZXRQcm9qZWN0aW9uKGUpe3JldHVybiB0aGlzLl9sYXp5SW5pdEVtcHR5U3R5bGUoKSxlP1wic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT17bmFtZTplfSk6ZT1udWxsLHRoaXMuX3VzZUV4cGxpY2l0UHJvamVjdGlvbj0hIWUsdGhpcy5fcHJpb3JpdGl6ZUFuZFVwZGF0ZVByb2plY3Rpb24oZSx0aGlzLnN0eWxlLnN0eWxlc2hlZXQ/dGhpcy5zdHlsZS5zdHlsZXNoZWV0LnByb2plY3Rpb246bnVsbCl9X3VwZGF0ZVByb2plY3Rpb25UcmFuc2l0aW9uKCl7aWYoXCJnbG9iZVwiIT09dGhpcy5nZXRQcm9qZWN0aW9uKCkubmFtZSlyZXR1cm47Y29uc3QgdD10aGlzLnRyYW5zZm9ybSxpPXQucHJvamVjdGlvbi5uYW1lO2xldCBvO1wiZ2xvYmVcIj09PWkmJnQuem9vbT49ZS5HTE9CRV9aT09NX1RIUkVTSE9MRF9NQVg/KHQuc2V0TWVyY2F0b3JGcm9tVHJhbnNpdGlvbigpLG89ITApOlwibWVyY2F0b3JcIj09PWkmJnQuem9vbTxlLkdMT0JFX1pPT01fVEhSRVNIT0xEX01BWCYmKHQuc2V0UHJvamVjdGlvbih7bmFtZTpcImdsb2JlXCJ9KSxvPSEwKSxvJiYodGhpcy5zdHlsZS5hcHBseVByb2plY3Rpb25VcGRhdGUoKSx0aGlzLnN0eWxlLl9mb3JjZVN5bWJvbExheWVyVXBkYXRlKCkpO31fcHJpb3JpdGl6ZUFuZFVwZGF0ZVByb2plY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fdXBkYXRlUHJvamVjdGlvbihlfHx0fHx7bmFtZTpcIm1lcmNhdG9yXCJ9KX1fdXBkYXRlUHJvamVjdGlvbih0KXtsZXQgaTtpZihpPVwiZ2xvYmVcIj09PXQubmFtZSYmdGhpcy50cmFuc2Zvcm0uem9vbT49ZS5HTE9CRV9aT09NX1RIUkVTSE9MRF9NQVg/dGhpcy50cmFuc2Zvcm0uc2V0TWVyY2F0b3JGcm9tVHJhbnNpdGlvbigpOnRoaXMudHJhbnNmb3JtLnNldFByb2plY3Rpb24odCksdGhpcy5zdHlsZS5hcHBseVByb2plY3Rpb25VcGRhdGUoKSxpKXt0aGlzLnBhaW50ZXIuY2xlYXJCYWNrZ3JvdW5kVGlsZXMoKTtmb3IoY29uc3QgZSBpbiB0aGlzLnN0eWxlLl9zb3VyY2VDYWNoZXMpdGhpcy5zdHlsZS5fc291cmNlQ2FjaGVzW2VdLmNsZWFyVGlsZXMoKTt0aGlzLl91cGRhdGUoITApLHRoaXMuX2ZvcmNlTWFya2VyQW5kUG9wdXBVcGRhdGUoITApO31yZXR1cm4gdGhpc31wcm9qZWN0KHQpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5sb2NhdGlvblBvaW50M0QoZS5MbmdMYXQuY29udmVydCh0KSl9dW5wcm9qZWN0KHQpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5wb2ludExvY2F0aW9uM0QoZS5Qb2ludC5jb252ZXJ0KHQpKX1pc01vdmluZygpe3JldHVybiB0aGlzLl9tb3Zpbmd8fHRoaXMuaGFuZGxlcnMmJnRoaXMuaGFuZGxlcnMuaXNNb3ZpbmcoKXx8ITF9aXNab29taW5nKCl7cmV0dXJuIHRoaXMuX3pvb21pbmd8fHRoaXMuaGFuZGxlcnMmJnRoaXMuaGFuZGxlcnMuaXNab29taW5nKCl8fCExfWlzUm90YXRpbmcoKXtyZXR1cm4gdGhpcy5fcm90YXRpbmd8fHRoaXMuaGFuZGxlcnMmJnRoaXMuaGFuZGxlcnMuaXNSb3RhdGluZygpfHwhMX1faXNEcmFnZ2luZygpe3JldHVybiB0aGlzLmhhbmRsZXJzJiZ0aGlzLmhhbmRsZXJzLl9pc0RyYWdnaW5nKCl8fCExfV9jcmVhdGVEZWxlZ2F0ZWRMaXN0ZW5lcihlLHQsaSl7aWYoXCJtb3VzZWVudGVyXCI9PT1lfHxcIm1vdXNlb3ZlclwiPT09ZSl7bGV0IG89ITE7Y29uc3Qgcj1yPT57Y29uc3Qgbj10LmZpbHRlcigoZT0+dGhpcy5nZXRMYXllcihlKSkpLHM9bi5sZW5ndGg/dGhpcy5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoci5wb2ludCx7bGF5ZXJzOm59KTpbXTtzLmxlbmd0aD9vfHwobz0hMCxpLmNhbGwodGhpcyxuZXcgYXIoZSx0aGlzLHIub3JpZ2luYWxFdmVudCx7ZmVhdHVyZXM6c30pKSk6bz0hMTt9LG49KCk9PntvPSExO307cmV0dXJuIHtsYXllcnM6bmV3IFNldCh0KSxsaXN0ZW5lcjppLGRlbGVnYXRlczp7bW91c2Vtb3ZlOnIsbW91c2VvdXQ6bn19fWlmKFwibW91c2VsZWF2ZVwiPT09ZXx8XCJtb3VzZW91dFwiPT09ZSl7bGV0IG89ITE7Y29uc3Qgcj1yPT57Y29uc3Qgbj10LmZpbHRlcigoZT0+dGhpcy5nZXRMYXllcihlKSkpOyhuLmxlbmd0aD90aGlzLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhyLnBvaW50LHtsYXllcnM6bn0pOltdKS5sZW5ndGg/bz0hMDpvJiYobz0hMSxpLmNhbGwodGhpcyxuZXcgYXIoZSx0aGlzLHIub3JpZ2luYWxFdmVudCkpKTt9LG49dD0+e28mJihvPSExLGkuY2FsbCh0aGlzLG5ldyBhcihlLHRoaXMsdC5vcmlnaW5hbEV2ZW50KSkpO307cmV0dXJuIHtsYXllcnM6bmV3IFNldCh0KSxsaXN0ZW5lcjppLGRlbGVnYXRlczp7bW91c2Vtb3ZlOnIsbW91c2VvdXQ6bn19fXtjb25zdCBvPWU9Pntjb25zdCBvPXQuZmlsdGVyKChlPT50aGlzLmdldExheWVyKGUpKSkscj1vLmxlbmd0aD90aGlzLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50LHtsYXllcnM6b30pOltdO3IubGVuZ3RoJiYoZS5mZWF0dXJlcz1yLGkuY2FsbCh0aGlzLGUpLGRlbGV0ZSBlLmZlYXR1cmVzKTt9O3JldHVybiB7bGF5ZXJzOm5ldyBTZXQodCksbGlzdGVuZXI6aSxkZWxlZ2F0ZXM6e1tlXTpvfX19fW9uKGUsdCxpKXtpZih2b2lkIDA9PT1pKXJldHVybiBzdXBlci5vbihlLHQpO0FycmF5LmlzQXJyYXkodCl8fCh0PVt0XSk7Y29uc3Qgbz10aGlzLl9jcmVhdGVEZWxlZ2F0ZWRMaXN0ZW5lcihlLHQsaSk7dGhpcy5fZGVsZWdhdGVkTGlzdGVuZXJzPXRoaXMuX2RlbGVnYXRlZExpc3RlbmVyc3x8e30sdGhpcy5fZGVsZWdhdGVkTGlzdGVuZXJzW2VdPXRoaXMuX2RlbGVnYXRlZExpc3RlbmVyc1tlXXx8W10sdGhpcy5fZGVsZWdhdGVkTGlzdGVuZXJzW2VdLnB1c2gobyk7Zm9yKGNvbnN0IGUgaW4gby5kZWxlZ2F0ZXMpdGhpcy5vbihlLG8uZGVsZWdhdGVzW2VdKTtyZXR1cm4gdGhpc31vbmNlKGUsdCxpKXtpZih2b2lkIDA9PT1pKXJldHVybiBzdXBlci5vbmNlKGUsdCk7QXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKTtjb25zdCBvPXRoaXMuX2NyZWF0ZURlbGVnYXRlZExpc3RlbmVyKGUsdCxpKTtmb3IoY29uc3QgZSBpbiBvLmRlbGVnYXRlcyl0aGlzLm9uY2UoZSxvLmRlbGVnYXRlc1tlXSk7cmV0dXJuIHRoaXN9b2ZmKGUsdCxpKXtpZih2b2lkIDA9PT1pKXJldHVybiBzdXBlci5vZmYoZSx0KTt0PW5ldyBTZXQoQXJyYXkuaXNBcnJheSh0KT90Olt0XSk7Y29uc3Qgbz0oZSx0KT0+e2lmKGUuc2l6ZSE9PXQuc2l6ZSlyZXR1cm4gITE7Zm9yKGNvbnN0IGkgb2YgZSlpZighdC5oYXMoaSkpcmV0dXJuICExO3JldHVybiAhMH0scj10aGlzLl9kZWxlZ2F0ZWRMaXN0ZW5lcnM/dGhpcy5fZGVsZWdhdGVkTGlzdGVuZXJzW2VdOnZvaWQgMDtyZXR1cm4gciYmKGU9Pntmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKyl7Y29uc3Qgbj1lW3JdO2lmKG4ubGlzdGVuZXI9PT1pJiZvKG4ubGF5ZXJzLHQpKXtmb3IoY29uc3QgZSBpbiBuLmRlbGVnYXRlcyl0aGlzLm9mZihlLG4uZGVsZWdhdGVzW2VdKTtyZXR1cm4gZS5zcGxpY2UociwxKSx0aGlzfX19KShyKSx0aGlzfXF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyh0LGkpe3JldHVybiB0aGlzLnN0eWxlPyh2b2lkIDAhPT1pfHx2b2lkIDA9PT10fHx0IGluc3RhbmNlb2YgZS5Qb2ludHx8QXJyYXkuaXNBcnJheSh0KXx8KGk9dCx0PXZvaWQgMCksdGhpcy5zdHlsZS5xdWVyeVJlbmRlcmVkRmVhdHVyZXModD10fHxbWzAsMF0sW3RoaXMudHJhbnNmb3JtLndpZHRoLHRoaXMudHJhbnNmb3JtLmhlaWdodF1dLGk9aXx8e30sdGhpcy50cmFuc2Zvcm0pKTpbXX1xdWVyeVNvdXJjZUZlYXR1cmVzKGUsdCl7cmV0dXJuIHRoaXMuc3R5bGUucXVlcnlTb3VyY2VGZWF0dXJlcyhlLHQpfWlzUG9pbnRPblN1cmZhY2UodCl7Y29uc3R7bmFtZTppfT10aGlzLnRyYW5zZm9ybS5wcm9qZWN0aW9uO3JldHVybiBcImdsb2JlXCIhPT1pJiZcIm1lcmNhdG9yXCIhPT1pJiZlLndhcm5PbmNlKGAke2l9IHByb2plY3Rpb24gZG9lcyBub3Qgc3VwcG9ydCBpc1BvaW50T25TdXJmYWNlLCB0aGlzIEFQSSBtYXkgYmVoYXZlIHVuZXhwZWN0ZWRseS5gKSx0aGlzLnRyYW5zZm9ybS5pc1BvaW50T25TdXJmYWNlKGUuUG9pbnQuY29udmVydCh0KSl9c2V0U3R5bGUodCxpKXtyZXR1cm4gITEhPT0oaT1lLmV4dGVuZCh7fSx7bG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5OnRoaXMuX2xvY2FsSWRlb2dyYXBoRm9udEZhbWlseSxsb2NhbEZvbnRGYW1pbHk6dGhpcy5fbG9jYWxGb250RmFtaWx5fSxpKSkuZGlmZiYmaS5sb2NhbElkZW9ncmFwaEZvbnRGYW1pbHk9PT10aGlzLl9sb2NhbElkZW9ncmFwaEZvbnRGYW1pbHkmJmkubG9jYWxGb250RmFtaWx5PT09dGhpcy5fbG9jYWxGb250RmFtaWx5JiZ0aGlzLnN0eWxlJiZ0Pyh0aGlzLl9kaWZmU3R5bGUodCxpKSx0aGlzKToodGhpcy5fbG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5PWkubG9jYWxJZGVvZ3JhcGhGb250RmFtaWx5LHRoaXMuX2xvY2FsRm9udEZhbWlseT1pLmxvY2FsRm9udEZhbWlseSx0aGlzLl91cGRhdGVTdHlsZSh0LGkpKX1fZ2V0VUlTdHJpbmcoZSl7Y29uc3QgdD10aGlzLl9sb2NhbGVbZV07aWYobnVsbD09dCl0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVUkgc3RyaW5nICcke2V9J2ApO3JldHVybiB0fV91cGRhdGVTdHlsZShlLHQpe3JldHVybiB0aGlzLnN0eWxlJiYodGhpcy5zdHlsZS5zZXRFdmVudGVkUGFyZW50KG51bGwpLHRoaXMuc3R5bGUuX3JlbW92ZSgpLHRoaXMuc3R5bGU9dm9pZCAwKSxlJiYodGhpcy5zdHlsZT1uZXcgS3QodGhpcyx0fHx7fSksdGhpcy5zdHlsZS5zZXRFdmVudGVkUGFyZW50KHRoaXMse3N0eWxlOnRoaXMuc3R5bGV9KSxcInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLnN0eWxlLmxvYWRVUkwoZSk6dGhpcy5zdHlsZS5sb2FkSlNPTihlKSksdGhpcy5fdXBkYXRlVGVycmFpbigpLHRoaXN9X2xhenlJbml0RW1wdHlTdHlsZSgpe3RoaXMuc3R5bGV8fCh0aGlzLnN0eWxlPW5ldyBLdCh0aGlzLHt9KSx0aGlzLnN0eWxlLnNldEV2ZW50ZWRQYXJlbnQodGhpcyx7c3R5bGU6dGhpcy5zdHlsZX0pLHRoaXMuc3R5bGUubG9hZEVtcHR5KCkpO31fZGlmZlN0eWxlKHQsaSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe2NvbnN0IG89dGhpcy5fcmVxdWVzdE1hbmFnZXIubm9ybWFsaXplU3R5bGVVUkwodCkscj10aGlzLl9yZXF1ZXN0TWFuYWdlci50cmFuc2Zvcm1SZXF1ZXN0KG8sZS5SZXNvdXJjZVR5cGUuU3R5bGUpO2UuZ2V0SlNPTihyLCgodCxvKT0+e3Q/dGhpcy5maXJlKG5ldyBlLkVycm9yRXZlbnQodCkpOm8mJnRoaXMuX3VwZGF0ZURpZmYobyxpKTt9KSk7fWVsc2UgXCJvYmplY3RcIj09dHlwZW9mIHQmJnRoaXMuX3VwZGF0ZURpZmYodCxpKTt9X3VwZGF0ZURpZmYodCxpKXt0cnl7dGhpcy5zdHlsZS5zZXRTdGF0ZSh0KSYmdGhpcy5fdXBkYXRlKCEwKTt9Y2F0Y2gobyl7ZS53YXJuT25jZShgVW5hYmxlIHRvIHBlcmZvcm0gc3R5bGUgZGlmZjogJHtvLm1lc3NhZ2V8fG8uZXJyb3J8fG99LiAgUmVidWlsZGluZyB0aGUgc3R5bGUgZnJvbSBzY3JhdGNoLmApLHRoaXMuX3VwZGF0ZVN0eWxlKHQsaSk7fX1nZXRTdHlsZSgpe2lmKHRoaXMuc3R5bGUpcmV0dXJuIHRoaXMuc3R5bGUuc2VyaWFsaXplKCl9aXNTdHlsZUxvYWRlZCgpe3JldHVybiB0aGlzLnN0eWxlP3RoaXMuc3R5bGUubG9hZGVkKCk6KGUud2Fybk9uY2UoXCJUaGVyZSBpcyBubyBzdHlsZSBhZGRlZCB0byB0aGUgbWFwLlwiKSwhMSl9YWRkU291cmNlKGUsdCl7cmV0dXJuIHRoaXMuX2xhenlJbml0RW1wdHlTdHlsZSgpLHRoaXMuc3R5bGUuYWRkU291cmNlKGUsdCksdGhpcy5fdXBkYXRlKCEwKX1pc1NvdXJjZUxvYWRlZChlKXtyZXR1cm4gISF0aGlzLnN0eWxlJiZ0aGlzLnN0eWxlLl9pc1NvdXJjZUNhY2hlTG9hZGVkKGUpfWFyZVRpbGVzTG9hZGVkKCl7Y29uc3QgZT10aGlzLnN0eWxlJiZ0aGlzLnN0eWxlLl9zb3VyY2VDYWNoZXM7Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3QgaT1lW3RdLl90aWxlcztmb3IoY29uc3QgZSBpbiBpKXtjb25zdCB0PWlbZV07aWYoXCJsb2FkZWRcIiE9PXQuc3RhdGUmJlwiZXJyb3JlZFwiIT09dC5zdGF0ZSlyZXR1cm4gITF9fXJldHVybiAhMH1hZGRTb3VyY2VUeXBlKGUsdCxpKXt0aGlzLl9sYXp5SW5pdEVtcHR5U3R5bGUoKSx0aGlzLnN0eWxlLmFkZFNvdXJjZVR5cGUoZSx0LGkpO31yZW1vdmVTb3VyY2UoZSl7cmV0dXJuIHRoaXMuc3R5bGUucmVtb3ZlU291cmNlKGUpLHRoaXMuX3VwZGF0ZVRlcnJhaW4oKSx0aGlzLl91cGRhdGUoITApfWdldFNvdXJjZShlKXtyZXR1cm4gdGhpcy5zdHlsZS5nZXRTb3VyY2UoZSl9YWRkSW1hZ2UodCxpLHtwaXhlbFJhdGlvOm89MSxzZGY6cj0hMSxzdHJldGNoWDpuLHN0cmV0Y2hZOnMsY29udGVudDphfT17fSl7aWYodGhpcy5fbGF6eUluaXRFbXB0eVN0eWxlKCksaSBpbnN0YW5jZW9mIGUud2luZG93LkhUTUxJbWFnZUVsZW1lbnR8fGUud2luZG93LkltYWdlQml0bWFwJiZpIGluc3RhbmNlb2YgZS53aW5kb3cuSW1hZ2VCaXRtYXApe2NvbnN0e3dpZHRoOmwsaGVpZ2h0OmMsZGF0YTpofT1lLmV4cG9ydGVkLmdldEltYWdlRGF0YShpKTt0aGlzLnN0eWxlLmFkZEltYWdlKHQse2RhdGE6bmV3IGUuUkdCQUltYWdlKHt3aWR0aDpsLGhlaWdodDpjfSxoKSxwaXhlbFJhdGlvOm8sc3RyZXRjaFg6bixzdHJldGNoWTpzLGNvbnRlbnQ6YSxzZGY6cix2ZXJzaW9uOjB9KTt9ZWxzZSBpZih2b2lkIDA9PT1pLndpZHRofHx2b2lkIDA9PT1pLmhlaWdodCl0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyB0byBtYXAuYWRkSW1hZ2UoKS4gVGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGFuIGBIVE1MSW1hZ2VFbGVtZW50YCwgYEltYWdlRGF0YWAsIGBJbWFnZUJpdG1hcGAsIG9yIG9iamVjdCB3aXRoIGB3aWR0aGAsIGBoZWlnaHRgLCBhbmQgYGRhdGFgIHByb3BlcnRpZXMgd2l0aCB0aGUgc2FtZSBmb3JtYXQgYXMgYEltYWdlRGF0YWBcIikpKTtlbHNlIHtjb25zdHt3aWR0aDpsLGhlaWdodDpjfT1pLGg9aTt0aGlzLnN0eWxlLmFkZEltYWdlKHQse2RhdGE6bmV3IGUuUkdCQUltYWdlKHt3aWR0aDpsLGhlaWdodDpjfSxuZXcgVWludDhBcnJheShoLmRhdGEpKSxwaXhlbFJhdGlvOm8sc3RyZXRjaFg6bixzdHJldGNoWTpzLGNvbnRlbnQ6YSxzZGY6cix2ZXJzaW9uOjAsdXNlckltYWdlOmh9KSxoLm9uQWRkJiZoLm9uQWRkKHRoaXMsdCk7fX11cGRhdGVJbWFnZSh0LGkpe2NvbnN0IG89dGhpcy5zdHlsZS5nZXRJbWFnZSh0KTtpZighbylyZXR1cm4gdm9pZCB0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJUaGUgbWFwIGhhcyBubyBpbWFnZSB3aXRoIHRoYXQgaWQuIElmIHlvdSBhcmUgYWRkaW5nIGEgbmV3IGltYWdlIHVzZSBgbWFwLmFkZEltYWdlKC4uLilgIGluc3RlYWQuXCIpKSk7Y29uc3Qgcj1pIGluc3RhbmNlb2YgZS53aW5kb3cuSFRNTEltYWdlRWxlbWVudHx8ZS53aW5kb3cuSW1hZ2VCaXRtYXAmJmkgaW5zdGFuY2VvZiBlLndpbmRvdy5JbWFnZUJpdG1hcD9lLmV4cG9ydGVkLmdldEltYWdlRGF0YShpKTppLHt3aWR0aDpuLGhlaWdodDpzfT1yO3ZvaWQgMCE9PW4mJnZvaWQgMCE9PXM/bj09PW8uZGF0YS53aWR0aCYmcz09PW8uZGF0YS5oZWlnaHQ/KG8uZGF0YS5yZXBsYWNlKHIuZGF0YSwhKGkgaW5zdGFuY2VvZiBlLndpbmRvdy5IVE1MSW1hZ2VFbGVtZW50fHxlLndpbmRvdy5JbWFnZUJpdG1hcCYmaSBpbnN0YW5jZW9mIGUud2luZG93LkltYWdlQml0bWFwKSksdGhpcy5zdHlsZS51cGRhdGVJbWFnZSh0LG8pKTp0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoYFRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSB1cGRhdGVkIGltYWdlICgke259LCAke3N9KVxcbiAgICAgICAgICAgICAgICBtdXN0IGJlIHRoYXQgc2FtZSBhcyB0aGUgcHJldmlvdXMgdmVyc2lvbiBvZiB0aGUgaW1hZ2VcXG4gICAgICAgICAgICAgICAgKCR7by5kYXRhLndpZHRofSwgJHtvLmRhdGEuaGVpZ2h0fSlgKSkpOnRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHRvIG1hcC51cGRhdGVJbWFnZSgpLiBUaGUgc2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYW4gYEhUTUxJbWFnZUVsZW1lbnRgLCBgSW1hZ2VEYXRhYCwgYEltYWdlQml0bWFwYCwgb3Igb2JqZWN0IHdpdGggYHdpZHRoYCwgYGhlaWdodGAsIGFuZCBgZGF0YWAgcHJvcGVydGllcyB3aXRoIHRoZSBzYW1lIGZvcm1hdCBhcyBgSW1hZ2VEYXRhYFwiKSkpO31oYXNJbWFnZSh0KXtyZXR1cm4gdD8hIXRoaXMuc3R5bGUuZ2V0SW1hZ2UodCk6KHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZWQgaW1hZ2UgaWRcIikpKSwhMSl9cmVtb3ZlSW1hZ2UoZSl7dGhpcy5zdHlsZS5yZW1vdmVJbWFnZShlKTt9bG9hZEltYWdlKHQsaSl7ZS5nZXRJbWFnZSh0aGlzLl9yZXF1ZXN0TWFuYWdlci50cmFuc2Zvcm1SZXF1ZXN0KHQsZS5SZXNvdXJjZVR5cGUuSW1hZ2UpLCgodCxvKT0+e2kodCxvIGluc3RhbmNlb2YgZS53aW5kb3cuSFRNTEltYWdlRWxlbWVudD9lLmV4cG9ydGVkLmdldEltYWdlRGF0YShvKTpvKTt9KSk7fWxpc3RJbWFnZXMoKXtyZXR1cm4gdGhpcy5zdHlsZS5saXN0SW1hZ2VzKCl9YWRkTGF5ZXIoZSx0KXtyZXR1cm4gdGhpcy5fbGF6eUluaXRFbXB0eVN0eWxlKCksdGhpcy5zdHlsZS5hZGRMYXllcihlLHQpLHRoaXMuX3VwZGF0ZSghMCl9bW92ZUxheWVyKGUsdCl7cmV0dXJuIHRoaXMuc3R5bGUubW92ZUxheWVyKGUsdCksdGhpcy5fdXBkYXRlKCEwKX1yZW1vdmVMYXllcihlKXtyZXR1cm4gdGhpcy5zdHlsZS5yZW1vdmVMYXllcihlKSx0aGlzLl91cGRhdGUoITApfWdldExheWVyKGUpe3JldHVybiB0aGlzLnN0eWxlLmdldExheWVyKGUpfXNldExheWVyWm9vbVJhbmdlKGUsdCxpKXtyZXR1cm4gdGhpcy5zdHlsZS5zZXRMYXllclpvb21SYW5nZShlLHQsaSksdGhpcy5fdXBkYXRlKCEwKX1zZXRGaWx0ZXIoZSx0LGk9e30pe3JldHVybiB0aGlzLnN0eWxlLnNldEZpbHRlcihlLHQsaSksdGhpcy5fdXBkYXRlKCEwKX1nZXRGaWx0ZXIoZSl7cmV0dXJuIHRoaXMuc3R5bGUuZ2V0RmlsdGVyKGUpfXNldFBhaW50UHJvcGVydHkoZSx0LGksbz17fSl7cmV0dXJuIHRoaXMuc3R5bGUuc2V0UGFpbnRQcm9wZXJ0eShlLHQsaSxvKSx0aGlzLl91cGRhdGUoITApfWdldFBhaW50UHJvcGVydHkoZSx0KXtyZXR1cm4gdGhpcy5zdHlsZS5nZXRQYWludFByb3BlcnR5KGUsdCl9c2V0TGF5b3V0UHJvcGVydHkoZSx0LGksbz17fSl7cmV0dXJuIHRoaXMuc3R5bGUuc2V0TGF5b3V0UHJvcGVydHkoZSx0LGksbyksdGhpcy5fdXBkYXRlKCEwKX1nZXRMYXlvdXRQcm9wZXJ0eShlLHQpe3JldHVybiB0aGlzLnN0eWxlLmdldExheW91dFByb3BlcnR5KGUsdCl9c2V0TGlnaHQoZSx0PXt9KXtyZXR1cm4gdGhpcy5fbGF6eUluaXRFbXB0eVN0eWxlKCksdGhpcy5zdHlsZS5zZXRMaWdodChlLHQpLHRoaXMuX3VwZGF0ZSghMCl9Z2V0TGlnaHQoKXtyZXR1cm4gdGhpcy5zdHlsZS5nZXRMaWdodCgpfXNldFRlcnJhaW4oZSl7cmV0dXJuIHRoaXMuX2xhenlJbml0RW1wdHlTdHlsZSgpLCFlJiZ0aGlzLnRyYW5zZm9ybS5wcm9qZWN0aW9uLnJlcXVpcmVzRHJhcGluZz90aGlzLnN0eWxlLnNldFRlcnJhaW5Gb3JEcmFwaW5nKCk6dGhpcy5zdHlsZS5zZXRUZXJyYWluKGUpLHRoaXMuX2F2ZXJhZ2VFbGV2YXRpb25MYXN0U2FtcGxlZEF0PS0xLzAsdGhpcy5fdXBkYXRlKCEwKX1nZXRUZXJyYWluKCl7cmV0dXJuIHRoaXMuc3R5bGU/dGhpcy5zdHlsZS5nZXRUZXJyYWluKCk6bnVsbH1zZXRGb2coZSl7cmV0dXJuIHRoaXMuX2xhenlJbml0RW1wdHlTdHlsZSgpLHRoaXMuc3R5bGUuc2V0Rm9nKGUpLHRoaXMuX3VwZGF0ZSghMCl9Z2V0Rm9nKCl7cmV0dXJuIHRoaXMuc3R5bGU/dGhpcy5zdHlsZS5nZXRGb2coKTpudWxsfV9xdWVyeUZvZ09wYWNpdHkodCl7cmV0dXJuIHRoaXMuc3R5bGUmJnRoaXMuc3R5bGUuZm9nP3RoaXMuc3R5bGUuZm9nLmdldE9wYWNpdHlBdExhdExuZyhlLkxuZ0xhdC5jb252ZXJ0KHQpLHRoaXMudHJhbnNmb3JtKTowfXNldEZlYXR1cmVTdGF0ZShlLHQpe3JldHVybiB0aGlzLnN0eWxlLnNldEZlYXR1cmVTdGF0ZShlLHQpLHRoaXMuX3VwZGF0ZSgpfXJlbW92ZUZlYXR1cmVTdGF0ZShlLHQpe3JldHVybiB0aGlzLnN0eWxlLnJlbW92ZUZlYXR1cmVTdGF0ZShlLHQpLHRoaXMuX3VwZGF0ZSgpfWdldEZlYXR1cmVTdGF0ZShlKXtyZXR1cm4gdGhpcy5zdHlsZS5nZXRGZWF0dXJlU3RhdGUoZSl9X3VwZGF0ZUNvbnRhaW5lckRpbWVuc2lvbnMoKXtpZighdGhpcy5fY29udGFpbmVyKXJldHVybjtjb25zdCB0PXRoaXMuX2NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aHx8NDAwLGk9dGhpcy5fY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodHx8MzAwO2xldCBvLHIsbixzPXRoaXMuX2NvbnRhaW5lcjtmb3IoO3MmJighcnx8IW4pOyl7Y29uc3QgdD1lLndpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHMpLnRyYW5zZm9ybTt0JiZcIm5vbmVcIiE9PXQmJihvPXQubWF0Y2goL21hdHJpeC4qXFwoKC4rKVxcKS8pWzFdLnNwbGl0KFwiLCBcIiksb1swXSYmXCIwXCIhPT1vWzBdJiZcIjFcIiE9PW9bMF0mJihyPW9bMF0pLG9bM10mJlwiMFwiIT09b1szXSYmXCIxXCIhPT1vWzNdJiYobj1vWzNdKSkscz1zLnBhcmVudEVsZW1lbnQ7fXRoaXMuX2NvbnRhaW5lcldpZHRoPXI/TWF0aC5hYnModC9yKTp0LHRoaXMuX2NvbnRhaW5lckhlaWdodD1uP01hdGguYWJzKGkvbik6aTt9X2RldGVjdE1pc3NpbmdDU1MoKXtcInJnYigyNTAsIDEyOCwgMTE0KVwiIT09ZS53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl9taXNzaW5nQ1NTQ2FuYXJ5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiYmFja2dyb3VuZC1jb2xvclwiKSYmZS53YXJuT25jZShcIlRoaXMgcGFnZSBhcHBlYXJzIHRvIGJlIG1pc3NpbmcgQ1NTIGRlY2xhcmF0aW9ucyBmb3IgTWFwYm94IEdMIEpTLCB3aGljaCBtYXkgY2F1c2UgdGhlIG1hcCB0byBkaXNwbGF5IGluY29ycmVjdGx5LiBQbGVhc2UgZW5zdXJlIHlvdXIgcGFnZSBpbmNsdWRlcyBtYXBib3gtZ2wuY3NzLCBhcyBkZXNjcmliZWQgaW4gaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvYXBpLy5cIik7fV9zZXR1cENvbnRhaW5lcigpe2NvbnN0IGU9dGhpcy5fY29udGFpbmVyO2UuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLW1hcFwiKSwodGhpcy5fbWlzc2luZ0NTU0NhbmFyeT1uKFwiZGl2XCIsXCJtYXBib3hnbC1jYW5hcnlcIixlKSkuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHRoaXMuX2RldGVjdE1pc3NpbmdDU1MoKTtjb25zdCB0PXRoaXMuX2NhbnZhc0NvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1jYW52YXMtY29udGFpbmVyXCIsZSk7dGhpcy5faW50ZXJhY3RpdmUmJnQuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWludGVyYWN0aXZlXCIpLHRoaXMuX2NhbnZhcz1uKFwiY2FudmFzXCIsXCJtYXBib3hnbC1jYW52YXNcIix0KSx0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIix0aGlzLl9jb250ZXh0TG9zdCwhMSksdGhpcy5fY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLHRoaXMuX2NvbnRleHRSZXN0b3JlZCwhMSksdGhpcy5fY2FudmFzLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCIwXCIpLHRoaXMuX2NhbnZhcy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsdGhpcy5fZ2V0VUlTdHJpbmcoXCJNYXAuVGl0bGVcIikpLHRoaXMuX2NhbnZhcy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJyZWdpb25cIiksdGhpcy5fdXBkYXRlQ29udGFpbmVyRGltZW5zaW9ucygpLHRoaXMuX3Jlc2l6ZUNhbnZhcyh0aGlzLl9jb250YWluZXJXaWR0aCx0aGlzLl9jb250YWluZXJIZWlnaHQpO2NvbnN0IGk9dGhpcy5fY29udHJvbENvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1jb250cm9sLWNvbnRhaW5lclwiLGUpLG89dGhpcy5fY29udHJvbFBvc2l0aW9ucz17fTtbXCJ0b3AtbGVmdFwiLFwidG9wLXJpZ2h0XCIsXCJib3R0b20tbGVmdFwiLFwiYm90dG9tLXJpZ2h0XCJdLmZvckVhY2goKGU9PntvW2VdPW4oXCJkaXZcIixgbWFwYm94Z2wtY3RybC0ke2V9YCxpKTt9KSksdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLl9vbk1hcFNjcm9sbCwhMSk7fV9yZXNpemVDYW52YXModCxpKXtjb25zdCBvPWUuZXhwb3J0ZWQuZGV2aWNlUGl4ZWxSYXRpb3x8MTt0aGlzLl9jYW52YXMud2lkdGg9bypNYXRoLmNlaWwodCksdGhpcy5fY2FudmFzLmhlaWdodD1vKk1hdGguY2VpbChpKSx0aGlzLl9jYW52YXMuc3R5bGUud2lkdGg9YCR7dH1weGAsdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodD1gJHtpfXB4YDt9X2FkZE1hcmtlcihlKXt0aGlzLl9tYXJrZXJzLnB1c2goZSk7fV9yZW1vdmVNYXJrZXIoZSl7Y29uc3QgdD10aGlzLl9tYXJrZXJzLmluZGV4T2YoZSk7LTEhPT10JiZ0aGlzLl9tYXJrZXJzLnNwbGljZSh0LDEpO31fYWRkUG9wdXAoZSl7dGhpcy5fcG9wdXBzLnB1c2goZSk7fV9yZW1vdmVQb3B1cChlKXtjb25zdCB0PXRoaXMuX3BvcHVwcy5pbmRleE9mKGUpOy0xIT09dCYmdGhpcy5fcG9wdXBzLnNwbGljZSh0LDEpO31fc2V0dXBQYWludGVyKCl7Y29uc3QgdD1lLmV4dGVuZCh7fSxpLndlYkdMQ29udGV4dEF0dHJpYnV0ZXMse2ZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6dGhpcy5fZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdCxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6dGhpcy5fcHJlc2VydmVEcmF3aW5nQnVmZmVyLGFudGlhbGlhczp0aGlzLl9hbnRpYWxpYXN8fCExfSksbz10aGlzLl91c2VXZWJHTDImJnRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2wyXCIsdCkscj1vfHx0aGlzLl9jYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIsdCl8fHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsdCk7cj8odGhpcy5fdXNlV2ViR0wyJiYhbyYmZS53YXJuT25jZShcIkZhaWxlZCB0byBjcmVhdGUgV2ViR0wgMiBjb250ZXh0LiBVc2luZyBXZWJHTCAxLlwiKSxlLnN0b3JlQXV0aFN0YXRlKHIsITApLHRoaXMucGFpbnRlcj1uZXcgQm8ocix0aGlzLnRyYW5zZm9ybSwhIW8pLHRoaXMub24oXCJkYXRhXCIsKGU9PntcInNvdXJjZVwiPT09ZS5kYXRhVHlwZSYmdGhpcy5wYWludGVyLnNldFRpbGVMb2FkZWRGbGFnKCEwKTt9KSksZS5leHBvcnRlZCQxLnRlc3RTdXBwb3J0KHIpKTp0aGlzLmZpcmUobmV3IGUuRXJyb3JFdmVudChuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBXZWJHTFwiKSkpO31fY29udGV4dExvc3QodCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2ZyYW1lJiYodGhpcy5fZnJhbWUuY2FuY2VsKCksdGhpcy5fZnJhbWU9bnVsbCksdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwid2ViZ2xjb250ZXh0bG9zdFwiLHtvcmlnaW5hbEV2ZW50OnR9KSk7fV9jb250ZXh0UmVzdG9yZWQodCl7dGhpcy5fc2V0dXBQYWludGVyKCksdGhpcy5yZXNpemUoKSx0aGlzLl91cGRhdGUoKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLHtvcmlnaW5hbEV2ZW50OnR9KSk7fV9vbk1hcFNjcm9sbChlKXtpZihlLnRhcmdldD09PXRoaXMuX2NvbnRhaW5lcilyZXR1cm4gdGhpcy5fY29udGFpbmVyLnNjcm9sbFRvcD0wLHRoaXMuX2NvbnRhaW5lci5zY3JvbGxMZWZ0PTAsITF9bG9hZGVkKCl7cmV0dXJuICF0aGlzLl9zdHlsZURpcnR5JiYhdGhpcy5fc291cmNlc0RpcnR5JiYhIXRoaXMuc3R5bGUmJnRoaXMuc3R5bGUubG9hZGVkKCl9X3VwZGF0ZShlKXtyZXR1cm4gdGhpcy5zdHlsZT8odGhpcy5fc3R5bGVEaXJ0eT10aGlzLl9zdHlsZURpcnR5fHxlLHRoaXMuX3NvdXJjZXNEaXJ0eT0hMCx0aGlzLnRyaWdnZXJSZXBhaW50KCksdGhpcyk6dGhpc31fcmVxdWVzdFJlbmRlckZyYW1lKGUpe3JldHVybiB0aGlzLl91cGRhdGUoKSx0aGlzLl9yZW5kZXJUYXNrUXVldWUuYWRkKGUpfV9jYW5jZWxSZW5kZXJGcmFtZShlKXt0aGlzLl9yZW5kZXJUYXNrUXVldWUucmVtb3ZlKGUpO31fcmVxdWVzdERvbVRhc2soZSl7IXRoaXMubG9hZGVkKCl8fHRoaXMubG9hZGVkKCkmJiF0aGlzLmlzTW92aW5nKCk/ZSgpOnRoaXMuX2RvbVJlbmRlclRhc2tRdWV1ZS5hZGQoZSk7fV9yZW5kZXIodCl7bGV0IGk7Y29uc3Qgbz10aGlzLnBhaW50ZXIuY29udGV4dC5leHRUaW1lclF1ZXJ5LHI9ZS5leHBvcnRlZC5ub3coKTtpZih0aGlzLmxpc3RlbnMoXCJncHUtdGltaW5nLWZyYW1lXCIpJiYoaT1vLmNyZWF0ZVF1ZXJ5RVhUKCksby5iZWdpblF1ZXJ5RVhUKG8uVElNRV9FTEFQU0VEX0VYVCxpKSksdGhpcy5wYWludGVyLmNvbnRleHQuc2V0RGlydHkoKSx0aGlzLnBhaW50ZXIuc2V0QmFzZVN0YXRlKCksKHRoaXMuaXNNb3ZpbmcoKXx8dGhpcy5pc1JvdGF0aW5nKCl8fHRoaXMuaXNab29taW5nKCkpJiYodGhpcy5faW50ZXJhY3Rpb25SYW5nZVswXT1NYXRoLm1pbih0aGlzLl9pbnRlcmFjdGlvblJhbmdlWzBdLGUud2luZG93LnBlcmZvcm1hbmNlLm5vdygpKSx0aGlzLl9pbnRlcmFjdGlvblJhbmdlWzFdPU1hdGgubWF4KHRoaXMuX2ludGVyYWN0aW9uUmFuZ2VbMV0sZS53aW5kb3cucGVyZm9ybWFuY2Uubm93KCkpKSx0aGlzLl9yZW5kZXJUYXNrUXVldWUucnVuKHQpLHRoaXMuX2RvbVJlbmRlclRhc2tRdWV1ZS5ydW4odCksdGhpcy5fcmVtb3ZlZClyZXR1cm47dGhpcy5fdXBkYXRlUHJvamVjdGlvblRyYW5zaXRpb24oKTtjb25zdCBuPXRoaXMuX2lzSW5pdGlhbExvYWQ/MDp0aGlzLl9mYWRlRHVyYXRpb247aWYodGhpcy5zdHlsZSYmdGhpcy5fc3R5bGVEaXJ0eSl7dGhpcy5fc3R5bGVEaXJ0eT0hMTtjb25zdCB0PXRoaXMudHJhbnNmb3JtLnpvb20saT10aGlzLnRyYW5zZm9ybS5waXRjaCxvPWUuZXhwb3J0ZWQubm93KCkscj1uZXcgZS5FdmFsdWF0aW9uUGFyYW1ldGVycyh0LHtub3c6byxmYWRlRHVyYXRpb246bixwaXRjaDppLHRyYW5zaXRpb246dGhpcy5zdHlsZS5nZXRUcmFuc2l0aW9uKCl9KTt0aGlzLnN0eWxlLnVwZGF0ZShyKTt9dGhpcy5zdHlsZSYmdGhpcy5zdHlsZS5mb2cmJnRoaXMuc3R5bGUuZm9nLmhhc1RyYW5zaXRpb24oKSYmKHRoaXMuc3R5bGUuX21hcmtlcnNOZWVkVXBkYXRlPSEwLHRoaXMuX3NvdXJjZXNEaXJ0eT0hMCk7bGV0IHM9ITE7aWYodGhpcy5zdHlsZSYmdGhpcy5fc291cmNlc0RpcnR5Pyh0aGlzLl9zb3VyY2VzRGlydHk9ITEsdGhpcy5wYWludGVyLl91cGRhdGVGb2codGhpcy5zdHlsZSksdGhpcy5fdXBkYXRlVGVycmFpbigpLHM9dGhpcy5fdXBkYXRlQXZlcmFnZUVsZXZhdGlvbihyKSx0aGlzLnN0eWxlLl91cGRhdGVTb3VyY2VzKHRoaXMudHJhbnNmb3JtKSx0aGlzLl9mb3JjZU1hcmtlckFuZFBvcHVwVXBkYXRlKCkpOnM9dGhpcy5fdXBkYXRlQXZlcmFnZUVsZXZhdGlvbihyKSx0aGlzLl9wbGFjZW1lbnREaXJ0eT10aGlzLnN0eWxlJiZ0aGlzLnN0eWxlLl91cGRhdGVQbGFjZW1lbnQodGhpcy5wYWludGVyLnRyYW5zZm9ybSx0aGlzLnNob3dDb2xsaXNpb25Cb3hlcyxuLHRoaXMuX2Nyb3NzU291cmNlQ29sbGlzaW9ucyksdGhpcy5zdHlsZSYmdGhpcy5wYWludGVyLnJlbmRlcih0aGlzLnN0eWxlLHtzaG93VGlsZUJvdW5kYXJpZXM6dGhpcy5zaG93VGlsZUJvdW5kYXJpZXMsc2hvd1RlcnJhaW5XaXJlZnJhbWU6dGhpcy5zaG93VGVycmFpbldpcmVmcmFtZSxzaG93T3ZlcmRyYXdJbnNwZWN0b3I6dGhpcy5fc2hvd092ZXJkcmF3SW5zcGVjdG9yLHNob3dRdWVyeUdlb21ldHJ5OiEhdGhpcy5fc2hvd1F1ZXJ5R2VvbWV0cnksc2hvd1RpbGVBQUJCczp0aGlzLnNob3dUaWxlQUFCQnMscm90YXRpbmc6dGhpcy5pc1JvdGF0aW5nKCksem9vbWluZzp0aGlzLmlzWm9vbWluZygpLG1vdmluZzp0aGlzLmlzTW92aW5nKCksZmFkZUR1cmF0aW9uOm4saXNJbml0aWFsTG9hZDp0aGlzLl9pc0luaXRpYWxMb2FkLHNob3dQYWRkaW5nOnRoaXMuc2hvd1BhZGRpbmcsZ3B1VGltaW5nOiEhdGhpcy5saXN0ZW5zKFwiZ3B1LXRpbWluZy1sYXllclwiKSxncHVUaW1pbmdEZWZlcnJlZFJlbmRlcjohIXRoaXMubGlzdGVucyhcImdwdS10aW1pbmctZGVmZXJyZWQtcmVuZGVyXCIpLHNwZWVkSW5kZXhUaW1pbmc6dGhpcy5zcGVlZEluZGV4VGltaW5nfSksdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwicmVuZGVyXCIpKSx0aGlzLmxvYWRlZCgpJiYhdGhpcy5fbG9hZGVkJiYodGhpcy5fbG9hZGVkPSEwLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImxvYWRcIikpKSx0aGlzLnN0eWxlJiZ0aGlzLnN0eWxlLmhhc1RyYW5zaXRpb25zKCkmJih0aGlzLl9zdHlsZURpcnR5PSEwKSx0aGlzLnN0eWxlJiYhdGhpcy5fcGxhY2VtZW50RGlydHkmJnRoaXMuc3R5bGUuX3JlbGVhc2VTeW1ib2xGYWRlVGlsZXMoKSxpKXtjb25zdCB0PWUuZXhwb3J0ZWQubm93KCktcjtvLmVuZFF1ZXJ5RVhUKG8uVElNRV9FTEFQU0VEX0VYVCxpKSxzZXRUaW1lb3V0KCgoKT0+e2NvbnN0IG49by5nZXRRdWVyeU9iamVjdEVYVChpLG8uUVVFUllfUkVTVUxUX0VYVCkvMWU2O28uZGVsZXRlUXVlcnlFWFQoaSksdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiZ3B1LXRpbWluZy1mcmFtZVwiLHtjcHVUaW1lOnQsZ3B1VGltZTpufSkpLGUud2luZG93LnBlcmZvcm1hbmNlLm1hcmsoXCJmcmFtZS1ncHVcIix7c3RhcnRUaW1lOnIsZGV0YWlsOntncHVUaW1lOm59fSk7fSksNTApO31pZih0aGlzLmxpc3RlbnMoXCJncHUtdGltaW5nLWxheWVyXCIpKXtjb25zdCB0PXRoaXMucGFpbnRlci5jb2xsZWN0R3B1VGltZXJzKCk7c2V0VGltZW91dCgoKCk9Pntjb25zdCBpPXRoaXMucGFpbnRlci5xdWVyeUdwdVRpbWVycyh0KTt0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJncHUtdGltaW5nLWxheWVyXCIse2xheWVyVGltZXM6aX0pKTt9KSw1MCk7fWlmKHRoaXMubGlzdGVucyhcImdwdS10aW1pbmctZGVmZXJyZWQtcmVuZGVyXCIpKXtjb25zdCB0PXRoaXMucGFpbnRlci5jb2xsZWN0RGVmZXJyZWRSZW5kZXJHcHVRdWVyaWVzKCk7c2V0VGltZW91dCgoKCk9Pntjb25zdCBpPXRoaXMucGFpbnRlci5xdWVyeUdwdVRpbWVEZWZlcnJlZFJlbmRlcih0KTt0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJncHUtdGltaW5nLWRlZmVycmVkLXJlbmRlclwiLHtncHVUaW1lOml9KSk7fSksNTApO31jb25zdCBhPXRoaXMuX3NvdXJjZXNEaXJ0eXx8dGhpcy5fc3R5bGVEaXJ0eXx8dGhpcy5fcGxhY2VtZW50RGlydHl8fHM7aWYoYXx8dGhpcy5fcmVwYWludCl0aGlzLnRyaWdnZXJSZXBhaW50KCk7ZWxzZSB7Y29uc3QgdD0hdGhpcy5pc01vdmluZygpJiZ0aGlzLmxvYWRlZCgpO2lmKHQmJihzPXRoaXMuX3VwZGF0ZUF2ZXJhZ2VFbGV2YXRpb24ociwhMCkpLHMpdGhpcy50cmlnZ2VyUmVwYWludCgpO2Vsc2UgaWYodGhpcy5fdHJpZ2dlckZyYW1lKCExKSx0JiYodGhpcy5maXJlKG5ldyBlLkV2ZW50KFwiaWRsZVwiKSksdGhpcy5faXNJbml0aWFsTG9hZD0hMSx0aGlzLnNwZWVkSW5kZXhUaW1pbmcpKXtjb25zdCB0PXRoaXMuX2NhbGN1bGF0ZVNwZWVkSW5kZXgoKTt0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJzcGVlZGluZGV4Y29tcGxldGVkXCIse3NwZWVkSW5kZXg6dH0pKSx0aGlzLnNwZWVkSW5kZXhUaW1pbmc9ITE7fX0hdGhpcy5fbG9hZGVkfHx0aGlzLl9mdWxseUxvYWRlZHx8YXx8KHRoaXMuX2Z1bGx5TG9hZGVkPSEwLGUuTGl2ZVBlcmZvcm1hbmNlVXRpbHMubWFyayhlLlBlcmZvcm1hbmNlTWFya2Vycy5mdWxsTG9hZCksdGhpcy5fcGVyZm9ybWFuY2VNZXRyaWNzQ29sbGVjdGlvbiYmZS5wb3N0UGVyZm9ybWFuY2VFdmVudCh0aGlzLl9yZXF1ZXN0TWFuYWdlci5fY3VzdG9tQWNjZXNzVG9rZW4se3dpZHRoOnRoaXMucGFpbnRlci53aWR0aCxoZWlnaHQ6dGhpcy5wYWludGVyLmhlaWdodCxpbnRlcmFjdGlvblJhbmdlOnRoaXMuX2ludGVyYWN0aW9uUmFuZ2UsdmlzaWJpbGl0eUhpZGRlbjp0aGlzLl92aXNpYmlsaXR5SGlkZGVuLHRlcnJhaW5FbmFibGVkOiEhdGhpcy5wYWludGVyLnN0eWxlLmdldFRlcnJhaW4oKSxmb2dFbmFibGVkOiEhdGhpcy5wYWludGVyLnN0eWxlLmdldEZvZygpLHByb2plY3Rpb246dGhpcy5nZXRQcm9qZWN0aW9uKCkubmFtZSx6b29tOnRoaXMudHJhbnNmb3JtLnpvb20scmVuZGVyZXI6dGhpcy5wYWludGVyLmNvbnRleHQucmVuZGVyZXIsdmVuZG9yOnRoaXMucGFpbnRlci5jb250ZXh0LnZlbmRvcn0pLHRoaXMuX2F1dGhlbnRpY2F0ZSgpKTt9X2ZvcmNlTWFya2VyQW5kUG9wdXBVcGRhdGUoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fbWFya2VycyllJiYhdGhpcy5nZXRSZW5kZXJXb3JsZENvcGllcygpJiYodC5fbG5nTGF0PXQuX2xuZ0xhdC53cmFwKCkpLHQuX3VwZGF0ZSgpO2Zvcihjb25zdCB0IG9mIHRoaXMuX3BvcHVwcykhZXx8dGhpcy5nZXRSZW5kZXJXb3JsZENvcGllcygpfHx0Ll90cmFja1BvaW50ZXJ8fCh0Ll9sbmdMYXQ9dC5fbG5nTGF0LndyYXAoKSksdC5fdXBkYXRlKCk7fV91cGRhdGVBdmVyYWdlRWxldmF0aW9uKGUsdD0hMSl7Y29uc3QgaT1lPT4odGhpcy50cmFuc2Zvcm0uYXZlcmFnZUVsZXZhdGlvbj1lLHRoaXMuX3VwZGF0ZSghMSksITApO2lmKCF0aGlzLnBhaW50ZXIuYXZlcmFnZUVsZXZhdGlvbk5lZWRzRWFzaW5nKCkpcmV0dXJuIDAhPT10aGlzLnRyYW5zZm9ybS5hdmVyYWdlRWxldmF0aW9uJiZpKDApO2lmKCh0fHxlLXRoaXMuX2F2ZXJhZ2VFbGV2YXRpb25MYXN0U2FtcGxlZEF0PjUwMCkmJiF0aGlzLl9hdmVyYWdlRWxldmF0aW9uLmlzRWFzaW5nKGUpKXtjb25zdCB0PXRoaXMudHJhbnNmb3JtLmF2ZXJhZ2VFbGV2YXRpb247bGV0IG89dGhpcy50cmFuc2Zvcm0uc2FtcGxlQXZlcmFnZUVsZXZhdGlvbigpLHI9ITE7dGhpcy50cmFuc2Zvcm0uZWxldmF0aW9uJiYocj10aGlzLnRyYW5zZm9ybS5lbGV2YXRpb24uZXhhZ2dlcmF0aW9uKCkhPT10aGlzLl9hdmVyYWdlRWxldmF0aW9uRXhhZ2dlcmF0aW9uLHRoaXMuX2F2ZXJhZ2VFbGV2YXRpb25FeGFnZ2VyYXRpb249dGhpcy50cmFuc2Zvcm0uZWxldmF0aW9uLmV4YWdnZXJhdGlvbigpKSxpc05hTihvKT9vPTA6dGhpcy5fYXZlcmFnZUVsZXZhdGlvbkxhc3RTYW1wbGVkQXQ9ZTtjb25zdCBuPU1hdGguYWJzKHQtbyk7aWYobj4xKXtpZih0aGlzLl9pc0luaXRpYWxMb2FkfHxyKXJldHVybiB0aGlzLl9hdmVyYWdlRWxldmF0aW9uLmp1bXBUbyhvKSxpKG8pO3RoaXMuX2F2ZXJhZ2VFbGV2YXRpb24uZWFzZVRvKG8sZSwzMDApO31lbHNlIGlmKG4+MWUtNClyZXR1cm4gdGhpcy5fYXZlcmFnZUVsZXZhdGlvbi5qdW1wVG8obyksaShvKX1yZXR1cm4gISF0aGlzLl9hdmVyYWdlRWxldmF0aW9uLmlzRWFzaW5nKGUpJiZpKHRoaXMuX2F2ZXJhZ2VFbGV2YXRpb24uZ2V0VmFsdWUoZSkpfV9hdXRoZW50aWNhdGUoKXtlLmdldE1hcFNlc3Npb25BUEkodGhpcy5fZ2V0TWFwSWQoKSx0aGlzLl9yZXF1ZXN0TWFuYWdlci5fc2t1VG9rZW4sdGhpcy5fcmVxdWVzdE1hbmFnZXIuX2N1c3RvbUFjY2Vzc1Rva2VuLCh0PT57aWYodCYmKHQubWVzc2FnZT09PWUuQVVUSF9FUlJfTVNHfHw0MDE9PT10LnN0YXR1cykpe2NvbnN0IHQ9dGhpcy5wYWludGVyLmNvbnRleHQuZ2w7ZS5zdG9yZUF1dGhTdGF0ZSh0LCExKSx0aGlzLl9sb2dvQ29udHJvbCBpbnN0YW5jZW9mIFlyJiZ0aGlzLl9sb2dvQ29udHJvbC5fdXBkYXRlTG9nbygpLHQmJnQuY2xlYXIodC5ERVBUSF9CVUZGRVJfQklUfHQuQ09MT1JfQlVGRkVSX0JJVHx0LlNURU5DSUxfQlVGRkVSX0JJVCksdGhpcy5fc2lsZW5jZUF1dGhFcnJvcnN8fHRoaXMuZmlyZShuZXcgZS5FcnJvckV2ZW50KG5ldyBFcnJvcihcIkEgdmFsaWQgTWFwYm94IGFjY2VzcyB0b2tlbiBpcyByZXF1aXJlZCB0byB1c2UgTWFwYm94IEdMIEpTLiBUbyBjcmVhdGUgYW4gYWNjb3VudCBvciBhIG5ldyBhY2Nlc3MgdG9rZW4sIHZpc2l0IGh0dHBzOi8vYWNjb3VudC5tYXBib3guY29tL1wiKSkpO319KSksZS5wb3N0TWFwTG9hZEV2ZW50KHRoaXMuX2dldE1hcElkKCksdGhpcy5fcmVxdWVzdE1hbmFnZXIuX3NrdVRva2VuLHRoaXMuX3JlcXVlc3RNYW5hZ2VyLl9jdXN0b21BY2Nlc3NUb2tlbiwoKCk9Pnt9KSk7fV91cGRhdGVUZXJyYWluKCl7Y29uc3QgZT10aGlzLl9pc0RyYWdnaW5nKCk7dGhpcy5wYWludGVyLnVwZGF0ZVRlcnJhaW4odGhpcy5zdHlsZSxlKTt9X2NhbGN1bGF0ZVNwZWVkSW5kZXgoKXtjb25zdCBlPXRoaXMucGFpbnRlci5jYW52YXNDb3B5KCksdD10aGlzLnBhaW50ZXIuZ2V0Q2FudmFzQ29waWVzQW5kVGltZXN0YW1wcygpO3QudGltZVN0YW1wcy5wdXNoKHBlcmZvcm1hbmNlLm5vdygpKTtjb25zdCBpPXRoaXMucGFpbnRlci5jb250ZXh0LmdsLG89aS5jcmVhdGVGcmFtZWJ1ZmZlcigpO2Z1bmN0aW9uIHIoZSl7aS5mcmFtZWJ1ZmZlclRleHR1cmUyRChpLkZSQU1FQlVGRkVSLGkuQ09MT1JfQVRUQUNITUVOVDAsaS5URVhUVVJFXzJELGUsMCk7Y29uc3QgdD1uZXcgVWludDhBcnJheShpLmRyYXdpbmdCdWZmZXJXaWR0aCppLmRyYXdpbmdCdWZmZXJIZWlnaHQqNCk7cmV0dXJuIGkucmVhZFBpeGVscygwLDAsaS5kcmF3aW5nQnVmZmVyV2lkdGgsaS5kcmF3aW5nQnVmZmVySGVpZ2h0LGkuUkdCQSxpLlVOU0lHTkVEX0JZVEUsdCksdH1yZXR1cm4gaS5iaW5kRnJhbWVidWZmZXIoaS5GUkFNRUJVRkZFUixvKSx0aGlzLl9jYW52YXNQaXhlbENvbXBhcmlzb24ocihlKSx0LmNhbnZhc0NvcGllcy5tYXAociksdC50aW1lU3RhbXBzKX1fY2FudmFzUGl4ZWxDb21wYXJpc29uKGUsdCxpKXtsZXQgbz1pWzFdLWlbMF07Y29uc3Qgcj1lLmxlbmd0aC80O2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCBzPXRbbl07bGV0IGE9MDtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrPTQpc1t0XT09PWVbdF0mJnNbdCsxXT09PWVbdCsxXSYmc1t0KzJdPT09ZVt0KzJdJiZzW3QrM109PT1lW3QrM10mJihhKz0xKTtvKz0oaVtuKzJdLWlbbisxXSkqKDEtYS9yKTt9cmV0dXJuIG99cmVtb3ZlKCl7dGhpcy5faGFzaCYmdGhpcy5faGFzaC5yZW1vdmUoKTtmb3IoY29uc3QgZSBvZiB0aGlzLl9jb250cm9scyllLm9uUmVtb3ZlKHRoaXMpO3RoaXMuX2NvbnRyb2xzPVtdLHRoaXMuX2ZyYW1lJiYodGhpcy5fZnJhbWUuY2FuY2VsKCksdGhpcy5fZnJhbWU9bnVsbCksdGhpcy5fcmVuZGVyVGFza1F1ZXVlLmNsZWFyKCksdGhpcy5fZG9tUmVuZGVyVGFza1F1ZXVlLmNsZWFyKCksdGhpcy5zdHlsZSYmdGhpcy5zdHlsZS5kZXN0cm95KCksdGhpcy5wYWludGVyLmRlc3Ryb3koKSx0aGlzLmhhbmRsZXJzJiZ0aGlzLmhhbmRsZXJzLmRlc3Ryb3koKSx0aGlzLmhhbmRsZXJzPXZvaWQgMCx0aGlzLnNldFN0eWxlKG51bGwpLHZvaWQgMCE9PWUud2luZG93JiYoZS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX29uV2luZG93UmVzaXplLCExKSxlLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIix0aGlzLl9vbldpbmRvd1Jlc2l6ZSwhMSksZS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2VcIix0aGlzLl9vbldpbmRvd1Jlc2l6ZSwhMSksZS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHRoaXMuX29uV2luZG93T25saW5lLCExKSxlLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZSwhMSkpO2NvbnN0IHQ9dGhpcy5wYWludGVyLmNvbnRleHQuZ2wuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpO3QmJnQubG9zZUNvbnRleHQoKSx0aGlzLl9jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIix0aGlzLl9jb250ZXh0TG9zdCwhMSksdGhpcy5fY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLHRoaXMuX2NvbnRleHRSZXN0b3JlZCwhMSksdGhpcy5fY2FudmFzQ29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX2NvbnRyb2xDb250YWluZXIucmVtb3ZlKCksdGhpcy5fbWlzc2luZ0NTU0NhbmFyeS5yZW1vdmUoKSx0aGlzLl9jYW52YXM9dm9pZCAwLHRoaXMuX2NhbnZhc0NvbnRhaW5lcj12b2lkIDAsdGhpcy5fY29udHJvbENvbnRhaW5lcj12b2lkIDAsdGhpcy5fbWlzc2luZ0NTU0NhbmFyeT12b2lkIDAsdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1tYXBcIiksdGhpcy5fY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLl9vbk1hcFNjcm9sbCwhMSksZS5yZW1vdmVBdXRoU3RhdGUodGhpcy5wYWludGVyLmNvbnRleHQuZ2wpLHRoaXMuX3JlbW92ZWQ9ITAsdGhpcy5maXJlKG5ldyBlLkV2ZW50KFwicmVtb3ZlXCIpKTt9dHJpZ2dlclJlcGFpbnQoKXt0aGlzLl90cmlnZ2VyRnJhbWUoITApO31fdHJpZ2dlckZyYW1lKHQpe3RoaXMuX3JlbmRlck5leHRGcmFtZT10aGlzLl9yZW5kZXJOZXh0RnJhbWV8fHQsdGhpcy5zdHlsZSYmIXRoaXMuX2ZyYW1lJiYodGhpcy5fZnJhbWU9ZS5leHBvcnRlZC5mcmFtZSgoZT0+e2NvbnN0IHQ9ISF0aGlzLl9yZW5kZXJOZXh0RnJhbWU7dGhpcy5fZnJhbWU9bnVsbCx0aGlzLl9yZW5kZXJOZXh0RnJhbWU9bnVsbCx0JiZ0aGlzLl9yZW5kZXIoZSk7fSkpKTt9X3ByZWxvYWRUaWxlcyh0KXtjb25zdCBpPXRoaXMuc3R5bGU/T2JqZWN0LnZhbHVlcyh0aGlzLnN0eWxlLl9zb3VyY2VDYWNoZXMpOltdO3JldHVybiBlLmFzeW5jQWxsKGksKChlLGkpPT5lLl9wcmVsb2FkVGlsZXModCxpKSksKCgpPT57dGhpcy50cmlnZ2VyUmVwYWludCgpO30pKSx0aGlzfV9vbldpbmRvd09ubGluZSgpe3RoaXMuX3VwZGF0ZSgpO31fb25XaW5kb3dSZXNpemUoZSl7dGhpcy5fdHJhY2tSZXNpemUmJnRoaXMucmVzaXplKHtvcmlnaW5hbEV2ZW50OmV9KS5fdXBkYXRlKCk7fV9vblZpc2liaWxpdHlDaGFuZ2UoKXtcImhpZGRlblwiPT09ZS53aW5kb3cuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlJiZ0aGlzLl92aXNpYmlsaXR5SGlkZGVuKys7fWdldCBzaG93VGlsZUJvdW5kYXJpZXMoKXtyZXR1cm4gISF0aGlzLl9zaG93VGlsZUJvdW5kYXJpZXN9c2V0IHNob3dUaWxlQm91bmRhcmllcyhlKXt0aGlzLl9zaG93VGlsZUJvdW5kYXJpZXMhPT1lJiYodGhpcy5fc2hvd1RpbGVCb3VuZGFyaWVzPWUsdGhpcy5fdXBkYXRlKCkpO31nZXQgc2hvd1RlcnJhaW5XaXJlZnJhbWUoKXtyZXR1cm4gISF0aGlzLl9zaG93VGVycmFpbldpcmVmcmFtZX1zZXQgc2hvd1RlcnJhaW5XaXJlZnJhbWUoZSl7dGhpcy5fc2hvd1RlcnJhaW5XaXJlZnJhbWUhPT1lJiYodGhpcy5fc2hvd1RlcnJhaW5XaXJlZnJhbWU9ZSx0aGlzLl91cGRhdGUoKSk7fWdldCBzcGVlZEluZGV4VGltaW5nKCl7cmV0dXJuICEhdGhpcy5fc3BlZWRJbmRleFRpbWluZ31zZXQgc3BlZWRJbmRleFRpbWluZyhlKXt0aGlzLl9zcGVlZEluZGV4VGltaW5nIT09ZSYmKHRoaXMuX3NwZWVkSW5kZXhUaW1pbmc9ZSx0aGlzLl91cGRhdGUoKSk7fWdldCBzaG93UGFkZGluZygpe3JldHVybiAhIXRoaXMuX3Nob3dQYWRkaW5nfXNldCBzaG93UGFkZGluZyhlKXt0aGlzLl9zaG93UGFkZGluZyE9PWUmJih0aGlzLl9zaG93UGFkZGluZz1lLHRoaXMuX3VwZGF0ZSgpKTt9Z2V0IHNob3dDb2xsaXNpb25Cb3hlcygpe3JldHVybiAhIXRoaXMuX3Nob3dDb2xsaXNpb25Cb3hlc31zZXQgc2hvd0NvbGxpc2lvbkJveGVzKGUpe3RoaXMuX3Nob3dDb2xsaXNpb25Cb3hlcyE9PWUmJih0aGlzLl9zaG93Q29sbGlzaW9uQm94ZXM9ZSxlP3RoaXMuc3R5bGUuX2dlbmVyYXRlQ29sbGlzaW9uQm94ZXMoKTp0aGlzLl91cGRhdGUoKSk7fWdldCBzaG93T3ZlcmRyYXdJbnNwZWN0b3IoKXtyZXR1cm4gISF0aGlzLl9zaG93T3ZlcmRyYXdJbnNwZWN0b3J9c2V0IHNob3dPdmVyZHJhd0luc3BlY3RvcihlKXt0aGlzLl9zaG93T3ZlcmRyYXdJbnNwZWN0b3IhPT1lJiYodGhpcy5fc2hvd092ZXJkcmF3SW5zcGVjdG9yPWUsdGhpcy5fdXBkYXRlKCkpO31nZXQgcmVwYWludCgpe3JldHVybiAhIXRoaXMuX3JlcGFpbnR9c2V0IHJlcGFpbnQoZSl7dGhpcy5fcmVwYWludCE9PWUmJih0aGlzLl9yZXBhaW50PWUsdGhpcy50cmlnZ2VyUmVwYWludCgpKTt9Z2V0IHZlcnRpY2VzKCl7cmV0dXJuICEhdGhpcy5fdmVydGljZXN9c2V0IHZlcnRpY2VzKGUpe3RoaXMuX3ZlcnRpY2VzPWUsdGhpcy5fdXBkYXRlKCk7fWdldCBzaG93VGlsZUFBQkJzKCl7cmV0dXJuICEhdGhpcy5fc2hvd1RpbGVBQUJCc31zZXQgc2hvd1RpbGVBQUJCcyhlKXt0aGlzLl9zaG93VGlsZUFBQkJzIT09ZSYmKHRoaXMuX3Nob3dUaWxlQUFCQnM9ZSxlJiZ0aGlzLl91cGRhdGUoKSk7fV9zZXRDYWNoZUxpbWl0cyh0LGkpe2Uuc2V0Q2FjaGVMaW1pdHModCxpKTt9Z2V0IHZlcnNpb24oKXtyZXR1cm4gZS52ZXJzaW9ufX0sTmF2aWdhdGlvbkNvbnRyb2w6Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5vcHRpb25zPWUuZXh0ZW5kKHt9LGxuLHQpLHRoaXMuX2NvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1jdHJsIG1hcGJveGdsLWN0cmwtZ3JvdXBcIiksdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLChlPT5lLnByZXZlbnREZWZhdWx0KCkpKSx0aGlzLm9wdGlvbnMuc2hvd1pvb20mJihlLmJpbmRBbGwoW1wiX3NldEJ1dHRvblRpdGxlXCIsXCJfdXBkYXRlWm9vbUJ1dHRvbnNcIl0sdGhpcyksdGhpcy5fem9vbUluQnV0dG9uPXRoaXMuX2NyZWF0ZUJ1dHRvbihcIm1hcGJveGdsLWN0cmwtem9vbS1pblwiLChlPT57dGhpcy5fbWFwJiZ0aGlzLl9tYXAuem9vbUluKHt9LHtvcmlnaW5hbEV2ZW50OmV9KTt9KSksbihcInNwYW5cIixcIm1hcGJveGdsLWN0cmwtaWNvblwiLHRoaXMuX3pvb21JbkJ1dHRvbikuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIiksdGhpcy5fem9vbU91dEJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24oXCJtYXBib3hnbC1jdHJsLXpvb20tb3V0XCIsKGU9Pnt0aGlzLl9tYXAmJnRoaXMuX21hcC56b29tT3V0KHt9LHtvcmlnaW5hbEV2ZW50OmV9KTt9KSksbihcInNwYW5cIixcIm1hcGJveGdsLWN0cmwtaWNvblwiLHRoaXMuX3pvb21PdXRCdXR0b24pLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpKSx0aGlzLm9wdGlvbnMuc2hvd0NvbXBhc3MmJihlLmJpbmRBbGwoW1wiX3JvdGF0ZUNvbXBhc3NBcnJvd1wiXSx0aGlzKSx0aGlzLl9jb21wYXNzPXRoaXMuX2NyZWF0ZUJ1dHRvbihcIm1hcGJveGdsLWN0cmwtY29tcGFzc1wiLChlPT57Y29uc3QgdD10aGlzLl9tYXA7dCYmKHRoaXMub3B0aW9ucy52aXN1YWxpemVQaXRjaD90LnJlc2V0Tm9ydGhQaXRjaCh7fSx7b3JpZ2luYWxFdmVudDplfSk6dC5yZXNldE5vcnRoKHt9LHtvcmlnaW5hbEV2ZW50OmV9KSk7fSkpLHRoaXMuX2NvbXBhc3NJY29uPW4oXCJzcGFuXCIsXCJtYXBib3hnbC1jdHJsLWljb25cIix0aGlzLl9jb21wYXNzKSx0aGlzLl9jb21wYXNzSWNvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSk7fV91cGRhdGVab29tQnV0dG9ucygpe2NvbnN0IGU9dGhpcy5fbWFwO2lmKCFlKXJldHVybjtjb25zdCB0PWUuZ2V0Wm9vbSgpLGk9dD09PWUuZ2V0TWF4Wm9vbSgpLG89dD09PWUuZ2V0TWluWm9vbSgpO3RoaXMuX3pvb21JbkJ1dHRvbi5kaXNhYmxlZD1pLHRoaXMuX3pvb21PdXRCdXR0b24uZGlzYWJsZWQ9byx0aGlzLl96b29tSW5CdXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLGkudG9TdHJpbmcoKSksdGhpcy5fem9vbU91dEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsby50b1N0cmluZygpKTt9X3JvdGF0ZUNvbXBhc3NBcnJvdygpe2NvbnN0IGU9dGhpcy5fbWFwO2lmKCFlKXJldHVybjtjb25zdCB0PXRoaXMub3B0aW9ucy52aXN1YWxpemVQaXRjaD9gc2NhbGUoJHsxL01hdGgucG93KE1hdGguY29zKGUudHJhbnNmb3JtLnBpdGNoKihNYXRoLlBJLzE4MCkpLC41KX0pIHJvdGF0ZVgoJHtlLnRyYW5zZm9ybS5waXRjaH1kZWcpIHJvdGF0ZVooJHtlLnRyYW5zZm9ybS5hbmdsZSooMTgwL01hdGguUEkpfWRlZylgOmByb3RhdGUoJHtlLnRyYW5zZm9ybS5hbmdsZSooMTgwL01hdGguUEkpfWRlZylgO2UuX3JlcXVlc3REb21UYXNrKCgoKT0+e3RoaXMuX2NvbXBhc3NJY29uJiYodGhpcy5fY29tcGFzc0ljb24uc3R5bGUudHJhbnNmb3JtPXQpO30pKTt9b25BZGQoZSl7cmV0dXJuIHRoaXMuX21hcD1lLHRoaXMub3B0aW9ucy5zaG93Wm9vbSYmKHRoaXMuX3NldEJ1dHRvblRpdGxlKHRoaXMuX3pvb21JbkJ1dHRvbixcIlpvb21JblwiKSx0aGlzLl9zZXRCdXR0b25UaXRsZSh0aGlzLl96b29tT3V0QnV0dG9uLFwiWm9vbU91dFwiKSxlLm9uKFwiem9vbVwiLHRoaXMuX3VwZGF0ZVpvb21CdXR0b25zKSx0aGlzLl91cGRhdGVab29tQnV0dG9ucygpKSx0aGlzLm9wdGlvbnMuc2hvd0NvbXBhc3MmJih0aGlzLl9zZXRCdXR0b25UaXRsZSh0aGlzLl9jb21wYXNzLFwiUmVzZXRCZWFyaW5nXCIpLHRoaXMub3B0aW9ucy52aXN1YWxpemVQaXRjaCYmZS5vbihcInBpdGNoXCIsdGhpcy5fcm90YXRlQ29tcGFzc0Fycm93KSxlLm9uKFwicm90YXRlXCIsdGhpcy5fcm90YXRlQ29tcGFzc0Fycm93KSx0aGlzLl9yb3RhdGVDb21wYXNzQXJyb3coKSx0aGlzLl9oYW5kbGVyPW5ldyBjbihlLHRoaXMuX2NvbXBhc3MsdGhpcy5vcHRpb25zLnZpc3VhbGl6ZVBpdGNoKSksdGhpcy5fY29udGFpbmVyfW9uUmVtb3ZlKCl7Y29uc3QgZT10aGlzLl9tYXA7ZSYmKHRoaXMuX2NvbnRhaW5lci5yZW1vdmUoKSx0aGlzLm9wdGlvbnMuc2hvd1pvb20mJmUub2ZmKFwiem9vbVwiLHRoaXMuX3VwZGF0ZVpvb21CdXR0b25zKSx0aGlzLm9wdGlvbnMuc2hvd0NvbXBhc3MmJih0aGlzLm9wdGlvbnMudmlzdWFsaXplUGl0Y2gmJmUub2ZmKFwicGl0Y2hcIix0aGlzLl9yb3RhdGVDb21wYXNzQXJyb3cpLGUub2ZmKFwicm90YXRlXCIsdGhpcy5fcm90YXRlQ29tcGFzc0Fycm93KSx0aGlzLl9oYW5kbGVyJiZ0aGlzLl9oYW5kbGVyLm9mZigpLHRoaXMuX2hhbmRsZXI9dm9pZCAwKSx0aGlzLl9tYXA9dm9pZCAwKTt9X2NyZWF0ZUJ1dHRvbihlLHQpe2NvbnN0IGk9bihcImJ1dHRvblwiLGUsdGhpcy5fY29udGFpbmVyKTtyZXR1cm4gaS50eXBlPVwiYnV0dG9uXCIsaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0KSxpfV9zZXRCdXR0b25UaXRsZShlLHQpe2lmKCF0aGlzLl9tYXApcmV0dXJuO2NvbnN0IGk9dGhpcy5fbWFwLl9nZXRVSVN0cmluZyhgTmF2aWdhdGlvbkNvbnRyb2wuJHt0fWApO2Uuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLGkpLGUuZmlyc3RFbGVtZW50Q2hpbGQmJmUuZmlyc3RFbGVtZW50Q2hpbGQuc2V0QXR0cmlidXRlKFwidGl0bGVcIixpKTt9fSxHZW9sb2NhdGVDb250cm9sOmNsYXNzIGV4dGVuZHMgZS5FdmVudGVke2NvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5vcHRpb25zPWUuZXh0ZW5kKHtnZW9sb2NhdGlvbjplLndpbmRvdy5uYXZpZ2F0b3IuZ2VvbG9jYXRpb259LGhuLHQpLGUuYmluZEFsbChbXCJfb25TdWNjZXNzXCIsXCJfb25FcnJvclwiLFwiX29uWm9vbVwiLFwiX2ZpbmlzaFwiLFwiX3NldHVwVUlcIixcIl91cGRhdGVDYW1lcmFcIixcIl91cGRhdGVNYXJrZXJcIixcIl91cGRhdGVNYXJrZXJSb3RhdGlvblwiLFwiX29uRGV2aWNlT3JpZW50YXRpb25cIl0sdGhpcyksdGhpcy5fdXBkYXRlTWFya2VyUm90YXRpb25UaHJvdHRsZWQ9WW8odGhpcy5fdXBkYXRlTWFya2VyUm90YXRpb24sMjApLHRoaXMuX251bWJlck9mV2F0Y2hlcz0wO31vbkFkZChlKXtyZXR1cm4gdGhpcy5fbWFwPWUsdGhpcy5fY29udGFpbmVyPW4oXCJkaXZcIixcIm1hcGJveGdsLWN0cmwgbWFwYm94Z2wtY3RybC1ncm91cFwiKSx0aGlzLl9jaGVja0dlb2xvY2F0aW9uU3VwcG9ydCh0aGlzLl9zZXR1cFVJKSx0aGlzLl9jb250YWluZXJ9b25SZW1vdmUoKXt2b2lkIDAhPT10aGlzLl9nZW9sb2NhdGlvbldhdGNoSUQmJih0aGlzLm9wdGlvbnMuZ2VvbG9jYXRpb24uY2xlYXJXYXRjaCh0aGlzLl9nZW9sb2NhdGlvbldhdGNoSUQpLHRoaXMuX2dlb2xvY2F0aW9uV2F0Y2hJRD12b2lkIDApLHRoaXMub3B0aW9ucy5zaG93VXNlckxvY2F0aW9uJiZ0aGlzLl91c2VyTG9jYXRpb25Eb3RNYXJrZXImJnRoaXMuX3VzZXJMb2NhdGlvbkRvdE1hcmtlci5yZW1vdmUoKSx0aGlzLm9wdGlvbnMuc2hvd0FjY3VyYWN5Q2lyY2xlJiZ0aGlzLl9hY2N1cmFjeUNpcmNsZU1hcmtlciYmdGhpcy5fYWNjdXJhY3lDaXJjbGVNYXJrZXIucmVtb3ZlKCksdGhpcy5fY29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX21hcC5vZmYoXCJ6b29tXCIsdGhpcy5fb25ab29tKSx0aGlzLl9tYXA9dm9pZCAwLHRoaXMuX251bWJlck9mV2F0Y2hlcz0wLHRoaXMuX25vVGltZW91dD0hMTt9X2NoZWNrR2VvbG9jYXRpb25TdXBwb3J0KHQpe2NvbnN0IGk9KGU9ISF0aGlzLm9wdGlvbnMuZ2VvbG9jYXRpb24pPT57dGhpcy5fc3VwcG9ydHNHZW9sb2NhdGlvbj1lLHQoZSk7fTt2b2lkIDAhPT10aGlzLl9zdXBwb3J0c0dlb2xvY2F0aW9uP3QodGhpcy5fc3VwcG9ydHNHZW9sb2NhdGlvbik6dm9pZCAwIT09ZS53aW5kb3cubmF2aWdhdG9yLnBlcm1pc3Npb25zP2Uud2luZG93Lm5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7bmFtZTpcImdlb2xvY2F0aW9uXCJ9KS50aGVuKChlPT5pKFwiZGVuaWVkXCIhPT1lLnN0YXRlKSkpLmNhdGNoKCgoKT0+aSgpKSk6aSgpO31faXNPdXRPZk1hcE1heEJvdW5kcyhlKXtjb25zdCB0PXRoaXMuX21hcC5nZXRNYXhCb3VuZHMoKSxpPWUuY29vcmRzO3JldHVybiAhIXQmJihpLmxvbmdpdHVkZTx0LmdldFdlc3QoKXx8aS5sb25naXR1ZGU+dC5nZXRFYXN0KCl8fGkubGF0aXR1ZGU8dC5nZXRTb3V0aCgpfHxpLmxhdGl0dWRlPnQuZ2V0Tm9ydGgoKSl9X3NldEVycm9yU3RhdGUoKXtzd2l0Y2godGhpcy5fd2F0Y2hTdGF0ZSl7Y2FzZVwiV0FJVElOR19BQ1RJVkVcIjp0aGlzLl93YXRjaFN0YXRlPVwiQUNUSVZFX0VSUk9SXCIsdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmVcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmUtZXJyb3JcIik7YnJlYWs7Y2FzZVwiQUNUSVZFX0xPQ0tcIjp0aGlzLl93YXRjaFN0YXRlPVwiQUNUSVZFX0VSUk9SXCIsdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmVcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmUtZXJyb3JcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpO2JyZWFrO2Nhc2VcIkJBQ0tHUk9VTkRcIjp0aGlzLl93YXRjaFN0YXRlPVwiQkFDS0dST1VORF9FUlJPUlwiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZFwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmQtZXJyb3JcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpO319X29uU3VjY2Vzcyh0KXtpZih0aGlzLl9tYXApe2lmKHRoaXMuX2lzT3V0T2ZNYXBNYXhCb3VuZHModCkpcmV0dXJuIHRoaXMuX3NldEVycm9yU3RhdGUoKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJvdXRvZm1heGJvdW5kc1wiLHQpKSx0aGlzLl91cGRhdGVNYXJrZXIoKSx2b2lkIHRoaXMuX2ZpbmlzaCgpO2lmKHRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbilzd2l0Y2godGhpcy5fbGFzdEtub3duUG9zaXRpb249dCx0aGlzLl93YXRjaFN0YXRlKXtjYXNlXCJXQUlUSU5HX0FDVElWRVwiOmNhc2VcIkFDVElWRV9MT0NLXCI6Y2FzZVwiQUNUSVZFX0VSUk9SXCI6dGhpcy5fd2F0Y2hTdGF0ZT1cIkFDVElWRV9MT0NLXCIsdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlLWVycm9yXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlXCIpO2JyZWFrO2Nhc2VcIkJBQ0tHUk9VTkRcIjpjYXNlXCJCQUNLR1JPVU5EX0VSUk9SXCI6dGhpcy5fd2F0Y2hTdGF0ZT1cIkJBQ0tHUk9VTkRcIix0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLXdhaXRpbmdcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1iYWNrZ3JvdW5kLWVycm9yXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZFwiKTt9dGhpcy5vcHRpb25zLnNob3dVc2VyTG9jYXRpb24mJlwiT0ZGXCIhPT10aGlzLl93YXRjaFN0YXRlJiZ0aGlzLl91cGRhdGVNYXJrZXIodCksdGhpcy5vcHRpb25zLnRyYWNrVXNlckxvY2F0aW9uJiZcIkFDVElWRV9MT0NLXCIhPT10aGlzLl93YXRjaFN0YXRlfHx0aGlzLl91cGRhdGVDYW1lcmEodCksdGhpcy5vcHRpb25zLnNob3dVc2VyTG9jYXRpb24mJnRoaXMuX2RvdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLXVzZXItbG9jYXRpb24tZG90LXN0YWxlXCIpLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImdlb2xvY2F0ZVwiLHQpKSx0aGlzLl9maW5pc2goKTt9fV91cGRhdGVDYW1lcmEodCl7Y29uc3QgaT1uZXcgZS5MbmdMYXQodC5jb29yZHMubG9uZ2l0dWRlLHQuY29vcmRzLmxhdGl0dWRlKSxvPXQuY29vcmRzLmFjY3VyYWN5LHI9dGhpcy5fbWFwLmdldEJlYXJpbmcoKSxuPWUuZXh0ZW5kKHtiZWFyaW5nOnJ9LHRoaXMub3B0aW9ucy5maXRCb3VuZHNPcHRpb25zKTt0aGlzLl9tYXAuZml0Qm91bmRzKGkudG9Cb3VuZHMobyksbix7Z2VvbG9jYXRlU291cmNlOiEwfSk7fV91cGRhdGVNYXJrZXIodCl7aWYodCl7Y29uc3QgaT1uZXcgZS5MbmdMYXQodC5jb29yZHMubG9uZ2l0dWRlLHQuY29vcmRzLmxhdGl0dWRlKTt0aGlzLl9hY2N1cmFjeUNpcmNsZU1hcmtlci5zZXRMbmdMYXQoaSkuYWRkVG8odGhpcy5fbWFwKSx0aGlzLl91c2VyTG9jYXRpb25Eb3RNYXJrZXIuc2V0TG5nTGF0KGkpLmFkZFRvKHRoaXMuX21hcCksdGhpcy5fYWNjdXJhY3k9dC5jb29yZHMuYWNjdXJhY3ksdGhpcy5vcHRpb25zLnNob3dVc2VyTG9jYXRpb24mJnRoaXMub3B0aW9ucy5zaG93QWNjdXJhY3lDaXJjbGUmJnRoaXMuX3VwZGF0ZUNpcmNsZVJhZGl1cygpO31lbHNlIHRoaXMuX3VzZXJMb2NhdGlvbkRvdE1hcmtlci5yZW1vdmUoKSx0aGlzLl9hY2N1cmFjeUNpcmNsZU1hcmtlci5yZW1vdmUoKTt9X3VwZGF0ZUNpcmNsZVJhZGl1cygpe2NvbnN0IHQ9dGhpcy5fbWFwLnRyYW5zZm9ybSxpPWUubWVyY2F0b3JaZnJvbUFsdGl0dWRlKDEsdC5fY2VudGVyLmxhdCkqdC53b3JsZFNpemUsbz1NYXRoLmNlaWwoMip0aGlzLl9hY2N1cmFjeSppKTt0aGlzLl9jaXJjbGVFbGVtZW50LnN0eWxlLndpZHRoPWAke299cHhgLHRoaXMuX2NpcmNsZUVsZW1lbnQuc3R5bGUuaGVpZ2h0PWAke299cHhgO31fb25ab29tKCl7dGhpcy5vcHRpb25zLnNob3dVc2VyTG9jYXRpb24mJnRoaXMub3B0aW9ucy5zaG93QWNjdXJhY3lDaXJjbGUmJnRoaXMuX3VwZGF0ZUNpcmNsZVJhZGl1cygpO31fdXBkYXRlTWFya2VyUm90YXRpb24oKXt0aGlzLl91c2VyTG9jYXRpb25Eb3RNYXJrZXImJlwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLl9oZWFkaW5nPyh0aGlzLl91c2VyTG9jYXRpb25Eb3RNYXJrZXIuc2V0Um90YXRpb24odGhpcy5faGVhZGluZyksdGhpcy5fZG90RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtdXNlci1sb2NhdGlvbi1zaG93LWhlYWRpbmdcIikpOih0aGlzLl9kb3RFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC11c2VyLWxvY2F0aW9uLXNob3ctaGVhZGluZ1wiKSx0aGlzLl91c2VyTG9jYXRpb25Eb3RNYXJrZXIuc2V0Um90YXRpb24oMCkpO31fb25FcnJvcih0KXtpZih0aGlzLl9tYXApe2lmKHRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbilpZigxPT09dC5jb2RlKXt0aGlzLl93YXRjaFN0YXRlPVwiT0ZGXCIsdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlLWVycm9yXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZFwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmQtZXJyb3JcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmRpc2FibGVkPSEwO2NvbnN0IGU9dGhpcy5fbWFwLl9nZXRVSVN0cmluZyhcIkdlb2xvY2F0ZUNvbnRyb2wuTG9jYXRpb25Ob3RBdmFpbGFibGVcIik7dGhpcy5fZ2VvbG9jYXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixlKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uZmlyc3RFbGVtZW50Q2hpbGQmJnRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5maXJzdEVsZW1lbnRDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGUpLHZvaWQgMCE9PXRoaXMuX2dlb2xvY2F0aW9uV2F0Y2hJRCYmdGhpcy5fY2xlYXJXYXRjaCgpO31lbHNlIHtpZigzPT09dC5jb2RlJiZ0aGlzLl9ub1RpbWVvdXQpcmV0dXJuO3RoaXMuX3NldEVycm9yU3RhdGUoKTt9XCJPRkZcIiE9PXRoaXMuX3dhdGNoU3RhdGUmJnRoaXMub3B0aW9ucy5zaG93VXNlckxvY2F0aW9uJiZ0aGlzLl9kb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC11c2VyLWxvY2F0aW9uLWRvdC1zdGFsZVwiKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJlcnJvclwiLHQpKSx0aGlzLl9maW5pc2goKTt9fV9maW5pc2goKXt0aGlzLl90aW1lb3V0SWQmJmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpLHRoaXMuX3RpbWVvdXRJZD12b2lkIDA7fV9zZXR1cFVJKHQpe2lmKHZvaWQgMCE9PXRoaXMuX21hcCl7aWYodGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLChlPT5lLnByZXZlbnREZWZhdWx0KCkpKSx0aGlzLl9nZW9sb2NhdGVCdXR0b249bihcImJ1dHRvblwiLFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGVcIix0aGlzLl9jb250YWluZXIpLG4oXCJzcGFuXCIsXCJtYXBib3hnbC1jdHJsLWljb25cIix0aGlzLl9nZW9sb2NhdGVCdXR0b24pLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi50eXBlPVwiYnV0dG9uXCIsITE9PT10KXtlLndhcm5PbmNlKFwiR2VvbG9jYXRpb24gc3VwcG9ydCBpcyBub3QgYXZhaWxhYmxlIHNvIHRoZSBHZW9sb2NhdGVDb250cm9sIHdpbGwgYmUgZGlzYWJsZWQuXCIpO2NvbnN0IHQ9dGhpcy5fbWFwLl9nZXRVSVN0cmluZyhcIkdlb2xvY2F0ZUNvbnRyb2wuTG9jYXRpb25Ob3RBdmFpbGFibGVcIik7dGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmRpc2FibGVkPSEwLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsdCksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmZpcnN0RWxlbWVudENoaWxkJiZ0aGlzLl9nZW9sb2NhdGVCdXR0b24uZmlyc3RFbGVtZW50Q2hpbGQuc2V0QXR0cmlidXRlKFwidGl0bGVcIix0KTt9ZWxzZSB7Y29uc3QgZT10aGlzLl9tYXAuX2dldFVJU3RyaW5nKFwiR2VvbG9jYXRlQ29udHJvbC5GaW5kTXlMb2NhdGlvblwiKTt0aGlzLl9nZW9sb2NhdGVCdXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLGUpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5maXJzdEVsZW1lbnRDaGlsZCYmdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmZpcnN0RWxlbWVudENoaWxkLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsZSk7fXRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbiYmKHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIixcImZhbHNlXCIpLHRoaXMuX3dhdGNoU3RhdGU9XCJPRkZcIiksdGhpcy5vcHRpb25zLnNob3dVc2VyTG9jYXRpb24mJih0aGlzLl9kb3RFbGVtZW50PW4oXCJkaXZcIixcIm1hcGJveGdsLXVzZXItbG9jYXRpb25cIiksdGhpcy5fZG90RWxlbWVudC5hcHBlbmRDaGlsZChuKFwiZGl2XCIsXCJtYXBib3hnbC11c2VyLWxvY2F0aW9uLWRvdFwiKSksdGhpcy5fZG90RWxlbWVudC5hcHBlbmRDaGlsZChuKFwiZGl2XCIsXCJtYXBib3hnbC11c2VyLWxvY2F0aW9uLWhlYWRpbmdcIikpLHRoaXMuX3VzZXJMb2NhdGlvbkRvdE1hcmtlcj1uZXcgZW4oe2VsZW1lbnQ6dGhpcy5fZG90RWxlbWVudCxyb3RhdGlvbkFsaWdubWVudDpcIm1hcFwiLHBpdGNoQWxpZ25tZW50OlwibWFwXCJ9KSx0aGlzLl9jaXJjbGVFbGVtZW50PW4oXCJkaXZcIixcIm1hcGJveGdsLXVzZXItbG9jYXRpb24tYWNjdXJhY3ktY2lyY2xlXCIpLHRoaXMuX2FjY3VyYWN5Q2lyY2xlTWFya2VyPW5ldyBlbih7ZWxlbWVudDp0aGlzLl9jaXJjbGVFbGVtZW50LHBpdGNoQWxpZ25tZW50OlwibWFwXCJ9KSx0aGlzLm9wdGlvbnMudHJhY2tVc2VyTG9jYXRpb24mJih0aGlzLl93YXRjaFN0YXRlPVwiT0ZGXCIpLHRoaXMuX21hcC5vbihcInpvb21cIix0aGlzLl9vblpvb20pKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy50cmlnZ2VyLmJpbmQodGhpcykpLHRoaXMuX3NldHVwPSEwLHRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbiYmdGhpcy5fbWFwLm9uKFwibW92ZXN0YXJ0XCIsKHQ9Pnt0Lmdlb2xvY2F0ZVNvdXJjZXx8XCJBQ1RJVkVfTE9DS1wiIT09dGhpcy5fd2F0Y2hTdGF0ZXx8dC5vcmlnaW5hbEV2ZW50JiZcInJlc2l6ZVwiPT09dC5vcmlnaW5hbEV2ZW50LnR5cGV8fCh0aGlzLl93YXRjaFN0YXRlPVwiQkFDS0dST1VORFwiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZFwiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWFjdGl2ZVwiKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJ0cmFja3VzZXJsb2NhdGlvbmVuZFwiKSkpO30pKTt9fV9vbkRldmljZU9yaWVudGF0aW9uKGUpe3RoaXMuX3VzZXJMb2NhdGlvbkRvdE1hcmtlciYmKGUud2Via2l0Q29tcGFzc0hlYWRpbmc/dGhpcy5faGVhZGluZz1lLndlYmtpdENvbXBhc3NIZWFkaW5nOiEwPT09ZS5hYnNvbHV0ZSYmKHRoaXMuX2hlYWRpbmc9LTEqZS5hbHBoYSksdGhpcy5fdXBkYXRlTWFya2VyUm90YXRpb25UaHJvdHRsZWQoKSk7fXRyaWdnZXIoKXtpZighdGhpcy5fc2V0dXApcmV0dXJuIGUud2Fybk9uY2UoXCJHZW9sb2NhdGUgY29udHJvbCB0cmlnZ2VyZWQgYmVmb3JlIGFkZGVkIHRvIGEgbWFwXCIpLCExO2lmKHRoaXMub3B0aW9ucy50cmFja1VzZXJMb2NhdGlvbil7c3dpdGNoKHRoaXMuX3dhdGNoU3RhdGUpe2Nhc2VcIk9GRlwiOnRoaXMuX3dhdGNoU3RhdGU9XCJXQUlUSU5HX0FDVElWRVwiLHRoaXMuZmlyZShuZXcgZS5FdmVudChcInRyYWNrdXNlcmxvY2F0aW9uc3RhcnRcIikpO2JyZWFrO2Nhc2VcIldBSVRJTkdfQUNUSVZFXCI6Y2FzZVwiQUNUSVZFX0xPQ0tcIjpjYXNlXCJBQ1RJVkVfRVJST1JcIjpjYXNlXCJCQUNLR1JPVU5EX0VSUk9SXCI6dGhpcy5fbnVtYmVyT2ZXYXRjaGVzLS0sdGhpcy5fbm9UaW1lb3V0PSExLHRoaXMuX3dhdGNoU3RhdGU9XCJPRkZcIix0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLXdhaXRpbmdcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmVcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmUtZXJyb3JcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1iYWNrZ3JvdW5kXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZC1lcnJvclwiKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJ0cmFja3VzZXJsb2NhdGlvbmVuZFwiKSk7YnJlYWs7Y2FzZVwiQkFDS0dST1VORFwiOnRoaXMuX3dhdGNoU3RhdGU9XCJBQ1RJVkVfTE9DS1wiLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYmFja2dyb3VuZFwiKSx0aGlzLl9sYXN0S25vd25Qb3NpdGlvbiYmdGhpcy5fdXBkYXRlQ2FtZXJhKHRoaXMuX2xhc3RLbm93blBvc2l0aW9uKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJ0cmFja3VzZXJsb2NhdGlvbnN0YXJ0XCIpKTt9c3dpdGNoKHRoaXMuX3dhdGNoU3RhdGUpe2Nhc2VcIldBSVRJTkdfQUNUSVZFXCI6dGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlXCIpO2JyZWFrO2Nhc2VcIkFDVElWRV9MT0NLXCI6dGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS1hY3RpdmVcIik7YnJlYWs7Y2FzZVwiQUNUSVZFX0VSUk9SXCI6dGhpcy5fZ2VvbG9jYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtYXBib3hnbC1jdHJsLWdlb2xvY2F0ZS13YWl0aW5nXCIpLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtYWN0aXZlLWVycm9yXCIpO2JyZWFrO2Nhc2VcIkJBQ0tHUk9VTkRcIjp0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmRcIik7YnJlYWs7Y2FzZVwiQkFDS0dST1VORF9FUlJPUlwiOnRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtd2FpdGluZ1wiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLWJhY2tncm91bmQtZXJyb3JcIik7fWlmKFwiT0ZGXCI9PT10aGlzLl93YXRjaFN0YXRlJiZ2b2lkIDAhPT10aGlzLl9nZW9sb2NhdGlvbldhdGNoSUQpdGhpcy5fY2xlYXJXYXRjaCgpO2Vsc2UgaWYodm9pZCAwPT09dGhpcy5fZ2VvbG9jYXRpb25XYXRjaElEKXtsZXQgZTt0aGlzLl9nZW9sb2NhdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLWN0cmwtZ2VvbG9jYXRlLXdhaXRpbmdcIiksdGhpcy5fZ2VvbG9jYXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtcHJlc3NlZFwiLFwidHJ1ZVwiKSx0aGlzLl9udW1iZXJPZldhdGNoZXMrKyx0aGlzLl9udW1iZXJPZldhdGNoZXM+MT8oZT17bWF4aW11bUFnZTo2ZTUsdGltZW91dDowfSx0aGlzLl9ub1RpbWVvdXQ9ITApOihlPXRoaXMub3B0aW9ucy5wb3NpdGlvbk9wdGlvbnMsdGhpcy5fbm9UaW1lb3V0PSExKSx0aGlzLl9nZW9sb2NhdGlvbldhdGNoSUQ9dGhpcy5vcHRpb25zLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24odGhpcy5fb25TdWNjZXNzLHRoaXMuX29uRXJyb3IsZSksdGhpcy5vcHRpb25zLnNob3dVc2VySGVhZGluZyYmdGhpcy5fYWRkRGV2aWNlT3JpZW50YXRpb25MaXN0ZW5lcigpO319ZWxzZSB0aGlzLm9wdGlvbnMuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHRoaXMuX29uU3VjY2Vzcyx0aGlzLl9vbkVycm9yLHRoaXMub3B0aW9ucy5wb3NpdGlvbk9wdGlvbnMpLHRoaXMuX3RpbWVvdXRJZD1zZXRUaW1lb3V0KHRoaXMuX2ZpbmlzaCwxZTQpO3JldHVybiAhMH1fYWRkRGV2aWNlT3JpZW50YXRpb25MaXN0ZW5lcigpe2NvbnN0IHQ9KCk9PntlLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25kZXZpY2VvcmllbnRhdGlvbmFic29sdXRlXCJpbiBlLndpbmRvdz9cImRldmljZW9yaWVudGF0aW9uYWJzb2x1dGVcIjpcImRldmljZW9yaWVudGF0aW9uXCIsdGhpcy5fb25EZXZpY2VPcmllbnRhdGlvbik7fTt2b2lkIDAhPT1lLndpbmRvdy5EZXZpY2VNb3Rpb25FdmVudCYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS53aW5kb3cuRGV2aWNlTW90aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24/RGV2aWNlT3JpZW50YXRpb25FdmVudC5yZXF1ZXN0UGVybWlzc2lvbigpLnRoZW4oKGU9PntcImdyYW50ZWRcIj09PWUmJnQoKTt9KSkuY2F0Y2goY29uc29sZS5lcnJvcik6dCgpO31fY2xlYXJXYXRjaCgpe3RoaXMub3B0aW9ucy5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMuX2dlb2xvY2F0aW9uV2F0Y2hJRCksZS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uXCIsdGhpcy5fb25EZXZpY2VPcmllbnRhdGlvbiksZS53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uYWJzb2x1dGVcIix0aGlzLl9vbkRldmljZU9yaWVudGF0aW9uKSx0aGlzLl9nZW9sb2NhdGlvbldhdGNoSUQ9dm9pZCAwLHRoaXMuX2dlb2xvY2F0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWFwYm94Z2wtY3RybC1nZW9sb2NhdGUtd2FpdGluZ1wiKSx0aGlzLl9nZW9sb2NhdGVCdXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIsXCJmYWxzZVwiKSx0aGlzLm9wdGlvbnMuc2hvd1VzZXJMb2NhdGlvbiYmdGhpcy5fdXBkYXRlTWFya2VyKG51bGwpO319LEF0dHJpYnV0aW9uQ29udHJvbDpIcixTY2FsZUNvbnRyb2w6Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5vcHRpb25zPWUuZXh0ZW5kKHt9LHVuLHQpLHRoaXMuX2lzTnVtYmVyRm9ybWF0U3VwcG9ydGVkPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoXCJlblwiLHtzdHlsZTpcInVuaXRcIix1bml0RGlzcGxheTpcInNob3J0XCIsdW5pdDpcIm1ldGVyXCJ9KSwhMH1jYXRjaChlKXtyZXR1cm4gITF9fSgpLGUuYmluZEFsbChbXCJfdXBkYXRlXCIsXCJfc2V0U2NhbGVcIixcInNldFVuaXRcIl0sdGhpcyk7fWdldERlZmF1bHRQb3NpdGlvbigpe3JldHVybiBcImJvdHRvbS1sZWZ0XCJ9X3VwZGF0ZSgpe2NvbnN0IGU9dGhpcy5vcHRpb25zLm1heFdpZHRofHwxMDAsdD10aGlzLl9tYXAsaT10Ll9jb250YWluZXJIZWlnaHQvMixvPXQuX2NvbnRhaW5lcldpZHRoLzItZS8yLHI9dC51bnByb2plY3QoW28saV0pLG49dC51bnByb2plY3QoW28rZSxpXSkscz1yLmRpc3RhbmNlVG8obik7aWYoXCJpbXBlcmlhbFwiPT09dGhpcy5vcHRpb25zLnVuaXQpe2NvbnN0IHQ9My4yODA4KnM7dD41MjgwP3RoaXMuX3NldFNjYWxlKGUsdC81MjgwLFwibWlsZVwiKTp0aGlzLl9zZXRTY2FsZShlLHQsXCJmb290XCIpO31lbHNlIFwibmF1dGljYWxcIj09PXRoaXMub3B0aW9ucy51bml0P3RoaXMuX3NldFNjYWxlKGUscy8xODUyLFwibmF1dGljYWwtbWlsZVwiKTpzPj0xZTM/dGhpcy5fc2V0U2NhbGUoZSxzLzFlMyxcImtpbG9tZXRlclwiKTp0aGlzLl9zZXRTY2FsZShlLHMsXCJtZXRlclwiKTt9X3NldFNjYWxlKGUsdCxpKXt0aGlzLl9tYXAuX3JlcXVlc3REb21UYXNrKCgoKT0+e2NvbnN0IG89ZnVuY3Rpb24oZSl7Y29uc3QgdD1NYXRoLnBvdygxMCxgJHtNYXRoLmZsb29yKGUpfWAubGVuZ3RoLTEpO2xldCBpPWUvdDtyZXR1cm4gaT1pPj0xMD8xMDppPj01PzU6aT49Mz8zOmk+PTI/MjppPj0xPzE6ZnVuY3Rpb24oZSl7Y29uc3QgdD1NYXRoLnBvdygxMCxNYXRoLmNlaWwoLU1hdGgubG9nKGUpL01hdGguTE4xMCkpO3JldHVybiBNYXRoLnJvdW5kKGUqdCkvdH0oaSksdCppfSh0KSxyPW8vdDt0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MPXRoaXMuX2lzTnVtYmVyRm9ybWF0U3VwcG9ydGVkJiZcIm5hdXRpY2FsLW1pbGVcIiE9PWk/bmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMuX2xhbmd1YWdlLHtzdHlsZTpcInVuaXRcIix1bml0RGlzcGxheTpcInNob3J0XCIsdW5pdDppfSkuZm9ybWF0KG8pOmAke299Jm5ic3A7JHtfbltpXX1gLHRoaXMuX2NvbnRhaW5lci5zdHlsZS53aWR0aD1lKnIrXCJweFwiO30pKTt9b25BZGQoZSl7cmV0dXJuIHRoaXMuX21hcD1lLHRoaXMuX2xhbmd1YWdlPWUuZ2V0TGFuZ3VhZ2UoKSx0aGlzLl9jb250YWluZXI9bihcImRpdlwiLFwibWFwYm94Z2wtY3RybCBtYXBib3hnbC1jdHJsLXNjYWxlXCIsZS5nZXRDb250YWluZXIoKSksdGhpcy5fY29udGFpbmVyLmRpcj1cImF1dG9cIix0aGlzLl9tYXAub24oXCJtb3ZlXCIsdGhpcy5fdXBkYXRlKSx0aGlzLl91cGRhdGUoKSx0aGlzLl9jb250YWluZXJ9b25SZW1vdmUoKXt0aGlzLl9jb250YWluZXIucmVtb3ZlKCksdGhpcy5fbWFwLm9mZihcIm1vdmVcIix0aGlzLl91cGRhdGUpLHRoaXMuX21hcD12b2lkIDA7fV9zZXRMYW5ndWFnZShlKXt0aGlzLl9sYW5ndWFnZT1lLHRoaXMuX3VwZGF0ZSgpO31zZXRVbml0KGUpe3RoaXMub3B0aW9ucy51bml0PWUsdGhpcy5fdXBkYXRlKCk7fX0sRnVsbHNjcmVlbkNvbnRyb2w6Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fZnVsbHNjcmVlbj0hMSx0JiZ0LmNvbnRhaW5lciYmKHQuY29udGFpbmVyIGluc3RhbmNlb2YgZS53aW5kb3cuSFRNTEVsZW1lbnQ/dGhpcy5fY29udGFpbmVyPXQuY29udGFpbmVyOmUud2Fybk9uY2UoXCJGdWxsIHNjcmVlbiBjb250cm9sICdjb250YWluZXInIG11c3QgYmUgYSBET00gZWxlbWVudC5cIikpLGUuYmluZEFsbChbXCJfb25DbGlja0Z1bGxzY3JlZW5cIixcIl9jaGFuZ2VJY29uXCJdLHRoaXMpLFwib25mdWxsc2NyZWVuY2hhbmdlXCJpbiBlLndpbmRvdy5kb2N1bWVudD90aGlzLl9mdWxsc2NyZWVuY2hhbmdlPVwiZnVsbHNjcmVlbmNoYW5nZVwiOlwib253ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCJpbiBlLndpbmRvdy5kb2N1bWVudCYmKHRoaXMuX2Z1bGxzY3JlZW5jaGFuZ2U9XCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIpO31vbkFkZCh0KXtyZXR1cm4gdGhpcy5fbWFwPXQsdGhpcy5fY29udGFpbmVyfHwodGhpcy5fY29udGFpbmVyPXRoaXMuX21hcC5nZXRDb250YWluZXIoKSksdGhpcy5fY29udHJvbENvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1jdHJsIG1hcGJveGdsLWN0cmwtZ3JvdXBcIiksdGhpcy5fY2hlY2tGdWxsc2NyZWVuU3VwcG9ydCgpP3RoaXMuX3NldHVwVUkoKToodGhpcy5fY29udHJvbENvbnRhaW5lci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGUud2Fybk9uY2UoXCJUaGlzIGRldmljZSBkb2VzIG5vdCBzdXBwb3J0IGZ1bGxzY3JlZW4gbW9kZS5cIikpLHRoaXMuX2NvbnRyb2xDb250YWluZXJ9b25SZW1vdmUoKXt0aGlzLl9jb250cm9sQ29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX21hcD1udWxsLGUud2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fZnVsbHNjcmVlbmNoYW5nZSx0aGlzLl9jaGFuZ2VJY29uKTt9X2NoZWNrRnVsbHNjcmVlblN1cHBvcnQoKXtyZXR1cm4gISghZS53aW5kb3cuZG9jdW1lbnQuZnVsbHNjcmVlbkVuYWJsZWQmJiFlLndpbmRvdy5kb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCl9X3NldHVwVUkoKXtjb25zdCB0PXRoaXMuX2Z1bGxzY3JlZW5CdXR0b249bihcImJ1dHRvblwiLFwibWFwYm94Z2wtY3RybC1mdWxsc2NyZWVuXCIsdGhpcy5fY29udHJvbENvbnRhaW5lcik7bihcInNwYW5cIixcIm1hcGJveGdsLWN0cmwtaWNvblwiLHQpLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLHQudHlwZT1cImJ1dHRvblwiLHRoaXMuX3VwZGF0ZVRpdGxlKCksdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrRnVsbHNjcmVlbiksZS53aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9mdWxsc2NyZWVuY2hhbmdlLHRoaXMuX2NoYW5nZUljb24pO31fdXBkYXRlVGl0bGUoKXtjb25zdCBlPXRoaXMuX2dldFRpdGxlKCk7dGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsZSksdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5maXJzdEVsZW1lbnRDaGlsZCYmdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5maXJzdEVsZW1lbnRDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGUpO31fZ2V0VGl0bGUoKXtyZXR1cm4gdGhpcy5fbWFwLl9nZXRVSVN0cmluZyh0aGlzLl9pc0Z1bGxzY3JlZW4oKT9cIkZ1bGxzY3JlZW5Db250cm9sLkV4aXRcIjpcIkZ1bGxzY3JlZW5Db250cm9sLkVudGVyXCIpfV9pc0Z1bGxzY3JlZW4oKXtyZXR1cm4gdGhpcy5fZnVsbHNjcmVlbn1fY2hhbmdlSWNvbigpeyhlLndpbmRvdy5kb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudHx8ZS53aW5kb3cuZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQpPT09dGhpcy5fY29udGFpbmVyIT09dGhpcy5fZnVsbHNjcmVlbiYmKHRoaXMuX2Z1bGxzY3JlZW49IXRoaXMuX2Z1bGxzY3JlZW4sdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwibWFwYm94Z2wtY3RybC1zaHJpbmtcIiksdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwibWFwYm94Z2wtY3RybC1mdWxsc2NyZWVuXCIpLHRoaXMuX3VwZGF0ZVRpdGxlKCkpO31fb25DbGlja0Z1bGxzY3JlZW4oKXt0aGlzLl9pc0Z1bGxzY3JlZW4oKT9lLndpbmRvdy5kb2N1bWVudC5leGl0RnVsbHNjcmVlbj9lLndpbmRvdy5kb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOmUud2luZG93LmRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4mJmUud2luZG93LmRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTp0aGlzLl9jb250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4/dGhpcy5fY29udGFpbmVyLnJlcXVlc3RGdWxsc2NyZWVuKCk6dGhpcy5fY29udGFpbmVyLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuJiZ0aGlzLl9jb250YWluZXIud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTt9fSxQb3B1cDpjbGFzcyBleHRlbmRzIGUuRXZlbnRlZHtjb25zdHJ1Y3Rvcih0KXtzdXBlcigpLHRoaXMub3B0aW9ucz1lLmV4dGVuZChPYmplY3QuY3JlYXRlKHRuKSx0KSxlLmJpbmRBbGwoW1wiX3VwZGF0ZVwiLFwiX29uQ2xvc2VcIixcInJlbW92ZVwiLFwiX29uTW91c2VFdmVudFwiXSx0aGlzKSx0aGlzLl9jbGFzc0xpc3Q9bmV3IFNldCh0JiZ0LmNsYXNzTmFtZT90LmNsYXNzTmFtZS50cmltKCkuc3BsaXQoL1xccysvKTpbXSk7fWFkZFRvKHQpe3JldHVybiB0aGlzLl9tYXAmJnRoaXMucmVtb3ZlKCksdGhpcy5fbWFwPXQsdGhpcy5vcHRpb25zLmNsb3NlT25DbGljayYmdC5vbihcInByZWNsaWNrXCIsdGhpcy5fb25DbG9zZSksdGhpcy5vcHRpb25zLmNsb3NlT25Nb3ZlJiZ0Lm9uKFwibW92ZVwiLHRoaXMuX29uQ2xvc2UpLHQub24oXCJyZW1vdmVcIix0aGlzLnJlbW92ZSksdGhpcy5fdXBkYXRlKCksdC5fYWRkUG9wdXAodGhpcyksdGhpcy5fZm9jdXNGaXJzdEVsZW1lbnQoKSx0aGlzLl90cmFja1BvaW50ZXI/KHQub24oXCJtb3VzZW1vdmVcIix0aGlzLl9vbk1vdXNlRXZlbnQpLHQub24oXCJtb3VzZXVwXCIsdGhpcy5fb25Nb3VzZUV2ZW50KSx0Ll9jYW52YXNDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcGJveGdsLXRyYWNrLXBvaW50ZXJcIikpOnQub24oXCJtb3ZlXCIsdGhpcy5fdXBkYXRlKSx0aGlzLmZpcmUobmV3IGUuRXZlbnQoXCJvcGVuXCIpKSx0aGlzfWlzT3Blbigpe3JldHVybiAhIXRoaXMuX21hcH1yZW1vdmUoKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50LnJlbW92ZSgpLHRoaXMuX2NvbnRhaW5lciYmKHRoaXMuX2NvbnRhaW5lci5yZW1vdmUoKSx0aGlzLl9jb250YWluZXI9dm9pZCAwKTtjb25zdCB0PXRoaXMuX21hcDtyZXR1cm4gdCYmKHQub2ZmKFwibW92ZVwiLHRoaXMuX3VwZGF0ZSksdC5vZmYoXCJtb3ZlXCIsdGhpcy5fb25DbG9zZSksdC5vZmYoXCJwcmVjbGlja1wiLHRoaXMuX29uQ2xvc2UpLHQub2ZmKFwiY2xpY2tcIix0aGlzLl9vbkNsb3NlKSx0Lm9mZihcInJlbW92ZVwiLHRoaXMucmVtb3ZlKSx0Lm9mZihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW91c2VFdmVudCksdC5vZmYoXCJtb3VzZXVwXCIsdGhpcy5fb25Nb3VzZUV2ZW50KSx0Lm9mZihcImRyYWdcIix0aGlzLl9vbk1vdXNlRXZlbnQpLHQuX2NhbnZhc0NvbnRhaW5lciYmdC5fY2FudmFzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC10cmFjay1wb2ludGVyXCIpLHQuX3JlbW92ZVBvcHVwKHRoaXMpLHRoaXMuX21hcD12b2lkIDApLHRoaXMuZmlyZShuZXcgZS5FdmVudChcImNsb3NlXCIpKSx0aGlzfWdldExuZ0xhdCgpe3JldHVybiB0aGlzLl9sbmdMYXR9c2V0TG5nTGF0KHQpe3RoaXMuX2xuZ0xhdD1lLkxuZ0xhdC5jb252ZXJ0KHQpLHRoaXMuX3Bvcz1udWxsLHRoaXMuX3RyYWNrUG9pbnRlcj0hMSx0aGlzLl91cGRhdGUoKTtjb25zdCBpPXRoaXMuX21hcDtyZXR1cm4gaSYmKGkub24oXCJtb3ZlXCIsdGhpcy5fdXBkYXRlKSxpLm9mZihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW91c2VFdmVudCksaS5fY2FudmFzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJtYXBib3hnbC10cmFjay1wb2ludGVyXCIpKSx0aGlzfXRyYWNrUG9pbnRlcigpe3RoaXMuX3RyYWNrUG9pbnRlcj0hMCx0aGlzLl9wb3M9bnVsbCx0aGlzLl91cGRhdGUoKTtjb25zdCBlPXRoaXMuX21hcDtyZXR1cm4gZSYmKGUub2ZmKFwibW92ZVwiLHRoaXMuX3VwZGF0ZSksZS5vbihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW91c2VFdmVudCksZS5vbihcImRyYWdcIix0aGlzLl9vbk1vdXNlRXZlbnQpLGUuX2NhbnZhc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWFwYm94Z2wtdHJhY2stcG9pbnRlclwiKSksdGhpc31nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn1zZXRUZXh0KHQpe3JldHVybiB0aGlzLnNldERPTUNvbnRlbnQoZS53aW5kb3cuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCkpfXNldEhUTUwodCl7Y29uc3QgaT1lLndpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbz1lLndpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm9keVwiKTtsZXQgcjtmb3Ioby5pbm5lckhUTUw9dDtyPW8uZmlyc3RDaGlsZCxyOylpLmFwcGVuZENoaWxkKHIpO3JldHVybiB0aGlzLnNldERPTUNvbnRlbnQoaSl9Z2V0TWF4V2lkdGgoKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyJiZ0aGlzLl9jb250YWluZXIuc3R5bGUubWF4V2lkdGh9c2V0TWF4V2lkdGgoZSl7cmV0dXJuIHRoaXMub3B0aW9ucy5tYXhXaWR0aD1lLHRoaXMuX3VwZGF0ZSgpLHRoaXN9c2V0RE9NQ29udGVudChlKXtsZXQgdD10aGlzLl9jb250ZW50O2lmKHQpZm9yKDt0Lmhhc0NoaWxkTm9kZXMoKTspdC5maXJzdENoaWxkJiZ0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7ZWxzZSB0PXRoaXMuX2NvbnRlbnQ9bihcImRpdlwiLFwibWFwYm94Z2wtcG9wdXAtY29udGVudFwiLHRoaXMuX2NvbnRhaW5lcnx8dm9pZCAwKTtpZih0LmFwcGVuZENoaWxkKGUpLHRoaXMub3B0aW9ucy5jbG9zZUJ1dHRvbil7Y29uc3QgZT10aGlzLl9jbG9zZUJ1dHRvbj1uKFwiYnV0dG9uXCIsXCJtYXBib3hnbC1wb3B1cC1jbG9zZS1idXR0b25cIix0KTtlLnR5cGU9XCJidXR0b25cIixlLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixcIkNsb3NlIHBvcHVwXCIpLGUuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIiksZS5pbm5lckhUTUw9XCImIzIxNTtcIixlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xvc2UpO31yZXR1cm4gdGhpcy5fdXBkYXRlKCksdGhpcy5fZm9jdXNGaXJzdEVsZW1lbnQoKSx0aGlzfWFkZENsYXNzTmFtZShlKXtyZXR1cm4gdGhpcy5fY2xhc3NMaXN0LmFkZChlKSx0aGlzLl91cGRhdGVDbGFzc0xpc3QoKSx0aGlzfXJlbW92ZUNsYXNzTmFtZShlKXtyZXR1cm4gdGhpcy5fY2xhc3NMaXN0LmRlbGV0ZShlKSx0aGlzLl91cGRhdGVDbGFzc0xpc3QoKSx0aGlzfXNldE9mZnNldChlKXtyZXR1cm4gdGhpcy5vcHRpb25zLm9mZnNldD1lLHRoaXMuX3VwZGF0ZSgpLHRoaXN9dG9nZ2xlQ2xhc3NOYW1lKGUpe2xldCB0O3JldHVybiB0aGlzLl9jbGFzc0xpc3QuZGVsZXRlKGUpP3Q9ITE6KHRoaXMuX2NsYXNzTGlzdC5hZGQoZSksdD0hMCksdGhpcy5fdXBkYXRlQ2xhc3NMaXN0KCksdH1fb25Nb3VzZUV2ZW50KGUpe3RoaXMuX3VwZGF0ZShlLnBvaW50KTt9X2dldEFuY2hvcihlKXtpZih0aGlzLm9wdGlvbnMuYW5jaG9yKXJldHVybiB0aGlzLm9wdGlvbnMuYW5jaG9yO2NvbnN0IHQ9dGhpcy5fbWFwLGk9dGhpcy5fY29udGFpbmVyLG89dGhpcy5fcG9zO2lmKCF0fHwhaXx8IW8pcmV0dXJuIFwiYm90dG9tXCI7Y29uc3Qgcj1pLm9mZnNldFdpZHRoLG49aS5vZmZzZXRIZWlnaHQscz1vLng8ci8yLGE9by54PnQudHJhbnNmb3JtLndpZHRoLXIvMjtpZihvLnkrZTxuKXJldHVybiBzP1widG9wLWxlZnRcIjphP1widG9wLXJpZ2h0XCI6XCJ0b3BcIjtpZihvLnk+dC50cmFuc2Zvcm0uaGVpZ2h0LW4pe2lmKHMpcmV0dXJuIFwiYm90dG9tLWxlZnRcIjtpZihhKXJldHVybiBcImJvdHRvbS1yaWdodFwifXJldHVybiBzP1wibGVmdFwiOmE/XCJyaWdodFwiOlwiYm90dG9tXCJ9X3VwZGF0ZUNsYXNzTGlzdCgpe2NvbnN0IGU9dGhpcy5fY29udGFpbmVyO2lmKCFlKXJldHVybjtjb25zdCB0PVsuLi50aGlzLl9jbGFzc0xpc3RdO3QucHVzaChcIm1hcGJveGdsLXBvcHVwXCIpLHRoaXMuX2FuY2hvciYmdC5wdXNoKGBtYXBib3hnbC1wb3B1cC1hbmNob3ItJHt0aGlzLl9hbmNob3J9YCksdGhpcy5fdHJhY2tQb2ludGVyJiZ0LnB1c2goXCJtYXBib3hnbC1wb3B1cC10cmFjay1wb2ludGVyXCIpLGUuY2xhc3NOYW1lPXQuam9pbihcIiBcIik7fV91cGRhdGUodCl7Y29uc3QgaT10aGlzLl9tYXAsbz10aGlzLl9jb250ZW50O2lmKCFpfHwhdGhpcy5fbG5nTGF0JiYhdGhpcy5fdHJhY2tQb2ludGVyfHwhbylyZXR1cm47bGV0IHI9dGhpcy5fY29udGFpbmVyO2lmKHJ8fChyPXRoaXMuX2NvbnRhaW5lcj1uKFwiZGl2XCIsXCJtYXBib3hnbC1wb3B1cFwiLGkuZ2V0Q29udGFpbmVyKCkpLHRoaXMuX3RpcD1uKFwiZGl2XCIsXCJtYXBib3hnbC1wb3B1cC10aXBcIixyKSxyLmFwcGVuZENoaWxkKG8pKSx0aGlzLm9wdGlvbnMubWF4V2lkdGgmJnIuc3R5bGUubWF4V2lkdGghPT10aGlzLm9wdGlvbnMubWF4V2lkdGgmJihyLnN0eWxlLm1heFdpZHRoPXRoaXMub3B0aW9ucy5tYXhXaWR0aCksaS50cmFuc2Zvcm0ucmVuZGVyV29ybGRDb3BpZXMmJiF0aGlzLl90cmFja1BvaW50ZXImJih0aGlzLl9sbmdMYXQ9SnIodGhpcy5fbG5nTGF0LHRoaXMuX3BvcyxpLnRyYW5zZm9ybSkpLCF0aGlzLl90cmFja1BvaW50ZXJ8fHQpe2NvbnN0IGU9dGhpcy5fcG9zPXRoaXMuX3RyYWNrUG9pbnRlciYmdD90OmkucHJvamVjdCh0aGlzLl9sbmdMYXQpLG89cm4odGhpcy5vcHRpb25zLm9mZnNldCkscj10aGlzLl9hbmNob3I9dGhpcy5fZ2V0QW5jaG9yKG8ueSksbj1ybih0aGlzLm9wdGlvbnMub2Zmc2V0LHIpLHM9ZS5hZGQobikucm91bmQoKTtpLl9yZXF1ZXN0RG9tVGFzaygoKCk9Pnt0aGlzLl9jb250YWluZXImJnImJih0aGlzLl9jb250YWluZXIuc3R5bGUudHJhbnNmb3JtPWAke1FyW3JdfSB0cmFuc2xhdGUoJHtzLnh9cHgsJHtzLnl9cHgpYCk7fSkpO31pZighdGhpcy5fbWFya2VyJiZpLl9zaG93aW5nR2xvYmUoKSl7Y29uc3QgdD1lLmlzTG5nTGF0QmVoaW5kR2xvYmUoaS50cmFuc2Zvcm0sdGhpcy5fbG5nTGF0KT8wOjE7dGhpcy5fc2V0T3BhY2l0eSh0KTt9dGhpcy5fdXBkYXRlQ2xhc3NMaXN0KCk7fV9mb2N1c0ZpcnN0RWxlbWVudCgpe2lmKCF0aGlzLm9wdGlvbnMuZm9jdXNBZnRlck9wZW58fCF0aGlzLl9jb250YWluZXIpcmV0dXJuO2NvbnN0IGU9dGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3Iob24pO2UmJmUuZm9jdXMoKTt9X29uQ2xvc2UoKXt0aGlzLnJlbW92ZSgpO31fc2V0T3BhY2l0eShlKXt0aGlzLl9jb250YWluZXImJih0aGlzLl9jb250YWluZXIuc3R5bGUub3BhY2l0eT1gJHtlfWApLHRoaXMuX2NvbnRlbnQmJih0aGlzLl9jb250ZW50LnN0eWxlLnBvaW50ZXJFdmVudHM9ZT9cImF1dG9cIjpcIm5vbmVcIik7fX0sTWFya2VyOmVuLFN0eWxlOkt0LExuZ0xhdDplLkxuZ0xhdCxMbmdMYXRCb3VuZHM6ZS5MbmdMYXRCb3VuZHMsUG9pbnQ6ZS5Qb2ludCxNZXJjYXRvckNvb3JkaW5hdGU6ZS5NZXJjYXRvckNvb3JkaW5hdGUsRnJlZUNhbWVyYU9wdGlvbnM6am8sRXZlbnRlZDplLkV2ZW50ZWQsY29uZmlnOmUuY29uZmlnLHByZXdhcm06ZnVuY3Rpb24oKXtVZSgpLmFjcXVpcmUoQmUpO30sY2xlYXJQcmV3YXJtZWRSZXNvdXJjZXM6ZnVuY3Rpb24oKXtjb25zdCBlPUZlO2UmJihlLmlzUHJlbG9hZGVkKCkmJjE9PT1lLm51bUFjdGl2ZSgpPyhlLnJlbGVhc2UoQmUpLEZlPW51bGwpOmNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBjbGVhciBXZWJXb3JrZXJzIHNpbmNlIHRoZXJlIGFyZSBhY3RpdmUgTWFwIGluc3RhbmNlcyB0aGF0IHN0aWxsIHJlZmVyZW5jZSBpdC4gVGhlIHByZS13YXJtZWQgV2ViV29ya2VyIHBvb2wgY2FuIG9ubHkgYmUgY2xlYXJlZCB3aGVuIGFsbCBtYXAgaW5zdGFuY2VzIGhhdmUgYmVlbiByZW1vdmVkIHdpdGggbWFwLnJlbW92ZSgpXCIpKTt9LGdldCBhY2Nlc3NUb2tlbigpe3JldHVybiBlLmNvbmZpZy5BQ0NFU1NfVE9LRU59LHNldCBhY2Nlc3NUb2tlbih0KXtlLmNvbmZpZy5BQ0NFU1NfVE9LRU49dDt9LGdldCBiYXNlQXBpVXJsKCl7cmV0dXJuIGUuY29uZmlnLkFQSV9VUkx9LHNldCBiYXNlQXBpVXJsKHQpe2UuY29uZmlnLkFQSV9VUkw9dDt9LGdldCB3b3JrZXJDb3VudCgpe3JldHVybiBrZS53b3JrZXJDb3VudH0sc2V0IHdvcmtlckNvdW50KGUpe2tlLndvcmtlckNvdW50PWU7fSxnZXQgbWF4UGFyYWxsZWxJbWFnZVJlcXVlc3RzKCl7cmV0dXJuIGUuY29uZmlnLk1BWF9QQVJBTExFTF9JTUFHRV9SRVFVRVNUU30sc2V0IG1heFBhcmFsbGVsSW1hZ2VSZXF1ZXN0cyh0KXtlLmNvbmZpZy5NQVhfUEFSQUxMRUxfSU1BR0VfUkVRVUVTVFM9dDt9LGNsZWFyU3RvcmFnZSh0KXtlLmNsZWFyVGlsZUNhY2hlKHQpO30sd29ya2VyVXJsOlwiXCIsd29ya2VyQ2xhc3M6bnVsbCxzZXROb3c6ZS5leHBvcnRlZC5zZXROb3cscmVzdG9yZU5vdzplLmV4cG9ydGVkLnJlc3RvcmVOb3d9O3JldHVybiBkbn0pKTtcblxuLy9cbi8vIE91ciBjdXN0b20gaW50cm8gcHJvdmlkZXMgYSBzcGVjaWFsaXplZCBcImRlZmluZSgpXCIgZnVuY3Rpb24sIGNhbGxlZCBieSB0aGVcbi8vIEFNRCBtb2R1bGVzIGJlbG93LCB0aGF0IHNldHMgdXAgdGhlIHdvcmtlciBibG9iIFVSTCBhbmQgdGhlbiBleGVjdXRlcyB0aGVcbi8vIG1haW4gbW9kdWxlLCBzdG9yaW5nIGl0cyBleHBvcnRlZCB2YWx1ZSBhcyAnbWFwYm94Z2wnXG5cblxudmFyIG1hcGJveGdsJDEgPSBtYXBib3hnbDtcblxucmV0dXJuIG1hcGJveGdsJDE7XG5cbn0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcGJveC1nbC5qcy5tYXBcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJpbXBvcnQgeyBhbmltYXRpb25zIH0gZnJvbSAnLi9hbmltYXRpb25zL2FsbCc7XG5cbmV4cG9ydCB0eXBlIEFuaW1hdGlvblR5cGUgPSAoZWw6IEhUTUxFbGVtZW50LCBkZWxheT86IG51bWJlcik9PiBnc2FwLmNvcmUuVHdlZW4gfCBnc2FwLmNvcmUuVGltZWxpbmU7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1hdGlvbih0eXBlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgZGVsYXk6IG51bWJlcik6IGdzYXAuY29yZS5Ud2VlbiB8IGdzYXAuY29yZS5UaW1lbGluZSB8IG51bGwge1xuICAgIGlmICghYW5pbWF0aW9uc1t0eXBlXSkgeyBjb25zb2xlLndhcm4oYGFuaW1hdGlvbiB0eXBlIFwiJHt0eXBlfVwiIGRvZXMgbm90IGV4aXN0YCk7IHJldHVybiBudWxsOyB9XG4gICAgcmV0dXJuIGFuaW1hdGlvbnNbdHlwZV0/LihlbCwgZGVsYXkpO1xufVxuIiwiZXhwb3J0IGludGVyZmFjZSBJQnJlYWtwb2ludCB7XG4gICAgZGVza3RvcDogYm9vbGVhbjtcbiAgICB0YWJsZXQ6IGJvb2xlYW47XG4gICAgcGhvbmU6IGJvb2xlYW47XG4gICAgdmFsdWU6IHN0cmluZztcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnJlYWtwb2ludCgpOiBJQnJlYWtwb2ludCB7XG4gICAgY29uc3QgYmVmb3JlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLCAnOmJlZm9yZScpO1xuICAgIGNvbnN0IGJyZWFrcG9pbnQgPSBiZWZvcmUuZ2V0UHJvcGVydHlWYWx1ZSgnY29udGVudCcpLnJlcGxhY2UoL1tcXFwiXFwnXS9nLCAnJyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkZXNrdG9wOiBicmVha3BvaW50ID09PSAnZGVza3RvcCcsXG4gICAgICAgIHBob25lOiBicmVha3BvaW50ID09PSAncGhvbmUnLFxuICAgICAgICB0YWJsZXQ6IGJyZWFrcG9pbnQgPT09ICd0YWJsZXQnLFxuICAgICAgICB2YWx1ZTogYnJlYWtwb2ludCxcbiAgICB9O1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cblxuZGVjbGFyZSBsZXQgc2FmYXJpO1xuXG5leHBvcnQgaW50ZXJmYWNlIElCcm93c2VyIHtcbiAgICBhbmRyb2lkPzogYm9vbGVhbjtcbiAgICBjaHJvbWU/OiBib29sZWFuO1xuICAgIGVkZ2U/OiBib29sZWFuO1xuICAgIGZpcmVmb3g/OiBib29sZWFuO1xuICAgIGllPzogYm9vbGVhbjtcbiAgICBpb3M/OiBib29sZWFuO1xuICAgIG1hYz86IGJvb2xlYW47XG4gICAgbW9iaWxlPzogYm9vbGVhbjtcbiAgICBwaG9uZT86IGJvb2xlYW47XG4gICAgb3BlcmE/OiBib29sZWFuO1xuICAgIHNhZmFyaT86IGJvb2xlYW47XG4gICAgdG91Y2g/OiBib29sZWFuO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCcm93c2VyKCk6IElCcm93c2VyIHtcbiAgICBjb25zdCB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIGNvbnN0IGJyb3dzZXI6IElCcm93c2VyID0ge1xuICAgICAgICBtb2JpbGU6ICEhKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm98YW5kcm9pZHxpcGFkfHBsYXlib29rfHNpbGsvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmEpIHx8IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmEpLnN1YnN0cigwLCA0KSkpLFxuICAgICAgICBwaG9uZTogISEoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSkgfHwgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdCgobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSkuc3Vic3RyKDAsIDQpKSksXG4gICAgICAgIGFuZHJvaWQ6IC9BbmRyb2lkL2kudGVzdCh1YSksXG4gICAgICAgIGlvczogWydpUGFkIFNpbXVsYXRvcicsICdpUGhvbmUgU2ltdWxhdG9yJywgJ2lQb2QgU2ltdWxhdG9yJywgJ2lQYWQnLCAnaVBob25lJywgJ2lQb2QnXS5pbmNsdWRlcyhuYXZpZ2F0b3IucGxhdGZvcm0pIHx8IChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdNYWMnKSAmJiAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQpLFxuICAgICAgICBtYWM6IG5hdmlnYXRvci5wbGF0Zm9ybS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoJ01BQycpID49IDAsXG4gICAgICAgIGllOiB1YS5pbmRleE9mKCdNU0lFICcpID4gMCB8fCAhIXVhLm1hdGNoKC9UcmlkZW50LipydlxcOjExXFwuLyksXG4gICAgICAgIGVkZ2U6IC9FZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgICAgICBmaXJlZm94OiB1YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2ZpcmVmb3gnKSA+IC0xLFxuICAgICAgICBzYWZhcmk6IC9pUChhZHxob25lfG9kKS4rVmVyc2lvblxcL1tcXGRcXC5dKy4qU2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93LkhUTUxFbGVtZW50KS5pbmRleE9mKCdDb25zdHJ1Y3RvcicpID4gMCB8fCAoKChwKTogYm9vbGVhbiA9PiBwLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IFNhZmFyaVJlbW90ZU5vdGlmaWNhdGlvbl0nKSghd2luZG93LnNhZmFyaSB8fCBzYWZhcmkucHVzaE5vdGlmaWNhdGlvbikpLFxuICAgICAgICBjaHJvbWU6ICh1YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2Nocm9tZScpID4gLTEpICYmIChuYXZpZ2F0b3IudmVuZG9yLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZ29vZ2xlJykgPiAtMSksXG4gICAgICAgIHRvdWNoOiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCAobmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCkgfHwgKChuYXZpZ2F0b3IgYXMgYW55KS5tc01heFRvdWNoUG9pbnRzID4gMCksXG4gICAgfTtcblxuICAgIGNvbnN0IGh0bWxDbGFzc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykhLmNsYXNzTGlzdDtcbiAgICBodG1sQ2xhc3NMaXN0LnRvZ2dsZSgnbWFjJywgYnJvd3Nlci5pb3MgfHwgYnJvd3Nlci5tYWMpO1xuICAgIGh0bWxDbGFzc0xpc3QudG9nZ2xlKCdtb2JpbGUnLCBicm93c2VyLm1vYmlsZSk7XG4gICAgaHRtbENsYXNzTGlzdC50b2dnbGUoJ3Bob25lJywgYnJvd3Nlci5waG9uZSAmJiBicm93c2VyLnRvdWNoKTtcbiAgICBodG1sQ2xhc3NMaXN0LnRvZ2dsZSgnaW9zJywgYnJvd3Nlci5pb3MpO1xuICAgIGh0bWxDbGFzc0xpc3QudG9nZ2xlKCdmaXJlZm94JywgYnJvd3Nlci5maXJlZm94KTtcbiAgICBodG1sQ2xhc3NMaXN0LnRvZ2dsZSgnc2FmYXJpJywgYnJvd3Nlci5zYWZhcmkpO1xuICAgIGh0bWxDbGFzc0xpc3QudG9nZ2xlKCdpZScsIGJyb3dzZXIuaWUpO1xuICAgIGh0bWxDbGFzc0xpc3QudG9nZ2xlKCd0b3VjaCcsIGJyb3dzZXIudG91Y2gpO1xuICAgIGh0bWxDbGFzc0xpc3QudG9nZ2xlKCduby10b3VjaCcsICFicm93c2VyLnRvdWNoKTtcbiAgICBodG1sQ2xhc3NMaXN0LnJlbW92ZSgnbm8tanMnKTtcblxuICAgIHJldHVybiBicm93c2VyO1xufVxuXG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICAgICAgb3ByOiBhbnk7XG4gICAgICAgIG9wZXJhOiBhbnk7XG4gICAgICAgIHNhZmFyaTogYW55O1xuICAgICAgICBIVE1MRWxlbWVudDogYW55O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBhZ2UgfSBmcm9tICcuL3BhZ2VzL1BhZ2UnO1xuaW1wb3J0IHsgTGlnaHRib3hOYXYgfSBmcm9tICcuL2NvbXBvbmVudHMvTGlnaHRib3gvTGlnaHRib3hOYXYnO1xuaW1wb3J0IHsgTGlnaHRib3hUcmFuc2NyaXB0IH0gZnJvbSAnLi9jb21wb25lbnRzL0xpZ2h0Ym94L0xpZ2h0Ym94VHJhbnNjcmlwdCc7XG5pbXBvcnQgeyBMaWdodGJveFNsaWRlciB9IGZyb20gJy4vY29tcG9uZW50cy9MaWdodGJveC9MaWdodGJveFNsaWRlcic7XG5pbXBvcnQgeyBMb2FkIH0gZnJvbSAnLi9jb21wb25lbnRzL0xvYWQnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL0J1dHRvbic7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJy4vY29tcG9uZW50cy9Nb2RhbCc7XG5pbXBvcnQgeyBNb3JlIH0gZnJvbSAnLi9jb21wb25lbnRzL01vcmUnO1xuaW1wb3J0IHsgQWNjb3JkZW9uIH0gZnJvbSAnLi9jb21wb25lbnRzL0FjY29yZGVvbic7XG5pbXBvcnQgeyBBY2NvcmRlb25MaXN0IH0gZnJvbSAnLi9jb21wb25lbnRzL0FjY29yZGVvbkxpc3QnO1xuaW1wb3J0IHsgV3JhcHBlZFRleHQgfSBmcm9tICcuL2NvbXBvbmVudHMvV3JhcHBlZFRleHQnO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi9jb21wb25lbnRzL1BsYXllci9QbGF5ZXInO1xuaW1wb3J0IHsgVmlkZW8gfSBmcm9tICcuL2NvbXBvbmVudHMvUGxheWVyL1ZpZGVvJztcbmltcG9ydCB7IEZpbHRlckxldHRlcnMgfSBmcm9tICcuL2NvbXBvbmVudHMvRmlsdGVyTGV0dGVycyc7XG5pbXBvcnQgeyBNYXAgfSBmcm9tICcuL2NvbXBvbmVudHMvTWFwJztcbmltcG9ydCB7IENvbGxlY3Rpb25zIH0gZnJvbSAnLi9jb21wb25lbnRzL0NvbGxlY3Rpb25zJztcblxuZXhwb3J0IGNvbnN0IGNvbXBvbmVudHMgPSB7XG4gICAgQWNjb3JkZW9uLFxuICAgIEFjY29yZGVvbkxpc3QsXG4gICAgQnV0dG9uLFxuICAgIENvbGxlY3Rpb25zLFxuICAgIEZpbHRlckxldHRlcnMsXG4gICAgTG9hZCxcbiAgICBNYXAsXG4gICAgTW9kYWwsXG4gICAgTW9yZSxcbiAgICBQbGF5ZXIsXG4gICAgVmlkZW8sXG4gICAgTGlnaHRib3hOYXYsXG4gICAgTGlnaHRib3hUcmFuc2NyaXB0LFxuICAgIExpZ2h0Ym94U2xpZGVyLFxuICAgIFdyYXBwZWRUZXh0LFxufTtcblxuZXhwb3J0IGNvbnN0IHBhZ2VzID0geyBQYWdlIH07XG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgSGFuZGxlciB7XG4gICAgcHVibGljIGV2ZW50czogT2JqZWN0O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzID0ge307XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBBdHRhY2ggYW4gZXZlbnQgaGFuZGxlciBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZXZlbnROYW1lIHBsZWFzZSB1c2Ugc3RhdGljIG5hbWVzXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGhhbmRsZXIgICBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqIEByZXR1cm4ge0hhbmRsZXJ9ICAgICAgICAgICAgcmV0dXJucyBjdXJyZW50IG9iamVjdFxuICAgICAqL1xuICAgIHB1YmxpYyBvbihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pOiBIYW5kbGVyIHtcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudE5hbWVdKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdLnB1c2goaGFuZGxlcik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBEZXRhY2ggYW4gZXZlbnQgaGFuZGxlciBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZXZlbnROYW1lIHBsZWFzZSB1c2Ugc3RhdGljIG5hbWVzXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGhhbmRsZXIgICBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqIEByZXR1cm4ge0hhbmRsZXJ9ICAgICAgICAgICAgcmV0dXJucyBjdXJyZW50IG9iamVjdFxuICAgICAqL1xuICAgIHB1YmxpYyBvZmYoZXZlbnROYW1lPzogc3RyaW5nLCBoYW5kbGVyPzogRnVuY3Rpb24pOiBIYW5kbGVyIHtcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudE5hbWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5ldmVudHNbZXZlbnROYW1lXSkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnROYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0uaW5kZXhPZihoYW5kbGVyKTtcblxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGFuIGV2ZW50IGhhbmRsZXIgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxuICAgICAqIEBwYXJhbSB7W3R5cGVdfSAuLi5leHRyYVBhcmFtZXRlcnMgcGFzcyBhbnkgcGFyYW1ldGVycyB0byBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyB0cmlnZ2VyKGV2ZW50TmFtZTogc3RyaW5nLCAuLi5hcmdzKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnROYW1lXSkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5mb3JFYWNoKGV2ZW50ID0+IGV2ZW50KC4uLmFyZ3MpKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xuICAgIH1cbn1cblxuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IEF1ZGlvUGxheWVyIH0gZnJvbSAnLi9jb21wb25lbnRzL0F1ZGlvUGxheWVyJztcbmltcG9ydCB7IGJyZWFrcG9pbnQsIGVhc2luZyB9IGZyb20gJy4vU2l0ZSc7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJy4vVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgTWVudSB7XG4gICAgcHJpdmF0ZSBpc09wZW4gPSBmYWxzZTtcblxuICAgIHByaXZhdGUgZWxUb2dnbGU6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY2xvc2VCdG46IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgd3JhcEVsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBpdGVtczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSBsaW5lczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSBsYWJlbHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgbGlua3M6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgc2VhcmNoTGFiZWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc2VhcmNoSWNvbjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0aW1lbGluZXM6IGdzYXAuY29yZS5UaW1lbGluZVtdO1xuXG5cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLmVsVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXRvZ2dsZS1tZW51Jyk7XG4gICAgICAgIHRoaXMuY2xvc2VCdG4gPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLW1lbnUtY2xvc2UnKTtcbiAgICAgICAgdGhpcy53cmFwRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JhcHBlcicpO1xuICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1tZW51LWl0ZW0nKTtcbiAgICAgICAgdGhpcy5sYWJlbHMgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvckFsbCgnLmpzLW1lbnUtbGFiZWwnKTtcbiAgICAgICAgdGhpcy5saW5lcyA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbWVudS1saW5lJyk7XG4gICAgICAgIHRoaXMubGlua3MgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvckFsbCgnLmpzLW1lbnUtbGluaycpO1xuICAgICAgICB0aGlzLnNlYXJjaExhYmVsID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZW51LXNlYXJjaC1sYWJlbCcpO1xuICAgICAgICB0aGlzLnNlYXJjaEljb24gPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLW1lbnUtc2VhcmNoLXN2ZycpO1xuICAgICAgICB0aGlzLnRpbWVsaW5lcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgb25TdGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pc09wZW4gJiYgdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZWxUb2dnbGUgJiYgdGhpcy5lbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25Ub2dnbGUpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuICYmIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKTtcblxuICAgICAgICB0aGlzLnNldHVwSG92ZXJzKCk7XG5cbiAgICAgICAgLy8gb24gY2xvc2UgbWVudSBhbmltYXRpb24ncyBlbmQgKHJlbGF0ZWQgdG8gd2hvbGUgI2NvbnRlbnQgdG9nZ2xlIGFuaW1hdGlvbikgc2V0IGRpc3BsYXk6IG5vbmUgZm9yIG1lbnVcbiAgICAgICAgdGhpcy53cmFwRWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25BbmltYXRpb25FbmQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZSgoKSA9PiB0aGlzLnRpbWVsaW5lcy5mb3JFYWNoKHRsID0+IHRsLmludmFsaWRhdGUoKSkpKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBzZXR1cEhvdmVycyA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgY29uc3QgdmVydGljYWw6IEhUTUxFbGVtZW50ID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuanMtYXJyb3ctdmVydGljYWwnKTtcbiAgICAgICAgICAgIGNvbnN0IGhvcml6b250YWw6IEhUTUxFbGVtZW50ID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuanMtYXJyb3ctaG9yaXpvbnRhbCcpO1xuICAgICAgICAgICAgY29uc3QgdHJpYW5nbGU6IEhUTUxFbGVtZW50ID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuanMtYXJyb3ctdHJpYW5nbGUnKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZW51LW1haW4tbGluaycpO1xuXG4gICAgICAgICAgICBpZiAoW3ZlcnRpY2FsLCBob3Jpem9udGFsLCB0cmlhbmdsZSwgbGlua10uc29tZShlbCA9PiAhZWwpKSByZXR1cm47XG5cbiAgICAgICAgICAgIGdzYXAuc2V0KHZlcnRpY2FsLCB7IHNjYWxlWTogMCB9KTtcbiAgICAgICAgICAgIGdzYXAuc2V0KGhvcml6b250YWwsIHsgc2NhbGVYOiAwIH0pO1xuICAgICAgICAgICAgZ3NhcC5zZXQodHJpYW5nbGUsIHsgc2NhbGU6IDAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRsID0gZ3NhcC50aW1lbGluZSh7IHBhdXNlZDogdHJ1ZSwgZWFzZTogZWFzaW5nIH0pO1xuICAgICAgICAgICAgdGhpcy50aW1lbGluZXMucHVzaCh0bCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gMC4zO1xuXG4gICAgICAgICAgICB0bFxuICAgICAgICAgICAgICAgIC50byh2ZXJ0aWNhbCwge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IDEsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiAqIDAuNSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnYm90dG9tIGNlbnRlcicsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudG8oaG9yaXpvbnRhbCwge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IDEsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicsXG4gICAgICAgICAgICAgICAgfSwgJ2Fycm93JylcbiAgICAgICAgICAgICAgICAuZnJvbVRvKFxuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZSxcbiAgICAgICAgICAgICAgICAgICAgeyB4OiAoKSA9PiAtaG9yaXpvbnRhbC5vZmZzZXRXaWR0aCB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2xlZnQgY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ2Fycm93JyxcbiAgICAgICAgICAgICAgICApO1xuXG5cbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBicmVha3BvaW50LmRlc2t0b3AgJiYgdGwucGxheSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBicmVha3BvaW50LmRlc2t0b3AgJiYgdGwucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludC5kZXNrdG9wICYmIHRsLnBsYXkoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludC5kZXNrdG9wICYmIHRsLnJldmVyc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25BbmltYXRpb25FbmQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy52aWV3LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25Ub2dnbGUgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuaXNPcGVuID8gdGhpcy5jbG9zZSgpIDogdGhpcy5vcGVuKCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9wZW4gPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52aWV3LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaGFzLW1lbnUtb3BlbicpO1xuXG4gICAgICAgIGdzYXAudGltZWxpbmUoKVxuICAgICAgICAgICAgLmFkZExhYmVsKCdpbml0JylcbiAgICAgICAgICAgIC5mcm9tVG8odGhpcy5sYWJlbHMsIHsgeVBlcmNlbnQ6IDEyMCB9LCB7XG4gICAgICAgICAgICAgICAgeVBlcmNlbnQ6IDAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAuOSxcbiAgICAgICAgICAgICAgICBzdGFnZ2VyOiAwLjE1LFxuICAgICAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIH0sICdpbml0JylcbiAgICAgICAgICAgIC5mcm9tVG8odGhpcy5saW5lcywgeyBzY2FsZVg6IDAgfSwge1xuICAgICAgICAgICAgICAgIHNjYWxlWDogMSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICAgICAgICBzdGFnZ2VyOiAwLjE1LFxuICAgICAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIH0sICdpbml0JylcbiAgICAgICAgICAgIC5mcm9tVG8odGhpcy5saW5rcywgeyB4UGVyY2VudDogMTAwIH0sIHtcbiAgICAgICAgICAgICAgICB4UGVyY2VudDogMCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC42LFxuICAgICAgICAgICAgICAgIHN0YWdnZXI6IDAuMSxcbiAgICAgICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICB9LCAnLT0uOCcpXG4gICAgICAgICAgICAuZnJvbVRvKHRoaXMuc2VhcmNoSWNvbiwgeyBzY2FsZTogMCB9LCB7XG4gICAgICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICB9LCAnLT0uNicpXG4gICAgICAgICAgICAuZnJvbVRvKHRoaXMuc2VhcmNoTGFiZWwsIHsgeFBlcmNlbnQ6IDEwMCB9LCB7XG4gICAgICAgICAgICAgICAgeFBlcmNlbnQ6IDAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNixcbiAgICAgICAgICAgICAgICBjbGVhclByb3BzOiAnYWxsJyxcbiAgICAgICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICB9LCAnLT0uNCcpO1xuXG4gICAgICAgIEF1ZGlvUGxheWVyLmNsb3NlQXVkaW9QbGF5ZXIoKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgY2xvc2UgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLW1lbnUtb3BlbicpO1xuICAgIH07XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgbm9ybWFsaXplVXJsIH0gZnJvbSAnLi9VdGlscyc7XG5pbXBvcnQgU2Nyb2xsIGZyb20gJy4vU2Nyb2xsJztcbmltcG9ydCB7IEhhbmRsZXIgfSBmcm9tICcuL0hhbmRsZXInO1xuXG5leHBvcnQgY2xhc3MgUHVzaFN0YXRlc0V2ZW50cyB7XG4gICAgcHVibGljIHN0YXRpYyBDSEFOR0UgPSAnc3RhdGUnO1xuICAgIHB1YmxpYyBzdGF0aWMgUFJPR1JFU1MgPSAncHJvZ3Jlc3MnO1xufVxuXG5cbmV4cG9ydCBjbGFzcyBQdXNoU3RhdGVzIGV4dGVuZHMgSGFuZGxlciB7XG5cblxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgcHVibGljIHN0YXRpYyBpbnN0YW5jZTogUHVzaFN0YXRlcztcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFRJTUVfTElNSVQgPSAxMDAwMDtcbiAgICBwcml2YXRlIHN0YXRpYyBpbml0aWFsSGlzdG9yeUxlbmd0aDogbnVtYmVyO1xuICAgIHByaXZhdGUgc3RhdGljIG5vQ2hhbmdlID0gZmFsc2U7XG5cblxuXG4gICAgLyoqIGNoYW5nZSBkb2N1bWVudCB0aXRsZSAqL1xuICAgIHB1YmxpYyBzdGF0aWMgc2V0VGl0bGUodGl0bGU/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29udGVudDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpO1xuICAgICAgICBjb25zdCBkYXRhVGl0bGU6IEhUTUxFbGVtZW50ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS10aXRsZV0nKTtcblxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlIHx8IGRhdGFUaXRsZS5kYXRhc2V0LnRpdGxlO1xuICAgIH1cblxuXG5cbiAgICAvKiogY2hhbmdlIGxvYWN0aW9uIHBhdGhuYW1lIGFuZCB0cmlnZ2VyIEhpc3RvcnkgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdvVG8obG9jYXRpb246IHN0cmluZywgcmVwbGFjZT86IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgcGF0aG5hbWUgPSBsb2NhdGlvbi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIHdpbmRvdy5sb2NhdGlvbi5ob3N0LCAnJyk7XG4gICAgICAgIGNvbnN0IGlzRGlmZmVyZW50ID0gcGF0aG5hbWUgIT09IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblxuICAgICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHsgcmFuZG9tRGF0YTogTWF0aC5yYW5kb20oKSB9LCBkb2N1bWVudC50aXRsZSwgcGF0aG5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHsgcmFuZG9tRGF0YTogTWF0aC5yYW5kb20oKSB9LCBkb2N1bWVudC50aXRsZSwgcGF0aG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgUHVzaFN0YXRlcy5pbnN0YW5jZS5vblN0YXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICAgIH1cblxuXG5cbiAgICAvKiogb25seSBjaGFuZ2UgbG9hY3Rpb24gcGF0aG5hbWUgd2l0aG91dCB0cmlnZ2VyaW5nIEhpc3RvcnkgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNoYW5nZVBhdGgobG9jYXRpb246IHN0cmluZywgcmVwbGFjZT86IGJvb2xlYW4sIHRpdGxlPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIFB1c2hTdGF0ZXMubm9DaGFuZ2UgPSB0cnVlO1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gUHVzaFN0YXRlcy5nb1RvKGxvY2F0aW9uLCByZXBsYWNlIHx8IHRydWUpO1xuICAgICAgICBQdXNoU3RhdGVzLm5vQ2hhbmdlID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIFB1c2hTdGF0ZXMuc2V0VGl0bGUodGl0bGUgfHwgZG9jdW1lbnQudGl0bGUpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIC8qKiBiaW5kIGxpbmtzIHRvIGJlIHVzZWQgd2l0aCBQdXNoU3RhdGVzIC8gSGlzdG9yeSAqL1xuICAgIHB1YmxpYyBzdGF0aWMgYmluZCh0YXJnZXQ/OiBFbGVtZW50LCBlbGVtZW50SXRzZWxmPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoIWVsZW1lbnRJdHNlbGYpIHtcbiAgICAgICAgICAgIFB1c2hTdGF0ZXMuaW5zdGFuY2UuYmluZExpbmtzKHRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBQdXNoU3RhdGVzLmluc3RhbmNlLmJpbmRMaW5rKHRhcmdldCBhcyBFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBnbyBiYWNrIGluIGJyb3dzZXIgaGlzdG9yeVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25hbCBmYWxsYmFjayB1cmwgKHdoZW4gYnJvd3NlciBkZW9lc24ndCBoYXZlIGFueSBpdGVtcyBpbiBoaXN0b3J5KVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgYmFjayh1cmw/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHdpbmRvdy5oaXN0b3J5Lmxlbmd0aCAtIFB1c2hTdGF0ZXMuaW5pdGlhbEhpc3RvcnlMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXJsKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyByYW5kb21EYXRhOiBNYXRoLnJhbmRvbSgpIH0sIGRvY3VtZW50LnRpdGxlLCB1cmwpO1xuICAgICAgICAgICAgUHVzaFN0YXRlcy5pbnN0YW5jZS5vblN0YXRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyByYW5kb21EYXRhOiBNYXRoLnJhbmRvbSgpIH0sIGRvY3VtZW50LnRpdGxlLCAnLycpO1xuICAgICAgICAgICAgUHVzaFN0YXRlcy5pbnN0YW5jZS5vblN0YXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyByZWxvYWQoKTogdm9pZCB7XG4gICAgICAgIFB1c2hTdGF0ZXMuaW5zdGFuY2UudHJpZ2dlcihQdXNoU3RhdGVzRXZlbnRzLkNIQU5HRSk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgbG9hZGVkRGF0YTogc3RyaW5nO1xuICAgIHByaXZhdGUgcmVxdWVzdDogWE1MSHR0cFJlcXVlc3Q7XG4gICAgcHJpdmF0ZSB0aW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PjtcbiAgICBwcml2YXRlIGN1cnJlbnRVcmw6IHN0cmluZztcblxuXG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmJpbmRMaW5rcygpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMub25TdGF0ZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgc2Nyb2xsUmVzdG9yYXRpb24gdG8gJ21hbnVhbCcgc28gdGhlIHNjcm9sbCBkb2Vzbid0IGp1bXBcbiAgICAgICAgICogd2hlbiBiYWNrIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgd2luZG93Lmhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAnbWFudWFsJztcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHdpbmRvdy5oaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gJ21hbnVhbCc7IH0sIDEwMDApO1xuXG4gICAgICAgIFB1c2hTdGF0ZXMuaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICBQdXNoU3RhdGVzLmluaXRpYWxIaXN0b3J5TGVuZ3RoID0gd2luZG93Lmhpc3RvcnkubGVuZ3RoO1xuICAgICAgICB0aGlzLmN1cnJlbnRVcmwgPSBub3JtYWxpemVVcmwod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG5cbiAgICAgICAgdGhpcy5zZXRBY3RpdmVMaW5rcygpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogbG9hZCBuZXcgY29udGVudCB2aWEgYWpheCBiYXNlZCBvbiBjdXJyZW50IGxvY2F0aW9uOlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8Ym9vbGVhbj59IHByb21pc2UgcmVzb2x2ZWQgd2hlbiBYTUxIdHRwUmVxdWVzdCBpcyBmaW5pc2hlZFxuICAgICAqL1xuICAgIHB1YmxpYyBsb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBjYW5jZWwgb2xkIHJlcXVlc3Q6XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGVmaW5lIHVybFxuICAgICAgICBjb25zdCB7IHBhdGhuYW1lIH0gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICAgIGNvbnN0IHNlYXJjaDogc3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaCB8fCAnJztcbiAgICAgICAgY29uc3QgdXJsID0gcGF0aG5hbWUgKyBzZWFyY2g7XG5cbiAgICAgICAgLy8gZGVmaW5lIHRpbWVvdXRcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFB1c2hTdGF0ZXMuVElNRV9MSU1JVCk7XG5cbiAgICAgICAgLy8gcmV0dXJuIHByb21pc2VcbiAgICAgICAgLy8gYW5kIGRvIHRoZSByZXF1ZXN0OlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgLy8gZG8gdGhlIHVzdWFsIHhociBzdHVmZjpcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignWC1SZXF1ZXN0ZWQtV2l0aCcsICdYTUxIdHRwUmVxdWVzdCcpO1xuXG4gICAgICAgICAgICAvLyBvbmxvYWQgaGFuZGxlcjpcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZERhdGEgPSB0aGlzLnJlcXVlc3QucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVcmwgPSBub3JtYWxpemVVcmwodXJsKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoUHVzaFN0YXRlc0V2ZW50cy5QUk9HUkVTUywgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoRXJyb3IodGhpcy5yZXF1ZXN0LnN0YXR1c1RleHQpKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0LnN0YXR1c1RleHQgIT09ICdhYm9ydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gY2F0Y2hpbmcgZXJyb3JzOlxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KEVycm9yKCdOZXR3b3JrIEVycm9yJykpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3QgPSBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gY2F0Y2ggcHJvZ3Jlc3NcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5vbnByb2dyZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoUHVzaFN0YXRlc0V2ZW50cy5QUk9HUkVTUywgZS5sb2FkZWQgLyBlLnRvdGFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBzZW5kIHJlcXVlc3Q6XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3Quc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIHRlbGxzIGlmIHJlbmRlcmVkIGh0bWwgbWF0Y2ggY3VycmVudCBwYXRobmFtZVxuICAgICAqL1xuICAgIHB1YmxpYyBpc1JlbmRlcmVkKHBhdGhuYW1lPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRVcmwgPT09IG5vcm1hbGl6ZVVybChwYXRobmFtZSB8fCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgICB9XG5cblxuICAgIC8qKiBmdW5jdGlvbiBjYWxsZWQgb24gc3VjY2Vzc2Z1bCBkYXRhIGxvYWQgKi9cbiAgICBwdWJsaWMgcmVuZGVyKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBkYXRhOiBzdHJpbmcgPSB0aGlzLmxvYWRlZERhdGEudHJpbSgpO1xuICAgICAgICBjb25zdCBjb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXJlcGxhY2VbaWRdLCAjY29udGVudCcpO1xuICAgICAgICBsZXQgcmVuZGVyZWRDb3VudCA9IDA7XG5cblxuICAgICAgICAvLyByZW5kZXIgZWFjaCBvZiBjb250YWluZXJzXG4gICAgICAgIC8vIGlmIG9ubHkgb25lIGNvbnRhaW5lciwgZm9yY2UgYHBsYWluYFxuICAgICAgICBpZiAoY29udGFpbmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250YWluZXJzLmZvckVhY2goKGNvbnRhaW5lciwgaW5kZXgpOiB2b2lkID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JjZSA9IGluZGV4ID09PSAwICYmIGNvbnRhaW5lcnMubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVkQ291bnQgKz0gdGhpcy5yZW5kZXJFbGVtZW50KGNvbnRhaW5lciBhcyBIVE1MRWxlbWVudCwgZGF0YSwgZm9yY2UpID8gMSA6IDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gcmUtdHJ5IHJlbmRlcmluZyBpZiBub25lIG9mIGNvbnRhaW5lcnMgd2VyZSByZW5kZXJlZDpcbiAgICAgICAgaWYgKHJlbmRlcmVkQ291bnQgPT09IDAgJiYgY29udGFpbmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSwgZGF0YSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJpbmRMaW5rcygpO1xuICAgICAgICB0aGlzLnNldEFjdGl2ZUxpbmtzKCk7XG5cbiAgICAgICAgLy8gZGlzcGF0Y2ggZ2xvYmFsIGV2ZW50IGZvciBzZXJkZWxpYSBDTVM6XG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnYWpheF9sb2FkZWQnKSk7XG5cbiAgICAgICAgLy8gZml4IGJyb3dzZXIgc2Nyb2xsIGhpc3RvcnkgY2FjaGVcbiAgICAgICAgd2luZG93Lmhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAnbWFudWFsJztcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHdpbmRvdy5oaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gJ21hbnVhbCc7IH0sIDEwMDApO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIHJlbmRlckVsZW1lbnQoZWw6IEhUTUxFbGVtZW50LCBkYXRhOiBzdHJpbmcsIGZvcmNlUGxhaW4/OiBib29sZWFuKTogYm9vbGVhbiB7XG5cbiAgICAgICAgbGV0IGNvZGU6IHN0cmluZyA9IG51bGw7XG5cbiAgICAgICAgaWYgKCFlbC5pZCkgeyBjb25zb2xlLndhcm4oJ1JlbmRlcmVkIGVsZW1lbnQgbXVzdCBoYXZlIGFuIGBpZGAgYXR0cmlidXRlIScpOyByZXR1cm4gZmFsc2U7IH1cblxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBgIyR7ZWwuaWR9YDtcblxuICAgICAgICAvLyBpZiBhamF4IHJldHVybnMgb25seSA8YXJ0aWNsZT4gZWxlbWVudDpcbiAgICAgICAgaWYgKCEhZm9yY2VQbGFpbiAmJiBkYXRhLmluZGV4T2YoJzxhcnRpY2xlJykgPT09IDAgJiYgZWwuaWQgPT09ICdjb250ZW50Jykge1xuICAgICAgICAgICAgY29kZSA9IGRhdGE7XG4gICAgICAgIH0gZWxzZSB7IC8vIGlmIGFqYXggcmV0dXJucyB3aG9sZSBodG1sOlxuICAgICAgICAgICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuICAgICAgICAgICAgY29uc3QgaHRtbERvY3VtZW50ID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhkYXRhLCAndGV4dC9odG1sJyk7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEVsZW1lbnQgPSBodG1sRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgICAgICAgICAgIGNvZGUgPSBmb3VuZEVsZW1lbnQgPyBmb3VuZEVsZW1lbnQuaW5uZXJIVE1MIDogbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29kZSkge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKGBDb3VsZG4ndCByZXJlbmRlciAjJHtlbC5pZH0gZWxlbWVudGApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwuaWQpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHdoaWxlIChjb250YWluZXJFbC5maXJzdENoaWxkKSBjb250YWluZXJFbC5yZW1vdmVDaGlsZChjb250YWluZXJFbC5maXJzdENoaWxkKTtcbiAgICAgICAgY29udGFpbmVyRWwuaW5uZXJIVE1MID0gY29kZSB8fCBkYXRhO1xuICAgICAgICBjb250YWluZXJFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cblxuXG4gICAgLyoqIGJpbmQgbGlua3MgKi9cbiAgICBwcml2YXRlIGJpbmRMaW5rKHRhcmdldDogRWxlbWVudCk6IHZvaWQge1xuICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICAgIH1cblxuXG5cbiAgICAvKiogYmluZCBsaW5rcyAqL1xuICAgIHByaXZhdGUgYmluZExpbmtzKHRhcmdldD86IEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdCA9IHRhcmdldCA/PyBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgIGNvbnN0IGxpbmtzID0gdC5xdWVyeVNlbGVjdG9yQWxsKCdhOm5vdChbZGF0YS1oaXN0b3J5PVwiZmFsc2VcIl0pOm5vdChbZGF0YS1jb21wb25lbnQ9XCJNb3JlXCJdKTpub3QoW2RhdGEtY29tcG9uZW50PVwiTG9hZFwiXSk6bm90KFtkYXRhLWFwaV0pOm5vdChbZG93bmxvYWRdKTpub3QoW2RhdGEtbW9kYWxdKTpub3QoW2hyZWZePVwiI1wiXSk6bm90KFtocmVmJD1cIi5qcGdcIl0pOm5vdChbdGFyZ2V0PVwiX2JsYW5rXCJdKTpub3QoW2hyZWZePVwibWFpbHRvOlwiXSk6bm90KFtocmVmXj1cInRlbDpcIl0pOm5vdChbZGF0YS1wb2N6dGFdKTpub3QoW2RhdGEtbG9naW5dKTpub3QoW2RhdGEtbGFuZ10pOm5vdChbZGF0YS1tb3JlXSk6bm90KFtkYXRhLWZpbHRlcnNdKScpO1xuXG4gICAgICAgIGxpbmtzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgLyoqIGxpbmtzIGNsaWNrIGhhbmRsZXIgKi9cbiAgICBwcml2YXRlIG9uQ2xpY2sgPSAoZTogRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHNlbGY6IEhUTUxFbGVtZW50ID0gZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBzdGF0ZTogc3RyaW5nID0gc2VsZi5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5yZXBsYWNlKGBodHRwOi8vJHt3aW5kb3cubG9jYXRpb24uaG9zdH1gLCAnJyk7XG4gICAgICAgIGNvbnN0IHR5cGU6IHN0cmluZyA9IHNlbGYuZGF0YXNldC5oaXN0b3J5O1xuXG4gICAgICAgIGlmICh0eXBlID09PSAnYmFjaycpIHtcbiAgICAgICAgICAgIFB1c2hTdGF0ZXMuYmFjayhzdGF0ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3JlcGxhY2UnKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyByYW5kb21EYXRhOiBNYXRoLnJhbmRvbSgpIH0sIGRvY3VtZW50LnRpdGxlLCBzdGF0ZSk7XG4gICAgICAgICAgICB0aGlzLm9uU3RhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNjcm9sbC5yZXNldFNjcm9sbENhY2hlKHN0YXRlKTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7IHJhbmRvbURhdGE6IE1hdGgucmFuZG9tKCkgfSwgZG9jdW1lbnQudGl0bGUsIHN0YXRlKTtcbiAgICAgICAgICAgIHRoaXMub25TdGF0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG5cbiAgICAvKiogYHN0YXRlY2hhbmdlYCBldmVudCBoYW5kbGVyICovXG4gICAgcHJpdmF0ZSBvblN0YXRlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnNldEFjdGl2ZUxpbmtzKCk7XG5cbiAgICAgICAgaWYgKCFQdXNoU3RhdGVzLm5vQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoUHVzaFN0YXRlc0V2ZW50cy5DSEFOR0UpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG5cbiAgICAvKiogbWFyayBsaW5rcyBhcyBhY3RpdmUgKi9cbiAgICBwcml2YXRlIHNldEFjdGl2ZUxpbmtzKCk6IHZvaWQge1xuICAgICAgICBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXScpXS5tYXAoZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJykpO1xuXG4gICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBhW2hyZWZePVwiJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9XCJdYCldXG4gICAgICAgICAgICAuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKSk7XG5cbiAgICAgICAgY29uc3QgcGF0aCA9IGAvJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKVsxXX1gO1xuICAgICAgICBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLm5hdiBhW2hyZWZePVwiJHtwYXRofVwiXWApXVxuICAgICAgICAgICAgLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgIChlbCBhcyBIVE1MQW5jaG9yRWxlbWVudCk/LmhyZWYgIT09ICcvJyAmJiBlbC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9tZW1iZXItb3JkZXJpbmcgKi9cbmltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5pbXBvcnQgeyBTY3JvbGxUcmlnZ2VyIH0gZnJvbSAnZ3NhcC9kaXN0L1Njcm9sbFRyaWdnZXInO1xuaW1wb3J0IHsgU2Nyb2xsVG9QbHVnaW4gfSBmcm9tICdnc2FwL2Rpc3QvU2Nyb2xsVG9QbHVnaW4nO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL0NvbXBvbmVudCc7XG5pbXBvcnQgeyBicm93c2VyIH0gZnJvbSAnLi9TaXRlJztcbmltcG9ydCB7IGdldEFuaW1hdGlvbiB9IGZyb20gJy4vQW5pbWF0ZSc7XG5pbXBvcnQgeyBhbmltYXRpb25zLCBzY3JvbGxzIH0gZnJvbSAnLi9hbmltYXRpb25zL2FsbCc7XG5pbXBvcnQgeyBub3JtYWxpemVVcmwgfSBmcm9tICcuL1V0aWxzJztcblxuXG5leHBvcnQgdHlwZSBTY3JvbGxUb1Byb3BzID0ge1xuICAgIGVsPzogSFRNTEVsZW1lbnQ7XG4gICAgaXNTbW9vdGg/OiBib29sZWFuO1xuICAgIG9mZnNldFk/OiBudW1iZXI7XG4gICAgZHVyYXRpb24/OiBudW1iZXI7XG4gICAgZWFzZT86IHN0cmluZztcbiAgICB5PzogbnVtYmVyO1xuICAgIG9uQ29tcGxldGU/OiAoKT0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBJU2Nyb2xsRGF0YSB7XG4gICAgZWw6IEhUTUxFbGVtZW50O1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBkZWxheT86IG51bWJlcjtcbiAgICBjb21wb25lbnQ/OiBDb21wb25lbnQ7XG59XG5cbmludGVyZmFjZSBJUGFyYWxsYXhEYXRhIHtcbiAgICBlbDogSFRNTEVsZW1lbnQ7XG4gICAgcGFyYWxsYXg6IG51bWJlcixcbiAgICBkZWxheT86IG51bWJlcjtcbiAgICBjb21wb25lbnQ/OiBDb21wb25lbnQ7XG59XG5cbmdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVHJpZ2dlciwgU2Nyb2xsVG9QbHVnaW4pO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Nyb2xsIHtcblxuICAgIHB1YmxpYyBzdGF0aWMgbWF0Y2hNZWRpYTogYW55ID0gbnVsbDtcblxuICAgIHByaXZhdGUgc3RhdGljIGVuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHByaXZhdGUgc3RhdGljIHNjcm9sbENhY2hlOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgcmVzaXplKCk6IHZvaWQge1xuICAgICAgICBTY3JvbGxUcmlnZ2VyLnJlZnJlc2goKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgZW5hYmxlKCk6IHZvaWQge1xuICAgICAgICBTY3JvbGwuZW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgc3RhdGljIGRpc2FibGUoKTogdm9pZCB7XG4gICAgICAgIFNjcm9sbC5lbmFibGVkID0gZmFsc2U7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgc3RhdGljIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgU2Nyb2xsLm9uU2Nyb2xsKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgc3RvcCgpOiB2b2lkIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIFNjcm9sbC5vblNjcm9sbCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzdGF0aWMgcmVzZXRTY3JvbGxDYWNoZShwYXRobmFtZSk6IHZvaWQge1xuICAgICAgICBTY3JvbGwuc2Nyb2xsQ2FjaGVbcGF0aG5hbWVdID0gMDtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgc3RhdGljIG9uU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgICBpZiAoIVNjcm9sbC5lbmFibGVkKSB7IHJldHVybjsgfVxuICAgICAgICBTY3JvbGwuc2Nyb2xsQ2FjaGVbd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXSA9IHdpbmRvdy5zY3JvbGxZO1xuICAgIH07XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBzY3JvbGxUbyA9IGFzeW5jKHtcbiAgICAgICAgZWwsXG4gICAgICAgIHksXG4gICAgICAgIGR1cmF0aW9uID0gMSxcbiAgICAgICAgZWFzZSA9ICdub25lJyxcbiAgICAgICAgb2Zmc2V0WSA9IDAsXG4gICAgfTogU2Nyb2xsVG9Qcm9wcyk6IFByb21pc2U8dm9pZD4gPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGdzYXAudG8od2luZG93LCB7XG4gICAgICAgICAgICBzY3JvbGxUbzoge1xuICAgICAgICAgICAgICAgIHk6IHkgPz8gZWwsXG4gICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICBvZmZzZXRZLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzZSxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHJlc29sdmUoKSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBzY3JvbGxUb1RvcCA9IGFzeW5jKGZhc3Q/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICAgIGF3YWl0IFNjcm9sbC5zY3JvbGxUbyh7XG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBhZ2VdJyksXG4gICAgICAgICAgICBkdXJhdGlvbjogZmFzdCA/IDAgOiAyLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHB1YmxpYyBzdGF0aWMgc2Nyb2xsVG9DYWNoZWQoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHkgPSBTY3JvbGwuc2Nyb2xsQ2FjaGVbbm9ybWFsaXplVXJsKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXSB8fCAwO1xuICAgICAgICBTY3JvbGwuc2Nyb2xsVG8oeyB5LCBkdXJhdGlvbjogMCB9KTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGFzeW5jIGxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIChTY3JvbGxUcmlnZ2VyIGFzIGFueSkuY2xlYXJTY3JvbGxNZW1vcnkoJ21hbnVhbCcpO1xuICAgICAgICB0aGlzLmJpbmRIYXNoQ2xpY2soKTtcbiAgICAgICAgdGhpcy5zZXR1cCgpO1xuICAgICAgICBTY3JvbGwucmVzaXplKCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzZXR1cCgpOiB2b2lkIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnc2Nyb2xsIHNldHVwJywgZ3NhcC52ZXJzaW9uKTtcblxuICAgICAgICAvLyBpZiAoYnJvd3Nlci5zYWZhcmkpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgU2Nyb2xsLm1hdGNoTWVkaWEgPSAoZ3NhcCBhcyBhbnkpLm1hdGNoTWVkaWEoKTtcbiAgICAgICAgLy8gU2Nyb2xsLm1hdGNoTWVkaWEuYWRkKCcobWluLXdpZHRoOiAxMDI0cHgpJywgKCkgPT4ge31cblxuXG4gICAgICAgIC8vIGdlbmVyYWwgYW5pbWF0aW9uczpcbiAgICAgICAgWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWFuaW1hdGlvbl0nKV1cbiAgICAgICAgICAgIC5tYXAoKGVsOiBIVE1MRWxlbWVudCkgPT4gPElTY3JvbGxEYXRhPntcbiAgICAgICAgICAgICAgICBlbCxcbiAgICAgICAgICAgICAgICB0eXBlOiBlbC5kYXRhc2V0LmFuaW1hdGlvbixcbiAgICAgICAgICAgICAgICBkZWxheTogcGFyc2VJbnQoZWwuZGF0YXNldC5kZWxheSwgMTApIHx8IDAsXG4gICAgICAgICAgICB9KS5mb3JFYWNoKChpdGVtOiBJU2Nyb2xsRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb25zW2l0ZW0udHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogaXRlbS5lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUFjdGlvbnM6ICdwbGF5IHBhdXNlIHJlc3VtZSByZXNldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGdldEFuaW1hdGlvbihpdGVtLnR5cGUsIGl0ZW0uZWwsIGl0ZW0uZGVsYXkgfHwgMCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgYW5pbWF0aW9uIHR5cGUgXCIke2l0ZW0udHlwZX1cIiBkb2VzIG5vdCBleGlzdGAsIGl0ZW0uZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gY3VzdG9tIGFuaW1hdGlvbnM6XG4gICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zY3JvbGxdJyldXG4gICAgICAgICAgICAubWFwKChlbDogSFRNTEVsZW1lbnQpID0+IDxJU2Nyb2xsRGF0YT57XG4gICAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgICAgdHlwZTogZWwuZGF0YXNldC5zY3JvbGwsXG4gICAgICAgICAgICAgICAgZGVsYXk6IHBhcnNlSW50KGVsLmRhdGFzZXQuZGVsYXksIDEwKSB8fCAwLFxuICAgICAgICAgICAgfSkuZm9yRWFjaCgoaXRlbTogSVNjcm9sbERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsc1tpdGVtLnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbHNbaXRlbS50eXBlXShpdGVtLmVsLCBpdGVtLmRlbGF5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYHNjcm9sbCB0eXBlIFwiJHtpdGVtLnR5cGV9XCIgZG9lcyBub3QgZXhpc3RgLCBpdGVtLmVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIHBhcmFsbGF4ZXM6XG4gICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wYXJhbGxheF0nKV1cbiAgICAgICAgICAgIC5tYXAoKGVsOiBIVE1MRWxlbWVudCkgPT4gPElQYXJhbGxheERhdGE+IHtcbiAgICAgICAgICAgICAgICBlbCxcbiAgICAgICAgICAgICAgICBwYXJhbGxheDogcGFyc2VJbnQoZWwuZGF0YXNldC5wYXJhbGxheCwgMTApLFxuICAgICAgICAgICAgICAgIGRlbGF5OiBlbC5kYXRhc2V0LmRlbGF5IHx8IDAsXG4gICAgICAgICAgICB9KS5mb3JFYWNoKChpdGVtOiBJUGFyYWxsYXhEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgZ3NhcC5mcm9tVG8oaXRlbS5lbCwgeyB5OiAtaXRlbS5wYXJhbGxheCAqICh3aW5kb3cuaW5uZXJXaWR0aCAvIDEyODApIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgeTogKCkgPT4gaXRlbS5wYXJhbGxheCAqICh3aW5kb3cuaW5uZXJXaWR0aCAvIDEyODApLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGl0ZW0uZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgcmV2ZXJ0QW5pbWF0aW9ucygpOiB2b2lkIHtcbiAgICAgICAgU2Nyb2xsLm1hdGNoTWVkaWE/LnJldmVydCgpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGJpbmRIYXNoQ2xpY2soKTogdm9pZCB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZl49XCIjXCJdOm5vdChhW2hyZWY9XCIjXCJdKScpLmZvckVhY2goKGVsOiBIVE1MQW5jaG9yRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uSGFzaENsaWNrSGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIG9uSGFzaENsaWNrSGFuZGxlciA9IGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgY29uc3QgeyBoYXNoIH0gPSAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxBbmNob3JFbGVtZW50KTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoYXNoKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICB0YXJnZXRcbiAgICAgICAgICAgID8gU2Nyb2xsLnNjcm9sbFRvKHsgZWw6IHRhcmdldCB9KVxuICAgICAgICAgICAgOiBjb25zb2xlLndhcm4oJ1RoZXJlIGlzIG5vICVzIGVsZW1lbnQnLCBoYXNoKTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IGVhc2luZyB9IGZyb20gJy4vU2l0ZSc7XG5pbXBvcnQgeyBBUEksIElBcGlEYXRhIH0gZnJvbSAnLi93aWRnZXRzL0FQSSc7XG4vLyBpbXBvcnQgV2lkZ2V0cyBmcm9tICd3aWRnZXRzL0FsbCc7XG5pbXBvcnQgeyBQdXNoU3RhdGVzIH0gZnJvbSAnLi9QdXNoU3RhdGVzJztcbmltcG9ydCB7IFRlbXBsYXRlcywgVGVtcGxhdGVOYW1lcyB9IGZyb20gJy4vdGVtcGxhdGVzL1RlbXBsYXRlcyc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL1V0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBJU2VhcmNoU2V0dGluZ3Mge1xuICAgIGxpdmVNaW5MZW4/OiBudW1iZXI7XG4gICAgdGltZW91dD86IG51bWJlcjtcbn1cblxuXG5leHBvcnQgY2xhc3MgU2VhcmNoIHtcblxuICAgIHByaXZhdGUgc2V0dGluZ3M6IElTZWFyY2hTZXR0aW5ncztcbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbnM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgc2VhcmNoQmc6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc2VhcmNoQ29udGVudDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBidG5DbG9zZTogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsaXZlOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgZm9ybTogSFRNTEZvcm1FbGVtZW50O1xuICAgIHByaXZhdGUgbGl2ZUxpc3Q6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgbGl2ZUJvdHRvbTogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsaXZlTGk6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgaXNMaXZlU2hvd246IGJvb2xlYW47XG4gICAgcHJpdmF0ZSB0aW1lcjtcbiAgICBwcml2YXRlIGxpdmVUZW1wbGF0ZTtcbiAgICBwcml2YXRlIGlzT3BlbjogYm9vbGVhbjtcbiAgICBwcml2YXRlIGFsbExpbms6IEhUTUxFbGVtZW50O1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHZpZXc6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuXG4gICAgcHVibGljIG9uU3RhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMub25Gb3JtUmVzZXQoKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgICAgICAgbGl2ZU1pbkxlbjogMyxcbiAgICAgICAgICAgIHRpbWVvdXQ6IDI1MCxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNlYXJjaEJnID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zZWFyY2gtYmcnKTtcbiAgICAgICAgdGhpcy5zZWFyY2hDb250ZW50ID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zZWFyY2gtY29udGVudCcpO1xuICAgICAgICB0aGlzLmJ0bkNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNlYXJjaC1jbG9zZScpO1xuICAgICAgICB0aGlzLmlucHV0ID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2gtaW5wJyk7XG4gICAgICAgIHRoaXMuZm9ybSA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtZm9ybScpO1xuICAgICAgICB0aGlzLmxpdmUgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLWxpdmVzZWFyY2gnKTtcbiAgICAgICAgdGhpcy5saXZlVGVtcGxhdGUgPSBUZW1wbGF0ZXMuZ2V0KFRlbXBsYXRlTmFtZXMuTElWRVNFQVJDSCk7XG5cbiAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25UeXBlKTtcblxuICAgICAgICB0aGlzLmJpbmQoKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBiaW5kKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCB0aGlzLm9uRm9ybVJlc2V0KTtcbiAgICAgICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMub25Gb3JtU3VibWl0KTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBvbkZvcm1SZXNldCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkhpZGUoKTtcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy12YWx1ZScpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbkZvcm1TdWJtaXQgPSAoZSk6IHZvaWQgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHBhdGhuYW1lID0gdGhpcy5mb3JtLmdldEF0dHJpYnV0ZSgnYWN0aW9uJykgfHwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBVdGlscy5nZXRRdWVyeVN0cmluZyh0aGlzLmZvcm0pO1xuXG4gICAgICAgIFB1c2hTdGF0ZXMuZ29UbyhgJHtwYXRobmFtZX0/JHtwYXJhbXN9YCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uVHlwZSA9IChlKTogdm9pZCA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLmlucHV0O1xuXG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtdmFsdWUnLCB2YWx1ZS5sZW5ndGggPiAwKTtcblxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDwgdGhpcy5zZXR0aW5ncy5saXZlTWluTGVuKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkhpZGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcbiAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBmb3JtRGF0YTogSUFwaURhdGEgPSB7IHVybDogdGhpcy5mb3JtLmdldEF0dHJpYnV0ZSgnZGF0YS1hcGktdXJsJykgfTtcblxuICAgICAgICAgICAgQVBJLmNhbGxJdChmb3JtRGF0YSwgdGhpcy5mb3JtLCAoZGF0YSwgZWwsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXZlUmVzcG9uc2UoZGF0YSwgZWwsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfSwgdGhpcy5zZXR0aW5ncy50aW1lb3V0KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgbGl2ZVJlc3BvbnNlKGRhdGEsIGVsLCByZXNwb25zZSk6IHZvaWQge1xuICAgICAgICBpZiAocmVzcG9uc2UucmVzdWx0cykge1xuICAgICAgICAgICAgdGhpcy5saXZlLmlubmVySFRNTCA9IHRoaXMubGl2ZVRlbXBsYXRlLnJlbmRlcihyZXNwb25zZSk7XG4gICAgICAgICAgICAvLyB0aGlzLnRyaWdnZXIoQ29tcG9uZW50RXZlbnRzLkNIQU5HRSwgdGhpcy5saXZlKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0xpdmVSZXN1bHRzKCk7XG4gICAgICAgICAgICBQdXNoU3RhdGVzLmJpbmQodGhpcy5saXZlKTtcbiAgICAgICAgICAgIC8vIFdpZGdldHMuYmluZCh0aGlzLmxpdmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWlja0hpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIHNob3dMaXZlUmVzdWx0cygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLWxpdmVzZWFyY2gtc2hvd24nKTtcbiAgICAgICAgdGhpcy5saXZlTGlzdCA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtbGl2ZXNlYXJjaC1saXN0Jyk7XG4gICAgICAgIHRoaXMubGl2ZUxpID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1saXZlc2VhcmNoLWl0ZW0nKTtcbiAgICAgICAgdGhpcy5hbGxMaW5rID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1saXZlc2VhcmNoLWFsbCcpO1xuXG4gICAgICAgIC8vIHNldCBtYXgtaGVpZ2h0IG9mIGxpdmVzZWFyY2ggd3JhcCAtIHByZXZlbnQgZ3Jvd2luZyBvdXRzaWRlIHZpZXdwb3J0XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWluKHRoaXMubGl2ZUxpc3QuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjc1KTtcbiAgICAgICAgY29uc3QgdGwgPSBnc2FwLnRpbWVsaW5lKCk7XG5cbiAgICAgICAgdGwudG8odGhpcy5saXZlTGlzdC5wYXJlbnRFbGVtZW50LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogIXRoaXMuaXNMaXZlU2hvd24gPyAwLjggOiAwLFxuICAgICAgICAgICAgLy8gaGVpZ2h0LFxuICAgICAgICAgICAgZWFzZTogZWFzaW5nLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLmZyb21UbyhcbiAgICAgICAgICAgICAgICB0aGlzLmxpdmVMaSxcbiAgICAgICAgICAgICAgICB7IHk6IHRoaXMuaXNMaXZlU2hvd24gPyAwIDogd2luZG93LmlubmVySGVpZ2h0IH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC45LFxuICAgICAgICAgICAgICAgICAgICBzdGFnZ2VyOiAwLjEsXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IGVhc2luZyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmFsbExpbmsgJiYgdGwuZnJvbVRvKFxuICAgICAgICAgICAgdGhpcy5hbGxMaW5rLFxuICAgICAgICAgICAgeyBvcGFjaXR5OiB0aGlzLmlzTGl2ZVNob3duID8gMSA6IDAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICAgICAgICAgICAgZWFzZTogZWFzaW5nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmlzTGl2ZVNob3duID0gdHJ1ZTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBxdWlja0hpZGUoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5saXZlTGlzdCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbGl2ZXNlYXJjaC1zaG93bicpO1xuXG4gICAgICAgIGdzYXAudG8odGhpcy5saXZlTGlzdC5wYXJlbnRFbGVtZW50LCB7XG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4wMSxcbiAgICAgICAgICAgIGRlbGF5OiAwLjgsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMubGl2ZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGFuaW1hdGlvbkhpZGUoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pc0xpdmVTaG93bikgcmV0dXJuO1xuXG4gICAgICAgIC8vIGhpZGUgJ2FsbCcgbGluayBiZWZvcmUgaGlkaW5nIGFsbCBsaSdzXG4gICAgICAgIGdzYXAudG8odGhpcy5hbGxMaW5rLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgICAgIGVhc2U6IGVhc2luZyxcbiAgICAgICAgfSk7XG4gICAgICAgIFsuLi50aGlzLmxpdmVMaV0ucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBnc2FwLnRvKGl0ZW0sIHtcbiAgICAgICAgICAgICAgICB5OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgcm90YXRlOiBpbmRleCAlIDIgPT09IDAgPyAxNSA6IC0xNSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgICAgIGRlbGF5OiBpbmRleCAqIDAuMSxcbiAgICAgICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBhbGwgdHdlZW5zXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5saXZlTGkubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3NhcC5zZXQodGhpcy5saXZlTGlzdC5wYXJlbnRFbGVtZW50LCB7IGhlaWdodDogMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGl2ZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbGl2ZXNlYXJjaC1zaG93bicpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICB0aGlzLmlzTGl2ZVNob3duID0gZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IFNjcm9sbFRyaWdnZXIgfSBmcm9tICdnc2FwL2Rpc3QvU2Nyb2xsVHJpZ2dlcic7XG5pbXBvcnQgeyBDdXN0b21FYXNlIH0gZnJvbSAnZ3NhcC9kaXN0L0N1c3RvbUVhc2UnO1xuaW1wb3J0IFNjcm9sbCBmcm9tICcuL1Njcm9sbCc7XG5pbXBvcnQgeyBwYWdlcyBhcyBQYWdlcyB9IGZyb20gJy4vQ2xhc3Nlcyc7XG5pbXBvcnQgeyBzdGF0cywgZGVib3VuY2UsIHNldEFwcEhlaWdodCwgc2V0VndVbml0IH0gZnJvbSAnLi9VdGlscyc7XG5pbXBvcnQgeyBJQnJvd3NlciwgZ2V0QnJvd3NlciB9IGZyb20gJy4vQnJvd3Nlcic7XG5pbXBvcnQgeyBJQnJlYWtwb2ludCwgZ2V0QnJlYWtwb2ludCB9IGZyb20gJy4vQnJlYWtwb2ludCc7XG5pbXBvcnQgeyBQdXNoU3RhdGVzLCBQdXNoU3RhdGVzRXZlbnRzIH0gZnJvbSAnLi9QdXNoU3RhdGVzJztcbmltcG9ydCB7IFBhZ2UsIFBhZ2VFdmVudHMgfSBmcm9tICcuL3BhZ2VzL1BhZ2UnO1xuaW1wb3J0IHsgTWVudSB9IGZyb20gJy4vTWVudSc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCB7IFNlYXJjaCB9IGZyb20gJy4vU2VhcmNoJztcbmltcG9ydCB7IEF1ZGlvUGxheWVyIH0gZnJvbSAnLi9jb21wb25lbnRzL0F1ZGlvUGxheWVyJztcbmltcG9ydCB7IExvYWRlciB9IGZyb20gJy4vY29tcG9uZW50cy9Mb2FkZXInO1xuaW1wb3J0IHsgTGlnaHRib3ggfSBmcm9tICcuL2NvbXBvbmVudHMvTGlnaHRib3gvTGlnaHRib3gnO1xuXG5pbXBvcnQgV2lkZ2V0cyBmcm9tICcuL3dpZGdldHMvQWxsJztcblxuZXhwb3J0IGNvbnN0IGxvY2FsID0gISF3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUubWF0Y2goLyhsb2NhbGhvc3R8XFwubGh8MTkyXFwuMTY4XFwuKS9nKTtcbmV4cG9ydCBjb25zdCBkZWJ1ZyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZignZGVidWcnKSA+PSAwO1xuXG5leHBvcnQgbGV0IGxhbmc6IHN0cmluZztcbmV4cG9ydCBsZXQgcGl4ZWxSYXRpbzogbnVtYmVyO1xuZXhwb3J0IGxldCBlYXNpbmc6IHN0cmluZztcbmV4cG9ydCBsZXQgYnJvd3NlcjogSUJyb3dzZXI7XG5leHBvcnQgbGV0IGJyZWFrcG9pbnQ6IElCcmVha3BvaW50O1xuXG5nc2FwLnJlZ2lzdGVyUGx1Z2luKEN1c3RvbUVhc2UpO1xuXG5cbmNsYXNzIFNpdGUge1xuXG4gICAgcHJpdmF0ZSBjdXJyZW50UGFnZTogUGFnZTtcbiAgICBwcml2YXRlIHB1c2hTdGF0ZXM6IFB1c2hTdGF0ZXM7XG4gICAgcHJpdmF0ZSBzY3JvbGw6IFNjcm9sbDtcbiAgICBwcml2YXRlIG1lbnU6IE1lbnU7XG4gICAgcHJpdmF0ZSBuZXdzbGV0dGVyQnV0dG9uOiBCdXR0b247XG4gICAgcHJpdmF0ZSBsaWdodGJveDogTGlnaHRib3g7XG4gICAgcHJpdmF0ZSBzZWFyY2g6IFNlYXJjaDtcbiAgICBwcml2YXRlIGF1ZGlvUGxheWVyOiBBdWRpb1BsYXllcjtcbiAgICBwcml2YXRlIGxvYWRlcjogTG9hZGVyO1xuXG4gICAgcHJpdmF0ZSBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSByZXNpemluZ1RpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuXG5cblxuICAgIHB1YmxpYyBpbml0KCk6IHZvaWQge1xuXG4gICAgICAgIGNvbnNvbGUuZ3JvdXAoKTtcblxuICAgICAgICBicmVha3BvaW50ID0gZ2V0QnJlYWtwb2ludCgpO1xuICAgICAgICBicm93c2VyID0gZ2V0QnJvd3NlcigpO1xuICAgICAgICBlYXNpbmcgPSBDdXN0b21FYXNlLmNyZWF0ZSgnY3VzdG9tJywgJzAuNSwgMCwgMC4xLCAxJyk7XG4gICAgICAgIGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsYW5nJyk7XG4gICAgICAgIHBpeGVsUmF0aW8gPSBNYXRoLm1pbigyLCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKTtcblxuICAgICAgICB0aGlzLmJpbmQoKTtcbiAgICAgICAgc2V0VndVbml0KCk7XG4gICAgICAgIHNldEFwcEhlaWdodCgpO1xuXG4gICAgICAgIGRlYnVnICYmIHN0YXRzKCk7XG5cbiAgICAgICAgdGhpcy5wdXNoU3RhdGVzID0gbmV3IFB1c2hTdGF0ZXMoKTtcbiAgICAgICAgdGhpcy5wdXNoU3RhdGVzLm9uKFB1c2hTdGF0ZXNFdmVudHMuQ0hBTkdFLCB0aGlzLm9uU3RhdGUpO1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsID0gbmV3IFNjcm9sbCgpO1xuXG4gICAgICAgIHRoaXMubGlnaHRib3ggPSBuZXcgTGlnaHRib3goKTtcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1lbnUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLW1lbnUnKSk7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gbmV3IFNlYXJjaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoJykpO1xuICAgICAgICB0aGlzLmxvYWRlciA9IG5ldyBMb2FkZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWxvYWRlcicpKTtcbiAgICAgICAgdGhpcy5uZXdzbGV0dGVyQnV0dG9uID0gbmV3IEJ1dHRvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbmV3c2xldHRlci1idXR0b24nKSk7XG5cbiAgICAgICAgdGhpcy5hdWRpb1BsYXllciA9IG5ldyBBdWRpb1BsYXllcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtYXVkaW9wbGF5ZXInKSk7XG5cbiAgICAgICAgaWYgKGJyb3dzZXIuaWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhpcyBicm93c2VyIGlzIG91dGRhdGVkIScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgUHVzaFN0YXRlcy5zZXRUaXRsZSgpO1xuXG4gICAgICAgIFByb21pc2UuYWxsPHZvaWQ+KFtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFBhZ2UoKSxcbiAgICAgICAgICAgIC8vIHRoaXMubG9hZGVyLmFuaW1hdGUoKSxcbiAgICAgICAgICAgIC8vIHByZWxvYWQgb3RoZXIgY29tcG9uZW50cyBpZiBuZWVkZWRcbiAgICAgICAgXSkudGhlbih0aGlzLm9uUGFnZUxvYWRlZCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBhZGQgc29tZSBnZW5lcmFsIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqL1xuICAgIHByaXZhdGUgYmluZCgpOiB2b2lkIHtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkhLmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRlZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBkZWxheWVkIHJlc2l6ZSB0byBwcmV2ZW50IHRyYW5zaXRpb25zOlxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1yZXNpemluZycpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXppbmdUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMucmVzaXppbmdUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblJlc2l6ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtcmVzaXppbmcnKTtcbiAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIGRlYm91bmNlKCgpID0+IHRoaXMub25SZXNpemUodHJ1ZSkpKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIHJlc2l6ZSBoYW5kbGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBvblJlc2l6ZSA9IChpc09yaWVudGF0aW9uQ2hhbmdlZD86IGJvb2xlYW4pOiB2b2lkID0+IHtcblxuICAgICAgICBzZXRWd1VuaXQoKTtcblxuICAgICAgICBjb25zdCBvbGRCcmVha3BvaW50ID0gYnJlYWtwb2ludCA/IGJyZWFrcG9pbnQudmFsdWUgOiBudWxsO1xuICAgICAgICBicmVha3BvaW50ID0gZ2V0QnJlYWtwb2ludCgpO1xuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IG9sZEJyZWFrcG9pbnQgIT09IGJyZWFrcG9pbnQudmFsdWU7XG5cbiAgICAgICAgIWJyb3dzZXIudG91Y2ggJiYgc2V0QXBwSGVpZ2h0KCk7XG4gICAgICAgIGlzT3JpZW50YXRpb25DaGFuZ2VkICYmIHNldEFwcEhlaWdodCgpO1xuXG5cbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZT8ucmVzaXplKHdpZHRoLCBoZWlnaHQsIGJyZWFrcG9pbnQsIGNoYW5nZWQpO1xuICAgICAgICAoIWJyb3dzZXIudG91Y2ggfHwgY2hhbmdlZCkgJiYgU2Nyb2xsPy5yZXNpemUoKTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBjaGVjayBpZiBhbnkgY29tcG9uZW50IGhhbmRsZSBvblN0YXRlIGV2ZW50XG4gICAgICogaWYgbm90LCByZWxvYWQgaHRtbDpcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzUmVuZGVyZWQgPSB0aGlzLnB1c2hTdGF0ZXMuaXNSZW5kZXJlZCgpO1xuICAgICAgICBjb25zdCBwYWdlQ2hhbmdlZFN0YXRlID0gdGhpcy5jdXJyZW50UGFnZS5vblN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGxpZ2h0Ym94Q2hhbmdlZFN0YXRlID0gdGhpcy5saWdodGJveC5vblN0YXRlKGlzUmVuZGVyZWQpO1xuICAgICAgICB0aGlzLm1lbnU/Lm9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy5zZWFyY2g/Lm9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy5sb2FkZXI/Lm9uU3RhdGUoKTtcblxuICAgICAgICBpZiAoIWlzUmVuZGVyZWQgJiYgIXBhZ2VDaGFuZ2VkU3RhdGUgJiYgIWxpZ2h0Ym94Q2hhbmdlZFN0YXRlKSB7XG4gICAgICAgICAgICBQcm9taXNlLmFsbDx2b2lkPihbXG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGVzLmxvYWQoKSxcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLmFuaW1hdGVPdXQoKSxcbiAgICAgICAgICAgIF0pLnRoZW4odGhpcy5yZW5kZXIpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogY2FsbGVkIGFmdGVyIG5ldyBodG1sIGlzIGxvYWRlZFxuICAgICAqIGFuZCBvbGQgY29udGVudCBpcyBhbmltYXRlZCBvdXQ6XG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXIgPSBhc3luYygpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2Uub2ZmKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgICBjb25zb2xlLmdyb3VwKCk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1yZW5kZXJpbmcnKTtcbiAgICAgICAgUHVzaFN0YXRlcy5zZXRUaXRsZSgpO1xuICAgICAgICB0aGlzLnB1c2hTdGF0ZXMucmVuZGVyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgICAgdGhpcy5vblBhZ2VMb2FkZWQoKTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiB3aGVuIGN1cnJlbnQgcGFnZSBpcyBsb2FkZWQ6XG4gICAgICovXG4gICAgcHJpdmF0ZSBvblBhZ2VMb2FkZWQgPSBhc3luYygpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1ub3QtcmVhZHknLCAnaXMtcmVuZGVyaW5nJyk7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UuYW5pbWF0ZUluKDApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkZXIuaGlkZSgpO1xuICAgICAgICAgICAgIXRoaXMuaXNJbml0aWFsaXplZCAmJiBTY3JvbGwuc2Nyb2xsVG9Ub3AodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbC5sb2FkKCk7XG4gICAgICAgICAgICBTY3JvbGwuc3RhcnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFB1c2hTdGF0ZXMuc2V0VGl0bGUoKTtcbiAgICAgICAgdGhpcy5hdWRpb1BsYXllci5iaW5kQnV0dG9ucygpO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH07XG5cblxuXG4gICAgLyoqXG4gICAgICogcnVuIG5ldyBQYWdlIG9iamVjdFxuICAgICAqIChmb3VuZCBieSBgZGF0YS1wYWdlYCBhdHRyaWJ1dGUpXG4gICAgICogYmluZCBpdCBhbmQgc3RvcmUgYXMgY3VycmVudFBhZ2U6XG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXRDdXJyZW50UGFnZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcGFnZUxpc3Q6IE5vZGVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFnZV0nKTtcbiAgICAgICAgbGV0IHBhZ2VFbDogSFRNTEVsZW1lbnQgPSBwYWdlTGlzdFswXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgbGV0IHBhZ2VOYW1lOiBzdHJpbmcgPSBwYWdlRWwuZGF0YXNldC5wYWdlIHx8ICdQYWdlJztcbiAgICAgICAgY29uc3QgcGFnZU9wdGlvbnM6IE9iamVjdCA9IHBhZ2VFbC5kYXRhc2V0Lm9wdGlvbnM7XG5cbiAgICAgICAgLy8gcGFnZSBub3QgZm91bmQ6XG4gICAgICAgIGlmIChQYWdlc1twYWdlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHBhZ2VOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhlcmUgaXMgbm8gXCIlc1wiIGluIFBhZ2VzIScsIHBhZ2VOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhZ2VOYW1lID0gJ1BhZ2UnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW9yZSB0aGFuIG9uZSBkYXRhLXBhZ2U6XG4gICAgICAgIGlmIChwYWdlTGlzdC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ09ubHkgb25lIFtkYXRhLXBhZ2VdIGVsZW1lbnQsIHBsZWFzZSEnKTtcblxuICAgICAgICAvLyBwYWdlIG5vdCBkZWZpbmVkIGluIGh0bWw6XG4gICAgICAgIH0gZWxzZSBpZiAocGFnZUxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBhcnRpY2xlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpLnF1ZXJ5U2VsZWN0b3IoJ2FydGljbGUnKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XG4gICAgICAgICAgICBwYWdlRWwgPSBhcnRpY2xlRWwgfHwgY29udGVudEVsIS5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0IGN1c3RvbSBjbGFzc2VzIHRvIGJvZHkgYmFzZWQgb24gPGFydGljbGU+IHBhcmFtZXRlcnNcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdpcy00MDQnLCBCb29sZWFuKGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignW2RhdGEtbm90LWZvdW5kXScpKSk7XG5cbiAgICAgICAgY29uc3QgaXNIb21lOiBib29sZWFuID0gISFkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhvbWVdJyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtaG9tZXBhZ2UnLCBpc0hvbWUpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBQYWdlIG9iamVjdDpcbiAgICAgICAgY29uc3QgcGFnZTogUGFnZSA9IG5ldyBQYWdlc1twYWdlTmFtZV0ocGFnZUVsLCBwYWdlT3B0aW9ucyk7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlO1xuXG4gICAgICAgIC8vIGJpbmQgZXZlbnRzOlxuICAgICAgICBwYWdlLm9uKFBhZ2VFdmVudHMuQ0hBTkdFLCB0aGlzLm9uUGFnZUFwcGVuZCk7XG5cbiAgICAgICAgLy8gYmluZCB3aWRnZXRzOlxuICAgICAgICBXaWRnZXRzLmJpbmQoKTtcblxuICAgICAgICAvLyB1cGRhdGUgbGlua3M6XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlTGlua3MoKTtcblxuICAgICAgICBTY3JvbGwuc2Nyb2xsVG9DYWNoZWQoKTtcbiAgICAgICAgU2Nyb2xsVHJpZ2dlci5yZWZyZXNoKCk7XG5cbiAgICAgICAgdGhpcy5saWdodGJveD8uY2hlY2soKTtcbiAgICAgICAgdGhpcy5sb2FkZXIuY2hlY2soaXNIb21lKTtcblxuICAgICAgICByZXR1cm4gcGFnZS5wcmVsb2FkKCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBkZWFsIHdpdGggbmV3bHkgYWRkZWQgZWxlbWVudHNcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUGFnZUFwcGVuZCA9IChlbDogSFRNTEVsZW1lbnQpOiB2b2lkID0+IHtcbiAgICAgICAgUHVzaFN0YXRlcy5iaW5kKGVsKTtcbiAgICAgICAgdGhpcy5zY3JvbGwubG9hZCgpO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIHRvZ2dsZSBhY3RpdmUgbGlua3Mgd2l0aCB0aGUgcGFnZSBjaGFuZ2VcbiAgICAgKi9cbiAgICBwcml2YXRlIHNldEFjdGl2ZUxpbmtzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhbmNob3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXScpO1xuICAgICAgICBjb25zdCBwYXRobmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC8rJC8sICcnKTtcblxuICAgICAgICBbLi4uYW5jaG9yc10uZm9yRWFjaChhbmNob3IgPT4ge1xuICAgICAgICAgICAgYW5jaG9yLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBhW2hyZWY9XCIke3BhdGhuYW1lfS9cIl0sIGFbaHJlZj1cIiR7cGF0aG5hbWV9XCJdYCkuZm9yRWFjaChsaW5rID0+IGxpbms/LmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpKTtcbiAgICB9XG59XG5cblxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICBjb25zdCBzaXRlID0gbmV3IFNpdGUoKTtcbiAgICBzaXRlLmluaXQoKTtcbn0pO1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVSUQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7KG5ldyBEYXRlKCkpLmdldFRpbWUoKX0ke01hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9YDtcbn1cblxuXG5cbmV4cG9ydCBjb25zdCBkZWJvdW5jZSA9IChjYWxsYmFjazogRnVuY3Rpb24sIHRpbWVvdXQ6IG51bWJlciA9IDMwMCkgPT4ge1xuICAgIGxldCB0aW1lb3V0SWQgPSBudWxsO1xuXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgfTtcbn07XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEFwcEhlaWdodCgpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tYXBwLWhlaWdodCcsIGAke3dpbmRvdy5pbm5lckhlaWdodH1weGApO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRWd1VuaXQoKTogdm9pZCB7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZ3JywgYCR7ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRofXB4YCk7XG59XG5cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5leHBvcnQgZnVuY3Rpb24gc3RhdHMoKTogU3RhdHMge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIGNvbnN0IHN0YXRzID0gbmV3IFN0YXRzKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2hhZG93XG5cbiAgICBzdGF0cy5zaG93UGFuZWwoMCk7IC8vIDA6IGZwcywgMTogbXMsIDI6IG1iLCAzKzogY3VzdG9tXG4gICAgc3RhdHMuZG9tLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGF0cy5kb20pO1xuXG4gICAgZnVuY3Rpb24gYW5pbWF0ZSgpOiB2b2lkIHtcbiAgICAgICAgc3RhdHMuYmVnaW4oKTtcbiAgICAgICAgLy8gbW9uaXRvcmVkIGNvZGUgZ29lcyBoZXJlXG4gICAgICAgIHN0YXRzLmVuZCgpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgfVxuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuXG4gICAgcmV0dXJuIHN0YXRzO1xufVxuXG5cbi8qKlxuICogQ292ZXIgY2FudmFzIHdpdGggaW1hZ2VcbiAqIEJ5IEtlbiBGeXJzdGVuYmVyZyBOaWxzZW5cbiAqIElmIGltYWdlIGFuZCBjb250ZXh0IGFyZSBvbmx5IGFyZ3VtZW50cyByZWN0YW5nbGUgd2lsbCBlcXVhbCBjYW52YXNcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHhcbiAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudH0gICAgICAgICBpbWdcbiAqIEBwYXJhbSB7bnVtYmVyfSAgICAgICAgICAgICAgICAgICB4XG4gKiBAcGFyYW0ge251bWJlcn0gICAgICAgICAgICAgICAgICAgeVxuICogQHBhcmFtIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgIHdcbiAqIEBwYXJhbSB7bnVtYmVyfSAgICAgICAgICAgICAgICAgICBoXG4gKiBAcGFyYW0ge251bWJlcn0gICAgICAgICAgICAgICAgICAgb2Zmc2V0WCAwLi4xXG4gKiBAcGFyYW0ge251bWJlcn0gICAgICAgICAgICAgICAgICAgb2Zmc2V0WSAwLi4xXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3SW1hZ2VQcm9wKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBpbWc6IEhUTUxJbWFnZUVsZW1lbnQsIGl3OiBudW1iZXIsIGloOiBudW1iZXIsIHg/OiBudW1iZXIsIHk/OiBudW1iZXIsIHc/OiBudW1iZXIsIGg/OiBudW1iZXIsIG9mZnNldFg/OiBudW1iZXIsIG9mZnNldFk/OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbXVsdGktYXNzaWduXG4gICAgICAgIHggPSB5ID0gMDtcbiAgICAgICAgdyA9IGN0eC5jYW52YXMud2lkdGg7XG4gICAgICAgIGggPSBjdHguY2FudmFzLmhlaWdodDtcbiAgICB9XG5cbiAgICAvLyBkZWZhdWx0IG9mZnNldCBpcyBjZW50ZXJcbiAgICBvZmZzZXRYID0gdHlwZW9mIG9mZnNldFggPT09ICdudW1iZXInID8gb2Zmc2V0WCA6IDAuNTtcbiAgICBvZmZzZXRZID0gdHlwZW9mIG9mZnNldFkgPT09ICdudW1iZXInID8gb2Zmc2V0WSA6IDAuNTtcblxuICAgIC8vIGtlZXAgYm91bmRzIFswLjAsIDEuMF1cbiAgICBpZiAob2Zmc2V0WCA8IDApIHsgb2Zmc2V0WCA9IDA7IH1cbiAgICBpZiAob2Zmc2V0WSA8IDApIHsgb2Zmc2V0WSA9IDA7IH1cbiAgICBpZiAob2Zmc2V0WCA+IDEpIHsgb2Zmc2V0WCA9IDE7IH1cbiAgICBpZiAob2Zmc2V0WSA+IDEpIHsgb2Zmc2V0WSA9IDE7IH1cblxuXG4gICAgY29uc3QgciA9IE1hdGgubWluKHcgLyBpdywgaCAvIGloKTtcbiAgICBsZXQgbncgPSBpdyAqIHI7IC8vIG5ldyBwcm9wLiB3aWR0aFxuICAgIGxldCBuaCA9IGloICogcjsgLy8gbmV3IHByb3AuIGhlaWdodFxuICAgIGxldCBjeDsgbGV0IGN5OyBsZXQgY3c7IGxldCBjaDsgbGV0XG4gICAgICAgIGFyID0gMTtcblxuICAgIC8vIGRlY2lkZSB3aGljaCBnYXAgdG8gZmlsbFxuICAgIGlmIChudyA8IHcpIHsgYXIgPSB3IC8gbnc7IH1cbiAgICBpZiAoTWF0aC5hYnMoYXIgLSAxKSA8IDFlLTE0ICYmIG5oIDwgaCkgeyBhciA9IGggLyBuaDsgfSAvLyB1cGRhdGVkXG4gICAgbncgKj0gYXI7XG4gICAgbmggKj0gYXI7XG5cbiAgICAvLyBjYWxjIHNvdXJjZSByZWN0YW5nbGVcbiAgICBjdyA9IGl3IC8gKG53IC8gdyk7XG4gICAgY2ggPSBpaCAvIChuaCAvIGgpO1xuXG4gICAgY3ggPSAoaXcgLSBjdykgKiBvZmZzZXRYO1xuICAgIGN5ID0gKGloIC0gY2gpICogb2Zmc2V0WTtcblxuICAgIC8vIG1ha2Ugc3VyZSBzb3VyY2UgcmVjdGFuZ2xlIGlzIHZhbGlkXG4gICAgaWYgKGN4IDwgMCkgeyBjeCA9IDA7IH1cbiAgICBpZiAoY3kgPCAwKSB7IGN5ID0gMDsgfVxuICAgIGlmIChjdyA+IGl3KSB7IGN3ID0gaXc7IH1cbiAgICBpZiAoY2ggPiBpaCkgeyBjaCA9IGloOyB9XG5cbiAgICAvLyBmaWxsIGltYWdlIGluIGRlc3QuIHJlY3RhbmdsZVxuICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCBjeCwgY3ksIGN3LCBjaCwgeCwgeSwgdywgaCk7XG59XG5cblxuZXhwb3J0IGNvbnN0IGNsZWFyVGhyZWUgPSAob2JqOiBhbnkpOiB2b2lkID0+IHtcbiAgICBpZiAoIW9iaikgeyByZXR1cm47IH1cbiAgICBpZiAoIW9iai5jaGlsZHJlbikgeyByZXR1cm47IH1cbiAgICB3aGlsZSAob2JqLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2xlYXJUaHJlZShvYmouY2hpbGRyZW5bMF0pO1xuICAgICAgICBvYmoucmVtb3ZlKG9iai5jaGlsZHJlblswXSk7XG4gICAgfVxuXG4gICAgaWYgKG9iai5nZW9tZXRyeSkgeyBvYmouZ2VvbWV0cnkuZGlzcG9zZSgpOyB9XG5cbiAgICBpZiAob2JqLm1hdGVyaWFsKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9iai5tYXRlcmlhbCkuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICAgIGlmICghb2JqLm1hdGVyaWFsW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iai5tYXRlcmlhbFtwcm9wXSAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqLm1hdGVyaWFsW3Byb3BdLmRpc3Bvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvYmoubWF0ZXJpYWxbcHJvcF0uZGlzcG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgb2JqLm1hdGVyaWFsLmRpc3Bvc2UoKTtcbiAgICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbG9uMnRpbGUobG9uOiBudW1iZXIsIHpvb206IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKChsb24gKyAxODApIC8gMzYwKSAqIDIgKiogem9vbSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGxhdDJ0aWxlKGxhdDogbnVtYmVyLCB6b29tOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmZsb29yKFxuICAgICAgICAoKDFcbiAgICAgICAgICAgIC0gTWF0aC5sb2coXG4gICAgICAgICAgICAgICAgTWF0aC50YW4oKGxhdCAqIE1hdGguUEkpIC8gMTgwKVxuICAgICAgICAgICAgICAgICAgICArIDEgLyBNYXRoLmNvcygobGF0ICogTWF0aC5QSSkgLyAxODApLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC8gTWF0aC5QSSlcbiAgICAgICAgICAgIC8gMilcbiAgICAgICAgICAgICogMiAqKiB6b29tLFxuICAgICk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEltZ0Zyb21NYXBib3goem9vbTogbnVtYmVyLCBsb246IG51bWJlciwgbGF0OiBudW1iZXIsIHN0eWxlOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHogPSBNYXRoLmZsb29yKHpvb20gLSAwLjUpO1xuXG4gICAgY29uc3QgeCA9IGxvbjJ0aWxlKGxvbiwgeik7XG4gICAgY29uc3QgeSA9IGxhdDJ0aWxlKGxhdCwgeik7XG5cblxuICAgIGNvbnN0IGltZyA9IGA8aW1nIHNyYz1cImh0dHBzOi8vYXBpLm1hcGJveC5jb20vc3R5bGVzL3YxLyR7c3R5bGV9L3RpbGVzLzI1Ni8ke3p9LyR7eH0vJHt5fT9hY2Nlc3NfdG9rZW49JHt0b2tlbn1cIiBsb2FkaW5nPVwibGF6eVwiIGFsdD1cIlwiPmA7XG5cbiAgICByZXR1cm4gaW1nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbkZvcm1hdHRlcihudW06IG51bWJlciwgZGlnaXRzOiBudW1iZXIpIHtcbiAgICBjb25zdCBsb29rdXAgPSBbXG4gICAgICAgIHsgdmFsdWU6IDEsIHN5bWJvbDogJycgfSxcbiAgICAgICAgeyB2YWx1ZTogMWUzLCBzeW1ib2w6ICdrJyB9LFxuICAgICAgICB7IHZhbHVlOiAxZTYsIHN5bWJvbDogJ01JJyB9LFxuICAgICAgICB7IHZhbHVlOiAxZTksIHN5bWJvbDogJ0cnIH0sXG4gICAgICAgIHsgdmFsdWU6IDFlMTIsIHN5bWJvbDogJ1QnIH0sXG4gICAgICAgIHsgdmFsdWU6IDFlMTUsIHN5bWJvbDogJ1AnIH0sXG4gICAgICAgIHsgdmFsdWU6IDFlMTgsIHN5bWJvbDogJ0UnIH0sXG4gICAgXTtcbiAgICBjb25zdCByeCA9IC9cXC4wKyR8KFxcLlswLTldKlsxLTldKTArJC87XG4gICAgY29uc3QgaXRlbSA9IGxvb2t1cC5zbGljZSgpLnJldmVyc2UoKS5maW5kKGl0ZW1Jbm5lciA9PiBudW0gPj0gaXRlbUlubmVyLnZhbHVlKTtcbiAgICByZXR1cm4gaXRlbSA/IChudW0gLyBpdGVtLnZhbHVlKS50b0ZpeGVkKGRpZ2l0cykucmVwbGFjZShyeCwgJyQxJykgKyBpdGVtLnN5bWJvbCA6ICcwJztcbn1cblxuXG5leHBvcnQgY29uc3Qga2V5cyA9IHtcbiAgICBlbnRlcjogMTMsXG4gICAgZXNjOiAyNyxcbiAgICBzcGFjZTogMzIsXG4gICAgbGVmdDogMzcsXG4gICAgdXA6IDM4LFxuICAgIHJpZ2h0OiAzOSxcbiAgICBkb3duOiA0MCxcbiAgICBwYWdlVXA6IDMzLFxuICAgIHBhZ2VEb3duOiAzNCxcbiAgICBlbmQ6IDM1LFxuICAgIGhvbWU6IDM2LFxuICAgIG1pbnVzOiAxMDksXG4gICAgcGx1czogMTA3LFxufTtcblxuLyogZXNsaW50LWRpc2FibGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JpcHQoc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgbGV0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpIGFzIGFueTtcbiAgICBjb25zdCBwcmlvciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTtcbiAgICBzY3JpcHQuYXN5bmMgPSAxO1xuICAgIHNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKF8sIGlzQWJvcnQpIHtcbiAgICAgICAgaWYgKGlzQWJvcnQgfHwgIXNjcmlwdC5yZWFkeVN0YXRlIHx8IC9sb2FkZWR8Y29tcGxldGUvLnRlc3Qoc2NyaXB0LnJlYWR5U3RhdGUpKSB7XG4gICAgICAgICAgICBzY3JpcHQub25sb2FkID0gc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICBzY3JpcHQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGlmICghaXNBYm9ydCAmJiBjYWxsYmFjaykgc2V0VGltZW91dChjYWxsYmFjaywgMCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgc2NyaXB0LnNyYyA9IHNvdXJjZTtcbiAgICBwcmlvci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzY3JpcHQsIHByaW9yKTtcbn1cbi8qIGVzbGludC1lbmFibGUgKi9cblxuLyohXG4gKiBTZXJpYWxpemUgYWxsIGZvcm0gZGF0YSBpbnRvIGFuIG9iamVjdCBvZiBrZXkvdmFsdWUgcGFpcnNcbiAqIChjKSAyMDIwIENocmlzIEZlcmRpbmFuZGksIE1JVCBMaWNlbnNlLCBodHRwczovL2dvbWFrZXRoaW5ncy5jb21cbiAqIEBwYXJhbSAge05vZGV9ICAgZm9ybSBUaGUgZm9ybSB0byBzZXJpYWxpemVcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICBUaGUgc2VyaWFsaXplZCBmb3JtIGRhdGFcbiAqL1xuZXhwb3J0IGNvbnN0IHNlcmlhbGl6ZU9iamVjdCA9IChmb3JtOiBIVE1MRm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBvYmogPSB7fTtcbiAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmb3JtLmVsZW1lbnRzKS5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgaWYgKCFmaWVsZC5uYW1lIHx8IGZpZWxkLmRpc2FibGVkIHx8IFsnZmlsZScsICdyZXNldCcsICdzdWJtaXQnLCAnYnV0dG9uJ10uaW5kZXhPZihmaWVsZC50eXBlKSA+IC0xKSByZXR1cm47XG4gICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnc2VsZWN0LW11bHRpcGxlJykge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdO1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZmllbGQub3B0aW9ucykuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9uLnNlbGVjdGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKG9wdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9ialtmaWVsZC5uYW1lXSA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnY2hlY2tib3gnLCAncmFkaW8nXS5pbmRleE9mKGZpZWxkLnR5cGUpID4gLTEgJiYgIWZpZWxkLmNoZWNrZWQpIHJldHVybjtcbiAgICAgICAgb2JqW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn07XG5cblxuZXhwb3J0IGNvbnN0IHplcm9QYWQgPSAobnVtOiBudW1iZXIsIHBsYWNlczogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCB6ZXJvID0gcGxhY2VzIC0gbnVtLnRvU3RyaW5nKCkubGVuZ3RoICsgMTtcbiAgICByZXR1cm4gQXJyYXkoKyh6ZXJvID4gMCAmJiB6ZXJvKSkuam9pbignMCcpICsgbnVtO1xufTtcblxuXG5leHBvcnQgY29uc3Qgd2FpdCA9ICh0aW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+ID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpLCB0aW1lKTtcbn0pO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyB3aXRob3V0IHNlYXJjaCBxdWVyeSBwYXJhbWV0ZXIgLSBuZWVkZWQgZm9yIHJlbG9hZGluZyBzZWFyY2ggcmVzdWx0cycgcGFnZSB3aXRoIGRpZmZlcmVudCBxdWVyeVxuICAgIHJldHVybiBgLyR7dXJsLnJlcGxhY2UoLyMuKiQvLCAnJykucmVwbGFjZSgvXlxcL3xcXC8kL2csICcnKX1gO1xuXG4gICAgLy8gb2xkIHZlcnNpb24gLSBsZXQncyBsZWF2ZSBpdCBqdXN0IGluIGNhc2VcbiAgICAvLyByZXR1cm4gYC8ke3VybC5yZXBsYWNlKC8jLiokLywgJycpLnJlcGxhY2UoL15cXC98XFwvJC9nLCAnJykucmVwbGFjZSgvXFw/LiokLywgJycpfWA7XG59XG5cblxuZXhwb3J0IGNvbnN0IGdldFF1ZXJ5U3RyaW5nID0gKGZvcm1zOiBIVE1MRm9ybUVsZW1lbnQgfCBIVE1MRm9ybUVsZW1lbnRbXSk6IHN0cmluZyA9PiB7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgKEFycmF5LmlzQXJyYXkoZm9ybXMpID8gZm9ybXMgOiBbZm9ybXNdKVxuICAgICAgICAuZmlsdGVyKChlLCBpLCBhKSA9PiBhLmluZGV4T2YoZSkgPT09IGkpIC8vIHJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgIC5mb3JFYWNoKGZvcm0gPT4ge1xuICAgICAgICAgICAgbmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgRm9ybURhdGEoZm9ybSkgYXMgYW55KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiBmb3JtRGF0YS5hcHBlbmQoa2V5LCB2YWx1ZSkpO1xuICAgICAgICB9KTtcblxuXG4gICAgY29uc3QgZm9ybVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoZm9ybURhdGEgYXMgYW55KTtcblxuICAgIC8vIGZpbHRlciBlbXB0eSB2YWx1ZXMgZnJvbSBmb3JtXG4gICAgY29uc3Qga2V5c0ZvckRlbCA9IFtdO1xuICAgIGZvcm1QYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBpZiAoIXZhbHVlKSBrZXlzRm9yRGVsLnB1c2goa2V5KTtcbiAgICB9KTtcblxuICAgIC8vIHJlbW92ZSBlbXB0eSBmaWVsZHMgZnJvbSBxdWVyeVxuICAgIGtleXNGb3JEZWwuZm9yRWFjaChrZXkgPT4gZm9ybVBhcmFtcy5kZWxldGUoa2V5KSk7XG5cbiAgICAvLyBzZXQgbmV3IFVSTFNlYXJjaFBhcmFtcyBPYmplY3QgZm9yIGZpbmFsIGNvbnZlcnRlZCBkYXRhXG4gICAgY29uc3QgZmluYWxGb3JtRGF0YTogVVJMU2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXG4gICAgLy8gd2hlbiBxdWVyeSBoYXMgc2FtZSBuYW1lIHBhcmFtZXRlcnMgd2l0aCBkaWZmZXJlbnQgdmFsdWVzIChlZyBtdWx0aSBjaGVja2JveGVzKSwgbWVyZ2UgdmFsdWVzIGludG8gb25lIGtleSAoZm9yIFVSTCBwcmV0dGlmeSAmIGJhY2tlbmQgcHVycG9zZXMpXG4gICAgZm9ybVBhcmFtcy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgIGlmIChmaW5hbEZvcm1EYXRhLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICBmaW5hbEZvcm1EYXRhLnNldChrZXksIGAke2ZpbmFsRm9ybURhdGEuZ2V0KGtleSl9LCR7dmFsdWV9YCk7XG4gICAgICAgIH0gZWxzZSBmaW5hbEZvcm1EYXRhLnNldChrZXksIHZhbHVlKTtcbiAgICB9KTtcblxuXG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChmaW5hbEZvcm1EYXRhLnRvU3RyaW5nKCkpO1xufTtcblxuXG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUYWdzKHN0cikge1xuICAgIGlmICgoc3RyID09PSBudWxsKSB8fCAoc3RyID09PSAnJykpIHJldHVybiBmYWxzZTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBzdHIgPSBzdHIudG9TdHJpbmcoKTtcblxuICAgIC8vIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpZGVudGlmeSBIVE1MIHRhZ3MgaW5cbiAgICAvLyB0aGUgaW5wdXQgc3RyaW5nLiBSZXBsYWNpbmcgdGhlIGlkZW50aWZpZWRcbiAgICAvLyBIVE1MIHRhZyB3aXRoIGEgbnVsbCBzdHJpbmcuXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oPChbXj5dKyk+KS9pZywgJycpO1xufVxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFN0b3JhZ2VJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JhZ2VJdGVtKGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFZpc2libGVCb3hlcyhib3hlczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4pOiBIVE1MRWxlbWVudFtdIHtcbiAgICBjb25zdCB2aXNpYmxlQm94ZXMgPSBbXTtcblxuICAgIGJveGVzLmZvckVhY2goYm94ID0+IHtcbiAgICAgICAgY29uc3QgcmVjdCA9IGJveC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICBpZiAocmVjdC50b3AgPCAod2luZG93LmlubmVySGVpZ2h0ICsgd2luZG93LnNjcm9sbFkpICYmIHJlY3QuYm90dG9tID4gd2luZG93LnNjcm9sbFkpIHtcbiAgICAgICAgICAgIHZpc2libGVCb3hlcy5wdXNoKGJveCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB2aXNpYmxlQm94ZXM7XG59XG4iLCIvLyBbZGF0YS1hbmltYXRpb25dXG5pbXBvcnQgeyBmYWRlVXAgfSBmcm9tICcuL2ZhZGVVcCc7XG5cbi8vIFtkYXRhLXNjcm9sbF1cbmltcG9ydCB7IGhlcm8gfSBmcm9tICcuL3Njcm9sbC9oZXJvJztcbmltcG9ydCB7IGludGVydmlld3MgfSBmcm9tICcuL3Njcm9sbC9pbnRlcnZpZXdzJztcbmltcG9ydCB7IGNsYWltIH0gZnJvbSAnLi9zY3JvbGwvY2xhaW0nO1xuaW1wb3J0IHsgYm94IH0gZnJvbSAnLi9zY3JvbGwvYm94JztcbmltcG9ydCB7IHN0aWNrZXIgfSBmcm9tICcuL3Njcm9sbC9zdGlja2VyJztcbmltcG9ydCB7IGlsbHVzdHJhdGlvbiB9IGZyb20gJy4vc2Nyb2xsL2lsbHVzdHJhdGlvbic7XG5pbXBvcnQgeyBsaW5lIH0gZnJvbSAnLi9zY3JvbGwvbGluZSc7XG5pbXBvcnQgeyBwZW9wbGUgfSBmcm9tICcuL3Njcm9sbC9wZW9wbGUnO1xuaW1wb3J0IHsgY29sbGVjdGlvbnMgfSBmcm9tICcuL3Njcm9sbC9jb2xsZWN0aW9ucyc7XG5pbXBvcnQgeyBjb2xsZWN0aW9uc1NpbXBsZSB9IGZyb20gJy4vc2Nyb2xsL2NvbGxlY3Rpb25zU2ltcGxlJztcblxuXG5leHBvcnQgY29uc3QgYW5pbWF0aW9ucyA9IHsgZmFkZVVwIH07XG5cbmV4cG9ydCBjb25zdCBzY3JvbGxzID0geyBib3gsIGNvbGxlY3Rpb25zLCBjb2xsZWN0aW9uc1NpbXBsZSwgaGVybywgaW50ZXJ2aWV3cywgY2xhaW0sIHN0aWNrZXIsIGlsbHVzdHJhdGlvbiwgbGluZSwgcGVvcGxlIH07XG5cbmV4cG9ydCBjb25zdCBob3ZlcnMgPSB7fTtcbiIsImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5pbXBvcnQgeyBBbmltYXRpb25UeXBlIH0gZnJvbSAnLi4vQW5pbWF0ZSc7XG5pbXBvcnQgeyBlYXNpbmcgfSBmcm9tICcuLi9TaXRlJztcblxuZXhwb3J0IGNvbnN0IGZhZGVVcDogQW5pbWF0aW9uVHlwZSA9IChlbCwgZGVsYXkgPSAwKSA9PiB7XG4gICAgZ3NhcC5raWxsVHdlZW5zT2YoZWwsIHsgb3BhY2l0eTogdHJ1ZSwgeTogdHJ1ZSB9KTtcbiAgICByZXR1cm4gZ3NhcC5mcm9tVG8oZWwsIHsgb3BhY2l0eTogMCwgeTogNjAgfSwgeyBkdXJhdGlvbjogMS40LCBvcGFjaXR5OiAxLCB5OiAwLCBlYXNlOiBlYXNpbmcsIGRlbGF5IH0pO1xufTtcbiIsImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5cbmV4cG9ydCBjb25zdCBib3ggPSAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgYmcgPSBlbC5xdWVyeVNlbGVjdG9yKCcuYm94X19iZycpO1xuICAgIGNvbnN0IGNoaWxkcmVuOiBFbGVtZW50W10gPSBbLi4uZWwuY2hpbGRyZW5dLmZpbHRlcihjaGlsZCA9PiBjaGlsZCAhPT0gYmcpO1xuXG4gICAgZ3NhcC5mcm9tVG8oY2hpbGRyZW4sIHsgeTogd2luZG93LmlubmVySGVpZ2h0IC8gNSB9LCB7XG4gICAgICAgIHk6IDAsXG4gICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgY2xlYXJQcm9wczogJ2FsbCcsXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IGVsLFxuICAgICAgICAgICAgcGluU3BhY2luZzogZmFsc2UsXG4gICAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgICAgaW52YWxpZGF0ZU9uUmVmcmVzaDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGdzYXAuZnJvbVRvKGJnLCB7IHk6IHdpbmRvdy5pbm5lckhlaWdodCAvIDUgfSwge1xuICAgICAgICB5OiAwLFxuICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgIGNsZWFyUHJvcHM6ICdhbGwnLFxuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICB0cmlnZ2VyOiBlbCxcbiAgICAgICAgICAgIHBpblNwYWNpbmc6IGZhbHNlLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGludmFsaWRhdGVPblJlZnJlc2g6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IFNwbGl0VGV4dCB9IGZyb20gJ2dzYXAvZGlzdC9TcGxpdFRleHQnO1xuaW1wb3J0IHsgZWFzaW5nIH0gZnJvbSAnLi4vLi4vU2l0ZSc7XG5cbmdzYXAucmVnaXN0ZXJQbHVnaW4oU3BsaXRUZXh0KTtcblxuZXhwb3J0IGNvbnN0IGNsYWltID0gZWwgPT4ge1xuXG5cbiAgICBjb25zdCBzcGxpdHRlZFRleHQgPSBuZXcgU3BsaXRUZXh0KGVsLnF1ZXJ5U2VsZWN0b3IoJ3AnKSwgeyB0eXBlOiAnbGluZXMsIHdvcmRzJywgbGluZXNDbGFzczogJ2xpbmUnIH0pO1xuICAgIGdzYXAuc2V0KHNwbGl0dGVkVGV4dC53b3JkcywgeyB5UGVyY2VudDogMTAwIH0pO1xuXG4gICAgZ3NhcC5mcm9tVG8oc3BsaXR0ZWRUZXh0LndvcmRzLCB7IHlQZXJjZW50OiAxMDAgfSwge1xuICAgICAgICB5UGVyY2VudDogMCxcbiAgICAgICAgZHVyYXRpb246IDAuODUsXG4gICAgICAgIGVhc2U6IGVhc2luZyxcbiAgICAgICAgZGVsYXk6IDEsXG4gICAgICAgIHN0YWdnZXI6IDAuMDMsXG4gICAgICAgIG9uU3RhcnQ6ICgpID0+IHtcbiAgICAgICAgICAgIGdzYXAuc2V0KGVsLCB7IG9wYWNpdHk6IDEgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhcnQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgICAgdHJpZ2dlcjogZWwsXG4gICAgICAgICAgICBwaW5TcGFjaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHN0YXJ0OiAndG9wIGJvdHRvbScsXG4gICAgICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoOiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0pO1xufTtcbiIsImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5pbXBvcnQgeyBTY3JvbGxUcmlnZ2VyIH0gZnJvbSAnZ3NhcC9kaXN0L1Njcm9sbFRyaWdnZXInO1xuXG5nc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpO1xuXG5leHBvcnQgY29uc3QgY29sbGVjdGlvbnMgPSAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgY2FyZHNXcmFwOiBIVE1MRWxlbWVudCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zY3JvbGwtY2FyZHMnKTtcbiAgICBjb25zdCBuYW1lc1dyYXA6IEhUTUxFbGVtZW50ID0gZWwucXVlcnlTZWxlY3RvcignLmpzLXNjcm9sbC1uYW1lcycpO1xuICAgIGNvbnN0IG9mZnNldCA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBjYXJkc1dyYXAuY2xpZW50SGVpZ2h0KSAvIDI7XG4gICAgY29uc3QgaXRlbXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYWNjb3JkZW9uLWl0ZW0nKTtcblxuXG5cbiAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgIHRyaWdnZXI6IGVsLFxuICAgICAgICBzdGFydDogYHRvcCAke29mZnNldH1weGAsXG4gICAgICAgIGVuZDogJ2JvdHRvbSBib3R0b20nLFxuICAgICAgICBwaW46IGNhcmRzV3JhcCxcbiAgICAgICAgZW5kVHJpZ2dlcjogbmFtZXNXcmFwLFxuICAgIH0pO1xuXG4gICAgU2Nyb2xsVHJpZ2dlci5iYXRjaChpdGVtcywge1xuICAgICAgICBzdGFydDogJ3RvcCA1NSUnLFxuICAgICAgICBlbmQ6ICdib3R0b20gNTUlJyxcbiAgICAgICAgLy8gVUdMWSAtIGluIHByb2dyZXNzXG4gICAgICAgIG9uRW50ZXI6IGJhdGNoID0+IHtcbiAgICAgICAgICAgIGJhdGNoWzBdLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5jbGFzc0xpc3QuYWRkKCdpcy12aXNpYmxlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXJCYWNrOiBiYXRjaCA9PiB7XG4gICAgICAgICAgICBiYXRjaFswXS5xdWVyeVNlbGVjdG9yKCdhJykuY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuICAgICAgICB9LFxuICAgICAgICBvbkxlYXZlOiBiYXRjaCA9PiB7XG4gICAgICAgICAgICBiYXRjaFswXS5xdWVyeVNlbGVjdG9yKCdhJykuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmlzaWJsZScpO1xuICAgICAgICB9LFxuICAgICAgICBvbkxlYXZlQmFjazogYmF0Y2ggPT4ge1xuICAgICAgICAgICAgYmF0Y2hbMF0ucXVlcnlTZWxlY3RvcignYScpLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZpc2libGUnKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG4iLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcC9kaXN0L2dzYXAnO1xuaW1wb3J0IHsgU2Nyb2xsVHJpZ2dlciB9IGZyb20gJ2dzYXAvZGlzdC9TY3JvbGxUcmlnZ2VyJztcblxuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTtcblxuZXhwb3J0IGNvbnN0IGNvbGxlY3Rpb25zU2ltcGxlID0gKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGNhcmRzV3JhcDogSFRNTEVsZW1lbnQgPSBlbC5xdWVyeVNlbGVjdG9yKCcuanMtc2Nyb2xsLWNhcmRzJyk7XG4gICAgY29uc3QgbmFtZXNXcmFwOiBIVE1MRWxlbWVudCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zY3JvbGwtbmFtZXMnKTtcbiAgICBjb25zdCBvZmZzZXQgPSAod2luZG93LmlubmVySGVpZ2h0IC0gY2FyZHNXcmFwLmNsaWVudEhlaWdodCkgLyAyO1xuXG5cblxuICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgdHJpZ2dlcjogZWwsXG4gICAgICAgIHN0YXJ0OiBgdG9wICR7b2Zmc2V0fXB4YCxcbiAgICAgICAgZW5kOiAnYm90dG9tIDkyJScsXG4gICAgICAgIHBpbjogY2FyZHNXcmFwLFxuICAgICAgICBlbmRUcmlnZ2VyOiBuYW1lc1dyYXAsXG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCc7XG5cbmV4cG9ydCBjb25zdCBoZXJvID0gZWwgPT4ge1xuICAgIGdzYXAudG8oZWwuY2hpbGRyZW4sIHtcbiAgICAgICAgeTogKCkgPT4gZWwuY2xpZW50SGVpZ2h0IC8gLTIsXG4gICAgICAgIGVhc2U6ICdub25lJyxcbiAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgICAgdHJpZ2dlcjogZWwsXG4gICAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICAgIHN0YXJ0OiAndG9wIHRvcCcsXG4gICAgICAgICAgICBlbmQ6ICdib3R0b20gdG9wJyxcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG4iLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcC9kaXN0L2dzYXAnO1xuaW1wb3J0IHsgZWFzaW5nIH0gZnJvbSAnLi4vLi4vU2l0ZSc7XG5cbmV4cG9ydCBjb25zdCBpbGx1c3RyYXRpb24gPSAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cbiAgICBnc2FwLnNldChlbCwge1xuICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcbiAgICAgICAgeVBlcmNlbnQ6IDUwLFxuICAgICAgICByb3RhdGU6IC0xNSxcbiAgICB9KTtcblxuXG4gICAgZ3NhcC5mcm9tVG8oZWwsIHtcbiAgICAgICAgeVBlcmNlbnQ6IDUwLFxuICAgICAgICByb3RhdGU6IC0xNSxcbiAgICB9LCB7XG4gICAgICAgIHlQZXJjZW50OiAwLFxuICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgIGNsZWFyUHJvcHM6ICdhbGwnLFxuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICB0cmlnZ2VyOiBlbCxcbiAgICAgICAgICAgIHBpblNwYWNpbmc6IGZhbHNlLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGludmFsaWRhdGVPblJlZnJlc2g6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcblxuZXhwb3J0IGNvbnN0IGludGVydmlld3MgPSBlbCA9PiB7XG5cbiAgICBjb25zdCBjb250cm9scyA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5qcy1wYW5lbCcpO1xuICAgIGNvbnN0IG1vcmVJbnRlcnZpZXdzID0gZWwucXVlcnlTZWxlY3RvcignLmludGVydmlld3NfX21vcmUnKTtcblxuICAgIGlmIChjb250cm9scykge1xuICAgICAgICBjb25zdCBtbSA9IGdzYXAubWF0Y2hNZWRpYSgpO1xuXG4gICAgICAgIG1tLmFkZCgnKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpJywgKCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCB0bCA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgICAgICAgIGVhc2U6ICdub25lJyxcbiAgICAgICAgICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGVsLFxuICAgICAgICAgICAgICAgICAgICBwaW46IGNvbnRyb2xzLFxuICAgICAgICAgICAgICAgICAgICBwaW5TcGFjaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6ICd0b3AgdG9wJyxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiAoKSA9PiBgYm90dG9tICR7Y29udHJvbHMub2Zmc2V0SGVpZ2h0ICsgKG1vcmVJbnRlcnZpZXdzPy5vZmZzZXRIZWlnaHQgPz8gMCl9cHhgLFxuICAgICAgICAgICAgICAgICAgICBvblRvZ2dsZTogc2VsZiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1waW5uZWQnLCBzZWxmLmlzQWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25MZWF2ZUJhY2s6IHNlbGYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbiIsImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5cbmV4cG9ydCBjb25zdCBsaW5lID0gKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgIGdzYXAuc2V0KGVsLCB7IHRyYW5zZm9ybU9yaWdpbjogJ2JvdHRvbSBjZW50ZXInIH0pO1xuICAgIGdzYXAuZnJvbVRvKGVsLCB7IHNjYWxlWTogMCB9LCB7XG4gICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICBjbGVhclByb3BzOiAnYWxsJyxcbiAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgICAgdHJpZ2dlcjogZWwsXG4gICAgICAgICAgICBwaW5TcGFjaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHN0YXJ0OiAndG9wIGJvdHRvbScsXG4gICAgICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoOiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0pO1xufTtcbiIsImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5cbmV4cG9ydCBjb25zdCBwZW9wbGUgPSAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgaXRlbXM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmpzLXBlcnNvbicpO1xuXG5cbiAgICBjb25zdCB0bCA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICB0cmlnZ2VyOiBlbCxcbiAgICAgICAgICAgIHBpblNwYWNpbmc6IGZhbHNlLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGludmFsaWRhdGVPblJlZnJlc2g6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgdGwuYWRkTGFiZWwoJ3N0YXJ0Jyk7XG5cblxuICAgIFsuLi5pdGVtc10uZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICBnc2FwLnNldChpdGVtcywge1xuICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG4gICAgICAgICAgICB5UGVyY2VudDogNTAsXG4gICAgICAgICAgICByb3RhdGU6IGkgJSAyID09PSAwID8gMTAgOiAtMTAsXG4gICAgICAgIH0pO1xuICAgICAgICB0bC5mcm9tVG8oaXRlbSwge1xuICAgICAgICAgICAgeVBlcmNlbnQ6IDUwLFxuICAgICAgICAgICAgcm90YXRlOiBpICUgMiA9PT0gMCA/IDEwIDogLTEwLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB5UGVyY2VudDogMCxcbiAgICAgICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjQ1LFxuICAgICAgICAgICAgZGVsYXk6IDAuMSAqIGksXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBjbGVhclByb3BzOiAnYWxsJyxcbiAgICAgICAgfSwgJ3N0YXJ0Jyk7XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcblxuZXhwb3J0IGNvbnN0IHN0aWNrZXIgPSBlbCA9PiB7XG5cbiAgICBnc2FwLmZyb21UbyhlbC5xdWVyeVNlbGVjdG9yKCcuc3RpY2tlcl9fdGV4dCcpLCB7IG9wYWNpdHk6IDAgfSwge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBkdXJhdGlvbjogMC4xLFxuICAgICAgICBkZWxheTogMC41LFxuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICB0cmlnZ2VyOiBlbCxcbiAgICAgICAgICAgIHBpblNwYWNpbmc6IGZhbHNlLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGludmFsaWRhdGVPblJlZnJlc2g6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLXZpc2libGUnKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL0NvbXBvbmVudCc7XG5cblxuZXhwb3J0IGNsYXNzIEFjY29yZGVvbiBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICB0aGlzLnNldEhlaWdodCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYmluZCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1hY2NvcmRlb24tYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbiAmJiBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVG9nZ2xlQ2xpY2spO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Ub2dnbGVDbGljayA9IGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jbG9zZWQnKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBzZXRIZWlnaHQoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNvcHk6IEhUTUxEaXZFbGVtZW50ID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1hY2NvcmRlb24tY29weScpO1xuXG4gICAgICAgIGlmIChjb3B5KSB7XG4gICAgICAgICAgICBjb3B5LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIGNvcHkuc3R5bGUuaGVpZ2h0ID0gYCR7Y29weS5zY3JvbGxIZWlnaHR9cHhgO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xuXG5cbmV4cG9ydCBjbGFzcyBBY2NvcmRlb25MaXN0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBwcml2YXRlIGFsbEl0ZW1zOiBIVE1MTElFbGVtZW50W107XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICB0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBiaW5kKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFsbEl0ZW1zID0gWy4uLnRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYWNjb3JkZW9uLWl0ZW0nKV0ubWFwKGVsID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSA8SFRNTExJRWxlbWVudD5lbDtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNsb3NlT3RoZXJzIH0gPSB0aGlzLnZpZXcuZGF0YXNldDtcblxuICAgICAgICB0aGlzLmFsbEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1hY2NvcmRlb24tYnV0dG9uJyk7XG4gICAgICAgICAgICBidXR0b24gJiYgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB0aGlzLm9uVG9nZ2xlQ2xpY2soZSwgaXRlbSkpO1xuXG4gICAgICAgICAgICBjbG9zZU90aGVycyAmJiB0aGlzLnNldHVwTXV0YXRpb25PYnNlcnZlcihpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cE11dGF0aW9uT2JzZXJ2ZXIoaXRlbSk6IHZvaWQge1xuICAgICAgICBjb25zdCBsaW5rID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdhLmJ1dHRvbicpO1xuXG4gICAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgICAgICB0aGlzLm9uTGlua1RvZ2dsZShpdGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtY2xvc2VkJyksIGxpbmspO1xuICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB0aGlzLm9uTGlua1RvZ2dsZShpdGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtY2xvc2VkJyksIGxpbmspKTtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoaXRlbSwgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblRvZ2dsZUNsaWNrID0gKGUsIGl0ZW0pID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtY2xvc2VkJykpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsSXRlbXMuZm9yRWFjaChpdGVtVG9jbG9zZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZShpdGVtVG9jbG9zZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5vcGVuKGl0ZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZShpdGVtKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIG9uTGlua1RvZ2dsZSA9IChpc0Nsb3NlZCwgZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50LnRhYkluZGV4ID0gaXNDbG9zZWQgPyAtMSA6IDA7XG4gICAgfTtcblxuICAgIHByaXZhdGUgY2xvc2UoaXRlbSk6IHZvaWQge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWNsb3NlZCcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlbihpdGVtKTogdm9pZCB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtY2xvc2VkJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRIZWlnaHQoaXRlbSk6IHZvaWQge1xuICAgICAgICBjb25zdCBjb3B5OiBIVE1MRGl2RWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmpzLWFjY29yZGVvbi1jb3B5Jyk7XG5cbiAgICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgICAgIGNvcHkucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgY29weS5zdHlsZS5oZWlnaHQgPSBgJHtjb3B5LnNjcm9sbEhlaWdodH1weGA7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcC9kaXN0L2dzYXAnO1xuaW1wb3J0IHsgUHVzaFN0YXRlcyB9IGZyb20gJy4uL1B1c2hTdGF0ZXMnO1xuaW1wb3J0IHsgZWFzaW5nIH0gZnJvbSAnLi4vU2l0ZSc7XG5pbXBvcnQgeyBWaWRlbyB9IGZyb20gJy4vUGxheWVyL1ZpZGVvJztcbmltcG9ydCB7IExpZ2h0Ym94IH0gZnJvbSAnLi9MaWdodGJveC9MaWdodGJveCc7XG5cblxuZXhwb3J0IGNsYXNzIEF1ZGlvUGxheWVyU3RhdGVzVGV4dCB7XG4gICAgcHVibGljIHN0YXRpYyBSQU5ET00gPSAnU2h1ZmZsZSc7XG4gICAgcHVibGljIHN0YXRpYyBQTEFZSU5HID0gJ05vdyBwbGF5aW5nJztcbiAgICBwdWJsaWMgc3RhdGljIFBBVVNFRCA9ICdQbGF5IGludGVydmlldyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUF1ZGlvUGxheWVyTWVkaWEge1xuICAgIHNyYzogc3RyaW5nO1xuICAgIGR1cmF0aW9uOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIElBdWRpb1BsYXllclJlc3BvbnNlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHNyYzogSUF1ZGlvUGxheWVyTWVkaWFbXTtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHVybEludGVydmlldzogc3RyaW5nO1xuICAgIG5leHRJZD86IHN0cmluZztcbiAgICBwcmV2SWQ/OiBzdHJpbmc7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBJQXVkaW9QbGF5ZXJSZXNwb25zZUVsZW1lbnRzIHtcbiAgICB1cmxMaW5rOiBIVE1MQW5jaG9yRWxlbWVudDtcbiAgICBuZXh0QnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcmV2QnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICB0aXRsZTogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBdWRpb1BsYXllciBleHRlbmRzIFZpZGVvIHtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICAgIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2U6IEF1ZGlvUGxheWVyO1xuICAgIHB1YmxpYyBzdGF0aWMgY3VycmVudEF1ZGlvSWQ6IHN0cmluZztcblxuICAgIHB1YmxpYyBzdGF0aWMgY2xvc2VBdWRpb1BsYXllcigpOiB2b2lkIHtcbiAgICAgICAgQXVkaW9QbGF5ZXIuaW5zdGFuY2UubWluaW1pemUoKTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBvcGVuQXVkaW9QbGF5ZXIoZnJvbUxpZ2h0Ym94PzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBBdWRpb1BsYXllci5pbnN0YW5jZS5leHBhbmQoKTtcbiAgICAgICAgaWYgKGZyb21MaWdodGJveCAmJiAhQXVkaW9QbGF5ZXIuaW5zdGFuY2UuaXNJbml0aWFsaXplZCkgQXVkaW9QbGF5ZXIuaW5zdGFuY2Uuc2V0TmV3QXVkaW8oTGlnaHRib3guY3VycmVudElkLCB0cnVlKTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRJZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQXVkaW9QbGF5ZXIuY3VycmVudEF1ZGlvSWQ7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzdGF0aWMgaXNBdWRpb1BsYXllclBhdXNlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIEF1ZGlvUGxheWVyLmluc3RhbmNlLmlzUGF1c2VkKCk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgc3RhdGljIHVwZGF0ZUNvbG9ycyhjb2xvcjogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIEF1ZGlvUGxheWVyLmluc3RhbmNlLnVwZGF0ZUNvbG9ycyhjb2xvcik7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgaXNFeHBhbmRlZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgY2Fzc2V0dGVUaXRsZTogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhcGlVcmw6IHN0cmluZztcbiAgICBwcml2YXRlIGVsZW1lbnRzOiBJQXVkaW9QbGF5ZXJSZXNwb25zZUVsZW1lbnRzO1xuICAgIHByaXZhdGUgcGxheWVyQnV0dG9uczogTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD47XG4gICAgcHJpdmF0ZSBpc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBjbG9zZVRpbWVvdXQ6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlcih2aWV3KTtcblxuICAgICAgICBBdWRpb1BsYXllci5pbnN0YW5jZSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy51aS50aHVtYm5haWwgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci10aHVtYm5haWwnKTtcbiAgICAgICAgdGhpcy51aS5taW5pbWl6ZSA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLW1pbmltaXplJyk7XG4gICAgICAgIHRoaXMuY2Fzc2V0dGVUaXRsZSA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLW1hcnF1ZWUnKTtcbiAgICAgICAgdGhpcy5hcGlVcmwgPSB0aGlzLnZpZXcuZGF0YXNldC5hcGlVcmw7XG5cbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgICAgICAgIHVybExpbms6IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLXVybCcpLFxuICAgICAgICAgICAgbmV4dEJ0bjogdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItbmV4dCcpLFxuICAgICAgICAgICAgcHJldkJ0bjogdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItcHJldicpLFxuICAgICAgICAgICAgdGl0bGU6IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLXRpdGxlJyksXG4gICAgICAgIH07XG5cblxuICAgICAgICB0aGlzLmJpbmRBdWRpb1BsYXllcigpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgYmluZEJ1dHRvbnMgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIGJpbmQgbmV3IGJ1dHRvbnMgYWZ0ZXIgZWFjaCBwYWdlIHRyYW5zaXRpb25cblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hdWRpby1wbGF5ZXJdJykuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkJ0bkNsaWNrKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcm90ZWN0ZWQgb25UaW1ldXBkYXRlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBzdXBlci5vblRpbWV1cGRhdGUoKTtcbiAgICAgICAgTGlnaHRib3guaXNPcGVuICYmIExpZ2h0Ym94LnRyeVRvVXBkYXRlVHJhbnNjcmlwdCh0aGlzLm1lZGlhLmN1cnJlbnRUaW1lKTtcbiAgICB9O1xuXG5cblxuICAgIHByb3RlY3RlZCBvbkJ0bkNsaWNrID0gKGUpOiB2b2lkID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNvbnN0IGlkID0gKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5hdWRpb1BsYXllcjtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5zdGFydDtcbiAgICAgICAgaWYgKCFpZCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChpZCAhPT0gQXVkaW9QbGF5ZXIuY3VycmVudEF1ZGlvSWQpIHtcbiAgICAgICAgICAgIC8vIGlmIGJ1dHRvbiBoYXMgZGlmZmVyZW50IGlkIHRoYW4gYXVkaW8gcGxheWVyLCBsb2FkIG5ldyBhdWRpbyBhbmQgcGxheVxuICAgICAgICAgICAgdGhpcy5zZXROZXdBdWRpbyhpZCwgdHJ1ZSwgc3RhcnRUaW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGlmIGJ1dHRvbiBoYXMgdGhlIHNhbWUgaWQgYXMgY3VycmVudCBhdWRpbywgb25seSB0b2dnbGUgcGxheWVyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9uZWx5LWlmXG4gICAgICAgICAgICBpZiAoc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYS5jdXJyZW50VGltZSA9IHBhcnNlSW50KHN0YXJ0VGltZSwgMTApO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGF1c2VkKCkgPyB0aGlzLnBsYXkoKSA6IHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uUGxheSgpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIub25QbGF5KCk7XG4gICAgICAgIHRoaXMuc2V0VGl0bGVJbkNhc3NldHRlKGAke0F1ZGlvUGxheWVyU3RhdGVzVGV4dC5QTEFZSU5HfTogJHt0aGlzLmVsZW1lbnRzLnRpdGxlLmlubmVyVGV4dH1gKTtcbiAgICAgICAgdGhpcy50b2dnbGVQbGF5ZXJCdXR0b25zKHRydWUpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgb25QYXVzZSgpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIub25QYXVzZSgpO1xuICAgICAgICB0aGlzLnNldFRpdGxlSW5DYXNzZXR0ZShgJHtBdWRpb1BsYXllclN0YXRlc1RleHQuUEFVU0VEfTogJHt0aGlzLmVsZW1lbnRzLnRpdGxlLmlubmVyVGV4dH1gKTtcbiAgICAgICAgdGhpcy50b2dnbGVQbGF5ZXJCdXR0b25zKGZhbHNlKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSB0b2dnbGVQbGF5ZXJCdXR0b25zID0gKGlzUGxheWluZzogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnBsYXllckJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS1hdWRpby1wbGF5ZXI9XCIke0F1ZGlvUGxheWVyLmN1cnJlbnRBdWRpb0lkfVwiXWApO1xuICAgICAgICB0aGlzLnBsYXllckJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2lzLXBsYXlpbmcnLCBpc1BsYXlpbmcpKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgYmluZEF1ZGlvUGxheWVyID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnVpLnRodW1ibmFpbCAmJiB0aGlzLnVpLnRodW1ibmFpbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25UaHVtYm5haWxDbGljayk7XG4gICAgICAgIHRoaXMudWkubWluaW1pemUgJiYgdGhpcy51aS5taW5pbWl6ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25NaW5pbWl6ZUNsaWNrKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5uZXh0QnRuICYmIHRoaXMuZWxlbWVudHMubmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25OZXh0Q2xpY2spO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnByZXZCdG4gJiYgdGhpcy5lbGVtZW50cy5wcmV2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblByZXZDbGljayk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudXJsTGluayAmJiB0aGlzLmVsZW1lbnRzLnVybExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVXJsQ2xpY2spO1xuXG4gICAgICAgIHRoaXMudmlldy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5vbk1vdXNlTGVhdmUpO1xuICAgICAgICB0aGlzLnZpZXcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Nb3VzZUVudGVyKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25Nb3VzZUxlYXZlID0gKGUpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubWluaW1pemUoKTtcbiAgICAgICAgfSwgNTAwMCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uTW91c2VFbnRlciA9IChlKTogdm9pZCA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsb3NlVGltZW91dCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uVXJsQ2xpY2sgPSAoZSk6IHZvaWQgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblxuICAgICAgICBQdXNoU3RhdGVzLmdvVG8oZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpLCBMaWdodGJveC5pc09wZW4pO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBzZXROZXdBdWRpbyA9IChpZD86IHN0cmluZywgcGxheT86IGJvb2xlYW4sIHN0YXJ0VGltZT86IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmxvYWRBdWRpbyhpZCkudGhlbigoZGF0YTogSUF1ZGlvUGxheWVyUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGxheWVyKGRhdGEpO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgbGlnaHRib3ggaXMgb3BlbiBhbmQgaGFzIHRoZSBzYW1lIGlkIGFzIGF1ZGlvIHBsYXllclxuICAgICAgICAgICAgTGlnaHRib3guY2hlY2tQbGF5ZXJTdGF0ZSgpO1xuXG4gICAgICAgICAgICAvLyBhdCBmaXJzdCBsb2FkLCBjaGVjayBpZiBVUkwgaGFzIHN0YXJ0IHRpbWUgZm9yIGF1ZGlvXG4gICAgICAgICAgICBjb25zdCBoYXNQYXJhbXMgPSB0aGlzLmlzSW5pdGlhbGl6ZWQgPyBmYWxzZSA6IHRoaXMuc2Vla1RvUGFyYW1zKCk7XG4gICAgICAgICAgICAvLyBwbGF5IGF1ZGlvIHdoZW4gaXQgaGFzIGJlZW4gYWxyZWFkeSBpbml0aWFsaXplZFxuICAgICAgICAgICAgaWYgKHBsYXkpIHtcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0V4cGFuZGVkICYmIHRoaXMuZXhwYW5kKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNQYXJhbXMpIHRoaXMubWVkaWEuY3VycmVudFRpbWUgPSBzdGFydFRpbWUgPyBwYXJzZUludChzdGFydFRpbWUsIDEwKSA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25OZXh0Q2xpY2sgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHsgbmV4dElkIH0gPSB0aGlzLmVsZW1lbnRzLm5leHRCdG4uZGF0YXNldDtcbiAgICAgICAgdGhpcy5zZXROZXdBdWRpbyhuZXh0SWQsIHRydWUpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvblByZXZDbGljayA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgeyBwcmV2SWQgfSA9IHRoaXMuZWxlbWVudHMucHJldkJ0bi5kYXRhc2V0O1xuICAgICAgICB0aGlzLnNldE5ld0F1ZGlvKHByZXZJZCwgdHJ1ZSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uVGh1bWJuYWlsQ2xpY2sgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIHdoZW4gbGlnaHRib3ggaXMgb3BlbiwgZG8gbm90IG1pbmltaXplIHRoZSBwbGF5ZXIgLSBpdCBzaG91bGQgYmUgYWx3YXlzIGV4cGFuZGVkXG4gICAgICAgIGlmIChMaWdodGJveC5pc09wZW4pIHJldHVybjtcblxuICAgICAgICAvLyBpZiBhdWRpbyBwbGF5ZXIgaXMgbm90IGluaXRpYWxpemVkIHlldCwgbG9hZCByYW5kb20gYXVkaW9cbiAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHRoaXMuc2V0TmV3QXVkaW8oKTtcblxuICAgICAgICB0aGlzLmlzRXhwYW5kZWQgPyB0aGlzLm1pbmltaXplKCkgOiB0aGlzLmV4cGFuZCgpO1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtZXhwYW5kZWQnKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25NaW5pbWl6ZUNsaWNrID0gKCk6IHZvaWQgPT4gdGhpcy5taW5pbWl6ZSgpO1xuXG5cblxuICAgIHByaXZhdGUgbWluaW1pemUgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIHdoZW4gbGlnaHRib3ggaXMgb3BlbiwgZG8gbm90IG1pbmltaXplIHRoZSBwbGF5ZXIgLSBpdCBzaG91bGQgYmUgYWx3YXlzIGV4cGFuZGVkXG4gICAgICAgIGlmIChMaWdodGJveC5pc09wZW4pIHJldHVybjtcblxuICAgICAgICBnc2FwLnRvKHRoaXMudWkucGxheWVyQmFyLCB7XG4gICAgICAgICAgICB5UGVyY2VudDogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjcsXG4gICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgICAgICAgICB0aGlzLnNldFRpdGxlSW5DYXNzZXR0ZSh0aGlzLmlzUGF1c2VkKCkgPyBgJHtBdWRpb1BsYXllclN0YXRlc1RleHQuUEFVU0VEfTogJHt0aGlzLmVsZW1lbnRzLnRpdGxlLmlubmVyVGV4dH1gIDogYCR7QXVkaW9QbGF5ZXJTdGF0ZXNUZXh0LlBMQVlJTkd9OiAke3RoaXMuZWxlbWVudHMudGl0bGUuaW5uZXJUZXh0fWApO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNFeHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGV4cGFuZCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgZ3NhcC50byh0aGlzLnVpLnBsYXllckJhciwge1xuICAgICAgICAgICAgeVBlcmNlbnQ6IC0xMDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC43LFxuICAgICAgICAgICAgZWFzZTogZWFzaW5nLFxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUaXRsZUluQ2Fzc2V0dGUodGhpcy5pc1BhdXNlZCgpID8gYCR7QXVkaW9QbGF5ZXJTdGF0ZXNUZXh0LlBBVVNFRH06ICR7dGhpcy5lbGVtZW50cy50aXRsZS5pbm5lclRleHR9YCA6IGAke0F1ZGlvUGxheWVyU3RhdGVzVGV4dC5QTEFZSU5HfTogJHt0aGlzLmVsZW1lbnRzLnRpdGxlLmlubmVyVGV4dH1gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0V4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBzZXRUaXRsZUluQ2Fzc2V0dGUgPSAodGV4dDogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgICAgIFsuLi50aGlzLmNhc3NldHRlVGl0bGUucXVlcnlTZWxlY3RvckFsbCgnc3BhbicpXS5mb3JFYWNoKHNwYW4gPT4ge1xuICAgICAgICAgICAgc3Bhbi5pbm5lclRleHQgPSB0ZXh0O1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgdXBkYXRlUGxheWVyID0gKGRhdGE6IElBdWRpb1BsYXllclJlc3BvbnNlKTogdm9pZCA9PiB7XG4gICAgICAgIEF1ZGlvUGxheWVyLmN1cnJlbnRBdWRpb0lkID0gZGF0YS5pZDtcbiAgICAgICAgLy8gVE8gRE8gLSBhZGQgbXVsdGlwbGUgc291cmNlc1xuICAgICAgICB0aGlzLm1lZGlhLnNyYyA9IGRhdGEuc3JjWzBdLnNyYztcbiAgICAgICAgdGhpcy5lbGVtZW50cy50aXRsZS5pbm5lclRleHQgPSBkYXRhLnRpdGxlO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnVybExpbmsuaHJlZiA9IGRhdGEudXJsSW50ZXJ2aWV3O1xuICAgICAgICB0aGlzLmVsZW1lbnRzLm5leHRCdG4uZGF0YXNldC5uZXh0SWQgPSBkYXRhLm5leHRJZD8udG9TdHJpbmcoKSB8fCAnJztcbiAgICAgICAgdGhpcy5lbGVtZW50cy5wcmV2QnRuLmRhdGFzZXQucHJldklkID0gZGF0YS5wcmV2SWQ/LnRvU3RyaW5nKCkgfHwgJyc7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRBdWRpbyhpZD86IHN0cmluZyk6IFByb21pc2U8SUF1ZGlvUGxheWVyUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgaXNXb3Jrc3BhY2UgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZignL3dvcmtzcGFjZS8nKSA+PSAwO1xuXG4gICAgICAgIC8vIHVybCBmb3Igd29ya3NwYWNlIGhhbmRsZXMgdGhlIGlkIGRpZmZlcmVudGx5IC0gYWRkaW5nIC5qc29uIGF0IHRoZSBlbmQgZm9yIGxvY2FsIHJlYWRpbmcganNvbiBmaWxlXG4gICAgICAgIGNvbnN0IHVybCA9IGlzV29ya3NwYWNlXG4gICAgICAgICAgICA/IGAke3RoaXMuYXBpVXJsfSR7aWQgPyBgMCR7aWR9YCA6ICcwMSd9Lmpzb25gXG4gICAgICAgICAgICA6IGAke3RoaXMuYXBpVXJsfSR7aWQgPyBgP2lkPSR7aWR9YCA6ICcnfWA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgICAgICAgICAnRWxkZXItQXBpJzogJ3RydWUnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1mZXRjaGluZycpO1xuXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWZldGNoaW5nJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgdXBkYXRlQ29sb3JzID0gKGNvbG9yOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy52aWV3LnN0eWxlLnNldFByb3BlcnR5KCctLWxpZ2h0Ym94LWNvbG9yJywgYHZhcigtLWNvbG9yLSR7Y29sb3J9KWApO1xuXG4gICAgICAgIC8vIHJlbW92ZSBhbGwgcHJldmlvdXMgY29sb3IgbW9kaWZpZXJzIChpZiBleGlzdClcbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IHRoaXMudmlldy5jbGFzc05hbWUuc3BsaXQoJyAnKS5maWx0ZXIoYyA9PiAhYy5zdGFydHNXaXRoKCdhdWRpb3BsYXllci0tJykpO1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJykudHJpbSgpO1xuXG4gICAgICAgIC8vIGFkZCBuZXcgY29sb3IgbW9kaWZpZXJcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoYGF1ZGlvcGxheWVyLS0ke2NvbG9yfWApO1xuICAgIH07XG59XG4iLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcC9kaXN0L2dzYXAnO1xuaW1wb3J0IHsgU3BsaXRUZXh0IH0gZnJvbSAnZ3NhcC9kaXN0L1NwbGl0VGV4dCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgeyBicmVha3BvaW50LCBlYXNpbmcgfSBmcm9tICcuLi9TaXRlJztcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnLi4vVXRpbHMnO1xuXG5nc2FwLnJlZ2lzdGVyUGx1Z2luKFNwbGl0VGV4dCk7XG5cblxuaW50ZXJmYWNlIElCdXR0b25TZXR0aW5ncyB7XG4gICAgc2libGluZz86IGJvb2xlYW47IC8vIElmIHRoZSBidXR0b24vbGluayBpcyBhIHNpYmxpbmcgb2YgYW5pbWF0ZWQgaXRlbXMgKGVnIGxpbmsgaXQncyBlbXB0eSBpdHNlbGYpXG59XG5cbmV4cG9ydCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgcHJpdmF0ZSBidXR0b246IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc3BsaXRUZXh0OiBhbnk7XG4gICAgcHJpdmF0ZSBob3Jpem9udGFsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHZlcnRpY2FsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHRyaWFuZ2xlOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGFycm93OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHRsOiBnc2FwLmNvcmUuVGltZWxpbmU7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogSUJ1dHRvblNldHRpbmdzO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHZpZXc6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKHZpZXcpO1xuXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnsgc2libGluZzogZmFsc2UgfSwgLi4uSlNPTi5wYXJzZSh0aGlzLnZpZXcuZ2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbnMnKSkgfTtcblxuICAgICAgICB0aGlzLmJ1dHRvbiA9IHRoaXMuc2V0dGluZ3Muc2libGluZyA/IHRoaXMudmlldy5wYXJlbnRFbGVtZW50IDogdGhpcy52aWV3O1xuICAgICAgICB0aGlzLmJpbmQoKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVib3VuY2UoKCkgPT4gdGhpcy50bC5pbnZhbGlkYXRlKCkpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJpbmQoKTogdm9pZCB7XG5cblxuICAgICAgICB0aGlzLnNwbGl0VGV4dCA9IG5ldyBTcGxpdFRleHQodGhpcy5idXR0b24ucXVlcnlTZWxlY3RvcignLmpzLWJ1dHRvbi10ZXh0JyksIHsgdHlwZTogJ3dvcmRzJywgd29yZHNDbGFzczogJ3dvcmQnIH0pO1xuICAgICAgICB0aGlzLmhvcml6b250YWwgPSB0aGlzLmJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuanMtYXJyb3ctaG9yaXpvbnRhbCcpO1xuICAgICAgICB0aGlzLnZlcnRpY2FsID0gdGhpcy5idXR0b24ucXVlcnlTZWxlY3RvcignLmpzLWFycm93LXZlcnRpY2FsJyk7XG4gICAgICAgIHRoaXMudHJpYW5nbGUgPSB0aGlzLmJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuanMtYXJyb3ctdHJpYW5nbGUnKTtcbiAgICAgICAgdGhpcy5hcnJvdyA9IHRoaXMuYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5qcy1hcnJvdycpO1xuXG4gICAgICAgIHRoaXMuc2V0dXBUaW1lbGluZSgpO1xuICAgICAgICB0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cFRpbWVsaW5lKCk6IHZvaWQge1xuICAgICAgICBpZiAoW3RoaXMudmVydGljYWwsIHRoaXMuaG9yaXpvbnRhbCwgdGhpcy50cmlhbmdsZSwgdGhpcy5hcnJvd10uc29tZShlbCA9PiAhZWwpKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy50bCAmJiB0aGlzLnRsLmtpbGwoKTtcbiAgICAgICAgdGhpcy50bCA9IGdzYXAudGltZWxpbmUoeyBwYXVzZWQ6IHRydWUsIGRlZmF1bHRzOiB7IGVhc2U6IGVhc2luZyB9IH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2J1dHRvbi0tc2ltcGxlJykpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYnV0dG9uLS1yZXZlcnNlZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyb3dFeHRyYSA9IHRoaXMuYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5qcy1hcnJvdy1leHRyYScpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdFRleHQud29yZHNbMF0gJiYgdGhpcy50bFxuICAgICAgICAgICAgICAgICAgICAudG8odGhpcy5zcGxpdFRleHQud29yZHNbMF0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ICgpID0+IHRoaXMuYXJyb3cub2Zmc2V0V2lkdGggKiAxLjA4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgICAgICAgICAgICAgfSwgJ2Fycm93JylcbiAgICAgICAgICAgICAgICAgICAgLnRvKHRoaXMuYXJyb3csIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ICgpID0+IHRoaXMuYXJyb3cub2Zmc2V0V2lkdGggKiAxLjA4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgICAgICAgICAgICAgfSwgJ2Fycm93Jyk7XG5cbiAgICAgICAgICAgICAgICBhcnJvd0V4dHJhICYmIHRoaXMudGxcbiAgICAgICAgICAgICAgICAgICAgLnRvKGFycm93RXh0cmEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ICgpID0+IHRoaXMuYXJyb3cub2Zmc2V0V2lkdGggKiAxLjA4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgICAgICAgICAgICAgfSwgJ2Fycm93Jyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlVGV4dCA9IHRoaXMuYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5qcy1idXR0b24tZHVwbGljYXRlLXRleHQnKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXRUZXh0LndvcmRzWzBdICYmIHRoaXMudGxcbiAgICAgICAgICAgICAgICAgICAgLnRvKHRoaXMuc3BsaXRUZXh0LndvcmRzWzBdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiAoKSA9PiB0aGlzLnNwbGl0VGV4dC53b3Jkc1swXS5vZmZzZXRXaWR0aCAqIDEuMDYsXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICAgICAgICAgICAgICB9LCAnYXJyb3cnKVxuICAgICAgICAgICAgICAgICAgICAudG8odGhpcy5hcnJvdywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAncmlnaHQgY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ICgpID0+IHRoaXMuc3BsaXRUZXh0LndvcmRzWzBdLm9mZnNldFdpZHRoICogMS4wNixcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgICAgICAgICAgICAgIH0sICdhcnJvdycpO1xuXG4gICAgICAgICAgICAgICAgZHVwbGljYXRlVGV4dCAmJiB0aGlzLnRsLnRvKGR1cGxpY2F0ZVRleHQsIHtcbiAgICAgICAgICAgICAgICAgICAgeDogKCkgPT4gdGhpcy5zcGxpdFRleHQud29yZHNbMF0ub2Zmc2V0V2lkdGggKiAxLjA2LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICAgICAgICAgIH0sICdhcnJvdycpO1xuXG4gICAgICAgICAgICAgICAgLy8gdGhpcy50bFxuICAgICAgICAgICAgICAgIC8vICAgICAudG8odGhpcy5ob3Jpem9udGFsLCB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdyaWdodCBjZW50ZXInLFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2NhbGVYOiAoKHdvcmRzV2lkdGggKiAxLjA2KSAvIHRoaXMuaG9yaXpvbnRhbC5vZmZzZXRXaWR0aCkgKyAxLFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gICAgIC50byh0aGlzLnNwbGl0VGV4dC53b3Jkc1swXSwge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgeDogd29yZHNXaWR0aCAqIDEuMDYsXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICAgICAgICAgIC8vICAgICB9LCAnYXJyb3cnKVxuICAgICAgICAgICAgICAgIC8vICAgICAudG8odGhpcy5hcnJvdywge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAncmlnaHQgY2VudGVyJyxcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHg6IHdvcmRzV2lkdGggKiAxLjA2LFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgICAgICAgICAvLyAgICAgfSwgJ2Fycm93JylcbiAgICAgICAgICAgICAgICAvLyAgICAgLnRvKHRoaXMuaG9yaXpvbnRhbCwge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAncmlnaHQgY2VudGVyJyxcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNjYWxlWDogMSxcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZWxheTogLTAuMzUsXG4gICAgICAgICAgICAgICAgLy8gICAgIH0sICdzaHJpbmsnKTtcblxuICAgICAgICAgICAgICAgIC8vIGR1cGxpY2F0ZVRleHQgJiYgdGhpcy50bC50byhkdXBsaWNhdGVUZXh0LCB7XG4gICAgICAgICAgICAgICAgLy8gICAgIHg6IHdvcmRzV2lkdGggKiAxLjA2LFxuICAgICAgICAgICAgICAgIC8vICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICAgICAgICAgIC8vICAgICBkZWxheTogLTAuMyxcbiAgICAgICAgICAgICAgICAvLyB9LCAnc2hyaW5rJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5idXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdidXR0b24tLWRyYXcnKSkge1xuXG4gICAgICAgICAgICBjb25zdCBtbSA9IGdzYXAubWF0Y2hNZWRpYSgpO1xuXG4gICAgICAgICAgICBtbS5hZGQoJyhvcmllbnRhdGlvbjogbGFuZHNjYXBlKScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBnc2FwLnNldCh0aGlzLnZlcnRpY2FsLCB7IHNjYWxlWTogMCB9KTtcbiAgICAgICAgICAgICAgICBnc2FwLnNldCh0aGlzLmhvcml6b250YWwsIHsgc2NhbGVYOiAwIH0pO1xuICAgICAgICAgICAgICAgIGdzYXAuc2V0KHRoaXMudHJpYW5nbGUsIHsgc2NhbGU6IDAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IDAuMztcblxuICAgICAgICAgICAgICAgIHRoaXMudGxcbiAgICAgICAgICAgICAgICAgICAgLnRvKHRoaXMudmVydGljYWwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiAqIDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogYCR7dGhpcy5hcnJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2Fycm93LS1yZXZlcnNlZCcpID8gJ2JvdHRvbScgOiAndG9wJ30gY2VudGVyYCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRvKHRoaXMuaG9yaXpvbnRhbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIH0sICdhcnJvdycpXG4gICAgICAgICAgICAgICAgICAgIC5mcm9tVG8oXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWFuZ2xlLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyB4OiAoKSA9PiAtdGhpcy5ob3Jpem9udGFsLm9mZnNldFdpZHRoIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Fycm93JyxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNwbGl0VGV4dC53b3Jkc1swXSAmJiB0aGlzLnRsXG4gICAgICAgICAgICAgICAgLnRvKHRoaXMuc3BsaXRUZXh0LndvcmRzWzBdLCB7XG4gICAgICAgICAgICAgICAgICAgIHlQZXJjZW50OiAxNTAsXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0ZTogLTE1LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRvKHRoaXMuaG9yaXpvbnRhbCwge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWDogKCkgPT4gKHRoaXMuc3BsaXRUZXh0LndvcmRzWzBdLm9mZnNldFdpZHRoIC8gdGhpcy5ob3Jpem9udGFsLm9mZnNldFdpZHRoKSArIDEuMDEsXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiAtMC41LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC42NSxcbiAgICAgICAgICAgICAgICB9LCAnYXJyb3cnKVxuICAgICAgICAgICAgICAgIC50byh0aGlzLnRyaWFuZ2xlLCB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2xlZnQgY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgeDogKCkgPT4gdGhpcy5zcGxpdFRleHQud29yZHNbMF0ub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiAtMC41LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC42NSxcbiAgICAgICAgICAgICAgICB9LCAnYXJyb3cnKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBicmVha3BvaW50LmRlc2t0b3AgJiYgdGhpcy50bC5wbGF5KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudmlldy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgYnJlYWtwb2ludC5kZXNrdG9wICYmIHRoaXMudGwucmV2ZXJzZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnZpZXcuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBicmVha3BvaW50LmRlc2t0b3AgJiYgdGhpcy50bC5wbGF5KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudmlldy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgICAgICAgICAgYnJlYWtwb2ludC5kZXNrdG9wICYmIHRoaXMudGwucmV2ZXJzZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcC9kaXN0L2dzYXAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xuXG5leHBvcnQgY2xhc3MgQ2lyY2xlIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIHByaXZhdGUgY2lyY2xlczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSBpbWFnZXM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgY2lyY2xlc1RpbWVsaW5lOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgdGhpcy5jaXJjbGVzID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1jaXJjbGUnKTtcbiAgICAgICAgdGhpcy5pbWFnZXMgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvckFsbCgnLmpzLWlsbHUnKTtcblxuICAgICAgICB0aGlzLmxvb3AoKTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIG9uU3RhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyB1cGRhdGVQb3NpdGlvbiA9ICh2YWx1ZTogbnVtYmVyLCBmYXN0PzogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICBnc2FwLnRvKHRoaXMudmlldywge1xuICAgICAgICAgICAgeDogdmFsdWUsXG4gICAgICAgICAgICBkdXJhdGlvbjogZmFzdCA/IDAgOiAwLjMsXG4gICAgICAgICAgICBvcGFjaXR5OiBmYXN0ICYmIDEsXG4gICAgICAgICAgICBlYXNlOiAnc2luZScsXG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuXG4gICAgcHVibGljIHNob3cgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMudmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgZ3NhcC5mcm9tVG8odGhpcy52aWV3LCB7IHNjYWxlOiAwLjYgfSwge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ3NpbmUnLFxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHRoaXMuY2lyY2xlc1RpbWVsaW5lLnBsYXkoKSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGxvb3AgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuY2lyY2xlc1RpbWVsaW5lID0gZ3NhcC50aW1lbGluZSh7IHJlcGVhdDogLTEgfSk7XG5cbiAgICAgICAgdGhpcy5jaXJjbGVzVGltZWxpbmUuc2V0KFt0aGlzLmNpcmNsZXNdLCB7IG9wYWNpdHk6IDAgfSk7XG5cbiAgICAgICAgWy4uLnRoaXMuY2lyY2xlc10uZm9yRWFjaCgoY2lyY2xlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaXJjbGVzVGltZWxpbmUuZnJvbVRvKGNpcmNsZSwgeyBzY2FsZTogMC42IH0sIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdzaW5lJyxcbiAgICAgICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNpcmNsZS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgICAgICBnc2FwLmZyb21Ubyh0aGlzLmltYWdlc1tpbmRleF0sIHsgb3BhY2l0eTogMCB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuMjUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNlOiAnc2luZScsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBnc2FwLnNldChbLi4udGhpcy5pbWFnZXNdLmZpbHRlcihpbWcgPT4gaW1nICE9PSB0aGlzLmltYWdlc1tpbmRleF0pLCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sICcrPTEuNycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgaGlkZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgZ3NhcC50byh0aGlzLnZpZXcsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yNSxcbiAgICAgICAgICAgIGVhc2U6ICdzaW5lJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2lyY2xlc1RpbWVsaW5lLnBhdXNlKCk7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vQ29tcG9uZW50JztcblxuXG5leHBvcnQgY2xhc3MgQ29sbGVjdGlvbnMgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHByaXZhdGUgYWxsSXRlbXM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHZpZXc6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKHZpZXcpO1xuXG4gICAgICAgIHRoaXMuYWxsSXRlbXMgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvckFsbCgnLmpzLWFjY29yZGVvbi1pdGVtJyk7XG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYmluZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hbGxJdGVtcy5mb3JFYWNoKChpdGVtOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5vbkl0ZW1FbnRlcik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIG9uSXRlbUVudGVyID0gKGV2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgWy4uLnRoaXMuYWxsSXRlbXNdLmZpbHRlcigoaXRlbTogSFRNTEVsZW1lbnQpID0+IGl0ZW0gIT09IHRhcmdldCkuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJykpO1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IEhhbmRsZXIgfSBmcm9tICcuLi9IYW5kbGVyJztcbmltcG9ydCB7IGdlbmVyYXRlVUlEIH0gZnJvbSAnLi4vVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50RXZlbnRzIHtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENIQU5HRTogc3RyaW5nID0gJ2NoYW5nZSc7XG59XG5cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudCBleHRlbmRzIEhhbmRsZXIge1xuICAgIHB1YmxpYyB1dWlkOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy51dWlkID0gZ2VuZXJhdGVVSUQoKTtcbiAgICAgICAgaWYgKCF2aWV3KSB7IGNvbnNvbGUud2FybignY29tcG9uZW50IGJ1aWx0IHdpdGhvdXQgdmlldycpOyB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uU3RhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBwdWJsaWMgYW5pbWF0ZUluKGluZGV4PzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQgeyB9XG5cbiAgICBwdWJsaWMgYW5pbWF0ZU91dCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gaWYgeW91IGRvbid0IHdhbnQgdG8gYW5pbWF0ZSBjb21wb25lbnQsXG4gICAgICAgIC8vIGp1c3QgcmV0dXJuIGVtcHR5IFByb21pc2U6XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgcHVibGljIHJlc2l6ZSA9ICh3ZHQ6IG51bWJlciwgaGd0OiBudW1iZXIpOiB2b2lkID0+IHsgfTtcblxuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFNjcm9sbCBmcm9tICcuLi9TY3JvbGwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xuXG5cbmludGVyZmFjZSBJTG9hZFNldHRpbmdzIHtcbiAgICBjb250ZW50U2VsZWN0b3I6IHN0cmluZztcbn1cblxuXG5leHBvcnQgY2xhc3MgRmlsdGVyTGV0dGVycyBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICBwdWJsaWMgc3RhdGljIGluc3RhbmNlOiBGaWx0ZXJMZXR0ZXJzO1xuXG4gICAgcHVibGljIHN0YXRpYyBjaGVja0J1dHRvbnMoKTogdm9pZCB7XG4gICAgICAgIEZpbHRlckxldHRlcnMuaW5zdGFuY2UuY2hlY2tCdXR0b25zKCk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIHNldHRpbmdzOiBJTG9hZFNldHRpbmdzO1xuICAgIHByaXZhdGUgY29udGVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgYnV0dG9uczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSBzY3JvbGxlZEl0ZW1zOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PjtcblxuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgRmlsdGVyTGV0dGVycy5pbnN0YW5jZSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4uSlNPTi5wYXJzZSh0aGlzLnZpZXcuZ2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbnMnKSkgfTtcbiAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZXR0aW5ncy5jb250ZW50U2VsZWN0b3IpO1xuICAgICAgICB0aGlzLmJ1dHRvbnMgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvckFsbCgnLmpzLWxldHRlcicpO1xuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICB0aGlzLmNoZWNrQnV0dG9ucygpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgYmluZCgpOiB2b2lkIHtcbiAgICAgICAgWy4uLnRoaXMuYnV0dG9uc10ubWFwKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQnV0dG9uQ2xpY2spKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBvbkJ1dHRvbkNsaWNrID0gKGUpOiB2b2lkID0+IHtcblxuICAgICAgICBjb25zdCBidXR0b246IEhUTUxFbGVtZW50ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgICAgICBjb25zdCB7IGxldHRlciB9ID0gYnV0dG9uLmRhdGFzZXQ7XG5cbiAgICAgICAgY29uc3QgbGV0dGVySXRlbTogSFRNTEVsZW1lbnQgPSBbLi4udGhpcy5zY3JvbGxlZEl0ZW1zXS5maW5kKGl0ZW0gPT4gdGhpcy5nZXRGaXJzdExldHRlcihpdGVtKSA9PT0gbGV0dGVyLnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgICAgIGlmICghbGV0dGVySXRlbSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGVyZSBpcyBubyBpdGVtIHN0YXJ0aW5nIHdpdGggbGV0dGVyIFwiJXNcIiEnLCBsZXR0ZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU2Nyb2xsLnNjcm9sbFRvKHtcbiAgICAgICAgICAgIGVsOiBsZXR0ZXJJdGVtLFxuICAgICAgICAgICAgb2Zmc2V0WTogdGhpcy52aWV3LmNsb3Nlc3QoJy5qcy1wYW5lbCcpLmNsaWVudEhlaWdodCAtIDEsIC8vIHByZXZlbnQgZG91YmxlIGJvcmRlclxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgY2hlY2tCdXR0b25zKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNjcm9sbGVkSXRlbXMgPSB0aGlzLmNvbnRlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy10aWxlJyk7XG5cbiAgICAgICAgWy4uLnRoaXMuYnV0dG9uc10uZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBsZXR0ZXIgfSA9IGJ1dHRvbi5kYXRhc2V0O1xuXG4gICAgICAgICAgICBjb25zdCBsZXR0ZXJJdGVtOiBIVE1MRWxlbWVudCA9IFsuLi50aGlzLnNjcm9sbGVkSXRlbXNdLmZpbmQoaXRlbSA9PiB0aGlzLmdldEZpcnN0TGV0dGVyKGl0ZW0pID09PSBsZXR0ZXIudG9Mb3dlckNhc2UoKSk7XG5cbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdpcy1kaXNhYmxlZCcsICFsZXR0ZXJJdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgZ2V0Rmlyc3RMZXR0ZXIoaXRlbTogSFRNTEVsZW1lbnQpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXRlbS5kYXRhc2V0Lm5hbWUudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IFRlbXBsYXRlTmFtZXMsIFRlbXBsYXRlcyB9IGZyb20gJy4uLy4uL3RlbXBsYXRlcy9UZW1wbGF0ZXMnO1xuaW1wb3J0IHsgUHVzaFN0YXRlcyB9IGZyb20gJy4uLy4uL1B1c2hTdGF0ZXMnO1xuaW1wb3J0IHsgTGlnaHRib3hEYXRhIH0gZnJvbSAnLi9MaWdodGJveC50eXBlcyc7XG5pbXBvcnQgeyBlYXNpbmcgfSBmcm9tICcuLi8uLi9TaXRlJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQ29tcG9uZW50JztcbmltcG9ydCB7IEF1ZGlvUGxheWVyIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9BdWRpb1BsYXllcic7XG5pbXBvcnQgeyBMaWdodGJveFRyYW5zY3JpcHQgfSBmcm9tICcuL0xpZ2h0Ym94VHJhbnNjcmlwdCc7XG5pbXBvcnQgeyBMaWdodGJveE5hdiB9IGZyb20gJy4vTGlnaHRib3hOYXYnO1xuaW1wb3J0IHsgTGlnaHRib3hTbGlkZXIgfSBmcm9tICcuL0xpZ2h0Ym94U2xpZGVyJztcblxuXG5cbmV4cG9ydCBjbGFzcyBMaWdodGJveCB7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICBwdWJsaWMgc3RhdGljIGluc3RhbmNlOiBMaWdodGJveDtcbiAgICBwdWJsaWMgc3RhdGljIGlzT3BlbjogYm9vbGVhbjtcbiAgICBwdWJsaWMgc3RhdGljIGN1cnJlbnRJZDogc3RyaW5nO1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIGNoZWNrUGxheWVyU3RhdGUoKTogdm9pZCB7XG4gICAgICAgIExpZ2h0Ym94Lmluc3RhbmNlLmNoZWNrUGxheWVyU3RhdGUoKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgdHJ5VG9VcGRhdGVUcmFuc2NyaXB0KHRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBMaWdodGJveC5pbnN0YW5jZS50cnlUb1VwZGF0ZVRyYW5zY3JpcHQodGltZSk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgc3RhdGljIGdldElkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBMaWdodGJveC5jdXJyZW50SWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb21wb25lbnRzOiBBcnJheTxDb21wb25lbnQ+O1xuICAgIHByaXZhdGUgdmlldzogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzaG93biA9IHRydWU7XG4gICAgcHJpdmF0ZSBjdXJyZW50UGF0aDogc3RyaW5nO1xuICAgIHByaXZhdGUgcGxheWVyQnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIGFuaW1hdGluZzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcjtcbiAgICBwcml2YXRlIHRyYW5zY3JpcHRDb21wOiBMaWdodGJveFRyYW5zY3JpcHQ7XG4gICAgcHJpdmF0ZSBuYXZDb21wOiBMaWdodGJveE5hdjtcbiAgICBwcml2YXRlIHNsaWRlckNvbXA6IExpZ2h0Ym94U2xpZGVyO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIExpZ2h0Ym94Lmluc3RhbmNlID0gdGhpcztcbiAgICAgICAgdGhpcy52aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0Ym94Jyk7XG5cbiAgICAgICAgdGhpcy5oaWRlKHRydWUpO1xuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgYXN5bmMgbG9hZChwYXlsb2FkPzogT2JqZWN0KTogUHJvbWlzZTxMaWdodGJveERhdGE+IHtcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLWZldGNoaW5nJyk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAgICAgICBjb25zdCBpc1dvcmtzcGFjZSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCcvd29ya3NwYWNlLycpID49IDA7XG4gICAgICAgIC8vIGNvbnN0IHVybCA9IGlzV29ya3NwYWNlID8gdGhpcy5zZXR0aW5ncy5hcGlbdHlwZV0gOiB3aW5kb3cubG9jYXRpb24uaHJlZiArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIGNvbnN0IHVybCA9IGlzV29ya3NwYWNlXG4gICAgICAgICAgICA/IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L3dvcmtzcGFjZS9qc29uL2xpZ2h0Ym94LyR7d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJylbM119Lmpzb25gXG4gICAgICAgICAgICA6IHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IHRoaXMuY29udHJvbGxlcj8uc2lnbmFsLFxuICAgICAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMocGF5bG9hZCBhcyBhbnkpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgICAgICAgICAnRWxkZXItQXBpJzogJ3RydWUnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1mZXRjaGluZycpO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1mZXRjaGluZycpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgY2hlY2soKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlQnlQYXRobmFtZSgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgb25TdGF0ZShpc1JlbmRlcmVkPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVCeVBhdGhuYW1lKGlzUmVuZGVyZWQpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52aWV3LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHM/LmZvckVhY2goYyA9PiBjLmRlc3Ryb3koKSk7XG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IG51bGw7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBidWlsZCA9IChkYXRhOiBMaWdodGJveERhdGEpOiB2b2lkID0+IHtcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdoZW4gbm8gZGF0YSB0byBzaG93XG4gICAgICAgIGlmIChkYXRhLnJlc3VsdCA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlcy5nZXQoVGVtcGxhdGVOYW1lcy5MSUdIVEJPWCk7XG5cbiAgICAgICAgY29uc3QgaHRtbCA9IHRlbXBsYXRlLnJlbmRlcihkYXRhKTtcbiAgICAgICAgdGhpcy52aWV3LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgICAgUHVzaFN0YXRlcy5iaW5kKHRoaXMudmlldyk7XG5cbiAgICAgICAgLy8gbGlnaHRib3ggaGFzIGl0cyBvd24gYXVkaW8gcGxheWVyJ3MgYnV0dG9uIHRvIHJ1biBpdFxuICAgICAgICBBdWRpb1BsYXllci5pbnN0YW5jZS5iaW5kQnV0dG9ucygpO1xuXG4gICAgICAgIExpZ2h0Ym94LmN1cnJlbnRJZCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgdGhpcy5idWlsZENvbXBvbmVudHMoKTtcblxuICAgICAgICAvLyBmaW5kIGJ1dHRvbiBjb25uZWN0ZWQgdG8gcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyQnRuID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItYnRuJyk7XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgcGxheWVyIGlzIHBsYXlpbmcgYXVkaW8gZm9yIHRoaXMgbGlnaHRib3hcbiAgICAgICAgdGhpcy5jaGVja1BsYXllclN0YXRlKCk7XG5cbiAgICAgICAgdGhpcy50cnlUb1NldENvbG9yKCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIHRyeVRvU2V0Q29sb3IgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGxpZ2h0Ym94SXRlbTogSFRNTEVsZW1lbnQgPSB0aGlzLnZpZXcuZmlyc3RFbGVtZW50Q2hpbGQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIC8vIGZvciBpbml0aWFsIGxvYWQsIHdoZW4gbGlnaHRib3ggaXMgbm90IHJlbmRlcmVkIHlldFxuICAgICAgICBpZiAoIWxpZ2h0Ym94SXRlbSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIGdldCBkYXRhLWF0dHJpYnV0ZSBmcm9tIC5saWdodGJveF9faXRlbSBhbmQgdXBkYXRlIGNvbG9yIHZhcmlhYmxlIGluIGF1ZGlvcGxheWVyXG4gICAgICAgIGNvbnN0IGNvbG9yOiBzdHJpbmcgPSBsaWdodGJveEl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lLWNvbG9yJyk7XG5cbiAgICAgICAgaWYgKGNvbG9yICYmIChBdWRpb1BsYXllci5nZXRJZCgpID09PSBMaWdodGJveC5nZXRJZCgpKSkgQXVkaW9QbGF5ZXIudXBkYXRlQ29sb3JzKGNvbG9yKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgYmluZCA9ICgpOiB2b2lkID0+IHt9O1xuXG5cblxuICAgIHByaXZhdGUgYnVpbGRDb21wb25lbnRzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnRyYW5zY3JpcHRDb21wID0gbmV3IExpZ2h0Ym94VHJhbnNjcmlwdCh0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLWxpZ2h0Ym94LXRyYW5zY3JpcHQnKSk7XG4gICAgICAgIHRoaXMubmF2Q29tcCA9IG5ldyBMaWdodGJveE5hdih0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLWxpZ2h0Ym94LW5hdicpKTtcbiAgICAgICAgdGhpcy5zbGlkZXJDb21wID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1saWdodGJveC1zbGlkZXInKSAmJiBuZXcgTGlnaHRib3hTbGlkZXIodGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1saWdodGJveC1zbGlkZXInKSk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgdG9nZ2xlQnlQYXRobmFtZShpc1JlbmRlcmVkPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBwYXR0ZXJuRm91bmQgPSB0aGlzLm1hdGNoUGF0aG5hbWVQYXR0ZXJuKCk7XG5cbiAgICAgICAgaWYgKHBhdHRlcm5Gb3VuZCkge1xuXG4gICAgICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCksXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkKCksXG4gICAgICAgICAgICBdKS50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXN1bHRzLmZpbHRlcihCb29sZWFuKS5yZWR1Y2UoKHAsIGMpID0+ICh7IC4uLnAsIC4uLmMgfSkpIGFzIExpZ2h0Ym94RGF0YTtcblxuICAgICAgICAgICAgICAgIGRhdGE/LnRpdGxlICYmIFB1c2hTdGF0ZXMuc2V0VGl0bGUoZGF0YS50aXRsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGQoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzaG93IHRoZSBpbnRlcnZpZXcgbGlnaHRib3ggKG9ubHkgd2hlbiB0aGVyZSdzIGRhdGEgdG8gc2hvdylcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2hvd24gJiYgZGF0YS5yZXN1bHQgIT09IGZhbHNlKSB7IHRoaXMuc2hvdygpOyB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVJbigpO1xuICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8ganVzdCBoaWRlOlxuICAgICAgICBpZiAodGhpcy5zaG93bikge1xuICAgICAgICAgICAgY29uc3QgYW5pbWF0ZSA9IGlzUmVuZGVyZWQ7XG4gICAgICAgICAgICAhIWFuaW1hdGUgJiYgdGhpcy5hbmltYXRlT3V0KCk7XG4gICAgICAgICAgICB0aGlzLmhpZGUoIXRoaXMuc2hvd24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGhpZGUoZmFzdD86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW5nIHx8ICF0aGlzLnNob3duKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlcj8uYWJvcnQoKTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLWNsb3NpbmcnKTtcbiAgICAgICAgICAgIGdzYXAudG8odGhpcy52aWV3LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGZhc3QgPyAwIDogMC4wMSxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuXG4gICAgICAgICAgICAgICAgLy8gQ09OTkVDVEVEIFdJVEggQ1NTIC0gLmlzLWNsb3NpbmdcbiAgICAgICAgICAgICAgICBkZWxheTogZmFzdCA/IDAgOiAxLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdub25lJyxcbiAgICAgICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWxpZ2h0Ym94Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1zaG93aW5nJyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKTogdm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb3VsZCBiZSBhZGRlZCBpbiBsaWdodGJveCBuYWl2Z2F0aW9uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kZWZhdWx0JywgJ2lzLW5vdC1kZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHkgdGhlIGxpZ2h0Ym94XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgTGlnaHRib3guaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBzaG93KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5hbmltYXRpbmcpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuc2hvd24pIHsgcmV0dXJuOyB9XG5cblxuICAgICAgICBQcm9taXNlLmFsbChbdGhpcy5zaG93biA/IHRoaXMuaGlkZSgpIDogbnVsbF0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaG93biA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgIHRoaXMudmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgZ3NhcC50byh0aGlzLnZpZXcsIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4xLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdub25lJyxcbiAgICAgICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaGFzLWxpZ2h0Ym94Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jbG9zaW5nJyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNsYXNzIHJ1bnMgQ1NTIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLXNob3dpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXVkaW9wbGF5ZXIgc2hvdWxkIGJlIGFsd2F5cyBleHBhbmRlZCB3aGVuIGxpZ2h0Ym94IGlzIG9wZW5cbiAgICAgICAgICAgICAgICAgICAgQXVkaW9QbGF5ZXIub3BlbkF1ZGlvUGxheWVyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBMaWdodGJveC5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgY2hlY2tQbGF5ZXJTdGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKEF1ZGlvUGxheWVyLmdldElkKCkgPT09IExpZ2h0Ym94LmdldElkKCkgJiYgIUF1ZGlvUGxheWVyLmlzQXVkaW9QbGF5ZXJQYXVzZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJCdG4/LmNsYXNzTGlzdC5hZGQoJ2lzLXBsYXlpbmcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyQnRuPy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1wbGF5aW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cnlUb1NldENvbG9yKCk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgbWF0Y2hQYXRobmFtZVBhdHRlcm4oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAvXlxcLyh3b3Jrc3BhY2VcXC9saWdodGJveHxpbnRlcnZpZXdzKVxcL1thLXowLTktXS9nbWlcbiAgICAgICAgICAgIC50ZXN0KHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGFuaW1hdGVJbihmYXN0PzogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7IGVhc2U6IGVhc2luZywgZHVyYXRpb246ICFmYXN0ID8gMSA6IDAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBuYXZpZ2F0b3IudmlicmF0ZShbMSwgNDAwLCAxXSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGFuaW1hdGVPdXQoZmFzdD86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblxuICAgICAgICBpZiAoIXRoaXMudmlldy5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXZpc2libGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgZ3NhcC50aW1lbGluZSh7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0czogeyBlYXNlOiAnZXhwby5pbk91dCcgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSB0cnlUb1VwZGF0ZVRyYW5zY3JpcHQodGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMudHJhbnNjcmlwdENvbXAudXBkYXRlKHRpbWUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5pbXBvcnQgeyBlYXNpbmcgfSBmcm9tICcuLi8uLi9TaXRlJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQ29tcG9uZW50JztcblxuXG5leHBvcnQgY2xhc3MgTGlnaHRib3hOYXYgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgcHJpdmF0ZSBuYXZCdXR0b25zOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50PjtcbiAgICBwcml2YXRlIG5hdlRhYnM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgYWN0aXZlVGFiOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGxpZ2h0Ym94RWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaXNBbmltYXRpbmc6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgdGhpcy5saWdodGJveEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0Ym94Jyk7XG4gICAgICAgIHRoaXMubmF2QnV0dG9ucyA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcbiAgICAgICAgdGhpcy5uYXZUYWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWxpZ2h0Ym94LXRhYicpO1xuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGJpbmQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIFsuLi50aGlzLm5hdkJ1dHRvbnNdLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25CdG5DbGljaykpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbkJ0bkNsaWNrID0gKGUpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRpbmcpIHJldHVybjtcblxuICAgICAgICBjb25zdCB7IGN1cnJlbnRUYXJnZXQ6IGJ1dHRvbiB9ID0gZTtcblxuICAgICAgICBjb25zdCB0YWJTbHVnOiBzdHJpbmcgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJyk7XG4gICAgICAgIGNvbnN0IHRhYlRvT3BlbjogSFRNTEVsZW1lbnQgPSBbLi4udGhpcy5uYXZUYWJzXS5maW5kKHRhYiA9PiB0YWIuaWQgPT09IHRhYlNsdWcpO1xuXG4gICAgICAgIHRoaXMuc2hvd1RhYih0YWJUb09wZW4pO1xuXG4gICAgICAgIFsuLi50aGlzLm5hdkJ1dHRvbnNdLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIHNob3dUYWIgPSAodGFiOiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc0FuaW1hdGluZykgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuY2xvc2VUYWIodGhpcy5hY3RpdmVUYWIpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0YWIpIHtcbiAgICAgICAgICAgICAgICAvLyBmb3IgYW5pbWF0ZSBpbWFnZVxuICAgICAgICAgICAgICAgIHRoaXMubGlnaHRib3hFbC5jbGFzc0xpc3QuYWRkKCdpcy1kZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5saWdodGJveEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLW5vdC1kZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdzYXAuZnJvbVRvKHRhYiwgeyB5UGVyY2VudDogMCB9LCB7XG4gICAgICAgICAgICAgICAgeVBlcmNlbnQ6IC0xMDAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNixcbiAgICAgICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ2lzLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IHRhYjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBjbG9zZVRhYiA9ICh0YWI6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRpbmcpIHJlc29sdmUoKTtcblxuICAgICAgICBpZiAoIXRhYikge1xuICAgICAgICAgICAgLy8gZm9yIGFuaW1hdGUgaW1hZ2VcbiAgICAgICAgICAgIHRoaXMubGlnaHRib3hFbC5jbGFzc0xpc3QuYWRkKCdpcy1ub3QtZGVmYXVsdCcpO1xuICAgICAgICAgICAgdGhpcy5saWdodGJveEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRlZmF1bHQnKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdzYXAuZnJvbVRvKHRhYiwgeyB5UGVyY2VudDogLTEwMCB9LCB7XG4gICAgICAgICAgICAgICAgeVBlcmNlbnQ6IDAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4iLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcC9kaXN0L2dzYXAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Db21wb25lbnQnO1xuaW1wb3J0IHsgZWFzaW5nIH0gZnJvbSAnLi4vLi4vU2l0ZSc7XG5cblxuZXhwb3J0IGNsYXNzIExpZ2h0Ym94U2xpZGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIHByaXZhdGUgd3JhcDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzbGlkZXM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgY2FwdGlvbnM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgYXJyb3dQcmV2OiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIGFycm93TmV4dDogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhY3RpdmVTbGlkZTogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhY3RpdmVTbGlkZUluZGV4OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgdGhpcy53cmFwID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXItd3JhcCcpO1xuICAgICAgICB0aGlzLnNsaWRlcyA9IHRoaXMud3JhcC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtc2xpZGUnKTtcbiAgICAgICAgdGhpcy5jYXB0aW9ucyA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCcuanMtY2FwdGlvbicpO1xuICAgICAgICB0aGlzLmFycm93UHJldiA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtc2xpZGVyLXByZXYnKTtcbiAgICAgICAgdGhpcy5hcnJvd05leHQgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXNsaWRlci1uZXh0Jyk7XG5cblxuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgaW5pdCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5nb1RvKDAsIHRydWUpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBiaW5kID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmFycm93TmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZ29Ubyh0aGlzLmFjdGl2ZVNsaWRlSW5kZXggKyAxKSk7XG4gICAgICAgIHRoaXMuYXJyb3dQcmV2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5nb1RvKHRoaXMuYWN0aXZlU2xpZGVJbmRleCAtIDEpKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgZ29UbyA9IChpbmRleDogbnVtYmVyLCBmYXN0PzogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb246IG51bWJlciA9IGluZGV4ID4gdGhpcy5hY3RpdmVTbGlkZUluZGV4ID8gMSA6IC0xO1xuXG4gICAgICAgIHRoaXMuaGlkZVNsaWRlKHRoaXMuYWN0aXZlU2xpZGVJbmRleCwgZGlyZWN0aW9uLCBmYXN0KTtcbiAgICAgICAgdGhpcy5zaG93U2xpZGUoaW5kZXgsIGRpcmVjdGlvbiwgZmFzdCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGhpZGVTbGlkZSA9IChpbmRleDogbnVtYmVyLCBkaXJlY3Rpb246IG51bWJlciwgZmFzdD86IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgc2xpZGUgPSB0aGlzLnNsaWRlc1tpbmRleF07XG4gICAgICAgIGNvbnN0IGNhcHRpb24gPSB0aGlzLmNhcHRpb25zW2luZGV4XTtcblxuICAgICAgICBpZiAoIXNsaWRlKSByZXR1cm47XG5cbiAgICAgICAgZ3NhcC5mcm9tVG8oc2xpZGUsIHsgeDogMCB9LCB7XG4gICAgICAgICAgICB4OiBkaXJlY3Rpb24gKiAod2luZG93LmlubmVyV2lkdGggKiAtMC43NSksXG4gICAgICAgICAgICBkdXJhdGlvbjogZmFzdCA/IDAgOiAwLjUsXG4gICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGdzYXAuZnJvbVRvKGNhcHRpb24sIHsgeTogMCB9LCB7XG4gICAgICAgICAgICB5OiAyMDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogZmFzdCA/IDAgOiAwLjUsXG4gICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FwdGlvbi5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIHNob3dTbGlkZSA9IChpbmRleDogbnVtYmVyLCBkaXJlY3Rpb246IG51bWJlciwgZmFzdD86IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgc2xpZGUgPSB0aGlzLnNsaWRlc1tpbmRleF07XG4gICAgICAgIGNvbnN0IGNhcHRpb24gPSB0aGlzLmNhcHRpb25zW2luZGV4XTtcblxuICAgICAgICBnc2FwLmZyb21UbyhjYXB0aW9uLCB7IHk6IDIwMCB9LCB7XG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDAuMyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBmYXN0ID8gMCA6IDAuNSxcbiAgICAgICAgICAgIGVhc2U6IGVhc2luZyxcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjYXB0aW9uLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBnc2FwLmZyb21UbyhzbGlkZSwgeyB4OiBkaXJlY3Rpb24gKiAod2luZG93LmlubmVyV2lkdGggKiAwLjc1KSB9LCB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IGZhc3QgPyAwLjAxIDogMC41LFxuICAgICAgICAgICAgZWFzZTogZWFzaW5nLFxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNsaWRlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU2xpZGUgPSBzbGlkZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVNsaWRlSW5kZXggPSBbLi4udGhpcy5zbGlkZXNdLmZpbmRJbmRleChlbCA9PiBlbCA9PT0gc2xpZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXJyb3dzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgdXBkYXRlQXJyb3dzKCk6IHZvaWQge1xuICAgICAgICAodGhpcy5hcnJvd1ByZXYucXVlcnlTZWxlY3RvcignLmpzLXRleHQnKSBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0ID0gYDAke3RoaXMuYWN0aXZlU2xpZGVJbmRleH1gO1xuICAgICAgICAodGhpcy5hcnJvd05leHQucXVlcnlTZWxlY3RvcignLmpzLXRleHQnKSBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0ID0gYDAke3RoaXMuYWN0aXZlU2xpZGVJbmRleCArIDJ9YDtcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlU2xpZGVJbmRleCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy1maXJzdCcpO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sYXN0Jyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMuc2xpZGVzLmxlbmd0aCAtIDE6XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWZpcnN0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLWxhc3QnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWZpcnN0JywgJ2lzLWxhc3QnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCBnc2FwIGZyb20gJ2dzYXAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Db21wb25lbnQnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi4vLi4vVXRpbHMnO1xuXG5kZWNsYXJlIGxldCBTY3JvbGxUb1BsdWdpbjtcbmdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVG9QbHVnaW4pO1xuXG5leHBvcnQgY2xhc3MgTGlnaHRib3hUcmFuc2NyaXB0IGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIHByaXZhdGUgc2VhcmNoRm9ybTogSFRNTEZvcm1FbGVtZW50O1xuICAgIHByaXZhdGUgc2VhcmNoSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbnB1dFdyYXA6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgZmFrZVNwYW46IEhUTUxTcGFuRWxlbWVudDtcbiAgICBwcml2YXRlIGxhbmdCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgbGFuZ1dyYXBwZXJzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PjtcbiAgICBwcml2YXRlIGlzTWFpbkxhbmcgPSB0cnVlO1xuICAgIHByaXZhdGUgYWN0aXZlTGFuZ3VhZ2VXcmFwOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGZvdW5kRWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgY3VycmVudE1hcmtJbmRleDogbnVtYmVyO1xuICAgIHByaXZhdGUgdHJhbnNjcmlwdE5hdmlnYXRpb246IEhUTUxFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSB0cmFuc2NyaXB0TmF2TmV4dEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0cmFuc2NyaXB0TmF2UHJldkJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0cmFuc2NyaXB0TmF2Q2xvc2VCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgdHJhbnNjcmlwdFNjcm9sbENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0cmFuc2NyaXB0UGFydHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuXG4gICAgcHJpdmF0ZSBjdXJyZW50SGlnaGxpZ2h0ZWRQYXJ0OiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlcih2aWV3KTtcblxuICAgICAgICB0aGlzLnNlYXJjaEZvcm0gPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXRyYW5zY3JpcHQtc2VhcmNoJyk7XG4gICAgICAgIHRoaXMuaW5wdXRXcmFwID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy10cmFuc2NyaXB0LWlucHV0LXdyYXAnKTtcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dCA9IHRoaXMuc2VhcmNoRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICAgICB0aGlzLmZha2VTcGFuID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy10cmFuc2NyaXB0LXNwYW4nKTtcbiAgICAgICAgdGhpcy5sYW5nQnV0dG9uID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy10cmFuc2NyaXB0LXN3aXRjaCcpO1xuICAgICAgICB0aGlzLmxhbmdXcmFwcGVycyA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCcuanMtdHJhbnNjcmlwdC1sYW5nJyk7XG4gICAgICAgIHRoaXMuYWN0aXZlTGFuZ3VhZ2VXcmFwID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy10cmFuc2NyaXB0LWxhbmcuaXMtYWN0aXZlJyk7XG4gICAgICAgIHRoaXMudHJhbnNjcmlwdE5hdmlnYXRpb24gPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXRyYW5zY3JpcHQtbmF2Jyk7XG5cbiAgICAgICAgdGhpcy50cmFuc2NyaXB0TmF2TmV4dEJ1dHRvbiA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtdHJhbnNjcmlwdC1uZXh0Jyk7XG4gICAgICAgIHRoaXMudHJhbnNjcmlwdE5hdlByZXZCdXR0b24gPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXRyYW5zY3JpcHQtcHJldicpO1xuICAgICAgICB0aGlzLnRyYW5zY3JpcHROYXZDbG9zZUJ1dHRvbiA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtdHJhbnNjcmlwdC1jbG9zZScpO1xuICAgICAgICB0aGlzLnRyYW5zY3JpcHRTY3JvbGxDb250YWluZXIgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXNjcm9sbGVkJyk7XG4gICAgICAgIHRoaXMudHJhbnNjcmlwdFBhcnRzID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy10cmFuc2NyaXB0LXBhcnQnKTtcblxuXG5cbiAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyB1cGRhdGUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQYXJ0ID0gdGhpcy5nZXRDdXJyZW50UGFydCh0aW1lKTtcbiAgICAgICAgdGhpcy5oaWdobGlnaHRDdXJyZW50UGFydChjdXJyZW50UGFydCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGhpZ2hsaWdodEN1cnJlbnRQYXJ0ID0gKGN1cnJlbnRQYXJ0OiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoIWN1cnJlbnRQYXJ0KSByZXR1cm47XG4gICAgICAgIGlmIChjdXJyZW50UGFydCA9PT0gdGhpcy5jdXJyZW50SGlnaGxpZ2h0ZWRQYXJ0KSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5jdXJyZW50SGlnaGxpZ2h0ZWRQYXJ0ID0gY3VycmVudFBhcnQ7XG4gICAgICAgIFsuLi50aGlzLnRyYW5zY3JpcHRQYXJ0c10uZm9yRWFjaChwYXJ0ID0+IHBhcnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY3VycmVudCcpKTtcbiAgICAgICAgY3VycmVudFBhcnQuY2xhc3NMaXN0LmFkZCgnaXMtY3VycmVudCcpO1xuICAgICAgICB0aGlzLnNjcm9sbFRvRWxlbWVudChjdXJyZW50UGFydCwgZmFsc2UpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBnZXRDdXJyZW50UGFydCA9ICh0aW1lOiBudW1iZXIpOiBIVE1MRWxlbWVudCA9PiBbLi4udGhpcy50cmFuc2NyaXB0UGFydHNdLmZpbHRlcihpdGVtID0+IHBhcnNlSW50KChpdGVtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXN0YXJ0XScpIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnN0YXJ0LCAxMCkgPD0gdGltZSkucG9wKCk7XG5cblxuXG4gICAgcHJpdmF0ZSBzY3JvbGxUb0VsZW1lbnQgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQsIGZhc3Q6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgZ3NhcC50byh0aGlzLnRyYW5zY3JpcHRTY3JvbGxDb250YWluZXIsIHtcbiAgICAgICAgICAgIHNjcm9sbFRvOiB7XG4gICAgICAgICAgICAgICAgeTogZWxlbWVudCxcbiAgICAgICAgICAgICAgICBvZmZzZXRZOiB0aGlzLnNlYXJjaEZvcm0uY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBmYXN0ID8gMC4wMSA6IDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLmluT3V0JyxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGJpbmQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHRoaXMub25LZXlVcChlKSk7XG4gICAgICAgIHRoaXMuc2VhcmNoRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlID0+IHRoaXMub25TdWJtaXQoZSkpO1xuICAgICAgICB0aGlzLmxhbmdCdXR0b24gJiYgdGhpcy5sYW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkxhbmdCdXR0b25DbGljayk7XG4gICAgICAgIHRoaXMudHJhbnNjcmlwdE5hdk5leHRCdXR0b24gJiYgdGhpcy50cmFuc2NyaXB0TmF2TmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZ29UbygxKSk7XG4gICAgICAgIHRoaXMudHJhbnNjcmlwdE5hdlByZXZCdXR0b24gJiYgdGhpcy50cmFuc2NyaXB0TmF2UHJldkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZ29UbygtMSkpO1xuICAgICAgICB0aGlzLnRyYW5zY3JpcHROYXZDbG9zZUJ1dHRvbiAmJiB0aGlzLnRyYW5zY3JpcHROYXZDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VOYXYpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbktleVVwID0gKGUpOiB2b2lkID0+IHtcbiAgICAgICAgLy8gZmFrZSBzcGFuIGlzIGNyZWF0ZWQgdG8gbWVhc3VyZSBpdHMnIHdpZHRoICYgdXBkYXRlIGlucHV0J3Mgd2lkdGggZHluYW1pY2FsbHlcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZTogc3RyaW5nID0gdGhpcy5zZWFyY2hJbnB1dC52YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVJbnB1dChpbnB1dFZhbHVlKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgdXBkYXRlSW5wdXQgPSAodmFsdWU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmZha2VTcGFuLmlubmVyVGV4dCA9IHZhbHVlO1xuICAgICAgICBjb25zdCBzcGFuV2lkdGggPSB0aGlzLmZha2VTcGFuLnNjcm9sbFdpZHRoO1xuICAgICAgICB0aGlzLmlucHV0V3JhcC5zdHlsZS53aWR0aCA9IGAke3NwYW5XaWR0aH1weGA7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGdvVG8gPSAoZGlyOiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5jdXJyZW50TWFya0luZGV4ICs9IGRpcjtcblxuICAgICAgICBpZiAodGhpcy5jdXJyZW50TWFya0luZGV4ID4gdGhpcy5mb3VuZEVsZW1lbnRzLmxlbmd0aCkgdGhpcy5jdXJyZW50TWFya0luZGV4ID0gMTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE1hcmtJbmRleCA8IDEpIHRoaXMuY3VycmVudE1hcmtJbmRleCA9IHRoaXMuZm91bmRFbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNjcmlwdE5hdigpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBjbG9zZU5hdiA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy50cmFuc2NyaXB0TmF2aWdhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KCcnKTtcbiAgICAgICAgdGhpcy5jbGVhck1hcmtlZEVsZW1lbnRzKCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uU3VibWl0ID0gKGUpOiB2b2lkID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmZpbmRXb3JkSW5UcmFuc2NyaXB0KCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGZpbmRXb3JkSW5UcmFuc2NyaXB0ID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICAvLyBnZXQgc2VhcmNoIHZhbHVlXG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWU6IHN0cmluZyA9IHRoaXMuc2VhcmNoSW5wdXQudmFsdWU7XG5cbiAgICAgICAgLy8gZmluZCBhbGwgc2VhcmNoIHZhbHVlJ3MgcmVzdWx0cyBpbiB0cmFuc2NyaXB0IHRleHQsIGFuZCB3cmFwIGVhY2ggaW4gPG1hcms+IHRhZyB0byBoaWdobGlnaHRcbiAgICAgICAgY29uc3Qgc2VhcmNoRWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gdGhpcy5hY3RpdmVMYW5ndWFnZVdyYXAucXVlcnlTZWxlY3RvckFsbCgnLnRyYW5zY3JpcHRfX3RleHQnKTtcbiAgICAgICAgWy4uLnNlYXJjaEVsZW1lbnRzXS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5pbm5lckhUTUwgPSBlbGVtLmlubmVySFRNTC5yZXBsYWNlKG5ldyBSZWdFeHAoYCR7aW5wdXRWYWx1ZX0oPyEoW148XSspPzwpYCwgJ2dpJyksICc8bWFyaz4kJjwvbWFyaz4nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc3RvcmUgYWxsIGZvdW5kIHdvcmRzXG4gICAgICAgIHRoaXMuZm91bmRFbGVtZW50cyA9IHRoaXMuYWN0aXZlTGFuZ3VhZ2VXcmFwLnF1ZXJ5U2VsZWN0b3JBbGwoJ21hcmsnKTtcblxuICAgICAgICAvLyBpZiBmb3VuZCBhbnkgd29yZHMsIGRlY2xhcmUgd29yZHMnIGNvdW50ZXIgYW5kIHNob3cgbmF2XG4gICAgICAgIGlmICh0aGlzLmZvdW5kRWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zY3JpcHROYXZpZ2F0aW9uLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TWFya0luZGV4ID0gMTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhbnNjcmlwdE5hdigpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIHVwZGF0ZVRyYW5zY3JpcHROYXYgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIHVwZGF0ZSBuYXYgbnVtYmVyc1xuICAgICAgICB0aGlzLnRyYW5zY3JpcHROYXZpZ2F0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5qcy10cmFuc2NyaXB0LWNvdW50ZXJzJykuaW5uZXJIVE1MID0gYCR7dGhpcy5jdXJyZW50TWFya0luZGV4fS8ke3RoaXMuZm91bmRFbGVtZW50cy5sZW5ndGh9YDtcblxuICAgICAgICAvLyBmaW5kIGN1cnJlbnQgc2VsZWN0ZWQgaXRlbSBhbmQgc2Nyb2xsIHRvIGl0XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkTWFyayA9IHRoaXMuZm91bmRFbGVtZW50c1t0aGlzLmN1cnJlbnRNYXJrSW5kZXggLSAxXTtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0VsZW1lbnQoc2VsZWN0ZWRNYXJrLCB0cnVlKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25MYW5nQnV0dG9uQ2xpY2sgPSAoZSk6IHZvaWQgPT4ge1xuICAgICAgICAvLyBnZXQgYXR0cmlidXRlcyBmcm9tIGJ1dHRvbiB0byBzd2l0Y2ggbGFuZ3VhZ2VzXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGUuY3VycmVudFRhcmdldDtcbiAgICAgICAgY29uc3Qgb2xkU2x1ZyA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoYGRhdGEtJHshdGhpcy5pc01haW5MYW5nID8gJ2FsdGVybmF0ZScgOiAnbWFpbid9LWxhbmdgKTtcbiAgICAgICAgY29uc3QgbmV3U2x1ZyA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoYGRhdGEtJHt0aGlzLmlzTWFpbkxhbmcgPyAnYWx0ZXJuYXRlJyA6ICdtYWluJ30tbGFuZ2ApO1xuXG4gICAgICAgIC8vIHNldCBvbGQgbGFuZ3VhZ2UgYXMgYnV0dG9ucyd0ZXh0XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBvbGRTbHVnO1xuXG4gICAgICAgIHRoaXMuaXNNYWluTGFuZyA9ICF0aGlzLmlzTWFpbkxhbmc7XG5cbiAgICAgICAgLy8gaGlkZSBvbGQgbGFuZyB3cmFwcGVyIGFuZCBzaG93IHRoZSBuZXcgb25lXG4gICAgICAgIHRoaXMuYWN0aXZlTGFuZ3VhZ2VXcmFwLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuXG4gICAgICAgIGNvbnN0IG5ld0FjdGl2ZVdyYXAgPSBbLi4udGhpcy5sYW5nV3JhcHBlcnNdLmZpbmQod3JhcCA9PiB3cmFwLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5nJykgPT09IG5ld1NsdWcpO1xuICAgICAgICBuZXdBY3RpdmVXcmFwLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgICAgICB0aGlzLmFjdGl2ZUxhbmd1YWdlV3JhcCA9IG5ld0FjdGl2ZVdyYXA7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGNsZWFyTWFya2VkRWxlbWVudHMgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGlmICghdGhpcy5mb3VuZEVsZW1lbnRzLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBbLi4udGhpcy5mb3VuZEVsZW1lbnRzXS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5yZXBsYWNlV2l0aChVdGlscy5yZW1vdmVUYWdzKGVsZW0uaW5uZXJIVE1MKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmZvdW5kRWxlbWVudHMgPSBudWxsO1xuICAgIH07XG59XG4iLCJpbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCB7IFNjcm9sbFRyaWdnZXIgfSBmcm9tICdnc2FwL2Rpc3QvU2Nyb2xsVHJpZ2dlcic7XG5pbXBvcnQgeyBicmVha3BvaW50IH0gZnJvbSAnLi4vU2l0ZSc7XG5pbXBvcnQgU2Nyb2xsIGZyb20gJy4uL1Njcm9sbCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuLi9VdGlscyc7XG5pbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudEV2ZW50cyB9IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCB7IFB1c2hTdGF0ZXMgfSBmcm9tICcuLi9QdXNoU3RhdGVzJztcbmltcG9ydCB7IEZpbHRlckxldHRlcnMgfSBmcm9tICcuL0ZpbHRlckxldHRlcnMnO1xuaW1wb3J0IHsgY29tcG9uZW50cyB9IGZyb20gJy4uL0NsYXNzZXMnO1xuXG5pbnRlcmZhY2UgSUxvYWRTZXR0aW5ncyB7XG4gICAgY29udGVudFNlbGVjdG9yPzogc3RyaW5nO1xuICAgIGxpdmU/OiBib29sZWFuOyAvLyBsaXZlIHJlbG9hZCBvbiBmb3JtIGNoYW5nZSBldmVudHNcbiAgICBleHRyYT86IHN0cmluZzsgLy8gYWRkaXRpb25hbCBmb3JtIHRvIHBhcnNlXG4gICAgZXh0cmFNb2JpbGU/OiBzdHJpbmc7IC8vIGFkZGl0aW9uYWwgbW9iaWxlIGZvcm0gdG8gcGFyc2UgaW5zdGVhZCBvZiBleHRyYVxuICAgIHRvdGFsPzogc3RyaW5nOyAvLyB1cGRhdGluZyB0b3RhbCB2YWx1ZSBvbiBmaWx0ZXJzJyBjaGFuZ2VcbiAgICBmaWx0ZXJlZD86IHN0cmluZzsgLy8gc2hvdyBmaWx0ZXJlZCBpdGVtcycgbGlzdFxuICAgIHNjcm9sbFRvPzogc3RyaW5nOyAvLyBzY3JvbGwgdG8gZ2l2ZW4gZWxlbWVudCB3aGVuIHJlbG9hZGluZyBmaWx0ZXJzXG4gICAgdXBkYXRlQ3VycmVudFNvcnRpbmc/OiBib29sZWFuIC8vIG1hbnVhbGx5IHVwZGF0ZXMgY3VycmVudGx5IHNlbGVjdGVkIHNvcnRpbmcgb24gbW9iaWxlXG4gICAgZXh0ZXJuYWxMaW5rcz86IHN0cmluZzsgLy8gZXh0ZXJuYWwgbGlua3Mgd2l0aCBbZGF0YS1maWx0ZXJzXSBhdHRyaWJ1dGUgdG8gcmVsb2FkIGZpbHRlcnNcbn1cblxuXG4vKiBUaGlzIGNhbiBiZSB1c2VkIG9uIGZvcm0gb3IgYW55IG90aGVyIGVsZW1lbnRcbiAqIHRvIGxvYWQgaHRtbCBkYXRhIHRvIHNwZWNpZmllZCBjb250YWluZXIgKi9cblxuZXhwb3J0IGNsYXNzIExvYWQgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgcHJpdmF0ZSBpc0Zvcm06IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBpc1BlbmRpbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIGlzRmluaXNoZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBJTG9hZFNldHRpbmdzO1xuICAgIHByaXZhdGUgaXNDb250ZW50SGlkZGVuOiBib29sZWFuO1xuICAgIHByaXZhdGUgY29udGVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgdG90YWxFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGxpdmVUaW1lb3V0O1xuICAgIHByaXZhdGUgdmlld3NCdXR0b25zOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50PjtcbiAgICBwcml2YXRlIGZpbHRlcmVkRWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgcmVzZXRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgY29tcG9uZW50czogQXJyYXk8Q29tcG9uZW50PjtcblxuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5qcy1sb2FkLWNvbnRlbnQnLFxuICAgICAgICAgICAgbGl2ZTogZmFsc2UsXG4gICAgICAgIH07XG5cblxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih0aGlzLnNldHRpbmdzLCBKU09OLnBhcnNlKHRoaXMudmlldy5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3B0aW9ucycpKSk7XG5cbiAgICAgICAgdGhpcy5pc0Zvcm0gPSB0aGlzLnZpZXcudGFnTmFtZSA9PT0gJ0ZPUk0nO1xuICAgICAgICB0aGlzLmlzQ29udGVudEhpZGRlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNldHRpbmdzLmNvbnRlbnRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMudmlld3NCdXR0b25zID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXZpZXddJyk7XG4gICAgICAgIHRoaXMucmVzZXRCdXR0b24gPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXJlc2V0Jyk7XG5cbiAgICAgICAgaWYgKCFicmVha3BvaW50LmRlc2t0b3ApIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZ3JpZC12aWV3Jyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWxpc3QtdmlldycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudG90YWwpIHRoaXMudG90YWxFbGVtZW50ID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZXR0aW5ncy50b3RhbCk7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmZpbHRlcmVkKSB0aGlzLmZpbHRlcmVkRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3MuZmlsdGVyZWQpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlRmlsdGVyZWQoKTtcbiAgICAgICAgdGhpcy5iaW5kKCk7XG5cbiAgICAgICAgLy8gYmluZCBleHRlcm5hbCBsaW5rcyB3aXRoIFtkYXRhLWZpbHRlcl0gYXR0cmlidXRlIHRvIHJlbG9hZCBmaWx0ZXJzXG4gICAgICAgIC8vIHRoaXMuc2V0dGluZ3MuZXh0ZXJuYWxMaW5rcyAmJiB0aGlzLmJpbmRFeHRlcm5hbEZpbHRlcnMoKTtcblxuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgYmluZCgpOiB2b2lkIHtcblxuICAgICAgICBpZiAodGhpcy5pc0Zvcm0pIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLm9uU3VibWl0KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubGl2ZSkge1xuICAgICAgICAgICAgICAgIFsuLi50aGlzLnZpZXcucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHNlbGVjdCcpXS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmxpdmVUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGl2ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmlldy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnc3VibWl0JykpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbLi4udGhpcy52aWV3c0J1dHRvbnNdLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25WaWV3QnRuQ2xpY2spKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRCdXR0b24gJiYgdGhpcy5yZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25SZXNldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmb3IgPGE+IGVsZW1lbnRzXG4gICAgICAgICAgICB0aGlzLnZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gKHRoaXMudmlldyBhcyBIVE1MQW5jaG9yRWxlbWVudCkuaHJlZjtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbG9hZEZpbHRlcnModXJsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIGJpbmRFeHRlcm5hbEZpbHRlcnMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGV4dGVybmFsRmlsdGVyczogTm9kZUxpc3RPZjxIVE1MQW5jaG9yRWxlbWVudD4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2RhdGEtZmlsdGVyc10nKTtcblxuICAgICAgICBbLi4uZXh0ZXJuYWxGaWx0ZXJzXS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IGVsLmhyZWY7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWxvYWRGaWx0ZXJzKHVybCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBoaWRlQ29udGVudChkdXJhdGlvbiA9IDAuMjUpOiBQcm9taXNlPHZvaWQ+IHtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDb250ZW50SGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgZ3NhcC50byh0aGlzLmNvbnRlbnRFbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiAnc2luZScsXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpOiB2b2lkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb250ZW50SGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIHNob3dDb250ZW50ID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmlzQ29udGVudEhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBGaWx0ZXJMZXR0ZXJzLmNoZWNrQnV0dG9ucygpO1xuXG4gICAgICAgIGdzYXAuZnJvbVRvKHRoaXMuY29udGVudEVsZW1lbnQsIHsgb3BhY2l0eTogMCB9LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuNDUsXG4gICAgICAgICAgICBlYXNlOiAnc2luZScsXG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uVmlld0J0bkNsaWNrID0gKGUpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VGFyZ2V0OiBidXR0b24gfSA9IGU7XG4gICAgICAgIGNvbnN0IHsgdmlldyB9ID0gYnV0dG9uLmRhdGFzZXQ7XG4gICAgICAgIHRoaXMuaGlkZUNvbnRlbnQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbGlzdC12aWV3JywgJ2lzLWdyaWQtdmlldycpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKGBpcy0ke3ZpZXd9LXZpZXdgKTtcbiAgICAgICAgfSkudGhlbih0aGlzLnNob3dDb250ZW50KTtcbiAgICB9O1xuXG5cblxuICAgIHByb3RlY3RlZCBsb2FkKHVybCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoISF0aGlzLmlzUGVuZGluZyB8fCAhIXRoaXMuaXNGaW5pc2hlZCkgeyByZXR1cm47IH1cblxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMubGl2ZVRpbWVvdXQpO1xuICAgICAgICB0aGlzLmlzUGVuZGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy1wZW5kaW5nJyk7XG4gICAgICAgIFB1c2hTdGF0ZXMuY2hhbmdlUGF0aCh1cmwsIHRydWUpO1xuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmZpbHRlcmVkKSB0aGlzLnVwZGF0ZUZpbHRlcmVkKCk7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNjcm9sbFRvKSB0aGlzLnNjcm9sbFRvQ29udGFpbmVyKCk7XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sJyB9LFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5zZXR0aW5ncy5jb250ZW50U2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgbmV3RGl2LmlubmVySFRNTCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsTG9hZGVkQ29udGVudCA9IG5ld0Rpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5pbm5lckhUTUwgPSBlbExvYWRlZENvbnRlbnQ7XG5cblxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0b3RhbCBpbiBmaWx0ZXJzXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudG90YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWwgPSBuZXdEaXYucXVlcnlTZWxlY3Rvcih0aGlzLnNldHRpbmdzLnRvdGFsKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxFbGVtZW50LmlubmVySFRNTCA9IHRvdGFsO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKENvbXBvbmVudEV2ZW50cy5DSEFOR0UsIHRoaXMuY29udGVudEVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBlcnJvcjogJHtlcnJvcn1gLCBlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1wZW5kaW5nJyk7XG4gICAgICAgICAgICAgICAgLy8gd2l0aCB0aGlzIGZsYWcgZW5hYmxlZCwgc2Nyb2xsdHJpZ2dlciBpcyByZWZyZXNoZWQgaW4gb3RoZXIgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAhdGhpcy5zZXR0aW5ncy5zY3JvbGxUbyAmJiBTY3JvbGxUcmlnZ2VyLnJlZnJlc2goKTtcblxuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBoYXZlIGxpZ2h0Ym94IGxpbmtzXG4gICAgICAgICAgICAgICAgUHVzaFN0YXRlcy5iaW5kKHRoaXMuY29udGVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmluZEV4dGVybmFsRmlsdGVycygpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZENvbXBvbmVudHModGhpcy5jb250ZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb21wb25lbnRdJykpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGJ1aWxkQ29tcG9uZW50cyhjb21wb25lbnRzTGlzdDogTm9kZUxpc3QpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW107XG5cbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gWy4uLmNvbXBvbmVudHNMaXN0XS5tYXAoZWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IDxIVE1MRWxlbWVudD5lbDtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCAmJiBjb21wb25lbnRzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnM6IE9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmRhdGFzZXQub3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gSlNPTi5wYXJzZShlbGVtZW50LmRhdGFzZXQub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IG5ldyBjb21wb25lbnRzW25hbWVdKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cuY29uc29sZS53YXJuKCdUaGVyZSBpcyBubyBgJXNgIGNvbXBvbmVudCEnLCBuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgb25TdWJtaXQgPSAoZT8pOiB2b2lkID0+IHtcblxuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2FkUGF0aCA9IHRoaXMudmlldy5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpIHx8IHRoaXMudmlldy5kYXRhc2V0LmFwaSB8fCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cbiAgICAgICAgbGV0IGV4dHJhRm9ybXMgPSB0aGlzLnNldHRpbmdzLmV4dHJhID8gKFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2V0dGluZ3MuZXh0cmEpXSBhcyBIVE1MRm9ybUVsZW1lbnRbXSkgOiBudWxsO1xuICAgICAgICBjb25zdCBleHRyYUZvcm1zTW9iaWxlID0gdGhpcy5zZXR0aW5ncy5leHRyYU1vYmlsZVxuICAgICAgICAgICAgPyAoWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZXR0aW5ncy5leHRyYU1vYmlsZSldIGFzIEhUTUxGb3JtRWxlbWVudFtdKVxuICAgICAgICAgICAgOiBudWxsO1xuXG4gICAgICAgIGlmIChleHRyYUZvcm1zTW9iaWxlICYmIHdpbmRvdy5tYXRjaE1lZGlhKCcob3JpZW50YXRpb246IHBvcnRyYWl0KSBhbmQgKG1heC13aWR0aDogNjU5cHgpJykubWF0Y2hlcykge1xuICAgICAgICAgICAgZXh0cmFGb3JtcyA9IGV4dHJhRm9ybXNNb2JpbGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy51cGRhdGVDdXJyZW50U29ydGluZykge1xuICAgICAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWN1cnJlbnQtc29ydGluZycpO1xuXG4gICAgICAgICAgICBpZiAoaW5kaWNhdG9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc29ydGluZyA9IFV0aWxzLmdldFF1ZXJ5U3RyaW5nKFt0aGlzLnZpZXcgYXMgSFRNTEZvcm1FbGVtZW50XSkucmVwbGFjZSgnc29ydD0nLCAnJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbW9iaWxlLW1vZGFsLWJ1dHRvbicpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRpbmcuaW5jbHVkZXMoJyEnKSAmJiBhcnJvdykge1xuICAgICAgICAgICAgICAgICAgICBhcnJvdy5jbGFzc0xpc3QuYWRkKCdidXR0b24tLWludmVyc2VkJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgnYnV0dG9uLS1pbnZlcnNlZCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGluZGljYXRvci5pbm5lckhUTUwgPSBzb3J0aW5nLnJlcGxhY2UoJyEnLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IFV0aWxzLmdldFF1ZXJ5U3RyaW5nKFsuLi5leHRyYUZvcm1zLCB0aGlzLnZpZXcgYXMgSFRNTEZvcm1FbGVtZW50XSk7XG5cbiAgICAgICAgaWYgKGZvcm1EYXRhKSB7XG4gICAgICAgICAgICBsb2FkUGF0aCArPSBgPyR7Zm9ybURhdGF9YDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5yZWxvYWRGaWx0ZXJzKGxvYWRQYXRoKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgcmVsb2FkRmlsdGVycyA9IChwYXRoOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgUHJvbWlzZS5hbGwoW3RoaXMuaGlkZUNvbnRlbnQoKSwgdGhpcy5sb2FkKHBhdGgpXSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb250ZW50KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSB1cGRhdGVGaWx0ZXJlZCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgLy8gdXBkYXRpbmcgb24gZnJvbnQgc2lkZSBiZWNhdXNlIHJlc3BvbnNlIGlzIGFsd2F5cyBpbiBodG1sXG5cbiAgICAgICAgaWYgKCF0aGlzLmZpbHRlcmVkRWwpIHJldHVybjtcblxuICAgICAgICAvLyBhbHdheXMgZmluZCBpbnB1dHMgaW4gbWFpbiBmb3JtIHdpdGggZmlsdGVycywgc29tZXRpbWVzIGl0J3MgZXhlY3V0ZWQgaW4gb3V0ZXIgZm9ybVxuICAgICAgICBjb25zdCBzZWxlY3RlZElucHV0czogSFRNTElucHV0RWxlbWVudFtdID0gWy4uLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluLWZvcm0nKS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpXS5maWx0ZXIoaW5wdXQgPT4gaW5wdXQuY2hlY2tlZCk7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkSXRlbXMgPSBzZWxlY3RlZElucHV0cy5tYXAoaW5wdXQgPT4gYFxuICAgICAgICAgICAgPGxpIGNsYXNzPVwiZmlsdGVyZWRfX2xhYmVsXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIiR7aW5wdXQuaWR9XCI+JHtpbnB1dC5kYXRhc2V0Lm5hbWV9PGkgY2xhc3M9XCJpY29uLWNsb3NlXCI+PC9pPjwvbGFiZWw+XG4gICAgICAgICAgICA8L2xpPmApO1xuICAgICAgICB0aGlzLmZpbHRlcmVkRWwuaW5uZXJIVE1MID0gZmlsdGVyZWRJdGVtcy5qb2luKCcnKTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmluZEZpbHRlcmVkKCk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgYmluZEZpbHRlcmVkID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICAvLyB3aGVuIGxpdmU9dHJ1ZSwgdGhlcmUncyBubyBuZWVkIHRvIHRyaWdnZXIgc3VibWl0IG1hbnVhbGx5IC0gZm9ybSBzdWJtaXRzIG9uIGVhY2ggY2hhbmdlXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxpdmUpIHJldHVybjtcblxuICAgICAgICAvLyBmb3JjZSBmb3JtIHN1Ym1pdCBvbiBlYWNoIGZpbHRlcmVkIGxhYmVsIGNsaWNrXG4gICAgICAgIFsuLi50aGlzLmZpbHRlcmVkRWwucXVlcnlTZWxlY3RvckFsbCgnbGFiZWwnKV0uZm9yRWFjaChsYWJlbCA9PiB7XG4gICAgICAgICAgICBsYWJlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2snKTtcbiAgICAgICAgICAgICAgICAvLyBzdWJtaXQgbmVlZHMgdG8gYmUgdHJpZ2dlcmVkIG1hbnVhbGx5IGZvciBjbG9zaW5nIG1vZGFsIG9uIHN1Ym1pdCBldmVudFxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy52aWV3LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzdWJtaXQnKSksIDEwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgc2Nyb2xsVG9Db250YWluZXIgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3Muc2Nyb2xsVG8pIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoIWVsZW0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYGVsZW1lbnQgJHt0aGlzLnNldHRpbmdzLnNjcm9sbFRvfSBkb2Vzbid0IGV4aXN0IWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU2Nyb2xsLnNjcm9sbFRvKHtcbiAgICAgICAgICAgIGVsOiBlbGVtLFxuICAgICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKTogdm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgU2Nyb2xsVHJpZ2dlci5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25SZXNldCA9IChlKTogdm9pZCA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgWy4uLnRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpXS5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgeyBDaXJjbGUgfSBmcm9tICcuL0NpcmNsZSc7XG5cbmV4cG9ydCBjbGFzcyBMb2FkZXJFdmVudHMge1xuICAgIHB1YmxpYyBzdGF0aWMgTE9BREVEOiBzdHJpbmcgPSAnbG9hZGVkJztcbn1cblxuLy8gVEVNUCBmb3IgY3JlYXRpbmcgcHNldWRvIGxvYWQgcHJvZ3Jlc3NcbmNvbnN0IHN0ZXBzID0gWzEsIDUsIDEyLCA0NiwgOTldO1xuXG5leHBvcnQgY2xhc3MgTG9hZGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIHByaXZhdGUgY291bnRFbDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsb2dvV3JhcDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsaW5lRWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY291bnRlcldpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBjaXJjbGVDb21wOiBDaXJjbGU7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgdGhpcy5jaXJjbGVDb21wID0gbmV3IENpcmNsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbG9hZGVyLWNpcmNsZScpKTtcbiAgICAgICAgdGhpcy5jb3VudEVsID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1sb2FkZXItY291bnQnKTtcbiAgICAgICAgdGhpcy5sb2dvV3JhcCA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtbG9hZGVyLWxvZ28nKTtcbiAgICAgICAgdGhpcy5saW5lRWwgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLWxvYWRlci1saW5lJyk7XG4gICAgICAgIHRoaXMuY291bnRlcldpZHRoID0gdGhpcy5jb3VudEVsLmNsaWVudFdpZHRoO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb25zKHRydWUpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgb25TdGF0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgdGhpcy5jaXJjbGVDb21wPy5vblN0YXRlKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGFuaW1hdGUgPSAoKTogUHJvbWlzZTx2b2lkPiA9PiB0aGlzLnNldENvdW50ZXJMb29wKCk7XG5cblxuXG4gICAgcHVibGljIGNoZWNrID0gKGlzSG9tZVBhZ2U6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgaXNIb21lUGFnZSAmJiB0aGlzLmNpcmNsZUNvbXAuc2hvdygpO1xuICAgIH07XG5cblxuXG4gICAgcHVibGljIGhpZGUgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGdzYXAuZnJvbVRvKHRoaXMudmlldywgeyBvcGFjaXR5OiAxIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICAgICAgZWFzZTogJ3NpbmUnLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGVyLWhpZGRlbicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIHNldENvdW50ZXJMb29wID0gKCk6IFByb21pc2U8dm9pZD4gPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGxldCBjb3VudCA9IC0xO1xuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wbHVzcGx1c1xuICAgICAgICAgICAgY291bnQrKztcblxuICAgICAgICAgICAgaWYgKGNvdW50ID09PSBzdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnRyaWdnZXIoTG9hZGVyRXZlbnRzLkxPQURFRCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY291bnRFbC5pbm5lckhUTUwgPSBgJHtzdGVwc1tjb3VudF19JWA7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9ucyhmYWxzZSwgc3RlcHNbY291bnRdKTtcblxuICAgICAgICB9LCAxMDAwKTtcbiAgICB9KTtcblxuXG5cbiAgICBwcml2YXRlIHVwZGF0ZVBvc2l0aW9ucyA9IChmYXN0PzogYm9vbGVhbiwgdmFsdWU/OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q291bnRlcldpZHRoID0gdGhpcy5jb3VudEVsLmNsaWVudFdpZHRoO1xuXG4gICAgICAgIC8vIHByZXZlbnQgc2xpZGluZyBpbWFnZXMnIHdyYXBwZXIgYmFjayB3aGVuIG5ldyBjb3VudGVyIGlzIG5hcnJvd2VyIHRoYW4gcHJldmlvdXNcbiAgICAgICAgaWYgKG5ld0NvdW50ZXJXaWR0aCA+PSB0aGlzLmNvdW50ZXJXaWR0aCkge1xuICAgICAgICAgICAgdGhpcy5jb3VudGVyV2lkdGggPSBuZXdDb3VudGVyV2lkdGg7XG4gICAgICAgICAgICB0aGlzLmNpcmNsZUNvbXAudXBkYXRlUG9zaXRpb24odGhpcy5jb3VudGVyV2lkdGgsIGZhc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2dvV3JhcC5zdHlsZS5oZWlnaHQgPSBgJHt2YWx1ZX0lYDtcblxuICAgICAgICAvLyBsaW5lIHNob3VsZCBiZSB1cCB0byAxMDAlIGJ1dCBsb2FkZXIgaXMgY291bnRpbmcgdG8gOTlcbiAgICAgICAgdGhpcy5saW5lRWwuc3R5bGUuaGVpZ2h0ID0gYCR7dmFsdWUgPiA5NSA/IDEwMCA6IHZhbHVlfSVgO1xuICAgIH07XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5pbXBvcnQgbWFwYm94Z2wgZnJvbSAnbWFwYm94LWdsJztcbmltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwL2Rpc3QvZ3NhcCc7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJy4uL1V0aWxzJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCB7IGJyZWFrcG9pbnQsIGVhc2luZywgbG9jYWwgfSBmcm9tICcuLi9TaXRlJztcbmltcG9ydCB7IEF1ZGlvUGxheWVyIH0gZnJvbSAnLi9BdWRpb1BsYXllcic7XG5cbmV4cG9ydCBjb25zdCB0b2tlbiA9IGxvY2FsID8gJ3BrLmV5SjFJam9pYUhWdVkzZHZkSGtpTENKaElqb2lZMmx3Y1cwNGVtNTBNREExT1dreGJuQmxkWFZvTVhGcmRDSjkua1Fyby1uUEhSb3FQX1hLTExzUjNnQSdcbiAgICA6ICdway5leUoxSWpvaWFIVnVZM2R2ZEhraUxDSmhJam9pWTJsd2NXMDRlbTUwTURBMU9Xa3hibkJsZFhWb01YRnJkQ0o5LmtRcm8tblBIUm9xUF9YS0xMc1IzZ0EnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElNYXBTZXR0aW5ncyB7XG4gICAgbGF0OiBudW1iZXI7XG4gICAgbG5nOiBudW1iZXI7XG4gICAgem9vbT86IG51bWJlcjtcbiAgICBzdHlsZT86IG1hcGJveGdsLlN0eWxlIHwgc3RyaW5nO1xuICAgIHNjcm9sbD86IGJvb2xlYW47XG4gICAgdG9rZW4/OiBzdHJpbmc7XG4gICAgcmVuZGVyV29ybGRDb3BpZXM/OiBib29sZWFuO1xuICAgIGludGVyYWN0aXZlPzogYm9vbGVhbjtcbiAgICBwaXRjaDogbnVtYmVyO1xuICAgIGNsdXN0ZXJSYWRpdXM/OiBudW1iZXI7XG4gICAgY2x1c3Rlck1heFpvb20/OiBudW1iZXI7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBJTWFwSW50ZXJ2aWV3IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGR1cmF0aW9uOiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZztcbiAgICBzdGFydDogbnVtYmVyO1xufVxuXG5cbmV4cG9ydCBjbGFzcyBNYXAgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgcHJpdmF0ZSBtYXA6IG1hcGJveGdsLk1hcDtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBJTWFwU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBsb2NhdGlvbnM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgYWN0aXZlTG9jYXRpb246IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaW50ZXJ2aWV3c0xpc3Q6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgbWFya2VyOiBtYXBib3hnbC5NYXJrZXI7XG4gICAgcHJpdmF0ZSBwb3B1cDogbWFwYm94Z2wuUG9wdXA7XG4gICAgcHJpdmF0ZSBjb250ZW50SW5qZWN0ZWQ6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBhbGxCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgem9vbUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpc1pvb21pbmdJbiA9IHRydWU7XG5cblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlcih2aWV3KTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgICAgICAgbG5nOiAtMTIyLFxuICAgICAgICAgICAgbGF0OiAzNyxcbiAgICAgICAgICAgIHpvb206IDE2LFxuICAgICAgICAgICAgaW50ZXJhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICByZW5kZXJXb3JsZENvcGllczogdHJ1ZSxcbiAgICAgICAgICAgIHN0eWxlOiAnbWFwYm94Oi8vc3R5bGVzL2h1bmN3b3R5L2Nsb213bWV5NDAwYmwwMXBtaGo2bzVxNjEnLFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBwaXRjaDogNjAsXG4gICAgICAgICAgICBjbHVzdGVyUmFkaXVzOiA3MCxcbiAgICAgICAgICAgIGNsdXN0ZXJNYXhab29tOiAxOSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih0aGlzLnNldHRpbmdzLCBKU09OLnBhcnNlKHRoaXMudmlldy5nZXRBdHRyaWJ1dGUoJ29wdGlvbnMnKSkpO1xuICAgICAgICB0aGlzLmxvY2F0aW9ucyA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbG9jYXRpb24nKTtcbiAgICAgICAgdGhpcy5pbnRlcnZpZXdzTGlzdCA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtaW50ZXJ2aWV3cy1saXN0Jyk7XG4gICAgICAgIHRoaXMuY29udGVudEluamVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWxsQnV0dG9uID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1hbGwtYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuem9vbUJ1dHRvbiA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtem9vbS1idXR0b24nKTtcblxuICAgICAgICB0aGlzLmluaXQoKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVib3VuY2UoKCkgPT4gYnJlYWtwb2ludC5waG9uZSAmJiAhdGhpcy5jb250ZW50SW5qZWN0ZWQgJiYgdGhpcy5nZXRUYWJDb250ZW50KCkpKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBpbml0ID0gKCk6IFByb21pc2U8dm9pZD4gPT4gbmV3IFByb21pc2UocmVzb2x2ZUFsbCA9PiB7XG4gICAgICAgIG1hcGJveGdsLmFjY2Vzc1Rva2VuID0gdGhpcy5zZXR0aW5ncy50b2tlbjtcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tYXAnKSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnNldHRpbmdzLnN0eWxlLFxuICAgICAgICAgICAgY2VudGVyOiBbdGhpcy5zZXR0aW5ncy5sbmcsIHRoaXMuc2V0dGluZ3MubGF0XSxcbiAgICAgICAgICAgIHpvb206IHRoaXMuc2V0dGluZ3Muem9vbSxcbiAgICAgICAgICAgIHJlbmRlcldvcmxkQ29waWVzOiB0aGlzLnNldHRpbmdzLnJlbmRlcldvcmxkQ29waWVzLFxuICAgICAgICAgICAgaW50ZXJhY3RpdmU6IHRoaXMuc2V0dGluZ3MuaW50ZXJhY3RpdmUsXG4gICAgICAgICAgICBkcmFnUm90YXRlOiBmYWxzZSxcbiAgICAgICAgICAgIHRvdWNoWm9vbVJvdGF0ZTogZmFsc2UsXG4gICAgICAgICAgICBwaXRjaDogNjAsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1hcFByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMubWFwLm9uKCdsb2FkJywgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRhdGFQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICBQcm9taXNlLmFsbChbbWFwUHJvbWlzZSwgZGF0YVByb21pc2VdKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmVBbGwoKTtcbiAgICAgICAgICAgIHRoaXMub25Mb2FkKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG5cblxuICAgIHByaXZhdGUgb25Mb2FkID0gYXN5bmMoKSA9PiB7XG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICB0aGlzLmdvVG9Mb2NhdGlvbih0aGlzLmxvY2F0aW9uc1swXSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGJpbmQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMubG9jYXRpb25zLmZvckVhY2goKGxvY2F0aW9uOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRNYXJrZXIobG9jYXRpb24pO1xuICAgICAgICAgICAgbG9jYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uTG9jYXRpb25DbGljayk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgdGhpcy5tYXAub24oJ21vdmVlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1pvb21pbmdJbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9wdXAodGhpcy5hY3RpdmVMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZEludGVydmlld3ModGhpcy5hY3RpdmVMb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzWm9vbWluZ0luID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgdGhpcy5tYXAub24oJ21vdmVzdGFydCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9wdXA/LnJlbW92ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBicmVha3BvaW50LnBob25lICYmIHRoaXMuZ2V0VGFiQ29udGVudCgpO1xuXG4gICAgICAgIHRoaXMuYWxsQnV0dG9uICYmIHRoaXMuYWxsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkFsbEJ1dHRvbkNsaWNrKTtcbiAgICAgICAgdGhpcy56b29tQnV0dG9uICYmIHRoaXMuem9vbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25ab29tQnV0dG9uQ2xpY2spO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBzZXRNYXJrZXIgPSAobG9jYXRpb246IEhUTUxFbGVtZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvb3JkcyA9IGxvY2F0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS1jb29yZHMnKS5zcGxpdCgnLCcpLm1hcChlbCA9PiBwYXJzZUZsb2F0KGVsKSk7XG5cbiAgICAgICAgY29uc3QgZWxNYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZWxNYXJrZXIuY2xhc3NMaXN0LmFkZCgnbWFwX19tYXJrZXInKTtcbiAgICAgICAgZWxNYXJrZXIuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgbG9jYXRpb24uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xuICAgICAgICBlbE1hcmtlci5pbm5lckhUTUwgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI2M1wiIGhlaWdodD1cIjc2XCIgdmlld0JveD1cIjAgMCA2MyA3NlwiIGZpbGw9XCJub25lXCI+XG4gICAgICAgIDxjaXJjbGUgY3g9XCIzMS42MTQzXCIgY3k9XCIzMVwiIHI9XCIzMVwiIGZpbGw9XCIjNTQ4MDY4XCIvPlxuICAgICAgICA8Y2lyY2xlIGN4PVwiMzEuNjE0MlwiIGN5PVwiMzFcIiByPVwiMTkuNTE4NVwiIGZpbGw9XCIjQjc5MjU4XCIvPlxuICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMzEuNjE0MyA3LjczOTI2QzQ0LjMxNjggNy43MzkyNiA1NC42MTQzIDE4LjIwNDYgNTQuNjE0MyAzMS4xMTQzQzU0LjYxNDMgNDkuMjE5MyAzOS4wNTU0IDUzLjk3OTMgMzEuNjE0MyA3NS43MzkzQzI1LjUyNiA1My45NzkzIDguNjE0MjYgNDcuMTc5MyA4LjYxNDI2IDMxLjExNDNDOC42MTQyNiAxOC4yMDQ2IDE4LjkxMTcgNy43MzkyNiAzMS42MTQzIDcuNzM5MjZaXCIgZmlsbD1cIiNCNzkyNThcIi8+XG4gICAgICAgIDxjaXJjbGUgY3g9XCIzMS42MTQzXCIgY3k9XCIzMC43MzkzXCIgcj1cIjE2XCIgZmlsbD1cIiNEQkI5QjFcIi8+XG4gICAgICAgIDwvc3ZnPmA7XG5cblxuICAgICAgICBjb25zdCBtYXJrZXIgPSBuZXcgbWFwYm94Z2wuTWFya2VyKHsgZWxlbWVudDogZWxNYXJrZXIgfSlcbiAgICAgICAgICAgIC5zZXRMbmdMYXQoW2Nvb3Jkc1sxXSwgY29vcmRzWzBdXSlcbiAgICAgICAgICAgIC5hZGRUbyh0aGlzLm1hcCk7XG5cbiAgICAgICAgbWFya2VyLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNab29taW5nSW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vbk1hcmtlckNsaWNrKG1hcmtlci5nZXRFbGVtZW50KCkuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgc2V0UG9wdXAgPSAobG9jYXRpb246IEhUTUxFbGVtZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGlmICghbG9jYXRpb24pIHJldHVybjtcblxuICAgICAgICBjb25zdCBjb29yZHMgPSBsb2NhdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29vcmRzJykuc3BsaXQoJywnKS5tYXAoZWwgPT4gcGFyc2VGbG9hdChlbCkpO1xuICAgICAgICB0aGlzLnBvcHVwID0gbmV3IG1hcGJveGdsLlBvcHVwKHsgb2Zmc2V0OiAyNSB9KVxuICAgICAgICAgICAgLnNldExuZ0xhdChbY29vcmRzWzFdLCBjb29yZHNbMF1dKVxuICAgICAgICAgICAgLnNldEhUTUwoYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX3Rvb2x0aXAgbWFwX190b29sdGlwLS1tYXJrZXJcIj4ke2xvY2F0aW9uLmRhdGFzZXQudGl0bGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hcF9fdG9vbHRpcC1sb2NhdGlvblwiPiR7bG9jYXRpb24uZGF0YXNldC5sb2NhdGlvbn08L2Rpdj5cbiAgICAgICAgICAgIGApXG4gICAgICAgICAgICAuYWRkVG8odGhpcy5tYXApO1xuICAgICAgICB0aGlzLnBvcHVwLnRvZ2dsZUNsYXNzTmFtZSgnaXMtYWN0aXZlJyk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uTWFya2VyQ2xpY2sgPSAoaWQ6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IFsuLi50aGlzLmxvY2F0aW9uc10uZmlsdGVyKGxvYyA9PiBsb2MuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IGlkKVswXTtcbiAgICAgICAgdGhpcy5nb1RvTG9jYXRpb24obG9jYXRpb24pO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbkFsbEJ1dHRvbkNsaWNrID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmZpdEJvdW5kcygpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBmaXRCb3VuZHMgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IG5ldyBtYXBib3hnbC5MbmdMYXRCb3VuZHMoKTtcblxuICAgICAgICB0aGlzLmxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29vcmRzID0gbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29vcmRzJykuc3BsaXQoJywnKS5tYXAoZWwgPT4gcGFyc2VGbG9hdChlbCkpO1xuICAgICAgICAgICAgYm91bmRzLmV4dGVuZChbY29vcmRzWzFdLCBjb29yZHNbMF1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcywge1xuICAgICAgICAgICAgcGFkZGluZzogNTAsXG4gICAgICAgICAgICBtYXhab29tOiAxNixcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uWm9vbUJ1dHRvbkNsaWNrID0gKCk6IHZvaWQgPT4gdGhpcy5nb1RvTG9jYXRpb24odGhpcy5hY3RpdmVMb2NhdGlvbik7XG5cblxuXG4gICAgcHJpdmF0ZSBvbkxvY2F0aW9uQ2xpY2sgPSAoZTogRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5nb1RvTG9jYXRpb24obG9jYXRpb24pO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBnb1RvTG9jYXRpb24gPSAobG9jYXRpb246IEhUTUxFbGVtZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLm1hcmtlcikgdGhpcy5tYXJrZXIucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMubG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgICBsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZS1sb2NhdGlvbicpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsb2NhdGlvbi5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgbG9jYXRpb24ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUtbG9jYXRpb24nKTtcbiAgICAgICAgdGhpcy5yZW1vdmVDdXJyZW50SW50ZXJ2aWV3cygpO1xuXG4gICAgICAgIGNvbnN0IGNvb3JkcyA9IGxvY2F0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS1jb29yZHMnKS5zcGxpdCgnLCcpLm1hcChlbCA9PiBwYXJzZUZsb2F0KGVsKSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRab29tID0gdGhpcy5tYXAuZ2V0Wm9vbSgpO1xuICAgICAgICBjb25zdCB6b29tID0gY3VycmVudFpvb20gPCAxNiA/IDE2IDogY3VycmVudFpvb207XG5cbiAgICAgICAgdGhpcy5tYXAuZmx5VG8oe1xuICAgICAgICAgICAgY2VudGVyOiBbY29vcmRzWzFdLCBjb29yZHNbMF1dLFxuICAgICAgICAgICAgem9vbSxcbiAgICAgICAgICAgIHBpdGNoOiB0aGlzLnNldHRpbmdzLnBpdGNoLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hY3RpdmVMb2NhdGlvbiA9IGxvY2F0aW9uO1xuXG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGdldFRhYkNvbnRlbnQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMubG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb29yZHMgPSBsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb29yZHMnKS5zcGxpdCgnLCcpLm1hcChlbCA9PiBwYXJzZUZsb2F0KGVsKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5tYXBib3guY29tL3N0eWxlcy92MS9odW5jd290eS9jbG9td21leTQwMGJsMDFwbWhqNm81cTYxL3N0YXRpYy8ke2Nvb3Jkc1sxXX0sJHtjb29yZHNbMF19LCR7dGhpcy5tYXAuZ2V0Wm9vbSgpfSwwLCR7dGhpcy5tYXAuZ2V0UGl0Y2goKX19LzQwMHg0MDA/YWNjZXNzX3Rva2VuPSR7dG9rZW59YDtcbiAgICAgICAgICAgIGNvbnN0IGltZyA9IGA8aW1nIHNyYz0nJHt1cmx9JyBjbGFzcz0nbWFwLWltYWdlIGpzLW1hcC1pbWFnZScgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX3BpblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX3Rvb2x0aXAgbWFwX190b29sdGlwLS1tYXJrZXJcIj4ke2wuZGF0YXNldC50aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjYzXCIgaGVpZ2h0PVwiNzZcIiB2aWV3Qm94PVwiMCAwIDYzIDc2XCIgZmlsbD1cIm5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjMxLjYxNDNcIiBjeT1cIjMxXCIgcj1cIjMxXCIgZmlsbD1cIiM1NDgwNjhcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIzMS42MTQyXCIgY3k9XCIzMVwiIHI9XCIxOS41MTg1XCIgZmlsbD1cIiNCNzkyNThcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0zMS42MTQzIDcuNzM5MjZDNDQuMzE2OCA3LjczOTI2IDU0LjYxNDMgMTguMjA0NiA1NC42MTQzIDMxLjExNDNDNTQuNjE0MyA0OS4yMTkzIDM5LjA1NTQgNTMuOTc5MyAzMS42MTQzIDc1LjczOTNDMjUuNTI2IDUzLjk3OTMgOC42MTQyNiA0Ny4xNzkzIDguNjE0MjYgMzEuMTE0M0M4LjYxNDI2IDE4LjIwNDYgMTguOTExNyA3LjczOTI2IDMxLjYxNDMgNy43MzkyNlpcIiBmaWxsPVwiI0I3OTI1OFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjMxLjYxNDNcIiBjeT1cIjMwLjczOTNcIiByPVwiMTZcIiBmaWxsPVwiI0RCQjlCMVwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFwX190b29sdGlwLWxvY2F0aW9uXCI+JHtsLmRhdGFzZXQubG9jYXRpb259PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gO1xuXG4gICAgICAgICAgICBsLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLW1hcC1pbWFnZS13cmFwcGVyJyk/Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaW1nKTtcblxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2aWV3czogSU1hcEludGVydmlld1tdID0gSlNPTi5wYXJzZShsLmRhdGFzZXQuaW50ZXJ2aWV3cykgYXMgSU1hcEludGVydmlld1tdO1xuICAgICAgICAgICAgWy4uLmludGVydmlld3NdLmZvckVhY2goaW50ZXJ2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZpZXdIdG1sID0gYDxsaSBjbGFzcz1cIm1hcF9faW50ZXJ2aWV3XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtYXBfX2J1dHRvblwiIGRhdGEtYXVkaW8tcGxheWVyPSR7aW50ZXJ2aWV3LmlkfT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hcF9faW50ZXJ2aWV3LXdyYXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX2ludGVydmlldy1kYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hcF9faW50ZXJ2aWV3LXRpdGxlXCI+JHtpbnRlcnZpZXcudGl0bGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hcF9faW50ZXJ2aWV3LWR1cmF0aW9uXCI+JHtpbnRlcnZpZXcuZHVyYXRpb259PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX2ludGVydmlldy1idXR0b25cIj5QbGF5IDxicj4gaW50ZXJ2aWV3PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+YDtcblxuICAgICAgICAgICAgICAgIGwucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtaW50ZXJ2aWV3cy1pbm5lci1saXN0Jyk/Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaW50ZXJ2aWV3SHRtbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgQXVkaW9QbGF5ZXIuaW5zdGFuY2UuYmluZEJ1dHRvbnMoKTtcbiAgICAgICAgdGhpcy5jb250ZW50SW5qZWN0ZWQgPSB0cnVlO1xuICAgIH07XG5cblxuICAgIHByaXZhdGUgcmVtb3ZlQ3VycmVudEludGVydmlld3MgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGludGVydmlld3MgPSB0aGlzLmludGVydmlld3NMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG4gICAgICAgIGlmICghaW50ZXJ2aWV3cykgcmV0dXJuO1xuXG4gICAgICAgIFsuLi5pbnRlcnZpZXdzXS5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGdzYXAudG8oaXRlbSwge1xuICAgICAgICAgICAgICAgIHk6IChpdGVtLmNsaWVudEhlaWdodCAqIDIpICogaW50ZXJ2aWV3cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcm90YXRlOiBpbmRleCAlIDIgPT09IDAgPyAxNSA6IC0xNSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgICAgIGRlbGF5OiBpbmRleCAqIDAuMSxcbiAgICAgICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBhbGwgdHdlZW5zXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gaW50ZXJ2aWV3cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVydmlld3NMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgYnVpbGRJbnRlcnZpZXdzID0gKGxvY2F0aW9uOiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xuICAgICAgICAvLyBlbXB0eSBleGlzdGluZyBsaXN0IGl0ZW1zIGZpcnN0XG4gICAgICAgIHRoaXMuaW50ZXJ2aWV3c0xpc3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgY29uc3QgaW50ZXJ2aWV3czogSU1hcEludGVydmlld1tdID0gSlNPTi5wYXJzZShsb2NhdGlvbi5kYXRhc2V0LmludGVydmlld3MpIGFzIElNYXBJbnRlcnZpZXdbXTtcbiAgICAgICAgWy4uLmludGVydmlld3NdLmZvckVhY2goaW50ZXJ2aWV3ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGludGVydmlld0h0bWwgPSBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJtYXBfX2ludGVydmlld1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtYXBfX2J1dHRvblwiIGRhdGEtYXVkaW8tcGxheWVyPVwiJHtpbnRlcnZpZXcuaWR9XCIgZGF0YS1zdGFydD1cIiR7aW50ZXJ2aWV3LnN0YXJ0fVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX2ludGVydmlldy13cmFwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX2ludGVydmlldy1kYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFwX19pbnRlcnZpZXctdGl0bGVcIj4ke2ludGVydmlldy50aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXBfX2ludGVydmlldy1kdXJhdGlvblwiPiR7aW50ZXJ2aWV3LmR1cmF0aW9ufTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hcF9faW50ZXJ2aWV3LWJ1dHRvblwiPlBsYXkgPGJyPiBpbnRlcnZpZXc8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+YDtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2aWV3c0xpc3QuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBpbnRlcnZpZXdIdG1sKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgQXVkaW9QbGF5ZXIuaW5zdGFuY2UuYmluZEJ1dHRvbnMoKTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBTY3JvbGwgZnJvbSAnLi4vU2Nyb2xsJztcblxuXG5cbmV4cG9ydCBjbGFzcyBNb2RhbCBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBwcml2YXRlIHRyaWdnZXJCdG46IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgY2xvc2VyQnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIGZvcm06IEhUTUxGb3JtRWxlbWVudDtcbiAgICBwcml2YXRlIGlzT3BlbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgdGw6IGdzYXAuY29yZS5UaW1lbGluZTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlcih2aWV3KTtcblxuICAgICAgICB0aGlzLnRyaWdnZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbYXJpYS1jb250cm9scz1cIiR7dGhpcy52aWV3LmlkfVwiXWApO1xuICAgICAgICB0aGlzLmNsb3NlckJ0biA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtbW9kYWwtY2xvc2UnKTtcbiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcblxuICAgICAgICB0aGlzLmJpbmQoKTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIGJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudHJpZ2dlckJ0biAmJiB0aGlzLnRyaWdnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVHJpZ2dlckNsaWNrKTtcbiAgICAgICAgdGhpcy5mb3JtICYmIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLmNsb3NlKTtcbiAgICAgICAgdGhpcy5jbG9zZXJCdG4gJiYgdGhpcy5jbG9zZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUaW1lbGluZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtbW9kYWwtd3JhcCcpO1xuICAgICAgICBjb25zdCBiYXI6IEhUTUxFbGVtZW50ID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tb2RhbC13cmFwLWJhcicpO1xuXG4gICAgICAgIGlmICghd3JhcHBlcikgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudGwgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICAgIGVhc2U6ICdub25lJyxcbiAgICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiB3cmFwcGVyLFxuICAgICAgICAgICAgICAgIHNjcm9sbGVyOiB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgaW52YWxpZGF0ZU9uUmVmcmVzaDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdGFydDogKCkgPT4gYHRvcCAke2Jhcj8ub2Zmc2V0SGVpZ2h0ID8/IDB9cHhgLFxuICAgICAgICAgICAgICAgIG9uVG9nZ2xlOiBzZWxmID0+IHRoaXMudmlldy5jbGFzc0xpc3QudG9nZ2xlKCdpcy1zY3JvbGxlZCcsIHNlbGYuaXNBY3RpdmUpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIGNsZWFudXBUaW1lbGluZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy50bC5raWxsKCk7XG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1zY3JvbGxlZCcpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvblRyaWdnZXJDbGljayA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5pc09wZW4gPyB0aGlzLmNsb3NlKCkgOiB0aGlzLm9wZW4oKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgY2xvc2UgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy1vcGVuJyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLW9wZW4tbW9kYWwnKTtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbGVhbnVwVGltZWxpbmUoKTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb3BlbiA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLW9wZW4nKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoYXMtb3Blbi1tb2RhbCcpO1xuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMuY3JlYXRlVGltZWxpbmUoKTtcblxuICAgICAgICBTY3JvbGwuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgZWw6IHRoaXMudmlldyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB3aW5kb3cubWF0Y2hNZWRpYSgnKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpJykubWF0Y2hlcyA/IDAuNzUgOiAwLFxuICAgICAgICAgICAgZWFzZTogJ3NpbmUub3V0JyxcbiAgICAgICAgICAgIG9mZnNldFk6IHdpbmRvdy5tYXRjaE1lZGlhKCcob3JpZW50YXRpb246IGxhbmRzY2FwZSknKS5tYXRjaGVzID8gdGhpcy52aWV3LnBhcmVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IDogLTEsXG4gICAgICAgIH0pO1xuICAgIH07XG59XG4iLCJpbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCB7IFNjcm9sbFRyaWdnZXIgfSBmcm9tICdnc2FwL2Rpc3QvU2Nyb2xsVHJpZ2dlcic7XG5pbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudEV2ZW50cyB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ29tcG9uZW50JztcbmltcG9ydCB7IGVhc2luZyB9IGZyb20gJy4uL1NpdGUnO1xuaW1wb3J0IHsgUHVzaFN0YXRlcyB9IGZyb20gJy4uL1B1c2hTdGF0ZXMnO1xuaW1wb3J0IFdpZGdldHMgZnJvbSAnLi4vd2lkZ2V0cy9BbGwnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1vcmVTZXR0aW5ncyB7XG4gICAgY29udGVudFNlbGVjdG9yPzogc3RyaW5nO1xuICAgIGl0ZW1TZWxlY3Rvcj86IHN0cmluZztcbiAgICBpbmZpbml0ZT86IGJvb2xlYW47XG4gICAgdXBkYXRlVVJMPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIE1vcmUgZXh0ZW5kcyBDb21wb25lbnQge1xuXG5cbiAgICBwcml2YXRlIHNldHRpbmdzOiBJTW9yZVNldHRpbmdzO1xuICAgIHByaXZhdGUgY29udGVudEVsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHBlbmRpbmc6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBzY3JvbGxUcmlnZ2VyOiBTY3JvbGxUcmlnZ2VyO1xuICAgIHByaXZhdGUgbGlua0VsOiBIVE1MQW5jaG9yRWxlbWVudDtcblxuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgdGhpcy5saW5rRWwgPSAodGhpcy52aWV3Lm5vZGVOYW1lID09PSAnQScpID8gdGhpcy52aWV3IGFzIEhUTUxBbmNob3JFbGVtZW50IDogdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAnbGknLFxuICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxuICAgICAgICAgICAgdXBkYXRlVVJMOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLkpTT04ucGFyc2UodGhpcy52aWV3LmRhdGFzZXQub3B0aW9ucyksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jb250ZW50RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3MuY29udGVudFNlbGVjdG9yKTtcblxuICAgICAgICAvLyBjaGVjayBtdXN0LWhhdmUgb3B0aW9uczpcbiAgICAgICAgY29uc29sZS5hc3NlcnQoISF0aGlzLmNvbnRlbnRFbCwgJ1RoZXJlIGlzIG5vIHdyYXAgZWxlbWVudCB0byBsb2FkIG1vcmUgY29udGVudCEnLCB0cnVlKTtcblxuICAgICAgICBpZiAoIXRoaXMuY29udGVudEVsKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGJpbmQgY2xpY2s6XG4gICAgICAgIHRoaXMubGlua0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcblxuICAgICAgICAvLyBiaW5kIGluZmluaXRlIHNjcm9sbDpcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaW5maW5pdGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVHJpZ2dlciA9IFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgc3RhcnQ6ICdib3R0b20gYm90dG9tJyxcbiAgICAgICAgICAgICAgICBvbkVudGVyOiAoKSA9PiB0aGlzLmxvYWQoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNjcm9sbFRyaWdnZXI/LmtpbGwoKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgICAgICAgaWYgKHRoaXMucGVuZGluZykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMubGlua0VsLmhyZWY7XG4gICAgICAgIGNvbnN0IHRpZSA9IHVybC5pbmRleE9mKCc/JykgPCAwID8gJz8nIDogJyYnO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgcGFydGlhbDogJ3RydWUnIH0pO1xuXG4gICAgICAgIHRoaXMucGVuZGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy1kb2luZy1yZXF1ZXN0Jyk7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncy51cGRhdGVVUkwgJiYgUHVzaFN0YXRlcy5jaGFuZ2VQYXRoKHVybCk7XG5cbiAgICAgICAgLy8gc2VuZCBBUEkgcmVxdWVzdFxuICAgICAgICBmZXRjaCh1cmwgKyB0aWUgKyBwYXJhbXMsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLnNldHRpbmdzLmNvbnRlbnRTZWxlY3RvcjtcblxuICAgICAgICAgICAgICAgIC8vIG1hcmsgZXhpc3RpbmcgaXRlbXMgdG8gbm90IGFuaW1hdGUgdGhlbSBsYXRlclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbXMgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2V0dGluZ3MuaXRlbVNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICBbLi4uZXhpc3RpbmdJdGVtc10ubWFwKGkgPT4gaS5jbGFzc0xpc3QuYWRkKCdpcy1leGlzdGluZycpKTtcblxuICAgICAgICAgICAgICAgIC8vIHN0b3JlIGN1cnJlbnQgaGVpZ2h0XG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jb250ZW50RWwuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgLy8gYWRkIG5ldyBodG1sIGZyb20gcmVzcG9uc2UgdG8gY29udGVudCBlbGVtZW50XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgbmV3RGl2LmlubmVySFRNTCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsTG9hZGVkQ29udGVudCA9IG5ld0Rpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBlbExvYWRlZENvbnRlbnQpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGJ1dHRvblxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy52aWV3LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdCdXR0b246IEhUTUxMaW5rRWxlbWVudCA9IG5ld0Rpdi5xdWVyeVNlbGVjdG9yKGlkID8gYCMke2lkfWAgOiAnW2RhdGEtY29tcG9uZW50PVwiTW9yZVwiXSBhJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VVJMID0gbmV3QnV0dG9uPy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3QnV0dG9uICYmIG5ld1VSTCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rRWwuc2V0QXR0cmlidXRlKCdocmVmJywgbmV3VVJMKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUcmlnZ2VyPy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBtb3JlIGxpbmsgaW5zaWRlIGRpdiBoZXJlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRyaWdnZXI/LmtpbGwoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoQ29tcG9uZW50RXZlbnRzLkNIQU5HRSwgdGhpcy5jb250ZW50RWwpO1xuXG4gICAgICAgICAgICAgICAgLy8gbmV3IGl0ZW1zJyBhbmltYXRpb24gLSBleGNsdWRpbmcgaXRlbXMgdGhhdCB3ZXJlIGFkZGVkIHRvIGNvbnRlbnQgZWFybGllclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLnNldHRpbmdzLml0ZW1TZWxlY3Rvcn06bm90KC5pcy1leGlzdGluZylgKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0bCA9IGdzYXAudGltZWxpbmUoKTtcbiAgICAgICAgICAgICAgICBbLi4uaXRlbXNdLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRsLmZyb20oaXRlbSwgeyBvcGFjaXR5OiAwLCBkdXJhdGlvbjogMC41LCB5OiA1MCwgZWFzZTogZWFzaW5nIH0sIGluZGV4ICogMC4xKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGFuaW1hdGUgaGVpZ2h0XG4gICAgICAgICAgICAgICAgZ3NhcC5mcm9tVG8odGhpcy5jb250ZW50RWwsIHsgaGVpZ2h0IH0sIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IGVhc2luZyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgZXJyb3I6ICR7ZXJyb3J9YCwgZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZG9pbmctcmVxdWVzdCcpO1xuICAgICAgICAgICAgICAgIC8vIGJpbmQgd2lkZ2V0c1xuICAgICAgICAgICAgICAgIFdpZGdldHMuYmluZCgpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBvbkNsaWNrID0gKGU6IEV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IHBhcnNlVG9UaW1lIH0gZnJvbSAnLi9QbGF5ZXIudXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyVGltZSB7XG5cblxuICAgIHByaXZhdGUgZHVyYXRpb25UaW1lRWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY3VycmVudFRpbWVFbDogSFRNTEVsZW1lbnQ7XG5cblxuXG4gICAgY29uc3RydWN0b3IocGxheWVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY3VycmVudFRpbWVFbCA9IHBsYXllckVsLnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItdGltZScpO1xuICAgICAgICB0aGlzLmR1cmF0aW9uVGltZUVsID0gcGxheWVyRWwucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1kdXJhdGlvbicpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZUVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5kdXJhdGlvblRpbWVFbCA9IG51bGw7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyB1cGRhdGUobWV0YWRhdGE6IHsgZHVyYXRpb246IG51bWJlciwgY3VycmVudD86IG51bWJlciB9LCBpc0xvbmc/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmR1cmF0aW9uVGltZUVsKSB7XG4gICAgICAgICAgICB0aGlzLmR1cmF0aW9uVGltZUVsLmlubmVyVGV4dCA9IHBhcnNlVG9UaW1lKG1ldGFkYXRhLmR1cmF0aW9uLCBpc0xvbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lRWwgJiYgdHlwZW9mIG1ldGFkYXRhLmN1cnJlbnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lRWwuaW5uZXJUZXh0ID0gcGFyc2VUb1RpbWUobWV0YWRhdGEuY3VycmVudCB8fCAwLCBpc0xvbmcpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2Nyb2xsVHJpZ2dlciB9IGZyb20gJ2dzYXAvZGlzdC9TY3JvbGxUcmlnZ2VyJztcblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vQ29tcG9uZW50JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uLy4uL1V0aWxzJztcbmltcG9ydCB7IElQbGF5ZXJTZXR0aW5ncywgUGxheWVyRXZlbnRzLCBQbGF5ZXJTaXplIH0gZnJvbSAnLi9QbGF5ZXIudHlwZXMnO1xuaW1wb3J0IHsgUGxheWVyVGltZWxpbmUsIFBsYXllclRpbWVsaW5lRXZlbnRzIH0gZnJvbSAnLi9QbGF5ZXJUaW1lbGluZSc7XG5pbXBvcnQgeyBQbGF5ZXJQb3B1cHMgfSBmcm9tICcuL1BsYXllclBvcHVwcyc7XG5pbXBvcnQgeyBQbGF5ZXJUaW1lIH0gZnJvbSAnLi9QbGF5ZXIuVGltZSc7XG5pbXBvcnQgeyBQbGF5ZXJQb3N0ZXIgfSBmcm9tICcuL1BsYXllclBvc3Rlcic7XG5pbXBvcnQgeyBQbGF5ZXJWb2x1bWUsIFBsYXllclZvbHVtZUV2ZW50cyB9IGZyb20gJy4vUGxheWVyVm9sdW1lJztcbmltcG9ydCB7IFBsYXllckZ1bGxzY3JlZW4sIFBsYXllckZ1bGxzY3JlZW5FdmVudHMgfSBmcm9tICcuL1BsYXllckZ1bGxzY3JlZW4nO1xuaW1wb3J0IHsgVmlkZW9DYXB0aW9ucyB9IGZyb20gJy4vVmlkZW9DYXB0aW9ucyc7XG5pbXBvcnQgeyBQbGF5ZXJTdG9yYWdlIH0gZnJvbSAnLi9WaWRlby50eXBlcyc7XG5pbXBvcnQgeyBQbGF5ZXJTZXR0aW5ncywgUGxheWVyU2V0dGluZ3NFdmVudHMgfSBmcm9tICcuL1BsYXllclNldHRpbmdzJztcbmltcG9ydCB7IFRlbXBsYXRlcywgVGVtcGxhdGVOYW1lcyB9IGZyb20gJy4uLy4uL3RlbXBsYXRlcy9UZW1wbGF0ZXMnO1xuaW1wb3J0IHsgUHVzaFN0YXRlcyB9IGZyb20gJy4uLy4uL1B1c2hTdGF0ZXMnO1xuXG5cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBsYXllciBleHRlbmRzIENvbXBvbmVudCB7XG5cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICAgIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2VzOiB7IFtrZXk6IHN0cmluZ106IFBsYXllciB9ID0ge307XG5cblxuICAgIC8vIHBhdXNlIGFsbCBpbnN0YW5jZXMgb2YgUGxheWVyIGNsYXNzOlxuICAgIHN0YXRpYyBwYXVzZUFsbChvbWl0VUlEPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBmb3IgKGNvbnN0IHVpZCBpbiBQbGF5ZXIuaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9taXRVSUQgPT09ICd1bmRlZmluZWQnIHx8IG9taXRVSUQgIT09IHVpZCkge1xuICAgICAgICAgICAgICAgIFBsYXllci5pbnN0YW5jZXNbdWlkXS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBwYXVzZSBhbGwgaW5zdGFuY2VzIG9mIFBsYXllciBjbGFzcyBpbnNpZGUgZWxlbWVudDpcbiAgICBzdGF0aWMgcGF1c2VBbGxJbihlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBndWFyZC1mb3ItaW5cbiAgICAgICAgZm9yIChjb25zdCB1aWQgaW4gUGxheWVyLmluc3RhbmNlcykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IFBsYXllci5pbnN0YW5jZXNbdWlkXTtcbiAgICAgICAgICAgIGlmIChlbC5jb250YWlucyhpdGVtLnZpZXcpKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgdXNlclBhdXNlZCA9IGZhbHNlO1xuXG4gICAgcHJvdGVjdGVkIHVpZDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBtZWRpYTogSFRNTEVsZW1lbnQ7XG4gICAgcHJvdGVjdGVkIGlzTG9hZGVkOiBib29sZWFuO1xuICAgIHByb3RlY3RlZCBpc1JlYWR5ID0gZmFsc2U7XG4gICAgcHJvdGVjdGVkIHNldHRpbmdzOiBJUGxheWVyU2V0dGluZ3M7XG4gICAgcHJvdGVjdGVkIHdhc1BhdXNlZCA9IGZhbHNlO1xuICAgIHByb3RlY3RlZCBzdDogU2Nyb2xsVHJpZ2dlcjtcblxuICAgIHByb3RlY3RlZCB1aToge1xuICAgICAgICBwb3N0ZXI/OiBQbGF5ZXJQb3N0ZXI7XG4gICAgICAgIHRpbWU/OiBQbGF5ZXJUaW1lO1xuICAgICAgICB0aW1lbGluZT86IFBsYXllclRpbWVsaW5lO1xuICAgICAgICBwb3B1cHM/OiBQbGF5ZXJQb3B1cHM7XG4gICAgICAgIHZvbHVtZT86IFBsYXllclZvbHVtZTtcbiAgICAgICAgc2V0dGluZ3M/OiBQbGF5ZXJTZXR0aW5ncztcbiAgICAgICAgY2FwdGlvbnM/OiBWaWRlb0NhcHRpb25zO1xuICAgICAgICBmdWxsc2NyZWVuPzogUGxheWVyRnVsbHNjcmVlbjtcbiAgICAgICAgdG9nZ2xlQnRuPzogSFRNTEVsZW1lbnQsXG4gICAgICAgIHBsYXlQYXVzZUJ0bj86IEhUTUxFbGVtZW50LFxuICAgICAgICBib3R0b21QYW5lbD86IEhUTUxFbGVtZW50LFxuICAgICAgICB0aHVtYm5haWw/OiBIVE1MRWxlbWVudDtcbiAgICAgICAgbWluaW1pemU/OiBIVE1MRWxlbWVudDtcbiAgICAgICAgcGxheWVyQmFyPzogSFRNTEVsZW1lbnQ7XG4gICAgICAgIHJld2luZEJ0bj86IEhUTUxFbGVtZW50O1xuICAgICAgICBmb3J3YXJkQnRuPzogSFRNTEVsZW1lbnQ7XG4gICAgfTtcblxuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlldzogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBPYmplY3QpIHtcbiAgICAgICAgc3VwZXIodmlldyk7XG5cbiAgICAgICAgLy8gZXh0ZW5kIHNldHRpbmdzOlxuICAgICAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgICAgICAgdGVtcGxhdGU6IFRlbXBsYXRlTmFtZXMuUExBWUVSLFxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXG4gICAgICAgICAgICBtdXRlZDogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9sczogZmFsc2UsXG4gICAgICAgICAgICB2b2x1bWU6IDEsXG4gICAgICAgICAgICB3aWR0aDogNDgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNzAsXG4gICAgICAgICAgICBzaXplOiBQbGF5ZXJTaXplLkFVVE8sXG4gICAgICAgICAgICByZWFkeVRpbWU6IDAuMDAxLFxuICAgICAgICAgICAgaG90a2V5czogZmFsc2UsXG4gICAgICAgICAgICBwYXVzZU9uU2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLkpTT04ucGFyc2Uodmlldy5kYXRhc2V0Lm9wdGlvbnMgfHwgJ3t9JyksXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGdlbmVyYXRlIHVuaXF1ZSBpZDpcbiAgICAgICAgdGhpcy51aWQgPSBVdGlscy5nZW5lcmF0ZVVJRCgpO1xuXG4gICAgICAgIC8vIHNldHVwOlxuICAgICAgICB0aGlzLnNldHVwKCk7XG4gICAgICAgIHRoaXMucmVzaXplKCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBQbGF5ZXIuaW5zdGFuY2VzID09PSAndW5kZWZpbmVkJykgeyBQbGF5ZXIuaW5zdGFuY2VzID0ge307IH1cbiAgICAgICAgUGxheWVyLmluc3RhbmNlc1t0aGlzLnVpZF0gPSB0aGlzO1xuXG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy1pbml0aWFsaXplZCcpO1xuICAgIH1cblxuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbiAgICBwdWJsaWMgYWJzdHJhY3QgcGxheSgpOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBwYXVzZSgpOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCB0b2dnbGUoKTogYm9vbGVhbjtcbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2Vlayh2YWx1ZTogbnVtYmVyKTogdm9pZDtcbiAgICBwdWJsaWMgYWJzdHJhY3QgdG9nZ2xlTXV0ZShtdXRlPzogYm9vbGVhbik6IHZvaWQ7XG4gICAgcHVibGljIGFic3RyYWN0IHVubG9hZCgpOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBsb2FkKGRhdGE6IElQbGF5ZXJTZXR0aW5ncyk6IGFueSB8IFByb21pc2U8YW55PjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgcHJlbG9hZCgpOiBQcm9taXNlPGFueT47XG4gICAgcHVibGljIGFic3RyYWN0IHNraXBGb3J3YXJkKG1vcmU/OiBib29sZWFuKTogdm9pZDtcbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2tpcEJhY2t3YXJkKG1vcmU/OiBib29sZWFuKTogdm9pZDtcbiAgICBwdWJsaWMgYWJzdHJhY3QgcmVzdGFydCgpOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBlbmQoKTogdm9pZDtcbiAgICBwdWJsaWMgYWJzdHJhY3Qgdm9sdW1lVXAoKTogdm9pZDtcbiAgICBwdWJsaWMgYWJzdHJhY3Qgdm9sdW1lRG93bigpOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBzcGVlZFVwKCk6IHZvaWQ7XG4gICAgcHVibGljIGFic3RyYWN0IHNwZWVkRG93bigpOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnb1Jld2luZCgpOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnb0ZvcndhcmQoKTogdm9pZDtcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBpc1BhdXNlZCgpOiBib29sZWFuO1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBzZXR1cCgpOiB2b2lkO1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVQbGF5ZXIoKTogdm9pZDtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYmluZFBsYXllcigpOiB2b2lkO1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCB1bmJpbmRQbGF5ZXIoKTogdm9pZDtcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBvbkR1cmF0aW9uQ2hhbmdlKGRhdGE/KTogdm9pZDtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgb25FcnJvciAoZXJyb3IpOiB2b2lkO1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBvblByb2dyZXNzKGRhdGE/KTogdm9pZDtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgb25UaW1ldXBkYXRlKGRhdGE/KTogdm9pZDtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovXG5cblxuICAgIHB1YmxpYyBoaWRlKCk6IHZvaWQgeyB0aGlzLnZpZXcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfVxuICAgIHB1YmxpYyBzaG93KCk6IHZvaWQgeyB0aGlzLnZpZXcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IH1cbiAgICBwdWJsaWMgcmVzaXplID0gKCk6IHZvaWQgPT4ge307XG5cbiAgICBwdWJsaWMgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMudWkudm9sdW1lPy51cGRhdGUodm9sdW1lKTtcbiAgICAgICAgdGhpcy51aS52b2x1bWU/LnRvZ2dsZSh2b2x1bWUgPCAwLjA1KTtcbiAgICAgICAgVXRpbHMuc2V0U3RvcmFnZUl0ZW0oUGxheWVyU3RvcmFnZS5WT0xVTUUsIGAke3ZvbHVtZX1gKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0U3BlZWQoc3BlZWQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnVpLnNldHRpbmdzPy51cGRhdGVTcGVlZChzcGVlZCk7XG4gICAgICAgIFV0aWxzLnNldFN0b3JhZ2VJdGVtKFBsYXllclN0b3JhZ2UuU1BFRUQsIGAke3NwZWVkfWApO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICBkZWxldGUgUGxheWVyLmluc3RhbmNlc1t0aGlzLnVpZF07XG5cbiAgICAgICAgaWYgKHRoaXMudWkpIHtcbiAgICAgICAgICAgIHRoaXMudWkudGltZT8uZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy51aS50aW1lbGluZT8uZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy51aS52b2x1bWU/LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudWkucG9wdXBzLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudWkuc2V0dGluZ3M/LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudWkudGltZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVpLnRpbWVsaW5lID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudWkudm9sdW1lID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudWkucGxheVBhdXNlQnRuID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudWkuYm90dG9tUGFuZWwgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy51aS50b2dnbGVCdG4gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgICAgdGhpcy51bmxvYWQoKTtcblxuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaW5pdGlhbGl6ZWQnKTtcblxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBidWlsZFVJKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlcy5nZXQodGhpcy5zZXR0aW5ncy50ZW1wbGF0ZSk7XG4gICAgICAgIGNvbnN0IGh0bWwgPSB0ZW1wbGF0ZS5yZW5kZXIoe30pO1xuXG4gICAgICAgIHRoaXMudmlldy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGh0bWwpO1xuXG4gICAgICAgIHRoaXMudWkgPSB7XG4gICAgICAgICAgICBmdWxsc2NyZWVuOiBuZXcgUGxheWVyRnVsbHNjcmVlbih0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1mdWxsc2NyZWVuJyksIHRoaXMudmlldyksXG4gICAgICAgICAgICB0aW1lbGluZTogbmV3IFBsYXllclRpbWVsaW5lKHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLXRpbWVsaW5lJyksIHRoaXMudmlldyksXG4gICAgICAgICAgICBwb3B1cHM6IG5ldyBQbGF5ZXJQb3B1cHModGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItcG9wdXBzJykpLFxuICAgICAgICAgICAgdm9sdW1lOiB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci12b2x1bWUnKSA/IG5ldyBQbGF5ZXJWb2x1bWUodGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItdm9sdW1lJyksIHRoaXMudmlldykgOiBudWxsLFxuICAgICAgICAgICAgdGltZTogbmV3IFBsYXllclRpbWUodGhpcy52aWV3KSxcbiAgICAgICAgICAgIHBvc3RlcjogbmV3IFBsYXllclBvc3Rlcih0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1wb3N0ZXInKSwgdGhpcy52aWV3KSxcbiAgICAgICAgICAgIC8vIHNldHRpbmdzOiBuZXcgUGxheWVyU2V0dGluZ3ModGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItc2V0dGluZ3MnKSwgdGhpcy52aWV3KSxcbiAgICAgICAgICAgIGJvdHRvbVBhbmVsOiB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1ib3R0b20nKSxcbiAgICAgICAgICAgIHBsYXlQYXVzZUJ0bjogdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItcGxheXBhdXNlJyksXG4gICAgICAgICAgICB0b2dnbGVCdG46IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLXRvZ2dsZScpLFxuICAgICAgICAgICAgcGxheWVyQmFyOiB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1iYXInKSxcbiAgICAgICAgICAgIHJld2luZEJ0bjogdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItcmV3aW5kJyksXG4gICAgICAgICAgICBmb3J3YXJkQnRuOiB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1mb3J3YXJkJyksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1hdXRvcGxheScsIHRoaXMuc2V0dGluZ3MuYXV0b3BsYXkpO1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWF1dG9wbGF5JywgdGhpcy5zZXR0aW5ncy5hdXRvcGxheSk7XG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdoYXMtY29udHJvbHMnKTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzLm11dGVkICYmIHRoaXMudWkudm9sdW1lPy50b2dnbGUodHJ1ZSk7XG5cbiAgICAgICAgLy8gcG9zdGVyXG4gICAgICAgIHRoaXMudWkucG9zdGVyLmxvYWQodGhpcy5zZXR0aW5ncyk7XG5cblxuICAgICAgICBQdXNoU3RhdGVzLmJpbmQodGhpcy52aWV3KTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIGJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudWkudGltZWxpbmU/Lm9uKFBsYXllclRpbWVsaW5lRXZlbnRzLlNFRUssIChwb3NpdGlvbjogbnVtYmVyKSA9PiB0aGlzLnNlZWsocG9zaXRpb24pKTtcbiAgICAgICAgdGhpcy51aS52b2x1bWU/Lm9uKFBsYXllclZvbHVtZUV2ZW50cy5DSEFOR0UsICh2b2x1bWU6IG51bWJlcikgPT4gdGhpcy5zZXRWb2x1bWUodm9sdW1lKSk7XG4gICAgICAgIHRoaXMudWkudm9sdW1lPy5vbihQbGF5ZXJWb2x1bWVFdmVudHMuTVVURSwgKCkgPT4gdGhpcy50b2dnbGVNdXRlKHRydWUpKTtcbiAgICAgICAgdGhpcy51aS52b2x1bWU/Lm9uKFBsYXllclZvbHVtZUV2ZW50cy5VTk1VVEUsICgpID0+IHRoaXMudG9nZ2xlTXV0ZShmYWxzZSkpO1xuICAgICAgICB0aGlzLnVpLnNldHRpbmdzPy5vbihQbGF5ZXJTZXR0aW5nc0V2ZW50cy5TUEVFRCwgc3BlZWQgPT4gdGhpcy5zZXRTcGVlZChzcGVlZCkpO1xuXG4gICAgICAgIHRoaXMudWkucGxheVBhdXNlQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25Ub2dnbGVDbGljayk7XG4gICAgICAgIHRoaXMudWkudG9nZ2xlQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25Ub2dnbGVDbGljayk7XG4gICAgICAgIHRoaXMudWkudG9nZ2xlQnRuPy5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMub25Eb3VibGVDbGljayk7XG5cbiAgICAgICAgdGhpcy51aS5yZXdpbmRCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5nb1Jld2luZCgpKTtcbiAgICAgICAgdGhpcy51aS5mb3J3YXJkQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZ29Gb3J3YXJkKCkpO1xuXG4gICAgICAgICEhdGhpcy5zZXR0aW5ncy5ob3RrZXlzICYmIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bik7XG5cbiAgICAgICAgdGhpcy51aS5mdWxsc2NyZWVuPy5vbihQbGF5ZXJGdWxsc2NyZWVuRXZlbnRzLkVOVEVSLCB0aGlzLm9uRnVsbHNjcmVlbkVudGVyKTtcbiAgICAgICAgdGhpcy51aS5mdWxsc2NyZWVuPy5vbihQbGF5ZXJGdWxsc2NyZWVuRXZlbnRzLkVYSVQsIHRoaXMub25GdWxsc2NyZWVuRXhpdCk7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5wYXVzZU9uU2Nyb2xsICYmIHRoaXMucGF1c2VPblNjcm9sbCgpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoKSA9PiB0aGlzLm9uQmVmb3JldW5sb2FkKCkpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCAoKSA9PiB0aGlzLm9uQmVmb3JldW5sb2FkKCkpO1xuXG4gICAgICAgIHRoaXMuYmluZFBsYXllcigpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgdW5iaW5kKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnVpPy50aW1lbGluZT8ub2ZmKCk7XG4gICAgICAgIHRoaXMudWk/LnZvbHVtZT8ub2ZmKCk7XG5cbiAgICAgICAgdGhpcy51aT8ucGxheVBhdXNlQnRuPy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25Ub2dnbGVDbGljayk7XG4gICAgICAgIHRoaXMudWk/LnRvZ2dsZUJ0bj8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVG9nZ2xlQ2xpY2spO1xuICAgICAgICB0aGlzLnVpPy50b2dnbGVCdG4/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGhpcy5vbkRvdWJsZUNsaWNrKTtcblxuICAgICAgICAhIXRoaXMuc2V0dGluZ3MuaG90a2V5cyAmJiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xuXG4gICAgICAgIHRoaXMudWkuZnVsbHNjcmVlbj8ub2ZmKCk7XG4gICAgICAgIHRoaXMuc3Q/LmtpbGwoKTtcblxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4gdGhpcy5vbkJlZm9yZXVubG9hZCgpKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgKCkgPT4gdGhpcy5vbkJlZm9yZXVubG9hZCgpKTtcblxuICAgICAgICB0aGlzLnVuYmluZFBsYXllcigpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgb25DYW5wbGF5KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LmFkZCgnaXMtY2FucGxheScpO1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uUGxheSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLXBsYXllZCcpO1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZW5kZWQnLCAnaXMtZXJyb3InLCAnaXMtc2hhcmUtb3BlbicpO1xuICAgICAgICBQbGF5ZXIucGF1c2VBbGwodGhpcy51aWQpO1xuICAgICAgICB0aGlzLnVwZGF0ZU1lZGlhU2Vzc2lvbigpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgb25QbGF5aW5nKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LmFkZCgnaXMtcGxheWluZycpO1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycsICdpcy1lcnJvcicpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoUGxheWVyRXZlbnRzLlBMQVkpO1xuICAgICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnBsYXliYWNrU3RhdGUgPSAncGxheWluZyc7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBvblBhdXNlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtcGxheWluZycsICdpcy1zaGFyZS1vcGVuJyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcihQbGF5ZXJFdmVudHMuUEFVU0UpO1xuICAgICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnBsYXliYWNrU3RhdGUgPSAncGF1c2VkJztcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uV2FpdGluZygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXBsYXlpbmcnKTtcbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uRW5kKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtcGxheWluZycsICdpcy1wbGF5ZWQnLCAnaXMtc3RhcnRlZCcsICdpcy1sb2FkaW5nJyk7XG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy1lbmRlZCcpO1xuXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvcGxheSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFBsYXllckV2ZW50cy5FTkQpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBvblRvZ2dsZUNsaWNrID0gKGUpOiB2b2lkID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgIH07XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uRG91YmxlQ2xpY2sgPSAoZSk6IHZvaWQgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudWk/LmZ1bGxzY3JlZW4/LnRvZ2dsZSgpO1xuICAgIH07XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uQmVmb3JldW5sb2FkKCk6IHZvaWQge31cblxuXG5cbiAgICBwcm90ZWN0ZWQgb25LZXlEb3duID0gZSA9PiB7XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0cmFuc2NyaXB0LXNlYXJjaCcpID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7IHJldHVybjsgfVxuXG4gICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJyAnOlxuICAgICAgICAgICAgY2FzZSAnayc6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5za2lwRm9yd2FyZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdsJzpcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNraXBGb3J3YXJkKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcEJhY2t3YXJkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ2onOlxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcEJhY2t3YXJkKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZU11dGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnPic6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zcGVlZFVwKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3BlZWREb3duKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ0hvbWUnOlxuICAgICAgICAgICAgY2FzZSAnMCc6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ0VuZCc6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy52b2x1bWVVcCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudm9sdW1lRG93bigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVpPy5mdWxsc2NyZWVuPy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnYyc6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51aT8uY2FwdGlvbnM/LnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcblxuXG5cbiAgICBwcm90ZWN0ZWQgb25GdWxsc2NyZWVuRW50ZXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMudWk/LmNhcHRpb25zPy5zaG93TmF0aXZlKCk7XG4gICAgfTtcblxuXG5cbiAgICBwcm90ZWN0ZWQgb25GdWxsc2NyZWVuRXhpdCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy51aT8uY2FwdGlvbnM/LmhpZGVOYXRpdmUoKTtcbiAgICB9O1xuXG5cblxuICAgIHByb3RlY3RlZCBwYXVzZU9uU2Nyb2xsKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0ID0gU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgICAgdHJpZ2dlcjogdGhpcy52aWV3LFxuICAgICAgICAgICAgb25Ub2dnbGU6IHNlbGYgPT4ge1xuICAgICAgICAgICAgICAgICFzZWxmLmlzQWN0aXZlICYmICF0aGlzLnVpLmZ1bGxzY3JlZW4/LmlzRnVsbHNjcmVlbigpICYmIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgdXBkYXRlTWVkaWFTZXNzaW9uKCk6IHZvaWQge1xuICAgICAgICBpZiAoJ21lZGlhU2Vzc2lvbicgaW4gbmF2aWdhdG9yICYmIHRoaXMuc2V0dGluZ3MubWV0YWRhdGEpIHtcblxuICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5tZXRhZGF0YSA9IG5ldyBNZWRpYU1ldGFkYXRhKHsgLi4udGhpcy5zZXR0aW5ncy5tZXRhZGF0YSBhcyBhbnkgfSk7XG5cbiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcigncGxheScsICgpID0+IHRoaXMucGxheSgpKTtcbiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcigncGF1c2UnLCAoKSA9PiB0aGlzLnBhdXNlKCkpO1xuICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKCdzZWVrYmFja3dhcmQnLCAoKSA9PiB0aGlzLnNraXBCYWNrd2FyZCh0cnVlKSk7XG4gICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoJ3NlZWtmb3J3YXJkJywgKCkgPT4gdGhpcy5za2lwRm9yd2FyZCh0cnVlKSk7XG4gICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoJ3NlZWt0bycsICgpID0+IHt9KTsgLy8ganVzdCBlbmFibGUgc2Vla2luZ1xuXG4gICAgICAgICAgICAvLyBUT0RPOiB1c2UgdGhpcyBpbiBwbGF5bGlzdHMgaW4gdGhlIGZ1dHVyZVxuICAgICAgICAgICAgLy8gbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKCdwcmV2aW91c3RyYWNrJywgKCkgPT4geyB9KTtcbiAgICAgICAgICAgIC8vIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcignbmV4dHRyYWNrJywgKCkgPT4geyB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQbGF5ZXJFdmVudHMge1xuICAgIHB1YmxpYyBzdGF0aWMgRU5EID0gJ2VuZCc7XG4gICAgcHVibGljIHN0YXRpYyBORVhUID0gJ25leHQnO1xuICAgIHB1YmxpYyBzdGF0aWMgUFJFViA9ICdwcmV2JztcbiAgICBwdWJsaWMgc3RhdGljIFRJTUVfVVBEQVRFID0gJ3RpbWVVcGRhdGUnO1xuICAgIHB1YmxpYyBzdGF0aWMgUExBWSA9ICdwbGF5JztcbiAgICBwdWJsaWMgc3RhdGljIFBBVVNFID0gJ3BhdXNlJztcbn1cblxuXG5leHBvcnQgY2xhc3MgUGxheWVyU2l6ZSB7XG4gICAgcHVibGljIHN0YXRpYyBDT1ZFUiA9ICdjb3Zlcic7XG4gICAgcHVibGljIHN0YXRpYyBDT05UQUlOID0gJ2NvbnRhaW4nO1xuICAgIHB1YmxpYyBzdGF0aWMgQVVUTyA9ICdhdXRvJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUGxheWVyU2V0dGluZ3Mge1xuICAgIHRlbXBsYXRlOiBzdHJpbmc7XG4gICAgcGF1c2VPblNjcm9sbDogYm9vbGVhbjtcbiAgICBhdXRvcGxheT86IGJvb2xlYW47XG4gICAgbG9vcD86IGJvb2xlYW47XG4gICAgbXV0ZWQ/OiBib29sZWFuO1xuICAgIGNvbnRyb2xzPzogYm9vbGVhbjtcblxuICAgIGlkPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgIHNyYz86IHN0cmluZztcbiAgICBzcmNNb2JpbGU/OiBzdHJpbmc7XG4gICAgcG9zdGVyPzogc3RyaW5nO1xuICAgIHBvc3Rlck1vYmlsZT86IHN0cmluZztcblxuICAgIHJhdGlvPzogbnVtYmVyO1xuICAgIHJhdGlvTW9iaWxlPzogbnVtYmVyO1xuICAgIHdpZHRoPzogbnVtYmVyO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICBzaXplPzogUGxheWVyU2l6ZTtcblxuICAgIHRpbWVGcm9tPzogbnVtYmVyO1xuICAgIGR1cmF0aW9uPzogbnVtYmVyO1xuICAgIHRpbWVGb3JtYXRMb25nPzogYm9vbGVhbjtcbiAgICBjYWNoZVRpbWU/OiBib29sZWFuO1xuXG4gICAgdm9sdW1lPzogbnVtYmVyO1xuICAgIGhvdGtleXM/OiBib29sZWFuO1xuICAgIHJlYWR5VGltZT86IG51bWJlcjsgLy8gc3RhcnRlZCBjbGFzc1xuICAgIC8vIHRyYWNraW5nPzogQXJyYXk8SVRyYWNraW5nRWxlbT47XG5cbiAgICBtZXRhZGF0YT86IE1lZGlhTWV0YWRhdGE7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBJU3BvdERhdGEge1xuICAgIGVsPzogSFRNTEVsZW1lbnQ7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgZWxIb3RzcG90PzogSFRNTEVsZW1lbnQ7XG4gICAgZWxMaWdodGJveD86IEhUTUxFbGVtZW50O1xuICAgIHN0YXJ0PzogbnVtYmVyO1xuICAgIHN0b3A/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBsYXllckVsZW1lbnRzIHtcbiAgICBkdXJhdGlvbj86IEhUTUxFbGVtZW50O1xuICAgIGZ1bGxCdG4/OiBIVE1MRWxlbWVudDtcbiAgICBsb2FkZWQ/OiBIVE1MRWxlbWVudDtcbiAgICBuZXh0PzogSFRNTEVsZW1lbnQ7XG4gICAgcGxheUJ0bj86IEhUTUxFbGVtZW50O1xuICAgIHBsYXllckJhcj86IEhUTUxFbGVtZW50O1xuICAgIHBvc3Rlcj86IEhUTUxFbGVtZW50O1xuICAgIHByZXY/OiBIVE1MRWxlbWVudDtcbiAgICBwcm9ncmVzcz86IEhUTUxFbGVtZW50O1xuICAgIHNjcnViYmVyPzogSFRNTEVsZW1lbnQ7XG4gICAgdGltZT86IEhUTUxFbGVtZW50O1xuICAgIHRpdGxlPzogSFRNTEVsZW1lbnQ7XG4gICAgdG9nZ2xlQnRuPzogSFRNTEVsZW1lbnQ7XG4gICAgdm9sdW1lPzogSFRNTEVsZW1lbnQ7XG4gICAgdm9sdW1lQmFyPzogSFRNTEVsZW1lbnQ7XG4gICAgdm9sdW1lQnV0dG9uPzogSFRNTEVsZW1lbnQ7XG4gICAgdm9sdW1lVmFsdWU/OiBIVE1MRWxlbWVudDtcbiAgICBjYXB0aW9ucz86IEhUTUxFbGVtZW50O1xuICAgIGNjPzogSFRNTEVsZW1lbnQ7XG4gICAgc3BvdHM/OiBBcnJheTxJU3BvdERhdGE+O1xuICAgIGV4aXRGdWxsQnRuPzogSFRNTEJ1dHRvbkVsZW1lbnQ7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZGVjb2RlVVJMKHNyYzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZWNvZGUgPSAocyk6IHN0cmluZyA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkID0gd2luZG93LmF0b2Iocyk7XG4gICAgICAgICAgICByZXR1cm4gL153cXx4QCQvZy50ZXN0KGQpID8gZC5yZXBsYWNlKC9ed3F8eEAkL2csICcnKSA6IHM7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gL1xcLm1wNCQvLnRlc3Qoc3JjKSA/IHNyYyA6IGRlY29kZShzcmMpO1xufVxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVG9UaW1lKHRvdGFsU2Vjb25kczogbnVtYmVyLCBpc0xvbmc6IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nIHtcbiAgICBjb25zdCB0b3RhbFNlYyA9IHBhcnNlSW50KGAke3RvdGFsU2Vjb25kc31gLCAxMCk7XG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChgJHt0b3RhbFNlYyAvIDM2MDB9YCwgMTApICUgMjQ7XG4gICAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KGAke3RvdGFsU2VjIC8gNjB9YCwgMTApICUgNjA7XG4gICAgY29uc3Qgc2Vjb25kcyA9IHRvdGFsU2VjICUgNjA7XG5cbiAgICByZXR1cm4gYCR7aXNMb25nID8gKGhvdXJzIDwgMTAgPyBgMCR7aG91cnN9OmAgOiBgJHtob3Vyc306YCkgOiAnJ30keyhtaW51dGVzIDwgMTAgPyBgMCR7bWludXRlc31gIDogbWludXRlcyl9OiR7c2Vjb25kcyA8IDEwID8gYDAke3NlY29uZHN9YCA6IHNlY29uZHN9YDtcbn1cbiIsImltcG9ydCB7IEhhbmRsZXIgfSBmcm9tICcuLi8uLi9IYW5kbGVyJztcbmltcG9ydCB7IGJyb3dzZXIgfSBmcm9tICcuLi8uLi9TaXRlJztcblxuZXhwb3J0IGNsYXNzIFBsYXllckZ1bGxzY3JlZW5FdmVudHMge1xuICAgIHB1YmxpYyBzdGF0aWMgRVhJVDogc3RyaW5nID0gJ2V4aXQnO1xuICAgIHB1YmxpYyBzdGF0aWMgRU5URVI6IHN0cmluZyA9ICdlbnRlcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0ZW5kZWREb2N1bWVudCBleHRlbmRzIERvY3VtZW50IHtcbiAgICBtb3pGdWxsU2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIG1zRnVsbHNjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGV4aXRGdWxsc2NyZWVuKCk6IFByb21pc2U8dm9pZD47XG4gICAgbW96Q2FuY2VsRnVsbFNjcmVlbigpOiBQcm9taXNlPHZvaWQ+O1xuICAgIHdlYmtpdEV4aXRGdWxsc2NyZWVuKCk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBjb25zdCBodG1sRG9jdW1lbnQ6IEV4dGVuZGVkRG9jdW1lbnQgPSBkb2N1bWVudCBhcyBFeHRlbmRlZERvY3VtZW50O1xuXG5cblxuZXhwb3J0IGNsYXNzIFBsYXllckZ1bGxzY3JlZW4gZXh0ZW5kcyBIYW5kbGVyIHtcblxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRGdWxsc2NyZWVuRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IGFueSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgIHJldHVybiBodG1sRG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgaHRtbERvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50IHx8IGh0bWxEb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCB8fCBodG1sRG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudDtcbiAgICB9XG5cblxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBidG5FbDogSFRNTEVsZW1lbnQsIHByaXZhdGUgcGxheWVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5idG5FbCA9IGJ0bkVsO1xuICAgICAgICB0aGlzLnBsYXllckVsID0gcGxheWVyRWw7XG5cbiAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnVuYmluZCgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgaXNGdWxsc2NyZWVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gUGxheWVyRnVsbHNjcmVlbi5nZXRGdWxsc2NyZWVuRWxlbWVudCgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgdG9nZ2xlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSkge1xuICAgICAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nb0Z1bGxzY3JlZW4odGhpcy5wbGF5ZXJFbCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHVibGljIGV4aXRGdWxsc2NyZWVuKCk6IHZvaWQge1xuICAgICAgICBpZiAoaHRtbERvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICBodG1sRG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgfSBlbHNlIGlmIChodG1sRG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikge1xuICAgICAgICAgICAgaHRtbERvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcbiAgICAgICAgfSBlbHNlIGlmIChodG1sRG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgIGh0bWxEb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBnb0Z1bGxzY3JlZW4oZWxlbWVudDogSFRNTEVsZW1lbnQgfCBhbnkpOiB2b2lkIHtcblxuICAgICAgICBsZXQgcHJvbWlzZTtcbiAgICAgICAgaWYgKGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgIHByb21pc2UgPSBlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xuICAgICAgICAgICAgcHJvbWlzZSA9IGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICBwcm9taXNlID0gZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xuICAgICAgICAgICAgcHJvbWlzZSA9IGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyRWwuY2xhc3NMaXN0LmFkZCgnaXMtZnVsbHNjcmVlbicpO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYXR0ZW1wdGluZyB0byBlbmFibGUgZnVsbHNjcmVlbiBtb2RlOiAke2Vyci5tZXNzYWdlfSAoJHtlcnIubmFtZX0pYCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYnRuRWw/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkJ0bkNsaWNrKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIHRoaXMub25GdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICAgICAgY29uc3QgbW0gPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpIGFuZCAobWF4LWhlaWdodDogMTAyM3B4KScpO1xuICAgICAgICBtbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLm9uT3JpZW50YXRpb25DaGFuZ2UpO1xuXG4gICAgICAgIFsuLi50aGlzLnBsYXllckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3ZpZGVvJyldLmZvckVhY2godmlkZW8gPT4ge1xuICAgICAgICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZW5kZnVsbHNjcmVlbicsIHRoaXMub25WaWRlb0Z1bGxzY3JlZW5FeGl0LCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIHVuYmluZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5idG5FbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQnRuQ2xpY2spO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgdGhpcy5vbkZ1bGxzY3JlZW5DaGFuZ2UpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIG9uQnRuQ2xpY2sgPSAoZTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgaWYgKFBsYXllckZ1bGxzY3JlZW4uZ2V0RnVsbHNjcmVlbkVsZW1lbnQoKSkge1xuICAgICAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGJyb3dzZXIubW9iaWxlIHx8IGJyb3dzZXIuaW9zKSB7XG4gICAgICAgICAgICBjb25zdCBtZWRpYUVsZW1lbnQgPSB0aGlzLnBsYXllckVsLnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvLmlzLWN1cnJlbnQnKSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoUGxheWVyRnVsbHNjcmVlbkV2ZW50cy5FTlRFUik7XG4gICAgICAgICAgICBtZWRpYUVsZW1lbnQ/LndlYmtpdEVudGVyRnVsbHNjcmVlbiAmJiBtZWRpYUVsZW1lbnQ/LndlYmtpdEVudGVyRnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgbWVkaWFFbGVtZW50Py5lbnRlckZ1bGxzY3JlZW4gJiYgbWVkaWFFbGVtZW50Py5lbnRlckZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyRWwuY2xhc3NMaXN0LmFkZCgnaXMtZnVsbHNjcmVlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nb0Z1bGxzY3JlZW4odGhpcy5wbGF5ZXJFbCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgb25GdWxsc2NyZWVuQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICBpZiAoUGxheWVyRnVsbHNjcmVlbi5nZXRGdWxsc2NyZWVuRWxlbWVudCgpKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLnBsYXllckVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWZ1bGxzY3JlZW4nKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFBsYXllckZ1bGxzY3JlZW5FdmVudHMuRVhJVCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uVmlkZW9GdWxsc2NyZWVuRXhpdCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1mdWxsc2NyZWVuJyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcihQbGF5ZXJGdWxsc2NyZWVuRXZlbnRzLkVYSVQpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbk9yaWVudGF0aW9uQ2hhbmdlID0gZSA9PiB7XG4gICAgICAgIGlmIChicm93c2VyLm1vYmlsZSkge1xuICAgICAgICAgICAgY29uc3QgbWVkaWFFbGVtZW50ID0gdGhpcy5wbGF5ZXJFbC5xdWVyeVNlbGVjdG9yKCd2aWRlby5pcy1jdXJyZW50JykgYXMgYW55O1xuICAgICAgICAgICAgaWYgKGUubWF0Y2hlcykge1xuICAgICAgICAgICAgICAgIC8vIGxhbmRzY2FwZVxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyRWwuY2xhc3NMaXN0LmFkZCgnaXMtZnVsbHNjcmVlbicpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihQbGF5ZXJGdWxsc2NyZWVuRXZlbnRzLkVOVEVSKTtcbiAgICAgICAgICAgICAgICBtZWRpYUVsZW1lbnQ/LndlYmtpdEVudGVyRnVsbHNjcmVlbiAmJiBtZWRpYUVsZW1lbnQ/LndlYmtpdEVudGVyRnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgICAgIG1lZGlhRWxlbWVudD8uZW50ZXJGdWxsc2NyZWVuICYmIG1lZGlhRWxlbWVudD8uZW50ZXJGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHBvcnRyYWl0XG4gICAgICAgICAgICAgICAgbWVkaWFFbGVtZW50Py53ZWJraXRFeGl0RnVsbHNjcmVlbiAmJiBtZWRpYUVsZW1lbnQ/LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgbWVkaWFFbGVtZW50Py5leGl0RnVsbHNjcmVlbiAmJiBtZWRpYUVsZW1lbnQ/LmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IEhhbmRsZXIgfSBmcm9tICcuLi8uLi9IYW5kbGVyJztcbmltcG9ydCB7IGVhc2luZyB9IGZyb20gJy4uLy4uL1NpdGUnO1xuaW1wb3J0IHsgUG9wdXBEYXRhIH0gZnJvbSAnLi9WaWRlby50eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBQbGF5ZXJQb3B1cHMgZXh0ZW5kcyBIYW5kbGVyIHtcblxuICAgIHByaXZhdGUgc3RhdGljIERVUkFUSU9OOiBudW1iZXIgPSAzO1xuXG4gICAgcHJpdmF0ZSByZWxhdGVkOiBBcnJheTxQb3B1cERhdGE+O1xuICAgIHByaXZhdGUgcG9wdXBzOiBBcnJheTxIVE1MRWxlbWVudD47XG5cblxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSB2aWV3OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMucG9wdXBzID0gdmlldyA/IFsuLi50aGlzLnZpZXcuY2hpbGRyZW5dIGFzIEhUTUxFbGVtZW50W10gOiBudWxsO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgbG9hZERhdGEoeyByZWxhdGVkIH0pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWxhdGVkID0gcmVsYXRlZDtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGNoZWNrKGN1cnJlbnQ/OiBudW1iZXIpOiB2b2lkIHtcblxuICAgICAgICBpZiAoIWN1cnJlbnQpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGhpcy5yZWxhdGVkPy5mb3JFYWNoKChlbGVtZW50LCBrZXkpID0+IHtcblxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LnRpbWVTdGFydCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPCBlbGVtZW50LnRpbWVTdGFydCB8fCBjdXJyZW50ID4gZWxlbWVudC50aW1lU3RhcnQgKyBQbGF5ZXJQb3B1cHMuRFVSQVRJT04pIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zaG93bikge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNob3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZVBvcHVwKHRoaXMucG9wdXBzW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnNob3duKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICB0aGlzLnBvcHVwc1trZXldLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgZWxlbWVudC5zaG93biA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKHRoaXMucG9wdXBzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBzaG93UG9wdXAocG9wdXBFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZ3NhcC5mcm9tVG8ocG9wdXBFbCwge1xuICAgICAgICAgICAgeTogLTIwLFxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHNjYWxlOiAwLjksXG4gICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdib3R0b20nLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuNyxcbiAgICAgICAgICAgIGRlbGF5OiAwLjE1LFxuICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ2FsbCcsXG4gICAgICAgICAgICBlYXNlOiBlYXNpbmcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGhpZGVQb3B1cChwb3B1cEVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBnc2FwLnRvKHBvcHVwRWwsIHtcbiAgICAgICAgICAgIHk6IDIwLFxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjcsXG4gICAgICAgICAgICBzY2FsZTogMC45LFxuICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICAgICAgZWFzZTogZWFzaW5nLFxuICAgICAgICAgICAgY2xlYXJQcm9wczogJ2hlaWdodCxzY2FsZScsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcG9wdXBFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYnJvd3NlciB9IGZyb20gJy4uLy4uL1NpdGUnO1xuaW1wb3J0IHsgSVBsYXllclNldHRpbmdzIH0gZnJvbSAnLi9QbGF5ZXIudHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyUG9zdGVyIHtcblxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSB2aWV3OiBIVE1MRWxlbWVudCwgcHJpdmF0ZSBwbGF5ZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5wbGF5ZXJFbCA9IHBsYXllckVsO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgbG9hZChkYXRhOiBJUGxheWVyU2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgaWYgKGRhdGEucG9zdGVyKSB7XG4gICAgICAgICAgICBjb25zdCBwb3N0ZXIgPSAhIWJyb3dzZXIubW9iaWxlXG4gICAgICAgICAgICAgICAgJiYgZGF0YS5wb3N0ZXJNb2JpbGVcbiAgICAgICAgICAgICAgICAmJiBkYXRhLnBvc3Rlck1vYmlsZSAhPT0gJydcbiAgICAgICAgICAgICAgICA/IGRhdGEucG9zdGVyTW9iaWxlXG4gICAgICAgICAgICAgICAgOiBkYXRhLnBvc3RlcjtcblxuICAgICAgICAgICAgdGhpcy52aWV3LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtwb3N0ZXJ9KWA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBsYXllckVsLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1wb3N0ZXInLCAhIWRhdGEucG9zdGVyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSGFuZGxlcic7XG5cblxuZXhwb3J0IGNsYXNzIFBsYXllclNldHRpbmdzRXZlbnRzIHtcbiAgICBwdWJsaWMgc3RhdGljIFNQRUVEOiBzdHJpbmcgPSAnc3BlZWQnO1xufVxuXG5cbmV4cG9ydCBjbGFzcyBQbGF5ZXJTZXR0aW5ncyBleHRlbmRzIEhhbmRsZXIge1xuXG4gICAgcHVibGljIHN0YXRpYyBNQVhfU1BFRUQgPSAyO1xuICAgIHB1YmxpYyBzdGF0aWMgTUlOX1NQRUVEID0gMC4yNTtcbiAgICBwdWJsaWMgc3RhdGljIFNQRUVEX1NURVAgPSAwLjI1O1xuXG4gICAgcHVibGljIHN0YXRpYyBjb25zdHJhaW5TcGVlZChzcGVlZDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KFBsYXllclNldHRpbmdzLk1JTl9TUEVFRCwgTWF0aC5taW4oUGxheWVyU2V0dGluZ3MuTUFYX1NQRUVELCBzcGVlZCkpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBsaXN0QnV0dG9uczogQXJyYXk8SFRNTExJRWxlbWVudD47XG4gICAgcHJpdmF0ZSB0aW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PjtcbiAgICBwcml2YXRlIGlzSW5pdGlhbFNldHVwOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwcml2YXRlIGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cblxuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHZpZXc6IEhUTUxFbGVtZW50LCBwcm90ZWN0ZWQgcGxheWVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5wbGF5ZXJFbCA9IHBsYXllckVsO1xuICAgICAgICB0aGlzLmxpc3RCdXR0b25zID0gWy4uLnZpZXcucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGxheWJhY2stcmF0ZV0nKV0gYXMgSFRNTExJRWxlbWVudFtdO1xuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbCA9IG51bGw7XG4gICAgICAgIHRoaXMubGlzdEJ1dHRvbnMgPSBudWxsO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgdXBkYXRlU3BlZWQoc3BlZWQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuaXNJbml0aWFsU2V0dXApIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy11cGRhdGluZycpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmlldy5jbGFzc0xpc3QucmVtb3ZlKCdpcy11cGRhdGluZycpLCAoNjAwICsgMzAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0luaXRpYWxTZXR1cCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMubGlzdEJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgICAgICAgYnRuLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJywgcGFyc2VGbG9hdChidG4uZGF0YXNldC5wbGF5YmFja1JhdGUpID09PSBzcGVlZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGlzdEJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblNwZWVkQnRuQ2xpY2spKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSB1bmJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGlzdEJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblNwZWVkQnRuQ2xpY2spKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBvblNwZWVkQnRuQ2xpY2sgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICB0aGlzLnRyaWdnZXIoUGxheWVyU2V0dGluZ3NFdmVudHMuU1BFRUQsIHBhcnNlRmxvYXQoKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5wbGF5YmFja1JhdGUpKTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IEhhbmRsZXIgfSBmcm9tICcuLi8uLi9IYW5kbGVyJztcbmltcG9ydCB7IGJyb3dzZXIgfSBmcm9tICcuLi8uLi9TaXRlJztcblxuZXhwb3J0IGNsYXNzIFBsYXllclRpbWVsaW5lRXZlbnRzIHtcbiAgICBwdWJsaWMgc3RhdGljIFNFRUs6IHN0cmluZyA9ICdzZWVrJztcbn1cblxuZXhwb3J0IGNsYXNzIFBsYXllclRpbWVsaW5lIGV4dGVuZHMgSGFuZGxlciB7XG5cbiAgICBwcml2YXRlIGlzU2NydWJiaW5nOiBib29sZWFuO1xuICAgIHByaXZhdGUgaG92ZXJFbDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjdXJyZW50RWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgbG9hZGVkRWw6IEhUTUxFbGVtZW50O1xuXG5cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgdmlldzogSFRNTEVsZW1lbnQsIHByaXZhdGUgcGxheWVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuaG92ZXJFbCA9IHZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1ob3ZlcicpO1xuICAgICAgICB0aGlzLmN1cnJlbnRFbCA9IHZpZXcucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1wcm9ncmVzcycpO1xuICAgICAgICB0aGlzLmxvYWRlZEVsID0gdmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLWxvYWRlZCcpO1xuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgICAgdGhpcy5ob3ZlckVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyZW50RWwgPSBudWxsO1xuICAgICAgICB0aGlzLmxvYWRlZEVsID0gbnVsbDtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmN1cnJlbnRFbC5zdHlsZS53aWR0aCA9ICcwJztcbiAgICAgICAgdGhpcy5sb2FkZWRFbC5zdHlsZS53aWR0aCA9ICcwJztcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHVwZGF0ZShtZXRhZGF0YTogeyBkdXJhdGlvbjogbnVtYmVyLCBidWZmZXJlZD86IG51bWJlciwgY3VycmVudD86IG51bWJlciB9LCBxdWljaz86IGJvb2xlYW4pOiB2b2lkIHtcblxuICAgICAgICBjb25zdCB7IGR1cmF0aW9uLCBidWZmZXJlZCwgY3VycmVudCB9ID0gbWV0YWRhdGE7XG5cbiAgICAgICAgaWYgKCFkdXJhdGlvbikgeyByZXR1cm47IH1cblxuICAgICAgICBpZiAoYnVmZmVyZWQgJiYgdGhpcy5sb2FkZWRFbCkge1xuICAgICAgICAgICAgZ3NhcC50byh0aGlzLmxvYWRlZEVsLCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGAkeyhNYXRoLm1heChidWZmZXJlZCwgY3VycmVudCB8fCAwKSAvIGR1cmF0aW9uKSAqIDEwMH0lYCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogIXF1aWNrID8gMC4zIDogMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgZ3NhcC50byh0aGlzLmN1cnJlbnRFbCwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBgJHsoKGN1cnJlbnQgfHwgMCkgLyBkdXJhdGlvbikgKiAxMDB9JWAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246ICFxdWljayA/IDAuMyA6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogJ25vbmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHVibGljIGFkZEhvdHNwb3RzKGRhdGEsIGR1cmF0aW9uKTogdm9pZCB7XG5cbiAgICAgICAgZGF0YS5yZWxhdGVkPy5mb3JFYWNoKCh7IHRpbWVTdGFydCwgY29sb3IgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaG90c3BvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICBob3RzcG90LmNsYXNzTGlzdC5hZGQoJ3BsYXllcl9faG90c3BvdCcpO1xuICAgICAgICAgICAgaG90c3BvdC5zdHlsZS5sZWZ0ID0gYCR7KCh0aW1lU3RhcnQgfHwgMCkgLyBkdXJhdGlvbikgKiAxMDB9JWA7XG4gICAgICAgICAgICBob3RzcG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yO1xuXG4gICAgICAgICAgICB0aGlzLnZpZXcuYXBwZW5kQ2hpbGQoaG90c3BvdCk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBvbk1vdXNlRG93biA9IChlOiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuaXNTY3J1YmJpbmcgPSB0cnVlO1xuICAgIH07XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uTW91c2VNb3ZlID0gKGU6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcblxuICAgICAgICBjb25zdCB7IHNlZWsgfSA9IHRoaXMuZ2V0UG9zaXRpb24oZSk7XG4gICAgICAgIGlmICh0aGlzLmhvdmVyRWwpIHRoaXMuaG92ZXJFbC5zdHlsZS53aWR0aCA9IGAke3NlZWsgKiAxMDB9JWA7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNTY3J1YmJpbmcpIHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoUGxheWVyVGltZWxpbmVFdmVudHMuU0VFSywgc2VlaywgdHJ1ZSk7XG4gICAgICAgICAgICBnc2FwLmtpbGxUd2VlbnNPZih0aGlzLmN1cnJlbnRFbCk7XG4gICAgICAgICAgICBnc2FwLnNldCh0aGlzLmN1cnJlbnRFbCwgeyB3aWR0aDogYCR7c2VlayAqIDEwMH0lYCB9KTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyRWwuY2xhc3NMaXN0LmFkZCgnaXMtc2NydWJiaW5nJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cblxuICAgIHByb3RlY3RlZCBvbk1vdXNlVXAgPSAoZTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc1NjcnViYmluZykge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHsgc2VlayB9ID0gdGhpcy5nZXRQb3NpdGlvbihlKTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihQbGF5ZXJUaW1lbGluZUV2ZW50cy5TRUVLLCBzZWVrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU2NydWJiaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGxheWVyRWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtc2NydWJiaW5nJyk7XG4gICAgfTtcblxuXG5cbiAgICBwcm90ZWN0ZWQgb25Nb3VzZUxlYXZlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmlzU2NydWJiaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGxheWVyRWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtc2NydWJiaW5nJyk7XG4gICAgfTtcblxuXG5cbiAgICBwcm90ZWN0ZWQgb25DbGljayA9IChlOiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IHsgc2VlayB9ID0gdGhpcy5nZXRQb3NpdGlvbihlKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFBsYXllclRpbWVsaW5lRXZlbnRzLlNFRUssIHNlZWspO1xuICAgICAgICBnc2FwLmtpbGxUd2VlbnNPZih0aGlzLmN1cnJlbnRFbCk7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuY3VycmVudEVsLCB7IHdpZHRoOiBgJHtzZWVrICogMTAwfSVgIH0pO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBiaW5kKCk6IHZvaWQge1xuICAgICAgICAhYnJvd3Nlci50b3VjaCAmJiB0aGlzLnBsYXllckVsPy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xuICAgICAgICAhYnJvd3Nlci50b3VjaCAmJiB0aGlzLnBsYXllckVsPy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5vbk1vdXNlTGVhdmUpO1xuICAgICAgICAhYnJvd3Nlci50b3VjaCAmJiB0aGlzLnBsYXllckVsPy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgYnJvd3Nlci50b3VjaCAmJiB0aGlzLnBsYXllckVsPy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgYnJvd3Nlci50b3VjaCAmJiB0aGlzLnBsYXllckVsPy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Nb3VzZVVwKTtcblxuICAgICAgICAhYnJvd3Nlci50b3VjaCAmJiB0aGlzLnZpZXc/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcbiAgICAgICAgIWJyb3dzZXIudG91Y2ggJiYgdGhpcy52aWV3Py5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgYnJvd3Nlci50b3VjaCAmJiB0aGlzLnZpZXc/LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSB1bmJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGxheWVyRWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIHRoaXMucGxheWVyRWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VMZWF2ZSk7XG4gICAgICAgIHRoaXMucGxheWVyRWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICB0aGlzLnBsYXllckVsPy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uTW91c2VVcCk7XG5cbiAgICAgICAgdGhpcy52aWV3Py5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgdGhpcy52aWV3Py5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgICAgIHRoaXMudmlldz8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGdldFBvc2l0aW9uKGU6IFRvdWNoRXZlbnR8TW91c2VFdmVudCk6IHsgeDogbnVtYmVyOyB3aWR0aDogbnVtYmVyOyBzZWVrOiBudW1iZXIgfSB7XG4gICAgICAgIGNvbnN0IHBhZ2VYID0gKGUgYXMgTW91c2VFdmVudCkucGFnZVggfHwgKGUgYXMgVG91Y2hFdmVudCkudG91Y2hlc1swXT8ucGFnZVggfHwgKGUgYXMgVG91Y2hFdmVudCkuY2hhbmdlZFRvdWNoZXNbMF0/LnBhZ2VYO1xuICAgICAgICBjb25zdCB4ID0gcGFnZVggLSB0aGlzLnZpZXcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnZpZXcuY2xpZW50V2lkdGg7XG4gICAgICAgIGNvbnN0IHNlZWsgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB4IC8gd2lkdGgpKTtcbiAgICAgICAgcmV0dXJuIHsgeCwgd2lkdGgsIHNlZWsgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcC9kaXN0L2dzYXAnO1xuaW1wb3J0IHsgSGFuZGxlciB9IGZyb20gJy4uLy4uL0hhbmRsZXInO1xuaW1wb3J0IHsgZWFzaW5nIH0gZnJvbSAnLi4vLi4vU2l0ZSc7XG5cbmV4cG9ydCBjbGFzcyBQbGF5ZXJWb2x1bWVFdmVudHMge1xuICAgIHB1YmxpYyBzdGF0aWMgQ0hBTkdFOiBzdHJpbmcgPSAnY2hhbmdlJztcbiAgICBwdWJsaWMgc3RhdGljIE1VVEU6IHN0cmluZyA9ICdtdXRlJztcbiAgICBwdWJsaWMgc3RhdGljIFVOTVVURTogc3RyaW5nID0gJ3VubXV0ZSc7XG59XG5cblxuZXhwb3J0IGNsYXNzIFBsYXllclZvbHVtZSBleHRlbmRzIEhhbmRsZXIge1xuXG4gICAgcHJpdmF0ZSBpc1NjcnViYmluZzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzTXV0ZWQ6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBpc0luaXRpYWxTZXR1cDogYm9vbGVhbiA9IHRydWU7XG4gICAgcHJpdmF0ZSB2b2x1bWU6IG51bWJlcjtcbiAgICBwcml2YXRlIGJ1dHRvbkVsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGJhckVsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHZhbHVlRWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgdGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD47XG5cblxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSB2aWV3OiBIVE1MRWxlbWVudCwgcHJpdmF0ZSBwbGF5ZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5wbGF5ZXJFbCA9IHBsYXllckVsO1xuICAgICAgICB0aGlzLmJ1dHRvbkVsID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy12b2x1bWUtYnRuJyk7XG4gICAgICAgIHRoaXMuYmFyRWwgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXZvbHVtZS1iYXInKTtcbiAgICAgICAgdGhpcy52YWx1ZUVsID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy12b2x1bWUtdmFsdWUnKTtcbiAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyB1cGRhdGUodm9sdW1lOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52b2x1bWUgPSB2b2x1bWU7XG4gICAgICAgIHRoaXMudmFsdWVFbCAmJiBnc2FwLnRvKHRoaXMudmFsdWVFbCwge1xuICAgICAgICAgICAgc2NhbGVZOiB2b2x1bWUsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5pc1NjcnViYmluZyA/IDAuMDAwMSA6IDAuMixcbiAgICAgICAgICAgIGVhc2U6IGVhc2luZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxTZXR1cCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLXVwZGF0aW5nJyk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXVwZGF0aW5nJyksICg2MDAgKyAzMDApKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzSW5pdGlhbFNldHVwID0gZmFsc2U7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyB0b2dnbGUobXV0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pc011dGVkID0gbXV0ZWQ7XG4gICAgICAgIHRoaXMucGxheWVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtbXV0ZWQnLCB0aGlzLmlzTXV0ZWQpO1xuICAgICAgICB0aGlzLnZhbHVlRWwgJiYgZ3NhcC50byh0aGlzLnZhbHVlRWwsIHsgc2NhbGVZOiB0aGlzLmlzTXV0ZWQgPyAwIDogdGhpcy52b2x1bWUsIGR1cmF0aW9uOiAwLjIsIGVhc2U6IGVhc2luZyB9KTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICAgIHRoaXMudmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMucGxheWVyRWwgPSBudWxsO1xuICAgICAgICB0aGlzLmJ1dHRvbkVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5iYXJFbCA9IG51bGw7XG4gICAgICAgIHRoaXMudmFsdWVFbCA9IG51bGw7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgYmluZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5idXR0b25FbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVm9sdW1lQnV0dG9uQ2xpY2spO1xuICAgICAgICB0aGlzLmJhckVsPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25Wb2x1bWVCYXJDbGljayk7XG4gICAgICAgIHRoaXMuYmFyRWw/LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICB0aGlzLnBsYXllckVsPy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMub25Nb3VzZUxlYXZlKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSB1bmJpbmQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYnV0dG9uRWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblZvbHVtZUJ1dHRvbkNsaWNrKTtcbiAgICAgICAgdGhpcy5iYXJFbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVm9sdW1lQmFyQ2xpY2spO1xuICAgICAgICB0aGlzLmJhckVsPy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIHRoaXMucGxheWVyRWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIHRoaXMucGxheWVyRWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VMZWF2ZSk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgb25Wb2x1bWVCdXR0b25DbGljayA9IChlOiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKHRoaXMuaXNNdXRlZCA/IFBsYXllclZvbHVtZUV2ZW50cy5VTk1VVEUgOiBQbGF5ZXJWb2x1bWVFdmVudHMuTVVURSk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uVm9sdW1lQmFyQ2xpY2sgPSAoZTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIDEgLSBlLm9mZnNldFkgLyB0aGlzLmJhckVsLmNsaWVudEhlaWdodCkpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoUGxheWVyVm9sdW1lRXZlbnRzLkNIQU5HRSwgdmFsdWUpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbk1vdXNlRG93biA9IChlOiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuaXNTY3J1YmJpbmcgPSB0cnVlO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbk1vdXNlTW92ZSA9IChlKTogdm9pZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzU2NydWJiaW5nKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgcG9zWSA9IGUuY2xpZW50WSAtIHRoaXMuYmFyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCAxIC0gcG9zWSAvIHRoaXMuYmFyRWwuY2xpZW50SGVpZ2h0KSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoUGxheWVyVm9sdW1lRXZlbnRzLkNIQU5HRSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uTW91c2VVcCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5pc1NjcnViYmluZyA9IGZhbHNlO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBvbk1vdXNlTGVhdmUgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuaXNTY3J1YmJpbmcgPSBmYWxzZTtcbiAgICB9O1xuXG59XG4iLCJpbXBvcnQgeyBkZWNvZGVVUkwgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1BsYXllci9QbGF5ZXIudXRpbHMnO1xuaW1wb3J0IHsgSVBsYXllclNldHRpbmdzLCBQbGF5ZXJFdmVudHMgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1BsYXllci9QbGF5ZXIudHlwZXMnO1xuaW1wb3J0IHsgTWVkaWFTdGF0ZSwgUGxheWVyU3RvcmFnZSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvUGxheWVyL1ZpZGVvLnR5cGVzJztcbmltcG9ydCB7IGJyb3dzZXIgfSBmcm9tICcuLi8uLi9TaXRlJztcbmltcG9ydCB7IFBsYXllciB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvUGxheWVyL1BsYXllcic7XG5pbXBvcnQgeyBnZXRTdG9yYWdlSXRlbSwgbm9ybWFsaXplVXJsLCBzZXRTdG9yYWdlSXRlbSB9IGZyb20gJy4uLy4uL1V0aWxzJztcbmltcG9ydCB7IFZpZGVvQ2FwdGlvbnMgfSBmcm9tICcuL1ZpZGVvQ2FwdGlvbnMnO1xuaW1wb3J0IHsgUGxheWVyU2V0dGluZ3MgfSBmcm9tICcuL1BsYXllclNldHRpbmdzJztcblxuXG5cbmV4cG9ydCBjbGFzcyBWaWRlbyBleHRlbmRzIFBsYXllciB7XG5cbiAgICBwcm90ZWN0ZWQgbWVkaWE6IEhUTUxWaWRlb0VsZW1lbnQgfCBIVE1MQXVkaW9FbGVtZW50O1xuICAgIHByb3RlY3RlZCBpc0F1ZGlvOiBib29sZWFuO1xuXG4gICAgcHVibGljIHByZWxvYWQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gIWJyb3dzZXIuc2FmYXJpXG4gICAgICAgICAgICA/IE1lZGlhU3RhdGUuSEFWRV9FTk9VR0hfREFUQVxuICAgICAgICAgICAgOiBNZWRpYVN0YXRlLkhBVkVfTUVUQURBVEE7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxib29sZWFuPihyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGlmICghIWJyb3dzZXIubW9iaWxlIHx8ICF0aGlzLnNldHRpbmdzLmF1dG9wbGF5KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tZWRpYS5yZWFkeVN0YXRlID49IHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRkYXRhJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZWRpYS5yZWFkeVN0YXRlID49IHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jYWNoZVRpbWVQb3NpdGlvbih0cnVlKTtcbiAgICAgICAgdGhpcy5tZWRpYS5wYXVzZSgpO1xuICAgICAgICB0aGlzLm1lZGlhLnNyYyA9ICcnO1xuICAgICAgICB0aGlzLm1lZGlhLmxvYWQoKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgbG9hZChkYXRhOiBJUGxheWVyU2V0dGluZ3MpOiBQcm9taXNlPG51bWJlcnx7fT4ge1xuICAgICAgICBjb25zdCBzcmMgPSAhIWJyb3dzZXIubW9iaWxlICYmIGRhdGEuc3JjTW9iaWxlICYmIGRhdGEuc3JjTW9iaWxlICE9PSAnJyA/IGRhdGEuc3JjTW9iaWxlIDogZGF0YS5zcmM7XG5cbiAgICAgICAgdGhpcy5tZWRpYS5wYXVzZSgpO1xuICAgICAgICB0aGlzLm1lZGlhLnNyYyA9IGRlY29kZVVSTChzcmMpO1xuICAgICAgICB0aGlzLm1lZGlhLmxvYWQoKTtcblxuICAgICAgICB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZW5kZWQnLCAnaXMtc3RhcnRlZCcsICdpcy1wbGF5ZWQnLCAnaXMtcGxheWluZycpO1xuXG4gICAgICAgIHRoaXMudWkgJiYgdGhpcy51aS50aW1lbGluZT8ucmVzZXQoKTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzLmF1dG9wbGF5ICYmIHRoaXMucGxheSgpO1xuXG4gICAgICAgIHRoaXMuc2V0dGluZ3MucmF0aW8gPSBkYXRhLnJhdGlvO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJhdGlvTW9iaWxlID0gZGF0YS5yYXRpb01vYmlsZTtcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzLnBvc3RlciA9IGRhdGEucG9zdGVyO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnBvc3Rlck1vYmlsZSA9IGRhdGEucG9zdGVyTW9iaWxlO1xuXG4gICAgICAgIHRoaXMudWkucG9zdGVyLmxvYWQoZGF0YSk7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jYWNoZVRpbWUgJiYgdGhpcy5zZWVrVG9DYWNoZWQoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgcGxheSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubWVkaWEgJiYgdGhpcy5tZWRpYS5wYXVzZWQpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0Q3VycmVudFRpbWUoKSA+PSB0aGlzLmdldER1cmF0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVpPy50aW1lbGluZT8udXBkYXRlKHsgY3VycmVudDogMCwgZHVyYXRpb246IHRoaXMuZ2V0RHVyYXRpb24oKSB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlZWsoMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXlQcm9taXNlID0gdGhpcy5tZWRpYS5wbGF5KCk7XG5cbiAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgKHBsYXlQcm9taXNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2F1dG9wbGF5LWZhaWxlZCcpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2F1dG9wbGF5LWZhaWxlZCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzaG93IHBvc3RlciBpZiBhdXRvcGxheSBmYWlsczpcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdzaG91bGQtcGxheScpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHVibGljIHBhdXNlKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMubWVkaWEgfHwgdGhpcy5tZWRpYS5wYXVzZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMubWVkaWEucGF1c2UoKTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHRvZ2dsZShwbGF5PzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBwbGF5aW5nOiBib29sZWFuID0gIXRoaXMubWVkaWEucGF1c2VkO1xuXG4gICAgICAgIGlmICh0eXBlb2YgcGxheSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmICghIXBsYXkgJiYgIXBsYXlpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXBsYXkgJiYgISFwbGF5aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGxheWluZyA/IHRoaXMucGF1c2UoKSA6IHRoaXMucGxheSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFwbGF5aW5nO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgdW5sb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5tZWRpYSkge1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5wYXVzZSgpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5zcmMgPSAnJztcbiAgICAgICAgICAgIHRoaXMubWVkaWEubG9hZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzZWVrKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmdldER1cmF0aW9uKCkpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMubWVkaWEuY3VycmVudFRpbWUgPSB0aGlzLmdldFN0YXJ0KCkgKyB0aGlzLmdldER1cmF0aW9uKCkgKiB2YWx1ZTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHNlZWtUb1RpbWUodGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVkaWEuY3VycmVudFRpbWUgPSB0aGlzLmdldFN0YXJ0KCkgKyB0aW1lO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc2tpcEZvcndhcmQobW9yZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWVrVG9UaW1lKHRoaXMuZ2V0Q3VycmVudFRpbWUoKSArIChtb3JlID8gMTAgOiA1KSk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBza2lwQmFja3dhcmQobW9yZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWVrVG9UaW1lKHRoaXMuZ2V0Q3VycmVudFRpbWUoKSAtIChtb3JlID8gMTAgOiA1KSk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBnb1Jld2luZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tZWRpYS5jdXJyZW50VGltZSAtPSAxNTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGdvRm9yd2FyZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tZWRpYS5jdXJyZW50VGltZSArPSAxNTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGVuZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWVrKDEpO1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyByZXN0YXJ0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlZWsoMCk7XG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc2V0Vm9sdW1lKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tZWRpYS52b2x1bWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5tZWRpYS5tdXRlZCA9IHZhbHVlID09PSAwO1xuICAgICAgICBzdXBlci5zZXRWb2x1bWUodmFsdWUpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgdG9nZ2xlTXV0ZShtdXRlPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAodHlwZW9mIG11dGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhLm11dGVkID0gbXV0ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWEubXV0ZWQgPSAhdGhpcy5tZWRpYS5tdXRlZDtcbiAgICAgICAgfVxuICAgICAgICAhdGhpcy5tZWRpYS5tdXRlZCAmJiB0aGlzLm1lZGlhLnZvbHVtZSA8IDAuMDUgJiYgKHRoaXMubWVkaWEudm9sdW1lID0gMSk7XG4gICAgICAgIHRoaXMudWkudm9sdW1lLnVwZGF0ZSh0aGlzLm1lZGlhLnZvbHVtZSk7XG4gICAgICAgIHRoaXMudWkudm9sdW1lLnRvZ2dsZSh0aGlzLm1lZGlhLm11dGVkKTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHZvbHVtZVVwKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5tZWRpYS5tdXRlZCkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVNdXRlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Vm9sdW1lKDAuMDUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRWb2x1bWUoTWF0aC5taW4oMSwgdGhpcy5tZWRpYS52b2x1bWUgKyAwLjA1KSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHVibGljIHZvbHVtZURvd24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0Vm9sdW1lKE1hdGgubWF4KDAsIHRoaXMubWVkaWEudm9sdW1lIC0gMC4wNSkpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc2V0U3BlZWQoc3BlZWQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBjb25zdHJhaW5lZFNwZWVkID0gUGxheWVyU2V0dGluZ3MuY29uc3RyYWluU3BlZWQoc3BlZWQpO1xuICAgICAgICB0aGlzLm1lZGlhLnBsYXliYWNrUmF0ZSA9IGNvbnN0cmFpbmVkU3BlZWQ7XG4gICAgICAgIHN1cGVyLnNldFNwZWVkKGNvbnN0cmFpbmVkU3BlZWQpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3BlZWRVcCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXRTcGVlZCh0aGlzLm1lZGlhLnBsYXliYWNrUmF0ZSArIFBsYXllclNldHRpbmdzLlNQRUVEX1NURVApO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3BlZWREb3duKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldFNwZWVkKHRoaXMubWVkaWEucGxheWJhY2tSYXRlIC0gUGxheWVyU2V0dGluZ3MuU1BFRURfU1RFUCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzZXRIb3RzcG90cyhkYXRhKTogdm9pZCB7XG4gICAgICAgIHRoaXMudWkudGltZWxpbmUuYWRkSG90c3BvdHMoZGF0YSwgdGhpcy5nZXREdXJhdGlvbigpKTtcbiAgICAgICAgdGhpcy51aS5wb3B1cHMubG9hZERhdGEoZGF0YSk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBpc1BhdXNlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWEucGF1c2VkO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgc2V0dXAoKTogdm9pZCB7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVQbGF5ZXIoKTtcblxuICAgICAgICAvLyBtYWtlIHN1cmUgcmF0aW9zIGFyZSBmbG9hdCBudW1iZXJzOlxuICAgICAgICB0aGlzLnNldHRpbmdzLnJhdGlvID0gcGFyc2VGbG9hdChgJHt0aGlzLnNldHRpbmdzLnJhdGlvfWApO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJhdGlvTW9iaWxlID0gPG51bWJlcj5wYXJzZUZsb2F0KGAke3RoaXMuc2V0dGluZ3MucmF0aW9Nb2JpbGV9YCk7XG5cblxuICAgICAgICAvLyByZW1vdmUgbW9iaWxlIHJhdGlvIGlmIG5vIG1vYmlsZSBzcmM6XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5zcmNNb2JpbGUgfHwgdGhpcy5zZXR0aW5ncy5zcmNNb2JpbGUgPT09ICcnKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zZXR0aW5ncy5yYXRpb01vYmlsZTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNldHRpbmdzLnNyY01vYmlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vYmlsZSBzcmM6XG4gICAgICAgIGlmICghIWJyb3dzZXIubW9iaWxlICYmIHRoaXMuc2V0dGluZ3Muc3JjTW9iaWxlICYmIHRoaXMuc2V0dGluZ3Muc3JjTW9iaWxlICE9PSB0aGlzLm1lZGlhLnNyYykge1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5zcmMgPSBkZWNvZGVVUkwodGhpcy5zZXR0aW5ncy5zcmNNb2JpbGUpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5sb2FkKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWJyb3dzZXIubW9iaWxlICYmIHRoaXMuc2V0dGluZ3Muc3JjICYmIHRoaXMuc2V0dGluZ3Muc3JjICE9PSB0aGlzLm1lZGlhLnNyYykge1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5zcmMgPSBkZWNvZGVVUkwodGhpcy5zZXR0aW5ncy5zcmMpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5sb2FkKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB2b2x1bWU6XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mudm9sdW1lICYmICh0aGlzLm1lZGlhLnZvbHVtZSA9IHRoaXMuc2V0dGluZ3Mudm9sdW1lKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5tdXRlZCA9IHRoaXMubWVkaWEubXV0ZWQ7XG5cbiAgICAgICAgLy8gYXV0b3BsYXk6XG4gICAgICAgIC8vIGlmICh0aGlzLm1lZGlhLmF1dG9wbGF5IHx8IHRoaXMuc2V0dGluZ3MuYXV0b3BsYXkpIHtcbiAgICAgICAgLy8gICAgIHRoaXMuc2V0dGluZ3MuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAvLyAgICAgdGhpcy5tZWRpYS5hdXRvcGxheSA9IGZhbHNlO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gbG9vcDpcbiAgICAgICAgaWYgKHRoaXMubWVkaWEubG9vcCkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5sb29wID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sb29wKSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhLmxvb3AgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcG9zdGVyOlxuICAgICAgICBjb25zdCBtZWRpYSA9IDxIVE1MVmlkZW9FbGVtZW50PiB0aGlzLm1lZGlhO1xuICAgICAgICBpZiAobWVkaWEucG9zdGVyICYmICF0aGlzLnNldHRpbmdzLnBvc3Rlcikge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wb3N0ZXIgPSBtZWRpYS5wb3N0ZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5tZWRpYS5jb250cm9scykge1xuICAgICAgICAgICAgICAgIG1lZGlhLnBvc3RlciA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29udHJvbHM6XG4gICAgICAgIGlmICghIXRoaXMubWVkaWEuY29udHJvbHMgfHwgdGhpcy5zZXR0aW5ncy5jb250cm9scykge1xuICAgICAgICAgICAgdGhpcy5idWlsZFVJKCk7XG4gICAgICAgICAgICB0aGlzLm1lZGlhLmNvbnRyb2xzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm1lZGlhLnJlbW92ZUF0dHJpYnV0ZSgnY29udHJvbHMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuXG4gICAgICAgIC8vIHNlZWsgdG8gcGFyYW0gb3IgdG8gbG9jYWwgc3RvcmFnZTpcbiAgICAgICAgIXRoaXMuc2Vla1RvUGFyYW1zKCkgJiYgdGhpcy5zZXR0aW5ncy5jYWNoZVRpbWUgJiYgdGhpcy5zZWVrVG9DYWNoZWQoKTtcblxuICAgICAgICAvLyBzZXQgY2FjaGVkIHZvbHVtZTpcbiAgICAgICAgY29uc3QgY2FjaGVkVm9sdW1lID0gZ2V0U3RvcmFnZUl0ZW0oUGxheWVyU3RvcmFnZS5WT0xVTUUpO1xuICAgICAgICB0aGlzLnVpICYmIHRoaXMudWkudm9sdW1lPy50b2dnbGUodGhpcy5zZXR0aW5ncy5tdXRlZCk7XG4gICAgICAgIHRoaXMuc2V0Vm9sdW1lKHBhcnNlRmxvYXQoY2FjaGVkVm9sdW1lKSB8fCB0aGlzLm1lZGlhLnZvbHVtZSk7XG5cbiAgICAgICAgLy8gc2V0IHBsYXliYWNrIHJhdGU6XG4gICAgICAgIGNvbnN0IGNhY2hlZFNwZWVkID0gZ2V0U3RvcmFnZUl0ZW0oUGxheWVyU3RvcmFnZS5TUEVFRCk7XG4gICAgICAgIHRoaXMuc2V0U3BlZWQocGFyc2VGbG9hdChjYWNoZWRTcGVlZCkgfHwgMSk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBjcmVhdGVQbGF5ZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVkaWEgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignYXVkaW8sIHZpZGVvJyk7XG4gICAgICAgIGlmICghdGhpcy5tZWRpYSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVmlkZW8vQXVkaW8gY29tcG9uZW50IG11c3QgY29udGFpbiBodG1sIGA8YXVkaW8+YCBvciBgPHZpZGVvPmAgZWxlbWVudCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0F1ZGlvID0gdGhpcy5tZWRpYS50YWdOYW1lID09PSAnQVVESU8nO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgYnVpbGRVSSgpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuYnVpbGRVSSgpO1xuICAgICAgICB0aGlzLmxvYWRDYXB0aW9ucygpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgbG9hZENhcHRpb25zKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjYXB0aW9uc0VsID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbGF5ZXItY2MnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY2FwdGlvbnNFbCAmJiB0aGlzLnVpICYmICh0aGlzLnVpLmNhcHRpb25zID0gbmV3IFZpZGVvQ2FwdGlvbnMoY2FwdGlvbnNFbCwgdGhpcy52aWV3KSk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBiaW5kUGxheWVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCAoKSA9PiB0aGlzLm9uTG9hZGVkKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4gdGhpcy5vbkxvYWRlZCgpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKCdkdXJhdGlvbmNoYW5nZScsICgpID0+IHRoaXMub25EdXJhdGlvbkNoYW5nZSgpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKCd1cGRhdGVNZWRpYVN0YXRlJywgKCkgPT4gdGhpcy5vbkR1cmF0aW9uQ2hhbmdlKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgKCkgPT4gdGhpcy5vblByb2dyZXNzKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ3VwZGF0ZU1lZGlhU3RhdGUnLCAoKSA9PiB0aGlzLm9uUHJvZ3Jlc3MoKSk7XG4gICAgICAgIHRoaXMubWVkaWEuYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsICgpID0+IHRoaXMub25UaW1ldXBkYXRlKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB0aGlzLm9uUGxheSgpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgKCkgPT4gdGhpcy5vbkNhbnBsYXkoKSk7XG4gICAgICAgIHRoaXMubWVkaWEuYWRkRXZlbnRMaXN0ZW5lcigncGxheWluZycsICgpID0+IHRoaXMub25QbGF5aW5nKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgKCkgPT4gdGhpcy5vblBhdXNlKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCAoKSA9PiB0aGlzLm9uV2FpdGluZygpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsICgpID0+IHRoaXMub25FbmQoKSk7XG4gICAgICAgIHRoaXMubWVkaWEuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlID0+IHRoaXMub25FcnJvcihlKSk7XG5cbiAgICAgICAgaWYgKHRoaXMubWVkaWEucmVhZHlTdGF0ZSA+PSBNZWRpYVN0YXRlLkhBVkVfQ1VSUkVOVF9EQVRBKSB7XG4gICAgICAgICAgICB0aGlzLm9uTG9hZGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIHVuYmluZFBsYXllcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkZWRkYXRhJywgKCkgPT4gdGhpcy5vbkxvYWRlZCgpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHRoaXMub25Mb2FkZWQoKSk7XG4gICAgICAgIHRoaXMubWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHVyYXRpb25jaGFuZ2UnLCAoKSA9PiB0aGlzLm9uRHVyYXRpb25DaGFuZ2UoKSk7XG4gICAgICAgIHRoaXMubWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXBkYXRlTWVkaWFTdGF0ZScsICgpID0+IHRoaXMub25EdXJhdGlvbkNoYW5nZSgpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHRoaXMub25Qcm9ncmVzcygpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCd1cGRhdGVNZWRpYVN0YXRlJywgKCkgPT4gdGhpcy5vblByb2dyZXNzKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCAoKSA9PiB0aGlzLm9uVGltZXVwZGF0ZSgpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCdwbGF5JywgKCkgPT4gdGhpcy5vblBsYXkoKSk7XG4gICAgICAgIHRoaXMubWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHRoaXMub25DYW5wbGF5KCkpO1xuICAgICAgICB0aGlzLm1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCAoKSA9PiB0aGlzLm9uUGxheWluZygpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCdwYXVzZScsICgpID0+IHRoaXMub25QYXVzZSgpKTtcbiAgICAgICAgdGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4gdGhpcy5vbldhaXRpbmcoKSk7XG4gICAgICAgIHRoaXMubWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKSA9PiB0aGlzLm9uRW5kKCkpO1xuICAgICAgICB0aGlzLm1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZSA9PiB0aGlzLm9uRXJyb3IoZSkpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgb25Mb2FkZWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudWkgJiYgdGhpcy51aS5jYXB0aW9ucz8ubG9hZCh0aGlzLm1lZGlhKTtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lKCk7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgb25EdXJhdGlvbkNoYW5nZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lKCk7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgb25Qcm9ncmVzcygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lKCk7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgb25UaW1ldXBkYXRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbnN0cmFpblRpbWUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lKCk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBvbkVycm9yKGUpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudmlldyAmJiBlLnRhcmdldC5uZXR3b3JrU3RhdGUgJiYgZS50YXJnZXQubmV0d29ya1N0YXRlID09PSAzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYENhbid0IGxvYWQgbWVkaWEgJHsoZS50YXJnZXQgYXMgSFRNTE1lZGlhRWxlbWVudCkuc3JjfWApO1xuICAgICAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC5hZGQoJ2lzLWVycm9yJyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHByb3RlY3RlZCBvbkJlZm9yZXVubG9hZCgpIHtcbiAgICAgICAgdGhpcy5jYWNoZVRpbWVQb3NpdGlvbih0cnVlKTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIHVwZGF0ZVRpbWUoKTogdm9pZCB7XG5cbiAgICAgICAgaWYgKCF0aGlzLm1lZGlhKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmdldEN1cnJlbnRUaW1lKCk7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5nZXREdXJhdGlvbigpO1xuICAgICAgICBjb25zdCB7IGJ1ZmZlcmVkIH0gPSB0aGlzLm1lZGlhO1xuICAgICAgICBjb25zdCBidWZmZXJlZFRpbWUgPSBidWZmZXJlZCAmJiBidWZmZXJlZC5sZW5ndGggPyBidWZmZXJlZC5lbmQoMCkgOiAwO1xuXG4gICAgICAgIHRoaXMudWkudGltZS51cGRhdGUoeyBkdXJhdGlvbiwgY3VycmVudCB9LCB0aGlzLnNldHRpbmdzLnRpbWVGb3JtYXRMb25nKTtcbiAgICAgICAgdGhpcy51aS50aW1lbGluZS51cGRhdGUoeyBkdXJhdGlvbiwgYnVmZmVyZWQ6IGJ1ZmZlcmVkVGltZSwgY3VycmVudCB9KTtcbiAgICAgICAgdGhpcy51aS5wb3B1cHMuY2hlY2soY3VycmVudCk7XG5cbiAgICAgICAgdGhpcy52aWV3LmNsYXNzTGlzdC50b2dnbGUoJ2lzLXN0YXJ0ZWQnLCBjdXJyZW50ID4gdGhpcy5zZXR0aW5ncy5yZWFkeVRpbWUpO1xuXG4gICAgICAgIHRoaXMuY2FjaGVUaW1lUG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFBsYXllckV2ZW50cy5USU1FX1VQREFURSwgY3VycmVudCk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBzZWVrVG9QYXJhbXMoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSAobmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSkuZ2V0KCd0aW1lJyk7XG4gICAgICAgIGlmICh0aW1lKSB7XG4gICAgICAgICAgICB0aGlzLnNlZWtUb1RpbWUocGFyc2VJbnQodGltZSwgMTApKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIHNlZWtUb0NhY2hlZCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IG5vcm1hbGl6ZVVybCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xuICAgICAgICBjb25zdCBjYWNoZWRUaW1lID0gZ2V0U3RvcmFnZUl0ZW0oUGxheWVyU3RvcmFnZS5TRUVLICsgcGF0aCk7XG4gICAgICAgIGNhY2hlZFRpbWUgJiYgdGhpcy5zZWVrVG9UaW1lKHBhcnNlRmxvYXQoY2FjaGVkVGltZSkpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgY2FjaGVUaW1lUG9zaXRpb24oZm9yY2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBub3JtYWxpemVVcmwod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICAgICAgY29uc3QgdGltZSA9IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSA+PSB0aGlzLmdldER1cmF0aW9uKCkgLSAxID8gMCA6IHRoaXMuZ2V0Q3VycmVudFRpbWUoKTtcbiAgICAgICAgKCFicm93c2VyLmlvcyB8fCBmb3JjZSkgJiYgc2V0U3RvcmFnZUl0ZW0oUGxheWVyU3RvcmFnZS5TRUVLICsgcGF0aCwgYCR7dGltZX1gKTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIGdldER1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmR1cmF0aW9uIHx8IHRoaXMubWVkaWEuZHVyYXRpb247XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0U3RhcnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MudGltZUZyb20gfHwgMDtcbiAgICB9XG5cblxuICAgIHByb3RlY3RlZCBnZXRDdXJyZW50VGltZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYS5jdXJyZW50VGltZSAtIHRoaXMuZ2V0U3RhcnQoKTtcbiAgICB9XG5cblxuICAgIHByb3RlY3RlZCBjb25zdHJhaW5UaW1lKCk6IHZvaWQge1xuXG4gICAgICAgIGlmICghdGhpcy5tZWRpYSkgeyByZXR1cm47IH1cblxuICAgICAgICBpZiAodGhpcy5tZWRpYS5jdXJyZW50VGltZSA8IHRoaXMuZ2V0U3RhcnQoKSkge1xuICAgICAgICAgICAgdGhpcy5tZWRpYS5jdXJyZW50VGltZSA9IHRoaXMuZ2V0U3RhcnQoKTtcbiAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1lZGlhLmN1cnJlbnRUaW1lID09PSB0aGlzLmdldFN0YXJ0KCkgKyB0aGlzLmdldER1cmF0aW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMub25FbmQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1lZGlhLmN1cnJlbnRUaW1lID4gdGhpcy5nZXRTdGFydCgpICsgdGhpcy5nZXREdXJhdGlvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhLmN1cnJlbnRUaW1lID0gdGhpcy5nZXRTdGFydCgpICsgdGhpcy5nZXREdXJhdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuZXhwb3J0IGVudW0gTWVkaWFTdGF0ZSB7XG4gICAgSEFWRV9OT1RISU5HLFxuICAgIEhBVkVfTUVUQURBVEEsXG4gICAgSEFWRV9DVVJSRU5UX0RBVEEsXG4gICAgSEFWRV9GVVRVUkVfREFUQSxcbiAgICBIQVZFX0VOT1VHSF9EQVRBLFxufVxuXG5cblxuZXhwb3J0IGNsYXNzIFBsYXllclN0b3JhZ2Uge1xuICAgIHB1YmxpYyBzdGF0aWMgQ0NfQUNUSVZFOiBzdHJpbmcgPSAnYWN0aXZlJztcbiAgICBwdWJsaWMgc3RhdGljIENDX0lOREVYOiBzdHJpbmcgPSAnY2FwdGlvbnMnO1xuICAgIHB1YmxpYyBzdGF0aWMgQ0NfTk9UX0FDVElWRTogc3RyaW5nID0gJ25vdC1hY3RpdmUnO1xuICAgIHB1YmxpYyBzdGF0aWMgQ0M6IHN0cmluZyA9ICdjYyc7XG4gICAgcHVibGljIHN0YXRpYyBTRUVLOiBzdHJpbmcgPSAnc2Vlayc7XG4gICAgcHVibGljIHN0YXRpYyBTUEVFRDogc3RyaW5nID0gJ3NwZWVkJztcbiAgICBwdWJsaWMgc3RhdGljIFZPTFVNRTogc3RyaW5nID0gJ3ZvbHVtZSc7XG59XG5cblxuXG5leHBvcnQgdHlwZSBQb3B1cERhdGEgPSB7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgc2Vzc2lvbjogbnVtYmVyO1xuICAgIHRpbWVTdGFydDogbnVtYmVyO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgY29sb3I6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGltYWdlOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHNob3duPzogYm9vbGVhbjtcbiAgICB0aW1lbGluZT87XG59XG4iLCJpbXBvcnQgeyBnZXRTdG9yYWdlSXRlbSwgc2V0U3RvcmFnZUl0ZW0gfSBmcm9tICcuLi8uLi9VdGlscyc7XG5pbXBvcnQgeyBQbGF5ZXJTdG9yYWdlIH0gZnJvbSAnLi9WaWRlby50eXBlcyc7XG5cblxuZXhwb3J0IGNsYXNzIFZpZGVvQ2FwdGlvbnMge1xuXG5cbiAgICBwcm90ZWN0ZWQgdHJhY2tzOiBUZXh0VHJhY2tMaXN0IHwgVGV4dFRyYWNrTGlzdFtdO1xuICAgIHByb3RlY3RlZCBjdXJyZW50SW5kZXg6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgaXNBY3RpdmU6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBjYXB0aW9uczogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBidG46IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgbGlzdEJ1dHRvbnM6IEhUTUxMSUVsZW1lbnRbXTtcbiAgICBwcml2YXRlIHRpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuXG5cblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3OiBIVE1MRWxlbWVudCwgcHJvdGVjdGVkIHBsYXllckVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnBsYXllckVsID0gcGxheWVyRWw7XG4gICAgICAgIHRoaXMuYnRuID0gdmlldy5xdWVyeVNlbGVjdG9yKCcuanMtcGxheWVyLWNjLWJ0bicpO1xuICAgICAgICB0aGlzLmNhcHRpb25zID0gcGxheWVyRWwucXVlcnlTZWxlY3RvcignLmpzLXBsYXllci1jYy10ZXh0Jyk7XG4gICAgICAgIHRoaXMubGlzdEJ1dHRvbnMgPSBbLi4udmlldy5xdWVyeVNlbGVjdG9yQWxsKCcuanMtcGxheWVyLWNjLWl0ZW0nKV0gYXMgSFRNTExJRWxlbWVudFtdO1xuXG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbCA9IG51bGw7XG4gICAgICAgIHRoaXMuYnRuID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYXB0aW9ucyA9IG51bGw7XG4gICAgICAgIHRoaXMubGlzdEJ1dHRvbnMgPSBudWxsO1xuICAgICAgICB0aGlzLnVubG9hZENDKCk7XG4gICAgICAgIHRoaXMudHJhY2tzID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBudWxsO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgbG9hZChtZWRpYTogSFRNTE1lZGlhRWxlbWVudCB8IEhUTUxNZWRpYUVsZW1lbnRbXSk6IHZvaWQge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVkaWEpICYmIG1lZGlhLnRleHRUcmFja3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJFbC5jbGFzc0xpc3QuYWRkKCdoYXMtY2MnKTtcbiAgICAgICAgICAgIHRoaXMudHJhY2tzID0gbWVkaWEudGV4dFRyYWNrcztcbiAgICAgICAgICAgIFsuLi50aGlzLnRyYWNrc10uZm9yRWFjaCgodHJhY2s6IFRleHRUcmFjaykgPT4geyB0cmFjay5tb2RlID0gJ2hpZGRlbic7IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJFbC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtY2MnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2hlY2tMb2NhbFN0b3JhZ2UoKTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9ICF0aGlzLmlzQWN0aXZlO1xuICAgICAgICBzZXRTdG9yYWdlSXRlbShQbGF5ZXJTdG9yYWdlLkNDLCB0aGlzLmlzQWN0aXZlID8gUGxheWVyU3RvcmFnZS5DQ19BQ1RJVkUgOiBQbGF5ZXJTdG9yYWdlLkNDX05PVF9BQ1RJVkUpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRDQyh0aGlzLmN1cnJlbnRJbmRleCA+PSAwID8gdGhpcy5jdXJyZW50SW5kZXggOiAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5sb2FkQ0MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudmlldy5jbGFzc0xpc3QuYWRkKCdpcy11cGRhdGluZycpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdXBkYXRpbmcnKSwgKDYwMCArIDMwMCkpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc2hvd05hdGl2ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50cmFja3MgJiYgWy4uLnRoaXMudHJhY2tzXS5mb3JFYWNoKCh0cmFjazogVGV4dFRyYWNrKSA9PiB7XG4gICAgICAgICAgICB0cmFjay5tb2RlID0gdHJhY2subW9kZSA9PT0gJ2hpZGRlbicgPyAnc2hvd2luZycgOiAnZGlzYWJsZWQnO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGhpZGVOYXRpdmUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudHJhY2tzICYmIFsuLi50aGlzLnRyYWNrc10uZm9yRWFjaCgodHJhY2s6IFRleHRUcmFjaykgPT4ge1xuICAgICAgICAgICAgdHJhY2subW9kZSA9IHRyYWNrLm1vZGUgPT09ICdzaG93aW5nJyA/ICdoaWRkZW4nIDogJ2Rpc2FibGVkJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCBsb2FkQ0MoaW5kZXg6IG51bWJlcik6IHZvaWQge1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMudHJhY2tzKSkgeyByZXR1cm47IH1cblxuICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpbmRleDtcblxuICAgICAgICBzZXRTdG9yYWdlSXRlbShQbGF5ZXJTdG9yYWdlLkNDX0lOREVYLCBgJHtpbmRleH1gKTtcbiAgICAgICAgc2V0U3RvcmFnZUl0ZW0oUGxheWVyU3RvcmFnZS5DQywgUGxheWVyU3RvcmFnZS5DQ19BQ1RJVkUpO1xuXG4gICAgICAgIHRoaXMubG9hZFRyYWNrbGlzdCh0aGlzLnRyYWNrcyk7XG4gICAgICAgIHRoaXMudXBkYXRlQnV0dG9ucygpO1xuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgbG9hZFRyYWNrbGlzdCh0cmFja2xpc3Q6IFRleHRUcmFja0xpc3QpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0cmFja2xpc3QpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgWy4uLnRyYWNrbGlzdF0uZm9yRWFjaCgodHJhY2s6IFRleHRUcmFjaywgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB0cmFjay5tb2RlID0gaSA9PT0gdGhpcy5jdXJyZW50SW5kZXggPyAnaGlkZGVuJyA6ICdkaXNhYmxlZCc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRyYWNrID0gdHJhY2tsaXN0W3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgY29uc3QgeyBjdWVzIH0gPSB0cmFjaztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1ZTogVlRUQ3VlID0gY3Vlc1tpXSBhcyBWVFRDdWU7XG4gICAgICAgICAgICBjdWUub25lbnRlciA9IHRoaXMub25DdWVFbnRlcjtcbiAgICAgICAgICAgIGN1ZS5vbmV4aXQgPSB0aGlzLm9uQ3VlRXhpdDtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwcm90ZWN0ZWQgdW5sb2FkQ0MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50cmFja3MgJiYgWy4uLnRoaXMudHJhY2tzXS5mb3JFYWNoKCh0cmFjazogVGV4dFRyYWNrKSA9PiB7IHRyYWNrLm1vZGUgPSAnZGlzYWJsZWQnOyB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVCdXR0b25zKCk7XG4gICAgICAgIHNldFN0b3JhZ2VJdGVtKFBsYXllclN0b3JhZ2UuQ0MsIFBsYXllclN0b3JhZ2UuQ0NfTk9UX0FDVElWRSk7XG4gICAgfVxuXG5cblxuICAgIHByb3RlY3RlZCB1cGRhdGVCdXR0b25zKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxpc3RCdXR0b25zLmZvckVhY2goKGJ0biwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50ID0gKCF0aGlzLmlzQWN0aXZlICYmIGkgPT09IDApIHx8ICh0aGlzLmlzQWN0aXZlICYmIGkgLSAxID09PSB0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgICAgICAgICBidG4ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnLCBpc0N1cnJlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtY2FwdGlvbnMtb24nLCB0aGlzLmlzQWN0aXZlKTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIG9uQ3VlRW50ZXIgPSAoZTogRXZlbnQpOiBhbnkgPT4ge1xuICAgICAgICB0aGlzLmNhcHRpb25zICYmICh0aGlzLmNhcHRpb25zLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snKTtcbiAgICAgICAgdGhpcy5jYXB0aW9ucyAmJiAodGhpcy5jYXB0aW9ucy5pbm5lckhUTUwgPSBgPHNwYW4+JHsoZS5jdXJyZW50VGFyZ2V0IGFzIFZUVEN1ZSkudGV4dH08L3NwYW4+YCk7XG4gICAgfTtcblxuXG5cbiAgICBwcm90ZWN0ZWQgb25DdWVFeGl0ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmNhcHRpb25zICYmICh0aGlzLmNhcHRpb25zLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpO1xuICAgIH07XG5cblxuXG4gICAgcHJvdGVjdGVkIGNoZWNrTG9jYWxTdG9yYWdlKCk6IHZvaWQge1xuICAgICAgICBpZiAoZ2V0U3RvcmFnZUl0ZW0oUGxheWVyU3RvcmFnZS5DQykgPT09IFBsYXllclN0b3JhZ2UuQ0NfQUNUSVZFKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRDQyhwYXJzZUludChQbGF5ZXJTdG9yYWdlLkNDX0lOREVYLCAxMCkgfHwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBiaW5kKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVG9nZ2xlQnRuQ2xpY2spO1xuICAgICAgICB0aGlzLmxpc3RCdXR0b25zPy5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ0NUcmFja0NsaWNrKSk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgdW5iaW5kKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmJ0bj8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVG9nZ2xlQnRuQ2xpY2spO1xuICAgICAgICB0aGlzLmxpc3RCdXR0b25zPy5mb3JFYWNoKGJ0biA9PiBidG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ0NUcmFja0NsaWNrKSk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgb25Ub2dnbGVCdG5DbGljayA9IChlKTogdm9pZCA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIG9uQ0NUcmFja0NsaWNrID0gZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmRleCB8fCAtMSwgMTApO1xuICAgICAgICBpbmRleCA8IDAgPyB0aGlzLnVubG9hZENDKCkgOiB0aGlzLmxvYWRDQyhpbmRleCk7XG4gICAgfTtcbn1cbiIsImltcG9ydCBnc2FwIGZyb20gJ2dzYXAnO1xuaW1wb3J0IHsgYnJlYWtwb2ludCB9IGZyb20gJy4uL1NpdGUnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICcuLi9VdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBXcmFwcGVkVGV4dCBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBwcml2YXRlIGFsbEltYWdlczogSFRNTERpdkVsZW1lbnRbXTtcbiAgICBwcml2YXRlIHRpdGxlOiBIVE1MSGVhZGluZ0VsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjb250ZW50OiBIVE1MRGl2RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlcih2aWV3KTtcbiAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25zKCk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKCgpID0+IHRoaXMuY2hlY2tDb2xsaXNpb25zKCkpKTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgYmluZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hbGxJbWFnZXMgPSBbLi4udGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy13cmFwcGVkLWltYWdlJyldIGFzIEhUTUxEaXZFbGVtZW50W107XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcignLmpzLXdyYXBwZWQtdGl0bGUgLmhlYWRpbmcnKTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy52aWV3LnF1ZXJ5U2VsZWN0b3IoJy5qcy13cmFwcGVkLWNvbnRlbnQnKTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgY2hlY2tPdmVyZmxvdyhlbGVtZW50OiBIVE1MRGl2RWxlbWVudCwgY29udGFpbmVySGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKChlbGVtZW50Lm9mZnNldFRvcCArIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KSA+IGNvbnRhaW5lckhlaWdodCkge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSBgJHtjb250YWluZXJIZWlnaHQgLSBlbGVtZW50Lm9mZnNldEhlaWdodCAtIHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLm1hcmdpblRvcC5yZXBsYWNlKCdweCcsICcnKSwgMTApfXB4YDtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBjaGVja0NvbGxpc2lvbnMoKTogdm9pZCB7XG5cbiAgICAgICAgY29uc3QgbW0gPSBnc2FwLm1hdGNoTWVkaWEoKTtcblxuICAgICAgICBtbS5hZGQoJyhvcmllbnRhdGlvbjogbGFuZHNjYXBlKScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdCb3R0b20gPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRlbnQpLnBhZGRpbmdCb3R0b20ucmVwbGFjZSgncHgnLCAnJyksIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9IHRoaXMuY29udGVudC5vZmZzZXRIZWlnaHQgLSBwYWRkaW5nQm90dG9tO1xuXG4gICAgICAgICAgICBsZXQgcHJldmlvdXNIZWlnaHQgPSB0aGlzLnRpdGxlID8gKHRoaXMudGl0bGUub2Zmc2V0VG9wICsgdGhpcy50aXRsZS5vZmZzZXRIZWlnaHQpIDogMDtcblxuICAgICAgICAgICAgdGhpcy5hbGxJbWFnZXMuZm9yRWFjaChpbWFnZSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgJiYgdGhpcy5jaGVja092ZXJmbG93KGltYWdlLCBjb250YWluZXJIZWlnaHQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlLm9mZnNldFRvcCA8IHByZXZpb3VzSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlLnN0eWxlLnRvcCA9IGAke3ByZXZpb3VzSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwcmV2aW91c0hlaWdodCA9IGltYWdlLm9mZnNldFRvcCArIGltYWdlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocHJldmlvdXNIZWlnaHQgPiBjb250YWluZXJIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gYCR7cHJldmlvdXNIZWlnaHQgKyBwYWRkaW5nQm90dG9tfXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFicmVha3BvaW50LmRlc2t0b3ApIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgYXJyYXktY2FsbGJhY2stcmV0dXJuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgZ3NhcCB9IGZyb20gJ2dzYXAvZGlzdC9nc2FwJztcbmltcG9ydCB7IEhhbmRsZXIgfSBmcm9tICcuLi9IYW5kbGVyJztcbmltcG9ydCB7IElCcmVha3BvaW50IH0gZnJvbSAnLi4vQnJlYWtwb2ludCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NvbXBvbmVudCc7XG5pbXBvcnQgeyBjb21wb25lbnRzIH0gZnJvbSAnLi4vQ2xhc3Nlcyc7XG5pbXBvcnQgeyBJbWFnZXMgfSBmcm9tICcuLi93aWRnZXRzL0ltYWdlcyc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuLi9VdGlscyc7XG5cblxuZXhwb3J0IGNsYXNzIFBhZ2VFdmVudHMge1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUFJPR1JFU1M6IHN0cmluZyA9ICdwcm9ncmVzcyc7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDT01QTEVURTogc3RyaW5nID0gJ2NvbXBsZXRlJztcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENIQU5HRTogc3RyaW5nID0gJ2FwcGVuZCc7XG59XG5cblxuXG5leHBvcnQgY2xhc3MgUGFnZSBleHRlbmRzIEhhbmRsZXIge1xuXG4gICAgcHVibGljIGNvbXBvbmVudHM6IEFycmF5PENvbXBvbmVudD47XG5cblxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHZpZXc6IEhUTUxFbGVtZW50LCBvcHRpb25zPykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZpZXcuc3R5bGUub3BhY2l0eSA9ICcwJztcblxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5idWlsZENvbXBvbmVudHModGhpcy52aWV3LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29tcG9uZW50XScpKTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogcHJlbG9hZCBuZWNlc3NhcnkgYXNzZXRzOlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8Ym9vbGVhbj59IGxvYWRpbmcgaW1hZ2VzIHByb21pc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgcHJlbG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIEltYWdlcy5wcmVsb2FkKHRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoUGFnZUV2ZW50cy5DT01QTEVURSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogY2hlY2sgaWYgYW55IENvbXBvbmVudCBjYW4gYmUgY2hhbmdlZCBhZnRlciBvblN0YXRlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gcmV0dXJucyB0cnVlIHdoZW4gb25lIG9mIHRoZSBjb21wb25lbnRzXG4gICAgICogdGFrZXMgYWN0aW9uIGluIG9uU3RhdGUgZnVuY3Rpb24gY2FsbFxuICAgICAqL1xuICAgIHB1YmxpYyBvblN0YXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgY2hhbmdlZDogYm9vbGVhbiA9ICEhZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbXBvbmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudENoYW5nZWQ6IGJvb2xlYW4gPSBjb21wb25lbnQub25TdGF0ZSgpO1xuICAgICAgICAgICAgaWYgKCFjaGFuZ2VkICYmICEhY29tcG9uZW50Q2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIHBhZ2UgZW50ZXJpbmcgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IGFuaW1hdGlvbiBkZWxheVxuICAgICAqL1xuICAgIHB1YmxpYyBhbmltYXRlSW4oZGVsYXk/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbXBvbmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudHNbaV0uYW5pbWF0ZUluKGksIGRlbGF5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY29uc3QgYm94ZXMgPSBVdGlscy5maW5kVmlzaWJsZUJveGVzKHRoaXMudmlldy5xdWVyeVNlbGVjdG9yQWxsKCcuYm94JykpO1xuXG4gICAgICAgICAgICAvLyBnc2FwLmZyb21Ubyhib3hlcywgeyB5OiB3aW5kb3cuaW5uZXJIZWlnaHQgfSwge1xuICAgICAgICAgICAgLy8gICAgIHk6IDAsXG4gICAgICAgICAgICAvLyAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgICAgIC8vICAgICBzdGFnZ2VyOiAwLjE1LFxuICAgICAgICAgICAgLy8gICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIC8vICAgICBvblN0YXJ0OiAoKSA9PiBnc2FwLnNldCh0aGlzLnZpZXcsIHsgb3BhY2l0eTogMSB9KSxcbiAgICAgICAgICAgIC8vICAgICBvbkNvbXBsZXRlOiAoKSA9PiByZXNvbHZlKCksXG4gICAgICAgICAgICAvLyB9KTtcblxuICAgICAgICAgICAgZ3NhcC50byh0aGlzLnZpZXcsIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4gcmVzb2x2ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBwYWdlIGV4aXQgYW5pbWF0aW9uXG4gICAgICogKGNhbGxlZCBhZnRlciBuZXcgY29udGVudCBpcyBsb2FkZWQgYW5kIGJlZm9yZSBpcyByZW5kZXJlZClcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPGJvb2xlYW4+fSBhbmltYXRpb24gcHJvbWlzZVxuICAgICAqL1xuICAgIHB1YmxpYyBhbmltYXRlT3V0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBhbmltYXRpb24gb2YgdGhlIHBhZ2U6XG4gICAgICAgIGNvbnN0IHBhZ2VBbmltYXRpb25Qcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBnc2FwLnRvKHRoaXMudmlldywge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjIsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFuaW1hdGlvbnMgb2YgYWxsIGNvbXBvbmVudHM6XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEFuaW1hdGlvbnM6IFByb21pc2U8dm9pZD5bXSA9IHRoaXMuY29tcG9uZW50cy5tYXAob2JqID0+IG9iai5hbmltYXRlT3V0KCkpO1xuXG4gICAgICAgIC8vIHJldHVybiBvbmUgcHJvbWlzZSB3YWl0aW5nIGZvciBhbGwgYW5pbWF0aW9uczpcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWxsUHJvbWlzZXM6IFByb21pc2U8dm9pZD5bXSA9IGNvbXBvbmVudEFuaW1hdGlvbnMuY29uY2F0KHBhZ2VBbmltYXRpb25Qcm9taXNlKTtcblxuICAgICAgICAgICAgUHJvbWlzZS5hbGw8dm9pZD4oYWxsUHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogcmVzaXplIGhhbmRsZXJcbiAgICAgKiBAcGFyYW0ge1t0eXBlXX0gd2R0ICAgICAgICB3aW5kb3cgd2lkdGhcbiAgICAgKiBAcGFyYW0ge1t0eXBlXX0gaGd0ICAgICAgICB3aW5kb3cgaGVpZ2h0XG4gICAgICogQHBhcmFtIHtbdHlwZV19IGJyZWFrcG9pbnQgSUJyZWFrcG9pbnQgb2JqZWN0XG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgcHVibGljIHJlc2l6ZSh3ZHQ6IG51bWJlciwgaGd0OiBudW1iZXIsIGJyZWFrcG9pbnQ6IElCcmVha3BvaW50LCBicENoYW5nZWQ/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tcG9uZW50cy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5yZXNpemUod2R0LCBoZ3QpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogY2xlYW51cCB3aGVuIGNsb3NpbmcgUGFnZVxuICAgICAqL1xuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaChpdGVtID0+IGl0ZW0uZGVzdHJveSgpKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW107XG4gICAgICAgIHRoaXMudmlldyA9IG51bGw7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB9XG5cblxuXG4gICAgcHJvdGVjdGVkIGJ1aWxkQ29tcG9uZW50cyhjb21wb25lbnRzTGlzdDogTm9kZUxpc3QpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW107XG5cbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gWy4uLmNvbXBvbmVudHNMaXN0XS5tYXAoZWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IDxIVE1MRWxlbWVudD5lbDtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCAmJiBjb21wb25lbnRzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnM6IE9iamVjdDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5kYXRhc2V0Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IEpTT04ucGFyc2UoZWxlbWVudC5kYXRhc2V0Lm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBuZXcgY29tcG9uZW50c1tuYW1lXShlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LmNvbnNvbGUud2FybignVGhlcmUgaXMgbm8gYCVzYCBjb21wb25lbnQhJywgbmFtZSk7XG4gICAgICAgIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBvbkNvbXBvbmVudENoYW5nZSA9IChlbCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmJ1aWxkQ29tcG9uZW50cyhlbC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb21wb25lbnRdJykpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoUGFnZUV2ZW50cy5DSEFOR0UsIGVsKTtcbiAgICB9O1xuXG5cblxuICAgIC8vIHNob3J0IGNhbGxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBwcml2YXRlIGNhbGxBbGwoZm46IHN0cmluZywgLi4uYXJncyk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tcG9uZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5jb21wb25lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnRbZm5dID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50W2ZuXSguLi5hcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vZGVmaW5pdGlvbnMvdHdpZy5kLnRzXCIgLz5cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVOYW1lcyB7XG4gICAgcHVibGljIHN0YXRpYyBMSUdIVEJPWCA9ICdsaWdodGJveCc7XG4gICAgcHVibGljIHN0YXRpYyBMSVZFU0VBUkNIID0gJ2xpdmVzZWFyY2gnO1xuICAgIHB1YmxpYyBzdGF0aWMgUExBWUVSID0gJ3BsYXllcic7XG59XG5cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZXMge1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KG5hbWU6IHN0cmluZyk6IFR3aWcuVGVtcGxhdGUge1xuICAgICAgICBjb25zdCB0bXBsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3RtcGwtJHtuYW1lfWApO1xuICAgICAgICBpZiAoIXRtcGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhlcmUgaXMgbm8gYCVzYCB0ZW1wbGF0ZSEnLCBuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUd2lnLnR3aWcoeyBkYXRhOiB0bXBsLmlubmVySFRNTCB9KTtcbiAgICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tY2FzZS1kZWNsYXJhdGlvbnMgKi9cbmltcG9ydCB7IFB1c2hTdGF0ZXMgfSBmcm9tICcuLi9QdXNoU3RhdGVzJztcbmltcG9ydCB7IFJlY2FwdGNoYSB9IGZyb20gJy4vUmVjYXB0Y2hhJztcbmltcG9ydCB7IHNlcmlhbGl6ZU9iamVjdCB9IGZyb20gJy4uL1V0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBJQXBpRGF0YSB7XG4gICAgdXJsPzogc3RyaW5nO1xuICAgIGJlZm9yZUNhbGw/OiBzdHJpbmc7XG4gICAgY2FsbGJhY2s/OiBzdHJpbmc7XG4gICAgZm9ybVNlbGVjdG9yPzogc3RyaW5nO1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tYW55XG4gICAgcGFyYW1zPzogYW55O1xuICAgIGFjdGlvbj86ICdQT1NUJyB8ICdERUxFVEUnIHwgJ0dFVCcgfCAnUFVUJyB8ICdQQVRDSCc7XG59XG5cbmludGVyZmFjZSBJQXBpRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBhcGk6IElBcGlEYXRhO1xufVxuXG5cbmV4cG9ydCBjbGFzcyBBUEkge1xuICAgIHByaXZhdGUgc3RhdGljIGJlZm9yZUNhbGxzID0ge1xuXG5cbiAgICAgICAgdmFsaWRhdGUoZGF0YTogSUFwaURhdGEsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICAgICAgbGV0IHBhc3NlZCA9IHRydWU7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1kb25lJykpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kb25lJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZXJyb3InKS5mb3JFYWNoKGVycm9yRWwgPT4ge1xuICAgICAgICAgICAgICAgIGVycm9yRWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgZXJyb3JFbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcmVxdWlyZWRdOm5vdChbZGF0YS1yZWNhcHRjaGFdKScpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmUudGVzdCh2YWx1ZSkgfHwgIXZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gdmFsdWUubGVuZ3RoID4gMCA/IFwiSXQgc2VlbXMgdGhlcmUncyBhbiBpc3N1ZSB3aXRoIHRoZSBlbWFpbCB5b3UgZW50ZXJlZC4gPGJyPiBQbGVhc2UgZG91YmxlLWNoZWNrIGFuZCB0cnkgYWdhaW4uXCIgOiAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNsb3Nlc3QoJ2ZpZWxkc2V0JykucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNsb3Nlc3QoJ2ZpZWxkc2V0JykucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzID0gKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFzcy5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcGFzcy5sZW5ndGggPiAwID8gJ2ludmFsaWQtcGFzcycgOiAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ1JlcXVpcmVkIGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWFbcmVxdWlyZWRdJykuZm9yRWFjaCh0ZXh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCh0ZXh0YXJlYSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KS52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRhcmVhLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ1JlcXVpcmVkIGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIGlmIChwYXNzZWQpIHtcbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbUmVjYXB0Y2hhID8gUmVjYXB0Y2hhLmNoZWNrKGVsIGFzIEhUTUxGb3JtRWxlbWVudCkgOiBudWxsXSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIEFQSS5jYWxsSXQoZGF0YSwgZWwpO1xuICAgICAgICAgICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZXJyb3InKS5mb3JFYWNoKGVycm9yRWwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JFbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy1lcnJvcnMnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaGFzLWVycm9ycycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHZhbGlkYXRlQmx1cihkYXRhOiBJQXBpRGF0YSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgICAgICBsZXQgcGFzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJyc7XG5cbiAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWRvbmUnKSkge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRvbmUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1lcnJvcicpLmZvckVhY2goZXJyb3JFbCA9PiB7XG4gICAgICAgICAgICAgICAgZXJyb3JFbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtyZXF1aXJlZF06bm90KFtkYXRhLXJlY2FwdGNoYV0pJykuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICgoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZS50ZXN0KHZhbHVlKSB8fCAhdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB2YWx1ZS5sZW5ndGggPiAwID8gJ05PVCBWQUxJRCBFLU1BSUwgRk9STUFUJyA6ICdSZXF1aXJlZCBmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2xvc2VzdCgnZmllbGRzZXQnKS5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2xvc2VzdCgnZmllbGRzZXQnKS5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3MgPSAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXNzLmxlbmd0aCA+IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBwYXNzLmxlbmd0aCA+IDAgPyAnaW52YWxpZC1wYXNzJyA6ICdSZXF1aXJlZCBmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdSZXF1aXJlZCBmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYVtyZXF1aXJlZF0nKS5mb3JFYWNoKHRleHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoKHRleHRhcmVhIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpLnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgaWYgKHBhc3NlZCkge1xuICAgICAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1lcnJvcicpLmZvckVhY2goZXJyb3JFbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yRWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yRWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtZXJyb3JzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2hhcy1lcnJvcnMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgIH07XG5cblxuICAgIHByaXZhdGUgc3RhdGljIGNhbGxiYWNrcyA9IHtcblxuXG4gICAgICAgIG9uU3Vic2NyaWJlKGRhdGE6IElBcGlEYXRhLCBlbDogSFRNTEVsZW1lbnQsIHJlc3BvbnNlKTogdm9pZCB7XG4gICAgICAgICAgICBsZXQgJG1lc3NhZ2UgPSBlbC5xdWVyeVNlbGVjdG9yKCcuanMtbWVzc2FnZScpO1xuXG4gICAgICAgICAgICBpZiAoISRtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2pzLW1lc3NhZ2UnLCAnbWVzc2FnZScpO1xuICAgICAgICAgICAgICAgIGVsLmFwcGVuZChkaXYpO1xuICAgICAgICAgICAgICAgICRtZXNzYWdlID0gZWwucXVlcnlTZWxlY3RvcignLmpzLW1lc3NhZ2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaHRtbCA9IChyZXNwb25zZS5tZXNzYWdlKTtcblxuICAgICAgICAgICAgJG1lc3NhZ2UuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaXMtY29tcGxldGVkJyk7XG5cbiAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykuZm9yRWFjaChlbGVtID0+IGVsZW0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2JsdXInKSkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2VuZE1lc3NhZ2UoZGF0YTogSUFwaURhdGEsIGVsOiBIVE1MRWxlbWVudCwgcmVzcG9uc2UpOiB2b2lkIHtcbiAgICAgICAgICAgIGxldCAkbWVzc2FnZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZXNzYWdlJyk7XG5cbiAgICAgICAgICAgIGlmICghJG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBlbC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJqcy1tZXNzYWdlIG1lc3NhZ2VcIj4nKTtcbiAgICAgICAgICAgICAgICAkbWVzc2FnZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZXNzYWdlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSAocmVzcG9uc2UubWVzc2FnZSk7XG5cbiAgICAgICAgICAgICRtZXNzYWdlLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLWNvbXBsZXRlZCcpO1xuXG4gICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goZWxlbSA9PiBlbGVtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdibHVyJykpKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZWxvYWQ6ICgpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIFB1c2hTdGF0ZXMucmVsb2FkKCk7XG4gICAgICAgIH0sXG4gICAgfTtcblxuXG4gICAgcHVibGljIHN0YXRpYyBiaW5kKHdoZXJlPzogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAgICAgICBbLi4uKHdoZXJlIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hcGldOm5vdChmb3JtKScpXVxuICAgICAgICAgICAgLmZvckVhY2goYXBpRWwgPT4ge1xuICAgICAgICAgICAgICAgIGFwaUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQVBJLm9uQWN0aW9uKTtcbiAgICAgICAgICAgICAgICBhcGlFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIEFQSS5vbkFjdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBbLi4uKHdoZXJlIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtW2RhdGEtYXBpXScpXS5mb3JFYWNoKGFwaUZvcm1FbCA9PiB7XG4gICAgICAgICAgICBhcGlGb3JtRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgQVBJLm9uQWN0aW9uKTtcbiAgICAgICAgICAgIGFwaUZvcm1FbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBBUEkub25BY3Rpb24pO1xuICAgICAgICAgICAgYXBpRm9ybUVsLnNldEF0dHJpYnV0ZSgnbm92YWxpZGF0ZScsICdub3ZhbGlkYXRlJyk7XG5cbiAgICAgICAgICAgIGFwaUZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtyZXF1aXJlZF0nKS5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhOiBJQXBpRGF0YSA9IHsgLi4uSlNPTi5wYXJzZShhcGlGb3JtRWwuZ2V0QXR0cmlidXRlKCdkYXRhLWFwaScpKSB9O1xuICAgICAgICAgICAgICAgICAgICBBUEkuYmVmb3JlQ2FsbHMudmFsaWRhdGVCbHVyKGRhdGEsIGFwaUZvcm1FbCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgc3RhdGljIGNhbGxJdChkYXRhQXBpOiBJQXBpRGF0YSwgZWw6IEhUTUxFbGVtZW50LCBjdXN0b21DYWxsYmFjaz86IEZ1bmN0aW9uKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEFQSS5wcmVwcm9jZXNzRGF0YShkYXRhQXBpLCBlbCk7XG5cbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaXMtZG9pbmctcmVxdWVzdCcpO1xuXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGRhdGEuYWN0aW9uIHx8ICdQT1NUJztcbiAgICAgICAgZGVsZXRlIGRhdGEuYWN0aW9uO1xuXG4gICAgICAgIGNvbnN0IHVybCA9IGRhdGEudXJsIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgZGVsZXRlIGRhdGEudXJsO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRvaW5nLXJlcXVlc3QnKTtcblxuICAgICAgICAgICAgY29uc3QgZGF0YUJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGRhdGEgYXMgYW55KTtcblxuICAgICAgICAgICAgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBhY3Rpb24sXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBkYXRhQm9keSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5vblN1Y2Nlc3MoZGF0YSwgZWwsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21DYWxsYmFjayAmJiB0eXBlb2YgY3VzdG9tQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUNhbGxiYWNrKGRhdGEsIGVsLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQVBJIGVycm9yOiAke2Vycm9yfWAsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgc3RhdGljIHByZXByb2Nlc3NEYXRhKGRhdGE6IElBcGlEYXRhLCBlbDogSFRNTEVsZW1lbnQpOiBJQXBpRGF0YSB7XG4gICAgICAgIC8vIGdldCBkYXRhIGlmIGFwaSBjYWxsZWQgb24gZm9ybSBlbGVtZW50OlxuICAgICAgICBpZiAoZWwubWF0Y2hlcygnZm9ybScpKSB7XG4gICAgICAgICAgICBkYXRhLnVybCA9ICFkYXRhLnVybCAmJiBlbC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpID8gZWwuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSA6IGRhdGEudXJsO1xuICAgICAgICAgICAgZGF0YSA9IE9iamVjdC5hc3NpZ24oZGF0YSwgc2VyaWFsaXplT2JqZWN0KGVsIGFzIEhUTUxGb3JtRWxlbWVudCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgaWYgYXBpIGNhbGxlZCBvbiBsaW5rIGVsZW1lbnQ6XG4gICAgICAgIGlmIChlbC5tYXRjaGVzKCdbaHJlZl0nKSkge1xuICAgICAgICAgICAgZGF0YS51cmwgPSAhZGF0YS51cmwgJiYgZWwuZ2V0QXR0cmlidXRlKCdocmVmJykgPyBlbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSA6IGRhdGEudXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IGFkZGl0aW9uYWwgZGF0YSBmcm9tIGV4dGVybmFsIGZvcm06XG4gICAgICAgIGlmIChkYXRhLmZvcm1TZWxlY3Rvcikge1xuICAgICAgICAgICAgZGF0YSA9IE9iamVjdC5hc3NpZ24oZGF0YSwgc2VyaWFsaXplT2JqZWN0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5mb3JtU2VsZWN0b3IpKSk7XG4gICAgICAgICAgICBkZWxldGUgZGF0YS5mb3JtU2VsZWN0b3I7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmbGF0dGVuOlxuICAgICAgICBpZiAoZGF0YS5wYXJhbXMpIHtcbiAgICAgICAgICAgIGRhdGEgPSBPYmplY3QuYXNzaWduKGRhdGEsIGRhdGEucGFyYW1zKTtcbiAgICAgICAgICAgIGRlbGV0ZSBkYXRhLnBhcmFtcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgb25BY3Rpb24gPSAoZTogRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNvbnN0IGVsID0gZS5jdXJyZW50VGFyZ2V0IGFzIElBcGlFbGVtZW50O1xuICAgICAgICBjb25zdCBkYXRhOiBJQXBpRGF0YSA9IHsgLi4uSlNPTi5wYXJzZShlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXBpJykpIH07XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEsIGVsKTtcblxuICAgICAgICAvLyBiZWZvcmVDYWxsIGhhbmRsZXI6XG4gICAgICAgIGlmIChkYXRhLmJlZm9yZUNhbGwpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmJlZm9yZUNhbGwgaW4gQVBJLmJlZm9yZUNhbGxzKSB7XG4gICAgICAgICAgICAgICAgQVBJLmJlZm9yZUNhbGxzW2RhdGEuYmVmb3JlQ2FsbF0oZGF0YSwgZWwpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEFQSS5jYWxsSXQoZGF0YSwgZWwpO1xuICAgIH07XG5cblxuICAgIHByaXZhdGUgc3RhdGljIG9uU3VjY2VzcyA9IChkYXRhOiBJQXBpRGF0YSwgZWw6IEhUTUxFbGVtZW50LCByZXNwb25zZSk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoZGF0YS5jYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKGRhdGEuY2FsbGJhY2sgaW4gQVBJLmNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIEFQSS5jYWxsYmFja3NbZGF0YS5jYWxsYmFja10oZGF0YSwgZWwsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgcmVmcmVzaCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXTtcblxuICAgICAgICBmb3Jtcy5mb3JFYWNoKGZvcm0gPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gWy4uLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmlzLWVycm9yJyksIC4uLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmhhcy1lcnJvcnMnKV07XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZXJyb3InKTtcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtZG9pbmctcmVxdWVzdCcsICdpcy1jb21wbGV0ZWQnLCAnaGFzLWVycm9ycycpO1xuXG5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGVycm9yTWVzc2FnZXMpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgICAgIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVyciBvZiBlcnJvcnMpIHtcbiAgICAgICAgICAgICAgICBlcnIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InLCAnaGFzLWVycm9ycycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuLi9TaXRlJztcbmltcG9ydCB7IEFuYWx5dGljcyB9IGZyb20gJy4vQW5hbHl0aWNzJztcblxuZXhwb3J0IGNsYXNzIEFjY2Vzc2liaWxpdHkge1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIHRhYmJlZEFtdW50ID0gMDtcbiAgICBwdWJsaWMgc3RhdGljIGN1cnJlbnQ6IHsgZWw6IEhUTUxFbGVtZW50OyBjYWxsYmFjazogRnVuY3Rpb24gfTtcbiAgICBwdWJsaWMgc3RhdGljIGlzT246IGJvb2xlYW47XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGUgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSA5KSB7XG4gICAgICAgICAgICAgICAgQWNjZXNzaWJpbGl0eS50YWJiZWRBbXVudCArPSAxO1xuICAgICAgICAgICAgICAgIGlmIChkZWJ1ZykgeyBjb25zb2xlLmxvZygnJWNhY2Nlc3NpYmlsaXR5JywgJ2JhY2tncm91bmQ6IHllbGxvdzsgY29sb3I6IGJsYWNrJywgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7IH1cbiAgICAgICAgICAgICAgICBodG1sLmNsYXNzTGlzdC50b2dnbGUoJ2FjY2Vzc2liaWxpdHknLCBBY2Nlc3NpYmlsaXR5LnRhYmJlZEFtdW50ID49IDIpO1xuICAgICAgICAgICAgICAgIEFjY2Vzc2liaWxpdHkuaXNPbiA9IGh0bWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2Nlc3NpYmlsaXR5Jyk7XG4gICAgICAgICAgICAgICAgQWNjZXNzaWJpbGl0eS50YWJiZWRBbXVudCA+PSAyICYmICEhQWNjZXNzaWJpbGl0eS5pc09uICYmIEFuYWx5dGljcy5zZW5kQ3VzdG9tRXZlbnQoeyBldmVudDogJ2FjY2Vzc2liaWxpdHlfb24nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5kZXRhaWwpIHtcbiAgICAgICAgICAgICAgICBodG1sLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY2Vzc2liaWxpdHknKTtcbiAgICAgICAgICAgICAgICBBY2Nlc3NpYmlsaXR5LnRhYmJlZEFtdW50ID0gMDtcbiAgICAgICAgICAgICAgICBBY2Nlc3NpYmlsaXR5LmlzT24gPSBodG1sLmNsYXNzTGlzdC5jb250YWlucygnYWNjZXNzaWJpbGl0eScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2tpcC10b10nKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRbMF0pIHsgcmV0dXJuOyB9XG4gICAgICAgICAgICAgICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGFyZ2V0fSBhYCkgYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICBodG1sLmNsYXNzTGlzdC5hZGQoJ2FjY2Vzc2liaWxpdHknKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBY2Nlc3NpYmlsaXR5IH0gZnJvbSAnLi9BY2Nlc3NpYmlsaXR5JztcbmltcG9ydCB7IEFQSSB9IGZyb20gJy4vQXBpJztcbmltcG9ydCB7IENTU0FuaW1hdGUgfSBmcm9tICcuL0NTU0FuaW1hdGUnO1xuaW1wb3J0IHsgRXhwYW5kIH0gZnJvbSAnLi9FeHBhbmQnO1xuaW1wb3J0IHsgSW1hZ2VzIH0gZnJvbSAnLi9JbWFnZXMnO1xuaW1wb3J0IHsgUmVjYXB0Y2hhIH0gZnJvbSAnLi9SZWNhcHRjaGEnO1xuaW1wb3J0IHsgU291bmRzIH0gZnJvbSAnLi9Tb3VuZHMnO1xuaW1wb3J0IHsgVmlicmF0aW9uIH0gZnJvbSAnLi9WaWJyYXRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXRzIHtcblxuICAgIHB1YmxpYyBzdGF0aWMgYmluZChlbD86IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cbiAgICAgICAgQWNjZXNzaWJpbGl0eS5pbml0KCk7XG4gICAgICAgIEFQSS5iaW5kKGVsKTtcbiAgICAgICAgQ1NTQW5pbWF0ZS5iaW5kKGVsKTtcbiAgICAgICAgRXhwYW5kLmJpbmQoZWwpO1xuICAgICAgICBJbWFnZXMuYmluZChlbCk7XG4gICAgICAgIFJlY2FwdGNoYS5iaW5kKGVsKTtcbiAgICAgICAgU291bmRzLmJpbmQoZWwpO1xuICAgICAgICBWaWJyYXRpb24uYmluZChlbCk7XG5cbiAgICB9XG59XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vZGVmaW5pdGlvbnMvZ2EuZC50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vU2l0ZS50c1wiIC8+XG5cblxuZGVjbGFyZSBsZXQgZ2E7XG5kZWNsYXJlIGxldCBndGFnO1xuZGVjbGFyZSBsZXQgZGF0YUxheWVyOiBPYmplY3RbXTtcblxudHlwZSBHQUV2ZW50UGFyYW1zID0ge1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICBldmVudDogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNsYXNzIEFuYWx5dGljcyB7XG5cbiAgICBwdWJsaWMgc3RhdGljIFRSQUNLSU5HX0lEOiBzdHJpbmc7XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBiaW5kKHdoZXJlPzogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgWy4uLih3aGVyZSB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZ2FdJyldLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmdhKTtcbiAgICAgICAgICAgICAgICBBbmFseXRpY3Muc2VuZEV2ZW50KGRhdGFbMF0gfHwgJycsIGRhdGFbMV0gfHwgJycsIGRhdGFbMl0gfHwgJycsIGRhdGFbM10gfHwgLTEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFsuLi4od2hlcmUgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWd0bV0nKV0uZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQuZ3RtKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRDdXN0b21FdmVudChkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBzZW5kQ3VzdG9tRXZlbnQoZGF0YTogR0FFdmVudFBhcmFtcyk6IHZvaWQge1xuICAgICAgICBpZiAodHlwZW9mIGd0YWcgIT09ICd1bmRlZmluZWQnICYmIGRhdGEuZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCclY2d0YWcgdHJhY2tpbmc6IGV2ZW50JywgJ2JhY2tncm91bmQ6IzFhNzNlODtjb2xvcjojZmZmJywgZGF0YSk7XG4gICAgICAgICAgICBjb25zdCBldmVudExhYmVsID0gZGF0YS5ldmVudC5yZXBsYWNlKC8tL2csICdfJyk7XG4gICAgICAgICAgICBkZWxldGUgZGF0YS5ldmVudDtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA/IGd0YWcoJ2V2ZW50JywgZXZlbnRMYWJlbCwgZGF0YSkgOiBndGFnKCdldmVudCcsIGV2ZW50TGFiZWwpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhTGF5ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaChkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCclY2d0bSB0cmFja2luZzogZXZlbnQnLCAnYmFja2dyb3VuZDojMWE3M2U4O2NvbG9yOiNmZmYnLCBkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3RhdGljIHNlbmRFdmVudChjYXRlZ29yeTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgbGFiZWw/OiBzdHJpbmcsIHZhbHVlPzogbnVtYmVyfHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAodHlwZW9mIGd0YWcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBndGFnKCdldmVudCcsIGFjdGlvbiwge1xuICAgICAgICAgICAgICAgIGV2ZW50X2NhdGVnb3J5OiBjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICBldmVudF9sYWJlbDogbGFiZWwsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCclY2d0YWcgdHJhY2tpbmc6IGV2ZW50JywgJ2JhY2tncm91bmQ6IzFhNzNlODtjb2xvcjojZmZmJywgY2F0ZWdvcnksIGFjdGlvbiwgbGFiZWwsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YUxheWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBldmVudDogYWN0aW9uLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGxhYmVsOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaChkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCclY2d0bSB0cmFja2luZzogZXZlbnQnLCAnYmFja2dyb3VuZDojMWE3M2U4O2NvbG9yOiNmZmYnLCBjYXRlZ29yeSwgYWN0aW9uLCBsYWJlbCwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBnYSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgY2F0ZWdvcnksIGFjdGlvbiwgbGFiZWwsIHZhbHVlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCclY2dhIHRyYWNraW5nOiBldmVudCcsICdiYWNrZ3JvdW5kOiMxYTczZTg7Y29sb3I6I2ZmZicsIGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBzZW5kUGFnZXZpZXcocGF0aG5hbWU/OiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YUxheWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncGFnZXZpZXcnLFxuICAgICAgICAgICAgICAgIC8vIHRpdGxlOiB0aXRsZSB8fCBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICAgICAgICBwYXRobmFtZTogcGF0aG5hbWUgfHwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnJWNndG0gdHJhY2tpbmc6IHBhZ2V2aWV3JywgJ2JhY2tncm91bmQ6IzFhNzNlODtjb2xvcjojZmZmJywgcGF0aG5hbWUgfHwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCB0aXRsZSB8fCBkb2N1bWVudC50aXRsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGd0YWcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBndGFnKCdjb25maWcnLCBBbmFseXRpY3MuVFJBQ0tJTkdfSUQsIHtcbiAgICAgICAgICAgICAgICBwYWdlX3BhdGg6IHBhdGhuYW1lIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICAgICAgICBwYWdlX3RpdGxlOiB0aXRsZSB8fCBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJyVjZ3RhZyB0cmFja2luZzogcGFnZXZpZXcnLCAnYmFja2dyb3VuZDojMWE3M2U4O2NvbG9yOiNmZmYnLCBwYXRobmFtZSB8fCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsIHRpdGxlIHx8IGRvY3VtZW50LnRpdGxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZ2EgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBnYSgnc2VuZCcsICdwYWdldmlldycsIHBhdGhuYW1lIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSB8fCBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICAgICAgICBwYXRobmFtZTogcGF0aG5hbWUgfHwgJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCclY2dhIHRyYWNraW5nOiBwYWdldmlldycsICdiYWNrZ3JvdW5kOiMxYTczZTg7Y29sb3I6I2ZmZicsIHBhdGhuYW1lIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgdGl0bGUgfHwgZG9jdW1lbnQudGl0bGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNhc2UtZGVjbGFyYXRpb25zICovXG5pbXBvcnQgeyBQdXNoU3RhdGVzIH0gZnJvbSAnLi4vUHVzaFN0YXRlcyc7XG5pbXBvcnQgeyBSZWNhcHRjaGEgfSBmcm9tICcuL1JlY2FwdGNoYSc7XG5pbXBvcnQgeyBzZXJpYWxpemVPYmplY3QgfSBmcm9tICcuLi9VdGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFwaURhdGEge1xuICAgIHVybD86IHN0cmluZztcbiAgICBiZWZvcmVDYWxsPzogc3RyaW5nO1xuICAgIGNhbGxiYWNrPzogc3RyaW5nO1xuICAgIGZvcm1TZWxlY3Rvcj86IHN0cmluZztcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWFueVxuICAgIHBhcmFtcz86IGFueTtcbiAgICBhY3Rpb24/OiAnUE9TVCcgfCAnREVMRVRFJyB8ICdHRVQnIHwgJ1BVVCcgfCAnUEFUQ0gnO1xufVxuXG5pbnRlcmZhY2UgSUFwaUVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgYXBpOiBJQXBpRGF0YTtcbn1cblxuXG5leHBvcnQgY2xhc3MgQVBJIHtcbiAgICBwcml2YXRlIHN0YXRpYyBiZWZvcmVDYWxscyA9IHtcblxuXG4gICAgICAgIHZhbGlkYXRlKGRhdGE6IElBcGlEYXRhLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgICAgIGxldCBwYXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnJztcblxuICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnaXMtZG9uZScpKSB7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZG9uZScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnLmpzLWVycm9yJykuZm9yRWFjaChlcnJvckVsID0+IHtcbiAgICAgICAgICAgICAgICBlcnJvckVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIGVycm9yRWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3JlcXVpcmVkXTpub3QoW2RhdGEtcmVjYXB0Y2hhXSknKS5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZSA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudDtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlLnRlc3QodmFsdWUpIHx8ICF2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHZhbHVlLmxlbmd0aCA+IDAgPyBcIkl0IHNlZW1zIHRoZXJlJ3MgYW4gaXNzdWUgd2l0aCB0aGUgZW1haWwgeW91IGVudGVyZWQuIDxicj4gUGxlYXNlIGRvdWJsZS1jaGVjayBhbmQgdHJ5IGFnYWluLlwiIDogJ1JlcXVpcmVkIGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbG9zZXN0KCdmaWVsZHNldCcpLnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbG9zZXN0KCdmaWVsZHNldCcpLnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzcyA9IChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhc3MubGVuZ3RoID4gNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHBhc3MubGVuZ3RoID4gMCA/ICdpbnZhbGlkLXBhc3MnIDogJ1JlcXVpcmVkIGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdSZXF1aXJlZCBmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ1JlcXVpcmVkIGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhW3JlcXVpcmVkXScpLmZvckVhY2godGV4dGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgodGV4dGFyZWEgYXMgSFRNTFRleHRBcmVhRWxlbWVudCkudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgIHRleHRhcmVhLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRleHRhcmVhLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdSZXF1aXJlZCBmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgIHRleHRhcmVhLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICBpZiAocGFzc2VkKSB7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1JlY2FwdGNoYSA/IFJlY2FwdGNoYS5jaGVjayhlbCBhcyBIVE1MRm9ybUVsZW1lbnQpIDogbnVsbF0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBBUEkuY2FsbEl0KGRhdGEsIGVsKTtcbiAgICAgICAgICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnLmpzLWVycm9yJykuZm9yRWFjaChlcnJvckVsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtZXJyb3JzJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2hhcy1lcnJvcnMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB2YWxpZGF0ZUJsdXIoZGF0YTogSUFwaURhdGEsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICAgICAgbGV0IHBhc3NlZCA9IHRydWU7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1kb25lJykpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kb25lJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZXJyb3InKS5mb3JFYWNoKGVycm9yRWwgPT4ge1xuICAgICAgICAgICAgICAgIGVycm9yRWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgZXJyb3JFbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcmVxdWlyZWRdOm5vdChbZGF0YS1yZWNhcHRjaGFdKScpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmUudGVzdCh2YWx1ZSkgfHwgIXZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gdmFsdWUubGVuZ3RoID4gMCA/ICdOT1QgVkFMSUQgRS1NQUlMIEZPUk1BVCcgOiAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNsb3Nlc3QoJ2ZpZWxkc2V0JykucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNsb3Nlc3QoJ2ZpZWxkc2V0JykucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzID0gKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFzcy5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcGFzcy5sZW5ndGggPiAwID8gJ2ludmFsaWQtcGFzcycgOiAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ1JlcXVpcmVkIGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1lcnJvcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUmVxdWlyZWQgZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWVycm9yJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWFbcmVxdWlyZWRdJykuZm9yRWFjaCh0ZXh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCh0ZXh0YXJlYSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KS52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRhcmVhLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ1JlcXVpcmVkIGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZXJyb3InKS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIGlmIChwYXNzZWQpIHtcbiAgICAgICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZXJyb3InKS5mb3JFYWNoKGVycm9yRWwgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvckVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWVycm9ycycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdoYXMtZXJyb3JzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICB9O1xuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBjYWxsYmFja3MgPSB7XG5cblxuICAgICAgICBvblN1YnNjcmliZShkYXRhOiBJQXBpRGF0YSwgZWw6IEhUTUxFbGVtZW50LCByZXNwb25zZSk6IHZvaWQge1xuICAgICAgICAgICAgbGV0ICRtZXNzYWdlID0gZWwucXVlcnlTZWxlY3RvcignLmpzLW1lc3NhZ2UnKTtcblxuICAgICAgICAgICAgaWYgKCEkbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdqcy1tZXNzYWdlJywgJ21lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICBlbC5hcHBlbmQoZGl2KTtcbiAgICAgICAgICAgICAgICAkbWVzc2FnZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZXNzYWdlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSAocmVzcG9uc2UubWVzc2FnZSk7XG5cbiAgICAgICAgICAgICRtZXNzYWdlLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLWNvbXBsZXRlZCcpO1xuXG4gICAgICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goZWxlbSA9PiBlbGVtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdibHVyJykpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblNlbmRNZXNzYWdlKGRhdGE6IElBcGlEYXRhLCBlbDogSFRNTEVsZW1lbnQsIHJlc3BvbnNlKTogdm9pZCB7XG4gICAgICAgICAgICBsZXQgJG1lc3NhZ2UgPSBlbC5xdWVyeVNlbGVjdG9yKCcuanMtbWVzc2FnZScpO1xuXG4gICAgICAgICAgICBpZiAoISRtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZWwuYXBwZW5kKCc8ZGl2IGNsYXNzPVwianMtbWVzc2FnZSBtZXNzYWdlXCI+Jyk7XG4gICAgICAgICAgICAgICAgJG1lc3NhZ2UgPSBlbC5xdWVyeVNlbGVjdG9yKCcuanMtbWVzc2FnZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBodG1sID0gKHJlc3BvbnNlLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAkbWVzc2FnZS5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdpcy1jb21wbGV0ZWQnKTtcblxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKGVsZW0gPT4gZWxlbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnYmx1cicpKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVsb2FkOiAoKTogdm9pZCA9PiB7XG4gICAgICAgICAgICBQdXNoU3RhdGVzLnJlbG9hZCgpO1xuICAgICAgICB9LFxuICAgIH07XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgYmluZCh3aGVyZT86IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cbiAgICAgICAgWy4uLih3aGVyZSB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYXBpXTpub3QoZm9ybSknKV1cbiAgICAgICAgICAgIC5mb3JFYWNoKGFwaUVsID0+IHtcbiAgICAgICAgICAgICAgICBhcGlFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIEFQSS5vbkFjdGlvbik7XG4gICAgICAgICAgICAgICAgYXBpRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBBUEkub25BY3Rpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgWy4uLih3aGVyZSB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbCgnZm9ybVtkYXRhLWFwaV0nKV0uZm9yRWFjaChhcGlGb3JtRWwgPT4ge1xuICAgICAgICAgICAgYXBpRm9ybUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIEFQSS5vbkFjdGlvbik7XG4gICAgICAgICAgICBhcGlGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgQVBJLm9uQWN0aW9uKTtcbiAgICAgICAgICAgIGFwaUZvcm1FbC5zZXRBdHRyaWJ1dGUoJ25vdmFsaWRhdGUnLCAnbm92YWxpZGF0ZScpO1xuXG4gICAgICAgICAgICBhcGlGb3JtRWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcmVxdWlyZWRdJykuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YTogSUFwaURhdGEgPSB7IC4uLkpTT04ucGFyc2UoYXBpRm9ybUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1hcGknKSkgfTtcbiAgICAgICAgICAgICAgICAgICAgQVBJLmJlZm9yZUNhbGxzLnZhbGlkYXRlQmx1cihkYXRhLCBhcGlGb3JtRWwgYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgcHVibGljIHN0YXRpYyBjYWxsSXQoZGF0YUFwaTogSUFwaURhdGEsIGVsOiBIVE1MRWxlbWVudCwgY3VzdG9tQ2FsbGJhY2s/OiBGdW5jdGlvbik6IFByb21pc2U8YW55PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBBUEkucHJlcHJvY2Vzc0RhdGEoZGF0YUFwaSwgZWwpO1xuXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLWRvaW5nLXJlcXVlc3QnKTtcblxuICAgICAgICBjb25zdCBhY3Rpb24gPSBkYXRhLmFjdGlvbiB8fCAnUE9TVCc7XG4gICAgICAgIGRlbGV0ZSBkYXRhLmFjdGlvbjtcblxuICAgICAgICBjb25zdCB1cmwgPSBkYXRhLnVybCB8fCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgIGRlbGV0ZSBkYXRhLnVybDtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kb2luZy1yZXF1ZXN0Jyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGFCb2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkYXRhIGFzIGFueSk7XG5cbiAgICAgICAgICAgIGZldGNoKHVybCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogYWN0aW9uLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0sXG4gICAgICAgICAgICAgICAgYm9keTogZGF0YUJvZHksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkub25TdWNjZXNzKGRhdGEsIGVsLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tQ2FsbGJhY2sgJiYgdHlwZW9mIGN1c3RvbUNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21DYWxsYmFjayhkYXRhLCBlbCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEFQSSBlcnJvcjogJHtlcnJvcn1gLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBwcmVwcm9jZXNzRGF0YShkYXRhOiBJQXBpRGF0YSwgZWw6IEhUTUxFbGVtZW50KTogSUFwaURhdGEge1xuICAgICAgICAvLyBnZXQgZGF0YSBpZiBhcGkgY2FsbGVkIG9uIGZvcm0gZWxlbWVudDpcbiAgICAgICAgaWYgKGVsLm1hdGNoZXMoJ2Zvcm0nKSkge1xuICAgICAgICAgICAgZGF0YS51cmwgPSAhZGF0YS51cmwgJiYgZWwuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSA/IGVsLmdldEF0dHJpYnV0ZSgnYWN0aW9uJykgOiBkYXRhLnVybDtcbiAgICAgICAgICAgIGRhdGEgPSBPYmplY3QuYXNzaWduKGRhdGEsIHNlcmlhbGl6ZU9iamVjdChlbCBhcyBIVE1MRm9ybUVsZW1lbnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhIGlmIGFwaSBjYWxsZWQgb24gbGluayBlbGVtZW50OlxuICAgICAgICBpZiAoZWwubWF0Y2hlcygnW2hyZWZdJykpIHtcbiAgICAgICAgICAgIGRhdGEudXJsID0gIWRhdGEudXJsICYmIGVsLmdldEF0dHJpYnV0ZSgnaHJlZicpID8gZWwuZ2V0QXR0cmlidXRlKCdocmVmJykgOiBkYXRhLnVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdldCBhZGRpdGlvbmFsIGRhdGEgZnJvbSBleHRlcm5hbCBmb3JtOlxuICAgICAgICBpZiAoZGF0YS5mb3JtU2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGRhdGEgPSBPYmplY3QuYXNzaWduKGRhdGEsIHNlcmlhbGl6ZU9iamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRhdGEuZm9ybVNlbGVjdG9yKSkpO1xuICAgICAgICAgICAgZGVsZXRlIGRhdGEuZm9ybVNlbGVjdG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmxhdHRlbjpcbiAgICAgICAgaWYgKGRhdGEucGFyYW1zKSB7XG4gICAgICAgICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbihkYXRhLCBkYXRhLnBhcmFtcyk7XG4gICAgICAgICAgICBkZWxldGUgZGF0YS5wYXJhbXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgc3RhdGljIG9uQWN0aW9uID0gKGU6IEV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjb25zdCBlbCA9IGUuY3VycmVudFRhcmdldCBhcyBJQXBpRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGF0YTogSUFwaURhdGEgPSB7IC4uLkpTT04ucGFyc2UoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWFwaScpKSB9O1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLCBlbCk7XG5cbiAgICAgICAgLy8gYmVmb3JlQ2FsbCBoYW5kbGVyOlxuICAgICAgICBpZiAoZGF0YS5iZWZvcmVDYWxsKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5iZWZvcmVDYWxsIGluIEFQSS5iZWZvcmVDYWxscykge1xuICAgICAgICAgICAgICAgIEFQSS5iZWZvcmVDYWxsc1tkYXRhLmJlZm9yZUNhbGxdKGRhdGEsIGVsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBBUEkuY2FsbEl0KGRhdGEsIGVsKTtcbiAgICB9O1xuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBvblN1Y2Nlc3MgPSAoZGF0YTogSUFwaURhdGEsIGVsOiBIVE1MRWxlbWVudCwgcmVzcG9uc2UpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKGRhdGEuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmNhbGxiYWNrIGluIEFQSS5jYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICBBUEkuY2FsbGJhY2tzW2RhdGEuY2FsbGJhY2tdKGRhdGEsIGVsLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1zID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKV07XG5cbiAgICAgICAgZm9ybXMuZm9yRWFjaChmb3JtID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IFsuLi5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pcy1lcnJvcicpLCAuLi5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5oYXMtZXJyb3JzJyldO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmpzLWVycm9yJyk7XG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRvaW5nLXJlcXVlc3QnLCAnaXMtY29tcGxldGVkJywgJ2hhcy1lcnJvcnMnKTtcblxuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBlcnJvck1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICAgICAgZm9yIChjb25zdCBlcnIgb2YgZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgZXJyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVycm9yJywgJ2hhcy1lcnJvcnMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbiIsIi8qKlxuICogRmlyZSBzaW5nbGUgb25lLXdheSBhbmltYXRpb25zIG9uIGhvdmVyLlxuICpcbiAqIExpc3RlbmVycyBhcmUgYm91bmQgb24gYFtkYXRhLWNzc2FuaW1hdGVdYCBlbGVtZW50cyB0aGVtc2VsdmVzXG4gKiBvciBvbiBlbGVtZW50cyBzcGVjaWZpZWQgYnkgc2VsZWN0b3IgcGFzc2VkIGluIHRoZSBkYXRhc2V0OlxuICogYGBgPGRpdiBkYXRhLWNzc2FuaW1hdGU9XCIuanMtY2hpbGRcIj48c3BhbiBjbGFzcz1cImpzLWNoaWxkXCI+YGBgXG4gKlxuICogVG8gZmlyZSB0aGUgYW5pbWF0aW9uIHVzZSBgaXMtYW5pbWF0aW5nYCBjbGFzcyB3aGljaCBpcyBhZGRlZCBvbiBgbW91c2VlbnRlcmAgZXZlbnQuXG4gKiBgYGBbZGF0YS1jc3NhbmltYXRlXS5pcy1hbmltYXRpbmcgeyBhbmltYXRpb246IGN1c3RvbUFuaW1hdGlvbjsgfWBgYFxuICpcbiAqIEl0IGNhbiBiZSB1c2VkIHdpdGggYm90aDogY3NzLXRyYW5zaXRpb24gYW5kIGNzcy1hbmltYXRpb247XG4gKi9cblxuZXhwb3J0IGNsYXNzIENTU0FuaW1hdGUge1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIGJpbmQod2hlcmU/OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBbLi4uKHdoZXJlIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jc3NhbmltYXRlXScpXS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gKGVsIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmNzc2FuaW1hdGU7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RvciA/IGVsLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIDogZWw7XG4gICAgICAgICAgICB0YXJnZXQ/LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBDU1NBbmltYXRlLm9uQW5pbWF0aW9uRW5kKTtcbiAgICAgICAgICAgIHRhcmdldD8uYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgQ1NTQW5pbWF0ZS5vbkFuaW1hdGlvbkVuZCk7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgQ1NTQW5pbWF0ZS5vbk1vdXNlRW50ZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgc3RhdGljIG9uQW5pbWF0aW9uRW5kID0gZSA9PiB7XG4gICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWNzc2FuaW1hdGVdJykuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYW5pbWF0aW5nJyk7XG4gICAgfTtcblxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgb25Nb3VzZUVudGVyID0gZSA9PiB7XG4gICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdpcy1hbmltYXRpbmcnKTtcbiAgICB9O1xufVxuIiwiZXhwb3J0IGNsYXNzIEV4cGFuZCB7XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyByZXNpemUgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0TWF4SGVpZ2h0KCk7XG4gICAgfTtcblxuXG4gICAgcHVibGljIHN0YXRpYyBiaW5kKHdoZXJlPzogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAgICAgICB0aGlzLnNldE1heEhlaWdodCgpO1xuXG4gICAgICAgIChbLi4uKHdoZXJlIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1leHBhbmRdW2lkXScpXSBhcyBIVE1MRWxlbWVudFtdKVxuICAgICAgICAgICAgLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2FyaWEtY29udHJvbHM9XCIke2VsZW1lbnQuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdG9nZ2xlQnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIEV4cGFuZC5vbkFyaWFDb250cm9sc0NsaWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3RhdGljIHVuYmluZCgpOiB2b2lkIHtcbiAgICAgICAgKFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1leHBhbmRdW2lkXScpXSBhcyBIVE1MRWxlbWVudFtdKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9nZ2xlQnV0dG9uID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbYXJpYS1jb250cm9sc10nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbj8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBFeHBhbmQub25BcmlhQ29udHJvbHNDbGljayk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBvbkFyaWFDb250cm9sc0NsaWNrID0gKGU6IEV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGlzRXhwYW5kZWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJztcblxuICAgICAgICBpc0V4cGFuZGVkID8gdGhpcy5jb2xsYXBzZSh0YXJnZXQpIDogdGhpcy5leHBhbmQodGFyZ2V0KTtcbiAgICB9O1xuXG5cblxuICAgIHByaXZhdGUgc3RhdGljIGV4cGFuZCA9ICh0YXJnZXQ6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICB0YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1leHBhbmRlZCcpO1xuICAgICAgICAodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5qcy1leHBhbmQtdGV4dCcpIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWV4cGFuZGVkLXRleHQnKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpKS5jbGFzc0xpc3QuYWRkKCdpcy1leHBhbmRlZCcpO1xuXG4gICAgICAgIHRhcmdldC5kYXRhc2V0LnNjcm9sbFkgPSAodGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5zY3JvbGxZKS50b1N0cmluZygpO1xuICAgIH07XG5cblxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY29sbGFwc2UgPSAodGFyZ2V0OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgIHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWV4cGFuZGVkJyk7XG4gICAgICAgICh0YXJnZXQucXVlcnlTZWxlY3RvcignLmpzLWV4cGFuZC10ZXh0JykgYXMgSFRNTEVsZW1lbnQpLmlubmVyVGV4dCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGlkZGVuLXRleHQnKTtcblxuICAgICAgICBjb25zdCBlbGVtZW50VG9wID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQuc2Nyb2xsWSwgMTApO1xuXG4gICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZXh0X19leHBhbmQtdHJpZ2dlcicpICYmIGVsZW1lbnRUb3AgPCB3aW5kb3cuc2Nyb2xsWSkge1xuXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IGVsZW1lbnRUb3AgLSAxMDAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpKS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1leHBhbmRlZCcpO1xuICAgICAgICAgICAgfSwgNTAwKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpKS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1leHBhbmRlZCcpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBzZXRNYXhIZWlnaHQgPSAoKSA9PiB7XG4gICAgICAgIChbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZXhwYW5kXVtpZF0nKV0gYXMgSFRNTEVsZW1lbnRbXSkuZm9yRWFjaChlbGVtZW50ID0+IHtcblxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IDA7XG4gICAgICAgICAgICBbLi4uZWxlbWVudC5jaGlsZHJlbl0uZm9yRWFjaChjaGlsZHJlbiA9PiB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ICs9IGNoaWxkcmVuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9kZWZpbml0aW9ucy9pbWFnZXNsb2FkZWQuZC50c1wiIC8+XG5cbmltcG9ydCB7IGRlYnVnLCBsb2NhbCB9IGZyb20gJy4uL1NpdGUnO1xuXG5cbmV4cG9ydCBjbGFzcyBJbWFnZXMge1xuXG5cbiAgICAvKipcbiAgICAgKiBwcmVsb2FkIGltYWdlc1xuICAgICAqIEBwYXJhbSB7Tm9kZUxpc3RPZjxIVE1MSW1hZ2VFbGVtZW50Pn0gaW1nRWxlbWVudHMgaW1hZ2VzIHRvIHByZWxvYWRcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBsb2FkaW5nIGltYWdlcyBwcm9taXNlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBwcmVsb2FkKGltZ0VsZW1lbnRzOiBOb2RlTGlzdE9mPEhUTUxJbWFnZUVsZW1lbnQ+KTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgICAgICAgaWYgKCFpbWdFbGVtZW50cyB8fCAhaW1nRWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbCA9IGltYWdlc0xvYWRlZChpbWdFbGVtZW50cyk7XG4gICAgICAgICAgICAvLyAobG9jYWwgfHwgZGVidWcpICYmIGlsLm9uKCdwcm9ncmVzcycsICgpID0+IGNvbnNvbGUubG9nKGlsKSk7XG4gICAgICAgICAgICBpbC5vbignYWx3YXlzJywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIGxpc3RlbiB0byBhbGwgaW1hZ2VzIGxvYWRlZCBldmVudFxuICAgICAqIG1hcmsgdGhlbSBhcyBsb2FkZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGJpbmQod2hlcmU/OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBpbCA9IGltYWdlc0xvYWRlZCh3aGVyZSB8fCBkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgaWwub24oJ3Byb2dyZXNzJywgSW1hZ2VzLm9uUHJvZ3Jlc3MpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogaW1hZ2VzTG9hZGVkIHN1Y2Nlc3NmdWwgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBvblByb2dyZXNzID0gKGluc3RhbmNlLCB7IGltZywgaXNMb2FkZWQgfSkgPT4ge1xuICAgICAgICBpZiAoaXNMb2FkZWQgJiYgaW1nLm5hdHVyYWxXaWR0aCA+IDAgJiYgaW1nLm5hdHVyYWxIZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRlZCcpO1xuICAgICAgICAgICAgaW1nLmNsb3Nlc3QoJ2ZpZ3VyZScpPy5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkZWQnKTtcbiAgICAgICAgICAgIGltZy5jbG9zZXN0KCcuaW1hZ2UnKT8uY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGVkJyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9kZWZpbml0aW9ucy9ncmVjYXB0Y2hhLmQudHNcIiAvPlxuXG5pbXBvcnQgeyBnZXRTY3JpcHQgfSBmcm9tICcuLi9VdGlscyc7XG5cblxuZXhwb3J0IGNsYXNzIFJlY2FwdGNoYSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgU0lURV9LRVk6IHN0cmluZztcbiAgICBwcml2YXRlIHN0YXRpYyBpbnB1dFNlbGVjdG9yID0gJ1tkYXRhLXJlY2FwdGNoYV0nO1xuXG5cbiAgICBwdWJsaWMgc3RhdGljIGJpbmQoc2VsZWN0b3I/OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdHlwZW9mIHNlbGVjdG9yID09PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50LmJvZHkgOiBzZWxlY3RvcjtcblxuICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJlY2FwdGNoYWtleV0nKSkgeyByZXR1cm47IH1cblxuICAgICAgICBSZWNhcHRjaGEuU0lURV9LRVkgPSBSZWNhcHRjaGEuU0lURV9LRVlcbiAgICAgICAgfHwgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJlY2FwdGNoYWtleV0nKSBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5yZWNhcHRjaGFrZXk7XG5cbiAgICAgICAgaWYgKCF0YXJnZXQucXVlcnlTZWxlY3RvcihSZWNhcHRjaGEuaW5wdXRTZWxlY3RvcikpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBncmVjYXB0Y2hhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZ2V0U2NyaXB0KFxuICAgICAgICAgICAgICAgIGAvL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanM/cmVuZGVyPSR7UmVjYXB0Y2hhLlNJVEVfS0VZfWAsXG4gICAgICAgICAgICAgICAgKCkgPT4gUmVjYXB0Y2hhLmF0dGFjaCh0YXJnZXQucXVlcnlTZWxlY3RvcihSZWNhcHRjaGEuaW5wdXRTZWxlY3RvcikpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFJlY2FwdGNoYS5hdHRhY2godGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoUmVjYXB0Y2hhLmlucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gbGlua2VkIHdpdGggYFdpZGdldHMuRm9ybWBcbiAgICBwdWJsaWMgc3RhdGljIGNoZWNrKGZvcm06IEhUTUxGb3JtRWxlbWVudCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gZm9ybS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpLnNwbGl0KCcvJykucG9wKCkucmVwbGFjZSgvW14wLTlhLXpdL2dpLCAnJykgfHwgJ2FjdGlvbic7XG4gICAgICAgICAgICBncmVjYXB0Y2hhLmV4ZWN1dGUoUmVjYXB0Y2hhLlNJVEVfS0VZLCB7IGFjdGlvbiB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHRva2VuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgUmVjYXB0Y2hhLm9uRXhlY3V0ZShmb3JtLCB0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgc3RhdGljIGF0dGFjaCh0YXJnZXQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGdyZWNhcHRjaGEucmVhZHkoKCkgPT4ge1xuICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhID0geyBSZWNhcHRjaGEgfTtcbiAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCdmb3JtJykuY2xhc3NMaXN0LmFkZCgnaGFzLXJlY2FwdGNoYScpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgc3RhdGljIG9uRXhlY3V0ZShmb3JtOiBIVE1MRm9ybUVsZW1lbnQsIHRva2VuOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPXRva2VuXScpKSB7IGZvcm0uYXBwZW5kKCc8aW5wdXQgbmFtZT1cInRva2VuXCIgdHlwZT1cImhpZGRlblwiIHZhbHVlPVwiXCI+Jyk7IH1cbiAgICAgICAgY29uc3QgaW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPXRva2VuXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGlucHV0LnZhbHVlID0gdG9rZW47XG4gICAgfVxufVxuIiwid2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dDtcblxuY29uc3QgY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcblxuZXhwb3J0IGNsYXNzIFNvdW5kIHtcblxuICAgIHByaXZhdGUgdXJsOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBidWZmZXI6IEF1ZGlvQnVmZmVyO1xuICAgIHByaXZhdGUgc291cmNlczogQXVkaW9CdWZmZXJTb3VyY2VOb2RlW10gPSBbXTtcblxuXG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGxvYWQoKTogUHJvbWlzZTxBdWRpb0J1ZmZlcnxFcnJvcj4ge1xuXG4gICAgICAgIGlmICghdGhpcy51cmwpIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYE1pc3Npbmcgb3IgaW52YWxpZCBVUkw6ICR7dGhpcy51cmx9YCkpO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIpIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5idWZmZXIpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgdGhpcy51cmwsIHRydWUpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXG4gICAgICAgICAgICAvLyBEZWNvZGUgYXN5bmNocm9ub3VzbHk6XG4gICAgICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRlY29kZUF1ZGlvRGF0YShyZXF1ZXN0LnJlc3BvbnNlLCBidWZmZXIgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgU291bmQgZGVjb2RpbmcgZXJyb3I6ICR7dGhpcy51cmx9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBTb3VuZCBkZWNvZGluZyBlcnJvcjogJHt0aGlzLnVybH1gKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShidWZmZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZXJyID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU291bmQgWE1MSHR0cFJlcXVlc3QgZXJyb3I6JywgZXJyKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHBsYXkodm9sdW1lID0gMSwgdGltZSA9IDApOiBQcm9taXNlPHZvaWQ+IHtcblxuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgc291bmQgc291cmNlIGFuZCBhc3NpZ24gaXQgdGhlIGxvYWRlZCBzb3VuZCdzIGJ1ZmZlcjpcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZTogQXVkaW9CdWZmZXJTb3VyY2VOb2RlID0gY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgICAgIHNvdXJjZS5idWZmZXIgPSB0aGlzLmJ1ZmZlcjtcblxuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBhbGwgc291cmNlcyBjcmVhdGVkLCBhbmQgc3RvcCB0cmFja2luZyB0aGVtIG9uY2UgdGhleSBmaW5pc2ggcGxheWluZzpcbiAgICAgICAgICAgIGNvbnN0IGluc2VydGVkQXQgPSB0aGlzLnNvdXJjZXMucHVzaChzb3VyY2UpIC0gMTtcbiAgICAgICAgICAgIHNvdXJjZS5vbmVuZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlcy5zcGxpY2UoaW5zZXJ0ZWRBdCwgMSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZ2FpbiBub2RlIHdpdGggdGhlIGRlc2lyZWQgdm9sdW1lOlxuICAgICAgICAgICAgY29uc3QgZ2Fpbk5vZGUgPSBjb250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgICAgIGdhaW5Ob2RlLmdhaW4udmFsdWUgPSB2b2x1bWU7XG5cbiAgICAgICAgICAgIC8vIENvbm5lY3Qgbm9kZXM6XG4gICAgICAgICAgICBzb3VyY2UuY29ubmVjdChnYWluTm9kZSkuY29ubmVjdChjb250ZXh0LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgcGxheWluZyBhdCB0aGUgZGVzaXJlZCB0aW1lOlxuICAgICAgICAgICAgc291cmNlLnN0YXJ0KHRpbWUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogU3RvcCBhbnkgc291cmNlcyBzdGlsbCBwbGF5aW5nOlxuICAgICAqL1xuICAgIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNvdXJjZXMuZm9yRWFjaChzb3VyY2UgPT4gc291cmNlLnN0b3AoMCkpO1xuICAgICAgICB0aGlzLnNvdXJjZXMgPSBbXTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRCcm93c2VyIH0gZnJvbSAnLi4vQnJvd3Nlcic7XG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gJy4vU291bmQnO1xuXG5leHBvcnQgY2xhc3MgU291bmRzIHtcblxuICAgIHByaXZhdGUgc3RhdGljIHJvb3Q6IHN0cmluZyA9ICcvcHVibGljL3RoZW1lL3NvdW5kcy8nO1xuICAgIHByaXZhdGUgc3RhdGljIGNhblBsYXk6IGJvb2xlYW4gPSBTb3VuZHMuc3VwcG9ydHNBdWRpbygpO1xuICAgIHByaXZhdGUgc3RhdGljIG11dGVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBzdGF0aWMgc291cmNlcyA9IHtcbiAgICAgICAgY2xpY2s6ICd0aWNrLm1wMycsXG4gICAgICAgIGhvdmVyOiAndGFwLXNtYWxsZXN0Lm1wMycsXG4gICAgICAgIG1lbnU6ICd0YXAta2lzc3kubXAzJyxcbiAgICAgICAgcGxheWVyQnRuOiAnNjI3ODQ4X19mcmFuY29pc3RqcF9fcmV3LW11c2lxdWUtc3RvcC1vZmZfMDIubXAzJyxcbiAgICAgICAgcGxheWVyUmV3aW5kOiAnNjI3ODQ4X19mcmFuY29pc3RqcF9fcmV3LW11c2lxdWUtc3RvcC1vZmZfMDEubXAzJyxcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgc291bmRzOiB7IFtrZXk6IHN0cmluZ106IFNvdW5kIH07XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBzdXBwb3J0c0F1ZGlvKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEod2luZG93LkF1ZGlvQ29udGV4dFxuICAgICAgICAgICAgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dFxuICAgICAgICAgICAgfHwgKHdpbmRvdyBhcyBhbnkpLm1vekF1ZGlvQ29udGV4dFxuICAgICAgICAgICAgfHwgKHdpbmRvdyBhcyBhbnkpLm9BdWRpb0NvbnRleHRcbiAgICAgICAgICAgIHx8ICh3aW5kb3cgYXMgYW55KS5tc0F1ZGlvQ29udGV4dCkgJiYgIWdldEJyb3dzZXIoKS5waG9uZTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBpbml0KCk6IHZvaWQge1xuICAgICAgICBpZiAoIVNvdW5kcy5jYW5QbGF5KSB7IHJldHVybjsgfVxuXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKFNvdW5kcy5zb3VyY2VzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIFNvdW5kcy5zb3VuZHNba2V5XSA9IG5ldyBTb3VuZChTb3VuZHMucm9vdCArIHZhbHVlKTtcbiAgICAgICAgICAgIFNvdW5kcy5zb3VuZHNba2V5XS5sb2FkKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3RhdGljIGJpbmQod2hlcmU/OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXG4gICAgICAgIGlmICghU291bmRzLmNhblBsYXkpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgaWYgKCFTb3VuZHMuc291bmRzKSB7XG4gICAgICAgICAgICBTb3VuZHMuc291bmRzID0ge307XG4gICAgICAgICAgICBTb3VuZHMuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgWy4uLih3aGVyZSB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc291bmQtaG92ZXJdJyldLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnNvdW5kSG92ZXIgfHwgJ2hvdmVyJztcbiAgICAgICAgICAgICAgICBTb3VuZHMucGxheSh0eXBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBbLi4uKHdoZXJlIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zb3VuZC1jbGlja10nKV0uZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnNvdW5kQ2xpY2sgfHwgJ2NsaWNrJztcbiAgICAgICAgICAgICAgICBTb3VuZHMucGxheSh0eXBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1nZW5lcmF0ZS1zb3VuZHNdJylcbiAgICAgICAgICAgIC5mb3JFYWNoKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBTb3VuZHMuZ2VuZXJhdGVTb3VuZFRlc3RlcihlKSkpO1xuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy10b2dnbGUtc291bmRzJylcbiAgICAgICAgICAgIC5mb3JFYWNoKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgU291bmRzLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuXG5cbiAgICBwdWJsaWMgc3RhdGljIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICAgICAgU291bmRzLm11dGVkID0gIVNvdW5kcy5tdXRlZDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdpcy1tdXRlZCcsIFNvdW5kcy5tdXRlZCk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBzdGF0aWMgcGxheSh0eXBlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKFNvdW5kcy5tdXRlZCB8fCAhU291bmRzLmNhblBsYXkgfHwgIVNvdW5kcy5zb3VuZHNbdHlwZV0pIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOyB9XG4gICAgICAgIHJldHVybiBTb3VuZHMuc291bmRzW3R5cGVdLnBsYXkoKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVTb3VuZFRlc3RlcihlKTogdm9pZCB7XG4gICAgICAgIGxldCBodG1sID0gJzx1bD4nO1xuICAgICAgICBPYmplY3Qua2V5cyhTb3VuZHMuc291cmNlcykuZm9yRWFjaChwcm9wZXJ0eSA9PiB7XG4gICAgICAgICAgICBodG1sICs9IGA8bGkgY2xhc3M9XCJzb3VuZC10ZXN0XCIgZGF0YS1zb3VuZC1jbGljaz1cIiR7cHJvcGVydHl9XCI+PHN0cm9uZz4ke3Byb3BlcnR5fTwvc3Ryb25nPiAke1NvdW5kcy5zb3VyY2VzW3Byb3BlcnR5XX08L2xpPmA7XG4gICAgICAgIH0pO1xuICAgICAgICBodG1sICs9ICc8L3VsPic7XG4gICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBlLmN1cnJlbnRUYXJnZXQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGh0bWwpO1xuICAgICAgICBTb3VuZHMuYmluZChlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFZpYnJhdGlvbiB7XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgYmluZCh3aGVyZT86IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIFsuLi4od2hlcmUgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EsIGxhYmVsLCBidXR0b24nKV0uZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIFZpYnJhdGlvbi5vbkNsaWNrKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBvbkNsaWNrID0gZSA9PiB7XG4gICAgICAgIG5hdmlnYXRvci52aWJyYXRlKDUpO1xuICAgIH07XG59XG4iXX0=
